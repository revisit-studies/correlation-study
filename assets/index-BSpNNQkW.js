var vNe=Object.defineProperty;var bNe=(e,t,n)=>t in e?vNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _Ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ea=(e,t,n)=>(bNe(e,typeof t!="symbol"?t+"":t,n),n);var zzt=_Ne((OUt,bK)=>{function ENe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ha(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wNe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Cue={exports:{}},mR={},Aue={exports:{}},In={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT=Symbol.for("react.element"),xNe=Symbol.for("react.portal"),SNe=Symbol.for("react.fragment"),TNe=Symbol.for("react.strict_mode"),CNe=Symbol.for("react.profiler"),ANe=Symbol.for("react.provider"),DNe=Symbol.for("react.context"),INe=Symbol.for("react.forward_ref"),NNe=Symbol.for("react.suspense"),kNe=Symbol.for("react.memo"),RNe=Symbol.for("react.lazy"),LK=Symbol.iterator;function PNe(e){return e===null||typeof e!="object"?null:(e=LK&&e[LK]||e["@@iterator"],typeof e=="function"?e:null)}var Due={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iue=Object.assign,Nue={};function t_(e,t,n){this.props=e,this.context=t,this.refs=Nue,this.updater=n||Due}t_.prototype.isReactComponent={};t_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};t_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kue(){}kue.prototype=t_.prototype;function uB(e,t,n){this.props=e,this.context=t,this.refs=Nue,this.updater=n||Due}var lB=uB.prototype=new kue;lB.constructor=uB;Iue(lB,t_.prototype);lB.isPureReactComponent=!0;var BK=Array.isArray,Rue=Object.prototype.hasOwnProperty,cB={current:null},Pue={key:!0,ref:!0,__self:!0,__source:!0};function Oue(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Rue.call(t,r)&&!Pue.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:gT,type:e,key:s,ref:o,props:i,_owner:cB.current}}function ONe(e,t){return{$$typeof:gT,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fB(e){return typeof e=="object"&&e!==null&&e.$$typeof===gT}function MNe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jK=/\/+/g;function WM(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MNe(""+e.key):t.toString(36)}function QA(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case gT:case xNe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+WM(o,0):r,BK(i)?(n="",e!=null&&(n=e.replace(jK,"$&/")+"/"),QA(i,t,n,"",function(l){return l})):i!=null&&(fB(i)&&(i=ONe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jK,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",BK(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+WM(s,a);o+=QA(s,t,n,u,i)}else if(u=PNe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+WM(s,a++),o+=QA(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fC(e,t,n){if(e==null)return e;var r=[],i=0;return QA(e,r,"","",function(s){return t.call(n,s,i++)}),r}function $Ne(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pa={current:null},JA={transition:null},FNe={ReactCurrentDispatcher:pa,ReactCurrentBatchConfig:JA,ReactCurrentOwner:cB};function Mue(){throw Error("act(...) is not supported in production builds of React.")}In.Children={map:fC,forEach:function(e,t,n){fC(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fC(e,function(){t++}),t},toArray:function(e){return fC(e,function(t){return t})||[]},only:function(e){if(!fB(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};In.Component=t_;In.Fragment=SNe;In.Profiler=CNe;In.PureComponent=uB;In.StrictMode=TNe;In.Suspense=NNe;In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FNe;In.act=Mue;In.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Iue({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=cB.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Rue.call(t,u)&&!Pue.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:gT,type:e.type,key:i,ref:s,props:r,_owner:o}};In.createContext=function(e){return e={$$typeof:DNe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ANe,_context:e},e.Consumer=e};In.createElement=Oue;In.createFactory=function(e){var t=Oue.bind(null,e);return t.type=e,t};In.createRef=function(){return{current:null}};In.forwardRef=function(e){return{$$typeof:INe,render:e}};In.isValidElement=fB;In.lazy=function(e){return{$$typeof:RNe,_payload:{_status:-1,_result:e},_init:$Ne}};In.memo=function(e,t){return{$$typeof:kNe,type:e,compare:t===void 0?null:t}};In.startTransition=function(e){var t=JA.transition;JA.transition={};try{e()}finally{JA.transition=t}};In.unstable_act=Mue;In.useCallback=function(e,t){return pa.current.useCallback(e,t)};In.useContext=function(e){return pa.current.useContext(e)};In.useDebugValue=function(){};In.useDeferredValue=function(e){return pa.current.useDeferredValue(e)};In.useEffect=function(e,t){return pa.current.useEffect(e,t)};In.useId=function(){return pa.current.useId()};In.useImperativeHandle=function(e,t,n){return pa.current.useImperativeHandle(e,t,n)};In.useInsertionEffect=function(e,t){return pa.current.useInsertionEffect(e,t)};In.useLayoutEffect=function(e,t){return pa.current.useLayoutEffect(e,t)};In.useMemo=function(e,t){return pa.current.useMemo(e,t)};In.useReducer=function(e,t,n){return pa.current.useReducer(e,t,n)};In.useRef=function(e){return pa.current.useRef(e)};In.useState=function(e){return pa.current.useState(e)};In.useSyncExternalStore=function(e,t,n){return pa.current.useSyncExternalStore(e,t,n)};In.useTransition=function(){return pa.current.useTransition()};In.version="18.3.1";Aue.exports=In;var k=Aue.exports;const xi=ha(k),aI=ENe({__proto__:null,default:xi},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LNe=k,BNe=Symbol.for("react.element"),jNe=Symbol.for("react.fragment"),zNe=Object.prototype.hasOwnProperty,UNe=LNe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VNe={key:!0,ref:!0,__self:!0,__source:!0};function $ue(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)zNe.call(t,r)&&!VNe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:BNe,type:e,key:s,ref:o,props:i,_owner:UNe.current}}mR.Fragment=jNe;mR.jsx=$ue;mR.jsxs=$ue;Cue.exports=mR;var x=Cue.exports,dL={},Fue={exports:{}},zu={},Lue={exports:{}},Bue={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var $=z.length;z.push(V);e:for(;0<$;){var U=$-1>>>1,W=z[U];if(0<i(W,V))z[U]=V,z[$]=W,$=U;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],$=z.pop();if($!==V){z[0]=$;e:for(var U=0,W=z.length,B=W>>>1;U<B;){var q=2*(U+1)-1,Y=z[q],re=q+1,pe=z[re];if(0>i(Y,$))re<W&&0>i(pe,Y)?(z[U]=pe,z[re]=$,U=re):(z[U]=Y,z[q]=$,U=q);else if(re<W&&0>i(pe,$))z[U]=pe,z[re]=$,U=re;else break e}}return V}function i(z,V){var $=z.sortIndex-V.sortIndex;return $!==0?$:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=z)r(l),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(l)}}function E(z){if(m=!1,b(z),!p)if(n(u)!==null)p=!0,P(_);else{var V=n(l);V!==null&&j(E,V.startTime-z)}}function _(z,V){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var $=d;try{for(b(V),f=n(u);f!==null&&(!(f.expirationTime>V)||z&&!I());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=V);V=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(V)}else r(u);f=n(u)}if(f!==null)var B=!0;else{var q=n(l);q!==null&&j(E,q.startTime-V),B=!1}return B}finally{f=null,d=$,h=!1}}var w=!1,S=null,C=-1,A=5,D=-1;function I(){return!(e.unstable_now()-D<A)}function O(){if(S!==null){var z=e.unstable_now();D=z;var V=!0;try{V=S(!0,z)}finally{V?R():(w=!1,S=null)}}else w=!1}var R;if(typeof v=="function")R=function(){v(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,F=M.port2;M.port1.onmessage=O,R=function(){F.postMessage(null)}}else R=function(){g(O,0)};function P(z){S=z,w||(w=!0,R())}function j(z,V){C=g(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,P(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var $=d;d=V;try{return z()}finally{d=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=d;d=z;try{return V()}finally{d=$}},e.unstable_scheduleCallback=function(z,V,$){var U=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=$+W,z={id:c++,callback:V,priorityLevel:z,startTime:$,expirationTime:W,sortIndex:-1},$>U?(z.sortIndex=$,t(l,z),n(u)===null&&z===n(l)&&(m?(y(C),C=-1):m=!0,j(E,$-U))):(z.sortIndex=W,t(u,z),p||h||(p=!0,P(_))),z},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(z){var V=d;return function(){var $=d;d=V;try{return z.apply(this,arguments)}finally{d=$}}}})(Bue);Lue.exports=Bue;var HNe=Lue.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qNe=k,Iu=HNe;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jue=new Set,Ux={};function dy(e,t){Hv(e,t),Hv(e+"Capture",t)}function Hv(e,t){for(Ux[e]=t,e=0;e<t.length;e++)jue.add(t[e])}var oh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hL=Object.prototype.hasOwnProperty,WNe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zK={},UK={};function GNe(e){return hL.call(UK,e)?!0:hL.call(zK,e)?!1:WNe.test(e)?UK[e]=!0:(zK[e]=!0,!1)}function YNe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KNe(e,t,n,r){if(t===null||typeof t>"u"||YNe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ma(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var no={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){no[e]=new ma(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];no[t]=new ma(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){no[e]=new ma(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){no[e]=new ma(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){no[e]=new ma(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){no[e]=new ma(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){no[e]=new ma(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){no[e]=new ma(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){no[e]=new ma(e,5,!1,e.toLowerCase(),null,!1,!1)});var dB=/[\-:]([a-z])/g;function hB(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dB,hB);no[t]=new ma(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dB,hB);no[t]=new ma(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dB,hB);no[t]=new ma(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){no[e]=new ma(e,1,!1,e.toLowerCase(),null,!1,!1)});no.xlinkHref=new ma("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){no[e]=new ma(e,1,!1,e.toLowerCase(),null,!0,!0)});function pB(e,t,n,r){var i=no.hasOwnProperty(t)?no[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KNe(t,n,i,r)&&(n=null),r||i===null?GNe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ih=qNe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dC=Symbol.for("react.element"),z1=Symbol.for("react.portal"),U1=Symbol.for("react.fragment"),mB=Symbol.for("react.strict_mode"),pL=Symbol.for("react.profiler"),zue=Symbol.for("react.provider"),Uue=Symbol.for("react.context"),gB=Symbol.for("react.forward_ref"),mL=Symbol.for("react.suspense"),gL=Symbol.for("react.suspense_list"),yB=Symbol.for("react.memo"),up=Symbol.for("react.lazy"),Vue=Symbol.for("react.offscreen"),VK=Symbol.iterator;function lE(e){return e===null||typeof e!="object"?null:(e=VK&&e[VK]||e["@@iterator"],typeof e=="function"?e:null)}var pi=Object.assign,GM;function ow(e){if(GM===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);GM=t&&t[1]||""}return`
`+GM+e}var YM=!1;function KM(e,t){if(!e||YM)return"";YM=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{YM=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ow(e):""}function XNe(e){switch(e.tag){case 5:return ow(e.type);case 16:return ow("Lazy");case 13:return ow("Suspense");case 19:return ow("SuspenseList");case 0:case 2:case 15:return e=KM(e.type,!1),e;case 11:return e=KM(e.type.render,!1),e;case 1:return e=KM(e.type,!0),e;default:return""}}function yL(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U1:return"Fragment";case z1:return"Portal";case pL:return"Profiler";case mB:return"StrictMode";case mL:return"Suspense";case gL:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uue:return(e.displayName||"Context")+".Consumer";case zue:return(e._context.displayName||"Context")+".Provider";case gB:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yB:return t=e.displayName||null,t!==null?t:yL(e.type)||"Memo";case up:t=e._payload,e=e._init;try{return yL(e(t))}catch{}}return null}function QNe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yL(t);case 8:return t===mB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function um(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hue(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JNe(e){var t=Hue(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hC(e){e._valueTracker||(e._valueTracker=JNe(e))}function que(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Hue(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function uI(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vL(e,t){var n=t.checked;return pi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function HK(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=um(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wue(e,t){t=t.checked,t!=null&&pB(e,"checked",t,!1)}function bL(e,t){Wue(e,t);var n=um(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_L(e,t.type,n):t.hasOwnProperty("defaultValue")&&_L(e,t.type,um(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qK(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _L(e,t,n){(t!=="number"||uI(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aw=Array.isArray;function dv(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+um(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function EL(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return pi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function WK(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ot(92));if(aw(n)){if(1<n.length)throw Error(ot(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:um(n)}}function Gue(e,t){var n=um(t.value),r=um(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function GK(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wL(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yue(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pC,Kue=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pC=pC||document.createElement("div"),pC.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pC.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vx(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZNe=["Webkit","ms","Moz","O"];Object.keys(Gw).forEach(function(e){ZNe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gw[t]=Gw[e]})});function Xue(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Gw.hasOwnProperty(e)&&Gw[e]?(""+t).trim():t+"px"}function Que(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Xue(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var eke=pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xL(e,t){if(t){if(eke[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function SL(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TL=null;function vB(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var CL=null,hv=null,pv=null;function YK(e){if(e=bT(e)){if(typeof CL!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=_R(t),CL(e.stateNode,e.type,t))}}function Jue(e){hv?pv?pv.push(e):pv=[e]:hv=e}function Zue(){if(hv){var e=hv,t=pv;if(pv=hv=null,YK(e),t)for(e=0;e<t.length;e++)YK(t[e])}}function ele(e,t){return e(t)}function tle(){}var XM=!1;function nle(e,t,n){if(XM)return e(t,n);XM=!0;try{return ele(e,t,n)}finally{XM=!1,(hv!==null||pv!==null)&&(tle(),Zue())}}function Hx(e,t){var n=e.stateNode;if(n===null)return null;var r=_R(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ot(231,t,typeof n));return n}var AL=!1;if(oh)try{var cE={};Object.defineProperty(cE,"passive",{get:function(){AL=!0}}),window.addEventListener("test",cE,cE),window.removeEventListener("test",cE,cE)}catch{AL=!1}function tke(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Yw=!1,lI=null,cI=!1,DL=null,nke={onError:function(e){Yw=!0,lI=e}};function rke(e,t,n,r,i,s,o,a,u){Yw=!1,lI=null,tke.apply(nke,arguments)}function ike(e,t,n,r,i,s,o,a,u){if(rke.apply(this,arguments),Yw){if(Yw){var l=lI;Yw=!1,lI=null}else throw Error(ot(198));cI||(cI=!0,DL=l)}}function hy(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rle(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function KK(e){if(hy(e)!==e)throw Error(ot(188))}function ske(e){var t=e.alternate;if(!t){if(t=hy(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return KK(i),e;if(s===r)return KK(i),t;s=s.sibling}throw Error(ot(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ot(189))}}if(n.alternate!==r)throw Error(ot(190))}if(n.tag!==3)throw Error(ot(188));return n.stateNode.current===n?e:t}function ile(e){return e=ske(e),e!==null?sle(e):null}function sle(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sle(e);if(t!==null)return t;e=e.sibling}return null}var ole=Iu.unstable_scheduleCallback,XK=Iu.unstable_cancelCallback,oke=Iu.unstable_shouldYield,ake=Iu.unstable_requestPaint,Oi=Iu.unstable_now,uke=Iu.unstable_getCurrentPriorityLevel,bB=Iu.unstable_ImmediatePriority,ale=Iu.unstable_UserBlockingPriority,fI=Iu.unstable_NormalPriority,lke=Iu.unstable_LowPriority,ule=Iu.unstable_IdlePriority,gR=null,gf=null;function cke(e){if(gf&&typeof gf.onCommitFiberRoot=="function")try{gf.onCommitFiberRoot(gR,e,void 0,(e.current.flags&128)===128)}catch{}}var fc=Math.clz32?Math.clz32:hke,fke=Math.log,dke=Math.LN2;function hke(e){return e>>>=0,e===0?32:31-(fke(e)/dke|0)|0}var mC=64,gC=4194304;function uw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dI(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=uw(a):(s&=o,s!==0&&(r=uw(s)))}else o=n&~i,o!==0?r=uw(o):s!==0&&(r=uw(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-fc(t),i=1<<n,r|=e[n],t&=~i;return r}function pke(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mke(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-fc(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=pke(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function IL(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lle(){var e=mC;return mC<<=1,!(mC&4194240)&&(mC=64),e}function QM(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yT(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fc(t),e[t]=n}function gke(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-fc(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function _B(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var pr=0;function cle(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fle,EB,dle,hle,ple,NL=!1,yC=[],jp=null,zp=null,Up=null,qx=new Map,Wx=new Map,gp=[],yke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QK(e,t){switch(e){case"focusin":case"focusout":jp=null;break;case"dragenter":case"dragleave":zp=null;break;case"mouseover":case"mouseout":Up=null;break;case"pointerover":case"pointerout":qx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wx.delete(t.pointerId)}}function fE(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=bT(t),t!==null&&EB(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function vke(e,t,n,r,i){switch(t){case"focusin":return jp=fE(jp,e,t,n,r,i),!0;case"dragenter":return zp=fE(zp,e,t,n,r,i),!0;case"mouseover":return Up=fE(Up,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return qx.set(s,fE(qx.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wx.set(s,fE(Wx.get(s)||null,e,t,n,r,i)),!0}return!1}function mle(e){var t=Xg(e.target);if(t!==null){var n=hy(t);if(n!==null){if(t=n.tag,t===13){if(t=rle(n),t!==null){e.blockedOn=t,ple(e.priority,function(){dle(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ZA(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=kL(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);TL=r,n.target.dispatchEvent(r),TL=null}else return t=bT(n),t!==null&&EB(t),e.blockedOn=n,!1;t.shift()}return!0}function JK(e,t,n){ZA(e)&&n.delete(t)}function bke(){NL=!1,jp!==null&&ZA(jp)&&(jp=null),zp!==null&&ZA(zp)&&(zp=null),Up!==null&&ZA(Up)&&(Up=null),qx.forEach(JK),Wx.forEach(JK)}function dE(e,t){e.blockedOn===t&&(e.blockedOn=null,NL||(NL=!0,Iu.unstable_scheduleCallback(Iu.unstable_NormalPriority,bke)))}function Gx(e){function t(i){return dE(i,e)}if(0<yC.length){dE(yC[0],e);for(var n=1;n<yC.length;n++){var r=yC[n];r.blockedOn===e&&(r.blockedOn=null)}}for(jp!==null&&dE(jp,e),zp!==null&&dE(zp,e),Up!==null&&dE(Up,e),qx.forEach(t),Wx.forEach(t),n=0;n<gp.length;n++)r=gp[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<gp.length&&(n=gp[0],n.blockedOn===null);)mle(n),n.blockedOn===null&&gp.shift()}var mv=Ih.ReactCurrentBatchConfig,hI=!0;function _ke(e,t,n,r){var i=pr,s=mv.transition;mv.transition=null;try{pr=1,wB(e,t,n,r)}finally{pr=i,mv.transition=s}}function Eke(e,t,n,r){var i=pr,s=mv.transition;mv.transition=null;try{pr=4,wB(e,t,n,r)}finally{pr=i,mv.transition=s}}function wB(e,t,n,r){if(hI){var i=kL(e,t,n,r);if(i===null)a$(e,t,r,pI,n),QK(e,r);else if(vke(i,e,t,n,r))r.stopPropagation();else if(QK(e,r),t&4&&-1<yke.indexOf(e)){for(;i!==null;){var s=bT(i);if(s!==null&&fle(s),s=kL(e,t,n,r),s===null&&a$(e,t,r,pI,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else a$(e,t,r,null,n)}}var pI=null;function kL(e,t,n,r){if(pI=null,e=vB(r),e=Xg(e),e!==null)if(t=hy(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rle(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pI=e,null}function gle(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uke()){case bB:return 1;case ale:return 4;case fI:case lke:return 16;case ule:return 536870912;default:return 16}default:return 16}}var Tp=null,xB=null,eD=null;function yle(){if(eD)return eD;var e,t=xB,n=t.length,r,i="value"in Tp?Tp.value:Tp.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return eD=i.slice(e,1<r?1-r:void 0)}function tD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vC(){return!0}function ZK(){return!1}function Uu(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vC:ZK,this.isPropagationStopped=ZK,this}return pi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vC)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vC)},persist:function(){},isPersistent:vC}),t}var n_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SB=Uu(n_),vT=pi({},n_,{view:0,detail:0}),wke=Uu(vT),JM,ZM,hE,yR=pi({},vT,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TB,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hE&&(hE&&e.type==="mousemove"?(JM=e.screenX-hE.screenX,ZM=e.screenY-hE.screenY):ZM=JM=0,hE=e),JM)},movementY:function(e){return"movementY"in e?e.movementY:ZM}}),eX=Uu(yR),xke=pi({},yR,{dataTransfer:0}),Ske=Uu(xke),Tke=pi({},vT,{relatedTarget:0}),e$=Uu(Tke),Cke=pi({},n_,{animationName:0,elapsedTime:0,pseudoElement:0}),Ake=Uu(Cke),Dke=pi({},n_,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ike=Uu(Dke),Nke=pi({},n_,{data:0}),tX=Uu(Nke),kke={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oke(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pke[e])?!!t[e]:!1}function TB(){return Oke}var Mke=pi({},vT,{key:function(e){if(e.key){var t=kke[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rke[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TB,charCode:function(e){return e.type==="keypress"?tD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$ke=Uu(Mke),Fke=pi({},yR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nX=Uu(Fke),Lke=pi({},vT,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TB}),Bke=Uu(Lke),jke=pi({},n_,{propertyName:0,elapsedTime:0,pseudoElement:0}),zke=Uu(jke),Uke=pi({},yR,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vke=Uu(Uke),Hke=[9,13,27,32],CB=oh&&"CompositionEvent"in window,Kw=null;oh&&"documentMode"in document&&(Kw=document.documentMode);var qke=oh&&"TextEvent"in window&&!Kw,vle=oh&&(!CB||Kw&&8<Kw&&11>=Kw),rX=" ",iX=!1;function ble(e,t){switch(e){case"keyup":return Hke.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _le(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var V1=!1;function Wke(e,t){switch(e){case"compositionend":return _le(t);case"keypress":return t.which!==32?null:(iX=!0,rX);case"textInput":return e=t.data,e===rX&&iX?null:e;default:return null}}function Gke(e,t){if(V1)return e==="compositionend"||!CB&&ble(e,t)?(e=yle(),eD=xB=Tp=null,V1=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vle&&t.locale!=="ko"?null:t.data;default:return null}}var Yke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sX(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yke[e.type]:t==="textarea"}function Ele(e,t,n,r){Jue(r),t=mI(t,"onChange"),0<t.length&&(n=new SB("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xw=null,Yx=null;function Kke(e){Rle(e,0)}function vR(e){var t=W1(e);if(que(t))return e}function Xke(e,t){if(e==="change")return t}var wle=!1;if(oh){var t$;if(oh){var n$="oninput"in document;if(!n$){var oX=document.createElement("div");oX.setAttribute("oninput","return;"),n$=typeof oX.oninput=="function"}t$=n$}else t$=!1;wle=t$&&(!document.documentMode||9<document.documentMode)}function aX(){Xw&&(Xw.detachEvent("onpropertychange",xle),Yx=Xw=null)}function xle(e){if(e.propertyName==="value"&&vR(Yx)){var t=[];Ele(t,Yx,e,vB(e)),nle(Kke,t)}}function Qke(e,t,n){e==="focusin"?(aX(),Xw=t,Yx=n,Xw.attachEvent("onpropertychange",xle)):e==="focusout"&&aX()}function Jke(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vR(Yx)}function Zke(e,t){if(e==="click")return vR(t)}function eRe(e,t){if(e==="input"||e==="change")return vR(t)}function tRe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wc=typeof Object.is=="function"?Object.is:tRe;function Kx(e,t){if(wc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hL.call(t,i)||!wc(e[i],t[i]))return!1}return!0}function uX(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lX(e,t){var n=uX(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uX(n)}}function Sle(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sle(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tle(){for(var e=window,t=uI();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=uI(e.document)}return t}function AB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nRe(e){var t=Tle(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Sle(n.ownerDocument.documentElement,n)){if(r!==null&&AB(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=lX(n,s);var o=lX(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rRe=oh&&"documentMode"in document&&11>=document.documentMode,H1=null,RL=null,Qw=null,PL=!1;function cX(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;PL||H1==null||H1!==uI(r)||(r=H1,"selectionStart"in r&&AB(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qw&&Kx(Qw,r)||(Qw=r,r=mI(RL,"onSelect"),0<r.length&&(t=new SB("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=H1)))}function bC(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var q1={animationend:bC("Animation","AnimationEnd"),animationiteration:bC("Animation","AnimationIteration"),animationstart:bC("Animation","AnimationStart"),transitionend:bC("Transition","TransitionEnd")},r$={},Cle={};oh&&(Cle=document.createElement("div").style,"AnimationEvent"in window||(delete q1.animationend.animation,delete q1.animationiteration.animation,delete q1.animationstart.animation),"TransitionEvent"in window||delete q1.transitionend.transition);function bR(e){if(r$[e])return r$[e];if(!q1[e])return e;var t=q1[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Cle)return r$[e]=t[n];return e}var Ale=bR("animationend"),Dle=bR("animationiteration"),Ile=bR("animationstart"),Nle=bR("transitionend"),kle=new Map,fX="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fm(e,t){kle.set(e,t),dy(t,[e])}for(var i$=0;i$<fX.length;i$++){var s$=fX[i$],iRe=s$.toLowerCase(),sRe=s$[0].toUpperCase()+s$.slice(1);Fm(iRe,"on"+sRe)}Fm(Ale,"onAnimationEnd");Fm(Dle,"onAnimationIteration");Fm(Ile,"onAnimationStart");Fm("dblclick","onDoubleClick");Fm("focusin","onFocus");Fm("focusout","onBlur");Fm(Nle,"onTransitionEnd");Hv("onMouseEnter",["mouseout","mouseover"]);Hv("onMouseLeave",["mouseout","mouseover"]);Hv("onPointerEnter",["pointerout","pointerover"]);Hv("onPointerLeave",["pointerout","pointerover"]);dy("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dy("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dy("onBeforeInput",["compositionend","keypress","textInput","paste"]);dy("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dy("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dy("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oRe=new Set("cancel close invalid load scroll toggle".split(" ").concat(lw));function dX(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ike(r,t,void 0,e),e.currentTarget=null}function Rle(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;dX(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;dX(i,a,l),s=u}}}if(cI)throw e=DL,cI=!1,DL=null,e}function Br(e,t){var n=t[LL];n===void 0&&(n=t[LL]=new Set);var r=e+"__bubble";n.has(r)||(Ple(t,e,2,!1),n.add(r))}function o$(e,t,n){var r=0;t&&(r|=4),Ple(n,e,r,t)}var _C="_reactListening"+Math.random().toString(36).slice(2);function Xx(e){if(!e[_C]){e[_C]=!0,jue.forEach(function(n){n!=="selectionchange"&&(oRe.has(n)||o$(n,!1,e),o$(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_C]||(t[_C]=!0,o$("selectionchange",!1,t))}}function Ple(e,t,n,r){switch(gle(t)){case 1:var i=_ke;break;case 4:i=Eke;break;default:i=wB}n=i.bind(null,t,n,e),i=void 0,!AL||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function a$(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xg(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}nle(function(){var l=s,c=vB(n),f=[];e:{var d=kle.get(e);if(d!==void 0){var h=SB,p=e;switch(e){case"keypress":if(tD(n)===0)break e;case"keydown":case"keyup":h=$ke;break;case"focusin":p="focus",h=e$;break;case"focusout":p="blur",h=e$;break;case"beforeblur":case"afterblur":h=e$;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=eX;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ske;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Bke;break;case Ale:case Dle:case Ile:h=Ake;break;case Nle:h=zke;break;case"scroll":h=wke;break;case"wheel":h=Vke;break;case"copy":case"cut":case"paste":h=Ike;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=nX}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,y!==null&&(E=Hx(v,y),E!=null&&m.push(Qx(v,E,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==TL&&(p=n.relatedTarget||n.fromElement)&&(Xg(p)||p[ah]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Xg(p):null,p!==null&&(g=hy(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=eX,E="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=nX,E="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:W1(h),b=p==null?d:W1(p),d=new m(E,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,E=null,Xg(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,E=m),g=E,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=s1(b))v++;for(b=0,E=y;E;E=s1(E))b++;for(;0<v-b;)m=s1(m),v--;for(;0<b-v;)y=s1(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=s1(m),y=s1(y)}m=null}else m=null;h!==null&&hX(f,d,h,m,!1),p!==null&&g!==null&&hX(f,g,p,m,!0)}}e:{if(d=l?W1(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var _=Xke;else if(sX(d))if(wle)_=eRe;else{_=Jke;var w=Qke}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=Zke);if(_&&(_=_(e,l))){Ele(f,_,n,c);break e}w&&w(e,d,l),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&_L(d,"number",d.value)}switch(w=l?W1(l):window,e){case"focusin":(sX(w)||w.contentEditable==="true")&&(H1=w,RL=l,Qw=null);break;case"focusout":Qw=RL=H1=null;break;case"mousedown":PL=!0;break;case"contextmenu":case"mouseup":case"dragend":PL=!1,cX(f,n,c);break;case"selectionchange":if(rRe)break;case"keydown":case"keyup":cX(f,n,c)}var S;if(CB)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else V1?ble(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(vle&&n.locale!=="ko"&&(V1||C!=="onCompositionStart"?C==="onCompositionEnd"&&V1&&(S=yle()):(Tp=c,xB="value"in Tp?Tp.value:Tp.textContent,V1=!0)),w=mI(l,C),0<w.length&&(C=new tX(C,e,null,n,c),f.push({event:C,listeners:w}),S?C.data=S:(S=_le(n),S!==null&&(C.data=S)))),(S=qke?Wke(e,n):Gke(e,n))&&(l=mI(l,"onBeforeInput"),0<l.length&&(c=new tX("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}Rle(f,t)})}function Qx(e,t,n){return{instance:e,listener:t,currentTarget:n}}function mI(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hx(e,n),s!=null&&r.unshift(Qx(e,s,i)),s=Hx(e,t),s!=null&&r.push(Qx(e,s,i))),e=e.return}return r}function s1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hX(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=Hx(n,s),u!=null&&o.unshift(Qx(n,u,a))):i||(u=Hx(n,s),u!=null&&o.push(Qx(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var aRe=/\r\n?/g,uRe=/\u0000|\uFFFD/g;function pX(e){return(typeof e=="string"?e:""+e).replace(aRe,`
`).replace(uRe,"")}function EC(e,t,n){if(t=pX(t),pX(e)!==t&&n)throw Error(ot(425))}function gI(){}var OL=null,ML=null;function $L(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var FL=typeof setTimeout=="function"?setTimeout:void 0,lRe=typeof clearTimeout=="function"?clearTimeout:void 0,mX=typeof Promise=="function"?Promise:void 0,cRe=typeof queueMicrotask=="function"?queueMicrotask:typeof mX<"u"?function(e){return mX.resolve(null).then(e).catch(fRe)}:FL;function fRe(e){setTimeout(function(){throw e})}function u$(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Gx(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Gx(t)}function Vp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gX(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var r_=Math.random().toString(36).slice(2),nf="__reactFiber$"+r_,Jx="__reactProps$"+r_,ah="__reactContainer$"+r_,LL="__reactEvents$"+r_,dRe="__reactListeners$"+r_,hRe="__reactHandles$"+r_;function Xg(e){var t=e[nf];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ah]||n[nf]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gX(e);e!==null;){if(n=e[nf])return n;e=gX(e)}return t}e=n,n=e.parentNode}return null}function bT(e){return e=e[nf]||e[ah],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function W1(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function _R(e){return e[Jx]||null}var BL=[],G1=-1;function Lm(e){return{current:e}}function qr(e){0>G1||(e.current=BL[G1],BL[G1]=null,G1--)}function Pr(e,t){G1++,BL[G1]=e.current,e.current=t}var lm={},$o=Lm(lm),ja=Lm(!1),S0=lm;function qv(e,t){var n=e.type.contextTypes;if(!n)return lm;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function za(e){return e=e.childContextTypes,e!=null}function yI(){qr(ja),qr($o)}function yX(e,t,n){if($o.current!==lm)throw Error(ot(168));Pr($o,t),Pr(ja,n)}function Ole(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ot(108,QNe(e)||"Unknown",i));return pi({},n,r)}function vI(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lm,S0=$o.current,Pr($o,e),Pr(ja,ja.current),!0}function vX(e,t,n){var r=e.stateNode;if(!r)throw Error(ot(169));n?(e=Ole(e,t,S0),r.__reactInternalMemoizedMergedChildContext=e,qr(ja),qr($o),Pr($o,e)):qr(ja),Pr(ja,n)}var Ad=null,ER=!1,l$=!1;function Mle(e){Ad===null?Ad=[e]:Ad.push(e)}function pRe(e){ER=!0,Mle(e)}function Bm(){if(!l$&&Ad!==null){l$=!0;var e=0,t=pr;try{var n=Ad;for(pr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ad=null,ER=!1}catch(i){throw Ad!==null&&(Ad=Ad.slice(e+1)),ole(bB,Bm),i}finally{pr=t,l$=!1}}return null}var Y1=[],K1=0,bI=null,_I=0,Ju=[],Zu=0,T0=null,Od=1,Md="";function Ng(e,t){Y1[K1++]=_I,Y1[K1++]=bI,bI=e,_I=t}function $le(e,t,n){Ju[Zu++]=Od,Ju[Zu++]=Md,Ju[Zu++]=T0,T0=e;var r=Od;e=Md;var i=32-fc(r)-1;r&=~(1<<i),n+=1;var s=32-fc(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Od=1<<32-fc(t)+i|n<<i|r,Md=s+e}else Od=1<<s|n<<i|r,Md=e}function DB(e){e.return!==null&&(Ng(e,1),$le(e,1,0))}function IB(e){for(;e===bI;)bI=Y1[--K1],Y1[K1]=null,_I=Y1[--K1],Y1[K1]=null;for(;e===T0;)T0=Ju[--Zu],Ju[Zu]=null,Md=Ju[--Zu],Ju[Zu]=null,Od=Ju[--Zu],Ju[Zu]=null}var Tu=null,yu=null,ti=!1,Ql=null;function Fle(e,t){var n=sl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bX(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tu=e,yu=Vp(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tu=e,yu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=T0!==null?{id:Od,overflow:Md}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tu=e,yu=null,!0):!1;default:return!1}}function jL(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zL(e){if(ti){var t=yu;if(t){var n=t;if(!bX(e,t)){if(jL(e))throw Error(ot(418));t=Vp(n.nextSibling);var r=Tu;t&&bX(e,t)?Fle(r,n):(e.flags=e.flags&-4097|2,ti=!1,Tu=e)}}else{if(jL(e))throw Error(ot(418));e.flags=e.flags&-4097|2,ti=!1,Tu=e}}}function _X(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tu=e}function wC(e){if(e!==Tu)return!1;if(!ti)return _X(e),ti=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$L(e.type,e.memoizedProps)),t&&(t=yu)){if(jL(e))throw Lle(),Error(ot(418));for(;t;)Fle(e,t),t=Vp(t.nextSibling)}if(_X(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yu=Vp(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yu=null}}else yu=Tu?Vp(e.stateNode.nextSibling):null;return!0}function Lle(){for(var e=yu;e;)e=Vp(e.nextSibling)}function Wv(){yu=Tu=null,ti=!1}function NB(e){Ql===null?Ql=[e]:Ql.push(e)}var mRe=Ih.ReactCurrentBatchConfig;function pE(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ot(309));var r=n.stateNode}if(!r)throw Error(ot(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ot(284));if(!n._owner)throw Error(ot(290,e))}return e}function xC(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function EX(e){var t=e._init;return t(e._payload)}function Ble(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Gp(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,E){return v===null||v.tag!==6?(v=g$(b,y.mode,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,E){var _=b.type;return _===U1?c(y,v,b.props.children,E,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===up&&EX(_)===v.type)?(E=i(v,b.props),E.ref=pE(y,v,b),E.return=y,E):(E=uD(b.type,b.key,b.props,null,y.mode,E),E.ref=pE(y,v,b),E.return=y,E)}function l(y,v,b,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=y$(b,y.mode,E),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,E,_){return v===null||v.tag!==7?(v=l0(b,y.mode,E,_),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=g$(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case dC:return b=uD(v.type,v.key,v.props,null,y.mode,b),b.ref=pE(y,null,v),b.return=y,b;case z1:return v=y$(v,y.mode,b),v.return=y,v;case up:var E=v._init;return f(y,E(v._payload),b)}if(aw(v)||lE(v))return v=l0(v,y.mode,b,null),v.return=y,v;xC(y,v)}return null}function d(y,v,b,E){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(y,v,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dC:return b.key===_?u(y,v,b,E):null;case z1:return b.key===_?l(y,v,b,E):null;case up:return _=b._init,d(y,v,_(b._payload),E)}if(aw(b)||lE(b))return _!==null?null:c(y,v,b,E,null);xC(y,b)}return null}function h(y,v,b,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(b)||null,a(v,y,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dC:return y=y.get(E.key===null?b:E.key)||null,u(v,y,E,_);case z1:return y=y.get(E.key===null?b:E.key)||null,l(v,y,E,_);case up:var w=E._init;return h(y,v,b,w(E._payload),_)}if(aw(E)||lE(E))return y=y.get(b)||null,c(v,y,E,_,null);xC(v,E)}return null}function p(y,v,b,E){for(var _=null,w=null,S=v,C=v=0,A=null;S!==null&&C<b.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var D=d(y,S,b[C],E);if(D===null){S===null&&(S=A);break}e&&S&&D.alternate===null&&t(y,S),v=s(D,v,C),w===null?_=D:w.sibling=D,w=D,S=A}if(C===b.length)return n(y,S),ti&&Ng(y,C),_;if(S===null){for(;C<b.length;C++)S=f(y,b[C],E),S!==null&&(v=s(S,v,C),w===null?_=S:w.sibling=S,w=S);return ti&&Ng(y,C),_}for(S=r(y,S);C<b.length;C++)A=h(S,y,C,b[C],E),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),v=s(A,v,C),w===null?_=A:w.sibling=A,w=A);return e&&S.forEach(function(I){return t(y,I)}),ti&&Ng(y,C),_}function m(y,v,b,E){var _=lE(b);if(typeof _!="function")throw Error(ot(150));if(b=_.call(b),b==null)throw Error(ot(151));for(var w=_=null,S=v,C=v=0,A=null,D=b.next();S!==null&&!D.done;C++,D=b.next()){S.index>C?(A=S,S=null):A=S.sibling;var I=d(y,S,D.value,E);if(I===null){S===null&&(S=A);break}e&&S&&I.alternate===null&&t(y,S),v=s(I,v,C),w===null?_=I:w.sibling=I,w=I,S=A}if(D.done)return n(y,S),ti&&Ng(y,C),_;if(S===null){for(;!D.done;C++,D=b.next())D=f(y,D.value,E),D!==null&&(v=s(D,v,C),w===null?_=D:w.sibling=D,w=D);return ti&&Ng(y,C),_}for(S=r(y,S);!D.done;C++,D=b.next())D=h(S,y,C,D.value,E),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?C:D.key),v=s(D,v,C),w===null?_=D:w.sibling=D,w=D);return e&&S.forEach(function(O){return t(y,O)}),ti&&Ng(y,C),_}function g(y,v,b,E){if(typeof b=="object"&&b!==null&&b.type===U1&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case dC:e:{for(var _=b.key,w=v;w!==null;){if(w.key===_){if(_=b.type,_===U1){if(w.tag===7){n(y,w.sibling),v=i(w,b.props.children),v.return=y,y=v;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===up&&EX(_)===w.type){n(y,w.sibling),v=i(w,b.props),v.ref=pE(y,w,b),v.return=y,y=v;break e}n(y,w);break}else t(y,w);w=w.sibling}b.type===U1?(v=l0(b.props.children,y.mode,E,b.key),v.return=y,y=v):(E=uD(b.type,b.key,b.props,null,y.mode,E),E.ref=pE(y,v,b),E.return=y,y=E)}return o(y);case z1:e:{for(w=b.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=y$(b,y.mode,E),v.return=y,y=v}return o(y);case up:return w=b._init,g(y,v,w(b._payload),E)}if(aw(b))return p(y,v,b,E);if(lE(b))return m(y,v,b,E);xC(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=g$(b,y.mode,E),v.return=y,y=v),o(y)):n(y,v)}return g}var Gv=Ble(!0),jle=Ble(!1),EI=Lm(null),wI=null,X1=null,kB=null;function RB(){kB=X1=wI=null}function PB(e){var t=EI.current;qr(EI),e._currentValue=t}function UL(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gv(e,t){wI=e,kB=X1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($a=!0),e.firstContext=null)}function ml(e){var t=e._currentValue;if(kB!==e)if(e={context:e,memoizedValue:t,next:null},X1===null){if(wI===null)throw Error(ot(308));X1=e,wI.dependencies={lanes:0,firstContext:e}}else X1=X1.next=e;return t}var Qg=null;function OB(e){Qg===null?Qg=[e]:Qg.push(e)}function zle(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,OB(t)):(n.next=i.next,i.next=n),t.interleaved=n,uh(e,r)}function uh(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var lp=!1;function MB(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ule(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hp(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,qn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,uh(e,n)}return i=r.interleaved,i===null?(t.next=t,OB(r)):(t.next=i.next,i.next=t),r.interleaved=t,uh(e,n)}function nD(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_B(e,n)}}function wX(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xI(e,t,n,r){var i=e.updateQueue;lp=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=pi({},f,d);break e;case 2:lp=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);A0|=o,e.lanes=o,e.memoizedState=f}}function xX(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ot(191,i));i.call(r)}}}var _T={},yf=Lm(_T),Zx=Lm(_T),eS=Lm(_T);function Jg(e){if(e===_T)throw Error(ot(174));return e}function $B(e,t){switch(Pr(eS,t),Pr(Zx,e),Pr(yf,_T),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wL(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wL(t,e)}qr(yf),Pr(yf,t)}function Yv(){qr(yf),qr(Zx),qr(eS)}function Vle(e){Jg(eS.current);var t=Jg(yf.current),n=wL(t,e.type);t!==n&&(Pr(Zx,e),Pr(yf,n))}function FB(e){Zx.current===e&&(qr(yf),qr(Zx))}var li=Lm(0);function SI(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var c$=[];function LB(){for(var e=0;e<c$.length;e++)c$[e]._workInProgressVersionPrimary=null;c$.length=0}var rD=Ih.ReactCurrentDispatcher,f$=Ih.ReactCurrentBatchConfig,C0=0,di=null,Zi=null,vs=null,TI=!1,Jw=!1,tS=0,gRe=0;function po(){throw Error(ot(321))}function BB(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wc(e[n],t[n]))return!1;return!0}function jB(e,t,n,r,i,s){if(C0=s,di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rD.current=e===null||e.memoizedState===null?_Re:ERe,e=n(r,i),Jw){s=0;do{if(Jw=!1,tS=0,25<=s)throw Error(ot(301));s+=1,vs=Zi=null,t.updateQueue=null,rD.current=wRe,e=n(r,i)}while(Jw)}if(rD.current=CI,t=Zi!==null&&Zi.next!==null,C0=0,vs=Zi=di=null,TI=!1,t)throw Error(ot(300));return e}function zB(){var e=tS!==0;return tS=0,e}function Kc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vs===null?di.memoizedState=vs=e:vs=vs.next=e,vs}function gl(){if(Zi===null){var e=di.alternate;e=e!==null?e.memoizedState:null}else e=Zi.next;var t=vs===null?di.memoizedState:vs.next;if(t!==null)vs=t,Zi=e;else{if(e===null)throw Error(ot(310));Zi=e,e={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},vs===null?di.memoizedState=vs=e:vs=vs.next=e}return vs}function nS(e,t){return typeof t=="function"?t(e):t}function d$(e){var t=gl(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=Zi,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((C0&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,di.lanes|=c,A0|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,wc(r,t.memoizedState)||($a=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,di.lanes|=s,A0|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function h$(e){var t=gl(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);wc(s,t.memoizedState)||($a=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Hle(){}function qle(e,t){var n=di,r=gl(),i=t(),s=!wc(r.memoizedState,i);if(s&&(r.memoizedState=i,$a=!0),r=r.queue,UB(Yle.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||vs!==null&&vs.memoizedState.tag&1){if(n.flags|=2048,rS(9,Gle.bind(null,n,r,i,t),void 0,null),As===null)throw Error(ot(349));C0&30||Wle(n,t,i)}return i}function Wle(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gle(e,t,n,r){t.value=n,t.getSnapshot=r,Kle(t)&&Xle(e)}function Yle(e,t,n){return n(function(){Kle(t)&&Xle(e)})}function Kle(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wc(e,n)}catch{return!0}}function Xle(e){var t=uh(e,1);t!==null&&dc(t,e,1,-1)}function SX(e){var t=Kc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nS,lastRenderedState:e},t.queue=e,e=e.dispatch=bRe.bind(null,di,e),[t.memoizedState,e]}function rS(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qle(){return gl().memoizedState}function iD(e,t,n,r){var i=Kc();di.flags|=e,i.memoizedState=rS(1|t,n,void 0,r===void 0?null:r)}function wR(e,t,n,r){var i=gl();r=r===void 0?null:r;var s=void 0;if(Zi!==null){var o=Zi.memoizedState;if(s=o.destroy,r!==null&&BB(r,o.deps)){i.memoizedState=rS(t,n,s,r);return}}di.flags|=e,i.memoizedState=rS(1|t,n,s,r)}function TX(e,t){return iD(8390656,8,e,t)}function UB(e,t){return wR(2048,8,e,t)}function Jle(e,t){return wR(4,2,e,t)}function Zle(e,t){return wR(4,4,e,t)}function ece(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tce(e,t,n){return n=n!=null?n.concat([e]):null,wR(4,4,ece.bind(null,t,e),n)}function VB(){}function nce(e,t){var n=gl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&BB(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rce(e,t){var n=gl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&BB(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ice(e,t,n){return C0&21?(wc(n,t)||(n=lle(),di.lanes|=n,A0|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$a=!0),e.memoizedState=n)}function yRe(e,t){var n=pr;pr=n!==0&&4>n?n:4,e(!0);var r=f$.transition;f$.transition={};try{e(!1),t()}finally{pr=n,f$.transition=r}}function sce(){return gl().memoizedState}function vRe(e,t,n){var r=Wp(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oce(e))ace(t,n);else if(n=zle(e,t,n,r),n!==null){var i=sa();dc(n,e,r,i),uce(n,t,r)}}function bRe(e,t,n){var r=Wp(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oce(e))ace(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,wc(a,o)){var u=t.interleaved;u===null?(i.next=i,OB(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=zle(e,t,i,r),n!==null&&(i=sa(),dc(n,e,r,i),uce(n,t,r))}}function oce(e){var t=e.alternate;return e===di||t!==null&&t===di}function ace(e,t){Jw=TI=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uce(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_B(e,n)}}var CI={readContext:ml,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},_Re={readContext:ml,useCallback:function(e,t){return Kc().memoizedState=[e,t===void 0?null:t],e},useContext:ml,useEffect:TX,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,iD(4194308,4,ece.bind(null,t,e),n)},useLayoutEffect:function(e,t){return iD(4194308,4,e,t)},useInsertionEffect:function(e,t){return iD(4,2,e,t)},useMemo:function(e,t){var n=Kc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Kc();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vRe.bind(null,di,e),[r.memoizedState,e]},useRef:function(e){var t=Kc();return e={current:e},t.memoizedState=e},useState:SX,useDebugValue:VB,useDeferredValue:function(e){return Kc().memoizedState=e},useTransition:function(){var e=SX(!1),t=e[0];return e=yRe.bind(null,e[1]),Kc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=di,i=Kc();if(ti){if(n===void 0)throw Error(ot(407));n=n()}else{if(n=t(),As===null)throw Error(ot(349));C0&30||Wle(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,TX(Yle.bind(null,r,s,e),[e]),r.flags|=2048,rS(9,Gle.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Kc(),t=As.identifierPrefix;if(ti){var n=Md,r=Od;n=(r&~(1<<32-fc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=tS++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gRe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ERe={readContext:ml,useCallback:nce,useContext:ml,useEffect:UB,useImperativeHandle:tce,useInsertionEffect:Jle,useLayoutEffect:Zle,useMemo:rce,useReducer:d$,useRef:Qle,useState:function(){return d$(nS)},useDebugValue:VB,useDeferredValue:function(e){var t=gl();return ice(t,Zi.memoizedState,e)},useTransition:function(){var e=d$(nS)[0],t=gl().memoizedState;return[e,t]},useMutableSource:Hle,useSyncExternalStore:qle,useId:sce,unstable_isNewReconciler:!1},wRe={readContext:ml,useCallback:nce,useContext:ml,useEffect:UB,useImperativeHandle:tce,useInsertionEffect:Jle,useLayoutEffect:Zle,useMemo:rce,useReducer:h$,useRef:Qle,useState:function(){return h$(nS)},useDebugValue:VB,useDeferredValue:function(e){var t=gl();return Zi===null?t.memoizedState=e:ice(t,Zi.memoizedState,e)},useTransition:function(){var e=h$(nS)[0],t=gl().memoizedState;return[e,t]},useMutableSource:Hle,useSyncExternalStore:qle,useId:sce,unstable_isNewReconciler:!1};function Wl(e,t){if(e&&e.defaultProps){t=pi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function VL(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xR={isMounted:function(e){return(e=e._reactInternals)?hy(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sa(),i=Wp(e),s=Gd(r,i);s.payload=t,n!=null&&(s.callback=n),t=Hp(e,s,i),t!==null&&(dc(t,e,i,r),nD(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sa(),i=Wp(e),s=Gd(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Hp(e,s,i),t!==null&&(dc(t,e,i,r),nD(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sa(),r=Wp(e),i=Gd(n,r);i.tag=2,t!=null&&(i.callback=t),t=Hp(e,i,r),t!==null&&(dc(t,e,r,n),nD(t,e,r))}};function CX(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Kx(n,r)||!Kx(i,s):!0}function lce(e,t,n){var r=!1,i=lm,s=t.contextType;return typeof s=="object"&&s!==null?s=ml(s):(i=za(t)?S0:$o.current,r=t.contextTypes,s=(r=r!=null)?qv(e,i):lm),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xR,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function AX(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xR.enqueueReplaceState(t,t.state,null)}function HL(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},MB(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ml(s):(s=za(t)?S0:$o.current,i.context=qv(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(VL(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&xR.enqueueReplaceState(i,i.state,null),xI(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Kv(e,t){try{var n="",r=t;do n+=XNe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function p$(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qL(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xRe=typeof WeakMap=="function"?WeakMap:Map;function cce(e,t,n){n=Gd(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){DI||(DI=!0,t4=r),qL(e,t)},n}function fce(e,t,n){n=Gd(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){qL(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qL(e,t),typeof r!="function"&&(qp===null?qp=new Set([this]):qp.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function DX(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new xRe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=FRe.bind(null,e,t,n),t.then(e,e))}function IX(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function NX(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gd(-1,1),t.tag=2,Hp(n,t,1))),n.lanes|=1),e)}var SRe=Ih.ReactCurrentOwner,$a=!1;function Xo(e,t,n,r){t.child=e===null?jle(t,null,n,r):Gv(t,e.child,n,r)}function kX(e,t,n,r,i){n=n.render;var s=t.ref;return gv(t,i),r=jB(e,t,n,r,s,i),n=zB(),e!==null&&!$a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,lh(e,t,i)):(ti&&n&&DB(t),t.flags|=1,Xo(e,t,r,i),t.child)}function RX(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!QB(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,dce(e,t,s,r,i)):(e=uD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Kx,n(o,r)&&e.ref===t.ref)return lh(e,t,i)}return t.flags|=1,e=Gp(s,r),e.ref=t.ref,e.return=t,t.child=e}function dce(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Kx(s,r)&&e.ref===t.ref)if($a=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&($a=!0);else return t.lanes=e.lanes,lh(e,t,i)}return WL(e,t,n,r,i)}function hce(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(J1,du),du|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pr(J1,du),du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pr(J1,du),du|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Pr(J1,du),du|=r;return Xo(e,t,i,n),t.child}function pce(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function WL(e,t,n,r,i){var s=za(n)?S0:$o.current;return s=qv(t,s),gv(t,i),n=jB(e,t,n,r,s,i),r=zB(),e!==null&&!$a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,lh(e,t,i)):(ti&&r&&DB(t),t.flags|=1,Xo(e,t,n,i),t.child)}function PX(e,t,n,r,i){if(za(n)){var s=!0;vI(t)}else s=!1;if(gv(t,i),t.stateNode===null)sD(e,t),lce(t,n,r),HL(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ml(l):(l=za(n)?S0:$o.current,l=qv(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&AX(t,o,r,l),lp=!1;var d=t.memoizedState;o.state=d,xI(t,r,o,i),u=t.memoizedState,a!==r||d!==u||ja.current||lp?(typeof c=="function"&&(VL(t,n,c,r),u=t.memoizedState),(a=lp||CX(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ule(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Wl(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ml(u):(u=za(n)?S0:$o.current,u=qv(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&AX(t,o,r,u),lp=!1,d=t.memoizedState,o.state=d,xI(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||ja.current||lp?(typeof h=="function"&&(VL(t,n,h,r),p=t.memoizedState),(l=lp||CX(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return GL(e,t,n,r,s,i)}function GL(e,t,n,r,i,s){pce(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&vX(t,n,!1),lh(e,t,s);r=t.stateNode,SRe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Gv(t,e.child,null,s),t.child=Gv(t,null,a,s)):Xo(e,t,a,s),t.memoizedState=r.state,i&&vX(t,n,!0),t.child}function mce(e){var t=e.stateNode;t.pendingContext?yX(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yX(e,t.context,!1),$B(e,t.containerInfo)}function OX(e,t,n,r,i){return Wv(),NB(i),t.flags|=256,Xo(e,t,n,r),t.child}var YL={dehydrated:null,treeContext:null,retryLane:0};function KL(e){return{baseLanes:e,cachePool:null,transitions:null}}function gce(e,t,n){var r=t.pendingProps,i=li.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pr(li,i&1),e===null)return zL(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=CR(o,r,0,null),e=l0(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=KL(n),t.memoizedState=YL,e):HB(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return TRe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Gp(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Gp(a,s):(s=l0(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?KL(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=YL,r}return s=e.child,e=s.sibling,r=Gp(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function HB(e,t){return t=CR({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function SC(e,t,n,r){return r!==null&&NB(r),Gv(t,e.child,null,n),e=HB(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TRe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=p$(Error(ot(422))),SC(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=CR({mode:"visible",children:r.children},i,0,null),s=l0(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Gv(t,e.child,null,o),t.child.memoizedState=KL(o),t.memoizedState=YL,s);if(!(t.mode&1))return SC(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ot(419)),r=p$(s,r,void 0),SC(e,t,o,r)}if(a=(o&e.childLanes)!==0,$a||a){if(r=As,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,uh(e,i),dc(r,e,i,-1))}return XB(),r=p$(Error(ot(421))),SC(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=LRe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,yu=Vp(i.nextSibling),Tu=t,ti=!0,Ql=null,e!==null&&(Ju[Zu++]=Od,Ju[Zu++]=Md,Ju[Zu++]=T0,Od=e.id,Md=e.overflow,T0=t),t=HB(t,r.children),t.flags|=4096,t)}function MX(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),UL(e.return,t,n)}function m$(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function yce(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Xo(e,t,r.children,n),r=li.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&MX(e,n,t);else if(e.tag===19)MX(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pr(li,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&SI(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),m$(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&SI(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}m$(t,!0,n,null,s);break;case"together":m$(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sD(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lh(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),A0|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,n=Gp(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gp(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function CRe(e,t,n){switch(t.tag){case 3:mce(t),Wv();break;case 5:Vle(t);break;case 1:za(t.type)&&vI(t);break;case 4:$B(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pr(EI,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pr(li,li.current&1),t.flags|=128,null):n&t.child.childLanes?gce(e,t,n):(Pr(li,li.current&1),e=lh(e,t,n),e!==null?e.sibling:null);Pr(li,li.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yce(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pr(li,li.current),r)break;return null;case 22:case 23:return t.lanes=0,hce(e,t,n)}return lh(e,t,n)}var vce,XL,bce,_ce;vce=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};XL=function(){};bce=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jg(yf.current);var s=null;switch(n){case"input":i=vL(e,i),r=vL(e,r),s=[];break;case"select":i=pi({},i,{value:void 0}),r=pi({},r,{value:void 0}),s=[];break;case"textarea":i=EL(e,i),r=EL(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=gI)}xL(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ux.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ux.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Br("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};_ce=function(e,t,n,r){n!==r&&(t.flags|=4)};function mE(e,t){if(!ti)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ARe(e,t,n){var r=t.pendingProps;switch(IB(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mo(t),null;case 1:return za(t.type)&&yI(),mo(t),null;case 3:return r=t.stateNode,Yv(),qr(ja),qr($o),LB(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(wC(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ql!==null&&(i4(Ql),Ql=null))),XL(e,t),mo(t),null;case 5:FB(t);var i=Jg(eS.current);if(n=t.type,e!==null&&t.stateNode!=null)bce(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ot(166));return mo(t),null}if(e=Jg(yf.current),wC(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[nf]=t,r[Jx]=s,e=(t.mode&1)!==0,n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<lw.length;i++)Br(lw[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":HK(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":WK(r,s),Br("invalid",r)}xL(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&EC(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&EC(r.textContent,a,e),i=["children",""+a]):Ux.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Br("scroll",r)}switch(n){case"input":hC(r),qK(r,s,!0);break;case"textarea":hC(r),GK(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gI)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yue(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[nf]=t,e[Jx]=r,vce(e,t,!1,!1),t.stateNode=e;e:{switch(o=SL(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<lw.length;i++)Br(lw[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":HK(e,r),i=vL(e,r),Br("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=pi({},r,{value:void 0}),Br("invalid",e);break;case"textarea":WK(e,r),i=EL(e,r),Br("invalid",e);break;default:i=r}xL(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Que(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Kue(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Vx(e,u):typeof u=="number"&&Vx(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ux.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Br("scroll",e):u!=null&&pB(e,s,u,o))}switch(n){case"input":hC(e),qK(e,r,!1);break;case"textarea":hC(e),GK(e);break;case"option":r.value!=null&&e.setAttribute("value",""+um(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?dv(e,!!r.multiple,s,!1):r.defaultValue!=null&&dv(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=gI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mo(t),null;case 6:if(e&&t.stateNode!=null)_ce(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ot(166));if(n=Jg(eS.current),Jg(yf.current),wC(t)){if(r=t.stateNode,n=t.memoizedProps,r[nf]=t,(s=r.nodeValue!==n)&&(e=Tu,e!==null))switch(e.tag){case 3:EC(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&EC(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nf]=t,t.stateNode=r}return mo(t),null;case 13:if(qr(li),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ti&&yu!==null&&t.mode&1&&!(t.flags&128))Lle(),Wv(),t.flags|=98560,s=!1;else if(s=wC(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ot(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ot(317));s[nf]=t}else Wv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mo(t),s=!1}else Ql!==null&&(i4(Ql),Ql=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||li.current&1?is===0&&(is=3):XB())),t.updateQueue!==null&&(t.flags|=4),mo(t),null);case 4:return Yv(),XL(e,t),e===null&&Xx(t.stateNode.containerInfo),mo(t),null;case 10:return PB(t.type._context),mo(t),null;case 17:return za(t.type)&&yI(),mo(t),null;case 19:if(qr(li),s=t.memoizedState,s===null)return mo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)mE(s,!1);else{if(is!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=SI(e),o!==null){for(t.flags|=128,mE(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pr(li,li.current&1|2),t.child}e=e.sibling}s.tail!==null&&Oi()>Xv&&(t.flags|=128,r=!0,mE(s,!1),t.lanes=4194304)}else{if(!r)if(e=SI(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mE(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ti)return mo(t),null}else 2*Oi()-s.renderingStartTime>Xv&&n!==1073741824&&(t.flags|=128,r=!0,mE(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Oi(),t.sibling=null,n=li.current,Pr(li,r?n&1|2:n&1),t):(mo(t),null);case 22:case 23:return KB(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?du&1073741824&&(mo(t),t.subtreeFlags&6&&(t.flags|=8192)):mo(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function DRe(e,t){switch(IB(t),t.tag){case 1:return za(t.type)&&yI(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yv(),qr(ja),qr($o),LB(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return FB(t),null;case 13:if(qr(li),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));Wv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qr(li),null;case 4:return Yv(),null;case 10:return PB(t.type._context),null;case 22:case 23:return KB(),null;case 24:return null;default:return null}}var TC=!1,So=!1,IRe=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Q1(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_i(e,t,r)}else n.current=null}function QL(e,t,n){try{n()}catch(r){_i(e,t,r)}}var $X=!1;function NRe(e,t){if(OL=hI,e=Tle(),AB(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ML={focusedElem:e,selectionRange:n},hI=!1,Tt=t;Tt!==null;)if(t=Tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Tt=e;else for(;Tt!==null;){t=Tt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wl(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(E){_i(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Tt=e;break}Tt=t.return}return p=$X,$X=!1,p}function Zw(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&QL(t,n,s)}i=i.next}while(i!==r)}}function SR(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function JL(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ece(e){var t=e.alternate;t!==null&&(e.alternate=null,Ece(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nf],delete t[Jx],delete t[LL],delete t[dRe],delete t[hRe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wce(e){return e.tag===5||e.tag===3||e.tag===4}function FX(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wce(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ZL(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=gI));else if(r!==4&&(e=e.child,e!==null))for(ZL(e,t,n),e=e.sibling;e!==null;)ZL(e,t,n),e=e.sibling}function e4(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(e4(e,t,n),e=e.sibling;e!==null;)e4(e,t,n),e=e.sibling}var Vs=null,Yl=!1;function Qh(e,t,n){for(n=n.child;n!==null;)xce(e,t,n),n=n.sibling}function xce(e,t,n){if(gf&&typeof gf.onCommitFiberUnmount=="function")try{gf.onCommitFiberUnmount(gR,n)}catch{}switch(n.tag){case 5:So||Q1(n,t);case 6:var r=Vs,i=Yl;Vs=null,Qh(e,t,n),Vs=r,Yl=i,Vs!==null&&(Yl?(e=Vs,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vs.removeChild(n.stateNode));break;case 18:Vs!==null&&(Yl?(e=Vs,n=n.stateNode,e.nodeType===8?u$(e.parentNode,n):e.nodeType===1&&u$(e,n),Gx(e)):u$(Vs,n.stateNode));break;case 4:r=Vs,i=Yl,Vs=n.stateNode.containerInfo,Yl=!0,Qh(e,t,n),Vs=r,Yl=i;break;case 0:case 11:case 14:case 15:if(!So&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&QL(n,t,o),i=i.next}while(i!==r)}Qh(e,t,n);break;case 1:if(!So&&(Q1(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_i(n,t,a)}Qh(e,t,n);break;case 21:Qh(e,t,n);break;case 22:n.mode&1?(So=(r=So)||n.memoizedState!==null,Qh(e,t,n),So=r):Qh(e,t,n);break;default:Qh(e,t,n)}}function LX(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new IRe),t.forEach(function(r){var i=BRe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ll(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vs=a.stateNode,Yl=!1;break e;case 3:Vs=a.stateNode.containerInfo,Yl=!0;break e;case 4:Vs=a.stateNode.containerInfo,Yl=!0;break e}a=a.return}if(Vs===null)throw Error(ot(160));xce(s,o,i),Vs=null,Yl=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){_i(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sce(t,e),t=t.sibling}function Sce(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ll(t,e),Hc(e),r&4){try{Zw(3,e,e.return),SR(3,e)}catch(m){_i(e,e.return,m)}try{Zw(5,e,e.return)}catch(m){_i(e,e.return,m)}}break;case 1:Ll(t,e),Hc(e),r&512&&n!==null&&Q1(n,n.return);break;case 5:if(Ll(t,e),Hc(e),r&512&&n!==null&&Q1(n,n.return),e.flags&32){var i=e.stateNode;try{Vx(i,"")}catch(m){_i(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Wue(i,s),SL(a,o);var l=SL(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Que(i,f):c==="dangerouslySetInnerHTML"?Kue(i,f):c==="children"?Vx(i,f):pB(i,c,f,l)}switch(a){case"input":bL(i,s);break;case"textarea":Gue(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?dv(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?dv(i,!!s.multiple,s.defaultValue,!0):dv(i,!!s.multiple,s.multiple?[]:"",!1))}i[Jx]=s}catch(m){_i(e,e.return,m)}}break;case 6:if(Ll(t,e),Hc(e),r&4){if(e.stateNode===null)throw Error(ot(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){_i(e,e.return,m)}}break;case 3:if(Ll(t,e),Hc(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gx(t.containerInfo)}catch(m){_i(e,e.return,m)}break;case 4:Ll(t,e),Hc(e);break;case 13:Ll(t,e),Hc(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(GB=Oi())),r&4&&LX(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(So=(l=So)||c,Ll(t,e),So=l):Ll(t,e),Hc(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Tt=e,c=e.child;c!==null;){for(f=Tt=c;Tt!==null;){switch(d=Tt,h=d.child,d.tag){case 0:case 11:case 14:case 15:Zw(4,d,d.return);break;case 1:Q1(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){_i(r,n,m)}}break;case 5:Q1(d,d.return);break;case 22:if(d.memoizedState!==null){jX(f);continue}}h!==null?(h.return=d,Tt=h):jX(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Xue("display",o))}catch(m){_i(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){_i(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ll(t,e),Hc(e),r&4&&LX(e);break;case 21:break;default:Ll(t,e),Hc(e)}}function Hc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wce(n)){var r=n;break e}n=n.return}throw Error(ot(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vx(i,""),r.flags&=-33);var s=FX(e);e4(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=FX(e);ZL(e,a,o);break;default:throw Error(ot(161))}}catch(u){_i(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kRe(e,t,n){Tt=e,Tce(e)}function Tce(e,t,n){for(var r=(e.mode&1)!==0;Tt!==null;){var i=Tt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||TC;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||So;a=TC;var l=So;if(TC=o,(So=u)&&!l)for(Tt=i;Tt!==null;)o=Tt,u=o.child,o.tag===22&&o.memoizedState!==null?zX(i):u!==null?(u.return=o,Tt=u):zX(i);for(;s!==null;)Tt=s,Tce(s),s=s.sibling;Tt=i,TC=a,So=l}BX(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Tt=s):BX(e)}}function BX(e){for(;Tt!==null;){var t=Tt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:So||SR(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!So)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wl(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&xX(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xX(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Gx(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}So||t.flags&512&&JL(t)}catch(d){_i(t,t.return,d)}}if(t===e){Tt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function jX(e){for(;Tt!==null;){var t=Tt;if(t===e){Tt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function zX(e){for(;Tt!==null;){var t=Tt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{SR(4,t)}catch(u){_i(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){_i(t,i,u)}}var s=t.return;try{JL(t)}catch(u){_i(t,s,u)}break;case 5:var o=t.return;try{JL(t)}catch(u){_i(t,o,u)}}}catch(u){_i(t,t.return,u)}if(t===e){Tt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Tt=a;break}Tt=t.return}}var RRe=Math.ceil,AI=Ih.ReactCurrentDispatcher,qB=Ih.ReactCurrentOwner,fl=Ih.ReactCurrentBatchConfig,qn=0,As=null,qi=null,Qs=0,du=0,J1=Lm(0),is=0,iS=null,A0=0,TR=0,WB=0,ex=null,Ia=null,GB=0,Xv=1/0,Sd=null,DI=!1,t4=null,qp=null,CC=!1,Cp=null,II=0,tx=0,n4=null,oD=-1,aD=0;function sa(){return qn&6?Oi():oD!==-1?oD:oD=Oi()}function Wp(e){return e.mode&1?qn&2&&Qs!==0?Qs&-Qs:mRe.transition!==null?(aD===0&&(aD=lle()),aD):(e=pr,e!==0||(e=window.event,e=e===void 0?16:gle(e.type)),e):1}function dc(e,t,n,r){if(50<tx)throw tx=0,n4=null,Error(ot(185));yT(e,n,r),(!(qn&2)||e!==As)&&(e===As&&(!(qn&2)&&(TR|=n),is===4&&yp(e,Qs)),Ua(e,r),n===1&&qn===0&&!(t.mode&1)&&(Xv=Oi()+500,ER&&Bm()))}function Ua(e,t){var n=e.callbackNode;mke(e,t);var r=dI(e,e===As?Qs:0);if(r===0)n!==null&&XK(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&XK(n),t===1)e.tag===0?pRe(UX.bind(null,e)):Mle(UX.bind(null,e)),cRe(function(){!(qn&6)&&Bm()}),n=null;else{switch(cle(r)){case 1:n=bB;break;case 4:n=ale;break;case 16:n=fI;break;case 536870912:n=ule;break;default:n=fI}n=Pce(n,Cce.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Cce(e,t){if(oD=-1,aD=0,qn&6)throw Error(ot(327));var n=e.callbackNode;if(yv()&&e.callbackNode!==n)return null;var r=dI(e,e===As?Qs:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=NI(e,r);else{t=r;var i=qn;qn|=2;var s=Dce();(As!==e||Qs!==t)&&(Sd=null,Xv=Oi()+500,u0(e,t));do try{MRe();break}catch(a){Ace(e,a)}while(!0);RB(),AI.current=s,qn=i,qi!==null?t=0:(As=null,Qs=0,t=is)}if(t!==0){if(t===2&&(i=IL(e),i!==0&&(r=i,t=r4(e,i))),t===1)throw n=iS,u0(e,0),yp(e,r),Ua(e,Oi()),n;if(t===6)yp(e,r);else{if(i=e.current.alternate,!(r&30)&&!PRe(i)&&(t=NI(e,r),t===2&&(s=IL(e),s!==0&&(r=s,t=r4(e,s))),t===1))throw n=iS,u0(e,0),yp(e,r),Ua(e,Oi()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ot(345));case 2:kg(e,Ia,Sd);break;case 3:if(yp(e,r),(r&130023424)===r&&(t=GB+500-Oi(),10<t)){if(dI(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){sa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=FL(kg.bind(null,e,Ia,Sd),t);break}kg(e,Ia,Sd);break;case 4:if(yp(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-fc(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Oi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RRe(r/1960))-r,10<r){e.timeoutHandle=FL(kg.bind(null,e,Ia,Sd),r);break}kg(e,Ia,Sd);break;case 5:kg(e,Ia,Sd);break;default:throw Error(ot(329))}}}return Ua(e,Oi()),e.callbackNode===n?Cce.bind(null,e):null}function r4(e,t){var n=ex;return e.current.memoizedState.isDehydrated&&(u0(e,t).flags|=256),e=NI(e,t),e!==2&&(t=Ia,Ia=n,t!==null&&i4(t)),e}function i4(e){Ia===null?Ia=e:Ia.push.apply(Ia,e)}function PRe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wc(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yp(e,t){for(t&=~WB,t&=~TR,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-fc(t),r=1<<n;e[n]=-1,t&=~r}}function UX(e){if(qn&6)throw Error(ot(327));yv();var t=dI(e,0);if(!(t&1))return Ua(e,Oi()),null;var n=NI(e,t);if(e.tag!==0&&n===2){var r=IL(e);r!==0&&(t=r,n=r4(e,r))}if(n===1)throw n=iS,u0(e,0),yp(e,t),Ua(e,Oi()),n;if(n===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kg(e,Ia,Sd),Ua(e,Oi()),null}function YB(e,t){var n=qn;qn|=1;try{return e(t)}finally{qn=n,qn===0&&(Xv=Oi()+500,ER&&Bm())}}function D0(e){Cp!==null&&Cp.tag===0&&!(qn&6)&&yv();var t=qn;qn|=1;var n=fl.transition,r=pr;try{if(fl.transition=null,pr=1,e)return e()}finally{pr=r,fl.transition=n,qn=t,!(qn&6)&&Bm()}}function KB(){du=J1.current,qr(J1)}function u0(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lRe(n)),qi!==null)for(n=qi.return;n!==null;){var r=n;switch(IB(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yI();break;case 3:Yv(),qr(ja),qr($o),LB();break;case 5:FB(r);break;case 4:Yv();break;case 13:qr(li);break;case 19:qr(li);break;case 10:PB(r.type._context);break;case 22:case 23:KB()}n=n.return}if(As=e,qi=e=Gp(e.current,null),Qs=du=t,is=0,iS=null,WB=TR=A0=0,Ia=ex=null,Qg!==null){for(t=0;t<Qg.length;t++)if(n=Qg[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Qg=null}return e}function Ace(e,t){do{var n=qi;try{if(RB(),rD.current=CI,TI){for(var r=di.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}TI=!1}if(C0=0,vs=Zi=di=null,Jw=!1,tS=0,qB.current=null,n===null||n.return===null){is=1,iS=t,qi=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Qs,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=IX(o);if(h!==null){h.flags&=-257,NX(h,o,a,s,t),h.mode&1&&DX(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){DX(s,l,t),XB();break e}u=Error(ot(426))}}else if(ti&&a.mode&1){var g=IX(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),NX(g,o,a,s,t),NB(Kv(u,a));break e}}s=u=Kv(u,a),is!==4&&(is=2),ex===null?ex=[s]:ex.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=cce(s,u,t);wX(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qp===null||!qp.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=fce(s,a,t);wX(s,E);break e}}s=s.return}while(s!==null)}Nce(n)}catch(_){t=_,qi===n&&n!==null&&(qi=n=n.return);continue}break}while(!0)}function Dce(){var e=AI.current;return AI.current=CI,e===null?CI:e}function XB(){(is===0||is===3||is===2)&&(is=4),As===null||!(A0&268435455)&&!(TR&268435455)||yp(As,Qs)}function NI(e,t){var n=qn;qn|=2;var r=Dce();(As!==e||Qs!==t)&&(Sd=null,u0(e,t));do try{ORe();break}catch(i){Ace(e,i)}while(!0);if(RB(),qn=n,AI.current=r,qi!==null)throw Error(ot(261));return As=null,Qs=0,is}function ORe(){for(;qi!==null;)Ice(qi)}function MRe(){for(;qi!==null&&!oke();)Ice(qi)}function Ice(e){var t=Rce(e.alternate,e,du);e.memoizedProps=e.pendingProps,t===null?Nce(e):qi=t,qB.current=null}function Nce(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=DRe(n,t),n!==null){n.flags&=32767,qi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{is=6,qi=null;return}}else if(n=ARe(n,t,du),n!==null){qi=n;return}if(t=t.sibling,t!==null){qi=t;return}qi=t=e}while(t!==null);is===0&&(is=5)}function kg(e,t,n){var r=pr,i=fl.transition;try{fl.transition=null,pr=1,$Re(e,t,n,r)}finally{fl.transition=i,pr=r}return null}function $Re(e,t,n,r){do yv();while(Cp!==null);if(qn&6)throw Error(ot(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(gke(e,s),e===As&&(qi=As=null,Qs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||CC||(CC=!0,Pce(fI,function(){return yv(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fl.transition,fl.transition=null;var o=pr;pr=1;var a=qn;qn|=4,qB.current=null,NRe(e,n),Sce(n,e),nRe(ML),hI=!!OL,ML=OL=null,e.current=n,kRe(n),ake(),qn=a,pr=o,fl.transition=s}else e.current=n;if(CC&&(CC=!1,Cp=e,II=i),s=e.pendingLanes,s===0&&(qp=null),cke(n.stateNode),Ua(e,Oi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(DI)throw DI=!1,e=t4,t4=null,e;return II&1&&e.tag!==0&&yv(),s=e.pendingLanes,s&1?e===n4?tx++:(tx=0,n4=e):tx=0,Bm(),null}function yv(){if(Cp!==null){var e=cle(II),t=fl.transition,n=pr;try{if(fl.transition=null,pr=16>e?16:e,Cp===null)var r=!1;else{if(e=Cp,Cp=null,II=0,qn&6)throw Error(ot(331));var i=qn;for(qn|=4,Tt=e.current;Tt!==null;){var s=Tt,o=s.child;if(Tt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Tt=l;Tt!==null;){var c=Tt;switch(c.tag){case 0:case 11:case 15:Zw(8,c,s)}var f=c.child;if(f!==null)f.return=c,Tt=f;else for(;Tt!==null;){c=Tt;var d=c.sibling,h=c.return;if(Ece(c),c===l){Tt=null;break}if(d!==null){d.return=h,Tt=d;break}Tt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Tt=o;else e:for(;Tt!==null;){if(s=Tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zw(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Tt=y;break e}Tt=s.return}}var v=e.current;for(Tt=v;Tt!==null;){o=Tt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Tt=b;else e:for(o=v;Tt!==null;){if(a=Tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:SR(9,a)}}catch(_){_i(a,a.return,_)}if(a===o){Tt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Tt=E;break e}Tt=a.return}}if(qn=i,Bm(),gf&&typeof gf.onPostCommitFiberRoot=="function")try{gf.onPostCommitFiberRoot(gR,e)}catch{}r=!0}return r}finally{pr=n,fl.transition=t}}return!1}function VX(e,t,n){t=Kv(n,t),t=cce(e,t,1),e=Hp(e,t,1),t=sa(),e!==null&&(yT(e,1,t),Ua(e,t))}function _i(e,t,n){if(e.tag===3)VX(e,e,n);else for(;t!==null;){if(t.tag===3){VX(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qp===null||!qp.has(r))){e=Kv(n,e),e=fce(t,e,1),t=Hp(t,e,1),e=sa(),t!==null&&(yT(t,1,e),Ua(t,e));break}}t=t.return}}function FRe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=sa(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Qs&n)===n&&(is===4||is===3&&(Qs&130023424)===Qs&&500>Oi()-GB?u0(e,0):WB|=n),Ua(e,t)}function kce(e,t){t===0&&(e.mode&1?(t=gC,gC<<=1,!(gC&130023424)&&(gC=4194304)):t=1);var n=sa();e=uh(e,t),e!==null&&(yT(e,t,n),Ua(e,n))}function LRe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kce(e,n)}function BRe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ot(314))}r!==null&&r.delete(t),kce(e,n)}var Rce;Rce=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ja.current)$a=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $a=!1,CRe(e,t,n);$a=!!(e.flags&131072)}else $a=!1,ti&&t.flags&1048576&&$le(t,_I,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sD(e,t),e=t.pendingProps;var i=qv(t,$o.current);gv(t,n),i=jB(null,t,r,e,i,n);var s=zB();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,za(r)?(s=!0,vI(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,MB(t),i.updater=xR,t.stateNode=i,i._reactInternals=t,HL(t,r,e,n),t=GL(null,t,r,!0,s,n)):(t.tag=0,ti&&s&&DB(t),Xo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sD(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=zRe(r),e=Wl(r,e),i){case 0:t=WL(null,t,r,e,n);break e;case 1:t=PX(null,t,r,e,n);break e;case 11:t=kX(null,t,r,e,n);break e;case 14:t=RX(null,t,r,Wl(r.type,e),n);break e}throw Error(ot(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wl(r,i),WL(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wl(r,i),PX(e,t,r,i,n);case 3:e:{if(mce(t),e===null)throw Error(ot(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Ule(e,t),xI(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Kv(Error(ot(423)),t),t=OX(e,t,r,n,i);break e}else if(r!==i){i=Kv(Error(ot(424)),t),t=OX(e,t,r,n,i);break e}else for(yu=Vp(t.stateNode.containerInfo.firstChild),Tu=t,ti=!0,Ql=null,n=jle(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wv(),r===i){t=lh(e,t,n);break e}Xo(e,t,r,n)}t=t.child}return t;case 5:return Vle(t),e===null&&zL(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,$L(r,i)?o=null:s!==null&&$L(r,s)&&(t.flags|=32),pce(e,t),Xo(e,t,o,n),t.child;case 6:return e===null&&zL(t),null;case 13:return gce(e,t,n);case 4:return $B(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gv(t,null,r,n):Xo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wl(r,i),kX(e,t,r,i,n);case 7:return Xo(e,t,t.pendingProps,n),t.child;case 8:return Xo(e,t,t.pendingProps.children,n),t.child;case 12:return Xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Pr(EI,r._currentValue),r._currentValue=o,s!==null)if(wc(s.value,o)){if(s.children===i.children&&!ja.current){t=lh(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Gd(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),UL(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ot(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),UL(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,gv(t,n),i=ml(i),r=r(i),t.flags|=1,Xo(e,t,r,n),t.child;case 14:return r=t.type,i=Wl(r,t.pendingProps),i=Wl(r.type,i),RX(e,t,r,i,n);case 15:return dce(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wl(r,i),sD(e,t),t.tag=1,za(r)?(e=!0,vI(t)):e=!1,gv(t,n),lce(t,r,i),HL(t,r,i,n),GL(null,t,r,!0,e,n);case 19:return yce(e,t,n);case 22:return hce(e,t,n)}throw Error(ot(156,t.tag))};function Pce(e,t){return ole(e,t)}function jRe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sl(e,t,n,r){return new jRe(e,t,n,r)}function QB(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zRe(e){if(typeof e=="function")return QB(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gB)return 11;if(e===yB)return 14}return 2}function Gp(e,t){var n=e.alternate;return n===null?(n=sl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function uD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")QB(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case U1:return l0(n.children,i,s,t);case mB:o=8,i|=8;break;case pL:return e=sl(12,n,t,i|2),e.elementType=pL,e.lanes=s,e;case mL:return e=sl(13,n,t,i),e.elementType=mL,e.lanes=s,e;case gL:return e=sl(19,n,t,i),e.elementType=gL,e.lanes=s,e;case Vue:return CR(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zue:o=10;break e;case Uue:o=9;break e;case gB:o=11;break e;case yB:o=14;break e;case up:o=16,r=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=sl(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function l0(e,t,n,r){return e=sl(7,e,r,t),e.lanes=n,e}function CR(e,t,n,r){return e=sl(22,e,r,t),e.elementType=Vue,e.lanes=n,e.stateNode={isHidden:!1},e}function g$(e,t,n){return e=sl(6,e,null,t),e.lanes=n,e}function y$(e,t,n){return t=sl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function URe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=QM(0),this.expirationTimes=QM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=QM(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JB(e,t,n,r,i,s,o,a,u){return e=new URe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=sl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},MB(s),e}function VRe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z1,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Oce(e){if(!e)return lm;e=e._reactInternals;e:{if(hy(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(za(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var n=e.type;if(za(n))return Ole(e,n,t)}return t}function Mce(e,t,n,r,i,s,o,a,u){return e=JB(n,r,!0,e,i,s,o,a,u),e.context=Oce(null),n=e.current,r=sa(),i=Wp(n),s=Gd(r,i),s.callback=t??null,Hp(n,s,i),e.current.lanes=i,yT(e,i,r),Ua(e,r),e}function AR(e,t,n,r){var i=t.current,s=sa(),o=Wp(i);return n=Oce(n),t.context===null?t.context=n:t.pendingContext=n,t=Gd(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hp(i,t,o),e!==null&&(dc(e,i,o,s),nD(e,i,o)),o}function kI(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function HX(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ZB(e,t){HX(e,t),(e=e.alternate)&&HX(e,t)}function HRe(){return null}var $ce=typeof reportError=="function"?reportError:function(e){console.error(e)};function e7(e){this._internalRoot=e}DR.prototype.render=e7.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));AR(e,t,null,null)};DR.prototype.unmount=e7.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;D0(function(){AR(null,e,null,null)}),t[ah]=null}};function DR(e){this._internalRoot=e}DR.prototype.unstable_scheduleHydration=function(e){if(e){var t=hle();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gp.length&&t!==0&&t<gp[n].priority;n++);gp.splice(n,0,e),n===0&&mle(e)}};function t7(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function IR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qX(){}function qRe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=kI(o);s.call(l)}}var o=Mce(t,r,e,0,null,!1,!1,"",qX);return e._reactRootContainer=o,e[ah]=o.current,Xx(e.nodeType===8?e.parentNode:e),D0(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=kI(u);a.call(l)}}var u=JB(e,0,!1,null,null,!1,!1,"",qX);return e._reactRootContainer=u,e[ah]=u.current,Xx(e.nodeType===8?e.parentNode:e),D0(function(){AR(t,u,n,r)}),u}function NR(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=kI(o);a.call(u)}}AR(t,o,e,i)}else o=qRe(n,t,e,i,r);return kI(o)}fle=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=uw(t.pendingLanes);n!==0&&(_B(t,n|1),Ua(t,Oi()),!(qn&6)&&(Xv=Oi()+500,Bm()))}break;case 13:D0(function(){var r=uh(e,1);if(r!==null){var i=sa();dc(r,e,1,i)}}),ZB(e,1)}};EB=function(e){if(e.tag===13){var t=uh(e,134217728);if(t!==null){var n=sa();dc(t,e,134217728,n)}ZB(e,134217728)}};dle=function(e){if(e.tag===13){var t=Wp(e),n=uh(e,t);if(n!==null){var r=sa();dc(n,e,t,r)}ZB(e,t)}};hle=function(){return pr};ple=function(e,t){var n=pr;try{return pr=e,t()}finally{pr=n}};CL=function(e,t,n){switch(t){case"input":if(bL(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_R(r);if(!i)throw Error(ot(90));que(r),bL(r,i)}}}break;case"textarea":Gue(e,n);break;case"select":t=n.value,t!=null&&dv(e,!!n.multiple,t,!1)}};ele=YB;tle=D0;var WRe={usingClientEntryPoint:!1,Events:[bT,W1,_R,Jue,Zue,YB]},gE={findFiberByHostInstance:Xg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GRe={bundleType:gE.bundleType,version:gE.version,rendererPackageName:gE.rendererPackageName,rendererConfig:gE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ih.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ile(e),e===null?null:e.stateNode},findFiberByHostInstance:gE.findFiberByHostInstance||HRe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var AC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!AC.isDisabled&&AC.supportsFiber)try{gR=AC.inject(GRe),gf=AC}catch{}}zu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WRe;zu.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t7(t))throw Error(ot(200));return VRe(e,t,null,n)};zu.createRoot=function(e,t){if(!t7(e))throw Error(ot(299));var n=!1,r="",i=$ce;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=JB(e,1,!1,null,null,n,!1,r,i),e[ah]=t.current,Xx(e.nodeType===8?e.parentNode:e),new e7(t)};zu.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=ile(t),e=e===null?null:e.stateNode,e};zu.flushSync=function(e){return D0(e)};zu.hydrate=function(e,t,n){if(!IR(t))throw Error(ot(200));return NR(null,e,t,!0,n)};zu.hydrateRoot=function(e,t,n){if(!t7(e))throw Error(ot(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$ce;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Mce(t,null,e,1,n??null,i,!1,s,o),e[ah]=t.current,Xx(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new DR(t)};zu.render=function(e,t,n){if(!IR(t))throw Error(ot(200));return NR(null,e,t,!1,n)};zu.unmountComponentAtNode=function(e){if(!IR(e))throw Error(ot(40));return e._reactRootContainer?(D0(function(){NR(null,null,e,!1,function(){e._reactRootContainer=null,e[ah]=null})}),!0):!1};zu.unstable_batchedUpdates=YB;zu.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!IR(n))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return NR(e,t,n,!1,r)};zu.version="18.3.1-next-f1338f8080-20240426";function Fce(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fce)}catch(e){console.error(e)}}Fce(),Fue.exports=zu;var ET=Fue.exports;const YRe=ha(ET);var WX=ET;dL.createRoot=WX.createRoot,dL.hydrateRoot=WX.hydrateRoot;var rf=function(){return rf=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},rf.apply(this,arguments)};function wT(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function KRe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var lD="right-scroll-bar-position",cD="width-before-scroll-bar",XRe="with-scroll-bars-hidden",QRe="--removed-body-scroll-bar-size";function v$(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function JRe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var ZRe=typeof window<"u"?k.useLayoutEffect:k.useEffect,GX=new WeakMap;function ePe(e,t){var n=JRe(null,function(r){return e.forEach(function(i){return v$(i,r)})});return ZRe(function(){var r=GX.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||v$(a,null)}),s.forEach(function(a){i.has(a)||v$(a,o)})}GX.set(n,e)},[e]),n}function tPe(e){return e}function nPe(e,t){t===void 0&&(t=tPe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function rPe(e){e===void 0&&(e={});var t=nPe(null);return t.options=rf({async:!0,ssr:!1},e),t}var Lce=function(e){var t=e.sideCar,n=wT(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,rf({},n))};Lce.isSideCarExport=!0;function iPe(e,t){return e.useMedium(t),Lce}var Bce=rPe(),b$=function(){},kR=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:b$,onWheelCapture:b$,onTouchMoveCapture:b$}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=wT(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,_=ePe([n,t]),w=rf(rf({},b),i);return k.createElement(k.Fragment,null,c&&k.createElement(E,{sideCar:Bce,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?k.cloneElement(k.Children.only(a),rf(rf({},w),{ref:_})):k.createElement(y,rf({},w,{className:u,ref:_}),a))});kR.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kR.classNames={fullWidth:cD,zeroRight:lD};var sPe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oPe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=sPe();return t&&e.setAttribute("nonce",t),e}function aPe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function uPe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var lPe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=oPe())&&(aPe(t,n),uPe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},cPe=function(){var e=lPe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},jce=function(){var e=cPe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},fPe={left:0,top:0,right:0,gap:0},_$=function(e){return parseInt(e||"",10)||0},dPe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[_$(n),_$(r),_$(i)]},hPe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fPe;var t=dPe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},pPe=jce(),vv="data-scroll-locked",mPe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(XRe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(vv,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(cD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(lD," .").concat(lD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(cD," .").concat(cD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(vv,`] {
    `).concat(QRe,": ").concat(a,`px;
  }
`)},YX=function(){var e=parseInt(document.body.getAttribute(vv)||"0",10);return isFinite(e)?e:0},gPe=function(){k.useEffect(function(){return document.body.setAttribute(vv,(YX()+1).toString()),function(){var e=YX()-1;e<=0?document.body.removeAttribute(vv):document.body.setAttribute(vv,e.toString())}},[])},yPe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;gPe();var s=k.useMemo(function(){return hPe(i)},[i]);return k.createElement(pPe,{styles:mPe(s,!t,i,n?"":"!important")})},s4=!1;if(typeof window<"u")try{var DC=Object.defineProperty({},"passive",{get:function(){return s4=!0,!0}});window.addEventListener("test",DC,DC),window.removeEventListener("test",DC,DC)}catch{s4=!1}var o1=s4?{passive:!1}:!1,vPe=function(e){return e.tagName==="TEXTAREA"},zce=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!vPe(e)&&n[t]==="visible")},bPe=function(e){return zce(e,"overflowY")},_Pe=function(e){return zce(e,"overflowX")},KX=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Uce(e,r);if(i){var s=Vce(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},EPe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},wPe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Uce=function(e,t){return e==="v"?bPe(t):_Pe(t)},Vce=function(e,t){return e==="v"?EPe(t):wPe(t)},xPe=function(e,t){return e==="h"&&t==="rtl"?-1:1},SPe=function(e,t,n,r,i){var s=xPe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Vce(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Uce(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},IC=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},XX=function(e){return[e.deltaX,e.deltaY]},QX=function(e){return e&&"current"in e?e.current:e},TPe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},CPe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},APe=0,a1=[];function DPe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState(APe++)[0],s=k.useState(jce)[0],o=k.useRef(e);k.useEffect(function(){o.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=KRe([e.lockRef.current],(e.shards||[]).map(QX),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=IC(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],E="deltaY"in m?m.deltaY:v[1]-y[1],_,w=m.target,S=Math.abs(b)>Math.abs(E)?"h":"v";if("touches"in m&&S==="h"&&w.type==="range")return!1;var C=KX(S,w);if(!C)return!0;if(C?_=S:(_=S==="v"?"h":"v",C=KX(S,w)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||E)&&(r.current=_),!_)return!0;var A=r.current||_;return SPe(A,g,m,A==="h"?b:E,!0)},[]),u=k.useCallback(function(m){var g=m;if(!(!a1.length||a1[a1.length-1]!==s)){var y="deltaY"in g?XX(g):IC(g),v=t.current.filter(function(_){return _.name===g.type&&(_.target===g.target||g.target===_.shadowParent)&&TPe(_.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(QX).filter(Boolean).filter(function(_){return _.contains(g.target)}),E=b.length>0?a(g,b[0]):!o.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=k.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:IPe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(E){return E!==b})},1)},[]),c=k.useCallback(function(m){n.current=IC(m),r.current=void 0},[]),f=k.useCallback(function(m){l(m.type,XX(m),m.target,a(m,e.lockRef.current))},[]),d=k.useCallback(function(m){l(m.type,IC(m),m.target,a(m,e.lockRef.current))},[]);k.useEffect(function(){return a1.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,o1),document.addEventListener("touchmove",u,o1),document.addEventListener("touchstart",c,o1),function(){a1=a1.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,o1),document.removeEventListener("touchmove",u,o1),document.removeEventListener("touchstart",c,o1)}},[]);var h=e.removeScrollBar,p=e.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:CPe(i)}):null,h?k.createElement(yPe,{gapMode:e.gapMode}):null)}function IPe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const NPe=iPe(Bce,DPe);var RR=k.forwardRef(function(e,t){return k.createElement(kR,rf({},e,{ref:t,sideCar:NPe}))});RR.classNames=kR.classNames;function hi(e){return Object.keys(e)}function E$(e){return e&&typeof e=="object"&&!Array.isArray(e)}function n7(e,t){const n={...e},r=t;return E$(e)&&E$(t)&&Object.keys(t).forEach(i=>{E$(r[i])&&i in e?n[i]=n7(n[i],r[i]):n[i]=r[i]}),n}function kPe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function RPe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function o4(e){const t=RPe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function w$(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Hce(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?w$(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?w$(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?w$(s):s}}return r}return n}const Ne=Hce("rem",{shouldScale:!0}),RI=Hce("em");function i_(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function qce(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function jm(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==k.Fragment:!1}function ks(e){const t=k.createContext(null);return[({children:i,value:s})=>x.jsx(t.Provider,{value:s,children:i}),()=>{const i=k.useContext(t);if(i===null)throw new Error(e);return i}]}function s_(e=null){const t=k.createContext(e);return[({children:i,value:s})=>x.jsx(t.Provider,{value:s,children:i}),()=>k.useContext(t)]}function PI(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function OI(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function PPe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function OPe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function MPe(e,t,n){return OI(e,n)===OI(t,n)}function r7({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=OI(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>MPe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=OPe(l,u,r),f=PPe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const $Pe={app:100,modal:200,popover:300,overlay:400,max:9999};function Cl(e){return $Pe[e]}const FPe=()=>{};function LPe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||FPe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function cn(e,t="size",n=!0){if(e!==void 0)return qce(e)?n?Ne(e):e:`var(--${t}-${e})`}function Nu(e){return cn(e,"mantine-spacing")}function Kr(e){return e===void 0?"var(--mantine-radius-default)":cn(e,"mantine-radius")}function Js(e){return cn(e,"mantine-font-size")}function Wce(e){return cn(e,"mantine-line-height",!1)}function i7(e){if(e)return cn(e,"mantine-shadow",!1)}function $d(e,t){return n=>{e==null||e(n),t==null||t(n)}}function s7(e,t){return e in t.breakpoints?o4(t.breakpoints[e]):o4(e)}function MI(e,t){const n=e.map(r=>({value:r,px:s7(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function cw(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function BPe(e,t,n){var r;return n?Array.from(((r=OI(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function jPe(){const[e,t]=k.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function cf(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function nx(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Fg(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function PR(e,t){const n=Fg(e),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const JX=["mousedown","touchstart"];function zPe(e,t,n){const r=k.useRef();return k.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||JX).forEach(s=>document.addEventListener(s,i)),()=>{(t||JX).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function UPe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function VPe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function HPe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=k.useState(n?t:VPe(e)),s=k.useRef();return k.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),UPe(s.current,o=>i(o.matches))},[e]),r}const py=typeof document<"u"?k.useLayoutEffect:k.useEffect;function ch(e,t){const n=k.useRef(!1);k.useEffect(()=>()=>{n.current=!1},[]),k.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Gce({opened:e,shouldReturnFocus:t=!0}){const n=k.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return ch(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function qPe(e,t="body > :not(script)"){const n=nx(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const WPe=/input|select|textarea|button|object/,Yce="a, input, select, textarea, button, object, [tabindex]";function GPe(e){return e.style.display==="none"}function YPe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(GPe(n))return!1;n=n.parentNode}return!0}function Kce(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function a4(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Kce(e));return(WPe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&YPe(e)}function Xce(e){const t=Kce(e);return(Number.isNaN(t)||t>=0)&&a4(e)}function KPe(e){return Array.from(e.querySelectorAll(Yce)).filter(Xce)}function XPe(e,t){const n=KPe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function QPe(e=!0){const t=k.useRef(),n=k.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Yce));o=a.find(Xce)||a.find(a4)||null,!o&&a4(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=k.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=qPe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return k.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&XPe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const JPe=xi.useId||(()=>{});function ZPe(){const e=JPe();return e?`mantine-${e.replace(/:/g,"")}`:""}function ga(e){const t=ZPe(),[n,r]=k.useState(t);return py(()=>{r(nx())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Qce(e,t,n){k.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function o7(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Jce(...e){return t=>{e.forEach(n=>o7(n,t))}}function cs(...e){return k.useCallback(Jce(...e),e)}function e3e(e,t,n="ltr"){const r=k.useRef(null),i=k.useRef(!1),s=k.useRef(!1),o=k.useRef(0),[a,u]=k.useState(!1);return k.useEffect(()=>{i.current=!0},[]),k.useEffect(()=>{var v,b;const l=({x:E,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const w=r.current.getBoundingClientRect();if(w.width&&w.height){const S=cf((E-w.left)/w.width,0,1);e({x:n==="ltr"?S:1-S,y:cf((_-w.top)/w.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),d(),y(E)},y=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Is({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=k.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function a7(e,t){return HPe("(prefers-reduced-motion: reduce)",e,t)}const t3e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Zce(e){const t=k.useRef(0),n=k.useRef(null),[r,i]=k.useState(t3e),s=k.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return k.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function n3e(e){const[t,{width:n,height:r}]=Zce(e);return{ref:t,width:n,height:r}}function bv(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=k.useState(e),o=k.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=k.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=k.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function r3e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function i3e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});py(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>r3e(`${e}:${String(r)}`,i[0])}return[t,n]}var s3e={};function o3e(){return typeof process<"u"&&s3e?"production":"development"}function efe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=efe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ai(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=efe(e))&&(r&&(r+=" "),r+=t);return r}const a3e={};function u3e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ai(t[r],i):t[r]=i})}),t}function OR({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||a3e);return u3e(s)}function $I({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const tfe=k.createContext(null);function zm(){const e=k.useContext(tfe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function l3e(){return zm().cssVariablesResolver}function c3e(){return zm().classNamesPrefix}function u7(){return zm().getStyleNonce}function f3e(){return zm().withStaticClasses}function d3e(){return zm().headless}function h3e(){var e;return(e=zm().stylesTransform)==null?void 0:e.sx}function p3e(){var e;return(e=zm().stylesTransform)==null?void 0:e.styles}function m3e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function g3e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function y3e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function v3e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function l7(e){return m3e(e)?g3e(e):e.startsWith("rgb")?y3e(e):e.startsWith("hsl")?v3e(e):{r:0,g:0,b:0,a:1}}function NC(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=l7(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function sS(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function x$(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function b3e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function _3e(e){if(e.startsWith("oklch("))return(b3e(e)||0)/100;const{r:t,g:n,b:r}=l7(e),i=t/255,s=n/255,o=r/255,a=x$(i),u=x$(s),l=x$(o);return .2126*a+.7152*u+.0722*l}function yE(e,t=.179){return e.startsWith("var(")?!1:_3e(e)>t}function zf({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:yE(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:yE(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:yE(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][sS(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:yE(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:yE(e,t.luminanceThreshold),shade:s,variable:void 0}}function Gr(e,t){const n=zf({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function u4(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Gr(n.from,t),i=Gr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Xc(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=l7(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const u1=Xc,E3e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=zf({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ne(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ne(1)} solid transparent`}:{background:e,hover:NC(e,.1),color:a,border:`${Ne(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ne(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Xc(a,.1),hover:Xc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ne(1)} solid transparent`}}return{background:Xc(e,.1),hover:Xc(e,.12),color:e,border:`${Ne(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ne(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Xc(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ne(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Xc(e,.05),color:e,border:`${Ne(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ne(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Xc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ne(1)} solid transparent`}}return{background:"transparent",hover:Xc(e,.12),color:e,border:`${Ne(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ne(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ne(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ne(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:NC(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ne(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:NC(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ne(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:NC(t.white,.01),color:e,border:`${Ne(1)} solid transparent`}:n==="gradient"?{background:u4(r,t),hover:u4(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ne(1)} solid var(--mantine-color-default-border)`}:{}},w3e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},ZX="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",c7={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:w3e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:E3e,autoContrast:!1,luminanceThreshold:.3,fontFamily:ZX,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:ZX,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ne(34),lineHeight:"1.3"},h2:{fontSize:Ne(26),lineHeight:"1.35"},h3:{fontSize:Ne(22),lineHeight:"1.4"},h4:{fontSize:Ne(18),lineHeight:"1.45"},h5:{fontSize:Ne(16),lineHeight:"1.5"},h6:{fontSize:Ne(14),lineHeight:"1.5"}}},fontSizes:{xs:Ne(12),sm:Ne(14),md:Ne(16),lg:Ne(18),xl:Ne(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ne(2),sm:Ne(4),md:Ne(8),lg:Ne(16),xl:Ne(32)},spacing:{xs:Ne(10),sm:Ne(12),md:Ne(16),lg:Ne(20),xl:Ne(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), 0 ${Ne(1)} ${Ne(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(10)} ${Ne(15)} ${Ne(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ne(7)} ${Ne(7)} ${Ne(-5)}`,md:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(20)} ${Ne(25)} ${Ne(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ne(10)} ${Ne(10)} ${Ne(-5)}`,lg:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(28)} ${Ne(23)} ${Ne(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ne(12)} ${Ne(12)} ${Ne(-7)}`,xl:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(36)} ${Ne(28)} ${Ne(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ne(17)} ${Ne(17)} ${Ne(-7)}`},other:{},components:{}};function eQ(e){return e==="auto"||e==="dark"||e==="light"}function x3e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return eQ(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&eQ(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const S3e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",tQ="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function S$(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function nQ(e){if(!(e.primaryColor in e.colors))throw new Error(S3e);if(typeof e.primaryShade=="object"&&(!S$(e.primaryShade.dark)||!S$(e.primaryShade.light)))throw new Error(tQ);if(typeof e.primaryShade=="number"&&!S$(e.primaryShade))throw new Error(tQ)}function T3e(e,t){var r;if(!t)return nQ(e),e;const n=n7(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),nQ(n),n}const f7=k.createContext(null),C3e=()=>k.useContext(f7)||c7;function Rs(){const e=k.useContext(f7);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function nfe({theme:e,children:t,inherit:n=!0}){const r=C3e(),i=k.useMemo(()=>T3e(n?r:c7,e),[e,r,n]);return x.jsx(f7.Provider,{value:i,children:t})}nfe.displayName="@mantine/core/MantineThemeProvider";function A3e(){const e=Rs(),t=u7(),n=hi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=o4(e.breakpoints[i]),a=s?`${o-.1}px`:RI(o-.1),u=s?`${o}px`:RI(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return x.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function T$(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function C$(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function D3e(e,t){const n=T$(e.variables),r=n?C$(t,n):"",i=T$(e.dark),s=i?C$(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=T$(e.light),a=o?C$(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function my({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&zf({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function rQ(e,t){return my({color:e.colors[e.primaryColor][sS(e,t)],theme:e,autoContrast:null})}function kC({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=sS(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:u1(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:u1(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:u1(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=sS(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:u1(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:u1(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:u1(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function I3e(e){return Array.isArray(e)?e:Array(10).fill(e)}function N3e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function l1(e,t,n){hi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const rfe=e=>{const t=sS(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ne(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":rQ(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":rQ(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};l1(r.variables,e.breakpoints,"breakpoint"),l1(r.variables,e.spacing,"spacing"),l1(r.variables,e.fontSizes,"font-size"),l1(r.variables,e.lineHeights,"line-height"),l1(r.variables,e.shadows,"shadow"),l1(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),hi(e.colors).forEach(s=>{const o=e.colors[s];if(N3e(o)){Object.assign(r.light,kC({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,kC({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,kC({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,kC({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return hi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function k3e({theme:e,generator:t}){const n=rfe(e),r=t==null?void 0:t(e);return r?n7(n,r):n}const A$=rfe(c7);function R3e(e){const t={variables:{},light:{},dark:{}};return hi(e.variables).forEach(n=>{A$.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),hi(e.light).forEach(n=>{A$.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),hi(e.dark).forEach(n=>{A$.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function P3e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function ife({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Rs(),r=u7(),i=l3e(),s=k3e({theme:n,generator:i}),o=e===":root"&&t,a=o?R3e(s):s,u=D3e(a,e);return u?x.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":P3e(e)}`}}):null}ife.displayName="@mantine/CssVariables";function O3e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function c1(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function M3e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=k.useRef(),[s,o]=k.useState(()=>e.get(t)),a=r||s,u=k.useCallback(c=>{r||(c1(c,n),o(c),e.set(c))},[e.set,a,r]),l=k.useCallback(()=>{o(t),c1(t,n),e.clear()},[e.clear,t]);return k.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),py(()=>{c1(e.get(t),n)},[]),k.useEffect(()=>{var f;if(r)return c1(r,n),()=>{};r===void 0&&c1(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&c1(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function $3e({respectReducedMotion:e,getRootElement:t}){py(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}O3e();function sfe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=x3e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=M3e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return $3e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),x.jsx(tfe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:x.jsxs(nfe,{theme:e,children:[o&&x.jsx(ife,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&x.jsx(A3e,{}),t]})})}sfe.displayName="@mantine/core/MantineProvider";function Nh({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Rs();return{resolvedClassNames:OR({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:$I({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const F3e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function L3e({theme:e,options:t,unstyled:n}){return Ai((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||F3e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function B3e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return OR({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function iQ({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return OR({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function j3e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function z3e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function U3e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function V3e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=OR({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function H3e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function q3e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ai(L3e({theme:e,options:t,unstyled:a||h}),V3e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),H3e({options:t,classes:o,selector:r,unstyled:a}),iQ({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),iQ({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),B3e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),j3e({rootSelector:l,selector:r,className:u}),z3e({selector:r,classes:o,unstyled:a||h}),d&&!h&&U3e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function W3e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return $I({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function l4({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...l4({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function G3e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...i_(n[r])}}),t),{})}function Y3e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=G3e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function K3e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&W3e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&$I({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&$I({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Y3e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?l4({style:u,theme:e}):null,...l4({style:r==null?void 0:r.style,theme:e})}}function X3e({props:e,stylesCtx:t,themeName:n}){var o;const r=Rs(),i=(o=p3e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Et({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Rs(),h=c3e(),p=f3e(),m=d3e(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=X3e({props:n,stylesCtx:r,themeName:g});return(b,E)=>({className:q3e({theme:d,options:E,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([E==null?void 0:E.styles,l])}),style:K3e({theme:d,themeName:g,selector:b,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function o_(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ie(e,t,n){var o;const r=Rs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...i_(n)}}function D$(e){return hi(e).reduce((t,n)=>e[n]!==void 0?`${t}${kPe(n)}:${e[n]};`:t,"").trim()}function Q3e({selector:e,styles:t,media:n,container:r}){const i=t?D$(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${D$(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${D$(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function xT(e){const t=u7();return x.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Q3e(e)}})}function gy(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:E,c:_,opacity:w,ff:S,fz:C,fw:A,lts:D,ta:I,lh:O,fs:R,tt:M,td:F,w:P,miw:j,maw:z,h:V,mih:$,mah:U,bgsz:W,bgp:B,bgr:q,bga:Y,pos:re,top:pe,left:_e,bottom:de,right:ye,inset:Ce,display:ve,flex:qe,hiddenFrom:He,visibleFrom:ht,lightHidden:rt,darkHidden:Pe,sx:Be,...Xe}=e;return{styleProps:i_({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:E,c:_,opacity:w,ff:S,fz:C,fw:A,lts:D,ta:I,lh:O,fs:R,tt:M,td:F,w:P,miw:j,maw:z,h:V,mih:$,mah:U,bgsz:W,bgp:B,bgr:q,bga:Y,pos:re,top:pe,left:_e,bottom:de,right:ye,inset:Ce,display:ve,flex:qe,hiddenFrom:He,visibleFrom:ht,lightHidden:rt,darkHidden:Pe,sx:Be}),rest:Xe}}const J3e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function d7(e,t){const n=zf({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Z3e(e,t){const n=zf({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:d7(e,t)}function eOe(e,t){if(typeof e=="number")return Ne(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ne(n)}`;return r&&(s+=` ${r}`),I3e.length>0&&(s+=` ${d7(i.join(" "),t)}`),s.trim()}return e}const sQ={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function tOe(e){return typeof e=="string"&&e in sQ?sQ[e]:e}const nOe=["h1","h2","h3","h4","h5","h6"];function rOe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&nOe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ne(e):e}function iOe(e){return e}const sOe=["h1","h2","h3","h4","h5","h6"];function oOe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&sOe.includes(e)?`var(--mantine-${e}-line-height)`:e}function aOe(e){return typeof e=="number"?Ne(e):e}function uOe(e,t){if(typeof e=="number")return Ne(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ne(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const I$={color:d7,textColor:Z3e,fontSize:rOe,spacing:uOe,identity:iOe,size:aOe,lineHeight:oOe,fontFamily:tOe,border:eOe};function oQ(e){return e.replace("(min-width: ","").replace("em)","")}function lOe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(oQ(i))-Number(oQ(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function cOe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function fOe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function dOe(e){return typeof e=="object"&&e!==null?hi(e).filter(t=>t!=="base"):[]}function hOe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function ofe({styleProps:e,data:t,theme:n}){return lOe(hi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=fOe(e[i]);if(!cOe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=I$[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=dOe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=I$[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:I$[s.type](hOe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function MR(){return`__m__-${k.useId().replace(/:/g,"")}`}function h7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...h7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function afe(e){return e.startsWith("data-")?e:`data-${e}`}function pOe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[afe(n)]=e[n]),t},{})}function ufe(e){return e?typeof e=="string"?{[afe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...ufe(n)}),{}):pOe(e):null}function c4(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...c4(r,t)}),{}):typeof e=="function"?e(t):e??{}}function mOe({theme:e,style:t,vars:n,styleProps:r}){const i=c4(t,e),s=c4(n,e);return{...i,...s,...r}}const lfe=k.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=Rs(),g=e||"div",{styleProps:y,rest:v}=gy(h),b=h3e(),E=(C=b==null?void 0:b())==null?void 0:C(y.sx),_=MR(),w=ofe({styleProps:y,theme:m,data:J3e}),S={ref:p,style:mOe({theme:m,style:t,vars:n,styleProps:w.inlineStyles}),className:Ai(r,E,{[_]:w.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":qce(o)?void 0:o||void 0,size:d,...ufe(s),...v};return x.jsxs(x.Fragment,{children:[w.hasResponsiveStyles&&x.jsx(xT,{selector:`.${_}`,styles:w.styles,media:w.media}),typeof f=="function"?f(S):x.jsx(g,{...S})]})});lfe.displayName="@mantine/core/Box";const we=lfe;function cfe(e){return e}function Ve(e){const t=k.forwardRef(e);return t.extend=cfe,t}function fs(e){const t=k.forwardRef(e);return t.extend=cfe,t}const gOe=k.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function kh(){return k.useContext(gOe)}function yOe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function N$(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const vE=typeof window<"u"&&window.requestAnimationFrame;function vOe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=k.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=k.useState(r?{}:o),l=p=>{ET.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||yOe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}ch(()=>{typeof vE=="function"&&vE(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),vE(()=>{const p=N$(i);c({...f(p),height:p})})}:()=>{const p=N$(i);c({...f(p),willChange:"height",height:p}),vE(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=N$(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Jce(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const bOe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},p7=Ve((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ie("Collapse",bOe,e),c=Rs(),f=a7(),h=(c.respectReducedMotion?f:!1)?0:i,p=vOe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?x.jsx(we,{...l,children:n}):null:x.jsx(we,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...h7(o,c)},ref:t,...l}),children:n})});p7.displayName="@mantine/core/Collapse";const[_Oe,Al]=ks("ScrollArea.Root component was not found in tree");function Qv(e,t){const n=Fg(t);py(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const EOe=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=Al(),[s,o]=k.useState(0),[a,u]=k.useState(0),l=!!(s&&a);return Qv(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),Qv(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?x.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),wOe=k.forwardRef((e,t)=>{const n=Al(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?x.jsx(EOe,{...e,ref:t}):null}),xOe={scrollHideDelay:1e3,type:"hover"},ffe=k.forwardRef((e,t)=>{const n=Ie("ScrollAreaRoot",xOe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=k.useState(null),[l,c]=k.useState(null),[f,d]=k.useState(null),[h,p]=k.useState(null),[m,g]=k.useState(null),[y,v]=k.useState(0),[b,E]=k.useState(0),[_,w]=k.useState(!1),[S,C]=k.useState(!1),A=cs(t,D=>u(D));return x.jsx(_Oe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:_,onScrollbarXEnabledChange:w,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:E},children:x.jsx(we,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});ffe.displayName="@mantine/core/ScrollAreaRoot";function dfe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function $R(e){const t=dfe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function hfe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function SOe(e,[t,n]){return Math.min(n,Math.max(t,e))}function aQ(e,t,n="ltr"){const r=$R(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=SOe(e,u);return hfe([0,o],[0,a])(l)}function TOe(e,t,n,r="ltr"){const i=$R(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return hfe([u,l],f)(e)}function pfe(e,t){return e>0&&e<t}function FI(e){return e?parseInt(e,10):0}function c0(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[COe,mfe]=ks("ScrollAreaScrollbar was not found in tree"),gfe=k.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Al(),[h,p]=k.useState(null),m=cs(t,C=>p(C)),g=k.useRef(null),y=k.useRef(""),{viewport:v}=d,b=n.content-n.viewport,E=Fg(l),_=Fg(a),w=PR(c,10),S=C=>{if(g.current){const A=C.clientX-g.current.left,D=C.clientY-g.current.top;u({x:A,y:D})}};return k.useEffect(()=>{const C=A=>{const D=A.target;(h==null?void 0:h.contains(D))&&E(A,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,E]),k.useEffect(_,[n,_]),Qv(h,w),Qv(d.content,w),x.jsx(COe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Fg(i),onThumbPointerUp:Fg(s),onThumbPositionChange:_,onThumbPointerDown:Fg(o)},children:x.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:c0(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(C))}),onPointerMove:c0(e.onPointerMove,S),onPointerUp:c0(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),AOe=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Al(),[a,u]=k.useState(),l=k.useRef(null),c=cs(t,l,o.onScrollbarXChange);return k.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),x.jsx(gfe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${$R(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),pfe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:FI(a.paddingLeft),paddingEnd:FI(a.paddingRight)}})}})}),DOe=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Al(),[a,u]=k.useState(),l=k.useRef(null),c=cs(t,l,o.onScrollbarYChange);return k.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),x.jsx(gfe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${$R(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),pfe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:FI(a.paddingTop),paddingEnd:FI(a.paddingBottom)}})}})}),m7=k.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=kh(),s=Al(),o=k.useRef(null),a=k.useRef(0),[u,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=dfe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>TOe(h,a.current,u,p);return n==="horizontal"?x.jsx(AOe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=aQ(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?x.jsx(DOe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=aQ(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),yfe=k.forwardRef((e,t)=>{const n=Al(),{forceMount:r,...i}=e,[s,o]=k.useState(!1),a=e.orientation==="horizontal",u=PR(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return Qv(n.viewport,u),Qv(n.content,u),r||s?x.jsx(m7,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),IOe=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Al(),[s,o]=k.useState(!1);return k.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?x.jsx(yfe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),NOe=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Al(),s=e.orientation==="horizontal",[o,a]=k.useState("hidden"),u=PR(()=>a("idle"),100);return k.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),k.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?x.jsx(m7,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:c0(e.onPointerEnter,()=>a("interacting")),onPointerLeave:c0(e.onPointerLeave,()=>a("idle"))}):null}),uQ=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Al(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return k.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?x.jsx(IOe,{...r,ref:t,forceMount:n}):i.type==="scroll"?x.jsx(NOe,{...r,ref:t,forceMount:n}):i.type==="auto"?x.jsx(yfe,{...r,ref:t,forceMount:n}):i.type==="always"?x.jsx(m7,{...r,ref:t}):null});function kOe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const ROe=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=Al(),s=mfe(),{onThumbPositionChange:o}=s,a=cs(t,c=>s.onThumbChange(c)),u=k.useRef(),l=PR(()=>{u.current&&(u.current(),u.current=void 0)},100);return k.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=kOe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),x.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:c0(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:c0(e.onPointerUp,s.onThumbPointerUp)})}),lQ=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=mfe();return n||i.hasThumb?x.jsx(ROe,{ref:t,...r}):null}),vfe=k.forwardRef(({children:e,style:t,...n},r)=>{const i=Al(),s=cs(r,i.onViewportChange);return x.jsx(we,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:x.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});vfe.displayName="@mantine/core/ScrollAreaViewport";var g7={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const bfe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},POe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ne(t)}}),yy=Ve((e,t)=>{const n=Ie("ScrollArea",bfe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,E]=k.useState(!1),_=Et({name:"ScrollArea",props:n,classes:g7,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:POe});return x.jsxs(ffe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,..._("root"),...v,children:[x.jsx(vfe,{...d,..._("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:w=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,w),p==null||p({x:w.currentTarget.scrollLeft,y:w.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&x.jsx(uQ,{..._("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:x.jsx(lQ,{..._("thumb")})}),(y==="xy"||y==="y")&&x.jsx(uQ,{..._("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:x.jsx(lQ,{..._("thumb")})}),x.jsx(wOe,{..._("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});yy.displayName="@mantine/core/ScrollArea";const y7=Ve((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Ie("ScrollAreaAutosize",bfe,e);return x.jsx(we,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:x.jsx(we,{style:{display:"flex",flexDirection:"column",flex:1},children:x.jsx(yy,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});yy.classes=g7;y7.displayName="@mantine/core/ScrollAreaAutosize";y7.classes=g7;yy.Autosize=y7;var _fe={root:"m_87cf2631"};const OOe={__staticSelector:"UnstyledButton"},Yi=fs((e,t)=>{const n=Ie("UnstyledButton",OOe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Et({name:s,props:n,classes:_fe,className:r,style:l,classNames:a,styles:u,unstyled:o});return x.jsx(we,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Yi.classes=_fe;Yi.displayName="@mantine/core/UnstyledButton";var Efe={root:"m_515a97f8"};const MOe={},v7=Ve((e,t)=>{const n=Ie("VisuallyHidden",MOe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Et({name:"VisuallyHidden",classes:Efe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return x.jsx(we,{component:"span",ref:t,...c("root"),...l})});v7.classes=Efe;v7.displayName="@mantine/core/VisuallyHidden";var wfe={root:"m_1b7284a3"};const $Oe={},FOe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Kr(t),"--paper-shadow":i7(n)}}),FR=fs((e,t)=>{const n=Ie("Paper",$Oe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Et({name:"Paper",props:n,classes:wfe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:FOe});return x.jsx(we,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});FR.classes=wfe;FR.displayName="@mantine/core/Paper";function a_(e){return xfe(e)?(e.nodeName||"").toLowerCase():"#document"}function Va(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Rh(e){var t;return(t=(xfe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xfe(e){return e instanceof Node||e instanceof Va(e).Node}function ni(e){return e instanceof Element||e instanceof Va(e).Element}function ku(e){return e instanceof HTMLElement||e instanceof Va(e).HTMLElement}function f4(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Va(e).ShadowRoot}function ST(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=yl(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function LOe(e){return["table","td","th"].includes(a_(e))}function b7(e){const t=_7(),n=yl(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function BOe(e){let t=fh(e);for(;ku(t)&&!cm(t);){if(b7(t))return t;t=fh(t)}return null}function _7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cm(e){return["html","body","#document"].includes(a_(e))}function yl(e){return Va(e).getComputedStyle(e)}function LR(e){return ni(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function fh(e){if(a_(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f4(e)&&e.host||Rh(e);return f4(t)?t.host:t}function Sfe(e){const t=fh(e);return cm(t)?e.ownerDocument?e.ownerDocument.body:e.body:ku(t)&&ST(t)?t:Sfe(t)}function Yd(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Sfe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Va(i);return s?t.concat(o,o.visualViewport||[],ST(i)?i:[],o.frameElement&&n?Yd(o.frameElement):[]):t.concat(i,Yd(i,[],n))}function cQ(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function oS(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&f4(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Tfe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Cfe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function jOe(e){return VOe()?!1:!fQ()&&e.width===0&&e.height===0||fQ()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function zOe(){return/apple/i.test(navigator.vendor)}function fQ(){const e=/android/i;return e.test(Tfe())||e.test(Cfe())}function UOe(){return Tfe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function VOe(){return Cfe().includes("jsdom/")}function d4(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function HOe(e){return"nativeEvent"in e}function qOe(e){return e.matches("html,body")}function Zg(e){return(e==null?void 0:e.ownerDocument)||document}function k$(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function R1(e){return"composedPath"in e?e.composedPath()[0]:e.target}const WOe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function GOe(e){return ku(e)&&e.matches(WOe)}const vu=Math.min,To=Math.max,LI=Math.round,RC=Math.floor,fm=e=>({x:e,y:e}),YOe={left:"right",right:"left",bottom:"top",top:"bottom"},KOe={start:"end",end:"start"};function h4(e,t,n){return To(e,vu(t,n))}function dh(e,t){return typeof e=="function"?e(t):e}function xc(e){return e.split("-")[0]}function u_(e){return e.split("-")[1]}function E7(e){return e==="x"?"y":"x"}function w7(e){return e==="y"?"height":"width"}function vy(e){return["top","bottom"].includes(xc(e))?"y":"x"}function x7(e){return E7(vy(e))}function XOe(e,t,n){n===void 0&&(n=!1);const r=u_(e),i=x7(e),s=w7(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=BI(o)),[o,BI(o)]}function QOe(e){const t=BI(e);return[p4(e),t,p4(t)]}function p4(e){return e.replace(/start|end/g,t=>KOe[t])}function JOe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function ZOe(e,t,n,r){const i=u_(e);let s=JOe(xc(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(p4)))),s}function BI(e){return e.replace(/left|right|bottom|top/g,t=>YOe[t])}function eMe(e){return{top:0,right:0,bottom:0,left:0,...e}}function S7(e){return typeof e!="number"?eMe(e):{top:e,right:e,bottom:e,left:e}}function Jv(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function dQ(e,t,n){let{reference:r,floating:i}=e;const s=vy(t),o=x7(t),a=w7(o),u=xc(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(u_(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const tMe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=dQ(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:E,reset:_}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...E}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(l=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:f}=dQ(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function T7(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=dh(t,e),p=S7(h),g=a[d?f==="floating"?"reference":"floating":f],y=Jv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Jv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-_.top+p.top)/E.y,bottom:(_.bottom-y.bottom+p.bottom)/E.y,left:(y.left-_.left+p.left)/E.x,right:(_.right-y.right+p.right)/E.x}}const nMe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=dh(e,t)||{};if(l==null)return{};const f=S7(c),d={x:n,y:r},h=x7(i),p=w7(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],_=d[h]-s.reference[h],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=w?w[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(w)))&&(S=a.floating[b]||s.floating[p]);const C=E/2-_/2,A=S/2-m[p]/2-1,D=vu(f[y],A),I=vu(f[v],A),O=D,R=S-m[p]-I,M=S/2-m[p]/2+C,F=h4(O,M,R),P=!u.arrow&&u_(i)!=null&&M!==F&&s.reference[p]/2-(M<O?D:I)-m[p]/2<0,j=P?M<O?M-O:M-R:0;return{[h]:d[h]+j,data:{[h]:F,centerOffset:M-F-j,...P&&{alignmentOffset:j}},reset:P}}}),rMe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=dh(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=xc(i),v=xc(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(v||!m?[BI(a)]:QOe(a));!d&&p!=="none"&&E.push(...ZOe(a,m,p,b));const _=[a,...E],w=await T7(t,g),S=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(w[y]),f){const O=XOe(i,o,b);S.push(w[O[0]],w[O[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(O=>O<=0)){var A,D;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,R=_[O];if(R)return{data:{index:O,overflows:C},reset:{placement:R}};let M=(D=C.filter(F=>F.overflows[0]<=0).sort((F,P)=>F.overflows[1]-P.overflows[1])[0])==null?void 0:D.placement;if(!M)switch(h){case"bestFit":{var I;const F=(I=C.map(P=>[P.placement,P.overflows.filter(j=>j>0).reduce((j,z)=>j+z,0)]).sort((P,j)=>P[1]-j[1])[0])==null?void 0:I[0];F&&(M=F);break}case"initialPlacement":M=a;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function Afe(e){const t=vu(...e.map(s=>s.left)),n=vu(...e.map(s=>s.top)),r=To(...e.map(s=>s.right)),i=To(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function iMe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Jv(Afe(i)))}const sMe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=dh(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=iMe(c),d=Jv(Afe(c)),h=S7(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(vy(n)==="y"){const D=f[0],I=f[f.length-1],O=xc(n)==="top",R=D.top,M=I.bottom,F=O?D.left:I.left,P=O?D.right:I.right,j=P-F,z=M-R;return{top:R,bottom:M,left:F,right:P,width:j,height:z,x:F,y:R}}const g=xc(n)==="left",y=To(...f.map(D=>D.right)),v=vu(...f.map(D=>D.left)),b=f.filter(D=>g?D.left===v:D.right===y),E=b[0].top,_=b[b.length-1].bottom,w=v,S=y,C=S-w,A=_-E;return{top:E,bottom:_,left:w,right:S,width:C,height:A,x:w,y:E}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function oMe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=xc(n),a=u_(n),u=vy(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=dh(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const aMe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await oMe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},uMe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=dh(e,t),l={x:n,y:r},c=await T7(t,u),f=vy(xc(i)),d=E7(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=h4(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=h4(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},lMe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=dh(e,t),c={x:n,y:r},f=vy(i),d=E7(f);let h=c[d],p=c[f];const m=dh(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",E=s.reference[d]-s.floating[b]+g.mainAxis,_=s.reference[d]+s.reference[b]-g.mainAxis;h<E?h=E:h>_&&(h=_)}if(l){var y,v;const b=d==="y"?"width":"height",E=["top","left"].includes(xc(i)),_=s.reference[f]-s.floating[b]+(E&&((y=o.offset)==null?void 0:y[f])||0)+(E?0:g.crossAxis),w=s.reference[f]+s.reference[b]+(E?0:((v=o.offset)==null?void 0:v[f])||0)-(E?g.crossAxis:0);p<_?p=_:p>w&&(p=w)}return{[d]:h,[f]:p}}}},cMe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=dh(e,t),u=await T7(t,a),l=xc(n),c=u_(n),f=vy(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=vu(h-u[p],g),b=vu(d-u[m],y),E=!t.middlewareData.shift;let _=v,w=b;if(f?w=c||E?vu(b,y):y:_=c||E?vu(v,g):g,E&&!c){const C=To(u.left,0),A=To(u.right,0),D=To(u.top,0),I=To(u.bottom,0);f?w=d-2*(C!==0||A!==0?C+A:To(u.left,u.right)):_=h-2*(D!==0||I!==0?D+I:To(u.top,u.bottom))}await o({...t,availableWidth:w,availableHeight:_});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Dfe(e){const t=yl(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ku(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=LI(n)!==s||LI(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function C7(e){return ni(e)?e:e.contextElement}function _v(e){const t=C7(e);if(!ku(t))return fm(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Dfe(t);let o=(s?LI(n.width):n.width)/r,a=(s?LI(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const fMe=fm(0);function Ife(e){const t=Va(e);return!_7()||!t.visualViewport?fMe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dMe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Va(e)?!1:t}function I0(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=C7(e);let o=fm(1);t&&(r?ni(r)&&(o=_v(r)):o=_v(e));const a=dMe(s,n,r)?Ife(s):fm(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Va(s),h=r&&ni(r)?Va(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=_v(m),y=m.getBoundingClientRect(),v=yl(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,E=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=E,p=Va(m),m=p.frameElement}}return Jv({width:c,height:f,x:u,y:l})}const hMe=[":popover-open",":modal"];function A7(e){return hMe.some(t=>{try{return e.matches(t)}catch{return!1}})}function pMe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Rh(r),a=t?A7(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=fm(1);const c=fm(0),f=ku(r);if((f||!f&&!s)&&((a_(r)!=="body"||ST(o))&&(u=LR(r)),ku(r))){const d=I0(r);l=_v(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function mMe(e){return Array.from(e.getClientRects())}function Nfe(e){return I0(Rh(e)).left+LR(e).scrollLeft}function gMe(e){const t=Rh(e),n=LR(e),r=e.ownerDocument.body,i=To(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=To(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Nfe(e);const a=-n.scrollTop;return yl(r).direction==="rtl"&&(o+=To(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function yMe(e,t){const n=Va(e),r=Rh(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=_7();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function vMe(e,t){const n=I0(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=ku(e)?_v(e):fm(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function hQ(e,t,n){let r;if(t==="viewport")r=yMe(e,n);else if(t==="document")r=gMe(Rh(e));else if(ni(t))r=vMe(t,n);else{const i=Ife(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Jv(r)}function kfe(e,t){const n=fh(e);return n===t||!ni(n)||cm(n)?!1:yl(n).position==="fixed"||kfe(n,t)}function bMe(e,t){const n=t.get(e);if(n)return n;let r=Yd(e,[],!1).filter(a=>ni(a)&&a_(a)!=="body"),i=null;const s=yl(e).position==="fixed";let o=s?fh(e):e;for(;ni(o)&&!cm(o);){const a=yl(o),u=b7(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ST(o)&&!u&&kfe(e,o))?r=r.filter(c=>c!==o):i=a,o=fh(o)}return t.set(e,r),r}function _Me(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?A7(t)?[]:bMe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=hQ(t,c,i);return l.top=To(f.top,l.top),l.right=vu(f.right,l.right),l.bottom=vu(f.bottom,l.bottom),l.left=To(f.left,l.left),l},hQ(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function EMe(e){const{width:t,height:n}=Dfe(e);return{width:t,height:n}}function wMe(e,t,n){const r=ku(t),i=Rh(t),s=n==="fixed",o=I0(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=fm(0);if(r||!r&&!s)if((a_(t)!=="body"||ST(i))&&(a=LR(t)),r){const f=I0(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Nfe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function R$(e){return yl(e).position==="static"}function pQ(e,t){return!ku(e)||yl(e).position==="fixed"?null:t?t(e):e.offsetParent}function Rfe(e,t){const n=Va(e);if(A7(e))return n;if(!ku(e)){let i=fh(e);for(;i&&!cm(i);){if(ni(i)&&!R$(i))return i;i=fh(i)}return n}let r=pQ(e,t);for(;r&&LOe(r)&&R$(r);)r=pQ(r,t);return r&&cm(r)&&R$(r)&&!b7(r)?n:r||BOe(e)||n}const xMe=async function(e){const t=this.getOffsetParent||Rfe,n=this.getDimensions,r=await n(e.floating);return{reference:wMe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function SMe(e){return yl(e).direction==="rtl"}const TMe={convertOffsetParentRelativeRectToViewportRelativeRect:pMe,getDocumentElement:Rh,getClippingRect:_Me,getOffsetParent:Rfe,getElementRects:xMe,getClientRects:mMe,getDimensions:EMe,getScale:_v,isElement:ni,isRTL:SMe};function CMe(e,t){let n=null,r;const i=Rh(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=RC(c),p=RC(i.clientWidth-(l+f)),m=RC(i.clientHeight-(c+d)),g=RC(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:To(0,vu(1,u))||1};let b=!0;function E(_){const w=_[0].intersectionRatio;if(w!==u){if(!b)return o();w?o(!1,w):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(e)}return o(!0),s}function AMe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=C7(e),c=i||s?[...l?Yd(l):[],...Yd(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?CMe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?I0(e):null;u&&g();function g(){const y=I0(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const DMe=aMe,IMe=uMe,NMe=rMe,kMe=cMe,mQ=nMe,RMe=sMe,PMe=lMe,OMe=(e,t,n)=>{const r=new Map,i={platform:TMe,...n},s={...i.platform,_c:r};return tMe(e,t,{...i,platform:s})};var fD=typeof document<"u"?k.useLayoutEffect:k.useEffect;function jI(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!jI(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!jI(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pfe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gQ(e,t){const n=Pfe(e);return Math.round(t*n)/n}function yQ(e){const t=k.useRef(e);return fD(()=>{t.current=e}),t}function MMe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=k.useState(r);jI(d,r)||h(r);const[p,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(j=>{j!==w.current&&(w.current=j,m(j))},[]),b=k.useCallback(j=>{j!==S.current&&(S.current=j,y(j))},[]),E=s||p,_=o||g,w=k.useRef(null),S=k.useRef(null),C=k.useRef(c),A=u!=null,D=yQ(u),I=yQ(i),O=k.useCallback(()=>{if(!w.current||!S.current)return;const j={placement:t,strategy:n,middleware:d};I.current&&(j.platform=I.current),OMe(w.current,S.current,j).then(z=>{const V={...z,isPositioned:!0};R.current&&!jI(C.current,V)&&(C.current=V,ET.flushSync(()=>{f(V)}))})},[d,t,n,I]);fD(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(j=>({...j,isPositioned:!1})))},[l]);const R=k.useRef(!1);fD(()=>(R.current=!0,()=>{R.current=!1}),[]),fD(()=>{if(E&&(w.current=E),_&&(S.current=_),E&&_){if(D.current)return D.current(E,_,O);O()}},[E,_,O,D,A]);const M=k.useMemo(()=>({reference:w,floating:S,setReference:v,setFloating:b}),[v,b]),F=k.useMemo(()=>({reference:E,floating:_}),[E,_]),P=k.useMemo(()=>{const j={position:n,left:0,top:0};if(!F.floating)return j;const z=gQ(F.floating,c.x),V=gQ(F.floating,c.y);return a?{...j,transform:"translate("+z+"px, "+V+"px)",...Pfe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:V}},[n,a,F.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:O,refs:M,elements:F,floatingStyles:P}),[c,O,M,F,P])}const $Me=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?mQ({element:r.current,padding:i}).fn(n):{}:r?mQ({element:r,padding:i}).fn(n):{}}}},Ofe=(e,t)=>({...DMe(e),options:[e,t]}),D7=(e,t)=>({...IMe(e),options:[e,t]}),vQ=(e,t)=>({...PMe(e),options:[e,t]}),m4=(e,t)=>({...NMe(e),options:[e,t]}),FMe=(e,t)=>({...kMe(e),options:[e,t]}),g4=(e,t)=>({...RMe(e),options:[e,t]}),Mfe=(e,t)=>({...$Me(e),options:[e,t]}),$fe={...aI},LMe=$fe.useInsertionEffect,BMe=LMe||(e=>e());function vp(e){const t=k.useRef(()=>{});return BMe(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var vf=typeof document<"u"?k.useLayoutEffect:k.useEffect;let bQ=!1,jMe=0;const _Q=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+jMe++;function zMe(){const[e,t]=k.useState(()=>bQ?_Q():void 0);return vf(()=>{e==null&&t(_Q())},[]),k.useEffect(()=>{bQ=!0},[]),e}const UMe=$fe.useId,Ffe=UMe||zMe;function VMe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const HMe=k.createContext(null),qMe=k.createContext(null),I7=()=>{var e;return((e=k.useContext(HMe))==null?void 0:e.id)||null},N7=()=>k.useContext(qMe);function k7(e){return"data-floating-ui-"+e}function EQ(e){const t=k.useRef(e);return vf(()=>{t.current=e}),t}const wQ=k7("safe-polygon");function dD(e,t,n){return n&&!d4(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function WMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=N7(),m=I7(),g=EQ(c),y=EQ(l),v=k.useRef(),b=k.useRef(-1),E=k.useRef(),_=k.useRef(-1),w=k.useRef(!0),S=k.useRef(!1),C=k.useRef(()=>{}),A=k.useCallback(()=>{var R;const M=(R=i.current.openEvent)==null?void 0:R.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[i]);k.useEffect(()=>{if(!u)return;function R(M){let{open:F}=M;F||(clearTimeout(b.current),clearTimeout(_.current),w.current=!0)}return s.on("openchange",R),()=>{s.off("openchange",R)}},[u,s]),k.useEffect(()=>{if(!u||!g.current||!n)return;function R(F){A()&&r(!1,F,"hover")}const M=Zg(a).documentElement;return M.addEventListener("mouseleave",R),()=>{M.removeEventListener("mouseleave",R)}},[a,n,r,u,g,A]);const D=k.useCallback(function(R,M,F){M===void 0&&(M=!0),F===void 0&&(F="hover");const P=dD(y.current,"close",v.current);P&&!E.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,R,F),P)):M&&(clearTimeout(b.current),r(!1,R,F))},[y,r]),I=vp(()=>{C.current(),E.current=void 0}),O=vp(()=>{if(S.current){const R=Zg(a).body;R.style.pointerEvents="",R.removeAttribute(wQ),S.current=!1}});return k.useEffect(()=>{if(!u)return;function R(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function M(j){if(clearTimeout(b.current),w.current=!1,f&&!d4(v.current)||d>0&&!dD(y.current,"open"))return;const z=dD(y.current,"open",v.current);z?b.current=window.setTimeout(()=>{r(!0,j,"hover")},z):r(!0,j,"hover")}function F(j){if(R())return;C.current();const z=Zg(a);if(clearTimeout(_.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),E.current=g.current({...i.current.floatingContext,tree:p,x:j.clientX,y:j.clientY,onClose(){O(),I(),D(j,!0,"safe-polygon")}});const $=E.current;z.addEventListener("mousemove",$),C.current=()=>{z.removeEventListener("mousemove",$)};return}(v.current==="touch"?!oS(a,j.relatedTarget):!0)&&D(j)}function P(j){R()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:j.clientX,y:j.clientY,onClose(){O(),I(),D(j)}})(j))}if(ni(o)){const j=o;return n&&j.addEventListener("mouseleave",P),a==null||a.addEventListener("mouseleave",P),h&&j.addEventListener("mousemove",M,{once:!0}),j.addEventListener("mouseenter",M),j.addEventListener("mouseleave",F),()=>{n&&j.removeEventListener("mouseleave",P),a==null||a.removeEventListener("mouseleave",P),h&&j.removeEventListener("mousemove",M),j.removeEventListener("mouseenter",M),j.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,D,I,O,r,n,p,y,g,i]),vf(()=>{var R;if(u&&n&&(R=g.current)!=null&&R.__options.blockPointerEvents&&A()){const F=Zg(a).body;if(F.setAttribute(wQ,""),F.style.pointerEvents="none",S.current=!0,ni(o)&&a){var M;const P=o,j=p==null||(M=p.nodesRef.current.find(z=>z.id===m))==null||(M=M.context)==null?void 0:M.elements.floating;return j&&(j.style.pointerEvents=""),P.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{P.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),vf(()=>{n||(v.current=void 0,I(),O())},[n,I,O]),k.useEffect(()=>()=>{I(),clearTimeout(b.current),clearTimeout(_.current),O()},[u,o,I,O]),k.useMemo(()=>{if(!u)return{};function R(M){v.current=M.pointerType}return{reference:{onPointerDown:R,onPointerEnter:R,onMouseMove(M){function F(){w.current||r(!0,M.nativeEvent,"hover")}f&&!d4(v.current)||n||d===0||(clearTimeout(_.current),v.current==="touch"?F():_.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(M){D(M.nativeEvent,!1)}}}},[u,f,n,d,r,D])}const y4=()=>{},Lfe=k.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:y4,setState:y4,isInstantPhase:!1}),Bfe=()=>k.useContext(Lfe);function GMe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=k.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=k.useRef(null),a=k.useCallback(u=>{s({currentId:u})},[]);return vf(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),k.createElement(Lfe.Provider,{value:k.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function YMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Bfe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return vf(()=>{u&&(f({delay:{open:1,close:dD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),vf(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),vf(()=>{l===y4||!n||l(o)},[n,l,o]),a}function P$(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const KMe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},XMe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},xQ=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function QMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=N7(),v=vp(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,E=k.useRef(!1),_=k.useRef(!1),{escapeKey:w,outsidePress:S}=xQ(m),{escapeKey:C,outsidePress:A}=xQ(g),D=vp(M=>{var F;if(!n||!u||!l||M.key!=="Escape")return;const P=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y?P$(y.nodesRef.current,P):[];if(!w&&(M.stopPropagation(),j.length>0)){let z=!0;if(j.forEach(V=>{var $;if(($=V.context)!=null&&$.open&&!V.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,HOe(M)?M.nativeEvent:M,"escape-key")}),I=vp(M=>{var F;const P=()=>{var j;D(M),(j=R1(M))==null||j.removeEventListener("keydown",P)};(F=R1(M))==null||F.addEventListener("keydown",P)}),O=vp(M=>{var F;const P=E.current;E.current=!1;const j=_.current;if(_.current=!1,f==="click"&&j||P||typeof b=="function"&&!b(M))return;const z=R1(M),V="["+k7("inert")+"]",$=Zg(o).querySelectorAll(V);let U=ni(z)?z:null;for(;U&&!cm(U);){const Y=fh(U);if(cm(Y)||!ni(Y))break;U=Y}if($.length&&ni(z)&&!qOe(z)&&!oS(z,o)&&Array.from($).every(Y=>!oS(U,Y)))return;if(ku(z)&&o){const Y=z.clientWidth>0&&z.scrollWidth>z.clientWidth,re=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let pe=re&&M.offsetX>z.clientWidth;if(re&&yl(z).direction==="rtl"&&(pe=M.offsetX<=z.offsetWidth-z.clientWidth),pe||Y&&M.offsetY>z.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y&&P$(y.nodesRef.current,W).some(Y=>{var re;return k$(M,(re=Y.context)==null?void 0:re.elements.floating)});if(k$(M,o)||k$(M,s)||B)return;const q=y?P$(y.nodesRef.current,W):[];if(q.length>0){let Y=!0;if(q.forEach(re=>{var pe;if((pe=re.context)!=null&&pe.open&&!re.context.dataRef.current.__outsidePressBubbles){Y=!1;return}}),!Y)return}r(!1,M,"outside-press")}),R=vp(M=>{var F;const P=()=>{var j;O(M),(j=R1(M))==null||j.removeEventListener(f,P)};(F=R1(M))==null||F.addEventListener(f,P)});return k.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=w,a.current.__outsidePressBubbles=S;function M(j){r(!1,j,"ancestor-scroll")}const F=Zg(o);l&&F.addEventListener("keydown",C?I:D,C),b&&F.addEventListener(f,A?R:O,A);let P=[];return p&&(ni(s)&&(P=Yd(s)),ni(o)&&(P=P.concat(Yd(o))),!ni(i)&&i&&i.contextElement&&(P=P.concat(Yd(i.contextElement)))),P=P.filter(j=>{var z;return j!==((z=F.defaultView)==null?void 0:z.visualViewport)}),P.forEach(j=>{j.addEventListener("scroll",M,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?I:D,C),b&&F.removeEventListener(f,A?R:O,A),P.forEach(j=>{j.removeEventListener("scroll",M)})}},[a,o,s,i,l,b,f,n,r,p,u,w,S,D,C,I,O,A,R]),k.useEffect(()=>{E.current=!1},[b,f]),k.useMemo(()=>u?{reference:{onKeyDown:D,[KMe[h]]:M=>{d&&r(!1,M.nativeEvent,"reference-press")}},floating:{onKeyDown:D,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[XMe[f]]:()=>{E.current=!0}}}:{},[u,d,f,h,r,D])}function JMe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Ffe(),s=k.useRef({}),[o]=k.useState(()=>VMe()),a=I7()!=null,[u,l]=k.useState(r.reference),c=vp((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=k.useMemo(()=>({setPositionReference:l}),[]),d=k.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return k.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function R7(e){e===void 0&&(e={});const{nodeId:t}=e,n=JMe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=k.useState(null),[a,u]=k.useState(null),c=(i==null?void 0:i.reference)||s,f=k.useRef(null),d=N7();vf(()=>{c&&(f.current=c)},[c]);const h=MMe({...e,elements:{...i,...a&&{reference:a}}}),p=k.useCallback(b=>{const E=ni(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(E),h.refs.setReference(E)},[h.refs]),m=k.useCallback(b=>{(ni(b)||b===null)&&(f.current=b,o(b)),(ni(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!ni(b))&&h.refs.setReference(b)},[h.refs]),g=k.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=k.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=k.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return vf(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);b&&(b.context=v)}),k.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function ZMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=k.useRef(!1),c=k.useRef(),f=k.useRef(!0);return k.useEffect(()=>{if(!a)return;const d=Va(o);function h(){!n&&ku(o)&&o===cQ(Zg(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),k.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),k.useEffect(()=>()=>{clearTimeout(c.current)},[]),k.useMemo(()=>a?{reference:{onPointerDown(d){jOe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=R1(d.nativeEvent);if(u&&ni(h))try{if(zOe()&&UOe())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!GOe(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=ni(h)&&h.hasAttribute(k7("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=cQ(o?o.ownerDocument:document);!h&&g===o||oS((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||oS(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const SQ="active",TQ="selected";function O$(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[SQ]:o,[TQ]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[SQ,TQ].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function e$e(e){e===void 0&&(e=[]);const t=e,n=k.useCallback(s=>O$(s,e,"reference"),t),r=k.useCallback(s=>O$(s,e,"floating"),t),i=k.useCallback(s=>O$(s,e,"item"),e.map(s=>s==null?void 0:s.item));return k.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const t$e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function n$e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=t$e.get(o))!=null?n:o,u=Ffe(),c=I7()!=null;return k.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function jfe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function CQ(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function AQ(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const r$e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function i$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ne(t),height:Ne(t),transform:"rotate(45deg)",position:"absolute",[r$e[u]]:Ne(r)},f=Ne(-t/2);return u==="left"?{...c,...CQ(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...CQ(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...AQ(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...AQ(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const P7=k.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=kh();return s?x.jsx("div",{...l,ref:c,style:{...u,...i$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});P7.displayName="@mantine/core/FloatingArrow";const[s$e,zfe]=ks("Popover component was not found in the tree");function BR({children:e,active:t=!0,refProp:n="ref"}){const r=QPe(t),i=cs(r,e==null?void 0:e.ref);return jm(e)?k.cloneElement(e,{[n]:i}):e}function Ufe(e){return x.jsx(v7,{tabIndex:-1,"data-autofocus":!0,...e})}BR.displayName="@mantine/core/FocusTrap";Ufe.displayName="@mantine/core/FocusTrapInitialFocus";BR.InitialFocus=Ufe;function o$e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const a$e={},Vfe=k.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ie("Portal",a$e,e),[s,o]=k.useState(!1),a=k.useRef(null);return py(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:o$e(i),o7(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:ET.createPortal(x.jsx(x.Fragment,{children:n}),a.current)});Vfe.displayName="@mantine/core/Portal";function TT({withinPortal:e=!0,children:t,...n}){return e?x.jsx(Vfe,{...n,children:t}):x.jsx(x.Fragment,{children:t})}TT.displayName="@mantine/core/OptionalPortal";const bE=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ne(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),PC={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ne(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ne(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ne(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ne(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ne(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ne(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ne(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ne(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...bE("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...bE("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...bE("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...bE("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...bE("top"),common:{transformOrigin:"top right"}}},DQ={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function u$e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in PC?{transitionProperty:PC[e].transitionProperty,...i,...PC[e].common,...PC[e][DQ[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[DQ[t]]}}function l$e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Rs(),l=a7(),c=u.respectReducedMotion?l:!1,[f,d]=k.useState(c?0:e),[h,p]=k.useState(r?"entered":"exited"),m=k.useRef(-1),g=k.useRef(-1),y=v=>{const b=v?i:s,E=v?o:a;window.clearTimeout(m.current);const _=c?0:v?e:t;d(_),_===0?(typeof b=="function"&&b(),typeof E=="function"&&E(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{YRe.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof E=="function"&&E(),p(v?"entered":"exited")},_)})})};return ch(()=>{y(r)},[r]),k.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Ph({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=l$e({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?x.jsx(x.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:x.jsx(x.Fragment,{children:s(u$e({transition:t,duration:f,state:d,timingFunction:h}))})}Ph.displayName="@mantine/core/Transition";var Hfe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const c$e={},O7=Ve((e,t)=>{var g,y,v,b;const n=Ie("PopoverDropdown",c$e,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=zfe(),h=Gce({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=cs(t,d.floating);return d.disabled?null:x.jsx(TT,{...d.portalProps,withinPortal:d.withinPortal,children:x.jsx(Ph,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:E=>x.jsx(BR,{active:d.trapFocus,children:x.jsxs(we,{...p,...f,variant:u,ref:m,onKeyDownCapture:LPe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ne(d.width)},i]}),children:[o,x.jsx(P7,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});O7.classes=Hfe;O7.displayName="@mantine/core/PopoverDropdown";const f$e={refProp:"ref",popupType:"dialog"},qfe=Ve((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ie("PopoverTarget",f$e,e);if(!jm(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=zfe(),u=cs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return k.cloneElement(n,{...o,...l,...a.targetProps,className:Ai(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});qfe.displayName="@mantine/core/PopoverTarget";function Wfe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=k.useState(0);k.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return AMe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),ch(()=>{t.update()},r),ch(()=>{s(o=>o+1)},[e])}function d$e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function h$e(e,t){const n=d$e(e.middlewares),r=[Ofe(e.offset)];return n.shift&&r.push(D7(typeof n.shift=="boolean"?{limiter:vQ(),padding:5}:{limiter:vQ(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?m4():m4(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?g4():g4(n.inline)),r.push(Mfe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(FMe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function p$e(e){const[t,n]=Is({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=R7({strategy:e.strategy,placement:e.position,middleware:h$e(e,()=>s)});return Wfe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),ch(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),ch(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const m$e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Cl("popover"),__staticSelector:"Popover",width:"max-content"},g$e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Kr(t),"--popover-shadow":i7(n)}});function Rr(e){var Pe,Be,Xe,mt,Ft,bt;const t=Ie("Popover",m$e,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:E,portalProps:_,closeOnEscape:w,clickOutsideEvents:S,trapFocus:C,onClose:A,onOpen:D,onChange:I,zIndex:O,radius:R,shadow:M,id:F,defaultOpened:P,__staticSelector:j,withRoles:z,disabled:V,returnFocus:$,variant:U,keepMounted:W,vars:B,floatingStrategy:q,...Y}=t,re=Et({name:j,props:t,classes:Hfe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:B,varsResolver:g$e}),pe=k.useRef(null),[_e,de]=k.useState(null),[ye,Ce]=k.useState(null),{dir:ve}=kh(),qe=ga(F),He=p$e({middlewares:c,width:l,position:jfe(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:pe,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:P,onChange:I,onOpen:D,onClose:A,strategy:q});zPe(()=>b&&He.onClose(),S,[_e,ye]);const ht=k.useCallback(G=>{de(G),He.floating.refs.setReference(G)},[He.floating.refs.setReference]),rt=k.useCallback(G=>{Ce(G),He.floating.refs.setFloating(G)},[He.floating.refs.setFloating]);return x.jsx(s$e,{value:{returnFocus:$,disabled:V,controlled:He.controlled,reference:ht,floating:rt,x:He.floating.x,y:He.floating.y,arrowX:(Xe=(Be=(Pe=He.floating)==null?void 0:Pe.middlewareData)==null?void 0:Be.arrow)==null?void 0:Xe.x,arrowY:(bt=(Ft=(mt=He.floating)==null?void 0:mt.middlewareData)==null?void 0:Ft.arrow)==null?void 0:bt.y,opened:He.opened,arrowRef:pe,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:He.floating.placement,trapFocus:C,withinPortal:E,portalProps:_,zIndex:O,radius:R,shadow:M,closeOnEscape:w,onClose:He.onClose,onToggle:He.onToggle,getTargetId:()=>`${qe}-target`,getDropdownId:()=>`${qe}-dropdown`,withRoles:z,targetProps:Y,__staticSelector:j,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:re},children:n})}Rr.Target=qfe;Rr.Dropdown=O7;Rr.displayName="@mantine/core/Popover";Rr.extend=e=>e;var ic={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const y$e=k.forwardRef(({className:e,...t},n)=>x.jsxs(we,{component:"span",className:Ai(ic.barsLoader,e),...t,ref:n,children:[x.jsx("span",{className:ic.bar}),x.jsx("span",{className:ic.bar}),x.jsx("span",{className:ic.bar})]})),v$e=k.forwardRef(({className:e,...t},n)=>x.jsxs(we,{component:"span",className:Ai(ic.dotsLoader,e),...t,ref:n,children:[x.jsx("span",{className:ic.dot}),x.jsx("span",{className:ic.dot}),x.jsx("span",{className:ic.dot})]})),b$e=k.forwardRef(({className:e,...t},n)=>x.jsx(we,{component:"span",className:Ai(ic.ovalLoader,e),...t,ref:n})),Gfe={bars:y$e,oval:b$e,dots:v$e},_$e={loaders:Gfe,type:"oval"},E$e=(e,{size:t,color:n})=>({root:{"--loader-size":cn(t,"loader-size"),"--loader-color":n?Gr(n,e):void 0}}),by=Ve((e,t)=>{const n=Ie("Loader",_$e,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Et({name:"Loader",props:n,classes:ic,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:E$e});return p?x.jsx(we,{...g("root"),ref:t,...m,children:p}):x.jsx(we,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});by.defaultLoaders=Gfe;by.classes=ic;by.displayName="@mantine/core/Loader";var jR={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const IQ={orientation:"horizontal"},w$e=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ne(t)}}),M7=Ve((e,t)=>{const n=Ie("ActionIconGroup",IQ,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ie("ActionIconGroup",IQ,e),p=Et({name:"ActionIconGroup",props:n,classes:jR,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:w$e,rootSelector:"group"});return x.jsx(we,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});M7.classes=jR;M7.displayName="@mantine/core/ActionIconGroup";const x$e={},S$e=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":cn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Kr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},dm=fs((e,t)=>{const n=Ie("ActionIcon",x$e,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:E,mod:_,...w}=n,S=Et({name:["ActionIcon",p],props:n,className:r,style:u,classes:jR,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:S$e});return x.jsxs(Yi,{...S("root",{active:!v&&!l&&!b}),...w,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},_],children:[x.jsx(Ph,{mounted:!!l,transition:"slide-down",duration:150,children:C=>x.jsx(we,{component:"span",...S("loader",{style:C}),"aria-hidden":!0,children:x.jsx(by,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),x.jsx(we,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});dm.classes=jR;dm.displayName="@mantine/core/ActionIcon";dm.Group=M7;const Yfe=k.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>x.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:x.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Yfe.displayName="@mantine/core/CloseIcon";var Kfe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const T$e={variant:"subtle"},C$e=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":cn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Kr(n),"--cb-icon-size":Ne(r)}}),Um=fs((e,t)=>{const n=Ie("CloseButton",T$e,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Et({name:"CloseButton",props:n,className:a,style:l,classes:Kfe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:C$e});return x.jsxs(Yi,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||x.jsx(Yfe,{}),i]})});Um.classes=Kfe;Um.displayName="@mantine/core/CloseButton";function A$e(e){return k.Children.toArray(e).filter(Boolean)}var Xfe={root:"m_4081bf90"};const D$e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},I$e=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Nu(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),ro=Ve((e,t)=>{const n=Ie("Group",D$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,E=A$e(u),_=E.length,w=Nu(l??"md"),C={childWidth:`calc(${100/_}% - (${w} - ${w} / ${_}))`},A=Et({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:Xfe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:I$e});return x.jsx(we,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:E})});ro.classes=Xfe;ro.displayName="@mantine/core/Group";var Qfe={root:"m_9814e45f"};const N$e={zIndex:Cl("modal")},k$e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Xc(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ne(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Kr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),aS=fs((e,t)=>{const n=Ie("Overlay",N$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,E=Et({name:"Overlay",props:n,classes:Qfe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:k$e});return x.jsx(we,{ref:t,...E("root"),mod:[{center:c,fixed:l},v],...b,children:f})});aS.classes=Qfe;aS.displayName="@mantine/core/Overlay";const[R$e,Oh]=ks("ModalBase component was not found in tree");function P$e({opened:e,transitionDuration:t}){const[n,r]=k.useState(e),i=k.useRef(),o=a7()?0:t;return k.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function O$e({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ga(e),[u,l]=k.useState(!1),[c,f]=k.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=P$e({opened:n,transitionDuration:d});return Qce("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Gce({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Jfe=k.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},E)=>{const{_id:_,titleMounted:w,bodyMounted:S,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:D}=O$e({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return x.jsx(TT,{...c,withinPortal:l,children:x.jsx(R$e,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${_}-title`,getBodyId:()=>`${_}-body`,titleMounted:w,bodyMounted:S,setTitleMounted:A,setBodyMounted:D,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:x.jsx(RR,{enabled:C&&f,...v,children:x.jsx(we,{ref:E,...b,__vars:{...g,"--mb-z-index":(h||Cl("modal")).toString(),"--mb-shadow":i7(p),"--mb-padding":Nu(m)},children:d})})})})});function M$e(){const e=Oh();return k.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Zv={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const $7=k.forwardRef(({className:e,...t},n)=>{const r=M$e(),i=Oh();return x.jsx(we,{ref:n,...t,id:r,className:Ai({[Zv.body]:!i.unstyled},e)})});$7.displayName="@mantine/core/ModalBaseBody";const F7=k.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Oh();return x.jsx(Um,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ai({[Zv.close]:!i.unstyled},e),unstyled:i.unstyled})});F7.displayName="@mantine/core/ModalBaseCloseButton";const Zfe=k.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Oh();return x.jsx(Ph,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>x.jsx("div",{...n,className:Ai({[Zv.inner]:!a.unstyled},n.className),children:x.jsx(BR,{active:a.opened&&a.trapFocus,children:x.jsx(FR,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ai({[Zv.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),L7=k.forwardRef(({className:e,...t},n)=>{const r=Oh();return x.jsx(we,{component:"header",ref:n,className:Ai({[Zv.header]:!r.unstyled},e),...t})});L7.displayName="@mantine/core/ModalBaseHeader";const $$e={duration:200,timingFunction:"ease",transition:"fade"};function F$e(e){const t=Oh();return{...$$e,...t.transitionProps,...e}}const B7=k.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Oh(),o=F$e(t);return x.jsx(Ph,{mounted:s.opened,...o,transition:"fade",children:a=>x.jsx(aS,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});B7.displayName="@mantine/core/ModalBaseOverlay";function L$e(){const e=Oh();return k.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const j7=k.forwardRef(({className:e,...t},n)=>{const r=L$e(),i=Oh();return x.jsx(we,{component:"h2",ref:n,className:Ai({[Zv.title]:!i.unstyled},e),...t,id:r})});j7.displayName="@mantine/core/ModalBaseTitle";function ede({children:e}){return x.jsx(x.Fragment,{children:e})}const[B$e,l_]=s_({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Dl={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const NQ={},j$e=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Js(t)} - ${Ne(2)})`}}),zR=Ve((e,t)=>{const n=Ie("InputDescription",NQ,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ie("InputDescription",NQ,n),p=l_(),m=Et({name:["InputWrapper",c],props:n,classes:Dl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:j$e}),g=f&&(p==null?void 0:p.getStyles)||m;return x.jsx(we,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});zR.classes=Dl;zR.displayName="@mantine/core/InputDescription";const z$e={},U$e=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Js(t)} - ${Ne(2)})`}}),UR=Ve((e,t)=>{const n=Ie("InputError",z$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Et({name:["InputWrapper",c],props:n,classes:Dl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:U$e}),m=l_(),g=f&&(m==null?void 0:m.getStyles)||p;return x.jsx(we,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});UR.classes=Dl;UR.displayName="@mantine/core/InputError";const kQ={labelElement:"label"},V$e=(e,{size:t})=>({label:{"--input-label-size":Js(t),"--input-asterisk-color":void 0}}),VR=Ve((e,t)=>{const n=Ie("InputLabel",kQ,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Ie("InputLabel",kQ,n),b=Et({name:["InputWrapper",m],props:n,classes:Dl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:V$e}),E=l_(),_=(E==null?void 0:E.getStyles)||b;return x.jsxs(we,{..._("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:w=>{h==null||h(w),!w.defaultPrevented&&w.detail>1&&w.preventDefault()},...v,children:[p,f&&x.jsx("span",{..._("required"),"aria-hidden":!0,children:" *"})]})});VR.classes=Dl;VR.displayName="@mantine/core/InputLabel";const RQ={},z7=Ve((e,t)=>{const n=Ie("InputPlaceholder",RQ,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ie("InputPlaceholder",RQ,n),p=Et({name:["InputPlaceholder",l],props:n,classes:Dl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return x.jsx(we,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});z7.classes=Dl;z7.displayName="@mantine/core/InputPlaceholder";function H$e(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const q$e={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},W$e=(e,{size:t})=>({label:{"--input-label-size":Js(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Js(t)} - ${Ne(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Js(t)} - ${Ne(2)})`}}),U7=Ve((e,t)=>{const n=Ie("InputWrapper",q$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:E,children:_,withAsterisk:w,id:S,required:C,__stylesApiProps:A,mod:D,...I}=n,O=Et({name:["InputWrapper",f],props:A||n,classes:Dl,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:W$e}),R={size:l,variant:c,__staticSelector:f},M=ga(S),F=typeof w=="boolean"?w:C,P=(b==null?void 0:b.id)||`${M}-error`,j=(v==null?void 0:v.id)||`${M}-description`,z=M,V=!!m&&typeof m!="boolean",$=!!g,U=`${V?P:""} ${$?j:""}`,W=U.trim().length>0?U.trim():void 0,B=(y==null?void 0:y.id)||`${M}-label`,q=p&&x.jsx(VR,{labelElement:E,id:B,htmlFor:z,required:F,...R,...y,children:p},"label"),Y=$&&x.jsx(zR,{...v,...R,size:(v==null?void 0:v.size)||R.size,id:(v==null?void 0:v.id)||j,children:g},"description"),re=x.jsx(k.Fragment,{children:d(_)},"input"),pe=V&&k.createElement(UR,{...b,...R,size:(b==null?void 0:b.size)||R.size,key:"error",id:(b==null?void 0:b.id)||P},m),_e=h.map(de=>{switch(de){case"label":return q;case"input":return re;case"description":return Y;case"error":return pe;default:return null}});return x.jsx(B$e,{value:{getStyles:O,describedBy:W,inputId:z,labelId:B,...H$e(h,{hasDescription:$,hasError:V})},children:x.jsx(we,{ref:t,variant:c,size:l,mod:[{error:!!m},D],...O("root"),...I,children:_e})})});U7.classes=Dl;U7.displayName="@mantine/core/InputWrapper";const G$e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Y$e=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":cn(t.size,"input-height"),"--input-fz":Js(t.size),"--input-radius":t.radius===void 0?void 0:Kr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ne(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ne(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?cn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Yr=fs((e,t)=>{const n=Ie("Input",G$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:E,rightSectionPointerEvents:_,leftSectionPointerEvents:w,variant:S,vars:C,pointer:A,multiline:D,radius:I,id:O,withAria:R,withErrorStyles:M,mod:F,inputSize:P,...j}=n,{styleProps:z,rest:V}=gy(j),$=l_(),U={offsetBottom:$==null?void 0:$.offsetBottom,offsetTop:$==null?void 0:$.offsetTop},W=Et({name:["Input",l],props:c||n,classes:Dl,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:C,varsResolver:Y$e}),B=R?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":$==null?void 0:$.describedBy,id:($==null?void 0:$.inputId)||O}:{};return x.jsxs(we,{...W("wrapper"),...z,...d,mod:[{error:!!h&&M,pointer:A,disabled:p,multiline:D,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&x.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),x.jsx(we,{component:"input",...V,...B,ref:t,required:u,mod:{disabled:p,error:!!h&&M},variant:S,__size:P,...W("input")}),v&&x.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Yr.classes=Dl;Yr.Wrapper=U7;Yr.Label=VR;Yr.Error=UR;Yr.Description=zR;Yr.Placeholder=z7;Yr.displayName="@mantine/core/Input";function tde(e,t,n){const r=Ie(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:E,inputContainer:_,inputWrapperOrder:w,withAsterisk:S,variant:C,vars:A,mod:D,...I}=r,{styleProps:O,rest:R}=gy(I),M={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:E,inputContainer:_,inputWrapperOrder:w,withAsterisk:S,variant:C,id:v,mod:D,...y};return{...R,classNames:u,styles:l,unstyled:f,wrapperProps:{...M,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const K$e={__staticSelector:"InputBase",withAria:!0},Il=fs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=tde("InputBase",K$e,e);return x.jsx(Yr.Wrapper,{...r,children:x.jsx(Yr,{...n,...i,ref:t})})});Il.classes={...Yr.classes,...Yr.Wrapper.classes};Il.displayName="@mantine/core/InputBase";const X$e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var nde={root:"m_8bffd616"};const Q$e={},Jt=fs((e,t)=>{const n=Ie("Flex",Q$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Et({name:"Flex",classes:nde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Rs(),b=MR(),E=ofe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:X$e});return x.jsxs(x.Fragment,{children:[E.hasResponsiveStyles&&x.jsx(xT,{selector:`.${b}`,styles:E.styles,media:E.media}),x.jsx(we,{ref:t,...y("root",{className:b,style:i_(E.inlineStyles)}),...g})]})});Jt.classes=nde;Jt.displayName="@mantine/core/Flex";const[J$e,V7]=ks("Accordion component was not found in the tree");function eb({style:e,size:t=16,...n}){return x.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ne(t),height:Ne(t),display:"block"},...n,children:x.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}eb.displayName="@mantine/core/AccordionChevron";const[Z$e,rde]=ks("Accordion.Item component was not found in the tree");var CT={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const eFe={},H7=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Ie("AccordionControl",eFe,e),{value:m}=rde(),g=V7(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,E=x.jsxs(Yi,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:_=>{l==null||l(_),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:r7({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[x.jsx(we,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),x.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&x.jsx(we,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?x.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});H7.displayName="@mantine/core/AccordionControl";H7.classes=CT;const tFe={},q7=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Ie("AccordionItem",tFe,e),c=V7();return x.jsx(Z$e,{value:{value:a},children:x.jsx(we,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});q7.displayName="@mantine/core/AccordionItem";q7.classes=CT;const nFe={},W7=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Ie("AccordionPanel",nFe,e),{value:l}=rde(),c=V7();return x.jsx(p7,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:x.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});W7.displayName="@mantine/core/AccordionPanel";W7.classes=CT;const rFe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:x.jsx(eb,{})},iFe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ne(n),"--accordion-radius":r===void 0?void 0:Kr(r)}});function Aa(e){const t=Ie("Accordion",rFe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:E,variant:_,radius:w,...S}=t,C=ga(h),[A,D]=Is({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),I=M=>Array.isArray(A)?A.includes(M):M===A,O=M=>{const F=Array.isArray(A)?A.includes(M)?A.filter(P=>P!==M):[...A,M]:M===A?null:M;D(F)},R=Et({name:"Accordion",classes:CT,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:iFe});return x.jsx(J$e,{value:{isItemActive:I,onChange:O,getControlId:PI(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:PI(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:E,loop:p,getStyles:R,variant:_,unstyled:o},children:x.jsx(we,{...R("root"),id:C,...S,variant:_,"data-accordion":!0,children:u})})}const sFe=e=>e;Aa.extend=sFe;Aa.classes=CT;Aa.displayName="@mantine/core/Accordion";Aa.Item=q7;Aa.Panel=W7;Aa.Control=H7;Aa.Chevron=eb;var ide={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const oFe={},aFe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Kr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},AT=Ve((e,t)=>{const n=Ie("Alert",oFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...E}=n,_=Et({name:"Alert",classes:ide,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aFe}),w=ga(h),S=f&&`${w}-title`||void 0,C=`${w}-body`;return x.jsx(we,{id:w,..._("root",{variant:v}),variant:v,ref:t,...E,role:"alert","aria-describedby":C,"aria-labelledby":S,children:x.jsxs("div",{..._("wrapper"),children:[p&&x.jsx("div",{..._("icon"),children:p}),x.jsxs("div",{..._("body"),children:[f&&x.jsx("div",{..._("title"),"data-with-close-button":m||void 0,children:x.jsx("span",{id:S,..._("label"),children:f})}),d&&x.jsx("div",{id:C,..._("message"),"data-variant":v,children:d})]}),m&&x.jsx(Um,{..._("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});AT.classes=ide;AT.displayName="@mantine/core/Alert";var sde={root:"m_b6d8b162"};function uFe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const lFe={inherit:!1},cFe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Js(i),"--text-lh":Wce(i),"--text-gradient":t==="gradient"?u4(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Gr(s,e):void 0}}),nt=fs((e,t)=>{const n=Ie("Text",lFe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,E=Et({name:["Text",l],props:n,classes:sde,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:cFe});return x.jsx(we,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":uFe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});nt.classes=sde;nt.displayName="@mantine/core/Text";var ode={root:"m_849cf0da"};const fFe={underline:"hover"},c_=fs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ie("Anchor",fFe,e);return x.jsx(nt,{component:"a",ref:t,className:Ai({[ode.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});c_.classes=ode;c_.displayName="@mantine/core/Anchor";const[dFe,f_]=ks("AppShell was not found in tree");var Vm={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const hFe={},G7=Ve((e,t)=>{const n=Ie("AppShellAside",hFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:x.jsx(we,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});G7.classes=Vm;G7.displayName="@mantine/core/AppShellAside";const pFe={},Y7=Ve((e,t)=>{var p;const n=Ie("AppShellFooter",pFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:x.jsx(we,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ai({[RR.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Y7.classes=Vm;Y7.displayName="@mantine/core/AppShellFooter";const mFe={},K7=Ve((e,t)=>{var p;const n=Ie("AppShellHeader",mFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:x.jsx(we,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ai({[RR.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});K7.classes=Vm;K7.displayName="@mantine/core/AppShellHeader";const gFe={},X7=Ve((e,t)=>{const n=Ie("AppShellMain",gFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=f_();return x.jsx(we,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});X7.classes=Vm;X7.displayName="@mantine/core/AppShellMain";function DT(e){return typeof e=="object"?e.base:e}function IT(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function NT(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function yFe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),IT(s)){const f=Ne(DT(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(NT(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ne(s.base),e["--app-shell-aside-offset"]=Ne(s.base)),hi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ne(s[f]),t[f]["--app-shell-aside-offset"]=Ne(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=s7(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function vFe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(IT(r)){const o=Ne(DT(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}NT(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ne(r.base),s&&(e["--app-shell-footer-offset"]=Ne(r.base))),hi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ne(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ne(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function bFe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(IT(r)){const o=Ne(DT(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}NT(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ne(r.base),s&&(e["--app-shell-header-offset"]=Ne(r.base))),hi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ne(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ne(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function _Fe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),IT(s)){const f=Ne(DT(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(NT(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ne(s.base),e["--app-shell-navbar-offset"]=Ne(s.base)),hi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ne(s[f]),t[f]["--app-shell-navbar-offset"]=Ne(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=s7(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function M$(e){return Number(e)===0?"0px":Nu(e)}function EFe({padding:e,baseStyles:t,minMediaStyles:n}){IT(e)&&(t["--app-shell-padding"]=M$(DT(e))),NT(e)&&(e.base&&(t["--app-shell-padding"]=M$(e.base)),hi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=M$(e[r]))}))}function wFe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};_Fe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),yFe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),bFe({baseStyles:u,minMediaStyles:o,header:t}),vFe({baseStyles:u,minMediaStyles:o,footer:n}),EFe({baseStyles:u,minMediaStyles:o,padding:i});const l=MI(hi(o),s).map(d=>({query:`(min-width: ${RI(d.px)})`,styles:o[d.value]})),c=MI(hi(a),s).map(d=>({query:`(max-width: ${RI(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function xFe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Rs(),o=zm(),{media:a,baseStyles:u}=wFe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return x.jsx(xT,{media:a,styles:u,selector:o.cssVariablesSelector})}const SFe={},Q7=Ve((e,t)=>{const n=Ie("AppShellNavbar",SFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:x.jsx(we,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});Q7.classes=Vm;Q7.displayName="@mantine/core/AppShellNavbar";const TFe={},J7=fs((e,t)=>{const n=Ie("AppShellSection",TFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=f_();return x.jsx(we,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});J7.classes=Vm;J7.displayName="@mantine/core/AppShellSection";function CFe({transitionDuration:e,disabled:t}){const[n,r]=k.useState(!0),i=k.useRef(),s=k.useRef();return Qce("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),py(()=>{k.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const AFe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Cl("app")},DFe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Wr=Ve((e,t)=>{const n=Ie("AppShell",AFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:E,mod:_,...w}=n,S=Et({name:"AppShell",classes:Vm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DFe}),C=CFe({disabled:y,transitionDuration:d});return x.jsxs(dFe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:E},children:[x.jsx(xFe,{navbar:l,header:p,aside:v,footer:b,padding:f}),x.jsx(we,{ref:t,...S("root"),mod:[{resizing:C,layout:g,disabled:y},_],...w})]})});Wr.classes=Vm;Wr.displayName="@mantine/core/AppShell";Wr.Navbar=Q7;Wr.Header=K7;Wr.Main=X7;Wr.Aside=G7;Wr.Footer=Y7;Wr.Section=J7;function ade(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>ade(t))}:e}function ude(e){return e?e.map(t=>ade(t)):[]}function Z7(e){return e.reduce((t,n)=>"group"in n?{...t,...Z7(n.items)}:(t[n.value]=n,t),{})}var Xa={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const IFe={error:null},NFe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":cn(t,"combobox-chevron-size")}}),ej=Ve((e,t)=>{const n=Ie("ComboboxChevron",IFe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Et({name:"ComboboxChevron",classes:Xa,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:NFe,rootSelector:"chevron"});return x.jsx(we,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:x.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});ej.classes=Xa;ej.displayName="@mantine/core/ComboboxChevron";const[kFe,Nl]=ks("Combobox component was not found in tree"),lde=k.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>x.jsx(Um,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));lde.displayName="@mantine/core/ComboboxClearButton";const RFe={},tj=Ve((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ie("ComboboxDropdown",RFe,e),u=Nl();return x.jsx(Rr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});tj.classes=Xa;tj.displayName="@mantine/core/ComboboxDropdown";const PFe={refProp:"ref"},cde=Ve((e,t)=>{const{children:n,refProp:r}=Ie("ComboboxDropdownTarget",PFe,e);if(Nl(),!jm(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return x.jsx(Rr.Target,{ref:t,refProp:r,children:n})});cde.displayName="@mantine/core/ComboboxDropdownTarget";const OFe={},nj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ComboboxEmpty",OFe,e),u=Nl();return x.jsx(we,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});nj.classes=Xa;nj.displayName="@mantine/core/ComboboxEmpty";function rj({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Nl(),[a,u]=k.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const MFe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},fde=Ve((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ie("ComboboxEventsTarget",MFe,e);if(!jm(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Nl(),f=rj({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return k.cloneElement(n,{...f,...l,[r]:cs(t,c.store.targetRef,n==null?void 0:n.ref)})});fde.displayName="@mantine/core/ComboboxEventsTarget";const $Fe={},ij=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ComboboxFooter",$Fe,e),u=Nl();return x.jsx(we,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});ij.classes=Xa;ij.displayName="@mantine/core/ComboboxFooter";const FFe={},sj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ie("ComboboxGroup",FFe,e),c=Nl();return x.jsxs(we,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&x.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});sj.classes=Xa;sj.displayName="@mantine/core/ComboboxGroup";const LFe={},oj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ComboboxHeader",LFe,e),u=Nl();return x.jsx(we,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});oj.classes=Xa;oj.displayName="@mantine/core/ComboboxHeader";function dde({value:e,valuesDivider:t=",",...n}){return x.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}dde.displayName="@mantine/core/ComboboxHiddenInput";const BFe={},aj=Ve((e,t)=>{const n=Ie("ComboboxOption",BFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Nl(),v=k.useId(),b=l||v;return x.jsx(we,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var _;h?E.preventDefault():((_=y.onOptionSubmit)==null||_.call(y,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(E)}})});aj.classes=Xa;aj.displayName="@mantine/core/ComboboxOption";const jFe={},uj=Ve((e,t)=>{const n=Ie("ComboboxOptions",jFe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Nl(),d=ga(a);return k.useEffect(()=>{f.store.setListId(d)},[d]),x.jsx(we,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});uj.classes=Xa;uj.displayName="@mantine/core/ComboboxOptions";const zFe={withAriaAttributes:!0,withKeyboardNavigation:!0},lj=Ve((e,t)=>{const n=Ie("ComboboxSearch",zFe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Nl(),h=d.getStyles("search"),p=rj({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return x.jsx(Yr,{ref:cs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});lj.classes=Xa;lj.displayName="@mantine/core/ComboboxSearch";const UFe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},hde=Ve((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ie("ComboboxTarget",UFe,e);if(!jm(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Nl(),f=rj({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=k.cloneElement(n,{...f,...l});return x.jsx(Rr.Target,{ref:cs(t,c.store.targetRef),children:d})});hde.displayName="@mantine/core/ComboboxTarget";function VFe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function HFe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function qFe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function cj({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Is({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=k.useRef(null),c=k.useRef(-1),f=k.useRef(null),d=k.useRef(null),h=k.useRef(-1),p=k.useRef(-1),m=k.useRef(-1),g=k.useCallback((P="unknown")=>{a||(u(!0),i==null||i(P))},[u,i,a]),y=k.useCallback((P="unknown")=>{a&&(u(!1),r==null||r(P))},[u,r,a]),v=k.useCallback((P="unknown")=>{a?y(P):g(P)},[y,g,a]),b=k.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-selected]`);P==null||P.removeAttribute("data-combobox-selected"),P==null||P.removeAttribute("aria-selected")},[]),E=k.useCallback(P=>{const j=document.getElementById(l.current),z=j==null?void 0:j.querySelectorAll("[data-combobox-option]");if(!z)return null;const V=P>=z.length?0:P<0?z.length-1:P;return c.current=V,z!=null&&z[V]&&!z[V].hasAttribute("data-combobox-disabled")?(b(),z[V].setAttribute("data-combobox-selected","true"),z[V].setAttribute("aria-selected","true"),z[V].scrollIntoView({block:"nearest",behavior:o}),z[V].id):null},[o,b]),_=k.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-active]`);if(P){const j=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=Array.from(j).findIndex(V=>V===P);return E(z)}return E(0)},[E]),w=k.useCallback(()=>E(HFe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),S=k.useCallback(()=>E(VFe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),C=k.useCallback(()=>E(qFe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),A=k.useCallback((P="selected",j)=>{m.current=window.setTimeout(()=>{var $;const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),V=Array.from(z).findIndex(U=>U.hasAttribute(`data-combobox-${P}`));c.current=V,j!=null&&j.scrollIntoView&&(($=z[V])==null||$.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),D=k.useCallback(()=>{c.current=-1,b()},[b]),I=k.useCallback(()=>{const P=document.querySelectorAll(`#${l.current} [data-combobox-option]`),j=P==null?void 0:P[c.current];j==null||j.click()},[]),O=k.useCallback(P=>{l.current=P},[]),R=k.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),M=k.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=k.useCallback(()=>c.current,[]);return k.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:E,selectFirstOption:C,selectActiveOption:_,selectNextOption:w,selectPreviousOption:S,resetSelectedOption:D,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:I,searchRef:f,focusSearchInput:R,targetRef:d,focusTarget:M}}const WFe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},GFe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Js(t),"--combobox-option-padding":cn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ne(n),"--combobox-option-fz":Js(t),"--combobox-option-padding":cn(t,"combobox-option-padding")}});function Bn(e){const t=Ie("Combobox",WFe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=cj(),y=o||g,v=Et({name:h||"Combobox",classes:Xa,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:GFe}),b=()=>{l==null||l(),y.closeDropdown()};return x.jsx(kFe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:x.jsx(Rr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const YFe=e=>e;Bn.extend=YFe;Bn.classes=Xa;Bn.displayName="@mantine/core/Combobox";Bn.Target=hde;Bn.Dropdown=tj;Bn.Options=uj;Bn.Option=aj;Bn.Search=lj;Bn.Empty=nj;Bn.Chevron=ej;Bn.Footer=ij;Bn.Header=oj;Bn.EventsTarget=fde;Bn.DropdownTarget=cde;Bn.Group=sj;Bn.ClearButton=lde;Bn.HiddenInput=dde;var pde={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const mde=pde,HR=k.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...E},_)=>{const w=Et({name:e,props:t,className:n,style:y,classes:pde,classNames:r,styles:i,unstyled:s});return x.jsx(we,{...w("root"),ref:_,__vars:{"--label-fz":Js(d),"--label-lh":cn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...E,children:x.jsxs(we,{component:p,htmlFor:p==="label"?l:void 0,...w("body"),children:[o,x.jsxs("div",{...w("labelWrapper"),"data-disabled":c||void 0,children:[a&&x.jsx(we,{component:m,htmlFor:m==="label"?l:void 0,...w("label"),"data-disabled":c||void 0,children:a}),u&&x.jsx(Yr.Description,{size:d,__inheritStyles:!1,...w("description"),children:u}),f&&typeof f!="boolean"&&x.jsx(Yr.Error,{size:d,__inheritStyles:!1,...w("error"),children:f})]})]})})});HR.displayName="@mantine/core/InlineInput";const gde=k.createContext(null),KFe=gde.Provider,yde=()=>k.useContext(gde),[XFe,QFe]=s_();var vde={card:"m_26775b0a"};const JFe={withBorder:!0},ZFe=(e,{radius:t})=>({card:{"--card-radius":Kr(t)}}),fj=Ve((e,t)=>{const n=Ie("CheckboxCard",JFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Et({name:"CheckboxCard",classes:vde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZFe,rootSelector:"card"}),g=yde(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return x.jsx(XFe,{value:{checked:y},children:x.jsx(Yi,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});fj.displayName="@mantine/core/CheckboxCard";fj.classes=vde;function dj({children:e,role:t}){const n=l_();return n?x.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):x.jsx(x.Fragment,{children:e})}const e6e={},hj=Ve((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ie("CheckboxGroup",e6e,e),[c,f]=Is({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return x.jsx(KFe,{value:{value:c,onChange:d,size:s},children:x.jsx(Yr.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:x.jsx(dj,{role:"group",children:a})})})});hj.classes=Yr.Wrapper.classes;hj.displayName="@mantine/core/CheckboxGroup";function bde({size:e,style:t,...n}){const r=e!==void 0?{width:Ne(e),height:Ne(e),...t}:t;return x.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:x.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function _de({indeterminate:e,...t}){return e?x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:x.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):x.jsx(bde,{...t})}var Ede={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const t6e={icon:_de},n6e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Kr(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):o_(o,e)?my({color:n,theme:e,autoContrast:o}):void 0}}},pj=Ve((e,t)=>{const n=Ie("CheckboxIndicator",t6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,E=l,_=Et({name:"CheckboxIndicator",classes:Ede,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:n6e,rootSelector:"indicator"}),w=QFe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(w==null?void 0:w.checked)||!1;return x.jsx(we,{ref:t,..._("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:x.jsx(E,{indeterminate:c,..._("icon")})})});pj.displayName="@mantine/core/CheckboxIndicator";pj.classes=Ede;var wde={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const r6e={labelPosition:"right",icon:_de},i6e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Kr(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):o_(o,e)?my({color:n,theme:e,autoContrast:o}):void 0}}},hh=Ve((e,t)=>{const n=Ie("Checkbox",r6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:E,variant:_,indeterminate:w,icon:S,rootRef:C,iconColor:A,onChange:D,autoContrast:I,mod:O,...R}=n,M=yde(),F=d||(M==null?void 0:M.size),P=S,j=Et({name:"Checkbox",props:n,classes:wde,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:i6e}),{styleProps:z,rest:V}=gy(R),$=ga(f),U=M?{checked:M.value.includes(V.value),onChange:W=>{M.onChange(W),D==null||D(W)}}:{};return x.jsx(HR,{...j("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:$,size:F,labelPosition:y,label:c,description:v,error:b,disabled:E,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:_,ref:C,mod:O,...z,...p,children:x.jsxs(we,{...j("inner"),mod:{"data-label-position":y},children:[x.jsx(we,{component:"input",id:$,ref:t,checked:g,disabled:E,mod:{error:!!b,indeterminate:w},...j("input",{focusable:!0,variant:_}),onChange:D,...V,...U,type:"checkbox"}),x.jsx(P,{indeterminate:w,...j("icon")})]})})});hh.classes={...wde,...mde};hh.displayName="@mantine/core/Checkbox";hh.Group=hj;hh.Indicator=pj;hh.Card=fj;function tb(e){return"group"in e}function xde({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;tb(o)&&i.push({group:o.group,items:xde({options:o.items,search:t,limit:n-i.length})}),tb(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function s6e(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Sde(e,t=new Set){if(Array.isArray(e))for(const n of e)if(tb(n))Sde(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function o6e(e,t){return Array.isArray(e)?e.includes(t):e===t}function Tde({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!tb(e)){const a=o6e(n,e.value),u=t&&a&&x.jsx(bde,{className:Xa.optionsDropdownCheckIcon}),l=x.jsxs(x.Fragment,{children:[r==="left"&&u,x.jsx("span",{children:e.label}),r==="right"&&u]});return x.jsx(Bn.Option,{value:e.value,disabled:e.disabled,className:Ai({[Xa.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>x.jsx(Tde,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return x.jsx(Bn.Group,{label:e.group,children:o})}function Cde({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){Sde(e);const b=typeof i=="string"?(r||xde)({options:e,search:u?i:"",limit:s??1/0}):e,E=s6e(b),_=b.map(w=>x.jsx(Tde,{data:w,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},tb(w)?w.group:w.value));return x.jsx(Bn.Dropdown,{hidden:t||n&&E,children:x.jsxs(Bn.Options,{labelledBy:p,"aria-label":y,children:[a?x.jsx(yy.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:_}):_,E&&d&&x.jsx(Bn.Empty,{children:d})]})})}var Ade={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const a6e={},u6e=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":cn(s,"badge-height"),"--badge-padding-x":cn(s,"badge-padding-x"),"--badge-fz":cn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Kr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Gr(n,e):void 0}}},Kd=fs((e,t)=>{const n=Ie("Badge",a6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...E}=n,_=Et({name:"Badge",props:n,classes:Ade,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:u6e});return x.jsxs(we,{variant:m,mod:[{block:g,circle:v},b],..._("root",{variant:m}),ref:t,...E,children:[d&&x.jsx("span",{..._("section"),"data-position":"left",children:d}),x.jsx("span",{..._("label"),children:p}),h&&x.jsx("span",{..._("section"),"data-position":"right",children:h})]})});Kd.classes=Ade;Kd.displayName="@mantine/core/Badge";var Dde={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const l6e={},c6e=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Gr(t,e):void 0,"--burger-size":cn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),mj=Ve((e,t)=>{const n=Ie("Burger",l6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=Et({name:"Burger",classes:Dde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:c6e});return x.jsxs(Yi,{...p("root"),ref:t,...h,children:[x.jsx(we,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});mj.classes=Dde;mj.displayName="@mantine/core/Burger";var qR={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const PQ={orientation:"horizontal"},f6e=(e,{borderWidth:t})=>({group:{"--button-border-width":Ne(t)}}),gj=Ve((e,t)=>{const n=Ie("ButtonGroup",PQ,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ie("ButtonGroup",PQ,e),p=Et({name:"ButtonGroup",props:n,classes:qR,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:f6e,rootSelector:"group"});return x.jsx(we,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});gj.classes=qR;gj.displayName="@mantine/core/ButtonGroup";const d6e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ne(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},h6e={},p6e=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":cn(s,"button-height"),"--button-padding-x":cn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Js(s.replace("compact-","")):Js(s),"--button-radius":t===void 0?void 0:Kr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Ln=fs((e,t)=>{const n=Ie("Button",h6e,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":E,autoContrast:_,mod:w,...S}=n,C=Et({name:"Button",props:n,classes:qR,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:p6e}),A=!!l,D=!!c;return x.jsxs(Yi,{ref:t,...C("root",{active:!a&&!p&&!E}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":A,"with-right-section":D},w],...S,children:[x.jsx(Ph,{mounted:!!p,transition:d6e,duration:150,children:I=>x.jsx(we,{component:"span",...C("loader",{style:I}),"aria-hidden":!0,children:x.jsx(by,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),x.jsxs("span",{...C("inner"),children:[l&&x.jsx(we,{component:"span",...C("section"),mod:{position:"left"},children:l}),x.jsx(we,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&x.jsx(we,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});Ln.classes=qR;Ln.displayName="@mantine/core/Button";Ln.Group=gj;const[m6e,g6e]=ks("Card component was not found in tree");var yj={root:"m_e615b15f",section:"m_599a2148"};const y6e={},WR=fs((e,t)=>{const n=Ie("CardSection",y6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=g6e();return x.jsx(we,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});WR.classes=yj;WR.displayName="@mantine/core/CardSection";const v6e={},b6e=(e,{padding:t})=>({root:{"--card-padding":Nu(t)}}),_y=fs((e,t)=>{const n=Ie("Card",v6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Et({name:"Card",props:n,classes:yj,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:b6e}),h=k.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===WR?k.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return x.jsx(m6e,{value:{getStyles:d},children:x.jsx(FR,{ref:t,unstyled:a,...d("root"),...f,children:p})})});_y.classes=yj;_y.displayName="@mantine/core/Card";_y.Section=WR;var Ide={root:"m_4451eb3a"};const _6e={},Qa=fs((e,t)=>{const n=Ie("Center",_6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Et({name:"Center",props:n,classes:Ide,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return x.jsx(we,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Qa.classes=Ide;Qa.displayName="@mantine/core/Center";var Nde={root:"m_7485cace"};const E6e={},w6e=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:cn(t,"container-size")}}),vl=Ve((e,t)=>{const n=Ie("Container",E6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Et({name:"Container",classes:Nde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:w6e});return x.jsx(we,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});vl.classes=Nde;vl.displayName="@mantine/core/Container";var kde={root:"m_3eebeb36",label:"m_9e365f20"};const x6e={orientation:"horizontal"},S6e=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Gr(t,e):void 0,"--divider-border-style":n,"--divider-size":cn(r,"divider-size")}}),vj=Ve((e,t)=>{const n=Ie("Divider",x6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Et({name:"Divider",classes:kde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:S6e});return x.jsx(we,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&x.jsx(we,{component:"span",mod:{position:d},...m("label"),children:f})})});vj.classes=kde;vj.displayName="@mantine/core/Divider";const[T6e,d_]=ks("Drawer component was not found in tree");var Mh={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const C6e={},GR=Ve((e,t)=>{const n=Ie("DrawerBody",C6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return x.jsx($7,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});GR.classes=Mh;GR.displayName="@mantine/core/DrawerBody";const A6e={},YR=Ve((e,t)=>{const n=Ie("DrawerCloseButton",A6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return x.jsx(F7,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});YR.classes=Mh;YR.displayName="@mantine/core/DrawerCloseButton";const D6e={},KR=Ve((e,t)=>{const n=Ie("DrawerContent",D6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=d_(),d=f.scrollAreaComponent||ede;return x.jsx(Zfe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:x.jsx(d,{style:{height:"100vh"},children:u})})});KR.classes=Mh;KR.displayName="@mantine/core/DrawerContent";const I6e={},XR=Ve((e,t)=>{const n=Ie("DrawerHeader",I6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return x.jsx(L7,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});XR.classes=Mh;XR.displayName="@mantine/core/DrawerHeader";const N6e={},QR=Ve((e,t)=>{const n=Ie("DrawerOverlay",N6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return x.jsx(B7,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});QR.classes=Mh;QR.displayName="@mantine/core/DrawerOverlay";function k6e(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function R6e(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const P6e={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},O6e={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},M6e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Cl("modal"),position:"left"},$6e=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":cn(n,"drawer-size"),"--drawer-flex":R6e(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":k6e(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ne(r)}}),JR=Ve((e,t)=>{const n=Ie("DrawerRoot",M6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=kh(),m=Et({name:"Drawer",classes:Mh,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$6e}),g=(p==="rtl"?O6e:P6e)[c];return x.jsx(T6e,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:x.jsx(Jfe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});JR.classes=Mh;JR.displayName="@mantine/core/DrawerRoot";const F6e={},ZR=Ve((e,t)=>{const n=Ie("DrawerTitle",F6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return x.jsx(j7,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});ZR.classes=Mh;ZR.displayName="@mantine/core/DrawerTitle";const L6e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Cl("modal"),withOverlay:!0,withCloseButton:!0},Uf=Ve((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ie("Drawer",L6e,e),l=!!n||s;return x.jsxs(JR,{ref:t,...u,children:[r&&x.jsx(QR,{...i}),x.jsxs(KR,{children:[l&&x.jsxs(XR,{children:[n&&x.jsx(ZR,{children:n}),s&&x.jsx(YR,{...o})]}),x.jsx(GR,{children:a})]})]})});Uf.classes=Mh;Uf.displayName="@mantine/core/Drawer";Uf.Root=JR;Uf.Overlay=QR;Uf.Content=KR;Uf.Body=GR;Uf.Header=XR;Uf.Title=ZR;Uf.CloseButton=YR;function B6e({open:e,close:t,openDelay:n,closeDelay:r}){const i=k.useRef(-1),s=k.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return k.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[j6e,Rde]=ks("Grid component was not found in tree"),v4=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,OQ=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":v4(e,t),MQ=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},$Q=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function z6e({span:e,order:t,offset:n,selector:r}){var d;const i=Rs(),s=Rde(),a=cw(e)===void 0?12:cw(e),u=i_({"--col-order":(d=cw(t))==null?void 0:d.toString(),"--col-flex-grow":MQ(a,s.grow),"--col-flex-basis":v4(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":OQ(a,s.columns,s.grow),"--col-offset":$Q(cw(n),s.columns)}),l=hi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=MQ(e[p],s.grow),h[p]["--col-flex-basis"]=v4(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=OQ(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=$Q(n[p],s.columns)),h},{}),f=MI(hi(l),i).filter(h=>hi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return x.jsx(xT,{styles:u,media:f,selector:r})}var bj={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const U6e={span:12},_j=Ve((e,t)=>{const n=Ie("GridCol",U6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=Rde(),h=MR();return x.jsxs(x.Fragment,{children:[x.jsx(z6e,{selector:`.${h}`,span:u,order:l,offset:c}),x.jsx(we,{ref:t,...d.getStyles("col",{className:Ai(i,h),style:s,classNames:r,styles:o}),...f})]})});_j.classes=bj;_j.displayName="@mantine/core/GridCol";function V6e({gutter:e,selector:t}){const n=Rs(),r=i_({"--grid-gutter":Nu(cw(e))}),i=hi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Nu(e[u])),a),{}),o=MI(hi(i),n).filter(a=>hi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return x.jsx(xT,{styles:r,media:o,selector:t})}const H6e={gutter:"md",grow:!1,columns:12},q6e=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),ol=Ve((e,t)=>{const n=Ie("Grid",H6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Et({name:"Grid",classes:bj,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:q6e}),y=MR();return x.jsxs(j6e,{value:{getStyles:g,grow:l,columns:f},children:[x.jsx(V6e,{selector:`.${y}`,...n}),x.jsx(we,{ref:t,...g("root",{className:y}),...m,children:x.jsx("div",{...g("inner"),children:p})})]})});ol.classes=bj;ol.displayName="@mantine/core/Grid";ol.Col=_j;var Pde={root:"m_9e117634"};const W6e={},G6e=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Kr(t),"--image-object-fit":n}}),Hm=fs((e,t)=>{const n=Ie("Image",W6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=k.useState(!c);k.useEffect(()=>y(!c),[c]);const v=Et({name:"Image",classes:Pde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:G6e});return g&&h?x.jsx(we,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):x.jsx(we,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Hm.classes=Pde;Hm.displayName="@mantine/core/Image";function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uS.apply(null,arguments)}function Y6e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var K6e=k.useLayoutEffect,X6e=function(t){var n=k.useRef(t);return K6e(function(){n.current=t}),n},FQ=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Q6e=function(t,n){var r=k.useRef();return k.useCallback(function(i){t.current=i,r.current&&FQ(r.current,null),r.current=n,n&&FQ(n,i)},[n])},LQ={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},J6e=function(t){Object.keys(LQ).forEach(function(n){t.style.setProperty(n,LQ[n],"important")})},BQ=J6e,qo=null,jQ=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Z6e(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),qo||(qo=document.createElement("textarea"),qo.setAttribute("tabindex","-1"),qo.setAttribute("aria-hidden","true"),BQ(qo)),qo.parentNode===null&&document.body.appendChild(qo);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;qo.style[h]=o[h]}),BQ(qo),qo.value=t;var u=jQ(qo,e);qo.value=t,u=jQ(qo,e),qo.value="x";var l=qo.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var zQ=function(){},eLe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},tLe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],nLe=!!document.documentElement.currentStyle,rLe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=eLe(tLe,n),i=r.boxSizing;if(i==="")return null;nLe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},iLe=rLe;function Ode(e,t,n){var r=X6e(n);k.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var sLe=function(t){Ode(window,"resize",t)},oLe=function(t){Ode(document.fonts,"loadingdone",t)},aLe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],uLe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?zQ:o,u=t.onHeightChange,l=u===void 0?zQ:u,c=Y6e(t,aLe),f=c.value!==void 0,d=k.useRef(null),h=Q6e(d,n),p=k.useRef(0),m=k.useRef(),g=function(){var b=d.current,E=r&&m.current?m.current:iLe(b);if(E){m.current=E;var _=Z6e(E,b.value||b.placeholder||"x",s,i),w=_[0],S=_[1];p.current!==w&&(p.current=w,b.style.setProperty("height",w+"px","important"),l(w,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return k.useLayoutEffect(g),sLe(g),oLe(g),k.createElement("textarea",uS({},c,{onChange:y,ref:h}))},lLe=k.forwardRef(uLe);const cLe={},Ej=Ve((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ie("Textarea",cLe,e),u=n&&o3e()!=="test",l=u?{maxRows:r,minRows:i}:{};return x.jsx(Il,{component:u?lLe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});Ej.classes=Il.classes;Ej.displayName="@mantine/core/Textarea";const[fLe,dLe]=ks("List component was not found in tree");var wj={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const hLe={},xj=Ve((e,t)=>{const n=Ie("ListItem",hLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=dLe(),h=u||d.icon,p={classNames:r,styles:o};return x.jsx(we,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:x.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&x.jsx("span",{...d.getStyles("itemIcon",p),children:h}),x.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});xj.classes=wj;xj.displayName="@mantine/core/ListItem";const pLe={type:"unordered"},mLe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Js(t),"--list-lh":Wce(t),"--list-spacing":Nu(n)}}),hc=Ve((e,t)=>{const n=Ie("List",pLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Et({name:"List",classes:wj,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mLe});return x.jsx(fLe,{value:{center:p,icon:d,getStyles:v},children:x.jsx(we,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});hc.classes=wj;hc.displayName="@mantine/core/List";hc.Item=xj;var Mde={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const UQ={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Cl("overlay")},gLe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Ru=Ve((e,t)=>{const n=Ie("LoadingOverlay",UQ,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Rs(),g=Et({name:"LoadingOverlay",classes:Mde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gLe}),y={...UQ.overlayProps,...f};return x.jsx(Ph,{transition:"fade",...l,mounted:!!d,children:v=>x.jsxs(we,{...g("root",{style:v}),ref:t,...p,children:[x.jsx(by,{...g("loader"),unstyled:a,...c}),x.jsx(aS,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),x.jsx(aS,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Ru.classes=Mde;Ru.displayName="@mantine/core/LoadingOverlay";const[yLe,kT]=ks("Menu component was not found in the tree");var h_={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const vLe={},Sj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("MenuDivider",vLe,e),u=kT();return x.jsx(we,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});Sj.classes=h_;Sj.displayName="@mantine/core/MenuDivider";const bLe={},Tj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ie("MenuDropdown",bLe,e),f=k.useRef(null),d=kT(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=$d(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=$d(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return x.jsxs(Rr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:cs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[x.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});Tj.classes=h_;Tj.displayName="@mantine/core/MenuDropdown";const _Le={},Cj=fs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ie("MenuItem",_Le,e),p=kT(),m=Rs(),{dir:g}=kh(),y=k.useRef(),v=p.getItemIndex(y.current),b=h,E=$d(b.onMouseLeave,()=>p.setHovered(-1)),_=$d(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),w=$d(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=$d(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?zf({color:a,theme:m}):null;return x.jsxs(Yi,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:cs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:_,onMouseLeave:E,onClick:w,onKeyDown:r7({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&x.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&x.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&x.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});Cj.classes=h_;Cj.displayName="@mantine/core/MenuItem";const ELe={},Aj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("MenuLabel",ELe,e),u=kT();return x.jsx(we,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});Aj.classes=h_;Aj.displayName="@mantine/core/MenuLabel";const wLe={refProp:"ref"},$de=k.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ie("MenuTarget",wLe,e);if(!jm(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=kT(),o=$d(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=$d(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=$d(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return x.jsx(Rr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:k.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});$de.displayName="@mantine/core/MenuTarget";const xLe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Na(e){const t=Ie("Menu",xLe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:E,keepMounted:_,...w}=t,S=Et({name:"Menu",classes:h_,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:D}]=jPe(),[I,O]=Is({value:s,defaultValue:o,finalValue:!1,onChange:u}),[R,M]=k.useState(!1),F=()=>{O(!1),M(!1),I&&(i==null||i())},P=()=>{O(!0),!I&&(r==null||r())},j=()=>{I?F():P()},{openDropdown:z,closeDropdown:V}=B6e({open:P,close:F,closeDelay:p,openDelay:h}),$=B=>BPe("[data-menu-item]","[data-menu-dropdown]",B),{resolvedClassNames:U,resolvedStyles:W}=Nh({classNames:m,styles:g,props:t});return ch(()=>{D()},[I]),x.jsx(yLe,{value:{getStyles:S,opened:I,toggleDropdown:j,getItemIndex:$,hovered:C,setHovered:A,openedViaClick:R,setOpenedViaClick:M,closeOnItemClick:l,closeDropdown:d==="click"?F:V,openDropdown:d==="click"?P:z,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:E},children:x.jsx(Rr,{...w,opened:I,onChange:j,defaultOpened:o,trapFocus:_?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:_,children:n})})}Na.extend=e=>e;Na.classes=h_;Na.displayName="@mantine/core/Menu";Na.Item=Cj;Na.Label=Aj;Na.Dropdown=Tj;Na.Target=$de;Na.Divider=Sj;const[SLe,p_]=ks("Modal component was not found in tree");var $h={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const TLe={},eP=Ve((e,t)=>{const n=Ie("ModalBody",TLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return x.jsx($7,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});eP.classes=$h;eP.displayName="@mantine/core/ModalBody";const CLe={},tP=Ve((e,t)=>{const n=Ie("ModalCloseButton",CLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return x.jsx(F7,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});tP.classes=$h;tP.displayName="@mantine/core/ModalCloseButton";const ALe={},nP=Ve((e,t)=>{const n=Ie("ModalContent",ALe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=p_(),f=c.scrollAreaComponent||ede;return x.jsx(Zfe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:x.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ne(c.yOffset)} * 2))`},children:u})})});nP.classes=$h;nP.displayName="@mantine/core/ModalContent";const DLe={},rP=Ve((e,t)=>{const n=Ie("ModalHeader",DLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return x.jsx(L7,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});rP.classes=$h;rP.displayName="@mantine/core/ModalHeader";const ILe={},iP=Ve((e,t)=>{const n=Ie("ModalOverlay",ILe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return x.jsx(B7,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});iP.classes=$h;iP.displayName="@mantine/core/ModalOverlay";const NLe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Cl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},kLe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Kr(t),"--modal-size":cn(n,"modal-size"),"--modal-y-offset":Ne(r),"--modal-x-offset":Ne(i)}}),sP=Ve((e,t)=>{const n=Ie("ModalRoot",NLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Et({name:m,classes:$h,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kLe});return x.jsx(SLe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:x.jsx(Jfe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});sP.classes=$h;sP.displayName="@mantine/core/ModalRoot";const RLe={},oP=Ve((e,t)=>{const n=Ie("ModalTitle",RLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return x.jsx(j7,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});oP.classes=$h;oP.displayName="@mantine/core/ModalTitle";const PLe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Cl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ki=Ve((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ie("Modal",PLe,e),c=!!n||s;return x.jsxs(sP,{ref:t,radius:u,...l,children:[r&&x.jsx(iP,{...i}),x.jsxs(nP,{radius:u,children:[c&&x.jsxs(rP,{children:[n&&x.jsx(oP,{children:n}),s&&x.jsx(tP,{...o})]}),x.jsx(eP,{children:a})]})]})});Ki.classes=$h;Ki.displayName="@mantine/core/Modal";Ki.Root=sP;Ki.Overlay=iP;Ki.Content=nP;Ki.Body=eP;Ki.Header=rP;Ki.Title=oP;Ki.CloseButton=tP;const[OLe,Dj]=s_(),[MLe,$Le]=s_();var aP={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const FLe={},LLe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?cn(t):cn(n,"pg-gap")}}),Ij=Ve((e,t)=>{const n=Ie("PillGroup",FLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=Dj(),h=(d==null?void 0:d.size)||l||void 0,p=Et({name:"PillGroup",classes:aP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LLe,stylesCtx:{size:h},rootSelector:"group"});return x.jsx(MLe,{value:{size:h,disabled:c},children:x.jsx(we,{ref:t,size:h,...p("group"),...f})})});Ij.classes=aP;Ij.displayName="@mantine/core/PillGroup";const BLe={variant:"default"},jLe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":cn(n,"pill-fz"),"--pill-height":cn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Kr(t)}}),lS=Ve((e,t)=>{const n=Ie("Pill",BLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=$Le(),E=Dj(),_=m||(b==null?void 0:b.size)||void 0,w=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",S=Et({name:"Pill",classes:aP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jLe,stylesCtx:{size:_}});return x.jsxs(we,{component:"span",ref:t,variant:w,size:_,...S("root",{variant:w}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[x.jsx("span",{...S("label"),children:c}),f&&x.jsx(Um,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});lS.classes=aP;lS.displayName="@mantine/core/Pill";lS.Group=Ij;var Fde={field:"m_45c4369d"};const zLe={type:"visible"},Nj=Ve((e,t)=>{const n=Ie("PillsInputField",zLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=Dj(),g=l_(),y=Et({name:"PillsInputField",classes:Fde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return x.jsx(we,{component:"input",ref:cs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});Nj.classes=Fde;Nj.displayName="@mantine/core/PillsInputField";const ULe={},zI=Ve((e,t)=>{const n=Ie("PillsInput",ULe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=k.useRef();return x.jsx(OLe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:x.jsx(Il,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});zI.displayName="@mantine/core/PillsInput";zI.Field=Nj;function VLe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(tb(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const HLe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},kj=Ve((e,t)=>{const n=Ie("MultiSelect",HLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:E,onOptionSubmit:_,comboboxProps:w,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:D,searchValue:I,defaultSearchValue:O,onSearchChange:R,readOnly:M,disabled:F,onFocus:P,onBlur:j,onPaste:z,radius:V,rightSection:$,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:B,leftSection:q,leftSectionWidth:Y,leftSectionPointerEvents:re,leftSectionProps:pe,inputContainer:_e,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:qe,wrapperProps:He,description:ht,label:rt,error:Pe,maxValues:Be,searchable:Xe,nothingFoundMessage:mt,withCheckIcon:Ft,checkIconPosition:bt,hidePickedOptions:G,withErrorStyles:ie,name:me,form:J,id:se,clearable:ce,clearButtonProps:Se,hiddenInputProps:Te,placeholder:Ge,hiddenInputValuesDivider:je,required:Ct,mod:Ot,renderOption:Dt,onRemove:Vt,onClear:Zt,scrollAreaProps:an,...gr}=n,lr=ga(se),fn=ude(m),Xr=Z7(fn),er=cj({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),er.resetSelectedOption()}}),{styleProps:gi,rest:{type:$l,autoComplete:Vo,...Hu}}=gy(gr),[Yn,Lr]=Is({value:c,defaultValue:f,finalValue:[],onChange:d}),[yr,ao]=Is({value:I,defaultValue:O,finalValue:"",onChange:R}),Ms=Et({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:$s,resolvedStyles:ue}=Nh({props:n,styles:o,classNames:r}),te=at=>{h==null||h(at),at.key===" "&&!Xe&&(at.preventDefault(),er.toggleDropdown()),at.key==="Backspace"&&yr.length===0&&Yn.length>0&&(Vt==null||Vt(Yn[Yn.length-1]),Lr(Yn.slice(0,Yn.length-1)))},le=Yn.map((at,St)=>{var Xt,_n;return x.jsx(lS,{withRemoveButton:!M&&!((Xt=Xr[at])!=null&&Xt.disabled),onRemove:()=>{Lr(Yn.filter(Sn=>at!==Sn)),Vt==null||Vt(at)},unstyled:a,disabled:F,...Ms("pill"),children:((_n=Xr[at])==null?void 0:_n.label)||at},`${at}-${St}`)});k.useEffect(()=>{E&&er.selectFirstOption()},[E,Yn]);const De=ce&&Yn.length>0&&!F&&!M&&x.jsx(Bn.ClearButton,{size:l,...Se,onClear:()=>{Zt==null||Zt(),Lr([]),ao("")}}),Ae=VLe({data:fn,value:Yn});return x.jsxs(x.Fragment,{children:[x.jsxs(Bn,{store:er,classNames:$s,styles:ue,unstyled:a,size:l,readOnly:M,__staticSelector:"MultiSelect",onOptionSubmit:at=>{_==null||_(at),ao(""),er.updateSelectedOptionIndex("selected"),Yn.includes(Xr[at].value)?(Lr(Yn.filter(St=>St!==Xr[at].value)),Vt==null||Vt(Xr[at].value)):Yn.length<Be&&Lr([...Yn,Xr[at].value])},...w,children:[x.jsx(Bn.DropdownTarget,{children:x.jsx(zI,{...gi,__staticSelector:"MultiSelect",classNames:$s,styles:ue,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:V,rightSection:$||De||x.jsx(Bn.Chevron,{size:l,error:Pe,unstyled:a}),rightSectionPointerEvents:W||(De?"all":"none"),rightSectionWidth:U,rightSectionProps:B,leftSection:q,leftSectionWidth:Y,leftSectionPointerEvents:re,leftSectionProps:pe,inputContainer:_e,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:qe,wrapperProps:He,description:ht,label:rt,error:Pe,multiline:!0,withErrorStyles:ie,__stylesApiProps:{...n,rightSectionPointerEvents:W||(De?"all":"none"),multiline:!0},pointer:!Xe,onClick:()=>Xe?er.openDropdown():er.toggleDropdown(),"data-expanded":er.dropdownOpened||void 0,id:lr,required:Ct,mod:Ot,children:x.jsxs(lS.Group,{disabled:F,unstyled:a,...Ms("pillsList"),children:[le,x.jsx(Bn.EventsTarget,{autoComplete:Vo,children:x.jsx(zI.Field,{...Hu,ref:t,id:lr,placeholder:Ge,type:!Xe&&!Ge?"hidden":"visible",...Ms("inputField"),unstyled:a,onFocus:at=>{P==null||P(at),Xe&&er.openDropdown()},onBlur:at=>{j==null||j(at),er.closeDropdown(),ao("")},onKeyDown:te,value:yr,onChange:at=>{ao(at.currentTarget.value),Xe&&er.openDropdown(),E&&er.selectFirstOption()},disabled:F,readOnly:M||!Xe,pointer:!Xe})})]})})}),x.jsx(Cde,{data:G?Ae:fn,hidden:M||F,filter:S,search:yr,limit:C,hiddenWhenEmpty:!Xe||!mt||G&&Ae.length===0&&yr.trim().length===0,withScrollArea:A,maxDropdownHeight:D,filterOptions:Xe,value:Yn,checkIconPosition:bt,withCheckIcon:Ft,nothingFoundMessage:mt,unstyled:a,labelId:rt?`${lr}-label`:void 0,"aria-label":rt?void 0:gr["aria-label"],renderOption:Dt,scrollAreaProps:an})]}),x.jsx(Bn.HiddenInput,{name:me,valuesDivider:je,value:Yn,form:J,disabled:F,...Te})]})});kj.classes={...Il.classes,...Bn.classes};kj.displayName="@mantine/core/MultiSelect";var Lde={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const qLe={},WLe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Nu(r)}}},uP=fs((e,t)=>{const n=Ie("NavLink",qLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:E,noWrap:_,childrenOffset:w,onKeyDown:S,autoContrast:C,mod:A,...D}=n,I=Et({name:"NavLink",props:n,classes:Lde,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WLe}),[O,R]=Is({value:l,defaultValue:c,finalValue:!1,onChange:f}),M=!!d,F=P=>{h==null||h(P),M&&(P.preventDefault(),R(!O))};return x.jsxs(x.Fragment,{children:[x.jsxs(Yi,{...I("root"),component:"a",ref:t,onClick:F,onKeyDown:P=>{S==null||S(P),P.nativeEvent.code==="Space"&&M&&(P.preventDefault(),R(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...D,children:[g&&x.jsx(we,{component:"span",...I("section"),mod:{position:"left"},children:g}),x.jsxs(we,{...I("body"),mod:{"no-wrap":_},children:[x.jsx(we,{component:"span",...I("label"),children:v}),x.jsx(we,{component:"span",mod:{active:p},...I("description"),children:b})]}),(M||y)&&x.jsx(we,{...I("section"),component:"span",mod:{rotate:O&&!E,position:"right"},children:M?y||x.jsx(eb,{...I("chevron")}):y})]}),x.jsx(p7,{in:O,...I("collapse"),children:x.jsx("div",{...I("children"),children:d})})]})});uP.classes=Lde;uP.displayName="@mantine/core/NavLink";function Bde(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var cS;(function(e){e.event="event",e.props="prop"})(cS||(cS={}));function bp(){}function GLe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function fS(e){return!!(e||"").match(/\d/)}function Ev(e){return e==null}function YLe(e){return typeof e=="number"&&isNaN(e)}function jde(e){return Ev(e)||YLe(e)||typeof e=="number"&&!isFinite(e)}function zde(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function KLe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function XLe(e,t,n){var r=KLe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function QLe(e){var t=k.useRef(e);t.current=e;var n=k.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function Rj(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function JLe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Ude(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function VQ(e,t){return Array(t+1).join(e)}function Vde(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+VQ("0",Math.abs(o))+i:o>=a?i=i+VQ("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function HQ(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=Rj(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Ude(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Lg(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Hde=GLe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),ZLe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function e4e(e,t,n){return Math.min(Math.max(e,t),n)}function $$(e){return Math.max(e.selectionStart,e.selectionEnd)}function t4e(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function n4e(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function r4e(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function i4e(e,t,n,r,i,s,o){o===void 0&&(o=r4e);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function qQ(e,t,n,r){var i=e.length;if(t=e4e(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function s4e(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(fS(e[n])||fS(e[n-1]));return t}function qde(e,t,n,r,i,s){s===void 0&&(s=bp);var o=QLe(function(p,m){var g,y;return jde(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Vde(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=k.useState(function(){return o(Ev(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Ev(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return k.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function o4e(e){return e.replace(/[^0-9]/g,"")}function a4e(e){return e}function u4e(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=a4e);var a=e.removeFormatting;a===void 0&&(a=o4e);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=bp);var h=e.onKeyDown;h===void 0&&(h=bp);var p=e.onMouseUp;p===void 0&&(p=bp);var m=e.onFocus;m===void 0&&(m=bp);var g=e.onBlur;g===void 0&&(g=bp);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=s4e);var b=e.isValidInputCharacter;b===void 0&&(b=fS);var E=e.isCharacterSame,_=Bde(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),w=qde(y,u,!!l,o,a,c),S=w[0],C=S.formattedValue,A=S.numAsString,D=w[1],I=k.useRef(),O=k.useRef({formattedValue:C,numAsString:A}),R=function(Pe,Be){O.current={formattedValue:Pe.formattedValue,numAsString:Pe.value},D(Pe,Be)},M=k.useState(!1),F=M[0],P=M[1],j=k.useRef(null),z=k.useRef({setCaretTimeout:null,focusTimeout:null});k.useEffect(function(){return P(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var V=o,$=function(Pe,Be){var Xe=parseFloat(Be);return{formattedValue:Pe,value:Be,floatValue:isNaN(Xe)?void 0:Xe}},U=function(Pe,Be,Xe){Pe.selectionStart===0&&Pe.selectionEnd===Pe.value.length||(Lg(Pe,Be),z.current.setCaretTimeout=setTimeout(function(){Pe.value===Xe&&Pe.selectionStart!==Be&&Lg(Pe,Be)},0))},W=function(Pe,Be,Xe){return qQ(Pe,Be,v(Pe),Xe)},B=function(Pe,Be,Xe){var mt=v(Be),Ft=i4e(Be,C,Pe,Xe,mt,b,E);return Ft=qQ(Be,Ft,mt),Ft},q=function(Pe){var Be=Pe.formattedValue;Be===void 0&&(Be="");var Xe=Pe.input,mt=Pe.source,Ft=Pe.event,bt=Pe.numAsString,G;if(Xe){var ie=Pe.inputValue||Xe.value,me=$$(Xe);Xe.value=Be,G=B(ie,Be,me),G!==void 0&&U(Xe,G,Be)}Be!==C&&R($(Be,bt),{event:Ft,source:mt})};k.useEffect(function(){var Pe=O.current,Be=Pe.formattedValue,Xe=Pe.numAsString;(C!==Be||A!==Xe)&&R($(C,A),{event:void 0,source:cS.props})},[C,A]);var Y=j.current?$$(j.current):void 0,re=typeof window<"u"?k.useLayoutEffect:k.useEffect;re(function(){var Pe=j.current;if(C!==O.current.formattedValue&&Pe){var Be=B(O.current.formattedValue,C,Y);Pe.value=C,U(Pe,Be,C)}},[C]);var pe=function(Pe,Be,Xe){var mt=Be.target,Ft=I.current?ZLe(I.current,mt.selectionEnd):Hde(C,Pe),bt=Object.assign(Object.assign({},Ft),{lastValue:C}),G=a(Pe,bt),ie=V(G);if(G=a(ie,void 0),f&&!f($(ie,G))){var me=Be.target,J=$$(me),se=B(Pe,C,J);return me.value=C,U(me,se,C),!1}return q({formattedValue:ie,numAsString:G,inputValue:Pe,event:Be,source:Xe,input:Be.target}),!0},_e=function(Pe,Be){Be===void 0&&(Be=0);var Xe=Pe.selectionStart,mt=Pe.selectionEnd;I.current={selectionStart:Xe,selectionEnd:mt+Be}},de=function(Pe){var Be=Pe.target,Xe=Be.value,mt=pe(Xe,Pe,cS.event);mt&&d(Pe),I.current=void 0},ye=function(Pe){var Be=Pe.target,Xe=Pe.key,mt=Be.selectionStart,Ft=Be.selectionEnd,bt=Be.value;bt===void 0&&(bt="");var G;Xe==="ArrowLeft"||Xe==="Backspace"?G=Math.max(mt-1,0):Xe==="ArrowRight"?G=Math.min(mt+1,bt.length):Xe==="Delete"&&(G=mt);var ie=0;Xe==="Delete"&&mt===Ft&&(ie=1);var me=Xe==="ArrowLeft"||Xe==="ArrowRight";if(G===void 0||mt!==Ft&&!me){h(Pe),_e(Be,ie);return}var J=G;if(me){var se=Xe==="ArrowLeft"?"left":"right";J=W(bt,G,se),J!==G&&Pe.preventDefault()}else Xe==="Delete"&&!b(bt[G])?J=W(bt,G,"right"):Xe==="Backspace"&&!b(bt[G])&&(J=W(bt,G,"left"));J!==G&&U(Be,J,bt),h(Pe),_e(Be,ie)},Ce=function(Pe){var Be=Pe.target,Xe=function(){var mt=Be.selectionStart,Ft=Be.selectionEnd,bt=Be.value;if(bt===void 0&&(bt=""),mt===Ft){var G=W(bt,mt);G!==mt&&U(Be,G,bt)}};Xe(),requestAnimationFrame(function(){Xe()}),p(Pe),_e(Be)},ve=function(Pe){Pe.persist&&Pe.persist();var Be=Pe.target,Xe=Pe.currentTarget;j.current=Be,z.current.focusTimeout=setTimeout(function(){var mt=Be.selectionStart,Ft=Be.selectionEnd,bt=Be.value;bt===void 0&&(bt="");var G=W(bt,mt);G!==mt&&!(mt===0&&Ft===bt.length)&&U(Be,G,bt),m(Object.assign(Object.assign({},Pe),{currentTarget:Xe}))},0)},qe=function(Pe){j.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),g(Pe)},He=F&&t4e()?"numeric":void 0,ht=Object.assign({inputMode:He},_,{type:t,value:C,onChange:de,onKeyDown:ye,onMouseUp:Ce,onFocus:ve,onBlur:qe});if(n==="text")return i?xi.createElement(xi.Fragment,null,i(C,_)||null):xi.createElement("span",Object.assign({},_,{ref:s}),C);if(r){var rt=r;return xi.createElement(rt,Object.assign({},ht,{ref:s}))}return xi.createElement("input",Object.assign({},ht,{ref:s}))}function WQ(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=lP(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=Rj(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Ude(p,n,!!r)),l&&(h=XLe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function lP(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function l4e(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function c4e(e,t){return new RegExp("(^-)|[0-9]|"+zde(e),"g")}function f4e(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function d4e(e,t,n){var r;t===void 0&&(t=n4e(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=lP(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(fS(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(j,z,V){var $=!1,U=!1;s.startsWith("-")?$=!1:j.startsWith("--")?($=!1,U=!0):o.startsWith("-")&&j.length===o.length?$=!1:j[0]==="-"&&($=!0);var W=$?1:0;return U&&(W=2),W&&(j=j.substring(W),z-=W,V-=W),{value:j,start:z,end:V,hasNegation:$}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var E=y(t.lastValue,u.start,u.end),_=E.start,w=E.end,S=E.value,C=e.substring(c,f);e.length&&S.length&&(_>S.length-o.length||w<s.length)&&!(C&&o.startsWith(C))&&(e=S);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var D=e.length,I=e.length-o.length;e.endsWith(o)?D=I:(f>I||f>e.length-o.length)&&(D=f),e=e.substring(0,D),e=l4e(b?"-"+e:e,i),e=(e.match(c4e(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(zde(p),"g"),function(j,z){return z===O?".":""});var R=Rj(e,i),M=R.beforeDecimal,F=R.afterDecimal,P=R.addNegation;return l.end-l.start<u.end-u.start&&M===""&&m&&!parseFloat(F)&&(e=P?"-":""),e}function h4e(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function p4e(e){var t=lP(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function m4e(e){e=p4e(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=bp);var s=e.onBlur;s===void 0&&(s=bp);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Bde(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=lP(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(P){return WQ(P,e)},b=function(P,j){return d4e(P,j,e)},E=Ev(f)?c:f,_=d??f4e(E,l,t);Ev(f)?Ev(c)||(_=_||typeof c=="number"):_=_||typeof f=="number";var w=function(P){return jde(P)?P:(typeof P=="number"&&(P=Vde(P)),_&&typeof a=="number"?HQ(P,a,!!u):P)},S=qde(w(f),w(c),!!_,v,b,h),C=S[0],A=C.numAsString,D=C.formattedValue,I=S[1],O=function(P){var j=P.target,z=P.key,V=j.selectionStart,$=j.selectionEnd,U=j.value;if(U===void 0&&(U=""),(z==="Backspace"||z==="Delete")&&$<l.length){P.preventDefault();return}if(V!==$){i(P);return}z==="Backspace"&&U[0]==="-"&&V===l.length+1&&n&&Lg(j,1),a&&u&&(z==="Backspace"&&U[V-1]===g?(Lg(j,V-1),P.preventDefault()):z==="Delete"&&U[V]===g&&P.preventDefault()),y!=null&&y.includes(z)&&U[V]===g&&Lg(j,V+1);var W=o===!0?",":o;z==="Backspace"&&U[V-1]===W&&Lg(j,V-1),z==="Delete"&&U[V]===W&&Lg(j,V+1),i(P)},R=function(P){var j=A;if(j.match(/\d/g)||(j=""),r||(j=JLe(j)),u&&a&&(j=HQ(j,a,u)),j!==A){var z=WQ(j,e);I({formattedValue:z,value:j,floatValue:parseFloat(j)},{event:P,source:cS.event})}s(P)},M=function(P){return P===g?!0:fS(P)},F=function(P){var j=P.currentValue,z=P.lastValue,V=P.formattedValue,$=P.currentValueIndex,U=P.formattedValueIndex,W=j[$],B=V[U],q=Hde(z,j),Y=q.to;return $>=Y.start&&$<Y.end&&y&&y.includes(W)&&B===g?!0:W===B};return Object.assign(Object.assign({},p),{value:D,valueIsNumericString:!1,isValidInputCharacter:M,isCharacterSame:F,onValueChange:I,format:v,removeFormatting:b,getCaretBoundary:function(P){return h4e(P,e)},onKeyDown:O,onBlur:R})}function g4e(e){var t=m4e(e);return xi.createElement(u4e,Object.assign({},t))}function GQ({direction:e,style:t,...n}){return x.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:x.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var b4={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const y4e=/^(0\.0*|-0(\.0*)?)$/,v4e=/^-?0\d+(\.\d+)?\.?$/;function b4e(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function YQ(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const _4e={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},E4e=(e,{size:t})=>({controls:{"--ni-chevron-size":cn(t,"ni-chevron-size")}}),Pj=Ve((e,t)=>{const n=Ie("NumberInput",_4e,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:E,decimalScale:_,onKeyDown:w,onKeyDownCapture:S,handlersRef:C,startValue:A,disabled:D,rightSectionPointerEvents:I,allowNegative:O,readOnly:R,size:M,rightSectionWidth:F,stepHoldInterval:P,stepHoldDelay:j,allowLeadingZeros:z,withKeyboardEvents:V,trimLeadingZeroesOnBlur:$,...U}=n,W=Et({name:"NumberInput",classes:b4,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:E4e}),{resolvedClassNames:B,resolvedStyles:q}=Nh({classNames:i,styles:s,props:n}),[Y,re]=Is({value:c,defaultValue:f,onChange:u}),pe=j!==void 0&&P!==void 0,_e=k.useRef(null),de=k.useRef(null),ye=k.useRef(0),Ce=(G,ie)=>{ie.source==="event"&&re(b4e(G.floatValue)&&!y4e.test(G.value)&&!(z&&v4e.test(G.value))?G.floatValue:G.value),l==null||l(G,ie)},ve=G=>{const ie=String(G).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ie?Math.max(0,(ie[1]?ie[1].length:0)-(ie[2]?+ie[2]:0)):0},qe=G=>{_e.current&&typeof G<"u"&&_e.current.setSelectionRange(G,G)},He=k.useRef();He.current=()=>{let G;const ie=ve(Y),me=ve(p),J=Math.max(ie,me),se=10**J;if(typeof Y!="number"||Number.isNaN(Y))G=cf(A,h,d);else if(d!==void 0){const Se=(Math.round(Y*se)+Math.round(p*se))/se;G=Se<=d?Se:d}else G=(Math.round(Y*se)+Math.round(p*se))/se;const ce=G.toFixed(J);re(parseFloat(ce)),l==null||l({floatValue:parseFloat(ce),formattedValue:ce,value:ce},{source:"increment"}),setTimeout(()=>{var Se;return qe((Se=_e.current)==null?void 0:Se.value.length)},0)};const ht=k.useRef();ht.current=()=>{let G;const ie=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,me=ve(Y),J=ve(p),se=Math.max(me,J),ce=10**se;if(typeof Y!="number"||Number.isNaN(Y))G=cf(A,ie,d);else{const Te=(Math.round(Y*ce)-Math.round(p*ce))/ce;G=ie!==void 0&&Te<ie?ie:Te}const Se=G.toFixed(se);re(parseFloat(Se)),l==null||l({floatValue:parseFloat(Se),formattedValue:Se,value:Se},{source:"decrement"}),setTimeout(()=>{var Te;return qe((Te=_e.current)==null?void 0:Te.value.length)},0)};const rt=G=>{w==null||w(G),!(R||!V)&&(G.key==="ArrowUp"&&(G.preventDefault(),He.current()),G.key==="ArrowDown"&&(G.preventDefault(),ht.current()))},Pe=G=>{if(S==null||S(G),G.key==="Backspace"){const ie=_e.current;ie.selectionStart===0&&ie.selectionStart===ie.selectionEnd&&(G.preventDefault(),window.setTimeout(()=>qe(0),0))}};o7(C,{increment:He.current,decrement:ht.current});const Be=G=>{G?He.current():ht.current(),ye.current+=1},Xe=G=>{if(Be(G),pe){const ie=typeof P=="number"?P:P(ye.current);de.current=window.setTimeout(()=>Xe(G),ie)}},mt=(G,ie)=>{var me;G.preventDefault(),(me=_e.current)==null||me.focus(),Be(ie),pe&&(de.current=window.setTimeout(()=>Xe(ie),j))},Ft=()=>{de.current&&window.clearTimeout(de.current),de.current=null,ye.current=0},bt=x.jsxs("div",{...W("controls"),children:[x.jsx(Yi,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:D||typeof Y=="number"&&d!==void 0&&Y>=d,mod:{direction:"up"},onMouseDown:G=>G.preventDefault(),onPointerDown:G=>{mt(G,!0)},onPointerUp:Ft,onPointerLeave:Ft,children:x.jsx(GQ,{direction:"up"})}),x.jsx(Yi,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:D||typeof Y=="number"&&h!==void 0&&Y<=h,mod:{direction:"down"},onMouseDown:G=>G.preventDefault(),onPointerDown:G=>{mt(G,!1)},onPointerUp:Ft,onPointerLeave:Ft,children:x.jsx(GQ,{direction:"down"})})]});return x.jsx(Il,{component:g4e,allowNegative:O,className:Ai(b4.root,r),size:M,...U,readOnly:R,disabled:D,value:Y,getInputRef:cs(t,_e),onValueChange:Ce,rightSection:m||R?g:g||bt,classNames:B,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?_:0,onKeyDown:rt,onKeyDownCapture:Pe,rightSectionPointerEvents:I??(D?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${M||"sm"})`,allowLeadingZeros:z,onBlur:G=>{if(b==null||b(G),v==="blur"&&typeof Y=="number"&&cf(Y,h,d)!==Y&&re(cf(Y,h,d)),$&&typeof Y=="string"){const ie=Y.replace(/^0+/,""),me=parseFloat(ie);re(Number.isNaN(me)?ie:me)}},isAllowed:G=>v==="strict"?y?y(G)&&YQ(G.floatValue,h,d):YQ(G.floatValue,h,d):y?y(G):!0})});Pj.classes={...Il.classes,...b4};Pj.displayName="@mantine/core/NumberInput";const[w4e,Wde]=ks("Progress.Root component was not found in tree");var RT={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const x4e={},Oj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ProgressLabel",x4e,e),u=Wde();return x.jsx(we,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});Oj.classes=RT;Oj.displayName="@mantine/core/ProgressLabel";const S4e={},T4e=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":cn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Kr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),cP=Ve((e,t)=>{const n=Ie("ProgressRoot",S4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Et({name:"Progress",classes:RT,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:T4e});return x.jsx(w4e,{value:{getStyles:d,autoContrast:l},children:x.jsx(we,{ref:t,...d("root"),...f})})});cP.classes=RT;cP.displayName="@mantine/core/ProgressRoot";const C4e={withAria:!0},fP=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ie("ProgressSection",C4e,e),p=Wde(),m=Rs(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return x.jsx(we,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Gr(l,m),"--progress-label-color":o_(p.autoContrast,m)?my({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});fP.classes=RT;fP.displayName="@mantine/core/ProgressSection";const A4e={},m_=Ve((e,t)=>{const n=Ie("Progress",A4e,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Nh({classNames:i,styles:s,props:n});return x.jsx(cP,{ref:t,classNames:d,styles:h,vars:o,...f,children:x.jsx(fP,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});m_.classes=RT;m_.displayName="@mantine/core/Progress";m_.Section=fP;m_.Root=cP;m_.Label=Oj;const[D4e,Gde]=s_(),[I4e,N4e]=s_();var Yde={card:"m_9dc8ae12"};const k4e={withBorder:!0},R4e=(e,{radius:t})=>({card:{"--card-radius":Kr(t)}}),Mj=Ve((e,t)=>{const n=Ie("RadioCard",k4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Et({name:"RadioCard",classes:Yde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:R4e,rootSelector:"card"}),{dir:v}=kh(),b=Gde(),E=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,_=p||(b==null?void 0:b.name),w=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${_||"__mantine"}"]`)),A=C.findIndex(O=>O===S.target),D=A+1>=C.length?0:A+1,I=A-1<0?C.length-1:A-1;S.nativeEvent.code==="ArrowDown"&&(C[D].focus(),C[D].click()),S.nativeEvent.code==="ArrowUp"&&(C[I].focus(),C[I].click()),S.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?I:D].focus(),C[v==="ltr"?I:D].click()),S.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?D:I].focus(),C[v==="ltr"?D:I].click())}};return x.jsx(I4e,{value:{checked:E},children:x.jsx(Yi,{ref:t,mod:[{"with-border":f,checked:E},c],...y("card"),...g,role:"radio","aria-checked":E,name:_,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:w})})});Mj.displayName="@mantine/core/RadioCard";Mj.classes=Yde;const P4e={},dP=Ve((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ie("RadioGroup",P4e,e),f=ga(u),[d,h]=Is({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return x.jsx(D4e,{value:{value:d,onChange:p,size:s,name:f},children:x.jsx(Yr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:x.jsx(dj,{role:"radiogroup",children:a})})})});dP.classes=Yr.Wrapper.classes;dP.displayName="@mantine/core/RadioGroup";function Kde({size:e,style:t,...n}){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ne(e),height:Ne(e),...t},"aria-hidden":!0,...n,children:x.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Xde={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const O4e={icon:Kde},M4e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":cn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Kr(t),"--radio-color":s==="outline"?u:Gr(n,e),"--radio-icon-size":cn(r,"radio-icon-size"),"--radio-icon-color":i?Gr(i,e):o_(o,e)?my({color:n,theme:e,autoContrast:o}):void 0}}},$j=Ve((e,t)=>{const n=Ie("RadioIndicator",O4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,E=Et({name:"RadioIndicator",classes:Xde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:M4e,rootSelector:"indicator"}),_=N4e(),w=typeof p=="boolean"?p:(_==null?void 0:_.checked)||!1;return x.jsx(we,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:w,disabled:y},m],...v,children:x.jsx(b,{...E("icon")})})});$j.displayName="@mantine/core/RadioIndicator";$j.classes=Xde;var Qde={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const $4e={labelPosition:"right"},F4e=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zf({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":cn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Kr(n),"--radio-color":s==="outline"?u:Gr(r,e),"--radio-icon-color":i?Gr(i,e):o_(o,e)?my({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":cn(t,"radio-icon-size")}}},ph=Ve((e,t)=>{const n=Ie("Radio",$4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:E=Kde,rootRef:_,iconColor:w,onChange:S,mod:C,...A}=n,D=Et({name:"Radio",classes:Qde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:F4e}),I=Gde(),O=(I==null?void 0:I.size)??c,R=n.size?c:O,{styleProps:M,rest:F}=gy(A),P=ga(l),j=I?{checked:I.value===F.value,name:F.name??I.name,onChange:z=>{I.onChange(z),S==null||S(z)}}:{};return x.jsx(HR,{...D("root"),__staticSelector:"Radio",__stylesApiProps:n,id:P,size:R,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":j.checked||void 0,variant:y,ref:_,mod:C,...M,...b,children:x.jsxs(we,{...D("inner"),mod:{"label-position":d},children:[x.jsx(we,{...D("radio",{focusable:!0,variant:y}),onChange:S,...F,...j,component:"input",mod:{error:!!p},ref:t,id:P,disabled:v,type:"radio"}),x.jsx(E,{...D("icon"),"aria-hidden":!0})]})})});ph.classes=Qde;ph.displayName="@mantine/core/Radio";ph.Group=dP;ph.Card=Mj;ph.Indicator=$j;const L4e={duration:100,transition:"fade"};function B4e(e,t){return{...L4e,...t,...e}}function j4e({offset:e,position:t}){const[n,r]=k.useState(!1),i=k.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=R7({placement:t,middleware:[D7({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=k.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return k.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Yd(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var hP={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const z4e={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Cl("popover")},U4e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Kr(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Fj=Ve((e,t)=>{const n=Ie("TooltipFloating",z4e,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:E,portalProps:_,...w}=n,S=Rs(),C=Et({name:"TooltipFloating",props:n,classes:hP,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:U4e}),{handleMouseMove:A,x:D,y:I,opened:O,boundaryRef:R,floating:M,setOpened:F}=j4e({offset:p,position:m});if(!jm(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const P=cs(R,r.ref,t),j=V=>{var $,U;(U=($=r.props).onMouseEnter)==null||U.call($,V),A(V),F(!0)},z=V=>{var $,U;(U=($=r.props).onMouseLeave)==null||U.call($,V),F(!1)};return x.jsxs(x.Fragment,{children:[x.jsx(TT,{..._,withinPortal:s,children:x.jsx(we,{...w,...C("tooltip",{style:{...h7(o,S),zIndex:y,display:!v&&O?"block":"none",top:(I&&Math.round(I))??"",left:(D&&Math.round(D))??""}}),variant:b,ref:M,mod:{multiline:g},children:h})}),k.cloneElement(r,{...r.props,[i]:P,onMouseEnter:j,onMouseLeave:z})]})});Fj.classes=hP;Fj.displayName="@mantine/core/TooltipFloating";const Jde=k.createContext(!1),V4e=Jde.Provider,H4e=()=>k.useContext(Jde),q4e={openDelay:0,closeDelay:0};function Zde(e){const{openDelay:t,closeDelay:n,children:r}=Ie("TooltipGroup",q4e,e);return x.jsx(V4e,{value:!0,children:x.jsx(GMe,{delay:{open:t,close:n},children:r})})}Zde.displayName="@mantine/core/TooltipGroup";function W4e(e){var w,S,C;const[t,n]=k.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=H4e(),o=ga(),{delay:a,currentId:u,setCurrentId:l}=Bfe(),c=k.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=R7({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Ofe(e.offset),D7({padding:8}),m4(),Mfe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[g4()]:[]]}),{getReferenceProps:b,getFloatingProps:E}=e$e([WMe(h,{enabled:(w=e.events)==null?void 0:w.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),ZMe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),n$e(h,{role:"tooltip"}),QMe(h,{enabled:typeof e.opened>"u"}),YMe(h,{id:o})]);Wfe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),ch(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const _=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:b,isGroupPhase:_,opened:i,placement:g}}const KQ={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Cl("popover"),positionDependencies:[]},G4e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Kr(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Wi=Ve((e,t)=>{const n=Ie("Tooltip",KQ,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:E,arrowOffset:_,arrowRadius:w,arrowPosition:S,offset:C,transitionProps:A,multiline:D,events:I,zIndex:O,disabled:R,positionDependencies:M,onClick:F,onMouseEnter:P,onMouseLeave:j,inline:z,variant:V,keepMounted:$,vars:U,portalProps:W,mod:B,floatingStrategy:q,...Y}=Ie("Tooltip",KQ,n),{dir:re}=kh(),pe=k.useRef(null),_e=W4e({position:jfe(re,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:I,arrowRef:pe,arrowOffset:_,offset:typeof C=="number"?C+(b?E/2:0):C,positionDependencies:[...M,r],inline:z,strategy:q}),de=Et({name:"Tooltip",props:n,classes:hP,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:G4e});if(!jm(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=cs(_e.reference,r.ref,t),Ce=B4e(A,{duration:100,transition:"fade"});return x.jsxs(x.Fragment,{children:[x.jsx(TT,{...W,withinPortal:f,children:x.jsx(Ph,{...Ce,keepMounted:$,mounted:!R&&!!_e.opened,duration:_e.isGroupPhase?10:Ce.duration,children:ve=>x.jsxs(we,{...Y,variant:V,mod:[{multiline:D},B],..._e.getFloatingProps({ref:_e.floating,className:de("tooltip").className,style:{...de("tooltip").style,...ve,zIndex:O,top:_e.y??0,left:_e.x??0}}),children:[o,x.jsx(P7,{ref:pe,arrowX:_e.arrowX,arrowY:_e.arrowY,visible:b,position:_e.placement,arrowSize:E,arrowOffset:_,arrowRadius:w,arrowPosition:S,...de("arrow")})]})})}),k.cloneElement(r,_e.getReferenceProps({onClick:F,onMouseEnter:P,onMouseLeave:j,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Ai(v,r.props.className),...r.props}))]})});Wi.classes=hP;Wi.displayName="@mantine/core/Tooltip";Wi.Floating=Fj;Wi.Group=Zde;const Y4e={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},PT=Ve((e,t)=>{const n=Ie("Select",Y4e,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:E,readOnly:_,disabled:w,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:D,size:I,searchable:O,rightSection:R,checkIconPosition:M,withCheckIcon:F,nothingFoundMessage:P,name:j,form:z,searchValue:V,defaultSearchValue:$,onSearchChange:U,allowDeselect:W,error:B,rightSectionPointerEvents:q,id:Y,clearable:re,clearButtonProps:pe,hiddenInputProps:_e,renderOption:de,onClear:ye,autoComplete:Ce,scrollAreaProps:ve,...qe}=n,He=k.useMemo(()=>ude(m),[m]),ht=k.useMemo(()=>Z7(He),[He]),rt=ga(Y),[Pe,Be,Xe]=Is({value:g,defaultValue:y,finalValue:null,onChange:p}),mt=typeof Pe=="string"?ht[Pe]:void 0,[Ft,bt]=Is({value:V,defaultValue:$,finalValue:mt?mt.label:"",onChange:U}),G=cj({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),G.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),G.resetSelectedOption()}}),{resolvedClassNames:ie,resolvedStyles:me}=Nh({props:n,styles:i,classNames:r});k.useEffect(()=>{v&&G.selectFirstOption()},[v,Pe]),k.useEffect(()=>{g===null&&bt(""),typeof g=="string"&&mt&&bt(mt.label)},[g,mt]);const J=re&&!!Pe&&!w&&!_&&x.jsx(Bn.ClearButton,{size:I,...pe,onClear:()=>{Be(null,null),bt(""),ye==null||ye()}});return x.jsxs(x.Fragment,{children:[x.jsxs(Bn,{store:G,__staticSelector:"Select",classNames:ie,styles:me,unstyled:s,readOnly:_,onOptionSubmit:se=>{b==null||b(se);const ce=W&&ht[se].value===Pe?null:ht[se],Se=ce?ce.value:null;Be(Se,ce),!Xe&&bt(typeof Se=="string"&&(ce==null?void 0:ce.label)||""),G.closeDropdown()},size:I,...E,children:[x.jsx(Bn.Target,{targetType:O?"input":"button",autoComplete:Ce,children:x.jsx(Il,{id:rt,ref:t,rightSection:R||J||x.jsx(Bn.Chevron,{size:I,error:B,unstyled:s}),rightSectionPointerEvents:q||(J?"all":"none"),...qe,size:I,__staticSelector:"Select",disabled:w,readOnly:_||!O,value:Ft,onChange:se=>{bt(se.currentTarget.value),G.openDropdown(),v&&G.selectFirstOption()},onFocus:se=>{O&&G.openDropdown(),f==null||f(se)},onBlur:se=>{var ce;O&&G.closeDropdown(),bt(Pe!=null&&((ce=ht[Pe])==null?void 0:ce.label)||""),d==null||d(se)},onClick:se=>{O?G.openDropdown():G.toggleDropdown(),h==null||h(se)},classNames:ie,styles:me,unstyled:s,pointer:!O,error:B})}),x.jsx(Cde,{data:He,hidden:_||w,filter:S,search:Ft,limit:C,hiddenWhenEmpty:!O||!P,withScrollArea:A,maxDropdownHeight:D,filterOptions:O&&(mt==null?void 0:mt.label)!==Ft,value:Pe,checkIconPosition:M,withCheckIcon:F,nothingFoundMessage:P,unstyled:s,labelId:qe.label?`${rt}-label`:void 0,"aria-label":qe.label?void 0:qe["aria-label"],renderOption:de,scrollAreaProps:ve})]}),x.jsx(Bn.HiddenInput,{value:Pe,name:j,form:z,disabled:w,..._e})]})});PT.classes={...Il.classes,...Bn.classes};PT.displayName="@mantine/core/Select";const[K4e,pP]=ks("SliderProvider was not found in tree"),ehe=k.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=pP();return x.jsx(we,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});ehe.displayName="@mantine/core/SliderRoot";const the=k.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=pP(),[b,E]=k.useState(!1),_=l||s||b||h&&p;return x.jsxs(we,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{E(!0),typeof f=="function"&&f()},onBlur:()=>{E(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:w=>w.stopPropagation(),children:[m,x.jsx(Ph,{mounted:i!=null&&!!_,transition:"fade",duration:0,...u,children:w=>x.jsx("div",{...v("label",{style:w}),children:i})})]})});the.displayName="@mantine/core/SliderThumb";function nhe({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function X4e({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function rhe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=pP();if(!e)return null;const u=e.map((l,c)=>k.createElement(we,{...a("markWrapper"),__vars:{"--mark-offset":`${nhe({value:l.value,min:t,max:n})}%`},key:c},x.jsx(we,{...a("mark"),mod:{filled:X4e({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&x.jsx("div",{...a("markLabel"),children:l.label})));return x.jsx("div",{children:u})}rhe.displayName="@mantine/core/SliderMarks";function ihe({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=pP();return x.jsx(x.Fragment,{children:x.jsx(we,{...u("trackContainer"),mod:{disabled:r},...o,children:x.jsxs(we,{...u("track"),mod:{inverted:s,disabled:r},children:[x.jsx(we,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,x.jsx(rhe,{...a,offset:i,disabled:r,inverted:s})]})})})}ihe.displayName="@mantine/core/SliderTrack";function Q4e({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function OC(e,t){return parseFloat(e.toFixed(t))}function J4e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var she={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const Z4e={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},e5e=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":cn(t,"slider-size"),"--slider-color":n?Gr(n,e):void 0,"--slider-radius":i===void 0?void 0:Kr(i),"--slider-thumb-size":r!==void 0?Ne(r):"calc(var(--slider-size) * 2)"}}),Lj=Ve((e,t)=>{const n=Ie("Slider",Z4e,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:E,thumbChildren:_,disabled:w,unstyled:S,scale:C,inverted:A,className:D,style:I,vars:O,hiddenInputProps:R,...M}=n,F=Et({name:"Slider",props:n,classes:she,classNames:r,className:D,styles:i,style:I,vars:O,varsResolver:e5e,unstyled:S}),{dir:P}=kh(),[j,z]=k.useState(!1),[V,$]=Is({value:typeof s=="number"?cf(s,l,c):s,defaultValue:typeof h=="number"?cf(h,l,c):h,finalValue:cf(0,l,c),onChange:o}),U=k.useRef(V),W=k.useRef(),B=k.useRef(),q=nhe({value:V,min:l,max:c}),Y=C(V),re=typeof g=="function"?g(Y):g,pe=d??J4e(f),_e=k.useCallback(({x:ve})=>{if(!w){const qe=Q4e({value:ve,min:l,max:c,step:f,precision:pe});$(qe),U.current=qe}},[w,l,c,f,pe,$]),{ref:de,active:ye}=e3e(_e,{onScrubEnd:()=>a==null?void 0:a(U.current)},P),Ce=ve=>{var qe,He,ht,rt,Pe,Be;if(!w)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(qe=B.current)==null||qe.focus();const Xe=OC(Math.min(Math.max(V+f,l),c),pe);$(Xe),a==null||a(Xe);break}case"ArrowRight":{ve.preventDefault(),(He=B.current)==null||He.focus();const Xe=OC(Math.min(Math.max(P==="rtl"?V-f:V+f,l),c),pe);$(Xe),a==null||a(Xe);break}case"ArrowDown":{ve.preventDefault(),(ht=B.current)==null||ht.focus();const Xe=OC(Math.min(Math.max(V-f,l),c),pe);$(Xe),a==null||a(Xe);break}case"ArrowLeft":{ve.preventDefault(),(rt=B.current)==null||rt.focus();const Xe=OC(Math.min(Math.max(P==="rtl"?V+f:V-f,l),c),pe);$(Xe),a==null||a(Xe);break}case"Home":{ve.preventDefault(),(Pe=B.current)==null||Pe.focus(),$(l),a==null||a(l);break}case"End":{ve.preventDefault(),(Be=B.current)==null||Be.focus(),$(c),a==null||a(c);break}}};return x.jsx(K4e,{value:{getStyles:F},children:x.jsxs(ehe,{...M,ref:cs(t,W),onKeyDownCapture:Ce,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:w,children:[x.jsx(ihe,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:Y,disabled:w,containerProps:{ref:de,onMouseEnter:E?()=>z(!0):void 0,onMouseLeave:E?()=>z(!1):void 0},children:x.jsx(the,{max:c,min:l,value:Y,position:q,dragging:ye,label:re,ref:B,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:E,isHovered:j,disabled:w,children:_})}),x.jsx("input",{type:"hidden",name:p,value:Y,...R})]})})});Lj.classes=she;Lj.displayName="@mantine/core/Slider";const t5e={},dl=Ve((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ie("Space",t5e,e);return x.jsx(we,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});dl.displayName="@mantine/core/Space";var ohe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const n5e={maxHeight:100,initialState:!1},r5e=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),Bj=Ve((e,t)=>{const n=Ie("Spoiler",n5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Et({name:"Spoiler",classes:ohe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:r5e}),b=ga(g),E=`${b}-region`,[_,w]=k.useState(l),{ref:S,height:C}=n3e(),A=_?f:d,D=A!==null&&c<C;return x.jsxs(we,{...v("root"),id:b,ref:t,"data-has-spoiler":D||void 0,...y,children:[D&&x.jsx(c_,{component:"button",type:"button",ref:p,onClick:()=>w(I=>!I),"aria-expanded":_,"aria-controls":E,...v("control"),children:A}),x.jsx("div",{...v("content",{style:{maxHeight:_?C?Ne(C):void 0:Ne(c)}}),"data-reduce-motion":!0,role:"region",id:E,children:x.jsx("div",{ref:S,children:h})})]})});Bj.classes=ohe;Bj.displayName="@mantine/core/Spoiler";var ahe={root:"m_6d731127"};const i5e={gap:"md",align:"stretch",justify:"flex-start"},s5e=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Nu(t),"--stack-align":n,"--stack-justify":r}}),kc=Ve((e,t)=>{const n=Ie("Stack",i5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Et({name:"Stack",props:n,classes:ahe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:s5e});return x.jsx(we,{ref:t,...p("root"),variant:d,...h})});kc.classes=ahe;kc.displayName="@mantine/core/Stack";const uhe=k.createContext(null),o5e=uhe.Provider,a5e=()=>k.useContext(uhe),u5e={},jj=Ve((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ie("SwitchGroup",u5e,e),[c,f]=Is({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return x.jsx(o5e,{value:{value:c,onChange:d,size:s},children:x.jsx(Yr.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:x.jsx(dj,{role:"group",children:a})})})});jj.classes=Yr.Wrapper.classes;jj.displayName="@mantine/core/SwitchGroup";var lhe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const l5e={labelPosition:"right"},c5e=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Kr(t),"--switch-height":cn(r,"switch-height"),"--switch-width":cn(r,"switch-width"),"--switch-thumb-size":cn(r,"switch-thumb-size"),"--switch-label-font-size":cn(r,"switch-label-font-size"),"--switch-track-label-padding":cn(r,"switch-track-label-padding"),"--switch-color":n?Gr(n,e):void 0}}),wv=Ve((e,t)=>{const n=Ie("Switch",l5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:E,onChange:_,labelPosition:w,description:S,error:C,disabled:A,variant:D,rootRef:I,mod:O,...R}=n,M=a5e(),F=p||(M==null?void 0:M.size),P=Et({name:"Switch",props:n,classes:lhe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:c5e}),{styleProps:j,rest:z}=gy(R),V=ga(h),$=M?{checked:M.value.includes(z.value),onChange:M.onChange}:{},[U,W]=Is({value:$.checked??b,defaultValue:E,finalValue:!1});return x.jsxs(HR,{...P("root"),__staticSelector:"Switch",__stylesApiProps:n,id:V,size:F,labelPosition:w,label:c,description:S,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":$.checked||void 0,variant:D,ref:I,mod:O,...j,...g,children:[x.jsx("input",{...z,disabled:A,checked:U,onChange:B=>{var q;M?(q=$.onChange)==null||q.call($,B):_==null||_(B),W(B.currentTarget.checked)},id:V,ref:t,type:"checkbox",role:"switch",...P("input")}),x.jsxs(we,{"aria-hidden":"true",mod:{error:C,"label-position":w},...P("track"),children:[x.jsx(we,{component:"span",mod:"reduce-motion",...P("thumb"),children:v}),x.jsx("span",{...P("trackLabel"),children:U?d:f})]})]})});wv.classes={...lhe,...mde};wv.displayName="@mantine/core/Switch";wv.Group=jj;const[f5e,d5e]=ks("Table component was not found in the tree");var OT={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function h5e(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Ey(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Ve((i,s)=>{const o=Ie(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=d5e();return x.jsx(we,{component:e,ref:s,...h5e(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=OT,r}const _4=Ey("th",{columnBorder:!0}),che=Ey("td",{columnBorder:!0}),hD=Ey("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),fhe=Ey("thead",{stickyHeader:!0}),dhe=Ey("tbody"),hhe=Ey("tfoot"),phe=Ey("caption",{captionSide:!0});function zj({data:e}){return x.jsxs(x.Fragment,{children:[e.caption&&x.jsx(phe,{children:e.caption}),e.head&&x.jsx(fhe,{children:x.jsx(hD,{children:e.head.map((t,n)=>x.jsx(_4,{children:t},n))})}),e.body&&x.jsx(dhe,{children:e.body.map((t,n)=>x.jsx(hD,{children:t.map((r,i)=>x.jsx(che,{children:r},i))},n))}),e.foot&&x.jsx(hhe,{children:x.jsx(hD,{children:e.foot.map((t,n)=>x.jsx(_4,{children:t},n))})})]})}zj.displayName="@mantine/core/TableDataRenderer";const p5e={type:"scrollarea"},m5e=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ne(t),"--table-overflow":n==="native"?"auto":void 0}}),Uj=Ve((e,t)=>{const n=Ie("TableScrollContainer",p5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Et({name:"TableScrollContainer",classes:OT,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:m5e,rootSelector:"scrollContainer"});return x.jsx(we,{component:f==="scrollarea"?yy:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:x.jsx("div",{...h("scrollContainerInner"),children:l})})});Uj.classes=OT;Uj.displayName="@mantine/core/TableScrollContainer";const g5e={withRowBorders:!0,verticalSpacing:7},y5e=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Nu(r),"--table-vertical-spacing":Nu(i),"--table-border-color":s?Gr(s,e):void 0,"--table-striped-color":u&&o?Gr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Gr(a,e):void 0,"--table-sticky-header-offset":f?Ne(c):void 0}}),En=Ve((e,t)=>{const n=Ie("Table",g5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:E,variant:_,data:w,children:S,stickyHeader:C,stickyHeaderOffset:A,mod:D,...I}=n,O=Et({name:"Table",props:n,className:i,style:s,classes:OT,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:y5e});return x.jsx(f5e,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:x.jsx(we,{component:"table",variant:_,ref:t,mod:[{"data-with-table-border":v},D],...O("table"),...I,children:S||!!w&&x.jsx(zj,{data:w})})})});En.classes=OT;En.displayName="@mantine/core/Table";En.Td=che;En.Th=_4;En.Tr=hD;En.Thead=fhe;En.Tbody=dhe;En.Tfoot=hhe;En.Caption=phe;En.ScrollContainer=Uj;En.DataRenderer=zj;const[v5e,Vj]=ks("Tabs component was not found in the tree");var MT={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const b5e={},Hj=Ve((e,t)=>{const n=Ie("TabsList",b5e,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=Vj();return x.jsx(we,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});Hj.classes=MT;Hj.displayName="@mantine/core/TabsList";const _5e={},qj=Ve((e,t)=>{const n=Ie("TabsPanel",_5e,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=Vj(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return x.jsx(we,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});qj.classes=MT;qj.displayName="@mantine/core/TabsPanel";const E5e={},Wj=Ve((e,t)=>{const n=Ie("TabsTab",E5e,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Rs(),{dir:b}=kh(),E=Vj(),_=a===E.value,w=C=>{E.onChange(E.allowTabDeactivation&&a===E.value?null:a),u==null||u(C)},S={classNames:h,styles:p,props:n};return x.jsxs(Yi,{...y,...E.getStyles("tab",{className:r,style:d,variant:E.variant,...S}),disabled:c,unstyled:E.unstyled,variant:E.variant,mod:[{active:_,disabled:c,orientation:E.orientation,inverted:E.inverted,placement:E.orientation==="vertical"&&E.placement},g],ref:t,role:"tab",id:E.getTabId(a),"aria-selected":_,tabIndex:_||E.value===null?0:-1,"aria-controls":E.getPanelId(a),onClick:w,__vars:{"--tabs-color":f?Gr(f,v):void 0},onKeyDown:r7({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:E.activateTabWithKeyboard,loop:E.loop,orientation:E.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&x.jsx("span",{...E.getStyles("tabSection",S),"data-position":"left",children:o}),i&&x.jsx("span",{...E.getStyles("tabLabel",S),children:i}),s&&x.jsx("span",{...E.getStyles("tabSection",S),"data-position":"right",children:s})]})});Wj.classes=MT;Wj.displayName="@mantine/core/TabsTab";const XQ="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",w5e={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},x5e=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Kr(t),"--tabs-color":Gr(n,e),"--tabs-text-color":o_(r,e)?my({color:n,theme:e,autoContrast:r}):void 0}}),Ri=Ve((e,t)=>{const n=Ie("Tabs",w5e,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:E,className:_,style:w,vars:S,autoContrast:C,mod:A,...D}=n,I=ga(l),[O,R]=Is({value:i,defaultValue:r,finalValue:null,onChange:s}),M=Et({name:"Tabs",props:n,classes:MT,className:_,style:w,classNames:v,styles:b,unstyled:E,vars:S,varsResolver:x5e});return x.jsx(v5e,{value:{placement:g,value:O,orientation:o,id:I,loop:u,activateTabWithKeyboard:c,getTabId:PI(`${I}-tab`,XQ),getPanelId:PI(`${I}-panel`,XQ),onChange:R,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:E,getStyles:M},children:x.jsx(we,{ref:t,id:I,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...M("root"),...D,children:a})})});Ri.classes=MT;Ri.displayName="@mantine/core/Tabs";Ri.Tab=Wj;Ri.Panel=qj;Ri.List=Hj;const S5e={},f0=Ve((e,t)=>{const n=Ie("TextInput",S5e,e);return x.jsx(Il,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});f0.classes=Il.classes;f0.displayName="@mantine/core/TextInput";const T5e=["h1","h2","h3","h4","h5","h6"];function C5e(e,t){const n=t!==void 0?t:`h${e}`;return T5e.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ne(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var mhe={root:"m_8a5d1357"};const A5e={order:1},D5e=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=C5e(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ci=Ve((e,t)=>{const n=Ie("Title",A5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Et({name:"Title",props:n,classes:mhe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:D5e});return[1,2,3,4,5,6].includes(u)?x.jsx(we,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ci.classes=mhe;ci.displayName="@mantine/core/Title";const ghe=k.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Qi=()=>k.useContext(ghe);function I5e({children:e}){const[t,n]=xi.useState(void 0),r=xi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return x.jsx(ghe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dS(){return dS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dS.apply(this,arguments)}var Ap;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ap||(Ap={}));const QQ="popstate";function N5e(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return E4("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vhe(i)}return R5e(t,n,null,e)}function $i(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yhe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function k5e(){return Math.random().toString(36).substr(2,8)}function JQ(e,t){return{usr:e.state,key:e.key,idx:t}}function E4(e,t,n,r){return n===void 0&&(n=null),dS({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?g_(t):t,{state:n,key:t&&t.key||r||k5e()})}function vhe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function g_(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function R5e(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ap.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(dS({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Ap.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Ap.Push;let v=E4(m.location,g,y);l=c()+1;let b=JQ(v,l),E=m.createHref(v);try{o.pushState(b,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Ap.Replace;let v=E4(m.location,g,y);l=c();let b=JQ(v,l),E=m.createHref(v);o.replaceState(b,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:vhe(g);return v=v.replace(/ $/,"%20"),$i(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(QQ,f),u=g,()=>{i.removeEventListener(QQ,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var ZQ;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ZQ||(ZQ={}));function P5e(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?g_(t):t,i=Ehe(r.pathname||"/",n);if(i==null)return null;let s=bhe(e);O5e(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=W5e(i);o=V5e(s[a],u)}return o}function bhe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&($i(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Yp([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&($i(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),bhe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:z5e(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of _he(s.path))i(s,o,u)}),t}function _he(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=_he(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function O5e(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:U5e(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const M5e=/^:[\w-]+$/,$5e=3,F5e=2,L5e=1,B5e=10,j5e=-2,eJ=e=>e==="*";function z5e(e,t){let n=e.split("/"),r=n.length;return n.some(eJ)&&(r+=j5e),t&&(r+=F5e),n.filter(i=>!eJ(i)).reduce((i,s)=>i+(M5e.test(s)?$5e:s===""?L5e:B5e),r)}function U5e(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function V5e(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=H5e({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Yp([i,c.pathname]),pathnameBase:X5e(Yp([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Yp([i,c.pathnameBase]))}return s}function H5e(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=q5e(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function q5e(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),yhe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function W5e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yhe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ehe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function G5e(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?g_(e):e;return{pathname:n?n.startsWith("/")?n:Y5e(n,t):t,search:Q5e(r),hash:J5e(i)}}function Y5e(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function F$(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function K5e(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Gj(e,t){let n=K5e(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yj(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=g_(e):(i=dS({},e),$i(!i.pathname||!i.pathname.includes("?"),F$("?","pathname","search",i)),$i(!i.pathname||!i.pathname.includes("#"),F$("#","pathname","hash",i)),$i(!i.search||!i.search.includes("#"),F$("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=G5e(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Yp=e=>e.join("/").replace(/\/\/+/g,"/"),X5e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q5e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,J5e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Z5e(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const whe=["post","put","patch","delete"];new Set(whe);const e8e=["get",...whe];new Set(e8e);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hS.apply(this,arguments)}const Kj=k.createContext(null),t8e=k.createContext(null),wy=k.createContext(null),mP=k.createContext(null),Vf=k.createContext({outlet:null,matches:[],isDataRoute:!1}),xhe=k.createContext(null);function She(e,t){let{relative:n}={};y_()||$i(!1);let{basename:r,navigator:i}=k.useContext(wy),{hash:s,pathname:o,search:a}=s8e(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Yp([r,o])),i.createHref({pathname:u,search:a,hash:s})}function y_(){return k.useContext(mP)!=null}function xy(){return y_()||$i(!1),k.useContext(mP).location}function The(e){k.useContext(wy).static||k.useLayoutEffect(e)}function Fh(){let{isDataRoute:e}=k.useContext(Vf);return e?g8e():n8e()}function n8e(){y_()||$i(!1);let e=k.useContext(Kj),{basename:t,future:n,navigator:r}=k.useContext(wy),{matches:i}=k.useContext(Vf),{pathname:s}=xy(),o=JSON.stringify(Gj(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return The(()=>{a.current=!0}),k.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=Yj(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Yp([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const r8e=k.createContext(null);function i8e(e){let t=k.useContext(Vf).outlet;return t&&k.createElement(r8e.Provider,{value:e},t)}function N0(){let{matches:e}=k.useContext(Vf),t=e[e.length-1];return t?t.params:{}}function s8e(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext(wy),{matches:i}=k.useContext(Vf),{pathname:s}=xy(),o=JSON.stringify(Gj(i,r.v7_relativeSplatPath));return k.useMemo(()=>Yj(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Che(e,t){return o8e(e,t)}function o8e(e,t,n,r){y_()||$i(!1);let{navigator:i}=k.useContext(wy),{matches:s}=k.useContext(Vf),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=xy(),c;if(t){var f;let g=typeof t=="string"?g_(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||$i(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=P5e(e,{pathname:h}),m=f8e(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Yp([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:Yp([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?k.createElement(mP.Provider,{value:{location:hS({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ap.Pop}},m):m}function a8e(){let e=m8e(),t=Z5e(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,null)}const u8e=k.createElement(a8e,null);class l8e extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(Vf.Provider,{value:this.props.routeContext},k.createElement(xhe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c8e(e){let{routeContext:t,match:n,children:r}=e,i=k.useContext(Kj);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Vf.Provider,{value:t},r)}function f8e(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||$i(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||u8e,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=k.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,k.createElement(c8e,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?k.createElement(l8e,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Ahe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ahe||{}),UI=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(UI||{});function d8e(e){let t=k.useContext(Kj);return t||$i(!1),t}function h8e(e){let t=k.useContext(t8e);return t||$i(!1),t}function p8e(e){let t=k.useContext(Vf);return t||$i(!1),t}function Dhe(e){let t=p8e(),n=t.matches[t.matches.length-1];return n.route.id||$i(!1),n.route.id}function m8e(){var e;let t=k.useContext(xhe),n=h8e(UI.UseRouteError),r=Dhe(UI.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function g8e(){let{router:e}=d8e(Ahe.UseNavigateStable),t=Dhe(UI.UseNavigateStable),n=k.useRef(!1);return The(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,hS({fromRouteId:t},s)))},[e,t])}function Xj(e){let{to:t,replace:n,state:r,relative:i}=e;y_()||$i(!1);let{future:s,static:o}=k.useContext(wy),{matches:a}=k.useContext(Vf),{pathname:u}=xy(),l=Fh(),c=Yj(t,Gj(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return k.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function y8e(e){return i8e(e.context)}function xd(e){$i(!1)}function v8e(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ap.Pop,navigator:s,static:o=!1,future:a}=e;y_()&&$i(!1);let u=t.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:u,navigator:s,static:o,future:hS({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=g_(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=k.useMemo(()=>{let g=Ehe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:k.createElement(wy.Provider,{value:l},k.createElement(mP.Provider,{children:n,value:m}))}function b8e(e){let{children:t,location:n}=e;return Che(w4(t),n)}new Promise(()=>{});function w4(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let s=[...t,i];if(r.type===k.Fragment){n.push.apply(n,w4(r.props.children,s));return}r.type!==xd&&$i(!1),!r.props.index||!r.props.children||$i(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=w4(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function x4(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function _8e(e,t){let n=x4(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const E8e="6";try{window.__reactRouterVersion=E8e}catch{}const w8e="startTransition",tJ=aI[w8e];function x8e(e){let{basename:t,children:n,future:r,window:i}=e,s=k.useRef();s.current==null&&(s.current=N5e({window:i,v5Compat:!0}));let o=s.current,[a,u]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=k.useCallback(f=>{l&&tJ?tJ(()=>u(f)):u(f)},[u,l]);return k.useLayoutEffect(()=>o.listen(c),[o,c]),k.createElement(v8e,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var nJ;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nJ||(nJ={}));var rJ;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(rJ||(rJ={}));function Qj(e){let t=k.useRef(x4(e)),n=k.useRef(!1),r=xy(),i=k.useMemo(()=>_8e(r.search,n.current?null:t.current),[r.search]),s=Fh(),o=k.useCallback((a,u)=>{const l=x4(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const Jj=k.createContext(null);Jj.displayName="@mantine/modals/ModalsContext";function S8e(){const e=k.useContext(Jj);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function T8e({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=S8e(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return x.jsxs(x.Fragment,{children:[l&&x.jsx(we,{mb:"md",children:l}),x.jsxs(ro,{justify:"flex-end",...o,children:[x.jsx(Ln,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),x.jsx(Ln,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[C8e,gP]=i3e("mantine-modals");gP("openModal");gP("closeModal");gP("closeAllModals");const S4=gP("openConfirmModal");function iJ(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function A8e(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;iJ(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{iJ(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function D8e(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function I8e({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=k.useReducer(A8e,{modals:[],current:null}),o=k.useRef(i);o.current=i;const a=k.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=k.useCallback(({modalId:g,...y})=>{const v=g||nx();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=k.useCallback(({modalId:g,...y})=>{const v=g||nx();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=k.useCallback((g,{modalId:y,...v})=>{const b=y||nx();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=k.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);C8e({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:x.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=D8e(g.props);return{modalProps:y,content:x.jsx(T8e,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:x.jsx(x.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return x.jsxs(Jj.Provider,{value:d,children:[x.jsx(Ki,{zIndex:Cl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N8e={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=(e,t,n,r)=>{const i=k.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>k.createElement("svg",{ref:f,...N8e[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>k.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k8e=Ir("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sJ=Ir("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R8e=Ir("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P8e=Ir("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var O8e=Ir("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M8e=Ir("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $8e=Ir("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F8e=Ir("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ihe=Ir("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L8e=Ir("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B8e=Ir("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var j8e=Ir("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nhe=Ir("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z8e=Ir("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var U8e=Ir("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V8e=Ir("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var khe=Ir("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H8e=Ir("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var q8e=Ir("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var W8e=Ir("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rhe=Ir("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Phe=Ir("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G8e=Ir("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ohe=Ir("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zj=Ir("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ez=Ir("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y8e=Ir("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Mhe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Hf="/study/";function oJ(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function $he(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const K8e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,X8e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Q8e={};function aJ(e,t){return(Q8e.jsx?X8e:K8e).test(e)}const J8e=/[ \t\n\f\r]/g;function Z8e(e){return typeof e=="object"?e.type==="text"?uJ(e.value):!1:uJ(e)}function uJ(e){return e.replace(J8e,"")===""}class $T{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}$T.prototype.property={};$T.prototype.normal={};$T.prototype.space=null;function Fhe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new $T(n,r,t)}function pS(e){return e.toLowerCase()}let kl=class{constructor(t,n){this.property=t,this.attribute=n}};kl.prototype.space=null;kl.prototype.boolean=!1;kl.prototype.booleanish=!1;kl.prototype.overloadedBoolean=!1;kl.prototype.number=!1;kl.prototype.commaSeparated=!1;kl.prototype.spaceSeparated=!1;kl.prototype.commaOrSpaceSeparated=!1;kl.prototype.mustUseProperty=!1;kl.prototype.defined=!1;let e9e=0;const mn=Sy(),zi=Sy(),Lhe=Sy(),ut=Sy(),Nr=Sy(),xv=Sy(),lu=Sy();function Sy(){return 2**++e9e}const T4=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:zi,commaOrSpaceSeparated:lu,commaSeparated:xv,number:ut,overloadedBoolean:Lhe,spaceSeparated:Nr},Symbol.toStringTag,{value:"Module"})),L$=Object.keys(T4);class tz extends kl{constructor(t,n,r,i){let s=-1;if(super(t,n),lJ(this,"space",i),typeof r=="number")for(;++s<L$.length;){const o=L$[s];lJ(this,L$[s],(r&T4[o])===T4[o])}}}tz.prototype.defined=!0;function lJ(e,t,n){n&&(e[t]=n)}const t9e={}.hasOwnProperty;function v_(e){const t={},n={};let r;for(r in e.properties)if(t9e.call(e.properties,r)){const i=e.properties[r],s=new tz(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[pS(r)]=r,n[pS(s.attribute)]=r}return new $T(t,n,e.space)}const Bhe=v_({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),jhe=v_({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function zhe(e,t){return t in e?e[t]:t}function Uhe(e,t){return zhe(e,t.toLowerCase())}const Vhe=v_({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Uhe,properties:{xmlns:null,xmlnsXLink:null}}),Hhe=v_({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:zi,ariaAutoComplete:null,ariaBusy:zi,ariaChecked:zi,ariaColCount:ut,ariaColIndex:ut,ariaColSpan:ut,ariaControls:Nr,ariaCurrent:null,ariaDescribedBy:Nr,ariaDetails:null,ariaDisabled:zi,ariaDropEffect:Nr,ariaErrorMessage:null,ariaExpanded:zi,ariaFlowTo:Nr,ariaGrabbed:zi,ariaHasPopup:null,ariaHidden:zi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Nr,ariaLevel:ut,ariaLive:null,ariaModal:zi,ariaMultiLine:zi,ariaMultiSelectable:zi,ariaOrientation:null,ariaOwns:Nr,ariaPlaceholder:null,ariaPosInSet:ut,ariaPressed:zi,ariaReadOnly:zi,ariaRelevant:null,ariaRequired:zi,ariaRoleDescription:Nr,ariaRowCount:ut,ariaRowIndex:ut,ariaRowSpan:ut,ariaSelected:zi,ariaSetSize:ut,ariaSort:null,ariaValueMax:ut,ariaValueMin:ut,ariaValueNow:ut,ariaValueText:null,role:null}}),n9e=v_({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Uhe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xv,acceptCharset:Nr,accessKey:Nr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Nr,autoFocus:mn,autoPlay:mn,blocking:Nr,capture:null,charSet:null,checked:mn,cite:null,className:Nr,cols:ut,colSpan:null,content:null,contentEditable:zi,controls:mn,controlsList:Nr,coords:ut|xv,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:Lhe,draggable:zi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Nr,height:ut,hidden:mn,high:ut,href:null,hrefLang:null,htmlFor:Nr,httpEquiv:Nr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Nr,itemRef:Nr,itemScope:mn,itemType:Nr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:ut,manifest:null,max:null,maxLength:ut,media:null,method:null,min:null,minLength:ut,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:ut,pattern:null,ping:Nr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Nr,required:mn,reversed:mn,rows:ut,rowSpan:ut,sandbox:Nr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:ut,sizes:null,slot:null,span:ut,spellCheck:zi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ut,step:null,style:null,tabIndex:ut,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:zi,width:ut,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Nr,axis:null,background:null,bgColor:null,border:ut,borderColor:null,bottomMargin:ut,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:ut,leftMargin:ut,link:null,longDesc:null,lowSrc:null,marginHeight:ut,marginWidth:ut,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:ut,rules:null,scheme:null,scrolling:zi,standby:null,summary:null,text:null,topMargin:ut,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ut,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:ut,security:null,unselectable:null}}),r9e=v_({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:zhe,properties:{about:lu,accentHeight:ut,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ut,amplitude:ut,arabicForm:null,ascent:ut,attributeName:null,attributeType:null,azimuth:ut,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ut,by:null,calcMode:null,capHeight:ut,className:Nr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ut,diffuseConstant:ut,direction:null,display:null,dur:null,divisor:ut,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:ut,enableBackground:null,end:null,event:null,exponent:ut,externalResourcesRequired:null,fill:null,fillOpacity:ut,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xv,g2:xv,glyphName:xv,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ut,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ut,horizOriginX:ut,horizOriginY:ut,id:null,ideographic:ut,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ut,k:ut,k1:ut,k2:ut,k3:ut,k4:ut,kernelMatrix:lu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ut,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ut,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ut,overlineThickness:ut,paintOrder:null,panose1:null,path:null,pathLength:ut,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Nr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ut,pointsAtY:ut,pointsAtZ:ut,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:lu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:lu,rev:lu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:lu,requiredFeatures:lu,requiredFonts:lu,requiredFormats:lu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ut,specularExponent:ut,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ut,strikethroughThickness:ut,string:null,stroke:null,strokeDashArray:lu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ut,strokeOpacity:ut,strokeWidth:null,style:null,surfaceScale:ut,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:lu,tabIndex:ut,tableValues:null,target:null,targetX:ut,targetY:ut,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:lu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ut,underlineThickness:ut,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ut,values:null,vAlphabetic:ut,vMathematical:ut,vectorEffect:null,vHanging:ut,vIdeographic:ut,version:null,vertAdvY:ut,vertOriginX:ut,vertOriginY:ut,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ut,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),i9e=/^data[-\w.:]+$/i,cJ=/-[a-z]/g,s9e=/[A-Z]/g;function yP(e,t){const n=pS(t);let r=t,i=kl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&i9e.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(cJ,a9e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!cJ.test(s)){let o=s.replace(s9e,o9e);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=tz}return new i(r,t)}function o9e(e){return"-"+e.toLowerCase()}function a9e(e){return e.charAt(1).toUpperCase()}const u9e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},FT=Fhe([jhe,Bhe,Vhe,Hhe,n9e],"html"),qm=Fhe([jhe,Bhe,Vhe,Hhe,r9e],"svg");function fJ(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function qhe(e){return e.join(" ").trim()}var Whe={},dJ=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,l9e=/\n/g,c9e=/^\s*/,f9e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,d9e=/^:\s*/,h9e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,p9e=/^[;\s]*/,m9e=/^\s+|\s+$/g,g9e=`
`,hJ="/",pJ="*",Bg="",y9e="comment",v9e="declaration",b9e=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(l9e);m&&(n+=m.length);var g=p.lastIndexOf(g9e);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(c9e)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(hJ!=e.charAt(0)||pJ!=e.charAt(1))){for(var m=2;Bg!=e.charAt(m)&&(pJ!=e.charAt(m)||hJ!=e.charAt(m+1));)++m;if(m+=2,Bg===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:y9e,comment:g})}}function d(){var p=s(),m=u(f9e);if(m){if(f(),!u(d9e))return a("property missing ':'");var g=u(h9e),y=p({type:v9e,property:mJ(m[0].replace(dJ,Bg)),value:g?mJ(g[0].replace(dJ,Bg)):Bg});return u(p9e),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function mJ(e){return e?e.replace(m9e,Bg):Bg}var _9e=Hr&&Hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Whe,"__esModule",{value:!0});var E9e=_9e(b9e);function w9e(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,E9e.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var gJ=Whe.default=w9e;const x9e=gJ.default||gJ,vP=Ghe("end"),qf=Ghe("start");function Ghe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function S9e(e){const t=qf(e),n=vP(e);if(t&&n)return{start:t,end:n}}function rx(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?yJ(e.position):"start"in e||"end"in e?yJ(e):"line"in e||"column"in e?C4(e):""}function C4(e){return vJ(e&&e.line)+":"+vJ(e&&e.column)}function yJ(e){return C4(e&&e.start)+"-"+C4(e&&e.end)}function vJ(e){return e&&typeof e=="number"?e:1}class zo extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=rx(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}zo.prototype.file="";zo.prototype.name="";zo.prototype.reason="";zo.prototype.message="";zo.prototype.stack="";zo.prototype.column=void 0;zo.prototype.line=void 0;zo.prototype.ancestors=void 0;zo.prototype.cause=void 0;zo.prototype.fatal=void 0;zo.prototype.place=void 0;zo.prototype.ruleId=void 0;zo.prototype.source=void 0;const nz={}.hasOwnProperty,T9e=new Map,C9e=/[A-Z]/g,A9e=/-([a-z])/g,D9e=new Set(["table","tbody","thead","tfoot","tr"]),I9e=new Set(["td","th"]),Yhe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function N9e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=L9e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=F9e(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?qm:FT,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Khe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Khe(e,t,n){if(t.type==="element")return k9e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return R9e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return O9e(e,t,n);if(t.type==="mdxjsEsm")return P9e(e,t);if(t.type==="root")return M9e(e,t,n);if(t.type==="text")return $9e(e,t)}function k9e(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=qm,e.schema=i),e.ancestors.push(t);const s=Qhe(e,t.tagName,!1),o=B9e(e,t);let a=iz(e,t);return D9e.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Z8e(u):!0})),Xhe(e,o,s,t),rz(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function R9e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}mS(e,t.position)}function P9e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);mS(e,t.position)}function O9e(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=qm,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Qhe(e,t.name,!0),o=j9e(e,t),a=iz(e,t);return Xhe(e,o,s,t),rz(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function M9e(e,t,n){const r={};return rz(r,iz(e,t)),e.create(t,e.Fragment,r,n)}function $9e(e,t){return t.value}function Xhe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function rz(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function F9e(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function L9e(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=qf(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function B9e(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&nz.call(t.properties,i)){const s=z9e(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&I9e.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function j9e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else mS(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else mS(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function iz(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:T9e;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Khe(e,s,o);a!==void 0&&n.push(a)}return n}function z9e(e,t,n){const r=yP(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?$he(n):qhe(n)),r.property==="style"){let i=typeof n=="object"?n:U9e(e,String(n));return e.stylePropertyNameCase==="css"&&(i=V9e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?u9e[r.property]||r.property:r.attribute,n]}}function U9e(e,t){const n={};try{x9e(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new zo("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Yhe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(A9e,q9e)),n[o]=s}}function Qhe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=aJ(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=aJ(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return nz.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);mS(e)}function mS(e,t){const n=new zo("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Yhe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function V9e(e){const t={};let n;for(n in e)nz.call(e,n)&&(t[H9e(n)]=e[n]);return t}function H9e(e){let t=e.replace(C9e,W9e);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function q9e(e,t){return t.toUpperCase()}function W9e(e){return"-"+e.toLowerCase()}const B$={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},G9e={};function Y9e(e,t){const n=G9e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Jhe(e,r,i)}function Jhe(e,t,n){if(K9e(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return bJ(e.children,t,n)}return Array.isArray(e)?bJ(e,t,n):""}function bJ(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Jhe(e[i],t,n);return r.join("")}function K9e(e){return!!(e&&typeof e=="object")}const _J=document.createElement("i");function sz(e){const t="&"+e+";";_J.innerHTML=t;const n=_J.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function mh(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function el(e,t){return e.length>0?(mh(e,e.length,0,t),e):t}const EJ={}.hasOwnProperty;function X9e(e){const t={};let n=-1;for(;++n<e.length;)Q9e(t,e[n]);return t}function Q9e(e,t){let n;for(n in t){const i=(EJ.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){EJ.call(i,o)||(i[o]=[]);const a=s[o];J9e(i[o],Array.isArray(a)?a:a?[a]:[])}}}function J9e(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mh(e,0,0,r)}function Zhe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Sv(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const sf=Wm(/[A-Za-z]/),bu=Wm(/[\dA-Za-z]/),Z9e=Wm(/[#-'*+\--9=?A-Z^-~]/);function A4(e){return e!==null&&(e<32||e===127)}const D4=Wm(/\d/),eBe=Wm(/[\dA-Fa-f]/),tBe=Wm(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function Ha(e){return e!==null&&(e<0||e===32)}function rr(e){return e===-2||e===-1||e===32}const nBe=Wm(new RegExp("\\p{P}|\\p{S}","u")),rBe=Wm(/\s/);function Wm(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function b_(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&bu(e.charCodeAt(n+1))&&bu(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Or(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return rr(u)?(e.enter(n),a(u)):t(u)}function a(u){return rr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const iBe={tokenize:sBe};function sBe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Or(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const oBe={tokenize:aBe},wJ={tokenize:uBe};function aBe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const E=t.events.length;let _=E,w;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){w=t.events[_][1].end;break}y(r);let S=E;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},w),S++;return mh(t.events,_+1,0,t.events.slice(E)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(wJ,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(wJ,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return en(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,E){const _=t.sliceStream(b);if(E&&_.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(_),t.parser.lazy[b.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const S=t.events.length;let C=S,A,D;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){D=t.events[C][1].end;break}A=!0}for(y(r),w=S;w<t.events.length;)t.events[w][1].end=Object.assign({},D),w++;mh(t.events,C+1,0,t.events.slice(S)),t.events.length=w}}function y(b){let E=n.length;for(;E-- >b;){const _=n[E];t.containerState=_[1],_[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function uBe(e,t,n){return Or(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function xJ(e){if(e===null||Ha(e)||rBe(e))return 1;if(nBe(e))return 2}function oz(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const I4={name:"attention",tokenize:cBe,resolveAll:lBe};function lBe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);SJ(f,-u),SJ(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=el(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=el(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=el(l,oz(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=el(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=el(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,mh(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function cBe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=xJ(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=xJ(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function SJ(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const fBe={name:"autolink",tokenize:dBe};function dBe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return sf(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||bu(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||bu(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||A4(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Z9e(h)?(e.consume(h),l):n(h)}function c(h){return bu(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||bu(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const bP={tokenize:hBe,partial:!0};function hBe(e,t,n){return r;function r(s){return rr(s)?Or(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const epe={name:"blockQuote",tokenize:pBe,continuation:{tokenize:mBe},exit:gBe};function pBe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return rr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function mBe(e,t,n){const r=this;return i;function i(o){return rr(o)?Or(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(epe,t,n)(o)}}function gBe(e){e.exit("blockQuote")}const tpe={name:"characterEscape",tokenize:yBe};function yBe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return tBe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const npe={name:"characterReference",tokenize:vBe};function vBe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=bu,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=eBe,c):(e.enter("characterReferenceValue"),s=7,o=D4,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===bu&&!sz(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const TJ={tokenize:_Be,partial:!0},CJ={name:"codeFenced",tokenize:bBe,concrete:!0};function bBe(e,t,n){const r=this,i={tokenize:_,partial:!0};let s=0,o=0,a;return u;function u(w){return l(w)}function l(w){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(w)}function c(w){return w===a?(o++,e.consume(w),c):o<3?n(w):(e.exit("codeFencedFenceSequence"),rr(w)?Or(e,f,"whitespace")(w):f(w))}function f(w){return w===null||en(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(TJ,m,E)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(w))}function d(w){return w===null||en(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(w)):rr(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Or(e,h,"whitespace")(w)):w===96&&w===a?n(w):(e.consume(w),d)}function h(w){return w===null||en(w)?f(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||en(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(w)):w===96&&w===a?n(w):(e.consume(w),p)}function m(w){return e.attempt(i,E,g)(w)}function g(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),y}function y(w){return s>0&&rr(w)?Or(e,v,"linePrefix",s+1)(w):v(w)}function v(w){return w===null||en(w)?e.check(TJ,m,E)(w):(e.enter("codeFlowValue"),b(w))}function b(w){return w===null||en(w)?(e.exit("codeFlowValue"),v(w)):(e.consume(w),b)}function E(w){return e.exit("codeFenced"),t(w)}function _(w,S,C){let A=0;return D;function D(F){return w.enter("lineEnding"),w.consume(F),w.exit("lineEnding"),I}function I(F){return w.enter("codeFencedFence"),rr(F)?Or(w,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(w.enter("codeFencedFenceSequence"),R(F)):C(F)}function R(F){return F===a?(A++,w.consume(F),R):A>=o?(w.exit("codeFencedFenceSequence"),rr(F)?Or(w,M,"whitespace")(F):M(F)):C(F)}function M(F){return F===null||en(F)?(w.exit("codeFencedFence"),S(F)):C(F)}}}function _Be(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const j$={name:"codeIndented",tokenize:wBe},EBe={tokenize:xBe,partial:!0};function wBe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Or(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(EBe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function xBe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Or(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const SBe={name:"codeText",tokenize:ABe,resolve:TBe,previous:CBe};function TBe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function CBe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ABe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class DBe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&_E(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),_E(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),_E(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);_E(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);_E(this.left,n.reverse())}}}function _E(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function rpe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new DBe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,IBe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return mh(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function IBe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const NBe={tokenize:PBe,resolve:RBe},kBe={tokenize:OBe,partial:!0};function RBe(e){return rpe(e),e}function PBe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(kBe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function OBe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Or(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function ipe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||A4(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Ha(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||A4(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function spe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!rr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function ope(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Or(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function ix(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):rr(i)?Or(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const MBe={name:"definition",tokenize:FBe},$Be={tokenize:LBe,partial:!0};function FBe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return spe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Sv(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Ha(h)?ix(e,l)(h):l(h)}function l(h){return ipe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt($Be,f,f)(h)}function f(h){return rr(h)?Or(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function LBe(e,t,n){return r;function r(a){return Ha(a)?ix(e,i)(a):n(a)}function i(a){return ope(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return rr(a)?Or(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const BBe={name:"hardBreakEscape",tokenize:jBe};function jBe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const zBe={name:"headingAtx",tokenize:VBe,resolve:UBe};function UBe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mh(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function VBe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Ha(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):rr(c)?Or(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Ha(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const HBe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],AJ=["pre","script","style","textarea"],qBe={name:"htmlFlow",tokenize:KBe,resolveTo:YBe,concrete:!0},WBe={tokenize:QBe,partial:!0},GBe={tokenize:XBe,partial:!0};function YBe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function KBe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(B){return c(B)}function c(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),f}function f(B){return B===33?(e.consume(B),d):B===47?(e.consume(B),s=!0,m):B===63?(e.consume(B),i=3,r.interrupt?t:$):sf(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function d(B){return B===45?(e.consume(B),i=2,h):B===91?(e.consume(B),i=5,a=0,p):sf(B)?(e.consume(B),i=4,r.interrupt?t:$):n(B)}function h(B){return B===45?(e.consume(B),r.interrupt?t:$):n(B)}function p(B){const q="CDATA[";return B===q.charCodeAt(a++)?(e.consume(B),a===q.length?r.interrupt?t:O:p):n(B)}function m(B){return sf(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function g(B){if(B===null||B===47||B===62||Ha(B)){const q=B===47,Y=o.toLowerCase();return!q&&!s&&AJ.includes(Y)?(i=1,r.interrupt?t(B):O(B)):HBe.includes(o.toLowerCase())?(i=6,q?(e.consume(B),y):r.interrupt?t(B):O(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?v(B):b(B))}return B===45||bu(B)?(e.consume(B),o+=String.fromCharCode(B),g):n(B)}function y(B){return B===62?(e.consume(B),r.interrupt?t:O):n(B)}function v(B){return rr(B)?(e.consume(B),v):D(B)}function b(B){return B===47?(e.consume(B),D):B===58||B===95||sf(B)?(e.consume(B),E):rr(B)?(e.consume(B),b):D(B)}function E(B){return B===45||B===46||B===58||B===95||bu(B)?(e.consume(B),E):_(B)}function _(B){return B===61?(e.consume(B),w):rr(B)?(e.consume(B),_):b(B)}function w(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),u=B,S):rr(B)?(e.consume(B),w):C(B)}function S(B){return B===u?(e.consume(B),u=null,A):B===null||en(B)?n(B):(e.consume(B),S)}function C(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||Ha(B)?_(B):(e.consume(B),C)}function A(B){return B===47||B===62||rr(B)?b(B):n(B)}function D(B){return B===62?(e.consume(B),I):n(B)}function I(B){return B===null||en(B)?O(B):rr(B)?(e.consume(B),I):n(B)}function O(B){return B===45&&i===2?(e.consume(B),P):B===60&&i===1?(e.consume(B),j):B===62&&i===4?(e.consume(B),U):B===63&&i===3?(e.consume(B),$):B===93&&i===5?(e.consume(B),V):en(B)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(WBe,W,R)(B)):B===null||en(B)?(e.exit("htmlFlowData"),R(B)):(e.consume(B),O)}function R(B){return e.check(GBe,M,W)(B)}function M(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),F}function F(B){return B===null||en(B)?R(B):(e.enter("htmlFlowData"),O(B))}function P(B){return B===45?(e.consume(B),$):O(B)}function j(B){return B===47?(e.consume(B),o="",z):O(B)}function z(B){if(B===62){const q=o.toLowerCase();return AJ.includes(q)?(e.consume(B),U):O(B)}return sf(B)&&o.length<8?(e.consume(B),o+=String.fromCharCode(B),z):O(B)}function V(B){return B===93?(e.consume(B),$):O(B)}function $(B){return B===62?(e.consume(B),U):B===45&&i===2?(e.consume(B),$):O(B)}function U(B){return B===null||en(B)?(e.exit("htmlFlowData"),W(B)):(e.consume(B),U)}function W(B){return e.exit("htmlFlow"),t(B)}}function XBe(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function QBe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(bP,t,n)}}const JBe={name:"htmlText",tokenize:ZBe};function ZBe(e,t,n){const r=this;let i,s,o;return a;function a($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),u}function u($){return $===33?(e.consume($),l):$===47?(e.consume($),_):$===63?(e.consume($),b):sf($)?(e.consume($),C):n($)}function l($){return $===45?(e.consume($),c):$===91?(e.consume($),s=0,p):sf($)?(e.consume($),v):n($)}function c($){return $===45?(e.consume($),h):n($)}function f($){return $===null?n($):$===45?(e.consume($),d):en($)?(o=f,j($)):(e.consume($),f)}function d($){return $===45?(e.consume($),h):f($)}function h($){return $===62?P($):$===45?d($):f($)}function p($){const U="CDATA[";return $===U.charCodeAt(s++)?(e.consume($),s===U.length?m:p):n($)}function m($){return $===null?n($):$===93?(e.consume($),g):en($)?(o=m,j($)):(e.consume($),m)}function g($){return $===93?(e.consume($),y):m($)}function y($){return $===62?P($):$===93?(e.consume($),y):m($)}function v($){return $===null||$===62?P($):en($)?(o=v,j($)):(e.consume($),v)}function b($){return $===null?n($):$===63?(e.consume($),E):en($)?(o=b,j($)):(e.consume($),b)}function E($){return $===62?P($):b($)}function _($){return sf($)?(e.consume($),w):n($)}function w($){return $===45||bu($)?(e.consume($),w):S($)}function S($){return en($)?(o=S,j($)):rr($)?(e.consume($),S):P($)}function C($){return $===45||bu($)?(e.consume($),C):$===47||$===62||Ha($)?A($):n($)}function A($){return $===47?(e.consume($),P):$===58||$===95||sf($)?(e.consume($),D):en($)?(o=A,j($)):rr($)?(e.consume($),A):P($)}function D($){return $===45||$===46||$===58||$===95||bu($)?(e.consume($),D):I($)}function I($){return $===61?(e.consume($),O):en($)?(o=I,j($)):rr($)?(e.consume($),I):A($)}function O($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),i=$,R):en($)?(o=O,j($)):rr($)?(e.consume($),O):(e.consume($),M)}function R($){return $===i?(e.consume($),i=void 0,F):$===null?n($):en($)?(o=R,j($)):(e.consume($),R)}function M($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||Ha($)?A($):(e.consume($),M)}function F($){return $===47||$===62||Ha($)?A($):n($)}function P($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function j($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),z}function z($){return rr($)?Or(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):V($)}function V($){return e.enter("htmlTextData"),o($)}}const az={name:"labelEnd",tokenize:s7e,resolveTo:i7e,resolveAll:r7e},e7e={tokenize:o7e},t7e={tokenize:a7e},n7e={tokenize:u7e};function r7e(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function i7e(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=el(a,e.slice(s+1,s+r+3)),a=el(a,[["enter",c,t]]),a=el(a,oz(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=el(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=el(a,e.slice(o+1)),a=el(a,[["exit",u,t]]),mh(e,s,e.length,a),e}function s7e(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Sv(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(e7e,c,o?c:f)(d):d===91?e.attempt(t7e,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(n7e,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function o7e(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Ha(f)?ix(e,s)(f):s(f)}function s(f){return f===41?c(f):ipe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Ha(f)?ix(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?ope(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Ha(f)?ix(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function a7e(e,t,n){const r=this;return i;function i(a){return spe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Sv(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function u7e(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const l7e={name:"labelStartImage",tokenize:c7e,resolveAll:az.resolveAll};function c7e(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const f7e={name:"labelStartLink",tokenize:d7e,resolveAll:az.resolveAll};function d7e(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const z$={name:"lineEnding",tokenize:h7e};function h7e(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Or(e,t,"linePrefix")}}const pD={name:"thematicBreak",tokenize:p7e};function p7e(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),rr(l)?Or(e,a,"whitespace")(l):a(l))}}const xa={name:"list",tokenize:y7e,continuation:{tokenize:v7e},exit:_7e},m7e={tokenize:E7e,partial:!0},g7e={tokenize:b7e,partial:!0};function y7e(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:D4(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(pD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return D4(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(bP,r.interrupt?n:c,e.attempt(m7e,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return rr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function v7e(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(bP,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Or(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!rr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(g7e,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Or(e,e.attempt(xa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function b7e(e,t,n){const r=this;return Or(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function _7e(e){e.exit(this.containerState.type)}function E7e(e,t,n){const r=this;return Or(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!rr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const DJ={name:"setextUnderline",tokenize:x7e,resolveTo:w7e};function w7e(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function x7e(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),rr(l)?Or(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const S7e={tokenize:T7e};function T7e(e){const t=this,n=e.attempt(bP,r,e.attempt(this.parser.constructs.flowInitial,i,Or(e,e.attempt(this.parser.constructs.flow,i,e.attempt(NBe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const C7e={resolveAll:upe()},A7e=ape("string"),D7e=ape("text");function ape(e){return{tokenize:t,resolveAll:upe(e==="text"?I7e:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function upe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function I7e(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function N7e(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:E,attempt:S(_),check:S(w),interrupt:S(w,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(I){return o=el(o,I),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=oz(s,l.events,l),l.events)}function d(I,O){return R7e(h(I),O)}function h(I){return k7e(o,I)}function p(){const{line:I,column:O,offset:R,_index:M,_bufferIndex:F}=r;return{line:I,column:O,offset:R,_index:M,_bufferIndex:F}}function m(I){i[I.line]=I.column,D()}function g(){let I;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(I){c=c(I)}function v(I){en(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,D()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=I}function b(I,O){const R=O||{};return R.type=I,R.start=p(),l.events.push(["enter",R,l]),a.push(R),R}function E(I){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function _(I,O){C(I,O.from)}function w(I,O){O.restore()}function S(I,O){return R;function R(M,F,P){let j,z,V,$;return Array.isArray(M)?W(M):"tokenize"in M?W([M]):U(M);function U(re){return pe;function pe(_e){const de=_e!==null&&re[_e],ye=_e!==null&&re.null,Ce=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ce)(_e)}}function W(re){return j=re,z=0,re.length===0?P:B(re[z])}function B(re){return pe;function pe(_e){return $=A(),V=re,re.partial||(l.currentConstruct=re),re.name&&l.parser.constructs.disable.null.includes(re.name)?Y():re.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,Y)(_e)}}function q(re){return I(V,$),F}function Y(re){return $.restore(),++z<j.length?B(j[z]):P}}}function C(I,O){I.resolveAll&&!s.includes(I)&&s.push(I),I.resolve&&mh(l.events,O,l.events.length-O,I.resolve(l.events.slice(O),l)),I.resolveTo&&(l.events=I.resolveTo(l.events,l))}function A(){const I=p(),O=l.previous,R=l.currentConstruct,M=l.events.length,F=Array.from(a);return{restore:P,from:M};function P(){r=I,l.previous=O,l.currentConstruct=R,l.events.length=M,a=F,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function k7e(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function R7e(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const P7e={42:xa,43:xa,45:xa,48:xa,49:xa,50:xa,51:xa,52:xa,53:xa,54:xa,55:xa,56:xa,57:xa,62:epe},O7e={91:MBe},M7e={[-2]:j$,[-1]:j$,32:j$},$7e={35:zBe,42:pD,45:[DJ,pD],60:qBe,61:DJ,95:pD,96:CJ,126:CJ},F7e={38:npe,92:tpe},L7e={[-5]:z$,[-4]:z$,[-3]:z$,33:l7e,38:npe,42:I4,60:[fBe,JBe],91:f7e,92:[BBe,tpe],93:az,95:I4,96:SBe},B7e={null:[I4,C7e]},j7e={null:[42,95]},z7e={null:[]},U7e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:j7e,contentInitial:O7e,disable:z7e,document:P7e,flow:$7e,flowInitial:M7e,insideSpan:B7e,string:F7e,text:L7e},Symbol.toStringTag,{value:"Module"}));function V7e(e){const n=X9e([U7e,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(iBe),document:i(oBe),flow:i(S7e),string:i(A7e),text:i(D7e)};return r;function i(s){return o;function o(a){return N7e(r,s,a)}}}function H7e(e){for(;!rpe(e););return e}const IJ=/[\0\t\n\r]/g;function q7e(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(IJ.lastIndex=f,l=IJ.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const W7e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function G7e(e){return e.replace(W7e,Y7e)}function Y7e(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Zhe(n.slice(s?2:1),s?16:10)}return sz(n)||e}const lpe={}.hasOwnProperty;function K7e(e,t,n){return typeof t!="string"&&(n=t,t=void 0),X7e(n)(H7e(V7e(n).document().write(q7e()(e,t,!0))))}function X7e(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Xe),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(ht),blockQuote:s(ye),characterEscape:A,characterReference:A,codeFenced:s(Ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ce,o),codeText:s(ve,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(qe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(He),hardBreakEscape:s(rt),hardBreakTrailing:s(rt),htmlFlow:s(Pe,o),htmlFlowData:A,htmlText:s(Pe,o),htmlTextData:A,image:s(Be),label:o,link:s(Xe),listItem:s(Ft),listItemValue:d,listOrdered:s(mt,f),listUnordered:s(mt),paragraph:s(bt),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ht),strong:s(G),thematicBreak:s(me)},exit:{atxHeading:u(),atxHeadingSequence:_,autolink:u(),autolinkEmail:de,autolinkProtocol:_e,blockQuote:u(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:re,characterReference:pe,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:D,codeIndented:u(y),codeText:u(F),codeTextData:D,data:D,definition:u(),definitionDestinationString:E,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(R),htmlFlowData:D,htmlText:u(M),htmlTextData:D,image:u(j),label:V,labelText:z,lineEnding:I,link:u(P),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:$,resourceTitleString:U,resource:W,setextHeading:u(C),setextHeadingLineSequence:S,setextHeadingText:w,strong:u(),thematicBreak:u()}};cpe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(J){let se={type:"root",children:[]};const ce={stack:[se],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Se=[];let Te=-1;for(;++Te<J.length;)if(J[Te][1].type==="listOrdered"||J[Te][1].type==="listUnordered")if(J[Te][0]==="enter")Se.push(Te);else{const Ge=Se.pop();Te=i(J,Ge,Te)}for(Te=-1;++Te<J.length;){const Ge=t[J[Te][0]];lpe.call(Ge,J[Te][1].type)&&Ge[J[Te][1].type].call(Object.assign({sliceSerialize:J[Te][2].sliceSerialize},ce),J[Te][1])}if(ce.tokenStack.length>0){const Ge=ce.tokenStack[ce.tokenStack.length-1];(Ge[1]||NJ).call(ce,void 0,Ge[0])}for(se.position={start:Jh(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:Jh(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},Te=-1;++Te<t.transforms.length;)se=t.transforms[Te](se)||se;return se}function i(J,se,ce){let Se=se-1,Te=-1,Ge=!1,je,Ct,Ot,Dt;for(;++Se<=ce;){const Vt=J[Se];switch(Vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Vt[0]==="enter"?Te++:Te--,Dt=void 0;break}case"lineEndingBlank":{Vt[0]==="enter"&&(je&&!Dt&&!Te&&!Ot&&(Ot=Se),Dt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Dt=void 0}if(!Te&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Te===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(je){let Zt=Se;for(Ct=void 0;Zt--;){const an=J[Zt];if(an[1].type==="lineEnding"||an[1].type==="lineEndingBlank"){if(an[0]==="exit")continue;Ct&&(J[Ct][1].type="lineEndingBlank",Ge=!0),an[1].type="lineEnding",Ct=Zt}else if(!(an[1].type==="linePrefix"||an[1].type==="blockQuotePrefix"||an[1].type==="blockQuotePrefixWhitespace"||an[1].type==="blockQuoteMarker"||an[1].type==="listItemIndent"))break}Ot&&(!Ct||Ot<Ct)&&(je._spread=!0),je.end=Object.assign({},Ct?J[Ct][1].start:Vt[1].end),J.splice(Ct||Se,0,["exit",je,Vt[2]]),Se++,ce++}if(Vt[1].type==="listItemPrefix"){const Zt={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start),end:void 0};je=Zt,J.splice(Se,0,["enter",Zt,Vt[2]]),Se++,ce++,Ot=void 0,Dt=!0}}}return J[se][1]._spread=Ge,ce}function s(J,se){return ce;function ce(Se){a.call(this,J(Se),Se),se&&se.call(this,Se)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(J,se,ce){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([se,ce]),J.position={start:Jh(se.start),end:void 0}}function u(J){return se;function se(ce){J&&J.call(this,ce),l.call(this,ce)}}function l(J,se){const ce=this.stack.pop(),Se=this.tokenStack.pop();if(Se)Se[0].type!==J.type&&(se?se.call(this,J,Se[0]):(Se[1]||NJ).call(this,J,Se[0]));else throw new Error("Cannot close `"+J.type+"` ("+rx({start:J.start,end:J.end})+"): its not open");ce.position.end=Jh(J.end)}function c(){return Y9e(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(J){if(this.data.expectingFirstListItemValue){const se=this.stack[this.stack.length-2];se.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function h(){const J=this.resume(),se=this.stack[this.stack.length-1];se.lang=J}function p(){const J=this.resume(),se=this.stack[this.stack.length-1];se.meta=J}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J.replace(/(\r?\n|\r)$/g,"")}function v(J){const se=this.resume(),ce=this.stack[this.stack.length-1];ce.label=se,ce.identifier=Sv(this.sliceSerialize(J)).toLowerCase()}function b(){const J=this.resume(),se=this.stack[this.stack.length-1];se.title=J}function E(){const J=this.resume(),se=this.stack[this.stack.length-1];se.url=J}function _(J){const se=this.stack[this.stack.length-1];if(!se.depth){const ce=this.sliceSerialize(J).length;se.depth=ce}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function S(J){const se=this.stack[this.stack.length-1];se.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(J){const ce=this.stack[this.stack.length-1].children;let Se=ce[ce.length-1];(!Se||Se.type!=="text")&&(Se=ie(),Se.position={start:Jh(J.start),end:void 0},ce.push(Se)),this.stack.push(Se)}function D(J){const se=this.stack.pop();se.value+=this.sliceSerialize(J),se.position.end=Jh(J.end)}function I(J){const se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ce=se.children[se.children.length-1];ce.position.end=Jh(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(se.type)&&(A.call(this,J),D.call(this,J))}function O(){this.data.atHardBreak=!0}function R(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J}function M(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J}function F(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J}function P(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=se,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function j(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=se,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function z(J){const se=this.sliceSerialize(J),ce=this.stack[this.stack.length-2];ce.label=G7e(se),ce.identifier=Sv(se).toLowerCase()}function V(){const J=this.stack[this.stack.length-1],se=this.resume(),ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,ce.type==="link"){const Se=J.children;ce.children=Se}else ce.alt=se}function $(){const J=this.resume(),se=this.stack[this.stack.length-1];se.url=J}function U(){const J=this.resume(),se=this.stack[this.stack.length-1];se.title=J}function W(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function q(J){const se=this.resume(),ce=this.stack[this.stack.length-1];ce.label=se,ce.identifier=Sv(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function Y(J){this.data.characterReferenceType=J.type}function re(J){const se=this.sliceSerialize(J),ce=this.data.characterReferenceType;let Se;ce?(Se=Zhe(se,ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Se=sz(se);const Te=this.stack[this.stack.length-1];Te.value+=Se}function pe(J){const se=this.stack.pop();se.position.end=Jh(J.end)}function _e(J){D.call(this,J);const se=this.stack[this.stack.length-1];se.url=this.sliceSerialize(J)}function de(J){D.call(this,J);const se=this.stack[this.stack.length-1];se.url="mailto:"+this.sliceSerialize(J)}function ye(){return{type:"blockquote",children:[]}}function Ce(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function He(){return{type:"emphasis",children:[]}}function ht(){return{type:"heading",depth:0,children:[]}}function rt(){return{type:"break"}}function Pe(){return{type:"html",value:""}}function Be(){return{type:"image",title:null,url:"",alt:null}}function Xe(){return{type:"link",title:null,url:"",children:[]}}function mt(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function Ft(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function bt(){return{type:"paragraph",children:[]}}function G(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function me(){return{type:"thematicBreak"}}}function Jh(e){return{line:e.line,column:e.column,offset:e.offset}}function cpe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?cpe(e,r):Q7e(e,r)}}function Q7e(e,t){let n;for(n in t)if(lpe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function NJ(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+rx({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+rx({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+rx({start:t.start,end:t.end})+") is still open")}function J7e(e){const t=this;t.parser=n;function n(r){return K7e(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Z7e(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function eje(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function tje(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function nje(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rje(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ije(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=b_(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function sje(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oje(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function fpe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function aje(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return fpe(e,t);const i={src:b_(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function uje(e,t){const n={src:b_(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function lje(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function cje(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return fpe(e,t);const i={href:b_(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function fje(e,t){const n={href:b_(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function dje(e,t,n){const r=e.all(t),i=n?hje(n):dpe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function hje(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=dpe(n[r])}return t}function dpe(e){const t=e.spread;return t??e.children.length>1}function pje(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function mje(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gje(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function yje(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vje(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=qf(t.children[1]),u=vP(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function bje(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function _je(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const kJ=9,RJ=32;function Eje(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(PJ(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(PJ(t.slice(i),i>0,!1)),s.join("")}function PJ(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===kJ||s===RJ;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===kJ||s===RJ;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function wje(e,t){const n={type:"text",value:Eje(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function xje(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Sje={blockquote:Z7e,break:eje,code:tje,delete:nje,emphasis:rje,footnoteReference:ije,heading:sje,html:oje,imageReference:aje,image:uje,inlineCode:lje,linkReference:cje,link:fje,listItem:dje,list:pje,paragraph:mje,root:gje,strong:yje,table:vje,tableCell:_je,tableRow:bje,text:wje,thematicBreak:xje,toml:MC,yaml:MC,definition:MC,footnoteDefinition:MC};function MC(){}const hpe=-1,_P=0,VI=1,HI=2,uz=3,lz=4,cz=5,fz=6,ppe=7,mpe=8,OJ=typeof self=="object"?self:globalThis,Tje=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case _P:case hpe:return n(o,i);case VI:{const a=n([],i);for(const u of o)a.push(r(u));return a}case HI:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case uz:return n(new Date(o),i);case lz:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case cz:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case fz:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case ppe:{const{name:a,message:u}=o;return n(new OJ[a](u),i)}case mpe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new OJ[s](o),i)};return r},MJ=e=>Tje(new Map,e)(0),f1="",{toString:Cje}={},{keys:Aje}=Object,EE=e=>{const t=typeof e;if(t!=="object"||!e)return[_P,t];const n=Cje.call(e).slice(8,-1);switch(n){case"Array":return[VI,f1];case"Object":return[HI,f1];case"Date":return[uz,f1];case"RegExp":return[lz,f1];case"Map":return[cz,f1];case"Set":return[fz,f1]}return n.includes("Array")?[VI,n]:n.includes("Error")?[ppe,n]:[HI,n]},$C=([e,t])=>e===_P&&(t==="function"||t==="symbol"),Dje=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=EE(o);switch(a){case _P:{let c=o;switch(u){case"bigint":a=mpe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([hpe],o)}return i([a,c],o)}case VI:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case HI:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Aje(o))(e||!$C(EE(o[d])))&&c.push([s(d),s(o[d])]);return f}case uz:return i([a,o.toISOString()],o);case lz:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case cz:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!($C(EE(d))||$C(EE(h))))&&c.push([s(d),s(h)]);return f}case fz:{const c=[],f=i([a,c],o);for(const d of o)(e||!$C(EE(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},$J=(e,{json:t,lossy:n}={})=>{const r=[];return Dje(!(t||n),!!t,new Map,r)(e),r},nb=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?MJ($J(e,t)):structuredClone(e):(e,t)=>MJ($J(e,t));function Ije(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Nje(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function kje(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ije,r=e.options.footnoteBackLabel||Nje,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=b_(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...nb(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const gpe=function(e){if(e==null)return Mje;if(typeof e=="function")return EP(e);if(typeof e=="object")return Array.isArray(e)?Rje(e):Pje(e);if(typeof e=="string")return Oje(e);throw new Error("Expected function, string, or object as test")};function Rje(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=gpe(e[n]);return EP(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Pje(e){const t=e;return EP(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Oje(e){return EP(t);function t(n){return n&&n.type===e}}function EP(e){return t;function t(n,r,i){return!!($je(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Mje(){return!0}function $je(e){return e!==null&&typeof e=="object"&&"type"in e}const ype=[],Fje=!0,FJ=!1,Lje="skip";function Bje(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=gpe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=ype,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=jje(n(u,c)),h[0]===FJ))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Lje)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===FJ)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function jje(e){return Array.isArray(e)?e:typeof e=="number"?[Fje,e]:e==null?ype:[e]}function dz(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Bje(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const N4={}.hasOwnProperty,zje={};function Uje(e,t){const n=t||zje,r=new Map,i=new Map,s=new Map,o={...Sje,...n.handlers},a={all:l,applyData:Hje,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Vje,wrap:Wje};return dz(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(N4.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=nb(g);return y.children=a.all(c),y}return nb(c)}return(a.options.unknownHandler||qje)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=LJ(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=LJ(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Vje(e,t){e.position&&(t.position=S9e(e))}function Hje(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,nb(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function qje(e,t){const n=t.data||{},r="value"in t&&!(N4.call(n,"hProperties")||N4.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Wje(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function LJ(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function BJ(e,t){const n=Uje(e,t),r=n.one(e,void 0),i=kje(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Gje(e,t){return e&&"run"in e?async function(n,r){const i=BJ(n,{file:r,...t});await e.run(i,r)}:function(n,r){return BJ(n,{file:r,...t||e})}}function jJ(e){if(e)throw e}var mD=Object.prototype.hasOwnProperty,vpe=Object.prototype.toString,zJ=Object.defineProperty,UJ=Object.getOwnPropertyDescriptor,VJ=function(t){return typeof Array.isArray=="function"?Array.isArray(t):vpe.call(t)==="[object Array]"},HJ=function(t){if(!t||vpe.call(t)!=="[object Object]")return!1;var n=mD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&mD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||mD.call(t,i)},qJ=function(t,n){zJ&&n.name==="__proto__"?zJ(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},WJ=function(t,n){if(n==="__proto__")if(mD.call(t,n)){if(UJ)return UJ(t,n).value}else return;return t[n]},Yje=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=WJ(a,n),i=WJ(t,n),a!==i&&(c&&i&&(HJ(i)||(s=VJ(i)))?(s?(s=!1,o=r&&VJ(r)?r:[]):o=r&&HJ(r)?r:{},qJ(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&qJ(a,{name:n,newValue:i}));return a};const U$=ha(Yje);function k4(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Kje(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Xje(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Xje(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Qc={basename:Qje,dirname:Jje,extname:Zje,join:eze,sep:"/"};function Qje(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');LT(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Jje(e){if(LT(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Zje(e){LT(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function eze(...e){let t=-1,n;for(;++t<e.length;)LT(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":tze(n)}function tze(e){LT(e);const t=e.codePointAt(0)===47;let n=nze(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function nze(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function LT(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const rze={cwd:ize};function ize(){return"/"}function R4(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function sze(e){if(typeof e=="string")e=new URL(e);else if(!R4(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return oze(e)}function oze(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const V$=["history","path","basename","stem","extname","dirname"];class bpe{constructor(t){let n;t?R4(t)?n={path:t}:typeof t=="string"||aze(t)?n={value:t}:n=t:n={},this.cwd=rze.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<V$.length;){const s=V$[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)V$.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Qc.basename(this.path):void 0}set basename(t){q$(t,"basename"),H$(t,"basename"),this.path=Qc.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Qc.dirname(this.path):void 0}set dirname(t){GJ(this.basename,"dirname"),this.path=Qc.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Qc.extname(this.path):void 0}set extname(t){if(H$(t,"extname"),GJ(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qc.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){R4(t)&&(t=sze(t)),q$(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Qc.basename(this.path,this.extname):void 0}set stem(t){q$(t,"stem"),H$(t,"stem"),this.path=Qc.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new zo(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function H$(e,t){if(e&&e.includes(Qc.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Qc.sep+"`")}function q$(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function GJ(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function aze(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const uze=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},lze={}.hasOwnProperty;class hz extends uze{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Kje()}copy(){const t=new hz;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(U$(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Y$("data",this.frozen),this.namespace[t]=n,this):lze.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Y$("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=FC(t),r=this.parser||this.Parser;return W$("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),W$("process",this.parser||this.Parser),G$("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=FC(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);dze(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),W$("processSync",this.parser||this.Parser),G$("processSync",this.compiler||this.Compiler),this.process(t,i),KJ("processSync","process",n),r;function i(s,o){n=!0,jJ(s),r=o}}run(t,n,r){YJ(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=FC(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),KJ("runSync","run",r),i;function s(o,a){jJ(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=FC(n),i=this.compiler||this.Compiler;return G$("stringify",i),YJ(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Y$("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=U$(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];k4(m)&&k4(h)&&(h=U$(!0,m,h)),r[d]=[l,h,...p]}}}}const cze=new hz().freeze();function W$(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function G$(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Y$(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function YJ(e){if(!k4(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function KJ(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function FC(e){return fze(e)?e:new bpe(e)}function fze(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function dze(e){return typeof e=="string"||hze(e)}function hze(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const pze="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",XJ=[],QJ={allowDangerousHtml:!0},mze=/^(https?|ircs?|mailto|xmpp)$/i,gze=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yze(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||XJ,u=e.remarkPlugins||XJ,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...QJ}:QJ,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||vze,h=cze().use(J7e).use(u).use(Gje,l).use(a),p=new bpe;typeof r=="string"&&(p.value=r);for(const v of gze)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+pze+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),dz(g,y),N9e(g,{Fragment:x.Fragment,components:s,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function y(v,b,E){if(v.type==="raw"&&E&&typeof b=="number")return c?E.children.splice(b,1):E.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let _;for(_ in B$)if(Object.hasOwn(B$,_)&&Object.hasOwn(v.properties,_)){const w=v.properties[_],S=B$[_];(S===null||S.includes(v.tagName))&&(v.properties[_]=d(String(w||""),_,v))}}if(v.type==="element"){let _=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!_&&n&&typeof b=="number"&&(_=!n(v,b,E)),_&&E&&typeof b=="number")return f&&v.children?E.children.splice(b,1,...v.children):E.children.splice(b,1),b}}}function vze(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||mze.test(e.slice(0,t))?e:""}const JJ=/[#.]/g;function bze(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){JJ.lastIndex=i;const a=JJ.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const _ze=new Set(["button","menu","reset","submit"]),P4={}.hasOwnProperty;function _pe(e,t,n){const r=n&&Sze(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=bze(s,t),l.tagName=l.tagName.toLowerCase(),r&&P4.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Eze(o,l.tagName)){let c;for(c in o)P4.call(o,c)&&wze(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)O4(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Eze(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?_ze.has(e.type.toLowerCase()):!("value"in e)}function wze(e,t,n,r){const i=yP(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=fJ(r):i.commaSeparated?o=oJ(r):i.commaOrSpaceSeparated?o=fJ(oJ(r).join(" ")):o=ZJ(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?xze(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=ZJ(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function O4(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)O4(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?O4(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function ZJ(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||pS(n)===pS(t)))return!0}return n}function xze(e){const t=[];let n;for(n in e)P4.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Sze(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Tze=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Cze=_pe(FT,"div"),Aze=_pe(qm,"g",Tze),K$=/\r?\n|\r/g;function Dze(e){const t=String(e),n=[];for(K$.lastIndex=0;K$.test(t);)n.push(K$.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const e0={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Epe={}.hasOwnProperty,Ize=Object.prototype;function Nze(e,t){const n=t||{};return pz({file:n.file||void 0,location:!1,schema:n.space==="svg"?qm:FT,verbose:n.verbose||!1},e)}function pz(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},gD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:wpe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Dze(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},gD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},gD(e,r,n),n}default:return n=kze(e,t),n}}function wpe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=pz(e,t[n]);r.push(i)}return r}function kze(e,t){const n=e.schema;e.schema=t.namespaceURI===e0.svg?qm:FT;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Epe.call(Ize,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Aze:Cze)(t.tagName,i,wpe(e,t.childNodes));if(gD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Z1(u.startTag),c=u&&u.endTag&&Z1(u.endTag),f=pz(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function gD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Rze(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Rze(e,t,n){const r=Z1(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)Epe.call(n.attrs,o)&&(s[yP(e.schema,o).property]=Z1(n.attrs[o]));n.startTag;const a=Z1(n.startTag),u=n.endTag?Z1(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Z1(e){const t=eZ({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=eZ({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function eZ(e){return e.line&&e.column?e:void 0}const tZ={}.hasOwnProperty;function xpe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&tZ.call(i,e)){const u=String(i[e]);o=tZ.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Pze={},Oze={}.hasOwnProperty,Spe=xpe("type",{handlers:{root:$ze,element:zze,text:Bze,comment:jze,doctype:Lze}});function Mze(e,t){const r=(t||Pze).space;return Spe(e,r==="svg"?qm:FT)}function $ze(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=mz(e.children,n,t),__(e,n),n}function Fze(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=mz(e.children,n,t),__(e,n),n}function Lze(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return __(e,t),t}function Bze(e){const t={nodeName:"#text",value:e.value,parentNode:null};return __(e,t),t}function jze(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return __(e,t),t}function zze(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=qm);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Oze.call(e.properties,s)){const u=Uze(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:e0[o],childNodes:[],parentNode:null};return a.childNodes=mz(e.children,a,r),__(e,a),e.tagName==="template"&&e.content&&(a.content=Fze(e.content,r)),a}function Uze(e,t,n){const r=yP(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?$he(n):qhe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=e0[r.space]}return i}function mz(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=Spe(e[r],n);s.parentNode=t,i.push(s)}return i}function __(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Vze=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Hze=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Jr="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const wa={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Tpe(e){return e>=55296&&e<=57343}function qze(e){return e>=56320&&e<=57343}function Wze(e,t){return(e-55296)*1024+9216+t}function Cpe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Ape(e){return e>=64976&&e<=65007||Hze.has(e)}var Re;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Re=Re||(Re={}));const Gze=65536;class Yze{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Gze,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(qze(n))return this.pos++,this._addGap(),Wze(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Re.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Tpe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Cpe(t)?this._err(Re.controlCharacterInInputStream):Ape(t)&&this._err(Re.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var wn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(wn=wn||(wn={}));function Dpe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const rp=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Kze=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var X$;const Xze=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Qze=(X$=String.fromCodePoint)!==null&&X$!==void 0?X$:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Jze(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Xze.get(e))!==null&&t!==void 0?t:e}var _s;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(_s||(_s={}));const Zze=32;var ff;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(ff||(ff={}));function M4(e){return e>=_s.ZERO&&e<=_s.NINE}function eUe(e){return e>=_s.UPPER_A&&e<=_s.UPPER_F||e>=_s.LOWER_A&&e<=_s.LOWER_F}function tUe(e){return e>=_s.UPPER_A&&e<=_s.UPPER_Z||e>=_s.LOWER_A&&e<=_s.LOWER_Z||M4(e)}function nUe(e){return e===_s.EQUALS||tUe(e)}var ms;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ms||(ms={}));var jg;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(jg||(jg={}));class rUe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ms.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=jg.Strict}startEntity(t){this.decodeMode=t,this.state=ms.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ms.EntityStart:return t.charCodeAt(n)===_s.NUM?(this.state=ms.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ms.NamedEntity,this.stateNamedEntity(t,n));case ms.NumericStart:return this.stateNumericStart(t,n);case ms.NumericDecimal:return this.stateNumericDecimal(t,n);case ms.NumericHex:return this.stateNumericHex(t,n);case ms.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Zze)===_s.LOWER_X?(this.state=ms.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ms.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(M4(i)||eUe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(M4(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===_s.SEMI)this.consumed+=1;else if(this.decodeMode===jg.Strict)return 0;return this.emitCodePoint(Jze(this.result),this.consumed),this.errors&&(t!==_s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&ff.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Npe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===jg.Attribute&&(s===0||nUe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&ff.VALUE_LENGTH)>>14,s!==0){if(o===_s.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==jg.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&ff.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~ff.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ms.NamedEntity:return this.result!==0&&(this.decodeMode!==jg.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ms.NumericDecimal:return this.emitNumericEntity(0,2);case ms.NumericHex:return this.emitNumericEntity(0,3);case ms.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ms.EntityStart:return 0}}}function Ipe(e){let t="";const n=new rUe(e,r=>t+=Qze(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function Npe(e,t,n,r){const i=(t&ff.BRANCH_LENGTH)>>7,s=t&ff.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Ipe(rp);Ipe(Kze);var ze;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ze=ze||(ze={}));var Kp;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Kp=Kp||(Kp={}));var pu;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(pu=pu||(pu={}));var xe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(xe=xe||(xe={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const iUe=new Map([[xe.A,N.A],[xe.ADDRESS,N.ADDRESS],[xe.ANNOTATION_XML,N.ANNOTATION_XML],[xe.APPLET,N.APPLET],[xe.AREA,N.AREA],[xe.ARTICLE,N.ARTICLE],[xe.ASIDE,N.ASIDE],[xe.B,N.B],[xe.BASE,N.BASE],[xe.BASEFONT,N.BASEFONT],[xe.BGSOUND,N.BGSOUND],[xe.BIG,N.BIG],[xe.BLOCKQUOTE,N.BLOCKQUOTE],[xe.BODY,N.BODY],[xe.BR,N.BR],[xe.BUTTON,N.BUTTON],[xe.CAPTION,N.CAPTION],[xe.CENTER,N.CENTER],[xe.CODE,N.CODE],[xe.COL,N.COL],[xe.COLGROUP,N.COLGROUP],[xe.DD,N.DD],[xe.DESC,N.DESC],[xe.DETAILS,N.DETAILS],[xe.DIALOG,N.DIALOG],[xe.DIR,N.DIR],[xe.DIV,N.DIV],[xe.DL,N.DL],[xe.DT,N.DT],[xe.EM,N.EM],[xe.EMBED,N.EMBED],[xe.FIELDSET,N.FIELDSET],[xe.FIGCAPTION,N.FIGCAPTION],[xe.FIGURE,N.FIGURE],[xe.FONT,N.FONT],[xe.FOOTER,N.FOOTER],[xe.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[xe.FORM,N.FORM],[xe.FRAME,N.FRAME],[xe.FRAMESET,N.FRAMESET],[xe.H1,N.H1],[xe.H2,N.H2],[xe.H3,N.H3],[xe.H4,N.H4],[xe.H5,N.H5],[xe.H6,N.H6],[xe.HEAD,N.HEAD],[xe.HEADER,N.HEADER],[xe.HGROUP,N.HGROUP],[xe.HR,N.HR],[xe.HTML,N.HTML],[xe.I,N.I],[xe.IMG,N.IMG],[xe.IMAGE,N.IMAGE],[xe.INPUT,N.INPUT],[xe.IFRAME,N.IFRAME],[xe.KEYGEN,N.KEYGEN],[xe.LABEL,N.LABEL],[xe.LI,N.LI],[xe.LINK,N.LINK],[xe.LISTING,N.LISTING],[xe.MAIN,N.MAIN],[xe.MALIGNMARK,N.MALIGNMARK],[xe.MARQUEE,N.MARQUEE],[xe.MATH,N.MATH],[xe.MENU,N.MENU],[xe.META,N.META],[xe.MGLYPH,N.MGLYPH],[xe.MI,N.MI],[xe.MO,N.MO],[xe.MN,N.MN],[xe.MS,N.MS],[xe.MTEXT,N.MTEXT],[xe.NAV,N.NAV],[xe.NOBR,N.NOBR],[xe.NOFRAMES,N.NOFRAMES],[xe.NOEMBED,N.NOEMBED],[xe.NOSCRIPT,N.NOSCRIPT],[xe.OBJECT,N.OBJECT],[xe.OL,N.OL],[xe.OPTGROUP,N.OPTGROUP],[xe.OPTION,N.OPTION],[xe.P,N.P],[xe.PARAM,N.PARAM],[xe.PLAINTEXT,N.PLAINTEXT],[xe.PRE,N.PRE],[xe.RB,N.RB],[xe.RP,N.RP],[xe.RT,N.RT],[xe.RTC,N.RTC],[xe.RUBY,N.RUBY],[xe.S,N.S],[xe.SCRIPT,N.SCRIPT],[xe.SECTION,N.SECTION],[xe.SELECT,N.SELECT],[xe.SOURCE,N.SOURCE],[xe.SMALL,N.SMALL],[xe.SPAN,N.SPAN],[xe.STRIKE,N.STRIKE],[xe.STRONG,N.STRONG],[xe.STYLE,N.STYLE],[xe.SUB,N.SUB],[xe.SUMMARY,N.SUMMARY],[xe.SUP,N.SUP],[xe.TABLE,N.TABLE],[xe.TBODY,N.TBODY],[xe.TEMPLATE,N.TEMPLATE],[xe.TEXTAREA,N.TEXTAREA],[xe.TFOOT,N.TFOOT],[xe.TD,N.TD],[xe.TH,N.TH],[xe.THEAD,N.THEAD],[xe.TITLE,N.TITLE],[xe.TR,N.TR],[xe.TRACK,N.TRACK],[xe.TT,N.TT],[xe.U,N.U],[xe.UL,N.UL],[xe.SVG,N.SVG],[xe.VAR,N.VAR],[xe.WBR,N.WBR],[xe.XMP,N.XMP]]);function E_(e){var t;return(t=iUe.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const tt=N,sUe={[ze.HTML]:new Set([tt.ADDRESS,tt.APPLET,tt.AREA,tt.ARTICLE,tt.ASIDE,tt.BASE,tt.BASEFONT,tt.BGSOUND,tt.BLOCKQUOTE,tt.BODY,tt.BR,tt.BUTTON,tt.CAPTION,tt.CENTER,tt.COL,tt.COLGROUP,tt.DD,tt.DETAILS,tt.DIR,tt.DIV,tt.DL,tt.DT,tt.EMBED,tt.FIELDSET,tt.FIGCAPTION,tt.FIGURE,tt.FOOTER,tt.FORM,tt.FRAME,tt.FRAMESET,tt.H1,tt.H2,tt.H3,tt.H4,tt.H5,tt.H6,tt.HEAD,tt.HEADER,tt.HGROUP,tt.HR,tt.HTML,tt.IFRAME,tt.IMG,tt.INPUT,tt.LI,tt.LINK,tt.LISTING,tt.MAIN,tt.MARQUEE,tt.MENU,tt.META,tt.NAV,tt.NOEMBED,tt.NOFRAMES,tt.NOSCRIPT,tt.OBJECT,tt.OL,tt.P,tt.PARAM,tt.PLAINTEXT,tt.PRE,tt.SCRIPT,tt.SECTION,tt.SELECT,tt.SOURCE,tt.STYLE,tt.SUMMARY,tt.TABLE,tt.TBODY,tt.TD,tt.TEMPLATE,tt.TEXTAREA,tt.TFOOT,tt.TH,tt.THEAD,tt.TITLE,tt.TR,tt.TRACK,tt.UL,tt.WBR,tt.XMP]),[ze.MATHML]:new Set([tt.MI,tt.MO,tt.MN,tt.MS,tt.MTEXT,tt.ANNOTATION_XML]),[ze.SVG]:new Set([tt.TITLE,tt.FOREIGN_OBJECT,tt.DESC]),[ze.XLINK]:new Set,[ze.XML]:new Set,[ze.XMLNS]:new Set};function kpe(e){return e===tt.H1||e===tt.H2||e===tt.H3||e===tt.H4||e===tt.H5||e===tt.H6}xe.STYLE,xe.SCRIPT,xe.XMP,xe.IFRAME,xe.NOEMBED,xe.NOFRAMES,xe.PLAINTEXT;const oUe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Z;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Z||(Z={}));const Mi={DATA:Z.DATA,RCDATA:Z.RCDATA,RAWTEXT:Z.RAWTEXT,SCRIPT_DATA:Z.SCRIPT_DATA,PLAINTEXT:Z.PLAINTEXT,CDATA_SECTION:Z.CDATA_SECTION};function sx(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function fw(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function aUe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function ip(e){return aUe(e)||fw(e)}function $4(e){return ip(e)||sx(e)}function Rpe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function Ppe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function uUe(e){return sx(e)||Rpe(e)||Ppe(e)}function LC(e){return e+32}function Ope(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function lUe(e){return e===X.EQUALS_SIGN||$4(e)}function nZ(e){return Ope(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class cUe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Z.DATA,this.returnState=Z.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Yze(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:wn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:wn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:wn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:wn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Dpe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Re.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=E_(t.tagName),t.type===wn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Re.endTagWithAttributes),t.selfClosing&&this._err(Re.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case wn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case wn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case wn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:wn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Ope(t)?wn.WHITESPACE_CHARACTER:t===X.NULL?wn.NULL_CHARACTER:wn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(wn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=rp[0];s>=0&&(s=Npe(rp,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=rp[s];const a=o&ff.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&lUe(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[rp[s]&~ff.VALUE_LENGTH]:u===1?[rp[++s]]:[rp[++s],rp[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Re.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Z.DATA:{this._stateData(t);break}case Z.RCDATA:{this._stateRcdata(t);break}case Z.RAWTEXT:{this._stateRawtext(t);break}case Z.SCRIPT_DATA:{this._stateScriptData(t);break}case Z.PLAINTEXT:{this._statePlaintext(t);break}case Z.TAG_OPEN:{this._stateTagOpen(t);break}case Z.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Z.TAG_NAME:{this._stateTagName(t);break}case Z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Z.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Z.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Z.COMMENT_START:{this._stateCommentStart(t);break}case Z.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Z.COMMENT:{this._stateComment(t);break}case Z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Z.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Z.COMMENT_END:{this._stateCommentEnd(t);break}case Z.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Z.DOCTYPE:{this._stateDoctype(t);break}case Z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Z.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Z.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Z.CDATA_SECTION:{this._stateCdataSection(t);break}case Z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Z.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Z.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Z.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Z.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Z.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Z.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=Z.DATA,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=Z.RCDATA,this.state=Z.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=Z.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(ip(t))this._createStartTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=Z.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=Z.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Re.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Z.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(ip(t))this._createEndTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Re.missingEndTagName),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.tagName+=Jr;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(fw(t)?LC(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=Z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){ip(t)?(this.state=Z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Z.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Z.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=Z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){ip(t)?(this.state=Z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=Z.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=Z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){ip(t)?(this.state=Z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ip(t)?(this._emitChars("<"),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){ip(t)?(this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(wa.SCRIPT,!1)&&nZ(this.preprocessor.peek(wa.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<wa.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(wa.SCRIPT,!1)&&nZ(this.preprocessor.peek(wa.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<wa.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Re.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Re.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.name+=Jr;break}default:this.currentAttr.name+=String.fromCodePoint(fw(t)?LC(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingAttributeValue),this.state=Z.DATA,this.emitCurrentTagToken();break}default:this.state=Z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=Jr;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=Jr;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_UNQUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=Jr;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Re.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBetweenAttributes),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.unexpectedSolidusInTag),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.data+=Jr;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(wa.DASH_DASH,!0)?(this._createCommentToken(wa.DASH_DASH.length+1),this.state=Z.COMMENT_START):this._consumeSequenceIfMatch(wa.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(wa.DOCTYPE.length+1),this.state=Z.DOCTYPE):this._consumeSequenceIfMatch(wa.CDATA_START,!0)?this.inForeignNode?this.state=Z.CDATA_SECTION:(this._err(Re.cdataInHtmlContent),this._createCommentToken(wa.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Re.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=Z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=Z.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.data+=Jr;break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=Z.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Z.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Z.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Re.nestedComment),this.state=Z.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=Z.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=Z.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Re.incorrectlyClosedComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Z.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBeforeDoctypeName),this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(fw(t))this._createDoctypeToken(String.fromCharCode(LC(t))),this.state=Z.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Re.unexpectedNullCharacter),this._createDoctypeToken(Jr),this.state=Z.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Z.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.name+=Jr;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(fw(t)?LC(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(wa.PUBLIC,!1)?this.state=Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(wa.SYSTEM,!1)?this.state=Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Re.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.publicId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.publicId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.systemId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.systemId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.NULL:{this._err(Re.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=Z.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Re.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=Z.CDATA_SECTION_END:(this._emitChars("]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=Z.NUMERIC_CHARACTER_REFERENCE:$4(t)?(this.state=Z.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=Z.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){$4(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Re.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE_START:sx(t)?(this.state=Z.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Re.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){uUe(t)?(this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Re.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Rpe(t)?this.charRefCode=this.charRefCode*16+t-55:Ppe(t)?this.charRefCode=this.charRefCode*16+t-87:sx(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){sx(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Re.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Re.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Tpe(this.charRefCode))this._err(Re.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Ape(this.charRefCode))this._err(Re.noncharacterCharacterReference);else if(Cpe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Re.controlCharacterReference);const n=oUe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Mpe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),rZ=new Set([...Mpe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),BC=new Map([[N.APPLET,ze.HTML],[N.CAPTION,ze.HTML],[N.HTML,ze.HTML],[N.MARQUEE,ze.HTML],[N.OBJECT,ze.HTML],[N.TABLE,ze.HTML],[N.TD,ze.HTML],[N.TEMPLATE,ze.HTML],[N.TH,ze.HTML],[N.ANNOTATION_XML,ze.MATHML],[N.MI,ze.MATHML],[N.MN,ze.MATHML],[N.MO,ze.MATHML],[N.MS,ze.MATHML],[N.MTEXT,ze.MATHML],[N.DESC,ze.SVG],[N.FOREIGN_OBJECT,ze.SVG],[N.TITLE,ze.SVG]]),fUe=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],dUe=[N.TR,N.TEMPLATE,N.HTML],hUe=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],pUe=[N.TABLE,N.TEMPLATE,N.HTML],mUe=[N.TD,N.TH];class gUe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ze.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ze.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(fUe,ze.HTML)}popUntilTableCellPopped(){this.popUntilPopped(mUe,ze.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(pUe,ze.HTML)}clearBackToTableBodyContext(){this.clearBackTo(hUe,ze.HTML)}clearBackToTableRowContext(){this.clearBackTo(dUe,ze.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if(BC.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(kpe(n)&&r===ze.HTML)return!0;if(BC.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if((r===N.UL||r===N.OL)&&i===ze.HTML||BC.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if(r===N.BUTTON&&i===ze.HTML||BC.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ze.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Mpe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;rZ.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&rZ.has(this.currentTagId);)this.pop()}}const Q$=3;var Jl;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Jl=Jl||(Jl={}));const iZ={type:Jl.Marker};class yUe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Jl.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Q$)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Q$)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Q$&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(iZ)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Jl.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Jl.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(iZ);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Jl.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Jl.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Jl.Element&&n.element===t)}}function sZ(e){return{nodeName:"#text",value:e,parentNode:null}}const P1={createDocument(){return{nodeName:"#document",mode:pu.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};P1.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(P1.isTextNode(n)){n.value+=t;return}}P1.appendChild(e,sZ(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&P1.isTextNode(r)?r.value+=t:P1.insertBefore(e,sZ(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},$pe="html",vUe="about:legacy-compat",bUe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Fpe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],_Ue=[...Fpe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],EUe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Lpe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],wUe=[...Lpe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function oZ(e,t){return t.some(n=>e.startsWith(n))}function xUe(e){return e.name===$pe&&e.publicId===null&&(e.systemId===null||e.systemId===vUe)}function SUe(e){if(e.name!==$pe)return pu.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===bUe)return pu.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),EUe.has(n))return pu.QUIRKS;let r=t===null?_Ue:Fpe;if(oZ(n,r))return pu.QUIRKS;if(r=t===null?Lpe:wUe,oZ(n,r))return pu.LIMITED_QUIRKS}return pu.NO_QUIRKS}const aZ={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},TUe="definitionurl",CUe="definitionURL",AUe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),DUe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ze.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ze.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ze.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ze.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ze.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ze.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ze.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ze.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ze.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ze.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ze.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ze.XMLNS}]]),IUe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),NUe=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function kUe(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===Kp.COLOR||r===Kp.SIZE||r===Kp.FACE)||NUe.has(t)}function Bpe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===TUe){e.attrs[t].name=CUe;break}}function jpe(e){for(let t=0;t<e.attrs.length;t++){const n=AUe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function gz(e){for(let t=0;t<e.attrs.length;t++){const n=DUe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function RUe(e){const t=IUe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=E_(e.tagName))}function PUe(e,t){return t===ze.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function OUe(e,t,n){if(t===ze.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Kp.ENCODING){const i=n[r].value.toLowerCase();return i===aZ.TEXT_HTML||i===aZ.APPLICATION_XML}}return t===ze.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function MUe(e,t,n,r){return(!r||r===ze.HTML)&&OUe(e,t,n)||(!r||r===ze.MATHML)&&PUe(e,t)}const $Ue="hidden",FUe=8,LUe=3;var oe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(oe||(oe={}));const BUe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},zpe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),uZ={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:P1,onParseError:null};class lZ{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=oe.INITIAL,this.originalInsertionMode=oe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...uZ,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new cUe(this.options,this),this.activeFormattingElements=new yUe(this.treeAdapter),this.fragmentContextID=r?E_(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new gUe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...uZ,...n};t??(t=r.treeAdapter.createElement(xe.TEMPLATE,ze.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ze.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:BUe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ze.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ze.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=oe.TEXT}switchToPlaintextParsing(){this.insertionMode=oe.TEXT,this.originalInsertionMode=oe.IN_BODY,this.tokenizer.state=Mi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===xe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ze.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=Mi.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=Mi.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=Mi.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=Mi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ze.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ze.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(xe.HTML,ze.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===wn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===xe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ze.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ze.HTML)}_processToken(t){switch(t.type){case wn.CHARACTER:{this.onCharacter(t);break}case wn.NULL_CHARACTER:{this.onNullCharacter(t);break}case wn.COMMENT:{this.onComment(t);break}case wn.DOCTYPE:{this.onDoctype(t);break}case wn.START_TAG:{this._processStartTag(t);break}case wn.END_TAG:{this.onEndTag(t);break}case wn.EOF:{this.onEof(t);break}case wn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return MUe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Jl.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=oe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=oe.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=oe.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=oe.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=oe.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=oe.IN_TABLE;return}case N.BODY:{this.insertionMode=oe.IN_BODY;return}case N.FRAMESET:{this.insertionMode=oe.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?oe.AFTER_HEAD:oe.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=oe.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=oe.IN_HEAD;return}break}}this.insertionMode=oe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=oe.IN_SELECT_IN_TABLE;return}}this.insertionMode=oe.IN_SELECT}_isElementCausesFosterParenting(t){return zpe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ze.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return sUe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){mHe(this,t);return}switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{ox(this,t);break}case oe.BEFORE_HEAD:{ax(this,t);break}case oe.IN_HEAD:{ux(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{lx(this,t);break}case oe.AFTER_HEAD:{cx(this,t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:{Vpe(this,t);break}case oe.TEXT:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{J$(this,t);break}case oe.IN_TABLE_TEXT:{Kpe(this,t);break}case oe.IN_COLUMN_GROUP:{qI(this,t);break}case oe.AFTER_BODY:{WI(this,t);break}case oe.AFTER_AFTER_BODY:{yD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){pHe(this,t);return}switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{ox(this,t);break}case oe.BEFORE_HEAD:{ax(this,t);break}case oe.IN_HEAD:{ux(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{lx(this,t);break}case oe.AFTER_HEAD:{cx(this,t);break}case oe.TEXT:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{J$(this,t);break}case oe.IN_COLUMN_GROUP:{qI(this,t);break}case oe.AFTER_BODY:{WI(this,t);break}case oe.AFTER_AFTER_BODY:{yD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){F4(this,t);return}switch(this.insertionMode){case oe.INITIAL:case oe.BEFORE_HTML:case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_TEMPLATE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{F4(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.AFTER_BODY:{WUe(this,t);break}case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{GUe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case oe.INITIAL:{YUe(this,t);break}case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:{this._err(t,Re.misplacedDoctype);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Re.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?gHe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{KUe(this,t);break}case oe.BEFORE_HEAD:{QUe(this,t);break}case oe.IN_HEAD:{Rc(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{eVe(this,t);break}case oe.AFTER_HEAD:{nVe(this,t);break}case oe.IN_BODY:{Uo(this,t);break}case oe.IN_TABLE:{rb(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.IN_CAPTION:{JVe(this,t);break}case oe.IN_COLUMN_GROUP:{bz(this,t);break}case oe.IN_TABLE_BODY:{SP(this,t);break}case oe.IN_ROW:{TP(this,t);break}case oe.IN_CELL:{tHe(this,t);break}case oe.IN_SELECT:{Jpe(this,t);break}case oe.IN_SELECT_IN_TABLE:{rHe(this,t);break}case oe.IN_TEMPLATE:{sHe(this,t);break}case oe.AFTER_BODY:{aHe(this,t);break}case oe.IN_FRAMESET:{uHe(this,t);break}case oe.AFTER_FRAMESET:{cHe(this,t);break}case oe.AFTER_AFTER_BODY:{dHe(this,t);break}case oe.AFTER_AFTER_FRAMESET:{hHe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?yHe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{XUe(this,t);break}case oe.BEFORE_HEAD:{JUe(this,t);break}case oe.IN_HEAD:{ZUe(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{tVe(this,t);break}case oe.AFTER_HEAD:{rVe(this,t);break}case oe.IN_BODY:{xP(this,t);break}case oe.TEXT:{UVe(this,t);break}case oe.IN_TABLE:{gS(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.IN_CAPTION:{ZVe(this,t);break}case oe.IN_COLUMN_GROUP:{eHe(this,t);break}case oe.IN_TABLE_BODY:{L4(this,t);break}case oe.IN_ROW:{Qpe(this,t);break}case oe.IN_CELL:{nHe(this,t);break}case oe.IN_SELECT:{Zpe(this,t);break}case oe.IN_SELECT_IN_TABLE:{iHe(this,t);break}case oe.IN_TEMPLATE:{oHe(this,t);break}case oe.AFTER_BODY:{tme(this,t);break}case oe.IN_FRAMESET:{lHe(this,t);break}case oe.AFTER_FRAMESET:{fHe(this,t);break}case oe.AFTER_AFTER_BODY:{yD(this,t);break}}}onEof(t){switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{ox(this,t);break}case oe.BEFORE_HEAD:{ax(this,t);break}case oe.IN_HEAD:{ux(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{lx(this,t);break}case oe.AFTER_HEAD:{cx(this,t);break}case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{Gpe(this,t);break}case oe.TEXT:{VVe(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.IN_TEMPLATE:{eme(this,t);break}case oe.AFTER_BODY:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{vz(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.TEXT:case oe.IN_COLUMN_GROUP:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{this._insertCharacters(t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:case oe.AFTER_BODY:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{Upe(this,t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{J$(this,t);break}case oe.IN_TABLE_TEXT:{Ype(this,t);break}}}}function jUe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Wpe(e,t),n}function zUe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function UUe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=LUe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=VUe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function VUe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function HUe(e,t,n){const r=e.treeAdapter.getTagName(t),i=E_(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===ze.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function qUe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function yz(e,t){for(let n=0;n<FUe;n++){const r=jUe(e,t);if(!r)break;const i=zUe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=UUe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&HUe(e,o,s),qUe(e,i,r)}}function F4(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function WUe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function GUe(e,t){e._appendCommentNode(t,e.document)}function vz(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function YUe(e,t){e._setDocumentType(t);const n=t.forceQuirks?pu.QUIRKS:SUe(t);xUe(t)||e._err(t,Re.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=oe.BEFORE_HTML}function wE(e,t){e._err(t,Re.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,pu.QUIRKS),e.insertionMode=oe.BEFORE_HTML,e._processToken(t)}function KUe(e,t){t.tagID===N.HTML?(e._insertElement(t,ze.HTML),e.insertionMode=oe.BEFORE_HEAD):ox(e,t)}function XUe(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&ox(e,t)}function ox(e,t){e._insertFakeRootElement(),e.insertionMode=oe.BEFORE_HEAD,e._processToken(t)}function QUe(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.HEAD:{e._insertElement(t,ze.HTML),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD;break}default:ax(e,t)}}function JUe(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?ax(e,t):e._err(t,Re.endTagWithoutMatchingOpenElement)}function ax(e,t){e._insertFakeElement(xe.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD,e._processToken(t)}function Rc(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,Mi.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Mi.RAWTEXT):(e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,Mi.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,Mi.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=oe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:ux(e,t)}}function ZUe(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{ux(e,t);break}case N.TEMPLATE:{Ty(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function Ty(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Re.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Re.endTagWithoutMatchingOpenElement)}function ux(e,t){e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD,e._processToken(t)}function eVe(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{Rc(e,t);break}case N.NOSCRIPT:{e._err(t,Re.nestedNoscriptInHead);break}default:lx(e,t)}}function tVe(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=oe.IN_HEAD;break}case N.BR:{lx(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function lx(e,t){const n=t.type===wn.EOF?Re.openElementsLeftAfterEof:Re.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=oe.IN_HEAD,e._processToken(t)}function nVe(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.BODY:{e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Re.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),Rc(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:cx(e,t)}}function rVe(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{cx(e,t);break}case N.TEMPLATE:{Ty(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function cx(e,t){e._insertFakeElement(xe.BODY,N.BODY),e.insertionMode=oe.IN_BODY,wP(e,t)}function wP(e,t){switch(t.type){case wn.CHARACTER:{Vpe(e,t);break}case wn.WHITESPACE_CHARACTER:{Upe(e,t);break}case wn.COMMENT:{F4(e,t);break}case wn.START_TAG:{Uo(e,t);break}case wn.END_TAG:{xP(e,t);break}case wn.EOF:{Gpe(e,t);break}}}function Upe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Vpe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function iVe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function sVe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function oVe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_FRAMESET)}function aVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML)}function uVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),kpe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ze.HTML)}function lVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function cVe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),n||(e.formElement=e.openElements.current))}function fVe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML)}function dVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.tokenizer.state=Mi.PLAINTEXT}function hVe(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.framesetOk=!1}function pVe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(xe.A);n&&(yz(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function mVe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function gVe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(yz(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function yVe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function vVe(e,t){e.treeAdapter.getDocumentMode(e.document)!==pu.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_TABLE}function Hpe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function qpe(e){const t=Dpe(e,Kp.TYPE);return t!=null&&t.toLowerCase()===$Ue}function bVe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ze.HTML),qpe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function _Ve(e,t){e._appendElement(t,ze.HTML),t.ackSelfClosing=!0}function EVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function wVe(e,t){t.tagName=xe.IMG,t.tagID=N.IMG,Hpe(e,t)}function xVe(e,t){e._insertElement(t,ze.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Mi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=oe.TEXT}function SVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Mi.RAWTEXT)}function TVe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Mi.RAWTEXT)}function cZ(e,t){e._switchToTextParsing(t,Mi.RAWTEXT)}function CVe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===oe.IN_TABLE||e.insertionMode===oe.IN_CAPTION||e.insertionMode===oe.IN_TABLE_BODY||e.insertionMode===oe.IN_ROW||e.insertionMode===oe.IN_CELL?oe.IN_SELECT_IN_TABLE:oe.IN_SELECT}function AVe(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML)}function DVe(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ze.HTML)}function IVe(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,ze.HTML)}function NVe(e,t){e._reconstructActiveFormattingElements(),Bpe(t),gz(t),t.selfClosing?e._appendElement(t,ze.MATHML):e._insertElement(t,ze.MATHML),t.ackSelfClosing=!0}function kVe(e,t){e._reconstructActiveFormattingElements(),jpe(t),gz(t),t.selfClosing?e._appendElement(t,ze.SVG):e._insertElement(t,ze.SVG),t.ackSelfClosing=!0}function fZ(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML)}function Uo(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{mVe(e,t);break}case N.A:{pVe(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{uVe(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{aVe(e,t);break}case N.LI:case N.DD:case N.DT:{fVe(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{Hpe(e,t);break}case N.HR:{EVe(e,t);break}case N.RB:case N.RTC:{DVe(e,t);break}case N.RT:case N.RP:{IVe(e,t);break}case N.PRE:case N.LISTING:{lVe(e,t);break}case N.XMP:{SVe(e,t);break}case N.SVG:{kVe(e,t);break}case N.HTML:{iVe(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{Rc(e,t);break}case N.BODY:{sVe(e,t);break}case N.FORM:{cVe(e,t);break}case N.NOBR:{gVe(e,t);break}case N.MATH:{NVe(e,t);break}case N.TABLE:{vVe(e,t);break}case N.INPUT:{bVe(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{_Ve(e,t);break}case N.IMAGE:{wVe(e,t);break}case N.BUTTON:{hVe(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{yVe(e,t);break}case N.IFRAME:{TVe(e,t);break}case N.SELECT:{CVe(e,t);break}case N.OPTION:case N.OPTGROUP:{AVe(e,t);break}case N.NOEMBED:{cZ(e,t);break}case N.FRAMESET:{oVe(e,t);break}case N.TEXTAREA:{xVe(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?cZ(e,t):fZ(e,t);break}case N.PLAINTEXT:{dVe(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:fZ(e,t)}}function RVe(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=oe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function PVe(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=oe.AFTER_BODY,tme(e,t))}function OVe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function MVe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function $Ve(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(xe.P,N.P),e._closePElement()}function FVe(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function LVe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function BVe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function jVe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function zVe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(xe.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function Wpe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function xP(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{yz(e,t);break}case N.P:{$Ve(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{OVe(e,t);break}case N.LI:{FVe(e);break}case N.DD:case N.DT:{LVe(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{BVe(e);break}case N.BR:{zVe(e);break}case N.BODY:{RVe(e,t);break}case N.HTML:{PVe(e,t);break}case N.FORM:{MVe(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{jVe(e,t);break}case N.TEMPLATE:{Ty(e,t);break}default:Wpe(e,t)}}function Gpe(e,t){e.tmplInsertionModeStack.length>0?eme(e,t):vz(e,t)}function UVe(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function VVe(e,t){e._err(t,Re.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function J$(e,t){if(zpe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=oe.IN_TABLE_TEXT,t.type){case wn.CHARACTER:{Kpe(e,t);break}case wn.WHITESPACE_CHARACTER:{Ype(e,t);break}}else BT(e,t)}function HVe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_CAPTION}function qVe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_COLUMN_GROUP}function WVe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(xe.COLGROUP,N.COLGROUP),e.insertionMode=oe.IN_COLUMN_GROUP,bz(e,t)}function GVe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_TABLE_BODY}function YVe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(xe.TBODY,N.TBODY),e.insertionMode=oe.IN_TABLE_BODY,SP(e,t)}function KVe(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function XVe(e,t){qpe(t)?e._appendElement(t,ze.HTML):BT(e,t),t.ackSelfClosing=!0}function QVe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ze.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function rb(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{YVe(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{Rc(e,t);break}case N.COL:{WVe(e,t);break}case N.FORM:{QVe(e,t);break}case N.TABLE:{KVe(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{GVe(e,t);break}case N.INPUT:{XVe(e,t);break}case N.CAPTION:{HVe(e,t);break}case N.COLGROUP:{qVe(e,t);break}default:BT(e,t)}}function gS(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Ty(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:BT(e,t)}}function BT(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,wP(e,t),e.fosterParentingEnabled=n}function Ype(e,t){e.pendingCharacterTokens.push(t)}function Kpe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function xE(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)BT(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Xpe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function JVe(e,t){const n=t.tagID;Xpe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,rb(e,t)):Uo(e,t)}function ZVe(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,n===N.TABLE&&gS(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:xP(e,t)}}function bz(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.COL:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{Rc(e,t);break}default:qI(e,t)}}function eHe(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case N.TEMPLATE:{Ty(e,t);break}case N.COL:break;default:qI(e,t)}}function qI(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE,e._processToken(t))}function SP(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(xe.TR,N.TR),e.insertionMode=oe.IN_ROW,TP(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,rb(e,t));break}default:rb(e,t)}}function L4(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,gS(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:gS(e,t)}}function TP(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,SP(e,t));break}default:rb(e,t)}}function Qpe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,L4(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,L4(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:gS(e,t)}}function tHe(e,t){const n=t.tagID;Xpe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),TP(e,t)):Uo(e,t)}function nHe(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Qpe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:xP(e,t)}}function Jpe(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,ze.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ze.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{Rc(e,t);break}}}function Zpe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Ty(e,t);break}}}function rHe(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Jpe(e,t)}function iHe(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Zpe(e,t)}function sHe(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{Rc(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=oe.IN_TABLE,e.insertionMode=oe.IN_TABLE,rb(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=oe.IN_COLUMN_GROUP,e.insertionMode=oe.IN_COLUMN_GROUP,bz(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=oe.IN_TABLE_BODY,e.insertionMode=oe.IN_TABLE_BODY,SP(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=oe.IN_ROW,e.insertionMode=oe.IN_ROW,TP(e,t);break}default:e.tmplInsertionModeStack[0]=oe.IN_BODY,e.insertionMode=oe.IN_BODY,Uo(e,t)}}function oHe(e,t){t.tagID===N.TEMPLATE&&Ty(e,t)}function eme(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):vz(e,t)}function aHe(e,t){t.tagID===N.HTML?Uo(e,t):WI(e,t)}function tme(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=oe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else WI(e,t)}function WI(e,t){e.insertionMode=oe.IN_BODY,wP(e,t)}function uHe(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.FRAMESET:{e._insertElement(t,ze.HTML);break}case N.FRAME:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{Rc(e,t);break}}}function lHe(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=oe.AFTER_FRAMESET))}function cHe(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.NOFRAMES:{Rc(e,t);break}}}function fHe(e,t){t.tagID===N.HTML&&(e.insertionMode=oe.AFTER_AFTER_FRAMESET)}function dHe(e,t){t.tagID===N.HTML?Uo(e,t):yD(e,t)}function yD(e,t){e.insertionMode=oe.IN_BODY,wP(e,t)}function hHe(e,t){switch(t.tagID){case N.HTML:{Uo(e,t);break}case N.NOFRAMES:{Rc(e,t);break}}}function pHe(e,t){t.chars=Jr,e._insertCharacters(t)}function mHe(e,t){e._insertCharacters(t),e.framesetOk=!1}function nme(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ze.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function gHe(e,t){if(kUe(t))nme(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ze.MATHML?Bpe(t):r===ze.SVG&&(RUe(t),jpe(t)),gz(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function yHe(e,t){if(t.tagID===N.P||t.tagID===N.BR){nme(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ze.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}xe.AREA,xe.BASE,xe.BASEFONT,xe.BGSOUND,xe.BR,xe.COL,xe.EMBED,xe.FRAME,xe.HR,xe.IMG,xe.INPUT,xe.KEYGEN,xe.LINK,xe.META,xe.PARAM,xe.SOURCE,xe.TRACK,xe.WBR;const vHe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),dZ={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function rme(e,t){const n=DHe(e),r=xpe("type",{handlers:{root:bHe,element:_He,text:EHe,comment:sme,doctype:wHe,raw:SHe},unknown:THe}),i={parser:n?new lZ(dZ):lZ.getFragmentParser(void 0,dZ),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),w_(i,qf());const s=n?i.parser.document:i.parser.getFragment(),o=Nze(s,{file:i.options.file});return i.stitches&&dz(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function ime(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function bHe(e,t){ime(e.children,t)}function _He(e,t){CHe(e,t),ime(e.children,t),AHe(e,t)}function EHe(e,t){const n={type:wn.CHARACTER,chars:e.value,location:jT(e)};w_(t,qf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function wHe(e,t){const n={type:wn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:jT(e)};w_(t,qf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function xHe(e,t){t.stitches=!0;const n=IHe(e);if("children"in e&&"children"in n){const r=rme({type:"root",children:e.children},t.options);n.children=r.children}sme({type:"comment",value:{stitch:n}},t)}function sme(e,t){const n=e.value,r={type:wn.COMMENT,data:n,location:jT(e)};w_(t,qf(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function SHe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,ome(t,qf(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function THe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))xHe(n,t);else{let r="";throw vHe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function w_(e,t){ome(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Mi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function ome(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function CHe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Mi.PLAINTEXT)return;w_(t,qf(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:e0.html;i===e0.html&&n==="svg"&&(i=e0.svg);const s=Mze({...e,children:[]},{space:i===e0.svg?"svg":"html"}),o={type:wn.START_TAG,tagName:n,tagID:E_(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:jT(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function AHe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Vze.includes(n)||t.parser.tokenizer.state===Mi.PLAINTEXT)return;w_(t,vP(e));const r={type:wn.END_TAG,tagName:n,tagID:E_(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:jT(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Mi.RCDATA||t.parser.tokenizer.state===Mi.RAWTEXT||t.parser.tokenizer.state===Mi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Mi.DATA)}function DHe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function jT(e){const t=qf(e)||{line:void 0,column:void 0,offset:void 0},n=vP(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function IHe(e){return"children"in e?nb({...e,children:[]}):nb(e)}function NHe(e){return function(t,n){return rme(t,{...e,file:n})}}function la({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return x.jsx(Hm,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return x.jsx(nt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return x.jsx(ci,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return x.jsx(ci,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return x.jsx(ci,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return x.jsx(ci,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return x.jsx(ci,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return x.jsx(ci,{...s,order:6,...s,pb:12})},a({node:i,...s}){return x.jsx(c_,{...s,ref:void 0})},ul({node:i,...s}){return x.jsx(hc,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return x.jsx(hc,{type:"ordered",withPadding:!0,...o,pb:8})}};return x.jsx(yze,{components:n,rehypePlugins:[NHe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function B4({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return x.jsx(la,{text:n})}const kHe="https://github.com/revisit-studies/study/tree/main/public/";function RHe({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Fh();return x.jsx(Wr.Main,{children:x.jsxs(vl,{size:"xs",px:"xs",children:[x.jsx(Hm,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Hf}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),x.jsx(nt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Mhe(i);return x.jsx(Yi,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:x.jsxs(_y,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?x.jsxs(x.Fragment,{children:[x.jsx(nt,{fw:"bold",children:i}),x.jsxs(Jt,{align:"center",direction:"row",children:[x.jsx(sJ,{color:"red"}),x.jsx(nt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),x.jsx(B4,{issues:s.errors,type:"error"})]}):x.jsxs(x.Fragment,{children:[x.jsx(nt,{fw:"bold",children:s.studyMetadata.title}),x.jsxs(nt,{c:"dimmed",children:[x.jsx(nt,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),x.jsx(nt,{c:"dimmed",children:s.studyMetadata.description}),x.jsx(nt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:x.jsxs(c_,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${kHe}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&x.jsxs(x.Fragment,{children:[x.jsxs(Jt,{align:"center",direction:"row",children:[x.jsx(sJ,{color:"orange"}),x.jsx(nt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),x.jsx(B4,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var ame={exports:{}},ume={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT=k;function PHe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OHe=typeof Object.is=="function"?Object.is:PHe,MHe=zT.useSyncExternalStore,$He=zT.useRef,FHe=zT.useEffect,LHe=zT.useMemo,BHe=zT.useDebugValue;ume.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=$He(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=LHe(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,OHe(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=MHe(e,s[0],s[1]);return FHe(function(){o.hasValue=!0,o.value=a},[a]),BHe(a),a};ame.exports=ume;var jHe=ame.exports,_u="default"in aI?xi:aI,hZ=Symbol.for("react-redux-context"),pZ=typeof globalThis<"u"?globalThis:{};function zHe(){if(!_u.createContext)return{};const e=pZ[hZ]??(pZ[hZ]=new Map);let t=e.get(_u.createContext);return t||(t=_u.createContext(null),e.set(_u.createContext,t)),t}var hm=zHe(),UHe=()=>{throw new Error("uSES not initialized!")};function _z(e=hm){return function(){return _u.useContext(e)}}var lme=_z(),cme=UHe,VHe=e=>{cme=e},HHe=(e,t)=>e===t;function qHe(e=hm){const t=e===hm?lme:_z(e),n=(r,i={})=>{const{equalityFn:s=HHe,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();_u.useRef(!0);const d=_u.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=cme(u.addNestedSub,a.getState,l||a.getState,d,s);return _u.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var WHe=qHe();function GHe(e){e()}function YHe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){GHe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var mZ={notify(){},get:()=>[]};function KHe(e,t){let n,r=mZ,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=YHe())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=mZ)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var XHe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QHe=typeof navigator<"u"&&navigator.product==="ReactNative",JHe=XHe||QHe?_u.useLayoutEffect:_u.useEffect;function ZHe({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=_u.useMemo(()=>{const l=KHe(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=_u.useMemo(()=>e.getState(),[e]);JHe(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||hm;return _u.createElement(u.Provider,{value:o},n)}var eqe=ZHe;function fme(e=hm){const t=e===hm?lme:_z(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var tqe=fme();function nqe(e=hm){const t=e===hm?tqe:fme(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var dme=nqe();VHe(jHe.useSyncExternalStoreWithSelector);function Us(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rqe=typeof Symbol=="function"&&Symbol.observable||"@@observable",gZ=rqe,Z$=()=>Math.random().toString(36).substring(7).split("").join("."),iqe={INIT:`@@redux/INIT${Z$()}`,REPLACE:`@@redux/REPLACE${Z$()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Z$()}`},GI=iqe;function Ez(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function hme(e,t,n){if(typeof e!="function")throw new Error(Us(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Us(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Us(1));return n(hme)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Us(3));return i}function f(g){if(typeof g!="function")throw new Error(Us(4));if(u)throw new Error(Us(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Us(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!Ez(g))throw new Error(Us(7));if(typeof g.type>"u")throw new Error(Us(8));if(typeof g.type!="string")throw new Error(Us(17));if(u)throw new Error(Us(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Us(10));r=g,d({type:GI.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Us(11));function v(){const E=y;E.next&&E.next(c())}return v(),{unsubscribe:g(v)}},[gZ](){return this}}}return d({type:GI.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[gZ]:p}}function sqe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:GI.INIT})>"u")throw new Error(Us(12));if(typeof n(void 0,{type:GI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Us(13))})}function oqe(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{sqe(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Us(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function YI(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function aqe(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Us(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=YI(...a)(i.dispatch),{...i,dispatch:s}}}function uqe(e){return Ez(e)&&"type"in e&&typeof e.type=="string"}var pme=Symbol.for("immer-nothing"),yZ=Symbol.for("immer-draftable"),Pu=Symbol.for("immer-state");function ec(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ib=Object.getPrototypeOf;function pm(e){return!!e&&!!e[Pu]}function gh(e){var t;return e?mme(e)||Array.isArray(e)||!!e[yZ]||!!((t=e.constructor)!=null&&t[yZ])||AP(e)||DP(e):!1}var lqe=Object.prototype.constructor.toString();function mme(e){if(!e||typeof e!="object")return!1;const t=ib(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===lqe}function KI(e,t){CP(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function CP(e){const t=e[Pu];return t?t.type_:Array.isArray(e)?1:AP(e)?2:DP(e)?3:0}function j4(e,t){return CP(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function gme(e,t,n){const r=CP(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function cqe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function AP(e){return e instanceof Map}function DP(e){return e instanceof Set}function Rg(e){return e.copy_||e.base_}function z4(e,t){if(AP(e))return new Map(e);if(DP(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=mme(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Pu];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(ib(e),r)}else{const r=ib(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function wz(e,t=!1){return IP(e)||pm(e)||!gh(e)||(CP(e)>1&&(e.set=e.add=e.clear=e.delete=fqe),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>wz(r,!0))),e}function fqe(){ec(2)}function IP(e){return Object.isFrozen(e)}var dqe={};function k0(e){const t=dqe[e];return t||ec(0,e),t}var yS;function yme(){return yS}function hqe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vZ(e,t){t&&(k0("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function U4(e){V4(e),e.drafts_.forEach(pqe),e.drafts_=null}function V4(e){e===yS&&(yS=e.parent_)}function bZ(e){return yS=hqe(yS,e)}function pqe(e){const t=e[Pu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _Z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Pu].modified_&&(U4(t),ec(4)),gh(e)&&(e=XI(t,e),t.parent_||QI(t,e)),t.patches_&&k0("Patches").generateReplacementPatches_(n[Pu].base_,e,t.patches_,t.inversePatches_)):e=XI(t,n,[]),U4(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pme?e:void 0}function XI(e,t,n){if(IP(t))return t;const r=t[Pu];if(!r)return KI(t,(i,s)=>EZ(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return QI(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),KI(s,(a,u)=>EZ(e,r,i,a,u,n,o)),QI(e,i,!1),n&&e.patches_&&k0("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function EZ(e,t,n,r,i,s,o){if(pm(i)){const a=s&&t&&t.type_!==3&&!j4(t.assigned_,r)?s.concat(r):void 0,u=XI(e,i,a);if(gme(n,r,u),pm(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gh(i)&&!IP(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;XI(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&QI(e,i)}}function QI(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wz(t,n)}function mqe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:yme(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=xz;n&&(i=[r],s=vS);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var xz={get(e,t){if(t===Pu)return e;const n=Rg(e);if(!j4(n,t))return gqe(e,n,t);const r=n[t];return e.finalized_||!gh(r)?r:r===eF(e.base_,t)?(tF(e),e.copy_[t]=q4(r,e)):r},has(e,t){return t in Rg(e)},ownKeys(e){return Reflect.ownKeys(Rg(e))},set(e,t,n){const r=vme(Rg(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=eF(Rg(e),t),s=i==null?void 0:i[Pu];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(cqe(n,i)&&(n!==void 0||j4(e.base_,t)))return!0;tF(e),H4(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return eF(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,tF(e),H4(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Rg(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ec(11)},getPrototypeOf(e){return ib(e.base_)},setPrototypeOf(){ec(12)}},vS={};KI(xz,(e,t)=>{vS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vS.deleteProperty=function(e,t){return vS.set.call(this,e,t,void 0)};vS.set=function(e,t,n){return xz.set.call(this,e[0],t,n,e[0])};function eF(e,t){const n=e[Pu];return(n?Rg(n):e)[t]}function gqe(e,t,n){var i;const r=vme(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function vme(e,t){if(!(t in e))return;let n=ib(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ib(n)}}function H4(e){e.modified_||(e.modified_=!0,e.parent_&&H4(e.parent_))}function tF(e){e.copy_||(e.copy_=z4(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yqe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&ec(6),r!==void 0&&typeof r!="function"&&ec(7);let i;if(gh(t)){const s=bZ(this),o=q4(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?U4(s):V4(s)}return vZ(s,r),_Z(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===pme&&(i=void 0),this.autoFreeze_&&wz(i,!0),r){const s=[],o=[];k0("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else ec(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gh(e)||ec(8),pm(e)&&(e=bme(e));const t=bZ(this),n=q4(e,void 0);return n[Pu].isManual_=!0,V4(t),n}finishDraft(e,t){const n=e&&e[Pu];(!n||!n.isManual_)&&ec(9);const{scope_:r}=n;return vZ(r,t),_Z(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=k0("Patches").applyPatches_;return pm(e)?r(e,t):this.produce(e,i=>r(i,t))}};function q4(e,t){const n=AP(e)?k0("MapSet").proxyMap_(e,t):DP(e)?k0("MapSet").proxySet_(e,t):mqe(e,t);return(t?t.scope_:yme()).drafts_.push(n),n}function bme(e){return pm(e)||ec(10,e),_me(e)}function _me(e){if(!gh(e)||IP(e))return e;const t=e[Pu];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=z4(e,t.scope_.immer_.useStrictShallowCopy_)}else n=z4(e,!0);return KI(n,(r,i)=>{gme(n,r,_me(i))}),t&&(t.finalized_=!1),n}var Ou=new yqe,Eme=Ou.produce;Ou.produceWithPatches.bind(Ou);Ou.setAutoFreeze.bind(Ou);Ou.setUseStrictShallowCopy.bind(Ou);Ou.applyPatches.bind(Ou);Ou.createDraft.bind(Ou);Ou.finishDraft.bind(Ou);function vqe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function bqe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function _qe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var wZ=e=>Array.isArray(e)?e:[e];function Eqe(e){const t=Array.isArray(e[0])?e[0]:e;return _qe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wqe(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var xqe=class{constructor(e){this.value=e}deref(){return this.value}},Sqe=typeof WeakRef<"u"?WeakRef:xqe,Tqe=0,xZ=1;function jC(){return{s:Tqe,v:void 0,o:null,p:null}}function Sz(e,t={}){let n=jC();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=jC(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=jC(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===xZ)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Sqe(c):c}return l.s=xZ,l.v=c,c}return o.clearCache=()=>{n=jC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function wme(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),vqe(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=Sz,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=wZ(d),y=wZ(p),v=Eqe(i),b=f(function(){return s++,l.apply(null,arguments)},...g),E=h(function(){o++;const w=wqe(v,arguments);return a=b.apply(null,w),a},...y);return Object.assign(E,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Cqe=wme(Sz),Aqe=Object.assign((e,t=Cqe)=>{bqe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Aqe});function xme(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Dqe=xme(),Iqe=xme,Nqe=(...e)=>{const t=wme(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(pm(o)?bme(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Nqe(Sz);var kqe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?YI:YI.apply(null,arguments)};function sb(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(qa(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>uqe(r)&&r.type===e,n}var Sme=class dw extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,dw.prototype)}static get[Symbol.species](){return dw}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new dw(...t[0].concat(this)):new dw(...t.concat(this))}};function SZ(e){return gh(e)?Eme(e,()=>{}):e}function TZ(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(qa(10));const r=n.insert(t,e);return e.set(t,r),r}function Rqe(e){return typeof e=="boolean"}var Pqe=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new Sme;return n&&(Rqe(n)?o.push(Dqe):o.push(Iqe(n.extraArgument))),o},Oqe="RTK_autoBatch",Tme=e=>t=>{setTimeout(t,e)},Mqe=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Tme(10),$qe=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Mqe:e.type==="callback"?e.queueNotification:Tme(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Oqe]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Fqe=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Sme(e);return r&&i.push($qe(typeof r=="object"?r:void 0)),i},Lqe=!0;function Bqe(e){const t=Pqe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(Ez(n))a=oqe(n);else throw new Error(qa(1));let u;typeof r=="function"?u=r(t):u=t();let l=YI;i&&(l=kqe({trace:!Lqe,...typeof i=="object"&&i}));const c=aqe(...u),f=Fqe(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return hme(a,s,h)}function Cme(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(qa(28));if(a in t)throw new Error(qa(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function jqe(e){return typeof e=="function"}function zqe(e,t){let[n,r,i]=Cme(t),s;if(jqe(e))s=()=>SZ(e());else{const a=SZ(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(pm(c)){const h=f(c,u);return h===void 0?c:h}else{if(gh(c))return Eme(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(qa(9))}return d}}return c},a)}return o.getInitialState=s,o}var Uqe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vqe=(e=21)=>{let t="",n=e;for(;n--;)t+=Uqe[Math.random()*64|0];return t},Hqe=Symbol.for("rtk-slice-createasyncthunk");function qqe(e,t){return`${e}/${t}`}function Wqe({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Hqe];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(qa(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Kqe()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,E){const _=typeof b=="string"?b:b.type;if(!_)throw new Error(qa(12));if(_ in l.sliceCaseReducersByType)throw new Error(qa(13));return l.sliceCaseReducersByType[_]=E,c},addMatcher(b,E){return l.sliceMatchers.push({matcher:b,reducer:E}),c},exposeAction(b,E){return l.actionCreators[b]=E,c},exposeCaseReducer(b,E){return l.sliceCaseReducersByName[b]=E,c}};u.forEach(b=>{const E=a[b],_={reducerName:b,type:qqe(s,b),createNotation:typeof i.reducers=="function"};Qqe(E)?Zqe(_,E,c,t):Xqe(_,E,c)});function f(){const[b={},E=[],_=void 0]=typeof i.extraReducers=="function"?Cme(i.extraReducers):[i.extraReducers],w={...b,...l.sliceCaseReducersByType};return zqe(i.initialState,S=>{for(let C in w)S.addCase(C,w[C]);for(let C of l.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of E)S.addMatcher(C.matcher,C.reducer);_&&S.addDefaultCase(_)})}const d=b=>b,h=new Map;let p;function m(b,E){return p||(p=f()),p(b,E)}function g(){return p||(p=f()),p.getInitialState()}function y(b,E=!1){function _(S){let C=S[b];return typeof C>"u"&&E&&(C=g()),C}function w(S=d){const C=TZ(h,E,{insert:()=>new WeakMap});return TZ(C,S,{insert:()=>{const A={};for(const[D,I]of Object.entries(i.selectors??{}))A[D]=Gqe(I,S,g,E);return A}})}return{reducerPath:b,getSelectors:w,get selectors(){return w(_)},selectSlice:_}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:E,..._}={}){const w=E??o;return b.inject({reducerPath:w,reducer:m},_),{...v,...y(w,!0)}}};return v}}function Gqe(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Yqe=Wqe();function Kqe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Xqe({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Jqe(r))throw new Error(qa(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?sb(e,o):sb(e))}function Qqe(e){return e._reducerDefinitionType==="asyncThunk"}function Jqe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Zqe({type:e,reducerName:t},n,r,i){if(!i)throw new Error(qa(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||zC,pending:a||zC,rejected:u||zC,settled:l||zC})}function zC(){}var eWe=(e,t)=>{if(typeof e!="function")throw new Error(qa(32))},Tz="listenerMiddleware",tWe=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=sb(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qa(21));return eWe(s),{predicate:i,type:t,effect:s}},nWe=Object.assign(e=>{const{type:t,predicate:n,effect:r}=tWe(e);return{id:Vqe(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qa(22))}}},{withTypes:()=>nWe}),rWe=Object.assign(sb(`${Tz}/add`),{withTypes:()=>rWe});sb(`${Tz}/removeAll`);var iWe=Object.assign(sb(`${Tz}/remove`),{withTypes:()=>iWe});function qa(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function yh(e){return e.components.flatMap(t=>typeof t=="string"?t:yh(t))}function Ame(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:Ame(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Dme(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+yh(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+yh(e).length-1}];r+=1}else{const o=Dme(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function Ime(e,t){const n=Dme(e,t,0);return typeof n=="number"?null:n}function Nme(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Nme(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function sWe(e,t){const n=Nme(e,t,0);return n.found?n.distance:-1}function kme(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...kme(i,`${t}-${s}`))}),n}async function oWe(e,t,n,r,i){const s=yh(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Yqe({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Bqe({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const Rme=k.createContext(null);function Wf(){return k.useContext(Rme).actions}const Gf=dme,Rl=WHe;function aWe(e){return Rl(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function Cz(){return Rl(e=>yh(e.sequence))}function Cy(){const{studyId:e}=N0();return`${e}`}function Lh(){const{index:e}=N0(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Ay(){const e=Lh(),t=Cz();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var JI={exports:{}};JI.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",E="[object RegExp]",_="[object Set]",w="[object String]",S="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",D="[object DataView]",I="[object Float32Array]",O="[object Float64Array]",R="[object Int8Array]",M="[object Int16Array]",F="[object Int32Array]",P="[object Uint8Array]",j="[object Uint8ClampedArray]",z="[object Uint16Array]",V="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,B={};B[I]=B[O]=B[R]=B[M]=B[F]=B[P]=B[j]=B[z]=B[V]=!0,B[a]=B[u]=B[A]=B[c]=B[D]=B[f]=B[d]=B[h]=B[m]=B[g]=B[v]=B[E]=B[_]=B[w]=B[C]=!1;var q=typeof Hr=="object"&&Hr&&Hr.Object===Object&&Hr,Y=typeof self=="object"&&self&&self.Object===Object&&self,re=q||Y||Function("return this")(),pe=t&&!t.nodeType&&t,_e=pe&&!0&&e&&!e.nodeType&&e,de=_e&&_e.exports===pe,ye=de&&q.process,Ce=function(){try{var ne=_e&&_e.require&&_e.require("util").types;return ne||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ce&&Ce.isTypedArray;function qe(ne,fe,ke){switch(ke.length){case 0:return ne.call(fe);case 1:return ne.call(fe,ke[0]);case 2:return ne.call(fe,ke[0],ke[1]);case 3:return ne.call(fe,ke[0],ke[1],ke[2])}return ne.apply(fe,ke)}function He(ne,fe){for(var ke=-1,It=Array(ne);++ke<ne;)It[ke]=fe(ke);return It}function ht(ne){return function(fe){return ne(fe)}}function rt(ne,fe){return ne==null?void 0:ne[fe]}function Pe(ne,fe){return function(ke){return ne(fe(ke))}}var Be=Array.prototype,Xe=Function.prototype,mt=Object.prototype,Ft=re["__core-js_shared__"],bt=Xe.toString,G=mt.hasOwnProperty,ie=function(){var ne=/[^.]+$/.exec(Ft&&Ft.keys&&Ft.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),me=mt.toString,J=bt.call(Object),se=RegExp("^"+bt.call(G).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ce=de?re.Buffer:void 0,Se=re.Symbol,Te=re.Uint8Array;ce&&ce.allocUnsafe;var Ge=Pe(Object.getPrototypeOf,Object),je=Object.create,Ct=mt.propertyIsEnumerable,Ot=Be.splice,Dt=Se?Se.toStringTag:void 0,Vt=function(){try{var ne=Qe(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),Zt=ce?ce.isBuffer:void 0,an=Math.max,gr=Date.now,lr=Qe(re,"Map"),fn=Qe(Object,"create"),Xr=function(){function ne(){}return function(fe){if(!pd(fe))return{};if(je)return je(fe);ne.prototype=fe;var ke=new ne;return ne.prototype=void 0,ke}}();function er(ne){var fe=-1,ke=ne==null?0:ne.length;for(this.clear();++fe<ke;){var It=ne[fe];this.set(It[0],It[1])}}function gi(){this.__data__=fn?fn(null):{},this.size=0}function $l(ne){var fe=this.has(ne)&&delete this.__data__[ne];return this.size-=fe?1:0,fe}function Vo(ne){var fe=this.__data__;if(fn){var ke=fe[ne];return ke===r?void 0:ke}return G.call(fe,ne)?fe[ne]:void 0}function Hu(ne){var fe=this.__data__;return fn?fe[ne]!==void 0:G.call(fe,ne)}function Yn(ne,fe){var ke=this.__data__;return this.size+=this.has(ne)?0:1,ke[ne]=fn&&fe===void 0?r:fe,this}er.prototype.clear=gi,er.prototype.delete=$l,er.prototype.get=Vo,er.prototype.has=Hu,er.prototype.set=Yn;function Lr(ne){var fe=-1,ke=ne==null?0:ne.length;for(this.clear();++fe<ke;){var It=ne[fe];this.set(It[0],It[1])}}function yr(){this.__data__=[],this.size=0}function ao(ne){var fe=this.__data__,ke=bn(fe,ne);if(ke<0)return!1;var It=fe.length-1;return ke==It?fe.pop():Ot.call(fe,ke,1),--this.size,!0}function Ms(ne){var fe=this.__data__,ke=bn(fe,ne);return ke<0?void 0:fe[ke][1]}function $s(ne){return bn(this.__data__,ne)>-1}function ue(ne,fe){var ke=this.__data__,It=bn(ke,ne);return It<0?(++this.size,ke.push([ne,fe])):ke[It][1]=fe,this}Lr.prototype.clear=yr,Lr.prototype.delete=ao,Lr.prototype.get=Ms,Lr.prototype.has=$s,Lr.prototype.set=ue;function te(ne){var fe=-1,ke=ne==null?0:ne.length;for(this.clear();++fe<ke;){var It=ne[fe];this.set(It[0],It[1])}}function le(){this.size=0,this.__data__={hash:new er,map:new(lr||Lr),string:new er}}function De(ne){var fe=Ke(this,ne).delete(ne);return this.size-=fe?1:0,fe}function Ae(ne){return Ke(this,ne).get(ne)}function at(ne){return Ke(this,ne).has(ne)}function St(ne,fe){var ke=Ke(this,ne),It=ke.size;return ke.set(ne,fe),this.size+=ke.size==It?0:1,this}te.prototype.clear=le,te.prototype.delete=De,te.prototype.get=Ae,te.prototype.has=at,te.prototype.set=St;function Xt(ne){var fe=this.__data__=new Lr(ne);this.size=fe.size}function _n(){this.__data__=new Lr,this.size=0}function Sn(ne){var fe=this.__data__,ke=fe.delete(ne);return this.size=fe.size,ke}function un(ne){return this.__data__.get(ne)}function Mn(ne){return this.__data__.has(ne)}function tr(ne,fe){var ke=this.__data__;if(ke instanceof Lr){var It=ke.__data__;if(!lr||It.length<n-1)return It.push([ne,fe]),this.size=++ke.size,this;ke=this.__data__=new te(It)}return ke.set(ne,fe),this.size=ke.size,this}Xt.prototype.clear=_n,Xt.prototype.delete=Sn,Xt.prototype.get=un,Xt.prototype.has=Mn,Xt.prototype.set=tr;function Ht(ne,fe){var ke=dd(ne),It=!ke&&ba(ne),Dn=!ke&&!It&&hd(ne),or=!ke&&!It&&!Dn&&rC(ne),xr=ke||It||Dn||or,kn=xr?He(ne.length,String):[],Sr=kn.length;for(var Ni in ne)xr&&(Ni=="length"||Dn&&(Ni=="offset"||Ni=="parent")||or&&(Ni=="buffer"||Ni=="byteLength"||Ni=="byteOffset")||xt(Ni,Sr))||kn.push(Ni);return kn}function $n(ne,fe,ke){(ke!==void 0&&!Wu(ne[fe],ke)||ke===void 0&&!(fe in ne))&&Gt(ne,fe,ke)}function cr(ne,fe,ke){var It=ne[fe];(!(G.call(ne,fe)&&Wu(It,ke))||ke===void 0&&!(fe in ne))&&Gt(ne,fe,ke)}function bn(ne,fe){for(var ke=ne.length;ke--;)if(Wu(ne[ke][0],fe))return ke;return-1}function Gt(ne,fe,ke){fe=="__proto__"&&Vt?Vt(ne,fe,{configurable:!0,enumerable:!0,value:ke,writable:!0}):ne[fe]=ke}var Hn=$e();function vr(ne){return ne==null?ne===void 0?S:y:Dt&&Dt in Object(ne)?Je(ne):lo(ne)}function yi(ne){return _a(ne)&&vr(ne)==a}function br(ne){if(!pd(ne)||Nn(ne))return!1;var fe=aE(ne)?se:U;return fe.test(eC(ne))}function Qr(ne){return _a(ne)&&nC(ne.length)&&!!B[vr(ne)]}function uo(ne){if(!pd(ne))return dr(ne);var fe=fr(ne),ke=[];for(var It in ne)It=="constructor"&&(fe||!G.call(ne,It))||ke.push(It);return ke}function Ho(ne,fe,ke,It,Dn){ne!==fe&&Hn(fe,function(or,xr){if(Dn||(Dn=new Xt),pd(or))ps(ne,fe,xr,ke,Ho,It,Dn);else{var kn=It?It(fd(ne,xr),or,xr+"",ne,fe,Dn):void 0;kn===void 0&&(kn=or),$n(ne,xr,kn)}},pg)}function ps(ne,fe,ke,It,Dn,or,xr){var kn=fd(ne,ke),Sr=fd(fe,ke),Ni=xr.get(Sr);if(Ni){$n(ne,ke,Ni);return}var co=or?or(kn,Sr,ke+"",ne,fe,xr):void 0,gg=co===void 0;if(gg){var md=dd(Sr),t1=!md&&hd(Sr),n1=!md&&!t1&&rC(Sr);co=Sr,md||t1||n1?dd(kn)?co=kn:tC(kn)?co=ge(kn):t1?(gg=!1,co=K(Sr)):n1?(gg=!1,co=ee(Sr)):co=[]:UM(Sr)||ba(Sr)?(co=kn,ba(kn)?co=hg(kn):(!pd(kn)||aE(kn))&&(co=ct(Sr))):gg=!1}gg&&(xr.set(Sr,co),Dn(co,Sr,It,or,xr),xr.delete(Sr)),$n(ne,ke,co)}function qu(ne,fe){return oE(Vc(ne,fe,Xh),ne+"")}var Uc=Vt?function(ne,fe){return Vt(ne,"toString",{configurable:!0,enumerable:!1,value:mg(fe),writable:!0})}:Xh;function K(ne,fe){return ne.slice()}function ae(ne){var fe=new ne.constructor(ne.byteLength);return new Te(fe).set(new Te(ne)),fe}function ee(ne,fe){var ke=ae(ne.buffer);return new ne.constructor(ke,ne.byteOffset,ne.length)}function ge(ne,fe){var ke=-1,It=ne.length;for(fe||(fe=Array(It));++ke<It;)fe[ke]=ne[ke];return fe}function be(ne,fe,ke,It){var Dn=!ke;ke||(ke={});for(var or=-1,xr=fe.length;++or<xr;){var kn=fe[or],Sr=void 0;Sr===void 0&&(Sr=ne[kn]),Dn?Gt(ke,kn,Sr):cr(ke,kn,Sr)}return ke}function he(ne){return qu(function(fe,ke){var It=-1,Dn=ke.length,or=Dn>1?ke[Dn-1]:void 0,xr=Dn>2?ke[2]:void 0;for(or=ne.length>3&&typeof or=="function"?(Dn--,or):void 0,xr&&pn(ke[0],ke[1],xr)&&(or=Dn<3?void 0:or,Dn=1),fe=Object(fe);++It<Dn;){var kn=ke[It];kn&&ne(fe,kn,It,or)}return fe})}function $e(ne){return function(fe,ke,It){for(var Dn=-1,or=Object(fe),xr=It(fe),kn=xr.length;kn--;){var Sr=xr[++Dn];if(ke(or[Sr],Sr,or)===!1)break}return fe}}function Ke(ne,fe){var ke=ne.__data__;return Mt(fe)?ke[typeof fe=="string"?"string":"hash"]:ke.map}function Qe(ne,fe){var ke=rt(ne,fe);return br(ke)?ke:void 0}function Je(ne){var fe=G.call(ne,Dt),ke=ne[Dt];try{ne[Dt]=void 0;var It=!0}catch{}var Dn=me.call(ne);return It&&(fe?ne[Dt]=ke:delete ne[Dt]),Dn}function ct(ne){return typeof ne.constructor=="function"&&!fr(ne)?Xr(Ge(ne)):{}}function xt(ne,fe){var ke=typeof ne;return fe=fe??o,!!fe&&(ke=="number"||ke!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<fe}function pn(ne,fe,ke){if(!pd(ke))return!1;var It=typeof fe;return(It=="number"?e1(ke)&&xt(fe,ke.length):It=="string"&&fe in ke)?Wu(ke[fe],ne):!1}function Mt(ne){var fe=typeof ne;return fe=="string"||fe=="number"||fe=="symbol"||fe=="boolean"?ne!=="__proto__":ne===null}function Nn(ne){return!!ie&&ie in ne}function fr(ne){var fe=ne&&ne.constructor,ke=typeof fe=="function"&&fe.prototype||mt;return ne===ke}function dr(ne){var fe=[];if(ne!=null)for(var ke in Object(ne))fe.push(ke);return fe}function lo(ne){return me.call(ne)}function Vc(ne,fe,ke){return fe=an(fe===void 0?ne.length-1:fe,0),function(){for(var It=arguments,Dn=-1,or=an(It.length-fe,0),xr=Array(or);++Dn<or;)xr[Dn]=It[fe+Dn];Dn=-1;for(var kn=Array(fe+1);++Dn<fe;)kn[Dn]=It[Dn];return kn[fe]=ke(xr),qe(ne,this,kn)}}function fd(ne,fe){if(!(fe==="constructor"&&typeof ne[fe]=="function")&&fe!="__proto__")return ne[fe]}var oE=dg(Uc);function dg(ne){var fe=0,ke=0;return function(){var It=gr(),Dn=s-(It-ke);if(ke=It,Dn>0){if(++fe>=i)return arguments[0]}else fe=0;return ne.apply(void 0,arguments)}}function eC(ne){if(ne!=null){try{return bt.call(ne)}catch{}try{return ne+""}catch{}}return""}function Wu(ne,fe){return ne===fe||ne!==ne&&fe!==fe}var ba=yi(function(){return arguments}())?yi:function(ne){return _a(ne)&&G.call(ne,"callee")&&!Ct.call(ne,"callee")},dd=Array.isArray;function e1(ne){return ne!=null&&nC(ne.length)&&!aE(ne)}function tC(ne){return _a(ne)&&e1(ne)}var hd=Zt||sC;function aE(ne){if(!pd(ne))return!1;var fe=vr(ne);return fe==h||fe==p||fe==l||fe==b}function nC(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function pd(ne){var fe=typeof ne;return ne!=null&&(fe=="object"||fe=="function")}function _a(ne){return ne!=null&&typeof ne=="object"}function UM(ne){if(!_a(ne)||vr(ne)!=v)return!1;var fe=Ge(ne);if(fe===null)return!0;var ke=G.call(fe,"constructor")&&fe.constructor;return typeof ke=="function"&&ke instanceof ke&&bt.call(ke)==J}var rC=ve?ht(ve):Qr;function hg(ne){return be(ne,pg(ne))}function pg(ne){return e1(ne)?Ht(ne):uo(ne)}var iC=he(function(ne,fe,ke){Ho(ne,fe,ke)});function mg(ne){return function(){return ne}}function Xh(ne){return ne}function sC(){return!1}e.exports=iC})(JI,JI.exports);var uWe=JI.exports;const Az=ha(uWe);function d0(e){return structuredClone(e)}function Dz(){const{answers:e}=Rl(i=>i),t=Lh(),r=`${Ay()}_${t}`;return e[r]}const Pme=k.createContext(null);function lWe(){const e=k.useContext(Pme);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function vh(){return Rl(e=>e.config)}function CZ(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function cWe(){const e=Lh(),t=Cz(),r=`${Ay()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Rl(w=>w),a=Gf(),{saveTrialAnswer:u,setIframeAnswers:l}=Wf(),{storageEngine:c}=Qi(),f=Cy(),[d,h]=k.useState(!0);k.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=aWe(r),m=typeof e!="number"||!p,g=Dz(),y=Fh(),v=vh(),b=k.useMemo(()=>Date.now(),[]),E=lWe(),_=k.useCallback(()=>{if(typeof e!="number")return;const w=d0(i[r]),S=Object.values(w).reduce((F,P)=>Object.hasOwn(P,"values")?{...F,...P.values}:F,{}),{provenanceGraph:C}=w,A=Date.now(),D=E&&"current"in E&&E.current?E.current.splice(0,E.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:D})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:D}}),a(l({})));let I=e+1;const O=Ime(s,e),R=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),M={...o,[r]:{answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:D}};R&&[...O.flatMap(P=>P.currentBlock.skip?P.currentBlock.skip.map(j=>({...j,firstIndex:P.firstIndex,lastIndex:P.lastIndex})):[])].some(P=>{let j=!1;const z=Object.fromEntries(Object.entries(M).filter(([$])=>{const U=parseInt($.slice($.lastIndexOf("_")+1),10);return U>=P.firstIndex&&U<=e})),V=P.check!=="block"?Object.entries(z).filter(([$])=>$.slice(0,$.lastIndexOf("_"))===P.name):Object.entries(z);if(V.length===0)return!1;if(V.some(([$,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(P,null,2)}`);if(P.check==="response"||P.check==="responses"){const[$,U]=V[0];P.check==="response"?j=P.value!==U.answer[P.responseId]:j=!CZ(U.answer,$,v.components[$.slice(0,$.lastIndexOf("_"))],v)}else if(P.check==="block"||P.check==="repeatedComponent"){if(V.length<P.value)return!1;const $=V.map(([B,q])=>CZ(q.answer,B,v.components[B.slice(0,B.lastIndexOf("_"))],v)),U=$.filter(B=>B).length,W=$.length-U;j=P.condition==="numCorrect"&&U===P.value||P.condition==="numIncorrect"&&W===P.value}if(j){const $=t.indexOf(P.to),U=$===-1?sWe(s,P.to):-1;return I=$===-1?U:$,!0}return!1}),y(`/${f}/${I}${window.location.search}`)},[i,r,E,g,e,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:_}}function fWe({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=cWe(),o=k.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return x.jsx(Ln,{type:"submit",disabled:t||i,onClick:o,children:e})}function dWe(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const hWe=typeof window<"u"?k.useLayoutEffect:k.useEffect;function Ls(e,t){hWe(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function pWe(e,t){e&&dWe(e),Ls(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Ls(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Ls(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Ls(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Ls(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Ls(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Ls(`mantine-form:${e}:clear-errors`,t.clearErrors),Ls(`mantine-form:${e}:reset`,t.reset),Ls(`mantine-form:${e}:validate`,t.validate),Ls(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Ls(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Ls(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Ls(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Ls(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Ls(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Ls(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Ls(`mantine-form:${e}:reset-touched`,t.resetTouched)}function mWe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function W4(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function gWe(e){const[t,n]=k.useState(W4(e)),r=k.useRef(t),i=k.useCallback(u=>{n(l=>{const c=W4(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=k.useCallback(()=>i({}),[]),o=k.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=k.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Ome(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function AZ(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function DZ(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Ome(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=AZ(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=AZ(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function yWe(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function IZ(e,t,n){typeof n.value=="object"&&(n.value=ev(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function ev(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(ev(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(ev(a),ev(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(ev(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)IZ(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||IZ(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Mme(e){return typeof e!="string"?[]:e.split(".")}function Fa(e,t){const n=Mme(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function NP(e,t,n){const r=Mme(e);if(r.length===0)return n;const i=ev(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function vWe(e,{from:t,to:n},r){const i=Fa(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),NP(e,s,r)}function bWe(e,t,n,r){const i=Fa(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),NP(e,s,r)}function _We(e,t,n){const r=Fa(e,n);return Array.isArray(r)?NP(e,r.filter((i,s)=>s!==t),n):n}function EWe({$values:e,$errors:t,$status:n}){const r=k.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>yWe(o,a,u)),e.setValues({values:vWe(o,a,e.refValues.current),updateState:!0})},[]),i=k.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>DZ(o,a,u,-1)),e.setValues({values:_We(o,a,e.refValues.current),updateState:!0})},[]),s=k.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>DZ(o,u,l,1)),e.setValues({values:bWe(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var Iz=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const vD=ha(Iz);function UC(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function wWe({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=k.useState(t),[o,a]=k.useState(e),u=k.useRef(t),l=k.useRef(e),c=k.useCallback(_=>{const w=typeof _=="function"?_(u.current):_;u.current=w,n==="controlled"&&s(w)},[]),f=k.useCallback(_=>{const w=typeof _=="function"?_(l.current):_;l.current=w,n==="controlled"&&a(w)},[]),d=k.useCallback(()=>c({}),[]),h=_=>{const w=_?{..._,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(w),f({})},p=k.useCallback((_,w)=>{c(S=>UC(S,_)===w?S:{...S,[_]:w})},[]),m=k.useCallback((_,w)=>{f(S=>UC(S,_)===w?S:{...S,[_]:w})},[]),g=k.useCallback(_=>UC(u.current,_),[]),y=k.useCallback(_=>f(w=>{if(typeof _!="string")return w;const S=Ome(_,w);return delete S[_],vD(S,w)?w:S}),[]),v=k.useCallback(_=>{if(_){const S=Fa(_,l.current);if(typeof S=="boolean")return S;const C=Fa(_,r.refValues.current),A=Fa(_,r.valuesSnapshot.current);return!vD(C,A)}return Object.keys(l.current).length>0?UC(l.current):!vD(r.refValues.current,r.valuesSnapshot.current)},[]),b=k.useCallback(()=>l.current,[]),E=k.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:E}}function xWe({initialValues:e,onValuesChange:t,mode:n}){const r=k.useRef(!1),[i,s]=k.useState(e||{}),o=k.useRef(i),a=k.useRef(i),u=k.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,E=y?{...v,...b}:b;o.current=E,g&&s(E),t==null||t(E,v),m==null||m.filter(Boolean).forEach(_=>_({updatedValues:E,previousValues:v}))},[t]),l=k.useCallback(p=>{var y;const m=Fa(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=NP(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(E=>E({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=k.useCallback(p=>{a.current=p},[]),f=k.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=k.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=k.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function SWe({$status:e}){const t=k.useRef({}),n=k.useCallback((i,s)=>{k.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=k.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Fa(i,o.previousValues),value:Fa(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function NZ(e,t){return e?`${e}-${t.toString()}`:t.toString()}function kZ(e){const t=W4(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function G4(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Fa(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>G4(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||G4(o,t,a,i)),i},r)}function Y4(e,t){return kZ(typeof e=="function"?e(t):G4(e,t))}function VC(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=Y4(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const TWe="__MANTINE_FORM_INDEX__";function RZ(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${TWe}`)):!1:!1}function $me({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=gWe(r),p=xWe({initialValues:n,onValuesChange:l,mode:t}),m=wWe({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=EWe({$values:p,$errors:h,$status:m}),y=SWe({$status:m}),[v,b]=k.useState(0),[E,_]=k.useState({}),w=k.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b($=>$+1)},[]),S=k.useCallback($=>{p.initialize($,()=>t==="uncontrolled"&&b(U=>U+1))},[]),C=k.useCallback(($,U,W)=>{const B=RZ($,a);m.clearFieldDirty($),m.setFieldTouched($,!0),!B&&o&&h.clearFieldError($),p.setFieldValue({path:$,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers($),B?q=>{const Y=VC($,d,q.updatedValues);Y.hasError?h.setFieldError($,Y.error):h.clearFieldError($)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>_(q=>({...q,[$]:(q[$]||0)+1})):null]})},[l,d]),A=k.useCallback($=>{const U=p.refValues.current;p.setValues({values:$,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const B=Fa(W,p.refValues.current),q=Fa(W,U);B!==q&&y.getFieldSubscribers(W).forEach(Y=>Y({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),D=k.useCallback(()=>{const $=Y4(d,p.refValues.current);return h.setErrors($.errors),$},[d]),I=k.useCallback($=>{const U=VC($,d,p.refValues.current);return U.hasError?h.setFieldError($,U.error):h.clearFieldError($),U},[d]),O=($,{type:U="input",withError:W=!0,withFocus:B=!0,...q}={})=>{const re={onChange:mWe(pe=>C($,pe,{forceUpdate:!1})),"data-path":NZ(e,$)};return W&&(re.error=h.errorsState[$]),U==="checkbox"?re[t==="controlled"?"checked":"defaultChecked"]=Fa($,p.refValues.current):re[t==="controlled"?"value":"defaultValue"]=Fa($,p.refValues.current),B&&(re.onFocus=()=>m.setFieldTouched($,!0),re.onBlur=()=>{if(RZ($,u)){const pe=VC($,d,p.refValues.current);pe.hasError?h.setFieldError($,pe.error):h.clearFieldError($)}}),Object.assign(re,f==null?void 0:f({inputProps:re,field:$,options:{type:U,withError:W,withFocus:B,...q},form:V}))},R=($,U)=>W=>{W==null||W.preventDefault();const B=D();B.hasErrors?U==null||U(B.errors,p.refValues.current,W):$==null||$(c(p.refValues.current),W)},M=$=>c($||p.refValues.current),F=k.useCallback($=>{$.preventDefault(),w()},[]),P=k.useCallback($=>$?!VC($,d,p.refValues.current).hasError:!Y4(d,p.refValues.current).hasErrors,[d]),j=$=>`${v}-${$}-${E[$]||0}`,z=k.useCallback($=>document.querySelector(`[data-path="${NZ(e,$)}"]`),[]),V={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:w,validate:D,validateField:I,getInputProps:O,onSubmit:R,onReset:F,isValid:P,getTransformedValues:M,key:j,getInputNode:z};return pWe(e,V),V}function CWe(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function AWe(e){return CWe(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const DWe=new URLSearchParams(window.location.search),IWe=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?DWe.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},NWe=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function kWe(e,t,n){const[r,i]=k.useState(null),s=$me({initialValues:IWe(e,n),validate:NWe(e)});return k.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Dy(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function RWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return x.jsx(hh.Group,{label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:s,required:o})})]}),description:u,...n,error:Dy(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:x.jsx(ro,{mt:"xs",children:a.map(l=>x.jsx(hh,{disabled:t,value:l.value,label:l.label},l.value))})})}function PWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return x.jsx(PT,{disabled:t,label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Dy(e,n,u)})}function OWe({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return x.jsx(Yr.Wrapper,{label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${n}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:i,required:s})})]}),description:o,size:"md",children:x.jsx(hc,{children:Array.isArray(t.value)?t.value.map(a=>x.jsx(hc.Item,{children:a},a)):x.jsx(hc.Item,{children:t.value})})})}function Fme({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return x.jsx(ph.Group,{name:`radioInput${e.id}`,label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:s,required:o})})]}),description:c,...n,error:Dy(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:x.jsxs(ro,{mt:"xs",children:[u?x.jsx(nt,{style:{textAlign:"center"},children:u}):null,a.map(f=>x.jsx(ph,{disabled:t,value:f.value,label:f.label},f.label)),x.jsx(nt,{children:l})]})},e.id)}function MWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return x.jsx(Fme,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function $We({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return x.jsx(Pj,{disabled:t,placeholder:l,label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Dy(e,n)})}function FWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Dy(e,n);return x.jsx(Yr.Wrapper,{label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:x.jsx(Lj,{disabled:t,marks:a,...n,h:40})})}function LWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return x.jsx(f0,{disabled:t,placeholder:s,label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Dy(e,n)})}function BWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return x.jsx(Ej,{disabled:t,placeholder:s,label:x.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&x.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),x.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:x.jsx(la,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Dy(e,n)})}function jWe({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=Qj(),u=vh().uiConfig.enumerateQuestions??!1,l=k.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return x.jsxs(we,{mb:"md",children:[e.type==="numerical"&&x.jsx($We,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&x.jsx(LWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&x.jsx(BWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&x.jsx(MWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&x.jsx(PWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&x.jsx(FWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&x.jsx(Fme,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&x.jsx(RWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&x.jsx(OWe,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function ZI({config:e,location:t,status:n,style:r}){var E;const i=Lh(),s=Ay(),o=n==null?void 0:n.answer,a=e,u=k.useMemo(()=>{var _;return((_=a==null?void 0:a.response)==null?void 0:_.filter(w=>w.location?w.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Gf(),{updateResponseBlockValidation:c}=Wf(),f=kWe(u,i,o||{}),[d,h]=k.useState(void 0),[p,m]=k.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Rl(_=>_),v=(a==null?void 0:a.provideFeedback)&&(((E=a==null?void 0:a.correctAnswer)==null?void 0:E.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return k.useEffect(()=>{const _=u.find(w=>w.type==="iframe");if(g&&_){const w=_.id;f.setValues({...f.values,[w]:g[w]})}},[g]),k.useEffect(()=>{y&&h(y)},[y]),k.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:d0(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),x.jsxs("div",{style:r,children:[u.map((_,w)=>{var S,C;return x.jsx(xi.Fragment,{children:_.hidden?"":x.jsxs(x.Fragment,{children:[x.jsx(jWe,{storedAnswer:o?o[_.id]:void 0,answer:{...f.getInputProps(_.id,{type:_.type==="checkbox"?"checkbox":"input"})},response:_,index:w+1}),v&&p&&x.jsx(nt,{children:`The correct answer is: ${(C=(S=a.correctAnswer)==null?void 0:S.find(A=>A.id===_.id))==null?void 0:C.answer}`})]})},`${_.id}-${i}`)}),x.jsxs(ro,{justify:"right",gap:"xs",children:[v&&b&&x.jsx(Ln,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&x.jsx(fWe,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const SE="@REVISIT_COMMS",zWe={minHeight:"500px",width:"100%",border:0};function UWe({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Wf(),r=Gf(),i=dme(),s=k.useRef(null),o=k.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ay(),u=Fh(),l=k.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${SE}/${c}`,iframeId:o,message:f},"*")},[s,o]);return k.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${SE}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${SE}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${SE}/ANSWERS`:r(t(d.message));break;case`${SE}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),x.jsx("iframe",{ref:s,src:`${Hf}${e.path}?trialid=${a}&id=${o}`,style:zWe})}async function Nz(e){const n=await(await fetch(`${Hf}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function R0({email:e,path:t}){const n=xy();return x.jsxs(vl,{fluid:!0,my:50,maw:800,mx:"auto",children:[x.jsx(ci,{order:2,children:x.jsx(nt,{span:!0,c:"orange",children:"404"})}),x.jsxs(nt,{children:[x.jsx(nt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),x.jsx(dl,{h:"lg"}),x.jsxs(hc,{children:[x.jsx(hc.Item,{children:x.jsx(nt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),x.jsx(hc.Item,{children:x.jsxs(nt,{children:["If you're a participant, please contact the study administrator"," ",e&&x.jsxs(x.Fragment,{children:["at"," ",x.jsxs(c_,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const VWe={maxWidth:"100%"};function HWe({currentConfig:e}){const t={...VWe,...e.style},[n,r]=k.useState(!0),[i,s]=k.useState(!1);return k.useEffect(()=>{async function o(){const a=await Nz(e.path);s(!!a),r(!1)}o()},[e]),n||i?x.jsx(Hm,{mx:"auto",src:`${Hf}${e.path}`,style:t}):x.jsx(R0,{path:e.path})}function Xd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qWe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x_(e){let t,n,r;e.length!==2?(t=Xd,n=(a,u)=>Xd(e(a),u),r=(a,u)=>e(a)-u):(t=e===Xd||e===qWe?e:WWe,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function WWe(){return 0}function Lme(e){return e===null?NaN:+e}function*GWe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Bme=x_(Xd),mm=Bme.right,YWe=Bme.left;x_(Lme).center;function KWe(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function XWe(e,t){const n=KWe(e,t);return n&&Math.sqrt(n)}class oa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class PZ extends Map{constructor(t,n=Ume){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(K4(this,t))}has(t){return super.has(K4(this,t))}set(t,n){return super.set(jme(this,t),n)}delete(t){return super.delete(zme(this,t))}}class eN extends Set{constructor(t,n=Ume){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(K4(this,t))}add(t){return super.add(jme(this,t))}delete(t){return super.delete(zme(this,t))}}function K4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function jme({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function zme({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ume(e){return e!==null&&typeof e=="object"?e.valueOf():e}function QWe(e,t){return Array.from(t,n=>e[n])}function JWe(e=Xd){if(e===Xd)return Vme;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Vme(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ZWe=Math.sqrt(50),eGe=Math.sqrt(10),tGe=Math.sqrt(2);function tN(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=ZWe?10:s>=eGe?5:s>=tGe?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?tN(e,t,n*2):[a,u,l]}function X4(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?tN(t,e,n):tN(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function Q4(e,t,n){return t=+t,e=+e,n=+n,tN(e,t,n)[2]}function gm(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Q4(t,e,n):Q4(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function pc(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function P0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Hme(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Vme:JWe(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Hme(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(TE(e,n,t),i(e[r],s)>0&&TE(e,n,r);o<a;){for(TE(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?TE(e,n,a):(++a,TE(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function TE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function J4(e,t,n){if(e=Float64Array.from(GWe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return P0(e);if(t>=1)return pc(e);var r,i=(r-1)*t,s=Math.floor(i),o=pc(Hme(e,s).subarray(0,s+1)),a=P0(e.subarray(s+1));return o+(a-o)*(i-s)}}function qme(e,t,n=Lme){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function nGe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Wme(e,t){return J4(e,.5,t)}function*rGe(e){for(const t of e)yield*t}function Gme(e){return Array.from(rGe(e))}function Eu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Yme(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function iGe(e,...t){e=new eN(e),t=t.map(sGe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function sGe(e){return e instanceof eN?e:new eN(e)}function oGe(...e){const t=new eN;for(const n of e)for(const r of n)t.add(r);return t}function Yf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Gm(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Z4=Symbol("implicit");function kz(){var e=new PZ,t=[],n=[],r=Z4;function i(s){let o=e.get(s);if(o===void 0){if(r!==Z4)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new PZ;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return kz(t,n).unknown(r)},Yf.apply(i,arguments),i}function S_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function UT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ym(){}var O0=.7,ob=1/O0,Tv="\\s*([+-]?\\d+)\\s*",bS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aGe=/^#([0-9a-f]{3,8})$/,uGe=new RegExp(`^rgb\\(${Tv},${Tv},${Tv}\\)$`),lGe=new RegExp(`^rgb\\(${bf},${bf},${bf}\\)$`),cGe=new RegExp(`^rgba\\(${Tv},${Tv},${Tv},${bS}\\)$`),fGe=new RegExp(`^rgba\\(${bf},${bf},${bf},${bS}\\)$`),dGe=new RegExp(`^hsl\\(${bS},${bf},${bf}\\)$`),hGe=new RegExp(`^hsla\\(${bS},${bf},${bf},${bS}\\)$`),OZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};S_(Ym,M0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MZ,formatHex:MZ,formatHex8:pGe,formatHsl:mGe,formatRgb:$Z,toString:$Z});function MZ(){return this.rgb().formatHex()}function pGe(){return this.rgb().formatHex8()}function mGe(){return Kme(this).formatHsl()}function $Z(){return this.rgb().formatRgb()}function M0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=aGe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?FZ(t):n===3?new ws(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?HC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?HC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uGe.exec(e))?new ws(t[1],t[2],t[3],1):(t=lGe.exec(e))?new ws(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cGe.exec(e))?HC(t[1],t[2],t[3],t[4]):(t=fGe.exec(e))?HC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dGe.exec(e))?jZ(t[1],t[2]/100,t[3]/100,1):(t=hGe.exec(e))?jZ(t[1],t[2]/100,t[3]/100,t[4]):OZ.hasOwnProperty(e)?FZ(OZ[e]):e==="transparent"?new ws(NaN,NaN,NaN,0):null}function FZ(e){return new ws(e>>16&255,e>>8&255,e&255,1)}function HC(e,t,n,r){return r<=0&&(e=t=n=NaN),new ws(e,t,n,r)}function Rz(e){return e instanceof Ym||(e=M0(e)),e?(e=e.rgb(),new ws(e.r,e.g,e.b,e.opacity)):new ws}function ym(e,t,n,r){return arguments.length===1?Rz(e):new ws(e,t,n,r??1)}function ws(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}S_(ws,ym,UT(Ym,{brighter(e){return e=e==null?ob:Math.pow(ob,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?O0:Math.pow(O0,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ws(h0(this.r),h0(this.g),h0(this.b),nN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LZ,formatHex:LZ,formatHex8:gGe,formatRgb:BZ,toString:BZ}));function LZ(){return`#${t0(this.r)}${t0(this.g)}${t0(this.b)}`}function gGe(){return`#${t0(this.r)}${t0(this.g)}${t0(this.b)}${t0((isNaN(this.opacity)?1:this.opacity)*255)}`}function BZ(){const e=nN(this.opacity);return`${e===1?"rgb(":"rgba("}${h0(this.r)}, ${h0(this.g)}, ${h0(this.b)}${e===1?")":`, ${e})`}`}function nN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function h0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function t0(e){return e=h0(e),(e<16?"0":"")+e.toString(16)}function jZ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tc(e,t,n,r)}function Kme(e){if(e instanceof tc)return new tc(e.h,e.s,e.l,e.opacity);if(e instanceof Ym||(e=M0(e)),!e)return new tc;if(e instanceof tc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new tc(o,a,u,e.opacity)}function rN(e,t,n,r){return arguments.length===1?Kme(e):new tc(e,t,n,r??1)}function tc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}S_(tc,rN,UT(Ym,{brighter(e){return e=e==null?ob:Math.pow(ob,e),new tc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?O0:Math.pow(O0,e),new tc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ws(nF(e>=240?e-240:e+120,i,r),nF(e,i,r),nF(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new tc(zZ(this.h),qC(this.s),qC(this.l),nN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nN(this.opacity);return`${e===1?"hsl(":"hsla("}${zZ(this.h)}, ${qC(this.s)*100}%, ${qC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zZ(e){return e=(e||0)%360,e<0?e+360:e}function qC(e){return Math.max(0,Math.min(1,e||0))}function nF(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xme=Math.PI/180,Qme=180/Math.PI,iN=18,Jme=.96422,Zme=1,ege=.82521,tge=4/29,Cv=6/29,nge=3*Cv*Cv,yGe=Cv*Cv*Cv;function rge(e){if(e instanceof _f)return new _f(e.l,e.a,e.b,e.opacity);if(e instanceof Fd)return ige(e);e instanceof ws||(e=Rz(e));var t=oF(e.r),n=oF(e.g),r=oF(e.b),i=rF((.2225045*t+.7168786*n+.0606169*r)/Zme),s,o;return t===n&&n===r?s=o=i:(s=rF((.4360747*t+.3850649*n+.1430804*r)/Jme),o=rF((.0139322*t+.0971045*n+.7141733*r)/ege)),new _f(116*i-16,500*(s-i),200*(i-o),e.opacity)}function sN(e,t,n,r){return arguments.length===1?rge(e):new _f(e,t,n,r??1)}function _f(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}S_(_f,sN,UT(Ym,{brighter(e){return new _f(this.l+iN*(e??1),this.a,this.b,this.opacity)},darker(e){return new _f(this.l-iN*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Jme*iF(t),e=Zme*iF(e),n=ege*iF(n),new ws(sF(3.1338561*t-1.6168667*e-.4906146*n),sF(-.9787684*t+1.9161415*e+.033454*n),sF(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function rF(e){return e>yGe?Math.pow(e,1/3):e/nge+tge}function iF(e){return e>Cv?e*e*e:nge*(e-tge)}function sF(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function oF(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vGe(e){if(e instanceof Fd)return new Fd(e.h,e.c,e.l,e.opacity);if(e instanceof _f||(e=rge(e)),e.a===0&&e.b===0)return new Fd(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Qme;return new Fd(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function oN(e,t,n,r){return arguments.length===1?vGe(e):new Fd(e,t,n,r??1)}function Fd(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ige(e){if(isNaN(e.h))return new _f(e.l,0,0,e.opacity);var t=e.h*Xme;return new _f(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}S_(Fd,oN,UT(Ym,{brighter(e){return new Fd(this.h,this.c,this.l+iN*(e??1),this.opacity)},darker(e){return new Fd(this.h,this.c,this.l-iN*(e??1),this.opacity)},rgb(){return ige(this).rgb()}}));var sge=-.14861,Pz=1.78277,Oz=-.29227,kP=-.90649,_S=1.97294,UZ=_S*kP,VZ=_S*Pz,HZ=Pz*Oz-kP*sge;function bGe(e){if(e instanceof p0)return new p0(e.h,e.s,e.l,e.opacity);e instanceof ws||(e=Rz(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(HZ*r+UZ*t-VZ*n)/(HZ+UZ-VZ),s=r-i,o=(_S*(n-i)-Oz*s)/kP,a=Math.sqrt(o*o+s*s)/(_S*i*(1-i)),u=a?Math.atan2(o,s)*Qme-120:NaN;return new p0(u<0?u+360:u,a,i,e.opacity)}function e5(e,t,n,r){return arguments.length===1?bGe(e):new p0(e,t,n,r??1)}function p0(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}S_(p0,e5,UT(Ym,{brighter(e){return e=e==null?ob:Math.pow(ob,e),new p0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?O0:Math.pow(O0,e),new p0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Xme,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ws(255*(t+n*(sge*r+Pz*i)),255*(t+n*(Oz*r+kP*i)),255*(t+n*(_S*r)),this.opacity)}}));function oge(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function age(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return oge((n-r/t)*t,o,i,s,a)}}function uge(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return oge((n-r/t)*t,i,s,o,a)}}const RP=e=>()=>e;function lge(e,t){return function(n){return e+n*t}}function _Ge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function PP(e,t){var n=t-e;return n?lge(e,n>180||n<-180?n-360*Math.round(n/360):n):RP(isNaN(e)?t:e)}function EGe(e){return(e=+e)==1?xs:function(t,n){return n-t?_Ge(t,n,e):RP(isNaN(t)?n:t)}}function xs(e,t){var n=t-e;return n?lge(e,n):RP(isNaN(e)?t:e)}const ES=function e(t){var n=EGe(t);function r(i,s){var o=n((i=ym(i)).r,(s=ym(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=xs(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function cge(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=ym(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var wGe=cge(age),xGe=cge(uge);function Mz(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function fge(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function SGe(e,t){return(fge(t)?Mz:dge)(e,t)}function dge(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Km(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function hge(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function pge(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Km(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var t5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aF=new RegExp(t5.source,"g");function TGe(e){return function(){return e}}function CGe(e){return function(t){return e(t)+""}}function $z(e,t){var n=t5.lastIndex=aF.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=t5.exec(e))&&(i=aF.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:tl(r,i)})),n=aF.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?CGe(u[0].x):TGe(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Km(e,t){var n=typeof t,r;return t==null||n==="boolean"?RP(t):(n==="number"?tl:n==="string"?(r=M0(t))?(t=r,ES):$z:t instanceof M0?ES:t instanceof Date?hge:fge(t)?Mz:Array.isArray(t)?dge:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pge:tl)(e,t)}function AGe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function DGe(e,t){var n=PP(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function VT(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var qZ=180/Math.PI,n5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mge(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*qZ,skewX:Math.atan(u)*qZ,scaleX:o,scaleY:a}}var WC;function IGe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?n5:mge(t.a,t.b,t.c,t.d,t.e,t.f)}function NGe(e){return e==null||(WC||(WC=document.createElementNS("http://www.w3.org/2000/svg","g")),WC.setAttribute("transform",e),!(e=WC.transform.baseVal.consolidate()))?n5:(e=e.matrix,mge(e.a,e.b,e.c,e.d,e.e,e.f))}function gge(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:tl(l,f)},{i:m-2,x:tl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:tl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:tl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:tl(l,f)},{i:m-2,x:tl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var yge=gge(IGe,"px, ","px)","deg)"),vge=gge(NGe,", ",")",")"),kGe=1e-12;function WZ(e){return((e=Math.exp(e))+1/e)/2}function RGe(e){return((e=Math.exp(e))-1/e)/2}function PGe(e){return((e=Math.exp(2*e))-1)/(e+1)}const OGe=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<kGe)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),E=(d*d-l*l-r*m)/(2*d*n*v),_=Math.log(Math.sqrt(b*b+1)-b),w=Math.log(Math.sqrt(E*E+1)-E);y=(w-_)/t,g=function(S){var C=S*y,A=WZ(_),D=l/(n*v)*(A*PGe(t*C+_)-RGe(_));return[a+D*h,u+D*p,l*A/WZ(t*C+_)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function bge(e){return function(t,n){var r=e((t=rN(t)).h,(n=rN(n)).h),i=xs(t.s,n.s),s=xs(t.l,n.l),o=xs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const MGe=bge(PP);var $Ge=bge(xs);function FGe(e,t){var n=xs((e=sN(e)).l,(t=sN(t)).l),r=xs(e.a,t.a),i=xs(e.b,t.b),s=xs(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function _ge(e){return function(t,n){var r=e((t=oN(t)).h,(n=oN(n)).h),i=xs(t.c,n.c),s=xs(t.l,n.l),o=xs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const LGe=_ge(PP);var BGe=_ge(xs);function Ege(e){return function t(n){n=+n;function r(i,s){var o=e((i=e5(i)).h,(s=e5(s)).h),a=xs(i.s,s.s),u=xs(i.l,s.l),l=xs(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const jGe=Ege(PP);var zGe=Ege(xs);function Fz(e,t){t===void 0&&(t=e,e=Km);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function UGe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const VGe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Km,interpolateArray:SGe,interpolateBasis:age,interpolateBasisClosed:uge,interpolateCubehelix:jGe,interpolateCubehelixLong:zGe,interpolateDate:hge,interpolateDiscrete:AGe,interpolateHcl:LGe,interpolateHclLong:BGe,interpolateHsl:MGe,interpolateHslLong:$Ge,interpolateHue:DGe,interpolateLab:FGe,interpolateNumber:tl,interpolateNumberArray:Mz,interpolateObject:pge,interpolateRgb:ES,interpolateRgbBasis:wGe,interpolateRgbBasisClosed:xGe,interpolateRound:VT,interpolateString:$z,interpolateTransformCss:yge,interpolateTransformSvg:vge,interpolateZoom:OGe,piecewise:Fz,quantize:UGe},Symbol.toStringTag,{value:"Module"}));function HGe(e){return function(){return e}}function r5(e){return+e}var GZ=[0,1];function La(e){return e}function i5(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:HGe(isNaN(t)?NaN:.5)}function qGe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function WGe(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=i5(i,r),s=n(o,s)):(r=i5(r,i),s=n(s,o)),function(a){return s(r(a))}}function GGe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=i5(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=mm(e,a,1,r)-1;return s[u](i[u](a))}}function HT(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function OP(){var e=GZ,t=GZ,n=Km,r,i,s,o=La,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==La&&(o=qGe(e[0],e[d-1])),a=d>2?GGe:WGe,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),tl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,r5),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=VT,c()},f.clamp=function(d){return arguments.length?(o=d?!0:La,c()):o!==La},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function wge(){return OP()(La,La)}function YGe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function aN(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ab(e){return e=aN(Math.abs(e)),e?e[1]:NaN}function KGe(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function XGe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var QGe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $0(e){if(!(t=QGe.exec(e)))throw new Error("invalid format: "+e);var t;return new Lz({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$0.prototype=Lz.prototype;function Lz(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lz.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function JGe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var xge;function ZGe(e,t){var n=aN(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(xge=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+aN(e,Math.max(0,t+s-1))[0]}function YZ(e,t){var n=aN(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const KZ={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:YGe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YZ(e*100,t),r:YZ,s:ZGe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function XZ(e){return e}var QZ=Array.prototype.map,JZ=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Sge(e){var t=e.grouping===void 0||e.thousands===void 0?XZ:KGe(QZ.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?XZ:XGe(QZ.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=$0(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,E=f.trim,_=f.type;_==="n"?(v=!0,_="g"):KZ[_]||(b===void 0&&(b=12),E=!0,_="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=m==="$"?r:/[%p]/.test(_)?o:"",C=KZ[_],A=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(I){var O=w,R=S,M,F,P;if(_==="c")R=C(I)+R,I="";else{I=+I;var j=I<0||1/I<0;if(I=isNaN(I)?u:C(Math.abs(I),b),E&&(I=JGe(I)),j&&+I==0&&p!=="+"&&(j=!1),O=(j?p==="("?p:a:p==="-"||p==="("?"":p)+O,R=(_==="s"?JZ[8+xge/3]:"")+R+(j&&p==="("?")":""),A){for(M=-1,F=I.length;++M<F;)if(P=I.charCodeAt(M),48>P||P>57){R=(P===46?i+I.slice(M+1):I.slice(M))+R,I=I.slice(0,M);break}}}v&&!g&&(I=t(I,1/0));var z=O.length+I.length+R.length,V=z<y?new Array(y-z+1).join(d):"";switch(v&&g&&(I=t(V+I,V.length?y-R.length:1/0),V=""),h){case"<":I=O+I+R+V;break;case"=":I=O+V+I+R;break;case"^":I=V.slice(0,z=V.length>>1)+O+I+R+V.slice(z);break;default:I=V+O+I+R;break}return s(I)}return D.toString=function(){return f+""},D}function c(f,d){var h=l((f=$0(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(ab(d)/3)))*3,m=Math.pow(10,-p),g=JZ[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var GC,MP,Bz;eYe({thousands:",",grouping:[3],currency:["$",""]});function eYe(e){return GC=Sge(e),MP=GC.format,Bz=GC.formatPrefix,GC}function Tge(e){return Math.max(0,-ab(Math.abs(e)))}function Cge(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ab(t)/3)))*3-ab(Math.abs(e)))}function Age(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ab(t)-ab(e))+1}function Dge(e,t,n,r){var i=gm(e,t,n),s;switch(r=$0(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Cge(i,o))&&(r.precision=s),Bz(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Age(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Tge(i))&&(r.precision=s-(r.type==="%")*2);break}}return MP(r)}function Iy(e){var t=e.domain;return e.ticks=function(n){var r=t();return X4(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Dge(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=Q4(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function ub(){var e=wge();return e.copy=function(){return HT(e,ub())},Yf.apply(e,arguments),Iy(e)}function Ige(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,r5),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Ige(e).unknown(t)},e=arguments.length?Array.from(e,r5):[0,1],Iy(n)}function Nge(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function ZZ(e){return Math.log(e)}function eee(e){return Math.exp(e)}function tYe(e){return-Math.log(-e)}function nYe(e){return-Math.exp(-e)}function rYe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function iYe(e){return e===10?rYe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sYe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function tee(e){return(t,n)=>-e(-t,n)}function jz(e){const t=e(ZZ,eee),n=t.domain;let r=10,i,s;function o(){return i=sYe(r),s=iYe(r),n()[0]<0?(i=tee(i),s=tee(s),e(tYe,nYe)):e(ZZ,eee),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=X4(l,c,g))}else y=X4(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=$0(u)).precision==null&&(u.trim=!0),u=MP(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(Nge(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function kge(){const e=jz(OP()).domain([1,10]);return e.copy=()=>HT(e,kge()).base(e.base()),Yf.apply(e,arguments),e}function nee(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ree(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zz(e){var t=1,n=e(nee(t),ree(t));return n.constant=function(r){return arguments.length?e(nee(t=+r),ree(t)):t},Iy(n)}function Rge(){var e=zz(OP());return e.copy=function(){return HT(e,Rge()).constant(e.constant())},Yf.apply(e,arguments)}function iee(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oYe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function aYe(e){return e<0?-e*e:e*e}function Uz(e){var t=e(La,La),n=1;function r(){return n===1?e(La,La):n===.5?e(oYe,aYe):e(iee(n),iee(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Iy(t)}function Vz(){var e=Uz(OP());return e.copy=function(){return HT(e,Vz()).exponent(e.exponent())},Yf.apply(e,arguments),e}function uYe(){return Vz.apply(null,arguments).exponent(.5)}function Pge(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=qme(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[mm(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Xd),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Pge().domain(e).range(t).unknown(r)},Yf.apply(s,arguments)}function Oge(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[mm(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Oge().domain([e,t]).range(i).unknown(s)},Yf.apply(Iy(o),arguments)}function Mge(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[mm(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Mge().domain(e).range(t).unknown(n)},Yf.apply(i,arguments)}const uF=new Date,lF=new Date;function ds(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>ds(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(uF.setTime(+s),lF.setTime(+o),e(uF),e(lF),Math.floor(n(uF,lF))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const lb=ds(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ds(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lb);lb.range;const Ld=1e3,al=Ld*60,Bd=al*60,bh=Bd*24,Hz=bh*7,see=bh*30,cF=bh*365,jd=ds(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ld)},(e,t)=>(t-e)/Ld,e=>e.getUTCSeconds());jd.range;const $P=ds(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ld)},(e,t)=>{e.setTime(+e+t*al)},(e,t)=>(t-e)/al,e=>e.getMinutes());$P.range;const FP=ds(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*al)},(e,t)=>(t-e)/al,e=>e.getUTCMinutes());FP.range;const LP=ds(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ld-e.getMinutes()*al)},(e,t)=>{e.setTime(+e+t*Bd)},(e,t)=>(t-e)/Bd,e=>e.getHours());LP.range;const BP=ds(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bd)},(e,t)=>(t-e)/Bd,e=>e.getUTCHours());BP.range;const Qd=ds(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*al)/bh,e=>e.getDate()-1);Qd.range;const Xp=ds(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bh,e=>e.getUTCDate()-1);Xp.range;const $ge=ds(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bh,e=>Math.floor(e/bh));$ge.range;function Ny(e){return ds(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*al)/Hz)}const T_=Ny(0),uN=Ny(1),lYe=Ny(2),cYe=Ny(3),cb=Ny(4),fYe=Ny(5),dYe=Ny(6);T_.range;uN.range;lYe.range;cYe.range;cb.range;fYe.range;dYe.range;function ky(e){return ds(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Hz)}const C_=ky(0),lN=ky(1),hYe=ky(2),pYe=ky(3),fb=ky(4),mYe=ky(5),gYe=ky(6);C_.range;lN.range;hYe.range;pYe.range;fb.range;mYe.range;gYe.range;const wS=ds(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wS.range;const xS=ds(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());xS.range;const Df=ds(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Df.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ds(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Df.range;const If=ds(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());If.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ds(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});If.range;function Fge(e,t,n,r,i,s){const o=[[jd,1,Ld],[jd,5,5*Ld],[jd,15,15*Ld],[jd,30,30*Ld],[s,1,al],[s,5,5*al],[s,15,15*al],[s,30,30*al],[i,1,Bd],[i,3,3*Bd],[i,6,6*Bd],[i,12,12*Bd],[r,1,bh],[r,2,2*bh],[n,1,Hz],[t,1,see],[t,3,3*see],[e,1,cF]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=x_(([,,g])=>g).right(o,d);if(h===o.length)return e.every(gm(l/cF,c/cF,f));if(h===0)return lb.every(Math.max(gm(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[yYe,vYe]=Fge(If,xS,C_,$ge,BP,FP),[bYe,_Ye]=Fge(Df,wS,T_,Qd,LP,$P);function fF(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dF(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function CE(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Lge(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=AE(i),c=DE(i),f=AE(s),d=DE(s),h=AE(o),p=DE(o),m=AE(a),g=DE(a),y=AE(u),v=DE(u),b={a:j,A:z,b:V,B:$,c:null,d:fee,e:fee,f:VYe,g:ZYe,G:tKe,H:jYe,I:zYe,j:UYe,L:Bge,m:HYe,M:qYe,p:U,q:W,Q:pee,s:mee,S:WYe,u:GYe,U:YYe,V:KYe,w:XYe,W:QYe,x:null,X:null,y:JYe,Y:eKe,Z:nKe,"%":hee},E={a:B,A:q,b:Y,B:re,c:null,d:dee,e:dee,f:oKe,g:gKe,G:vKe,H:rKe,I:iKe,j:sKe,L:zge,m:aKe,M:uKe,p:pe,q:_e,Q:pee,s:mee,S:lKe,u:cKe,U:fKe,V:dKe,w:hKe,W:pKe,x:null,X:null,y:mKe,Y:yKe,Z:bKe,"%":hee},_={a:D,A:I,b:O,B:R,c:M,d:lee,e:lee,f:$Ye,g:uee,G:aee,H:cee,I:cee,j:RYe,L:MYe,m:kYe,M:PYe,p:A,q:NYe,Q:LYe,s:BYe,S:OYe,u:TYe,U:CYe,V:AYe,w:SYe,W:DYe,x:F,X:P,y:uee,Y:aee,Z:IYe,"%":FYe};b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),E.x=w(n,E),E.X=w(r,E),E.c=w(t,E);function w(de,ye){return function(Ce){var ve=[],qe=-1,He=0,ht=de.length,rt,Pe,Be;for(Ce instanceof Date||(Ce=new Date(+Ce));++qe<ht;)de.charCodeAt(qe)===37&&(ve.push(de.slice(He,qe)),(Pe=oee[rt=de.charAt(++qe)])!=null?rt=de.charAt(++qe):Pe=rt==="e"?" ":"0",(Be=ye[rt])&&(rt=Be(Ce,Pe)),ve.push(rt),He=qe+1);return ve.push(de.slice(He,qe)),ve.join("")}}function S(de,ye){return function(Ce){var ve=CE(1900,void 0,1),qe=C(ve,de,Ce+="",0),He,ht;if(qe!=Ce.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(He=dF(CE(ve.y,0,1)),ht=He.getUTCDay(),He=ht>4||ht===0?lN.ceil(He):lN(He),He=Xp.offset(He,(ve.V-1)*7),ve.y=He.getUTCFullYear(),ve.m=He.getUTCMonth(),ve.d=He.getUTCDate()+(ve.w+6)%7):(He=fF(CE(ve.y,0,1)),ht=He.getDay(),He=ht>4||ht===0?uN.ceil(He):uN(He),He=Qd.offset(He,(ve.V-1)*7),ve.y=He.getFullYear(),ve.m=He.getMonth(),ve.d=He.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),ht="Z"in ve?dF(CE(ve.y,0,1)).getUTCDay():fF(CE(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(ht+5)%7:ve.w+ve.U*7-(ht+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,dF(ve)):fF(ve)}}function C(de,ye,Ce,ve){for(var qe=0,He=ye.length,ht=Ce.length,rt,Pe;qe<He;){if(ve>=ht)return-1;if(rt=ye.charCodeAt(qe++),rt===37){if(rt=ye.charAt(qe++),Pe=_[rt in oee?ye.charAt(qe++):rt],!Pe||(ve=Pe(de,Ce,ve))<0)return-1}else if(rt!=Ce.charCodeAt(ve++))return-1}return ve}function A(de,ye,Ce){var ve=l.exec(ye.slice(Ce));return ve?(de.p=c.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function D(de,ye,Ce){var ve=h.exec(ye.slice(Ce));return ve?(de.w=p.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function I(de,ye,Ce){var ve=f.exec(ye.slice(Ce));return ve?(de.w=d.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function O(de,ye,Ce){var ve=y.exec(ye.slice(Ce));return ve?(de.m=v.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function R(de,ye,Ce){var ve=m.exec(ye.slice(Ce));return ve?(de.m=g.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function M(de,ye,Ce){return C(de,t,ye,Ce)}function F(de,ye,Ce){return C(de,n,ye,Ce)}function P(de,ye,Ce){return C(de,r,ye,Ce)}function j(de){return o[de.getDay()]}function z(de){return s[de.getDay()]}function V(de){return u[de.getMonth()]}function $(de){return a[de.getMonth()]}function U(de){return i[+(de.getHours()>=12)]}function W(de){return 1+~~(de.getMonth()/3)}function B(de){return o[de.getUTCDay()]}function q(de){return s[de.getUTCDay()]}function Y(de){return u[de.getUTCMonth()]}function re(de){return a[de.getUTCMonth()]}function pe(de){return i[+(de.getUTCHours()>=12)]}function _e(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ye=w(de+="",b);return ye.toString=function(){return de},ye},parse:function(de){var ye=S(de+="",!1);return ye.toString=function(){return de},ye},utcFormat:function(de){var ye=w(de+="",E);return ye.toString=function(){return de},ye},utcParse:function(de){var ye=S(de+="",!0);return ye.toString=function(){return de},ye}}}var oee={"-":"",_:" ",0:"0"},Ps=/^\s*\d+/,EYe=/^%/,wYe=/[\\^$*+?|[\]().{}]/g;function Qn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function xYe(e){return e.replace(wYe,"\\$&")}function AE(e){return new RegExp("^(?:"+e.map(xYe).join("|")+")","i")}function DE(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function SYe(e,t,n){var r=Ps.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function TYe(e,t,n){var r=Ps.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function CYe(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function AYe(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function DYe(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function aee(e,t,n){var r=Ps.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function uee(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function IYe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function NYe(e,t,n){var r=Ps.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function kYe(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function lee(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function RYe(e,t,n){var r=Ps.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function cee(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function PYe(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function OYe(e,t,n){var r=Ps.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function MYe(e,t,n){var r=Ps.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $Ye(e,t,n){var r=Ps.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function FYe(e,t,n){var r=EYe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function LYe(e,t,n){var r=Ps.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function BYe(e,t,n){var r=Ps.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function fee(e,t){return Qn(e.getDate(),t,2)}function jYe(e,t){return Qn(e.getHours(),t,2)}function zYe(e,t){return Qn(e.getHours()%12||12,t,2)}function UYe(e,t){return Qn(1+Qd.count(Df(e),e),t,3)}function Bge(e,t){return Qn(e.getMilliseconds(),t,3)}function VYe(e,t){return Bge(e,t)+"000"}function HYe(e,t){return Qn(e.getMonth()+1,t,2)}function qYe(e,t){return Qn(e.getMinutes(),t,2)}function WYe(e,t){return Qn(e.getSeconds(),t,2)}function GYe(e){var t=e.getDay();return t===0?7:t}function YYe(e,t){return Qn(T_.count(Df(e)-1,e),t,2)}function jge(e){var t=e.getDay();return t>=4||t===0?cb(e):cb.ceil(e)}function KYe(e,t){return e=jge(e),Qn(cb.count(Df(e),e)+(Df(e).getDay()===4),t,2)}function XYe(e){return e.getDay()}function QYe(e,t){return Qn(uN.count(Df(e)-1,e),t,2)}function JYe(e,t){return Qn(e.getFullYear()%100,t,2)}function ZYe(e,t){return e=jge(e),Qn(e.getFullYear()%100,t,2)}function eKe(e,t){return Qn(e.getFullYear()%1e4,t,4)}function tKe(e,t){var n=e.getDay();return e=n>=4||n===0?cb(e):cb.ceil(e),Qn(e.getFullYear()%1e4,t,4)}function nKe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qn(t/60|0,"0",2)+Qn(t%60,"0",2)}function dee(e,t){return Qn(e.getUTCDate(),t,2)}function rKe(e,t){return Qn(e.getUTCHours(),t,2)}function iKe(e,t){return Qn(e.getUTCHours()%12||12,t,2)}function sKe(e,t){return Qn(1+Xp.count(If(e),e),t,3)}function zge(e,t){return Qn(e.getUTCMilliseconds(),t,3)}function oKe(e,t){return zge(e,t)+"000"}function aKe(e,t){return Qn(e.getUTCMonth()+1,t,2)}function uKe(e,t){return Qn(e.getUTCMinutes(),t,2)}function lKe(e,t){return Qn(e.getUTCSeconds(),t,2)}function cKe(e){var t=e.getUTCDay();return t===0?7:t}function fKe(e,t){return Qn(C_.count(If(e)-1,e),t,2)}function Uge(e){var t=e.getUTCDay();return t>=4||t===0?fb(e):fb.ceil(e)}function dKe(e,t){return e=Uge(e),Qn(fb.count(If(e),e)+(If(e).getUTCDay()===4),t,2)}function hKe(e){return e.getUTCDay()}function pKe(e,t){return Qn(lN.count(If(e)-1,e),t,2)}function mKe(e,t){return Qn(e.getUTCFullYear()%100,t,2)}function gKe(e,t){return e=Uge(e),Qn(e.getUTCFullYear()%100,t,2)}function yKe(e,t){return Qn(e.getUTCFullYear()%1e4,t,4)}function vKe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?fb(e):fb.ceil(e),Qn(e.getUTCFullYear()%1e4,t,4)}function bKe(){return"+0000"}function hee(){return"%"}function pee(e){return+e}function mee(e){return Math.floor(+e/1e3)}var d1,qz,Vge,Wz,Hge;_Ke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _Ke(e){return d1=Lge(e),qz=d1.format,Vge=d1.parse,Wz=d1.utcFormat,Hge=d1.utcParse,d1}function EKe(e){return new Date(e)}function wKe(e){return e instanceof Date?+e:+new Date(+e)}function Gz(e,t,n,r,i,s,o,a,u,l){var c=wge(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),E=l("%Y");function _(w){return(u(w)<w?h:a(w)<w?p:o(w)<w?m:s(w)<w?g:r(w)<w?i(w)<w?y:v:n(w)<w?b:E)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,wKe)):d().map(EKe)},c.ticks=function(w){var S=d();return e(S[0],S[S.length-1],w??10)},c.tickFormat=function(w,S){return S==null?_:l(S)},c.nice=function(w){var S=d();return(!w||typeof w.range!="function")&&(w=t(S[0],S[S.length-1],w??10)),w?d(Nge(S,w)):c},c.copy=function(){return HT(c,Gz(e,t,n,r,i,s,o,a,u,l))},c}function xKe(){return Yf.apply(Gz(bYe,_Ye,Df,wS,T_,Qd,LP,$P,jd,qz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SKe(){return Yf.apply(Gz(yYe,vYe,If,xS,C_,Xp,BP,FP,jd,Wz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jP(){var e=0,t=1,n,r,i,s,o=La,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Km),l.rangeRound=c(VT),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Xm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Yz(){var e=Iy(jP()(La));return e.copy=function(){return Xm(e,Yz())},Gm.apply(e,arguments)}function qge(){var e=jz(jP()).domain([1,10]);return e.copy=function(){return Xm(e,qge()).base(e.base())},Gm.apply(e,arguments)}function Wge(){var e=zz(jP());return e.copy=function(){return Xm(e,Wge()).constant(e.constant())},Gm.apply(e,arguments)}function Kz(){var e=Uz(jP());return e.copy=function(){return Xm(e,Kz()).exponent(e.exponent())},Gm.apply(e,arguments)}function TKe(){return Kz.apply(null,arguments).exponent(.5)}function zP(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=La,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=Fz(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Km),h.rangeRound=p(VT),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function Gge(){var e=Iy(zP()(La));return e.copy=function(){return Xm(e,Gge())},Gm.apply(e,arguments)}function Yge(){var e=jz(zP()).domain([.1,1,10]);return e.copy=function(){return Xm(e,Yge()).base(e.base())},Gm.apply(e,arguments)}function Kge(){var e=zz(zP());return e.copy=function(){return Xm(e,Kge()).constant(e.constant())},Gm.apply(e,arguments)}function Xz(){var e=Uz(zP());return e.copy=function(){return Xm(e,Xz()).exponent(e.exponent())},Gm.apply(e,arguments)}function CKe(){return Xz.apply(null,arguments).exponent(.5)}function AKe(e){return e}var hF=1,pF=2,s5=3,hw=4,gee=1e-6;function DKe(e){return"translate("+e+",0)"}function IKe(e){return"translate(0,"+e+")"}function NKe(e){return t=>+e(t)}function kKe(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function RKe(){return!this.__axis}function Xge(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===hF||e===hw?-1:1,c=e===hw||e===pF?"x":"y",f=e===hF||e===s5?DKe:IKe;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):AKe),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,E=(t.bandwidth?kKe:NKe)(t.copy(),u),_=h.selection?h.selection():h,w=_.selectAll(".domain").data([null]),S=_.selectAll(".tick").data(p,t).order(),C=S.exit(),A=S.enter().append("g").attr("class","tick"),D=S.select("line"),I=S.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(A),D=D.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),I=I.merge(A.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===hF?"0em":e===s5?"0.71em":"0.32em")),h!==_&&(w=w.transition(h),S=S.transition(h),D=D.transition(h),I=I.transition(h),C=C.transition(h).attr("opacity",gee).attr("transform",function(O){return isFinite(O=E(O))?f(O+u):this.getAttribute("transform")}),A.attr("opacity",gee).attr("transform",function(O){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(O))?R:E(O))+u)})),C.remove(),w.attr("d",e===hw||e===pF?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),S.attr("opacity",1).attr("transform",function(O){return f(E(O)+u)}),D.attr(c+"2",l*s),I.attr(c,l*g).text(m),_.filter(RKe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===pF?"start":e===hw?"end":"middle"),_.each(function(){this.__axis=E})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function PKe(e){return Xge(s5,e)}function o5(e){return Xge(hw,e)}var OKe={value:()=>{}};function Qz(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bD(n)}function bD(e){this._=e}function MKe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bD.prototype=Qz.prototype={constructor:bD,on:function(e,t){var n=this._,r=MKe(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=$Ke(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=yee(n[i],e.name,t);else if(t==null)for(i in n)n[i]=yee(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function $Ke(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function yee(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=OKe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var a5="http://www.w3.org/1999/xhtml";const vee={svg:"http://www.w3.org/2000/svg",xhtml:a5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function UP(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vee.hasOwnProperty(t)?{space:vee[t],local:e}:e}function FKe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===a5&&t.documentElement.namespaceURI===a5?t.createElement(e):t.createElementNS(n,e)}}function LKe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Qge(e){var t=UP(e);return(t.local?LKe:FKe)(t)}function BKe(){}function Jz(e){return e==null?BKe:function(){return this.querySelector(e)}}function jKe(e){typeof e!="function"&&(e=Jz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Mu(r,this._parents)}function zKe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function UKe(){return[]}function Jge(e){return e==null?UKe:function(){return this.querySelectorAll(e)}}function VKe(e){return function(){return zKe(e.apply(this,arguments))}}function HKe(e){typeof e=="function"?e=VKe(e):e=Jge(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Mu(r,i)}function Zge(e){return function(){return this.matches(e)}}function e0e(e){return function(t){return t.matches(e)}}var qKe=Array.prototype.find;function WKe(e){return function(){return qKe.call(this.children,e)}}function GKe(){return this.firstElementChild}function YKe(e){return this.select(e==null?GKe:WKe(typeof e=="function"?e:e0e(e)))}var KKe=Array.prototype.filter;function XKe(){return Array.from(this.children)}function QKe(e){return function(){return KKe.call(this.children,e)}}function JKe(e){return this.selectAll(e==null?XKe:QKe(typeof e=="function"?e:e0e(e)))}function ZKe(e){typeof e!="function"&&(e=Zge(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Mu(r,this._parents)}function t0e(e){return new Array(e.length)}function eXe(){return new Mu(this._enter||this._groups.map(t0e),this._parents)}function cN(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}cN.prototype={constructor:cN,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tXe(e){return function(){return e}}function nXe(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new cN(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function rXe(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new cN(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function iXe(e){return e.__data__}function sXe(e,t){if(!arguments.length)return Array.from(this,iXe);var n=t?rXe:nXe,r=this._parents,i=this._groups;typeof e!="function"&&(e=tXe(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=oXe(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,E,_;v<p;++v)if(E=m[v]){for(v>=b&&(b=v+1);!(_=g[b])&&++b<p;);E._next=_||null}}return o=new Mu(o,r),o._enter=a,o._exit=u,o}function oXe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aXe(){return new Mu(this._exit||this._groups.map(t0e),this._parents)}function uXe(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function lXe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Mu(a,this._parents)}function cXe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function fXe(e){e||(e=dXe);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Mu(i,this._parents).order()}function dXe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hXe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pXe(){return Array.from(this)}function mXe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function gXe(){let e=0;for(const t of this)++e;return e}function yXe(){return!this.node()}function vXe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function bXe(e){return function(){this.removeAttribute(e)}}function _Xe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function EXe(e,t){return function(){this.setAttribute(e,t)}}function wXe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xXe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function SXe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function TXe(e,t){var n=UP(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_Xe:bXe:typeof t=="function"?n.local?SXe:xXe:n.local?wXe:EXe)(n,t))}function n0e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function CXe(e){return function(){this.style.removeProperty(e)}}function AXe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function DXe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function IXe(e,t,n){return arguments.length>1?this.each((t==null?CXe:typeof t=="function"?DXe:AXe)(e,t,n??"")):db(this.node(),e)}function db(e,t){return e.style.getPropertyValue(t)||n0e(e).getComputedStyle(e,null).getPropertyValue(t)}function NXe(e){return function(){delete this[e]}}function kXe(e,t){return function(){this[e]=t}}function RXe(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function PXe(e,t){return arguments.length>1?this.each((t==null?NXe:typeof t=="function"?RXe:kXe)(e,t)):this.node()[e]}function r0e(e){return e.trim().split(/^|\s+/)}function Zz(e){return e.classList||new i0e(e)}function i0e(e){this._node=e,this._names=r0e(e.getAttribute("class")||"")}i0e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function s0e(e,t){for(var n=Zz(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function o0e(e,t){for(var n=Zz(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function OXe(e){return function(){s0e(this,e)}}function MXe(e){return function(){o0e(this,e)}}function $Xe(e,t){return function(){(t.apply(this,arguments)?s0e:o0e)(this,e)}}function FXe(e,t){var n=r0e(e+"");if(arguments.length<2){for(var r=Zz(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$Xe:t?OXe:MXe)(n,t))}function LXe(){this.textContent=""}function BXe(e){return function(){this.textContent=e}}function jXe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zXe(e){return arguments.length?this.each(e==null?LXe:(typeof e=="function"?jXe:BXe)(e)):this.node().textContent}function UXe(){this.innerHTML=""}function VXe(e){return function(){this.innerHTML=e}}function HXe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qXe(e){return arguments.length?this.each(e==null?UXe:(typeof e=="function"?HXe:VXe)(e)):this.node().innerHTML}function WXe(){this.nextSibling&&this.parentNode.appendChild(this)}function GXe(){return this.each(WXe)}function YXe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function KXe(){return this.each(YXe)}function XXe(e){var t=typeof e=="function"?e:Qge(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function QXe(){return null}function JXe(e,t){var n=typeof e=="function"?e:Qge(e),r=t==null?QXe:typeof t=="function"?t:Jz(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ZXe(){var e=this.parentNode;e&&e.removeChild(this)}function eQe(){return this.each(ZXe)}function tQe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nQe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rQe(e){return this.select(e?nQe:tQe)}function iQe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function sQe(e){return function(t){e.call(this,t,this.__data__)}}function oQe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function aQe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function uQe(e,t,n){return function(){var r=this.__on,i,s=sQe(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function lQe(e,t,n){var r=oQe(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?uQe:aQe,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function a0e(e,t,n){var r=n0e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function cQe(e,t){return function(){return a0e(this,e,t)}}function fQe(e,t){return function(){return a0e(this,e,t.apply(this,arguments))}}function dQe(e,t){return this.each((typeof t=="function"?fQe:cQe)(e,t))}function*hQe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var u0e=[null];function Mu(e,t){this._groups=e,this._parents=t}function qT(){return new Mu([[document.documentElement]],u0e)}function pQe(){return this}Mu.prototype=qT.prototype={constructor:Mu,select:jKe,selectAll:HKe,selectChild:YKe,selectChildren:JKe,filter:ZKe,data:sXe,enter:eXe,exit:aXe,join:uXe,merge:lXe,selection:pQe,order:cXe,sort:fXe,call:hXe,nodes:pXe,node:mXe,size:gXe,empty:yXe,each:vXe,attr:TXe,style:IXe,property:PXe,classed:FXe,text:zXe,html:qXe,raise:GXe,lower:KXe,append:XXe,insert:JXe,remove:eQe,clone:rQe,datum:iQe,on:lQe,dispatch:dQe,[Symbol.iterator]:hQe};function eU(e){return typeof e=="string"?new Mu([[document.querySelector(e)]],[document.documentElement]):new Mu([[e]],u0e)}var hb=0,pw=0,IE=0,l0e=1e3,fN,mw,dN=0,F0=0,VP=0,SS=typeof performance=="object"&&performance.now?performance:Date,c0e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function HP(){return F0||(c0e(mQe),F0=SS.now()+VP)}function mQe(){F0=0}function TS(){this._call=this._time=this._next=null}TS.prototype=tU.prototype={constructor:TS,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?HP():+n)+(t==null?0:+t),!this._next&&mw!==this&&(mw?mw._next=this:fN=this,mw=this),this._call=e,this._time=n,u5()},stop:function(){this._call&&(this._call=null,this._time=1/0,u5())}};function tU(e,t,n){var r=new TS;return r.restart(e,t,n),r}function gQe(){HP(),++hb;for(var e=fN,t;e;)(t=F0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hb}function bee(){F0=(dN=SS.now())+VP,hb=pw=0;try{gQe()}finally{hb=0,vQe(),F0=0}}function yQe(){var e=SS.now(),t=e-dN;t>l0e&&(VP-=t,dN=e)}function vQe(){for(var e,t=fN,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fN=n);mw=e,u5(r)}function u5(e){if(!hb){pw&&(pw=clearTimeout(pw));var t=e-F0;t>24?(e<1/0&&(pw=setTimeout(bee,e-SS.now()-VP)),IE&&(IE=clearInterval(IE))):(IE||(dN=SS.now(),IE=setInterval(yQe,l0e)),hb=1,c0e(bee))}}function _ee(e,t,n){var r=new TS;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function bQe(e,t,n){var r=new TS,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?HP():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var _Qe=Qz("start","end","cancel","interrupt"),EQe=[],f0e=0,Eee=1,l5=2,_D=3,wee=4,c5=5,ED=6;function qP(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;wQe(e,n,{name:t,index:r,group:i,on:_Qe,tween:EQe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:f0e})}function nU(e,t){var n=Pc(e,t);if(n.state>f0e)throw new Error("too late; already scheduled");return n}function Kf(e,t){var n=Pc(e,t);if(n.state>_D)throw new Error("too late; already running");return n}function Pc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wQe(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=tU(s,0,n.time);function s(l){n.state=Eee,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Eee)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===_D)return _ee(o);h.state===wee?(h.state=ED,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=ED,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(_ee(function(){n.state===_D&&(n.state=wee,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=l5,n.on.call("start",e,e.__data__,n.index,n.group),n.state===l5){for(n.state=_D,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=c5,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===c5&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=ED,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function xQe(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>l5&&r.state<c5,r.state=ED,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function SQe(e){return this.each(function(){xQe(this,e)})}function TQe(e,t){var n,r;return function(){var i=Kf(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function CQe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Kf(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function AQe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Pc(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?TQe:CQe)(n,e,t))}function rU(e,t,n){var r=e._id;return e.each(function(){var i=Kf(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Pc(i,r).value[t]}}function d0e(e,t){var n;return(typeof t=="number"?tl:t instanceof M0?ES:(n=M0(t))?(t=n,ES):$z)(e,t)}function DQe(e){return function(){this.removeAttribute(e)}}function IQe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function NQe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function kQe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function RQe(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function PQe(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function OQe(e,t){var n=UP(e),r=n==="transform"?vge:d0e;return this.attrTween(e,typeof t=="function"?(n.local?PQe:RQe)(n,r,rU(this,"attr."+e,t)):t==null?(n.local?IQe:DQe)(n):(n.local?kQe:NQe)(n,r,t))}function MQe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $Qe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function FQe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&$Qe(e,s)),n}return i._value=t,i}function LQe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&MQe(e,s)),n}return i._value=t,i}function BQe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=UP(e);return this.tween(n,(r.local?FQe:LQe)(r,t))}function jQe(e,t){return function(){nU(this,e).delay=+t.apply(this,arguments)}}function zQe(e,t){return t=+t,function(){nU(this,e).delay=t}}function UQe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jQe:zQe)(t,e)):Pc(this.node(),t).delay}function VQe(e,t){return function(){Kf(this,e).duration=+t.apply(this,arguments)}}function HQe(e,t){return t=+t,function(){Kf(this,e).duration=t}}function qQe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?VQe:HQe)(t,e)):Pc(this.node(),t).duration}function WQe(e,t){if(typeof t!="function")throw new Error;return function(){Kf(this,e).ease=t}}function GQe(e){var t=this._id;return arguments.length?this.each(WQe(t,e)):Pc(this.node(),t).ease}function YQe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Kf(this,e).ease=n}}function KQe(e){if(typeof e!="function")throw new Error;return this.each(YQe(this._id,e))}function XQe(e){typeof e!="function"&&(e=Zge(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new _h(r,this._parents,this._name,this._id)}function QQe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new _h(o,this._parents,this._name,this._id)}function JQe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ZQe(e,t,n){var r,i,s=JQe(t)?nU:Kf;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function eJe(e,t){var n=this._id;return arguments.length<2?Pc(this.node(),n).on.on(e):this.each(ZQe(n,e,t))}function tJe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function nJe(){return this.on("end.remove",tJe(this._id))}function rJe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Jz(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,qP(l[d],t,n,d,l,Pc(c,n)));return new _h(s,this._parents,t,n)}function iJe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Jge(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Pc(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&qP(h,t,n,m,d,p);s.push(d),o.push(c)}return new _h(s,o,t,n)}var sJe=qT.prototype.constructor;function oJe(){return new sJe(this._groups,this._parents)}function aJe(e,t){var n,r,i;return function(){var s=db(this,e),o=(this.style.removeProperty(e),db(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function h0e(e){return function(){this.style.removeProperty(e)}}function uJe(e,t,n){var r,i=n+"",s;return function(){var o=db(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function lJe(e,t,n){var r,i,s;return function(){var o=db(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),db(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function cJe(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Kf(this,e),l=u.on,c=u.value[s]==null?a||(a=h0e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function fJe(e,t,n){var r=(e+="")=="transform"?yge:d0e;return t==null?this.styleTween(e,aJe(e,r)).on("end.style."+e,h0e(e)):typeof t=="function"?this.styleTween(e,lJe(e,r,rU(this,"style."+e,t))).each(cJe(this._id,e)):this.styleTween(e,uJe(e,r,t),n).on("end.style."+e,null)}function dJe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function hJe(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&dJe(e,o,n)),r}return s._value=t,s}function pJe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,hJe(e,t,n??""))}function mJe(e){return function(){this.textContent=e}}function gJe(e){return function(){var t=e(this);this.textContent=t??""}}function yJe(e){return this.tween("text",typeof e=="function"?gJe(rU(this,"text",e)):mJe(e==null?"":e+""))}function vJe(e){return function(t){this.textContent=e.call(this,t)}}function bJe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&vJe(i)),t}return r._value=e,r}function _Je(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,bJe(e))}function EJe(){for(var e=this._name,t=this._id,n=p0e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Pc(u,t);qP(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _h(r,this._parents,e,n)}function wJe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Kf(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var xJe=0;function _h(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function p0e(){return++xJe}var gd=qT.prototype;_h.prototype={constructor:_h,select:rJe,selectAll:iJe,selectChild:gd.selectChild,selectChildren:gd.selectChildren,filter:XQe,merge:QQe,selection:oJe,transition:EJe,call:gd.call,nodes:gd.nodes,node:gd.node,size:gd.size,empty:gd.empty,each:gd.each,on:eJe,attr:OQe,attrTween:BQe,style:fJe,styleTween:pJe,text:yJe,textTween:_Je,remove:nJe,tween:AQe,delay:UQe,duration:qQe,ease:GQe,easeVarying:KQe,end:wJe,[Symbol.iterator]:gd[Symbol.iterator]};const SJe=e=>+e;function TJe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var CJe={time:null,delay:0,duration:250,ease:TJe};function AJe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function DJe(e){var t,n;e instanceof _h?(t=e._id,e=e._name):(t=p0e(),(n=CJe).time=HP(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&qP(u,e,t,l,o,n||AJe(u,t));return new _h(r,this._parents,e,t)}qT.prototype.interrupt=SQe;qT.prototype.transition=DJe;const f5=Math.PI,d5=2*f5,Pg=1e-6,IJe=d5-Pg;function m0e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function NJe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return m0e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let iU=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m0e:NJe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Pg)if(!(Math.abs(f*u-l*c)>Pg)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((f5-Math.acos((m+d-g)/(2*y*v)))/2),E=b/v,_=b/y;Math.abs(E-1)>Pg&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Pg||Math.abs(this._y1-c)>Pg)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%d5+d5),d>IJe?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Pg&&this._append`A${r},${r},0,${+(d>=f5)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function WP(){return new iU}WP.prototype=iU.prototype;const Jd=11102230246251565e-32,go=134217729,kJe=(3+8*Jd)*Jd;function mF(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function RJe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function WT(e){return new Float64Array(e)}const PJe=(3+16*Jd)*Jd,OJe=(2+12*Jd)*Jd,MJe=(9+64*Jd)*Jd*Jd,h1=WT(4),xee=WT(8),See=WT(12),Tee=WT(16),Wo=WT(4);function $Je(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,E,_,w,S,C;const A=e-i,D=n-i,I=t-s,O=r-s;E=A*O,d=go*A,h=d-(d-A),p=A-h,d=go*O,m=d-(d-O),g=O-m,_=p*g-(E-h*m-p*m-h*g),w=I*D,d=go*I,h=d-(d-I),p=I-h,d=go*D,m=d-(d-D),g=D-m,S=p*g-(w-h*m-p*m-h*g),y=_-S,f=_-y,h1[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-w,f=b-y,h1[1]=b-(y+f)+(f-w),C=v+y,f=C-v,h1[2]=v-(C-f)+(y-f),h1[3]=C;let R=RJe(4,h1),M=OJe*o;if(R>=M||-R>=M||(f=e-A,a=e-(A+f)+(f-i),f=n-D,l=n-(D+f)+(f-i),f=t-I,u=t-(I+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(M=MJe*o+kJe*Math.abs(R),R+=A*c+O*a-(I*l+D*u),R>=M||-R>=M))return R;E=a*O,d=go*a,h=d-(d-a),p=a-h,d=go*O,m=d-(d-O),g=O-m,_=p*g-(E-h*m-p*m-h*g),w=u*D,d=go*u,h=d-(d-u),p=u-h,d=go*D,m=d-(d-D),g=D-m,S=p*g-(w-h*m-p*m-h*g),y=_-S,f=_-y,Wo[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-w,f=b-y,Wo[1]=b-(y+f)+(f-w),C=v+y,f=C-v,Wo[2]=v-(C-f)+(y-f),Wo[3]=C;const F=mF(4,h1,4,Wo,xee);E=A*c,d=go*A,h=d-(d-A),p=A-h,d=go*c,m=d-(d-c),g=c-m,_=p*g-(E-h*m-p*m-h*g),w=I*l,d=go*I,h=d-(d-I),p=I-h,d=go*l,m=d-(d-l),g=l-m,S=p*g-(w-h*m-p*m-h*g),y=_-S,f=_-y,Wo[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-w,f=b-y,Wo[1]=b-(y+f)+(f-w),C=v+y,f=C-v,Wo[2]=v-(C-f)+(y-f),Wo[3]=C;const P=mF(F,xee,4,Wo,See);E=a*c,d=go*a,h=d-(d-a),p=a-h,d=go*c,m=d-(d-c),g=c-m,_=p*g-(E-h*m-p*m-h*g),w=u*l,d=go*u,h=d-(d-u),p=u-h,d=go*l,m=d-(d-l),g=l-m,S=p*g-(w-h*m-p*m-h*g),y=_-S,f=_-y,Wo[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-w,f=b-y,Wo[1]=b-(y+f)+(f-w),C=v+y,f=C-v,Wo[2]=v-(C-f)+(y-f),Wo[3]=C;const j=mF(P,See,4,Wo,Tee);return Tee[j-1]}function YC(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=PJe*l?u:-$Je(e,t,n,r,i,s,l)}const Cee=Math.pow(2,-52),KC=new Uint32Array(512);class hN{static from(t,n=zJe,r=UJe){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new hN(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const D=t[2*A],I=t[2*A+1];D<a&&(a=D),I<u&&(u=I),D>l&&(l=D),I>c&&(c=I),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,D=1/0;A<o;A++){const I=gF(f,d,t[2*A],t[2*A+1]);I<D&&(h=A,D=I)}const g=t[2*h],y=t[2*h+1];for(let A=0,D=1/0;A<o;A++){if(A===h)continue;const I=gF(g,y,t[2*A],t[2*A+1]);I<D&&I>0&&(p=A,D=I)}let v=t[2*p],b=t[2*p+1],E=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const D=BJe(g,y,v,b,t[2*A],t[2*A+1]);D<E&&(m=A,E=D)}let _=t[2*m],w=t[2*m+1];if(E===1/0){for(let I=0;I<o;I++)this._dists[I]=t[2*I]-t[0]||t[2*I+1]-t[1];tv(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let D=0;for(let I=0,O=-1/0;I<o;I++){const R=this._ids[I],M=this._dists[R];M>O&&(A[D++]=R,O=M)}this.hull=A.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(YC(g,y,v,b,_,w)<0){const A=p,D=v,I=b;p=m,v=_,b=w,m=A,_=D,w=I}const S=jJe(g,y,v,b,_,w);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=gF(t[2*A],t[2*A+1],S.x,S.y);tv(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(_,w)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,D,I;A<this._ids.length;A++){const O=this._ids[A],R=t[2*O],M=t[2*O+1];if(A>0&&Math.abs(R-D)<=Cee&&Math.abs(M-I)<=Cee||(D=R,I=M,O===h||O===p||O===m))continue;let F=0;for(let $=0,U=this._hashKey(R,M);$<this._hashSize&&(F=s[(U+$)%this._hashSize],!(F!==-1&&F!==r[F]));$++);F=n[F];let P=F,j;for(;j=r[P],YC(R,M,t[2*P],t[2*P+1],t[2*j],t[2*j+1])>=0;)if(P=j,P===F){P=-1;break}if(P===-1)continue;let z=this._addTriangle(P,O,r[P],-1,-1,i[P]);i[O]=this._legalize(z+2),i[P]=z,C++;let V=r[P];for(;j=r[V],YC(R,M,t[2*V],t[2*V+1],t[2*j],t[2*j+1])<0;)z=this._addTriangle(V,O,j,i[O],-1,i[V]),i[O]=this._legalize(z+2),r[V]=V,C--,V=j;if(P===F)for(;j=n[P],YC(R,M,t[2*j],t[2*j+1],t[2*P],t[2*P+1])<0;)z=this._addTriangle(j,O,P,-1,i[P],i[j]),this._legalize(z+2),i[j]=z,r[P]=P,C--,P=j;this._hullStart=n[O]=P,r[P]=n[V]=O,r[O]=V,s[this._hashKey(R,M)]=O,s[this._hashKey(t[2*P],t[2*P+1])]=P}this.hull=new Uint32Array(C);for(let A=0,D=this._hullStart;A<C;A++)this.hull[A]=D,D=r[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(FJe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=KC[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(LJe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<KC.length&&(KC[s++]=v)}else{if(s===0)break;t=KC[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function FJe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function gF(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function LJe(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function BJe(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function jJe(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function tv(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;NE(e,i,s),t[e[n]]>t[e[r]]&&NE(e,n,r),t[e[s]]>t[e[r]]&&NE(e,s,r),t[e[n]]>t[e[s]]&&NE(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;NE(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(tv(e,t,s,r),tv(e,t,n,o-1)):(tv(e,t,n,o-1),tv(e,t,s,r))}}function NE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function zJe(e){return e[0]}function UJe(e){return e[1]}const Aee=1e-6;class n0{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Aee||Math.abs(this._y1-s)>Aee)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class h5{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let VJe=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const E=r[m]*2,_=r[m+1]*2,w=r[m+2]*2,S=t[E],C=t[E+1],A=t[_],D=t[_+1],I=t[w],O=t[w+1],R=A-S,M=D-C,F=I-S,P=O-C,j=(R*P-M*F)*2;if(Math.abs(j)<1e-9){if(s===void 0){s=o=0;for(const V of n)s+=t[V*2],o+=t[V*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-S)*P-(o-C)*F);v=(S+I)/2-z*P,b=(C+O)/2+z*F}else{const z=1/j,V=R*R+M*M,$=F*F+P*P;v=S+(P*V-M*$)*z,b=C+(R*$-F*V)*z}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new n0:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new n0:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new n0:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new h5;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const HJe=2*Math.PI,p1=Math.pow;function qJe(e){return e[0]}function WJe(e){return e[1]}function GJe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function YJe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class sU{static from(t,n=qJe,r=WJe,i){return new sU("length"in t?KJe(t,n,r,i):Float64Array.from(XJe(t,n,r,i)))}constructor(t){this._delaunator=new hN(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&GJe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=YJe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new hN(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new VJe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=p1(n-l[t*2],2)+p1(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=p1(n-l[p*2],2)+p1(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&p1(n-l[h*2],2)+p1(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new n0:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new n0:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,HJe)}return r&&r.value()}renderHull(t){const n=t==null?t=new n0:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new h5;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new n0:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new h5;return this.renderTriangle(t,n),n.value()}}function KJe(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*XJe(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Dee={},yF={},vF=34,kE=10,bF=13;function g0e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function QJe(e,t){var n=g0e(e);return function(r,i){return t(n(r),i,e)}}function Iee(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Sa(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function JJe(e){return e<0?"-"+Sa(-e,6):e>9999?"+"+Sa(e,6):Sa(e,4)}function ZJe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":JJe(e.getUTCFullYear())+"-"+Sa(e.getUTCMonth()+1,2)+"-"+Sa(e.getUTCDate(),2)+(i?"T"+Sa(t,2)+":"+Sa(n,2)+":"+Sa(r,2)+"."+Sa(i,3)+"Z":r?"T"+Sa(t,2)+":"+Sa(n,2)+":"+Sa(r,2)+"Z":n||t?"T"+Sa(t,2)+":"+Sa(n,2)+"Z":"")}function eZe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?QJe(g,d):g0e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===kE&&--p,f.charCodeAt(p-1)===bF&&--p;function E(){if(v)return yF;if(b)return b=!1,Dee;var w,S=m,C;if(f.charCodeAt(S)===vF){for(;m++<p&&f.charCodeAt(m)!==vF||f.charCodeAt(++m)===vF;);return(w=m)>=p?v=!0:(C=f.charCodeAt(m++))===kE?b=!0:C===bF&&(b=!0,f.charCodeAt(m)===kE&&++m),f.slice(S+1,w-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(w=m++))===kE)b=!0;else if(C===bF)b=!0,f.charCodeAt(m)===kE&&++m;else if(C!==n)continue;return f.slice(S,w)}return v=!0,f.slice(S,p)}for(;(y=E())!==yF;){for(var _=[];y!==Dee&&y!==yF;)_.push(y),y=E();d&&(_=d(_,g++))==null||h.push(_)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Iee(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Iee(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?ZJe(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function tZe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function nZe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return y0e(this.cover(t,n),t,n,e)}function y0e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function rZe(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)y0e(this,o[n],a[n],e[n]);return this}function iZe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function sZe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function oZe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function na(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function aZe(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new na(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new na(h[3],g,y,u,l),new na(h[2],o,y,g,l),new na(h[1],g,a,u,y),new na(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),E=v*v+b*b;if(E<n){var _=Math.sqrt(n=E);i=e-_,s=t-_,c=e+_,f=t+_,r=h.data}}return r}function uZe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function lZe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function cZe(){return this._root}function fZe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function dZe(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new na(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new na(i,l,c,a,u)),(i=r[2])&&t.push(new na(i,s,c,l,u)),(i=r[1])&&t.push(new na(i,l,o,a,c)),(i=r[0])&&t.push(new na(i,s,o,l,c))}return this}function hZe(e){var t=[],n=[],r;for(this._root&&t.push(new na(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new na(s,o,a,c,f)),(s=i[1])&&t.push(new na(s,c,a,u,f)),(s=i[2])&&t.push(new na(s,o,f,c,l)),(s=i[3])&&t.push(new na(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function pZe(e){return e[0]}function mZe(e){return arguments.length?(this._x=e,this):this._x}function gZe(e){return e[1]}function yZe(e){return arguments.length?(this._y=e,this):this._y}function oU(e,t,n){var r=new aU(t??pZe,n??gZe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function aU(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Nee(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ya=oU.prototype=aU.prototype;ya.copy=function(){var e=new aU(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Nee(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Nee(r));return e};ya.add=nZe;ya.addAll=rZe;ya.cover=iZe;ya.data=sZe;ya.extent=oZe;ya.find=aZe;ya.remove=uZe;ya.removeAll=lZe;ya.root=cZe;ya.size=fZe;ya.visit=dZe;ya.visitAfter=hZe;ya.x=mZe;ya.y=yZe;function ra(e){return function(){return e}}function Dp(e){return(e()-.5)*1e-6}function vZe(e){return e.x+e.vx}function bZe(e){return e.y+e.vy}function _Ze(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ra(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=oU(t,vZe,bZe).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,E,_,w,S){var C=b.data,A=b.r,D=m+A;if(C){if(C.index>d.index){var I=h-C.x-C.vx,O=p-C.y-C.vy,R=I*I+O*O;R<D*D&&(I===0&&(I=Dp(r),R+=I*I),O===0&&(O=Dp(r),R+=O*O),R=(D-(R=Math.sqrt(R)))/R*i,d.vx+=(I*=R)*(D=(A*=A)/(g+A)),d.vy+=(O*=R)*D,C.vx-=I*(D=1-D),C.vy-=O*D)}return}return E>h+D||w<h-D||_>p+D||S<p-D}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ra(+l),u(),o):e},o}function EZe(e){return e.index}function kee(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function wZe(e){var t=EZe,n=f,r,i=ra(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,E,_,w,S,C,A,D;b<v;++b)E=e[b],_=E.source,w=E.target,S=w.x+w.vx-_.x-_.vx||Dp(l),C=w.y+w.vy-_.y-_.vy||Dp(l),A=Math.sqrt(S*S+C*C),A=(A-s[b])/A*g*r[b],S*=A,C*=A,w.vx-=S*(D=u[b]),w.vy-=C*D,_.vx+=S*(D=1-D),_.vy+=C*D}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((_,w)=>[t(_,w,o),_])),E;for(g=0,a=new Array(y);g<v;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=kee(b,E.source)),typeof E.target!="object"&&(E.target=kee(b,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ra(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ra(+g),m(),d):i},d}const xZe=1664525,SZe=1013904223,Ree=4294967296;function TZe(){let e=1;return()=>(e=(xZe*e+SZe)%Ree)/Ree}function CZe(e){return e.x}function AZe(e){return e.y}var DZe=10,IZe=Math.PI*(3-Math.sqrt(5));function NZe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=tU(f),l=Qz("tick","end"),c=TZe();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=DZe*Math.sqrt(.5+m),b=m*IZe;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,E,_,w,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],E=m-S.x,_=g-S.y,w=E*E+_*_,w<y&&(C=S,y=w);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function kZe(){var e,t,n,r,i=ra(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=oU(e,CZe,AZe).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,E;if(h.length){for(v=b=E=0;E<4;++E)(m=h[E])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,E=y*y+v*v;if(b*b/u<E)return E<a&&(y===0&&(y=Dp(n),E+=y*y),v===0&&(v=Dp(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)),t.vx+=y*h.value*r/E,t.vy+=v*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Dp(n),E+=y*y),v===0&&(v=Dp(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(b=s[h.data.index]*r/E,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ra(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function RZe(e){var t=ra(.1),n,r,i;typeof e!="function"&&(e=ra(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ra(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ra(+a),o(),s):e},s}function PZe(e){var t=ra(.1),n,r,i;typeof e!="function"&&(e=ra(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ra(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ra(+a),o(),s):e},s}var qt=1e-6,pN=1e-12,Cn=Math.PI,Si=Cn/2,mN=Cn/4,ca=Cn*2,Pi=180/Cn,xn=Cn/180,jn=Math.abs,A_=Math.atan,bl=Math.atan2,Yt=Math.cos,XC=Math.ceil,v0e=Math.exp,p5=Math.hypot,gN=Math.log,_F=Math.pow,jt=Math.sin,ul=Math.sign||function(e){return e>0?1:e<0?-1:0},fa=Math.sqrt,uU=Math.tan;function b0e(e){return e>1?0:e<-1?Cn:Math.acos(e)}function Ja(e){return e>1?Si:e<-1?-Si:Math.asin(e)}function Ys(){}function yN(e,t){e&&Oee.hasOwnProperty(e.type)&&Oee[e.type](e,t)}var Pee={Feature:function(e,t){yN(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yN(n[r].geometry,t)}},Oee={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){m5(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)m5(n[r],t,0)},Polygon:function(e,t){Mee(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mee(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yN(n[r],t)}};function m5(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Mee(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)m5(e[n],t,1);t.polygonEnd()}function kd(e,t){e&&Pee.hasOwnProperty(e.type)?Pee[e.type](e,t):yN(e,t)}var vN=new oa,bN=new oa,_0e,E0e,g5,y5,v5,Nf={point:Ys,lineStart:Ys,lineEnd:Ys,polygonStart:function(){vN=new oa,Nf.lineStart=OZe,Nf.lineEnd=MZe},polygonEnd:function(){var e=+vN;bN.add(e<0?ca+e:e),this.lineStart=this.lineEnd=this.point=Ys},sphere:function(){bN.add(ca)}};function OZe(){Nf.point=$Ze}function MZe(){w0e(_0e,E0e)}function $Ze(e,t){Nf.point=w0e,_0e=e,E0e=t,e*=xn,t*=xn,g5=e,y5=Yt(t=t/2+mN),v5=jt(t)}function w0e(e,t){e*=xn,t*=xn,t=t/2+mN;var n=e-g5,r=n>=0?1:-1,i=r*n,s=Yt(t),o=jt(t),a=v5*o,u=y5*s+a*Yt(i),l=a*r*jt(i);vN.add(bl(l,u)),g5=e,y5=s,v5=o}function FZe(e){return bN=new oa,kd(e,Nf),bN*2}function _N(e){return[bl(e[1],e[0]),Ja(e[2])]}function L0(e){var t=e[0],n=e[1],r=Yt(n);return[r*Yt(t),r*jt(t),jt(n)]}function QC(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pb(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function EF(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function JC(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function EN(e){var t=fa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var oi,ka,vi,mu,Og,x0e,S0e,Av,fx,cp,Eh,Dd={point:b5,lineStart:$ee,lineEnd:Fee,polygonStart:function(){Dd.point=C0e,Dd.lineStart=LZe,Dd.lineEnd=BZe,fx=new oa,Nf.polygonStart()},polygonEnd:function(){Nf.polygonEnd(),Dd.point=b5,Dd.lineStart=$ee,Dd.lineEnd=Fee,vN<0?(oi=-(vi=180),ka=-(mu=90)):fx>qt?mu=90:fx<-qt&&(ka=-90),Eh[0]=oi,Eh[1]=vi},sphere:function(){oi=-(vi=180),ka=-(mu=90)}};function b5(e,t){cp.push(Eh=[oi=e,vi=e]),t<ka&&(ka=t),t>mu&&(mu=t)}function T0e(e,t){var n=L0([e*xn,t*xn]);if(Av){var r=pb(Av,n),i=[r[1],-r[0],0],s=pb(i,r);EN(s),s=_N(s);var o=e-Og,a=o>0?1:-1,u=s[0]*Pi*a,l,c=jn(o)>180;c^(a*Og<u&&u<a*e)?(l=s[1]*Pi,l>mu&&(mu=l)):(u=(u+360)%360-180,c^(a*Og<u&&u<a*e)?(l=-s[1]*Pi,l<ka&&(ka=l)):(t<ka&&(ka=t),t>mu&&(mu=t))),c?e<Og?hu(oi,e)>hu(oi,vi)&&(vi=e):hu(e,vi)>hu(oi,vi)&&(oi=e):vi>=oi?(e<oi&&(oi=e),e>vi&&(vi=e)):e>Og?hu(oi,e)>hu(oi,vi)&&(vi=e):hu(e,vi)>hu(oi,vi)&&(oi=e)}else cp.push(Eh=[oi=e,vi=e]);t<ka&&(ka=t),t>mu&&(mu=t),Av=n,Og=e}function $ee(){Dd.point=T0e}function Fee(){Eh[0]=oi,Eh[1]=vi,Dd.point=b5,Av=null}function C0e(e,t){if(Av){var n=e-Og;fx.add(jn(n)>180?n+(n>0?360:-360):n)}else x0e=e,S0e=t;Nf.point(e,t),T0e(e,t)}function LZe(){Nf.lineStart()}function BZe(){C0e(x0e,S0e),Nf.lineEnd(),jn(fx)>qt&&(oi=-(vi=180)),Eh[0]=oi,Eh[1]=vi,Av=null}function hu(e,t){return(t-=e)<0?t+360:t}function jZe(e,t){return e[0]-t[0]}function Lee(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function zZe(e){var t,n,r,i,s,o,a;if(mu=vi=-(oi=ka=1/0),cp=[],kd(e,Dd),n=cp.length){for(cp.sort(jZe),t=1,r=cp[0],s=[r];t<n;++t)i=cp[t],Lee(r,i[0])||Lee(r,i[1])?(hu(r[0],i[1])>hu(r[0],r[1])&&(r[1]=i[1]),hu(i[0],r[1])>hu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=hu(r[1],i[0]))>o&&(o=a,oi=i[0],vi=r[1])}return cp=Eh=null,oi===1/0||ka===1/0?[[NaN,NaN],[NaN,NaN]]:[[oi,ka],[vi,mu]]}var gw,wN,xN,SN,TN,CN,AN,DN,_5,E5,w5,A0e,D0e,Zo,ea,ta,sc={sphere:Ys,point:lU,lineStart:Bee,lineEnd:jee,polygonStart:function(){sc.lineStart=HZe,sc.lineEnd=qZe},polygonEnd:function(){sc.lineStart=Bee,sc.lineEnd=jee}};function lU(e,t){e*=xn,t*=xn;var n=Yt(t);GT(n*Yt(e),n*jt(e),jt(t))}function GT(e,t,n){++gw,xN+=(e-xN)/gw,SN+=(t-SN)/gw,TN+=(n-TN)/gw}function Bee(){sc.point=UZe}function UZe(e,t){e*=xn,t*=xn;var n=Yt(t);Zo=n*Yt(e),ea=n*jt(e),ta=jt(t),sc.point=VZe,GT(Zo,ea,ta)}function VZe(e,t){e*=xn,t*=xn;var n=Yt(t),r=n*Yt(e),i=n*jt(e),s=jt(t),o=bl(fa((o=ea*s-ta*i)*o+(o=ta*r-Zo*s)*o+(o=Zo*i-ea*r)*o),Zo*r+ea*i+ta*s);wN+=o,CN+=o*(Zo+(Zo=r)),AN+=o*(ea+(ea=i)),DN+=o*(ta+(ta=s)),GT(Zo,ea,ta)}function jee(){sc.point=lU}function HZe(){sc.point=WZe}function qZe(){I0e(A0e,D0e),sc.point=lU}function WZe(e,t){A0e=e,D0e=t,e*=xn,t*=xn,sc.point=I0e;var n=Yt(t);Zo=n*Yt(e),ea=n*jt(e),ta=jt(t),GT(Zo,ea,ta)}function I0e(e,t){e*=xn,t*=xn;var n=Yt(t),r=n*Yt(e),i=n*jt(e),s=jt(t),o=ea*s-ta*i,a=ta*r-Zo*s,u=Zo*i-ea*r,l=p5(o,a,u),c=Ja(l),f=l&&-c/l;_5.add(f*o),E5.add(f*a),w5.add(f*u),wN+=c,CN+=c*(Zo+(Zo=r)),AN+=c*(ea+(ea=i)),DN+=c*(ta+(ta=s)),GT(Zo,ea,ta)}function GZe(e){gw=wN=xN=SN=TN=CN=AN=DN=0,_5=new oa,E5=new oa,w5=new oa,kd(e,sc);var t=+_5,n=+E5,r=+w5,i=p5(t,n,r);return i<pN&&(t=CN,n=AN,r=DN,wN<qt&&(t=xN,n=SN,r=TN),i=p5(t,n,r),i<pN)?[NaN,NaN]:[bl(n,t)*Pi,Ja(r/i)*Pi]}function x5(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function S5(e,t){return jn(e)>Cn&&(e-=Math.round(e/ca)*ca),[e,t]}S5.invert=S5;function N0e(e,t,n){return(e%=ca)?t||n?x5(Uee(e),Vee(t,n)):Uee(e):t||n?Vee(t,n):S5}function zee(e){return function(t,n){return t+=e,jn(t)>Cn&&(t-=Math.round(t/ca)*ca),[t,n]}}function Uee(e){var t=zee(e);return t.invert=zee(-e),t}function Vee(e,t){var n=Yt(e),r=jt(e),i=Yt(t),s=jt(t);function o(a,u){var l=Yt(u),c=Yt(a)*l,f=jt(a)*l,d=jt(u),h=d*n+c*r;return[bl(f*i-h*s,c*n-d*r),Ja(h*i+f*s)]}return o.invert=function(a,u){var l=Yt(u),c=Yt(a)*l,f=jt(a)*l,d=jt(u),h=d*i-f*s;return[bl(f*i+d*s,c*n+h*r),Ja(h*n-c*r)]},o}function YZe(e){e=N0e(e[0]*xn,e[1]*xn,e.length>2?e[2]*xn:0);function t(n){return n=e(n[0]*xn,n[1]*xn),n[0]*=Pi,n[1]*=Pi,n}return t.invert=function(n){return n=e.invert(n[0]*xn,n[1]*xn),n[0]*=Pi,n[1]*=Pi,n},t}function KZe(e,t,n,r,i,s){if(n){var o=Yt(t),a=jt(t),u=r*n;i==null?(i=t+r*ca,s=t-u/2):(i=Hee(o,i),s=Hee(o,s),(r>0?i<s:i>s)&&(i+=r*ca));for(var l,c=i;r>0?c>s:c<s;c-=u)l=_N([o,-a*Yt(c),-a*jt(c)]),e.point(l[0],l[1])}}function Hee(e,t){t=L0(t),t[0]-=e,EN(t);var n=b0e(-t[1]);return((-t[2]<0?-n:n)+ca-qt)%ca}function k0e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ys,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function wD(e,t){return jn(e[0]-t[0])<qt&&jn(e[1]-t[1])<qt}function ZC(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function R0e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(wD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*qt}s.push(v=new ZC(g,p,null,!0)),o.push(v.o=new ZC(g,null,v,!1)),s.push(v=new ZC(y,p,null,!1)),o.push(v.o=new ZC(y,null,v,!0))}}),!!s.length){for(o.sort(t),qee(s),qee(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function qee(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function wF(e){return jn(e[0])<=Cn?e[0]:ul(e[0])*((jn(e[0])+Cn)%ca-Cn)}function XZe(e,t){var n=wF(t),r=t[1],i=jt(r),s=[jt(n),-Yt(n),0],o=0,a=0,u=new oa;i===1?r=Si+qt:i===-1&&(r=-Si-qt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=wF(h),m=h[1]/2+mN,g=jt(m),y=Yt(m),v=0;v<d;++v,p=E,g=w,y=S,h=b){var b=f[v],E=wF(b),_=b[1]/2+mN,w=jt(_),S=Yt(_),C=E-p,A=C>=0?1:-1,D=A*C,I=D>Cn,O=g*w;if(u.add(bl(O*A*jt(D),y*S+O*Yt(D))),o+=I?C+A*ca:C,I^p>=n^E>=n){var R=pb(L0(h),L0(b));EN(R);var M=pb(s,R);EN(M);var F=(I^C>=0?-1:1)*Ja(M[2]);(r>F||r===F&&(R[0]||R[1]))&&(a+=I^C>=0?1:-1)}}return(o<-qt||o<qt&&u<-pN)^a&1}function P0e(e,t,n,r){return function(i){var s=t(i),o=k0e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Gme(c);var E=XZe(l,r);c.length?(u||(i.polygonStart(),u=!0),R0e(c,JZe,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,_){e(E,_)&&i.point(E,_)}function p(E,_){s.point(E,_)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(E,_){f.push([E,_]),a.point(E,_)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),_=o.result(),w,S=_.length,C,A,D;if(f.pop(),l.push(f),f=null,!!S){if(E&1){if(A=_[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<C;++w)i.point((D=A[w])[0],D[1]);i.lineEnd()}return}S>1&&E&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(QZe))}}return d}}function QZe(e){return e.length>1}function JZe(e,t){return((e=e.x)[0]<0?e[1]-Si-qt:Si-e[1])-((t=t.x)[0]<0?t[1]-Si-qt:Si-t[1])}const Wee=P0e(function(){return!0},ZZe,tet,[-Cn,-Si]);function ZZe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Cn:-Cn,u=jn(s-t);jn(u-Cn)<qt?(e.point(t,n=(n+o)/2>0?Si:-Si),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Cn&&(jn(t-r)<qt&&(t-=r*qt),jn(s-a)<qt&&(s-=a*qt),n=eet(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function eet(e,t,n,r){var i,s,o=jt(e-n);return jn(o)>qt?A_((jt(t)*(s=Yt(r))*jt(n)-jt(r)*(i=Yt(t))*jt(e))/(i*s*o)):(t+r)/2}function tet(e,t,n,r){var i;if(e==null)i=n*Si,r.point(-Cn,i),r.point(0,i),r.point(Cn,i),r.point(Cn,0),r.point(Cn,-i),r.point(0,-i),r.point(-Cn,-i),r.point(-Cn,0),r.point(-Cn,i);else if(jn(e[0]-t[0])>qt){var s=e[0]<t[0]?Cn:-Cn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function net(e){var t=Yt(e),n=2*xn,r=t>0,i=jn(t)>qt;function s(c,f,d,h){KZe(h,e,n,d,c,f)}function o(c,f){return Yt(c)*Yt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,E=o(g,y),_=r?E?0:l(g,y):E?l(g+(g<0?Cn:-Cn),y):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(b=u(f,v),(!b||wD(f,b)||wD(v,b))&&(v[2]=1)),E!==h)m=0,E?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^E){var w;!(_&d)&&(w=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}E&&(!f||!wD(f,v))&&c.point(v[0],v[1]),f=v,h=E,d=_},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=L0(c),p=L0(f),m=[1,0,0],g=pb(h,p),y=QC(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var E=t*y/b,_=-t*v/b,w=pb(m,g),S=JC(m,E),C=JC(g,_);EF(S,C);var A=w,D=QC(S,A),I=QC(A,A),O=D*D-I*(QC(S,S)-1);if(!(O<0)){var R=fa(O),M=JC(A,(-D-R)/I);if(EF(M,S),M=_N(M),!d)return M;var F=c[0],P=f[0],j=c[1],z=f[1],V;P<F&&(V=F,F=P,P=V);var $=P-F,U=jn($-Cn)<qt,W=U||$<qt;if(!U&&z<j&&(V=j,j=z,z=V),W?U?j+z>0^M[1]<(jn(M[0]-F)<qt?j:z):j<=M[1]&&M[1]<=z:$>Cn^(F<=M[0]&&M[0]<=P)){var B=JC(A,(-D+R)/I);return EF(B,S),[M,_N(B)]}}}function l(c,f){var d=r?e:Cn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return P0e(o,a,s,r?[0,-e]:[-Cn,e-Cn])}function ret(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var yw=1e9,eA=-yw;function O0e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return jn(l[0]-e)<qt?c>0?0:3:jn(l[0]-n)<qt?c>0?2:1:jn(l[1]-t)<qt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=k0e(),d,h,p,m,g,y,v,b,E,_,w,S={point:C,lineStart:O,lineEnd:R,polygonStart:D,polygonEnd:I};function C(F,P){i(F,P)&&c.point(F,P)}function A(){for(var F=0,P=0,j=h.length;P<j;++P)for(var z=h[P],V=1,$=z.length,U=z[0],W,B,q=U[0],Y=U[1];V<$;++V)W=q,B=Y,U=z[V],q=U[0],Y=U[1],B<=r?Y>r&&(q-W)*(r-B)>(Y-B)*(e-W)&&++F:Y<=r&&(q-W)*(r-B)<(Y-B)*(e-W)&&--F;return F}function D(){c=f,d=[],h=[],w=!0}function I(){var F=A(),P=w&&F,j=(d=Gme(d)).length;(P||j)&&(l.polygonStart(),P&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),j&&R0e(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=M,h&&h.push(p=[]),_=!0,E=!1,v=b=NaN}function R(){d&&(M(m,g),y&&E&&f.rejoin(),d.push(f.result())),S.point=C,E&&c.lineEnd()}function M(F,P){var j=i(F,P);if(h&&p.push([F,P]),_)m=F,g=P,y=j,_=!1,j&&(c.lineStart(),c.point(F,P));else if(j&&E)c.point(F,P);else{var z=[v=Math.max(eA,Math.min(yw,v)),b=Math.max(eA,Math.min(yw,b))],V=[F=Math.max(eA,Math.min(yw,F)),P=Math.max(eA,Math.min(yw,P))];ret(z,V,e,t,n,r)?(E||(c.lineStart(),c.point(z[0],z[1])),c.point(V[0],V[1]),j||c.lineEnd(),w=!1):j&&(c.lineStart(),c.point(F,P),w=!1)}v=F,b=P,E=j}return S}}function Gee(e,t,n){var r=Eu(e,t-qt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Yee(e,t,n){var r=Eu(e,t-qt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function iet(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Eu(XC(r/c)*c,n,c).map(p).concat(Eu(XC(a/f)*f,o,f).map(m)).concat(Eu(XC(t/u)*u,e,u).filter(function(b){return jn(b%c)>qt}).map(d)).concat(Eu(XC(s/l)*l,i,l).filter(function(b){return jn(b%f)>qt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Gee(s,i,90),h=Yee(t,e,g),p=Gee(a,o,90),m=Yee(r,n,g),y):g},y.extentMajor([[-180,-90+qt],[180,90-qt]]).extentMinor([[-180,-80-qt],[180,80+qt]])}const CS=e=>e;var xF=new oa,T5=new oa,M0e,$0e,C5,A5,Rd={point:Ys,lineStart:Ys,lineEnd:Ys,polygonStart:function(){Rd.lineStart=set,Rd.lineEnd=aet},polygonEnd:function(){Rd.lineStart=Rd.lineEnd=Rd.point=Ys,xF.add(jn(T5)),T5=new oa},result:function(){var e=xF/2;return xF=new oa,e}};function set(){Rd.point=oet}function oet(e,t){Rd.point=F0e,M0e=C5=e,$0e=A5=t}function F0e(e,t){T5.add(A5*e-C5*t),C5=e,A5=t}function aet(){F0e(M0e,$0e)}var mb=1/0,IN=mb,AS=-mb,NN=AS,kN={point:uet,lineStart:Ys,lineEnd:Ys,polygonStart:Ys,polygonEnd:Ys,result:function(){var e=[[mb,IN],[AS,NN]];return AS=NN=-(IN=mb=1/0),e}};function uet(e,t){e<mb&&(mb=e),e>AS&&(AS=e),t<IN&&(IN=t),t>NN&&(NN=t)}var D5=0,I5=0,vw=0,RN=0,PN=0,nv=0,N5=0,k5=0,bw=0,L0e,B0e,of,af,il={point:B0,lineStart:Kee,lineEnd:Xee,polygonStart:function(){il.lineStart=det,il.lineEnd=het},polygonEnd:function(){il.point=B0,il.lineStart=Kee,il.lineEnd=Xee},result:function(){var e=bw?[N5/bw,k5/bw]:nv?[RN/nv,PN/nv]:vw?[D5/vw,I5/vw]:[NaN,NaN];return D5=I5=vw=RN=PN=nv=N5=k5=bw=0,e}};function B0(e,t){D5+=e,I5+=t,++vw}function Kee(){il.point=cet}function cet(e,t){il.point=fet,B0(of=e,af=t)}function fet(e,t){var n=e-of,r=t-af,i=fa(n*n+r*r);RN+=i*(of+e)/2,PN+=i*(af+t)/2,nv+=i,B0(of=e,af=t)}function Xee(){il.point=B0}function det(){il.point=pet}function het(){j0e(L0e,B0e)}function pet(e,t){il.point=j0e,B0(L0e=of=e,B0e=af=t)}function j0e(e,t){var n=e-of,r=t-af,i=fa(n*n+r*r);RN+=i*(of+e)/2,PN+=i*(af+t)/2,nv+=i,i=af*e-of*t,N5+=i*(of+e),k5+=i*(af+t),bw+=i*3,B0(of=e,af=t)}function z0e(e){this._context=e}z0e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ca);break}}},result:Ys};var R5=new oa,SF,U0e,V0e,_w,Ew,DS={point:Ys,lineStart:function(){DS.point=met},lineEnd:function(){SF&&H0e(U0e,V0e),DS.point=Ys},polygonStart:function(){SF=!0},polygonEnd:function(){SF=null},result:function(){var e=+R5;return R5=new oa,e}};function met(e,t){DS.point=H0e,U0e=_w=e,V0e=Ew=t}function H0e(e,t){_w-=e,Ew-=t,R5.add(fa(_w*_w+Ew*Ew)),_w=e,Ew=t}let Qee,ON,Jee,Zee;class ete{constructor(t){this._append=t==null?q0e:get(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Jee||this._append!==ON){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Jee=r,ON=this._append,Zee=this._,this._=i}this._+=Zee;break}}}result(){const t=this._;return this._="",t.length?t:null}}function q0e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function get(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return q0e;if(t!==Qee){const n=10**t;Qee=t,ON=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return ON}function W0e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),kd(a,i(s))),s.result()}return o.area=function(a){return kd(a,i(Rd)),Rd.result()},o.measure=function(a){return kd(a,i(DS)),DS.result()},o.bounds=function(a){return kd(a,i(kN)),kN.result()},o.centroid=function(a){return kd(a,i(il)),il.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,CS):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new ete(n)):new z0e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new ete(n)),o},o.projection(e).digits(n).context(t)}function GP(e){return function(t){var n=new P5;for(var r in e)n[r]=e[r];return n.stream=t,n}}function P5(){}P5.prototype={constructor:P5,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function cU(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),kd(n,e.stream(kN)),t(kN.result()),r!=null&&e.clipExtent(r),e}function YP(e,t,n){return cU(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function fU(e,t,n){return YP(e,[[0,0],t],n)}function dU(e,t,n){return cU(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function hU(e,t,n){return cU(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var tte=16,yet=Yt(30*xn);function nte(e,t){return+t?bet(e,t):vet(e)}function vet(e){return GP({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function bet(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var E=o+d,_=a+h,w=u+p,S=fa(E*E+_*_+w*w),C=Ja(w/=S),A=jn(jn(w)-1)<qt||jn(s-f)<qt?(s+f)/2:bl(_,E),D=e(A,C),I=D[0],O=D[1],R=I-r,M=O-i,F=v*R-y*M;(F*F/b>t||jn((y*R+v*M)/b-.5)>.3||o*d+a*h+u*p<yet)&&(n(r,i,s,o,a,u,I,O,A,E/=S,_/=S,w,m,g),g.point(I,O),n(I,O,A,E,_,w,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,A){var D=L0([C,A]),I=e(C,A);n(f,d,c,h,p,m,f=I[0],d=I[1],c=C,h=D[0],p=D[1],m=D[2],tte,r),r.point(f,d)}function E(){g.point=y,r.lineEnd()}function _(){v(),g.point=w,g.lineEnd=S}function w(C,A){b(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,tte,r),g.lineEnd=E,E()}return g}}var _et=GP({point:function(e,t){this.stream.point(e*xn,t*xn)}});function Eet(e){return GP({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function wet(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function rte(e,t,n,r,i,s){if(!s)return wet(e,t,n,r,i);var o=Yt(s),a=jt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Xf(e){return G0e(function(){return e})()}function G0e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Wee,g=null,y,v,b,E=CS,_=.5,w,S,C,A,D;function I(F){return C(F[0]*xn,F[1]*xn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*Pi,F[1]*Pi]}I.stream=function(F){return A&&D===F?A:A=_et(Eet(c)(m(w(E(D=F)))))},I.preclip=function(F){return arguments.length?(m=F,p=void 0,M()):m},I.postclip=function(F){return arguments.length?(E=F,g=y=v=b=null,M()):E},I.clipAngle=function(F){return arguments.length?(m=+F?net(p=F*xn):(p=null,Wee),M()):p*Pi},I.clipExtent=function(F){return arguments.length?(E=F==null?(g=y=v=b=null,CS):O0e(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),M()):g==null?null:[[g,y],[v,b]]},I.scale=function(F){return arguments.length?(n=+F,R()):n},I.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],R()):[r,i]},I.center=function(F){return arguments.length?(s=F[0]%360*xn,o=F[1]%360*xn,R()):[s*Pi,o*Pi]},I.rotate=function(F){return arguments.length?(a=F[0]%360*xn,u=F[1]%360*xn,l=F.length>2?F[2]%360*xn:0,R()):[a*Pi,u*Pi,l*Pi]},I.angle=function(F){return arguments.length?(f=F%360*xn,R()):f*Pi},I.reflectX=function(F){return arguments.length?(d=F?-1:1,R()):d<0},I.reflectY=function(F){return arguments.length?(h=F?-1:1,R()):h<0},I.precision=function(F){return arguments.length?(w=nte(S,_=F*F),M()):fa(_)},I.fitExtent=function(F,P){return YP(I,F,P)},I.fitSize=function(F,P){return fU(I,F,P)},I.fitWidth=function(F,P){return dU(I,F,P)},I.fitHeight=function(F,P){return hU(I,F,P)};function R(){var F=rte(n,0,0,d,h,f).apply(null,t(s,o)),P=rte(n,r-F[0],i-F[1],d,h,f);return c=N0e(a,u,l),S=x5(t,P),C=x5(c,S),w=nte(S,_),M()}function M(){return A=D=null,I}return function(){return t=e.apply(this,arguments),I.invert=t.invert&&O,R()}}function pU(e){var t=0,n=Cn/3,r=G0e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*xn,n=s[1]*xn):[t*Pi,n*Pi]},i}function xet(e){var t=Yt(e);function n(r,i){return[r*t,jt(i)/t]}return n.invert=function(r,i){return[r/t,Ja(i*t)]},n}function Tet(e,t){var n=jt(e),r=(n+jt(t))/2;if(jn(r)<qt)return xet(e);var i=1+n*(2*r-n),s=fa(i)/r;function o(a,u){var l=fa(i-2*r*jt(u))/r;return[l*jt(a*=r),s-l*Yt(a)]}return o.invert=function(a,u){var l=s-u,c=bl(a,jn(l))*ul(l);return l*r<0&&(c-=Cn*ul(a)*ul(l)),[c/r,Ja((i-(a*a+l*l)*r*r)/(2*r))]},o}function MN(){return pU(Tet).scale(155.424).center([0,33.6442])}function Y0e(){return MN().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Cet(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Aet(){var e,t,n=Y0e(),r,i=MN().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=MN().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Cet([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+qt,m+.12*h+qt],[p-.214*h-qt,m+.234*h-qt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+qt,m+.166*h+qt],[p-.115*h-qt,m+.234*h-qt]]).stream(l),f()},c.fitExtent=function(d,h){return YP(c,d,h)},c.fitSize=function(d,h){return fU(c,d,h)},c.fitWidth=function(d,h){return dU(c,d,h)},c.fitHeight=function(d,h){return hU(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function K0e(e){return function(t,n){var r=Yt(t),i=Yt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*jt(t),s*jt(n)]}}function YT(e){return function(t,n){var r=fa(t*t+n*n),i=e(r),s=jt(i),o=Yt(i);return[bl(t*s,r*o),Ja(r&&n*s/r)]}}var X0e=K0e(function(e){return fa(2/(1+e))});X0e.invert=YT(function(e){return 2*Ja(e/2)});function Det(){return Xf(X0e).scale(124.75).clipAngle(180-.001)}var Q0e=K0e(function(e){return(e=b0e(e))&&e/jt(e)});Q0e.invert=YT(function(e){return e});function Iet(){return Xf(Q0e).scale(79.4188).clipAngle(180-.001)}function KP(e,t){return[e,gN(uU((Si+t)/2))]}KP.invert=function(e,t){return[e,2*A_(v0e(t))-Si]};function Net(){return J0e(KP).scale(961/ca)}function J0e(e){var t=Xf(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Cn*r(),d=t(YZe(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===KP?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function tA(e){return uU((Si+e)/2)}function ket(e,t){var n=Yt(e),r=e===t?jt(e):gN(n/Yt(t))/gN(tA(t)/tA(e)),i=n*_F(tA(e),r)/r;if(!r)return KP;function s(o,a){i>0?a<-Si+qt&&(a=-Si+qt):a>Si-qt&&(a=Si-qt);var u=i/_F(tA(a),r);return[u*jt(r*o),i-u*Yt(r*o)]}return s.invert=function(o,a){var u=i-a,l=ul(r)*fa(o*o+u*u),c=bl(o,jn(u))*ul(u);return u*r<0&&(c-=Cn*ul(o)*ul(u)),[c/r,2*A_(_F(i/l,1/r))-Si]},s}function Ret(){return pU(ket).scale(109.5).parallels([30,30])}function $N(e,t){return[e,t]}$N.invert=$N;function Pet(){return Xf($N).scale(152.63)}function Oet(e,t){var n=Yt(e),r=e===t?jt(e):(n-Yt(t))/(t-e),i=n/r+e;if(jn(r)<qt)return $N;function s(o,a){var u=i-a,l=r*o;return[u*jt(l),i-u*Yt(l)]}return s.invert=function(o,a){var u=i-a,l=bl(o,jn(u))*ul(u);return u*r<0&&(l-=Cn*ul(o)*ul(u)),[l/r,i-ul(r)*fa(o*o+u*u)]},s}function Met(){return pU(Oet).scale(131.154).center([0,13.9389])}var dx=1.340264,hx=-.081106,px=893e-6,mx=.003796,FN=fa(3)/2,$et=12;function Z0e(e,t){var n=Ja(FN*jt(t)),r=n*n,i=r*r*r;return[e*Yt(n)/(FN*(dx+3*hx*r+i*(7*px+9*mx*r))),n*(dx+hx*r+i*(px+mx*r))]}Z0e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<$et&&(a=n*(dx+hx*r+i*(px+mx*r))-t,u=dx+3*hx*r+i*(7*px+9*mx*r),n-=o=a/u,r=n*n,i=r*r*r,!(jn(o)<pN));++s);return[FN*e*(dx+3*hx*r+i*(7*px+9*mx*r))/Yt(n),Ja(jt(n)/FN)]};function Fet(){return Xf(Z0e).scale(177.158)}function eye(e,t){var n=Yt(t),r=Yt(e)*n;return[n*jt(e)/r,jt(t)/r]}eye.invert=YT(A_);function Let(){return Xf(eye).scale(144.049).clipAngle(60)}function Bet(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=GP({point:function(E,_){var w=b([E,_]);this.stream.point(w[0],w[1])}}),m=CS,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(E){var _=E[0]*d,w=E[1]*h;if(s){var S=w*o-_*a;_=_*o+w*a,w=S}return[_+t,w+n]}return b.invert=function(E){var _=E[0]-t,w=E[1]-n;if(s){var S=w*o+_*a;_=_*o-w*a,w=S}return[_/d,w/h]},b.stream=function(E){return g&&y===E?g:g=p(m(y=E))},b.postclip=function(E){return arguments.length?(m=E,u=l=c=f=null,v()):m},b.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=f=null,CS):O0e(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(E){return arguments.length?(e=+E,v()):e},b.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],v()):[t,n]},b.angle=function(E){return arguments.length?(s=E%360*xn,a=jt(s),o=Yt(s),v()):s*Pi},b.reflectX=function(E){return arguments.length?(r=E?-1:1,v()):r<0},b.reflectY=function(E){return arguments.length?(i=E?-1:1,v()):i<0},b.fitExtent=function(E,_){return YP(b,E,_)},b.fitSize=function(E,_){return fU(b,E,_)},b.fitWidth=function(E,_){return dU(b,E,_)},b.fitHeight=function(E,_){return hU(b,E,_)},b}function tye(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}tye.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(jn(i)>qt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function jet(){return Xf(tye).scale(175.295)}function nye(e,t){return[Yt(t)*jt(e),jt(t)]}nye.invert=YT(Ja);function zet(){return Xf(nye).scale(249.5).clipAngle(90+qt)}function rye(e,t){var n=Yt(t),r=1+Yt(e)*n;return[n*jt(e)/r,jt(t)/r]}rye.invert=YT(function(e){return 2*A_(e)});function Uet(){return Xf(rye).scale(250).clipAngle(142)}function iye(e,t){return[gN(uU((Si+t)/2)),-e]}iye.invert=function(e,t){return[-t,2*A_(v0e(e))-Si]};function Vet(){var e=J0e(iye),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Het(e,t){return e.parent===t.parent?1:2}function qet(e){return e.reduce(Wet,0)/e.length}function Wet(e,t){return e+t.x}function Get(e){return 1+e.reduce(Yet,0)}function Yet(e,t){return Math.max(e,t.y)}function Ket(e){for(var t;t=e.children;)e=t[0];return e}function Xet(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Qet(){var e=Het,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=qet(h),d.y=Get(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Ket(s),l=Xet(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Jet(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Zet(){return this.eachAfter(Jet)}function ett(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function ttt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function ntt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function rtt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function itt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function stt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function ott(e){for(var t=this,n=att(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function att(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function utt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ltt(){return Array.from(this)}function ctt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function ftt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*dtt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function mU(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=mtt)):t===void 0&&(t=ptt);for(var n=new gb(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new gb(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(sye)}function htt(){return mU(this).eachBefore(gtt)}function ptt(e){return e.children}function mtt(e){return Array.isArray(e)?e[1]:null}function gtt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function sye(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function gb(e){this.data=e,this.depth=this.height=0,this.parent=null}gb.prototype=mU.prototype={constructor:gb,count:Zet,each:ett,eachAfter:ntt,eachBefore:ttt,find:rtt,sum:itt,sort:stt,path:ott,ancestors:utt,descendants:ltt,leaves:ctt,links:ftt,copy:htt,[Symbol.iterator]:dtt};function xD(e){return e==null?null:oye(e)}function oye(e){if(typeof e!="function")throw new Error;return e}function zg(){return 0}function O1(e){return function(){return e}}const ytt=1664525,vtt=1013904223,ite=4294967296;function btt(){let e=1;return()=>(e=(ytt*e+vtt)%ite)/ite}function _tt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ett(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function wtt(e,t){for(var n=0,r=(e=Ett(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&aye(o,s)?++n:(o=Stt(i=xtt(i,s)),n=0);return o}function xtt(e,t){var n,r;if(TF(t,e))return[t];for(n=0;n<e.length;++n)if(nA(t,e[n])&&TF(ww(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(nA(ww(e[n],e[r]),t)&&nA(ww(e[n],t),e[r])&&nA(ww(e[r],t),e[n])&&TF(uye(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function nA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function aye(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function TF(e,t){for(var n=0;n<t.length;++n)if(!aye(e,t[n]))return!1;return!0}function Stt(e){switch(e.length){case 1:return Ttt(e[0]);case 2:return ww(e[0],e[1]);case 3:return uye(e[0],e[1],e[2])}}function Ttt(e){return{x:e.x,y:e.y,r:e.r}}function ww(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function uye(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,E=v-l*l-c*c+f*f,_=h*p-d*m,w=(p*E-m*b)/(_*2)-r,S=(m*g-p*y)/_,C=(h*b-d*E)/(_*2)-i,A=(d*y-h*g)/_,D=S*S+A*A-1,I=2*(s+w*S+C*A),O=w*w+C*C-s*s,R=-(Math.abs(D)>1e-6?(I+Math.sqrt(I*I-4*D*O))/(2*D):O/I);return{x:r+w+S*R,y:i+C+A*R,r:R}}function ste(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ote(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ate(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function rA(e){this._=e,this.next=null,this.previous=null}function Ctt(e,t){if(!(s=(e=_tt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;ste(r,n,i=e[2]),n=new rA(n),r=new rA(r),i=new rA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){ste(n._,r._,i=e[u]),i=new rA(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(ote(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(ote(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=ate(n);(i=i.next)!==r;)(a=ate(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=wtt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Att(e){return Math.sqrt(e.value)}function Dtt(){var e=null,t=1,n=1,r=zg;function i(s){const o=btt();return s.x=t/2,s.y=n/2,e?s.eachBefore(ute(e)).eachAfter(CF(r,.5,o)).eachBefore(lte(1)):s.eachBefore(ute(Att)).eachAfter(CF(zg,1,o)).eachAfter(CF(r,s.r/Math.min(t,n),o)).eachBefore(lte(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=xD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:O1(+s),i):r},i}function ute(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function CF(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Ctt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function lte(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function lye(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function KT(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Itt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(lye),o}function s(o,a){return function(u){u.children&&KT(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Ntt={depth:-1},cte={},AF={};function ktt(e){return e.id}function Rtt(e){return e.parentId}function fte(){var e=ktt,t=Rtt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((E,_)=>Ptt(n(E,_,i))),v=y.map(dte),b=new Set(y).add("");for(const E of v)b.has(E)||(b.add(E),y.push(E),v.push(dte(E)),s.push(AF));o=(E,_)=>y[_],a=(E,_)=>v[_]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new gb(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?cte:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===cte)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===AF&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===AF);--y)h.data=null}if(f.parent=Ntt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(sye),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=xD(i),r):e},r.parentId=function(i){return arguments.length?(t=xD(i),r):t},r.path=function(i){return arguments.length?(n=xD(i),r):n},r}function Ptt(e){e=`${e}`;let t=e.length;return O5(e,t-1)&&!O5(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function dte(e){let t=e.length;if(t<2)return"";for(;--t>1&&!O5(e,t););return e.slice(0,t)}function O5(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Ott(e,t){return e.parent===t.parent?1:2}function DF(e){var t=e.children;return t?t[0]:e.t}function IF(e){var t=e.children;return t?t[t.length-1]:e.t}function Mtt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function $tt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Ftt(e,t,n){return e.a.parent===t.parent?e.a:n}function SD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}SD.prototype=Object.create(gb.prototype);function Ltt(e){for(var t=new SD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new SD(s[o],o)),i.parent=n;return(t.parent=new SD(null,0)).children=[t],t}function Btt(){var e=Ott,t=1,n=1,r=null;function i(l){var c=Ltt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){$tt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,E;p=IF(p),d=DF(d),p&&d;)m=DF(m),h=IF(h),h.a=l,E=p.z+v-d.z-g+e(p._,d._),E>0&&(Mtt(Ftt(p,l,f),l,E),g+=E,y+=E),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!IF(h)&&(h.t=p,h.m+=v-y),d&&!DF(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function XP(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var cye=(1+Math.sqrt(5))/2;function fye(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,E,_,w;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,_=Math.max(p/h,h/p)/(m*e),w=g*g*_,E=Math.max(v/w,w/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),w=g*g*_,b=Math.max(v/w,w/y),b>E){g-=l;break}E=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?KT(u,n,r,i,m?r+=p*g/m:s):XP(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const dye=function e(t){function n(r,i,s,o,a){fye(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(cye);function jtt(){var e=dye,t=!1,n=1,r=1,i=[0],s=zg,o=zg,a=zg,u=zg,l=zg;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(lye),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=oye(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:O1(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:O1(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:O1(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:O1(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:O1(+d),c):l},c}function ztt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],E=h/2+b,_=f+1,w=d-1;_<w;){var S=_+w>>>1;l[S]<E?_=S+1:w=S}E-l[_-1]<l[_]-E&&f+1<_&&--_;var C=l[_]-b,A=h-C;if(g-p>y-m){var D=h?(p*A+g*C)/h:g;c(f,_,C,p,m,D,y),c(_,d,A,D,m,g,y)}else{var I=h?(m*A+y*C)/h:y;c(f,_,C,p,m,g,I),c(_,d,A,p,I,g,y)}}}function Utt(e,t,n,r,i){(e.depth&1?XP:KT)(e,t,n,r,i)}const Vtt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?KT(l,i,s,o,m?s+=(a-s)*l.value/m:a):XP(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=fye(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(cye);function Qf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Htt=Qf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),qtt=Qf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Wtt=Qf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Gtt=Qf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Ytt=Qf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ktt=Qf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Xtt=Qf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Qtt=Qf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Jtt=Qf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ztt=Qf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function ar(e){return function(){return e}}const hte=Math.abs,yo=Math.atan2,vg=Math.cos,ent=Math.max,NF=Math.min,qc=Math.sin,r0=Math.sqrt,_o=1e-12,yb=Math.PI,LN=yb/2,hye=2*yb;function tnt(e){return e>1?0:e<-1?yb:Math.acos(e)}function pte(e){return e>=1?LN:e<=-1?-LN:Math.asin(e)}function QP(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new iU(t)}function nnt(e){return e.innerRadius}function rnt(e){return e.outerRadius}function int(e){return e.startAngle}function snt(e){return e.endAngle}function ont(e){return e&&e.padAngle}function ant(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<_o))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function iA(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/r0(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,E=v*v+b*b,_=i-s,w=d*m-p*h,S=(b<0?-1:1)*r0(ent(0,_*_*E-w*w)),C=(w*b-v*S)/E,A=(-w*v-b*S)/E,D=(w*b+v*S)/E,I=(-w*v+b*S)/E,O=C-g,R=A-y,M=D-g,F=I-y;return O*O+R*R>M*M+F*F&&(C=D,A=I),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/_-1),y11:A*(i/_-1)}}function unt(){var e=nnt,t=rnt,n=ar(0),r=null,i=int,s=snt,o=ont,a=null,u=QP(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-LN,m=s.apply(this,arguments)-LN,g=hte(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>_o))a.moveTo(0,0);else if(g>hye-_o)a.moveTo(h*vg(p),h*qc(p)),a.arc(0,0,h,p,m,!y),d>_o&&(a.moveTo(d*vg(m),d*qc(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,E=p,_=m,w=g,S=g,C=o.apply(this,arguments)/2,A=C>_o&&(r?+r.apply(this,arguments):r0(d*d+h*h)),D=NF(hte(h-d)/2,+n.apply(this,arguments)),I=D,O=D,R,M;if(A>_o){var F=pte(A/d*qc(C)),P=pte(A/h*qc(C));(w-=F*2)>_o?(F*=y?1:-1,E+=F,_-=F):(w=0,E=_=(p+m)/2),(S-=P*2)>_o?(P*=y?1:-1,v+=P,b-=P):(S=0,v=b=(p+m)/2)}var j=h*vg(v),z=h*qc(v),V=d*vg(_),$=d*qc(_);if(D>_o){var U=h*vg(b),W=h*qc(b),B=d*vg(E),q=d*qc(E),Y;if(g<yb)if(Y=ant(j,z,B,q,U,W,V,$)){var re=j-Y[0],pe=z-Y[1],_e=U-Y[0],de=W-Y[1],ye=1/qc(tnt((re*_e+pe*de)/(r0(re*re+pe*pe)*r0(_e*_e+de*de)))/2),Ce=r0(Y[0]*Y[0]+Y[1]*Y[1]);I=NF(D,(d-Ce)/(ye-1)),O=NF(D,(h-Ce)/(ye+1))}else I=O=0}S>_o?O>_o?(R=iA(B,q,j,z,h,O,y),M=iA(U,W,V,$,h,O,y),a.moveTo(R.cx+R.x01,R.cy+R.y01),O<D?a.arc(R.cx,R.cy,O,yo(R.y01,R.x01),yo(M.y01,M.x01),!y):(a.arc(R.cx,R.cy,O,yo(R.y01,R.x01),yo(R.y11,R.x11),!y),a.arc(0,0,h,yo(R.cy+R.y11,R.cx+R.x11),yo(M.cy+M.y11,M.cx+M.x11),!y),a.arc(M.cx,M.cy,O,yo(M.y11,M.x11),yo(M.y01,M.x01),!y))):(a.moveTo(j,z),a.arc(0,0,h,v,b,!y)):a.moveTo(j,z),!(d>_o)||!(w>_o)?a.lineTo(V,$):I>_o?(R=iA(V,$,U,W,d,-I,y),M=iA(j,z,B,q,d,-I,y),a.lineTo(R.cx+R.x01,R.cy+R.y01),I<D?a.arc(R.cx,R.cy,I,yo(R.y01,R.x01),yo(M.y01,M.x01),!y):(a.arc(R.cx,R.cy,I,yo(R.y01,R.x01),yo(R.y11,R.x11),!y),a.arc(0,0,d,yo(R.cy+R.y11,R.cx+R.x11),yo(M.cy+M.y11,M.cx+M.x11),y),a.arc(M.cx,M.cy,I,yo(M.y11,M.x11),yo(M.y01,M.x01),!y))):a.arc(0,0,d,_,E,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-yb/2;return[vg(f)*c,qc(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:ar(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:ar(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:ar(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ar(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ar(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ar(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:ar(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function pye(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mye(e){this._context=e}mye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gU(e){return new mye(e)}function gye(e){return e[0]}function yye(e){return e[1]}function yU(e,t){var n=ar(!0),r=null,i=gU,s=null,o=QP(a);e=typeof e=="function"?e:e===void 0?gye:ar(e),t=typeof t=="function"?t:t===void 0?yye:ar(t);function a(u){var l,c=(u=pye(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:ar(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:ar(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ar(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function vye(e,t,n){var r=null,i=ar(!0),s=null,o=gU,a=null,u=QP(l);e=typeof e=="function"?e:e===void 0?gye:ar(+e),t=typeof t=="function"?t:ar(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?yye:ar(+n);function l(f){var d,h,p,m=(f=pye(f)).length,g,y=!1,v,b=new Array(m),E=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],E[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):E[d]))}if(v)return a=null,v+""||null}function c(){return yU().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:ar(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ar(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ar(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:ar(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ar(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ar(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ar(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const lnt={draw(e,t){const n=r0(t/yb);e.moveTo(n,0),e.arc(0,0,n,0,hye)}};function cnt(e,t){let n=null,r=QP(i);e=typeof e=="function"?e:ar(e||lnt),t=typeof t=="function"?t:ar(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ar(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ar(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function vm(){}function BN(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JP(e){this._context=e}JP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:BN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:BN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fnt(e){return new JP(e)}function bye(e){this._context=e}bye.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:BN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dnt(e){return new bye(e)}function _ye(e){this._context=e}_ye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:BN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hnt(e){return new _ye(e)}function Eye(e,t){this._basis=new JP(e),this._beta=t}Eye.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const pnt=function e(t){function n(r){return t===1?new JP(r):new Eye(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function jN(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function vU(e,t){this._context=e,this._k=(1-t)/6}vU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:jN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mnt=function e(t){function n(r){return new vU(r,t)}return n.tension=function(r){return e(+r)},n}(0);function bU(e,t){this._context=e,this._k=(1-t)/6}bU.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gnt=function e(t){function n(r){return new bU(r,t)}return n.tension=function(r){return e(+r)},n}(0);function _U(e,t){this._context=e,this._k=(1-t)/6}_U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ynt=function e(t){function n(r){return new _U(r,t)}return n.tension=function(r){return e(+r)},n}(0);function EU(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>_o){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>_o){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function wye(e,t){this._context=e,this._alpha=t}wye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:EU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vnt=function e(t){function n(r){return t?new wye(r,t):new vU(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function xye(e,t){this._context=e,this._alpha=t}xye.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:EU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bnt=function e(t){function n(r){return t?new xye(r,t):new bU(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Sye(e,t){this._context=e,this._alpha=t}Sye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:EU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _nt=function e(t){function n(r){return t?new Sye(r,t):new _U(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Tye(e){this._context=e}Tye.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ent(e){return new Tye(e)}function mte(e){return e<0?-1:1}function gte(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(mte(s)+mte(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function yte(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function kF(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function zN(e){this._context=e}zN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kF(this,this._t0,yte(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,kF(this,yte(this,n=gte(this,e,t)),n);break;default:kF(this,this._t0,n=gte(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Cye(e){this._context=new Aye(e)}(Cye.prototype=Object.create(zN.prototype)).point=function(e,t){zN.prototype.point.call(this,t,e)};function Aye(e){this._context=e}Aye.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function wnt(e){return new zN(e)}function xnt(e){return new Cye(e)}function Dye(e){this._context=e}Dye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=vte(e),i=vte(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function vte(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Snt(e){return new Dye(e)}function ZP(e,t){this._context=e,this._t=t}ZP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Tnt(e){return new ZP(e,.5)}function Cnt(e){return new ZP(e,0)}function Ant(e){return new ZP(e,1)}function xw(e,t,n){this.k=e,this.x=t,this.y=n}xw.prototype={constructor:xw,scale:function(e){return e===1?this:new xw(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new xw(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};xw.prototype;var wU={exports:{}};wU.exports;(function(e){(function(t,n,r){function i(u){var l=this,c=a();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function s(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function a(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:this.alea=o})(Hr,e)})(wU);var Dnt=wU.exports,xU={exports:{}};xU.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(Hr,e)})(xU);var Int=xU.exports,SU={exports:{}};SU.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(Hr,e)})(SU);var Nnt=SU.exports,TU={exports:{}};TU.exports;(function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,a)}function s(a,u){return u.x=a.x.slice(),u.i=a.i,u}function o(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.x&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(Hr,e)})(TU);var knt=TU.exports,CU={exports:{}};CU.exports;(function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,p;return u.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,u.i=d,p+(c^c>>>16)|0};function l(c,f){var d,h,p,m,g,y=[],v=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,v=Math.max(v,f.length)),p=0,m=-32;m<v;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=h+g,p=d==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],d=y[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,y[p]=h^d;c.w=g,c.X=y,c.i=p}l(u,a)}function s(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function o(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.X&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(Hr,e)})(CU);var Rnt=CU.exports,AU={exports:{}};AU.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(Hr,e)})(AU);var Pnt=AU.exports,Iye={exports:{}};const Ont={},Mnt=Object.freeze(Object.defineProperty({__proto__:null,default:Ont},Symbol.toStringTag,{value:"Module"})),Nye=wNe(Mnt);(function(e){(function(t,n,r){var i=256,s=6,o=52,a="random",u=r.pow(i,s),l=r.pow(2,o),c=l*2,f=i-1,d;function h(E,_,w){var S=[];_=_==!0?{entropy:!0}:_||{};var C=y(g(_.entropy?[E,b(n)]:E??v(),3),S),A=new p(S),D=function(){for(var I=A.g(s),O=u,R=0;I<l;)I=(I+R)*i,O*=i,R=A.g(1);for(;I>=c;)I/=2,O/=2,R>>>=1;return(I+R)/O};return D.int32=function(){return A.g(4)|0},D.quick=function(){return A.g(4)/4294967296},D.double=D,y(b(A.S),n),(_.pass||w||function(I,O,R,M){return M&&(M.S&&m(M,A),I.state=function(){return m(A,{})}),R?(r[a]=I,O):I})(D,C,"global"in _?_.global:this==r,_.state)}function p(E){var _,w=E.length,S=this,C=0,A=S.i=S.j=0,D=S.S=[];for(w||(E=[w++]);C<i;)D[C]=C++;for(C=0;C<i;C++)D[C]=D[A=f&A+E[C%w]+(_=D[C])],D[A]=_;(S.g=function(I){for(var O,R=0,M=S.i,F=S.j,P=S.S;I--;)O=P[M=f&M+1],R=R*i+P[f&(P[M]=P[F=f&F+O])+(P[F]=O)];return S.i=M,S.j=F,R})(i)}function m(E,_){return _.i=E.i,_.j=E.j,_.S=E.S.slice(),_}function g(E,_){var w=[],S=typeof E,C;if(_&&S=="object")for(C in E)try{w.push(g(E[C],_-1))}catch{}return w.length?w:S=="string"?E:E+"\0"}function y(E,_){for(var w=E+"",S,C=0;C<w.length;)_[f&C]=f&(S^=_[f&C]*19)+w.charCodeAt(C++);return b(_)}function v(){try{var E;return d&&(E=d.randomBytes)?E=E(i):(E=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(E)),b(E)}catch{var _=t.navigator,w=_&&_.plugins;return[+new Date,t,w,t.screen,b(n)]}}function b(E){return String.fromCharCode.apply(0,E)}if(y(r.random(),n),e.exports){e.exports=h;try{d=Nye}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Hr,[],Math)})(Iye);var $nt=Iye.exports,Fnt=Dnt,Lnt=Int,Bnt=Nnt,jnt=knt,znt=Rnt,Unt=Pnt,Ry=$nt;Ry.alea=Fnt;Ry.xor128=Lnt;Ry.xorwow=Bnt;Ry.xorshift7=jnt;Ry.xor4096=znt;Ry.tychei=Unt;var Vnt=Ry;const kye=ha(Vnt);var Rye={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function kr(e){return typeof e=="number"}function Ti(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Hnt(e){return typeof e=="bigint"}function Pye(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Oye(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Mye(e){return e&&e.constructor.prototype.isUnit===!0||!1}function ef(e){return typeof e=="string"}var ai=Array.isArray;function fi(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function vb(e){return Array.isArray(e)||fi(e)}function qnt(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Wnt(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Gnt(e){return e&&e.constructor.prototype.isRange===!0||!1}function DU(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Ynt(e){return typeof e=="boolean"}function Knt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Xnt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function Qnt(e){return typeof e=="function"}function Jnt(e){return e instanceof Date}function Znt(e){return e instanceof RegExp}function IU(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Pye(e)&&!Oye(e))}function ert(e){return e===null}function trt(e){return e===void 0}function nrt(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function rrt(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function irt(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function srt(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function ort(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function art(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function urt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function lrt(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function crt(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function frt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function drt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function hrt(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function prt(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function mrt(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function grt(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function yrt(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function vrt(e){return e&&e.constructor.prototype.isChain===!0||!1}function mc(e){var t=typeof e;return t==="object"?e===null?"null":Ti(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Ei(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return Ei(n)});if(e instanceof Date)return new Date(e.valueOf());if(Ti(e))return e;if(IU(e))return brt(e,Ei);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function brt(e,t){var n={};for(var r in e)IS(e,r)&&(n[r]=t(e[r]));return n}function $ye(e,t){for(var n in t)IS(t,n)&&(e[n]=t[n]);return e}function bb(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!bb(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!bb(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function IS(e,t){return e&&Object.hasOwnProperty.call(e,t)}function _rt(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];s!==void 0&&(n[i]=s)}return n}var Ert=["Matrix","Array"],wrt=["number","BigNumber","Fraction"],Py=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Rye)};uS(Py,Rye,{MATRIX_OPTIONS:Ert,NUMBER_OPTIONS:wrt});function bte(){return!0}function Gu(){return!1}function m1(){}const _te="Argument is not a typed-function.";function Fye(){function e(G){return typeof G=="object"&&G!==null&&G.constructor===Object}const t=[{name:"number",test:function(G){return typeof G=="number"}},{name:"string",test:function(G){return typeof G=="string"}},{name:"boolean",test:function(G){return typeof G=="boolean"}},{name:"Function",test:function(G){return typeof G=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(G){return G instanceof Date}},{name:"RegExp",test:function(G){return G instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(G){return G===null}},{name:"undefined",test:function(G){return G===void 0}}],n={name:"any",test:bte,isAny:!0};let r,i,s=0,o={createCount:0};function a(G){const ie=r.get(G);if(ie)return ie;let me='Unknown type "'+G+'"';const J=G.toLowerCase();let se;for(se of i)if(se.toLowerCase()===J){me+='. Did you mean "'+se+'" ?';break}throw new TypeError(me)}function u(G){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const me=ie?a(ie).index:i.length,J=[];for(let ce=0;ce<G.length;++ce){if(!G[ce]||typeof G[ce].name!="string"||typeof G[ce].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Se=G[ce].name;if(r.has(Se))throw new TypeError('Duplicate type name "'+Se+'"');J.push(Se),r.set(Se,{name:Se,test:G[ce].test,isAny:G[ce].isAny,index:me+ce,conversionsTo:[]})}const se=i.slice(me);i=i.slice(0,me).concat(J).concat(se);for(let ce=me+J.length;ce<i.length;++ce)r.get(i[ce]).index=ce}function l(){r=new Map,i=[],s=0,u([n],!1)}l(),u(t);function c(){let G;for(G of i)r.get(G).conversionsTo=[];s=0}function f(G){const ie=i.filter(me=>{const J=r.get(me);return!J.isAny&&J.test(G)});return ie.length?ie:["any"]}function d(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function h(G,ie,me){if(!d(G))throw new TypeError(_te);const J=me&&me.exact,se=Array.isArray(ie)?ie.join(","):ie,ce=E(se),Se=g(ce);if(!J||Se in G.signatures){const Ct=G._typedFunctionData.signatureMap.get(Se);if(Ct)return Ct}const Te=ce.length;let Ge;if(J){Ge=[];let Ct;for(Ct in G.signatures)Ge.push(G._typedFunctionData.signatureMap.get(Ct))}else Ge=G._typedFunctionData.signatures;for(let Ct=0;Ct<Te;++Ct){const Ot=ce[Ct],Dt=[];let Vt;for(Vt of Ge){const Zt=C(Vt.params,Ct);if(!(!Zt||Ot.restParam&&!Zt.restParam)){if(!Zt.hasAny){const an=b(Zt);if(Ot.types.some(gr=>!an.has(gr.name)))continue}Dt.push(Vt)}}if(Ge=Dt,Ge.length===0)break}let je;for(je of Ge)if(je.params.length<=Te)return je;throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+g(ce,", ")+"))")}function p(G,ie,me){return h(G,ie,me).implementation}function m(G,ie){const me=a(ie);if(me.test(G))return G;const J=me.conversionsTo;if(J.length===0)throw new Error("There are no conversions to "+ie+" defined.");for(let se=0;se<J.length;se++)if(a(J[se].from).test(G))return J[se].convert(G);throw new Error("Cannot convert "+G+" to "+ie)}function g(G){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(me=>me.name).join(ie)}function y(G){const ie=G.indexOf("...")===0,J=(ie?G.length>3?G.slice(3):"any":G).split("|").map(Te=>a(Te.trim()));let se=!1,ce=ie?"...":"";return{types:J.map(function(Te){return se=Te.isAny||se,ce+=Te.name+"|",{name:Te.name,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:null,conversionIndex:-1}}),name:ce.slice(0,-1),hasAny:se,hasConversion:!1,restParam:ie}}function v(G){const ie=G.types.map(Se=>Se.name),me=j(ie);let J=G.hasAny,se=G.name;const ce=me.map(function(Se){const Te=a(Se.from);return J=Te.isAny||J,se+="|"+Se.from,{name:Se.from,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:Se,conversionIndex:Se.index}});return{types:G.types.concat(ce),name:se,hasAny:J,hasConversion:ce.length>0,restParam:G.restParam}}function b(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(ie=>G.typeSet.add(ie.name))),G.typeSet}function E(G){const ie=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");const me=G.trim();if(me==="")return ie;const J=me.split(",");for(let se=0;se<J.length;++se){const ce=y(J[se].trim());if(ce.restParam&&se!==J.length-1)throw new SyntaxError('Unexpected rest parameter "'+J[se]+'": only allowed for the last parameter');if(ce.types.length===0)return null;ie.push(ce)}return ie}function _(G){const ie=de(G);return ie?ie.restParam:!1}function w(G){if(!G||G.types.length===0)return bte;if(G.types.length===1)return a(G.types[0].name).test;if(G.types.length===2){const ie=a(G.types[0].name).test,me=a(G.types[1].name).test;return function(se){return ie(se)||me(se)}}else{const ie=G.types.map(function(me){return a(me.name).test});return function(J){for(let se=0;se<ie.length;se++)if(ie[se](J))return!0;return!1}}}function S(G){let ie,me,J;if(_(G)){ie=_e(G).map(w);const se=ie.length,ce=w(de(G)),Se=function(Te){for(let Ge=se;Ge<Te.length;Ge++)if(!ce(Te[Ge]))return!1;return!0};return function(Ge){for(let je=0;je<ie.length;je++)if(!ie[je](Ge[je]))return!1;return Se(Ge)&&Ge.length>=se+1}}else return G.length===0?function(ce){return ce.length===0}:G.length===1?(me=w(G[0]),function(ce){return me(ce[0])&&ce.length===1}):G.length===2?(me=w(G[0]),J=w(G[1]),function(ce){return me(ce[0])&&J(ce[1])&&ce.length===2}):(ie=G.map(w),function(ce){for(let Se=0;Se<ie.length;Se++)if(!ie[Se](ce[Se]))return!1;return ce.length===ie.length})}function C(G,ie){return ie<G.length?G[ie]:_(G)?de(G):null}function A(G,ie){const me=C(G,ie);return me?b(me):new Set}function D(G){return G.conversion===null||G.conversion===void 0}function I(G,ie){const me=new Set;return G.forEach(J=>{const se=A(J.params,ie);let ce;for(ce of se)me.add(ce)}),me.has("any")?["any"]:Array.from(me)}function O(G,ie,me){let J,se;const ce=G||"unnamed";let Se=me,Te;for(Te=0;Te<ie.length;Te++){const Ot=[];if(Se.forEach(Dt=>{const Vt=C(Dt.params,Te),Zt=w(Vt);(Te<Dt.params.length||_(Dt.params))&&Zt(ie[Te])&&Ot.push(Dt)}),Ot.length===0){if(se=I(Se,Te),se.length>0){const Dt=f(ie[Te]);return J=new TypeError("Unexpected type of argument in function "+ce+" (expected: "+se.join(" or ")+", actual: "+Dt.join(" | ")+", index: "+Te+")"),J.data={category:"wrongType",fn:ce,index:Te,actual:Dt,expected:se},J}}else Se=Ot}const Ge=Se.map(function(Ot){return _(Ot.params)?1/0:Ot.params.length});if(ie.length<Math.min.apply(null,Ge))return se=I(Se,Te),J=new TypeError("Too few arguments in function "+ce+" (expected: "+se.join(" or ")+", index: "+ie.length+")"),J.data={category:"tooFewArgs",fn:ce,index:ie.length,expected:se},J;const je=Math.max.apply(null,Ge);if(ie.length>je)return J=new TypeError("Too many arguments in function "+ce+" (expected: "+je+", actual: "+ie.length+")"),J.data={category:"tooManyArgs",fn:ce,index:ie.length,expectedLength:je},J;const Ct=[];for(let Ot=0;Ot<ie.length;++Ot)Ct.push(f(ie[Ot]).join("|"));return J=new TypeError('Arguments of type "'+Ct.join(", ")+'" do not match any of the defined signatures of function '+ce+"."),J.data={category:"mismatch",actual:Ct},J}function R(G){let ie=i.length+1;for(let me=0;me<G.types.length;me++)D(G.types[me])&&(ie=Math.min(ie,G.types[me].typeIndex));return ie}function M(G){let ie=s+1;for(let me=0;me<G.types.length;me++)D(G.types[me])||(ie=Math.min(ie,G.types[me].conversionIndex));return ie}function F(G,ie){if(G.hasAny){if(!ie.hasAny)return 1}else if(ie.hasAny)return-1;if(G.restParam){if(!ie.restParam)return 1}else if(ie.restParam)return-1;if(G.hasConversion){if(!ie.hasConversion)return 1}else if(ie.hasConversion)return-1;const me=R(G)-R(ie);if(me<0)return-1;if(me>0)return 1;const J=M(G)-M(ie);return J<0?-1:J>0?1:0}function P(G,ie){const me=G.params,J=ie.params,se=de(me),ce=de(J),Se=_(me),Te=_(J);if(Se&&se.hasAny){if(!Te||!ce.hasAny)return 1}else if(Te&&ce.hasAny)return-1;let Ge=0,je=0,Ct;for(Ct of me)Ct.hasAny&&++Ge,Ct.hasConversion&&++je;let Ot=0,Dt=0;for(Ct of J)Ct.hasAny&&++Ot,Ct.hasConversion&&++Dt;if(Ge!==Ot)return Ge-Ot;if(Se&&se.hasConversion){if(!Te||!ce.hasConversion)return 1}else if(Te&&ce.hasConversion)return-1;if(je!==Dt)return je-Dt;if(Se){if(!Te)return 1}else if(Te)return-1;const Vt=(me.length-J.length)*(Se?-1:1);if(Vt!==0)return Vt;const Zt=[];let an=0;for(let lr=0;lr<me.length;++lr){const fn=F(me[lr],J[lr]);Zt.push(fn),an+=fn}if(an!==0)return an;let gr;for(gr of Zt)if(gr!==0)return gr;return 0}function j(G){if(G.length===0)return[];const ie=G.map(a);G.length>1&&ie.sort((se,ce)=>se.index-ce.index);let me=ie[0].conversionsTo;if(G.length===1)return me;me=me.concat([]);const J=new Set(G);for(let se=1;se<ie.length;++se){let ce;for(ce of ie[se].conversionsTo)J.has(ce.from)||(me.push(ce),J.add(ce.from))}return me}function z(G,ie){let me=ie;if(G.some(se=>se.hasConversion)){const se=_(G),ce=G.map(V);me=function(){const Te=[],Ge=se?arguments.length-1:arguments.length;for(let je=0;je<Ge;je++)Te[je]=ce[je](arguments[je]);return se&&(Te[Ge]=arguments[Ge].map(ce[Ge])),ie.apply(this,Te)}}let J=me;if(_(G)){const se=G.length-1;J=function(){return me.apply(this,ye(arguments,0,se).concat([ye(arguments,se)]))}}return J}function V(G){let ie,me,J,se;const ce=[],Se=[];switch(G.types.forEach(function(Te){Te.conversion&&(ce.push(a(Te.conversion.from).test),Se.push(Te.conversion.convert))}),Se.length){case 0:return function(Ge){return Ge};case 1:return ie=ce[0],J=Se[0],function(Ge){return ie(Ge)?J(Ge):Ge};case 2:return ie=ce[0],me=ce[1],J=Se[0],se=Se[1],function(Ge){return ie(Ge)?J(Ge):me(Ge)?se(Ge):Ge};default:return function(Ge){for(let je=0;je<Se.length;je++)if(ce[je](Ge))return Se[je](Ge);return Ge}}}function $(G){function ie(me,J,se){if(J<me.length){const ce=me[J];let Se=[];if(ce.restParam){const Te=ce.types.filter(D);Te.length<ce.types.length&&Se.push({types:Te,name:"..."+Te.map(Ge=>Ge.name).join("|"),hasAny:Te.some(Ge=>Ge.isAny),hasConversion:!1,restParam:!0}),Se.push(ce)}else Se=ce.types.map(function(Te){return{types:[Te],name:Te.name,hasAny:Te.isAny,hasConversion:Te.conversion,restParam:!1}});return ve(Se,function(Te){return ie(me,J+1,se.concat([Te]))})}else return[se]}return ie(G,0,[])}function U(G,ie){const me=Math.max(G.length,ie.length);for(let Te=0;Te<me;Te++){const Ge=A(G,Te),je=A(ie,Te);let Ct=!1,Ot;for(Ot of je)if(Ge.has(Ot)){Ct=!0;break}if(!Ct)return!1}const J=G.length,se=ie.length,ce=_(G),Se=_(ie);return ce?Se?J===se:se>=J:Se?J>=se:J===se}function W(G){return G.map(ie=>Pe(ie)?ht(ie.referToSelf.callback):rt(ie)?He(ie.referTo.references,ie.referTo.callback):ie)}function B(G,ie,me){const J=[];let se;for(se of G){let ce=me[se];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+se+'"');if(ce=ie[ce],typeof ce!="function")return!1;J.push(ce)}return J}function q(G,ie,me){const J=W(G),se=new Array(J.length).fill(!1);let ce=!0;for(;ce;){ce=!1;let Se=!0;for(let Te=0;Te<J.length;++Te){if(se[Te])continue;const Ge=J[Te];if(Pe(Ge))J[Te]=Ge.referToSelf.callback(me),J[Te].referToSelf=Ge.referToSelf,se[Te]=!0,Se=!1;else if(rt(Ge)){const je=B(Ge.referTo.references,J,ie);je?(J[Te]=Ge.referTo.callback.apply(this,je),J[Te].referTo=Ge.referTo,se[Te]=!0,Se=!1):ce=!0}}if(Se&&ce)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return J}function Y(G){const ie=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(me=>{const J=G[me];if(ie.test(J.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function re(G,ie){if(o.createCount++,Object.keys(ie).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Y(ie);const me=[],J=[],se={},ce=[];let Se;for(Se in ie){if(!Object.prototype.hasOwnProperty.call(ie,Se))continue;const Gt=E(Se);if(!Gt)continue;me.forEach(function(br){if(U(br,Gt))throw new TypeError('Conflicting signatures "'+g(br)+'" and "'+g(Gt)+'".')}),me.push(Gt);const Hn=J.length;J.push(ie[Se]);const vr=Gt.map(v);let yi;for(yi of $(vr)){const br=g(yi);ce.push({params:yi,name:br,fn:Hn}),yi.every(Qr=>!Qr.hasConversion)&&(se[br]=Hn)}}ce.sort(P);const Te=q(J,se,bn);let Ge;for(Ge in se)Object.prototype.hasOwnProperty.call(se,Ge)&&(se[Ge]=Te[se[Ge]]);const je=[],Ct=new Map;for(Ge of ce)Ct.has(Ge.name)||(Ge.fn=Te[Ge.fn],je.push(Ge),Ct.set(Ge.name,Ge));const Ot=je[0]&&je[0].params.length<=2&&!_(je[0].params),Dt=je[1]&&je[1].params.length<=2&&!_(je[1].params),Vt=je[2]&&je[2].params.length<=2&&!_(je[2].params),Zt=je[3]&&je[3].params.length<=2&&!_(je[3].params),an=je[4]&&je[4].params.length<=2&&!_(je[4].params),gr=je[5]&&je[5].params.length<=2&&!_(je[5].params),lr=Ot&&Dt&&Vt&&Zt&&an&&gr;for(let Gt=0;Gt<je.length;++Gt)je[Gt].test=S(je[Gt].params);const fn=Ot?w(je[0].params[0]):Gu,Xr=Dt?w(je[1].params[0]):Gu,er=Vt?w(je[2].params[0]):Gu,gi=Zt?w(je[3].params[0]):Gu,$l=an?w(je[4].params[0]):Gu,Vo=gr?w(je[5].params[0]):Gu,Hu=Ot?w(je[0].params[1]):Gu,Yn=Dt?w(je[1].params[1]):Gu,Lr=Vt?w(je[2].params[1]):Gu,yr=Zt?w(je[3].params[1]):Gu,ao=an?w(je[4].params[1]):Gu,Ms=gr?w(je[5].params[1]):Gu;for(let Gt=0;Gt<je.length;++Gt)je[Gt].implementation=z(je[Gt].params,je[Gt].fn);const $s=Ot?je[0].implementation:m1,ue=Dt?je[1].implementation:m1,te=Vt?je[2].implementation:m1,le=Zt?je[3].implementation:m1,De=an?je[4].implementation:m1,Ae=gr?je[5].implementation:m1,at=Ot?je[0].params.length:-1,St=Dt?je[1].params.length:-1,Xt=Vt?je[2].params.length:-1,_n=Zt?je[3].params.length:-1,Sn=an?je[4].params.length:-1,un=gr?je[5].params.length:-1,Mn=lr?6:0,tr=je.length,Ht=je.map(Gt=>Gt.test),$n=je.map(Gt=>Gt.implementation),cr=function(){for(let Hn=Mn;Hn<tr;Hn++)if(Ht[Hn](arguments))return $n[Hn].apply(this,arguments);return o.onMismatch(G,arguments,je)};function bn(Gt,Hn){return arguments.length===at&&fn(Gt)&&Hu(Hn)?$s.apply(this,arguments):arguments.length===St&&Xr(Gt)&&Yn(Hn)?ue.apply(this,arguments):arguments.length===Xt&&er(Gt)&&Lr(Hn)?te.apply(this,arguments):arguments.length===_n&&gi(Gt)&&yr(Hn)?le.apply(this,arguments):arguments.length===Sn&&$l(Gt)&&ao(Hn)?De.apply(this,arguments):arguments.length===un&&Vo(Gt)&&Ms(Hn)?Ae.apply(this,arguments):cr.apply(this,arguments)}try{Object.defineProperty(bn,"name",{value:G})}catch{}return bn.signatures=se,bn._typedFunctionData={signatures:je,signatureMap:Ct},bn}function pe(G,ie,me){throw O(G,ie,me)}function _e(G){return ye(G,0,G.length-1)}function de(G){return G[G.length-1]}function ye(G,ie,me){return Array.prototype.slice.call(G,ie,me)}function Ce(G,ie){for(let me=0;me<G.length;me++)if(ie(G[me]))return G[me]}function ve(G,ie){return Array.prototype.concat.apply([],G.map(ie))}function qe(){const G=_e(arguments).map(me=>g(E(me))),ie=de(arguments);if(typeof ie!="function")throw new TypeError("Callback function expected as last argument");return He(G,ie)}function He(G,ie){return{referTo:{references:G,callback:ie}}}function ht(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function rt(G){return G&&typeof G.referTo=="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function Pe(G){return G&&typeof G.referToSelf=="object"&&typeof G.referToSelf.callback=="function"}function Be(G,ie){if(!G)return ie;if(ie&&ie!==G){const me=new Error("Function names do not match (expected: "+G+", actual: "+ie+")");throw me.data={actual:ie,expected:G},me}return G}function Xe(G){let ie;for(const me in G)Object.prototype.hasOwnProperty.call(G,me)&&(d(G[me])||typeof G[me].signature=="string")&&(ie=Be(ie,G[me].name));return ie}function mt(G,ie){let me;for(me in ie)if(Object.prototype.hasOwnProperty.call(ie,me)){if(me in G&&ie[me]!==G[me]){const J=new Error('Signature "'+me+'" is defined twice');throw J.data={signature:me,sourceFunction:ie[me],destFunction:G[me]},J}G[me]=ie[me]}}const Ft=o;o=function(G){const ie=typeof G=="string",me=ie?1:0;let J=ie?G:"";const se={};for(let ce=me;ce<arguments.length;++ce){const Se=arguments[ce];let Te={},Ge;if(typeof Se=="function"?(Ge=Se.name,typeof Se.signature=="string"?Te[Se.signature]=Se:d(Se)&&(Te=Se.signatures)):e(Se)&&(Te=Se,ie||(Ge=Xe(Se))),Object.keys(Te).length===0){const je=new TypeError("Argument to 'typed' at index "+ce+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw je.data={index:ce,argument:Se},je}ie||(J=Be(J,Ge)),mt(se,Te)}return re(J||"",se)},o.create=Fye,o.createCount=Ft.createCount,o.onMismatch=pe,o.throwMismatchError=pe,o.createError=O,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=a,o.referTo=qe,o.referToSelf=ht,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(G,ie){let me="any";ie!==!1&&r.has("Object")&&(me="Object"),o.addTypes([G],me)};function bt(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return o.addConversion=function(G){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};bt(G);const me=a(G.to),J=me.conversionsTo.find(se=>se.from===G.from);if(J)if(ie&&ie.override)o.removeConversion({from:J.from,to:G.to,convert:J.convert});else throw new Error('There is already a conversion from "'+G.from+'" to "'+me.name+'"');me.conversionsTo.push({from:G.from,convert:G.convert,index:s++})},o.addConversions=function(G,ie){G.forEach(me=>o.addConversion(me,ie))},o.removeConversion=function(G){bt(G);const ie=a(G.to),me=Ce(ie.conversionsTo,se=>se.from===G.from);if(!me)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(me.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");const J=ie.conversionsTo.indexOf(me);ie.conversionsTo.splice(J,1)},o.resolve=function(G,ie){if(!d(G))throw new TypeError(_te);const me=G._typedFunctionData.signatures;for(let J=0;J<me.length;++J)if(me[J].test(ie))return me[J];return null},o}const rv=Fye();function Hi(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function RF(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Hi(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Hi(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),s="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(s)}function M5(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=Lye(t);switch(n){case"fixed":return Srt(e,r);case"exponential":return Bye(e,r);case"engineering":return xrt(e,r);case"bin":return RF(e,2,i);case"oct":return RF(e,8,i);case"hex":return RF(e,16,i);case"auto":return Trt(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Lye(e){var t="auto",n,r;if(e!==void 0)if(kr(e))n=e;else if(Ti(e))n=e.toNumber();else if(IU(e))e.precision!==void 0&&(n=Ete(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=Ete(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function e3(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function xrt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=e3(e),r=t3(n,t),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(kr(t))for(;t>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),u=0;u<a;u++)s.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),d=kr(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function Srt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=e3(e),r=typeof t=="number"?t3(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(Dv(o-i.length))),s<0&&(i=Dv(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function Bye(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=e3(e),r=t?t3(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(Dv(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Trt(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=wte(n==null?void 0:n.lowerExp,-3),i=wte(n==null?void 0:n.upperExp,5),s=e3(e),o=t?t3(s,t):s;if(o.exponent<r||o.exponent>=i)return Bye(e,t);var a=o.coefficients,u=o.exponent;a.length<t&&(a=a.concat(Dv(t-a.length))),a=a.concat(Dv(u-a.length+1+(a.length<t?t-a.length:0))),a=Dv(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}function t3(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var s=t-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function Dv(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function Crt(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function UN(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function Ete(e,t){if(kr(e))return e;if(Ti(e))return e.toNumber();t()}function wte(e,t){return kr(e)?e:Ti(e)?e.toNumber():t}function Kt(e,t,n,r){function i(s){var o=_rt(s,t.map(Irt));return Art(e,t,s),n(o)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function Art(e,t,n){var r=t.filter(s=>!Drt(s)).every(s=>n[s]!==void 0);if(!r){var i=t.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Drt(e){return e&&e[0]==="?"}function Irt(e){return e&&e[0]==="?"?e.slice(1):e}function Nrt(e,t){if(zye(e)&&jye(e,t))return e[t];throw typeof e[t]=="function"&&Prt(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function krt(e,t,n){if(zye(e)&&jye(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function Rrt(e,t){return t in e}function jye(e,t){return!e||typeof e!="object"?!1:IS(Ort,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Prt(e,t){return e==null||typeof e[t]!="function"||IS(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:IS(Mrt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function zye(e){return typeof e=="object"&&e&&e.constructor===Object}var Ort={length:!0,name:!0},Mrt={toString:!0,valueOf:!0,toLocaleString:!0};class $rt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(t){return Nrt(this.wrappedObject,t)}set(t,n){return krt(this.wrappedObject,t,n),this}has(t){return Rrt(this.wrappedObject,t)}entries(){return Frt(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function Frt(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function Lrt(e){return e?e instanceof Map||e instanceof $rt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var Uye=function(){return Uye=rv.create,rv},Brt=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],jrt=Kt("typed",Brt,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=t,o=Uye();return o.clear(),o.addTypes([{name:"number",test:kr},{name:"Complex",test:Pye},{name:"BigNumber",test:Ti},{name:"bigint",test:Hnt},{name:"Fraction",test:Oye},{name:"Unit",test:Mye},{name:"identifier",test:a=>ef&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:ef},{name:"Chain",test:vrt},{name:"Array",test:ai},{name:"Matrix",test:fi},{name:"DenseMatrix",test:qnt},{name:"SparseMatrix",test:Wnt},{name:"Range",test:Gnt},{name:"Index",test:DU},{name:"boolean",test:Ynt},{name:"ResultSet",test:Knt},{name:"Help",test:Xnt},{name:"function",test:Qnt},{name:"Date",test:Jnt},{name:"RegExp",test:Znt},{name:"null",test:ert},{name:"undefined",test:trt},{name:"AccessorNode",test:nrt},{name:"ArrayNode",test:rrt},{name:"AssignmentNode",test:irt},{name:"BlockNode",test:srt},{name:"ConditionalNode",test:ort},{name:"ConstantNode",test:art},{name:"FunctionNode",test:lrt},{name:"FunctionAssignmentNode",test:urt},{name:"IndexNode",test:crt},{name:"Node",test:frt},{name:"ObjectNode",test:drt},{name:"OperatorNode",test:hrt},{name:"ParenthesisNode",test:prt},{name:"RangeNode",test:mrt},{name:"RelationalNode",test:grt},{name:"SymbolNode",test:yrt},{name:"Map",test:Lrt},{name:"Object",test:IU}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||sA(u),Crt(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||oA(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||oA(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||sA(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||aA(u),new s(u.toString())}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||oA(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||aA(u);var l=new s(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||sA(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||aA(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||oA(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||sA(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||aA(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||zrt(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&vb(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&vb(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function sA(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function oA(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function zrt(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function aA(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var iv=9e15,Qm=1e9,$5="0123456789abcdef",VN="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",HN="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",F5={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-iv,maxE:iv,crypto:!1},Vye,zd,on=!0,n3="[DecimalError] ",bm=n3+"Invalid argument: ",Hye=n3+"Precision limit exceeded",qye=n3+"crypto unavailable",Wye="[object Decimal]",Fo=Math.floor,es=Math.pow,Urt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Vrt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Hrt=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Gye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,gc=1e7,Qt=7,qrt=9007199254740991,Wrt=VN.length-1,L5=HN.length-1,Ye={toStringTag:Wye};Ye.absoluteValue=Ye.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),zt(e)};Ye.ceil=function(){return zt(new this.constructor(this),this.e+1,2)};Ye.clampedTo=Ye.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(bm+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};Ye.comparedTo=Ye.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,u=s.s,l=e.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(r=o.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};Ye.cosine=Ye.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Qt,r.rounding=1,n=Grt(r,Jye(r,n)),r.precision=e,r.rounding=t,zt(zd==2||zd==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};Ye.cubeRoot=Ye.cbrt=function(){var e,t,n,r,i,s,o,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(on=!1,s=c.s*es(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=Ks(c.d),e=c.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=es(n,1/3),e=Fo((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(s.toString()),o=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=Ar(l.plus(c).times(a),l.plus(u),o+2,1),Ks(a.d).slice(0,o)===(n=Ks(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(zt(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(zt(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return on=!0,zt(r,e,f.rounding,t)};Ye.decimalPlaces=Ye.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-Fo(this.e/Qt))*Qt,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};Ye.dividedBy=Ye.div=function(e){return Ar(this,new this.constructor(e))};Ye.dividedToIntegerBy=Ye.divToInt=function(e){var t=this,n=t.constructor;return zt(Ar(t,new n(e),0,1,1),n.precision,n.rounding)};Ye.equals=Ye.eq=function(e){return this.cmp(e)===0};Ye.floor=function(){return zt(new this.constructor(this),this.e+1,3)};Ye.greaterThan=Ye.gt=function(e){return this.cmp(e)>0};Ye.greaterThanOrEqualTo=Ye.gte=function(e){var t=this.cmp(e);return t==1||t===0};Ye.hyperbolicCosine=Ye.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),t=(1/i3(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=_b(o,1,s.times(t),new o(1),!0);for(var u,l=e,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return zt(s,o.precision=n,o.rounding=r,!0)};Ye.hyperbolicSine=Ye.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=_b(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/i3(5,e)),i=_b(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=t,s.rounding=n,zt(i,t,n,!0)};Ye.hyperbolicTangent=Ye.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,Ar(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};Ye.inverseCosine=Ye.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?t.isNeg()?oc(n,i,s):new n(0):new n(NaN):t.isZero()?oc(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=oc(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))};Ye.inverseHyperbolicCosine=Ye.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,on=!1,n=n.times(n).minus(1).sqrt().plus(n),on=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};Ye.inverseHyperbolicSine=Ye.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,on=!1,n=n.times(n).plus(1).sqrt().plus(n),on=!0,r.precision=e,r.rounding=t,n.ln())};Ye.inverseHyperbolicTangent=Ye.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?zt(new s(i),e,t,!0):(s.precision=n=r-i.e,i=Ar(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)};Ye.inverseSine=Ye.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,t!==-1?t===0?(e=oc(s,n+4,r).times(.5),e.s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};Ye.inverseTangent=Ye.atan=function(){var e,t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=L5)return o=oc(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=L5)return o=oc(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/Qt+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(on=!1,t=Math.ceil(a/Qt),r=1,u=l.times(l),o=new c(l),i=l;e!==-1;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),o=s.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),on=!0,zt(o,c.precision=f,c.rounding=d,!0)};Ye.isFinite=function(){return!!this.d};Ye.isInteger=Ye.isInt=function(){return!!this.d&&Fo(this.e/Qt)>this.d.length-2};Ye.isNaN=function(){return!this.s};Ye.isNegative=Ye.isNeg=function(){return this.s<0};Ye.isPositive=Ye.isPos=function(){return this.s>0};Ye.isZero=function(){return!!this.d&&this.d[0]===0};Ye.lessThan=Ye.lt=function(e){return this.cmp(e)<0};Ye.lessThanOrEqualTo=Ye.lte=function(e){return this.cmp(e)<1};Ye.logarithm=Ye.log=function(e){var t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(on=!1,a=f+h,o=Ip(l,a),r=t?qN(c,a+10):Ip(e,a),u=Ar(o,r,a,1),NS(u.d,i=f,d))do if(a+=10,o=Ip(l,a),r=t?qN(c,a+10):Ip(e,a),u=Ar(o,r,a,1),!s){+Ks(u.d).slice(i+1,i+15)+1==1e14&&(u=zt(u,f+1,0));break}while(NS(u.d,i+=10,d));return on=!0,zt(u,f,d)};Ye.minus=Ye.sub=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d?e.s=-e.s:e=new p(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new p(h);else return new p(u===3?-0:0);return on?zt(e,a,u):e}if(n=Fo(e.e/Qt),c=Fo(h.e/Qt),l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=d.length):(t=d,n=c,o=l.length),r=Math.max(Math.ceil(a/Qt),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}s=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=gc-1;--l[i],l[r]+=gc}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=r3(l,n),on?zt(e,a,u):e):new p(u===3?-0:0)};Ye.modulo=Ye.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?zt(new r(n),r.precision,r.rounding):(on=!1,r.modulo==9?(t=Ar(n,e.abs(),0,3,1),t.s*=e.s):t=Ar(n,e,0,r.modulo,1),t=t.times(e),on=!0,n.minus(t))};Ye.naturalExponential=Ye.exp=function(){return B5(this)};Ye.naturalLogarithm=Ye.ln=function(){return Ip(this)};Ye.negated=Ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s,zt(e)};Ye.plus=Ye.add=function(e){var t,n,r,i,s,o,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),on?zt(e,a,u):e;if(s=Fo(f.e/Qt),r=Fo(e.e/Qt),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=s,o=l.length),s=Math.ceil(a/Qt),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/gc|0,l[i]%=gc;for(t&&(l.unshift(t),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=r3(l,r),on?zt(e,a,u):e};Ye.precision=Ye.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(bm+e);return n.d?(t=Yye(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};Ye.round=function(){var e=this,t=e.constructor;return zt(new t(e),e.e+1,t.rounding)};Ye.sine=Ye.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Qt,r.rounding=1,n=Krt(r,Jye(r,n)),r.precision=e,r.rounding=t,zt(zd>2?n.neg():n,e,t,!0)):new r(NaN)};Ye.squareRoot=Ye.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(on=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=Ks(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=Fo((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(s=r,r=s.plus(Ar(o,s,n+2,1)).times(.5),Ks(s.d).slice(0,n)===(t=Ks(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(zt(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(zt(r,u+1,1),e=!r.times(r).eq(o));break}return on=!0,zt(r,u,c.rounding,e)};Ye.tangent=Ye.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=Ar(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,zt(zd==2||zd==4?n.neg():n,e,t,!0)):new r(NaN)};Ye.times=Ye.mul=function(e){var t,n,r,i,s,o,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=Fo(c.e/Qt)+Fo(e.e/Qt),u=d.length,l=h.length,u<l&&(s=d,d=h,h=s,o=u,u=l,l=o),s=[],o=u+l,r=o;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=s[i]+h[r]*d[i-r-1]+t,s[i--]=a%gc|0,t=a/gc|0;s[i]=(s[i]+t)%gc|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=r3(s,n),on?zt(e,f.precision,f.rounding):e};Ye.toBinary=function(e,t){return NU(this,2,e,t)};Ye.toDecimalPlaces=Ye.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Za(e,0,Qm),t===void 0?t=r.rounding:Za(t,0,8),zt(n,e+n.e+1,t))};Ye.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=kf(r,!0):(Za(e,0,Qm),t===void 0?t=i.rounding:Za(t,0,8),r=zt(new i(r),e+1,t),n=kf(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ye.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?n=kf(i):(Za(e,0,Qm),t===void 0?t=s.rounding:Za(t,0,8),r=zt(new s(i),e+i.e+1,t),n=kf(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ye.toFraction=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),t=new m(r),s=t.e=Yye(p)-h.e-1,o=s%Qt,t.d[0]=es(10,o<0?Qt+o:o),e==null)e=s>0?t:l;else{if(a=new m(e),!a.isInt()||a.lt(l))throw Error(bm+a);e=a.gt(t)?s>0?t:l:a}for(on=!1,a=new m(Ks(p)),c=m.precision,m.precision=s=p.length*Qt*2;f=Ar(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=Ar(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=Ar(l,r,s,1).minus(h).abs().cmp(Ar(u,n,s,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,on=!0,d};Ye.toHexadecimal=Ye.toHex=function(e,t){return NU(this,16,e,t)};Ye.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Za(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(on=!1,n=Ar(n,e,0,t,1).times(e),on=!0,zt(n)):(e.s=n.s,n=e),n};Ye.toNumber=function(){return+this};Ye.toOctal=function(e,t){return NU(this,8,e,t)};Ye.toPower=Ye.pow=function(e){var t,n,r,i,s,o,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(es(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return zt(a,r,s);if(t=Fo(e.e/Qt),t>=e.d.length-1&&(n=l<0?-l:l)<=qrt)return i=Kye(u,a,n,r),e.s<0?new u(1).div(i):zt(i,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=es(+a,l),t=n==0||!isFinite(n)?Fo(l*(Math.log("0."+Ks(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(on=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=B5(e.times(Ip(a,r+n)),r),i.d&&(i=zt(i,r+5,1),NS(i.d,r,s)&&(t=r+10,i=zt(B5(e.times(Ip(a,t+n)),t),t+5,1),+Ks(i.d).slice(r+1,r+15)+1==1e14&&(i=zt(i,r+1,0)))),i.s=o,on=!0,u.rounding=s,zt(i,r,s))};Ye.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=kf(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Za(e,1,Qm),t===void 0?t=i.rounding:Za(t,0,8),r=zt(new i(r),e,t),n=kf(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};Ye.toSignificantDigits=Ye.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Za(e,1,Qm),t===void 0?t=r.rounding:Za(t,0,8)),zt(new r(n),e,t)};Ye.toString=function(){var e=this,t=e.constructor,n=kf(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};Ye.truncated=Ye.trunc=function(){return zt(new this.constructor(this),this.e+1,1)};Ye.valueOf=Ye.toJSON=function(){var e=this,t=e.constructor,n=kf(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Ks(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)r=e[t]+"",n=Qt-r.length,n&&(s+=fp(n)),s+=r;o=e[t],r=o+"",n=Qt-r.length,n&&(s+=fp(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Za(e,t,n){if(e!==~~e||e<t||e>n)throw Error(bm+e)}function NS(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Qt,i=0):(i=Math.ceil((t+1)/Qt),t%=Qt),s=es(10,Qt-t),a=e[i]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==es(10,t-2)-1||(a==s/2||a==0)&&(e[i+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==es(10,t-3)-1,o}function TD(e,t,n){for(var r,i=[0],s,o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=$5.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function Grt(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/i3(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=_b(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var Ar=function(){function e(r,i,s){var o,a=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+a,r[u]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,u){var l,c,f,d,h,p,m,g,y,v,b,E,_,w,S,C,A,D,I,O,R=r.constructor,M=r.s==i.s?1:-1,F=r.d,P=i.d;if(!F||!F[0]||!P||!P[0])return new R(!r.s||!i.s||(F?P&&F[0]==P[0]:!P)?NaN:F&&F[0]==0||!P?M*0:M/0);for(u?(h=1,c=r.e-i.e):(u=gc,h=Qt,c=Fo(r.e/h)-Fo(i.e/h)),I=P.length,A=F.length,y=new R(M),v=y.d=[],f=0;P[f]==(F[f]||0);f++);if(P[f]>(F[f]||0)&&c--,s==null?(w=s=R.precision,o=R.rounding):a?w=s+(r.e-i.e)+1:w=s,w<0)v.push(1),p=!0;else{if(w=w/h+2|0,f=0,I==1){for(d=0,P=P[0],w++;(f<A||d)&&w--;f++)S=d*u+(F[f]||0),v[f]=S/P|0,d=S%P|0;p=d||f<A}else{for(d=u/(P[0]+1)|0,d>1&&(P=e(P,d,u),F=e(F,d,u),I=P.length,A=F.length),C=I,b=F.slice(0,I),E=b.length;E<I;)b[E++]=0;O=P.slice(),O.unshift(0),D=P[0],P[1]>=u/2&&++D;do d=0,l=t(P,b,I,E),l<0?(_=b[0],I!=E&&(_=_*u+(b[1]||0)),d=_/D|0,d>1?(d>=u&&(d=u-1),m=e(P,d,u),g=m.length,E=b.length,l=t(m,b,g,E),l==1&&(d--,n(m,I<g?O:P,g,u))):(d==0&&(l=d=1),m=P.slice()),g=m.length,g<E&&m.unshift(0),n(b,m,E,u),l==-1&&(E=b.length,l=t(P,b,I,E),l<1&&(d++,n(b,I<E?O:P,E,u))),E=b.length):l===0&&(d++,b=[0]),v[f++]=d,l&&b[0]?b[E++]=F[C]||0:(b=[F[C]],E=1);while((C++<A||b[0]!==void 0)&&w--);p=b[0]!==void 0}v[0]||v.shift()}if(h==1)y.e=c,Vye=p;else{for(f=1,d=v[0];d>=10;d/=10)f++;y.e=f+c*h-1,zt(y,a?s+y.e+1:s,o,p)}return y}}();function zt(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=t-i,s<0)s+=Qt,o=t,c=f[d=0],u=c/es(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Qt),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,s%=Qt,o=s-Qt+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;s%=Qt,o=s-Qt+i,u=o<0?0:c/es(10,i-o-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(o<0?c:c%es(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(s>0?o>0?c/es(10,i-o):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=es(10,(Qt-t%Qt)%Qt),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=d,a=1,d--):(f.length=d+1,a=es(10,Qt-s),f[d]=o>0?(c/es(10,i-o)%es(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,f[0]==gc&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=gc)break;f[d--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return on&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function kf(e,t,n){if(!e.isFinite())return Qye(e);var r,i=e.e,s=Ks(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+fp(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+fp(-i-1)+s,n&&(r=n-o)>0&&(s+=fp(r))):i>=o?(s+=fp(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+fp(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=fp(r))),s}function r3(e,t){var n=e[0];for(t*=Qt;n>=10;n/=10)t++;return t}function qN(e,t,n){if(t>Wrt)throw on=!0,n&&(e.precision=n),Error(Hye);return zt(new e(VN),t,1,!0)}function oc(e,t,n){if(t>L5)throw Error(Hye);return zt(new e(HN),t,n,!0)}function Yye(e){var t=e.length-1,n=t*Qt+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function fp(e){for(var t="";e--;)t+="0";return t}function Kye(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/Qt+4);for(on=!1;;){if(n%2&&(s=s.times(t),Ste(s.d,o)&&(i=!0)),n=Fo(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}t=t.times(t),Ste(t.d,o)}return on=!0,s}function xte(e){return e.d[e.d.length-1]&1}function Xye(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;)if(r=new e(t[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function B5(e,t){var n,r,i,s,o,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(on=!1,u=p):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(es(2,f))/Math.LN10*2+5|0,u+=r,n=s=o=new d(1),d.precision=u;;){if(s=zt(s.times(e),u,1),n=n.times(++c),a=o.plus(Ar(s,n,u,1)),Ks(a.d).slice(0,u)===Ks(o.d).slice(0,u)){for(i=f;i--;)o=zt(o.times(o),u,1);if(t==null)if(l<3&&NS(o.d,u-r,h,l))d.precision=u+=10,n=s=a=new d(1),c=0,l++;else return zt(o,d.precision=p,h,on=!0);else return d.precision=p,o}o=a}}function Ip(e,t){var n,r,i,s,o,a,u,l,c,f,d,h=1,p=10,m=e,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(t==null?(on=!1,c=b):c=t,y.precision=c+=p,n=Ks(g),r=n.charAt(0),Math.abs(s=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=Ks(m.d),r=n.charAt(0),h++;s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1))}else return l=qN(y,c+2,b).times(s+""),m=Ip(new y(r+"."+n.slice(1)),c-p).plus(l),y.precision=b,t==null?zt(m,b,v,on=!0):m;for(f=m,u=o=m=Ar(m.minus(1),m.plus(1),c,1),d=zt(m.times(m),c,1),i=3;;){if(o=zt(o.times(d),c,1),l=u.plus(Ar(o,new y(i),c,1)),Ks(l.d).slice(0,c)===Ks(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(qN(y,c+2,b).times(s+""))),u=Ar(u,new y(h),c,1),t==null)if(NS(u.d,c-p,v,a))y.precision=c+=p,l=o=m=Ar(f.minus(1),f.plus(1),c,1),d=zt(m.times(m),c,1),i=a=1;else return zt(u,y.precision=b,v,on=!0);else return y.precision=b,u;u=l,i+=2}}function Qye(e){return String(e.s*e.s/0)}function j5(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Qt,n<0&&(r+=Qt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Qt;r<i;)e.d.push(+t.slice(r,r+=Qt));t=t.slice(r),r=Qt-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),on&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Yrt(e,t){var n,r,i,s,o,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Gye.test(t))return j5(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Vrt.test(t))n=16,t=t.toLowerCase();else if(Urt.test(t))n=2;else if(Hrt.test(t))n=8;else throw Error(bm+t);for(s=t.search(/p/i),s>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,i=Kye(r,new r(n),s,s*2)),l=TD(t,n,gc),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(e.s*0):(e.e=r3(l,c),e.d=l,on=!1,o&&(e=Ar(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?es(2,u):Eb.pow(2,u))),on=!0,e)}function Krt(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:_b(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/i3(5,n)),t=_b(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}function _b(e,t,n,r,i){var s,o,a,u,l=e.precision,c=Math.ceil(l/Qt);for(on=!1,u=n.times(n),a=new e(r);;){if(o=Ar(a.times(u),new e(t++*t++),l,1),a=i?r.plus(o):r.minus(o),r=Ar(o.times(u),new e(t++*t++),l,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return on=!0,o.d.length=c+1,o}function i3(e,t){for(var n=e;--t;)n*=e;return n}function Jye(e,t){var n,r=t.s<0,i=oc(e,e.precision,1),s=i.times(.5);if(t=t.abs(),t.lte(s))return zd=r?4:1,t;if(n=t.divToInt(i),n.isZero())zd=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(s))return zd=xte(n)?r?2:3:r?4:1,t;zd=xte(n)?r?1:4:r?3:2}return t.minus(i).abs()}function NU(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor,p=n!==void 0;if(p?(Za(n,1,Qm),r===void 0?r=h.rounding:Za(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=Qye(e);else{for(c=kf(e),o=c.indexOf("."),p?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=TD(kf(d),10,i),d.e=d.d.length),f=TD(c,10,i),s=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=Ar(e,d,n,r,0,i),f=e.d,s=e.e,l=Vye),o=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=$5.charAt(f[o]);if(p){if(u>1)if(t==16||t==8){for(o=t==16?4:3,--u;u%o;u++)c+="0";for(f=TD(c,i,t),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=$5.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Ste(e,t){if(e.length>t)return e.length=t,!0}function Xrt(e){return new this(e).abs()}function Qrt(e){return new this(e).acos()}function Jrt(e){return new this(e).acosh()}function Zrt(e,t){return new this(e).plus(t)}function eit(e){return new this(e).asin()}function tit(e){return new this(e).asinh()}function nit(e){return new this(e).atan()}function rit(e){return new this(e).atanh()}function iit(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=oc(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?oc(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=oc(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(Ar(e,t,s,1)),t=oc(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Ar(e,t,s,1)),n}function sit(e){return new this(e).cbrt()}function oit(e){return zt(e=new this(e),e.e+1,2)}function ait(e,t,n){return new this(e).clamp(t,n)}function uit(e){if(!e||typeof e!="object")throw Error(n3+"Object expected");var t,n,r,i=e.defaults===!0,s=["precision",1,Qm,"rounding",0,8,"toExpNeg",-iv,0,"toExpPos",0,iv,"maxE",0,iv,"minE",-iv,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=F5[n]),(r=e[n])!==void 0)if(Fo(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(bm+n+": "+r);if(n="crypto",i&&(this[n]=F5[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(qye);else this[n]=!1;else throw Error(bm+n+": "+r);return this}function lit(e){return new this(e).cos()}function cit(e){return new this(e).cosh()}function Zye(e){var t,n,r;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,Tte(s)){l.s=s.s,on?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;on?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return j5(l,s.toString())}else if(u!=="string")throw Error(bm+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),Gye.test(s)?j5(l,s):Yrt(l,s)}if(i.prototype=Ye,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=uit,i.clone=Zye,i.isDecimal=Tte,i.abs=Xrt,i.acos=Qrt,i.acosh=Jrt,i.add=Zrt,i.asin=eit,i.asinh=tit,i.atan=nit,i.atanh=rit,i.atan2=iit,i.cbrt=sit,i.ceil=oit,i.clamp=ait,i.cos=lit,i.cosh=cit,i.div=fit,i.exp=dit,i.floor=hit,i.hypot=pit,i.ln=mit,i.log=git,i.log10=vit,i.log2=yit,i.max=bit,i.min=_it,i.mod=Eit,i.mul=wit,i.pow=xit,i.random=Sit,i.round=Tit,i.sign=Cit,i.sin=Ait,i.sinh=Dit,i.sqrt=Iit,i.sub=Nit,i.sum=kit,i.tan=Rit,i.tanh=Pit,i.trunc=Oit,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function fit(e,t){return new this(e).div(t)}function dit(e){return new this(e).exp()}function hit(e){return zt(e=new this(e),e.e+1,3)}function pit(){var e,t,n=new this(0);for(on=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return on=!0,new this(1/0);n=t}return on=!0,n.sqrt()}function Tte(e){return e instanceof Eb||e&&e.toStringTag===Wye||!1}function mit(e){return new this(e).ln()}function git(e,t){return new this(e).log(t)}function yit(e){return new this(e).log(2)}function vit(e){return new this(e).log(10)}function bit(){return Xye(this,arguments,"lt")}function _it(){return Xye(this,arguments,"gt")}function Eit(e,t){return new this(e).mod(t)}function wit(e,t){return new this(e).mul(t)}function xit(e,t){return new this(e).pow(t)}function Sit(e){var t,n,r,i,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:Za(e,1,Qm),r=Math.ceil(e/Qt),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)i=t[s],i>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(qye);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=Qt,r&&e&&(i=es(10,Qt-e),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=Qt)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Qt&&(n-=Qt-r)}return o.e=n,o.d=a,o}function Tit(e){return zt(e=new this(e),e.e+1,this.rounding)}function Cit(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ait(e){return new this(e).sin()}function Dit(e){return new this(e).sinh()}function Iit(e){return new this(e).sqrt()}function Nit(e,t){return new this(e).sub(t)}function kit(){var e=0,t=arguments,n=new this(t[e]);for(on=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return on=!0,zt(n,this.precision,this.rounding)}function Rit(e){return new this(e).tan()}function Pit(e){return new this(e).tanh()}function Oit(e){return zt(e=new this(e),e.e+1,1)}Ye[Symbol.for("nodejs.util.inspect.custom")]=Ye.toString;Ye[Symbol.toStringTag]="Decimal";var Eb=Ye.constructor=Zye(F5);VN=new Eb(VN);HN=new Eb(HN);var Mit="BigNumber",$it=["?on","config"],Fit=Kt(Mit,$it,e=>{var{on:t,config:n}=e,r=Eb.clone({precision:n.precision,modulo:Eb.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),e1e={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},s=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var h=f*f;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,d){var h=Math.abs(f),p=Math.abs(d);return h<3e3&&p<3e3?Math.sqrt(h*h+p*p):(h<p?(h=p,p=f/d):p=d/f,h*Math.sqrt(1+p*p))},a=function(){throw SyntaxError("Invalid Param")};function u(f,d){var h=Math.abs(f),p=Math.abs(d);return f===0?Math.log(p):d===0?Math.log(h):h<3e3&&p<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var l=function(f,d){var h={re:0,im:0};if(f==null)h.re=h.im=0;else if(d!==void 0)h.re=f,h.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)h.re=f.re,h.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;h.re=f.abs*Math.cos(f.arg),h.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;h.re=f.r*Math.cos(f.phi),h.im=f.r*Math.sin(f.phi)}else f.length===2?(h.re=f[0],h.im=f[1]):a();break;case"string":h.im=h.re=0;var p=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,g=0;p===null&&a();for(var y=0;y<p.length;y++){var v=p[y];v===" "||v==="	"||v===`
`||(v==="+"?m++:v==="-"?g++:v==="i"||v==="I"?(m+g===0&&a(),p[y+1]!==" "&&!isNaN(p[y+1])?(h.im+=parseFloat((g%2?"-":"")+p[y+1]),y++):h.im+=parseFloat((g%2?"-":"")+"1"),m=g=0):((m+g===0||isNaN(v))&&a(),p[y+1]==="i"||p[y+1]==="I"?(h.im+=parseFloat((g%2?"-":"")+v),y++):h.re+=parseFloat((g%2?"-":"")+v),m=g=0))}m+g>0&&a();break;case"number":h.im=0,h.re=f;break;default:a()}return isNaN(h.re)||isNaN(h.im),h};function c(f,d){if(!(this instanceof c))return new c(f,d);var h=l(f,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(f,d){var h=new c(f,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;f=this.re,d=this.im;var p=h.re,m=h.im,g,y;return m===0?new c(f/p,d/p):Math.abs(p)<Math.abs(m)?(y=p/m,g=p*y+m,new c((f*y+d)/g,(d*y-f)/g)):(y=m/p,g=m*y+p,new c((f+d*y)/g,(d-f*y)/g))},pow:function(f,d){var h=new c(f,d);if(f=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&f>0)return new c(Math.pow(f,h.re),0);if(f===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(f===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var p=Math.atan2(d,f),m=u(f,d);return f=Math.exp(h.re*m-h.im*p),d=h.im*m+h.re*p,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,h=this.abs(),p,m;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);p=.5*Math.sqrt(2*(h+f))}else p=Math.abs(d)/Math.sqrt(2*(h-f));return f<=0?m=.5*Math.sqrt(2*(h-f)):m=Math.abs(d)/Math.sqrt(2*(h+f)),new c(p,d<0?-m:m)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+s(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(u(f,d),Math.atan2(d,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*r(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*r(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)+r(d);return new c(Math.sin(f)/h,i(d)/h)},cot:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)-r(d);return new c(-Math.sin(f)/h,i(d)/h)},sec:function(){var f=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(d)/h,Math.sin(f)*i(d)/h)},csc:function(){var f=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(d)/h,-Math.cos(f)*i(d)/h)},asin:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),p=new c(h.re-d,h.im+f).log();return new c(p.im,-p.re)},acos:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),p=new c(h.re-d,h.im+f).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=f*f+(1-d)*(1-d),p=new c((1-d*d-f*f)/h,-2*f/h).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),r(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(r(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,h=r(f)+Math.cos(d);return new c(i(f)/h,Math.sin(d)/h)},coth:function(){var f=2*this.re,d=2*this.im,h=r(f)-Math.cos(d);return new c(i(f)/h,-Math.sin(d)/h)},csch:function(){var f=this.re,d=this.im,h=Math.cos(2*d)-r(2*f);return new c(-2*i(f)*Math.cos(d)/h,2*r(f)*Math.sin(d)/h)},sech:function(){var f=this.re,d=this.im,h=Math.cos(2*d)+r(2*f);return new c(2*r(f)*Math.cos(d)/h,-2*i(f)*Math.sin(d)/h)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,h=f>1&&d===0,p=1-f,m=1+f,g=p*p+d*d,y=g!==0?new c((m*p-d*d)/g,(d*p+m*d)/g):new c(f!==-1?f/0:0,d!==0?d/0:0),v=y.re;return y.re=u(y.re,y.im)/2,y.im=Math.atan2(y.im,v)/2,h&&(y.im=-y.im),y},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,h=f*f+d*d;return new c(f/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var h=new c(f,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+f:(f!==0?(h+=f,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,e.exports=c})()})(e1e);var Lit=e1e.exports;const Bs=ha(Lit);var Bit="Complex",jit=[],zit=Kt(Bit,jit,()=>(Object.defineProperty(Bs,"name",{value:"Complex"}),Bs.prototype.constructor=Bs,Bs.prototype.type="Complex",Bs.prototype.isComplex=!0,Bs.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Bs.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Bs.prototype.format=function(e){var t="",n=this.im,r=this.re,i=M5(this.re,e),s=M5(this.im,e),o=kr(e)?e:e?e.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=s+"i":n<0?n===-1?t=i+" - i":t=i+" - "+s.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+s+"i",t},Bs.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Bs(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(kr(n)){if(Mye(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),kr(r))return new Bs({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Bs.prototype.valueOf=Bs.prototype.toString,Bs.fromJSON=function(e){return new Bs(e)},Bs.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Bs),{isClass:!0});/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var Uit=2e3,Nt={s:1,n:0,d:1};function yd(e,t){if(isNaN(e=parseInt(e,10)))throw CD();return e*t}function si(e,t){if(t===0)throw kU();var n=Object.create(wo.prototype);n.s=e<0?-1:1,e=e<0?-e:e;var r=sv(e,t);return n.n=e/r,n.d=t/r,n}function Cte(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r===0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var cu=function(e,t){var n=0,r=1,i=1,s=0,o=0,a=0,u=1,l=1,c=0,f=1,d=1,h=1,p=1e7,m;if(e!=null)if(t!==void 0){if(n=e,r=t,i=n*r,n%1!==0||r%1!==0)throw Wit()}else switch(typeof e){case"object":{if("d"in e&&"n"in e)n=e.n,r=e.d,"s"in e&&(n*=e.s);else if(0 in e)n=e[0],1 in e&&(r=e[1]);else throw CD();i=n*r;break}case"number":{if(e<0&&(i=e,e=-e),e%1===0)n=e;else if(e>0){for(e>=1&&(l=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)),e/=l);f<=p&&h<=p;)if(m=(c+d)/(f+h),e===m){f+h<=p?(n=c+d,r=f+h):h>f?(n=d,r=h):(n=c,r=f);break}else e>m?(c+=d,f+=h):(d+=c,h+=f),f>p?(n=d,r=h):(n=c,r=f);n*=l}else(isNaN(e)||isNaN(t))&&(r=n=NaN);break}case"string":{if(f=e.match(/\d+|./g),f===null)throw CD();if(f[c]==="-"?(i=-1,c++):f[c]==="+"&&c++,f.length===c+1?o=yd(f[c++],i):f[c+1]==="."||f[c]==="."?(f[c]!=="."&&(s=yd(f[c++],i)),c++,(c+1===f.length||f[c+1]==="("&&f[c+3]===")"||f[c+1]==="'"&&f[c+3]==="'")&&(o=yd(f[c],i),u=Math.pow(10,f[c].length),c++),(f[c]==="("&&f[c+2]===")"||f[c]==="'"&&f[c+2]==="'")&&(a=yd(f[c+1],i),l=Math.pow(10,f[c+1].length)-1,c+=3)):f[c+1]==="/"||f[c+1]===":"?(o=yd(f[c],i),u=yd(f[c+2],1),c+=3):f[c+3]==="/"&&f[c+1]===" "&&(s=yd(f[c],i),o=yd(f[c+2],i),u=yd(f[c+4],1),c+=5),f.length<=c){r=u*l,i=n=a+r*s+l*o;break}}default:throw CD()}if(r===0)throw kU();Nt.s=i<0?-1:1,Nt.n=Math.abs(n),Nt.d=Math.abs(r)};function Vit(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)t&1&&(r=r*e%n);return r}function Hit(e,t){for(;t%2===0;t/=2);for(;t%5===0;t/=5);if(t===1)return 0;for(var n=10%t,r=1;n!==1;r++)if(n=n*10%t,r>Uit)return 0;return r}function qit(e,t,n){for(var r=1,i=Vit(10,n,t),s=0;s<300;s++){if(r===i)return s;r=r*10%t,i=i*10%t}return 0}function sv(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function wo(e,t){if(cu(e,t),this instanceof wo)e=sv(Nt.d,Nt.n),this.s=Nt.s,this.n=Nt.n/e,this.d=Nt.d/e;else return si(Nt.s*Nt.n,Nt.d)}var kU=function(){return new Error("Division by Zero")},CD=function(){return new Error("Invalid argument")},Wit=function(){return new Error("Parameters must be integer")};wo.prototype={s:1,n:0,d:1,abs:function(){return si(this.n,this.d)},neg:function(){return si(-this.s*this.n,this.d)},add:function(e,t){return cu(e,t),si(this.s*this.n*Nt.d+Nt.s*this.d*Nt.n,this.d*Nt.d)},sub:function(e,t){return cu(e,t),si(this.s*this.n*Nt.d-Nt.s*this.d*Nt.n,this.d*Nt.d)},mul:function(e,t){return cu(e,t),si(this.s*Nt.s*this.n*Nt.n,this.d*Nt.d)},div:function(e,t){return cu(e,t),si(this.s*Nt.s*this.n*Nt.d,this.d*Nt.n)},clone:function(){return si(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new wo(NaN);if(e===void 0)return si(this.s*this.n%this.d,1);if(cu(e,t),Nt.n===0&&this.d===0)throw kU();return si(this.s*(Nt.d*this.n)%(Nt.n*this.d),Nt.d*this.d)},gcd:function(e,t){return cu(e,t),si(sv(Nt.n,this.n)*sv(Nt.d,this.d),Nt.d*this.d)},lcm:function(e,t){return cu(e,t),Nt.n===0&&this.n===0?si(0,1):si(Nt.n*this.n,sv(Nt.n,this.n)*sv(Nt.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new wo(NaN):si(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new wo(NaN):si(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new wo(NaN):si(Math.round(e*this.s*this.n/this.d),e)},roundTo:function(e,t){return cu(e,t),si(this.s*Math.round(this.n*Nt.d/(this.d*Nt.n))*Nt.n,Nt.d)},inverse:function(){return si(this.s*this.d,this.n)},pow:function(e,t){if(cu(e,t),Nt.d===1)return Nt.s<0?si(Math.pow(this.s*this.d,Nt.n),Math.pow(this.n,Nt.n)):si(Math.pow(this.s*this.n,Nt.n),Math.pow(this.d,Nt.n));if(this.s<0)return null;var n=Cte(this.n),r=Cte(this.d),i=1,s=1;for(var o in n)if(o!=="1"){if(o==="0"){i=0;break}if(n[o]*=Nt.n,n[o]%Nt.d===0)n[o]/=Nt.d;else return null;i*=Math.pow(o,n[o])}for(var o in r)if(o!=="1"){if(r[o]*=Nt.n,r[o]%Nt.d===0)r[o]/=Nt.d;else return null;s*=Math.pow(o,r[o])}return Nt.s<0?si(s,i):si(i,s)},equals:function(e,t){return cu(e,t),this.s*this.n*Nt.d===Nt.s*Nt.n*this.d},compare:function(e,t){cu(e,t);var n=this.s*this.n*Nt.d-Nt.s*Nt.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var i=si(n[r-1],1),s=r-2;s>=0;s--)i=i.inverse().add(n[s]);if(Math.abs(i.sub(t).valueOf())<e)return i.mul(this.s)}return this},divisible:function(e,t){return cu(e,t),!(!(Nt.n*this.d)||this.n*Nt.d%(Nt.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do r.push(Math.floor(t/n)),e=t%n,t=n,n=e;while(t!==1);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=Hit(t,n),i=qit(t,n,r),s=this.s<0?"-":"";if(s+=t/n|0,t%=n,t*=10,t&&(s+="."),r){for(var o=i;o--;)s+=t/n|0,t%=n,t*=10;s+="(";for(var o=r;o--;)s+=t/n|0,t%=n,t*=10;s+=")"}else for(var o=e;t&&o--;)s+=t/n|0,t%=n,t*=10;return s}};var Git="Fraction",Yit=[],Kit=Kt(Git,Yit,()=>(Object.defineProperty(wo,"name",{value:"Fraction"}),wo.prototype.constructor=wo,wo.prototype.type="Fraction",wo.prototype.isFraction=!0,wo.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},wo.fromJSON=function(e){return new wo(e)},wo),{isClass:!0}),Xit="Matrix",Qit=[],Jit=Kt(Xit,Qit,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function PF(e,t,n){var r=e.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Hi(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),s="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(s);case 8:return"".concat(e.toOctal()).concat(s);case 16:return"".concat(e.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(t," not supported "))}}function Zit(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=Lye(t);switch(n){case"fixed":return tst(e,r);case"exponential":return Ate(e,r);case"engineering":return est(e,r);case"bin":return PF(e,2,i);case"oct":return PF(e,8,i);case"hex":return PF(e,16,i);case"auto":{var s=Dte(t==null?void 0:t.lowerExp,-3),o=Dte(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=s&&l<o?a=u.toFixed():a=Ate(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function est(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);if(s.includes("e")){var o=e.constructor;s=new o(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function Ate(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function tst(e,t){return e.toFixed(t)}function Dte(e,t){return kr(e)?e:Ti(e)?e.toNumber():t}function Ui(e,t){var n=nst(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function nst(e,t){if(typeof e=="number")return M5(e,t);if(Ti(e))return Zit(e,t);if(rst(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return t1e(e,t);if(ef(e))return Ite(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>Ite(r)+": "+Ui(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function Ite(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in Nte?Nte[i]:i,r++}return'"'+n+'"'}var Nte={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function t1e(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=t1e(e[i],t);return n+="]",n}else return Ui(e,t)}function rst(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function ur(e,t,n){if(!(this instanceof ur))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}ur.prototype=new RangeError;ur.prototype.constructor=RangeError;ur.prototype.name="DimensionError";ur.prototype.isDimensionError=!0;function Bh(e,t,n){if(!(this instanceof Bh))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Bh.prototype=new RangeError;Bh.prototype.constructor=RangeError;Bh.prototype.name="IndexError";Bh.prototype.isIndexError=!0;function ko(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function n1e(e,t,n){var r,i=e.length;if(i!==t[n])throw new ur(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new ur(t.length-1,t.length,"<");n1e(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new ur(t.length+1,t.length,">")}function kte(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new ur(e.length,0)}else n1e(e,t,0)}function ui(e,t){if(e!==void 0){if(!kr(e)||!Hi(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Bh(e,t)}}function z5(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!kr(i)||!Hi(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ui(t)+")")}),(kr(e)||Ti(e))&&(e=[e]);var r=n!==void 0?n:0;return U5(e,t,0,r),e}function U5(e,t,n,r){var i,s,o=e.length,a=t[n],u=Math.min(o,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),U5(s,t,l,r);for(i=u;i<a;i++)s=[],e[i]=s,U5(s,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function r1e(e,t){var n=sst(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new ur(0,r,"!=");t=RU(t,r);var i=i1e(t);if(r!==i)throw new ur(i,r,"!=");try{return ist(n,t)}catch(s){throw s instanceof ur?new ur(i,r,"!="):s}}function RU(e,t){var n=i1e(e),r=e.slice(),i=-1,s=e.indexOf(i),o=e.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,u=t%n===0;if(a)if(u)r[s]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function i1e(e){return e.reduce((t,n)=>t*n,1)}function ist(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var s=t[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}function s1e(e,t,n,r){var i=r||ko(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=o1e(e,t,0);i.length<t;)i.push(1);return e}function o1e(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=o1e(e[r],t,s)}else for(var o=n;o<t;o++)e=[e];return e}function sst(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function WN(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?WN(s,t):t(s);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function a1e(e,t,n,r){if(r<n){if(e.length!==t.length)throw new ur(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=a1e(e[s],t[s],n,r+1);return i}else return e.concat(t)}function u1e(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return a1e(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function ost(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),o=0;o<t.length;o++)for(var a=t[o],u=r[o],l=0;l<u;l++){var c=i-u+l;a[l]>s[c]&&(s[c]=a[l])}for(var f=0;f<t.length;f++)GN(t[f],s);return s}function GN(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var s=n-r+i;if(e[i]<t[s]&&e[i]>1||e[i]>t[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[s]))}}function Rte(e,t){var n=ko(e);if(bb(n,t))return e;GN(n,t);var r=ost(n,t),i=r.length,s=[...Array(i-n.length).fill(1),...n],o=ust(e);n.length<i&&(o=r1e(o,s),n=ko(o));for(var a=0;a<i;a++)n[a]<r[a]&&(o=ast(o,r[a],a),n=ko(o));return o}function ast(e,t,n){return u1e(...Array(t).fill(e),n)}function ust(e){return uS([],e)}function l1e(e){return Object.keys(e.signatures||{}).reduce(function(t,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)}var lst="DenseMatrix",cst=["Matrix"],fst=Kt(lst,cst,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!ef(f))throw new Error("Invalid datatype: "+f);if(fi(c))c.type==="DenseMatrix"?(this._data=Ei(c._data),this._size=Ei(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&ai(c.data)&&ai(c.size))this._data=c.data,this._size=c.size,kte(this._data,this._size),this._datatype=f||c.datatype;else if(ai(c))this._data=l(c),this._size=ko(this._data),kte(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+mc(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return WN(this._data,mc)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!ai(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new ur(c.length,this._size.length);for(var f=0;f<c.length;f++)ui(c[f],this._size[f]);for(var d=this._data,h=0,p=c.length;h<p;h++){var m=c[h];ui(m,d.length),d=d[m]}return d},n.prototype.set=function(c,f,d){if(!ai(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new ur(c.length,this._size.length,"<");var h,p,m,g=c.map(function(v){return v+1});u(this,g,d);var y=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],ui(m,y.length),y=y[m];return m=c[c.length-1],ui(m,y.length),y[m]=f,this};function r(c,f){if(!DU(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new ur(h.length,c._size.length);for(var p=f.min(),m=f.max(),g=0,y=c._size.length;g<y;g++)ui(p[g],c._size[g]),ui(m[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(g){return ui(g,c.length),c[g]}).valueOf():m.map(function(g){ui(g,c.length);var y=c[g];return i(y,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),g;if(fi(d)?(g=d.size(),d=d.valueOf()):g=ko(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!bb(g,p))try{g.length===0?d=Rte([d],p):d=Rte(d,p),g=ko(d)}catch{}if(p.length<c._size.length)throw new ur(p.length,c._size.length,"<");if(g.length<p.length){for(var y=0,v=0;p[y]===1&&g[y]===1;)y++;for(;p[y]===1;)v++,y++;d=s1e(d,p.length,v,g)}if(!bb(p,g))throw new ur(p,g,">");var b=f.max().map(function(w){return w+1});u(c,b,h);var E=p.length,_=0;o(c._data,f,d,E,_)}return c}function o(c,f,d,h,p){var m=p===h-1,g=f.dimension(p);m?g.forEach(function(y,v){ui(y),c[y]=d[v[0]]}):g.forEach(function(y,v){ui(y),o(c[y],f,d[v[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!vb(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return a(p,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;ai(h);)h=h[0];return h}return c._size=f.slice(0),c._data=z5(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=r1e(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=RU(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,g=f.length;m<g;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:Ei(this._data),size:Ei(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,d=l1e(c),h=function g(y,v){return ai(y)?y.map(function(b,E){return g(b,v.concat(E))}):d===1?c(y):d===2?c(y,v):c(y,v,f)},p=h(this._data,[]),m=this._datatype!==void 0?WN(p,mc):void 0;return new n(p,m)},n.prototype.forEach=function(c){var f=this,d=function h(p,m){ai(p)?p.forEach(function(g,y){h(g,m.concat(y))}):c(p,m,f)};d(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(ai(d))for(var p=0;p<d.length;p++)yield*f(d[p],h.concat(p));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(y){var v=h.map(b=>[b[y]]);f.push(new n(v,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return Ei(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Ui(this._data,c)},n.prototype.toString=function(){return Ui(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Ti(c)&&(c=c.toNumber()),!kr(c)||!Hi(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),g=[],y=0;y<m;y++)g[y]=this._data[y+d][y+f];return new n({data:g,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!ai(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(S){if(Ti(S)&&(S=S.toNumber()),!kr(S)||!Hi(S)||S<1)throw new Error("Size values must be positive integers");return S}),d){if(Ti(d)&&(d=d.toNumber()),!kr(d)||!Hi(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,g=c[0],y=c[1],v=Math.min(g-m,y-p),b;if(ai(f)){if(f.length!==v)throw new Error("Invalid value array length");b=function(C){return f[C]}}else if(fi(f)){var E=f.size();if(E.length!==1||E[0]!==v)throw new Error("Invalid matrix length");b=function(C){return f.get([C])}}else b=function(){return f};h||(h=Ti(b(0))?b(0).mul(0):0);var _=[];if(c.length>0){_=z5(_,c,h);for(var w=0;w<v;w++)_[w+m][w+p]=b(w)}return new n({data:_,size:[g,y]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!kr(c)||!Hi(c)||!kr(f)||!Hi(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ui(c,this._size[0]),ui(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return fi(c)?l(c.valueOf()):ai(c)?c.map(l):c}return n},{isClass:!0});function dst(e){var t=e.length,n=e[0].length,r,i,s=[];for(i=0;i<n;i++){var o=[];for(r=0;r<t;r++)o.push(e[r][i]);s.push(o)}return s}function hst(e){for(var t=0;t<e.length;t++)if(vb(e[t]))return!0;return!1}function YN(e,t){fi(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?YN(i,t):t(i)}}function Jf(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return Jf(r,t)}):t(e)}function pst(e,t,n){var r=Array.isArray(e)?ko(e):e.size();if(t<0||t>=r.length)throw new Bh(t,r.length);return fi(e)?e.create(KN(e.valueOf(),t,n)):KN(e,t,n)}function KN(e,t,n){var r,i,s,o;if(t<=0)if(Array.isArray(e[0])){for(o=dst(e),i=[],r=0;r<o.length;r++)i[r]=KN(o[r],t-1,n);return i}else{for(s=e[0],r=1;r<e.length;r++)s=n(s,e[r]);return s}else{for(i=[],r=0;r<e.length;r++)i[r]=KN(e[r],t-1,n);return i}}var Pte="isInteger",mst=["typed"],gst=Kt(Pte,mst,e=>{var{typed:t}=e;return t(Pte,{number:Hi,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),c1e="number",PU="number, number";function f1e(e){return Math.abs(e)}f1e.signature=c1e;function d1e(e,t){return e+t}d1e.signature=PU;function h1e(e,t){return e-t}h1e.signature=PU;function p1e(e,t){return e*t}p1e.signature=PU;function m1e(e){return-e}m1e.signature=c1e;function yst(e,t){return Math.log(e)}var vst="number";function g1e(e){return Number.isNaN(e)}g1e.signature=vst;function bst(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var Ote="isZero",_st=["typed","equalScalar"],Est=Kt(Ote,_st,e=>{var{typed:t,equalScalar:n}=e;return t(Ote,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))})}),Mte="isNaN",wst=["typed"],xst=Kt(Mte,wst,e=>{var{typed:t}=e;return t(Mte,{number:g1e,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})});function Sst(e,t,n,r){return UN(e.re,t.re,n,r)&&UN(e.im,t.im,n,r)}var Tst=Kt("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),XN="equalScalar",Cst=["typed","config"],Ast=Kt(XN,Cst,e=>{var{typed:t,config:n}=e,r=Tst({typed:t});return t(XN,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return UN(s,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||bst(s,o,n.relTol,n.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return Sst(s,o,n.relTol,n.absTol)}},r)});Kt(XN,["typed","config"],e=>{var{typed:t,config:n}=e;return t(XN,{"number, number":function(i,s){return UN(i,s,n.relTol,n.absTol)}})});var Dst="SparseMatrix",Ist=["typed","equalScalar","Matrix"],Nst=Kt(Dst,Ist,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!ef(g))throw new Error("Invalid datatype: "+g);if(fi(m))s(this,m,g);else if(m&&ai(m.index)&&ai(m.ptr)&&ai(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(ai(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+mc(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(m,g,y){g.type==="SparseMatrix"?(m._values=g._values?Ei(g._values):void 0,m._index=Ei(g._index),m._ptr=Ei(g._ptr),m._size=Ei(g._size),m._datatype=y||g._datatype):o(m,g.valueOf(),y||g._datatype)}function o(m,g,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var v=g.length,b=0,E=n,_=0;if(ef(y)&&(E=t.find(n,[y,y])||n,_=t.convert(0,y)),v>0){var w=0;do{m._ptr.push(m._index.length);for(var S=0;S<v;S++){var C=g[S];if(ai(C)){if(w===0&&b<C.length&&(b=C.length),w<C.length){var A=C[w];E(A,_)||(m._values.push(A),m._index.push(S))}}else w===0&&b<1&&(b=1),E(C,_)||(m._values.push(C),m._index.push(S))}w++}while(w<b)}m._ptr.push(m._index.length),m._size=[v,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return WN(this._values,mc)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,m);case 2:case 3:return u(this,m,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function a(m,g){if(!DU(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return m.get(g.min());var v=g.size();if(v.length!==m._size.length)throw new ur(v.length,m._size.length);var b,E,_,w,S=g.min(),C=g.max();for(b=0,E=m._size.length;b<E;b++)ui(S[b],m._size[b]),ui(C[b],m._size[b]);var A=m._values,D=m._index,I=m._ptr,O=g.dimension(0),R=g.dimension(1),M=[],F=[];O.forEach(function(V,$){F[V]=$[0],M[V]=!0});var P=A?[]:void 0,j=[],z=[];return R.forEach(function(V){for(z.push(j.length),_=I[V],w=I[V+1];_<w;_++)b=D[_],M[b]===!0&&(j.push(F[b]),P&&P.push(A[_]))}),z.push(j.length),new i({values:P,index:j,ptr:z,size:v,datatype:m._datatype})}function u(m,g,y,v){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var b=g.size(),E=g.isScalar(),_;if(fi(y)?(_=y.size(),y=y.toArray()):_=ko(y),E){if(_.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),y,v)}else{if(b.length!==1&&b.length!==2)throw new ur(b.length,m._size.length,"<");if(_.length<b.length){for(var w=0,S=0;b[w]===1&&_[w]===1;)w++;for(;b[w]===1;)S++,w++;y=s1e(y,b.length,S,_)}if(!bb(b,_))throw new ur(b,_,">");if(b.length===1){var C=g.dimension(0);C.forEach(function(I,O){ui(I),m.set([I,0],y[O[0]],v)})}else{var A=g.dimension(0),D=g.dimension(1);A.forEach(function(I,O){ui(I),D.forEach(function(R,M){ui(R),m.set([I,R],y[O[0]][M[0]],v)})})}}return m}i.prototype.get=function(m){if(!ai(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new ur(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],y=m[1];ui(g,this._size[0]),ui(y,this._size[1]);var v=l(g,this._ptr[y],this._ptr[y+1],this._index);return v<this._ptr[y+1]&&this._index[v]===g?this._values[v]:0},i.prototype.set=function(m,g,y){if(!ai(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new ur(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var v=m[0],b=m[1],E=this._size[0],_=this._size[1],w=n,S=0;ef(this._datatype)&&(w=t.find(n,[this._datatype,this._datatype])||n,S=t.convert(0,this._datatype)),(v>E-1||b>_-1)&&(d(this,Math.max(v+1,E),Math.max(b+1,_),y),E=this._size[0],_=this._size[1]),ui(v,E),ui(b,_);var C=l(v,this._ptr[b],this._ptr[b+1],this._index);return C<this._ptr[b+1]&&this._index[C]===v?w(g,S)?c(C,b,this._values,this._index,this._ptr):this._values[C]=g:w(g,S)||f(C,v,b,g,this._values,this._index,this._ptr),this};function l(m,g,y,v){if(y-g===0)return y;for(var b=g;b<y;b++)if(v[b]===m)return b;return g}function c(m,g,y,v,b){y.splice(m,1),v.splice(m,1);for(var E=g+1;E<b.length;E++)b[E]--}function f(m,g,y,v,b,E,_){b.splice(m,0,v),E.splice(m,0,g);for(var w=y+1;w<_.length;w++)_[w]++}i.prototype.resize=function(m,g,y){if(!vb(m))throw new TypeError("Array or Matrix expected");var v=m.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(v.length!==2)throw new Error("Only two dimensions matrix are supported");v.forEach(function(E){if(!kr(E)||!Hi(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ui(v)+")")});var b=y?this.clone():this;return d(b,v[0],v[1],g)};function d(m,g,y,v){var b=v||0,E=n,_=0;ef(m._datatype)&&(E=t.find(n,[m._datatype,m._datatype])||n,_=t.convert(0,m._datatype),b=t.convert(b,m._datatype));var w=!E(b,_),S=m._size[0],C=m._size[1],A,D,I;if(y>C){for(D=C;D<y;D++)if(m._ptr[D]=m._values.length,w)for(A=0;A<S;A++)m._values.push(b),m._index.push(A);m._ptr[y]=m._values.length}else y<C&&(m._ptr.splice(y+1,C-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(C=y,g>S){if(w){var O=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]+O,I=m._ptr[D+1]+O;var R=0;for(A=S;A<g;A++,R++)m._values.splice(I+R,0,b),m._index.splice(I+R,0,A),O++}m._ptr[C]=m._values.length}}else if(g<S){var M=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]-M;var F=m._ptr[D],P=m._ptr[D+1]-M;for(I=F;I<P;I++)A=m._index[I],A>g-1&&(m._values.splice(I,1),m._index.splice(I,1),M++)}m._ptr[D]=m._values.length}return m._size[0]=g,m._size[1]=y,m}i.prototype.reshape=function(m,g){if(!ai(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(V){if(!kr(V)||!Hi(V)||V<=-2||V===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ui(m)+")")});var y=this._size[0]*this._size[1];m=RU(m,y);var v=m[0]*m[1];if(y!==v)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return b;for(var E=[],_=0;_<b._ptr.length;_++)for(var w=0;w<b._ptr[_+1]-b._ptr[_];w++)E.push(_);for(var S=b._values.slice(),C=b._index.slice(),A=0;A<b._index.length;A++){var D=C[A],I=E[A],O=D*b._size[1]+I;E[A]=O%m[1],C[A]=Math.floor(O/m[1])}b._values.length=0,b._index.length=0,b._ptr.length=m[1]+1,b._size=m.slice();for(var R=0;R<b._ptr.length;R++)b._ptr[R]=0;for(var M=0;M<S.length;M++){var F=C[M],P=E[M],j=S[M],z=l(F,b._ptr[P],b._ptr[P+1],b._index);f(z,F,P,j,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var m=new i({values:this._values?Ei(this._values):void 0,index:Ei(this._index),ptr:Ei(this._ptr),size:Ei(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,v=this._size[0],b=this._size[1],E=l1e(m),_=function(S,C,A){return E===1?m(S):E===2?m(S,[C,A]):m(S,[C,A],y)};return h(this,0,v-1,0,b-1,_,g)};function h(m,g,y,v,b,E,_){var w=[],S=[],C=[],A=n,D=0;ef(m._datatype)&&(A=t.find(n,[m._datatype,m._datatype])||n,D=t.convert(0,m._datatype));for(var I=function(B,q,Y){B=E(B,q,Y),A(B,D)||(w.push(B),S.push(q))},O=v;O<=b;O++){C.push(w.length);var R=m._ptr[O],M=m._ptr[O+1];if(_)for(var F=R;F<M;F++){var P=m._index[F];P>=g&&P<=y&&I(m._values[F],P-g,O-v)}else{for(var j={},z=R;z<M;z++){var V=m._index[z];j[V]=m._values[z]}for(var $=g;$<=y;$++){var U=$ in j?j[$]:0;I(U,$-g,O-v)}}}return C.push(w.length),new i({values:w,index:S,ptr:C,size:[y-g+1,b-v+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,v=this._size[0],b=this._size[1],E=0;E<b;E++){var _=this._ptr[E],w=this._ptr[E+1];if(g)for(var S=_;S<w;S++){var C=this._index[S];m(this._values[S],[C,E],y)}else{for(var A={},D=_;D<w;D++){var I=this._index[D];A[I]=this._values[D]}for(var O=0;O<v;O++){var R=O in A?A[O]:0;m(R,[O,E],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var y=this._ptr[g],v=this._ptr[g+1],b=y;b<v;b++){var E=this._index[b];yield{value:this._values[b],index:[E,g]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,g,y,v,b){var E=v[0],_=v[1],w=[],S,C;for(S=0;S<E;S++)for(w[S]=[],C=0;C<_;C++)w[S][C]=0;for(C=0;C<_;C++)for(var A=y[C],D=y[C+1],I=A;I<D;I++)S=g[I],w[S][C]=m?b?Ei(m[I]):m[I]:1;return w}return i.prototype.format=function(m){for(var g=this._size[0],y=this._size[1],v=this.density(),b="Sparse Matrix ["+Ui(g,m)+" x "+Ui(y,m)+"] density: "+Ui(v,m)+`
`,E=0;E<y;E++)for(var _=this._ptr[E],w=this._ptr[E+1],S=_;S<w;S++){var C=this._index[S];b+=`
    (`+Ui(C,m)+", "+Ui(E,m)+") ==> "+(this._values?Ui(this._values[S],m):"X")}return b},i.prototype.toString=function(){return Ui(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(Ti(m)&&(m=m.toNumber()),!kr(m)||!Hi(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,y=m<0?-m:0,v=this._size[0],b=this._size[1],E=Math.min(v-y,b-g),_=[],w=[],S=[];S[0]=0;for(var C=g;C<b&&_.length<E;C++)for(var A=this._ptr[C],D=this._ptr[C+1],I=A;I<D;I++){var O=this._index[I];if(O===C-g+y){_.push(this._values[I]),w[_.length-1]=O-y;break}}return S.push(_.length),new i({values:_,index:w,ptr:S,size:[E,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,y,v,b){if(!ai(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(V){if(Ti(V)&&(V=V.toNumber()),!kr(V)||!Hi(V)||V<1)throw new Error("Size values must be positive integers");return V}),y){if(Ti(y)&&(y=y.toNumber()),!kr(y)||!Hi(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var E=n,_=0;ef(b)&&(E=t.find(n,[b,b])||n,_=t.convert(0,b));var w=y>0?y:0,S=y<0?-y:0,C=m[0],A=m[1],D=Math.min(C-S,A-w),I;if(ai(g)){if(g.length!==D)throw new Error("Invalid value array length");I=function($){return g[$]}}else if(fi(g)){var O=g.size();if(O.length!==1||O[0]!==D)throw new Error("Invalid matrix length");I=function($){return g.get([$])}}else I=function(){return g};for(var R=[],M=[],F=[],P=0;P<A;P++){F.push(R.length);var j=P-w;if(j>=0&&j<D){var z=I(j);E(z,_)||(M.push(j+S),R.push(z))}}return F.push(R.length),new i({values:R,index:M,ptr:F,size:[C,A]})},i.prototype.swapRows=function(m,g){if(!kr(m)||!Hi(m)||!kr(g)||!Hi(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ui(m,this._size[0]),ui(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,y,v,b){for(var E=v[m],_=v[m+1],w=E;w<_;w++)b(y[w],g[w])},i._swapRows=function(m,g,y,v,b,E){for(var _=0;_<y;_++){var w=E[_],S=E[_+1],C=l(m,w,S,b),A=l(g,w,S,b);if(C<S&&A<S&&b[C]===m&&b[A]===g){if(v){var D=v[C];v[C]=v[A],v[A]=D}continue}if(C<S&&b[C]===m&&(A>=S||b[A]!==g)){var I=v?v[C]:void 0;b.splice(A,0,g),v&&v.splice(A,0,I),b.splice(A<=C?C+1:C,1),v&&v.splice(A<=C?C+1:C,1);continue}if(A<S&&b[A]===g&&(C>=S||b[C]!==m)){var O=v?v[A]:void 0;b.splice(C,0,m),v&&v.splice(C,0,O),b.splice(C<=A?A+1:A,1),v&&v.splice(C<=A?A+1:A,1)}}},i},{isClass:!0}),kst="number",Rst=["typed"];function Pst(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function Ost(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var s=t+n;if(isNaN(s))throw new SyntaxError('String "'+e.input+'" is not a valid number');return s}var Mst=Kt(kst,Rst,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=Pst(i);if(s)return Ost(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),$st="bignumber",Fst=["typed","BigNumber"],Lst=Kt($st,Fst,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=n(s[1]),u=new n(2).pow(Number(o));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))})}),Bst="fraction",jst=["typed","Fraction"],zst=Kt(Bst,jst,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))})}),$te="matrix",Ust=["typed","Matrix","DenseMatrix","SparseMatrix"],Vst=Kt($te,Ust,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t($te,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,u){return s([],a,u)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(o,u);if(a==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),Fte="unaryMinus",Hst=["typed"],qst=Kt(Fte,Hst,e=>{var{typed:t}=e;return t(Fte,{number:m1e,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),Lte="abs",Wst=["typed"],Gst=Kt(Lte,Wst,e=>{var{typed:t}=e;return t(Lte,{number:f1e,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),Bte="apply",Yst=["typed","isInteger"],Kst=Kt(Bte,Yst,e=>{var{typed:t,isInteger:n}=e;return t(Bte,{"Array | Matrix, number | BigNumber, function":function(i,s,o){if(!n(s))throw new TypeError("Integer number expected for dimension");var a=Array.isArray(i)?ko(i):i.size();if(s<0||s>=a.length)throw new Bh(s,a.length);return fi(i)?i.create(QN(i.valueOf(),s,o)):QN(i,s,o)}})});function QN(e,t,n){var r,i,s;if(t<=0)if(Array.isArray(e[0])){for(s=Xst(e),i=[],r=0;r<s.length;r++)i[r]=QN(s[r],t-1,n);return i}else return n(e);else{for(i=[],r=0;r<e.length;r++)i[r]=QN(e[r],t-1,n);return i}}function Xst(e){var t=e.length,n=e[0].length,r,i,s=[];for(i=0;i<n;i++){var o=[];for(r=0;r<t;r++)o.push(e[r][i]);s.push(o)}return s}var jte="addScalar",Qst=["typed"],Jst=Kt(jte,Qst,e=>{var{typed:t}=e;return t(jte,{"number, number":d1e,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),zte="subtractScalar",Zst=["typed"],eot=Kt(zte,Zst,e=>{var{typed:t}=e;return t(zte,{"number, number":h1e,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),tot="matAlgo11xS0s",not=["typed","equalScalar"],y1e=Kt(tot,not,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=n,y=0,v=o;typeof d=="string"&&(m=d,g=t.find(n,[m,m]),y=t.convert(0,m),s=t.convert(s,m),v=t.find(o,[m,m]));for(var b=[],E=[],_=[],w=0;w<p;w++){_[w]=E.length;for(var S=c[w],C=c[w+1],A=S;A<C;A++){var D=l[A],I=a?v(s,u[A]):v(u[A],s);g(I,y)||(E.push(D),b.push(I))}}return _[p]=E.length,i.createSparseMatrix({values:b,index:E,ptr:_,size:[h,p],datatype:m})}}),rot="matAlgo12xSfs",iot=["typed","DenseMatrix"],sot=Kt(rot,iot,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=o;typeof d=="string"&&(m=d,s=t.convert(s,m),g=t.find(o,[m,m]));for(var y=[],v=[],b=[],E=0;E<p;E++){for(var _=E+1,w=c[E],S=c[E+1],C=w;C<S;C++){var A=l[C];v[A]=u[C],b[A]=_}for(var D=0;D<h;D++)E===0&&(y[D]=[]),b[D]===_?y[D][E]=a?g(s,v[D]):g(v[D],s):y[D][E]=a?g(s,0):g(0,s)}return new n({data:y,size:[h,p],datatype:m})}}),oot="matAlgo14xDs",aot=["typed"],OU=Kt(oot,aot,e=>{var{typed:t}=e;return function(i,s,o,a){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,s=t.convert(s,f),d=t.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,s,a):[];return i.createDenseMatrix({data:h,size:Ei(l),datatype:f})};function n(r,i,s,o,a,u,l){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,s,s[i+1],a[d],u,l);return c}}),uot="matAlgo03xDSf",lot=["typed"],cot=Kt(uot,lot,e=>{var{typed:t}=e;return function(r,i,s,o){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new ur(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],y,v=0,b=s;typeof l=="string"&&l===p&&l!=="mixed"&&(y=l,v=t.convert(0,y),b=t.find(s,[y,y]));for(var E=[],_=0;_<m;_++)E[_]=[];for(var w=[],S=[],C=0;C<g;C++){for(var A=C+1,D=d[C],I=d[C+1],O=D;O<I;O++){var R=f[O];w[R]=o?b(c[O],a[R][C]):b(a[R][C],c[O]),S[R]=A}for(var M=0;M<m;M++)S[M]===A?E[M][C]=w[M]:E[M][C]=o?b(v,a[M][C]):b(a[M][C],v)}return r.createDenseMatrix({data:E,size:[m,g],datatype:l===r._datatype&&p===i._datatype?y:void 0})}}),fot="matAlgo05xSfSf",dot=["typed","equalScalar"],hot=Kt(fot,dot,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,m=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==m.length)throw new ur(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],v=c[1],b,E=n,_=0,w=o;typeof f=="string"&&f===g&&f!=="mixed"&&(b=f,E=t.find(n,[b,b]),_=t.convert(0,b),w=t.find(o,[b,b]));var S=a&&d?[]:void 0,C=[],A=[],D=S?[]:void 0,I=S?[]:void 0,O=[],R=[],M,F,P,j;for(F=0;F<v;F++){A[F]=C.length;var z=F+1;for(P=l[F],j=l[F+1];P<j;P++)M=u[P],C.push(M),O[M]=z,D&&(D[M]=a[P]);for(P=p[F],j=p[F+1];P<j;P++)M=h[P],O[M]!==z&&C.push(M),R[M]=z,I&&(I[M]=d[P]);if(S)for(P=A[F];P<C.length;){M=C[P];var V=O[M],$=R[M];if(V===z||$===z){var U=V===z?D[M]:_,W=$===z?I[M]:_,B=w(U,W);E(B,_)?C.splice(P,1):(S.push(B),P++)}}}return A[v]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,v],datatype:f===i._datatype&&g===s._datatype?b:void 0})}}),pot="matAlgo13xDD",mot=["typed"],got=Kt(pot,mot,e=>{var{typed:t}=e;return function(i,s,o){var a=i._data,u=i._size,l=i._datatype,c=s._data,f=s._size,d=s._datatype,h=[];if(u.length!==f.length)throw new ur(u.length,f.length);for(var p=0;p<u.length;p++){if(u[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[p]=u[p]}var m,g=o;typeof l=="string"&&l===d&&(m=l,g=t.find(o,[m,m]));var y=h.length>0?n(g,0,h,h[0],a,c):[];return i.createDenseMatrix({data:y,size:h,datatype:m})};function n(r,i,s,o,a,u){var l=[];if(i===s.length-1)for(var c=0;c<o;c++)l[c]=r(a[c],u[c]);else for(var f=0;f<o;f++)l[f]=n(r,i+1,s,s[i+1],a[f],u[f]);return l}}),yot="broadcast",vot=["concat"],bot=Kt(yot,vot,e=>{var{concat:t}=e;return function(i,s){var o=Math.max(i._size.length,s._size.length);if(i._size.length===s._size.length&&i._size.every((p,m)=>p===s._size[m]))return[i,s];for(var a=n(i._size,o,0),u=n(s._size,o,0),l=[],c=0;c<o;c++)l[c]=Math.max(a[c],u[c]);GN(a,l),GN(u,l);var f=i.clone(),d=s.clone();f._size.length<o?f.reshape(n(f._size,o,1)):d._size.length<o&&d.reshape(n(d._size,o,1));for(var h=0;h<o;h++)f._size[h]<l[h]&&(f=r(f,l[h],h)),d._size[h]<l[h]&&(d=r(d,l[h],h));return[f,d]};function n(i,s,o){return[...Array(s-i.length).fill(o),...i]}function r(i,s,o){return t(...Array(s).fill(i),o)}}),_ot="matrixAlgorithmSuite",Eot=["typed","matrix","concat"],v1e=Kt(_ot,Eot,e=>{var{typed:t,matrix:n,concat:r}=e,i=got({typed:t}),s=OU({typed:t}),o=bot({concat:r});return function(u){var l=u.elop,c=u.SD||u.DS,f;l?(f={"DenseMatrix, DenseMatrix":(m,g)=>i(...o(m,g),l),"Array, Array":(m,g)=>i(...o(n(m),n(g)),l).valueOf(),"Array, DenseMatrix":(m,g)=>i(...o(n(m),g),l),"DenseMatrix, Array":(m,g)=>i(...o(m,n(g)),l)},u.SS&&(f["SparseMatrix, SparseMatrix"]=(m,g)=>u.SS(...o(m,g),l,!1)),u.DS&&(f["DenseMatrix, SparseMatrix"]=(m,g)=>u.DS(...o(m,g),l,!1),f["Array, SparseMatrix"]=(m,g)=>u.DS(...o(n(m),g),l,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(m,g)=>c(...o(g,m),l,!0),f["SparseMatrix, Array"]=(m,g)=>c(...o(n(g),m),l,!0))):(f={"DenseMatrix, DenseMatrix":t.referToSelf(m=>(g,y)=>i(...o(g,y),m)),"Array, Array":t.referToSelf(m=>(g,y)=>i(...o(n(g),n(y)),m).valueOf()),"Array, DenseMatrix":t.referToSelf(m=>(g,y)=>i(...o(n(g),y),m)),"DenseMatrix, Array":t.referToSelf(m=>(g,y)=>i(...o(g,n(y)),m))},u.SS&&(f["SparseMatrix, SparseMatrix"]=t.referToSelf(m=>(g,y)=>u.SS(...o(g,y),m,!1))),u.DS&&(f["DenseMatrix, SparseMatrix"]=t.referToSelf(m=>(g,y)=>u.DS(...o(g,y),m,!1)),f["Array, SparseMatrix"]=t.referToSelf(m=>(g,y)=>u.DS(...o(n(g),y),m,!1))),c&&(f["SparseMatrix, DenseMatrix"]=t.referToSelf(m=>(g,y)=>c(...o(y,g),m,!0)),f["SparseMatrix, Array"]=t.referToSelf(m=>(g,y)=>c(...o(n(y),g),m,!0))));var d=u.scalar||"any",h=u.Ds||u.Ss;h&&(l?(f["DenseMatrix,"+d]=(m,g)=>s(m,g,l,!1),f[d+", DenseMatrix"]=(m,g)=>s(g,m,l,!0),f["Array,"+d]=(m,g)=>s(n(m),g,l,!1).valueOf(),f[d+", Array"]=(m,g)=>s(n(g),m,l,!0).valueOf()):(f["DenseMatrix,"+d]=t.referToSelf(m=>(g,y)=>s(g,y,m,!1)),f[d+", DenseMatrix"]=t.referToSelf(m=>(g,y)=>s(y,g,m,!0)),f["Array,"+d]=t.referToSelf(m=>(g,y)=>s(n(g),y,m,!1).valueOf()),f[d+", Array"]=t.referToSelf(m=>(g,y)=>s(n(y),g,m,!0).valueOf())));var p=u.sS!==void 0?u.sS:u.Ss;return l?(u.Ss&&(f["SparseMatrix,"+d]=(m,g)=>u.Ss(m,g,l,!1)),p&&(f[d+", SparseMatrix"]=(m,g)=>p(g,m,l,!0))):(u.Ss&&(f["SparseMatrix,"+d]=t.referToSelf(m=>(g,y)=>u.Ss(g,y,m,!1))),p&&(f[d+", SparseMatrix"]=t.referToSelf(m=>(g,y)=>p(y,g,m,!0)))),l&&l.signatures&&$ye(f,l.signatures),f}}),wot="matAlgo01xDSid",xot=["typed"],b1e=Kt(wot,xot,e=>{var{typed:t}=e;return function(r,i,s,o){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new ur(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],y=typeof l=="string"&&l!=="mixed"&&l===p?l:void 0,v=y?t.find(s,[y,y]):s,b,E,_=[];for(b=0;b<m;b++)_[b]=[];var w=[],S=[];for(E=0;E<g;E++){for(var C=E+1,A=d[E],D=d[E+1],I=A;I<D;I++)b=f[I],w[b]=o?v(c[I],a[b][E]):v(a[b][E],c[I]),S[b]=C;for(b=0;b<m;b++)S[b]===C?_[b][E]=w[b]:_[b][E]=a[b][E]}return r.createDenseMatrix({data:_,size:[m,g],datatype:l===r._datatype&&p===i._datatype?y:void 0})}}),Sot="matAlgo04xSidSid",Tot=["typed","equalScalar"],Cot=Kt(Sot,Tot,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,m=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==m.length)throw new ur(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],v=c[1],b,E=n,_=0,w=o;typeof f=="string"&&f===g&&f!=="mixed"&&(b=f,E=t.find(n,[b,b]),_=t.convert(0,b),w=t.find(o,[b,b]));var S=a&&d?[]:void 0,C=[],A=[],D=a&&d?[]:void 0,I=a&&d?[]:void 0,O=[],R=[],M,F,P,j,z;for(F=0;F<v;F++){A[F]=C.length;var V=F+1;for(j=l[F],z=l[F+1],P=j;P<z;P++)M=u[P],C.push(M),O[M]=V,D&&(D[M]=a[P]);for(j=p[F],z=p[F+1],P=j;P<z;P++)if(M=h[P],O[M]===V){if(D){var $=w(D[M],d[P]);E($,_)?O[M]=null:D[M]=$}}else C.push(M),R[M]=V,I&&(I[M]=d[P]);if(D&&I)for(P=A[F];P<C.length;)M=C[P],O[M]===V?(S[P]=D[M],P++):R[M]===V?(S[P]=I[M],P++):C.splice(P,1)}return A[v]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,v],datatype:f===i._datatype&&g===s._datatype?b:void 0})}}),Aot="matAlgo10xSids",Dot=["typed","DenseMatrix"],_1e=Kt(Aot,Dot,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=o;typeof d=="string"&&(m=d,s=t.convert(s,m),g=t.find(o,[m,m]));for(var y=[],v=[],b=[],E=0;E<p;E++){for(var _=E+1,w=c[E],S=c[E+1],C=w;C<S;C++){var A=l[C];v[A]=u[C],b[A]=_}for(var D=0;D<h;D++)E===0&&(y[D]=[]),b[D]===_?y[D][E]=a?g(s,v[D]):g(v[D],s):y[D][E]=s}return new n({data:y,size:[h,p],datatype:m})}}),Iot="multiplyScalar",Not=["typed"],kot=Kt(Iot,Not,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":p1e,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),Ute="multiply",Rot=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Pot=Kt(Ute,Rot,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=e,a=y1e({typed:t,equalScalar:s}),u=OU({typed:t});function l(_,w){switch(_.length){case 1:switch(w.length){case 1:if(_[0]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+w[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+w.length+" dimensions)")}break;case 2:switch(w.length){case 1:if(_[1]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+w[0]+")");break;case 2:if(_[1]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+w[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+w.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function c(_,w,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return o(_,w)}function f(_,w){if(w.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(_,w)}function d(_,w){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=w._data,I=w._size,O=w._datatype||w.getDataType(),R=C[0],M=I[1],F,P=r,j=i;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&(F=A,P=t.find(r,[F,F]),j=t.find(i,[F,F]));for(var z=[],V=0;V<M;V++){for(var $=j(S[0],D[0][V]),U=1;U<R;U++)$=P($,j(S[U],D[U][V]));z[V]=$}return _.createDenseMatrix({data:z,size:[M],datatype:A===_._datatype&&O===w._datatype?F:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":v}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":E});function m(_,w){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=w._data,I=w._datatype||w.getDataType(),O=C[0],R=C[1],M,F=r,P=i;A&&I&&A===I&&typeof A=="string"&&A!=="mixed"&&(M=A,F=t.find(r,[M,M]),P=t.find(i,[M,M]));for(var j=[],z=0;z<O;z++){for(var V=S[z],$=P(V[0],D[0]),U=1;U<R;U++)$=F($,P(V[U],D[U]));j[z]=$}return _.createDenseMatrix({data:j,size:[O],datatype:A===_._datatype&&I===w._datatype?M:void 0})}function g(_,w){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=w._data,I=w._size,O=w._datatype||w.getDataType(),R=C[0],M=C[1],F=I[1],P,j=r,z=i;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&A!=="mixed"&&(P=A,j=t.find(r,[P,P]),z=t.find(i,[P,P]));for(var V=[],$=0;$<R;$++){var U=S[$];V[$]=[];for(var W=0;W<F;W++){for(var B=z(U[0],D[0][W]),q=1;q<M;q++)B=j(B,z(U[q],D[q][W]));V[$][W]=B}}return _.createDenseMatrix({data:V,size:[R,F],datatype:A===_._datatype&&O===w._datatype?P:void 0})}function y(_,w){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=w._values,I=w._index,O=w._ptr,R=w._size,M=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var F=C[0],P=R[1],j,z=r,V=i,$=s,U=0;A&&M&&A===M&&typeof A=="string"&&A!=="mixed"&&(j=A,z=t.find(r,[j,j]),V=t.find(i,[j,j]),$=t.find(s,[j,j]),U=t.convert(0,j));for(var W=[],B=[],q=[],Y=w.createSparseMatrix({values:W,index:B,ptr:q,size:[F,P],datatype:A===_._datatype&&M===w._datatype?j:void 0}),re=0;re<P;re++){q[re]=B.length;var pe=O[re],_e=O[re+1];if(_e>pe)for(var de=0,ye=0;ye<F;ye++){for(var Ce=ye+1,ve=void 0,qe=pe;qe<_e;qe++){var He=I[qe];de!==Ce?(ve=V(S[ye][He],D[qe]),de=Ce):ve=z(ve,V(S[ye][He],D[qe]))}de===Ce&&!$(ve,U)&&(B.push(ye),W.push(ve))}}return q[P]=B.length,Y}function v(_,w){var S=_._values,C=_._index,A=_._ptr,D=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=w._data,O=w._datatype||w.getDataType(),R=_._size[0],M=w._size[0],F=[],P=[],j=[],z,V=r,$=i,U=s,W=0;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&(z=D,V=t.find(r,[z,z]),$=t.find(i,[z,z]),U=t.find(s,[z,z]),W=t.convert(0,z));var B=[],q=[];j[0]=0;for(var Y=0;Y<M;Y++){var re=I[Y];if(!U(re,W))for(var pe=A[Y],_e=A[Y+1],de=pe;de<_e;de++){var ye=C[de];q[ye]?B[ye]=V(B[ye],$(re,S[de])):(q[ye]=!0,P.push(ye),B[ye]=$(re,S[de]))}}for(var Ce=P.length,ve=0;ve<Ce;ve++){var qe=P[ve];F[ve]=B[qe]}return j[1]=P.length,_.createSparseMatrix({values:F,index:P,ptr:j,size:[R,1],datatype:D===_._datatype&&O===w._datatype?z:void 0})}function b(_,w){var S=_._values,C=_._index,A=_._ptr,D=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=w._data,O=w._datatype||w.getDataType(),R=_._size[0],M=w._size[0],F=w._size[1],P,j=r,z=i,V=s,$=0;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&(P=D,j=t.find(r,[P,P]),z=t.find(i,[P,P]),V=t.find(s,[P,P]),$=t.convert(0,P));for(var U=[],W=[],B=[],q=_.createSparseMatrix({values:U,index:W,ptr:B,size:[R,F],datatype:D===_._datatype&&O===w._datatype?P:void 0}),Y=[],re=[],pe=0;pe<F;pe++){B[pe]=W.length;for(var _e=pe+1,de=0;de<M;de++){var ye=I[de][pe];if(!V(ye,$))for(var Ce=A[de],ve=A[de+1],qe=Ce;qe<ve;qe++){var He=C[qe];re[He]!==_e?(re[He]=_e,W.push(He),Y[He]=z(ye,S[qe])):Y[He]=j(Y[He],z(ye,S[qe]))}}for(var ht=B[pe],rt=W.length,Pe=ht;Pe<rt;Pe++){var Be=W[Pe];U[Pe]=Y[Be]}}return B[F]=W.length,q}function E(_,w){var S=_._values,C=_._index,A=_._ptr,D=_._datatype||_._data===void 0?_._datatype:_.getDataType(),I=w._values,O=w._index,R=w._ptr,M=w._datatype||w._data===void 0?w._datatype:w.getDataType(),F=_._size[0],P=w._size[1],j=S&&I,z,V=r,$=i;D&&M&&D===M&&typeof D=="string"&&D!=="mixed"&&(z=D,V=t.find(r,[z,z]),$=t.find(i,[z,z]));for(var U=j?[]:void 0,W=[],B=[],q=_.createSparseMatrix({values:U,index:W,ptr:B,size:[F,P],datatype:D===_._datatype&&M===w._datatype?z:void 0}),Y=j?[]:void 0,re=[],pe,_e,de,ye,Ce,ve,qe,He,ht=0;ht<P;ht++){B[ht]=W.length;var rt=ht+1;for(Ce=R[ht],ve=R[ht+1],ye=Ce;ye<ve;ye++)if(He=O[ye],j)for(_e=A[He],de=A[He+1],pe=_e;pe<de;pe++)qe=C[pe],re[qe]!==rt?(re[qe]=rt,W.push(qe),Y[qe]=$(I[ye],S[pe])):Y[qe]=V(Y[qe],$(I[ye],S[pe]));else for(_e=A[He],de=A[He+1],pe=_e;pe<de;pe++)qe=C[pe],re[qe]!==rt&&(re[qe]=rt,W.push(qe));if(j)for(var Pe=B[ht],Be=W.length,Xe=Pe;Xe<Be;Xe++){var mt=W[Xe];U[Xe]=Y[mt]}}return B[P]=W.length,q}return t(Ute,i,{"Array, Array":t.referTo("Matrix, Matrix",_=>(w,S)=>{l(ko(w),ko(S));var C=_(n(w),n(S));return fi(C)?C.valueOf():C}),"Matrix, Matrix":function(w,S){var C=w.size(),A=S.size();return l(C,A),C.length===1?A.length===1?c(w,S,C[0]):f(w,S):A.length===1?h(w,S):p(w,S)},"Matrix, Array":t.referTo("Matrix,Matrix",_=>(w,S)=>_(w,n(S))),"Array, Matrix":t.referToSelf(_=>(w,S)=>_(n(w,S.storage()),S)),"SparseMatrix, any":function(w,S){return a(w,S,i,!1)},"DenseMatrix, any":function(w,S){return u(w,S,i,!1)},"any, SparseMatrix":function(w,S){return a(S,w,i,!0)},"any, DenseMatrix":function(w,S){return u(S,w,i,!0)},"Array, any":function(w,S){return u(n(w),S,i,!1).valueOf()},"any, Array":function(w,S){return u(n(S),w,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(_=>(w,S,C)=>{for(var A=_(w,S),D=0;D<C.length;D++)A=_(A,C[D]);return A})})}),Oot="sqrt",Mot=["config","typed","Complex"],$ot=Kt(Oot,Mot,e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||t.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||t.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),Vte="subtract",Fot=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Lot=Kt(Vte,Fot,e=>{var{typed:t,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:s,DenseMatrix:o,concat:a}=e,u=b1e({typed:t}),l=cot({typed:t}),c=hot({typed:t,equalScalar:r}),f=_1e({typed:t,DenseMatrix:o}),d=sot({typed:t,DenseMatrix:o}),h=v1e({typed:t,matrix:n,concat:a});return t(Vte,{"any, any":i},h({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),Hte="conj",Bot=["typed"],jot=Kt(Hte,Bot,e=>{var{typed:t}=e;return t(Hte,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),qte="concat",zot=["typed","matrix","isInteger"],Uot=Kt(qte,zot,e=>{var{typed:t,matrix:n,isInteger:r}=e;return t(qte,{"...Array | Matrix | number | BigNumber":function(s){var o,a=s.length,u=-1,l,c=!1,f=[];for(o=0;o<a;o++){var d=s[o];if(fi(d)&&(c=!0),kr(d)||Ti(d)){if(o!==a-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||o>0&&u>l)throw new Bh(u,l+1)}else{var h=Ei(d).valueOf(),p=ko(h);if(f[o]=h,l=u,u=p.length-1,o>0&&u!==l)throw new ur(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var m=f.shift();f.length;)m=u1e(m,f.shift(),u);return c?n(m):m},"...string":function(s){return s.join("")}})});function Vot(e,t,n,r,i){if(rv.isTypedFunction(e)){var s=[t,n,r],o=rv.resolve(e,s);if(o)return f(o.implementation,s);var a=[t,n],u=rv.resolve(e,a);if(u)return f(u.implementation,a);var l=[t],c=rv.resolve(e,l);return c?f(c.implementation,l):f(e,s)}else return e(t,n,r);function f(d,h){try{return d.apply(d,h)}catch(g){var p;if(g instanceof TypeError&&((p=g.data)===null||p===void 0?void 0:p.category)==="wrongType"){var m=[];throw m.push("value: ".concat(mc(t))),h.length>=2&&m.push("index: ".concat(mc(n))),h.length>=3&&m.push("array: ".concat(mc(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(e.name,"(").concat(m.join(", "),") at index ").concat(JSON.stringify(n)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(e.name,": ").concat(g.message))}}}var Wte="identity",Hot=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],qot=Kt(Wte,Hot,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t(Wte,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Ti(l)||Ti(c)?i:null;if(Ti(l)&&(l=l.toNumber()),Ti(c)&&(c=c.toNumber()),!Hi(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Hi(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return s.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=z5([],m,p),y=l<c?l:c,v=0;v<y;v++)g[v][v]=h;return g}}),Gte="map",Wot=["typed"],Got=Kt(Gte,Wot,e=>{var{typed:t}=e;return t(Gte,{"Array, function":Yot,"Matrix, function":function(r,i){return r.map(i)}})});function Yot(e,t){var n=function r(i,s){return Array.isArray(i)?i.map(function(o,a){return r(o,s.concat(a))}):Vot(t,i,s,e,"map")};return n(e,[])}function Kot(){throw new Error('No "bignumber" implementation available')}function Xot(){throw new Error('No "fraction" implementation available')}function Qot(){throw new Error('No "matrix" implementation available')}var Yte="size",Jot=["typed","config","?matrix"],Zot=Kt(Yte,Jot,e=>{var{typed:t,config:n,matrix:r}=e;return t(Yte,{Matrix:function(s){return s.create(s.size())},Array:ko,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([]):Qot()}})});function JN(e,t,n){var r;return String(e).includes("Unexpected type")?(r=arguments.length>2?" (type: "+mc(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):String(e).includes("complex numbers")?(r=arguments.length>2?" (type: "+mc(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}var eat="numeric",tat=["number","?bignumber","?fraction"],nat=Kt(eat,tat,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>t(o),BigNumber:n?o=>n(o):Kot,bigint:o=>BigInt(o),Fraction:r?o=>r(o):Xot};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=mc(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===c?a:s[u](a)}}),Kte="divideScalar",rat=["typed","numeric"],iat=Kt(Kte,rat,e=>{var{typed:t,numeric:n}=e;return t(Kte,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),Xte="log",sat=["config","typed","divideScalar","Complex"],oat=Kt(Xte,sat,e=>{var{typed:t,config:n,divideScalar:r,Complex:i}=e;return t(Xte,{number:function(o){return o>=0||n.predictable?yst(o):new i(o,0).log()},Complex:function(o){return o.log()},BigNumber:function(o){return!o.isNegative()||n.predictable?o.ln():new i(o.toNumber(),0).log()},"any, any":t.referToSelf(s=>(o,a)=>r(s(o),s(a)))})}),Qte="add",aat=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],uat=Kt(Qte,aat,e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:s,SparseMatrix:o,concat:a}=e,u=b1e({typed:t}),l=Cot({typed:t,equalScalar:i}),c=_1e({typed:t,DenseMatrix:s}),f=v1e({typed:t,matrix:n,concat:a});return t(Qte,{"any, any":r,"any, any, ...any":t.referToSelf(d=>(h,p,m)=>{for(var g=d(h,p),y=0;y<m.length;y++)g=d(g,m[y]);return g})},f({elop:r,DS:u,SS:l,Ss:c}))}),Jte="dot",lat=["typed","addScalar","multiplyScalar","conj","size"],cat=Kt(Jte,lat,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t(Jte,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function a(c,f){var d=o(c,f),h=fi(c)?c._data:c,p=fi(c)?c._datatype||c.getDataType():void 0,m=fi(f)?f._data:f,g=fi(f)?f._datatype||f.getDataType():void 0,y=l(c).length===2,v=l(f).length===2,b=n,E=r;if(p&&g&&p===g&&typeof p=="string"&&p!=="mixed"){var _=p;b=t.find(n,[_,_]),E=t.find(r,[_,_])}if(!y&&!v){for(var w=E(i(h[0]),m[0]),S=1;S<d;S++)w=b(w,E(i(h[S]),m[S]));return w}if(!y&&v){for(var C=E(i(h[0]),m[0][0]),A=1;A<d;A++)C=b(C,E(i(h[A]),m[A][0]));return C}if(y&&!v){for(var D=E(i(h[0][0]),m[0]),I=1;I<d;I++)D=b(D,E(i(h[I][0]),m[I]));return D}if(y&&v){for(var O=E(i(h[0][0]),m[0][0]),R=1;R<d;R++)O=b(O,E(i(h[R][0]),m[R][0]));return O}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,g=0,y=n,v=r,b=0,E=0;b<d.length&&E<p.length;){var _=d[b],w=p[E];if(_<w){b++;continue}if(_>w){E++;continue}_===w&&(g=y(g,v(h[b],m[E])),b++,E++)}return g}function l(c){return fi(c)?c.size():s(c)}}),Zte="det",fat=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],dat=Kt(Zte,fat,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:s,isZero:o,unaryMinus:a}=e;return t(Zte,{any:function(c){return Ei(c)},"Array | Matrix":function(c){var f;switch(fi(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Ei(c);case 1:if(f[0]===1)return Ei(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Ui(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Ui(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ui(f)+")")}}});function u(l,c,f){if(c===1)return Ei(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((S,C)=>C),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var g=void 0;for(g=p+1;g<c;g++)if(!o(l[h[g]][p])){m=h[g],h[g]=h[p],h[p]=m,d=!d;break}if(g===c)return l[m][p]}for(var y=l[m][p],v=p===0?1:l[h[p-1]][p-1],b=p+1;b<c;b++)for(var E=h[b],_=p+1;_<c;_++)l[E][_]=s(r(i(l[E][_],y),i(l[E][p],l[m][_])),v)}var w=l[h[c-1]][c-1];return d?a(w):w}}),ene="inv",hat=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],pat=Kt(ene,hat,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:l}=e;return t(ene,{"Array | Matrix":function(d){var h=fi(d)?d.size():ko(d);switch(h.length){case 1:if(h[0]===1)return fi(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Ui(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return fi(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+Ui(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ui(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,g,y,v;if(d===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,y)]]}else if(d===2){var b=a(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(o(f[0][1]),b)],[r(o(f[1][0]),b),r(f[0][0],b)]]}else{var E=f.concat();for(p=0;p<d;p++)E[p]=E[p].concat();for(var _=u(d).valueOf(),w=0;w<h;w++){var S=l(E[w][w]),C=w;for(p=w+1;p<d;)l(E[p][w])>S&&(S=l(E[p][w]),C=p),p++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");p=C,p!==w&&(v=E[w],E[w]=E[p],E[p]=v,v=_[w],_[w]=_[p],_[p]=v);var A=E[w],D=_[w];for(p=0;p<d;p++){var I=E[p],O=_[p];if(p!==w){if(I[w]!==0){for(g=r(o(I[w]),A[w]),m=w;m<h;m++)I[m]=i(I[m],s(g,A[m]));for(m=0;m<h;m++)O[m]=i(O[m],s(g,D[m]))}}else{for(g=A[w],m=w;m<h;m++)I[m]=r(I[m],g);for(m=0;m<h;m++)O[m]=r(O[m],g)}}}return _}}}),mat="divide",gat=["typed","matrix","multiply","equalScalar","divideScalar","inv"],yat=Kt(mat,gat,e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:s,inv:o}=e,a=y1e({typed:t,equalScalar:i}),u=OU({typed:t});return t("divide",$ye({"Array | Matrix, Array | Matrix":function(c,f){return r(c,o(f))},"DenseMatrix, any":function(c,f){return u(c,f,s,!1)},"SparseMatrix, any":function(c,f){return a(c,f,s,!1)},"Array, any":function(c,f){return u(n(c),f,s,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,o(f))}},s.signatures))}),tne="mean",vat=["typed","add","divide"],bat=Kt(tne,vat,e=>{var{typed:t,add:n,divide:r}=e;return t(tne,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(a){if(hst(a))throw new TypeError("Scalar values expected in function mean");return s(a)}});function i(o,a){try{var u=pst(o,a,n),l=Array.isArray(o)?ko(o):o.size();return r(u,l[a])}catch(c){throw JN(c,"mean")}}function s(o){var a,u=0;if(YN(o,function(l){try{a=a===void 0?l:n(a,l),u++}catch(c){throw JN(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(a,u)}}),OF="unbiased",nne="variance",_at=["typed","add","subtract","multiply","divide","apply","isNaN"],Eat=Kt(nne,_at,e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:s,apply:o,isNaN:a}=e;return t(nne,{"Array | Matrix":function(f){return u(f,OF)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,OF)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,OF)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(YN(c,function(g){try{d=d===void 0?g:n(d,g),h++}catch(y){throw JN(y,"variance",g)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var p=s(d,h);if(d=void 0,YN(c,function(g){var y=r(g,p);d=d===void 0?i(y,y):n(d,i(y,y))}),a(d))return d;switch(f){case"uncorrected":return s(d,h);case"biased":return s(d,h+1);case"unbiased":{var m=Ti(d)?d.mul(0):0;return h===1?m:s(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,h=>u(h,d))}catch(h){throw JN(h,"variance")}}}),rne="std",wat=["typed","map","sqrt","variance"],xat=Kt(rne,wat,e=>{var{typed:t,map:n,sqrt:r,variance:i}=e;return t(rne,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(a){return s(a)}});function s(o,a){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return vb(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),MU=Fit({config:Py}),$U=zit({}),E1e=Kit({}),FU=Jit({}),XT=fst({Matrix:FU}),Gn=jrt({BigNumber:MU,Complex:$U,DenseMatrix:XT,Fraction:E1e}),Sat=Gst({typed:Gn}),s3=Jst({typed:Gn}),Tat=jot({typed:Gn}),D_=Ast({config:Py,typed:Gn}),w1e=gst({typed:Gn}),Cat=Est({equalScalar:D_,typed:Gn}),Aat=Got({typed:Gn}),x1e=kot({typed:Gn}),Dat=Mst({typed:Gn}),LU=Nst({Matrix:FU,equalScalar:D_,typed:Gn}),S1e=eot({typed:Gn}),Iat=Kst({isInteger:w1e,typed:Gn}),Nat=Lst({BigNumber:MU,typed:Gn}),kat=xst({typed:Gn}),Rat=$ot({Complex:$U,config:Py,typed:Gn}),BU=qst({typed:Gn}),Pat=zst({Fraction:E1e,typed:Gn}),jh=Vst({DenseMatrix:XT,Matrix:FU,SparseMatrix:LU,typed:Gn}),Oat=nat({bignumber:Nat,fraction:Pat,number:Dat}),Mat=Zot({matrix:jh,config:Py,typed:Gn}),T1e=Uot({isInteger:w1e,matrix:jh,typed:Gn}),o3=iat({numeric:Oat,typed:Gn}),$at=qot({BigNumber:MU,DenseMatrix:XT,SparseMatrix:LU,config:Py,matrix:jh,typed:Gn}),Fat=Lot({DenseMatrix:XT,concat:T1e,equalScalar:D_,matrix:jh,subtractScalar:S1e,typed:Gn,unaryMinus:BU}),C1e=uat({DenseMatrix:XT,SparseMatrix:LU,addScalar:s3,concat:T1e,equalScalar:D_,matrix:jh,typed:Gn}),Lat=cat({addScalar:s3,conj:Tat,multiplyScalar:x1e,size:Mat,typed:Gn}),A1e=oat({Complex:$U,config:Py,divideScalar:o3,typed:Gn}),a3=Pot({addScalar:s3,dot:Lat,equalScalar:D_,matrix:jh,multiplyScalar:x1e,typed:Gn}),Bat=dat({divideScalar:o3,isZero:Cat,matrix:jh,multiply:a3,subtractScalar:S1e,typed:Gn,unaryMinus:BU}),jat=pat({abs:Sat,addScalar:s3,det:Bat,divideScalar:o3,identity:$at,matrix:jh,multiply:a3,typed:Gn,unaryMinus:BU}),D1e=yat({divideScalar:o3,equalScalar:D_,inv:jat,matrix:jh,multiply:a3,typed:Gn}),ine=bat({add:C1e,divide:D1e,typed:Gn}),zat=Eat({add:C1e,apply:Iat,divide:D1e,isNaN:kat,multiply:a3,subtract:Fat,typed:Gn}),sne=xat({map:Aat,sqrt:Rat,typed:Gn,variance:zat});const I1e=0,wb=1,one=kye("thisisjndexperimentseed"),N1e=2*3.141592653589793,k1e=100;function Uat(e){let t=e.length,n;for(;t>0;)n=Math.floor(Math.random()*t),t-=1,[e[t],e[n]]=[e[n],e[t]];return e}function Vat(e){const t=e(),n=e();return Math.sqrt(-2*Number(A1e(Number(t))))*Math.cos(N1e*n)*wb+I1e}function Hat(){const e=one(),t=one();return Math.sqrt(-2*Number(A1e(Number(e))))*Math.cos(N1e*t)*wb+I1e}function R1e(e,t){if(e.length===t.length){const n=ine(e),r=ine(t),i=Number(sne(e)),s=Number(sne(t));let o=0;for(let u=0;u<e.length;u++)o+=e[u]-n+(t[u]-r);return o/(e.length-1)/(i*s)}return NaN}function P1e(e,t){const n=e**2,r=t**2;return((t-1)*(n+t)+Math.sqrt(n*(r-1)*(n-1)))/((t-1)*(2*n+t-1))}function O1e(e,t,n){const r=n**2;return t.map((i,s)=>(n*e[s]+(1-n)*i)/Math.sqrt(r+(1-n)**2))}function ane(){const e=[];for(;e.length<k1e;){const t=Hat();t>=-2*wb&&t<=wb*2&&e.push(t)}return e}function une(e){const t=[];for(;t.length<k1e;){const n=Vat(e);n>=-2*wb&&n<=wb*2&&t.push(n)}return t}function jU(e,t){const n=kye(t),r=une(n);let i=une(n);const s=R1e(r,i),o=P1e(e,s);return i=O1e(r,i,o),r.map((a,u)=>e<0?[a,-i[u]]:[a,i[u]])}function qat(e){const t=ane();let n=ane();const r=R1e(t,n),i=P1e(e,r);return n=O1e(t,n,i),t.map((s,o)=>[s,n[o]])}const Wat=Object.freeze(Object.defineProperty({__proto__:null,generateDataSet:qat,generateDataSetFixed:jU,shuffle:Uat},Symbol.toStringTag,{value:"Module"})),MF=300,$F=300;function Sw({v:e,onClick:t}){const n=k.useRef(null),[r,i]=k.useState(!1),s=k.useCallback(()=>{const o=jU(e,Date.now().toString()),a={left:40,top:20,right:20,bottom:20},u=$F-a.bottom,l=MF-a.left-a.right,c=o.map(E=>E[0]),f=o.map(E=>E[1]),d=eU(n.current);d.selectAll("*").remove();const h=ub().range([0,u]),p=ub().range([0,u]);h.domain([P0(c),pc(c)]).range([0,u]),p.domain([P0(f),pc(f)]).range([0,u]);const m=o5(h).tickSize(0).tickValues([]),g=o5(p).tickSize(0).tickValues([]),y=`translate(${a.left},${a.top})`,v=`translate(${a.left+l},${a.top})`,b=(E,_,w,S,C)=>{E.selectAll(_).data([0]).enter().append("g").attr("class",S),E.selectAll(_).data([0]).exit().remove(),E.selectAll(_).attr("transform",C).call(w)};b(d,".x.axis",m,"x axis",y),b(d,".y.axis",g,"y axis",v),d.selectAll(".line").data(o).enter().append("line").style("stroke","grey").style("stroke-width",.5).attr("x1",a.left).attr("y1",E=>h(E[0])+a.top).attr("x2",a.left+l).attr("y2",E=>p(E[1])+a.top)},[e]);return k.useEffect(()=>{s()},[s]),x.jsxs("svg",{className:"d3-component",width:MF,height:$F,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[x.jsx("g",{id:"d3Stuff",ref:n}),x.jsx("rect",{onClick:t,x:0,y:0,width:MF,height:$F,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const Gat=Object.freeze(Object.defineProperty({__proto__:null,default:Sw},Symbol.toStringTag,{value:"Module"}));function u3({r1:e,r2:t,onClick:n}){const r=k.useMemo(()=>Math.random()>.5,[e,t]),[i,s]=k.useState(0),o=()=>{s(u=>u+1)},a=u=>{n(u),o()};return r?x.jsxs(ro,{children:[x.jsx(Sw,{onClick:()=>a(1),v:e},i),x.jsx(Sw,{onClick:()=>a(2),v:t},i+1)]}):x.jsxs(ro,{children:[x.jsx(Sw,{onClick:()=>a(2),v:t},i),x.jsx(Sw,{onClick:()=>a(1),v:e},i+1)]})}const Yat=Object.freeze(Object.defineProperty({__proto__:null,default:u3},Symbol.toStringTag,{value:"Module"})),lne=[.6,.7,.8],cne=[.3,.4,.5];function Kat({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(lne[Math.floor(Math.random()*lne.length)]),[s,o]=k.useState(cne[Math.floor(Math.random()*cne.length)]),[a,u]=k.useState([]),l=k.useCallback(c=>{u([...a,{r1:r,r2:s,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?o(Math.min(s+.01,1)):i(Math.min(r-.01,1)):f?o(Math.max(s-.03,0)):i(Math.max(r+.03,0))},[t,a,r,s]);return k.useEffect(()=>{if(t===50){const c=Math.abs(r-s);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:s,observedJnd:c}})}},[t,a,r,s,e]),x.jsxs(kc,{style:{width:"100%",height:"100%"},children:[x.jsxs(nt,{children:[t,"/50"]}),x.jsx(nt,{style:{textAlign:"center"},children:"Select an option"}),x.jsx(Qa,{children:x.jsx(u3,{onClick:l,r1:r,r2:s})})]})}const Xat=Object.freeze(Object.defineProperty({__proto__:null,default:Kat},Symbol.toStringTag,{value:"Module"}));function Qat({setAnswer:e,parameters:t}){const[n,r]=k.useState(0),[i,s]=k.useState(t.above),[o,a]=k.useState([]),[u,l]=k.useState(t.r1),[c,f]=k.useState(t.r2),d=k.useCallback(h=>{a([...o,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,o,u,c]);return k.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{parallelSelections:o}})},[n,o]),n===50?x.jsx(nt,{children:"Completed! Great job, please continue."}):x.jsxs(kc,{style:{width:"100%",height:"100%"},children:[x.jsx(nt,{style:{textAlign:"center"},children:"Select an option"}),x.jsx(Qa,{children:x.jsx(u3,{onClick:d,r1:u,r2:c})}),x.jsx(Qa,{style:{marginTop:20},children:x.jsx("progress",{value:n,max:50})})]})}const Jat=Object.freeze(Object.defineProperty({__proto__:null,default:Qat},Symbol.toStringTag,{value:"Module"})),uA=300,RE=300;function Tw({r:e,onClick:t}){const n=k.useRef(null),[r,i]=k.useState(!1),s=k.useCallback(()=>{const o=jU(e,Date.now().toString()),a={left:40,top:20,right:20,bottom:20},u=RE-a.bottom,l=uA-a.left-a.right,c=o.map(y=>y[0]),f=o.map(y=>y[1]),d=ub().range([0,l]),h=ub().range([u,0]),p=PKe(d).tickSize(0).tickFormat(()=>""),m=o5(h).tickSize(0),g=eU(n.current).attr("width",uA).attr("height",RE);g.selectAll("*").remove(),g.append("g").attr("transform",`translate(0, ${RE-a.bottom})`).attr("class","main axis date").call(p),g.append("g").attr("class","main axis date").call(m),d.domain([P0(c),pc(c)]).range([10,l-10]),h.domain([P0(f),pc(f)]).range([u-10,10]),g.selectAll(".dot").data(o).enter().append("circle").attr("class","dot").attr("r",2).attr("cx",y=>d(y[0])).attr("cy",y=>h(y[1])).style("fill","black")},[e]);return k.useEffect(()=>{s()},[s]),x.jsxs("svg",{className:"d3-component",width:uA,height:RE,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[x.jsx("g",{id:"d3Stuff",ref:n}),x.jsx("rect",{onClick:t,x:0,y:0,width:uA,height:RE,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const Zat=Object.freeze(Object.defineProperty({__proto__:null,default:Tw},Symbol.toStringTag,{value:"Module"}));function l3({r1:e,r2:t,onClick:n}){const r=k.useMemo(()=>Math.random()>.5,[e,t]),[i,s]=k.useState(0),o=()=>{s(u=>u+1)},a=u=>{n(u),o()};return r?x.jsxs(ro,{children:[x.jsx(Tw,{onClick:()=>a(1),r:e},i),x.jsx(Tw,{onClick:()=>a(2),r:t},i+1)]}):x.jsxs(ro,{children:[x.jsx(Tw,{onClick:()=>a(2),r:t},i),x.jsx(Tw,{onClick:()=>a(1),r:e},i+1)]})}const eut=Object.freeze(Object.defineProperty({__proto__:null,default:l3},Symbol.toStringTag,{value:"Module"})),fne=[.6,.7,.8],dne=[.3,.4,.5];function tut({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(fne[Math.floor(Math.random()*fne.length)]),[s,o]=k.useState(dne[Math.floor(Math.random()*dne.length)]),[a,u]=k.useState([]),l=k.useCallback(c=>{u([...a,{r1:r,r2:s,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?o(Math.min(s+.01,1)):i(Math.min(r-.01,1)):f?o(Math.max(s-.03,0)):i(Math.max(r+.03,0))},[t,a,r,s]);return k.useEffect(()=>{if(t===50){const c=Math.abs(r-s);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:s,observedJnd:c}})}},[t,a,r,s,e]),x.jsxs(kc,{style:{width:"100%",height:"100%"},children:[x.jsxs(nt,{children:[t,"/50"]}),x.jsx(nt,{style:{textAlign:"center"},children:"Select an option"}),x.jsx(Qa,{children:x.jsx(l3,{onClick:l,r1:r,r2:s})})]})}const nut=Object.freeze(Object.defineProperty({__proto__:null,default:tut},Symbol.toStringTag,{value:"Module"}));function rut({setAnswer:e,parameters:t}){const[n,r]=k.useState(0),[i,s]=k.useState(t.above),[o,a]=k.useState([]),[u,l]=k.useState(t.r1),[c,f]=k.useState(t.r2),d=k.useCallback(h=>{a([...o,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,o,u,c]);return k.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:o}})},[n,o]),n===50?x.jsx(nt,{children:"Completed! Great job, please continue."}):x.jsxs(kc,{style:{width:"100%",height:"100%"},children:[x.jsx(nt,{style:{textAlign:"center"},children:"Select an option"}),x.jsx(Qa,{children:x.jsx(l3,{onClick:d,r1:u,r2:c})}),x.jsx(Qa,{style:{marginTop:20},children:x.jsx("progress",{value:n,max:50})})]})}const iut=Object.freeze(Object.defineProperty({__proto__:null,default:rut},Symbol.toStringTag,{value:"Module"})),hne=[.1,.2,.3,.4,.5],g1=[.6,.7,.8,.9,1];function sut({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(g1[Math.floor(Math.random()*g1.length)]),[s,o]=k.useState(g1[Math.floor(Math.random()*g1.length)]),[a,u]=k.useState(""),l=f=>{i(f[Math.floor(Math.random()*f.length)]),o(f[Math.floor(Math.random()*f.length)])},c=k.useCallback(f=>{n(t+1),f===1&&r>s||f===2&&s>r?u("Correct"):u("Incorrect"),t<10?l(g1):l(hne)},[t,r,s]);return k.useEffect(()=>{r===s&&(t<10?l(g1):l(hne)),t===20&&(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),u("Practice Completed, please continue."))},[t]),x.jsxs(kc,{style:{width:"100%",height:"100%"},children:[x.jsxs(nt,{children:[t,"/20"]}),x.jsx(nt,{style:{textAlign:"center"},children:"Select an option"}),x.jsx(Qa,{children:x.jsx(u3,{onClick:c,r1:r,r2:s})}),x.jsx(nt,{style:{textAlign:"center"},children:a})]})}const out=Object.freeze(Object.defineProperty({__proto__:null,default:sut},Symbol.toStringTag,{value:"Module"})),pne=[.1,.2,.3,.4,.5],y1=[.6,.7,.8,.9,1];function aut({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(y1[Math.floor(Math.random()*y1.length)]),[s,o]=k.useState(y1[Math.floor(Math.random()*y1.length)]),[a,u]=k.useState(""),l=f=>{i(f[Math.floor(Math.random()*f.length)]),o(f[Math.floor(Math.random()*f.length)])},c=k.useCallback(f=>{n(t+1),f===1&&r>s||f===2&&s>r?u("Correct"):u("Incorrect"),t<10?l(y1):l(pne)},[t,r,s]);return k.useEffect(()=>{r===s&&(t<10?l(y1):l(pne)),t===20&&(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),u("Practice Completed, please continue."))},[t]),x.jsxs(kc,{style:{width:"100%",height:"100%"},children:[x.jsxs(nt,{children:[t,"/20"]}),x.jsx(nt,{style:{textAlign:"center"},children:"Select an option"}),x.jsx(Qa,{children:x.jsx(l3,{onClick:c,r1:r,r2:s})}),x.jsx(nt,{style:{textAlign:"center"},children:a})]})}const uut=Object.freeze(Object.defineProperty({__proto__:null,default:aut},Symbol.toStringTag,{value:"Module"}));function lut(){const[e,t]=k.useState("");return x.jsxs(Qa,{style:{flexDirection:"column"},children:[x.jsx(nt,{style:{textAlign:"center"},children:"Select an option"}),x.jsx(dP,{value:e,onChange:t,children:x.jsxs(Jt,{gap:"md",justify:"justify-content",direction:"row",children:[x.jsx(ph,{value:"Option 1",label:"Option 1"}),x.jsx(ph,{value:"Option 2",label:"Option 2"})]})})]})}const cut=Object.freeze(Object.defineProperty({__proto__:null,RadioOptions:lut},Symbol.toStringTag,{value:"Module"}));function fut({v:e}){const t=k.useRef(null),n=(i,s,o)=>{const a=[];for(let u=0;u<i;u++){let l="";for(let c=0;u<5+Math.random()*5;c++)l+=s*i,l+=" ",l+=o+(150-Math.random()*i),l+=" ";a.push(l)}return a},r=()=>{const o=e>0?e:0,a=50,c=n(o,.2,10),f=o,d=.1+o/200,h=-100,p=a/f,m=10+Math.random()*140,g=1e3*(Math.abs(h)/o),y=eU(t.current);y.selectAll("*").remove(),y.attr("width",300).attr("height",300).style("background-color","grey");for(let v=0;v<f;v++){const b=[],E=m+p*v,_=yU()([[0,E],[300,E]]),w=y.append("path").attr("stroke","white").attr("fill","none").attr("stroke-width",2).attr("d",_).attr("class","flowline").attr("stroke-linecap","round").attr("stroke-dasharray",c[v]).attr("stroke-dashoffset",(C,A)=>{const D=Math.random()*100;return b[A]=D,D}).attr("opacity",d),S=C=>{const A=b;C.transition().duration(g).ease(SJe).attr("stroke-dasharray",c[v]).attr("stroke-dashoffset",(D,I)=>(A[I]+=h,A[I])).attr("opacity",()=>Math.floor(Math.random()*100)%4===0?0:d).on("end",()=>{S(C)})};w.call(S)}};return k.useEffect(()=>{r()},[e]),x.jsx("svg",{className:"d3-component",width:300,height:300,ref:t})}const dut=Object.freeze(Object.defineProperty({__proto__:null,default:fut},Symbol.toStringTag,{value:"Module"})),mne=Object.assign({"../public/emma-jnd/vistaJND/src/components/vis/JNDParallel.tsx":Xat,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallelRevised.tsx":Jat,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatter.tsx":nut,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatterRevised.tsx":iut,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinates.tsx":Gat,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinatesWrapper.tsx":Yat,"../public/emma-jnd/vistaJND/src/components/vis/PracticeParallel.tsx":out,"../public/emma-jnd/vistaJND/src/components/vis/PracticeScatter.tsx":uut,"../public/emma-jnd/vistaJND/src/components/vis/RadioOptions.tsx":cut,"../public/emma-jnd/vistaJND/src/components/vis/ScatterPlots.tsx":Zat,"../public/emma-jnd/vistaJND/src/components/vis/ScatterWrapper.tsx":eut,"../public/emma-jnd/vistaJND/src/components/vis/Windflow.tsx":dut,"../public/emma-jnd/vistaJND/src/utils/dataGeneration.ts":Wat});function hut({currentConfig:e}){const t=Lh(),n=Ay(),r=`../public/${e.path}`,i=r in mne?mne[r].default:null,s=Gf(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Wf();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return x.jsx(k.Suspense,{fallback:x.jsx("div",{children:"Loading..."}),children:i?x.jsx(i,{parameters:e.parameters,setAnswer:u}):x.jsx(R0,{path:e.path})})}function put({currentConfig:e}){const[t,n]=k.useState(""),[r,i]=k.useState(!0);return k.useEffect(()=>{async function s(){const o=await Nz(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?x.jsx(la,{text:t}):x.jsx(R0,{path:e.path})}var mut=Nye;function gut(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function yut(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function vut(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function but(e){return e.__COMMENTS__}function _ut(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var c3={EOL:mut.EOL||`
`,tryParseNumber:gut,createComment:yut,removeComment:vut,getComment:but,forceComment:_ut},Eut="3.2.1";function wut(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return gne}else if(e.length===0)return gne;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Sut(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),xut.bind(null,n)}function xut(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function gne(){}function Sut(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function M1e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}M1e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function $1e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}$1e.description="parse hexadecimal numbers prefixed with 0x";function F1e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}F1e.description="support ISO dates";var zU={loadDsf:wut,std:{math:M1e,hex:$1e,date:F1e}},Tut=function(e,t){var n=c3,r=zU,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(M){return M==="{"||M==="}"||M==="["||M==="]"||M===","||M===":"}function d(M){var F,P=0,j=1;for(F=s-1;F>0&&i[F]!==`
`;F--,P++);for(;F>0;F--)i[F]===`
`&&j++;throw new Error(M+" at line "+j+","+P+" >>>"+i.substr(s-P,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(M){return i.charAt(s+M)}function m(M){for(var F="",P=o;h();){if(o===P)return h(),M&&P==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var j=0,z=0;z<4;z++){h();var V=o.charCodeAt(0),$;o>="0"&&o<="9"?$=V-48:o>="a"&&o<="f"?$=V-97+10:o>="A"&&o<="F"?$=V-65+10:d("Bad \\u char "+o),j=j*16+$}F+=String.fromCharCode(j)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var M="",F=0,P=0;;){var j=p(-P-5);if(!j||j===`
`)break;P++}function z(){for(var V=P;o&&o<=" "&&o!==`
`&&V-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return M.slice(-1)===`
`&&(M=M.slice(0,-1)),M;continue}else for(;F>0;)M+="'",F--;o===`
`?(M+=`
`,h(),z()):(o!=="\r"&&(M+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var M="",F=s,P=-1;;){if(o===":")return M?P>=0&&P!==M.length&&(s=F+P,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),M;o<=" "?o?P<0&&(P=M.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):M+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var M=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var P=M[0];switch(P){case"f":if(M.trim()==="false")return!1;break;case"n":if(M.trim()==="null")return null;break;case"t":if(M.trim()==="true")return!0;break;default:if(P==="-"||P>="0"&&P<="9"){var j=n.tryParseNumber(M);if(j!==void 0)return j}}if(F){M=M.trim();var z=l(M);return z!==void 0?z:M}}M+=o}}function E(M,F){var P;for(M--,P=s-2;P>M&&i[P]<=" "&&i[P]!==`
`;P--);i[P]===`
`&&P--,i[P]==="\r"&&P--;var j=i.substr(M,P-M+1);for(P=0;P<j.length;P++)if(j[P]>" "){var z=j.indexOf(`
`);if(z>=0){var V=[j.substr(0,z),j.substr(z+1)];return F&&V[0].trim().length===0&&V.shift(),V}else return[j]}return[]}function _(M){function F(j,z){var V,$,U,W;switch(typeof j){case"string":j.indexOf(z)>=0&&(W=j);break;case"object":if(Object.prototype.toString.apply(j)==="[object Array]")for(V=0,U=j.length;V<U;V++)W=F(j[V],z)||W;else for($ in j)Object.prototype.hasOwnProperty.call(j,$)&&(W=F(j[$],z)||W)}return W}function P(j){var z=F(M,j);return z?"found '"+j+`' in a string value, your mistake could be with:
  > `+z+`
  (unquoted strings contain everything up to the next line!)`:""}return P("}")||P("]")}function w(){var M=[],F,P,j;try{if(u&&(F=n.createComment(M,{a:[]})),h(),P=s,v(),F&&(j=E(P,!0).join(`
`)),o==="]")return h(),F&&(F.e=[j]),M;for(;o;){if(M.push(C()),P=s,v(),o===","&&(h(),P=s,v()),F){var z=E(P);F.a.push([j||"",z[0]||""]),j=z[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=j||""),M;v()}d("End of input while parsing an array (missing ']')")}catch(V){throw V.hint=V.hint||_(M),V}}function S(M){var F="",P={},j,z,V;try{if(u&&(j=n.createComment(P,{c:{},o:[]})),M?z=1:(h(),z=s),v(),j&&(V=E(z,!0).join(`
`)),o==="}"&&!M)return j&&(j.e=[V]),h(),P;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),P[F]=C(),z=s,v(),o===","&&(h(),z=s,v()),j){var $=E(z);j.c[F]=[V||"",$[0]||""],V=$[1],j.o.push(F)}if(o==="}"&&!M)return h(),j&&(j.c[F][1]+=V||""),P;v()}if(M)return P;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||_(P),U}}function C(){switch(v(),o){case"{":return S();case"[":return w();case"'":case'"':return m(!0);default:return b()}}function A(M,F){var P=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var j=F.join(`
`),z=E(P).join(`
`);if(z||j){var V=n.createComment(M,n.getComment(M));V.r=[j,z]}}return M}function D(){v();var M=u?E(1):null;switch(o){case"{":return A(S(),M);case"[":return A(w(),M);default:return A(C(),M)}}function I(){v();var M=u?E(1):null;switch(o){case"{":return A(S(),M);case"[":return A(w(),M)}try{return A(S(!0),M)}catch(F){c();try{return A(C(),M)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,R=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,R=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),R?I():D()},Cut=function(e,t){var n=c3,r=zU,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var E,_="---\u2028--\uFEFF-",w=new RegExp('[\\\\\\"\0-'+_+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+_+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+_+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),D={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},I=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",R=0;function M(W,B){return R+=W[0].length+W[1].length-W[2]-W[3],W[0]+B+W[1]}function F(W){return W.replace(w,function(B){var q=D[B];return typeof q=="string"?M(g.esc,q):M(g.uni,("0000"+B.charCodeAt(0).toString(16)).slice(-4))})}function P(W,B,q,Y){return W?(S.lastIndex=0,A.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(w.lastIndex=0,C.lastIndex=0,w.test(W)?!C.test(W)&&!Y&&d?j(W,B):M(g.qstr,F(W)):M(g.qstr,W)):M(g.str,W)):M(g.qstr,"")}function j(W,B){var q,Y=W.replace(/\r/g,"").split(`
`);if(B+=o,Y.length===1)return M(g.mstr,Y[0]);var re=s+B+g.mstr[0];for(q=0;q<Y.length;q++)re+=s,Y[q]&&(re+=B+Y[q]);return re+s+B+g.mstr[1]}function z(W){return W?l||I.test(W)?(w.lastIndex=0,M(g.qkey,w.test(W)?F(W):W)):M(g.key,W):'""'}function V(W,B,q,Y){function re(Dt){return Dt&&Dt[Dt[0]==="\r"?1:0]===`
`}function pe(Dt){return Dt&&!re(Dt)}function _e(Dt,Vt,Zt){if(!Dt)return"";Dt=n.forceComment(Dt);var an,gr=Dt.length;for(an=0;an<gr&&Dt[an]<=" ";an++);return Zt&&an>0&&(Dt=Dt.substr(an)),an<gr?Vt+M(g.rem,Dt):Dt}var de=E(W);if(de!==void 0)return M(g.dsf,de);switch(typeof W){case"string":return P(W,O,B,Y);case"number":return isFinite(W)?M(g.num,String(W)):M(g.lit,"null");case"boolean":return M(g.lit,String(W));case"object":if(!W)return M(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ce=Object.prototype.toString.apply(W)==="[object Array]",ve=O;O+=o;var qe=s+ve,He=s+O,ht=q||u?"":qe,rt=[],Pe,Be=f?[]:null,Xe=c,mt=d,Ft=h?"":g.com[0],bt=0,G,ie,me,J,se,ce,Se,Te,Ge;if(Ce){for(G=0,ie=W.length;G<ie;G++){if(Pe=G<ie-1,ye?(ce=ye.a[G]||[],Se=pe(ce[1]),rt.push(_e(ce[0],`
`)+He),Be&&(ce[0]||ce[1]||Se)&&(Be=null)):rt.push(He),R=0,J=W[G],rt.push(V(J,ye?Se:!1,!0)+(Pe?h:"")),Be){switch(typeof J){case"string":R=0,c=!0,d=0,Be.push(V(J,!1,!0)+(Pe?g.com[0]:"")),c=Xe,d=mt;break;case"object":if(J){Be=null;break}default:Be.push(rt[rt.length-1]+(Pe?Ft:""));break}Pe&&(R+=g.com[0].length-g.com[2]),bt+=R}ye&&ce[1]&&rt.push(_e(ce[1],Se?" ":`
`,Se))}ie===0?ye&&ye.e&&rt.push(_e(ye.e[0],`
`)+qe):rt.push(qe),rt.length===0?Te=M(g.arr,""):(Te=ht+M(g.arr,rt.join("")),Be&&(Ge=Be.join(" "),Ge.length-bt<=f&&(Te=M(g.arr,Ge))))}else{var je=ye?ye.o.slice():[],Ct=[];for(me in W)Object.prototype.hasOwnProperty.call(W,me)&&je.indexOf(me)<0&&Ct.push(me);m&&Ct.sort();var Ot=je.concat(Ct);for(G=0,ie=Ot.length;G<ie;G++)if(Pe=G<ie-1,me=Ot[G],ye?(ce=ye.c[me]||[],Se=pe(ce[1]),rt.push(_e(ce[0],`
`)+He),Be&&(ce[0]||ce[1]||Se)&&(Be=null)):rt.push(He),R=0,J=W[me],se=V(J,ye&&Se),rt.push(z(me)+g.col[0]+(re(se)?"":" ")+se+(Pe?h:"")),ye&&ce[1]&&rt.push(_e(ce[1],Se?" ":`
`,Se)),Be){switch(typeof J){case"string":R=0,c=!0,d=0,se=V(J,!1),c=Xe,d=mt,Be.push(z(me)+g.col[0]+" "+se+(Pe?g.com[0]:""));break;case"object":if(J){Be=null;break}default:Be.push(rt[rt.length-1]+(Pe?Ft:""));break}R+=g.col[0].length-g.col[2],Pe&&(R+=g.com[0].length-g.com[2]),bt+=R}ie===0?ye&&ye.e&&rt.push(_e(ye.e[0],`
`)+qe):rt.push(qe),rt.length===0?Te=M(g.obj,""):(Te=ht+M(g.obj,rt.join("")),Be&&(Ge=Be.join(" "),Ge.length-bt<=f&&(Te=M(g.obj,Ge))))}return O=ve,Te}}E=r.loadDsf(p,"stringify");var $="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&($=U[0]+`
`),$+=V(e,null,!0,!0),U&&($+=U[1]||""),$},Iv=c3;function gx(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function V5(e,t){if(!(e===null||typeof e!="object")){var n=Iv.getComment(e);n&&Iv.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)yne(o.a,r,n.a[r],V5(e[r]))&&(s=!0);!s&&n.e&&(o.e=gx(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];yne(o.s,l,n.c[l],V5(e[l]))&&(s=!0)}!s&&n.e&&(o.e=gx(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=gx(n.r[0],n.r[1])),s?o:void 0}}function Aut(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Dut(e,t){var n=[];if(H5(e,t,n,[]),n.length>0){var r=ZN(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Aut(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),ZN(t,r,1)}}function yne(e,t,n,r){var i=gx(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function yx(e,t){var n=gx(t.b,t.a);return n.path=e,n}function vx(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(yx(s,o)),vx(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(yx(u,l)),vx(l.x,t,u))});e.e&&t.push(yx(n,e.e))}}function H5(e,t,n,r){if(e){if(t===null||typeof t!="object"){vx(e,n,r);return}var i,s=Iv.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],H5(u.x,t[i],n,l)):(n.push(yx(l,u)),vx(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],H5(d.x,t[c],n,f))):d&&(n.push(yx(f,d)),vx(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function ZN(e,t,n){var r=Iv.createComment(e,Iv.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Iv.forceComment(t)),r.r[n]||""}var Iut={extract:function(e){return V5(e,!0)},merge:Dut,header:function(e,t){return ZN(e,t,0)},footer:function(e,t){return ZN(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var vne=c3,Nut=Eut,bne=Tut,_ne=Cut,kut=Iut,Rut=zU,UU={parse:bne,stringify:_ne,endOfLine:function(){return vne.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(vne.EOL=e)},version:Nut,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,bne(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,_ne(e,t)}},comments:kut,dsf:Rut.std},q5={exports:{}},L1e={},yc={},xb={},QT={},An={},kS={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,E)=>`${b}${E}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,E)=>(E instanceof n&&(b[E.str]=(b[E.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let E=0;for(;E<v.length;)a(b,v[E]),b.push(y[++E]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let E=0;for(;E<v.length;)b.push(s),a(b,v[E]),b.push(s,h(y[++E]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(kS);var W5={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=kS;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(W5);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=kS,n=W5;var r=kS;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=W5;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,Y){return this}}class o extends s{constructor(q,Y,re){super(),this.varKind=q,this.name=Y,this.rhs=re}render({es5:q,_n:Y}){const re=q?n.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${re} ${this.name}${pe};`+Y}optimizeNames(q,Y){if(q[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,q,Y)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,Y,re){super(),this.lhs=q,this.rhs=Y,this.sideEffects=re}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,Y){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=M(this.rhs,q,Y),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return R(q,this.rhs)}}class u extends a{constructor(q,Y,re,pe){super(q,re,pe),this.op=Y}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,Y){return this.code=M(this.code,q,Y),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((Y,re)=>Y+re.render(q),"")}optimizeNodes(){const{nodes:q}=this;let Y=q.length;for(;Y--;){const re=q[Y].optimizeNodes();Array.isArray(re)?q.splice(Y,1,...re):re?q[Y]=re:q.splice(Y,1)}return q.length>0?this:void 0}optimizeNames(q,Y){const{nodes:re}=this;let pe=re.length;for(;pe--;){const _e=re[pe];_e.optimizeNames(q,Y)||(F(q,_e.names),re.splice(pe,1))}return re.length>0?this:void 0}get names(){return this.nodes.reduce((q,Y)=>O(q,Y.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,Y){super(Y),this.condition=q}render(q){let Y=`if(${this.condition})`+super.render(q);return this.else&&(Y+="else "+this.else.render(q)),Y}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let Y=this.else;if(Y){const re=Y.optimizeNodes();Y=this.else=Array.isArray(re)?new g(re):re}if(Y)return q===!1?Y instanceof y?Y:Y.nodes:this.nodes.length?this:new y(P(q),Y instanceof y?[Y]:Y.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,Y){var re;if(this.else=(re=this.else)===null||re===void 0?void 0:re.optimizeNames(q,Y),!!(super.optimizeNames(q,Y)||this.else))return this.condition=M(this.condition,q,Y),this}get names(){const q=super.names;return R(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,Y){if(super.optimizeNames(q,Y))return this.iteration=M(this.iteration,q,Y),this}get names(){return O(super.names,this.iteration.names)}}class E extends v{constructor(q,Y,re,pe){super(),this.varKind=q,this.name=Y,this.from=re,this.to=pe}render(q){const Y=q.es5?n.varKinds.var:this.varKind,{name:re,from:pe,to:_e}=this;return`for(${Y} ${re}=${pe}; ${re}<${_e}; ${re}++)`+super.render(q)}get names(){const q=R(super.names,this.from);return R(q,this.to)}}class _ extends v{constructor(q,Y,re,pe){super(),this.loop=q,this.varKind=Y,this.name=re,this.iterable=pe}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,Y){if(super.optimizeNames(q,Y))return this.iterable=M(this.iterable,q,Y),this}get names(){return O(super.names,this.iterable.names)}}class w extends p{constructor(q,Y,re){super(),this.name=q,this.args=Y,this.async=re}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}w.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class C extends p{render(q){let Y="try"+super.render(q);return this.catch&&(Y+=this.catch.render(q)),this.finally&&(Y+=this.finally.render(q)),Y}optimizeNodes(){var q,Y;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(Y=this.finally)===null||Y===void 0||Y.optimizeNodes(),this}optimizeNames(q,Y){var re,pe;return super.optimizeNames(q,Y),(re=this.catch)===null||re===void 0||re.optimizeNames(q,Y),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(q,Y),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class D extends p{render(q){return"finally"+super.render(q)}}D.kind="finally";class I{constructor(q,Y={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Y,_n:Y.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,Y){const re=this._extScope.value(q,Y);return(this._values[re.prefix]||(this._values[re.prefix]=new Set)).add(re),re}getScopeValue(q,Y){return this._extScope.getValue(q,Y)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,Y,re,pe){const _e=this._scope.toName(Y);return re!==void 0&&pe&&(this._constants[_e.str]=re),this._leafNode(new o(q,_e,re)),_e}const(q,Y,re){return this._def(n.varKinds.const,q,Y,re)}let(q,Y,re){return this._def(n.varKinds.let,q,Y,re)}var(q,Y,re){return this._def(n.varKinds.var,q,Y,re)}assign(q,Y,re){return this._leafNode(new a(q,Y,re))}add(q,Y){return this._leafNode(new u(q,e.operators.ADD,Y))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const Y=["{"];for(const[re,pe]of q)Y.length>1&&Y.push(","),Y.push(re),(re!==pe||this.opts.es5)&&(Y.push(":"),(0,t.addCodeArg)(Y,pe));return Y.push("}"),new t._Code(Y)}if(q,Y,re){if(this._blockNode(new y(q)),Y&&re)this.code(Y).else().code(re).endIf();else if(Y)this.code(Y).endIf();else if(re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,Y){return this._blockNode(q),Y&&this.code(Y).endFor(),this}for(q,Y){return this._for(new b(q),Y)}forRange(q,Y,re,pe,_e=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(q);return this._for(new E(_e,de,Y,re),()=>pe(de))}forOf(q,Y,re,pe=n.varKinds.const){const _e=this._scope.toName(q);if(this.opts.es5){const de=Y instanceof t.Name?Y:this.var("_arr",Y);return this.forRange("_i",0,(0,t._)`${de}.length`,ye=>{this.var(_e,(0,t._)`${de}[${ye}]`),re(_e)})}return this._for(new _("of",pe,_e,Y),()=>re(_e))}forIn(q,Y,re,pe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${Y})`,re);const _e=this._scope.toName(q);return this._for(new _("in",pe,_e,Y),()=>re(_e))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const Y=new S;if(this._blockNode(Y),this.code(q),Y.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,Y,re){if(!Y&&!re)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new C;if(this._blockNode(pe),this.code(q),Y){const _e=this.name("e");this._currNode=pe.catch=new A(_e),Y(_e)}return re&&(this._currNode=pe.finally=new D,this.code(re)),this._endBlockNode(A,D)}throw(q){return this._leafNode(new f(q))}block(q,Y){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(Y),this}endBlock(q){const Y=this._blockStarts.pop();if(Y===void 0)throw new Error("CodeGen: not in self-balancing block");const re=this._nodes.length-Y;if(re<0||q!==void 0&&re!==q)throw new Error(`CodeGen: wrong number of nodes: ${re} vs ${q} expected`);return this._nodes.length=Y,this}func(q,Y=t.nil,re,pe){return this._blockNode(new w(q,Y,re)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,Y){const re=this._currNode;if(re instanceof q||Y&&re instanceof Y)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Y?`${q.kind}/${Y.kind}`:q.kind}"`)}_elseNode(q){const Y=this._currNode;if(!(Y instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Y.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const Y=this._nodes;Y[Y.length-1]=q}}e.CodeGen=I;function O(B,q){for(const Y in q)B[Y]=(B[Y]||0)+(q[Y]||0);return B}function R(B,q){return q instanceof t._CodeOrName?O(B,q.names):B}function M(B,q,Y){if(B instanceof t.Name)return re(B);if(!pe(B))return B;return new t._Code(B._items.reduce((_e,de)=>(de instanceof t.Name&&(de=re(de)),de instanceof t._Code?_e.push(...de._items):_e.push(de),_e),[]));function re(_e){const de=Y[_e.str];return de===void 0||q[_e.str]!==1?_e:(delete q[_e.str],de)}function pe(_e){return _e instanceof t._Code&&_e._items.some(de=>de instanceof t.Name&&q[de.str]===1&&Y[de.str]!==void 0)}}function F(B,q){for(const Y in q)B[Y]=(B[Y]||0)-(q[Y]||0)}function P(B){return typeof B=="boolean"||typeof B=="number"||B===null?!B:(0,t._)`!${W(B)}`}e.not=P;const j=U(e.operators.AND);function z(...B){return B.reduce(j)}e.and=z;const V=U(e.operators.OR);function $(...B){return B.reduce(V)}e.or=$;function U(B){return(q,Y)=>q===t.nil?Y:Y===t.nil?q:(0,t._)`${W(q)} ${B} ${W(Y)}`}function W(B){return B instanceof t.Name?B:(0,t._)`(${B})`}})(An);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Cr=An,Put=kS;function Out(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=Out;function Mut(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(B1e(e,t),!j1e(t,e.self.RULES.all))}wt.alwaysValidSchema=Mut;function B1e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||V1e(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=B1e;function j1e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=j1e;function $ut(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=$ut;function Fut({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Cr._)`${n}`}return(0,Cr._)`${e}${t}${(0,Cr.getProperty)(r)}`}wt.schemaRefOrVal=Fut;function Lut(e){return z1e(decodeURIComponent(e))}wt.unescapeFragment=Lut;function But(e){return encodeURIComponent(VU(e))}wt.escapeFragment=But;function VU(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=VU;function z1e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=z1e;function jut(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=jut;function Ene({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Cr.Name?(s instanceof Cr.Name?e(i,s,o):t(i,s,o),o):s instanceof Cr.Name?(t(i,o,s),s):n(s,o);return a===Cr.Name&&!(u instanceof Cr.Name)?r(i,u):u}}wt.mergeEvaluated={props:Ene({mergeNames:(e,t,n)=>e.if((0,Cr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Cr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Cr._)`${n} || {}`).code((0,Cr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Cr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Cr._)`${n} || {}`),HU(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:U1e}),items:Ene({mergeNames:(e,t,n)=>e.if((0,Cr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Cr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Cr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Cr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function U1e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Cr._)`{}`);return t!==void 0&&HU(e,n,t),n}wt.evaluatedPropsToName=U1e;function HU(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Cr._)`${t}${(0,Cr.getProperty)(r)}`,!0))}wt.setEvaluated=HU;const wne={};function zut(e,t){return e.scopeValue("func",{ref:t,code:wne[t.code]||(wne[t.code]=new Put._Code(t.code))})}wt.useFunc=zut;var G5;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(G5||(wt.Type=G5={}));function Uut(e,t,n){if(e instanceof Cr.Name){const r=t===G5.Num;return n?r?(0,Cr._)`"[" + ${e} + "]"`:(0,Cr._)`"['" + ${e} + "']"`:r?(0,Cr._)`"/" + ${e}`:(0,Cr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Cr.getProperty)(e).toString():"/"+VU(e)}wt.getErrorPath=Uut;function V1e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=V1e;var Zf={};Object.defineProperty(Zf,"__esModule",{value:!0});const vo=An,Vut={data:new vo.Name("data"),valCxt:new vo.Name("valCxt"),instancePath:new vo.Name("instancePath"),parentData:new vo.Name("parentData"),parentDataProperty:new vo.Name("parentDataProperty"),rootData:new vo.Name("rootData"),dynamicAnchors:new vo.Name("dynamicAnchors"),vErrors:new vo.Name("vErrors"),errors:new vo.Name("errors"),this:new vo.Name("this"),self:new vo.Name("self"),scope:new vo.Name("scope"),json:new vo.Name("json"),jsonPos:new vo.Name("jsonPos"),jsonLen:new vo.Name("jsonLen"),jsonPart:new vo.Name("jsonPart")};Zf.default=Vut;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=An,n=wt,r=Zf;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:E}=g,{gen:_,compositeRule:w,allErrors:S}=E,C=f(g,y,v);b??(w||S)?u(_,C):l(E,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:E,compositeRule:_,allErrors:w}=b,S=f(g,y,v);u(E,S),_||w||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:E,it:_}){if(E===void 0)throw new Error("ajv implementation error");const w=g.name("err");g.forRange("i",E,r.default.errors,S=>{g.const(w,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${w}.instancePath === undefined`,()=>g.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,_.errorPath))),g.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${_.errSchemaPath}/${y}`),_.opts.verbose&&(g.assign((0,t._)`${w}.schema`,v),g.assign((0,t._)`${w}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:E}=g;E.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:E}=g,_=[h(E,v),p(g,v)];return m(g,y,_),b.object(..._)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let E=b?y:(0,t.str)`${y}/${g}`;return v&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,E]}function m(g,{params:y,message:v},b){const{keyword:E,data:_,schemaValue:w,it:S}=g,{opts:C,propertyName:A,topSchemaRef:D,schemaPath:I}=S;b.push([c.keyword,E],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,w],[c.parentSchema,(0,t._)`${D}${I}`],[r.default.data,_]),A&&b.push([c.propertyName,A])}})(QT);Object.defineProperty(xb,"__esModule",{value:!0});xb.boolOrEmptySchema=xb.topBoolOrEmptySchema=void 0;const Hut=QT,qut=An,Wut=Zf,Gut={message:"boolean schema is false"};function Yut(e){const{gen:t,schema:n,validateName:r}=e;n===!1?H1e(e,!1):typeof n=="object"&&n.$async===!0?t.return(Wut.default.data):(t.assign((0,qut._)`${r}.errors`,null),t.return(!0))}xb.topBoolOrEmptySchema=Yut;function Kut(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),H1e(e)):n.var(t,!0)}xb.boolOrEmptySchema=Kut;function H1e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Hut.reportError)(i,Gut,void 0,t)}var ts={},j0={};Object.defineProperty(j0,"__esModule",{value:!0});j0.getRules=j0.isJSONType=void 0;const Xut=["string","number","integer","boolean","null","object","array"],Qut=new Set(Xut);function Jut(e){return typeof e=="string"&&Qut.has(e)}j0.isJSONType=Jut;function Zut(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}j0.getRules=Zut;var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.shouldUseRule=Zd.shouldUseGroup=Zd.schemaHasRulesForType=void 0;function elt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&q1e(e,r)}Zd.schemaHasRulesForType=elt;function q1e(e,t){return t.rules.some(n=>W1e(e,n))}Zd.shouldUseGroup=q1e;function W1e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Zd.shouldUseRule=W1e;Object.defineProperty(ts,"__esModule",{value:!0});ts.reportTypeError=ts.checkDataTypes=ts.checkDataType=ts.coerceAndCheckDataType=ts.getJSONTypes=ts.getSchemaTypes=ts.DataType=void 0;const tlt=j0,nlt=Zd,rlt=QT,vn=An,G1e=wt;var Nv;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Nv||(ts.DataType=Nv={}));function ilt(e){const t=Y1e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ts.getSchemaTypes=ilt;function Y1e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(tlt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ts.getJSONTypes=Y1e;function slt(e,t){const{gen:n,data:r,opts:i}=e,s=olt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,nlt.schemaHasRulesForType)(e,t[0]));if(o){const a=qU(t,r,i.strictNumbers,Nv.Wrong);n.if(a,()=>{s.length?alt(e,t,s):WU(e)})}return o}ts.coerceAndCheckDataType=slt;const K1e=new Set(["string","number","integer","boolean","null"]);function olt(e,t){return t?e.filter(n=>K1e.has(n)||t==="array"&&n==="array"):[]}function alt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,vn._)`typeof ${i}`),a=r.let("coerced",(0,vn._)`undefined`);s.coerceTypes==="array"&&r.if((0,vn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,vn._)`${i}[0]`).assign(o,(0,vn._)`typeof ${i}`).if(qU(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,vn._)`${a} !== undefined`);for(const l of n)(K1e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),WU(e),r.endIf(),r.if((0,vn._)`${a} !== undefined`,()=>{r.assign(i,a),ult(e,a)});function u(l){switch(l){case"string":r.elseIf((0,vn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,vn._)`"" + ${i}`).elseIf((0,vn._)`${i} === null`).assign(a,(0,vn._)`""`);return;case"number":r.elseIf((0,vn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,vn._)`+${i}`);return;case"integer":r.elseIf((0,vn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,vn._)`+${i}`);return;case"boolean":r.elseIf((0,vn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,vn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,vn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,vn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,vn._)`[${i}]`)}}}function ult({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,vn._)`${t} !== undefined`,()=>e.assign((0,vn._)`${t}[${n}]`,r))}function Y5(e,t,n,r=Nv.Correct){const i=r===Nv.Correct?vn.operators.EQ:vn.operators.NEQ;let s;switch(e){case"null":return(0,vn._)`${t} ${i} null`;case"array":s=(0,vn._)`Array.isArray(${t})`;break;case"object":s=(0,vn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,vn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,vn._)`typeof ${t} ${i} ${e}`}return r===Nv.Correct?s:(0,vn.not)(s);function o(a=vn.nil){return(0,vn.and)((0,vn._)`typeof ${t} == "number"`,a,n?(0,vn._)`isFinite(${t})`:vn.nil)}}ts.checkDataType=Y5;function qU(e,t,n,r){if(e.length===1)return Y5(e[0],t,n,r);let i;const s=(0,G1e.toHash)(e);if(s.array&&s.object){const o=(0,vn._)`typeof ${t} != "object"`;i=s.null?o:(0,vn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=vn.nil;s.number&&delete s.integer;for(const o in s)i=(0,vn.and)(i,Y5(o,t,n,r));return i}ts.checkDataTypes=qU;const llt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,vn._)`{type: ${e}}`:(0,vn._)`{type: ${t}}`};function WU(e){const t=clt(e);(0,rlt.reportError)(t,llt)}ts.reportTypeError=WU;function clt(e){const{gen:t,data:n,schema:r}=e,i=(0,G1e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var f3={};Object.defineProperty(f3,"__esModule",{value:!0});f3.assignDefaults=void 0;const v1=An,flt=wt;function dlt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)xne(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>xne(e,s,i.default))}f3.assignDefaults=dlt;function xne(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,v1._)`${s}${(0,v1.getProperty)(t)}`;if(i){(0,flt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,v1._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,v1._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,v1._)`${a} = ${(0,v1.stringify)(n)}`)}var df={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const jr=An,GU=wt,Zh=Zf,hlt=wt;function plt(e,t){const{gen:n,data:r,it:i}=e;n.if(KU(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,jr._)`${t}`},!0),e.error()})}Tn.checkReportMissingProp=plt;function mlt({gen:e,data:t,it:{opts:n}},r,i){return(0,jr.or)(...r.map(s=>(0,jr.and)(KU(e,t,s,n.ownProperties),(0,jr._)`${i} = ${s}`)))}Tn.checkMissingProp=mlt;function glt(e,t){e.setParams({missingProperty:t},!0),e.error()}Tn.reportMissingProp=glt;function X1e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,jr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=X1e;function YU(e,t,n){return(0,jr._)`${X1e(e)}.call(${t}, ${n})`}Tn.isOwnProperty=YU;function ylt(e,t,n,r){const i=(0,jr._)`${t}${(0,jr.getProperty)(n)} !== undefined`;return r?(0,jr._)`${i} && ${YU(e,t,n)}`:i}Tn.propertyInData=ylt;function KU(e,t,n,r){const i=(0,jr._)`${t}${(0,jr.getProperty)(n)} === undefined`;return r?(0,jr.or)(i,(0,jr.not)(YU(e,t,n))):i}Tn.noPropertyInData=KU;function Q1e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tn.allSchemaProperties=Q1e;function vlt(e,t){return Q1e(t).filter(n=>!(0,GU.alwaysValidSchema)(e,t[n]))}Tn.schemaProperties=vlt;function blt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,jr._)`${e}, ${t}, ${r}${i}`:t,f=[[Zh.default.instancePath,(0,jr.strConcat)(Zh.default.instancePath,s)],[Zh.default.parentData,o.parentData],[Zh.default.parentDataProperty,o.parentDataProperty],[Zh.default.rootData,Zh.default.rootData]];o.opts.dynamicRef&&f.push([Zh.default.dynamicAnchors,Zh.default.dynamicAnchors]);const d=(0,jr._)`${c}, ${n.object(...f)}`;return u!==jr.nil?(0,jr._)`${a}.call(${u}, ${d})`:(0,jr._)`${a}(${d})`}Tn.callValidateCode=blt;const _lt=(0,jr._)`new RegExp`;function Elt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,jr._)`${i.code==="new RegExp"?_lt:(0,hlt.useFunc)(e,i)}(${n}, ${r})`})}Tn.usePattern=Elt;function wlt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,jr._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:GU.Type.Num},s),t.if((0,jr.not)(s),a)})}}Tn.validateArray=wlt;function xlt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,GU.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,jr._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,jr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tn.validateUnion=xlt;Object.defineProperty(df,"__esModule",{value:!0});df.validateKeywordUsage=df.validSchemaType=df.funcKeywordCode=df.macroKeywordCode=void 0;const Qo=An,Ug=Zf,Slt=Tn,Tlt=QT;function Clt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=J1e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Qo.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}df.macroKeywordCode=Clt;function Alt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;Ilt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=J1e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Sne(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Sne(e),g(()=>Dlt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Qo._)`await `),v=>r.assign(f,!1).if((0,Qo._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Qo._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Qo._)`${c}.errors`;return r.assign(y,null),m(Qo.nil),y}function m(y=t.async?(0,Qo._)`await `:Qo.nil){const v=u.opts.passContext?Ug.default.this:Ug.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Qo._)`${y}${(0,Slt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Qo.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}df.funcKeywordCode=Alt;function Sne(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Qo._)`${r.parentData}[${r.parentDataProperty}]`))}function Dlt(e,t){const{gen:n}=e;n.if((0,Qo._)`Array.isArray(${t})`,()=>{n.assign(Ug.default.vErrors,(0,Qo._)`${Ug.default.vErrors} === null ? ${t} : ${Ug.default.vErrors}.concat(${t})`).assign(Ug.default.errors,(0,Qo._)`${Ug.default.vErrors}.length`),(0,Tlt.extendErrors)(e)},()=>e.error())}function Ilt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function J1e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Qo.stringify)(n)})}function Nlt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}df.validSchemaType=Nlt;function klt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}df.validateKeywordUsage=klt;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.extendSubschemaMode=Qp.extendSubschemaData=Qp.getSubschema=void 0;const uf=An,Z1e=wt;function Rlt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,uf._)`${e.schemaPath}${(0,uf.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,uf._)`${e.schemaPath}${(0,uf.getProperty)(t)}${(0,uf.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Z1e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Qp.getSubschema=Rlt;function Plt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,uf._)`${t.data}${(0,uf.getProperty)(n)}`,!0);u(d),e.errorPath=(0,uf.str)`${l}${(0,Z1e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,uf._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof uf.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Qp.extendSubschemaData=Plt;function Olt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Qp.extendSubschemaMode=Olt;var Ws={},eve={exports:{}},Np=eve.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};AD(t,r,i,e,"",e)};Np.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Np.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Np.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Np.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function AD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Np.arrayKeywords)for(var d=0;d<f.length;d++)AD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Np.propsKeywords){if(f&&typeof f=="object")for(var h in f)AD(e,t,n,f[h],i+"/"+c+"/"+Mlt(h),s,i,c,r,h)}else(c in Np.keywords||e.allKeys&&!(c in Np.skipKeywords))&&AD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function Mlt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var $lt=eve.exports;Object.defineProperty(Ws,"__esModule",{value:!0});Ws.getSchemaRefs=Ws.resolveUrl=Ws.normalizeId=Ws._getFullPath=Ws.getFullPath=Ws.inlineRef=void 0;const Flt=wt,Llt=Iz,Blt=$lt,jlt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function zlt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!K5(e):t?tve(e)<=t:!1}Ws.inlineRef=zlt;const Ult=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function K5(e){for(const t in e){if(Ult.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(K5)||typeof n=="object"&&K5(n))return!0}return!1}function tve(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!jlt.has(n)&&(typeof e[n]=="object"&&(0,Flt.eachItem)(e[n],r=>t+=tve(r)),t===1/0))return 1/0}return t}function nve(e,t="",n){n!==!1&&(t=kv(t));const r=e.parse(t);return rve(e,r)}Ws.getFullPath=nve;function rve(e,t){return e.serialize(t).split("#")[0]+"#"}Ws._getFullPath=rve;const Vlt=/#\/?$/;function kv(e){return e?e.replace(Vlt,""):""}Ws.normalizeId=kv;function Hlt(e,t,n){return n=kv(n),e.resolve(t,n)}Ws.resolveUrl=Hlt;const qlt=/^[a-z_][-a-z0-9._]*$/i;function Wlt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=kv(e[n]||t),s={"":i},o=nve(r,i,!1),a={},u=new Set;return Blt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const E=this.opts.uriResolver.resolve;if(b=kv(g?E(g,b):b),u.has(b))throw c(b);u.add(b);let _=this.refs[b];return typeof _=="string"&&(_=this.refs[_]),typeof _=="object"?l(f,_.schema,b):b!==kv(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!qlt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!Llt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ws.getSchemaRefs=Wlt;Object.defineProperty(yc,"__esModule",{value:!0});yc.getData=yc.KeywordCxt=yc.validateFunctionCode=void 0;const ive=xb,Tne=ts,XU=Zd,ek=ts,Glt=f3,bx=df,FF=Qp,$t=An,nn=Zf,Ylt=Ws,eh=wt,PE=QT;function Klt(e){if(ave(e)&&(uve(e),ove(e))){Jlt(e);return}sve(e,()=>(0,ive.topBoolOrEmptySchema)(e))}yc.validateFunctionCode=Klt;function sve({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,$t._)`${nn.default.data}, ${nn.default.valCxt}`,r.$async,()=>{e.code((0,$t._)`"use strict"; ${Cne(n,i)}`),Qlt(e,i),e.code(s)}):e.func(t,(0,$t._)`${nn.default.data}, ${Xlt(i)}`,r.$async,()=>e.code(Cne(n,i)).code(s))}function Xlt(e){return(0,$t._)`{${nn.default.instancePath}="", ${nn.default.parentData}, ${nn.default.parentDataProperty}, ${nn.default.rootData}=${nn.default.data}${e.dynamicRef?(0,$t._)`, ${nn.default.dynamicAnchors}={}`:$t.nil}}={}`}function Qlt(e,t){e.if(nn.default.valCxt,()=>{e.var(nn.default.instancePath,(0,$t._)`${nn.default.valCxt}.${nn.default.instancePath}`),e.var(nn.default.parentData,(0,$t._)`${nn.default.valCxt}.${nn.default.parentData}`),e.var(nn.default.parentDataProperty,(0,$t._)`${nn.default.valCxt}.${nn.default.parentDataProperty}`),e.var(nn.default.rootData,(0,$t._)`${nn.default.valCxt}.${nn.default.rootData}`),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,$t._)`${nn.default.valCxt}.${nn.default.dynamicAnchors}`)},()=>{e.var(nn.default.instancePath,(0,$t._)`""`),e.var(nn.default.parentData,(0,$t._)`undefined`),e.var(nn.default.parentDataProperty,(0,$t._)`undefined`),e.var(nn.default.rootData,nn.default.data),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,$t._)`{}`)})}function Jlt(e){const{schema:t,opts:n,gen:r}=e;sve(e,()=>{n.$comment&&t.$comment&&cve(e),rct(e),r.let(nn.default.vErrors,null),r.let(nn.default.errors,0),n.unevaluated&&Zlt(e),lve(e),oct(e)})}function Zlt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,$t._)`${n}.evaluated`),t.if((0,$t._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,$t._)`${e.evaluated}.props`,(0,$t._)`undefined`)),t.if((0,$t._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,$t._)`${e.evaluated}.items`,(0,$t._)`undefined`))}function Cne(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,$t._)`/*# sourceURL=${n} */`:$t.nil}function ect(e,t){if(ave(e)&&(uve(e),ove(e))){tct(e,t);return}(0,ive.boolOrEmptySchema)(e,t)}function ove({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function ave(e){return typeof e.schema!="boolean"}function tct(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&cve(e),ict(e),sct(e);const s=r.const("_errs",nn.default.errors);lve(e,s),r.var(t,(0,$t._)`${s} === ${nn.default.errors}`)}function uve(e){(0,eh.checkUnknownRules)(e),nct(e)}function lve(e,t){if(e.opts.jtd)return Ane(e,[],!1,t);const n=(0,Tne.getSchemaTypes)(e.schema),r=(0,Tne.coerceAndCheckDataType)(e,n);Ane(e,n,!r,t)}function nct(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,eh.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function rct(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,eh.checkStrictMode)(e,"default is ignored in the schema root")}function ict(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Ylt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function sct(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function cve({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,$t._)`${nn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,$t.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,$t._)`${nn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function oct(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,$t._)`${nn.default.errors} === 0`,()=>t.return(nn.default.data),()=>t.throw((0,$t._)`new ${i}(${nn.default.vErrors})`)):(t.assign((0,$t._)`${r}.errors`,nn.default.vErrors),s.unevaluated&&act(e),t.return((0,$t._)`${nn.default.errors} === 0`))}function act({gen:e,evaluated:t,props:n,items:r}){n instanceof $t.Name&&e.assign((0,$t._)`${t}.props`,n),r instanceof $t.Name&&e.assign((0,$t._)`${t}.items`,r)}function Ane(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,eh.schemaHasRulesButRef)(s,c))){i.block(()=>hve(e,"$ref",c.all.$ref.definition));return}u.jtd||uct(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,XU.shouldUseGroup)(s,d)&&(d.type?(i.if((0,ek.checkDataType)(d.type,o,u.strictNumbers)),Dne(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,ek.reportTypeError)(e)),i.endIf()):Dne(e,d),a||i.if((0,$t._)`${nn.default.errors} === ${r||0}`))}}function Dne(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,Glt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,XU.shouldUseRule)(r,s)&&hve(e,s.keyword,s.definition,t.type)})}function uct(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(lct(e,t),e.opts.allowUnionTypes||cct(e,t),fct(e,e.dataTypes))}function lct(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{fve(e.dataTypes,n)||QU(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),hct(e,t)}}function cct(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&QU(e,"use allowUnionTypes to allow union type keyword")}function fct(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,XU.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>dct(t,o))&&QU(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function dct(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function fve(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function hct(e,t){const n=[];for(const r of e.dataTypes)fve(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function QU(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,eh.checkStrictMode)(e,t,e.opts.strictTypes)}class dve{constructor(t,n,r){if((0,bx.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,eh.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",pve(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,bx.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",nn.default.errors))}result(t,n,r){this.failResult((0,$t.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,$t.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,$t._)`${n} !== undefined && (${(0,$t.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?PE.reportExtraError:PE.reportError)(this,this.def.error,n)}$dataError(){(0,PE.reportError)(this,this.def.$dataError||PE.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,PE.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=$t.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=$t.nil,n=$t.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,$t.or)((0,$t._)`${i} === undefined`,n)),t!==$t.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==$t.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,$t.or)(o(),a());function o(){if(r.length){if(!(n instanceof $t.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,$t._)`${(0,ek.checkDataTypes)(u,n,s.opts.strictNumbers,ek.DataType.Wrong)}`}return $t.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,$t._)`!${u}(${n})`}return $t.nil}}subschema(t,n){const r=(0,FF.getSubschema)(this.it,t);(0,FF.extendSubschemaData)(r,this.it,t),(0,FF.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return ect(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=eh.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=eh.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,$t.Name)),!0}}yc.KeywordCxt=dve;function hve(e,t,n,r){const i=new dve(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,bx.funcKeywordCode)(i,n):"macro"in n?(0,bx.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,bx.funcKeywordCode)(i,n)}const pct=/^\/(?:[^~]|~0|~1)*$/,mct=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function pve(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return nn.default.rootData;if(e[0]==="/"){if(!pct.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=nn.default.rootData}else{const l=mct.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,$t._)`${s}${(0,$t.getProperty)((0,eh.unescapeJsonPointer)(l))}`,o=(0,$t._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}yc.getData=pve;var JT={};Object.defineProperty(JT,"__esModule",{value:!0});class gct extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}JT.default=gct;var I_={};Object.defineProperty(I_,"__esModule",{value:!0});const LF=Ws;class yct extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,LF.resolveUrl)(t,n,r),this.missingSchema=(0,LF.normalizeId)((0,LF.getFullPath)(t,this.missingRef))}}I_.default=yct;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.resolveSchema=Pa.getCompilingSchema=Pa.resolveRef=Pa.compileSchema=Pa.SchemaEnv=void 0;const Bl=An,vct=JT,bg=Zf,nc=Ws,Ine=wt,bct=yc;class d3{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,nc.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Pa.SchemaEnv=d3;function JU(e){const t=mve.call(this,e);if(t)return t;const n=(0,nc.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Bl.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:vct.default,code:(0,Bl._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:bg.default.data,parentData:bg.default.parentData,parentDataProperty:bg.default.parentDataProperty,dataNames:[bg.default.data],dataPathArr:[Bl.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Bl.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Bl.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Bl._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,bct.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(bg.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${bg.default.self}`,`${bg.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Bl.Name?void 0:p,items:m instanceof Bl.Name?void 0:m,dynamicProps:p instanceof Bl.Name,dynamicItems:m instanceof Bl.Name},h.source&&(h.source.evaluated=(0,Bl.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Pa.compileSchema=JU;function _ct(e,t,n){var r;n=(0,nc.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=xct.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new d3({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Ect.call(this,s)}Pa.resolveRef=_ct;function Ect(e){return(0,nc.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:JU.call(this,e)}function mve(e){for(const t of this._compilations)if(wct(t,e))return t}Pa.getCompilingSchema=mve;function wct(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function xct(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||h3.call(this,e,t)}function h3(e,t){const n=this.opts.uriResolver.parse(t),r=(0,nc._getFullPath)(this.opts.uriResolver,n);let i=(0,nc.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return BF.call(this,n,e);const s=(0,nc.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=h3.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:BF.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||JU.call(this,o),s===(0,nc.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,nc.resolveUrl)(this.opts.uriResolver,i,l)),new d3({schema:a,schemaId:u,root:e,baseId:i})}return BF.call(this,n,o)}}Pa.resolveSchema=h3;const Sct=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function BF(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Ine.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!Sct.has(a)&&l&&(t=(0,nc.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Ine.schemaHasRulesButRef)(n,this.RULES)){const a=(0,nc.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=h3.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new d3({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Tct="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Cct="Meta-schema for $data reference (JSON AnySchema extension proposal)",Act="object",Dct=["$data"],Ict={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Nct=!1,kct={$id:Tct,description:Cct,type:Act,required:Dct,properties:Ict,additionalProperties:Nct};var ZU={},X5={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Hr,function(n){function r(){for(var ue=arguments.length,te=Array(ue),le=0;le<ue;le++)te[le]=arguments[le];if(te.length>1){te[0]=te[0].slice(0,-1);for(var De=te.length-1,Ae=1;Ae<De;++Ae)te[Ae]=te[Ae].slice(1,-1);return te[De]=te[De].slice(1),te.join("")}else return te[0]}function i(ue){return"(?:"+ue+")"}function s(ue){return ue===void 0?"undefined":ue===null?"null":Object.prototype.toString.call(ue).split(" ").pop().split("]").shift().toLowerCase()}function o(ue){return ue.toUpperCase()}function a(ue){return ue!=null?ue instanceof Array?ue:typeof ue.length!="number"||ue.split||ue.setInterval||ue.call?[ue]:Array.prototype.slice.call(ue):[]}function u(ue,te){var le=ue;if(te)for(var De in te)le[De]=te[De];return le}function l(ue){var te="[A-Za-z]",le="[0-9]",De=r(le,"[A-Fa-f]"),Ae=i(i("%[EFef]"+De+"%"+De+De+"%"+De+De)+"|"+i("%[89A-Fa-f]"+De+"%"+De+De)+"|"+i("%"+De+De)),at="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Xt=r(at,St),_n=ue?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Sn=ue?"[\\uE000-\\uF8FF]":"[]",un=r(te,le,"[\\-\\.\\_\\~]",_n);i(te+r(te,le,"[\\+\\-\\.]")+"*"),i(i(Ae+"|"+r(un,St,"[\\:]"))+"*");var Mn=i(i("25[0-5]")+"|"+i("2[0-4]"+le)+"|"+i("1"+le+le)+"|"+i("0?[1-9]"+le)+"|0?0?"+le),tr=i(Mn+"\\."+Mn+"\\."+Mn+"\\."+Mn),Ht=i(De+"{1,4}"),$n=i(i(Ht+"\\:"+Ht)+"|"+tr),cr=i(i(Ht+"\\:")+"{6}"+$n),bn=i("\\:\\:"+i(Ht+"\\:")+"{5}"+$n),Gt=i(i(Ht)+"?\\:\\:"+i(Ht+"\\:")+"{4}"+$n),Hn=i(i(i(Ht+"\\:")+"{0,1}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{3}"+$n),vr=i(i(i(Ht+"\\:")+"{0,2}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{2}"+$n),yi=i(i(i(Ht+"\\:")+"{0,3}"+Ht)+"?\\:\\:"+Ht+"\\:"+$n),br=i(i(i(Ht+"\\:")+"{0,4}"+Ht)+"?\\:\\:"+$n),Qr=i(i(i(Ht+"\\:")+"{0,5}"+Ht)+"?\\:\\:"+Ht),uo=i(i(i(Ht+"\\:")+"{0,6}"+Ht)+"?\\:\\:"),Ho=i([cr,bn,Gt,Hn,vr,yi,br,Qr,uo].join("|")),ps=i(i(un+"|"+Ae)+"+");i("[vV]"+De+"+\\."+r(un,St,"[\\:]")+"+"),i(i(Ae+"|"+r(un,St))+"*");var qu=i(Ae+"|"+r(un,St,"[\\:\\@]"));return i(i(Ae+"|"+r(un,St,"[\\@]"))+"+"),i(i(qu+"|"+r("[\\/\\?]",Sn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",te,le,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",un,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",un,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",un,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",un,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",un,St,"[\\:\\@\\/\\?]",Sn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",un,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",un,St),"g"),UNRESERVED:new RegExp(un,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",un,Xt),"g"),PCT_ENCODED:new RegExp(Ae,"g"),IPV4ADDRESS:new RegExp("^("+tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ho+")"+i(i("\\%25|\\%(?!"+De+"{2})")+"("+ps+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ue(te,le){var De=[],Ae=!0,at=!1,St=void 0;try{for(var Xt=te[Symbol.iterator](),_n;!(Ae=(_n=Xt.next()).done)&&(De.push(_n.value),!(le&&De.length===le));Ae=!0);}catch(Sn){at=!0,St=Sn}finally{try{!Ae&&Xt.return&&Xt.return()}finally{if(at)throw St}}return De}return function(te,le){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return ue(te,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ue){if(Array.isArray(ue)){for(var te=0,le=Array(ue.length);te<ue.length;te++)le[te]=ue[te];return le}else return Array.from(ue)},p=2147483647,m=36,g=1,y=26,v=38,b=700,E=72,_=128,w="-",S=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=m-g,O=Math.floor,R=String.fromCharCode;function M(ue){throw new RangeError(D[ue])}function F(ue,te){for(var le=[],De=ue.length;De--;)le[De]=te(ue[De]);return le}function P(ue,te){var le=ue.split("@"),De="";le.length>1&&(De=le[0]+"@",ue=le[1]),ue=ue.replace(A,".");var Ae=ue.split("."),at=F(Ae,te).join(".");return De+at}function j(ue){for(var te=[],le=0,De=ue.length;le<De;){var Ae=ue.charCodeAt(le++);if(Ae>=55296&&Ae<=56319&&le<De){var at=ue.charCodeAt(le++);(at&64512)==56320?te.push(((Ae&1023)<<10)+(at&1023)+65536):(te.push(Ae),le--)}else te.push(Ae)}return te}var z=function(te){return String.fromCodePoint.apply(String,h(te))},V=function(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:m},$=function(te,le){return te+22+75*(te<26)-((le!=0)<<5)},U=function(te,le,De){var Ae=0;for(te=De?O(te/b):te>>1,te+=O(te/le);te>I*y>>1;Ae+=m)te=O(te/I);return O(Ae+(I+1)*te/(te+v))},W=function(te){var le=[],De=te.length,Ae=0,at=_,St=E,Xt=te.lastIndexOf(w);Xt<0&&(Xt=0);for(var _n=0;_n<Xt;++_n)te.charCodeAt(_n)>=128&&M("not-basic"),le.push(te.charCodeAt(_n));for(var Sn=Xt>0?Xt+1:0;Sn<De;){for(var un=Ae,Mn=1,tr=m;;tr+=m){Sn>=De&&M("invalid-input");var Ht=V(te.charCodeAt(Sn++));(Ht>=m||Ht>O((p-Ae)/Mn))&&M("overflow"),Ae+=Ht*Mn;var $n=tr<=St?g:tr>=St+y?y:tr-St;if(Ht<$n)break;var cr=m-$n;Mn>O(p/cr)&&M("overflow"),Mn*=cr}var bn=le.length+1;St=U(Ae-un,bn,un==0),O(Ae/bn)>p-at&&M("overflow"),at+=O(Ae/bn),Ae%=bn,le.splice(Ae++,0,at)}return String.fromCodePoint.apply(String,le)},B=function(te){var le=[];te=j(te);var De=te.length,Ae=_,at=0,St=E,Xt=!0,_n=!1,Sn=void 0;try{for(var un=te[Symbol.iterator](),Mn;!(Xt=(Mn=un.next()).done);Xt=!0){var tr=Mn.value;tr<128&&le.push(R(tr))}}catch($e){_n=!0,Sn=$e}finally{try{!Xt&&un.return&&un.return()}finally{if(_n)throw Sn}}var Ht=le.length,$n=Ht;for(Ht&&le.push(w);$n<De;){var cr=p,bn=!0,Gt=!1,Hn=void 0;try{for(var vr=te[Symbol.iterator](),yi;!(bn=(yi=vr.next()).done);bn=!0){var br=yi.value;br>=Ae&&br<cr&&(cr=br)}}catch($e){Gt=!0,Hn=$e}finally{try{!bn&&vr.return&&vr.return()}finally{if(Gt)throw Hn}}var Qr=$n+1;cr-Ae>O((p-at)/Qr)&&M("overflow"),at+=(cr-Ae)*Qr,Ae=cr;var uo=!0,Ho=!1,ps=void 0;try{for(var qu=te[Symbol.iterator](),Uc;!(uo=(Uc=qu.next()).done);uo=!0){var K=Uc.value;if(K<Ae&&++at>p&&M("overflow"),K==Ae){for(var ae=at,ee=m;;ee+=m){var ge=ee<=St?g:ee>=St+y?y:ee-St;if(ae<ge)break;var be=ae-ge,he=m-ge;le.push(R($(ge+be%he,0))),ae=O(be/he)}le.push(R($(ae,0))),St=U(at,Qr,$n==Ht),at=0,++$n}}}catch($e){Ho=!0,ps=$e}finally{try{!uo&&qu.return&&qu.return()}finally{if(Ho)throw ps}}++at,++Ae}return le.join("")},q=function(te){return P(te,function(le){return S.test(le)?W(le.slice(4).toLowerCase()):le})},Y=function(te){return P(te,function(le){return C.test(le)?"xn--"+B(le):le})},re={version:"2.1.0",ucs2:{decode:j,encode:z},decode:W,encode:B,toASCII:Y,toUnicode:q},pe={};function _e(ue){var te=ue.charCodeAt(0),le=void 0;return te<16?le="%0"+te.toString(16).toUpperCase():te<128?le="%"+te.toString(16).toUpperCase():te<2048?le="%"+(te>>6|192).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase():le="%"+(te>>12|224).toString(16).toUpperCase()+"%"+(te>>6&63|128).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase(),le}function de(ue){for(var te="",le=0,De=ue.length;le<De;){var Ae=parseInt(ue.substr(le+1,2),16);if(Ae<128)te+=String.fromCharCode(Ae),le+=3;else if(Ae>=194&&Ae<224){if(De-le>=6){var at=parseInt(ue.substr(le+4,2),16);te+=String.fromCharCode((Ae&31)<<6|at&63)}else te+=ue.substr(le,6);le+=6}else if(Ae>=224){if(De-le>=9){var St=parseInt(ue.substr(le+4,2),16),Xt=parseInt(ue.substr(le+7,2),16);te+=String.fromCharCode((Ae&15)<<12|(St&63)<<6|Xt&63)}else te+=ue.substr(le,9);le+=9}else te+=ue.substr(le,3),le+=3}return te}function ye(ue,te){function le(De){var Ae=de(De);return Ae.match(te.UNRESERVED)?Ae:De}return ue.scheme&&(ue.scheme=String(ue.scheme).replace(te.PCT_ENCODED,le).toLowerCase().replace(te.NOT_SCHEME,"")),ue.userinfo!==void 0&&(ue.userinfo=String(ue.userinfo).replace(te.PCT_ENCODED,le).replace(te.NOT_USERINFO,_e).replace(te.PCT_ENCODED,o)),ue.host!==void 0&&(ue.host=String(ue.host).replace(te.PCT_ENCODED,le).toLowerCase().replace(te.NOT_HOST,_e).replace(te.PCT_ENCODED,o)),ue.path!==void 0&&(ue.path=String(ue.path).replace(te.PCT_ENCODED,le).replace(ue.scheme?te.NOT_PATH:te.NOT_PATH_NOSCHEME,_e).replace(te.PCT_ENCODED,o)),ue.query!==void 0&&(ue.query=String(ue.query).replace(te.PCT_ENCODED,le).replace(te.NOT_QUERY,_e).replace(te.PCT_ENCODED,o)),ue.fragment!==void 0&&(ue.fragment=String(ue.fragment).replace(te.PCT_ENCODED,le).replace(te.NOT_FRAGMENT,_e).replace(te.PCT_ENCODED,o)),ue}function Ce(ue){return ue.replace(/^0*(.*)/,"$1")||"0"}function ve(ue,te){var le=ue.match(te.IPV4ADDRESS)||[],De=d(le,2),Ae=De[1];return Ae?Ae.split(".").map(Ce).join("."):ue}function qe(ue,te){var le=ue.match(te.IPV6ADDRESS)||[],De=d(le,3),Ae=De[1],at=De[2];if(Ae){for(var St=Ae.toLowerCase().split("::").reverse(),Xt=d(St,2),_n=Xt[0],Sn=Xt[1],un=Sn?Sn.split(":").map(Ce):[],Mn=_n.split(":").map(Ce),tr=te.IPV4ADDRESS.test(Mn[Mn.length-1]),Ht=tr?7:8,$n=Mn.length-Ht,cr=Array(Ht),bn=0;bn<Ht;++bn)cr[bn]=un[bn]||Mn[$n+bn]||"";tr&&(cr[Ht-1]=ve(cr[Ht-1],te));var Gt=cr.reduce(function(Qr,uo,Ho){if(!uo||uo==="0"){var ps=Qr[Qr.length-1];ps&&ps.index+ps.length===Ho?ps.length++:Qr.push({index:Ho,length:1})}return Qr},[]),Hn=Gt.sort(function(Qr,uo){return uo.length-Qr.length})[0],vr=void 0;if(Hn&&Hn.length>1){var yi=cr.slice(0,Hn.index),br=cr.slice(Hn.index+Hn.length);vr=yi.join(":")+"::"+br.join(":")}else vr=cr.join(":");return at&&(vr+="%"+at),vr}else return ue}var He=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ht="".match(/(){0}/)[1]===void 0;function rt(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le={},De=te.iri!==!1?f:c;te.reference==="suffix"&&(ue=(te.scheme?te.scheme+":":"")+"//"+ue);var Ae=ue.match(He);if(Ae){ht?(le.scheme=Ae[1],le.userinfo=Ae[3],le.host=Ae[4],le.port=parseInt(Ae[5],10),le.path=Ae[6]||"",le.query=Ae[7],le.fragment=Ae[8],isNaN(le.port)&&(le.port=Ae[5])):(le.scheme=Ae[1]||void 0,le.userinfo=ue.indexOf("@")!==-1?Ae[3]:void 0,le.host=ue.indexOf("//")!==-1?Ae[4]:void 0,le.port=parseInt(Ae[5],10),le.path=Ae[6]||"",le.query=ue.indexOf("?")!==-1?Ae[7]:void 0,le.fragment=ue.indexOf("#")!==-1?Ae[8]:void 0,isNaN(le.port)&&(le.port=ue.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ae[4]:void 0)),le.host&&(le.host=qe(ve(le.host,De),De)),le.scheme===void 0&&le.userinfo===void 0&&le.host===void 0&&le.port===void 0&&!le.path&&le.query===void 0?le.reference="same-document":le.scheme===void 0?le.reference="relative":le.fragment===void 0?le.reference="absolute":le.reference="uri",te.reference&&te.reference!=="suffix"&&te.reference!==le.reference&&(le.error=le.error||"URI is not a "+te.reference+" reference.");var at=pe[(te.scheme||le.scheme||"").toLowerCase()];if(!te.unicodeSupport&&(!at||!at.unicodeSupport)){if(le.host&&(te.domainHost||at&&at.domainHost))try{le.host=re.toASCII(le.host.replace(De.PCT_ENCODED,de).toLowerCase())}catch(St){le.error=le.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(le,c)}else ye(le,De);at&&at.parse&&at.parse(le,te)}else le.error=le.error||"URI can not be parsed.";return le}function Pe(ue,te){var le=te.iri!==!1?f:c,De=[];return ue.userinfo!==void 0&&(De.push(ue.userinfo),De.push("@")),ue.host!==void 0&&De.push(qe(ve(String(ue.host),le),le).replace(le.IPV6ADDRESS,function(Ae,at,St){return"["+at+(St?"%25"+St:"")+"]"})),(typeof ue.port=="number"||typeof ue.port=="string")&&(De.push(":"),De.push(String(ue.port))),De.length?De.join(""):void 0}var Be=/^\.\.?\//,Xe=/^\/\.(\/|$)/,mt=/^\/\.\.(\/|$)/,Ft=/^\/?(?:.|\n)*?(?=\/|$)/;function bt(ue){for(var te=[];ue.length;)if(ue.match(Be))ue=ue.replace(Be,"");else if(ue.match(Xe))ue=ue.replace(Xe,"/");else if(ue.match(mt))ue=ue.replace(mt,"/"),te.pop();else if(ue==="."||ue==="..")ue="";else{var le=ue.match(Ft);if(le){var De=le[0];ue=ue.slice(De.length),te.push(De)}else throw new Error("Unexpected dot segment condition")}return te.join("")}function G(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=te.iri?f:c,De=[],Ae=pe[(te.scheme||ue.scheme||"").toLowerCase()];if(Ae&&Ae.serialize&&Ae.serialize(ue,te),ue.host&&!le.IPV6ADDRESS.test(ue.host)){if(te.domainHost||Ae&&Ae.domainHost)try{ue.host=te.iri?re.toUnicode(ue.host):re.toASCII(ue.host.replace(le.PCT_ENCODED,de).toLowerCase())}catch(Xt){ue.error=ue.error||"Host's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+Xt}}ye(ue,le),te.reference!=="suffix"&&ue.scheme&&(De.push(ue.scheme),De.push(":"));var at=Pe(ue,te);if(at!==void 0&&(te.reference!=="suffix"&&De.push("//"),De.push(at),ue.path&&ue.path.charAt(0)!=="/"&&De.push("/")),ue.path!==void 0){var St=ue.path;!te.absolutePath&&(!Ae||!Ae.absolutePath)&&(St=bt(St)),at===void 0&&(St=St.replace(/^\/\//,"/%2F")),De.push(St)}return ue.query!==void 0&&(De.push("?"),De.push(ue.query)),ue.fragment!==void 0&&(De.push("#"),De.push(ue.fragment)),De.join("")}function ie(ue,te){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},De=arguments[3],Ae={};return De||(ue=rt(G(ue,le),le),te=rt(G(te,le),le)),le=le||{},!le.tolerant&&te.scheme?(Ae.scheme=te.scheme,Ae.userinfo=te.userinfo,Ae.host=te.host,Ae.port=te.port,Ae.path=bt(te.path||""),Ae.query=te.query):(te.userinfo!==void 0||te.host!==void 0||te.port!==void 0?(Ae.userinfo=te.userinfo,Ae.host=te.host,Ae.port=te.port,Ae.path=bt(te.path||""),Ae.query=te.query):(te.path?(te.path.charAt(0)==="/"?Ae.path=bt(te.path):((ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0)&&!ue.path?Ae.path="/"+te.path:ue.path?Ae.path=ue.path.slice(0,ue.path.lastIndexOf("/")+1)+te.path:Ae.path=te.path,Ae.path=bt(Ae.path)),Ae.query=te.query):(Ae.path=ue.path,te.query!==void 0?Ae.query=te.query:Ae.query=ue.query),Ae.userinfo=ue.userinfo,Ae.host=ue.host,Ae.port=ue.port),Ae.scheme=ue.scheme),Ae.fragment=te.fragment,Ae}function me(ue,te,le){var De=u({scheme:"null"},le);return G(ie(rt(ue,De),rt(te,De),De,!0),De)}function J(ue,te){return typeof ue=="string"?ue=G(rt(ue,te),te):s(ue)==="object"&&(ue=rt(G(ue,te),te)),ue}function se(ue,te,le){return typeof ue=="string"?ue=G(rt(ue,le),le):s(ue)==="object"&&(ue=G(ue,le)),typeof te=="string"?te=G(rt(te,le),le):s(te)==="object"&&(te=G(te,le)),ue===te}function ce(ue,te){return ue&&ue.toString().replace(!te||!te.iri?c.ESCAPE:f.ESCAPE,_e)}function Se(ue,te){return ue&&ue.toString().replace(!te||!te.iri?c.PCT_ENCODED:f.PCT_ENCODED,de)}var Te={scheme:"http",domainHost:!0,parse:function(te,le){return te.host||(te.error=te.error||"HTTP URIs must have a host."),te},serialize:function(te,le){var De=String(te.scheme).toLowerCase()==="https";return(te.port===(De?443:80)||te.port==="")&&(te.port=void 0),te.path||(te.path="/"),te}},Ge={scheme:"https",domainHost:Te.domainHost,parse:Te.parse,serialize:Te.serialize};function je(ue){return typeof ue.secure=="boolean"?ue.secure:String(ue.scheme).toLowerCase()==="wss"}var Ct={scheme:"ws",domainHost:!0,parse:function(te,le){var De=te;return De.secure=je(De),De.resourceName=(De.path||"/")+(De.query?"?"+De.query:""),De.path=void 0,De.query=void 0,De},serialize:function(te,le){if((te.port===(je(te)?443:80)||te.port==="")&&(te.port=void 0),typeof te.secure=="boolean"&&(te.scheme=te.secure?"wss":"ws",te.secure=void 0),te.resourceName){var De=te.resourceName.split("?"),Ae=d(De,2),at=Ae[0],St=Ae[1];te.path=at&&at!=="/"?at:void 0,te.query=St,te.resourceName=void 0}return te.fragment=void 0,te}},Ot={scheme:"wss",domainHost:Ct.domainHost,parse:Ct.parse,serialize:Ct.serialize},Dt={},Vt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Zt="[0-9A-Fa-f]",an=i(i("%[EFef]"+Zt+"%"+Zt+Zt+"%"+Zt+Zt)+"|"+i("%[89A-Fa-f]"+Zt+"%"+Zt+Zt)+"|"+i("%"+Zt+Zt)),gr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",lr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",fn=r(lr,'[\\"\\\\]'),Xr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",er=new RegExp(Vt,"g"),gi=new RegExp(an,"g"),$l=new RegExp(r("[^]",gr,"[\\.]",'[\\"]',fn),"g"),Vo=new RegExp(r("[^]",Vt,Xr),"g"),Hu=Vo;function Yn(ue){var te=de(ue);return te.match(er)?te:ue}var Lr={scheme:"mailto",parse:function(te,le){var De=te,Ae=De.to=De.path?De.path.split(","):[];if(De.path=void 0,De.query){for(var at=!1,St={},Xt=De.query.split("&"),_n=0,Sn=Xt.length;_n<Sn;++_n){var un=Xt[_n].split("=");switch(un[0]){case"to":for(var Mn=un[1].split(","),tr=0,Ht=Mn.length;tr<Ht;++tr)Ae.push(Mn[tr]);break;case"subject":De.subject=Se(un[1],le);break;case"body":De.body=Se(un[1],le);break;default:at=!0,St[Se(un[0],le)]=Se(un[1],le);break}}at&&(De.headers=St)}De.query=void 0;for(var $n=0,cr=Ae.length;$n<cr;++$n){var bn=Ae[$n].split("@");if(bn[0]=Se(bn[0]),le.unicodeSupport)bn[1]=Se(bn[1],le).toLowerCase();else try{bn[1]=re.toASCII(Se(bn[1],le).toLowerCase())}catch(Gt){De.error=De.error||"Email address's domain name can not be converted to ASCII via punycode: "+Gt}Ae[$n]=bn.join("@")}return De},serialize:function(te,le){var De=te,Ae=a(te.to);if(Ae){for(var at=0,St=Ae.length;at<St;++at){var Xt=String(Ae[at]),_n=Xt.lastIndexOf("@"),Sn=Xt.slice(0,_n).replace(gi,Yn).replace(gi,o).replace($l,_e),un=Xt.slice(_n+1);try{un=le.iri?re.toUnicode(un):re.toASCII(Se(un,le).toLowerCase())}catch($n){De.error=De.error||"Email address's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+$n}Ae[at]=Sn+"@"+un}De.path=Ae.join(",")}var Mn=te.headers=te.headers||{};te.subject&&(Mn.subject=te.subject),te.body&&(Mn.body=te.body);var tr=[];for(var Ht in Mn)Mn[Ht]!==Dt[Ht]&&tr.push(Ht.replace(gi,Yn).replace(gi,o).replace(Vo,_e)+"="+Mn[Ht].replace(gi,Yn).replace(gi,o).replace(Hu,_e));return tr.length&&(De.query=tr.join("&")),De}},yr=/^([^\:]+)\:(.*)/,ao={scheme:"urn",parse:function(te,le){var De=te.path&&te.path.match(yr),Ae=te;if(De){var at=le.scheme||Ae.scheme||"urn",St=De[1].toLowerCase(),Xt=De[2],_n=at+":"+(le.nid||St),Sn=pe[_n];Ae.nid=St,Ae.nss=Xt,Ae.path=void 0,Sn&&(Ae=Sn.parse(Ae,le))}else Ae.error=Ae.error||"URN can not be parsed.";return Ae},serialize:function(te,le){var De=le.scheme||te.scheme||"urn",Ae=te.nid,at=De+":"+(le.nid||Ae),St=pe[at];St&&(te=St.serialize(te,le));var Xt=te,_n=te.nss;return Xt.path=(Ae||le.nid)+":"+_n,Xt}},Ms=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,$s={scheme:"urn:uuid",parse:function(te,le){var De=te;return De.uuid=De.nss,De.nss=void 0,!le.tolerant&&(!De.uuid||!De.uuid.match(Ms))&&(De.error=De.error||"UUID is not valid."),De},serialize:function(te,le){var De=te;return De.nss=(te.uuid||"").toLowerCase(),De}};pe[Te.scheme]=Te,pe[Ge.scheme]=Ge,pe[Ct.scheme]=Ct,pe[Ot.scheme]=Ot,pe[Lr.scheme]=Lr,pe[ao.scheme]=ao,pe[$s.scheme]=$s,n.SCHEMES=pe,n.pctEncChar=_e,n.pctDecChars=de,n.parse=rt,n.removeDotSegments=bt,n.serialize=G,n.resolveComponents=ie,n.resolve=me,n.normalize=J,n.equal=se,n.escapeComponent=ce,n.unescapeComponent=Se,Object.defineProperty(n,"__esModule",{value:!0})})})(X5,X5.exports);var Rct=X5.exports;Object.defineProperty(ZU,"__esModule",{value:!0});const gve=Rct;gve.code='require("ajv/dist/runtime/uri").default';ZU.default=gve;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=yc;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=An;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=JT,i=I_,s=j0,o=Pa,a=An,u=Ws,l=ts,c=wt,f=kct,d=ZU,h=($,U)=>new RegExp($,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b($){var U,W,B,q,Y,re,pe,_e,de,ye,Ce,ve,qe,He,ht,rt,Pe,Be,Xe,mt,Ft,bt,G,ie,me;const J=$.strict,se=(U=$.code)===null||U===void 0?void 0:U.optimize,ce=se===!0||se===void 0?1:se||0,Se=(B=(W=$.code)===null||W===void 0?void 0:W.regExp)!==null&&B!==void 0?B:h,Te=(q=$.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(re=(Y=$.strictSchema)!==null&&Y!==void 0?Y:J)!==null&&re!==void 0?re:!0,strictNumbers:(_e=(pe=$.strictNumbers)!==null&&pe!==void 0?pe:J)!==null&&_e!==void 0?_e:!0,strictTypes:(ye=(de=$.strictTypes)!==null&&de!==void 0?de:J)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ce=$.strictTuples)!==null&&Ce!==void 0?Ce:J)!==null&&ve!==void 0?ve:"log",strictRequired:(He=(qe=$.strictRequired)!==null&&qe!==void 0?qe:J)!==null&&He!==void 0?He:!1,code:$.code?{...$.code,optimize:ce,regExp:Se}:{optimize:ce,regExp:Se},loopRequired:(ht=$.loopRequired)!==null&&ht!==void 0?ht:v,loopEnum:(rt=$.loopEnum)!==null&&rt!==void 0?rt:v,meta:(Pe=$.meta)!==null&&Pe!==void 0?Pe:!0,messages:(Be=$.messages)!==null&&Be!==void 0?Be:!0,inlineRefs:(Xe=$.inlineRefs)!==null&&Xe!==void 0?Xe:!0,schemaId:(mt=$.schemaId)!==null&&mt!==void 0?mt:"$id",addUsedSchema:(Ft=$.addUsedSchema)!==null&&Ft!==void 0?Ft:!0,validateSchema:(bt=$.validateSchema)!==null&&bt!==void 0?bt:!0,validateFormats:(G=$.validateFormats)!==null&&G!==void 0?G:!0,unicodeRegExp:(ie=$.unicodeRegExp)!==null&&ie!==void 0?ie:!0,int32range:(me=$.int32range)!==null&&me!==void 0?me:!0,uriResolver:Te}}class E{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...b(U)};const{es5:W,lines:B}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:B}),this.logger=O(U.logger);const q=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),_.call(this,g,U,"NOT SUPPORTED"),_.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=D.call(this),U.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&A.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),S.call(this),U.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:B}=this.opts;let q=f;B==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&U&&this.addMetaSchema(q,q[B],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let B;if(typeof U=="string"){if(B=this.getSchema(U),!B)throw new Error(`no schema with key or ref "${U}"`)}else B=this.compile(U);const q=B(W);return"$async"in B||(this.errors=B.errors),q}compile(U,W){const B=this._addSchema(U,W);return B.validate||this._compileSchemaEnv(B)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:B}=this.opts;return q.call(this,U,W);async function q(ye,Ce){await Y.call(this,ye.$schema);const ve=this._addSchema(ye,Ce);return ve.validate||re.call(this,ve)}async function Y(ye){ye&&!this.getSchema(ye)&&await q.call(this,{$ref:ye},!0)}async function re(ye){try{return this._compileSchemaEnv(ye)}catch(Ce){if(!(Ce instanceof i.default))throw Ce;return pe.call(this,Ce),await _e.call(this,Ce.missingSchema),re.call(this,ye)}}function pe({missingSchema:ye,missingRef:Ce}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ce} cannot be resolved`)}async function _e(ye){const Ce=await de.call(this,ye);this.refs[ye]||await Y.call(this,Ce.$schema),this.refs[ye]||this.addSchema(Ce,ye,W)}async function de(ye){const Ce=this._loading[ye];if(Ce)return Ce;try{return await(this._loading[ye]=B(ye))}finally{delete this._loading[ye]}}}addSchema(U,W,B,q=this.opts.validateSchema){if(Array.isArray(U)){for(const re of U)this.addSchema(re,void 0,B,q);return this}let Y;if(typeof U=="object"){const{schemaId:re}=this.opts;if(Y=U[re],Y!==void 0&&typeof Y!="string")throw new Error(`schema ${re} must be string`)}return W=(0,u.normalizeId)(W||Y),this._checkUnique(W),this.schemas[W]=this._addSchema(U,B,W,q,!0),this}addMetaSchema(U,W,B=this.opts.validateSchema){return this.addSchema(U,W,!0,B),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let B;if(B=U.$schema,B!==void 0&&typeof B!="string")throw new Error("$schema must be a string");if(B=B||this.opts.defaultMeta||this.defaultMeta(),!B)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(B,U);if(!q&&W){const Y="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Y);else throw new Error(Y)}return q}getSchema(U){let W;for(;typeof(W=w.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:B}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:B});if(W=o.resolveSchema.call(this,q,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=w.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let B=U[this.opts.schemaId];return B&&(B=(0,u.normalizeId)(B),delete this.schemas[B],delete this.refs[B]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let B;if(typeof U=="string")B=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=B);else if(typeof U=="object"&&W===void 0){if(W=U,B=W.keyword,Array.isArray(B)&&!B.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(M.call(this,B,W),!W)return(0,c.eachItem)(B,Y=>F.call(this,Y)),this;j.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(B,q.type.length===0?Y=>F.call(this,Y,q):Y=>q.type.forEach(re=>F.call(this,Y,q,re))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const B of W.rules){const q=B.rules.findIndex(Y=>Y.keyword===U);q>=0&&B.rules.splice(q,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:B="data"}={}){return!U||U.length===0?"No errors":U.map(q=>`${B}${q.instancePath} ${q.message}`).reduce((q,Y)=>q+W+Y)}$dataMetaSchema(U,W){const B=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const q of W){const Y=q.split("/").slice(1);let re=U;for(const pe of Y)re=re[pe];for(const pe in B){const _e=B[pe];if(typeof _e!="object")continue;const{$data:de}=_e.definition,ye=re[pe];de&&ye&&(re[pe]=V(ye))}}return U}_removeAllSchemas(U,W){for(const B in U){const q=U[B];(!W||W.test(B))&&(typeof q=="string"?delete U[B]:q&&!q.meta&&(this._cache.delete(q.schema),delete U[B]))}}_addSchema(U,W,B,q=this.opts.validateSchema,Y=this.opts.addUsedSchema){let re;const{schemaId:pe}=this.opts;if(typeof U=="object")re=U[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let _e=this._cache.get(U);if(_e!==void 0)return _e;B=(0,u.normalizeId)(re||B);const de=u.getSchemaRefs.call(this,U,B);return _e=new o.SchemaEnv({schema:U,schemaId:pe,meta:W,baseId:B,localRefs:de}),this._cache.set(_e.schema,_e),Y&&!B.startsWith("#")&&(B&&this._checkUnique(B),this.refs[B]=_e),q&&this.validateSchema(U,!0),_e}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function _($,U,W,B="error"){for(const q in $){const Y=q;Y in U&&this.logger[B](`${W}: option ${q}. ${$[Y]}`)}}function w($){return $=(0,u.normalizeId)($),this.schemas[$]||this.refs[$]}function S(){const $=this.opts.schemas;if($)if(Array.isArray($))this.addSchema($);else for(const U in $)this.addSchema($[U],U)}function C(){for(const $ in this.opts.formats){const U=this.opts.formats[$];U&&this.addFormat($,U)}}function A($){if(Array.isArray($)){this.addVocabulary($);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in $){const W=$[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function D(){const $={...this.opts};for(const U of p)delete $[U];return $}const I={log(){},warn(){},error(){}};function O($){if($===!1)return I;if($===void 0)return console;if($.log&&$.warn&&$.error)return $;throw new Error("logger must implement log, warn and error methods")}const R=/^[a-z_$][a-z0-9_$:-]*$/i;function M($,U){const{RULES:W}=this;if((0,c.eachItem)($,B=>{if(W.keywords[B])throw new Error(`Keyword ${B} is already defined`);if(!R.test(B))throw new Error(`Keyword ${B} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function F($,U,W){var B;const q=U==null?void 0:U.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Y}=this;let re=q?Y.post:Y.rules.find(({type:_e})=>_e===W);if(re||(re={type:W,rules:[]},Y.rules.push(re)),Y.keywords[$]=!0,!U)return;const pe={keyword:$,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?P.call(this,re,pe,U.before):re.rules.push(pe),Y.all[$]=pe,(B=U.implements)===null||B===void 0||B.forEach(_e=>this.addKeyword(_e))}function P($,U,W){const B=$.rules.findIndex(q=>q.keyword===W);B>=0?$.rules.splice(B,0,U):($.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function j($){let{metaSchema:U}=$;U!==void 0&&($.$data&&this.opts.$data&&(U=V(U)),$.validateSchema=this.compile(U,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V($){return{anyOf:[$,z]}}})(L1e);var eV={},tV={},nV={};Object.defineProperty(nV,"__esModule",{value:!0});const Pct={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};nV.default=Pct;var z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.callRef=z0.getValidate=void 0;const Oct=I_,Nne=Tn,Ta=An,b1=Zf,kne=Pa,lA=wt,Mct={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=kne.resolveRef.call(u,l,i,n);if(c===void 0)throw new Oct.default(r.opts.uriResolver,i,n);if(c instanceof kne.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return DD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return DD(e,(0,Ta._)`${p}.validate`,l,l.$async)}function d(p){const m=yve(e,p);DD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ta.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ta.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function yve(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ta._)`${n.scopeValue("wrapper",{ref:t})}.validate`}z0.getValidate=yve;function DD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?b1.default.this:Ta.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ta._)`await ${(0,Nne.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ta._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Nne.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Ta._)`${p}.errors`;i.assign(b1.default.vErrors,(0,Ta._)`${b1.default.vErrors} === null ? ${m} : ${b1.default.vErrors}.concat(${m})`),i.assign(b1.default.errors,(0,Ta._)`${b1.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=lA.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ta._)`${p}.evaluated.props`);s.props=lA.mergeEvaluated.props(i,y,s.props,Ta.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=lA.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ta._)`${p}.evaluated.items`);s.items=lA.mergeEvaluated.items(i,y,s.items,Ta.Name)}}}z0.callRef=DD;z0.default=Mct;Object.defineProperty(tV,"__esModule",{value:!0});const $ct=nV,Fct=z0,Lct=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",$ct.default,Fct.default];tV.default=Lct;var rV={},iV={};Object.defineProperty(iV,"__esModule",{value:!0});const tk=An,ep=tk.operators,nk={maximum:{okStr:"<=",ok:ep.LTE,fail:ep.GT},minimum:{okStr:">=",ok:ep.GTE,fail:ep.LT},exclusiveMaximum:{okStr:"<",ok:ep.LT,fail:ep.GTE},exclusiveMinimum:{okStr:">",ok:ep.GT,fail:ep.LTE}},Bct={message:({keyword:e,schemaCode:t})=>(0,tk.str)`must be ${nk[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,tk._)`{comparison: ${nk[e].okStr}, limit: ${t}}`},jct={keyword:Object.keys(nk),type:"number",schemaType:"number",$data:!0,error:Bct,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,tk._)`${n} ${nk[t].fail} ${r} || isNaN(${n})`)}};iV.default=jct;var sV={};Object.defineProperty(sV,"__esModule",{value:!0});const _x=An,zct={message:({schemaCode:e})=>(0,_x.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,_x._)`{multipleOf: ${e}}`},Uct={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:zct,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,_x._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,_x._)`${o} !== parseInt(${o})`;e.fail$data((0,_x._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};sV.default=Uct;var oV={},aV={};Object.defineProperty(aV,"__esModule",{value:!0});function vve(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}aV.default=vve;vve.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(oV,"__esModule",{value:!0});const Vg=An,Vct=wt,Hct=aV,qct={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Vg.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Vg._)`{limit: ${e}}`},Wct={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:qct,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Vg.operators.GT:Vg.operators.LT,o=i.opts.unicode===!1?(0,Vg._)`${n}.length`:(0,Vg._)`${(0,Vct.useFunc)(e.gen,Hct.default)}(${n})`;e.fail$data((0,Vg._)`${o} ${s} ${r}`)}};oV.default=Wct;var uV={};Object.defineProperty(uV,"__esModule",{value:!0});const Gct=Tn,rk=An,Yct={message:({schemaCode:e})=>(0,rk.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,rk._)`{pattern: ${e}}`},Kct={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Yct,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,rk._)`(new RegExp(${i}, ${o}))`:(0,Gct.usePattern)(e,r);e.fail$data((0,rk._)`!${a}.test(${t})`)}};uV.default=Kct;var lV={};Object.defineProperty(lV,"__esModule",{value:!0});const Ex=An,Xct={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Ex.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Ex._)`{limit: ${e}}`},Qct={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Xct,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Ex.operators.GT:Ex.operators.LT;e.fail$data((0,Ex._)`Object.keys(${n}).length ${i} ${r}`)}};lV.default=Qct;var cV={};Object.defineProperty(cV,"__esModule",{value:!0});const OE=Tn,wx=An,Jct=wt,Zct={message:({params:{missingProperty:e}})=>(0,wx.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,wx._)`{missingProperty: ${e}}`},eft={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Zct,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Jct.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(wx.nil,f);else for(const h of n)(0,OE.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,OE.checkMissingProp)(e,n,h)),(0,OE.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,OE.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,OE.propertyInData)(t,i,h,a.ownProperties)),t.if((0,wx.not)(p),()=>{e.error(),t.break()})},wx.nil)}}};cV.default=eft;var fV={};Object.defineProperty(fV,"__esModule",{value:!0});const xx=An,tft={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,xx.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,xx._)`{limit: ${e}}`},nft={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:tft,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?xx.operators.GT:xx.operators.LT;e.fail$data((0,xx._)`${n}.length ${i} ${r}`)}};fV.default=nft;var dV={},ZT={};Object.defineProperty(ZT,"__esModule",{value:!0});const bve=Iz;bve.code='require("ajv/dist/runtime/equal").default';ZT.default=bve;Object.defineProperty(dV,"__esModule",{value:!0});const jF=ts,zs=An,rft=wt,ift=ZT,sft={message:({params:{i:e,j:t}})=>(0,zs.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,zs._)`{i: ${e}, j: ${t}}`},oft={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:sft,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,jF.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,zs._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,zs._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,zs._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,jF.checkDataTypes)(l,g,a.opts.strictNumbers,jF.DataType.Wrong),v=t.const("indices",(0,zs._)`{}`);t.for((0,zs._)`;${p}--;`,()=>{t.let(g,(0,zs._)`${n}[${p}]`),t.if(y,(0,zs._)`continue`),l.length>1&&t.if((0,zs._)`typeof ${g} == "string"`,(0,zs._)`${g} += "_"`),t.if((0,zs._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,zs._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,zs._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,rft.useFunc)(t,ift.default),y=t.name("outer");t.label(y).for((0,zs._)`;${p}--;`,()=>t.for((0,zs._)`${m} = ${p}; ${m}--;`,()=>t.if((0,zs._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};dV.default=oft;var hV={};Object.defineProperty(hV,"__esModule",{value:!0});const Q5=An,aft=wt,uft=ZT,lft={message:"must be equal to constant",params:({schemaCode:e})=>(0,Q5._)`{allowedValue: ${e}}`},cft={keyword:"const",$data:!0,error:lft,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,Q5._)`!${(0,aft.useFunc)(t,uft.default)}(${n}, ${i})`):e.fail((0,Q5._)`${s} !== ${n}`)}};hV.default=cft;var pV={};Object.defineProperty(pV,"__esModule",{value:!0});const Cw=An,fft=wt,dft=ZT,hft={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Cw._)`{allowedValues: ${e}}`},pft={keyword:"enum",schemaType:"array",$data:!0,error:hft,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,fft.useFunc)(t,dft.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,Cw.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,Cw._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,Cw._)`${l()}(${n}, ${h}[${p}])`:(0,Cw._)`${n} === ${m}`}}};pV.default=pft;Object.defineProperty(rV,"__esModule",{value:!0});const mft=iV,gft=sV,yft=oV,vft=uV,bft=lV,_ft=cV,Eft=fV,wft=dV,xft=hV,Sft=pV,Tft=[mft.default,gft.default,yft.default,vft.default,bft.default,_ft.default,Eft.default,wft.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},xft.default,Sft.default];rV.default=Tft;var mV={},N_={};Object.defineProperty(N_,"__esModule",{value:!0});N_.validateAdditionalItems=void 0;const Hg=An,J5=wt,Cft={message:({params:{len:e}})=>(0,Hg.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Hg._)`{limit: ${e}}`},Aft={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Cft,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,J5.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}_ve(e,r)}};function _ve(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Hg._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Hg._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,J5.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Hg._)`${a} <= ${t.length}`);n.if((0,Hg.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:J5.Type.Num},l),o.allErrors||n.if((0,Hg.not)(l),()=>n.break())})}}N_.validateAdditionalItems=_ve;N_.default=Aft;var gV={},k_={};Object.defineProperty(k_,"__esModule",{value:!0});k_.validateTuple=void 0;const Rne=An,ID=wt,Dft=Tn,Ift={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Eve(e,"additionalItems",t);n.items=!0,!(0,ID.alwaysValidSchema)(n,t)&&e.ok((0,Dft.validateArray)(e))}};function Eve(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=ID.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Rne._)`${s}.length`);n.forEach((f,d)=>{(0,ID.alwaysValidSchema)(a,f)||(r.if((0,Rne._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,ID.checkStrictMode)(a,g,d.strictTuples)}}}k_.validateTuple=Eve;k_.default=Ift;Object.defineProperty(gV,"__esModule",{value:!0});const Nft=k_,kft={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Nft.validateTuple)(e,"items")};gV.default=kft;var yV={};Object.defineProperty(yV,"__esModule",{value:!0});const Pne=An,Rft=wt,Pft=Tn,Oft=N_,Mft={message:({params:{len:e}})=>(0,Pne.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Pne._)`{limit: ${e}}`},$ft={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Mft,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Rft.alwaysValidSchema)(r,t)&&(i?(0,Oft.validateAdditionalItems)(e,i):e.ok((0,Pft.validateArray)(e)))}};yV.default=$ft;var vV={};Object.defineProperty(vV,"__esModule",{value:!0});const Qu=An,cA=wt,Fft={message:({params:{min:e,max:t}})=>t===void 0?(0,Qu.str)`must contain at least ${e} valid item(s)`:(0,Qu.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Qu._)`{minContains: ${e}}`:(0,Qu._)`{minContains: ${e}, maxContains: ${t}}`},Lft={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Fft,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Qu._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,cA.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,cA.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,cA.alwaysValidSchema)(s,n)){let m=(0,Qu._)`${c} >= ${o}`;a!==void 0&&(m=(0,Qu._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Qu._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:cA.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Qu._)`${m}++`),a===void 0?t.if((0,Qu._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Qu._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Qu._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};vV.default=Lft;var wve={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=An,n=wt,r=Tn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(wve);var bV={};Object.defineProperty(bV,"__esModule",{value:!0});const xve=An,Bft=wt,jft={message:"property name must be valid",params:({params:e})=>(0,xve._)`{propertyName: ${e.propertyName}}`},zft={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:jft,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Bft.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,xve.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};bV.default=zft;var p3={};Object.defineProperty(p3,"__esModule",{value:!0});const fA=Tn,Ul=An,Uft=Zf,dA=wt,Vft={message:"must NOT have additional properties",params:({params:e})=>(0,Ul._)`{additionalProperty: ${e.additionalProperty}}`},Hft={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Vft,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,dA.alwaysValidSchema)(o,n))return;const l=(0,fA.allSchemaProperties)(r.properties),c=(0,fA.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Ul._)`${s} === ${Uft.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,dA.schemaRefOrVal)(o,r.properties,"properties");y=(0,fA.isOwnProperty)(t,v,g)}else l.length?y=(0,Ul.or)(...l.map(v=>(0,Ul._)`${g} === ${v}`)):y=Ul.nil;return c.length&&(y=(0,Ul.or)(y,...c.map(v=>(0,Ul._)`${(0,fA.usePattern)(e,v)}.test(${g})`))),(0,Ul.not)(y)}function h(g){t.code((0,Ul._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,dA.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Ul.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Ul.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:dA.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};p3.default=Hft;var _V={};Object.defineProperty(_V,"__esModule",{value:!0});const qft=yc,One=Tn,zF=wt,Mne=p3,Wft={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Mne.default.code(new qft.KeywordCxt(s,Mne.default,"additionalProperties"));const o=(0,One.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=zF.mergeEvaluated.props(t,(0,zF.toHash)(o),s.props));const a=o.filter(f=>!(0,zF.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,One.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};_V.default=Wft;var EV={};Object.defineProperty(EV,"__esModule",{value:!0});const $ne=Tn,hA=An,Fne=wt,Lne=wt,Gft={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,$ne.allSchemaProperties)(n),u=a.filter(m=>(0,Fne.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof hA.Name)&&(s.props=(0,Lne.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Fne.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,hA._)`${(0,$ne.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Lne.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,hA._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,hA.not)(c),()=>t.break())})})}}};EV.default=Gft;var wV={};Object.defineProperty(wV,"__esModule",{value:!0});const Yft=wt,Kft={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,Yft.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};wV.default=Kft;var xV={};Object.defineProperty(xV,"__esModule",{value:!0});const Xft=Tn,Qft={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Xft.validateUnion,error:{message:"must match a schema in anyOf"}};xV.default=Qft;var SV={};Object.defineProperty(SV,"__esModule",{value:!0});const ND=An,Jft=wt,Zft={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ND._)`{passingSchemas: ${e.passing}}`},edt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Zft,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,Jft.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,ND._)`${u} && ${o}`).assign(o,!1).assign(a,(0,ND._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,ND.Name)})})}}};SV.default=edt;var TV={};Object.defineProperty(TV,"__esModule",{value:!0});const tdt=wt,ndt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,tdt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};TV.default=ndt;var CV={};Object.defineProperty(CV,"__esModule",{value:!0});const ik=An,Sve=wt,rdt={message:({params:e})=>(0,ik.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,ik._)`{failingKeyword: ${e.ifClause}}`},idt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:rdt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Sve.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Bne(r,"then"),s=Bne(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,ik.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,ik._)`${c}`):e.setParams({ifClause:c})}}}};function Bne(e,t){const n=e.schema[t];return n!==void 0&&!(0,Sve.alwaysValidSchema)(e,n)}CV.default=idt;var AV={};Object.defineProperty(AV,"__esModule",{value:!0});const sdt=wt,odt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,sdt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};AV.default=odt;Object.defineProperty(mV,"__esModule",{value:!0});const adt=N_,udt=gV,ldt=k_,cdt=yV,fdt=vV,ddt=wve,hdt=bV,pdt=p3,mdt=_V,gdt=EV,ydt=wV,vdt=xV,bdt=SV,_dt=TV,Edt=CV,wdt=AV;function xdt(e=!1){const t=[ydt.default,vdt.default,bdt.default,_dt.default,Edt.default,wdt.default,hdt.default,pdt.default,ddt.default,mdt.default,gdt.default];return e?t.push(udt.default,cdt.default):t.push(adt.default,ldt.default),t.push(fdt.default),t}mV.default=xdt;var DV={},IV={};Object.defineProperty(IV,"__esModule",{value:!0});const ki=An,Sdt={message:({schemaCode:e})=>(0,ki.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ki._)`{format: ${e}}`},Tdt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Sdt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ki._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ki._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ki._)`${m}.type || "string"`).assign(y,(0,ki._)`${m}.validate`),()=>n.assign(g,(0,ki._)`"string"`).assign(y,m)),e.fail$data((0,ki.or)(v(),b()));function v(){return u.strictSchema===!1?ki.nil:(0,ki._)`${o} && !${y}`}function b(){const E=c.$async?(0,ki._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ki._)`${y}(${r})`,_=(0,ki._)`(typeof ${y} == "function" ? ${E} : ${y}.test(${r}))`;return(0,ki._)`${y} && ${y} !== true && ${g} === ${t} && !${_}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(E());function v(){if(u.strictSchema===!1){f.logger.warn(_());return}throw new Error(_());function _(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(_){const w=_ instanceof RegExp?(0,ki.regexpCode)(_):u.code.formats?(0,ki._)`${u.code.formats}${(0,ki.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:_,code:w});return typeof _=="object"&&!(_ instanceof RegExp)?[_.type||"string",_.validate,(0,ki._)`${S}.validate`]:["string",_,S]}function E(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ki._)`await ${y}(${r})`}return typeof g=="function"?(0,ki._)`${y}(${r})`:(0,ki._)`${y}.test(${r})`}}}};IV.default=Tdt;Object.defineProperty(DV,"__esModule",{value:!0});const Cdt=IV,Adt=[Cdt.default];DV.default=Adt;var Sb={};Object.defineProperty(Sb,"__esModule",{value:!0});Sb.contentVocabulary=Sb.metadataVocabulary=void 0;Sb.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Sb.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(eV,"__esModule",{value:!0});const Ddt=tV,Idt=rV,Ndt=mV,kdt=DV,jne=Sb,Rdt=[Ddt.default,Idt.default,(0,Ndt.default)(),kdt.default,jne.metadataVocabulary,jne.contentVocabulary];eV.default=Rdt;var NV={},m3={};Object.defineProperty(m3,"__esModule",{value:!0});m3.DiscrError=void 0;var zne;(function(e){e.Tag="tag",e.Mapping="mapping"})(zne||(m3.DiscrError=zne={}));Object.defineProperty(NV,"__esModule",{value:!0});const M1=An,Z5=m3,Une=Pa,Pdt=I_,Odt=wt,Mdt={message:({params:{discrError:e,tagName:t}})=>e===Z5.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,M1._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},$dt={keyword:"discriminator",type:"object",schemaType:"object",error:Mdt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,M1._)`${n}${(0,M1.getProperty)(a)}`);t.if((0,M1._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:Z5.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,M1._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:Z5.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,M1.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let E=0;E<o.length;E++){let _=o[E];if(_!=null&&_.$ref&&!(0,Odt.schemaHasRulesButRef)(_,s.self.RULES)){const S=_.$ref;if(_=Une.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),_ instanceof Une.SchemaEnv&&(_=_.schema),_===void 0)throw new Pdt.default(s.opts.uriResolver,s.baseId,S)}const w=(h=_==null?void 0:_.properties)===null||h===void 0?void 0:h[a];if(typeof w!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(_)),v(w,E)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:E}){return Array.isArray(E)&&E.includes(a)}function v(E,_){if(E.const)b(E.const,_);else if(E.enum)for(const w of E.enum)b(w,_);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(E,_){if(typeof E!="string"||E in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[E]=_}}}};NV.default=$dt;const Fdt="http://json-schema.org/draft-07/schema#",Ldt="http://json-schema.org/draft-07/schema#",Bdt="Core schema meta-schema",jdt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},zdt=["object","boolean"],Udt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Vdt={$schema:Fdt,$id:Ldt,title:Bdt,definitions:jdt,type:zdt,properties:Udt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=L1e,r=eV,i=NV,s=Vdt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=yc;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=An;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=JT;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=I_;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(q5,q5.exports);var Hdt=q5.exports;const Tve=ha(Hdt),qdt="#/definitions/StudyConfig",Wdt="http://json-schema.org/draft-07/schema#",Gdt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Ydt={$ref:qdt,$schema:Wdt,definitions:Gdt},Kdt="#/definitions/GlobalConfig",Xdt="http://json-schema.org/draft-07/schema#",Qdt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},Jdt={$ref:Kdt,$schema:Xdt,definitions:Qdt},Cve=new Tve;Cve.addSchema(Jdt);const Vne=Cve.getSchema("#/definitions/GlobalConfig"),Ave=new Tve;Ave.addSchema(Ydt);const UF=Ave.getSchema("#/definitions/StudyConfig");function Zdt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function g3(e){return e.baseComponent!==void 0}function eht(e){const t=UU.parse(e),n=Vne(t),r=Zdt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Vne.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Dve(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):Dve(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function tht(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;g3(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=Ame(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return Dve(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function nht(e){let t=!1,n;try{n=UU.parse(e),t=UF(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=tht(n);r=[...UF.errors||[],...s],i=o}else r=UF.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function Ive(){const e=Lh(),{setAlertModal:t}=Wf(),n=Gf();k.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Hne=Object.prototype.hasOwnProperty;function qne(e,t,n){for(n of e.keys())if(Sx(n,t))return n}function Sx(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Sx(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=qne(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=qne(t,i),!i)||!Sx(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Hne.call(e,n)&&++r&&!Hne.call(t,n)||!(n in t)||!Sx(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function rht(e){var t=k.useRef(e),n=k.useRef(0);return Sx(e,t.current)||(t.current=e,n.current+=1),k.useMemo(function(){return t.current},[n.current])}function iht(e,t){return k.useEffect(e,rht(t))}const sht=(e,t=null)=>{const[n,r]=k.useState("idle"),[i,s]=k.useState(null),[o,a]=k.useState(null),u=k.useRef(),l=k.useRef(!1);k.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=k.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return iht(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Wne=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],Nve=["participantId","trialId","trialOrder","responseId"];function kV(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function oht(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(yh(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=g3(u)&&u.baseComponent&&n.baseComponents?Az({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function aht(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...Nve,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await oht(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function uht({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=k.useState([...Wne].filter(h=>h!=="meta")),a=Qi(),{value:u,status:l,error:c}=sht(aht,[s,r,a.storageEngine,i]),f=k.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>p[m]).join(","))].join(`
`);kV(h,n)},[n,u]),d=k.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return x.jsxs(Ki,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[x.jsx(kj,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Wne],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:x.jsx(z8e,{}),variant:"filled"}),x.jsx(dl,{h:"md"}),x.jsxs(we,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?x.jsxs(En,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[x.jsx(En.Thead,{children:x.jsx(En.Tr,{children:u.header.map(h=>x.jsx(En.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:x.jsxs(Jt,{direction:"row",justify:"space-between",align:"center",children:[h,!Nve.includes(h)&&x.jsx(dm,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:x.jsx(ez,{size:16})})]})},h))})}),x.jsx(En.Tbody,{children:u.rows.slice(0,5).map((h,p)=>x.jsx(En.Tr,{children:u.header.map(m=>x.jsx(En.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?x.jsx(AT,{variant:"light",children:c.message}):null,x.jsx(Ru,{visible:l==="pending"||l==="idle"})]}),x.jsx(dl,{h:"sm"}),x.jsx(Jt,{justify:"center",fz:"sm",c:"dimmed",children:x.jsx(nt,{children:d})}),x.jsx(dl,{h:"md"}),x.jsxs(ro,{justify:"right",children:[x.jsx(Ln,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),x.jsx(Ln,{leftSection:x.jsx(Phe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function lht(){const e=vh(),{storageEngine:t}=Qi(),{answers:n}=Rl(v=>v),[r,i]=k.useState(!1);k.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),Ive();const[s,o]=k.useState(),[a,u]=k.useState(""),l=e.studyMetadata.title.replace(" ","_");k.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),E=await t.getParticipantData();u(b),o(E)}}v()},[t]);const c=k.useCallback(async()=>{kV(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=k.useState(Math.floor(d/1e3));k.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Cy(),[g,y]=k.useState(!1);return k.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),x.jsx(Qa,{style:{height:"100%"},children:x.jsx(Jt,{direction:"column",children:r||!g?x.jsx(nt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?x.jsx(la,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):x.jsxs(x.Fragment,{children:[x.jsx(nt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),x.jsx(dl,{h:"lg"}),x.jsx(Qa,{children:x.jsx(by,{color:"blue"})})]})})})}function cht(){var d;const e=vh(),t=Lh(),n=Ay()||"Notfound",r=e.components[n],i=Dz();Ive();const{storageEngine:s}=Qi(),o=Gf(),{setAlertModal:a}=Wf();if(k.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return x.jsx(lht,{});if(n==="Notfound")return x.jsx(R0,{email:e.uiConfig.contactEmail});const u=g3(r)&&e.baseComponents?Az({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return x.jsxs(x.Fragment,{children:[c==="aboveStimulus"&&x.jsx(la,{text:l}),x.jsx(ZI,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),x.jsxs(k.Suspense,{fallback:x.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&x.jsx(put,{currentConfig:u}),u.type==="website"&&x.jsx(UWe,{currentConfig:u}),u.type==="image"&&x.jsx(HWe,{currentConfig:u}),u.type==="react-component"&&x.jsx(hut,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&x.jsx(la,{text:l}),x.jsx(ZI,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function e8(e){const[t]=Qj();return x.jsx(Xj,{...e,to:{pathname:e.to,search:t.toString()}})}var fht="Expected a function",Gne=NaN,dht="[object Symbol]",hht=/^\s+|\s+$/g,pht=/^[-+]0x[0-9a-f]+$/i,mht=/^0b[01]+$/i,ght=/^0o[0-7]+$/i,yht=parseInt,vht=typeof Hr=="object"&&Hr&&Hr.Object===Object&&Hr,bht=typeof self=="object"&&self&&self.Object===Object&&self,_ht=vht||bht||Function("return this")(),Eht=Object.prototype,wht=Eht.toString,xht=Math.max,Sht=Math.min,VF=function(){return _ht.Date.now()};function Tht(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(fht);t=Yne(t)||0,t8(n)&&(c=!!n.leading,f="maxWait"in n,s=f?xht(Yne(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(w){var S=r,C=i;return r=i=void 0,l=w,o=e.apply(C,S),o}function p(w){return l=w,a=setTimeout(y,t),c?h(w):o}function m(w){var S=w-u,C=w-l,A=t-S;return f?Sht(A,s-C):A}function g(w){var S=w-u,C=w-l;return u===void 0||S>=t||S<0||f&&C>=s}function y(){var w=VF();if(g(w))return v(w);a=setTimeout(y,m(w))}function v(w){return a=void 0,d&&r?h(w):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function E(){return a===void 0?o:v(VF())}function _(){var w=VF(),S=g(w);if(r=arguments,i=this,u=w,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return _.cancel=b,_.flush=E,_}function t8(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Cht(e){return!!e&&typeof e=="object"}function Aht(e){return typeof e=="symbol"||Cht(e)&&wht.call(e)==dht}function Yne(e){if(typeof e=="number")return e;if(Aht(e))return Gne;if(t8(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=t8(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(hht,"");var n=mht.test(e);return n||ght.test(e)?yht(e.slice(2),n?2:8):pht.test(e)?Gne:+e}var Dht=Tht;const vd=ha(Dht);function kve(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=kve(o,t,n,r),r.includes(o.orderPath))break}return i}function Rve(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=Rve(s,r)}}),n}function Iht(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Nht({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=Cy(),u=Fh(),l=Lh(),c=vh(),[f,{close:d,open:h}]=bv(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?kve(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return x.jsxs(Rr,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[x.jsx(Rr.Target,{children:x.jsx(we,{onMouseEnter:h,onMouseLeave:d,children:x.jsx(uP,{active:g,style:{lineHeight:"32px",height:"32px"},label:x.jsxs(we,{children:[i&&x.jsx(O8e,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?x.jsx(nt,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):x.jsx(nt,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&x.jsx(Rr.Dropdown,{onMouseLeave:d,children:x.jsx(nt,{size:"sm",children:x.jsxs(we,{children:[p.description&&x.jsxs(we,{children:[x.jsx(nt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),x.jsx(nt,{fw:400,component:"span",children:p.description})]}),p.meta&&x.jsxs(nt,{children:[x.jsx(nt,{fw:"900",component:"span",children:"Task Meta: "}),x.jsx(nt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function n8({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=d0(e.components);return n&&r&&(i=Iht(d0(e.components),d0(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),x.jsx(x.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return x.jsx(Nht,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?yh(u).length-Rve(o,u):0,c=yh(o);return x.jsx(uP,{label:x.jsxs(we,{style:{opacity:l>0?1:.5},children:[x.jsx(nt,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?x.jsx(R8e,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&x.jsxs(Kd,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&x.jsx(Kd,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:x.jsx(we,{style:{borderLeft:"1px solid #e9ecef"},children:x.jsx(n8,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function Pve(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Ove(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Ove(n,`${t}-${r}`))}}function Kne({text:e}){return x.jsx(Wi,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:x.jsx(Nhe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function kht(){const{sequence:e,metadata:t}=Rl(f=>f),{toggleStudyBrowser:n}=Wf(),r=vh(),i=Gf(),s=Cy(),o=She(`/${s}`),{storageEngine:a}=Qi(),u=k.useMemo(()=>{let f=d0(r.sequence);return f=Ove(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=k.useState("participant");return x.jsxs(Wr.Aside,{p:"0",children:[x.jsx(Wr.Section,{children:x.jsxs(Jt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[x.jsx(nt,{size:"md",fw:700,pt:3,children:"Study Browser"}),x.jsx(Ln,{variant:"light",leftSection:x.jsx(Zj,{size:14}),onClick:()=>Pve(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),x.jsx(Um,{onClick:()=>i(n()),mt:1})]})}),x.jsx(Wr.Section,{grow:!0,component:yy,p:"xs",pt:0,children:x.jsxs(Ri,{value:l,onChange:c,children:[x.jsx(we,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:x.jsxs(Ri.List,{grow:!0,children:[x.jsxs(Ri.Tab,{value:"participant",children:["Participant View",x.jsx(Kne,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),x.jsxs(Ri.Tab,{value:"allTrials",children:["All Trials View",x.jsx(Kne,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),x.jsx(Ri.Panel,{value:"participant",children:x.jsx(n8,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0})}),x.jsx(Ri.Panel,{value:"allTrials",children:x.jsx(n8,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1})})]})})]})}function Rht({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Rl(_=>_),i=Cz(),s=Gf(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Wf(),{storageEngine:u}=Qi(),l=Lh(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=k.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Cy(),y=She(`/${g}`),v=k.useRef(null),[b,E]=k.useState(!1);return k.useEffect(()=>{const _=v.current;_&&E(_.scrollWidth>_.offsetWidth)},[n]),x.jsx(Wr.Header,{p:"md",children:x.jsxs(ol,{mt:-7,align:"center",children:[x.jsx(ol.Col,{span:4,children:x.jsxs(Jt,{align:"center",children:[x.jsx(Hm,{w:40,src:`${Hf}${p}`,alt:"Study Logo"}),x.jsx(dl,{w:"md"}),x.jsx(ci,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),x.jsx(ol.Col,{span:4,children:m&&x.jsx(m_,{radius:"md",size:"lg",value:f})}),x.jsx(ol.Col,{span:4,children:x.jsxs(ro,{wrap:"nowrap",justify:"right",children:[!t&&x.jsx(Wi,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:x.jsx(Kd,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&x.jsx(Ln,{variant:"outline",onClick:()=>s(o()),children:"Help"}),x.jsxs(Na,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[x.jsx(Na.Target,{children:x.jsx(dm,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:x.jsx(B8e,{})})}),x.jsxs(Na.Dropdown,{children:[e&&x.jsx(Na.Item,{leftSection:x.jsx(q8e,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),x.jsx(Na.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:x.jsx(U8e,{size:14}),children:"Contact"}),e&&x.jsx(Na.Item,{leftSection:x.jsx(Zj,{size:14}),onClick:()=>Pve(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function Pht(){var u;const e=(u=vh())==null?void 0:u.uiConfig.sidebar,t=vh(),n=Ay(),r=t.components[n],i=k.useMemo(()=>{var l;return r?g3(r)&&t.baseComponents?Az({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=Dz(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?x.jsxs(Wr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&x.jsx(Wr.Section,{bg:"gray.3",p:"md",children:x.jsxs(nt,{c:"gray.9",children:[x.jsx(nt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),x.jsx(la,{text:o})]})}),x.jsx(Wr.Section,{p:"md",children:x.jsx(ZI,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):x.jsx(Wr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:x.jsx(ZI,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function Oht(){const{showHelpText:e,config:t}=Rl(u=>u),n=Gf(),{toggleShowHelpText:r}=Wf(),[i,s]=k.useState(""),[o,a]=k.useState(!0);return k.useEffect(()=>{async function u(){const l=await Nz(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),x.jsx(Ki,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?x.jsx(la,{text:i}):x.jsx(R0,{path:t.uiConfig.helpTextPath})})}function Mht(){const{alertModal:e}=Rl(o=>o),{setAlertModal:t}=Wf(),n=Gf(),[r,i]=k.useState(e.show),s=k.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return k.useEffect(()=>i(e.show),[e.show]),x.jsx(Ki,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:x.jsxs(AT,{color:"red",radius:"xs",title:"Alert",icon:x.jsx(k8e,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[x.jsx(nt,{my:"md",children:e.message}),x.jsx(ro,{w:"100%",justify:"end",children:x.jsx(Ln,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function $ht(){const e=k.useRef([]),t=vh(),n=t.uiConfig.windowEventDebounceTime??100,r=Rl(d=>d.showStudyBrowser);k.useEffect(()=>{const d=vd(_=>{e.current.push([Date.now(),"focus",_.target instanceof HTMLElement?_.target.tagName:""])},n,{maxWait:n}),h=vd(_=>{e.current.push([Date.now(),"input",_.data??""])},n,{maxWait:n}),p=vd(_=>{e.current.push([Date.now(),"keypress",_.key])},n,{maxWait:n}),m=vd(_=>{e.current.push([Date.now(),"mousedown",[_.clientX,_.clientY]])},n,{maxWait:n}),g=vd(_=>{e.current.push([Date.now(),"mouseup",[_.clientX,_.clientY]])},n,{maxWait:n}),y=vd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=vd(_=>{e.current.push([Date.now(),"mousemove",[_.clientX,_.clientY]])},n,{maxWait:n}),b=vd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=vd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",E)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Qi(),o=Cy(),[a,u]=k.useState(!1),[l,c]=k.useState(!1);k.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=k.useMemo(()=>a&&r,[a,r]);return x.jsx(Pme.Provider,{value:e,children:x.jsxs(Wr,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[x.jsx(Pht,{}),x.jsx(kht,{}),x.jsx(Rht,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),x.jsx(Oht,{}),x.jsx(Mht,{}),x.jsx(Wr.Main,{children:x.jsx(y8e,{})})]})})}function Fht(e,t=!1){return typeof e=="number"?Xne(e,t):Xne(e.length,t).map(r=>r.map(i=>e[i]))}function Xne(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function Mve(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=Mve(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function Lht(e,t){const n=d0(e);return Mve(n,t,"root")}function $ve(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&$ve(s,t,i,o)})}function Bht(e){const t=[];return $ve(e,t,"",0),t}function Qne(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return Fht(i.sort(()=>.5-Math.random()),!0)}function jht(e){const n=Bht(e.sequence).map(s=>({[s]:Qne(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Lht(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Qne(e,o))})}),i}var zht={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyBNW230jLUCwld9aUjZRzIunyGMdaMXv6I",
  authDomain: "abrar-test-study.firebaseapp.com",
  projectId: "abrar-test-study",
  storageBucket: "abrar-test-study.appspot.com",
  messagingSenderId: "304916533445",
  appId: "1:304916533445:web:22d7fea7e8e3faea4ca0ac"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6Ld7v0cqAAAAACbRoSHv-PfJiq9wfYgjhXC4_e7Z",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function Uht(e){const t=await(await fetch(`${Hf}${e}`)).text();return nht(t)}async function y3(e,t){const n=t.configsList.find(r=>Mhe(r)===e);if(n){const r=t.configs[n];return await Uht(`${r.path}`)}return null}async function Vht(e){const t={},n=e.configsList.filter(i=>zht.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>y3(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function Hht({globalConfig:e}){const t=Cy(),[n,r]=k.useState(null),i=e.configsList.includes(t);k.useEffect(()=>{y3(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=k.useState([]),[a,u]=k.useState(null),{storageEngine:l}=Qi(),[c]=Qj();k.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await jht(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(w=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},E=await l.initializeParticipantSession(t,g,n,b,m),_=await oWe(t,n,E.sequence,b,E.answers);u(_),o([{element:x.jsx($ht,{}),children:[{path:"/",element:x.jsx(e8,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?x.jsxs(x.Fragment,{children:[x.jsx(ci,{order:2,mb:8,children:"Error loading config"}),x.jsx(B4,{issues:n.errors,type:"error"})]}):x.jsx(cht,{})}]}])}h()},[l,n,t,c]);const f=Che(s);let d=null;return i?s.length===0?d=x.jsx(Ru,{visible:!0}):d=f&&a?x.jsx(Rme.Provider,{value:a,children:x.jsx(eqe,{store:a.store,children:f})}):x.jsx(R0,{}):d=x.jsx(R0,{}),d}var Jne={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fve=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},qht=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},RV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fve(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):qht(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Wht;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Wht extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ght=function(e){const t=Fve(e);return RV.encodeByteArray(t,!0)},sk=function(e){return Ght(e).replace(/\./g,"")},Lve=function(e){try{return RV.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yht=()=>Bve().__FIREBASE_DEFAULTS__,Kht=()=>{if(typeof process>"u"||typeof Jne>"u")return;const e=Jne.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Xht=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Lve(e[1]);return t&&JSON.parse(t)},v3=()=>{try{return Yht()||Kht()||Xht()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},jve=e=>{var t,n;return(n=(t=v3())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Qht=e=>{const t=jve(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},zve=()=>{var e;return(e=v3())===null||e===void 0?void 0:e.config},Uve=e=>{var t;return(t=v3())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jht(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sk(JSON.stringify(n)),sk(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(io())}function ept(){var e;const t=(e=v3())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tpt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function npt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rpt(){const e=io();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ipt(){return!ept()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PV(){try{return typeof indexedDB=="object"}catch{return!1}}function spt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const opt="FirebaseError";class ed extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=opt,Object.setPrototypeOf(this,ed.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R_.prototype.create)}}class R_{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?apt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ed(i,a,r)}}function apt(e,t){return e.replace(upt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const upt=/\{\$([^}]+)}/g;function lpt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function PS(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Zne(s)&&Zne(o)){if(!PS(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zne(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function cpt(e,t){const n=new fpt(e,t);return n.subscribe.bind(n)}class fpt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dpt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=HF),i.error===void 0&&(i.error=HF),i.complete===void 0&&(i.complete=HF);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dpt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function HF(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hpt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppt=1e3,mpt=2,gpt=4*60*60*1e3,ypt=.5;function vpt(e,t=ppt,n=mpt){const r=t*Math.pow(n,e),i=Math.round(ypt*r*(Math.random()-.5)*2);return Math.min(gpt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(e){return e&&e._delegate?e._delegate:e}class Rf{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bpt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new RS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ept(t))try{this.getOrInitializeService({instanceIdentifier:Mg})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Mg){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Mg){return this.instances.has(t)}getOptions(t=Mg){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_pt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Mg){return this.component?this.component.multipleInstances?t:Mg:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _pt(e){return e===Mg?void 0:e}function Ept(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wpt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new bpt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fn||(Fn={}));const xpt={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},Spt=Fn.INFO,Tpt={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},Cpt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Tpt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class b3{constructor(t){this.name=t,this._logLevel=Spt,this._logHandler=Cpt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xpt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}}const Apt=(e,t)=>t.some(n=>e instanceof n);let ere,tre;function Dpt(){return ere||(ere=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ipt(){return tre||(tre=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vve=new WeakMap,r8=new WeakMap,Hve=new WeakMap,qF=new WeakMap,OV=new WeakMap;function Npt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Jp(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Vve.set(n,e)}).catch(()=>{}),OV.set(t,e),t}function kpt(e){if(r8.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});r8.set(e,t)}let i8={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return r8.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Hve.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jp(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Rpt(e){i8=e(i8)}function Ppt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(WF(this),t,...n);return Hve.set(r,t.sort?t.sort():[t]),Jp(r)}:Ipt().includes(e)?function(...t){return e.apply(WF(this),t),Jp(Vve.get(this))}:function(...t){return Jp(e.apply(WF(this),t))}}function Opt(e){return typeof e=="function"?Ppt(e):(e instanceof IDBTransaction&&kpt(e),Apt(e,Dpt())?new Proxy(e,i8):e)}function Jp(e){if(e instanceof IDBRequest)return Npt(e);if(qF.has(e))return qF.get(e);const t=Opt(e);return t!==e&&(qF.set(e,t),OV.set(t,e)),t}const WF=e=>OV.get(e);function Mpt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Jp(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Jp(o.result),u.oldVersion,u.newVersion,Jp(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const $pt=["get","getKey","getAll","getAllKeys","count"],Fpt=["put","add","delete","clear"],GF=new Map;function nre(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(GF.get(t))return GF.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Fpt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$pt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return GF.set(t,s),s}Rpt(e=>({...e,get:(t,n,r)=>nre(t,n)||e.get(t,n,r),has:(t,n)=>!!nre(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lpt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bpt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bpt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const s8="@firebase/app",rre="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new b3("@firebase/app"),jpt="@firebase/app-compat",zpt="@firebase/analytics-compat",Upt="@firebase/analytics",Vpt="@firebase/app-check-compat",Hpt="@firebase/app-check",qpt="@firebase/auth",Wpt="@firebase/auth-compat",Gpt="@firebase/database",Ypt="@firebase/database-compat",Kpt="@firebase/functions",Xpt="@firebase/functions-compat",Qpt="@firebase/installations",Jpt="@firebase/installations-compat",Zpt="@firebase/messaging",emt="@firebase/messaging-compat",tmt="@firebase/performance",nmt="@firebase/performance-compat",rmt="@firebase/remote-config",imt="@firebase/remote-config-compat",smt="@firebase/storage",omt="@firebase/storage-compat",amt="@firebase/firestore",umt="@firebase/vertexai-preview",lmt="@firebase/firestore-compat",cmt="firebase",fmt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="[DEFAULT]",dmt={[s8]:"fire-core",[jpt]:"fire-core-compat",[Upt]:"fire-analytics",[zpt]:"fire-analytics-compat",[Hpt]:"fire-app-check",[Vpt]:"fire-app-check-compat",[qpt]:"fire-auth",[Wpt]:"fire-auth-compat",[Gpt]:"fire-rtdb",[Ypt]:"fire-rtdb-compat",[Kpt]:"fire-fn",[Xpt]:"fire-fn-compat",[Qpt]:"fire-iid",[Jpt]:"fire-iid-compat",[Zpt]:"fire-fcm",[emt]:"fire-fcm-compat",[tmt]:"fire-perf",[nmt]:"fire-perf-compat",[rmt]:"fire-rc",[imt]:"fire-rc-compat",[smt]:"fire-gcs",[omt]:"fire-gcs-compat",[amt]:"fire-fst",[lmt]:"fire-fst-compat",[umt]:"fire-vertex","fire-js":"fire-js",[cmt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Map,hmt=new Map,a8=new Map;function ire(e,t){try{e.container.addComponent(t)}catch(n){U0.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function wh(e){const t=e.name;if(a8.has(t))return U0.debug(`There were multiple attempts to register component ${t}.`),!1;a8.set(t,e);for(const n of ok.values())ire(n,e);for(const n of hmt.values())ire(n,e);return!0}function P_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hf(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pmt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zp=new R_("app","Firebase",pmt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mmt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=fmt;function qve(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:o8,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Zp.create("bad-app-name",{appName:String(i)});if(n||(n=zve()),!n)throw Zp.create("no-options");const s=ok.get(i);if(s){if(PS(n,s.options)&&PS(r,s.config))return s;throw Zp.create("duplicate-app",{appName:i})}const o=new wpt(i);for(const u of a8.values())o.addComponent(u);const a=new mmt(n,r,o);return ok.set(i,a),a}function MV(e=o8){const t=ok.get(e);if(!t&&e===o8&&zve())return qve();if(!t)throw Zp.create("no-app",{appName:e});return t}function vc(e,t,n){var r;let i=(r=dmt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),U0.warn(a.join(" "));return}wh(new Rf(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gmt="firebase-heartbeat-database",ymt=1,OS="firebase-heartbeat-store";let YF=null;function Wve(){return YF||(YF=Mpt(gmt,ymt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(OS)}catch(n){console.warn(n)}}}}).catch(e=>{throw Zp.create("idb-open",{originalErrorMessage:e.message})})),YF}async function vmt(e){try{const n=(await Wve()).transaction(OS),r=await n.objectStore(OS).get(Gve(e));return await n.done,r}catch(t){if(t instanceof ed)U0.warn(t.message);else{const n=Zp.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});U0.warn(n.message)}}}async function sre(e,t){try{const r=(await Wve()).transaction(OS,"readwrite");await r.objectStore(OS).put(t,Gve(e)),await r.done}catch(n){if(n instanceof ed)U0.warn(n.message);else{const r=Zp.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});U0.warn(r.message)}}}function Gve(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bmt=1024,_mt=30*24*60*60*1e3;class Emt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xmt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ore();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=_mt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ore(),{heartbeatsToSend:r,unsentEntries:i}=wmt(this._heartbeatsCache.heartbeats),s=sk(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ore(){return new Date().toISOString().substring(0,10)}function wmt(e,t=bmt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),are(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),are(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xmt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PV()?spt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vmt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sre(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sre(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function are(e){return sk(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Smt(e){wh(new Rf("platform-logger",t=>new Lpt(t),"PRIVATE")),wh(new Rf("heartbeat",t=>new Emt(t),"PRIVATE")),vc(s8,rre,e),vc(s8,rre,"esm2017"),vc("fire-js","")}Smt("");function Yve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tmt=Yve,Kve=new R_("auth","Firebase",Yve());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new b3("@firebase/auth");function Cmt(e,...t){ak.logLevel<=Fn.WARN&&ak.warn(`Auth (${Oy}): ${e}`,...t)}function kD(e,...t){ak.logLevel<=Fn.ERROR&&ak.error(`Auth (${Oy}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(e,...t){throw FV(e,...t)}function bc(e,...t){return FV(e,...t)}function $V(e,t,n){const r=Object.assign(Object.assign({},Tmt()),{[t]:n});return new R_("auth","Firebase",r).create(t,{appName:e.name})}function em(e){return $V(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Amt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Pf(e,"argument-error"),$V(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function FV(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Kve.create(e,...t)}function rn(e,t,...n){if(!e)throw FV(t,...n)}function Ud(e){const t="INTERNAL ASSERTION FAILED: "+e;throw kD(t),new Error(t)}function xh(e,t){e||Ud(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Dmt(){return ure()==="http:"||ure()==="https:"}function ure(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Imt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dmt()||tpt()||"connection"in navigator)?navigator.onLine:!0}function Nmt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t,n){this.shortDelay=t,this.longDelay=n,xh(n>t,"Short delay should be less than long delay!"),this.isMobile=Zht()||npt()}get(){return Imt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(e,t){xh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ud("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ud("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ud("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kmt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rmt=new t2(3e4,6e4);function _3(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function O_(e,t,n,r,i={}){return Qve(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=e2(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),Xve.fetch()(Zve(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function Qve(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},kmt),t);try{const i=new Pmt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pA(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw pA(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw pA(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw pA(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw $V(e,c,l);Pf(e,c)}}catch(i){if(i instanceof ed)throw i;Pf(e,"network-request-failed",{message:String(i)})}}async function Jve(e,t,n,r,i={}){const s=await O_(e,t,n,r,i);return"mfaPendingCredential"in s&&Pf(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Zve(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?LV(e.config,i):`${e.config.apiScheme}://${i}`}class Pmt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bc(this.auth,"network-request-failed")),Rmt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pA(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bc(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Omt(e,t){return O_(e,"POST","/v1/accounts:delete",t)}async function ebe(e,t){return O_(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Mmt(e,t=!1){const n=$r(e),r=await n.getIdToken(t),i=BV(r);rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Tx(KF(i.auth_time)),issuedAtTime:Tx(KF(i.iat)),expirationTime:Tx(KF(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function KF(e){return Number(e)*1e3}function BV(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return kD("JWT malformed, contained fewer than 3 sections"),null;try{const i=Lve(n);return i?JSON.parse(i):(kD("Failed to decode base64 JWT payload"),null)}catch(i){return kD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lre(e){const t=BV(e);return rn(t,"internal-error"),rn(typeof t.exp<"u","internal-error"),rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ed&&$mt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function $mt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fmt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tx(this.lastLoginAt),this.creationTime=Tx(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(e){var t;const n=e.auth,r=await e.getIdToken(),i=await MS(e,ebe(n,{idToken:r}));rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?tbe(s.providerUserInfo):[],a=Bmt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new l8(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Lmt(e){const t=$r(e);await uk(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Bmt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function tbe(e){return e.map(t=>{var{providerId:n}=t,r=wT(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jmt(e,t){const n=await Qve(e,{},async()=>{const r=e2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=Zve(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xve.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zmt(e,t){return O_(e,"POST","/v2/accounts:revokeToken",_3(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){rn(t.idToken,"internal-error"),rn(typeof t.idToken<"u","internal-error"),rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):lre(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){rn(t.length!==0,"internal-error");const n=lre(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await jmt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Rv;return r&&(rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Rv,this.toJSON())}_performRefresh(){return Ud("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(e,t){rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Vd{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=wT(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fmt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new l8(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await MS(this,this.stsTokenManager.getToken(this.auth,t));return rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Mmt(this,t)}reload(){return Lmt(this)}_assign(t){this!==t&&(rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Vd(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await uk(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hf(this.auth.app))return Promise.reject(em(this.auth));const t=await this.getIdToken();return await MS(this,Omt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:E,isAnonymous:_,providerData:w,stsTokenManager:S}=n;rn(b&&S,t,"internal-error");const C=Rv.fromJSON(this.name,S);rn(typeof b=="string",t,"internal-error"),tp(f,t.name),tp(d,t.name),rn(typeof E=="boolean",t,"internal-error"),rn(typeof _=="boolean",t,"internal-error"),tp(h,t.name),tp(p,t.name),tp(m,t.name),tp(g,t.name),tp(y,t.name),tp(v,t.name);const A=new Vd({uid:b,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:_,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return w&&Array.isArray(w)&&(A.providerData=w.map(D=>Object.assign({},D))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new Rv;i.updateFromServerResponse(n);const s=new Vd({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await uk(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?tbe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Rv;a.updateFromIdToken(r);const u=new Vd({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new l8(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre=new Map;function Hd(e){xh(e instanceof Function,"Expected a class definition");let t=cre.get(e);return t?(xh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cre.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nbe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}nbe.type="NONE";const fre=nbe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(e,t,n){return`firebase:${e}:${t}:${n}`}class Pv{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=RD(this.userKey,i.apiKey,s),this.fullPersistenceKey=RD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Vd._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Pv(Hd(fre),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Hd(fre);const o=RD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Vd._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Pv(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Pv(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dre(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sbe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rbe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(abe(t))return"Blackberry";if(ube(t))return"Webos";if(jV(t))return"Safari";if((t.includes("chrome/")||ibe(t))&&!t.includes("edge/"))return"Chrome";if(obe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rbe(e=io()){return/firefox\//i.test(e)}function jV(e=io()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ibe(e=io()){return/crios\//i.test(e)}function sbe(e=io()){return/iemobile/i.test(e)}function obe(e=io()){return/android/i.test(e)}function abe(e=io()){return/blackberry/i.test(e)}function ube(e=io()){return/webos/i.test(e)}function E3(e=io()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Umt(e=io()){var t;return E3(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Vmt(){return rpt()&&document.documentMode===10}function lbe(e=io()){return E3(e)||obe(e)||ube(e)||abe(e)||/windows phone/i.test(e)||sbe(e)}function Hmt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cbe(e,t=[]){let n;switch(e){case"Browser":n=dre(io());break;case"Worker":n=`${dre(io())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oy}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qmt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wmt(e,t={}){return O_(e,"GET","/v2/passwordPolicy",_3(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gmt=6;class Ymt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Gmt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kmt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hre(this),this.idTokenSubscription=new hre(this),this.beforeStateQueue=new qmt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hd(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Pv.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ebe(this,{idToken:t}),r=await Vd._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(hf(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await uk(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Nmt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(hf(this.app))return Promise.reject(em(this));const n=t?$r(t):null;return n&&rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return hf(this.app)?Promise.reject(em(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return hf(this.app)?Promise.reject(em(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hd(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Wmt(this),n=new Ymt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new R_("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zmt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hd(t)||this._popupRedirectResolver;rn(n,this,"argument-error"),this.redirectPersistenceManager=await Pv.create(this,[Hd(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=cbe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Cmt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function n2(e){return $r(e)}class hre{constructor(t){this.auth=t,this.observer=null,this.addObserver=cpt(n=>this.observer=n)}get next(){return rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zV={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xmt(e){zV=e}function Qmt(e){return zV.loadJS(e)}function Jmt(){return zV.gapiScript}function Zmt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function egt(e,t){const n=P_(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(PS(s,t??{}))return i;Pf(i,"already-initialized")}return n.initialize({options:t})}function tgt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hd);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function ngt(e,t,n){const r=n2(e);rn(r._canInitEmulator,r,"emulator-config-failed"),rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=fbe(t),{host:o,port:a}=rgt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),igt()}function fbe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rgt(e){const t=fbe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:pre(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:pre(o)}}}function pre(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function igt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ud("not implemented")}_getIdTokenResponse(t){return Ud("not implemented")}_linkToIdToken(t,n){return Ud("not implemented")}_getReauthenticationResolver(t){return Ud("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ov(e,t){return Jve(e,"POST","/v1/accounts:signInWithIdp",_3(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sgt="http://localhost";class V0 extends dbe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new V0(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Pf("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=wT(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new V0(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ov(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Ov(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ov(t,n)}buildRequest(){const t={requestUri:sgt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=e2(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2 extends UV{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends r2{constructor(){super("facebook.com")}static credential(t){return V0._fromParams({providerId:_p.PROVIDER_ID,signInMethod:_p.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _p.credentialFromTaggedObject(t)}static credentialFromError(t){return _p.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _p.credential(t.oauthAccessToken)}catch{return null}}}_p.FACEBOOK_SIGN_IN_METHOD="facebook.com";_p.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends r2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return V0._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pd.credentialFromTaggedObject(t)}static credentialFromError(t){return Pd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Pd.credential(n,r)}catch{return null}}}Pd.GOOGLE_SIGN_IN_METHOD="google.com";Pd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends r2{constructor(){super("github.com")}static credential(t){return V0._fromParams({providerId:Ep.PROVIDER_ID,signInMethod:Ep.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ep.credentialFromTaggedObject(t)}static credentialFromError(t){return Ep.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ep.credential(t.oauthAccessToken)}catch{return null}}}Ep.GITHUB_SIGN_IN_METHOD="github.com";Ep.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends r2{constructor(){super("twitter.com")}static credential(t,n){return V0._fromParams({providerId:wp.PROVIDER_ID,signInMethod:wp.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return wp.credentialFromTaggedObject(t)}static credentialFromError(t){return wp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return wp.credential(n,r)}catch{return null}}}wp.TWITTER_SIGN_IN_METHOD="twitter.com";wp.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ogt(e,t){return Jve(e,"POST","/v1/accounts:signUp",_3(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Vd._fromIdTokenResponse(t,r,i),o=mre(r);return new _m({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=mre(r);return new _m({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function mre(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function agt(e){var t;if(hf(e.app))return Promise.reject(em(e));const n=n2(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new _m({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ogt(n,{returnSecureToken:!0}),i=await _m._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk extends ed{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lk.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new lk(t,n,r,i)}}function hbe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lk._fromErrorAndOperation(e,s,t,r):s})}async function ugt(e,t,n=!1){const r=await MS(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _m._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lgt(e,t,n=!1){const{auth:r}=e;if(hf(r.app))return Promise.reject(em(r));const i="reauthenticate";try{const s=await MS(e,hbe(r,i,t,e),n);rn(s.idToken,r,"internal-error");const o=BV(s.idToken);rn(o,r,"internal-error");const{sub:a}=o;return rn(e.uid===a,r,"user-mismatch"),_m._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pf(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cgt(e,t,n=!1){if(hf(e.app))return Promise.reject(em(e));const r="signIn",i=await hbe(e,r,t),s=await _m._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function fgt(e,t,n,r){return $r(e).onIdTokenChanged(t,n,r)}function dgt(e,t,n){return $r(e).beforeAuthStateChanged(t,n)}function hgt(e,t,n,r){return $r(e).onAuthStateChanged(t,n,r)}function pgt(e){return $r(e).signOut()}const ck="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pbe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ck,"1"),this.storage.removeItem(ck),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mgt(){const e=io();return jV(e)||E3(e)}const ggt=1e3,ygt=10;class mbe extends pbe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=mgt()&&Hmt(),this.fallbackToPolling=lbe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Vmt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,ygt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},ggt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}mbe.type="LOCAL";const vgt=mbe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gbe extends pbe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}gbe.type="SESSION";const ybe=gbe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bgt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new w3(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await bgt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}w3.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _gt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=VV("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(){return window}function Egt(e){Ef().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vbe(){return typeof Ef().WorkerGlobalScope<"u"&&typeof Ef().importScripts=="function"}async function wgt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xgt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Sgt(){return vbe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bbe="firebaseLocalStorageDb",Tgt=1,fk="firebaseLocalStorage",_be="fbase_key";class i2{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function x3(e,t){return e.transaction([fk],t?"readwrite":"readonly").objectStore(fk)}function Cgt(){const e=indexedDB.deleteDatabase(bbe);return new i2(e).toPromise()}function c8(){const e=indexedDB.open(bbe,Tgt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(fk,{keyPath:_be})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(fk)?t(r):(r.close(),await Cgt(),t(await c8()))})})}async function gre(e,t,n){const r=x3(e,!0).put({[_be]:t,value:n});return new i2(r).toPromise()}async function Agt(e,t){const n=x3(e,!1).get(t),r=await new i2(n).toPromise();return r===void 0?null:r.value}function yre(e,t){const n=x3(e,!0).delete(t);return new i2(n).toPromise()}const Dgt=800,Igt=3;class Ebe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await c8(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Igt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vbe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w3._getInstance(Sgt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await wgt(),!this.activeServiceWorker)return;this.sender=new _gt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||xgt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await c8();return await gre(t,ck,"1"),await yre(t,ck),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gre(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Agt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yre(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=x3(i,!1).getAll();return new i2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dgt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ebe.type="LOCAL";const Ngt=Ebe;new t2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wbe(e,t){return t?Hd(t):(rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV extends dbe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ov(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ov(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ov(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function kgt(e){return cgt(e.auth,new HV(e),e.bypassAuthState)}function Rgt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),lgt(n,new HV(e),e.bypassAuthState)}async function Pgt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),ugt(n,new HV(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xbe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return kgt;case"linkViaPopup":case"linkViaRedirect":return Pgt;case"reauthViaPopup":case"reauthViaRedirect":return Rgt;default:Pf(this.auth,"internal-error")}}resolve(t){xh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ogt=new t2(2e3,1e4);async function Mgt(e,t,n){if(hf(e.app))return Promise.reject(bc(e,"operation-not-supported-in-this-environment"));const r=n2(e);Amt(e,t,UV);const i=wbe(r,n);return new i0(r,"signInViaPopup",t,i).executeNotNull()}class i0 extends xbe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,i0.currentPopupAction&&i0.currentPopupAction.cancel(),i0.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return rn(t,this.auth,"internal-error"),t}async onExecution(){xh(this.filter.length===1,"Popup operations only handle one event");const t=VV();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(bc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,i0.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ogt.get())};t()}}i0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $gt="pendingRedirect",PD=new Map;class Fgt extends xbe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=PD.get(this.auth._key());if(!t){try{const r=await Lgt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}PD.set(this.auth._key(),t)}return this.bypassAuthState||PD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lgt(e,t){const n=zgt(t),r=jgt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Bgt(e,t){PD.set(e._key(),t)}function jgt(e){return Hd(e._redirectPersistence)}function zgt(e){return RD($gt,e.config.apiKey,e.name)}async function Ugt(e,t,n=!1){if(hf(e.app))return Promise.reject(em(e));const r=n2(e),i=wbe(r,t),o=await new Fgt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vgt=10*60*1e3;class Hgt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!qgt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Sbe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bc(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Vgt&&this.cachedEventUids.clear(),this.cachedEventUids.has(vre(t))}saveEventToCache(t){this.cachedEventUids.add(vre(t)),this.lastProcessedEventTime=Date.now()}}function vre(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Sbe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function qgt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sbe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wgt(e,t={}){return O_(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ggt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ygt=/^https?/;async function Kgt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Wgt(e);for(const n of t)try{if(Xgt(n))return}catch{}Pf(e,"unauthorized-domain")}function Xgt(e){const t=u8(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ygt.test(n))return!1;if(Ggt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qgt=new t2(3e4,6e4);function bre(){const e=Ef().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Jgt(e){return new Promise((t,n)=>{var r,i,s;function o(){bre(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bre(),n(bc(e,"network-request-failed"))},timeout:Qgt.get()})}if(!((i=(r=Ef().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Ef().gapi)===null||s===void 0)&&s.load)o();else{const a=Zmt("iframefcb");return Ef()[a]=()=>{gapi.load?o():n(bc(e,"network-request-failed"))},Qmt(`${Jmt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw OD=null,t})}let OD=null;function Zgt(e){return OD=OD||Jgt(e),OD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0t=new t2(5e3,15e3),t0t="__/auth/iframe",n0t="emulator/auth/iframe",r0t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i0t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s0t(e){const t=e.config;rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?LV(t,n0t):`https://${e.config.authDomain}/${t0t}`,r={apiKey:t.apiKey,appName:e.name,v:Oy},i=i0t.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${e2(r).slice(1)}`}async function o0t(e){const t=await Zgt(e),n=Ef().gapi;return rn(n,e,"internal-error"),t.open({where:document.body,url:s0t(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r0t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=bc(e,"network-request-failed"),a=Ef().setTimeout(()=>{s(o)},e0t.get());function u(){Ef().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u0t=500,l0t=600,c0t="_blank",f0t="http://localhost";class _re{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d0t(e,t,n,r=u0t,i=l0t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},a0t),{width:r.toString(),height:i.toString(),top:s,left:o}),l=io().toLowerCase();n&&(a=ibe(l)?c0t:n),rbe(l)&&(t=t||f0t,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Umt(l)&&a!=="_self")return h0t(t||"",a),new _re(null);const f=window.open(t||"",a,c);rn(f,e,"popup-blocked");try{f.focus()}catch{}return new _re(f)}function h0t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0t="__/auth/handler",m0t="emulator/auth/handler",g0t=encodeURIComponent("fac");async function Ere(e,t,n,r,i,s){rn(e.config.authDomain,e,"auth-domain-config-required"),rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Oy,eventId:i};if(t instanceof UV){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",lpt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof r2){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${g0t}=${encodeURIComponent(u)}`:"";return`${y0t(e)}?${e2(a).slice(1)}${l}`}function y0t({config:e}){return e.emulator?LV(e,m0t):`https://${e.authDomain}/${p0t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF="webStorageSupport";class v0t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ybe,this._completeRedirectFn=Ugt,this._overrideRedirectResult=Bgt}async _openPopup(t,n,r,i){var s;xh((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ere(t,n,r,u8(),i);return d0t(t,o,VV())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Ere(t,n,r,u8(),i);return Egt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xh(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await o0t(t),r=new Hgt(t);return n.register("authEvent",i=>(rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(XF,{type:XF},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[XF];o!==void 0&&n(!!o),Pf(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Kgt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return lbe()||jV()||E3()}}const Tbe=v0t;var wre="@firebase/auth",xre="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E0t(e){wh(new Rf("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cbe(e)},l=new Kmt(r,i,s,u);return tgt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),wh(new Rf("auth-internal",t=>{const n=n2(t.getProvider("auth").getImmediate());return(r=>new b0t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vc(wre,xre,_0t(e)),vc(wre,xre,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0t=5*60,x0t=Uve("authIdTokenMaxAge")||w0t;let Sre=null;const S0t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>x0t)return;const i=n==null?void 0:n.token;Sre!==i&&(Sre=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dk(e=MV()){const t=P_(e,"auth");if(t.isInitialized())return t.getImmediate();const n=egt(e,{popupRedirectResolver:Tbe,persistence:[Ngt,vgt,ybe]}),r=Uve("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=S0t(s.toString());dgt(n,o,()=>o(n.currentUser)),fgt(n,a=>o(a))}}const i=jve("auth");return i&&ngt(n,`http://${i}`),n}function T0t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Xmt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=bc("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",T0t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E0t("Browser");var C0t="firebase",A0t="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vc(C0t,A0t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cbe="firebasestorage.googleapis.com",Abe="storageBucket",D0t=2*60*1e3,I0t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends ed{constructor(t,n,r=0){super(QF(t),`Firebase Storage: ${n} (${QF(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ii.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return QF(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Di;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Di||(Di={}));function QF(e){return"storage/"+e}function qV(){const e="An unknown error occurred, please check the error payload for server response.";return new Ii(Di.UNKNOWN,e)}function N0t(e){return new Ii(Di.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function k0t(e){return new Ii(Di.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function R0t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ii(Di.UNAUTHENTICATED,e)}function P0t(){return new Ii(Di.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function O0t(e){return new Ii(Di.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function M0t(){return new Ii(Di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $0t(){return new Ii(Di.CANCELED,"User canceled the upload/download.")}function F0t(e){return new Ii(Di.INVALID_URL,"Invalid URL '"+e+"'.")}function L0t(e){return new Ii(Di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function B0t(){return new Ii(Di.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Abe+"' property when initializing the app?")}function j0t(){return new Ii(Di.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function z0t(){return new Ii(Di.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function U0t(e){return new Ii(Di.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function f8(e){return new Ii(Di.INVALID_ARGUMENT,e)}function Dbe(){return new Ii(Di.APP_DELETED,"The Firebase app was deleted.")}function V0t(e){return new Ii(Di.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cx(e,t){return new Ii(Di.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ME(e){throw new Ii(Di.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=ia.makeFromUrl(t,n)}catch{return new ia(t,"")}if(r.path==="")return r;throw L0t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===Cbe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<b.length;E++){const _=b[E],w=_.regex.exec(t);if(w){const S=w[_.indices.bucket];let C=w[_.indices.path];C||(C=""),r=new ia(S,C),_.postModify(r);break}}if(r==null)throw F0t(t);return r}}class H0t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function W0t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0t(e){return e!==void 0}function Y0t(e){return typeof e=="object"&&!Array.isArray(e)}function WV(e){return typeof e=="string"||e instanceof String}function Tre(e){return GV()&&e instanceof Blob}function GV(){return typeof Blob<"u"}function d8(e,t,n,r){if(r<t)throw f8(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw f8(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Ibe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m0;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(m0||(m0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new mA(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===m0.NO_ERROR,u=s.getStatus();if(!a||K0t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===m0.ABORT;r(!1,new mA(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new mA(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());G0t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=qV();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Dbe():$0t();o(u)}else{const u=M0t();o(u)}};this.canceled_?n(!1,new mA(!1,null,!0)):this.backoffId_=q0t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&W0t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mA{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Q0t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function J0t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Z0t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function eyt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function tyt(e,t,n,r,i,s,o=!0){const a=Ibe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return Z0t(l,t),Q0t(l,n),J0t(l,s),eyt(l,r),new X0t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nyt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ryt(...e){const t=nyt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(GV())return new Blob(e);throw new Ii(Di.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function iyt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function syt(e){if(typeof atob>"u")throw U0t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class JF{constructor(t,n){this.data=t,this.contentType=n||null}}function oyt(e,t){switch(e){case pf.RAW:return new JF(Nbe(t));case pf.BASE64:case pf.BASE64URL:return new JF(kbe(e,t));case pf.DATA_URL:return new JF(uyt(t),lyt(t))}throw qV()}function Nbe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function ayt(e){let t;try{t=decodeURIComponent(e)}catch{throw Cx(pf.DATA_URL,"Malformed data URL.")}return Nbe(t)}function kbe(e,t){switch(e){case pf.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Cx(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pf.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Cx(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=syt(t)}catch(i){throw i.message.includes("polyfill")?i:Cx(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Rbe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Cx(pf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=cyt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function uyt(e){const t=new Rbe(e);return t.base64?kbe(pf.BASE64,t.rest):ayt(t.rest)}function lyt(e){return new Rbe(e).contentType}function cyt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,n){let r=0,i="";Tre(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Tre(this.data_)){const r=this.data_,i=iyt(r,t,n);return i===null?null:new xp(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new xp(r,!0)}}static getBlob(...t){if(GV()){const n=t.map(r=>r instanceof xp?r.data_:r);return new xp(ryt.apply(null,n))}else{const n=t.map(o=>WV(o)?oyt(pf.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new xp(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(e){let t;try{t=JSON.parse(e)}catch{return null}return Y0t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fyt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function dyt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Pbe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hyt(e,t){return t}class Go{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||hyt}}let gA=null;function pyt(e){return!WV(e)||e.length<2?e:Pbe(e)}function Obe(){if(gA)return gA;const e=[];e.push(new Go("bucket")),e.push(new Go("generation")),e.push(new Go("metageneration")),e.push(new Go("name","fullPath",!0));function t(s,o){return pyt(o)}const n=new Go("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Go("size");return i.xform=r,e.push(i),e.push(new Go("timeCreated")),e.push(new Go("updated")),e.push(new Go("md5Hash",null,!0)),e.push(new Go("cacheControl",null,!0)),e.push(new Go("contentDisposition",null,!0)),e.push(new Go("contentEncoding",null,!0)),e.push(new Go("contentLanguage",null,!0)),e.push(new Go("contentType",null,!0)),e.push(new Go("metadata","customMetadata",!0)),gA=e,gA}function myt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new ia(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function gyt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return myt(r,e),r}function Mbe(e,t,n){const r=YV(t);return r===null?null:gyt(e,r,n)}function yyt(e,t,n,r){const i=YV(t);if(i===null||!WV(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=s2(d,n,r),p=Ibe({alt:"media",token:l});return h+p})[0]}function vyt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cre="prefixes",Are="items";function byt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Cre])for(const i of n[Cre]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new ia(t,s));r.prefixes.push(o)}if(n[Are])for(const i of n[Are]){const s=e._makeStorageReference(new ia(t,i.name));r.items.push(s)}return r}function _yt(e,t,n){const r=YV(n);return r===null?null:byt(e,t,r)}class S3{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(e){if(!e)throw qV()}function Eyt(e,t){function n(r,i){const s=Mbe(e,i,t);return KV(s!==null),s}return n}function wyt(e,t){function n(r,i){const s=_yt(e,t,i);return KV(s!==null),s}return n}function xyt(e,t){function n(r,i){const s=Mbe(e,i,t);return KV(s!==null),yyt(s,i,e.host,e._protocol)}return n}function XV(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=P0t():i=R0t():n.getStatus()===402?i=k0t(e.bucket):n.getStatus()===403?i=O0t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function $be(e){const t=XV(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=N0t(e.path)),s.serverResponse=i.serverResponse,s}return n}function Syt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=s2(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new S3(a,u,wyt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=XV(t),c}function Tyt(e,t,n){const r=t.fullServerUrl(),i=s2(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new S3(i,s,xyt(e,n),o);return a.errorHandler=$be(t),a}function Cyt(e,t){const n=t.fullServerUrl(),r=s2(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new S3(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=$be(t),a}function Ayt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Dyt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Ayt(null,t)),r}function Iyt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let E=0;E<2;E++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=Dyt(t,r,i),c=vyt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=xp.getBlob(f,r,d);if(h===null)throw j0t();const p={name:l.fullPath},m=s2(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new S3(m,g,Eyt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=XV(t),v}class Nyt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=m0.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=m0.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=m0.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw ME("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ME("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ME("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ME("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ME("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class kyt extends Nyt{initXhr(){this.xhr_.responseType="text"}}function T3(){return new kyt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(t,n){this._service=t,n instanceof ia?this._location=n:this._location=ia.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new H0(t,n)}get root(){const t=new ia(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pbe(this._location.path)}get storage(){return this._service}get parent(){const t=fyt(this._location.path);if(t===null)return null;const n=new ia(this._location.bucket,t);return new H0(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw V0t(t)}}function Ryt(e,t,n){e._throwIfRoot("uploadBytes");const r=Iyt(e.storage,e._location,Obe(),new xp(t,!0),n);return e.storage.makeRequestWithTokens(r,T3).then(i=>({metadata:i,ref:e}))}function Pyt(e){const t={prefixes:[],items:[]};return Fbe(e,t).then(()=>t)}async function Fbe(e,t,n){const i=await Oyt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Fbe(e,t,i.nextPageToken)}function Oyt(e,t){t!=null&&typeof t.maxResults=="number"&&d8("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Syt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,T3)}function Myt(e){e._throwIfRoot("getDownloadURL");const t=Tyt(e.storage,e._location,Obe());return e.storage.makeRequestWithTokens(t,T3).then(n=>{if(n===null)throw z0t();return n})}function $yt(e){e._throwIfRoot("deleteObject");const t=Cyt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,T3)}function Fyt(e,t){const n=dyt(e._location.path,t),r=new ia(e._location.bucket,n);return new H0(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lyt(e){return/^[A-Za-z]+:\/\//.test(e)}function Byt(e,t){return new H0(e,t)}function Lbe(e,t){if(e instanceof QV){const n=e;if(n._bucket==null)throw B0t();const r=new H0(n,n._bucket);return t!=null?Lbe(r,t):r}else return t!==void 0?Fyt(e,t):e}function jyt(e,t){if(t&&Lyt(t)){if(e instanceof QV)return Byt(e,t);throw f8("To use ref(service, url), the first argument must be a Storage instance.")}else return Lbe(e,t)}function Dre(e,t){const n=t==null?void 0:t[Abe];return n==null?null:ia.makeFromBucketSpec(n,e)}function zyt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:Jht(i,e.app.options.projectId))}class QV{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Cbe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=D0t,this._maxUploadRetryTime=I0t,this._requests=new Set,i!=null?this._bucket=ia.makeFromBucketSpec(i,this._host):this._bucket=Dre(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ia.makeFromBucketSpec(this._url,t):this._bucket=Dre(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){d8("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){d8("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new H0(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new H0t(Dbe());{const o=tyt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Ire="@firebase/storage",Nre="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bbe="storage";function ZF(e,t,n){return e=$r(e),Ryt(e,t,n)}function $E(e){return e=$r(e),Pyt(e)}function e6(e){return e=$r(e),Myt(e)}function kre(e){return e=$r(e),$yt(e)}function Yu(e,t){return e=$r(e),jyt(e,t)}function Uyt(e=MV(),t){e=$r(e);const r=P_(e,Bbe).getImmediate({identifier:t}),i=Qht("storage");return i&&Vyt(r,...i),r}function Vyt(e,t,n,r={}){zyt(e,t,n,r)}function Hyt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new QV(n,r,i,t,Oy)}function qyt(){wh(new Rf(Bbe,Hyt,"PUBLIC").setMultipleInstances(!0)),vc(Ire,Nre,""),vc(Ire,Nre,"esm2017")}qyt();var Rre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g0,jbe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(D,I,O){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return C.prototype[I].apply(D,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,A){A||(A=0);var D=Array(16);if(typeof C=="string")for(var I=0;16>I;++I)D[I]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(I=0;16>I;++I)D[I]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],I=S.g[2];var O=S.g[3],R=C+(O^A&(I^O))+D[0]+3614090360&4294967295;C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[1]+3905402710&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[2]+606105819&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[3]+3250441966&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(O^A&(I^O))+D[4]+4118548399&4294967295,C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[5]+1200080426&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[6]+2821735955&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[7]+4249261313&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(O^A&(I^O))+D[8]+1770035416&4294967295,C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[9]+2336552879&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[10]+4294925233&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[11]+2304563134&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(O^A&(I^O))+D[12]+1804603682&4294967295,C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[13]+4254626195&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[14]+2792965006&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[15]+1236535329&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(I^O&(A^I))+D[1]+4129170786&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[6]+3225465664&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[11]+643717713&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[0]+3921069994&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(I^O&(A^I))+D[5]+3593408605&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[10]+38016083&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[15]+3634488961&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[4]+3889429448&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(I^O&(A^I))+D[9]+568446438&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[14]+3275163606&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[3]+4107603335&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[8]+1163531501&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(I^O&(A^I))+D[13]+2850285829&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[2]+4243563512&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[7]+1735328473&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[12]+2368359562&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(A^I^O)+D[5]+4294588738&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[8]+2272392833&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[11]+1839030562&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[14]+4259657740&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(A^I^O)+D[1]+2763975236&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[4]+1272893353&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[7]+4139469664&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[10]+3200236656&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(A^I^O)+D[13]+681279174&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[0]+3936430074&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[3]+3572445317&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[6]+76029189&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(A^I^O)+D[9]+3654602809&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[12]+3873151461&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[15]+530742520&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[2]+3299628645&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(I^(A|~O))+D[0]+4096336452&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[7]+1126891415&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[14]+2878612391&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[5]+4237533241&4294967295,A=I+(R<<21&4294967295|R>>>11),R=C+(I^(A|~O))+D[12]+1700485571&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[3]+2399980690&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[10]+4293915773&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[1]+2240044497&4294967295,A=I+(R<<21&4294967295|R>>>11),R=C+(I^(A|~O))+D[8]+1873313359&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[15]+4264355552&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[6]+2734768916&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[13]+1309151649&4294967295,A=I+(R<<21&4294967295|R>>>11),R=C+(I^(A|~O))+D[4]+4149444226&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[11]+3174756917&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[2]+718787259&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,D=this.B,I=this.h,O=0;O<C;){if(I==0)for(;O<=A;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<C;)if(D[I++]=S.charCodeAt(O++),I==this.blockSize){i(this,D),I=0;break}}else for(;O<C;)if(D[I++]=S[O++],I==this.blockSize){i(this,D),I=0;break}}this.h=I,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var D=0;32>D;D+=8)S[A++]=this.g[C]>>>D&255;return S};function s(S,C){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function o(S,C){this.h=C;for(var A=[],D=!0,I=S.length-1;0<=I;I--){var O=S[I]|0;D&&O==C||(A[I]=O,D=!1)}this.g=A}var a={};function u(S){return-128<=S&&128>S?s(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var C=[],A=1,D=0;S>=A;D++)C[D]=S/A|0,A*=4294967296;return new o(C,0)}function c(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return g(c(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),D=f,I=0;I<S.length;I+=8){var O=Math.min(8,S.length-I),R=parseInt(S.substring(I,I+O),C);8>O?(O=l(Math.pow(C,O)),D=D.j(O).add(l(R))):(D=D.j(A),D=D.add(l(R)))}return D}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var D=this.i(A);S+=(0<=D?D:4294967296+D)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var C=l(Math.pow(S,6)),A=this,D="";;){var I=E(A,C).g;A=y(A,I.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=I,p(A))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var C=S.g.length,A=[],D=0;D<C;D++)A[D]=~S.g[D];return new o(A,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0,I=0;I<=C;I++){var O=D+(this.i(I)&65535)+(S.i(I)&65535),R=(O>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);D=R>>>16,O&=65535,R&=65535,A[I]=R<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,C){return S.add(g(C))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],D=0;D<2*C;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var I=0;I<S.g.length;I++){var O=this.i(D)>>>16,R=this.i(D)&65535,M=S.i(I)>>>16,F=S.i(I)&65535;A[2*D+2*I]+=R*F,v(A,2*D+2*I),A[2*D+2*I+1]+=O*F,v(A,2*D+2*I+1),A[2*D+2*I+1]+=R*M,v(A,2*D+2*I+1),A[2*D+2*I+2]+=O*M,v(A,2*D+2*I+2)}for(D=0;D<C;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=C;D<2*C;D++)A[D]=0;return new o(A,0)};function v(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function b(S,C){this.g=S,this.h=C}function E(S,C){if(p(C))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return C=E(g(S),C),new b(g(C.g),g(C.h));if(m(C))return C=E(S,g(C)),new b(g(C.g),C.h);if(30<S.g.length){if(m(S)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,D=C;0>=D.l(S);)A=_(A),D=_(D);var I=w(A,1),O=w(D,1);for(D=w(D,2),A=w(A,2);!p(D);){var R=O.add(D);0>=R.l(S)&&(I=I.add(A),O=R),D=w(D,1),A=w(A,1)}return C=y(S,I.j(C)),new b(I,C)}for(I=f;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=l(A),R=O.j(C);m(R)||0<R.l(S);)A-=D,O=l(A),R=O.j(C);p(O)&&(O=d),I=I.add(O),S=y(S,R)}return new b(I,S)}e.A=function(S){return E(this,S).h},e.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)&S.i(D);return new o(A,this.h&S.h)},e.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)|S.i(D);return new o(A,this.h|S.h)},e.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)^S.i(D);return new o(A,this.h^S.h)};function _(S){for(var C=S.g.length+1,A=[],D=0;D<C;D++)A[D]=S.i(D)<<1|S.i(D-1)>>>31;return new o(A,S.h)}function w(S,C){var A=C>>5;C%=32;for(var D=S.g.length-A,I=[],O=0;O<D;O++)I[O]=0<C?S.i(O+A)>>>C|S.i(O+A+1)<<32-C:S.i(O+A);return new o(I,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jbe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,g0=o}).apply(typeof Rre<"u"?Rre:typeof self<"u"?self:typeof window<"u"?window:{});var yA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zbe,Ube,Aw,Vbe,MD,h8,Hbe,qbe,Wbe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,L,H){return T==Array.prototype||T==Object.prototype||(T[L]=H.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof yA=="object"&&yA];for(var L=0;L<T.length;++L){var H=T[L];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=n(this);function i(T,L){if(L)e:{var H=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var Ee=T[Q];if(!(Ee in H))break e;H=H[Ee]}T=T[T.length-1],Q=H[T],L=L(Q),L!=Q&&L!=null&&t(H,T,{configurable:!0,writable:!0,value:L})}}function s(T,L){T instanceof String&&(T+="");var H=0,Q=!1,Ee={next:function(){if(!Q&&H<T.length){var Me=H++;return{value:L(Me,T[Me]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return Ee[Symbol.iterator]=function(){return Ee},Ee}i("Array.prototype.values",function(T){return T||function(){return s(this,function(L,H){return H})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(T){var L=typeof T;return L=L!="object"?L:T?Array.isArray(T)?"array":L:"null",L=="array"||L=="object"&&typeof T.length=="number"}function l(T){var L=typeof T;return L=="object"&&T!=null||L=="function"}function c(T,L,H){return T.call.apply(T.bind,arguments)}function f(T,L,H){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var Ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ee,Q),T.apply(L,Ee)}}return function(){return T.apply(L,arguments)}}function d(T,L,H){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(T,L){var H=Array.prototype.slice.call(arguments,1);return function(){var Q=H.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,L){function H(){}H.prototype=L.prototype,T.aa=L.prototype,T.prototype=new H,T.prototype.constructor=T,T.Qb=function(Q,Ee,Me){for(var pt=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)pt[Tr-2]=arguments[Tr];return L.prototype[Ee].apply(Q,pt)}}function m(T){const L=T.length;if(0<L){const H=Array(L);for(let Q=0;Q<L;Q++)H[Q]=T[Q];return H}return[]}function g(T,L){for(let H=1;H<arguments.length;H++){const Q=arguments[H];if(u(Q)){const Ee=T.length||0,Me=Q.length||0;T.length=Ee+Me;for(let pt=0;pt<Me;pt++)T[Ee+pt]=Q[pt]}else T.push(Q)}}class y{constructor(L,H){this.i=L,this.j=H,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(T){return/^[\s\xa0]*$/.test(T)}function b(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function E(T){return E[" "](T),T}E[" "]=function(){};var _=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function w(T,L,H){for(const Q in T)L.call(H,T[Q],Q,T)}function S(T,L){for(const H in T)L.call(void 0,T[H],H,T)}function C(T){const L={};for(const H in T)L[H]=T[H];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(T,L){let H,Q;for(let Ee=1;Ee<arguments.length;Ee++){Q=arguments[Ee];for(H in Q)T[H]=Q[H];for(let Me=0;Me<A.length;Me++)H=A[Me],Object.prototype.hasOwnProperty.call(Q,H)&&(T[H]=Q[H])}}function I(T){var L=1;T=T.split(":");const H=[];for(;0<L&&T.length;)H.push(T.shift()),L--;return T.length&&H.push(T.join(":")),H}function O(T){a.setTimeout(()=>{throw T},0)}function R(){var T=V;let L=null;return T.g&&(L=T.g,T.g=T.g.next,T.g||(T.h=null),L.next=null),L}class M{constructor(){this.h=this.g=null}add(L,H){const Q=F.get();Q.set(L,H),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new P,T=>T.reset());class P{constructor(){this.next=this.g=this.h=null}set(L,H){this.h=L,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let j,z=!1,V=new M,$=()=>{const T=a.Promise.resolve(void 0);j=()=>{T.then(U)}};var U=()=>{for(var T;T=R();){try{T.h.call(T.g)}catch(H){O(H)}var L=F;L.j(T),100>L.h&&(L.h++,T.next=L.g,L.g=T)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(T,L){this.type=T,this.g=this.target=L,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,L=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const H=()=>{};a.addEventListener("test",H,L),a.removeEventListener("test",H,L)}catch{}return T}();function Y(T,L){if(B.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var H=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=L,L=T.relatedTarget){if(_){e:{try{E(L.nodeName);var Ee=!0;break e}catch{}Ee=!1}Ee||(L=null)}}else H=="mouseover"?L=T.fromElement:H=="mouseout"&&(L=T.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:re[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&Y.aa.h.call(this)}}p(Y,B);var re={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),_e=0;function de(T,L,H,Q,Ee){this.listener=T,this.proxy=null,this.src=L,this.type=H,this.capture=!!Q,this.ha=Ee,this.key=++_e,this.da=this.fa=!1}function ye(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Ce(T){this.src=T,this.g={},this.h=0}Ce.prototype.add=function(T,L,H,Q,Ee){var Me=T.toString();T=this.g[Me],T||(T=this.g[Me]=[],this.h++);var pt=qe(T,L,Q,Ee);return-1<pt?(L=T[pt],H||(L.fa=!1)):(L=new de(L,this.src,Me,!!Q,Ee),L.fa=H,T.push(L)),L};function ve(T,L){var H=L.type;if(H in T.g){var Q=T.g[H],Ee=Array.prototype.indexOf.call(Q,L,void 0),Me;(Me=0<=Ee)&&Array.prototype.splice.call(Q,Ee,1),Me&&(ye(L),T.g[H].length==0&&(delete T.g[H],T.h--))}}function qe(T,L,H,Q){for(var Ee=0;Ee<T.length;++Ee){var Me=T[Ee];if(!Me.da&&Me.listener==L&&Me.capture==!!H&&Me.ha==Q)return Ee}return-1}var He="closure_lm_"+(1e6*Math.random()|0),ht={};function rt(T,L,H,Q,Ee){if(Array.isArray(L)){for(var Me=0;Me<L.length;Me++)rt(T,L[Me],H,Q,Ee);return null}return H=me(H),T&&T[pe]?T.K(L,H,l(Q)?!!Q.capture:!!Q,Ee):Pe(T,L,H,!1,Q,Ee)}function Pe(T,L,H,Q,Ee,Me){if(!L)throw Error("Invalid event type");var pt=l(Ee)?!!Ee.capture:!!Ee,Tr=G(T);if(Tr||(T[He]=Tr=new Ce(T)),H=Tr.add(L,H,Q,pt,Me),H.proxy)return H;if(Q=Be(),H.proxy=Q,Q.src=T,Q.listener=H,T.addEventListener)q||(Ee=pt),Ee===void 0&&(Ee=!1),T.addEventListener(L.toString(),Q,Ee);else if(T.attachEvent)T.attachEvent(Ft(L.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return H}function Be(){function T(H){return L.call(T.src,T.listener,H)}const L=bt;return T}function Xe(T,L,H,Q,Ee){if(Array.isArray(L))for(var Me=0;Me<L.length;Me++)Xe(T,L[Me],H,Q,Ee);else Q=l(Q)?!!Q.capture:!!Q,H=me(H),T&&T[pe]?(T=T.i,L=String(L).toString(),L in T.g&&(Me=T.g[L],H=qe(Me,H,Q,Ee),-1<H&&(ye(Me[H]),Array.prototype.splice.call(Me,H,1),Me.length==0&&(delete T.g[L],T.h--)))):T&&(T=G(T))&&(L=T.g[L.toString()],T=-1,L&&(T=qe(L,H,Q,Ee)),(H=-1<T?L[T]:null)&&mt(H))}function mt(T){if(typeof T!="number"&&T&&!T.da){var L=T.src;if(L&&L[pe])ve(L.i,T);else{var H=T.type,Q=T.proxy;L.removeEventListener?L.removeEventListener(H,Q,T.capture):L.detachEvent?L.detachEvent(Ft(H),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(H=G(L))?(ve(H,T),H.h==0&&(H.src=null,L[He]=null)):ye(T)}}}function Ft(T){return T in ht?ht[T]:ht[T]="on"+T}function bt(T,L){if(T.da)T=!0;else{L=new Y(L,this);var H=T.listener,Q=T.ha||T.src;T.fa&&mt(T),T=H.call(Q,L)}return T}function G(T){return T=T[He],T instanceof Ce?T:null}var ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(T){return typeof T=="function"?T:(T[ie]||(T[ie]=function(L){return T.handleEvent(L)}),T[ie])}function J(){W.call(this),this.i=new Ce(this),this.M=this,this.F=null}p(J,W),J.prototype[pe]=!0,J.prototype.removeEventListener=function(T,L,H,Q){Xe(this,T,L,H,Q)};function se(T,L){var H,Q=T.F;if(Q)for(H=[];Q;Q=Q.F)H.push(Q);if(T=T.M,Q=L.type||L,typeof L=="string")L=new B(L,T);else if(L instanceof B)L.target=L.target||T;else{var Ee=L;L=new B(Q,T),D(L,Ee)}if(Ee=!0,H)for(var Me=H.length-1;0<=Me;Me--){var pt=L.g=H[Me];Ee=ce(pt,Q,!0,L)&&Ee}if(pt=L.g=T,Ee=ce(pt,Q,!0,L)&&Ee,Ee=ce(pt,Q,!1,L)&&Ee,H)for(Me=0;Me<H.length;Me++)pt=L.g=H[Me],Ee=ce(pt,Q,!1,L)&&Ee}J.prototype.N=function(){if(J.aa.N.call(this),this.i){var T=this.i,L;for(L in T.g){for(var H=T.g[L],Q=0;Q<H.length;Q++)ye(H[Q]);delete T.g[L],T.h--}}this.F=null},J.prototype.K=function(T,L,H,Q){return this.i.add(String(T),L,!1,H,Q)},J.prototype.L=function(T,L,H,Q){return this.i.add(String(T),L,!0,H,Q)};function ce(T,L,H,Q){if(L=T.i.g[String(L)],!L)return!0;L=L.concat();for(var Ee=!0,Me=0;Me<L.length;++Me){var pt=L[Me];if(pt&&!pt.da&&pt.capture==H){var Tr=pt.listener,Fs=pt.ha||pt.src;pt.fa&&ve(T.i,pt),Ee=Tr.call(Fs,Q)!==!1&&Ee}}return Ee&&!Q.defaultPrevented}function Se(T,L,H){if(typeof T=="function")H&&(T=d(T,H));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(T,L||0)}function Te(T){T.g=Se(()=>{T.g=null,T.i&&(T.i=!1,Te(T))},T.l);const L=T.h;T.h=null,T.m.apply(null,L)}class Ge extends W{constructor(L,H){super(),this.m=L,this.l=H,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(T){W.call(this),this.h=T,this.g={}}p(je,W);var Ct=[];function Ot(T){w(T.g,function(L,H){this.g.hasOwnProperty(H)&&mt(L)},T),T.g={}}je.prototype.N=function(){je.aa.N.call(this),Ot(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dt=a.JSON.stringify,Vt=a.JSON.parse,Zt=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function an(){}an.prototype.h=null;function gr(T){return T.h||(T.h=T.i())}function lr(){}var fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xr(){B.call(this,"d")}p(Xr,B);function er(){B.call(this,"c")}p(er,B);var gi={},$l=null;function Vo(){return $l=$l||new J}gi.La="serverreachability";function Hu(T){B.call(this,gi.La,T)}p(Hu,B);function Yn(T){const L=Vo();se(L,new Hu(L))}gi.STAT_EVENT="statevent";function Lr(T,L){B.call(this,gi.STAT_EVENT,T),this.stat=L}p(Lr,B);function yr(T){const L=Vo();se(L,new Lr(L,T))}gi.Ma="timingevent";function ao(T,L){B.call(this,gi.Ma,T),this.size=L}p(ao,B);function Ms(T,L){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},L)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function ue(T,L,H,Q,Ee,Me){T.info(function(){if(T.g)if(Me)for(var pt="",Tr=Me.split("&"),Fs=0;Fs<Tr.length;Fs++){var Kn=Tr[Fs].split("=");if(1<Kn.length){var fo=Kn[0];Kn=Kn[1];var ho=fo.split("_");pt=2<=ho.length&&ho[1]=="type"?pt+(fo+"="+Kn+"&"):pt+(fo+"=redacted&")}}else pt=null;else pt=Me;return"XMLHTTP REQ ("+Q+") [attempt "+Ee+"]: "+L+`
`+H+`
`+pt})}function te(T,L,H,Q,Ee,Me,pt){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+Ee+"]: "+L+`
`+H+`
`+Me+" "+pt})}function le(T,L,H,Q){T.info(function(){return"XMLHTTP TEXT ("+L+"): "+Ae(T,H)+(Q?" "+Q:"")})}function De(T,L){T.info(function(){return"TIMEOUT: "+L})}$s.prototype.info=function(){};function Ae(T,L){if(!T.g)return L;if(!L)return null;try{var H=JSON.parse(L);if(H){for(T=0;T<H.length;T++)if(Array.isArray(H[T])){var Q=H[T];if(!(2>Q.length)){var Ee=Q[1];if(Array.isArray(Ee)&&!(1>Ee.length)){var Me=Ee[0];if(Me!="noop"&&Me!="stop"&&Me!="close")for(var pt=1;pt<Ee.length;pt++)Ee[pt]=""}}}}return Dt(H)}catch{return L}}var at={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xt;function _n(){}p(_n,an),_n.prototype.g=function(){return new XMLHttpRequest},_n.prototype.i=function(){return{}},Xt=new _n;function Sn(T,L,H,Q){this.j=T,this.i=L,this.l=H,this.R=Q||1,this.U=new je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var Mn={},tr={};function Ht(T,L,H){T.L=1,T.v=Nn(Je(L)),T.m=H,T.P=!0,$n(T,null)}function $n(T,L){T.F=Date.now(),Gt(T),T.A=Je(T.v);var H=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),tC(H.i,"t",Q),T.C=0,H=T.j.J,T.h=new un,T.g=OK(T.j,H?L:null,!T.m),0<T.O&&(T.M=new Ge(d(T.Y,T,T.g),T.O)),L=T.U,H=T.g,Q=T.ca;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(Ct[0]=Ee.toString()),Ee=Ct);for(var Me=0;Me<Ee.length;Me++){var pt=rt(H,Ee[Me],Q||L.handleEvent,!1,L.h||L);if(!pt)break;L.g[pt.key]=pt}L=T.H?C(T.H):{},T.m?(T.u||(T.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,L)):(T.u="GET",T.g.ea(T.A,T.u,null,L)),Yn(),ue(T.i,T.u,T.A,T.l,T.R,T.m)}Sn.prototype.ca=function(T){T=T.target;const L=this.M;L&&Ni(T)==3?L.j():this.Y(T)},Sn.prototype.Y=function(T){try{if(T==this.g)e:{const ho=Ni(this.g);var L=this.g.Ba();const i1=this.g.Z();if(!(3>ho)&&(ho!=3||this.g&&(this.h.h||this.g.oa()||co(this.g)))){this.J||ho!=4||L==7||(L==8||0>=i1?Yn(3):Yn(2)),vr(this);var H=this.g.Z();this.X=H;t:if(cr(this)){var Q=co(this.g);T="";var Ee=Q.length,Me=Ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),yi(this);var pt="";break t}this.h.i=new a.TextDecoder}for(L=0;L<Ee;L++)this.h.h=!0,T+=this.h.i.decode(Q[L],{stream:!(Me&&L==Ee-1)});Q.length=0,this.h.g+=T,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=H==200,te(this.i,this.u,this.A,this.l,this.R,ho,H),this.o){if(this.T&&!this.K){t:{if(this.g){var Tr,Fs=this.g;if((Tr=Fs.g?Fs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Tr)){var Kn=Tr;break t}}Kn=null}if(H=Kn)le(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qr(this,H);else{this.o=!1,this.s=3,yr(12),br(this),yi(this);break e}}if(this.P){H=!0;let Fl;for(;!this.J&&this.C<pt.length;)if(Fl=bn(this,pt),Fl==tr){ho==4&&(this.s=4,yr(14),H=!1),le(this.i,this.l,null,"[Incomplete Response]");break}else if(Fl==Mn){this.s=4,yr(15),le(this.i,this.l,pt,"[Invalid Chunk]"),H=!1;break}else le(this.i,this.l,Fl,null),Qr(this,Fl);if(cr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ho!=4||pt.length!=0||this.h.h||(this.s=1,yr(16),H=!1),this.o=this.o&&H,!H)le(this.i,this.l,pt,"[Invalid Chunked Response]"),br(this),yi(this);else if(0<pt.length&&!this.W){this.W=!0;var fo=this.j;fo.g==this&&fo.ba&&!fo.M&&(fo.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),HM(fo),fo.M=!0,yr(11))}}else le(this.i,this.l,pt,null),Qr(this,pt);ho==4&&br(this),this.o&&!this.J&&(ho==4?NK(this.j,this):(this.o=!1,Gt(this)))}else gg(this.g),H==400&&0<pt.indexOf("Unknown SID")?(this.s=3,yr(12)):(this.s=0,yr(13)),br(this),yi(this)}}}catch{}finally{}};function cr(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function bn(T,L){var H=T.C,Q=L.indexOf(`
`,H);return Q==-1?tr:(H=Number(L.substring(H,Q)),isNaN(H)?Mn:(Q+=1,Q+H>L.length?tr:(L=L.slice(Q,Q+H),T.C=Q+H,L)))}Sn.prototype.cancel=function(){this.J=!0,br(this)};function Gt(T){T.S=Date.now()+T.I,Hn(T,T.I)}function Hn(T,L){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Ms(d(T.ba,T),L)}function vr(T){T.B&&(a.clearTimeout(T.B),T.B=null)}Sn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(De(this.i,this.A),this.L!=2&&(Yn(),yr(17)),br(this),this.s=2,yi(this)):Hn(this,this.S-T)};function yi(T){T.j.G==0||T.J||NK(T.j,T)}function br(T){vr(T);var L=T.M;L&&typeof L.ma=="function"&&L.ma(),T.M=null,Ot(T.U),T.g&&(L=T.g,T.g=null,L.abort(),L.ma())}function Qr(T,L){try{var H=T.j;if(H.G!=0&&(H.g==T||Uc(H.h,T))){if(!T.K&&Uc(H.h,T)&&H.G==3){try{var Q=H.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var Ee=Q;if(Ee[0]==0){e:if(!H.u){if(H.g)if(H.g.F+3e3<T.F)uC(H),oC(H);else break e;VM(H),yr(18)}}else H.za=Ee[1],0<H.za-H.T&&37500>Ee[2]&&H.F&&H.v==0&&!H.C&&(H.C=Ms(d(H.Za,H),6e3));if(1>=qu(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else yg(H,11)}else if((T.K||H.g==T)&&uC(H),!v(L))for(Ee=H.Da.g.parse(L),L=0;L<Ee.length;L++){let Kn=Ee[L];if(H.T=Kn[0],Kn=Kn[1],H.G==2)if(Kn[0]=="c"){H.K=Kn[1],H.ia=Kn[2];const fo=Kn[3];fo!=null&&(H.la=fo,H.j.info("VER="+H.la));const ho=Kn[4];ho!=null&&(H.Aa=ho,H.j.info("SVER="+H.Aa));const i1=Kn[5];i1!=null&&typeof i1=="number"&&0<i1&&(Q=1.5*i1,H.L=Q,H.j.info("backChannelRequestTimeoutMs_="+Q)),Q=H;const Fl=T.g;if(Fl){const cC=Fl.g?Fl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cC){var Me=Q.h;Me.g||cC.indexOf("spdy")==-1&&cC.indexOf("quic")==-1&&cC.indexOf("h2")==-1||(Me.j=Me.l,Me.g=new Set,Me.h&&(K(Me,Me.h),Me.h=null))}if(Q.D){const qM=Fl.g?Fl.g.getResponseHeader("X-HTTP-Session-Id"):null;qM&&(Q.ya=qM,Mt(Q.I,Q.D,qM))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-T.F,H.j.info("Handshake RTT: "+H.R+"ms")),Q=H;var pt=T;if(Q.qa=PK(Q,Q.J?Q.ia:null,Q.W),pt.K){ae(Q.h,pt);var Tr=pt,Fs=Q.L;Fs&&(Tr.I=Fs),Tr.B&&(vr(Tr),Gt(Tr)),Q.g=pt}else DK(Q);0<H.i.length&&aC(H)}else Kn[0]!="stop"&&Kn[0]!="close"||yg(H,7);else H.G==3&&(Kn[0]=="stop"||Kn[0]=="close"?Kn[0]=="stop"?yg(H,7):n1(H):Kn[0]!="noop"&&H.l&&H.l.ta(Kn),H.v=0)}}Yn(4)}catch{}}var uo=class{constructor(T,L){this.g=T,this.map=L}};function Ho(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ps(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function qu(T){return T.h?1:T.g?T.g.size:0}function Uc(T,L){return T.h?T.h==L:T.g?T.g.has(L):!1}function K(T,L){T.g?T.g.add(L):T.h=L}function ae(T,L){T.h&&T.h==L?T.h=null:T.g&&T.g.has(L)&&T.g.delete(L)}Ho.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function ee(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let L=T.i;for(const H of T.g.values())L=L.concat(H.D);return L}return m(T.i)}function ge(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(u(T)){for(var L=[],H=T.length,Q=0;Q<H;Q++)L.push(T[Q]);return L}L=[],H=0;for(Q in T)L[H++]=T[Q];return L}function be(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(u(T)||typeof T=="string"){var L=[];T=T.length;for(var H=0;H<T;H++)L.push(H);return L}L=[],H=0;for(const Q in T)L[H++]=Q;return L}}}function he(T,L){if(T.forEach&&typeof T.forEach=="function")T.forEach(L,void 0);else if(u(T)||typeof T=="string")Array.prototype.forEach.call(T,L,void 0);else for(var H=be(T),Q=ge(T),Ee=Q.length,Me=0;Me<Ee;Me++)L.call(void 0,Q[Me],H&&H[Me],T)}var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ke(T,L){if(T){T=T.split("&");for(var H=0;H<T.length;H++){var Q=T[H].indexOf("="),Ee=null;if(0<=Q){var Me=T[H].substring(0,Q);Ee=T[H].substring(Q+1)}else Me=T[H];L(Me,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function Qe(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof Qe){this.h=T.h,ct(this,T.j),this.o=T.o,this.g=T.g,xt(this,T.s),this.l=T.l;var L=T.i,H=new Wu;H.i=L.i,L.g&&(H.g=new Map(L.g),H.h=L.h),pn(this,H),this.m=T.m}else T&&(L=String(T).match($e))?(this.h=!1,ct(this,L[1]||"",!0),this.o=fr(L[2]||""),this.g=fr(L[3]||"",!0),xt(this,L[4]),this.l=fr(L[5]||"",!0),pn(this,L[6]||"",!0),this.m=fr(L[7]||"")):(this.h=!1,this.i=new Wu(null,this.h))}Qe.prototype.toString=function(){var T=[],L=this.j;L&&T.push(dr(L,Vc,!0),":");var H=this.g;return(H||L=="file")&&(T.push("//"),(L=this.o)&&T.push(dr(L,Vc,!0),"@"),T.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.s,H!=null&&T.push(":",String(H))),(H=this.l)&&(this.g&&H.charAt(0)!="/"&&T.push("/"),T.push(dr(H,H.charAt(0)=="/"?oE:fd,!0))),(H=this.i.toString())&&T.push("?",H),(H=this.m)&&T.push("#",dr(H,eC)),T.join("")};function Je(T){return new Qe(T)}function ct(T,L,H){T.j=H?fr(L,!0):L,T.j&&(T.j=T.j.replace(/:$/,""))}function xt(T,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);T.s=L}else T.s=null}function pn(T,L,H){L instanceof Wu?(T.i=L,aE(T.i,T.h)):(H||(L=dr(L,dg)),T.i=new Wu(L,T.h))}function Mt(T,L,H){T.i.set(L,H)}function Nn(T){return Mt(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function fr(T,L){return T?L?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function dr(T,L,H){return typeof T=="string"?(T=encodeURI(T).replace(L,lo),H&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function lo(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Vc=/[#\/\?@]/g,fd=/[#\?:]/g,oE=/[#\?]/g,dg=/[#\?@]/g,eC=/#/g;function Wu(T,L){this.h=this.g=null,this.i=T||null,this.j=!!L}function ba(T){T.g||(T.g=new Map,T.h=0,T.i&&Ke(T.i,function(L,H){T.add(decodeURIComponent(L.replace(/\+/g," ")),H)}))}e=Wu.prototype,e.add=function(T,L){ba(this),this.i=null,T=hd(this,T);var H=this.g.get(T);return H||this.g.set(T,H=[]),H.push(L),this.h+=1,this};function dd(T,L){ba(T),L=hd(T,L),T.g.has(L)&&(T.i=null,T.h-=T.g.get(L).length,T.g.delete(L))}function e1(T,L){return ba(T),L=hd(T,L),T.g.has(L)}e.forEach=function(T,L){ba(this),this.g.forEach(function(H,Q){H.forEach(function(Ee){T.call(L,Ee,Q,this)},this)},this)},e.na=function(){ba(this);const T=Array.from(this.g.values()),L=Array.from(this.g.keys()),H=[];for(let Q=0;Q<L.length;Q++){const Ee=T[Q];for(let Me=0;Me<Ee.length;Me++)H.push(L[Q])}return H},e.V=function(T){ba(this);let L=[];if(typeof T=="string")e1(this,T)&&(L=L.concat(this.g.get(hd(this,T))));else{T=Array.from(this.g.values());for(let H=0;H<T.length;H++)L=L.concat(T[H])}return L},e.set=function(T,L){return ba(this),this.i=null,T=hd(this,T),e1(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[L]),this.h+=1,this},e.get=function(T,L){return T?(T=this.V(T),0<T.length?String(T[0]):L):L};function tC(T,L,H){dd(T,L),0<H.length&&(T.i=null,T.g.set(hd(T,L),m(H)),T.h+=H.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],L=Array.from(this.g.keys());for(var H=0;H<L.length;H++){var Q=L[H];const Me=encodeURIComponent(String(Q)),pt=this.V(Q);for(Q=0;Q<pt.length;Q++){var Ee=Me;pt[Q]!==""&&(Ee+="="+encodeURIComponent(String(pt[Q]))),T.push(Ee)}}return this.i=T.join("&")};function hd(T,L){return L=String(L),T.j&&(L=L.toLowerCase()),L}function aE(T,L){L&&!T.j&&(ba(T),T.i=null,T.g.forEach(function(H,Q){var Ee=Q.toLowerCase();Q!=Ee&&(dd(this,Q),tC(this,Ee,H))},T)),T.j=L}function nC(T,L){const H=new $s;if(a.Image){const Q=new Image;Q.onload=h(_a,H,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(_a,H,"TestLoadImage: error",!1,L,Q),Q.onabort=h(_a,H,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(_a,H,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else L(!1)}function pd(T,L){const H=new $s,Q=new AbortController,Ee=setTimeout(()=>{Q.abort(),_a(H,"TestPingServer: timeout",!1,L)},1e4);fetch(T,{signal:Q.signal}).then(Me=>{clearTimeout(Ee),Me.ok?_a(H,"TestPingServer: ok",!0,L):_a(H,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(Ee),_a(H,"TestPingServer: error",!1,L)})}function _a(T,L,H,Q,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),Q(H)}catch{}}function UM(){this.g=new Zt}function rC(T,L,H){const Q=H||"";try{he(T,function(Ee,Me){let pt=Ee;l(Ee)&&(pt=Dt(Ee)),L.push(Q+Me+"="+encodeURIComponent(pt))})}catch(Ee){throw L.push(Q+"type="+encodeURIComponent("_badmap")),Ee}}function hg(T){this.l=T.Ub||null,this.j=T.eb||!1}p(hg,an),hg.prototype.g=function(){return new pg(this.l,this.j)},hg.prototype.i=function(T){return function(){return T}}({});function pg(T,L){J.call(this),this.D=T,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(pg,J),e=pg.prototype,e.open=function(T,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=L,this.readyState=1,Xh(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(L.body=T),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mg(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Xh(this)),this.g&&(this.readyState=3,Xh(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iC(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function iC(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var L=T.value?T.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!T.done}))&&(this.response=this.responseText+=L)}T.done?mg(this):Xh(this),this.readyState==3&&iC(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,mg(this))},e.Qa=function(T){this.g&&(this.response=T,mg(this))},e.ga=function(){this.g&&mg(this)};function mg(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Xh(T)}e.setRequestHeader=function(T,L){this.u.append(T,L)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],L=this.h.entries();for(var H=L.next();!H.done;)H=H.value,T.push(H[0]+": "+H[1]),H=L.next();return T.join(`\r
`)};function Xh(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(pg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function sC(T){let L="";return w(T,function(H,Q){L+=Q,L+=":",L+=H,L+=`\r
`}),L}function ne(T,L,H){e:{for(Q in H){var Q=!1;break e}Q=!0}Q||(H=sC(H),typeof T=="string"?H!=null&&encodeURIComponent(String(H)):Mt(T,L,H))}function fe(T){J.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(fe,J);var ke=/^https?$/i,It=["POST","PUT"];e=fe.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,L,H,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);L=L?L.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xt.g(),this.v=this.o?gr(this.o):gr(Xt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(T),!0),this.B=!1}catch(Me){Dn(this,Me);return}if(T=H||"",H=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var Ee in Q)H.set(Ee,Q[Ee]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Me of Q.keys())H.set(Me,Q.get(Me));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(H.keys()).find(Me=>Me.toLowerCase()=="content-type"),Ee=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,L,void 0))||Q||Ee||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Me,pt]of H)this.g.setRequestHeader(Me,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sr(this),this.u=!0,this.g.send(T),this.u=!1}catch(Me){Dn(this,Me)}};function Dn(T,L){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=L,T.m=5,or(T),kn(T)}function or(T){T.A||(T.A=!0,se(T,"complete"),se(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,se(this,"complete"),se(this,"abort"),kn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kn(this,!0)),fe.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?xr(this):this.bb())},e.bb=function(){xr(this)};function xr(T){if(T.h&&typeof o<"u"&&(!T.v[1]||Ni(T)!=4||T.Z()!=2)){if(T.u&&Ni(T)==4)Se(T.Ea,0,T);else if(se(T,"readystatechange"),Ni(T)==4){T.h=!1;try{const pt=T.Z();e:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var H;if(!(H=L)){var Q;if(Q=pt===0){var Ee=String(T.D).match($e)[1]||null;!Ee&&a.self&&a.self.location&&(Ee=a.self.location.protocol.slice(0,-1)),Q=!ke.test(Ee?Ee.toLowerCase():"")}H=Q}if(H)se(T,"complete"),se(T,"success");else{T.m=6;try{var Me=2<Ni(T)?T.g.statusText:""}catch{Me=""}T.l=Me+" ["+T.Z()+"]",or(T)}}finally{kn(T)}}}}function kn(T,L){if(T.g){Sr(T);const H=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,L||se(T,"ready");try{H.onreadystatechange=Q}catch{}}}function Sr(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function Ni(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<Ni(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var L=this.g.responseText;return T&&L.indexOf(T)==0&&(L=L.substring(T.length)),Vt(L)}};function co(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function gg(T){const L={};T=(T.g&&2<=Ni(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(v(T[Q]))continue;var H=I(T[Q]);const Ee=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Me=L[Ee]||[];L[Ee]=Me,Me.push(H)}S(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function md(T,L,H){return H&&H.internalChannelParams&&H.internalChannelParams[T]||L}function t1(T){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=md("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=md("baseRetryDelayMs",5e3,T),this.cb=md("retryDelaySeedMs",1e4,T),this.Wa=md("forwardChannelMaxRetries",2,T),this.wa=md("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Ho(T&&T.concurrentRequestLimit),this.Da=new UM,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=t1.prototype,e.la=8,e.G=1,e.connect=function(T,L,H,Q){yr(0),this.W=T,this.H=L||{},H&&Q!==void 0&&(this.H.OSID=H,this.H.OAID=Q),this.F=this.X,this.I=PK(this,null,this.W),aC(this)};function n1(T){if(TK(T),T.G==3){var L=T.U++,H=Je(T.I);if(Mt(H,"SID",T.K),Mt(H,"RID",L),Mt(H,"TYPE","terminate"),uE(T,H),L=new Sn(T,T.j,L),L.L=2,L.v=Nn(Je(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!H&&a.Image&&(new Image().src=L.v,H=!0),H||(L.g=OK(L.j,null),L.g.ea(L.v)),L.F=Date.now(),Gt(L)}RK(T)}function oC(T){T.g&&(HM(T),T.g.cancel(),T.g=null)}function TK(T){oC(T),T.u&&(a.clearTimeout(T.u),T.u=null),uC(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function aC(T){if(!ps(T.h)&&!T.s){T.s=!0;var L=T.Ga;j||$(),z||(j(),z=!0),V.add(L,T),T.B=0}}function yNe(T,L){return qu(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=L.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Ms(d(T.Ga,T,L),kK(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Ee=new Sn(this,this.j,T);let Me=this.o;if(this.S&&(Me?(Me=C(Me),D(Me,this.S)):Me=this.S),this.m!==null||this.O||(Ee.H=Me,Me=null),this.P)e:{for(var L=0,H=0;H<this.i.length;H++){t:{var Q=this.i[H];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=H;break e}if(L===4096||H===this.i.length-1){L=H+1;break e}}L=1e3}else L=1e3;L=AK(this,Ee,L),H=Je(this.I),Mt(H,"RID",T),Mt(H,"CVER",22),this.D&&Mt(H,"X-HTTP-Session-Id",this.D),uE(this,H),Me&&(this.O?L="headers="+encodeURIComponent(String(sC(Me)))+"&"+L:this.m&&ne(H,this.m,Me)),K(this.h,Ee),this.Ua&&Mt(H,"TYPE","init"),this.P?(Mt(H,"$req",L),Mt(H,"SID","null"),Ee.T=!0,Ht(Ee,H,null)):Ht(Ee,H,L),this.G=2}}else this.G==3&&(T?CK(this,T):this.i.length==0||ps(this.h)||CK(this))};function CK(T,L){var H;L?H=L.l:H=T.U++;const Q=Je(T.I);Mt(Q,"SID",T.K),Mt(Q,"RID",H),Mt(Q,"AID",T.T),uE(T,Q),T.m&&T.o&&ne(Q,T.m,T.o),H=new Sn(T,T.j,H,T.B+1),T.m===null&&(H.H=T.o),L&&(T.i=L.D.concat(T.i)),L=AK(T,H,1e3),H.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),K(T.h,H),Ht(H,Q,L)}function uE(T,L){T.H&&w(T.H,function(H,Q){Mt(L,Q,H)}),T.l&&he({},function(H,Q){Mt(L,Q,H)})}function AK(T,L,H){H=Math.min(T.i.length,H);var Q=T.l?d(T.l.Na,T.l,T):null;e:{var Ee=T.i;let Me=-1;for(;;){const pt=["count="+H];Me==-1?0<H?(Me=Ee[0].g,pt.push("ofs="+Me)):Me=0:pt.push("ofs="+Me);let Tr=!0;for(let Fs=0;Fs<H;Fs++){let Kn=Ee[Fs].g;const fo=Ee[Fs].map;if(Kn-=Me,0>Kn)Me=Math.max(0,Ee[Fs].g-100),Tr=!1;else try{rC(fo,pt,"req"+Kn+"_")}catch{Q&&Q(fo)}}if(Tr){Q=pt.join("&");break e}}}return T=T.i.splice(0,H),L.D=T,Q}function DK(T){if(!T.g&&!T.u){T.Y=1;var L=T.Fa;j||$(),z||(j(),z=!0),V.add(L,T),T.v=0}}function VM(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Ms(d(T.Fa,T),kK(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,IK(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Ms(d(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yr(10),oC(this),IK(this))};function HM(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function IK(T){T.g=new Sn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var L=Je(T.qa);Mt(L,"RID","rpc"),Mt(L,"SID",T.K),Mt(L,"AID",T.T),Mt(L,"CI",T.F?"0":"1"),!T.F&&T.ja&&Mt(L,"TO",T.ja),Mt(L,"TYPE","xmlhttp"),uE(T,L),T.m&&T.o&&ne(L,T.m,T.o),T.L&&(T.g.I=T.L);var H=T.g;T=T.ia,H.L=1,H.v=Nn(Je(L)),H.m=null,H.P=!0,$n(H,T)}e.Za=function(){this.C!=null&&(this.C=null,oC(this),VM(this),yr(19))};function uC(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function NK(T,L){var H=null;if(T.g==L){uC(T),HM(T),T.g=null;var Q=2}else if(Uc(T.h,L))H=L.D,ae(T.h,L),Q=1;else return;if(T.G!=0){if(L.o)if(Q==1){H=L.m?L.m.length:0,L=Date.now()-L.F;var Ee=T.B;Q=Vo(),se(Q,new ao(Q,H)),aC(T)}else DK(T);else if(Ee=L.s,Ee==3||Ee==0&&0<L.X||!(Q==1&&yNe(T,L)||Q==2&&VM(T)))switch(H&&0<H.length&&(L=T.h,L.i=L.i.concat(H)),Ee){case 1:yg(T,5);break;case 4:yg(T,10);break;case 3:yg(T,6);break;default:yg(T,2)}}}function kK(T,L){let H=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(H*=2),H*L}function yg(T,L){if(T.j.info("Error code "+L),L==2){var H=d(T.fb,T),Q=T.Xa;const Ee=!Q;Q=new Qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ct(Q,"https"),Nn(Q),Ee?nC(Q.toString(),H):pd(Q.toString(),H)}else yr(2);T.G=0,T.l&&T.l.sa(L),RK(T),TK(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),yr(2)):(this.j.info("Failed to ping google.com"),yr(1))};function RK(T){if(T.G=0,T.ka=[],T.l){const L=ee(T.h);(L.length!=0||T.i.length!=0)&&(g(T.ka,L),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function PK(T,L,H){var Q=H instanceof Qe?Je(H):new Qe(H);if(Q.g!="")L&&(Q.g=L+"."+Q.g),xt(Q,Q.s);else{var Ee=a.location;Q=Ee.protocol,L=L?L+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;var Me=new Qe(null);Q&&ct(Me,Q),L&&(Me.g=L),Ee&&xt(Me,Ee),H&&(Me.l=H),Q=Me}return H=T.D,L=T.ya,H&&L&&Mt(Q,H,L),Mt(Q,"VER",T.la),uE(T,Q),Q}function OK(T,L,H){if(L&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=T.Ca&&!T.pa?new fe(new hg({eb:H})):new fe(T.pa),L.Ha(T.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function MK(){}e=MK.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function lC(){}lC.prototype.g=function(T,L){return new au(T,L)};function au(T,L){J.call(this),this.g=new t1(L),this.l=T,this.h=L&&L.messageUrlParams||null,T=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(T?T["X-WebChannel-Content-Type"]=L.messageContentType:T={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(T?T["X-WebChannel-Client-Profile"]=L.va:T={"X-WebChannel-Client-Profile":L.va}),this.g.S=T,(T=L&&L.Sb)&&!v(T)&&(this.g.m=T),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,T=this.h,T!==null&&L in T&&(T=this.h,L in T&&delete T[L])),this.j=new r1(this)}p(au,J),au.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},au.prototype.close=function(){n1(this.g)},au.prototype.o=function(T){var L=this.g;if(typeof T=="string"){var H={};H.__data__=T,T=H}else this.u&&(H={},H.__data__=Dt(T),T=H);L.i.push(new uo(L.Ya++,T)),L.G==3&&aC(L)},au.prototype.N=function(){this.g.l=null,delete this.j,n1(this.g),delete this.g,au.aa.N.call(this)};function $K(T){Xr.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var L=T.__sm__;if(L){e:{for(const H in L){T=H;break e}T=void 0}(this.i=T)&&(T=this.i,L=L!==null&&T in L?L[T]:void 0),this.data=L}else this.data=T}p($K,Xr);function FK(){er.call(this),this.status=1}p(FK,er);function r1(T){this.g=T}p(r1,MK),r1.prototype.ua=function(){se(this.g,"a")},r1.prototype.ta=function(T){se(this.g,new $K(T))},r1.prototype.sa=function(T){se(this.g,new FK)},r1.prototype.ra=function(){se(this.g,"b")},lC.prototype.createWebChannel=lC.prototype.g,au.prototype.send=au.prototype.o,au.prototype.open=au.prototype.m,au.prototype.close=au.prototype.close,Wbe=function(){return new lC},qbe=function(){return Vo()},Hbe=gi,h8={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,MD=at,St.COMPLETE="complete",Vbe=St,lr.EventType=fn,fn.OPEN="a",fn.CLOSE="b",fn.ERROR="c",fn.MESSAGE="d",J.prototype.listen=J.prototype.K,Aw=lr,Ube=hg,fe.prototype.listenOnce=fe.prototype.L,fe.prototype.getLastError=fe.prototype.Ka,fe.prototype.getLastErrorCode=fe.prototype.Ba,fe.prototype.getStatus=fe.prototype.Z,fe.prototype.getResponseJson=fe.prototype.Oa,fe.prototype.getResponseText=fe.prototype.oa,fe.prototype.send=fe.prototype.ea,fe.prototype.setWithCredentials=fe.prototype.Ha,zbe=fe}).apply(typeof yA<"u"?yA:typeof self<"u"?self:typeof window<"u"?window:{});const Pre="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ca.UNAUTHENTICATED=new Ca(null),Ca.GOOGLE_CREDENTIALS=new Ca("google-credentials-uid"),Ca.FIRST_PARTY=new Ca("first-party-uid"),Ca.MOCK_USER=new Ca("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M_="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new b3("@firebase/firestore");function FE(){return q0.logLevel}function kt(e,...t){if(q0.logLevel<=Fn.DEBUG){const n=t.map(JV);q0.debug(`Firestore (${M_}): ${e}`,...n)}}function Sh(e,...t){if(q0.logLevel<=Fn.ERROR){const n=t.map(JV);q0.error(`Firestore (${M_}): ${e}`,...n)}}function $S(e,...t){if(q0.logLevel<=Fn.WARN){const n=t.map(JV);q0.warn(`Firestore (${M_}): ${e}`,...n)}}function JV(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e="Unexpected state"){const t=`FIRESTORE (${M_}) INTERNAL ASSERTION FAILED: `+e;throw Sh(t),new Error(t)}function Mr(e,t){e||sn()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends ed{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wyt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Gyt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ca.UNAUTHENTICATED))}shutdown(){}}class Yyt{constructor(t){this.t=t,this.currentUser=Ca.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new th;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new th,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new th)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mr(typeof r.accessToken=="string"),new Wyt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Mr(t===null||typeof t=="string"),new Ca(t)}}class Kyt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ca.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xyt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Kyt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ca.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qyt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jyt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Mr(typeof n.token=="string"),this.R=n.token,new Qyt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zyt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gbe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Zyt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function nr(e,t){return e<t?-1:e>t?1:0}function Tb(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _t(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return as.fromMillis(Date.now())}static fromDate(t){return as.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new as(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?nr(this.nanoseconds,t.nanoseconds):nr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new as(0,0))}static max(){return new dn(new as(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,n,r){n===void 0?n=0:n>t.length&&sn(),r===void 0?r=t.length-n:r>t.length-n&&sn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return FS.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof FS?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class zr extends FS{construct(t,n,r){return new zr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new zr(n)}static emptyPath(){return new zr([])}}const e1t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gs extends FS{construct(t,n,r){return new Gs(t,n,r)}static isValidIdentifier(t){return e1t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gs.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Gs(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(We.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(We.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _t(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _t(We.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gs(n)}static emptyPath(){return new Gs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.path=t}static fromPath(t){return new Wt(zr.fromString(t))}static fromName(t){return new Wt(zr.fromString(t).popFirst(5))}static empty(){return new Wt(zr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&zr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return zr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Wt(new zr(t.slice()))}}function t1t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new as(n+1,0):new as(n,r));return new Em(i,Wt.empty(),t)}function n1t(e){return new Em(e.readTime,e.key,-1)}class Em{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Em(dn.min(),Wt.empty(),-1)}static max(){return new Em(dn.max(),Wt.empty(),-1)}}function r1t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Wt.comparator(e.documentKey,t.documentKey),n!==0?n:nr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s1t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(e){if(e.code!==We.FAILED_PRECONDITION||e.message!==i1t)throw e;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new et((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof et?n:et.resolve(n)}catch(n){return et.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):et.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):et.reject(n)}static resolve(t){return new et((n,r)=>{n(t)})}static reject(t){return new et((n,r)=>{r(t)})}static waitFor(t){return new et((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=et.resolve(!1);for(const r of t)n=n.next(i=>i?et.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new et((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new et((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function o1t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function a2(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}ZV.oe=-1;function C3(e){return e==null}function hk(e){return e===0&&1/e==-1/0}function a1t(e){return typeof e=="number"&&Number.isInteger(e)&&!hk(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ore(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function My(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ybe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){this.comparator=t,this.root=n||Hs.EMPTY}insert(t,n){return new mi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(t){return new mi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vA(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vA(this.root,t,this.comparator,!1)}getReverseIterator(){return new vA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vA(this.root,t,this.comparator,!0)}}class vA{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Hs{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Hs.RED,this.left=i??Hs.EMPTY,this.right=s??Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Hs(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Hs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const t=this.left.check();if(t!==this.right.check())throw sn();return t+(this.isRed()?0:1)}}Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1;Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Hs(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t){this.comparator=t,this.data=new mi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mre(this.data.getIterator())}getIteratorFrom(t){return new Mre(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Zs)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Zs(this.comparator);return n.data=t,n}}class Mre{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this.fields=t,t.sort(Gs.comparator)}static empty(){return new wu([])}unionWith(t){let n=new Zs(Gs.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new wu(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Tb(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kbe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Kbe("Invalid base64 string: "+s):s}}(t);return new Lo(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Lo(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return nr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Lo.EMPTY_BYTE_STRING=new Lo("");const u1t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wm(e){if(Mr(!!e),typeof e=="string"){let t=0;const n=u1t.exec(e);if(Mr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vi(e.seconds),nanos:Vi(e.nanos)}}function Vi(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function W0(e){return typeof e=="string"?Lo.fromBase64String(e):Lo.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tH(e){const t=e.mapValue.fields.__previous_value__;return eH(t)?tH(t):t}function LS(e){const t=wm(e.mapValue.fields.__local_write_time__.timestampValue);return new as(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class BS{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new BS("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof BS&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function G0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?eH(e)?4:c1t(e)?9007199254740991:10:sn()}function Of(e,t){if(e===t)return!0;const n=G0(e);if(n!==G0(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return LS(e).isEqual(LS(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=wm(i.timestampValue),a=wm(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return W0(i.bytesValue).isEqual(W0(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Vi(i.geoPointValue.latitude)===Vi(s.geoPointValue.latitude)&&Vi(i.geoPointValue.longitude)===Vi(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Vi(i.integerValue)===Vi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Vi(i.doubleValue),a=Vi(s.doubleValue);return o===a?hk(o)===hk(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Tb(e.arrayValue.values||[],t.arrayValue.values||[],Of);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Ore(o)!==Ore(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Of(o[u],a[u])))return!1;return!0}(e,t);default:return sn()}}function jS(e,t){return(e.values||[]).find(n=>Of(n,t))!==void 0}function Cb(e,t){if(e===t)return 0;const n=G0(e),r=G0(t);if(n!==r)return nr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Vi(s.integerValue||s.doubleValue),u=Vi(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return $re(e.timestampValue,t.timestampValue);case 4:return $re(LS(e),LS(t));case 5:return nr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=W0(s),u=W0(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=nr(a[l],u[l]);if(c!==0)return c}return nr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=nr(Vi(s.latitude),Vi(o.latitude));return a!==0?a:nr(Vi(s.longitude),Vi(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Cb(a[l],u[l]);if(c)return c}return nr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===bA.mapValue&&o===bA.mapValue)return 0;if(s===bA.mapValue)return 1;if(o===bA.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=nr(u[f],c[f]);if(d!==0)return d;const h=Cb(a[u[f]],l[c[f]]);if(h!==0)return h}return nr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw sn()}}function $re(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return nr(e,t);const n=wm(e),r=wm(t),i=nr(n.seconds,r.seconds);return i!==0?i:nr(n.nanos,r.nanos)}function Ab(e){return p8(e)}function p8(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=wm(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return W0(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Wt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=p8(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${p8(n.fields[o])}`;return i+"}"}(e.mapValue):sn()}function Fre(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function m8(e){return!!e&&"integerValue"in e}function nH(e){return!!e&&"arrayValue"in e}function Lre(e){return!!e&&"nullValue"in e}function Bre(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $D(e){return!!e&&"mapValue"in e}function Ax(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return My(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ax(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ax(e.arrayValue.values[n]);return t}return Object.assign({},e)}function c1t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(t){this.value=t}static empty(){return new Oa({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!$D(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ax(n)}setAll(t){let n=Gs.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ax(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());$D(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Of(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];$D(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){My(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Oa(Ax(this.value))}}function Xbe(e){const t=[];return My(e.fields,(n,r)=>{const i=new Gs([n]);if($D(r)){const s=Xbe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new wu(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Co(t,0,dn.min(),dn.min(),dn.min(),Oa.empty(),0)}static newFoundDocument(t,n,r,i){return new Co(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new Co(t,2,n,dn.min(),dn.min(),Oa.empty(),0)}static newUnknownDocument(t,n){return new Co(t,3,n,dn.min(),dn.min(),Oa.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Oa.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Oa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Co&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pk=class{constructor(t,n){this.position=t,this.inclusive=n}};function jre(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Wt.comparator(Wt.fromName(o.referenceValue),n.key):r=Cb(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zre(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Of(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,n="asc"){this.field=t,this.dir=n}}function f1t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qbe=class{};class Gi extends Qbe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new h1t(t,n,r):n==="array-contains"?new g1t(t,r):n==="in"?new y1t(t,r):n==="not-in"?new v1t(t,r):n==="array-contains-any"?new b1t(t,r):new Gi(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new p1t(t,r):new m1t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cb(n,this.value)):n!==null&&G0(this.value)===G0(n)&&this.matchesComparison(Cb(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sc extends Qbe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Sc(t,n)}matches(t){return Jbe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jbe(e){return e.op==="and"}function Zbe(e){return d1t(e)&&Jbe(e)}function d1t(e){for(const t of e.filters)if(t instanceof Sc)return!1;return!0}function g8(e){if(e instanceof Gi)return e.field.canonicalString()+e.op.toString()+Ab(e.value);if(Zbe(e))return e.filters.map(t=>g8(t)).join(",");{const t=e.filters.map(n=>g8(n)).join(",");return`${e.op}(${t})`}}function e_e(e,t){return e instanceof Gi?function(r,i){return i instanceof Gi&&r.op===i.op&&r.field.isEqual(i.field)&&Of(r.value,i.value)}(e,t):e instanceof Sc?function(r,i){return i instanceof Sc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&e_e(o,i.filters[a]),!0):!1}(e,t):void sn()}function t_e(e){return e instanceof Gi?function(n){return`${n.field.canonicalString()} ${n.op} ${Ab(n.value)}`}(e):e instanceof Sc?function(n){return n.op.toString()+" {"+n.getFilters().map(t_e).join(" ,")+"}"}(e):"Filter"}class h1t extends Gi{constructor(t,n,r){super(t,n,r),this.key=Wt.fromName(r.referenceValue)}matches(t){const n=Wt.comparator(t.key,this.key);return this.matchesComparison(n)}}class p1t extends Gi{constructor(t,n){super(t,"in",n),this.keys=n_e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class m1t extends Gi{constructor(t,n){super(t,"not-in",n),this.keys=n_e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function n_e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Wt.fromName(r.referenceValue))}class g1t extends Gi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return nH(n)&&jS(n.arrayValue,this.value)}}class y1t extends Gi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&jS(this.value.arrayValue,n)}}class v1t extends Gi{constructor(t,n){super(t,"not-in",n)}matches(t){if(jS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!jS(this.value.arrayValue,n)}}class b1t extends Gi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!nH(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jS(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ure(e,t=null,n=[],r=[],i=null,s=null,o=null){return new _1t(e,t,n,r,i,s,o)}function rH(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>g8(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),C3(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Ab(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Ab(r)).join(",")),t.ue=n}return t.ue}function iH(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!f1t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!e_e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zre(e.startAt,t.startAt)&&zre(e.endAt,t.endAt)}function y8(e){return Wt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function E1t(e,t,n,r,i,s,o,a){return new $_(e,t,n,r,i,s,o,a)}function sH(e){return new $_(e)}function Vre(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function r_e(e){return e.collectionGroup!==null}function Dx(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zs(Gs.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new zS(s,r))}),n.has(Gs.keyField().canonicalString())||t.ce.push(new zS(Gs.keyField(),r))}return t.ce}function wf(e){const t=hn(e);return t.le||(t.le=w1t(t,Dx(e))),t.le}function w1t(e,t){if(e.limitType==="F")return Ure(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zS(i.field,s)});const n=e.endAt?new pk(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pk(e.startAt.position,e.startAt.inclusive):null;return Ure(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function v8(e,t){const n=e.filters.concat([t]);return new $_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function b8(e,t,n){return new $_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function A3(e,t){return iH(wf(e),wf(t))&&e.limitType===t.limitType}function i_e(e){return`${rH(wf(e))}|lt:${e.limitType}`}function $1(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>t_e(i)).join(", ")}]`),C3(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ab(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ab(i)).join(",")),`Target(${r})`}(wf(e))}; limitType=${e.limitType})`}function D3(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Wt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Dx(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=jre(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Dx(r),i)||r.endAt&&!function(o,a,u){const l=jre(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Dx(r),i))}(e,t)}function x1t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function s_e(e){return(t,n)=>{let r=!1;for(const i of Dx(e)){const s=S1t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function S1t(e,t,n){const r=e.field.isKeyField()?Wt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Cb(u,l):sn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){My(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Ybe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1t=new mi(Wt.comparator);function Th(){return T1t}const o_e=new mi(Wt.comparator);function Dw(...e){let t=o_e;for(const n of e)t=t.insert(n.key,n);return t}function a_e(e){let t=o_e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function s0(){return Ix()}function u_e(){return Ix()}function Ix(){return new F_(e=>e.toString(),(e,t)=>e.isEqual(t))}const C1t=new mi(Wt.comparator),A1t=new Zs(Wt.comparator);function Rn(...e){let t=A1t;for(const n of e)t=t.add(n);return t}const D1t=new Zs(nr);function I1t(){return D1t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hk(t)?"-0":t}}function c_e(e){return{integerValue:""+e}}function N1t(e,t){return a1t(t)?c_e(t):l_e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this._=void 0}}function k1t(e,t,n){return e instanceof US?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eH(s)&&(s=tH(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof VS?d_e(e,t):e instanceof HS?h_e(e,t):function(i,s){const o=f_e(i,s),a=Hre(o)+Hre(i.Pe);return m8(o)&&m8(i.Pe)?c_e(a):l_e(i.serializer,a)}(e,t)}function R1t(e,t,n){return e instanceof VS?d_e(e,t):e instanceof HS?h_e(e,t):n}function f_e(e,t){return e instanceof mk?function(r){return m8(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class US extends I3{}class VS extends I3{constructor(t){super(),this.elements=t}}function d_e(e,t){const n=p_e(t);for(const r of e.elements)n.some(i=>Of(i,r))||n.push(r);return{arrayValue:{values:n}}}class HS extends I3{constructor(t){super(),this.elements=t}}function h_e(e,t){let n=p_e(t);for(const r of e.elements)n=n.filter(i=>!Of(i,r));return{arrayValue:{values:n}}}class mk extends I3{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Hre(e){return Vi(e.integerValue||e.doubleValue)}function p_e(e){return nH(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1t{constructor(t,n){this.field=t,this.transform=n}}function O1t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof VS&&i instanceof VS||r instanceof HS&&i instanceof HS?Tb(r.elements,i.elements,Of):r instanceof mk&&i instanceof mk?Of(r.Pe,i.Pe):r instanceof US&&i instanceof US}(e.transform,t.transform)}class M1t{constructor(t,n){this.version=t,this.transformResults=n}}class Wa{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wa}static exists(t){return new Wa(void 0,t)}static updateTime(t){return new Wa(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function FD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class N3{}function m_e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new k3(e.key,Wa.none()):new u2(e.key,e.data,Wa.none());{const n=e.data,r=Oa.empty();let i=new Zs(Gs.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Jm(e.key,r,new wu(i.toArray()),Wa.none())}}function $1t(e,t,n){e instanceof u2?function(i,s,o){const a=i.value.clone(),u=Wre(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Jm?function(i,s,o){if(!FD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Wre(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(g_e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Nx(e,t,n,r){return e instanceof u2?function(s,o,a,u){if(!FD(s.precondition,o))return a;const l=s.value.clone(),c=Gre(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Jm?function(s,o,a,u){if(!FD(s.precondition,o))return a;const l=Gre(s.fieldTransforms,u,o),c=o.data;return c.setAll(g_e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return FD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function F1t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=f_e(r.transform,i||null);s!=null&&(n===null&&(n=Oa.empty()),n.set(r.field,s))}return n||null}function qre(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tb(r,i,(s,o)=>O1t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class u2 extends N3{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jm extends N3{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g_e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Wre(e,t,n){const r=new Map;Mr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,R1t(o,a,n[i]))}return r}function Gre(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,k1t(s,o,t))}return r}class k3 extends N3{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L1t extends N3{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&$1t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Nx(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Nx(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=u_e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=m_e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Rn())}isEqual(t){return this.batchId===t.batchId&&Tb(this.mutations,t.mutations,(n,r)=>qre(n,r))&&Tb(this.baseMutations,t.baseMutations,(n,r)=>qre(n,r))}}class oH{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Mr(t.mutations.length===r.length);let i=function(){return C1t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new oH(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji,Un;function U1t(e){switch(e){default:return sn();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function y_e(e){if(e===void 0)return Sh("GRPC error has no .code"),We.UNKNOWN;switch(e){case ji.OK:return We.OK;case ji.CANCELLED:return We.CANCELLED;case ji.UNKNOWN:return We.UNKNOWN;case ji.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case ji.INTERNAL:return We.INTERNAL;case ji.UNAVAILABLE:return We.UNAVAILABLE;case ji.UNAUTHENTICATED:return We.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case ji.NOT_FOUND:return We.NOT_FOUND;case ji.ALREADY_EXISTS:return We.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return We.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case ji.ABORTED:return We.ABORTED;case ji.OUT_OF_RANGE:return We.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return We.UNIMPLEMENTED;case ji.DATA_LOSS:return We.DATA_LOSS;default:return sn()}}(Un=ji||(ji={}))[Un.OK=0]="OK",Un[Un.CANCELLED=1]="CANCELLED",Un[Un.UNKNOWN=2]="UNKNOWN",Un[Un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Un[Un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Un[Un.NOT_FOUND=5]="NOT_FOUND",Un[Un.ALREADY_EXISTS=6]="ALREADY_EXISTS",Un[Un.PERMISSION_DENIED=7]="PERMISSION_DENIED",Un[Un.UNAUTHENTICATED=16]="UNAUTHENTICATED",Un[Un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Un[Un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Un[Un.ABORTED=10]="ABORTED",Un[Un.OUT_OF_RANGE=11]="OUT_OF_RANGE",Un[Un.UNIMPLEMENTED=12]="UNIMPLEMENTED",Un[Un.INTERNAL=13]="INTERNAL",Un[Un.UNAVAILABLE=14]="UNAVAILABLE",Un[Un.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1t=new g0([4294967295,4294967295],0);function Yre(e){const t=V1t().encode(e),n=new jbe;return n.update(t),new Uint8Array(n.digest())}function Kre(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new g0([n,r],0),new g0([i,s],0)]}class aH{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Iw(`Invalid padding: ${n}`);if(r<0)throw new Iw(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Iw(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Iw(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=g0.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(g0.fromNumber(r)));return i.compare(H1t)===1&&(i=new g0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Yre(t),[r,i]=Kre(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new aH(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Yre(t),[r,i]=Kre(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Iw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,l2.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new R3(dn.min(),i,new mi(nr),Th(),Rn())}}class l2{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new l2(r,n,Rn(),Rn(),Rn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class v_e{constructor(t,n){this.targetId=t,this.me=n}}class b_e{constructor(t,n,r=Lo.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xre{constructor(){this.fe=0,this.ge=Jre(),this.pe=Lo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Rn(),n=Rn(),r=Rn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:sn()}}),new l2(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Jre()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Mr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class q1t{constructor(t){this.Le=t,this.Be=new Map,this.ke=Th(),this.qe=Qre(),this.Qe=new mi(nr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:sn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(y8(s))if(r===0){const o=new Wt(s.path);this.Ue(n,o,Co.newNoDocument(o,dn.min()))}else Mr(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=W0(r).toUint8Array()}catch(u){if(u instanceof Kbe)return $S("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new aH(o,i,s)}catch(u){return $S(u instanceof Iw?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&y8(a.target)){const u=new Wt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Co.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Rn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new R3(t,n,this.Qe,this.ke,r);return this.ke=Th(),this.qe=Qre(),this.Qe=new mi(nr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Xre,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Zs(nr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Xre),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Qre(){return new mi(Wt.comparator)}function Jre(){return new mi(Wt.comparator)}const W1t={asc:"ASCENDING",desc:"DESCENDING"},G1t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y1t={and:"AND",or:"OR"};class K1t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _8(e,t){return e.useProto3Json||C3(t)?t:{value:t}}function gk(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function __e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function X1t(e,t){return gk(e,t.toTimestamp())}function xf(e){return Mr(!!e),dn.fromTimestamp(function(n){const r=wm(n);return new as(r.seconds,r.nanos)}(e))}function uH(e,t){return E8(e,t).canonicalString()}function E8(e,t){const n=function(i){return new zr(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function E_e(e){const t=zr.fromString(e);return Mr(C_e(t)),t}function w8(e,t){return uH(e.databaseId,t.path)}function t6(e,t){const n=E_e(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wt(x_e(n))}function w_e(e,t){return uH(e.databaseId,t)}function Q1t(e){const t=E_e(e);return t.length===4?zr.emptyPath():x_e(t)}function x8(e){return new zr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function x_e(e){return Mr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Zre(e,t,n){return{name:w8(e,t),fields:n.value.mapValue.fields}}function J1t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:sn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Mr(c===void 0||typeof c=="string"),Lo.fromBase64String(c||"")):(Mr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Lo.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?We.UNKNOWN:y_e(l.code);return new _t(c,l.message||"")}(o);n=new b_e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=t6(e,r.document.name),s=xf(r.document.updateTime),o=r.document.createTime?xf(r.document.createTime):dn.min(),a=new Oa({mapValue:{fields:r.document.fields}}),u=Co.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new LD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=t6(e,r.document),s=r.readTime?xf(r.readTime):dn.min(),o=Co.newNoDocument(i,s),a=r.removedTargetIds||[];n=new LD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=t6(e,r.document),s=r.removedTargetIds||[];n=new LD([],s,i,null)}else{if(!("filter"in t))return sn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new z1t(i,s),a=r.targetId;n=new v_e(a,o)}}return n}function Z1t(e,t){let n;if(t instanceof u2)n={update:Zre(e,t.key,t.value)};else if(t instanceof k3)n={delete:w8(e,t.key)};else if(t instanceof Jm)n={update:Zre(e,t.key,t.data),updateMask:uvt(t.fieldMask)};else{if(!(t instanceof L1t))return sn();n={verify:w8(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof US)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof VS)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof HS)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mk)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw sn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:X1t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:sn()}(e,t.precondition)),n}function evt(e,t){return e&&e.length>0?(Mr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?xf(i.updateTime):xf(s);return o.isEqual(dn.min())&&(o=xf(s)),new M1t(o,i.transformResults||[])}(n,t))):[]}function tvt(e,t){return{documents:[w_e(e,t.path)]}}function nvt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=w_e(e,i);const s=function(l){if(l.length!==0)return T_e(Sc.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:F1(d.field),direction:svt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=_8(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function rvt(e){let t=Q1t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=S_e(f);return d instanceof Sc&&Zbe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new zS(L1(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,C3(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new pk(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new pk(h,d)}(n.endAt)),E1t(t,i,o,s,a,"F",u,l)}function ivt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function S_e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=L1(n.unaryFilter.field);return Gi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=L1(n.unaryFilter.field);return Gi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=L1(n.unaryFilter.field);return Gi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=L1(n.unaryFilter.field);return Gi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(e):e.fieldFilter!==void 0?function(n){return Gi.create(L1(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Sc.create(n.compositeFilter.filters.map(r=>S_e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return sn()}}(n.compositeFilter.op))}(e):sn()}function svt(e){return W1t[e]}function ovt(e){return G1t[e]}function avt(e){return Y1t[e]}function F1(e){return{fieldPath:e.canonicalString()}}function L1(e){return Gs.fromServerFormat(e.fieldPath)}function T_e(e){return e instanceof Gi?function(n){if(n.op==="=="){if(Bre(n.value))return{unaryFilter:{field:F1(n.field),op:"IS_NAN"}};if(Lre(n.value))return{unaryFilter:{field:F1(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bre(n.value))return{unaryFilter:{field:F1(n.field),op:"IS_NOT_NAN"}};if(Lre(n.value))return{unaryFilter:{field:F1(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:F1(n.field),op:ovt(n.op),value:n.value}}}(e):e instanceof Sc?function(n){const r=n.getFilters().map(i=>T_e(i));return r.length===1?r[0]:{compositeFilter:{op:avt(n.op),filters:r}}}(e):sn()}function uvt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function C_e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Lo.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new kp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lvt{constructor(t){this.ct=t}}function cvt(e){const t=rvt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?b8(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fvt{constructor(){this._n=new dvt}addToCollectionParentIndex(t,n){return this._n.add(n),et.resolve()}getCollectionParents(t,n){return et.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return et.resolve()}deleteFieldIndex(t,n){return et.resolve()}deleteAllFieldIndexes(t){return et.resolve()}createTargetIndexes(t,n){return et.resolve()}getDocumentsMatchingTarget(t,n){return et.resolve(null)}getIndexType(t,n){return et.resolve(0)}getFieldIndexes(t,n){return et.resolve([])}getNextCollectionGroupToUpdate(t){return et.resolve(null)}getMinOffset(t,n){return et.resolve(Em.min())}getMinOffsetFromCollectionGroup(t,n){return et.resolve(Em.min())}updateCollectionGroup(t,n,r){return et.resolve()}updateIndexEntries(t,n){return et.resolve()}}class dvt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Zs(zr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Zs(zr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Db(0)}static Ln(){return new Db(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hvt{constructor(){this.changes=new F_(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Co.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?et.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pvt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mvt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Nx(r.mutation,i,wu.empty(),as.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Rn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Rn()){const i=s0();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=Dw();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=s0();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Rn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Th();const o=Ix(),a=function(){return Ix()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Jm)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),Nx(c.mutation,l,c.mutation.getFieldMask(),as.now())):o.set(l.key,wu.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new pvt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Ix();let i=new mi((o,a)=>o-a),s=Rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||wu.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Rn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=u_e();c.forEach(d=>{if(!s.has(d)){const h=m_e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):r_e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):et.resolve(s0());let a=-1,u=s;return o.next(l=>et.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?et.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Rn())).next(c=>({batchId:a,changes:a_e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Wt(n)).next(r=>{let i=Dw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=Dw();return this.indexManager.getCollectionParents(t,s).next(a=>et.forEach(a,u=>{const l=function(f,d){return new $_(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Co.newInvalidDocument(c)))});let a=Dw();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&Nx(c.mutation,l,wu.empty(),as.now()),D3(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gvt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return et.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xf(i.createTime)}}(n)),et.resolve()}getNamedQuery(t,n){return et.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:cvt(i.bundledQuery),readTime:xf(i.readTime)}}(n)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yvt{constructor(){this.overlays=new mi(Wt.comparator),this.hr=new Map}getOverlay(t,n){return et.resolve(this.overlays.get(n))}getOverlays(t,n){const r=s0();return et.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),et.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),et.resolve()}getOverlaysForCollection(t,n,r){const i=s0(),s=n.length+1,o=new Wt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return et.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new mi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=s0(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=s0(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return et.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new j1t(n,r));let s=this.hr.get(n);s===void 0&&(s=Rn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(){this.Pr=new Zs(ys.Ir),this.Tr=new Zs(ys.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new ys(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new ys(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Wt(new zr([])),r=new ys(n,t),i=new ys(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Wt(new zr([])),r=new ys(n,t),i=new ys(n,t+1);let s=Rn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ys(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ys{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Wt.comparator(t.key,n.key)||nr(t.pr,n.pr)}static Er(t,n){return nr(t.pr,n.pr)||Wt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vvt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Zs(ys.Ir)}checkEmpty(t){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new B1t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ys(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return et.resolve(o)}lookupMutationBatch(t,n){return et.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return et.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ys(n,0),i=new ys(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),et.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Zs(nr);return n.forEach(i=>{const s=new ys(i,0),o=new ys(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),et.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Wt.isDocumentKey(s)||(s=s.child(""));const o=new ys(new Wt(s),0);let a=new Zs(nr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),et.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Mr(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return et.forEach(n.mutations,i=>{const s=new ys(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new ys(n,0),i=this.wr.firstAfterOrEqual(r);return et.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,et.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bvt{constructor(t){this.vr=t,this.docs=function(){return new mi(Wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return et.resolve(r?r.document.mutableCopy():Co.newInvalidDocument(n))}getEntries(t,n){let r=Th();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Co.newInvalidDocument(i))}),et.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Th();const o=n.path,a=new Wt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||r1t(n1t(c),r)<=0||(i.has(c.key)||D3(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return et.resolve(s)}getAllFromCollectionGroup(t,n,r,i){sn()}Fr(t,n){return et.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new _vt(this)}getSize(t){return et.resolve(this.size)}}class _vt extends hvt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),et.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Evt{constructor(t){this.persistence=t,this.Mr=new F_(n=>rH(n),iH),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new lH,this.targetCount=0,this.Lr=Db.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),et.resolve()}getLastRemoteSnapshotVersion(t){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return et.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),et.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Db(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,et.resolve()}updateTargetData(t,n){return this.qn(n),et.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,et.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),et.waitFor(s).next(()=>i)}getTargetCount(t){return et.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return et.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),et.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),et.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),et.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return et.resolve(r)}containsKey(t,n){return et.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wvt{constructor(t,n){this.Br={},this.overlays={},this.kr=new ZV(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Evt(this),this.indexManager=new fvt,this.remoteDocumentCache=function(i){return new bvt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new lvt(n),this.$r=new gvt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new yvt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new vvt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new xvt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return et.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class xvt extends s1t{constructor(t){super(),this.currentSequenceNumber=t}}class cH{constructor(t){this.persistence=t,this.zr=new lH,this.jr=null}static Hr(t){return new cH(t)}get Jr(){if(this.jr)return this.jr;throw sn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),et.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),et.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),et.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Jr,r=>{const i=Wt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return et.or([()=>et.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Rn(),i=Rn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fH(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Svt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tvt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ipt()?8:o1t(io())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Svt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(FE()<=Fn.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",$1(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),et.resolve()):(FE()<=Fn.DEBUG&&kt("QueryEngine","Query:",$1(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(FE()<=Fn.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",$1(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wf(n))):et.resolve())}ji(t,n){if(Vre(n))return et.resolve(null);let r=wf(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=b8(n,null,"F"),r=wf(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Rn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,b8(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Vre(n)||i.isEqual(dn.min())?et.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?et.resolve(null):(FE()<=Fn.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$1(n)),this.es(t,o,n,t1t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Zs(s_e(t));return n.forEach((i,s)=>{D3(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return FE()<=Fn.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",$1(n)),this.zi.getDocumentsMatchingQuery(t,n,Em.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cvt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new mi(nr),this.rs=new F_(s=>rH(s),iH),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new mvt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function Avt(e,t,n,r){return new Cvt(e,t,n,r)}async function A_e(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Rn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function Dvt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=et.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Mr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Rn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function D_e(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function Ivt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Lo.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Th(),l=Rn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Nvt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return et.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function Nvt(e,t,n){let r=Rn(),i=Rn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Th();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):kt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function kvt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Rvt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,et.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new kp(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function S8(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!a2(o))throw o;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function eie(e,t,n){const r=hn(e);let i=dn.min(),s=Rn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?et.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,wf(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:Rn())).next(a=>(Pvt(r,x1t(t),a),{documents:a,hs:s})))}function Pvt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class tie{constructor(){this.activeTargetIds=I1t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ovt{constructor(){this.no=new tie,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new tie,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mvt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _A=null;function n6(){return _A===null?_A=function(){return 268435456+Math.round(2147483648*Math.random())}():_A++,"0x"+_A.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $vt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fvt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="WebChannelConnection";class Lvt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=n6(),u=this.vo(n,r.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(kt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw $S("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+M_}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=$vt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=n6();return new Promise((o,a)=>{const u=new zbe;u.setWithCredentials(!0),u.listenOnce(Vbe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case MD.NO_ERROR:const c=u.getResponseJson();kt(bo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case MD.TIMEOUT:kt(bo,`RPC '${t}' ${s} timed out`),a(new _t(We.DEADLINE_EXCEEDED,"Request time out"));break;case MD.HTTP_ERROR:const f=u.getStatus();if(kt(bo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(y)>=0?y:We.UNKNOWN}(h.status);a(new _t(p,h.message))}else a(new _t(We.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _t(We.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{kt(bo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);kt(bo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=n6(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Wbe(),a=qbe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Ube({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");kt(bo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Fvt({lo:g=>{h?kt(bo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(kt(bo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),kt(bo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(E){setTimeout(()=>{throw E},0)}})};return m(f,Aw.EventType.OPEN,()=>{h||(kt(bo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,Aw.EventType.CLOSE,()=>{h||(h=!0,kt(bo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,Aw.EventType.ERROR,g=>{h||(h=!0,$S(bo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new _t(We.UNAVAILABLE,"The operation could not be completed")))}),m(f,Aw.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Mr(!!v);const b=v,E=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(E){kt(bo,`RPC '${t}' stream ${i} received error:`,E);const _=E.status;let w=function(A){const D=ji[A];if(D!==void 0)return y_e(D)}(_),S=E.message;w===void 0&&(w=We.INTERNAL,S="Unknown error status: "+_+" with message "+E.message),h=!0,p.po(new _t(w,S)),f.close()}else kt(bo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,Hbe.STAT_EVENT,g=>{g.stat===h8.PROXY?kt(bo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===h8.NOPROXY&&kt(bo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function r6(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(e){return new K1t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_e{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new I_e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===We.RESOURCE_EXHAUSTED?(Sh(n.toString()),Sh("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new _t(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return kt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bvt extends N_e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=J1t(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?xf(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=x8(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=y8(u)?{documents:tvt(s,u)}:{query:nvt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=__e(s,o.resumeToken);const l=_8(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=gk(s,o.snapshotVersion.toTimestamp());const l=_8(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=ivt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=x8(this.serializer),n.removeTarget=t,this.i_(n)}}class jvt extends N_e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Mr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=evt(t.writeResults,t.commitTime),r=xf(t.commitTime);return this.listener.A_(r,n)}return Mr(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=x8(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Z1t(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zvt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _t(We.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,E8(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(We.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,E8(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(We.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Uvt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Sh(n),this.y_=!1):kt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vvt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{$y(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await f2(l),l.N_.set("Unknown"),l.M_.delete(4),await c2(l)}(this))})}),this.N_=new Uvt(r,i)}}async function c2(e){if($y(e))for(const t of e.x_)await t(!0)}async function f2(e){for(const t of e.x_)await t(!1)}function k_e(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),mH(n)?pH(n):L_(n).Xo()&&hH(n,t))}function dH(e,t){const n=hn(e),r=L_(n);n.F_.delete(t),r.Xo()&&R_e(n,t),n.F_.size===0&&(r.Xo()?r.n_():$y(n)&&n.N_.set("Unknown"))}function hH(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}L_(e).P_(t)}function R_e(e,t){e.L_.xe(t),L_(e).I_(t)}function pH(e){e.L_=new q1t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),L_(e).start(),e.N_.w_()}function mH(e){return $y(e)&&!L_(e).Zo()&&e.F_.size>0}function $y(e){return hn(e).M_.size===0}function P_e(e){e.L_=void 0}async function Hvt(e){e.N_.set("Online")}async function qvt(e){e.F_.forEach((t,n)=>{hH(e,t)})}async function Wvt(e,t){P_e(e),mH(e)?(e.N_.D_(t),pH(e)):e.N_.set("Unknown")}async function Gvt(e,t,n){if(e.N_.set("Online"),t instanceof b_e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await yk(e,r)}else if(t instanceof LD?e.L_.Ke(t):t instanceof v_e?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await D_e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Lo.EMPTY_BYTE_STRING,c.snapshotVersion)),R_e(s,u);const f=new kp(c.target,u,l,c.sequenceNumber);hH(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){kt("RemoteStore","Failed to raise snapshot:",r),await yk(e,r)}}async function yk(e,t,n){if(!a2(t))throw t;e.M_.add(1),await f2(e),e.N_.set("Offline"),n||(n=()=>D_e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await c2(e)})}function O_e(e,t){return t().catch(n=>yk(e,n,t))}async function O3(e){const t=hn(e),n=xm(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Yvt(t);)try{const i=await kvt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,Kvt(t,i)}catch(i){await yk(t,i)}M_e(t)&&$_e(t)}function Yvt(e){return $y(e)&&e.v_.length<10}function Kvt(e,t){e.v_.push(t);const n=xm(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function M_e(e){return $y(e)&&!xm(e).Zo()&&e.v_.length>0}function $_e(e){xm(e).start()}async function Xvt(e){xm(e).V_()}async function Qvt(e){const t=xm(e);for(const n of e.v_)t.d_(n.mutations)}async function Jvt(e,t,n){const r=e.v_.shift(),i=oH.from(r,t,n);await O_e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await O3(e)}async function Zvt(e,t){t&&xm(e).E_&&await async function(r,i){if(function(o){return U1t(o)&&o!==We.ABORTED}(i.code)){const s=r.v_.shift();xm(r).t_(),await O_e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await O3(r)}}(e,t),M_e(e)&&$_e(e)}async function rie(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=$y(n);n.M_.add(3),await f2(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await c2(n)}async function ebt(e,t){const n=hn(e);t?(n.M_.delete(2),await c2(n)):t||(n.M_.add(2),await f2(n),n.N_.set("Unknown"))}function L_(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new Bvt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:Hvt.bind(null,e),To:qvt.bind(null,e),Ao:Wvt.bind(null,e),h_:Gvt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),mH(e)?pH(e):e.N_.set("Unknown")):(await e.B_.stop(),P_e(e))})),e.B_}function xm(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new jvt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Xvt.bind(null,e),Ao:Zvt.bind(null,e),R_:Qvt.bind(null,e),A_:Jvt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await O3(e)):(await e.k_.stop(),e.v_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new th,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new gH(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(We.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yH(e,t){if(Sh("AsyncQueue",`${t}: ${e}`),a2(e))return new _t(We.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Wt.comparator(n.key,r.key):(n,r)=>Wt.comparator(n.key,r.key),this.keyedMap=Dw(),this.sortedSet=new mi(this.comparator)}static emptySet(t){return new Mv(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Mv)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Mv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iie{constructor(){this.q_=new mi(Wt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):sn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ib{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ib(t,n,Mv.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&A3(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tbt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class nbt{constructor(){this.queries=new F_(t=>i_e(t),A3),this.onlineState="Unknown",this.z_=new Set}}async function F_e(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new tbt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=yH(o,`Initialization of query '${$1(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&vH(n)}async function L_e(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rbt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&vH(n)}function ibt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function vH(e){e.z_.forEach(t=>{t.next()})}var T8,sie;(sie=T8||(T8={})).J_="default",sie.Cache="cache";class B_e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Ib(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Ib.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==T8.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_e{constructor(t){this.key=t}}class z_e{constructor(t){this.key=t}}class sbt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Rn(),this.mutatedKeys=Rn(),this.Ia=s_e(t),this.Ta=new Mv(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new iie,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=D3(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new Ib(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new iie,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Rn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new z_e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new j_e(r))}),n}pa(t){this.la=t.hs,this.Pa=Rn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Ib.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class obt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class abt{constructor(t){this.key=t,this.wa=!1}}class ubt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new F_(a=>i_e(a),A3),this.Da=new Map,this.Ca=new Set,this.va=new mi(Wt.comparator),this.Fa=new Map,this.Ma=new lH,this.xa={},this.Oa=new Map,this.Na=Db.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function lbt(e,t,n=!0){const r=G_e(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await U_e(r,t,n,!0),i}async function cbt(e,t){const n=G_e(e);await U_e(n,t,!0,!1)}async function U_e(e,t,n,r){const i=await Rvt(e.localStore,wf(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await fbt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&k_e(e.remoteStore,i),a}async function fbt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await eie(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const E=v&&v.targetChanges.get(g.targetId),_=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(b,m.isPrimaryClient,E,_);return aie(m,g.targetId,w.fa),w.snapshot}(e,f,d,h);const s=await eie(e.localStore,t,!0),o=new sbt(t,s.hs),a=o.da(s.documents),u=l2.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);aie(e,n,l.fa);const c=new obt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function dbt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!A3(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await S8(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dH(r.remoteStore,i.targetId),C8(r,i.targetId)}).catch(o2)):(C8(r,i.targetId),await S8(r.localStore,i.targetId,!0))}async function hbt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dH(n.remoteStore,r.targetId))}async function pbt(e,t,n){const r=Ebt(e);try{const i=await function(o,a){const u=hn(o),l=as.now(),c=a.reduce((h,p)=>h.add(p.key),Rn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Th(),m=Rn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=F1t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Jm(v.key,b,Xbe(b.value.mapValue),Wa.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:a_e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new mi(nr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await d2(r,i.changes),await O3(r.remoteStore)}catch(i){const s=yH(i,"Failed to persist write");n.reject(s)}}async function V_e(e,t){const n=hn(e);try{const r=await Ivt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Mr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Mr(o.wa):i.removedDocuments.size>0&&(Mr(o.wa),o.wa=!1))}),await d2(n,r,t)}catch(r){await o2(r)}}function oie(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&vH(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mbt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new mi(Wt.comparator);o=o.insert(s,Co.newNoDocument(s,dn.min()));const a=Rn().add(s),u=new R3(dn.min(),new Map,new mi(nr),o,a);await V_e(r,u),r.va=r.va.remove(s),r.Fa.delete(t),bH(r)}else await S8(r.localStore,t,!1).then(()=>C8(r,t,n)).catch(o2)}async function gbt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await Dvt(n.localStore,t);q_e(n,r,null),H_e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await d2(n,i)}catch(i){await o2(i)}}async function ybt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Mr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);q_e(r,t,n),H_e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await d2(r,i)}catch(i){await o2(i)}}function H_e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function q_e(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function C8(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||W_e(e,r)})}function W_e(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(dH(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),bH(e))}function aie(e,t,n){for(const r of n)r instanceof j_e?(e.Ma.addReference(r.key,t),vbt(e,r)):r instanceof z_e?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||W_e(e,r.key)):sn()}function vbt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),bH(e))}function bH(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Wt(zr.fromString(t)),r=e.Na.next();e.Fa.set(r,new abt(n)),e.va=e.va.insert(n,r),k_e(e.remoteStore,new kp(wf(sH(n.path)),r,"TargetPurposeLimboResolution",ZV.oe))}}async function d2(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=fH.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>et.forEach(l,d=>et.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>et.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!a2(f))throw f;kt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function bbt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const r=await A_e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _t(We.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await d2(n,r.us)}}function _bt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return Rn().add(r.key);{let i=Rn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function G_e(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=V_e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_bt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mbt.bind(null,t),t.Sa.h_=rbt.bind(null,t.eventManager),t.Sa.ka=ibt.bind(null,t.eventManager),t}function Ebt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gbt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ybt.bind(null,t),t}class uie{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=P3(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return Avt(this.persistence,new Tvt,t.initialUser,this.serializer)}createPersistence(t){return new wvt(cH.Hr,this.serializer)}createSharedClientState(t){return new Ovt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wbt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oie(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bbt.bind(null,this.syncEngine),await ebt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new nbt}()}createDatastore(t){const n=P3(t.databaseInfo.databaseId),r=function(s){return new Lvt(s)}(t.databaseInfo);return function(s,o,a,u){return new zvt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Vvt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>oie(this.syncEngine,n,0),function(){return nie.D()?new nie:new Mvt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new ubt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);kt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await f2(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Sh("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xbt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ca.UNAUTHENTICATED,this.clientId=Gbe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{kt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(kt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new th;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=yH(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function i6(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await A_e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function lie(e,t){e.asyncQueue.verifyOperationInProgress();const n=await K_e(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>rie(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>rie(t.remoteStore,i)),e._onlineComponents=t}function Sbt(e){return e.name==="FirebaseError"?e.code===We.FAILED_PRECONDITION||e.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function K_e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await i6(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Sbt(n))throw n;$S("Error using user provided cache. Falling back to memory cache: "+n),await i6(e,new uie)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await i6(e,new uie);return e._offlineComponents}async function _H(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await lie(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await lie(e,new wbt))),e._onlineComponents}function Tbt(e){return K_e(e).then(t=>t.persistence)}function Cbt(e){return _H(e).then(t=>t.remoteStore)}function Abt(e){return _H(e).then(t=>t.syncEngine)}async function X_e(e){const t=await _H(e),n=t.eventManager;return n.onListen=lbt.bind(null,t.syncEngine),n.onUnlisten=dbt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cbt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=hbt.bind(null,t.syncEngine),n}function Dbt(e){return e.asyncQueue.enqueue(async()=>{const t=await Tbt(e),n=await Cbt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),c2(s)}(n)})}function Ibt(e,t,n={}){const r=new th;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Y_e({next:d=>{o.enqueueAndForget(()=>L_e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new _t(We.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new _t(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new B_e(sH(a.path),c,{includeMetadataChanges:!0,ra:!0});return F_e(s,f)}(await X_e(e),e.asyncQueue,t,n,r)),r.promise}function Nbt(e,t,n={}){const r=new th;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Y_e({next:d=>{o.enqueueAndForget(()=>L_e(s,f)),d.fromCache&&u.source==="server"?l.reject(new _t(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new B_e(a,c,{includeMetadataChanges:!0,ra:!0});return F_e(s,f)}(await X_e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cie=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_e(e,t,n){if(!n)throw new _t(We.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function kbt(e,t,n,r){if(t===!0&&r===!0)throw new _t(We.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function fie(e){if(!Wt.isDocumentKey(e))throw new _t(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function die(e){if(Wt.isDocumentKey(e))throw new _t(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function M3(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":sn()}function Tc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=M3(e);throw new _t(We.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kbt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q_e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _t(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _t(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _t(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class EH{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hie({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new _t(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hie(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gyt;switch(r.type){case"firstParty":return new Xyt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cie.get(n);r&&(kt("ComponentProvider","Removing Datastore"),cie.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Fy(this.firestore,t,this._query)}}class aa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new aa(this.firestore,t,this._key)}}class tm extends Fy{constructor(t,n,r){super(t,n,sH(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new aa(this.firestore,null,new Wt(t))}withConverter(t){return new tm(this.firestore,t,this._path)}}function jl(e,t,...n){if(e=$r(e),J_e("collection","path",t),e instanceof EH){const r=zr.fromString(t,...n);return die(r),new tm(e,null,r)}{if(!(e instanceof aa||e instanceof tm))throw new _t(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(zr.fromString(t,...n));return die(r),new tm(e.firestore,null,r)}}function Ji(e,t,...n){if(e=$r(e),arguments.length===1&&(t=Gbe.newId()),J_e("doc","path",t),e instanceof EH){const r=zr.fromString(t,...n);return fie(r),new aa(e,null,new Wt(r))}{if(!(e instanceof aa||e instanceof tm))throw new _t(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(zr.fromString(t,...n));return fie(r),new aa(e.firestore,e instanceof tm?e.converter:null,new Wt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rbt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new I_e(this,"async_queue_retry"),this.hu=()=>{const n=r6();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=r6();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=r6();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new th;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!a2(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Sh("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=gH.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&sn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Zm extends EH{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new Rbt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Z_e(this),this._firestoreClient.terminate()}}function Pbt(e,t,n){n||(n="(default)");const r=P_(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(PS(s,t))return i;throw new _t(We.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(We.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function h2(e){return e._firestoreClient||Z_e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Z_e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new l1t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Q_e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new xbt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Obt(e){return Dbt(h2(e=Tc(e,Zm)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Nb(Lo.fromBase64String(t))}catch(n){throw new _t(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Nb(Lo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gs(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wH=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return nr(this._lat,t._lat)||nr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mbt=/^__.*__$/;class $bt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Jm(t,this.data,this.fieldMask,n,this.fieldTransforms):new u2(t,this.data,n,this.fieldTransforms)}}class eEe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Jm(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function tEe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class xH{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new xH(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return vk(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(tEe(this.fu)&&Mbt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class Fbt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||P3(t)}Fu(t,n,r,i=!1){return new xH({fu:t,methodName:n,vu:r,path:Gs.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F3(e){const t=e._freezeSettings(),n=P3(e._databaseId);return new Fbt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nEe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);TH("Data must be an object, but it was:",o,r);const a=sEe(r,o);let u,l;if(s.merge)u=new wu(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=A8(t,f,n);if(!o.contains(d))throw new _t(We.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);aEe(c,d)||c.push(d)}u=new wu(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new $bt(new Oa(a),u,l)}class L3 extends $3{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof L3}}class SH extends $3{_toFieldTransform(t){return new P1t(t.path,new US)}isEqual(t){return t instanceof SH}}function rEe(e,t,n,r){const i=e.Fu(1,t,n);TH("Data must be an object, but it was:",i,r);const s=[],o=Oa.empty();My(r,(u,l)=>{const c=CH(t,u,n);l=$r(l);const f=i.Su(c);if(l instanceof L3)s.push(c);else{const d=m2(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new wu(s);return new eEe(o,a,i.fieldTransforms)}function iEe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[A8(t,r,n)],u=[i];if(s.length%2!=0)throw new _t(We.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(A8(t,s[d])),u.push(s[d+1]);const l=[],c=Oa.empty();for(let d=a.length-1;d>=0;--d)if(!aEe(l,a[d])){const h=a[d];let p=u[d];p=$r(p);const m=o.Su(h);if(p instanceof L3)l.push(h);else{const g=m2(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new wu(l);return new eEe(c,f,o.fieldTransforms)}function Lbt(e,t,n,r=!1){return m2(n,e.Fu(r?4:3,t))}function m2(e,t){if(oEe(e=$r(e)))return TH("Unsupported field value:",t,e),sEe(e,t);if(e instanceof $3)return function(r,i){if(!tEe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=m2(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=$r(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return N1t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=as.fromDate(r);return{timestampValue:gk(i.serializer,s)}}if(r instanceof as){const s=new as(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gk(i.serializer,s)}}if(r instanceof wH)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nb)return{bytesValue:__e(i.serializer,r._byteString)};if(r instanceof aa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uH(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${M3(r)}`)}(e,t)}function sEe(e,t){const n={};return Ybe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):My(e,(r,i)=>{const s=m2(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function oEe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof as||e instanceof wH||e instanceof Nb||e instanceof aa||e instanceof $3)}function TH(e,t,n){if(!oEe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=M3(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function A8(e,t,n){if((t=$r(t))instanceof p2)return t._internalPath;if(typeof t=="string")return CH(e,t);throw vk("Field path arguments must be of type string or ",e,!1,void 0,n)}const Bbt=new RegExp("[~\\*/\\[\\]]");function CH(e,t,n){if(t.search(Bbt)>=0)throw vk(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new p2(...t.split("."))._internalPath}catch{throw vk(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function vk(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _t(We.INVALID_ARGUMENT,a+e+u)}function aEe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uEe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new aa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jbt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(B3("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jbt extends uEe{data(){return super.data()}}function B3(e,t){return typeof t=="string"?CH(e,t):t instanceof p2?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zbt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new _t(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AH{}class lEe extends AH{}function pie(e,t,...n){let r=[];t instanceof AH&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof DH).length,a=s.filter(u=>u instanceof j3).length;if(o>1||o>0&&a>0)throw new _t(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class j3 extends lEe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new j3(t,n,r)}_apply(t){const n=this._parse(t);return cEe(t._query,n),new Fy(t.firestore,t.converter,v8(t._query,n))}_parse(t){const n=F3(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new _t(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){gie(f,c);const h=[];for(const p of f)h.push(mie(u,s,p));d={arrayValue:{values:h}}}else d=mie(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||gie(f,c),d=Lbt(a,o,f,c==="in"||c==="not-in");return Gi.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Ubt(e,t,n){const r=t,i=B3("where",e);return j3._create(i,r,n)}class DH extends AH{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new DH(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sc.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)cEe(o,u),o=v8(o,u)}(t._query,n),new Fy(t.firestore,t.converter,v8(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class IH extends lEe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new IH(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new _t(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _t(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zS(s,o)}(t._query,this._field,this._direction);return new Fy(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $_(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Vbt(e,t="asc"){const n=t,r=B3("orderBy",e);return IH._create(r,n)}function mie(e,t,n){if(typeof(n=$r(n))=="string"){if(n==="")throw new _t(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r_e(t)&&n.indexOf("/")!==-1)throw new _t(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(zr.fromString(n));if(!Wt.isDocumentKey(r))throw new _t(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fre(e,new Wt(r))}if(n instanceof aa)return Fre(e,n._key);throw new _t(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${M3(n)}.`)}function gie(e,t){if(!Array.isArray(e)||e.length===0)throw new _t(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function cEe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new _t(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _t(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Hbt{convertValue(t,n="none"){switch(G0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(W0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw sn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return My(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new wH(Vi(t.latitude),Vi(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=tH(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(LS(t));default:return null}}convertTimestamp(t){const n=wm(t);return new as(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=zr.fromString(t);Mr(C_e(r));const i=new BS(r.get(1),r.get(3)),s=new Wt(r.popFirst(5));return i.isEqual(n)||Sh(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fEe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class dEe extends uEe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new BD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(B3("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class BD extends dEe{data(t={}){return super.data(t)}}class qbt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Nw(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new BD(this._firestore,this._userDataWriter,r.key,r,new Nw(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new BD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nw(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new BD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nw(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Wbt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wbt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(e){e=Tc(e,aa);const t=Tc(e.firestore,Zm);return Ibt(h2(t),e._key).then(n=>Kbt(t,e,n))}class hEe extends Hbt{constructor(t){super(),this.firestore=t}convertBytes(t){return new Nb(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new aa(this.firestore,null,n)}}function LE(e){e=Tc(e,Fy);const t=Tc(e.firestore,Zm),n=h2(t),r=new hEe(t);return zbt(e._query),Nbt(n,e._query).then(i=>new qbt(t,r,e,i))}function uu(e,t,n){e=Tc(e,aa);const r=Tc(e.firestore,Zm),i=fEe(e.converter,t,n);return z3(r,[nEe(F3(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Wa.none())])}function Gbt(e,t,n,...r){e=Tc(e,aa);const i=Tc(e.firestore,Zm),s=F3(i);let o;return o=typeof(t=$r(t))=="string"||t instanceof p2?iEe(s,"updateDoc",e._key,t,n,r):rEe(s,"updateDoc",e._key,t),z3(i,[o.toMutation(e._key,Wa.exists(!0))])}function Ybt(e){return z3(Tc(e.firestore,Zm),[new k3(e._key,Wa.none())])}function z3(e,t){return function(r,i){const s=new th;return r.asyncQueue.enqueueAndForget(async()=>pbt(await Abt(r),i,s)),s.promise}(h2(e),t)}function Kbt(e,t,n){const r=n.docs.get(t._key),i=new hEe(e);return new dEe(e,i,t._key,r,new Nw(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xbt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=F3(t)}set(t,n,r){this._verifyNotCommitted();const i=o6(t,this._firestore),s=fEe(i.converter,n,r),o=nEe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Wa.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=o6(t,this._firestore);let o;return o=typeof(n=$r(n))=="string"||n instanceof p2?iEe(this._dataReader,"WriteBatch.update",s._key,n,r,i):rEe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Wa.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=o6(t,this._firestore);return this._mutations=this._mutations.concat(new k3(n._key,Wa.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function o6(e,t){if((e=$r(e)).firestore!==t)throw new _t(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Qbt(){return new SH("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yie(e){return h2(e=Tc(e,Zm)),new Xbt(e,t=>z3(e,t))}(function(t,n=!0){(function(i){M_=i})(Oy),wh(new Rf("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zm(new Yyt(r.getProvider("auth-internal")),new Jyt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _t(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new BS(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),vc(Pre,"4.6.3",t),vc(Pre,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8=new Map,pEe={activated:!1,tokenObservers:[]},Jbt={initialized:!1,enabled:!1};function us(e){return D8.get(e)||Object.assign({},pEe)}function Zbt(e,t){return D8.set(e,t),D8.get(e)}function U3(){return Jbt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mEe="https://content-firebaseappcheck.googleapis.com/v1",e_t="exchangeRecaptchaV3Token",t_t="exchangeDebugToken",vie={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},n_t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new RS,this.pending.promise.catch(n=>{}),await i_t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new RS,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function i_t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ba=new R_("appCheck","AppCheck",s_t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bie(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function NH(e){if(!us(e).activated)throw Ba.create("use-before-activation",{appName:e.name})}function gEe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=EA(n)+"d:"),r&&(o+=EA(r)+"h:"),o+=EA(i)+"m:"+EA(s)+"s",o}function EA(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kH({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Ba.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Ba.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Ba.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ba.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function o_t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${mEe}/projects/${n}/apps/${r}:${e_t}?key=${i}`,body:{recaptcha_v3_token:t}}}function yEe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${mEe}/projects/${n}/apps/${r}:${t_t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_t="firebase-app-check-database",u_t=1,qS="firebase-app-check-store",vEe="debug-token";let wA=null;function bEe(){return wA||(wA=new Promise((e,t)=>{try{const n=indexedDB.open(a_t,u_t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ba.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qS,{keyPath:"compositeKey"})}}}catch(n){t(Ba.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),wA)}function l_t(e){return EEe(wEe(e))}function c_t(e,t){return _Ee(wEe(e),t)}function f_t(e){return _Ee(vEe,e)}function d_t(){return EEe(vEe)}async function _Ee(e,t){const r=(await bEe()).transaction(qS,"readwrite"),s=r.objectStore(qS).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Ba.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function EEe(e){const n=(await bEe()).transaction(qS,"readonly"),i=n.objectStore(qS).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Ba.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function wEe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new b3("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_t(e){if(PV()){let t;try{t=await l_t(e)}catch(n){WS.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function a6(e,t){return PV()?c_t(e,t).catch(n=>{WS.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function p_t(){let e;try{e=await d_t()}catch{}if(e)return e;{const t=hpt();return f_t(t).catch(n=>WS.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(){return U3().enabled}async function PH(){const e=U3();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function m_t(){const e=Bve(),t=U3();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new RS;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(p_t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_t={error:"UNKNOWN_ERROR"};function y_t(e){return RV.encodeString(JSON.stringify(e),!1)}async function I8(e,t=!1){const n=e.app;NH(n);const r=us(n);let i=r.token,s;if(i&&!ov(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(ov(u)?i=u:await a6(n,void 0))}if(!t&&i&&ov(i))return{token:i.token};let o=!1;if(RH()){r.exchangeTokenPromise||(r.exchangeTokenPromise=kH(yEe(n,await PH()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await a6(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await us(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?WS.warn(u.message):WS.error(u),s=u}let a;return i?s?ov(i)?a={token:i.token,internalError:s}:a=Eie(s):(a={token:i.token},r.token=i,await a6(n,i)):a=Eie(s),o&&TEe(n,a),a}async function v_t(e){const t=e.app;NH(t);const{provider:n}=us(t);if(RH()){const r=await PH(),{token:i}=await kH(yEe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function xEe(e,t,n,r){const{app:i}=e,s=us(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ov(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),_ie(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>_ie(e))}function SEe(e,t){const n=us(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function _ie(e){const{app:t}=e,n=us(t);let r=n.tokenRefresher;r||(r=b_t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function b_t(e){const{app:t}=e;return new r_t(async()=>{const n=us(t);let r;if(n.token?r=await I8(e,!0):r=await I8(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=us(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},vie.RETRIAL_MIN_WAIT,vie.RETRIAL_MAX_WAIT)}function TEe(e,t){const n=us(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function ov(e){return e.expireTimeMillis-Date.now()>0}function Eie(e){return{token:y_t(g_t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=us(this.app);for(const n of t)SEe(this.app,n.next);return Promise.resolve()}}function E_t(e,t){return new __t(e,t)}function w_t(e){return{getToken:t=>I8(e,t),getLimitedUseToken:()=>v_t(e),addTokenListener:t=>xEe(e,"INTERNAL",t),removeTokenListener:t=>SEe(e.app,t)}}const x_t="@firebase/app-check",S_t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_t="https://www.google.com/recaptcha/api.js";function C_t(e,t){const n=new RS,r=us(e);r.reCAPTCHAState={initialized:n};const i=A_t(e),s=bie(!1);return s?wie(e,t,s,i,n):N_t(()=>{const o=bie(!1);if(!o)throw new Error("no recaptcha");wie(e,t,o,i,n)}),n.promise}function wie(e,t,n,r,i){n.ready(()=>{I_t(e,t,n,r),i.resolve(n)})}function A_t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function D_t(e){NH(e);const n=await us(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=us(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function I_t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{us(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{us(e).reCAPTCHAState.succeeded=!1}}),s=us(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function N_t(e){const t=document.createElement("script");t.src=T_t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;R_t(this._throttleData);const i=await D_t(this._app).catch(o=>{throw Ba.create("recaptcha-error")});if(!(!((t=us(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ba.create("recaptcha-error");let s;try{s=await kH(o_t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=k_t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ba.create("throttled",{time:gEe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=P_(t,"heartbeat"),C_t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof OH?this._siteKey===t._siteKey:!1}}function k_t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+n_t,httpStatus:e};{const n=t?t.backoffCount:0,r=vpt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function R_t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ba.create("throttled",{time:gEe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_t(e=MV(),t){e=$r(e);const n=P_(e,"app-check");if(U3().initialized||m_t(),RH()&&PH().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Ba.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return O_t(e,t.provider,t.isTokenAutoRefreshEnabled),us(e).isTokenAutoRefreshEnabled&&xEe(r,"INTERNAL",()=>{}),r}function O_t(e,t,n){const r=Zbt(e,Object.assign({},pEe));r.activated=!0,r.provider=t,r.cachedTokenPromise=h_t(e).then(i=>(i&&ov(i)&&(r.token=i,TEe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const M_t="app-check",xie="app-check-internal";function $_t(){wh(new Rf(M_t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return E_t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(xie).initialize()})),wh(new Rf(xie,e=>{const t=e.getProvider("app-check").getImmediate();return w_t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),vc(x_t,S_t)}$_t();function xA(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CEe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof xA=="function"&&xA;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof xA=="function"&&xA,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,_!==o&&m(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,w){if(typeof _!="function"&&this.state===l||typeof w!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var C=this.state===l?_:w;h(S,C,this.outcome)}else this.queue.push(new d(S,_,w));return S};function d(_,w,S){this.promise=_,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},d.prototype.otherCallFulfilled=function(_){h(this.promise,this.onFulfilled,_)},d.prototype.callRejected=function(_){a.reject(this.promise,_)},d.prototype.otherCallRejected=function(_){h(this.promise,this.onRejected,_)};function h(_,w,S){s(function(){var C;try{C=w(S)}catch(A){return a.reject(_,A)}C===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,C)})}a.resolve=function(_,w){var S=g(p,w);if(S.status==="error")return a.reject(_,S.value);var C=S.value;if(C)m(_,C);else{_.state=l,_.outcome=w;for(var A=-1,D=_.queue.length;++A<D;)_.queue[A].callFulfilled(w)}return _},a.reject=function(_,w){_.state=u,_.outcome=w;for(var S=-1,C=_.queue.length;++S<C;)_.queue[S].callRejected(w);return _};function p(_){var w=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof w=="function")return function(){w.apply(_,arguments)}}function m(_,w){var S=!1;function C(O){S||(S=!0,a.reject(_,O))}function A(O){S||(S=!0,a.resolve(_,O))}function D(){w(A,C)}var I=g(D);I.status==="error"&&C(I.value)}function g(_,w){var S={};try{S.value=_(w),S.status="success"}catch(C){S.status="error",S.value=C}return S}f.resolve=y;function y(_){return _ instanceof this?_:a.resolve(new this(o),_)}f.reject=v;function v(_){var w=new this(o);return a.reject(w,_)}f.all=b;function b(_){var w=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,C=!1;if(!S)return this.resolve([]);for(var A=new Array(S),D=0,I=-1,O=new this(o);++I<S;)R(_[I],I);return O;function R(M,F){w.resolve(M).then(P,function(j){C||(C=!0,a.reject(O,j))});function P(j){A[F]=j,++D===S&&!C&&(C=!0,a.resolve(O,A))}}}f.race=E;function E(_){var w=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,C=!1;if(!S)return this.resolve([]);for(var A=-1,D=new this(o);++A<S;)I(_[A]);return D;function I(O){w.resolve(O).then(function(R){C||(C=!0,a.resolve(D,R))},function(R){C||(C=!0,a.reject(D,R))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function o(K,ae){if(!(K instanceof ae))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ae=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||ae)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(K,ae){K=K||[],ae=ae||{};try{return new Blob(K,ae)}catch(he){if(he.name!=="TypeError")throw he;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ge=new ee,be=0;be<K.length;be+=1)ge.append(K[be]);return ge.getBlob(ae.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(K,ae){ae&&K.then(function(ee){ae(null,ee)},function(ee){ae(ee)})}function h(K,ae,ee){typeof ae=="function"&&K.then(ae),typeof ee=="function"&&K.catch(ee)}function p(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,E="readonly",_="readwrite";function w(K){for(var ae=K.length,ee=new ArrayBuffer(ae),ge=new Uint8Array(ee),be=0;be<ae;be++)ge[be]=K.charCodeAt(be);return ee}function S(K){return new f(function(ae){var ee=K.transaction(g,_),ge=c([""]);ee.objectStore(g).put(ge,"key"),ee.onabort=function(be){be.preventDefault(),be.stopPropagation(),ae(!1)},ee.oncomplete=function(){var be=navigator.userAgent.match(/Chrome\/(\d+)/),he=navigator.userAgent.match(/Edge\//);ae(he||!be||parseInt(be[1],10)>=43)}}).catch(function(){return!1})}function C(K){return typeof y=="boolean"?f.resolve(y):S(K).then(function(ae){return y=ae,y})}function A(K){var ae=v[K.name],ee={};ee.promise=new f(function(ge,be){ee.resolve=ge,ee.reject=be}),ae.deferredOperations.push(ee),ae.dbReady?ae.dbReady=ae.dbReady.then(function(){return ee.promise}):ae.dbReady=ee.promise}function D(K){var ae=v[K.name],ee=ae.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function I(K,ae){var ee=v[K.name],ge=ee.deferredOperations.pop();if(ge)return ge.reject(ae),ge.promise}function O(K,ae){return new f(function(ee,ge){if(v[K.name]=v[K.name]||W(),K.db)if(ae)A(K),K.db.close();else return ee(K.db);var be=[K.name];ae&&be.push(K.version);var he=u.open.apply(u,be);ae&&(he.onupgradeneeded=function($e){var Ke=he.result;try{Ke.createObjectStore(K.storeName),$e.oldVersion<=1&&Ke.createObjectStore(g)}catch(Qe){if(Qe.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+$e.oldVersion+" to version "+$e.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw Qe}}),he.onerror=function($e){$e.preventDefault(),ge(he.error)},he.onsuccess=function(){var $e=he.result;$e.onversionchange=function(Ke){Ke.target.close()},ee($e),D(K)}})}function R(K){return O(K,!1)}function M(K){return O(K,!0)}function F(K,ae){if(!K.db)return!0;var ee=!K.db.objectStoreNames.contains(K.storeName),ge=K.version<K.db.version,be=K.version>K.db.version;if(ge&&(K.version!==ae&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),be||ee){if(ee){var he=K.db.version+1;he>K.version&&(K.version=he)}return!0}return!1}function P(K){return new f(function(ae,ee){var ge=new FileReader;ge.onerror=ee,ge.onloadend=function(be){var he=btoa(be.target.result||"");ae({__local_forage_encoded_blob:!0,data:he,type:K.type})},ge.readAsBinaryString(K)})}function j(K){var ae=w(atob(K.data));return c([ae],{type:K.type})}function z(K){return K&&K.__local_forage_encoded_blob}function V(K){var ae=this,ee=ae._initReady().then(function(){var ge=v[ae._dbInfo.name];if(ge&&ge.dbReady)return ge.dbReady});return h(ee,K,K),ee}function $(K){A(K);for(var ae=v[K.name],ee=ae.forages,ge=0;ge<ee.length;ge++){var be=ee[ge];be._dbInfo.db&&(be._dbInfo.db.close(),be._dbInfo.db=null)}return K.db=null,R(K).then(function(he){return K.db=he,F(K)?M(K):he}).then(function(he){K.db=ae.db=he;for(var $e=0;$e<ee.length;$e++)ee[$e]._dbInfo.db=he}).catch(function(he){throw I(K,he),he})}function U(K,ae,ee,ge){ge===void 0&&(ge=1);try{var be=K.db.transaction(K.storeName,ae);ee(null,be)}catch(he){if(ge>0&&(!K.db||he.name==="InvalidStateError"||he.name==="NotFoundError"))return f.resolve().then(function(){if(!K.db||he.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),M(K)}).then(function(){return $(K).then(function(){U(K,ae,ee,ge-1)})}).catch(ee);ee(he)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(K){var ae=this,ee={db:null};if(K)for(var ge in K)ee[ge]=K[ge];var be=v[ee.name];be||(be=W(),v[ee.name]=be),be.forages.push(ae),ae._initReady||(ae._initReady=ae.ready,ae.ready=V);var he=[];function $e(){return f.resolve()}for(var Ke=0;Ke<be.forages.length;Ke++){var Qe=be.forages[Ke];Qe!==ae&&he.push(Qe._initReady().catch($e))}var Je=be.forages.slice(0);return f.all(he).then(function(){return ee.db=be.db,R(ee)}).then(function(ct){return ee.db=ct,F(ee,ae._defaultConfig.version)?M(ee):ct}).then(function(ct){ee.db=be.db=ct,ae._dbInfo=ee;for(var xt=0;xt<Je.length;xt++){var pn=Je[xt];pn!==ae&&(pn._dbInfo.db=ee.db,pn._dbInfo.version=ee.version)}})}function q(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){U(ee._dbInfo,E,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=Qe.get(K);Je.onsuccess=function(){var ct=Je.result;ct===void 0&&(ct=null),z(ct)&&(ct=j(ct)),be(ct)},Je.onerror=function(){he(Je.error)}}catch(ct){he(ct)}})}).catch(he)});return d(ge,ae),ge}function Y(K,ae){var ee=this,ge=new f(function(be,he){ee.ready().then(function(){U(ee._dbInfo,E,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=Qe.openCursor(),ct=1;Je.onsuccess=function(){var xt=Je.result;if(xt){var pn=xt.value;z(pn)&&(pn=j(pn));var Mt=K(pn,xt.key,ct++);Mt!==void 0?be(Mt):xt.continue()}else be()},Je.onerror=function(){he(Je.error)}}catch(xt){he(xt)}})}).catch(he)});return d(ge,ae),ge}function re(K,ae,ee){var ge=this;K=p(K);var be=new f(function(he,$e){var Ke;ge.ready().then(function(){return Ke=ge._dbInfo,b.call(ae)==="[object Blob]"?C(Ke.db).then(function(Qe){return Qe?ae:P(ae)}):ae}).then(function(Qe){U(ge._dbInfo,_,function(Je,ct){if(Je)return $e(Je);try{var xt=ct.objectStore(ge._dbInfo.storeName);Qe===null&&(Qe=void 0);var pn=xt.put(Qe,K);ct.oncomplete=function(){Qe===void 0&&(Qe=null),he(Qe)},ct.onabort=ct.onerror=function(){var Mt=pn.error?pn.error:pn.transaction.error;$e(Mt)}}catch(Mt){$e(Mt)}})}).catch($e)});return d(be,ee),be}function pe(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){U(ee._dbInfo,_,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=Qe.delete(K);Ke.oncomplete=function(){be()},Ke.onerror=function(){he(Je.error)},Ke.onabort=function(){var ct=Je.error?Je.error:Je.transaction.error;he(ct)}}catch(ct){he(ct)}})}).catch(he)});return d(ge,ae),ge}function _e(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){U(ae._dbInfo,_,function(he,$e){if(he)return be(he);try{var Ke=$e.objectStore(ae._dbInfo.storeName),Qe=Ke.clear();$e.oncomplete=function(){ge()},$e.onabort=$e.onerror=function(){var Je=Qe.error?Qe.error:Qe.transaction.error;be(Je)}}catch(Je){be(Je)}})}).catch(be)});return d(ee,K),ee}function de(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){U(ae._dbInfo,E,function(he,$e){if(he)return be(he);try{var Ke=$e.objectStore(ae._dbInfo.storeName),Qe=Ke.count();Qe.onsuccess=function(){ge(Qe.result)},Qe.onerror=function(){be(Qe.error)}}catch(Je){be(Je)}})}).catch(be)});return d(ee,K),ee}function ye(K,ae){var ee=this,ge=new f(function(be,he){if(K<0){be(null);return}ee.ready().then(function(){U(ee._dbInfo,E,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=!1,ct=Qe.openKeyCursor();ct.onsuccess=function(){var xt=ct.result;if(!xt){be(null);return}K===0||Je?be(xt.key):(Je=!0,xt.advance(K))},ct.onerror=function(){he(ct.error)}}catch(xt){he(xt)}})}).catch(he)});return d(ge,ae),ge}function Ce(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){U(ae._dbInfo,E,function(he,$e){if(he)return be(he);try{var Ke=$e.objectStore(ae._dbInfo.storeName),Qe=Ke.openKeyCursor(),Je=[];Qe.onsuccess=function(){var ct=Qe.result;if(!ct){ge(Je);return}Je.push(ct.key),ct.continue()},Qe.onerror=function(){be(Qe.error)}}catch(ct){be(ct)}})}).catch(be)});return d(ee,K),ee}function ve(K,ae){ae=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var ge=this,be;if(!K.name)be=f.reject("Invalid arguments");else{var he=K.name===ee.name&&ge._dbInfo.db,$e=he?f.resolve(ge._dbInfo.db):R(K).then(function(Ke){var Qe=v[K.name],Je=Qe.forages;Qe.db=Ke;for(var ct=0;ct<Je.length;ct++)Je[ct]._dbInfo.db=Ke;return Ke});K.storeName?be=$e.then(function(Ke){if(Ke.objectStoreNames.contains(K.storeName)){var Qe=Ke.version+1;A(K);var Je=v[K.name],ct=Je.forages;Ke.close();for(var xt=0;xt<ct.length;xt++){var pn=ct[xt];pn._dbInfo.db=null,pn._dbInfo.version=Qe}var Mt=new f(function(Nn,fr){var dr=u.open(K.name,Qe);dr.onerror=function(lo){var Vc=dr.result;Vc.close(),fr(lo)},dr.onupgradeneeded=function(){var lo=dr.result;lo.deleteObjectStore(K.storeName)},dr.onsuccess=function(){var lo=dr.result;lo.close(),Nn(lo)}});return Mt.then(function(Nn){Je.db=Nn;for(var fr=0;fr<ct.length;fr++){var dr=ct[fr];dr._dbInfo.db=Nn,D(dr._dbInfo)}}).catch(function(Nn){throw(I(K,Nn)||f.resolve()).catch(function(){}),Nn})}}):be=$e.then(function(Ke){A(K);var Qe=v[K.name],Je=Qe.forages;Ke.close();for(var ct=0;ct<Je.length;ct++){var xt=Je[ct];xt._dbInfo.db=null}var pn=new f(function(Mt,Nn){var fr=u.deleteDatabase(K.name);fr.onerror=function(){var dr=fr.result;dr&&dr.close(),Nn(fr.error)},fr.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},fr.onsuccess=function(){var dr=fr.result;dr&&dr.close(),Mt(dr)}});return pn.then(function(Mt){Qe.db=Mt;for(var Nn=0;Nn<Je.length;Nn++){var fr=Je[Nn];D(fr._dbInfo)}}).catch(function(Mt){throw(I(K,Mt)||f.resolve()).catch(function(){}),Mt})})}return d(be,ae),be}var qe={_driver:"asyncStorage",_initStorage:B,_support:l(),iterate:Y,getItem:q,setItem:re,removeItem:pe,clear:_e,length:de,key:ye,keys:Ce,dropInstance:ve};function He(){return typeof openDatabase=="function"}var ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt="~~local_forage_type~",Pe=/^~~local_forage_type~([^~]+)~/,Be="__lfsc__:",Xe=Be.length,mt="arbf",Ft="blob",bt="si08",G="ui08",ie="uic8",me="si16",J="si32",se="ur16",ce="ui32",Se="fl32",Te="fl64",Ge=Xe+mt.length,je=Object.prototype.toString;function Ct(K){var ae=K.length*.75,ee=K.length,ge,be=0,he,$e,Ke,Qe;K[K.length-1]==="="&&(ae--,K[K.length-2]==="="&&ae--);var Je=new ArrayBuffer(ae),ct=new Uint8Array(Je);for(ge=0;ge<ee;ge+=4)he=ht.indexOf(K[ge]),$e=ht.indexOf(K[ge+1]),Ke=ht.indexOf(K[ge+2]),Qe=ht.indexOf(K[ge+3]),ct[be++]=he<<2|$e>>4,ct[be++]=($e&15)<<4|Ke>>2,ct[be++]=(Ke&3)<<6|Qe&63;return Je}function Ot(K){var ae=new Uint8Array(K),ee="",ge;for(ge=0;ge<ae.length;ge+=3)ee+=ht[ae[ge]>>2],ee+=ht[(ae[ge]&3)<<4|ae[ge+1]>>4],ee+=ht[(ae[ge+1]&15)<<2|ae[ge+2]>>6],ee+=ht[ae[ge+2]&63];return ae.length%3===2?ee=ee.substring(0,ee.length-1)+"=":ae.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function Dt(K,ae){var ee="";if(K&&(ee=je.call(K)),K&&(ee==="[object ArrayBuffer]"||K.buffer&&je.call(K.buffer)==="[object ArrayBuffer]")){var ge,be=Be;K instanceof ArrayBuffer?(ge=K,be+=mt):(ge=K.buffer,ee==="[object Int8Array]"?be+=bt:ee==="[object Uint8Array]"?be+=G:ee==="[object Uint8ClampedArray]"?be+=ie:ee==="[object Int16Array]"?be+=me:ee==="[object Uint16Array]"?be+=se:ee==="[object Int32Array]"?be+=J:ee==="[object Uint32Array]"?be+=ce:ee==="[object Float32Array]"?be+=Se:ee==="[object Float64Array]"?be+=Te:ae(new Error("Failed to get type for BinaryArray"))),ae(be+Ot(ge))}else if(ee==="[object Blob]"){var he=new FileReader;he.onload=function(){var $e=rt+K.type+"~"+Ot(this.result);ae(Be+Ft+$e)},he.readAsArrayBuffer(K)}else try{ae(JSON.stringify(K))}catch($e){console.error("Couldn't convert value into a JSON string: ",K),ae(null,$e)}}function Vt(K){if(K.substring(0,Xe)!==Be)return JSON.parse(K);var ae=K.substring(Ge),ee=K.substring(Xe,Ge),ge;if(ee===Ft&&Pe.test(ae)){var be=ae.match(Pe);ge=be[1],ae=ae.substring(be[0].length)}var he=Ct(ae);switch(ee){case mt:return he;case Ft:return c([he],{type:ge});case bt:return new Int8Array(he);case G:return new Uint8Array(he);case ie:return new Uint8ClampedArray(he);case me:return new Int16Array(he);case se:return new Uint16Array(he);case J:return new Int32Array(he);case ce:return new Uint32Array(he);case Se:return new Float32Array(he);case Te:return new Float64Array(he);default:throw new Error("Unkown type: "+ee)}}var Zt={serialize:Dt,deserialize:Vt,stringToBuffer:Ct,bufferToString:Ot};function an(K,ae,ee,ge){K.executeSql("CREATE TABLE IF NOT EXISTS "+ae.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,ge)}function gr(K){var ae=this,ee={db:null};if(K)for(var ge in K)ee[ge]=typeof K[ge]!="string"?K[ge].toString():K[ge];var be=new f(function(he,$e){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(Ke){return $e(Ke)}ee.db.transaction(function(Ke){an(Ke,ee,function(){ae._dbInfo=ee,he()},function(Qe,Je){$e(Je)})},$e)});return ee.serializer=Zt,be}function lr(K,ae,ee,ge,be,he){K.executeSql(ee,ge,be,function($e,Ke){Ke.code===Ke.SYNTAX_ERR?$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ae.storeName],function(Qe,Je){Je.rows.length?he(Qe,Ke):an(Qe,ae,function(){Qe.executeSql(ee,ge,be,he)},he)},he):he($e,Ke)},he)}function fn(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"SELECT * FROM "+$e.storeName+" WHERE key = ? LIMIT 1",[K],function(Qe,Je){var ct=Je.rows.length?Je.rows.item(0).value:null;ct&&(ct=$e.serializer.deserialize(ct)),be(ct)},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function Xr(K,ae){var ee=this,ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"SELECT * FROM "+$e.storeName,[],function(Qe,Je){for(var ct=Je.rows,xt=ct.length,pn=0;pn<xt;pn++){var Mt=ct.item(pn),Nn=Mt.value;if(Nn&&(Nn=$e.serializer.deserialize(Nn)),Nn=K(Nn,Mt.key,pn+1),Nn!==void 0){be(Nn);return}}be()},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function er(K,ae,ee,ge){var be=this;K=p(K);var he=new f(function($e,Ke){be.ready().then(function(){ae===void 0&&(ae=null);var Qe=ae,Je=be._dbInfo;Je.serializer.serialize(ae,function(ct,xt){xt?Ke(xt):Je.db.transaction(function(pn){lr(pn,Je,"INSERT OR REPLACE INTO "+Je.storeName+" (key, value) VALUES (?, ?)",[K,ct],function(){$e(Qe)},function(Mt,Nn){Ke(Nn)})},function(pn){if(pn.code===pn.QUOTA_ERR){if(ge>0){$e(er.apply(be,[K,Qe,ee,ge-1]));return}Ke(pn)}})})}).catch(Ke)});return d(he,ee),he}function gi(K,ae,ee){return er.apply(this,[K,ae,ee,1])}function $l(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"DELETE FROM "+$e.storeName+" WHERE key = ?",[K],function(){be()},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function Vo(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function($e){lr($e,he,"DELETE FROM "+he.storeName,[],function(){ge()},function(Ke,Qe){be(Qe)})})}).catch(be)});return d(ee,K),ee}function Hu(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function($e){lr($e,he,"SELECT COUNT(key) as c FROM "+he.storeName,[],function(Ke,Qe){var Je=Qe.rows.item(0).c;ge(Je)},function(Ke,Qe){be(Qe)})})}).catch(be)});return d(ee,K),ee}function Yn(K,ae){var ee=this,ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"SELECT key FROM "+$e.storeName+" WHERE id = ? LIMIT 1",[K+1],function(Qe,Je){var ct=Je.rows.length?Je.rows.item(0).key:null;be(ct)},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function Lr(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function($e){lr($e,he,"SELECT key FROM "+he.storeName,[],function(Ke,Qe){for(var Je=[],ct=0;ct<Qe.rows.length;ct++)Je.push(Qe.rows.item(ct).key);ge(Je)},function(Ke,Qe){be(Qe)})})}).catch(be)});return d(ee,K),ee}function yr(K){return new f(function(ae,ee){K.transaction(function(ge){ge.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(be,he){for(var $e=[],Ke=0;Ke<he.rows.length;Ke++)$e.push(he.rows.item(Ke).name);ae({db:K,storeNames:$e})},function(be,he){ee(he)})},function(ge){ee(ge)})})}function ao(K,ae){ae=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var ge=this,be;return K.name?be=new f(function(he){var $e;K.name===ee.name?$e=ge._dbInfo.db:$e=openDatabase(K.name,"","",0),K.storeName?he({db:$e,storeNames:[K.storeName]}):he(yr($e))}).then(function(he){return new f(function($e,Ke){he.db.transaction(function(Qe){function Je(Mt){return new f(function(Nn,fr){Qe.executeSql("DROP TABLE IF EXISTS "+Mt,[],function(){Nn()},function(dr,lo){fr(lo)})})}for(var ct=[],xt=0,pn=he.storeNames.length;xt<pn;xt++)ct.push(Je(he.storeNames[xt]));f.all(ct).then(function(){$e()}).catch(function(Mt){Ke(Mt)})},function(Qe){Ke(Qe)})})}):be=f.reject("Invalid arguments"),d(be,ae),be}var Ms={_driver:"webSQLStorage",_initStorage:gr,_support:He(),iterate:Xr,getItem:fn,setItem:gi,removeItem:$l,clear:Vo,length:Hu,key:Yn,keys:Lr,dropInstance:ao};function $s(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ue(K,ae){var ee=K.name+"/";return K.storeName!==ae.storeName&&(ee+=K.storeName+"/"),ee}function te(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function le(){return!te()||localStorage.length>0}function De(K){var ae=this,ee={};if(K)for(var ge in K)ee[ge]=K[ge];return ee.keyPrefix=ue(K,ae._defaultConfig),le()?(ae._dbInfo=ee,ee.serializer=Zt,f.resolve()):f.reject()}function Ae(K){var ae=this,ee=ae.ready().then(function(){for(var ge=ae._dbInfo.keyPrefix,be=localStorage.length-1;be>=0;be--){var he=localStorage.key(be);he.indexOf(ge)===0&&localStorage.removeItem(he)}});return d(ee,K),ee}function at(K,ae){var ee=this;K=p(K);var ge=ee.ready().then(function(){var be=ee._dbInfo,he=localStorage.getItem(be.keyPrefix+K);return he&&(he=be.serializer.deserialize(he)),he});return d(ge,ae),ge}function St(K,ae){var ee=this,ge=ee.ready().then(function(){for(var be=ee._dbInfo,he=be.keyPrefix,$e=he.length,Ke=localStorage.length,Qe=1,Je=0;Je<Ke;Je++){var ct=localStorage.key(Je);if(ct.indexOf(he)===0){var xt=localStorage.getItem(ct);if(xt&&(xt=be.serializer.deserialize(xt)),xt=K(xt,ct.substring($e),Qe++),xt!==void 0)return xt}}});return d(ge,ae),ge}function Xt(K,ae){var ee=this,ge=ee.ready().then(function(){var be=ee._dbInfo,he;try{he=localStorage.key(K)}catch{he=null}return he&&(he=he.substring(be.keyPrefix.length)),he});return d(ge,ae),ge}function _n(K){var ae=this,ee=ae.ready().then(function(){for(var ge=ae._dbInfo,be=localStorage.length,he=[],$e=0;$e<be;$e++){var Ke=localStorage.key($e);Ke.indexOf(ge.keyPrefix)===0&&he.push(Ke.substring(ge.keyPrefix.length))}return he});return d(ee,K),ee}function Sn(K){var ae=this,ee=ae.keys().then(function(ge){return ge.length});return d(ee,K),ee}function un(K,ae){var ee=this;K=p(K);var ge=ee.ready().then(function(){var be=ee._dbInfo;localStorage.removeItem(be.keyPrefix+K)});return d(ge,ae),ge}function Mn(K,ae,ee){var ge=this;K=p(K);var be=ge.ready().then(function(){ae===void 0&&(ae=null);var he=ae;return new f(function($e,Ke){var Qe=ge._dbInfo;Qe.serializer.serialize(ae,function(Je,ct){if(ct)Ke(ct);else try{localStorage.setItem(Qe.keyPrefix+K,Je),$e(he)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ke(xt),Ke(xt)}})})});return d(be,ee),be}function tr(K,ae){if(ae=m.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var ee=this.config();K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName}var ge=this,be;return K.name?be=new f(function(he){K.storeName?he(ue(K,ge._defaultConfig)):he(K.name+"/")}).then(function(he){for(var $e=localStorage.length-1;$e>=0;$e--){var Ke=localStorage.key($e);Ke.indexOf(he)===0&&localStorage.removeItem(Ke)}}):be=f.reject("Invalid arguments"),d(be,ae),be}var Ht={_driver:"localStorageWrapper",_initStorage:De,_support:$s(),iterate:St,getItem:at,setItem:Mn,removeItem:un,clear:Ae,length:Sn,key:Xt,keys:_n,dropInstance:tr},$n=function(ae,ee){return ae===ee||typeof ae=="number"&&typeof ee=="number"&&isNaN(ae)&&isNaN(ee)},cr=function(ae,ee){for(var ge=ae.length,be=0;be<ge;){if($n(ae[be],ee))return!0;be++}return!1},bn=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},Gt={},Hn={},vr={INDEXEDDB:qe,WEBSQL:Ms,LOCALSTORAGE:Ht},yi=[vr.INDEXEDDB._driver,vr.WEBSQL._driver,vr.LOCALSTORAGE._driver],br=["dropInstance"],Qr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(br),uo={description:"",driver:yi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ho(K,ae){K[ae]=function(){var ee=arguments;return K.ready().then(function(){return K[ae].apply(K,ee)})}}function ps(){for(var K=1;K<arguments.length;K++){var ae=arguments[K];if(ae)for(var ee in ae)ae.hasOwnProperty(ee)&&(bn(ae[ee])?arguments[0][ee]=ae[ee].slice():arguments[0][ee]=ae[ee])}return arguments[0]}var qu=function(){function K(ae){o(this,K);for(var ee in vr)if(vr.hasOwnProperty(ee)){var ge=vr[ee],be=ge._driver;this[ee]=be,Gt[be]||this.defineDriver(ge)}this._defaultConfig=ps({},uo),this._config=ps({},this._defaultConfig,ae),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ge in ee){if(ge==="storeName"&&(ee[ge]=ee[ge].replace(/\W/g,"_")),ge==="version"&&typeof ee[ge]!="number")return new Error("Database version must be a number.");this._config[ge]=ee[ge]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},K.prototype.defineDriver=function(ee,ge,be){var he=new f(function($e,Ke){try{var Qe=ee._driver,Je=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){Ke(Je);return}for(var ct=Qr.concat("_initStorage"),xt=0,pn=ct.length;xt<pn;xt++){var Mt=ct[xt],Nn=!cr(br,Mt);if((Nn||ee[Mt])&&typeof ee[Mt]!="function"){Ke(Je);return}}var fr=function(){for(var Vc=function(Wu){return function(){var ba=new Error("Method "+Wu+" is not implemented by the current driver"),dd=f.reject(ba);return d(dd,arguments[arguments.length-1]),dd}},fd=0,oE=br.length;fd<oE;fd++){var dg=br[fd];ee[dg]||(ee[dg]=Vc(dg))}};fr();var dr=function(Vc){Gt[Qe]&&console.info("Redefining LocalForage driver: "+Qe),Gt[Qe]=ee,Hn[Qe]=Vc,$e()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(dr,Ke):dr(!!ee._support):dr(!0)}catch(lo){Ke(lo)}});return h(he,ge,be),he},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(ee,ge,be){var he=Gt[ee]?f.resolve(Gt[ee]):f.reject(new Error("Driver not found."));return h(he,ge,be),he},K.prototype.getSerializer=function(ee){var ge=f.resolve(Zt);return h(ge,ee),ge},K.prototype.ready=function(ee){var ge=this,be=ge._driverSet.then(function(){return ge._ready===null&&(ge._ready=ge._initDriver()),ge._ready});return h(be,ee,ee),be},K.prototype.setDriver=function(ee,ge,be){var he=this;bn(ee)||(ee=[ee]);var $e=this._getSupportedDrivers(ee);function Ke(){he._config.driver=he.driver()}function Qe(xt){return he._extend(xt),Ke(),he._ready=he._initStorage(he._config),he._ready}function Je(xt){return function(){var pn=0;function Mt(){for(;pn<xt.length;){var Nn=xt[pn];return pn++,he._dbInfo=null,he._ready=null,he.getDriver(Nn).then(Qe).catch(Mt)}Ke();var fr=new Error("No available storage method found.");return he._driverSet=f.reject(fr),he._driverSet}return Mt()}}var ct=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ct.then(function(){var xt=$e[0];return he._dbInfo=null,he._ready=null,he.getDriver(xt).then(function(pn){he._driver=pn._driver,Ke(),he._wrapLibraryMethodsWithReady(),he._initDriver=Je($e)})}).catch(function(){Ke();var xt=new Error("No available storage method found.");return he._driverSet=f.reject(xt),he._driverSet}),h(this._driverSet,ge,be),this._driverSet},K.prototype.supports=function(ee){return!!Hn[ee]},K.prototype._extend=function(ee){ps(this,ee)},K.prototype._getSupportedDrivers=function(ee){for(var ge=[],be=0,he=ee.length;be<he;be++){var $e=ee[be];this.supports($e)&&ge.push($e)}return ge},K.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,ge=Qr.length;ee<ge;ee++)Ho(this,Qr[ee])},K.prototype.createInstance=function(ee){return new K(ee)},K}(),Uc=new qu;r.exports=Uc},{3:3}]},{},[4])(4)})})(CEe);var F_t=CEe.exports;const B1=ha(F_t);var js=[];for(var u6=0;u6<256;++u6)js.push((u6+256).toString(16).slice(1));function L_t(e,t=0){return(js[e[t+0]]+js[e[t+1]]+js[e[t+2]]+js[e[t+3]]+"-"+js[e[t+4]]+js[e[t+5]]+"-"+js[e[t+6]]+js[e[t+7]]+"-"+js[e[t+8]]+js[e[t+9]]+"-"+js[e[t+10]]+js[e[t+11]]+js[e[t+12]]+js[e[t+13]]+js[e[t+14]]+js[e[t+15]]).toLowerCase()}var SA,B_t=new Uint8Array(16);function j_t(){if(!SA&&(SA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!SA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return SA(B_t)}var z_t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Sie={randomUUID:z_t};function bk(e,t,n){if(Sie.randomUUID&&!t&&!e)return Sie.randomUUID();e=e||{};var r=e.random||(e.rng||j_t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,L_t(r)}class AEe{constructor(t){Ea(this,"engine");Ea(this,"connected",!1);Ea(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function _k(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function BE(e){return e.participantId!==void 0}class nl extends AEe{constructor(){super("firebase");Ea(this,"RECAPTCHAV3TOKEN","6Ld7v0cqAAAAACbRoSHv-PfJiq9wfYgjhXC4_e7Z");Ea(this,"firestore");Ea(this,"collectionPrefix","prod-");Ea(this,"studyCollection");Ea(this,"storage");Ea(this,"studyId","");Ea(this,"localForage",B1.createInstance({name:"currentParticipantId"}));Ea(this,"participantData",null);const n=UU.parse(`
{
  apiKey: "AIzaSyBNW230jLUCwld9aUjZRzIunyGMdaMXv6I",
  authDomain: "abrar-test-study.firebaseapp.com",
  projectId: "abrar-test-study",
  storageBucket: "abrar-test-study.appspot.com",
  messagingSenderId: "304916533445",
  appId: "1:304916533445:web:22d7fea7e8e3faea4ca0ac"
}
`),r=qve(n);this.firestore=Pbt(r,{}),this.storage=Uyt();try{P_t(r,{provider:new OH(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await Obt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=dk();if(!i.currentUser&&(await agt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await _k(JSON.stringify(r));if(this.studyCollection=jl(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(BE(a))return this.participantData=a,a;const l=await _k(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Yu(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=bk(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Ji(this.studyCollection,"sequenceAssignment");await uu(i,{});const s=jl(i,"sequenceAssignment"),o=Ji(s,this.currentParticipantId),a=pie(s,Ubt("participantId","==","")),u=await LE(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await Ybt(m.ref),await uu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await uu(o,{participantId:this.currentParticipantId,timestamp:Qbt()});const l=pie(s,Vbt("timestamp","asc")),d=(await LE(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Yu(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await $E(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");BE(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return BE(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=bk();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=jl(this.firestore,"user-management"),i=await LE(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await uu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await uu(Ji(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await uu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await uu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await uu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Yu(this.storage,`${this.collectionPrefix}${n}/participants`),i=await $E(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");BE(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=jl(this.firestore,`${this.collectionPrefix}${n}`),s=Yu(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!BE(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Ji(i,"sequenceAssignment"),u=jl(a,"sequenceAssignment"),l=Ji(u,r);await Gbt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=Ji(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await uu(s,{[r]:i},{merge:!0})}async getModes(n){const r=Ji(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await s6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await uu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Ji(this.firestore,"metadata","collections"),i=await s6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Ji(this.firestore,"metadata","collections");await uu(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Ji(this.firestore,"metadata","collections"),i=await s6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await uu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Yu(this.storage,n),s=(await $E(r)).items.map(o=>kre(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Yu(this.storage,n),o=(await $E(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Yu(this.storage,n),s=Yu(this.storage,r),o=await e6(i),u=await(await fetch(o)).blob();await ZF(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=jl(this.firestore,n),s=Ji(i,"sequenceAssignment"),o=jl(s,"sequenceAssignment"),a=jl(this.firestore,r),u=Ji(a,"sequenceAssignment");await uu(u,{});const l=jl(u,"sequenceAssignment"),c=await LE(o),f=yie(this.firestore);c.docs.forEach(d=>{const h=Ji(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=jl(this.firestore,n),i=Ji(r,"sequenceAssignment"),s=jl(i,"sequenceAssignment"),o=await LE(s),a=yie(this.firestore);o.forEach(u=>{const l=Ji(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Yu(this.storage,n);return(await $E(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Yu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await e6(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await e6(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Yu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await ZF(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await ZF(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Yu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await kre(i)}}const DEe=k.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Ly=()=>k.useContext(DEe);function U_t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=k.useState(t),[o,a]=k.useState(!1),{storageEngine:u}=Qi(),l=async()=>{const h=dk();try{await pgt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;k.useEffect(()=>{s(t);let h;if(u instanceof nl)try{h=dk()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof nl){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=hgt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=k.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return x.jsx(DEe.Provider,{value:d,children:i.determiningStatus?x.jsx(Ru,{visible:!0}):e})}function kx({studyIds:e}){const t=Fh(),{studyId:n}=N0(),r=xy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Qi(),{user:o,logout:a}=Ly(),[u,l]=k.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:x.jsx(j8e,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:x.jsx(M8e,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:x.jsx(Rhe,{}),href:"/settings",needAdmin:!0}];return x.jsx(Wr.Header,{p:"md",children:x.jsxs(ol,{mt:-7,align:"center",children:[x.jsx(ol.Col,{span:6,children:x.jsxs(Jt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[x.jsx(Hm,{w:40,src:`${Hf}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),x.jsx(dl,{w:"md"}),x.jsx(ci,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),x.jsx(ol.Col,{span:6,children:x.jsxs(Jt,{justify:"flex-end",direction:"row",children:[c&&x.jsx(PT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),x.jsx(mj,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),x.jsx(Uf,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:x.jsxs(Jt,{direction:"column",mt:20,children:[x.jsx(nt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?x.jsx(Ln,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:x.jsx(Ln,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),x.jsxs(we,{ml:10,children:[x.jsx(vj,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?x.jsx(nt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):x.jsx(nt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function IEe({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=bv(!1),[s,{close:o,open:a}]=bv(!1),[u,{open:l,close:c}]=bv(!1);return x.jsxs(x.Fragment,{children:[x.jsxs(ro,{children:[x.jsxs(Rr,{opened:n,children:[x.jsx(Rr.Target,{children:x.jsx(Ln,{variant:"light",disabled:e.length===0,onClick:()=>{kV(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:x.jsx(L8e,{})})}),x.jsx(Rr.Dropdown,{children:x.jsx(nt,{children:"Download all participants data as JSON"})})]}),x.jsxs(Rr,{opened:s,children:[x.jsx(Rr.Target,{children:x.jsx(Ln,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:x.jsx(Phe,{})})}),x.jsx(Rr.Dropdown,{children:x.jsx(nt,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&x.jsx(uht,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function V_t({cellData:e}){return x.jsx(En.Td,{children:x.jsx(kc,{miw:100,children:Object.entries(e.answer).map(([t,n])=>x.jsxs(we,{children:[x.jsxs(nt,{fw:700,span:!0,children:[" ",`${t}: `]}),x.jsx(nt,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Tie({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return x.jsxs(En.Td,{children:[t.toFixed(1)," ","s"]})}function H_t(e){const{metaData:t}=e;return x.jsx(En.Td,{children:x.jsx(Bj,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:x.jsxs(kc,{gap:"xs",children:[x.jsxs(we,{children:["IP:"," ",t.ip]}),x.jsxs(we,{children:["Language:"," ",t.language]}),x.jsxs(we,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),x.jsxs(we,{children:["User Agent:"," ",t.userAgent]})]})})})}function q_t({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=Qi(),{studyId:s}=N0(),{user:o}=Ly(),a=async y=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,y),await r()):console.warn("You are not authorized to perform this action."))},[u,l]=k.useState([]),[c,f]=k.useState(!1),d=()=>S4({title:"Confirm rejecting participants",children:x.jsxs(nt,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",x.jsx(nt,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{f(!0);const y=u.map(async v=>await a(v));await Promise.all(y),l([]),await r(),f(!1)}});function h(y){y==="all"?u.length===[...e,...t].length?l([]):l([...e,...t].map(v=>v.participantId)):u.includes(y)?l(u.filter(v=>v!==y)):l([...u,y])}const p=kme(n.sequence),m=[x.jsx(En.Th,{children:x.jsx(Jt,{justify:"center",children:x.jsx(hh,{mb:-4,checked:u.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),x.jsx(En.Th,{children:"ID"},"ID"),x.jsx(En.Th,{children:"Status"},"status"),x.jsx(En.Th,{children:"Meta"},"meta"),...p.flatMap(y=>[x.jsx(En.Th,{children:y.componentName},`header-${y.componentName}-${y.timesSeenInBlock}`),x.jsxs(En.Th,{children:[y.componentName," ","Duration"]},`header-${y.componentName}-${y.timesSeenInBlock}-duration`)]),x.jsx(En.Th,{children:"Total Duration"},"total-duration")],g=[...e,...t].map(y=>x.jsxs(En.Tr,{children:[x.jsx(En.Td,{children:x.jsx(Jt,{justify:"center",children:x.jsx(hh,{mb:-4,checked:u.includes(y.participantId),onChange:()=>h(y.participantId)})})}),x.jsx(En.Td,{style:{whiteSpace:"nowrap"},children:y.participantId}),x.jsx(En.Td,{children:x.jsxs(Jt,{direction:"row",align:"center",children:[y.rejected?x.jsx(Wi,{label:"Rejected",children:x.jsx(ez,{size:16,color:"red",style:{marginBottom:-3}})}):y.completed?x.jsx(Wi,{label:"Completed",children:x.jsx(Ihe,{size:16,color:"teal",style:{marginBottom:-3}})}):x.jsx(Wi,{label:"In Progress",children:x.jsx(khe,{size:16,color:"orange",style:{marginBottom:-3}})}),!y.completed&&x.jsxs(nt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(y.answers).filter(([v,b])=>b.endTime!==void 0).length/(yh(y.sequence).length-1)*100).toFixed(2),"%"]})]})}),y.metadata?x.jsx(H_t,{metaData:y.metadata}):x.jsx(En.Td,{children:"N/A"}),p.map(v=>{const b=Ime(y.sequence,v.orderPath),E=b&&Object.entries(y.answers).sort((_,w)=>{const S=parseInt(_[0].slice(_[0].lastIndexOf("_")+1),10),C=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10);return S-C}).filter(([_])=>{const w=_.slice(0,_.lastIndexOf("_")),S=parseInt(_.slice(_.lastIndexOf("_")+1),10);return w===v.componentName&&S<=b[0].lastIndex&&S>=b[0].firstIndex});return E!==null&&E.length>=v.timesSeenInBlock+1?x.jsxs(xi.Fragment,{children:[x.jsx(V_t,{cellData:E[v.timesSeenInBlock][1]}),x.jsx(Tie,{cellData:E[v.timesSeenInBlock][1]})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`):x.jsxs(xi.Fragment,{children:[x.jsx(En.Td,{children:"N/A"}),x.jsx(En.Td,{children:"N/A"})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`)}),x.jsx(Tie,{cellData:{startTime:Math.min(...Object.values(y.answers).map(v=>v.startTime)),endTime:Math.max(...Object.values(y.answers).map(v=>v.endTime)),answer:{},windowEvents:[]}},`cell-${y.participantId}-total-duration`)]},y.participantId));return[...e,...t].length>0?x.jsxs(x.Fragment,{children:[x.jsx(Ru,{visible:c,overlayProps:{blur:2}}),x.jsxs(Jt,{justify:"space-between",mb:8,p:8,children:[x.jsx(ro,{children:x.jsx(PT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(y=>({value:y.participantId,label:y.participantId})),searchable:!0,value:null,leftSection:x.jsx(W8e,{size:14}),onChange:y=>y&&h(y)})}),x.jsxs(ro,{children:[x.jsx(IEe,{allParticipants:[...e,...t],studyId:s||""}),x.jsx(Ln,{disabled:u.length===0||!o.isAdmin,onClick:d,color:"red",children:"Reject Participants"})]})]}),x.jsx(Jt,{direction:"column",style:{width:"100%",overflow:"auto"},children:x.jsxs(En,{striped:!0,withTableBorder:!0,children:[x.jsx(En.Thead,{children:x.jsx(En.Tr,{children:m})}),x.jsx(En.Tbody,{children:g})]})})]}):x.jsx(Jt,{justify:"center",align:"center",style:{height:"100%"},children:x.jsx(nt,{children:"No data available"})})}const _1=14;function NEe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return x.jsxs(Jt,{ml:4,gap:4,children:[x.jsx(Wi,{label:"Completed",children:x.jsx(Kd,{variant:"light",color:"green",leftSection:x.jsx(Ihe,{width:_1,height:_1,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),x.jsx(Wi,{label:"In Progress",children:x.jsx(Kd,{variant:"light",color:"orange",leftSection:x.jsx(khe,{width:_1,height:_1,style:{paddingTop:1}}),pb:1,children:t})}),x.jsx(Wi,{label:"Rejected",children:x.jsx(Kd,{variant:"light",color:"red",leftSection:x.jsx(ez,{width:_1,height:_1,style:{paddingTop:1}}),pb:1,children:n})})]})}function W_t({studyId:e,refresh:t}){const[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[u,l]=k.useState(""),[c,f]=k.useState([]),[d,h]=k.useState(""),[p,m]=k.useState(!1),[g,y]=k.useState(!1),{storageEngine:v}=Qi(),b=v,E=k.useCallback(async()=>{y(!0);const O=await b.getSnapshots(e);f(O),y(!1)},[b,e]);k.useEffect(()=>{E()},[E]);const _=async()=>{m(!0),await b.createSnapshot(e,!1),E(),m(!1),await t()},w=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),E(),m(!1),await t()},S=async O=>{m(!0),await b.restoreSnapshot(e,O),E(),m(!1),await t()},C=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),E(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),E(),m(!1),await t()},D=()=>S4({title:"Create a Snapshot",children:x.jsx(nt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>_()}),I=O=>S4({title:"Restore Snapshot",children:x.jsx(nt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>S(O)});return x.jsxs(x.Fragment,{children:[x.jsx(Ru,{visible:p}),x.jsxs(Jt,{justify:"space-between",align:"center",children:[x.jsxs(we,{style:{width:"70%"},children:[x.jsx(ci,{order:5,children:"Create a Snapshot"}),x.jsxs(nt,{children:["This will create a snapshot of the live"," ",x.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will"," ",x.jsx(nt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),x.jsx(Wi,{label:"Create a snapshot",children:x.jsx(Ln,{onClick:D,children:"Snapshot"})})]}),x.jsx(dl,{h:"lg"}),x.jsxs(Jt,{justify:"space-between",align:"center",children:[x.jsxs(we,{style:{width:"70%"},children:[x.jsx(ci,{order:5,children:"Archive Data"}),x.jsxs(nt,{children:["This will create a snapshot of the live"," ",x.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),x.jsx(Wi,{label:"Snapshot and Delete Data",children:x.jsx(Ln,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),x.jsx(dl,{h:"lg"}),x.jsxs(Jt,{justify:"space-between",align:"center",children:[x.jsxs(we,{style:{width:"70%"},children:[x.jsx(ci,{order:5,children:"Delete Data"}),x.jsxs(nt,{children:["This will delete the live"," ",x.jsx(nt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),x.jsx(Wi,{label:"Delete Data",children:x.jsx(Ln,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),x.jsx(dl,{h:"xl"}),x.jsxs(Jt,{direction:"column",children:[x.jsx(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:x.jsx(ci,{order:5,children:"Snapshots"})}),x.jsxs(we,{style:{position:"relative"},children:[x.jsx(Ru,{visible:g}),c.length>0?c.map(O=>x.jsxs(Jt,{justify:"space-between",mb:"xs",children:[x.jsx(nt,{children:O}),x.jsxs(Jt,{direction:"row",gap:"xs",children:[x.jsx(Wi,{label:"Restore Snapshot",children:x.jsx(dm,{color:"blue",variant:"subtle",onClick:()=>{I(O)},children:x.jsx(H8e,{})})}),x.jsx(Wi,{label:"Delete Snapshot",children:x.jsx(dm,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(O)},children:x.jsx(Ohe,{})})})]})]},O)):x.jsx(nt,{children:"No snapshots."})]})]}),x.jsxs(Ki,{opened:n,onClose:()=>{r(!1),h("")},title:x.jsx(nt,{children:"Archive Data"}),children:[x.jsx(nt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),x.jsx(f0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),x.jsxs(Jt,{mt:"sm",justify:"right",children:[x.jsx(Ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),x.jsx(Ln,{color:"red",onClick:w,disabled:d!==e,children:"Archive"})]})]}),x.jsxs(Ki,{opened:i,onClose:()=>{s(!1),h("")},title:x.jsx(nt,{children:"Delete Snapshot"}),children:[x.jsxs(nt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",x.jsx(nt,{span:!0,fw:700,children:"irreversible"}),"."]}),x.jsx(f0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),x.jsxs(Jt,{mt:"sm",justify:"right",children:[x.jsx(Ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),x.jsx(Ln,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]}),x.jsxs(Ki,{opened:o,onClose:()=>{a(!1),h("")},title:x.jsx(nt,{children:"Delete Live Data"}),children:[x.jsxs(nt,{mb:"sm",children:["This will permanently delete the live"," ",x.jsx(nt,{span:!0,fw:700,children:e})," ","data. This action is"," ",x.jsx(nt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),x.jsx(f0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),x.jsxs(Jt,{mt:"sm",justify:"right",children:[x.jsx(Ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),x.jsx(Ln,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function G_t({studyId:e}){const{storageEngine:t}=Qi(),[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[u,l]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&x.jsxs(kc,{children:[x.jsx(wv,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),x.jsx(wv,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),x.jsx(wv,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function Y_t({studyId:e,refresh:t}){const{storageEngine:n}=Qi();return x.jsx(vl,{children:x.jsxs(Aa,{multiple:!0,variant:"contained",children:[x.jsxs(Aa.Item,{value:"ReVISit Modes",children:[x.jsx(Aa.Control,{children:x.jsx(ci,{order:5,children:"ReVISit Modes"})}),x.jsx(Aa.Panel,{children:x.jsx(G_t,{studyId:e})})]},"modes"),x.jsxs(Aa.Item,{value:"Data Management",children:[x.jsx(Aa.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:x.jsx(ci,{order:5,children:"Data Management"})}),x.jsx(Aa.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&x.jsx(W_t,{studyId:e,refresh:t})})]},"dataManagement")]})})}function K_t(e){const{globalConfig:t}=e,{studyId:n}=N0(),[r,i]=k.useState([]),[s,o]=k.useState(void 0),[a,u]=k.useState(!1),{storageEngine:l}=Qi(),c=Fh(),{tab:f}=N0(),{user:d}=Ly(),h=k.useCallback(async()=>{if(u(!0),n){const y=await y3(n,t);if(!y||!l)return;await l.initializeStudyDb(n,y);const v=await l.getAllParticipantsData();i(v),o(y),u(!1)}},[t,l,n]);k.useEffect(()=>{h()},[t,l,n,h]);const[p,m,g]=k.useMemo(()=>{const y=r.filter(E=>!E.rejected&&E.completed),v=r.filter(E=>!E.rejected&&!E.completed),b=r.filter(E=>E.rejected);return[y,v,b]},[r]);return x.jsxs(x.Fragment,{children:[x.jsx(kx,{studyIds:e.globalConfig.configsList}),x.jsx(Wr.Main,{children:x.jsxs(vl,{fluid:!0,style:{height:"100%"},children:[x.jsx(Ru,{visible:a}),x.jsxs(Jt,{direction:"row",align:"center",children:[x.jsx(ci,{order:5,children:n}),x.jsx(NEe,{completed:p.length,inProgress:m.length,rejected:g.length})]}),x.jsx(dl,{h:"xs"}),x.jsxs(Ri,{variant:"outline",value:f,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[x.jsxs(Ri.List,{children:[x.jsx(Ri.Tab,{value:"table",leftSection:x.jsx(G8e,{size:16}),children:"Table View"}),x.jsx(Wi,{label:"Coming soon",position:"bottom",children:x.jsx(Ri.Tab,{value:"stats",leftSection:x.jsx($8e,{size:16}),disabled:!0,children:"Trial Stats"})}),x.jsx(Wi,{label:"Coming soon",position:"bottom",children:x.jsx(Ri.Tab,{value:"replay",leftSection:x.jsx(V8e,{size:16}),disabled:!0,children:"Participant Replay"})}),x.jsx(Ri.Tab,{value:"manage",leftSection:x.jsx(Rhe,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),x.jsx(Ri.Panel,{value:"table",pt:"xs",children:s&&x.jsx(q_t,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),x.jsx(Ri.Panel,{value:"stats",pt:"xs",children:"statsboard"}),x.jsx(Ri.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),x.jsx(Ri.Panel,{value:"manage",pt:"xs",children:n&&d.isAdmin?x.jsx(Y_t,{studyId:n,refresh:h}):x.jsx(vl,{mt:20,children:x.jsx(AT,{title:"Unauthorized Access",variant:"light",color:"red",icon:x.jsx(Nhe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Cie({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Ly(),{storageEngine:o}=Qi(),[a,u]=k.useState(!1),l=N0();return k.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?x.jsx(Ru,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?x.jsx(Xj,{to:"/login"}):x.jsx(x.Fragment,{children:e})}async function kEe(e,t,n){if(e instanceof nl){t(!0);const r=new Pd,i=dk();try{await Mgt(i,r,Tbe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function X_t(){const{user:e}=Ly(),[t,n]=k.useState(null),[r,i]=k.useState(!1),{storageEngine:s}=Qi();return k.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?x.jsx(Xj,{to:"/"}):x.jsx(vl,{children:x.jsx(_y,{padding:"lg",children:x.jsxs(Jt,{align:"center",direction:"column",justify:"center",children:[x.jsx(Hm,{maw:200,mt:50,mb:100,src:`${Hf}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),x.jsxs(x.Fragment,{children:[x.jsx(nt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),x.jsx(Ln,{onClick:()=>kEe(s,i,n),leftSection:x.jsx(Y8e,{}),variant:"filled",children:"Sign In With Google"})]}),t?x.jsx(Kd,{size:"lg",color:"red",mt:30,children:t}):null,x.jsx(Ru,{visible:r})]})})})}var REe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hr,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var F=["th","st","nd","rd"],P=M%100;return"["+M+(F[(P-20)%10]||F[P]||F[0])+"]"}},b=function(M,F,P){var j=String(M);return!j||j.length>=F?M:""+Array(F+1-j.length).join(P)+M},E={s:b,z:function(M){var F=-M.utcOffset(),P=Math.abs(F),j=Math.floor(P/60),z=P%60;return(F<=0?"+":"-")+b(j,2,"0")+":"+b(z,2,"0")},m:function M(F,P){if(F.date()<P.date())return-M(P,F);var j=12*(P.year()-F.year())+(P.month()-F.month()),z=F.clone().add(j,f),V=P-z<0,$=F.clone().add(j+(V?-1:1),f);return+(-(j+(P-z)/(V?z-$:$-z))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},_="en",w={};w[_]=v;var S="$isDayjsObject",C=function(M){return M instanceof O||!(!M||!M[S])},A=function M(F,P,j){var z;if(!F)return _;if(typeof F=="string"){var V=F.toLowerCase();w[V]&&(z=V),P&&(w[V]=P,z=V);var $=F.split("-");if(!z&&$.length>1)return M($[0])}else{var U=F.name;w[U]=F,z=U}return!j&&z&&(_=z),z||!j&&_},D=function(M,F){if(C(M))return M.clone();var P=typeof F=="object"?F:{};return P.date=M,P.args=arguments,new O(P)},I=E;I.l=A,I.i=C,I.w=function(M,F){return D(M,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function M(P){this.$L=A(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[S]=!0}var F=M.prototype;return F.parse=function(P){this.$d=function(j){var z=j.date,V=j.utc;if(z===null)return new Date(NaN);if(I.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var $=z.match(g);if($){var U=$[2]-1||0,W=($[7]||"0").substring(0,3);return V?new Date(Date.UTC($[1],U,$[3]||1,$[4]||0,$[5]||0,$[6]||0,W)):new Date($[1],U,$[3]||1,$[4]||0,$[5]||0,$[6]||0,W)}}return new Date(z)}(P),this.init()},F.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},F.$utils=function(){return I},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(P,j){var z=D(P);return this.startOf(j)<=z&&z<=this.endOf(j)},F.isAfter=function(P,j){return D(P)<this.startOf(j)},F.isBefore=function(P,j){return this.endOf(j)<D(P)},F.$g=function(P,j,z){return I.u(P)?this[j]:this.set(z,P)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(P,j){var z=this,V=!!I.u(j)||j,$=I.p(P),U=function(de,ye){var Ce=I.w(z.$u?Date.UTC(z.$y,ye,de):new Date(z.$y,ye,de),z);return V?Ce:Ce.endOf(l)},W=function(de,ye){return I.w(z.toDate()[de].apply(z.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(ye)),z)},B=this.$W,q=this.$M,Y=this.$D,re="set"+(this.$u?"UTC":"");switch($){case h:return V?U(1,0):U(31,11);case f:return V?U(1,q):U(0,q+1);case c:var pe=this.$locale().weekStart||0,_e=(B<pe?B+7:B)-pe;return U(V?Y-_e:Y+(6-_e),q);case l:case p:return W(re+"Hours",0);case u:return W(re+"Minutes",1);case a:return W(re+"Seconds",2);case o:return W(re+"Milliseconds",3);default:return this.clone()}},F.endOf=function(P){return this.startOf(P,!1)},F.$set=function(P,j){var z,V=I.p(P),$="set"+(this.$u?"UTC":""),U=(z={},z[l]=$+"Date",z[p]=$+"Date",z[f]=$+"Month",z[h]=$+"FullYear",z[u]=$+"Hours",z[a]=$+"Minutes",z[o]=$+"Seconds",z[s]=$+"Milliseconds",z)[V],W=V===l?this.$D+(j-this.$W):j;if(V===f||V===h){var B=this.clone().set(p,1);B.$d[U](W),B.init(),this.$d=B.set(p,Math.min(this.$D,B.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function(P,j){return this.clone().$set(P,j)},F.get=function(P){return this[I.p(P)]()},F.add=function(P,j){var z,V=this;P=Number(P);var $=I.p(j),U=function(q){var Y=D(V);return I.w(Y.date(Y.date()+Math.round(q*P)),V)};if($===f)return this.set(f,this.$M+P);if($===h)return this.set(h,this.$y+P);if($===l)return U(1);if($===c)return U(7);var W=(z={},z[a]=r,z[u]=i,z[o]=n,z)[$]||1,B=this.$d.getTime()+P*W;return I.w(B,this)},F.subtract=function(P,j){return this.add(-1*P,j)},F.format=function(P){var j=this,z=this.$locale();if(!this.isValid())return z.invalidDate||m;var V=P||"YYYY-MM-DDTHH:mm:ssZ",$=I.z(this),U=this.$H,W=this.$m,B=this.$M,q=z.weekdays,Y=z.months,re=z.meridiem,pe=function(ye,Ce,ve,qe){return ye&&(ye[Ce]||ye(j,V))||ve[Ce].slice(0,qe)},_e=function(ye){return I.s(U%12||12,ye,"0")},de=re||function(ye,Ce,ve){var qe=ye<12?"AM":"PM";return ve?qe.toLowerCase():qe};return V.replace(y,function(ye,Ce){return Ce||function(ve){switch(ve){case"YY":return String(j.$y).slice(-2);case"YYYY":return I.s(j.$y,4,"0");case"M":return B+1;case"MM":return I.s(B+1,2,"0");case"MMM":return pe(z.monthsShort,B,Y,3);case"MMMM":return pe(Y,B);case"D":return j.$D;case"DD":return I.s(j.$D,2,"0");case"d":return String(j.$W);case"dd":return pe(z.weekdaysMin,j.$W,q,2);case"ddd":return pe(z.weekdaysShort,j.$W,q,3);case"dddd":return q[j.$W];case"H":return String(U);case"HH":return I.s(U,2,"0");case"h":return _e(1);case"hh":return _e(2);case"a":return de(U,W,!0);case"A":return de(U,W,!1);case"m":return String(W);case"mm":return I.s(W,2,"0");case"s":return String(j.$s);case"ss":return I.s(j.$s,2,"0");case"SSS":return I.s(j.$ms,3,"0");case"Z":return $}return null}(ye)||$.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(P,j,z){var V,$=this,U=I.p(j),W=D(P),B=(W.utcOffset()-this.utcOffset())*r,q=this-W,Y=function(){return I.m($,W)};switch(U){case h:V=Y()/12;break;case f:V=Y();break;case d:V=Y()/3;break;case c:V=(q-B)/6048e5;break;case l:V=(q-B)/864e5;break;case u:V=q/i;break;case a:V=q/r;break;case o:V=q/n;break;default:V=q}return z?V:I.a(V)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return w[this.$L]},F.locale=function(P,j){if(!P)return this.$L;var z=this.clone(),V=A(P,j,!0);return V&&(z.$L=V),z},F.clone=function(){return I.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},M}(),R=O.prototype;return D.prototype=R,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(M){R[M[1]]=function(F){return this.$g(F,M[0],M[1])}}),D.extend=function(M,F){return M.$i||(M(F,O,D),M.$i=!0),D},D.locale=A,D.isDayjs=C,D.unix=function(M){return D(1e3*M)},D.en=w[_],D.Ls=w,D.p={},D})})(REe);var Q_t=REe.exports;const At=ha(Q_t);function J_t({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>At(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function Z_t({formatter:e,...t}){return(e||J_t)(t)}function eEt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function PEe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=eEt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?PEe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function tEt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function nEt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function MH({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=tEt(i.key);if(s){i.preventDefault();const o=nEt(e);PEe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var OEe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hr,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",E=y+"|"+b,_=r[E];return _||(_=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[E]=_),_}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,E=n[v];E>=0&&(m[E]=parseInt(b,10))}var _=m[3],w=_===24?0:_,S=m[0]+"-"+m[1]+"-"+m[2]+" "+w+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(S).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(w,S,C){var A=w-60*S*1e3,D=l(A,C);if(S===D)return[A,S];var I=l(A-=60*(D-S)*1e3,C);return D===I?[A,D]:[w-60*Math.min(D,I)*1e3,Math.max(D,I)]}(o.utc(d,m).valueOf(),y,g),b=v[0],E=v[1],_=o(b).utcOffset(E);return _.$x.$timezone=g,_},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(OEe);var rEt=OEe.exports;const iEt=ha(rEt);var MEe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hr,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(_){_===void 0&&(_="");var w=_.match(r);if(!w)return null;var S=(""+w[0]).match(i)||["-",0,0],C=S[0],A=60*+S[1]+ +S[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+E,n)).$offset=v,b.$x.$localOffset=E}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(MEe);var sEt=MEe.exports;const oEt=ha(sEt);At.extend(oEt);At.extend(iEt);function aEt(e,t){return t?At(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Aie=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=aEt(e,t);return n==="remove"&&(r*=-1),At(e).add(r,"minutes").toDate()};function nm(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Aie(i,n,e)):Aie(t,n,e)}function uEt({minDate:e,maxDate:t,timezone:n}){const r=nm("add",new Date,n);return!e&&!t?r:e&&At(r).isBefore(e)?e:t&&At(r).isAfter(t)?t:r}const lEt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},cEt=k.createContext(lEt);function Vu(){const e=k.useContext(cEt),t=k.useCallback(o=>o||e.locale,[e.locale]),n=k.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=k.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=k.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=k.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function fEt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function $Ee({value:e,type:t,name:n,form:r}){return x.jsx("input",{type:"hidden",value:fEt(e,t),name:n,form:r})}$Ee.displayName="@mantine/dates/HiddenDatesInput";var FEe={day:"m_396ce5cb"};const dEt={},hEt=(e,{size:t})=>({day:{"--day-size":cn(t,"day-size")}}),$H=Ve((e,t)=>{const n=Ie("Day",dEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:E,..._}=n,w=Et({name:f||"Day",classes:FEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hEt,rootSelector:"day"}),S=Vu();return x.jsx(Yi,{...w("day",{style:b?{display:"none"}:void 0}),component:E?"div":"button",ref:t,disabled:c,"data-today":At(l).isSame(nm("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":E||void 0,unstyled:a,..._,children:(m==null?void 0:m(l))||l.getDate()})});$H.classes=FEe;$H.displayName="@mantine/dates/Day";function pEt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=At().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(At(r).add(s,"days").locale(e).format(t)):i.push(t(At(r).add(s,"days").toDate()));return i}var LEe={weekday:"m_18a3eca"};const mEt={},gEt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":Js(t),"--wr-spacing":Nu(t)}}),FH=Ve((e,t)=>{const n=Ie("WeekdaysRow",mEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=Et({name:h||"WeekdaysRow",classes:LEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gEt,rootSelector:"weekdaysRow"}),g=Vu(),y=pEt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>x.jsx(d,{...m("weekday"),children:v},b));return x.jsx(we,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});FH.classes=LEe;FH.displayName="@mantine/dates/WeekdaysRow";function yEt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function vEt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function bEt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=yEt(s,t),a=vEt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function BEe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function jEe(e,t){return t instanceof Date?At(e).isAfter(At(t).subtract(1,"day"),"day"):!0}function zEe(e,t){return t instanceof Date?At(e).isBefore(At(t).add(1,"day"),"day"):!0}function _Et(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return zEe(c,n)&&jEe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||BEe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>At().isSame(c,"date"));return l||a[0]}var UEe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const EEt={withCellSpacing:!0},V3=Ve((e,t)=>{const n=Ie("Month",EEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:E,hideWeekdays:_,getDayAriaLabel:w,static:S,__getDayRef:C,__onDayKeyDown:A,__onDayClick:D,__onDayMouseEnter:I,__preventFocus:O,__stopPropagation:R,withCellSpacing:M,size:F,...P}=n,j=Et({name:l||"Month",classes:UEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),z=Vu(),V=bEt({month:h,firstDayOfWeek:z.getFirstDayOfWeek(f),consistentWeeks:z.consistentWeeks}),$=_Et(V,y,v,m,g,E,h),{resolvedClassNames:U,resolvedStyles:W}=Nh({classNames:r,styles:o,props:n}),B=V.map((q,Y)=>{const re=q.map((pe,_e)=>{const de=!BEe(pe,h),ye=(w==null?void 0:w(pe))||At(pe).locale(c||z.locale).format("D MMMM YYYY"),Ce=m==null?void 0:m(pe),ve=At(pe).isSame($,"date");return x.jsx("td",{...j("monthCell"),"data-with-spacing":M||void 0,children:x.jsx($H,{__staticSelector:l||"Month",classNames:U,styles:W,unstyled:a,"data-mantine-stop-propagation":R||void 0,renderDay:b,date:pe,size:F,weekend:z.getWeekendDays(p).includes(pe.getDay()),outside:de,hidden:E?de:!1,"aria-label":ye,static:S,disabled:(g==null?void 0:g(pe))||!zEe(pe,v)||!jEe(pe,y),ref:qe=>C==null?void 0:C(Y,_e,qe),...Ce,onKeyDown:qe=>{var He;(He=Ce==null?void 0:Ce.onKeyDown)==null||He.call(Ce,qe),A==null||A(qe,{rowIndex:Y,cellIndex:_e,date:pe})},onMouseEnter:qe=>{var He;(He=Ce==null?void 0:Ce.onMouseEnter)==null||He.call(Ce,qe),I==null||I(qe,pe)},onClick:qe=>{var He;(He=Ce==null?void 0:Ce.onClick)==null||He.call(Ce,qe),D==null||D(qe,pe)},onMouseDown:qe=>{var He;(He=Ce==null?void 0:Ce.onMouseDown)==null||He.call(Ce,qe),O&&qe.preventDefault()},tabIndex:O||!ve?-1:0})},pe.toString())});return x.jsx("tr",{...j("monthRow"),children:re},Y)});return x.jsxs(we,{component:"table",...j("month"),size:F,ref:t,...P,children:[!_&&x.jsx("thead",{...j("monthThead"),children:x.jsx(FH,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:U,styles:W,unstyled:a})}),x.jsx("tbody",{...j("monthTbody"),children:B})]})});V3.classes=UEe;V3.displayName="@mantine/dates/Month";var VEe={pickerControl:"m_dc6a3c71"};const wEt={},xEt=(e,{size:t})=>({pickerControl:{"--dpc-fz":Js(t),"--dpc-size":cn(t,"dpc-size")}}),H3=Ve((e,t)=>{const n=Ie("PickerControl",wEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=Et({name:d||"PickerControl",classes:VEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xEt,rootSelector:"pickerControl"});return x.jsx(Yi,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});H3.classes=VEe;H3.displayName="@mantine/dates/PickerControl";function HEe(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"year")||n&&At(e).isAfter(n,"year"))}function SEt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!HEe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"year"));return o||i[0]}function qEe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var WEe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const TEt={yearsListFormat:"YYYY",withCellSpacing:!0},q3=Ve((e,t)=>{const n=Ie("YearsList",TEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:E,__stopPropagation:_,withCellSpacing:w,size:S,...C}=n,A=Et({name:m||"YearsList",classes:WEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),D=Vu(),I=qEe(l),O=SEt(I,d,h,p),R=I.map((M,F)=>{const P=M.map((j,z)=>{const V=p==null?void 0:p(j),$=At(j).isSame(O,"year");return x.jsx("td",{...A("yearsListCell"),"data-with-spacing":w||void 0,children:x.jsx(H3,{...A("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":_||void 0,disabled:HEe(j,d,h),ref:U=>g==null?void 0:g(F,z,U),...V,onKeyDown:U=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:j})},onClick:U=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,U),v==null||v(U,j)},onMouseEnter:U=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,U),b==null||b(U,j)},onMouseDown:U=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,U),E&&U.preventDefault()},tabIndex:E||!$?-1:0,children:At(j).locale(D.getLocale(f)).format(c)})},z)});return x.jsx("tr",{...A("yearsListRow"),children:P},F)});return x.jsx(we,{component:"table",ref:t,size:S,...A("yearsList"),...C,children:x.jsx("tbody",{children:R})})});q3.classes=WEe;q3.displayName="@mantine/dates/YearsList";function GEe(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"month")||n&&At(e).isAfter(n,"month"))}function CEt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!GEe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"month"));return o||i[0]}function AEt(e){const t=At(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(At(t).add(r,"months").toDate()),r+=1;return n}var YEe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const DEt={monthsListFormat:"MMM",withCellSpacing:!0},W3=Ve((e,t)=>{const n=Ie("MonthsList",DEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:E,__stopPropagation:_,withCellSpacing:w,size:S,...C}=n,A=Et({name:l||"MonthsList",classes:YEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),D=Vu(),I=AEt(c),O=CEt(I,h,p,m),R=I.map((M,F)=>{const P=M.map((j,z)=>{const V=m==null?void 0:m(j),$=At(j).isSame(O,"month");return x.jsx("td",{...A("monthsListCell"),"data-with-spacing":w||void 0,children:x.jsx(H3,{...A("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":_||void 0,disabled:GEe(j,h,p),ref:U=>g==null?void 0:g(F,z,U),...V,onKeyDown:U=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:j})},onClick:U=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,U),v==null||v(U,j)},onMouseEnter:U=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,U),b==null||b(U,j)},onMouseDown:U=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,U),E&&U.preventDefault()},tabIndex:E||!$?-1:0,children:At(j).locale(D.getLocale(d)).format(f)})},z)});return x.jsx("tr",{...A("monthsListRow"),children:P},F)});return x.jsx(we,{component:"table",ref:t,size:S,...A("monthsList"),...C,children:x.jsx("tbody",{children:R})})});W3.classes=YEe;W3.displayName="@mantine/dates/MonthsList";var KEe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const IEt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},NEt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":cn(t,"dch-control-size"),"--dch-fz":Js(t)}}),eg=Ve((e,t)=>{const n=Ie("CalendarHeader",IEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:E,withNext:_,withPrevious:w,__staticSelector:S,__preventFocus:C,__stopPropagation:A,...D}=n,I=Et({name:S||"CalendarHeader",classes:KEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NEt,rootSelector:"calendarHeader"}),O=C?R=>R.preventDefault():void 0;return x.jsxs(we,{...I("calendarHeader"),ref:t,...D,children:[w&&x.jsx(Yi,{...I("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||x.jsx(eb,{...I("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),x.jsx(Yi,{component:b?"button":"div",...I("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":E,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),_&&x.jsx(Yi,{...I("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||x.jsx(eb,{...I("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});eg.classes=KEe;eg.displayName="@mantine/dates/CalendarHeader";function kEt(e){const t=qEe(e);return[t[0][0],t[3][0]]}const REt={decadeLabelFormat:"YYYY"},G3=Ve((e,t)=>{const n=Ie("DecadeLevel",REt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,nextDisabled:_,previousDisabled:w,levelControlAriaLabel:S,withNext:C,withPrevious:A,decadeLabelFormat:D,classNames:I,styles:O,unstyled:R,__staticSelector:M,__stopPropagation:F,size:P,...j}=n,z=Vu(),[V,$]=kEt(r),U={__staticSelector:M||"DecadeLevel",classNames:I,styles:O,unstyled:R,size:P},W=typeof _=="boolean"?_:o?!At($).endOf("year").isBefore(o):!1,B=typeof w=="boolean"?w:s?!At(V).startOf("year").isAfter(s):!1,q=(Y,re)=>At(Y).locale(i||z.locale).format(re);return x.jsxs(we,{"data-decade-level":!0,size:P,ref:t,...j,children:[x.jsx(eg,{label:typeof D=="function"?D(V,$):`${q(V,D)}  ${q($,D)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,nextDisabled:W,previousDisabled:B,hasNextLevel:!1,levelControlAriaLabel:S,withNext:C,withPrevious:A,...U}),x.jsx(q3,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...U})]})});G3.classes={...q3.classes,...eg.classes};G3.displayName="@mantine/dates/DecadeLevel";const PEt={yearLabelFormat:"YYYY"},Y3=Ve((e,t)=>{const n=Ie("YearLevel",PEt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,onLevelClick:_,nextDisabled:w,previousDisabled:S,hasNextLevel:C,levelControlAriaLabel:A,withNext:D,withPrevious:I,yearLabelFormat:O,__staticSelector:R,__stopPropagation:M,size:F,classNames:P,styles:j,unstyled:z,...V}=n,$=Vu(),U={__staticSelector:R||"YearLevel",classNames:P,styles:j,unstyled:z,size:F},W=typeof w=="boolean"?w:o?!At(r).endOf("year").isBefore(o):!1,B=typeof S=="boolean"?S:s?!At(r).startOf("year").isAfter(s):!1;return x.jsxs(we,{"data-year-level":!0,size:F,ref:t,...V,children:[x.jsx(eg,{label:typeof O=="function"?O(r):At(r).locale(i||$.locale).format(O),__preventFocus:p,__stopPropagation:M,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,onLevelClick:_,nextDisabled:W,previousDisabled:B,hasNextLevel:C,levelControlAriaLabel:A,withNext:D,withPrevious:I,...U}),x.jsx(W3,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:M,withCellSpacing:h,...U})]})});Y3.classes={...eg.classes,...W3.classes};Y3.displayName="@mantine/dates/YearLevel";const OEt={monthLabelFormat:"MMMM YYYY"},K3=Ve((e,t)=>{const n=Ie("MonthLevel",OEt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:E,__preventFocus:_,__stopPropagation:w,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:D,onNext:I,onPrevious:O,onLevelClick:R,nextDisabled:M,previousDisabled:F,hasNextLevel:P,levelControlAriaLabel:j,withNext:z,withPrevious:V,monthLabelFormat:$,classNames:U,styles:W,unstyled:B,__staticSelector:q,size:Y,static:re,...pe}=n,_e=Vu(),de={__staticSelector:q||"MonthLevel",classNames:U,styles:W,unstyled:B,size:Y},ye=typeof M=="boolean"?M:f?!At(r).endOf("month").isBefore(f):!1,Ce=typeof F=="boolean"?F:c?!At(r).startOf("month").isAfter(c):!1;return x.jsxs(we,{"data-month-level":!0,size:Y,ref:t,...pe,children:[x.jsx(eg,{label:typeof $=="function"?$(r):At(r).locale(i||_e.locale).format($),__preventFocus:_,__stopPropagation:w,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:D,onNext:I,onPrevious:O,onLevelClick:R,nextDisabled:ye,previousDisabled:Ce,hasNextLevel:P,levelControlAriaLabel:j,withNext:z,withPrevious:V,...de}),x.jsx(V3,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:_,__stopPropagation:w,static:re,withCellSpacing:E,...de})]})});K3.classes={...V3.classes,...eg.classes};K3.displayName="@mantine/dates/MonthLevel";var XEe={levelsGroup:"m_30b26e33"};const MEt={},tg=Ve((e,t)=>{const n=Ie("LevelsGroup",MEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=Et({name:l||"LevelsGroup",classes:XEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return x.jsx(we,{ref:t,...f("levelsGroup"),...c})});tg.classes=XEe;tg.displayName="@mantine/dates/LevelsGroup";const $Et={numberOfColumns:1},X3=Ve((e,t)=>{const n=Ie("DecadeLevelGroup",$Et,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:E,classNames:_,styles:w,unstyled:S,__staticSelector:C,__stopPropagation:A,numberOfColumns:D,levelControlAriaLabel:I,decadeLabelFormat:O,size:R,vars:M,...F}=n,P=k.useRef([]),j=Array(D).fill(0).map((z,V)=>{const $=At(r).add(V*10,"years").toDate();return x.jsx(G3,{size:R,yearsListFormat:a,decade:$,withNext:V===D-1,withPrevious:V===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(U,W)=>MH({levelIndex:V,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:U,controlsRef:P}),__getControlRef:(U,W,B)=>{Array.isArray(P.current[V])||(P.current[V]=[]),Array.isArray(P.current[V][U])||(P.current[V][U]=[]),P.current[V][U][W]=B},levelControlAriaLabel:typeof I=="function"?I($):I,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:E,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:_,styles:w,unstyled:S,withCellSpacing:f},V)});return x.jsx(tg,{classNames:_,styles:w,__staticSelector:C||"DecadeLevelGroup",ref:t,size:R,unstyled:S,...F,children:j})});X3.classes={...tg.classes,...G3.classes};X3.displayName="@mantine/dates/DecadeLevelGroup";const FEt={numberOfColumns:1},Q3=Ve((e,t)=>{const n=Ie("YearLevelGroup",FEt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:E,previousDisabled:_,hasNextLevel:w,classNames:S,styles:C,unstyled:A,__staticSelector:D,__stopPropagation:I,numberOfColumns:O,levelControlAriaLabel:R,yearLabelFormat:M,size:F,vars:P,...j}=n,z=k.useRef([]),V=Array(O).fill(0).map(($,U)=>{const W=At(r).add(U,"years").toDate();return x.jsx(Y3,{size:F,monthsListFormat:a,year:W,withNext:U===O-1,withPrevious:U===0,yearLabelFormat:M,__stopPropagation:I,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(B,q)=>MH({levelIndex:U,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:B,controlsRef:z}),__getControlRef:(B,q,Y)=>{Array.isArray(z.current[U])||(z.current[U]=[]),Array.isArray(z.current[U][B])||(z.current[U][B]=[]),z.current[U][B][q]=Y},levelControlAriaLabel:typeof R=="function"?R(W):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:E,previousDisabled:_,hasNextLevel:w,getMonthControlProps:u,classNames:S,styles:C,unstyled:A,__staticSelector:D||"YearLevelGroup",withCellSpacing:f},U)});return x.jsx(tg,{classNames:S,styles:C,__staticSelector:D||"YearLevelGroup",ref:t,size:F,unstyled:A,...j,children:V})});Q3.classes={...Y3.classes,...tg.classes};Q3.displayName="@mantine/dates/YearLevelGroup";const LEt={numberOfColumns:1},J3=Ve((e,t)=>{const n=Ie("MonthLevelGroup",LEt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:E,previousIcon:_,nextLabel:w,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:D,nextDisabled:I,previousDisabled:O,hasNextLevel:R,classNames:M,styles:F,unstyled:P,numberOfColumns:j,levelControlAriaLabel:z,monthLabelFormat:V,__staticSelector:$,__stopPropagation:U,size:W,static:B,vars:q,...Y}=n,re=k.useRef([]),pe=Array(j).fill(0).map((_e,de)=>{const ye=At(r).add(de,"months").toDate();return x.jsx(K3,{month:ye,withNext:de===j-1,withPrevious:de===0,monthLabelFormat:V,__stopPropagation:U,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ce,ve)=>MH({levelIndex:de,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ce,controlsRef:re}),__getDayRef:(Ce,ve,qe)=>{Array.isArray(re.current[de])||(re.current[de]=[]),Array.isArray(re.current[de][Ce])||(re.current[de][Ce]=[]),re.current[de][Ce][ve]=qe},levelControlAriaLabel:typeof z=="function"?z(ye):z,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:E,previousIcon:_,nextLabel:w,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:D,nextDisabled:I,previousDisabled:O,hasNextLevel:R,classNames:M,styles:F,unstyled:P,__staticSelector:$||"MonthLevelGroup",size:W,static:B,withCellSpacing:v},de)});return x.jsx(tg,{classNames:M,styles:F,__staticSelector:$||"MonthLevelGroup",ref:t,size:W,...Y,children:pe})});J3.classes={...tg.classes,...K3.classes};J3.displayName="@mantine/dates/MonthLevelGroup";var QEe={input:"m_6fa5e2aa"};const BEt={},Z3=Ve((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:E,readOnly:_,disabled:w,value:S,name:C,form:A,type:D,...I}=tde("PickerInputBase",BEt,e),O=b||(g&&E&&!_&&!w?x.jsx(Um,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),R=()=>{D==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return x.jsxs(x.Fragment,{children:[c==="modal"&&!_&&x.jsx(Ki,{opened:p,onClose:R,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),x.jsx(Yr.Wrapper,{...r,children:x.jsxs(Rr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||_,onClose:()=>{var M;(M=u==null?void 0:u.onClose)==null||M.call(u),R()},children:[x.jsx(Rr.Target,{children:x.jsx(Yr,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":_||void 0,disabled:w,component:"button",type:"button",multiline:!0,onClick:M=>{m==null||m(M),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Ai(QEe.input,s==null?void 0:s.input)},...I,children:d||x.jsx(Yr.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),x.jsx(Rr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),x.jsx($Ee,{value:S,name:C,form:A,type:D})]})});Z3.classes=QEe;Z3.displayName="@mantine/dates/PickerInputBase";const Die=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function LH({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=k.useRef(e),o=Vu(),[a,u,l]=Is({value:nm("add",t,o.getTimezone(),!i),defaultValue:nm("add",n,o.getTimezone(),!i),finalValue:Die(e),onChange:f=>{r==null||r(nm("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Die(e),u(c))),[c,u,l]}function l6(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function jEt(e){return e===0?"month":e===1?"year":"decade"}function jE(e,t,n){return jEt(cf(l6(e,0),l6(t,0),l6(n,2)))}const zEt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},eO=Ve((e,t)=>{const n=Ie("Calendar",zEt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:E,firstDayOfWeek:_,weekdayFormat:w,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:D,hideOutsideDates:I,hideWeekdays:O,getDayAriaLabel:R,monthLabelFormat:M,nextIcon:F,previousIcon:P,__onDayClick:j,__onDayMouseEnter:z,withCellSpacing:V,monthsListFormat:$,getMonthControlProps:U,yearLabelFormat:W,yearsListFormat:B,getYearControlProps:q,decadeLabelFormat:Y,classNames:re,styles:pe,unstyled:_e,minDate:de,maxDate:ye,locale:Ce,__staticSelector:ve,size:qe,__preventFocus:He,__stopPropagation:ht,onNextDecade:rt,onPreviousDecade:Pe,onNextYear:Be,onPreviousYear:Xe,onNextMonth:mt,onPreviousMonth:Ft,static:bt,__timezoneApplied:G,...ie}=n,{resolvedClassNames:me,resolvedStyles:J}=Nh({classNames:re,styles:pe,props:n}),[se,ce]=Is({value:a?jE(a,s,i):void 0,defaultValue:o?jE(o,s,i):void 0,finalValue:jE(void 0,s,i),onChange:u}),[Se,Te]=LH({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!G}),Ge={__staticSelector:ve||"Calendar",styles:J,classNames:me,unstyled:_e,size:qe},je=Vu(),Ct=h||d||1,Ot=Se||nm("add",new Date,je.getTimezone()),Dt=()=>{const fn=At(Ot).add(Ct,"month").toDate();mt==null||mt(fn),Te(fn)},Vt=()=>{const fn=At(Ot).subtract(Ct,"month").toDate();Ft==null||Ft(fn),Te(fn)},Zt=()=>{const fn=At(Ot).add(Ct,"year").toDate();Be==null||Be(fn),Te(fn)},an=()=>{const fn=At(Ot).subtract(Ct,"year").toDate();Xe==null||Xe(fn),Te(fn)},gr=()=>{const fn=At(Ot).add(10*Ct,"year").toDate();rt==null||rt(fn),Te(fn)},lr=()=>{const fn=At(Ot).subtract(10*Ct,"year").toDate();Pe==null||Pe(fn),Te(fn)};return x.jsxs(we,{ref:t,size:qe,"data-calendar":!0,...ie,children:[se==="month"&&x.jsx(J3,{month:Ot,minDate:de,maxDate:ye,firstDayOfWeek:_,weekdayFormat:w,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:D,hideOutsideDates:I,hideWeekdays:O,getDayAriaLabel:R,onNext:Dt,onPrevious:Vt,hasNextLevel:i!=="month",onLevelClick:()=>ce("year"),numberOfColumns:d,locale:Ce,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:P,monthLabelFormat:M,__onDayClick:j,__onDayMouseEnter:z,__preventFocus:He,__stopPropagation:ht,static:bt,withCellSpacing:V,...Ge}),se==="year"&&x.jsx(Q3,{year:Ot,numberOfColumns:d,minDate:de,maxDate:ye,monthsListFormat:$,getMonthControlProps:U,locale:Ce,onNext:Zt,onPrevious:an,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>ce("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:P,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(fn,Xr)=>{E&&Te(Xr),ce(jE("month",s,i)),g==null||g(Xr)},__preventFocus:He,__stopPropagation:ht,withCellSpacing:V,...Ge}),se==="decade"&&x.jsx(X3,{decade:Ot,minDate:de,maxDate:ye,yearsListFormat:B,getYearControlProps:q,locale:Ce,onNext:gr,onPrevious:lr,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:P,decadeLabelFormat:Y,__onControlMouseEnter:y,__onControlClick:(fn,Xr)=>{b&&Te(Xr),ce(jE("year",s,i)),m==null||m(Xr)},__preventFocus:He,__stopPropagation:ht,withCellSpacing:V,...Ge})]})});eO.classes={...X3.classes,...Q3.classes,...J3.classes};eO.displayName="@mantine/dates/Calendar";function UEt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:E,onPreviousYear:_,onNextDecade:w,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:D,firstDayOfWeek:I,weekdayFormat:O,weekendDays:R,getDayProps:M,excludeDate:F,renderDay:P,hideOutsideDates:j,hideWeekdays:z,getDayAriaLabel:V,monthLabelFormat:$,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:B,yearsListFormat:q,getYearControlProps:Y,decadeLabelFormat:re,allowSingleDateInRange:pe,allowDeselect:_e,minDate:de,maxDate:ye,locale:Ce,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:E,onPreviousYear:_,onNextDecade:w,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:D,firstDayOfWeek:I,weekdayFormat:O,weekendDays:R,getDayProps:M,excludeDate:F,renderDay:P,hideOutsideDates:j,hideWeekdays:z,getDayAriaLabel:V,monthLabelFormat:$,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:B,yearsListFormat:q,getYearControlProps:Y,decadeLabelFormat:re,allowSingleDateInRange:pe,allowDeselect:_e,minDate:de,maxDate:ye,locale:Ce},others:ve}}function Iie(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return At(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&At(n[1]).endOf("day").add(1,"ms").isAfter(e)}function VEt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=LH({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=k.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=k.useState(null),m=w=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(At(w).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[w,f];S.sort((C,A)=>C.getTime()-A.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&At(w).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([w,null]),p(null),d(w);return}if(e==="multiple"){l.some(S=>At(S).isSame(w,t))?c(l.filter(S=>!At(S).isSame(w,t))):c([...l,w]);return}l&&o&&At(w).isSame(l,t)?c(null):c(w)},g=w=>f instanceof Date&&h instanceof Date?Iie(w,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Iie(w,l):!1,y=e==="range"?w=>{a==null||a(w),p(null)}:a,v=w=>l[0]instanceof Date&&At(w).isSame(l[0],t)?!(h&&At(h).isBefore(l[0])):!1,b=w=>l[1]instanceof Date?At(w).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:At(h).isBefore(l[0])&&At(w).isSame(l[0],t),E=w=>{if(e==="range")return{selected:l.some(C=>C&&At(C).isSame(w,t)),inRange:g(w),firstInRange:v(w),lastInRange:b(w),"data-autofocus":!!l[0]&&At(l[0]).isSame(w,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&At(C).isSame(w,t)),"data-autofocus":!!l[0]&&At(l[0]).isSame(w,t)||void 0};const S=At(l).isSame(w,t);return{selected:S,"data-autofocus":S||void 0}},_=e==="range"&&f?p:()=>{};return k.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:_,getControlProps:E,_value:l,setValue:c}}const HEt={type:"default",defaultLevel:"month",numberOfColumns:1},tO=Ve((e,t)=>{const n=Ie("DatePicker",HEt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...E}=n,{onDateChange:_,onRootMouseLeave:w,onHoveredDateChange:S,getControlProps:C}=VEt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:D}=Nh({classNames:r,styles:i,props:n}),I=Vu();return x.jsx(eO,{ref:t,minLevel:"month",classNames:A,styles:D,__staticSelector:c||"DatePicker",onMouseLeave:w,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,R)=>{S(R),y==null||y(O,R)},__onDayClick:(O,R)=>{_(R),v==null||v(O,R)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...E,date:nm("add",E.date,I.getTimezone(),b),__timezoneApplied:!0})});tO.classes=eO.classes;tO.displayName="@mantine/dates/DatePicker";function qEt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Vu(),[f,d]=bv(!1),[h,p]=LH({type:e,value:t,defaultValue:n,onChange:r}),m=Z_t({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((E,_)=>E.getTime()-_.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const WEt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},BH=Ve((e,t)=>{const n=Ie("DatePickerInput",WEt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:E,defaultDate:_,valueFormatter:w,...S}=n,{resolvedClassNames:C,resolvedStyles:A}=Nh({classNames:c,styles:f,props:n}),{calendarProps:D,others:I}=UEt(S),{_value:O,setValue:R,formattedValue:M,dropdownHandlers:F,dropdownOpened:P,onClear:j,shouldClear:z}=qEt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:w}),V=Array.isArray(O)?O[0]||_:O||_,$=Vu();return x.jsx(Z3,{formattedValue:M,dropdownOpened:P,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:j,shouldClear:z,value:O,size:p,variant:m,dropdownType:g,...I,type:r,__staticSelector:"DatePickerInput",children:x.jsx(tO,{...D,size:p,variant:m,type:r,value:O,defaultDate:V||uEt({maxDate:b,minDate:v,timezone:$.getTimezone()}),onChange:R,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:nm("add",D.date,$.getTimezone()),__timezoneApplied:!0})})});BH.classes={...Z3.classes,...tO.classes};BH.displayName="@mantine/dates/DatePickerInput";var JEe={exports:{}},GEt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",YEt=GEt,KEt=YEt;function ZEe(){}function ewe(){}ewe.resetWarningCache=ZEe;var XEt=function(){function e(r,i,s,o,a,u){if(u!==KEt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ewe,resetWarningCache:ZEe};return n.PropTypes=n,n};JEe.exports=XEt();var QEt=JEe.exports;const Nie=ha(QEt),kie={};function N8(e,t){e===void 0&&(e=kie),t===void 0&&(t=kie);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var JEt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZEt=Object.prototype.hasOwnProperty;function k8(e,t){return ZEt.call(e,t)}function R8(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)k8(e,i)&&r.push(i);return r}function xu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function P8(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function $g(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function twe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function O8(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(O8(e[t]))return!0}else if(typeof e=="object"){for(var r=R8(e),i=r.length,s=0;s<i;s++)if(O8(e[r[s]]))return!0}}return!1}function Rie(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var nwe=function(e){JEt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Rie(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Rie(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),bi=nwe,ewt=xu,av={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Ek(n,this.path);r&&(r=xu(r));var i=y0(n,{op:"remove",path:this.from}).removed;return y0(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Ek(n,this.from);return y0(n,{op:"add",path:this.path,value:xu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:GS(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},twt={add:function(e,t,n){return P8(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:av.move,copy:av.copy,test:av.test,_get:av._get};function Ek(e,t){if(t=="")return e;var n={op:"_get",path:t};return y0(e,n),n.value}function y0(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):wk(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Ek(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=GS(e,t.value),o.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=xu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=wk;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=twe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!P8(h))throw new bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);P8(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=twt[t.op].call(t,l,h,e);if(o.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=av[t.op].call(t,l,h,e);if(o.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function nO(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=xu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=y0(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function nwt(e,t,n){var r=y0(e,t);if(r.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function wk(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(av[e.op]){if(typeof e.path!="string")throw new bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&O8(e.value))throw new bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=rwe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function rwe(e,t,n){try{if(!Array.isArray(e))throw new bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)nO(xu(t),xu(e),n||!0);else{n=n||wk;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof bi)return i;throw i}}function GS(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!GS(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!GS(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const rwt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:bi,_areEquals:GS,applyOperation:y0,applyPatch:nO,applyReducer:nwt,deepClone:ewt,getValueByPointer:Ek,validate:rwe,validator:wk},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var jH=new WeakMap,iwt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),swt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function owt(e){return jH.get(e)}function awt(e,t){return e.observers.get(t)}function uwt(e,t){e.observers.delete(t.callback)}function lwt(e,t){t.unobserve()}function cwt(e,t){var n=[],r,i=owt(e);if(!i)i=new iwt(e),jH.set(e,i);else{var s=awt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=xu(e),t){r.callback=t,r.next=null;var o=function(){M8(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){M8(r),clearTimeout(r.next),uwt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new swt(t,r)),r}function M8(e,t){t===void 0&&(t=!1);var n=jH.get(e.object);zH(n.value,e.object,e.patches,"",t),e.patches.length&&nO(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function zH(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=R8(t),o=R8(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(k8(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?zH(c,f,n,r+"/"+$g(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+$g(l),value:xu(c)}),n.push({op:"replace",path:r+"/"+$g(l),value:xu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+$g(l),value:xu(c)}),n.push({op:"remove",path:r+"/"+$g(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!k8(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+$g(l),value:xu(t[l])})}}}function fwt(e,t,n){n===void 0&&(n=!1);var r=[];return zH(e,t,r,"",n),r}const dwt=Object.freeze(Object.defineProperty({__proto__:null,compare:fwt,generate:M8,observe:cwt,unobserve:lwt},Symbol.toStringTag,{value:"Module"}));Object.assign({},rwt,dwt,{JsonPatchError:nwe,deepClone:xu,escapePathComponent:$g,unescapePathComponent:twe});var hwt=/("(?:[^\\"]|\\.)*")|[:,]/g,pwt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,E,_;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),E=JSON.stringify(a,s),E===void 0)return E;if(g=i-u.length-l,E.length<=g&&(v=E.replace(hwt,function(w,S){return S||w+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(E),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",_=o(a[h],y,p.length+(f===g-1?0:1)),_!==void 0&&d.push(p+_);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return E}(t,"",0)};const c6=ha(pwt);function su(e,t,n){return e.fields=t||[],e.fname=n,e}function Ci(e){return e==null?null:e.fname}function Ro(e){return e==null?null:e.fields}function iwe(e){return e.length===1?mwt(e[0]):gwt(e)}const mwt=e=>function(t){return t[e]},gwt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function td(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function _l(e,t,n){const r=td(e);return e=r.length===1?r[0]:e,su((n&&n.get||iwe)(r),[e],t||e)}const g2=_l("id"),Bo=su(e=>e,[],"identity"),Sp=su(()=>0,[],"zero"),B_=su(()=>1,[],"one"),El=su(()=>!0,[],"true"),sp=su(()=>!1,[],"false");function ywt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const swe=0,UH=1,VH=2,owe=3,awe=4;function HH(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ywt,r=e||swe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=UH&&n(t||"error","ERROR",arguments),this},warn(){return r>=VH&&n(t||"warn","WARN",arguments),this},info(){return r>=owe&&n(t||"log","INFO",arguments),this},debug(){return r>=awe&&n(t||"log","DEBUG",arguments),this}}}var Ue=Array.isArray;function vt(e){return e===Object(e)}const Pie=e=>e!=="__proto__";function j_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=vwt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;z_(r,s,i[s],o)}return r},{})}function z_(e,t,n,r){if(!Pie(t))return;let i,s;if(vt(n)&&!Ue(n)){s=vt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?z_(s,i,n[i]):Pie(i)&&(s[i]=n[i])}else e[t]=n}function vwt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function zn(e){return e[e.length-1]}function Do(e){return e==null||e===""?null:+e}const uwe=e=>t=>e*Math.exp(t),lwe=e=>t=>Math.log(e*t),cwe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),fwe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,xk=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function rO(e,t,n,r){const i=n(e[0]),s=n(zn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function dwe(e,t){return rO(e,t,Do,Bo)}function hwe(e,t){var n=Math.sign(e[0]);return rO(e,t,lwe(n),uwe(n))}function pwe(e,t,n){return rO(e,t,xk(n),xk(1/n))}function mwe(e,t,n){return rO(e,t,cwe(n),fwe(n))}function iO(e,t,n,r,i){const s=r(e[0]),o=r(zn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function qH(e,t,n){return iO(e,t,n,Do,Bo)}function WH(e,t,n){const r=Math.sign(e[0]);return iO(e,t,n,lwe(r),uwe(r))}function Sk(e,t,n,r){return iO(e,t,n,xk(r),xk(1/r))}function GH(e,t,n,r){return iO(e,t,n,cwe(r),fwe(r))}function gwe(e){return 1+~~(new Date(e).getMonth()/3)}function ywe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function gt(e){return e!=null?Ue(e)?e:[e]:[]}function vwe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function yn(e){return typeof e=="function"}const bwt="descending";function YH(e,t,n){n=n||{},t=gt(t)||[];const r=[],i=[],s={},o=n.comparator||_wt;return gt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===bwt?-1:1),i.push(a=yn(a)?a:_l(a,null,n)),(Ro(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:su(o(i,r),Object.keys(s))}const sO=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),_wt=(e,t)=>e.length===1?Ewt(e[0],t[0]):wwt(e,t,e.length),Ewt=(e,t)=>function(n,r){return sO(e(n),e(r))*t},wwt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=sO(s(r),s(i));return o*t[a]});function jo(e){return yn(e)?e:()=>e}function KH(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Mf(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function bwe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const xwt=Object.prototype.hasOwnProperty;function Ut(e,t){return xwt.call(e,t)}const TA={};function U_(e){let t={},n;function r(s){return Ut(t,s)&&t[s]!==TA}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===TA&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=TA),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==TA&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function _we(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=zn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function dt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),gn(r,n)}function uv(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function ng(e){return typeof e=="boolean"}function rm(e){return Object.prototype.toString.call(e)==="[object Date]"}function Ewe(e){return e&&yn(e[Symbol.iterator])}function Wn(e){return typeof e=="number"}function wwe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function yt(e){return typeof e=="string"}function XH(e,t,n){e&&(e=t?gt(e).map(a=>a.replace(/\\(.)/g,"$1")):gt(e));const r=e&&e.length,i=n&&n.get||iwe,s=a=>i(t?[a]:td(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return su(o,e,"key")}function xwe(e,t){const n=e[0],r=zn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Swt=1e4;function Swe(e){e=+e||Swt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ut(t,o)||Ut(n,o),get:o=>Ut(t,o)?t[o]:Ut(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ut(t,o)?t[o]=a:s(o,a)}}function Twe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function kw(e,t){let n="";for(;--t>=0;)n+=e;return n}function Cwe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?kw(i,o)+s:r==="center"?kw(i,~~(o/2))+s+kw(i,Math.ceil(o/2)):s+kw(i,o)}function y2(e){return e&&zn(e)-e[0]||0}function lt(e){return Ue(e)?"["+e.map(lt)+"]":vt(e)||yt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function QH(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Twt=e=>Wn(e)||rm(e)?e:Date.parse(e);function JH(e,t){return t=t||Twt,e==null||e===""?null:t(e)}function ZH(e){return e==null||e===""?null:e+""}function Cc(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Awe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function dp(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Cwt(e){return e}function Awt(e){if(e==null)return Cwt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Dwt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Iwt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Oie(e,n)})}:Oie(e,t)}function Oie(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Dwe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Dwe(e,t){var n=Awt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Dwt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Nwt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function kwt(e){return Dwe(e,Rwt.apply(this,arguments))}function Rwt(e,t,n){var r,i,s;if(arguments.length>1)r=Pwt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Nwt(e,r)}}function Pwt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const eo="year",eu="quarter",Po="month",ss="week",tu="date",Ao="day",$f="dayofyear",$u="hours",Fu="minutes",wl="seconds",Ac="milliseconds",eq=[eo,eu,Po,ss,tu,Ao,$f,$u,Fu,wl,Ac],f6=eq.reduce((e,t,n)=>(e[t]=1+n,e),{});function tq(e){const t=gt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{Ut(f6,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[ss]||n[Ao]?1:0)+(n[eu]||n[Po]||n[tu]?1:0)+(n[$f]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>f6[i]-f6[s]),t}const Owt={[eo]:"%Y ",[eu]:"Q%q ",[Po]:"%b ",[tu]:"%d ",[ss]:"W%U ",[Ao]:"%a ",[$f]:"%j ",[$u]:"%H:00",[Fu]:"00:%M",[wl]:":%S",[Ac]:".%L",[`${eo}-${Po}`]:"%Y-%m ",[`${eo}-${Po}-${tu}`]:"%Y-%m-%d ",[`${$u}-${Fu}`]:"%H:%M"};function Iwe(e,t){const n=gn({},Owt,t),r=tq(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const qg=new Date;function nq(e){return qg.setFullYear(e),qg.setMonth(0),qg.setDate(1),qg.setHours(0,0,0,0),qg}function Nwe(e){return Rwe(new Date(e))}function kwe(e){return $8(new Date(e))}function Rwe(e){return Qd.count(nq(e.getFullYear())-1,e)}function $8(e){return T_.count(nq(e.getFullYear())-1,e)}function F8(e){return nq(e).getDay()}function Mwt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function Pwe(e){return Mwe(new Date(e))}function Owe(e){return L8(new Date(e))}function Mwe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Xp.count(t-1,e)}function L8(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return C_.count(t-1,e)}function B8(e){return qg.setTime(Date.UTC(e,0,1)),qg.getUTCDay()}function $wt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function $we(e,t,n,r,i){const s=t||1,o=zn(e),a=(y,v,b)=>(b=b||y,Fwt(n[b],r[b],y===o&&s,v)),u=new Date,l=Cc(e),c=l[eo]?a(eo):jo(2012),f=l[Po]?a(Po):l[eu]?a(eu):Sp,d=l[ss]&&l[Ao]?a(Ao,1,ss+Ao):l[ss]?a(ss,1):l[Ao]?a(Ao,1):l[tu]?a(tu,1):l[$f]?a($f,1):B_,h=l[$u]?a($u):Sp,p=l[Fu]?a(Fu):Sp,m=l[wl]?a(wl):Sp,g=l[Ac]?a(Ac):Sp;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function Fwt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function kb(e,t,n){return t+e*7-(n+6)%7}const Lwt={[eo]:e=>e.getFullYear(),[eu]:e=>Math.floor(e.getMonth()/3),[Po]:e=>e.getMonth(),[tu]:e=>e.getDate(),[$u]:e=>e.getHours(),[Fu]:e=>e.getMinutes(),[wl]:e=>e.getSeconds(),[Ac]:e=>e.getMilliseconds(),[$f]:e=>Rwe(e),[ss]:e=>$8(e),[ss+Ao]:(e,t)=>kb($8(e),e.getDay(),F8(t)),[Ao]:(e,t)=>kb(1,e.getDay(),F8(t))},Bwt={[eu]:e=>3*e,[ss]:(e,t)=>kb(e,0,F8(t))};function Fwe(e,t){return $we(e,t||1,Lwt,Bwt,Mwt)}const jwt={[eo]:e=>e.getUTCFullYear(),[eu]:e=>Math.floor(e.getUTCMonth()/3),[Po]:e=>e.getUTCMonth(),[tu]:e=>e.getUTCDate(),[$u]:e=>e.getUTCHours(),[Fu]:e=>e.getUTCMinutes(),[wl]:e=>e.getUTCSeconds(),[Ac]:e=>e.getUTCMilliseconds(),[$f]:e=>Mwe(e),[ss]:e=>L8(e),[Ao]:(e,t)=>kb(1,e.getUTCDay(),B8(t)),[ss+Ao]:(e,t)=>kb(L8(e),e.getUTCDay(),B8(t))},zwt={[eu]:e=>3*e,[ss]:(e,t)=>kb(e,0,B8(t))};function Lwe(e,t){return $we(e,t||1,jwt,zwt,$wt)}const Uwt={[eo]:Df,[eu]:wS.every(3),[Po]:wS,[ss]:T_,[tu]:Qd,[Ao]:Qd,[$f]:Qd,[$u]:LP,[Fu]:$P,[wl]:jd,[Ac]:lb},Vwt={[eo]:If,[eu]:xS.every(3),[Po]:xS,[ss]:C_,[tu]:Xp,[Ao]:Xp,[$f]:Xp,[$u]:BP,[Fu]:FP,[wl]:jd,[Ac]:lb};function V_(e){return Uwt[e]}function H_(e){return Vwt[e]}function Bwe(e,t,n){return e?e.offset(t,n):void 0}function jwe(e,t,n){return Bwe(V_(e),t,n)}function zwe(e,t,n){return Bwe(H_(e),t,n)}function Uwe(e,t,n,r){return e?e.range(t,n,r):void 0}function Vwe(e,t,n,r){return Uwe(V_(e),t,n,r)}function Hwe(e,t,n,r){return Uwe(H_(e),t,n,r)}const Rw=1e3,Pw=Rw*60,Ow=Pw*60,oO=Ow*24,Hwt=oO*7,Mie=oO*30,j8=oO*365,qwe=[eo,Po,tu,$u,Fu,wl,Ac],Mw=qwe.slice(0,-1),$w=Mw.slice(0,-1),Fw=$w.slice(0,-1),qwt=Fw.slice(0,-1),Wwt=[eo,ss],$ie=[eo,Po],Wwe=[eo],zE=[[Mw,1,Rw],[Mw,5,5*Rw],[Mw,15,15*Rw],[Mw,30,30*Rw],[$w,1,Pw],[$w,5,5*Pw],[$w,15,15*Pw],[$w,30,30*Pw],[Fw,1,Ow],[Fw,3,3*Ow],[Fw,6,6*Ow],[Fw,12,12*Ow],[qwt,1,oO],[Wwt,1,Hwt],[$ie,1,Mie],[$ie,3,3*Mie],[Wwe,1,j8]];function Gwe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(y2(t))/n;let i=x_(a=>a[2]).right(zE,r),s,o;return i===zE.length?(s=Wwe,o=gm(t[0]/j8,t[1]/j8,n)):i?(i=zE[r/zE[i-1][2]<zE[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=qwe,o=Math.max(gm(t[0],t[1],n),1)),{units:s,step:o}}function Lw(e){const t={};return n=>t[n]||(t[n]=e(n))}function Gwt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Ywt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Ywt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Ywe(e){const t=Lw(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=$0(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Gwt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=$0(o??",f");const a=gm(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Cge(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Age(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Tge(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let z8;Kwe();function Kwe(){return z8=Ywe({format:MP,formatPrefix:Bz})}function Xwe(e){return Ywe(Sge(e))}function Tk(e){return arguments.length?z8=Xwe(e):z8}function Fie(e,t,n){n=n||{},vt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(wl),i=t(Fu),s=t($u),o=t(tu),a=t(ss),u=t(Po),l=t(eu),c=t(eo),f=e(n[Ac]||".%L"),d=e(n[wl]||":%S"),h=e(n[Fu]||"%I:%M"),p=e(n[$u]||"%I %p"),m=e(n[tu]||n[Ao]||"%a %d"),g=e(n[ss]||"%b %d"),y=e(n[Po]||"%B"),v=e(n[eu]||"%B"),b=e(n[eo]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:g:c(E)<E?l(E)<E?y:v:b)(E)}function Qwe(e){const t=Lw(e.format),n=Lw(e.utcFormat);return{timeFormat:r=>yt(r)?t(r):Fie(t,V_,r),utcFormat:r=>yt(r)?n(r):Fie(n,H_,r),timeParse:Lw(e.parse),utcParse:Lw(e.utcParse)}}let U8;Jwe();function Jwe(){return U8=Qwe({format:qz,parse:Vge,utcFormat:Wz,utcParse:Hge})}function Zwe(e){return Qwe(Lge(e))}function YS(e){return arguments.length?U8=Zwe(e):U8}const V8=(e,t)=>gn({},e,t);function exe(e,t){const n=e?Xwe(e):Tk(),r=t?Zwe(t):YS();return V8(n,r)}function rq(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?V8(Tk(e),YS(t)):V8(Tk(),YS())}function Kwt(){return Kwe(),Jwe(),rq()}const Xwt=/^(data:|([A-Za-z]+:)?\/\/)/,Qwt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Jwt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Lie="file://";function Zwt(e,t){return n=>({options:n||{},sanitize:txt,load:ext,fileAccess:!!t,file:nxt(t),http:ixt(e)})}async function ext(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function txt(e,t){t=gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Qwt.test(e.replace(Jwt,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+lt(e));const u=Xwt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Lie))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Lie.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function nxt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):rxt}async function rxt(){Le("No file system access.")}function ixt(e){return e?async function(t,n){const r=gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?yn(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:sxt}async function sxt(){Le("No HTTP fetch method available.")}const oxt=e=>e!=null&&e===e,axt=e=>e==="true"||e==="false"||e===!0||e===!1,uxt=e=>!Number.isNaN(Date.parse(e)),txe=e=>!Number.isNaN(+e)&&!(e instanceof Date),lxt=e=>txe(e)&&Number.isInteger(+e),H8={boolean:QH,integer:Do,number:Do,date:JH,string:ZH,unknown:Bo},CA=[axt,lxt,txe,uxt],cxt=["boolean","integer","number","date"];function nxe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=CA.length,i=CA.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&oxt(u)&&!CA[a](u)&&(i[a]=0,++o,o===CA.length))return"string";return cxt[i.reduce((s,o)=>s===0?o:s,0)-1]}function rxe(e,t){return t.reduce((n,r)=>(n[r]=nxe(e,r),n),{})}function Bie(e){const t=function(n,r){const i={delimiter:e};return iq(n,r?gn(r,i):i)};return t.responseType="text",t}function iq(e,t){return t.header&&(e=t.header.map(lt).join(t.delimiter)+`
`+e),eZe(t.delimiter).parse(e+"")}iq.responseType="text";function fxt(e){return typeof Buffer=="function"&&yn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function sq(e,t){const n=t&&t.property?_l(t.property):Bo;return vt(e)&&!fxt(e)?dxt(n(e),t):n(JSON.parse(e))}sq.responseType="json";function dxt(e,t){return!Ue(e)&&Ewe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const hxt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function ixe(e,t){let n,r,i,s;return e=sq(e,t),t&&t.feature?(n=Iwt,i=t.feature):t&&t.mesh?(n=kwt,i=t.mesh,s=hxt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}ixe.responseType="json";const jD={dsv:iq,csv:Bie(","),tsv:Bie("	"),json:sq,topojson:ixe};function oq(e,t){return arguments.length>1?(jD[e]=t,this):Ut(jD,e)?jD[e]:null}function sxe(e){const t=oq(e);return t&&t.responseType||"text"}function oxe(e,t,n,r){t=t||{};const i=oq(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&pxt(e,t.parse,n,r),Ut(e,"columns")&&delete e.columns,e}function pxt(e,t,n,r){if(!e.length)return;const i=YS();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=rxe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!H8[p])throw Error("Illegal format pattern: "+h+":"+p);return H8[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const aO=Zwt(typeof fetch<"u"&&fetch,null);function uO(e){const t=e||Bo,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function zD(e,t){try{await t(e)}catch(n){e.error(n)}}const axe=Symbol("vega_id");let mxt=1;function lO(e){return!!(e&&Bt(e))}function Bt(e){return e[axe]}function uxe(e,t){return e[axe]=t,e}function sr(e){const t=e===Object(e)?e:{data:e};return Bt(t)?t:uxe(t,mxt++)}function aq(e){return cO(e,sr({}))}function cO(e,t){for(const n in e)t[n]=e[n];return t}function lxe(e,t){return uxe(t,Bt(e))}function By(e,t){return e?t?(n,r)=>e(n,r)||Bt(t(n))-Bt(t(r)):(n,r)=>e(n,r)||Bt(n)-Bt(r):null}function cxe(e){return e&&e.constructor===jy}function jy(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:jy,insert(a){const u=gt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=yn(a)?r:t,l=gt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:jo(l)};return yn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return yn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Bt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Bt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Bt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Bt(m),l[g]?l[g]=1:a.add.push(sr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Bt(m)]<0&&a.rem.push(m);function y(v,b,E){E?v[b]=E(v):a.encode=b,o||(c[Bt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Bt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Bt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Bt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const UD="_:mod:_";function fO(){Object.defineProperty(this,UD,{writable:!0,value:{}})}fO.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[UD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ue(n)?1+n.length:-1),i},modified(e,t){const n=this[UD];if(arguments.length){if(Ue(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[UD]={},this}};let gxt=0;const yxt="pulse",vxt=new fO,bxt=1,_xt=2;function Dr(e,t,n,r){this.id=++gxt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function jie(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Dr.prototype={targets(){return this._targets||(this._targets=uO(g2))},set(e){return this.value!==e?(this.value=e,1):0},skip:jie(bxt),modified:jie(_xt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new fO,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Dr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===yxt)gt(a).forEach(f=>{f instanceof Dr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(Ue(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||vxt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Ext(e,t,n,r){let i=1,s;return e instanceof Dr?s=e:e&&e.prototype instanceof Dr?s=new e:yn(e)?s=new Dr(null,e):(i=0,s=new Dr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function wxt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let xxt=0;function dO(e,t,n){this.id=++xxt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function op(e,t,n){return new dO(e,t,n)}dO.prototype={_filter:El,_apply:Bo,targets(){return this._targets||(this._targets=uO(g2))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=op(e);return this.targets().add(t),t},apply(e){const t=op(null,e);return this.targets().add(t),t},merge(){const e=op();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=op();return this.targets().add(op(null,null,KH(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(op(null,null,()=>n=!0)),t.targets().add(op(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=El,this._targets=null}};function Sxt(e,t,n,r){const i=this,s=op(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=gt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Txt(e,t){const n=this.locale();return oxe(e,t,n.timeParse,n.utcParse)}function Cxt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Axt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:sxe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Dxt(e,t,n){const r=this,i=r._pending||Ixt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(El).insert(s.data||[])),i.done(),s}function Ixt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Nxt={skip:!0};function kxt(e,t,n,r,i){return(e instanceof Dr?Pxt:Rxt)(this,e,t,n,r,i),this}function Rxt(e,t,n,r,i,s){const o=gn({},s,Nxt);let a,u;yn(n)||(n=jo(n)),r===void 0?a=l=>e.touch(n(l)):yn(r)?(u=new Dr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;cxe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Pxt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Dr(null,Oxt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Oxt(e,t){return t=yn(t)?t:jo(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Mxt(e){e.rank=++this._rank}function $xt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const Ck={},Jc=1,hp=2,Td=4,Fxt=Jc|hp,zie=Jc|Td,E1=Jc|hp|Td,Uie=8,UE=16,Vie=32,Hie=64;function im(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function d6(e,t){const n=[];return dp(e,t,r=>n.push(r)),n}function qie(e,t){const n={};return e.visit(t,r=>{n[Bt(r)]=1}),r=>n[Bt(r)]?null:r}function AA(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}im.prototype={StopPropagation:Ck,ADD:Jc,REM:hp,MOD:Td,ADD_REM:Fxt,ADD_MOD:zie,ALL:E1,REFLOW:Uie,SOURCE:UE,NO_SOURCE:Vie,NO_FIELDS:Hie,fork(e){return new im(this.dataflow).init(this,e)},clone(){const e=this.fork(E1);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(E1|UE)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new im(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Hie)&&(n.fields=e.fields),t&Jc?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&hp?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Td?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Vie?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||E1;return t&Jc&&this.add.length||t&hp&&this.rem.length||t&Td&&this.mod.length},reflow(e){if(e)return this.fork(E1).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Td,qie(this,Jc))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ue(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ue(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Jc&&(n.addF=AA(n.addF,t)),e&hp&&(n.remF=AA(n.remF,t)),e&Td&&(n.modF=AA(n.modF,t)),e&UE&&(n.srcF=AA(n.srcF,t)),n},materialize(e){e=e||E1;const t=this;return e&Jc&&t.addF&&(t.add=d6(t.add,t.addF),t.addF=null),e&hp&&t.remF&&(t.rem=d6(t.rem,t.remF),t.remF=null),e&Td&&t.modF&&(t.mod=d6(t.mod,t.modF),t.modF=null),e&UE&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&UE)return dp(n.source,n.srcF,r),n;e&Jc&&dp(n.add,n.addF,r),e&hp&&dp(n.rem,n.remF,r),e&Td&&dp(n.mod,n.modF,r);const i=n.source;if(e&Uie&&i){const s=n.add.length+n.mod.length;s===i.length||(s?dp(i,qie(n,zie),r):dp(i,n.srcF,r))}return n}};function uq(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}dt(uq,im,{fork(e){const t=new im(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ue(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Lxt(e,t,n){const r=this,i=[];if(r._pulse)return fxe(r);if(r._pending&&await r._pending,t&&await zD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new im(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=uO(g2);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=Ck),u!==Ck&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await zD(r,c[f].callback)}return n&&await zD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Bxt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function jxt(e,t,n){return this._pulse?fxe(this):(this.evaluate(e,t,n),this)}function zxt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function fxe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Uxt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Vxt(e,t){const n=e.source,r=this._clock;return n&&Ue(n)?new uq(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Hxt(this._pulse,n&&n.pulse)}function Hxt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Ck&&(e.source=t.source),e)}const lq={skip:!1,force:!1};function qxt(e,t){const n=t||lq;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Wxt(e,t,n){const r=n||lq;return(e.set(t)||r.force)&&this.touch(e,r),this}function Gxt(e,t,n){this.touch(e,n||lq);const r=new im(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Yxt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),dxe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Kxt(t,0,e)):r=n,r}}}function dxe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Kxt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,dxe(e,r,t,n)}function $v(){this.logger(HH()),this.logLevel(UH),this._clock=0,this._rank=0,this._locale=rq();try{this._loader=aO()}catch{}this._touched=uO(g2),this._input={},this._pulse=null,this._heap=Yxt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function VE(e){return function(){return this._log[e].apply(this,arguments)}}$v.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:VE("error"),warn:VE("warn"),info:VE("info"),debug:VE("debug"),logLevel:VE("level"),cleanThreshold:1e4,add:Ext,connect:wxt,rank:Mxt,rerank:$xt,pulse:Gxt,touch:qxt,update:Wxt,changeset:jy,ingest:Cxt,parse:Txt,preload:Dxt,request:Axt,events:Sxt,on:kxt,evaluate:Lxt,run:jxt,runAsync:Bxt,runAfter:zxt,_enqueue:Uxt,_getPulse:Vxt};function Oe(e,t){Dr.call(this,e,null,t)}dt(Oe,Dr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Rb={};function hxe(e){const t=pxe(e);return t&&t.Definition||null}function pxe(e){return e=e&&e.toLowerCase(),Ut(Rb,e)?Rb[e]:null}function*mxe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function cq(e,t,n){const r=Float64Array.from(mxe(e,n));return r.sort(Xd),t.map(i=>qme(r,i))}function fq(e,t){return cq(e,[.25,.5,.75],t)}function dq(e,t){const n=e.length,r=XWe(e,t),i=fq(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function gxe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var xl=Math.random;function Xxt(e){xl=e}function yxe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(mxe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(xl()*s)];c[l]=a/s}return c.sort(Xd),[J4(c,n/2),J4(c,1-n/2)]}function vxe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?Qxt(s,t+t/4):s}function Qxt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Jxt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Zxt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*xl())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const bxe=Math.sqrt(2*Math.PI),eSt=Math.SQRT2;let HE=NaN;function hO(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(HE===HE)n=HE,HE=NaN;else{do n=xl()*2-1,r=xl()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,HE=r*s}return e+n*t}function hq(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*bxe)}function pO(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function mO(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*eSt*tSt(2*e-1)}function tSt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function pq(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>hO(n,r),pdf:s=>hq(s,n,r),cdf:s=>pO(s,n,r),icdf:s=>mO(s,n,r)};return i.mean(e).stdev(t)}function mq(e,t){const n=pq();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=dq(e)),i):t},sample(){return e[~~(xl()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function gq(e,t){return e=e||0,t=t??1,Math.exp(e+hO()*t)}function yq(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*bxe*e)}function vq(e,t,n){return pO(Math.log(e),t,n)}function bq(e,t,n){return Math.exp(mO(e,t,n))}function _xe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>gq(n,r),pdf:s=>yq(s,n,r),cdf:s=>vq(s,n,r),icdf:s=>bq(s,n,r)};return i.mean(e).stdev(t)}function Exe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=xl();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function _q(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*xl()}function Eq(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function wq(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function xq(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function wxe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>_q(n,r),pdf:s=>Eq(s,n,r),cdf:s=>wq(s,n,r),icdf:s=>xq(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Sq(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function v2(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function gO(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function b2(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function q_(e,t,n,r,i){let s=0,o=0;return b2(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Tq(e,t,n){let r=0,i=0,s=0,o=0,a=0;b2(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=v2(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:q_(e,t,n,i,l)}}function xxe(e,t,n){let r=0,i=0,s=0,o=0,a=0;b2(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=v2(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:q_(e,t,n,i,l)}}function Sxe(e,t,n){const[r,i,s,o]=gO(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;b2(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=v2(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:q_(e,t,n,o,y)}}function Txe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;b2(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=v2(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:q_(e,t,n,a,c)}}function Cq(e,t,n){const[r,i,s,o]=gO(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,E=(f*y-d*l)/v,_=-b*u,w=S=>(S=S-s,b*S*S+E*S+_+o);return{coef:[_-E*s+b*s*s+o,E-2*b*s,b],predict:w,rSquared:q_(e,t,n,o,w)}}function Cxe(e,t,n,r){if(r===0)return Sq(e,t,n);if(r===1)return Tq(e,t,n);if(r===2)return Cq(e,t,n);const[i,s,o,a]=gO(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=rSt(c),v=b=>{b-=o;let E=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)E+=y[d]*Math.pow(b,d);return E};return{coef:nSt(f,y,-o,a),predict:v,rSquared:q_(e,t,n,a,v)}}function nSt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function rSt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Wie=2,Gie=1e-12;function Axe(e,t,n,r){const[i,s,o,a]=gO(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Wie;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],E=y-i[v]>i[b]-y?v:b;let _=0,w=0,S=0,C=0,A=0;const D=1/Math.abs(i[E]-y||1);for(let R=v;R<=b;++R){const M=i[R],F=s[R],P=iSt(Math.abs(y-M)*D)*d[R],j=M*P;_+=P,w+=j,S+=F*P,C+=F*j,A+=M*j}const[I,O]=v2(w/_,S/_,C/_,A/_);c[g]=I+O*y,f[g]=Math.abs(s[g]-c[g]),sSt(i,g+1,p)}if(h===Wie)break;const m=Wme(f);if(Math.abs(m)<Gie)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Gie:(v=1-y*y)*v}return oSt(i,c,o,a)}function iSt(e){return(e=1-e*e*e)*e*e}function sSt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function oSt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const aSt=.5*Math.PI/180;function yO(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=uSt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&lSt(f,m,d,h,p)>aSt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function uSt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function lSt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function cSt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function q8(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:cSt(e)}function Dxe(e,t,n){return n||e+(t?"_"+t:"")}const h6=()=>{},fSt={init:h6,add:h6,rem:h6,idx:0},KS={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},_2=Object.keys(KS).filter(e=>e!=="__count__");function dSt(e,t){return(n,r)=>gn({name:e,aggregate_param:r,out:n||e},fSt,t)}[..._2,"__count__"].forEach(e=>{KS[e]=dSt(e,KS[e])});function Ixe(e,t,n){return KS[e](n,t)}function Nxe(e,t){return e.idx-t.idx}function hSt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=KS[i]())})};return e.forEach(n),Object.values(t).sort(Nxe)}function pSt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function mSt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function gSt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function ySt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function kxe(e,t){const n=t||Bo,r=hSt(e),i=e.slice().sort(Nxe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=pSt,s.prototype.add=mSt,s.prototype.rem=gSt,s.prototype.set=ySt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Aq(e){this._key=e?_l(e):Bt,this.reset()}const oo=Aq.prototype;oo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};oo.add=function(e){this._add.push(e)};oo.rem=function(e){this._rem.push(e)};oo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};oo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ut(n,s)||(n[s]=1,++i);return i};oo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=bwe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};oo.argmin=function(e){return this.extent(e)[0]||{}};oo.argmax=function(e){return this.extent(e)[1]||{}};oo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};oo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};oo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=fq(this.values(),e),this._get=e),this._q};oo.q1=function(e){return this.quartile(e)[0]};oo.q2=function(e){return this.quartile(e)[1]};oo.q3=function(e){return this.quartile(e)[2]};oo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=yxe(this.values(),1e3,.05,e),this._get=e),this._ci};oo.ci0=function(e){return this.ci(e)[0]};oo.ci1=function(e){return this.ci(e)[1]};function Sm(e){Oe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Sm.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:_2},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};dt(Sm,Oe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=gt(Ro(v)),E=b.length;let _=0,w;for(;_<E;++_)r[w=b[_]]||(r[w]=1,t.push(w))}this._dims=gt(e.groupby),this._dnames=this._dims.map(v=>{const b=Ci(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:q8(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Ci(f),g=Dxe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(Ixe(d,h,g))}return this._measures=this._measures.map(v=>kxe(v,v.field)),Object.create(null)},cellkey:q8(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Aq),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?lxe(t.tuple,s):sr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const vSt=1e-14;function Dq(e){Oe.call(this,null,e)}Dq.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};dt(Dq,Oe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Ro(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=gxe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Do(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(vSt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=su(u,Ro(t),e.name||"bin_"+Ci(t))}});function Rxe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?Twe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Iq(e){Oe.call(this,[],e)}Iq.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};dt(Iq,Oe,{transform(e,t){const n=t.fork(t.ALL),r=Rxe(Bt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(By(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Pxe(e){Dr.call(this,null,bSt,e)}dt(Pxe,Dr);function bSt(e){return this.value&&!e.modified()?this.value:YH(e.fields,e.orders)}function Nq(e){Oe.call(this,null,e)}Nq.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function _St(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}dt(Nq,Oe,{transform(e,t){const n=f=>d=>{for(var h=_St(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=sr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function kq(e){Oe.call(this,null,e)}kq.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};dt(kq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=ESt(a,i,s,e.filter||El)):n.mod=a,n.source=this.value,n.modifies(r)}});function ESt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(sr(s)),s={},s[t]=l);return i}const Yie={kde:mq,mixture:Exe,normal:pq,lognormal:_xe,uniform:wxe},wSt="distributions",Kie="function",xSt="field";function Oxe(e,t){const n=e[Kie];Ut(Yie,n)||Le("Unknown distribution function: "+n);const r=Yie[n]();for(const i in e)i===xSt?r.data((e.from||t()).map(e[i])):i===wSt?r[i](e[i].map(s=>Oxe(s,t))):typeof r[i]===Kie&&r[i](e[i]);return r}function Rq(e){Oe.call(this,null,e)}const Mxe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],SSt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Mxe},{name:"weights",type:"number",array:!0}]};Rq.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Mxe.concat(SSt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};dt(Rq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Oxe(e.distribution,TSt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Mf(r.data()),l=yO(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],sr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function TSt(e){return()=>e.materialize(e.SOURCE).source}function $xe(e,t){return e?e.map((n,r)=>t[r]||Ci(n)):null}function Pq(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const Fxe="bin";function Oq(e){Oe.call(this,null,e)}Oq.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Fxe}]};const CSt=(e,t)=>y2(Mf(e,t))/30;dt(Oq,Oe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Pq(t.source,e.groupby,Bo),i=e.smooth||!1,s=e.field,o=e.step||CSt(n,s),a=By((p,m)=>s(p)-s(m)),u=e.as||Fxe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of vxe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function Lxe(e){Dr.call(this,null,ASt,e),this.modified(!0)}dt(Lxe,Dr);function ASt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:su(n=>t(n,e),Ro(t),Ci(t))}function Mq(e){Oe.call(this,[void 0,void 0],e)}Mq.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};dt(Mq,Oe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Do(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ci(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function $q(e,t){Dr.call(this,e),this.parent=t,this.count=0}dt($q,Dr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function vO(e){Oe.call(this,{},e),this._keys=U_();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}dt(vO,Oe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ut(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new $q(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Bt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Bt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Bt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Bt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Bt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function Bxe(e){Dr.call(this,null,DSt,e)}dt(Bxe,Dr);function DSt(e){return this.value&&!e.modified()?this.value:Ue(e.name)?gt(e.name).map(t=>_l(t)):_l(e.name,e.as)}function Fq(e){Oe.call(this,U_(),e)}Fq.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};dt(Fq,Oe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Bt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Bt(f),1)});function c(f){const d=Bt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Lq(e){Oe.call(this,[],e)}Lq.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};dt(Lq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=$xe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=aq(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Bq(e){Oe.call(this,[],e)}Bq.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};dt(Bq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ci),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=aq(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function jq(e){Oe.call(this,null,e)}jq.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};dt(jq,Oe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function jxe(e){Oe.call(this,[],e)}dt(jxe,Oe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=sr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const DA={value:"value",median:Wme,mean:nGe,min:P0,max:pc},ISt=[];function zq(e){Oe.call(this,[],e)}zq.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function NSt(e){var t=e.method||DA.value,n;if(DA[t]==null)Le("Unrecognized imputation method: "+t);else return t===DA.value?(n=e.value!==void 0?e.value:0,()=>n):DA[t]}function kSt(e){const t=e.field;return n=>n?t(n):NaN}dt(zq,Oe,{transform(e,t){var n=t.fork(t.ALL),r=NSt(e),i=kSt(e),s=Ci(e.field),o=Ci(e.key),a=(e.groupby||[]).map(Ci),u=RSt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,E,_;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],_={_impute:!0},y=0,E=p.length;y<E;++y)_[a[y]]=p[y];_[o]=m,_[s]=Number.isNaN(h)?h=r(d,i):h,l.push(sr(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function RSt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):ISt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Uq(e){Sm.call(this,e)}Uq.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:_2},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};dt(Uq,Sm,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Vq(e){Oe.call(this,null,e)}Vq.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};dt(Vq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Pq(r,e.groupby,e.field),s=(e.groupby||[]).map(Ci),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Mf(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=mq(h,o)[a],m=e.counts?h.length:1,g=c||Mf(h);yO(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(sr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function zxe(e){Dr.call(this,null,PSt,e)}dt(zxe,Dr);function PSt(e){return this.value&&!e.modified()?this.value:XH(e.fields,e.flat)}function Uxe(e){Oe.call(this,[],e),this._pending=null}dt(Uxe,Oe,{transform(e,t){const n=t.dataflow;return this._pending?p6(this,t,this._pending):OSt(e)?t.StopPropagation:e.values?p6(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=gt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>p6(this,t,gt(r.data)))}});function OSt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function p6(e,t,n){n.forEach(sr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Hq(e){Oe.call(this,{},e)}Hq.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};dt(Hq,Oe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Ci),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function Vxe(e){Dr.call(this,null,MSt,e)}dt(Vxe,Dr);function MSt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function Hxe(e){Dr.call(this,null,$St,e)}dt(Hxe,Dr);function $St(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function qxe(e){Oe.call(this,null,e)}dt(qxe,Oe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function qq(e){Sm.call(this,e)}qq.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:_2,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};dt(qq,Sm,{_transform:Sm.prototype.transform,transform(e,t){return this._transform(FSt(e,t),t)}});function FSt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Ro(n).concat(Ro(r)),o=BSt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>LSt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function LSt(e,t,n,r){return su(i=>t(i)===e?n(i):NaN,r,e+"")}function BSt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(sO),t?i.slice(0,t):i}function Wxe(e){vO.call(this,e)}dt(Wxe,vO,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Bt(s),n,t,s);return(e.modified("field")||r&&t.modified(Ro(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(sr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Wq(e){Oe.call(this,null,e)}Wq.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};dt(Wq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=$xe(e.fields,e.as||[]),s=r?(a,u)=>jSt(a,u,r,i):cO;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Bt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,sr({}));o[Bt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Bt(a)]))}),n}});function jSt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function Gxe(e){Oe.call(this,null,e)}dt(Gxe,Oe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Gq(e){Oe.call(this,null,e)}Gq.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const zSt=1e-14;dt(Gq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Pq(i,e.groupby,e.field),o=(e.groupby||[]).map(Ci),a=[],u=e.step||.01,l=e.probs||Eu(u/2,1-zSt,u),c=l.length;return s.forEach(f=>{const d=cq(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(sr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function Yxe(e){Oe.call(this,null,e)}dt(Yxe,Oe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Bt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=aq(i);r[Bt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Bt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Yq(e){Oe.call(this,[],e),this.count=0}Yq.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};dt(Yq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Bt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*xl()),d<o.length&&d>=u&&(f=o[d],s[Bt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Bt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Bt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Bt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Bt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Bt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Bt(c)])),this.count=a,this.value=n.source=o,n}});function Kq(e){Oe.call(this,null,e)}Kq.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};dt(Kq,Oe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Eu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,sr(s)}),n.add=t.add.concat(this.value),n}});function Kxe(e){Oe.call(this,null,e),this.modified(!0)}dt(Kxe,Oe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Xq(e){Oe.call(this,null,e)}const Xxe=["unit0","unit1"];Xq.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:eq,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Xxe}]};dt(Xq,Oe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?H_:V_)(s.unit).offset,a=e.as||Xxe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ro(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Gwe({extent:e.extent||Mf(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=tq(r),o=this.value||{},a=(n?Lwe:Fwe)(s,i);return a.unit=zn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function Qxe(e){Oe.call(this,U_(),e)}dt(Qxe,Oe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Jxe(e){Oe.call(this,null,e)}dt(Jxe,Oe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(By(e.sort)):t.source).map(e.field))}});function USt(e,t,n,r){const i=XS[e](t,n);return{init:i.init||Sp,update:function(s,o){o[r]=i.next(s)}}}const XS={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=XS.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=XS.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=VSt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function VSt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const HSt=Object.keys(XS);function Zxe(e){const t=gt(e.ops),n=gt(e.fields),r=gt(e.params),i=gt(e.aggregate_params),s=gt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){gt(Ro(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Ci(g),E=Dxe(p,b,s[m]);if(h(g),o.push(E),Ut(XS,p))a.push(USt(p,g,y,E));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let _=l[b];_||(_=l[b]=[],_.field=g,f.push(_)),_.push(Ixe(p,v,E))}}),(c.length||f.length)&&(this.cell=qSt(f,c,d)),this.inputs=Object.keys(u)}const eSe=Zxe.prototype;eSe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};eSe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function qSt(e,t,n){e=e.map(u=>kxe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Aq;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Qq(e){Oe.call(this,{},e),this._mlen=0,this._mods=[]}Qq.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:HSt.concat(_2)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};dt(Qq,Oe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=By(e.sort),i=q8(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new Zxe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)WSt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Rxe(Bt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function WSt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?x_(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||jo(-1)};t.init();for(let f=0;f<u;++f)GSt(c,o,f,u),s&&YSt(c,l),t.update(c,a[f])}function GSt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function YSt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const KSt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Sm,bin:Dq,collect:Iq,compare:Pxe,countpattern:Nq,cross:kq,density:Rq,dotbin:Oq,expression:Lxe,extent:Mq,facet:vO,field:Bxe,filter:Fq,flatten:Lq,fold:Bq,formula:jq,generate:jxe,impute:zq,joinaggregate:Uq,kde:Vq,key:zxe,load:Uxe,lookup:Hq,multiextent:Vxe,multivalues:Hxe,params:qxe,pivot:qq,prefacet:Wxe,project:Wq,proxy:Gxe,quantile:Gq,relay:Yxe,sample:Yq,sequence:Kq,sieve:Kxe,subflow:$q,timeunit:Xq,tupleindex:Qxe,values:Jxe,window:Qq},Symbol.toStringTag,{value:"Module"}));function sm(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const XSt=()=>typeof Image<"u"?Image:null;function Jq(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const QSt="identity",Pb="linear",Ch="log",E2="pow",w2="sqrt",bO="symlog",Y0="time",K0="utc",Sf="sequential",W_="diverging",Ob="quantile",_O="quantize",EO="threshold",Zq="ordinal",W8="point",tSe="band",eW="bin-ordinal",hs="continuous",x2="discrete",S2="discretizing",Pl="interpolating",tW="temporal";function JSt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function ZSt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function nW(){const e=kz().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Jq(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Eu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,mm(h,m)-1),v=m===g?y:mm(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return nW().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function nSe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return nSe(t())},e}function eTt(){return nSe(nW().paddingInner(1))}var tTt=Array.prototype.map;function nTt(e){return tTt.call(e,Do)}const rTt=Array.prototype.slice;function rSe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(mm(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=nTt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=rTt.call(r),n):t.slice()},n.tickFormat=function(r,i){return Dge(e[0],zn(e),r??10,i)},n.copy=function(){return rSe().domain(n.domain()).range(n.range())},n}const Ak=new Map,iSe=Symbol("vega_scale");function sSe(e){return e[iSe]=!0,e}function iTt(e){return e&&e[iSe]===!0}function sTt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?JSt(s):s.invertExtent?ZSt(s):void 0),s.type=e,sSe(s)};return r.metadata=Cc(gt(n)),r}function Jn(e,t,n){return arguments.length>1?(Ak.set(e,sTt(e,t,n)),this):oSe(e)?Ak.get(e):void 0}Jn(QSt,Ige);Jn(Pb,ub,hs);Jn(Ch,kge,[hs,Ch]);Jn(E2,Vz,hs);Jn(w2,uYe,hs);Jn(bO,Rge,hs);Jn(Y0,xKe,[hs,tW]);Jn(K0,SKe,[hs,tW]);Jn(Sf,Yz,[hs,Pl]);Jn(`${Sf}-${Pb}`,Yz,[hs,Pl]);Jn(`${Sf}-${Ch}`,qge,[hs,Pl,Ch]);Jn(`${Sf}-${E2}`,Kz,[hs,Pl]);Jn(`${Sf}-${w2}`,TKe,[hs,Pl]);Jn(`${Sf}-${bO}`,Wge,[hs,Pl]);Jn(`${W_}-${Pb}`,Gge,[hs,Pl]);Jn(`${W_}-${Ch}`,Yge,[hs,Pl,Ch]);Jn(`${W_}-${E2}`,Xz,[hs,Pl]);Jn(`${W_}-${w2}`,CKe,[hs,Pl]);Jn(`${W_}-${bO}`,Kge,[hs,Pl]);Jn(Ob,Pge,[S2,Ob]);Jn(_O,Oge,S2);Jn(EO,Mge,S2);Jn(eW,rSe,[x2,S2]);Jn(Zq,kz,x2);Jn(tSe,nW,x2);Jn(W8,eTt,x2);function oSe(e){return Ak.has(e)}function zy(e,t){const n=Ak.get(e);return n&&n.metadata[t]}function rW(e){return zy(e,hs)}function Mb(e){return zy(e,x2)}function G8(e){return zy(e,S2)}function aSe(e){return zy(e,Ch)}function oTt(e){return zy(e,tW)}function uSe(e){return zy(e,Pl)}function lSe(e){return zy(e,Ob)}const aTt=["clamp","base","constant","exponent"];function cSe(e,t){const n=t[0],r=zn(t)-n;return function(i){return e(n+i*r)}}function wO(e,t,n){return Fz(iW(t||"rgb",n),e)}function fSe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function dSe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?jo(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Jn(s)().domain([t,n]).range([0,1]),aTt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function iW(e,t){const n=VGe[uTt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function uTt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const lTt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},cTt={accent:qtt,category10:Htt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Wtt,observable10:Gtt,paired:Ytt,pastel1:Ktt,pastel2:Xtt,set1:Qtt,set2:Jtt,set3:Ztt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function hSe(e){if(Ue(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function pSe(e,t){for(const n in e)sW(n,t(e[n]))}const Xie={};pSe(cTt,hSe);pSe(lTt,e=>wO(hSe(e)));function sW(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Xie[e]=t,this):Xie[e]}const VD="symbol",fTt="discrete",dTt="gradient",hTt=e=>Ue(e)?e.map(t=>String(t)):String(e),pTt=(e,t)=>e[1]-t[1],mTt=(e,t)=>t[1]-e[1];function oW(e,t,n){let r;return Wn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(y2(e.domain())/n||1)+1))),vt(t)&&(r=t.step,t=t.interval),yt(t)&&(t=e.type===Y0?V_(t):e.type==K0?H_(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function mSe(e,t,n){let r=e.range(),i=r[0],s=zn(r),o=pTt;if(i>s&&(r=s,s=i,i=r,o=mTt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],zn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function aW(e,t){return e.bins?mSe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function gSe(e,t,n,r,i,s){const o=t.type;let a=hTt;if(o===Y0||i===Y0)a=e.timeFormat(r);else if(o===K0||i===K0)a=e.utcFormat(r);else if(aSe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=ySe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function ySe(e,t,n){const r=aW(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const Y8={[Ob]:"quantiles",[_O]:"thresholds",[EO]:"domain"},vSe={[Ob]:"quantiles",[_O]:"domain"};function bSe(e,t){return e.bins?vTt(e.bins):e.type===Ch?ySe(e,t,!0):Y8[e.type]?yTt(e[Y8[e.type]]()):aW(e,t)}function gTt(e,t,n){const r=t[vSe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function yTt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function vTt(e){const t=e.slice(0,-1);return t.max=zn(e),t}const bTt=e=>Y8[e.type]||e.bins;function _Se(e,t,n,r,i,s,o){const a=vSe[t.type]&&s!==Y0&&s!==K0?gTt(e,t,i):gSe(e,t,n,i,s,o);return r===VD&&bTt(t)?_Tt(a):r===fTt?ETt(a):wTt(a)}const _Tt=e=>(t,n,r)=>{const i=Qie(r[n+1],Qie(r.max,1/0)),s=Jie(t,e),o=Jie(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Qie=(e,t)=>e??t,ETt=e=>(t,n)=>n?e(t):null,wTt=e=>t=>e(t),Jie=(e,t)=>Number.isFinite(e)?t(e):null;function xTt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+zn(t),s=i-r;if(e.type===EO){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function STt(e,t,n,r){const i=r||t.type;return yt(n)&&oTt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Y0?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===K0?e.utcFormat("%A, %d %B %Y, %X UTC"):_Se(e,t,5,null,n,r,!0)}function ESe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=STt(e,t,n.format,n.formatType);if(G8(t.type)){const s=bSe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Mb(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(zn(s))}`}}let wSe=0;function TTt(){wSe=0}const Dk="p_";function uW(e){return e&&e.gradient}function xSe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?Dk:"";return i||(i=e.id="gradient_"+wSe++,r==="radial"?(e.x1=Wc(e.x1,.5),e.y1=Wc(e.y1,.5),e.r1=Wc(e.r1,0),e.x2=Wc(e.x2,.5),e.y2=Wc(e.y2,.5),e.r2=Wc(e.r2,.5),s=Dk):(e.x1=Wc(e.x1,0),e.y1=Wc(e.y1,0),e.x2=Wc(e.x2,1),e.y2=Wc(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Wc(e,t){return e??t}function SSe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Zie={basis:{curve:fnt},"basis-closed":{curve:dnt},"basis-open":{curve:hnt},bundle:{curve:pnt,tension:"beta",value:.85},cardinal:{curve:mnt,tension:"tension",value:0},"cardinal-open":{curve:ynt,tension:"tension",value:0},"cardinal-closed":{curve:gnt,tension:"tension",value:0},"catmull-rom":{curve:vnt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:bnt,tension:"alpha",value:.5},"catmull-rom-open":{curve:_nt,tension:"alpha",value:.5},linear:{curve:gU},"linear-closed":{curve:Ent},monotone:{horizontal:xnt,vertical:wnt},natural:{curve:Snt},step:{curve:Tnt},"step-after":{curve:Ant},"step-before":{curve:Cnt}};function lW(e,t,n){var r=Ut(Zie,e)&&Zie[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const CTt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},ATt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,DTt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,ITt=/^((\s+,?\s*)|(,\s*))/,NTt=/^[01]/;function $b(e){const t=[];return(e.match(ATt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=CTt[s],a=kTt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function kTt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?NTt:DTt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(ITt);u!==null&&(i+=u[0].length)}return r}const Tm=Math.PI/180,RTt=1e-14,Wg=Math.PI/2,lf=Math.PI*2,w1=Math.sqrt(3)/2;var m6={},g6={},TSe=[].join;function PTt(e,t,n,r,i,s,o,a,u){const l=TSe.call(arguments);if(m6[l])return m6[l];const c=o*Tm,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,E=g*a+y*u,_=v*a+b*u,w=g*e+y*t,S=v*e+b*t;let A=1/((w-E)*(w-E)+(S-_)*(S-_))-.25;A<0&&(A=0);let D=Math.sqrt(A);s==i&&(D=-D);const I=.5*(E+w)-D*(S-_),O=.5*(_+S)+D*(w-E),R=Math.atan2(_-O,E-I);let F=Math.atan2(S-O,w-I)-R;F<0&&s===1?F+=lf:F>0&&s===0&&(F-=lf);const P=Math.ceil(Math.abs(F/(Wg+.001))),j=[];for(let z=0;z<P;++z){const V=R+z*F/P,$=R+(z+1)*F/P;j[z]=[I,O,V,$,n,r,f,d]}return m6[l]=j}function OTt(e){const t=TSe.call(e);if(g6[t])return g6[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),E=8/3*b*b/Math.sin(v),_=n+p-E*m,w=r+m+E*p,S=n+g,C=r+y,A=S+E*y,D=C-E*g;return g6[t]=[c*_+f*w,d*_+h*w,c*A+f*D,d*A+h*D,c*S+f*C,d*S+h*C]}const Ku=["l",0,0,0,0,0,0,0];function MTt(e,t,n){const r=Ku[0]=e[0];if(r==="a"||r==="A")Ku[1]=t*e[1],Ku[2]=n*e[2],Ku[3]=e[3],Ku[4]=e[4],Ku[5]=e[5],Ku[6]=t*e[6],Ku[7]=n*e[7];else if(r==="h"||r==="H")Ku[1]=t*e[1];else if(r==="v"||r==="V")Ku[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Ku[i]=(i%2==1?t:n)*e[i];return Ku}function QS(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=MTt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":ese(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":ese(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function ese(e,t,n,r){const i=PTt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=OTt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const tse=.5773502691896257,nse={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,lf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n,i=r-n*tse,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n,i=r-n*tse;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function CSe(e){return Ut(nse,e)?nse[e]:$Tt(e)}var y6={};function $Tt(e){if(!Ut(y6,e)){const t=$b(e);y6[e]={draw:function(n,r){QS(n,t,0,0,Math.sqrt(r)/2)}}}return y6[e]}const np=.448084975506;function FTt(e){return e.x}function LTt(e){return e.y}function BTt(e){return e.width}function jTt(e){return e.height}function bd(e){return typeof e=="function"?e:()=>+e}function IA(e,t,n){return Math.max(t,Math.min(e,n))}function ASe(){var e=FTt,t=LTt,n=BTt,r=jTt,i=bd(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=IA(+i.call(this,c),0,v),E=IA(+s.call(this,c),0,v),_=IA(+o.call(this,c),0,v),w=IA(+a.call(this,c),0,v);if(u||(u=h=WP()),b<=0&&E<=0&&_<=0&&w<=0)u.rect(p,m,g,y);else{var S=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(S-E,m),u.bezierCurveTo(S-np*E,m,S,m+np*E,S,m+E),u.lineTo(S,C-w),u.bezierCurveTo(S,C-np*w,S-np*w,C,S-w,C),u.lineTo(p+_,C),u.bezierCurveTo(p+np*_,C,p,C-np*_,p,C-_),u.lineTo(p,m+b),u.bezierCurveTo(p,m+np*b,p+np*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=bd(c),l):e},l.y=function(c){return arguments.length?(t=bd(c),l):t},l.width=function(c){return arguments.length?(n=bd(c),l):n},l.height=function(c){return arguments.length?(r=bd(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=bd(c),s=f!=null?bd(f):i,a=d!=null?bd(d):i,o=h!=null?bd(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function DSe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,E=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+v,a+b),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,lf);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=WP()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function T2(e,t){return e??t}const C2=e=>e.x||0,A2=e=>e.y||0,zTt=e=>e.width||0,UTt=e=>e.height||0,VTt=e=>(e.x||0)+(e.width||0),HTt=e=>(e.y||0)+(e.height||0),qTt=e=>e.startAngle||0,WTt=e=>e.endAngle||0,GTt=e=>e.padAngle||0,YTt=e=>e.innerRadius||0,KTt=e=>e.outerRadius||0,XTt=e=>e.cornerRadius||0,QTt=e=>T2(e.cornerRadiusTopLeft,e.cornerRadius)||0,JTt=e=>T2(e.cornerRadiusTopRight,e.cornerRadius)||0,ZTt=e=>T2(e.cornerRadiusBottomRight,e.cornerRadius)||0,e2t=e=>T2(e.cornerRadiusBottomLeft,e.cornerRadius)||0,t2t=e=>T2(e.size,64),n2t=e=>e.size||1,xO=e=>e.defined!==!1,r2t=e=>CSe(e.shape||"circle"),i2t=unt().startAngle(qTt).endAngle(WTt).padAngle(GTt).innerRadius(YTt).outerRadius(KTt).cornerRadius(XTt),s2t=vye().x(C2).y1(A2).y0(HTt).defined(xO),o2t=vye().y(A2).x1(C2).x0(VTt).defined(xO),a2t=yU().x(C2).y(A2).defined(xO),u2t=ASe().x(C2).y(A2).width(zTt).height(UTt).cornerRadius(QTt,JTt,ZTt,e2t),l2t=cnt().type(r2t).size(t2t),c2t=DSe().x(C2).y(A2).defined(xO).size(n2t);function cW(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function f2t(e,t){return i2t.context(e)(t)}function d2t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?o2t:s2t).curve(lW(r,n.orient,n.tension)).context(e)(t)}function h2t(e,t){const n=t[0],r=n.interpolate||"linear";return a2t.curve(lW(r,n.orient,n.tension)).context(e)(t)}function G_(e,t,n,r){return u2t.context(e)(t,n,r)}function p2t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function m2t(e,t){return l2t.context(e)(t)}function g2t(e,t){return c2t.context(e)(t)}var ISe=1;function NSe(){ISe=1}function fW(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+ISe++),o=i.clipping[s]||(i.clipping[s]={id:s});return yn(r)?o.path=r(null):cW(n)?o.path=G_(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Xi(e){this.clear(),e&&this.union(e)}Xi.prototype={clone(){return new Xi(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function SO(e){this.mark=e,this.bounds=this.bounds||new Xi}function TO(e){SO.call(this,e),this.items=this.items||[]}dt(TO,SO);class kSe{constructor(t){this._pending=0,this._loader=t||aO()}pending(){return this._pending}sanitizeURL(t){const n=this;return rse(n),n._loader.sanitize(t,{context:"href"}).then(r=>(qE(n),r)).catch(()=>(qE(n),null))}loadImage(t){const n=this,r=XSt();return rse(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ut(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>qE(n),o.onerror=()=>qE(n),o.src=s,o}).catch(i=>(qE(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function rse(e){e._pending+=1}function qE(e){e._pending-=1}function zh(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?y2t(t,r):0))}return e}function y2t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const v2t=lf-1e-8;let CO,HD,qD,o0,K8,WD,X8,Q8;const Rp=(e,t)=>CO.add(e,t),GD=(e,t)=>Rp(HD=e,qD=t),ise=e=>Rp(e,CO.y1),sse=e=>Rp(CO.x1,e),Gg=(e,t)=>K8*e+X8*t,Yg=(e,t)=>WD*e+Q8*t,v6=(e,t)=>Rp(Gg(e,t),Yg(e,t)),b6=(e,t)=>GD(Gg(e,t),Yg(e,t));function D2(e,t){return CO=e,t?(o0=t*Tm,K8=Q8=Math.cos(o0),WD=Math.sin(o0),X8=-WD):(K8=Q8=1,o0=WD=X8=0),b2t}const b2t={beginPath(){},closePath(){},moveTo:b6,lineTo:b6,rect(e,t,n,r){o0?(v6(e+n,t),v6(e+n,t+r),v6(e,t+r),b6(e,t)):(Rp(e+n,t+r),GD(e,t))},quadraticCurveTo(e,t,n,r){const i=Gg(e,t),s=Yg(e,t),o=Gg(n,r),a=Yg(n,r);ose(HD,i,o,ise),ose(qD,s,a,sse),GD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Gg(e,t),a=Yg(e,t),u=Gg(n,r),l=Yg(n,r),c=Gg(i,s),f=Yg(i,s);ase(HD,o,u,c,ise),ase(qD,a,l,f,sse),GD(c,f)},arc(e,t,n,r,i,s){if(r+=o0,i+=o0,HD=n*Math.cos(i)+e,qD=n*Math.sin(i)+t,Math.abs(i-r)>v2t)Rp(e-n,t-n),Rp(e+n,t+n);else{const o=l=>Rp(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%lf,r<0&&(r+=lf),i=i%lf,i<0&&(i+=lf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=lf,a=r-r%Wg,u=0;u<4&&a>i;++u,a-=Wg)o(a);else for(a=r-r%Wg+Wg,u=0;u<4&&a<i;++u,a=a+Wg)o(a)}}};function ose(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function ase(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>RTt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(use(u,e,t,n,r)),0<l&&l<1&&i(use(l,e,t,n,r))}function use(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var om=(om=sm(1,1))?om.getContext("2d"):null;const J8=new Xi;function dW(e){return function(t,n){if(!om)return!0;e(om,t),J8.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=J8;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(om.isPointInPath(u,a))return!0;return!1}}function hW(e,t){return t.contains(e.x||0,e.y||0)}function RSe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(J8.set(n,r,n+i,r+s))}function PSe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return lv(t,n,r,i,s)}function lv(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Fb(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Vl(e,t){return e??t}function lse(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function _2t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Vl(t.x1,.5)*r,n.y1+Vl(t.y1,.5)*i,Math.max(r,i)*Vl(t.r1,0),n.x1+Vl(t.x2,.5)*r,n.y1+Vl(t.y2,.5)*i,Math.max(r,i)*Vl(t.r2,.5));else{const o=Vl(t.x1,0),a=Vl(t.y1,0),u=Vl(t.x2,1),l=Vl(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=sm(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=lse(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return lse(s,t.stops)}function OSe(e,t,n){return uW(n)?_2t(e,n,t.bounds):n}function Ik(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=OSe(e,t,t.fill),!0):!1}var E2t=[];function Lb(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=OSe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||E2t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function w2t(e,t){return e.zindex-t.zindex||e.index-t.index}function pW(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(w2t)}function Dc(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=pW(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function Nk(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=pW(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function mW(e){return function(t,n,r){Dc(n,i=>{(!r||r.intersects(i.bounds))&&MSe(e,t,i,i)})}}function x2t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&MSe(e,t,n.items[0],n.items)}}function MSe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Fb(t,n),n.fill&&Ik(t,n,i)&&t.fill(),n.stroke&&Lb(t,n,i)&&t.stroke()))}function AO(e){return e=e||El,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,Nk(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function I2(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function gW(e){return AO(I2(e))}function v0(e,t){return"translate("+e+","+t+")"}function yW(e){return"rotate("+e+")"}function S2t(e,t){return"scale("+e+","+t+")"}function $Se(e){return v0(e.x||0,e.y||0)}function T2t(e){return v0(e.x||0,e.y||0)+(e.angle?" "+yW(e.angle):"")}function C2t(e){return v0(e.x||0,e.y||0)+(e.angle?" "+yW(e.angle):"")+(e.scaleX||e.scaleY?" "+S2t(e.scaleX||1,e.scaleY||1):"")}function vW(e,t,n){function r(o,a){o("transform",T2t(a)),o("d",t(null,a))}function i(o,a){return t(D2(o,a.angle),a),zh(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Tm),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:mW(s),pick:gW(s),isect:n||dW(s)}}var A2t=vW("arc",f2t);function D2t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function I2t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function N2t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function bW(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(D2(u),c),zh(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=I2(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:x2t(s),pick:a,isect:hW,tip:n}}var k2t=bW("area",d2t,D2t);function R2t(e,t){var n=t.clip;e.save(),yn(n)?(e.beginPath(),n(e),e.clip()):FSe(e,t.group)}function FSe(e,t){e.beginPath(),cW(t)?G_(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function LSe(e){const t=Vl(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function P2t(e,t){e("transform",$Se(t))}function BSe(e,t){const n=LSe(t);e("d",G_(null,t,n,n))}function O2t(e,t){e("class","background"),e("aria-hidden",!0),BSe(e,t)}function M2t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?BSe(e,t):e("d","")}function $2t(e,t,n){const r=t.clip?fW(n,t,t):null;e("clip-path",r)}function F2t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),zh(e,t),e.translate(t.x||0,t.y||0)}function JS(e,t,n,r){const i=LSe(t);e.beginPath(),G_(e,t,(n||0)+i,(r||0)+i)}const L2t=I2(JS),B2t=I2(JS,!1),j2t=I2(JS,!0);function z2t(e,t,n,r){Dc(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(JS(e,i,s,o),Fb(e,i),i.fill&&Ik(e,i,u)&&e.fill(),i.stroke&&!a&&Lb(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&FSe(e,i),n&&n.translate(-s,-o),Dc(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(JS(e,i,s,o),Fb(e,i),Lb(e,i,u)&&e.stroke())})}function U2t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return Nk(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&cW(u)&&!j2t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&B2t(e,u,o,a)?(e.restore(),u):(l=Nk(u,v=>V2t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&L2t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function V2t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var H2t={type:"group",tag:"g",nested:!1,attr:P2t,bound:F2t,draw:z2t,pick:U2t,isect:RSe,content:$2t,background:O2t,foreground:M2t},ZS={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function _W(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function EW(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function wW(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function DO(e,t){return e==="center"?t/2:e==="right"?t:0}function IO(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function q2t(e,t,n){const r=_W(t,n),i=EW(t,r),s=wW(t,r),o=(t.x||0)-DO(t.align,i),a=(t.y||0)-IO(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,ZS["xmlns:xlink"],"xlink:href"),e("transform",v0(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function W2t(e,t){const n=t.image,r=EW(t,n),i=wW(t,n),s=(t.x||0)-DO(t.align,r),o=(t.y||0)-IO(t.baseline,i);return e.set(s,o,s+r,o+i)}function G2t(e,t,n){Dc(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=_W(r,this);let s=EW(r,i),o=wW(r,i);if(s===0||o===0)return;let a=(r.x||0)-DO(r.align,s),u=(r.y||0)-IO(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Fb(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Y2t={type:"image",tag:"image",nested:!1,attr:q2t,bound:W2t,draw:G2t,pick:AO(),isect:El,get:_W,xOffset:DO,yOffset:IO},K2t=bW("line",h2t,I2t);function X2t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",C2t(t)),e("d",t.path)}function YD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Tm,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=$b(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),QS(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):QS(e,u,r,i,s,o)}function Q2t(e,t){return YD(D2(e,t.angle),t)?e.set(0,0,0,0):zh(e,t,!0)}var J2t={type:"path",tag:"path",nested:!1,attr:X2t,bound:Q2t,draw:mW(YD),pick:gW(YD),isect:dW(YD)};function Z2t(e,t){e("d",G_(null,t))}function eCt(e,t){var n,r;return zh(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function cse(e,t){e.beginPath(),G_(e,t)}var tCt={type:"rect",tag:"path",nested:!1,attr:Z2t,bound:eCt,draw:mW(cse),pick:gW(cse),isect:RSe};function nCt(e,t){e("transform",$Se(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function rCt(e,t){var n,r;return zh(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function jSe(e,t,n){var r,i,s,o;return t.stroke&&Lb(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function iCt(e,t,n){Dc(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&jSe(e,r,i)&&(Fb(e,r),e.stroke())}})}function sCt(e,t,n,r){return e.isPointInStroke?jSe(e,t,1)&&e.isPointInStroke(n,r):!1}var oCt={type:"rule",tag:"line",nested:!1,attr:nCt,bound:rCt,draw:iCt,pick:AO(sCt),isect:PSe},aCt=vW("shape",p2t),uCt=vW("symbol",m2t,hW);const fse=Swe();var Cu={height:nd,measureWidth:xW,estimateWidth:kk,width:kk,canvas:zSe};zSe(!0);function zSe(e){Cu.width=e&&om?xW:kk}function kk(e,t){return USe(Am(e,t),nd(e))}function USe(e,t){return~~(.8*e.length*t)}function xW(e,t){return nd(e)<=0||!(t=Am(e,t))?0:VSe(t,NO(e))}function VSe(e,t){const n=`(${t}) ${e}`;let r=fse.get(n);return r===void 0&&(om.font=t,r=om.measureText(e).width,fse.set(n,r)),r}function nd(e){return e.fontSize!=null?+e.fontSize||0:11}function Cm(e){return e.lineHeight!=null?e.lineHeight:nd(e)+2}function lCt(e){return Ue(e)?e.length>1?e:e[0]:e}function N2(e){return lCt(e.lineBreak&&e.text&&!Ue(e.text)?e.text.split(e.lineBreak):e.text)}function SW(e){const t=N2(e);return(Ue(t)?t.length-1:0)*Cm(e)}function Am(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?fCt(e,n):n}function cCt(e){if(Cu.width===xW){const t=NO(e);return n=>VSe(n,t)}else if(Cu.width===kk){const t=nd(e);return n=>USe(n,t)}else return t=>Cu.width(e,t)}function fCt(e,t){var n=+e.limit,r=cCt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function k2(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function NO(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+nd(e)+"px "+k2(e,t)}function TW(e){var t=e.baseline,n=nd(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Cm(e):t==="line-bottom"?.29*n-.5*Cm(e):0)}const dCt={left:"start",center:"middle",right:"end"},Rx=new Xi;function kO(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Wg,t+=r*Math.cos(i),n+=r*Math.sin(i)),Rx.x1=t,Rx.y1=n,Rx}function hCt(e,t){var n=t.dx||0,r=(t.dy||0)+TW(t),i=kO(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",dCt[t.align]||"start"),a?(u=v0(s,o)+" "+yW(a),(n||r)&&(u+=" "+v0(n,r))):u=v0(s+n,o+r),e("transform",u)}function CW(e,t,n){var r=Cu.height(t),i=t.align,s=kO(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+TW(t)-Math.round(.8*r),c=N2(t),f;if(Ue(c)?(r+=Cm(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Cu.width(t,h)),0)):f=Cu.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Tm,o,a);else if(n===2)return e.rotatedPoints(t.angle*Tm,o,a);return e}function pCt(e,t,n){Dc(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=NO(r),e.textAlign=r.align||"left",s=kO(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Tm),o=a=0),o+=r.dx||0,a+=(r.dy||0)+TW(r),c=N2(r),Fb(e,r),Ue(c))for(l=Cm(r),u=0;u<c.length;++u)f=Am(r,c[u]),r.fill&&Ik(e,r,i)&&e.fillText(f,o,a),r.stroke&&Lb(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Am(r,c),r.fill&&Ik(e,r,i)&&e.fillText(f,o,a),r.stroke&&Lb(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function mCt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=kO(t),a=o.x1,u=o.y1,l=CW(Rx,t,1),c=-t.angle*Tm,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function gCt(e,t){const n=CW(Rx,e,2);return lv(t,n[0],n[1],n[2],n[3])||lv(t,n[0],n[1],n[4],n[5])||lv(t,n[4],n[5],n[6],n[7])||lv(t,n[2],n[3],n[6],n[7])}var yCt={type:"text",tag:"text",nested:!1,attr:hCt,bound:CW,draw:pCt,pick:AO(mCt),isect:gCt},vCt=bW("trail",g2t,N2t),Lu={arc:A2t,area:k2t,group:H2t,image:Y2t,line:K2t,path:J2t,rect:tCt,rule:oCt,shape:aCt,symbol:uCt,text:yCt,trail:vCt};function Z8(e,t,n){var r=Lu[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Xi),e,n)}var dse={mark:null};function HSe(e,t,n){var r=Lu[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(dse.mark=e,l=dse),c=Z8(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Xi,o)for(a=0,u=s.length;a<u;++a)t.union(Z8(s[a],i,n));return e.bounds=t}const bCt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function qSe(e,t){return JSON.stringify(e,bCt,t)}function WSe(e){const t=typeof e=="string"?JSON.parse(e):e;return GSe(t)}function GSe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&GSe(n[i]);return t&&HSe(e),e}class YSe{constructor(t){arguments.length?this.root=WSe(t):(this.root=hse({marktype:"group",name:"root",role:"frame"}),this.root.items=[new TO(this.root)])}toJSON(t){return qSe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=hse(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function hse(e,t){const n={bounds:new Xi,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Pp(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function AW(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function rs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Pp(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function rl(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function KSe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function RO(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function _Ct(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Lu[i.marktype]).tip){for(o=RO(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let DW=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||aO(),this._tooltip=n||ECt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Pp(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=_Ct(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function ECt(e,t,n,r){e.element().setAttribute("title",r||"")}class R2{constructor(t){this._el=null,this._bgcolor=null,this._loader=new kSe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const wCt="keydown",xCt="keypress",SCt="keyup",XSe="dragenter",KD="dragleave",QSe="dragover",e9="pointerdown",TCt="pointerup",Rk="pointermove",XD="pointerout",JSe="pointerover",t9="mousedown",CCt="mouseup",ZSe="mousemove",Pk="mouseout",eTe="mouseover",Ok="click",ACt="dblclick",DCt="wheel",tTe="mousewheel",Mk="touchstart",$k="touchmove",Fk="touchend",ICt=[wCt,xCt,SCt,XSe,KD,QSe,e9,TCt,Rk,XD,JSe,t9,CCt,ZSe,Pk,eTe,Ok,ACt,DCt,tTe,Mk,$k,Fk],n9=Rk,Px=Pk,r9=Ok;class P2 extends DW{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=ICt,this.pointermove=mse([Rk,ZSe],[JSe,eTe],[XD,Pk]),this.dragover=mse([QSe],[XSe],[KD]),this.pointerout=gse([XD,Pk]),this.dragleave=gse([KD])}initialize(t,n,r){return this._canvas=t&&AW(t,"canvas"),[Ok,t9,e9,Rk,XD,KD].forEach(i=>pse(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(tTe,t)}pointerdown(t){this._down=this._active,this.fire(e9,t)}mousedown(t){this._down=this._active,this.fire(t9,t)}click(t){this._down===this._active&&(this.fire(Ok,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Mk,t,!0)}touchmove(t){this.fire($k,t,!0)}touchend(t){this.fire(Fk,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===r9&&i&&i.href?this.handleHref(n,i,i.href):(t===n9||t===Px)&&this.handleTooltip(n,i,t!==Px),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(pse(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=RO(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Lu[t.marktype].pick.call(this,o,t,n,r,i,s)}}const NCt=e=>e===Mk||e===$k||e===Fk?[Mk,$k,Fk]:[e];function pse(e,t){NCt(t).forEach(n=>kCt(e,n))}function kCt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function Bw(e,t,n){t.forEach(r=>e.fire(r,n))}function mse(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?Bw(this,e,r):((!i||!i.exit)&&Bw(this,n,r),this._active=s,Bw(this,t,r),Bw(this,e,r))}}function gse(e){return function(t){Bw(this,e,t),this._active=null}}function RCt(){return typeof window<"u"&&window.devicePixelRatio||1}function PCt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?RCt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class Lk extends R2{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Xi,this._tempb=new Xi}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:sm(1,1,this._options.type),t&&this._canvas&&(rl(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)PCt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=OCt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):MCt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Lu[n.marktype];n.clip&&R2t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const OCt=(e,t,n)=>new Xi().set(0,0,t,n).translate(-e[0],-e[1]);function MCt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class nTe extends DW{constructor(t,n){super(t,n);const r=this;r._hrefHandler=_6(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=_6(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Px)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(r9,this._hrefHandler),i.removeEventListener(n9,this._tooltipHandler),i.removeEventListener(Px,this._tooltipHandler)),this._svg=i=t&&AW(t,"svg"),i&&(i.addEventListener(r9,this._hrefHandler),i.addEventListener(n9,this._tooltipHandler),i.addEventListener(Px,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:_6(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const _6=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},rTe="aria-hidden",IW="aria-label",NW="role",kW="aria-roledescription",iTe="graphics-object",RW="graphics-symbol",sTe=(e,t,n)=>({[NW]:e,[kW]:t,[IW]:n||void 0}),$Ct=Cc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),yse={axis:{desc:"axis",caption:BCt},legend:{desc:"legend",caption:jCt},"title-text":{desc:"title",caption:e=>`Title text '${bse(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${bse(e)}'`}},vse={ariaRole:NW,ariaRoleDescription:kW,description:IW};function oTe(e,t){const n=t.aria===!1;if(e(rTe,n||void 0),n||t.description==null)for(const r in vse)e(vse[r],void 0);else{const r=t.mark.marktype;e(IW,t.description),e(NW,t.ariaRole||(r==="group"?iTe:RW)),e(kW,t.ariaRoleDescription||`${r} mark`)}}function aTe(e){return e.aria===!1?{[rTe]:!0}:$Ct[e.role]?null:yse[e.role]?LCt(e,yse[e.role]):FCt(e)}function FCt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return sTe(n?iTe:RW,`${t} mark container`,e.description)}function LCt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return sTe(t.role||RW,t.desc,n.description||r(n))}catch{return null}}function bse(e){return gt(e.text).join(" ")}function BCt(e){const t=e.datum,n=e.orient,r=t.title?uTe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Mb(a)?"discrete":a} scale with ${ESe(o,s,e)}`}function jCt(e){const t=e.datum,n=t.title?uTe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return UCt(r)+(n?` titled '${n}'`:"")+` for ${zCt(s)} with ${ESe(u,a,e)}`}function uTe(e){try{return gt(zn(e.items).items[0].text).join(" ")}catch{return null}}function zCt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+zn(e)}function UCt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const lTe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),VCt=e=>lTe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function PW(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${VCt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=lTe(u),a),toString:()=>e};return a}const cTe=e=>fTe(PW(),e)+"";function fTe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):fTe(e,r)}return e.close()}const Bk={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},jk={blend:"mix-blend-mode"},dTe={fill:"none","stroke-miterlimit":10},WE=0,_se="http://www.w3.org/2000/xmlns/",ns=ZS.xmlns;class OW extends R2{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=rs(t,0,"svg",ns),this._svg.setAttributeNS(_se,"xmlns",ns),this._svg.setAttributeNS(_se,"xmlns:xlink",ZS["xmlns:xlink"]),this._svg.setAttribute("version",ZS.version),this._svg.setAttribute("class","marks"),rl(t,1),this._root=rs(this._svg,WE,"g",ns),Op(this._root,dTe),rl(this._svg,WE+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Op(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=rs(t,WE,"rect",ns),Op(r,{width:this._width,height:this._height,fill:n}));const i=cTe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),rl(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Lu[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Ese(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Ese(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Lu[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=wse(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return rl(c,0),n._svg;c.setAttribute("class",KSe(n));const f=aTe(n);for(const m in f)Ko(c,m,f[m]);l||Ko(c,"pointer-events",u),Ko(c,"clip-path",n.clip?fW(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=wse(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&WCt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Dc(n,p),rl(c,h),c}_update(t,n,r){qd=n,xo=n.__values__,oTe(Ox,r),t.attr(Ox,r,this);const i=YCt[t.type];i&&i.call(this,t,n,r),qd&&this.style(qd,r)}style(t,n){if(n!=null){for(const r in Bk){let i=r==="font"?k2(n):n[r];if(i===xo[r])continue;const s=Bk[r];i==null?t.removeAttribute(s):(uW(i)&&(i=xSe(i,this._defs.gradient,hTe())),t.setAttribute(s,i+"")),xo[r]=i}for(const r in jk)QD(t,jk[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=rs(t,WE+1,"defs",ns)),i=HCt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=rs(t,WE+1,"defs",ns)),i=qCt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):rl(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Ese(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function HCt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=rs(e,n++,"pattern",ns);Op(o,{id:Dk+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=rs(o,0,"rect",ns),Op(o,{width:1,height:1,fill:`url(${hTe()}#${t.id})`}),e=rs(e,n++,"radialGradient",ns),Op(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=rs(e,n++,"linearGradient",ns),Op(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=rs(e,r,"stop",ns),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return rl(e,r),n}function qCt(e,t,n){let r;return e=rs(e,n,"clipPath",ns),e.setAttribute("id",t.id),t.path?(r=rs(e,0,"path",ns),r.setAttribute("d",t.path)):(r=rs(e,0,"rect",ns),Op(r,{x:0,y:0,width:t.width,height:t.height})),rl(e,1),n+1}function WCt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Dc(n,o=>{i=e.mark(t,o,i,r),++s}),rl(t,1+s)}function wse(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Pp(o,r,ns),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Pp(o,"path",ns);s.appendChild(a),a.__data__=e;const u=Pp(o,"g",ns);s.appendChild(u),u.__data__=e;const l=Pp(o,"path",ns);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||GCt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function GCt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let qd=null,xo=null;const YCt={group(e,t,n){const r=qd=t.childNodes[2];xo=r.__values__,e.foreground(Ox,n,this),xo=t.__values__,qd=t.childNodes[1],e.content(Ox,n,this);const i=qd=t.childNodes[0];e.background(Ox,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==xo.events&&(Ko(r,"pointer-events",s),Ko(i,"pointer-events",s),xo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ko(r,"display",null),this.style(i,n),Ko(i,"stroke",null),o&&(n.fill=null),xo=r.__values__,this.style(r,n),o&&(n.fill=o),qd=null}else Ko(r,"display","none")},image(e,t,n){n.smooth===!1?(QD(t,"image-rendering","optimizeSpeed"),QD(t,"image-rendering","pixelated")):QD(t,"image-rendering",null)},text(e,t,n){const r=N2(n);let i,s,o,a;Ue(r)?(s=r.map(u=>Am(n,u)),i=s.join(`
`),i!==xo.text&&(rl(t,0),o=t.ownerDocument,a=Cm(n),s.forEach((u,l)=>{const c=Pp(o,"tspan",ns);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),xo.text=i)):(s=Am(n,r),s!==xo.text&&(t.textContent=s,xo.text=s)),Ko(t,"font-family",k2(n)),Ko(t,"font-size",nd(n)+"px"),Ko(t,"font-style",n.fontStyle),Ko(t,"font-variant",n.fontVariant),Ko(t,"font-weight",n.fontWeight)}};function Ox(e,t,n){t!==xo[e]&&(n?KCt(qd,e,t,n):Ko(qd,e,t),xo[e]=t)}function QD(e,t,n){n!==xo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),xo[t]=n)}function Op(e,t){for(const n in t)Ko(e,n,t[n])}function Ko(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function KCt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function hTe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class pTe extends R2{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=PW();n.open("svg",gn({},ZS,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",dTe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Lu[n.marktype],i=r.tag,s=[oTe,r.attr];t.open("g",{class:KSe(n),"clip-path":n.clip?fW(this,n,n.group):null},aTe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=N2(a);if(Ue(l)){const c={x:0,dy:Cm(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Am(a,l[f])).close()}else t.text(Am(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Dc(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Dc(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&XCt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:Dk+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function XCt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=k2(t),e["font-size"]=nd(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Bk){let a=t[o];const u=Bk[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(uW(a)&&(a=xSe(a,i.gradient,"")),e[u]=a)}for(const o in jk){const a=t[o];a!=null&&(s=s||[],s.push(`${jk[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Kl={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function QCt(e){Kl.svgMarkTypes=e.svgMarkTypes??["text"],Kl.svgOnTop=e.svgOnTop??!0,Kl.debug=e.debug??!1}class i9 extends R2{constructor(t){super(t),this._svgRenderer=new OW(t),this._canvasRenderer=new Lk(t)}initialize(t,n,r,i,s){this._root_el=rs(t,0,"div");const o=rs(this._root_el,0,"div"),a=rs(this._root_el,1,"div");return this._root_el.style.position="relative",Kl.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Kl.svgOnTop?a:o,this._canvasEl=Kl.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Kl.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Kl.svgMarkTypes.includes(s));this._svgRenderer.render(t,Kl.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Kl.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class mTe extends P2{constructor(t,n){super(t,n)}initialize(t,n,r){const i=rs(rs(t,0,"div"),Kl.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const gTe="canvas",yTe="hybrid",vTe="png",bTe="svg",_Te="none",Mp={Canvas:gTe,PNG:vTe,SVG:bTe,Hybrid:yTe,None:_Te},X0={};X0[gTe]=X0[vTe]={renderer:Lk,headless:Lk,handler:P2};X0[bTe]={renderer:OW,headless:pTe,handler:nTe};X0[yTe]={renderer:i9,headless:i9,handler:mTe};X0[_Te]={};function PO(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(X0[e]=t,this):X0[e]}function ETe(e,t,n){const r=[],i=new Xi().union(t),s=e.marktype;return s?wTe(e,i,n,r):s==="group"?xTe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function wTe(e,t,n,r){if(JCt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)xTe(i[a],t,n,r);else for(const u=Lu[s].isect;a<o;++a){const l=i[a];STe(l,t,u)&&r.push(l)}}return r}function JCt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function xTe(e,t,n,r){n&&n(e.mark)&&STe(e,t,Lu.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)wTe(i[u],t,n,r);t.translate(o,a)}return r}function STe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const E6=new Xi;function TTe(e){const t=e.clip;if(yn(t))t(D2(E6.clear()));else if(t)E6.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(E6)}const ZCt=1e-9;function MW(e,t,n){return e===t?!0:n==="path"?CTe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Wn(e)&&Wn(t)?Math.abs(e-t)<=ZCt:!e||!t||!vt(e)&&!vt(t)?e==t:eAt(e,t)}function CTe(e,t){return MW($b(e),$b(t))}function eAt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!MW(e[i],t[i],i))return!1;return typeof e==typeof t}function tAt(){NSe(),TTt()}const Bb="top",rc="left",ac="right",Dm="bottom",nAt="top-left",rAt="top-right",iAt="bottom-left",sAt="bottom-right",$W="start",s9="middle",Jo="end",oAt="x",aAt="y",OO="group",FW="axis",LW="title",uAt="frame",lAt="scope",BW="legend",ATe="row-header",DTe="row-footer",ITe="row-title",NTe="column-header",kTe="column-footer",RTe="column-title",cAt="padding",fAt="symbol",PTe="fit",OTe="fit-x",MTe="fit-y",dAt="pad",jW="none",NA="all",o9="each",zW="flush",$p="column",Fp="row";function $Te(e){Oe.call(this,null,e)}dt($Te,Oe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Lu[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=kA(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===OO||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(kA(l,o))),r.role){case FW:case BW:case LW:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(kA(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(kA(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return TTe(r),t.modifies("bounds")}});function kA(e,t,n){return t(e.bounds.clear(),e,n)}const xse=":vega_identifier:";function UW(e){Oe.call(this,0,e)}UW.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};dt(UW,Oe,{transform(e,t){const n=hAt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function hAt(e){return e._signals[xse]||(e._signals[xse]=e.add(0))}function FTe(e){Oe.call(this,null,e)}dt(FTe,Oe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,pAt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===OO?TO:SO;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function pAt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function LTe(e){Oe.call(this,null,e)}const Sse={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!BTe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},BTe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Tse=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(BTe(i,s=e[n].bounds,t))return!0},mAt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},gAt=(e,t,n)=>{var r=e.range(),i=new Xi;return t===Bb||t===Dm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Cse=e=>(e.forEach(t=>t.opacity=1),e),Ase=(e,t)=>e.reflow(t.modified()).modifies("opacity");dt(LTe,Oe,{transform(e,t){const n=Sse[e.method]||Sse.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Cse(i),t=Ase(t,e)),t;if(i=i.filter(mAt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Cse(i),t=Ase(t,e),s.length>=3&&Tse(s,r)){do s=n(s,r);while(s.length>=3&&Tse(s,r));s.length<3&&!zn(i).opacity&&(s.length>1&&(zn(s).opacity=0),zn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=gAt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function jTe(e){Oe.call(this,null,e)}dt(jTe,Oe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Eo=new Xi;function cv(e,t,n){return e[t]===n?0:(e[t]=n,1)}function yAt(e){var t=e.items[0].orient;return t===rc||t===ac}function vAt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function bAt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=vAt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&SW(p),v=0,b=0,E,_;switch(Eo.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case Bb:v=f||0,b=-c,_=Math.max(d,Math.min(h,-g.y1)),g.add(0,-_).add(l,0),p&&RA(e,p,_,m,y,0,-1,g);break;case rc:v=-c,b=f||0,_=Math.max(d,Math.min(h,-g.x1)),g.add(-_,0).add(0,l),p&&RA(e,p,_,m,y,1,-1,g);break;case ac:v=n+c,b=f||0,_=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(_,l),p&&RA(e,p,_,m,y,1,1,g);break;case Dm:v=f||0,b=r+c,_=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,_),p&&RA(e,p,_,m,0,0,1,g);break;default:v=i.x,b=i.y}return zh(g.translate(v,b),i),cv(i,"x",v+o)|cv(i,"y",b+o)&&(i.bounds=Eo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function RA(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Dse=(e,t)=>Math.floor(Math.min(e,t)),Ise=(e,t)=>Math.ceil(Math.max(e,t));function _At(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===OO)switch(i.role){case FW:case BW:case LW:break;case ATe:o.rowheaders.push(...s);break;case DTe:o.rowfooters.push(...s);break;case NTe:o.colheaders.push(...s);break;case kTe:o.colfooters.push(...s);break;case ITe:o.rowtitle=s[0];break;case RTe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function EAt(e){return new Xi().set(0,0,e.width||0,e.height||0)}function wAt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Zr(e,t,n){const r=vt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Nse(e){return e<0?Math.ceil(-e):0}function zTe(e,t,n){var r=!n.nodirty,i=n.bounds===zW?EAt:wAt,s=Eo.set(0,0,0,0),o=Zr(n.align,$p),a=Zr(n.align,Fp),u=Zr(n.padding,$p),l=Zr(n.padding,Fp),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),E=Array(d),_=Array(d),w,S,C,A,D,I,O,R,M,F,P;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)I=t[S],D=_[S]=i(I),I.x=I.x||0,b[S]=0,I.y=I.y||0,E[S]=0,C=S%c,A=~~(S/c),m=Math.max(m,O=Math.ceil(D.x2)),v=Math.max(v,R=Math.ceil(D.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],R),h[S]=u+Nse(D.x1),g[S]=l+Nse(D.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===o9)for(C=1;C<c;++C){for(P=0,S=C;S<d;S+=c)P<h[S]&&(P=h[S]);for(S=C;S<d;S+=c)h[S]=P+p[C-1]}else if(o===NA){for(P=0,S=0;S<d;++S)S%c&&P<h[S]&&(P=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=P+m)}else for(o=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===o9)for(A=1;A<f;++A){for(P=0,S=A*c,w=S+c;S<w;++S)P<g[S]&&(P=g[S]);for(S=A*c;S<w;++S)g[S]=P+y[A-1]}else if(a===NA){for(P=0,S=c;S<d;++S)P<g[S]&&(P=g[S]);for(S=c;S<d;++S)g[S]=P+v}else for(a=!1,A=1;A<f;++A)for(S=A*c,w=S+c;S<w;++S)g[S]+=y[A-1];for(M=0,S=0;S<d;++S)M=h[S]+(S%c?M:0),b[S]+=M-t[S].x;for(C=0;C<c;++C)for(F=0,S=C;S<d;S+=c)F+=g[S],E[S]+=F-t[S].y;if(o&&Zr(n.center,$p)&&f>1)for(S=0;S<d;++S)D=o===NA?m:p[S%c],M=D-_[S].x2-t[S].x-b[S],M>0&&(b[S]+=M/2);if(a&&Zr(n.center,Fp)&&c!==1)for(S=0;S<d;++S)D=a===NA?v:y[~~(S/c)],F=D-_[S].y2-t[S].y-E[S],F>0&&(E[S]+=F/2);for(S=0;S<d;++S)s.union(_[S].translate(b[S],E[S]));switch(M=Zr(n.anchor,oAt),F=Zr(n.anchor,aAt),Zr(n.anchor,$p)){case Jo:M-=s.width();break;case s9:M-=s.width()/2}switch(Zr(n.anchor,Fp)){case Jo:F-=s.height();break;case s9:F-=s.height()/2}for(M=Math.round(M),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)I=t[S],I.x+=b[S]+=M,I.y+=E[S]+=F,s.union(I.mark.bounds.union(I.bounds.translate(b[S],E[S]))),r&&e.dirty(I);return s}function xAt(e,t,n){var r=_At(t),i=r.marks,s=n.bounds===zW?SAt:TAt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=zTe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Zr(n.headerBand,Fp,null),c=PA(e,r.rowheaders,i,a,u,-Zr(o,"rowHeader"),Dse,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Zr(n.headerBand,$p,null),f=PA(e,r.colheaders,i,a,a,-Zr(o,"columnHeader"),Dse,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Zr(n.footerBand,Fp,null),d=PA(e,r.rowfooters,i,a,u,Zr(o,"rowFooter"),Ise,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Zr(n.footerBand,$p,null),h=PA(e,r.colfooters,i,a,a,Zr(o,"columnFooter"),Ise,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Zr(n.titleAnchor,Fp),g=Zr(o,"rowTitle"),g=p===Jo?d+g:c-g,m=Zr(n.titleBand,Fp,.5),kse(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Zr(n.titleAnchor,$p),g=Zr(o,"columnTitle"),g=p===Jo?h+g:f-g,m=Zr(n.titleBand,$p,.5),kse(e,r.coltitle,g,1,y,m))}function SAt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function TAt(e,t){return e.bounds[t]}function PA(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,E,_,w,S,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,E=t.length;v<E;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,E=t.length;v<E;++v,y+=f){for(w=t[v],_=w.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),A=m):(C=m,A=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),_.union(w.bounds.translate(C-(w.x||0),A-(w.y||0))),w.x=C,w.y=A,e.dirty(w),g=o(g,_[l])}return g}function kse(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function CAt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function AAt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function DAt(e,t,n,r,i,s,o){const a=CAt(n,t),u=AAt(e,a("offset",0)),l=a("anchor",$W),c=l===Jo?1:l===s9?.5:0,f={align:o9,bounds:a("bounds",zW),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case rc:f.anchor={x:Math.floor(r.x1)-u,column:Jo,y:c*(o||r.height()+2*r.y1),row:l};break;case ac:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Bb:f.anchor={y:Math.floor(i.y1)-u,row:Jo,x:c*(s||i.width()+2*i.x1),column:l};break;case Dm:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case nAt:f.anchor={x:u,y:u};break;case rAt:f.anchor={x:s-u,y:u,column:Jo};break;case iAt:f.anchor={x:u,y:o-u,row:Jo};break;case sAt:f.anchor={x:s-u,y:o-u,column:Jo,row:Jo};break}return f}function IAt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),kAt(e,n,n.items[0].items[0]),s=NAt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===fAt&&RAt(n.items[0].items[0].items[0].items),i!==jW&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,zh(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function NAt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function kAt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&GE(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case rc:i+=Math.ceil(o.bounds.width())+u;break;case ac:case Dm:break;default:s+=o.bounds.height()+u}switch((i||s)&&GE(e,n,i,s),o.orient){case rc:c+=x1(t,n,o,a,1,1);break;case ac:l+=x1(t,n,o,Jo,0,0)+u,c+=x1(t,n,o,a,1,1);break;case Dm:l+=x1(t,n,o,a,0,0),c+=x1(t,n,o,Jo,-1,0,1)+u;break;default:l+=x1(t,n,o,a,0,0)}(l||c)&&GE(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(GE(e,n,-l,0),GE(e,o,-l,0))}}function x1(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:SW(n);return Math.round(r===$W?f:r===Jo?d-h:.5*(c-h))}function GE(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function RAt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function PAt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===rc||a===ac?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==OO?a===rc?(p=i.y2,h=i.y1):a===ac?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===rc&&(p=r,h=0),b=u===$W?p:u===Jo?h:(p+h)/2,d&&d.text){switch(a){case Bb:case Dm:v=f.bounds.height()+c;break;case rc:y=f.bounds.width()+c;break;case ac:y=-f.bounds.width()-c;break}Eo.clear().union(d.bounds),Eo.translate(y-(d.x||0),v-(d.y||0)),cv(d,"x",y)|cv(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Eo),d.mark.bounds.clear().union(Eo),e.dirty(d)),Eo.clear().union(d.bounds)}else Eo.clear();switch(Eo.union(f.bounds),a){case Bb:m=b,g=i.y1-Eo.height()-l;break;case rc:m=i.x1-Eo.width()-l,g=b;break;case ac:m=i.x2+Eo.width()+l,g=b;break;case Dm:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return cv(s,"x",m)|cv(s,"y",g)&&(Eo.translate(m,g),e.dirty(s),s.bounds.clear().union(Eo),t.bounds.clear().union(Eo),e.dirty(s)),s.bounds}function UTe(e){Oe.call(this,null,e)}dt(UTe,Oe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&xAt(n,r,e.layout),MAt(n,r,e)}),OAt(e.mark.group)?t.reflow():t}});function OAt(e){return e&&e.mark.role!=="legend-entry"}function MAt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Xi().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case FW:h=yAt(f)?a:u,h.union(bAt(e,f,i,s));break;case LW:c=f;break;case BW:l.push(IAt(e,f));break;case uAt:case lAt:case ATe:case DTe:case ITe:case NTe:case kTe:case RTe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||ac,d!==jW&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];zTe(e,v,DAt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===PTe||n.autosize.type===OTe||n.autosize.type===MTe))switch(y.orient){case rc:case ac:o.add(v.x1,0).add(v.x2,0);break;case Bb:case Dm:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(PAt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),$At(e,t,o,n)}function $At(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===cAt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===jW?(l=0,f=0,u=o,c=a):s===PTe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===OTe?(u=Math.max(0,o-l-d),a=c+f+h):s===MTe?(o=u+l+d,c=Math.max(0,a-f-h)):s===dAt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const FAt=Object.freeze(Object.defineProperty({__proto__:null,bound:$Te,identifier:UW,mark:FTe,overlap:LTe,render:jTe,viewlayout:UTe},Symbol.toStringTag,{value:"Module"}));function VTe(e){Oe.call(this,null,e)}dt(VTe,Oe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=oW(s,o,e.minstep),u=e.format||gSe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?mSe(s,e.values,a):aW(s,a);return i&&(r.rem=i),i=l.map((c,f)=>sr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(sr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function HTe(e){Oe.call(this,null,e)}function LAt(){return sr({})}function BAt(e){const t=U_().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}dt(HTe,Oe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||LAt,s=e.key||Bt,o=this.value;return Ue(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=BAt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function qTe(e){Oe.call(this,null,e)}dt(qTe,Oe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ue(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||sp,u=i.enter||sp,l=i.exit||sp,c=(s&&!o?i[s]:a)||sp;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==sp&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==sp&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==sp){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function WTe(e){Oe.call(this,[],e)}dt(WTe,Oe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||VD,o=e.scale,a=+e.limit,u=oW(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===VD,c=e.format||_Se(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||bSe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===VD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,yn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=jo(m=p||8),i=i.map((y,v)=>sr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(sr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===dTt?(d=o.domain(),h=dSe(o,d[0],zn(d)),f.length<3&&!e.values&&d[0]!==zn(d)&&(f=[d[0],zn(d)]),i=f.map((y,v)=>sr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=xTt(o),i=f.map((y,v)=>sr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const jAt=e=>e.source.x,zAt=e=>e.source.y,UAt=e=>e.target.x,VAt=e=>e.target.y;function VW(e){Oe.call(this,{},e)}VW.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};dt(VW,Oe,{transform(e,t){var n=e.sourceX||jAt,r=e.sourceY||zAt,i=e.targetX||UAt,s=e.targetY||VAt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Rse.get(u+"-"+a)||Rse.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const GTe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,HAt=(e,t,n,r)=>GTe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),YTe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},qAt=(e,t,n,r)=>YTe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),KTe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},WAt=(e,t,n,r)=>KTe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GAt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,YAt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,KAt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},XAt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},QAt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},JAt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Rse=U_({line:GTe,"line-radial":HAt,arc:YTe,"arc-radial":qAt,curve:KTe,"curve-radial":WAt,"orthogonal-horizontal":GAt,"orthogonal-vertical":YAt,"orthogonal-radial":KAt,"diagonal-horizontal":XAt,"diagonal-vertical":QAt,"diagonal-radial":JAt});function HW(e){Oe.call(this,null,e)}HW.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};dt(HW,Oe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||B_,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Yme(l),h=Eu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const ZAt=5;function eDt(e){const t=e.type;return!e.bins&&(t===Pb||t===E2||t===w2)}function XTe(e){return rW(e)&&e!==Sf}const tDt=Cc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function QTe(e){Oe.call(this,null,e),this.modified(!0)}dt(QTe,Oe,{transform(e,t){var n=t.dataflow,r=this.value,i=nDt(e);(!r||i!==r.type)&&(this.value=r=Jn(i)());for(i in e)if(!tDt[i]){if(i==="padding"&&XTe(r.type))continue;yn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return uDt(r,e,aDt(r,e,iDt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function nDt(e){var t=e.type,n="",r;return t===Sf?Sf+"-"+Pb:(rDt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Sf+"-":r===3?W_+"-":""),(n+t||Pb).toLowerCase())}function rDt(e){const t=e.type;return rW(t)&&t!==Y0&&t!==K0&&(e.scheme||e.range&&e.range.length&&e.range.every(yt))}function iDt(e,t,n){const r=sDt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&eDt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return XTe(s)&&t.padding&&i[0]!==zn(i)&&(i=oDt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(JTe(s,i,n)),s===Zq&&e.unknown(t.domainImplicit?Z4:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&oW(e,t.nice)||null),i.length}function sDt(e,t,n){return t?(e.domain(JTe(e.type,t,n)),t.length):-1}function oDt(e,t,n,r,i,s){var o=Math.abs(zn(n)-n[0]),a=o/(o-2*r),u=e===Ch?WH(t,null,a):e===w2?Sk(t,null,a,.5):e===E2?Sk(t,null,a,i||1):e===bO?GH(t,null,a,s||1):qH(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function JTe(e,t,n){if(aSe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+lt(t))}return t}function aDt(e,t,n){let r=t.bins;if(r&&!Ue(r)){const i=e.domain(),s=i[0],o=zn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Eu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===eW&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function uDt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=lDt(r,t,n);else if(t.scheme&&(s=cDt(r,t,n),yn(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&uSe(r))return e.interpolator(wO(a9(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(iW(t.interpolate,t.interpolateGamma)):yn(e.round)?e.round(i):yn(e.rangeRound)&&e.interpolate(i?VT:Km),s&&e.range(a9(s,t.reverse))}function lDt(e,t,n){e!==tSe&&e!==W8&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===W8?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Jq(n,i,r)]}function cDt(e,t,n){var r=t.schemeExtent,i,s;return Ue(t.scheme)?s=wO(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=sW(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===EO?n+1:e===eW?n-1:e===Ob||e===_O?+t.schemeCount||ZAt:n,uSe(e)?Pse(s,r,t.reverse):yn(s)?fSe(Pse(s,r),n):e===Zq?s:s.slice(0,n)}function Pse(e,t,n){return yn(e)&&(t||n)?cSe(e,a9(t||[0,1],n)):e}function a9(e,t){return t?e.slice().reverse():e}function ZTe(e){Oe.call(this,null,e)}dt(ZTe,Oe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(By(e.sort)),this.modified(n),t}});const Ose="zero",e2e="center",t2e="normalize",n2e=["y0","y1"];function qW(e){Oe.call(this,null,e)}qW.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Ose,values:[Ose,e2e,t2e]},{name:"as",type:"string",array:!0,length:2,default:n2e}]};dt(qW,Oe,{transform(e,t){var n=e.as||n2e,r=n[0],i=n[1],s=By(e.sort),o=e.field||B_,a=e.offset===e2e?fDt:e.offset===t2e?dDt:hDt,u,l,c,f;for(u=pDt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function fDt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function dDt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function hDt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function pDt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const mDt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:VTe,datajoin:HTe,encode:qTe,legendentries:WTe,linkpath:VW,pie:HW,scale:QTe,sortitems:ZTe,stack:qW},Symbol.toStringTag,{value:"Module"}));var gDt=Math.abs,u9=Math.cos,zk=Math.sin,yDt=1e-6,r2e=Math.PI,l9=r2e/2,Mse=vDt(2);function $se(e){return e>1?l9:e<-1?-l9:Math.asin(e)}function vDt(e){return e>0?Math.sqrt(e):0}function bDt(e,t){var n=e*zk(t),r=30,i;do t-=i=(t+zk(t)-n)/(1+u9(t));while(gDt(i)>yDt&&--r>0);return t/2}function _Dt(e,t,n){function r(i,s){return[e*i*u9(s=bDt(n,s)),t*zk(s)]}return r.invert=function(i,s){return s=$se(s/t),[i/(e*u9(s)),$se((2*s+zk(2*s))/n)]},r}var EDt=_Dt(Mse/l9,Mse,r2e);function wDt(){return Xf(EDt).scale(169.529)}const xDt=W0e(),c9=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function SDt(e,t){return function n(){const r=t();return r.type=e,r.path=W0e().projection(r),r.copy=r.copy||function(){const i=n();return c9.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},sSe(r)}}function WW(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Uk[e]=SDt(e,t),this):Uk[e]||null}function i2e(e){return e&&e.path||xDt}const Uk={albers:Y0e,albersusa:Aet,azimuthalequalarea:Det,azimuthalequidistant:Iet,conicconformal:Ret,conicequalarea:MN,conicequidistant:Met,equalEarth:Fet,equirectangular:Pet,gnomonic:Let,identity:Bet,mercator:Net,mollweide:wDt,naturalEarth1:jet,orthographic:zet,stereographic:Uet,transversemercator:Vet};for(const e in Uk)WW(e,Uk[e]);function TDt(){}const _d=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function s2e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),CDt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(ADt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,_d[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,_d[m|g<<1].forEach(b);for(_d[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,_d[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,_d[m|g<<1|y<<2|v<<3].forEach(b);_d[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,_d[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,_d[y<<2|v<<3].forEach(b);_d[y<<3].forEach(b);function b(E){var _=[E[0][0]+h,E[0][1]+p],w=[E[1][0]+h,E[1][1]+p],S=o(_),C=o(w),A,D;(A=d[S])?(D=f[C])?(delete d[A.end],delete f[D.start],A===D?(A.ring.push(w),c(A.ring)):f[A.start]=d[D.end]={start:A.start,end:D.end,ring:A.ring.concat(D.ring)}):(delete d[A.end],A.ring.push(w),d[A.end=C]=A):(A=f[C])?(D=d[S])?(delete f[A.start],delete d[D.end],A===D?(A.ring.push(w),c(A.ring)):f[D.start]=d[A.end]={start:D.start,end:A.end,ring:D.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(_),f[A.start=S]=A):f[S]=d[C]={start:S,end:C,ring:[_,w]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:TDt,r):n===a},r}function CDt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function ADt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=DDt(e,t[n]))return i;return 0}function DDt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(IDt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function IDt(e,t,n){var r;return NDt(e,t,n)&&kDt(e[r=+(e[0]===t[0])],n[r],t[r])}function NDt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function kDt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function o2e(e,t,n){return function(r){var i=Mf(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?gm(s,o,e):a/(e+1);return Eu(s+u,o,u)}}function GW(e){Oe.call(this,null,e)}GW.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};dt(GW,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Bo,s=s2e().smooth(e.smooth!==!1),o=e.thresholds||RDt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ue(o)?o:o(c.values));PDt(f,c,l,e),f.forEach(d=>{u.push(cO(l,sr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function RDt(e,t,n){const r=o2e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>pc(t(i).values)))}function PDt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(yn(i)&&(i=i(n,r)),yn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Wn(i)?i:i[0])||1,a=(Wn(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(a2e(t,o,a,u,l))}function a2e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Fse(e,t,n){const r=e>=0?e:dq(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function w6(e){return yn(e)?e:jo(+e)}function u2e(){var e=u=>u[0],t=u=>u[1],n=B_,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Fse(r[0],u,e)>>o,f=Fse(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(E=>{const _=d+(+e(E)>>o),w=h+(+t(E)>>o);_>=0&&_<p&&w>=0&&w<m&&(g[_+w*p]+=+n(E))}),c>0&&f>0?(S1(p,m,g,y,c),T1(p,m,y,g,f),S1(p,m,g,y,c),T1(p,m,y,g,f),S1(p,m,g,y,c),T1(p,m,y,g,f)):c>0?(S1(p,m,g,y,c),S1(p,m,y,g,c),S1(p,m,g,y,c),v=y):f>0&&(T1(p,m,g,y,f),T1(p,m,y,g,f),T1(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/Yme(v);for(let E=0,_=p*m;E<_;++E)v[E]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=w6(u),a):e},a.y=function(u){return arguments.length?(t=w6(u),a):t},a.weight=function(u){return arguments.length?(n=w6(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=gt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function S1(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function T1(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function YW(e){Oe.call(this,null,e)}YW.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ODt=["x","y","weight","size","cellSize","bandwidth"];function l2e(e,t){return ODt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}dt(YW,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=MDt(r,e.groupby),s=(e.groupby||[]).map(Ci),o=l2e(u2e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>sr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function MDt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function KW(e){Oe.call(this,null,e)}KW.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};dt(KW,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=s2e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||o2e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=l2e(u2e(),e)(i,!0),u=a2e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ue(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(sr),n}});const f9="Feature",XW="FeatureCollection",$Dt="MultiPoint";function QW(e){Oe.call(this,null,e)}QW.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};dt(QW,Oe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Bo,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Ro(a))||s&&t.modified(Ro(s))||o&&t.modified(Ro(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:f9,geometry:{type:$Dt,coordinates:r}})),this.value={type:XW,features:n}}});function JW(e){Oe.call(this,null,e)}JW.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};dt(JW,Oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Bo,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=i2e(e.projection),n.materialize().reflow()):o=i===Bo||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=FDt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function FDt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ZW(e){Oe.call(this,null,e)}ZW.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};dt(ZW,Oe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function eG(e){Oe.call(this,null,e)}eG.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};dt(eG,Oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=LDt(i2e(e.projection),e.field||_l("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function LDt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function tG(e){Oe.call(this,[],e),this.generator=iet()}tG.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};dt(tG,Oe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)yn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(lxe(n[0],i)):t.add.push(sr(i)),n[0]=i,t}});function nG(e){Oe.call(this,null,e)}nG.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};dt(nG,Oe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Bo,s=jDt(e.opacity,e),o=BDt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?pc(n.map(l=>pc(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=gn({},l,u);r||(f.$max=pc(c.values||[])),l[a]=zDt(c,f,o.dep?o:jo(o(f)),s.dep?s:jo(s(f)))}),t.reflow(!0).modifies(a)}});function BDt(e,t){let n;return yn(e)?(n=r=>ym(e(r,t)),n.dep=c2e(e)):n=jo(ym(e||"#888")),n}function jDt(e,t){let n;return yn(e)?(n=r=>e(r,t),n.dep=c2e(e)):e?n=jo(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function c2e(e){if(!yn(e))return!1;const t=Cc(Ro(e));return t.$x||t.$y||t.$value||t.$max}function zDt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Sp,d=sm(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const E=n(t);m[y+0]=E.r,m[y+1]=E.g,m[y+2]=E.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function f2e(e){Oe.call(this,null,e),this.modified(!0)}dt(f2e,Oe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=VDt(e.type),c9.forEach(r=>{e[r]!=null&&Lse(n,r,e[r])})):c9.forEach(r=>{e.modified(r)&&Lse(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&UDt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function UDt(e,t){const n=HDt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function VDt(e){const t=WW((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function Lse(e,t,n){yn(e[t])&&e[t](n)}function HDt(e){return e=gt(e),e.length===1?e[0]:{type:XW,features:e.reduce((t,n)=>t.concat(qDt(n)),[])}}function qDt(e){return e.type===XW?e.features:gt(e).filter(t=>t!=null).map(t=>t.type===f9?t:{type:f9,geometry:t})}const WDt=Object.freeze(Object.defineProperty({__proto__:null,contour:KW,geojson:QW,geopath:JW,geopoint:ZW,geoshape:eG,graticule:tG,heatmap:nG,isocontour:GW,kde2d:YW,projection:f2e},Symbol.toStringTag,{value:"Module"})),Bse={center:tZe,collide:_Ze,nbody:kZe,link:wZe,x:RZe,y:PZe},jw="forces",d9=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],GDt=["static","iterations"],d2e=["x","y","vx","vy"];function rG(e){Oe.call(this,null,e)}rG.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:d2e}]};dt(rG,Oe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(d9),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&h2e(n,e,0,t)):(this.value=n=KDt(t.source,e),n.on("tick",YDt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(GDt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==jw||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(d2e)}});function YDt(e,t){return()=>e.touch(t).run()}function KDt(e,t){const n=NZe(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),h2e(n,t,!0).on("end",()=>s=!0)}function h2e(e,t,n,r){var i=gt(t.forces),s,o,a,u;for(s=0,o=d9.length;s<o;++s)a=d9[s],a!==jw&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=jw+s,a=n||t.modified(jw,s)?QDt(i[s]):r&&XDt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(jw+s,null);return e.numForces=i.length,e}function XDt(e,t){var n,r;for(n in e)if(yn(r=e[n])&&t.modified(Ro(r)))return 1;return 0}function QDt(e){var t,n;Ut(Bse,e.force)||Le("Unrecognized force: "+e.force),t=Bse[e.force]();for(n in e)yn(t[n])&&JDt(t[n],e[n],e);return t}function JDt(e,t,n){e(yn(t)?r=>t(r,n):t)}const ZDt=Object.freeze(Object.defineProperty({__proto__:null,force:rG},Symbol.toStringTag,{value:"Module"}));function h9(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function iG(e){Oe.call(this,null,e)}iG.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const eIt=e=>e.values;dt(iG,Oe,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&lO(o.data)&&i.rem.push(o.data)}),this.value=s=mU({values:gt(e.keys).reduce((o,a)=>(o.key(a),o),tIt()).entries(i.source)},eIt),n&&s.each(o=>{o.children&&(o=sr(o.data),i.add.push(o),i.source.push(o))}),h9(s,Bt,Bt)),i.source.root=s,i}});function tIt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Uh(e){Oe.call(this,null,e)}const nIt=(e,t)=>e.parent===t.parent?1:2;dt(Uh,Oe,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(By(e.sort,o=>o.data)),rIt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?nIt:B_);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>iIt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function rIt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function iIt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const p9=["x","y","r","depth","children"];function sG(e){Uh.call(this,e)}sG.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:p9.length,default:p9}]};dt(sG,Uh,{layout:Dtt,params:["radius","size","padding"],fields:p9});const m9=["x0","y0","x1","y1","depth","children"];function oG(e){Uh.call(this,e)}oG.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:m9.length,default:m9}]};dt(oG,Uh,{layout:Itt,params:["size","round","padding"],fields:m9});function aG(e){Oe.call(this,null,e)}aG.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};dt(aG,Oe,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?h9(fte().id(e.key).parentId(e.parentKey)(i.source),e.key,El):h9(fte()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const jse={tidy:Btt,cluster:Qet},g9=["x","y","depth","children"];function uG(e){Uh.call(this,e)}uG.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:g9.length,default:g9}]};dt(uG,Uh,{layout(e){const t=e||"tidy";if(Ut(jse,t))return jse[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:g9});function lG(e){Oe.call(this,[],e)}lG.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};dt(lG,Oe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Bt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Bt(a)]&&s[Bt(u)]&&i.add.push(sr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Bt(o)]=1),n.forEach(o=>{(s[Bt(o.source)]||s[Bt(o.target)])&&i.mod.push(o)})),i}});const zse={binary:ztt,dice:KT,slice:XP,slicedice:Utt,squarify:dye,resquarify:Vtt},y9=["x0","y0","x1","y1","depth","children"];function cG(e){Uh.call(this,e)}cG.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:y9.length,default:y9}]};dt(cG,Uh,{layout(){const e=jtt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ut(zse,t)?e.tile(zse[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:y9});const sIt=Object.freeze(Object.defineProperty({__proto__:null,nest:iG,pack:sG,partition:oG,stratify:aG,tree:uG,treelinks:lG,treemap:cG},Symbol.toStringTag,{value:"Module"})),x6=4278190080;function oIt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function aIt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=sm(s,o).getContext("2d"),l=sm(s,o).getContext("2d"),c=a&&sm(s,o).getContext("2d");n.forEach(C=>JD(u,C,!1)),JD(l,t,!1),a&&JD(c,t,!0);const f=S6(u,s,o),d=S6(l,s,o),h=a&&S6(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,E,_,w,S;for(y=0;y<o;++y)for(g=0;g<s;++g)E=y*s+g,_=f[E]&x6,S=d[E]&x6,w=a&&h[E]&x6,(_||w||S)&&(v=e(g),b=e(y),!i&&(_||S)&&p.set(v,b),a&&(_||w)&&m.set(v,b));return[p,m]}function S6(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function JD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>JD(e,s.items,n))}):Lu[r].draw(e,{items:n?t.map(uIt):t})}function uIt(e){const t=cO(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ed=5,Yo=31,eT=32,pp=new Uint32Array(eT+1),Zl=new Uint32Array(eT+1);Zl[0]=0;pp[0]=~Zl[0];for(let e=1;e<=eT;++e)Zl[e]=Zl[e-1]<<1|1,pp[e]=~Zl[e];function lIt(e,t){const n=new Uint32Array(~~((e*t+eT)/eT));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Ed]&1<<(a&Yo)},set:(s,o)=>{const a=o*e+s;r(a>>>Ed,1<<(a&Yo))},clear:(s,o)=>{const a=o*e+s;i(a>>>Ed,~(1<<(a&Yo)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Ed,h=f>>>Ed,d===h){if(n[d]&pp[c&Yo]&Zl[(f&Yo)+1])return!0}else{if(n[d]&pp[c&Yo]||n[h]&Zl[(f&Yo)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ed,d=c>>>Ed,f===d)r(f,pp[l&Yo]&Zl[(c&Yo)+1]);else for(r(f,pp[l&Yo]),r(d,Zl[(c&Yo)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ed,d=c>>>Ed,f===d)i(f,Zl[l&Yo]|pp[(c&Yo)+1]);else for(i(f,Zl[l&Yo]),i(d,pp[(c&Yo)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function cIt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>lIt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function fIt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Cu.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function Vk(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Lp(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function dIt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!Vk(p,m,d,h,i,s)&&!Lp(e,p,m,h,d,g,o,a)&&!Lp(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Lp(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Cu.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,E,_,w,S,C,A,D,I,O,R,M,F,P,j,z;for(let V=0;V<f;++V){for(v=c[V].x,E=c[V].y,b=c[V].x2===void 0?v:c[V].x2,_=c[V].y2===void 0?E:c[V].y2,v>b&&(z=v,v=b,b=z),E>_&&(z=E,E=_,_=z),D=e(v),O=e(b),I=~~((D+O)/2),R=e(E),F=e(_),M=~~((R+F)/2),C=I;C>=D;--C)for(A=M;A>=R;--A)j=u(C,A,p,h,d),j&&([l.x,l.y,p,m]=j);for(C=I;C<=O;++C)for(A=M;A<=F;++A)j=u(C,A,p,h,d),j&&([l.x,l.y,p,m]=j);!m&&!n&&(P=Math.abs(b-v+_-E),w=(v+b)/2,S=(E+_)/2,P>=y&&!Vk(w,S,h,d,i,s)&&!Lp(e,w,S,d,h,d,o,null)&&(y=P,l.x=w,l.y=S,g=!0))}return m||g?(w=h/2,S=d/2,o.setRange(e(l.x-w),e(l.y-S),e(l.x+w),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const hIt=[-1,-1,1,1],pIt=[-1,1,-1,1];function mIt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Cu.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,E,_,w,S,C,A,D,I,O,R,M;for(let F=0;F<f;++F){for(b=c[F].x,_=c[F].y,E=c[F].x2===void 0?b:c[F].x2,w=c[F].y2===void 0?_:c[F].y2,p.push([e((b+E)/2),e((_+w)/2)]);p.length;)if([A,D]=p.pop(),!(o.get(A,D)||a.get(A,D)||u.get(A,D))){u.set(A,D);for(let P=0;P<4;++P)S=A+hIt[P],C=D+pIt[P],u.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(A),C=e.invert(D),I=m,O=s,!Vk(S,C,h,d,i,s)&&!Lp(e,S,C,d,h,I,o,a)&&!Lp(e,S,C,d,h,d,o,null)){for(;O-I>=1;)R=(I+O)/2,Lp(e,S,C,d,h,R,o,a)?O=R:I=R;I>m&&(l.x=S,l.y=C,m=I,g=!0)}}!g&&!n&&(M=Math.abs(E-b+w-_),S=(b+E)/2,C=(_+w)/2,M>=v&&!Vk(S,C,h,d,i,s)&&!Lp(e,S,C,d,h,d,o,null)&&(v=M,l.x=S,l.y=C,y=!0))}return g||y?(S=h/2,C=d/2,o.setRange(e(l.x-S),e(l.y-C),e(l.x+S),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const gIt=["right","center","left"],yIt=["bottom","middle","top"];function vIt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,E,_,w,S,C,A,D,I;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,E=S-f/2,_=S+f/2,C=e(v),D=e(E),I=e(_),!d)if(Use(C,C,D,I,o,a,v,v,E,_,c,m))d=Cu.width(l.datum,l.datum.text);else continue;if(w=v+y*d*h/2,v=w-d/2,b=w+d/2,C=e(v),A=e(b),Use(C,A,D,I,o,a,v,b,E,_,c,m))return l.x=h?h*y<0?b:v:w,l.y=p?p*y<0?_:E:S,l.align=gIt[h*y+1],l.baseline=yIt[p*y+1],o.setRange(C,D,A,I),!0}return!1}}function Use(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const T6=0,C6=4,A6=8,D6=0,I6=1,N6=2,bIt={"top-left":T6+D6,top:T6+I6,"top-right":T6+N6,left:C6+D6,middle:C6+I6,right:C6+N6,"bottom-left":A6+D6,bottom:A6+I6,"bottom-right":A6+N6},_It={naive:fIt,"reduced-search":dIt,floodfill:mIt};function EIt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=wIt(r,f),h=xIt(i,f),p=SIt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=TIt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let E=-1,_=-1;const w=e.map(D=>{const I=v?Cu.width(D,D.text):void 0;return E=Math.max(E,I),_=Math.max(_,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(D),textWidth:I}});l=l===null||l===1/0?Math.max(E,_)+Math.max(...r):l;const S=cIt(t[0],t[1],l);let C;if(!b){n&&w.sort((O,R)=>n(O.datum,R.datum));let D=!1;for(let O=0;O<h.length&&!D;++O)D=h[O]===5||d[O]<0;const I=(p&&o||g)&&e.map(O=>O.datum);C=s.length||I?aIt(S,I||[],s,D,g):oIt(S,o&&w)}const A=g?_It[c](S,C,o,u):vIt(S,C,h,d);return w.forEach(D=>D.opacity=+A(D)),w}function wIt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function xIt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=bIt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function SIt(e){return e&&e.mark&&e.mark.marktype}function TIt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const v9=["x","y","opacity","align","baseline"],p2e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function fG(e){Oe.call(this,null,e)}fG.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:p2e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:v9.length,default:v9}]};dt(fG,Oe,{transform(e,t){function n(s){const o=e[s];return yn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||v9;return EIt(t.materialize(t.SOURCE).source||[],e.size,e.sort,gt(e.offset==null?1:e.offset),gt(e.anchor||p2e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const CIt=Object.freeze(Object.defineProperty({__proto__:null,label:fG},Symbol.toStringTag,{value:"Module"}));function m2e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function dG(e){Oe.call(this,null,e)}dG.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};dt(dG,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=m2e(r,e.groupby),s=(e.groupby||[]).map(Ci),o=s.length,a=e.as||[Ci(e.x),Ci(e.y)],u=[];i.forEach(l=>{Axe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(sr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const b9={constant:Sq,linear:Tq,log:xxe,exp:Sxe,pow:Txe,quad:Cq,poly:Cxe},AIt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function hG(e){Oe.call(this,null,e)}hG.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(b9)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};dt(hG,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=m2e(r,e.groupby),s=(e.groupby||[]).map(Ci),o=e.method||"linear",a=e.order==null?3:e.order,u=AIt(o,a),l=e.as||[Ci(e.x),Ci(e.y)],c=b9[o],f=[];let d=e.extent;Ut(b9,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(sr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Mf(h,e.x),y=v=>{const b={};for(let E=0;E<s.length;++E)b[s[E]]=h.dims[E];b[l[0]]=v[0],b[l[1]]=v[1],f.push(sr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):yO(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const DIt=Object.freeze(Object.defineProperty({__proto__:null,loess:dG,regression:hG},Symbol.toStringTag,{value:"Module"}));function pG(e){Oe.call(this,null,e)}pG.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const IIt=[-1e5,-1e5,1e5,1e5];dt(pG,Oe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:IIt;const s=this.value=sU.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!kIt(u)?NIt(u):null}return t.reflow(e.modified()).modifies(n)}});function NIt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function kIt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const RIt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:pG},Symbol.toStringTag,{value:"Module"}));var k6=Math.PI/180,zw=64,ZD=2048;function PIt(){var e=[256,256],t,n,r,i,s,o,a,u=g2e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(sm()),m=BIt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],E=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:o(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,S)=>S.size-w.size);++v<y;){var _=E[v];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,OIt(p,_,E,v),_.hasText&&h(m,_,g)&&(b.push(_),g?$It(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(zw<<5)/m,p.height=ZD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),E=u(e),_=c()<.5?1:-1,w=-_,S,C,A;(S=E(w+=_))&&(C=~~S[0],A=~~S[1],!(Math.min(Math.abs(C),Math.abs(A))>=b));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!MIt(m,p,e[0]))&&(!g||FIt(m,g))){for(var D=m.sprite,I=m.width>>5,O=e[0]>>5,R=m.x-(I<<4),M=R&127,F=32-M,P=m.y1-m.y0,j=(m.y+m.y0)*O+(R>>5),z,V=0;V<P;V++){z=0;for(var $=0;$<=I;$++)p[j+$]|=z<<F|($<I?(z=D[V*I+$])>>>M:0);j+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=_g(p),f):n},f.fontStyle=function(p){return arguments.length?(i=_g(p),f):i},f.fontWeight=function(p){return arguments.length?(s=_g(p),f):s},f.rotate=function(p){return arguments.length?(o=_g(p),f):o},f.text=function(p){return arguments.length?(t=_g(p),f):t},f.spiral=function(p){return arguments.length?(u=jIt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=_g(p),f):r},f.padding=function(p){return arguments.length?(a=_g(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function OIt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(zw<<5)/s,ZD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*k6),g=Math.cos(t.rotate*k6),y=c*g,v=c*m,b=d*g,E=d*m;c=Math.max(Math.abs(y+E),Math.abs(y-E))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=zw<<5&&(o=0,a+=u,u=0),a+d>=ZD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*k6),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var _=i.getImageData(0,0,(zw<<5)/s,ZD/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),D=_[(a+p)*(zw<<5)+(o+h)<<2]?1<<31-h%32:0;w[A]|=D,S|=D}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function MIt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function $It(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function FIt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function g2e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function LIt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function BIt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function _g(e){return typeof e=="function"?e:function(){return e}}var jIt={archimedean:g2e,rectangular:LIt};const y2e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],zIt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function mG(e){Oe.call(this,PIt(),e)}mG.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:y2e}]};dt(mG,Oe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return yn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||zIt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||y2e;let a=e.fontSize||14,u;if(yn(a)?u=e.fontSizeRange:a=jo(a),u){const p=a,m=Jn("sqrt")().domain(Mf(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(xl).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const UIt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:mG},Symbol.toStringTag,{value:"Module"})),VIt=e=>new Uint8Array(e),HIt=e=>new Uint16Array(e),Mx=e=>new Uint32Array(e);function qIt(){let e=8,t=[],n=Mx(0),r=OA(0,e),i=OA(0,e);return{data:()=>t,seen:()=>n=WIt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=OA(s,e,r),i=OA(s,e))}}}function WIt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function OA(e,t,n){const r=(t<257?VIt:t<65537?HIt:Mx)(e);return n&&r.set(n),r}function Vse(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Hse(){let e=Mx(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Mx(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=GIt(h,d),c)p=t,m=e,t=Array(c+f),e=Mx(c+f),YIt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[YWe(u,a[0],0,l),mm(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function GIt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),QWe(e,t)}function YIt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function gG(e){Oe.call(this,qIt(),e),this._indices=null,this._dims=null}gG.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};dt(gG,Oe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Hse()),s.push(Vse(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,E,_,w,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},v=t.mod,_=0,w=v.length;_<w;++_)E[v[_]._index]=1;for(_=0;_<h;++_)S=r[_],(!o[_]||e.modified("fields",_)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=Hse(),p[y]=m=g.insert(S,t.source,0)),o[_]=Vse(g,_,i[_]).onAdd(m,u));for(_=0,w=a.data().length;_<w;++_)b[_]||(l[_]!==u[_]?f.push(_):E[_]&&u[_]!==c&&d.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function yG(e){Oe.call(this,null,e)}yG.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};dt(yG,Oe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const KIt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:gG,resolvefilter:yG},Symbol.toStringTag,{value:"Module"})),XIt="RawCode",Q0="Literal",QIt="Property",JIt="Identifier",ZIt="ArrayExpression",eNt="BinaryExpression",v2e="CallExpression",tNt="ConditionalExpression",nNt="LogicalExpression",rNt="MemberExpression",iNt="ObjectExpression",sNt="UnaryExpression";function Oc(e){this.type=e}Oc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=oNt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function oNt(e){switch(e.type){case ZIt:return e.elements;case eNt:case nNt:return[e.left,e.right];case v2e:return[e.callee].concat(e.arguments);case tNt:return[e.test,e.consequent,e.alternate];case rNt:return[e.object,e.property];case iNt:return e.properties;case QIt:return[e.key,e.value];case sNt:return[e.argument];case JIt:case Q0:case XIt:default:return[]}}var rd,Rt,Fe,Oo,hr,MO=1,O2=2,J0=3,rg=4,$O=5,Uy=6,Da=7,M2=8,aNt=9;rd={};rd[MO]="Boolean";rd[O2]="<end>";rd[J0]="Identifier";rd[rg]="Keyword";rd[$O]="Null";rd[Uy]="Numeric";rd[Da]="Punctuator";rd[M2]="String";rd[aNt]="RegularExpression";var uNt="ArrayExpression",lNt="BinaryExpression",cNt="CallExpression",fNt="ConditionalExpression",b2e="Identifier",dNt="Literal",hNt="LogicalExpression",pNt="MemberExpression",mNt="ObjectExpression",gNt="Property",yNt="UnaryExpression",Ss="Unexpected token %0",vNt="Unexpected number",bNt="Unexpected string",_Nt="Unexpected identifier",ENt="Unexpected reserved word",wNt="Unexpected end of input",_9="Invalid regular expression",R6="Invalid regular expression: missing /",_2e="Octal literals are not allowed in strict mode.",xNt="Duplicate data property in object literal not allowed in strict mode",Xs="ILLEGAL",tT="Disabled.",SNt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),TNt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function FO(e,t){if(!e)throw new Error("ASSERT: "+t)}function Id(e){return e>=48&&e<=57}function vG(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function $x(e){return"01234567".indexOf(e)>=0}function CNt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function nT(e){return e===10||e===13||e===8232||e===8233}function $2(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&SNt.test(String.fromCharCode(e))}function Hk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&TNt.test(String.fromCharCode(e))}const ANt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function E2e(){for(;Fe<Oo;){const e=Rt.charCodeAt(Fe);if(CNt(e)||nT(e))++Fe;else break}}function E9(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Fe<Oo&&vG(Rt[Fe])?(r=Rt[Fe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Xn({},Ss,Xs);return String.fromCharCode(i)}function DNt(){var e,t,n,r;for(e=Rt[Fe],t=0,e==="}"&&Xn({},Ss,Xs);Fe<Oo&&(e=Rt[Fe++],!!vG(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Xn({},Ss,Xs),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function w2e(){var e,t;for(e=Rt.charCodeAt(Fe++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt(Fe)!==117&&Xn({},Ss,Xs),++Fe,e=E9("u"),(!e||e==="\\"||!$2(e.charCodeAt(0)))&&Xn({},Ss,Xs),t=e);Fe<Oo&&(e=Rt.charCodeAt(Fe),!!Hk(e));)++Fe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt(Fe)!==117&&Xn({},Ss,Xs),++Fe,e=E9("u"),(!e||e==="\\"||!Hk(e.charCodeAt(0)))&&Xn({},Ss,Xs),t+=e);return t}function INt(){var e,t;for(e=Fe++;Fe<Oo;){if(t=Rt.charCodeAt(Fe),t===92)return Fe=e,w2e();if(Hk(t))++Fe;else break}return Rt.slice(e,Fe)}function NNt(){var e,t,n;return e=Fe,t=Rt.charCodeAt(Fe)===92?w2e():INt(),t.length===1?n=J0:ANt.hasOwnProperty(t)?n=rg:t==="null"?n=$O:t==="true"||t==="false"?n=MO:n=J0,{type:n,value:t,start:e,end:Fe}}function P6(){var e=Fe,t=Rt.charCodeAt(Fe),n,r=Rt[Fe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Fe,{type:Da,value:String.fromCharCode(t),start:e,end:Fe};default:if(n=Rt.charCodeAt(Fe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Fe+=2,{type:Da,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Fe};case 33:case 61:return Fe+=2,Rt.charCodeAt(Fe)===61&&++Fe,{type:Da,value:Rt.slice(e,Fe),start:e,end:Fe}}}if(o=Rt.substr(Fe,4),o===">>>=")return Fe+=4,{type:Da,value:o,start:e,end:Fe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Fe+=3,{type:Da,value:s,start:e,end:Fe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Fe+=2,{type:Da,value:i,start:e,end:Fe};if(i==="//"&&Xn({},Ss,Xs),"<>=!+-*%&|^/".indexOf(r)>=0)return++Fe,{type:Da,value:r,start:e,end:Fe};Xn({},Ss,Xs)}function kNt(e){let t="";for(;Fe<Oo&&vG(Rt[Fe]);)t+=Rt[Fe++];return t.length===0&&Xn({},Ss,Xs),$2(Rt.charCodeAt(Fe))&&Xn({},Ss,Xs),{type:Uy,value:parseInt("0x"+t,16),start:e,end:Fe}}function RNt(e){let t="0"+Rt[Fe++];for(;Fe<Oo&&$x(Rt[Fe]);)t+=Rt[Fe++];return($2(Rt.charCodeAt(Fe))||Id(Rt.charCodeAt(Fe)))&&Xn({},Ss,Xs),{type:Uy,value:parseInt(t,8),octal:!0,start:e,end:Fe}}function qse(){var e,t,n;if(n=Rt[Fe],FO(Id(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Fe,e="",n!=="."){if(e=Rt[Fe++],n=Rt[Fe],e==="0"){if(n==="x"||n==="X")return++Fe,kNt(t);if($x(n))return RNt(t);n&&Id(n.charCodeAt(0))&&Xn({},Ss,Xs)}for(;Id(Rt.charCodeAt(Fe));)e+=Rt[Fe++];n=Rt[Fe]}if(n==="."){for(e+=Rt[Fe++];Id(Rt.charCodeAt(Fe));)e+=Rt[Fe++];n=Rt[Fe]}if(n==="e"||n==="E")if(e+=Rt[Fe++],n=Rt[Fe],(n==="+"||n==="-")&&(e+=Rt[Fe++]),Id(Rt.charCodeAt(Fe)))for(;Id(Rt.charCodeAt(Fe));)e+=Rt[Fe++];else Xn({},Ss,Xs);return $2(Rt.charCodeAt(Fe))&&Xn({},Ss,Xs),{type:Uy,value:parseFloat(e),start:t,end:Fe}}function PNt(){var e="",t,n,r,i,s=!1;for(t=Rt[Fe],FO(t==="'"||t==='"',"String literal must starts with a quote"),n=Fe,++Fe;Fe<Oo;)if(r=Rt[Fe++],r===t){t="";break}else if(r==="\\")if(r=Rt[Fe++],!r||!nT(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[Fe]==="{"?(++Fe,e+=DNt()):e+=E9(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:$x(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Fe<Oo&&$x(Rt[Fe])&&(s=!0,i=i*8+"01234567".indexOf(Rt[Fe++]),"0123".indexOf(r)>=0&&Fe<Oo&&$x(Rt[Fe])&&(i=i*8+"01234567".indexOf(Rt[Fe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[Fe]===`
`&&++Fe;else{if(nT(r.charCodeAt(0)))break;e+=r}return t!==""&&Xn({},Ss,Xs),{type:M2,value:e,octal:s,start:n,end:Fe}}function ONt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Xn({},_9)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Xn({},_9)}try{return new RegExp(e,t)}catch{return null}}function MNt(){var e,t,n,r,i;for(e=Rt[Fe],FO(e==="/","Regular expression literal must start with a slash"),t=Rt[Fe++],n=!1,r=!1;Fe<Oo;)if(e=Rt[Fe++],t+=e,e==="\\")e=Rt[Fe++],nT(e.charCodeAt(0))&&Xn({},R6),t+=e;else if(nT(e.charCodeAt(0)))Xn({},R6);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Xn({},R6),i=t.substr(1,t.length-2),{value:i,literal:t}}function $Nt(){var e,t,n;for(t="",n="";Fe<Oo&&(e=Rt[Fe],!!Hk(e.charCodeAt(0)));)++Fe,e==="\\"&&Fe<Oo?Xn({},Ss,Xs):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Xn({},_9,n),{value:n,literal:t}}function FNt(){var e,t,n,r;return hr=null,E2e(),e=Fe,t=MNt(),n=$Nt(),r=ONt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Fe}}function LNt(e){return e.type===J0||e.type===rg||e.type===MO||e.type===$O}function x2e(){if(E2e(),Fe>=Oo)return{type:O2,start:Fe,end:Fe};const e=Rt.charCodeAt(Fe);return $2(e)?NNt():e===40||e===41||e===59?P6():e===39||e===34?PNt():e===46?Id(Rt.charCodeAt(Fe+1))?qse():P6():Id(e)?qse():P6()}function Ma(){const e=hr;return Fe=e.end,hr=x2e(),Fe=e.end,e}function S2e(){const e=Fe;hr=x2e(),Fe=e}function BNt(e){const t=new Oc(uNt);return t.elements=e,t}function Wse(e,t,n){const r=new Oc(e==="||"||e==="&&"?hNt:lNt);return r.operator=e,r.left=t,r.right=n,r}function jNt(e,t){const n=new Oc(cNt);return n.callee=e,n.arguments=t,n}function zNt(e,t,n){const r=new Oc(fNt);return r.test=e,r.consequent=t,r.alternate=n,r}function bG(e){const t=new Oc(b2e);return t.name=e,t}function Uw(e){const t=new Oc(dNt);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Gse(e,t,n){const r=new Oc(pNt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function UNt(e){const t=new Oc(mNt);return t.properties=e,t}function Yse(e,t,n){const r=new Oc(gNt);return r.key=t,r.value=n,r.kind=e,r}function VNt(e,t){const n=new Oc(yNt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Xn(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(FO(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Fe,n.description=i,n}function LO(e){e.type===O2&&Xn(e,wNt),e.type===Uy&&Xn(e,vNt),e.type===M2&&Xn(e,bNt),e.type===J0&&Xn(e,_Nt),e.type===rg&&Xn(e,ENt),Xn(e,Ss,e.value)}function Mo(e){const t=Ma();(t.type!==Da||t.value!==e)&&LO(t)}function Ur(e){return hr.type===Da&&hr.value===e}function O6(e){return hr.type===rg&&hr.value===e}function HNt(){const e=[];for(Fe=hr.start,Mo("[");!Ur("]");)Ur(",")?(Ma(),e.push(null)):(e.push(Z0()),Ur("]")||Mo(","));return Ma(),BNt(e)}function Kse(){Fe=hr.start;const e=Ma();return e.type===M2||e.type===Uy?(e.octal&&Xn(e,_2e),Uw(e)):bG(e.value)}function qNt(){var e,t,n,r;if(Fe=hr.start,e=hr,e.type===J0)return n=Kse(),Mo(":"),r=Z0(),Yse("init",n,r);if(e.type===O2||e.type===Da)LO(e);else return t=Kse(),Mo(":"),r=Z0(),Yse("init",t,r)}function WNt(){var e=[],t,n,r,i={},s=String;for(Fe=hr.start,Mo("{");!Ur("}");)t=qNt(),t.key.type===b2e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Xn({},xNt):i[r]=!0,e.push(t),Ur("}")||Mo(",");return Mo("}"),UNt(e)}function GNt(){Mo("(");const e=_G();return Mo(")"),e}const YNt={if:1};function KNt(){var e,t,n;if(Ur("("))return GNt();if(Ur("["))return HNt();if(Ur("{"))return WNt();if(e=hr.type,Fe=hr.start,e===J0||YNt[hr.value])n=bG(Ma().value);else if(e===M2||e===Uy)hr.octal&&Xn(hr,_2e),n=Uw(Ma());else{if(e===rg)throw new Error(tT);e===MO?(t=Ma(),t.value=t.value==="true",n=Uw(t)):e===$O?(t=Ma(),t.value=null,n=Uw(t)):Ur("/")||Ur("/=")?(n=Uw(FNt()),S2e()):LO(Ma())}return n}function XNt(){const e=[];if(Mo("("),!Ur(")"))for(;Fe<Oo&&(e.push(Z0()),!Ur(")"));)Mo(",");return Mo(")"),e}function QNt(){Fe=hr.start;const e=Ma();return LNt(e)||LO(e),bG(e.value)}function JNt(){return Mo("."),QNt()}function ZNt(){Mo("[");const e=_G();return Mo("]"),e}function ekt(){var e,t,n;for(e=KNt();;)if(Ur("."))n=JNt(),e=Gse(".",e,n);else if(Ur("("))t=XNt(),e=jNt(e,t);else if(Ur("["))n=ZNt(),e=Gse("[",e,n);else break;return e}function Xse(){const e=ekt();if(hr.type===Da&&(Ur("++")||Ur("--")))throw new Error(tT);return e}function eI(){var e,t;if(hr.type!==Da&&hr.type!==rg)t=Xse();else{if(Ur("++")||Ur("--"))throw new Error(tT);if(Ur("+")||Ur("-")||Ur("~")||Ur("!"))e=Ma(),t=eI(),t=VNt(e.value,t);else{if(O6("delete")||O6("void")||O6("typeof"))throw new Error(tT);t=Xse()}}return t}function Qse(e){let t=0;if(e.type!==Da&&e.type!==rg)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function tkt(){var e,t,n,r,i,s,o,a,u,l;if(e=hr,u=eI(),r=hr,i=Qse(r),i===0)return u;for(r.prec=i,Ma(),t=[e,hr],o=eI(),s=[u,r,o];(i=Qse(hr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Wse(a,u,o),s.push(n);r=Ma(),r.prec=i,s.push(r),t.push(hr),n=eI(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Wse(s[l-1].value,s[l-2],n),l-=2;return n}function Z0(){var e,t,n;return e=tkt(),Ur("?")&&(Ma(),t=Z0(),Mo(":"),n=Z0(),e=zNt(e,t,n)),e}function _G(){const e=Z0();if(Ur(","))throw new Error(tT);return e}function EG(e){Rt=e,Fe=0,Oo=Rt.length,hr=null,S2e();const t=_G();if(hr.type!==O2)throw new Error("Unexpect token after expression.");return t}var T2e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function C2e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function nkt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function A2e(e){e=e||{};const t=e.allowed?Cc(e.allowed):{},n=e.forbidden?Cc(e.forbidden):{},r=e.constants||T2e,i=(e.functions||C2e)(f),s=e.globalvar,o=e.fieldvar,a=yn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(yt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ut(n,m)?Le("Illegal identifier: "+m):Ut(r,m)?r[m]:Ut(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[nkt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ut(i,m)&&i[m];return y||Le("Unrecognized function: "+m),yn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Jse=Symbol("vega_selection_getter");function D2e(e){return(!e.getter||!e.getter[Jse])&&(e.getter=_l(e.field),e.getter[Jse]=!0),e.getter}const wG="intersect",Zse="union",rkt="vlMulti",ikt="vlPoint",eoe="or",skt="and",tf="_vgsid_",rT=_l(tf),okt="E",akt="R",ukt="R-E",lkt="R-LE",ckt="R-RE",qk="index:unit";function toe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=D2e(a)(e),rm(o)&&(o=Do(o)),rm(r[s])&&(r[s]=Do(r[s])),Ue(r[s])&&rm(r[s][0])&&(r[s]=r[s].map(Do)),a.type===okt){if(Ue(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===akt){if(!uv(o,r[s]))return!1}else if(a.type===ckt){if(!uv(o,r[s],!0,!1))return!1}else if(a.type===ukt){if(!uv(o,r[s],!1,!1))return!1}else if(a.type===lkt&&!uv(o,r[s],!1,!0))return!1;return!0}function fkt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[qk]&&r[qk].value:void 0,o=n===wG,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=toe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=toe(t,l),o^h)return h;return a&&o}const I2e=x_(rT),dkt=I2e.left,hkt=I2e.right;function pkt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[qk]&&r[qk].value:void 0,o=n===wG,a=rT(t),u=dkt(i,a);if(u===i.length||rT(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(hkt(i,a)-u<s.size)return!1}return!0}function mkt(e,t){return e.map(n=>gn(t.fields?{values:t.fields.map(r=>D2e(r)(n.datum))}:{[tf]:rT(n.datum)},t))}function gkt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,E=0,_,w;E<b;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(_=0,w=c.length;_<w;++_)h=c[_],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=M6[`${y}_union`],m[d]=v(g,gt(f[_]));n&&(g=a[d]||(a[d]=[]),g.push(gt(f).reduce((S,C,A)=>(S[c[A].field]=C,S),{})))}else h=tf,p=rT(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[tf]:p}));if(t=t||Zse,o[tf]?o[tf]=M6[`${tf}_${t}`](...Object.values(o[tf])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(C=>o[S][C]).reduce((C,A)=>C===void 0?A:M6[`${u[S]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const S=r?ikt:rkt;o[S]=t===Zse?{[eoe]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[skt]:s.map(C=>({[eoe]:a[C]}))}}return o}var M6={[`${tf}_union`]:oGe,[`${tf}_intersect`]:iGe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Do(t[0]),r=Do(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Do(t[0]),r=Do(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const ykt=":",vkt="@";function xG(e,t,n,r){t[0].type!==Q0&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&zn(t).value,o="unit",a=vkt+o,u=ykt+i;s===wG&&!Ut(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ut(r,u)||(r[u]=n.getData(i).tuplesRef())}function N2e(e){const t=this.context.data[e];return t?t.values.value:[]}function bkt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function _kt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(El).insert(t)),1}function Ekt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const F2=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},wkt=F2("format"),k2e=F2("timeFormat"),xkt=F2("utcFormat"),Skt=F2("timeParse"),Tkt=F2("utcParse"),MA=new Date(2e3,0,1);function BO(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(MA.setYear(2e3),MA.setMonth(e),MA.setDate(t),k2e.call(this,MA,n))}function Ckt(e){return BO.call(this,e,1,"%B")}function Akt(e){return BO.call(this,e,1,"%b")}function Dkt(e){return BO.call(this,0,2+e,"%A")}function Ikt(e){return BO.call(this,0,2+e,"%a")}const Nkt=":",kkt="@",w9="%",R2e="$";function SG(e,t,n,r){t[0].type!==Q0&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=Nkt+i;if(!Ut(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Rkt(e,t,n,r){t[0].type!==Q0&&Le("First argument to indata must be a string literal."),t[1].type!==Q0&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=kkt+s;Ut(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function ua(e,t,n,r){if(t[0].type===Q0)noe(n,r,t[0].value);else for(e in n.scales)noe(n,r,e)}function noe(e,t,n){const r=w9+n;if(!Ut(t,r))try{t[r]=e.scaleRef(n)}catch{}}function id(e,t){if(yn(e))return e;if(yt(e)){const n=t.scales[e];return n&&iTt(n.value)?n.value:void 0}}function Pkt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ua,n._range=ua,n._scale=ua;const r=i=>"_["+(i.type===Q0?lt(w9+i.value):lt(w9)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function TG(e,t){return function(n,r,i){if(n){const s=id(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Okt=TG("area",FZe),Mkt=TG("bounds",zZe),$kt=TG("centroid",GZe);function Fkt(e,t){const n=id(e,(t||this).context);return n&&n.scale()}function Lkt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function CG(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Bkt(){return CG(this.context.dataflow,"warn",arguments)}function jkt(){return CG(this.context.dataflow,"info",arguments)}function zkt(){return CG(this.context.dataflow,"debug",arguments)}function $6(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function x9(e){const t=ym(e),n=$6(t.r),r=$6(t.g),i=$6(t.b);return .2126*n+.7152*r+.0722*i}function Ukt(e,t){const n=x9(e),r=x9(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Vkt(){const e=[].slice.call(arguments);return e.unshift({}),gn(...e)}function P2e(e,t){return e===t||e!==e&&t!==t?!0:Ue(e)?Ue(t)&&e.length===t.length?Hkt(e,t):!1:vt(e)&&vt(t)?O2e(e,t):!1}function Hkt(e,t){for(let n=0,r=e.length;n<r;++n)if(!P2e(e[n],t[n]))return!1;return!0}function O2e(e,t){for(const n in e)if(!P2e(e[n],t[n]))return!1;return!0}function roe(e){return t=>O2e(e,t)}function qkt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?El:Ue(n)||lO(n)?n:roe(n),c.remove(f)),t&&c.insert(t),r&&(f=roe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Wkt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Gkt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const ioe={};function Ykt(e,t){const n=ioe[t]||(ioe[t]=_l(t));return Ue(e)?e.map(n):n(e)}function AG(e){return Ue(e)||ArrayBuffer.isView(e)?e:null}function DG(e){return AG(e)||(yt(e)?e:null)}function Kkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return AG(e).join(...n)}function Xkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return DG(e).indexOf(...n)}function Qkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return DG(e).lastIndexOf(...n)}function Jkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return DG(e).slice(...n)}function Zkt(e,t,n){return yn(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function eRt(e){return AG(e).slice().reverse()}function tRt(e,t,n){return Jq(e||0,t||0,n||0)}function nRt(e,t){const n=id(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function rRt(e,t){const n=id(e,(t||this).context);return n?n.copy():void 0}function iRt(e,t){const n=id(e,(t||this).context);return n?n.domain():[]}function sRt(e,t,n){const r=id(e,(n||this).context);return r?Ue(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function oRt(e,t){const n=id(e,(t||this).context);return n&&n.range?n.range():[]}function aRt(e,t,n){const r=id(e,(n||this).context);return r?r(t):void 0}function uRt(e,t,n,r,i){e=id(e,(i||this).context);const s=SSe(t,n);let o=e.domain(),a=o[0],u=zn(o),l=Bo;return u-a?l=dSe(e,a,u):e=(e.interpolator?Jn("sequential")().interpolator(e.interpolator()):Jn("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==zn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function lRt(e,t,n){const r=id(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function cRt(e){let t=null;return function(n){return n?QS(n,t=t||$b(e)):e}}const M2e=e=>e.data;function $2e(e,t){const n=N2e.call(t,e);return n.root&&n.root.lookup||{}}function fRt(e,t,n){const r=$2e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(M2e):void 0}function dRt(e,t){const n=$2e(e,this)[t];return n?n.ancestors().map(M2e):void 0}const F2e=()=>typeof window<"u"&&window||null;function hRt(){const e=F2e();return e?e.screen:{}}function pRt(){const e=F2e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function mRt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function L2e(e,t,n){if(!e)return[];const[r,i]=e,s=new Xi().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return ETe(o,s,gRt(t))}function gRt(e){let t=null;if(e){const n=gt(e.marktype),r=gt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function yRt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=gt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function vRt(e){return gt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function bRt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Xi().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),L2e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>_Rt(u.x,u.y,t))}function _Rt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const iT={random(){return xl()},cumulativeNormal:pO,cumulativeLogNormal:vq,cumulativeUniform:wq,densityNormal:hq,densityLogNormal:yq,densityUniform:Eq,quantileNormal:mO,quantileLogNormal:bq,quantileUniform:xq,sampleNormal:hO,sampleLogNormal:gq,sampleUniform:_q,isArray:Ue,isBoolean:ng,isDate:rm,isDefined(e){return e!==void 0},isNumber:Wn,isObject:vt,isRegExp:wwe,isString:yt,isTuple:lO,isValid(e){return e!=null&&e===e},toBoolean:QH,toDate(e){return JH(e)},toNumber:Do,toString:ZH,indexof:Xkt,join:Kkt,lastindexof:Qkt,replace:Zkt,reverse:eRt,slice:Jkt,flush:_we,lerp:xwe,merge:Vkt,pad:Cwe,peek:zn,pluck:Ykt,span:y2,inrange:uv,truncate:Awe,rgb:ym,lab:sN,hcl:oN,hsl:rN,luminance:x9,contrast:Ukt,sequence:Eu,format:wkt,utcFormat:xkt,utcParse:Tkt,utcOffset:zwe,utcSequence:Hwe,timeFormat:k2e,timeParse:Skt,timeOffset:jwe,timeSequence:Vwe,timeUnitSpecifier:Iwe,monthFormat:Ckt,monthAbbrevFormat:Akt,dayFormat:Dkt,dayAbbrevFormat:Ikt,quarter:gwe,utcquarter:ywe,week:kwe,utcweek:Owe,dayofyear:Nwe,utcdayofyear:Pwe,warn:Bkt,info:jkt,debug:zkt,extent(e){return Mf(e)},inScope:Lkt,intersect:L2e,clampRange:vwe,pinchDistance:Wkt,pinchAngle:Gkt,screen:hRt,containerSize:mRt,windowSize:pRt,bandspace:tRt,setdata:_kt,pathShape:cRt,panLinear:dwe,panLog:hwe,panPow:pwe,panSymlog:mwe,zoomLinear:qH,zoomLog:WH,zoomPow:Sk,zoomSymlog:GH,encode:Ekt,modify:qkt,lassoAppend:yRt,lassoPath:vRt,intersectLasso:bRt},ERt=["view","item","group","xy","x","y"],wRt="event.vega.",B2e="this.",IG={},j2e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${lt(R2e+e)}]`,functions:xRt,constants:T2e,visitors:IG},S9=A2e(j2e);function xRt(e){const t=C2e(e);ERt.forEach(n=>t[n]=wRt+n);for(const n in iT)t[n]=B2e+n;return gn(t,Pkt(e,iT,IG)),t}function Bi(e,t,n){return arguments.length===1?iT[e]:(iT[e]=t,n&&(IG[e]=n),S9&&(S9.functions[e]=B2e+e),this)}Bi("bandwidth",nRt,ua);Bi("copy",rRt,ua);Bi("domain",iRt,ua);Bi("range",oRt,ua);Bi("invert",sRt,ua);Bi("scale",aRt,ua);Bi("gradient",uRt,ua);Bi("geoArea",Okt,ua);Bi("geoBounds",Mkt,ua);Bi("geoCentroid",$kt,ua);Bi("geoShape",lRt,ua);Bi("geoScale",Fkt,ua);Bi("indata",bkt,Rkt);Bi("data",N2e,SG);Bi("treePath",fRt,SG);Bi("treeAncestors",dRt,SG);Bi("vlSelectionTest",fkt,xG);Bi("vlSelectionIdTest",pkt,xG);Bi("vlSelectionResolve",gkt,xG);Bi("vlSelectionTuples",mkt);function Ff(e,t){const n={};let r;try{e=yt(e)?e:lt(e)+"",r=EG(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==v2e)return;const o=s.callee.name,a=j2e.visitors[o];a&&a(o,s.arguments,t,n)});const i=S9(r);return i.globals.forEach(s=>{const o=R2e+s;!Ut(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function SRt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const TRt=Cc(["rule"]),soe=Cc(["group","image","rect"]);function CRt(e,t){let n="";return TRt[t]||(e.x2&&(e.x?(soe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(soe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function NG(e){return(e+"").toLowerCase()}function ARt(e){return NG(e)==="operator"}function DRt(e){return NG(e)==="collect"}function YE(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function IRt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var NRt={operator:(e,t)=>YE(e,["_"],t.code),parameter:(e,t)=>YE(e,["datum","_"],t.code),event:(e,t)=>YE(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return YE(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+lt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=CRt(r,n),i+="return m;",YE(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(lt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),IRt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function kRt(e){const t=this;ARt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function RRt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function PRt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ue(i)?i.map(s=>ooe(s,n,t)):ooe(i,n,t)}return t}function ooe(e,t,n){if(!e||!vt(e))return e;for(let r=0,i=aoe.length,s;r<i;++r)if(s=aoe[r],Ut(e,s.key))return s.parse(e,t,n);return e}var aoe=[{key:"$ref",parse:ORt},{key:"$key",parse:$Rt},{key:"$expr",parse:MRt},{key:"$field",parse:FRt},{key:"$encode",parse:BRt},{key:"$compare",parse:LRt},{key:"$context",parse:jRt},{key:"$subflow",parse:zRt},{key:"$tupleid",parse:URt}];function ORt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function MRt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=su(t.parameterExpression(e.$expr),e.$fields))}function $Rt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=XH(e.$key,e.$flat,t.expr.codegen))}function FRt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=_l(e.$field,e.$name,t.expr.codegen))}function LRt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=gt(e.$compare).map(i=>i&&i.$tupleid?Bt:i);return t.fn[n]||(t.fn[n]=YH(r,e.$order,t.expr.codegen))}function BRt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=su(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function jRt(e,t){return t}function zRt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function URt(){return Bt}function VRt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function HRt(e){var t=this,n=vt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const qRt={skip:!0};function WRt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function GRt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],qRt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(El).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function z2e(e,t,n,r){return new U2e(e,t,n,r)}function U2e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||NRt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function uoe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}U2e.prototype=uoe.prototype={fork(){const e=new uoe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),DRt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[NG(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:SRt,parseOperator:kRt,parseOperatorParameters:RRt,parseParameters:PRt,parseStream:VRt,parseUpdate:HRt,getState:WRt,setState:GRt};function YRt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),V2e(t,e.description()))}function V2e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function KRt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const F6="default";function XRt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:F6,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?yt(i)?i:i.user:F6,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return yt(r)||(i=r.item,r=r.user),T9(e,r&&r!==F6?r:i||r),i},{cursor:t})}function T9(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Wk(e,t){var n=e._runtime.data;return Ut(n,t)||Le("Unrecognized data set: "+t),n[t]}function QRt(e,t){return arguments.length<2?Wk(this,e).values.value:jO.call(this,e,jy().remove(El).insert(t))}function jO(e,t){cxe(t)||Le("Second argument to changes must be a changeset.");const n=Wk(this,e);return n.modified=!0,this.pulse(n.input,t)}function JRt(e,t){return jO.call(this,e,jy().insert(t))}function ZRt(e,t){return jO.call(this,e,jy().remove(t))}function H2e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function q2e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function zO(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ePt(e){var t=zO(e),n=H2e(e),r=q2e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function tPt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=zO(e),o=t.changedTouches?t.changedTouches[0]:t,s=RO(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=nPt(e,n,s),t}function nPt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;yt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:jo(e),item:jo(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const loe="view",rPt="timer",iPt="window",sPt={trap:!1};function oPt(e){const t=gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ue(r[s])&&(r[s]=Cc(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function W2e(e,t,n,r){e._eventListeners.push({type:n,sources:gt(t),handler:r})}function aPt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function $A(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||vt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function uPt(e,t,n){var r=this,i=new dO(n),s=function(l,c){r.runAsync(null,()=>{e===loe&&aPt(r,t)&&l.preventDefault(),i.receive(tPt(r,l,c))})},o;if(e===rPt)$A(r,"timer",t)&&r.timer(s,t);else if(e===loe)$A(r,"view",t)&&r.addEventListener(t,s,sPt);else if(e===iPt?$A(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&$A(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);W2e(r,o,t,s)}return i}function coe(e){return e.item}function foe(e){return e.item.mark.source}function doe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function lPt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",coe),foe,doe(e)),this.on(this.events("view","pointerout",coe),foe,doe(t)),this}function cPt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Au(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const fPt="vega-bind",dPt="vega-bind-name",hPt="vega-bind-radio";function pPt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=KH(r.debounce,i.update))),(r.input==null&&r.element?mPt:yPt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function mPt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),W2e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(gPt(i))}}function gPt(e){return typeof Event<"u"?new Event(e):{type:e}}function yPt(e,t,n,r){const i=r.signal(n.signal),s=Au("div",{class:fPt}),o=n.input==="radio"?s:s.appendChild(Au("label"));o.appendChild(Au("span",{class:dPt},n.name||n.signal)),t.appendChild(s);let a=vPt;switch(n.input){case"checkbox":a=bPt;break;case"select":a=_Pt;break;case"radio":a=EPt;break;case"range":a=wPt;break}a(e,o,n,i)}function vPt(e,t,n,r){const i=Au("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function bPt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Au("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function _Pt(e,t,n,r){const i=Au("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};Gk(o,r)&&(u.selected=!0),i.appendChild(Au("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(Gk(n.options[a],o)){i.selectedIndex=a;return}}}function EPt(e,t,n,r){const i=Au("span",{class:hPt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};Gk(o,r)&&(u.checked=!0);const l=Au("input",u);l.addEventListener("change",()=>e.update(o));const c=Au("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)Gk(a[l].value,o)&&(a[l].checked=!0)}}function wPt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||gm(s,i,100),a=Au("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Au("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function Gk(e,t){return e===t||e+""==t+""}function G2e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,H2e(e),q2e(e),zO(e),i,s).background(e.background())}function kG(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function xPt(e,t,n,r){const i=new r(e.loader(),kG(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,zO(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function SPt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=PO(r);e=n._el=e?L6(n,e,!0):null,YRt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||P2,a=e?s.renderer:s.headless;return n._renderer=a?G2e(n,n._renderer,e,a):null,n._handler=xPt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=L6(n,t,!0):e.appendChild(Au("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=L6(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{pPt(n,u.element||t,u)})),n}function L6(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const KE=e=>+e||0,TPt=e=>({top:e,bottom:e,left:e,right:e});function hoe(e){return vt(e)?{top:KE(e.top),bottom:KE(e.bottom),left:KE(e.left),right:KE(e.right)}:TPt(KE(e))}async function RG(e,t,n,r){const i=PO(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),G2e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function CPt(e,t){e!==Mp.Canvas&&e!==Mp.SVG&&e!==Mp.PNG&&Le("Unrecognized image type: "+e);const n=await RG(this,e,t);return e===Mp.SVG?APt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function APt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function DPt(e,t){return(await RG(this,Mp.Canvas,e,t)).canvas()}async function IPt(e){return(await RG(this,Mp.SVG,e)).svg()}function NPt(e,t,n){return z2e(e,Rb,iT,n).parse(t)}function kPt(e){var t=this._runtime.scales;return Ut(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var Y2e="width",K2e="height",PG="padding",poe={skip:!0};function X2e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===PG?r.left+r.right:0)}function Q2e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===PG?r.top+r.bottom:0)}function RPt(e){var t=e._signals,n=t[Y2e],r=t[K2e],i=t[PG];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=X2e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Q2e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function PPt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Y2e,n,poe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(K2e,r,poe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function OPt(e){return this._runtime.getState(e||{data:MPt,signals:$Pt,recurse:!0})}function MPt(e,t){return t.modified&&Ue(t.input.value)&&!e.startsWith("_:vega:_")}function $Pt(e,t){return!(e==="parent"||t instanceof Rb.proxy)}function FPt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function LPt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(bQe(n,t))}function BPt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",jPt(r))}function jPt(e){return e==null?"":Ue(e)?J2e(e):vt(e)&&!rm(e)?zPt(e):e+""}function zPt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ue(n)?J2e(n):Z2e(n))}).join(`
`)}function J2e(e){return"["+e.map(Z2e).join(", ")+"]"}function Z2e(e){return Ue(e)?"[]":vt(e)&&!rm(e)?"{}":e}function UPt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function eCe(e,t){const n=this;if(t=t||{},$v.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=gn({},e.locale,t.locale);n.locale(exe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Mp.Canvas,n._scenegraph=new YSe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||BPt,n._redraw=!0,n._handler=new P2().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=oPt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=NPt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=X2e(n,n._width),n._viewHeight=Q2e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,RPt(n),KRt(n),XRt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function FA(e,t){return Ut(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+lt(t))}function tCe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function moe(e,t,n,r){let i=tCe(n,r);return i||(i=kG(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function goe(e,t,n){const r=tCe(t,n);return r&&t._targets.remove(r),e}dt(eCe,$v,{async evaluate(e,t,n){if(await $v.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ePt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&zD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&V2e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=FA(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",hoe(e)):hoe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(PO(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&($v.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(FA(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:PPt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=kG(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return moe(this,e,FA(this,e),t)},removeSignalListener(e,t){return goe(this,FA(this,e),t)},addDataListener(e,t){return moe(this,e,Wk(this,e).values,t)},removeDataListener(e,t){return goe(this,Wk(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=T9(this,null);this._globalCursor=!!e,t&&T9(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:LPt,events:uPt,finalize:cPt,hover:lPt,data:QRt,change:jO,insert:JRt,remove:ZRt,scale:kPt,initialize:SPt,toImageURL:CPt,toCanvas:DPt,toSVG:IPt,getState:OPt,setState:FPt,_watchPixelRatio:UPt});const VPt="view",Yk="[",Kk="]",nCe="{",rCe="}",HPt=":",iCe=",",qPt="@",WPt=">",GPt=/[[\]{}]/,YPt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let sCe,oCe;function ig(e,t,n){return sCe=t||VPt,oCe=n||YPt,aCe(e.trim()).map(C9)}function KPt(e){return oCe[e]}function Fx(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function aCe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Fx(e,i,iCe,Yk+nCe,Kk+rCe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function C9(e){return e[0]==="["?XPt(e):QPt(e)}function XPt(e){const t=e.length;let n=1,r;if(n=Fx(e,n,Kk,Yk,Kk),n===t)throw"Empty between selector: "+e;if(r=aCe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==WPt)throw"Expected '>' after between selector: "+e;r=r.map(C9);const i=C9(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function QPt(e){const t={source:sCe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===rCe){if(a=e.lastIndexOf(nCe),a>=0){try{r=JPt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===qPt&&(i=++a),u=Fx(e,a,HPt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Fx(e,a,Yk),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Fx(e,a,Kk),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==Yk)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||GPt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):KPt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function JPt(e){const t=e.split(iCe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function ZPt(e){return vt(e)?e:{type:e||"pad"}}const XE=e=>+e||0,e3t=e=>({top:e,bottom:e,left:e,right:e});function t3t(e){return vt(e)?e.signal?e:{top:XE(e.top),bottom:XE(e.bottom),left:XE(e.left),right:XE(e.right)}:e3t(XE(e))}const Ts=e=>vt(e)&&!Ue(e)?gn({},e):{value:e};function yoe(e,t,n,r){return n!=null?(vt(n)&&!Ue(n)||Ue(n)&&n.length&&vt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function so(e,t,n){for(const r in t)yoe(e,r,t[r]);for(const r in n)yoe(e,r,n[r],"update")}function Y_(e,t,n){for(const r in t)n&&Ut(n,r)||(e[r]=gn(e[r]||{},t[r]));return e}function j1(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const OG="mark",MG="frame",$G="scope",n3t="axis",r3t="axis-domain",i3t="axis-grid",s3t="axis-label",o3t="axis-tick",a3t="axis-title",u3t="legend",l3t="legend-band",c3t="legend-entry",f3t="legend-gradient",uCe="legend-label",d3t="legend-symbol",h3t="legend-title",p3t="title",m3t="title-text",g3t="title-subtitle";function y3t(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!j1(u,e)&&B6(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===MG?i.group:n===OG?gn({},i.mark,i[t]):null;for(u in c)l=j1(u,e)||(u==="fill"||u==="stroke")&&(j1("fill",e)||j1("stroke",e)),l||B6(s,u,c[u]);gt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)j1(h,e)||B6(s,h,d[h])}),e=gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=gn(o,e.enter),a&&(e.update=gn(a,e.update)),e}function B6(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const lCe=e=>yt(e)?lt(e):e.signal?`(${e.signal})`:cCe(e);function UO(e){if(e.gradient!=null)return b3t(e);let t=e.signal?`(${e.signal})`:e.color?v3t(e.color):e.field!=null?cCe(e.field):e.value!==void 0?lt(e.value):void 0;return e.scale!=null&&(t=_3t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${tI(e.exponent)})`),e.mult!=null&&(t+=`*${tI(e.mult)}`),e.offset!=null&&(t+=`+${tI(e.offset)}`),e.round&&(t=`round(${t})`),t}const LA=(e,t,n,r)=>`(${e}(${[t,n,r].map(UO).join(",")})+'')`;function v3t(e){return e.c?LA("hcl",e.h,e.c,e.l):e.h||e.s?LA("hsl",e.h,e.s,e.l):e.l||e.a?LA("lab",e.l,e.a,e.b):e.r||e.g||e.b?LA("rgb",e.r,e.g,e.b):null}function b3t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:lt(n));for(;t.length&&zn(t)==null;)t.pop();return t.unshift(lCe(e.gradient)),`gradient(${t.join(",")})`}function tI(e){return vt(e)?"("+UO(e)+")":e}function cCe(e){return fCe(vt(e)?e:{datum:e})}function fCe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+lt(e));return e.signal||(r=yt(r)?td(r).map(lt).join("]["):fCe(r)),t+"["+r+"]"}function _3t(e,t){const n=lCe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+tI(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function E3t(e){let t="";return e.forEach(n=>{const r=UO(n);t+=n.test?`(${n.test})?${r}:`:r}),zn(t)===":"&&(t+="null"),t}function dCe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=y3t(e,t,n,r,i.config);for(const a in e)o[a]=w3t(e[a],t,s,i);return s}function w3t(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=S3t(x3t(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function x3t(e){return Ue(e)?E3t(e):UO(e)}function S3t(e,t,n,r){const i=Ff(e,t);return i.$fields.forEach(s=>r[s]=1),gn(n,i.$params),i.$expr}const T3t="outer",C3t=["value","update","init","react","bind"];function voe(e,t){Le(e+' for "outer" push: '+lt(t))}function hCe(e,t){const n=e.name;if(e.push===T3t)t.signals[n]||voe("No prior signal definition",n),C3t.forEach(r=>{e[r]!==void 0&&voe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function A9(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function VO(e,t,n,r){return new A9(e,t,n,r)}function Xk(e,t){return VO("operator",e,t)}function Lt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function sT(e,t){return t?{$field:e,$name:t}:{$field:e}}const D9=sT("key");function boe(e,t){return{$compare:e,$order:t}}function A3t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const D3t="ascending",I3t="descending";function N3t(e){return vt(e)?(e.order===I3t?"-":"+")+HO(e.op,e.field):""}function HO(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const FG="scope",I9="view";function ls(e){return e&&e.signal}function k3t(e){return e&&e.expr}function nI(e){if(ls(e))return!0;if(vt(e)){for(const t in e)if(nI(e[t]))return!0}return!1}function Xl(e,t){return e??t}function b0(e){return e&&e.signal||e}const _oe="timer";function oT(e,t){return(e.merge?P3t:e.stream?O3t:e.type?M3t:Le("Invalid stream specification: "+lt(e)))(e,t)}function R3t(e){return e===FG?I9:e||I9}function P3t(e,t){const n=e.merge.map(i=>oT(i,t)),r=LG({merge:n},e,t);return t.addStream(r).id}function O3t(e,t){const n=oT(e.stream,t),r=LG({stream:n},e,t);return t.addStream(r).id}function M3t(e,t){let n;e.type===_oe?(n=t.event(_oe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(R3t(e.source),e.type);const r=LG({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function LG(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+lt(t)),e.between=[oT(r[0],n),oT(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push($3t(t.marktype,t.markname,t.markrole)),t.source===FG&&r.push("inScope(event.item)"),r.length&&(e.filter=Ff("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function $3t(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const F3t={code:"_.$value",ast:{type:"Identifier",value:"value"}};function L3t(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),yt(s)&&(s=ig(s,t.isSubscope()?FG:I9)),s=gt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[j3t(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+lt(r)+")"),i.update=yt(o)?Ff(o,t):o.expr!=null?Ff(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:F3t,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(gn(B3t(u,t),i)))}function B3t(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):oT(e,t)}}function j3t(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function z3t(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Ff(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>L3t(i,t,n.id))}const wr=e=>(t,n,r)=>VO(e,n,t||void 0,r),pCe=wr("aggregate"),U3t=wr("axisticks"),mCe=wr("bound"),Mc=wr("collect"),Eoe=wr("compare"),V3t=wr("datajoin"),gCe=wr("encode"),H3t=wr("expression"),q3t=wr("facet"),W3t=wr("field"),G3t=wr("key"),Y3t=wr("legendentries"),K3t=wr("load"),X3t=wr("mark"),Q3t=wr("multiextent"),J3t=wr("multivalues"),Z3t=wr("overlap"),eOt=wr("params"),yCe=wr("prefacet"),tOt=wr("projection"),nOt=wr("proxy"),rOt=wr("relay"),vCe=wr("render"),iOt=wr("scale"),Vy=wr("sieve"),sOt=wr("sortitems"),bCe=wr("viewlayout"),oOt=wr("values");let aOt=0;const _Ce={min:"min",max:"max",count:"sum"};function uOt(e,t){const n=e.type||"linear";oSe(n)||Le("Unrecognized scale type: "+lt(n)),t.addScale(e.name,{type:n,domain:void 0})}function lOt(e,t){const n=t.getScale(e.name).params;let r;n.domain=ECe(e.domain,e,t),e.range!=null&&(n.range=xCe(e,t,n)),e.interpolate!=null&&bOt(e.interpolate,n),e.nice!=null&&(n.nice=vOt(e.nice,t)),e.bins!=null&&(n.bins=yOt(e.bins,t));for(r in e)Ut(n,r)||r==="name"||(n[r]=ll(e[r],t))}function ll(e,t){return vt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+lt(e)):e}function rI(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ll(n,t))}function qO(e){Le("Can not find data set: "+lt(e))}function ECe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ue(e)?cOt:e.fields?dOt:fOt)(e,t,n)}function cOt(e,t,n){return e.map(r=>ll(r,n))}function fOt(e,t,n){const r=n.getData(e.data);return r||qO(e.data),Mb(t.type)?r.valuesRef(n,e.field,wCe(e.sort,!1)):lSe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function dOt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=yt(o)?{data:r,field:o}:Ue(o)||o.signal?hOt(o,n):o,s.push(o),s),[]);return(Mb(t.type)?pOt:lSe(t.type)?mOt:gOt)(e,n,i)}function hOt(e,t){const n="_:vega:_"+aOt++,r=Mc({});if(Ue(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+lt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Vy({})]),{data:n,field:"data"}}function pOt(e,t,n){const r=wCe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||qO(l.data),c.countsRef(t,l.field,r)}),a={groupby:D9,pulse:o};r&&(i=r.op||"count",s=r.field?HO(i,r.field):"count",a.ops=[_Ce[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(pCe(a));const u=t.add(Mc({pulse:Lt(i)}));return s=t.add(oOt({field:D9,sort:t.sortRef(r),pulse:Lt(u)})),Lt(s)}function wCe(e,t){return e&&(!e.field&&!e.op?vt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!_Ce[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function mOt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||qO(i.data),s.domainRef(t,i.field)});return Lt(t.add(J3t({values:r})))}function gOt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||qO(i.data),s.extentRef(t,i.field)});return Lt(t.add(Q3t({extents:r})))}function yOt(e,t){return e.signal||Ue(e)?rI(e,t):t.objectProperty(e)}function vOt(e,t){return e.signal?t.signalRef(e.signal):vt(e)?{interval:ll(e.interval),step:ll(e.step)}:ll(e)}function bOt(e,t){t.interpolate=ll(e.type||e),e.gamma!=null&&(t.interpolateGamma=ll(e.gamma))}function xCe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(yt(i)){if(r&&Ut(r,i))return e=gn({},e,{range:r[i]}),xCe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Mb(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+lt(i))}else if(i.scheme){n.scheme=Ue(i.scheme)?rI(i.scheme,t):ll(i.scheme,t),i.extent&&(n.schemeExtent=rI(i.extent,t)),i.count&&(n.schemeCount=ll(i.count,t));return}else if(i.step){n.rangeStep=ll(i.step,t);return}else{if(Mb(e.type)&&!Ue(i))return ECe(i,e,t);Ue(i)||Le("Unsupported range type: "+lt(i))}return i.map(s=>(Ue(s)?rI:ll)(s,t))}function _Ot(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=N9(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=N9(n[i],i,t));t.addProjection(e.name,r)}function N9(e,t,n){return Ue(e)?e.map(r=>N9(r,t,n)):vt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+lt(e)):e}const $c="top",K_="left",X_="right",Im="bottom",SCe="center",EOt="vertical",wOt="start",xOt="middle",SOt="end",k9="index",BG="label",TOt="offset",jb="perc",COt="perc2",hl="value",L2="guide-label",jG="guide-title",AOt="group-title",DOt="group-subtitle",woe="symbol",iI="gradient",R9="discrete",P9="size",IOt="shape",NOt="fill",kOt="stroke",ROt="strokeWidth",POt="strokeDash",OOt="opacity",zG=[P9,IOt,NOt,kOt,ROt,POt,OOt],B2={name:1,style:1,interactive:1},Vn={value:0},pl={value:1},WO="group",TCe="rect",UG="rule",MOt="symbol",Hy="text";function aT(e){return e.type=WO,e.interactive=e.interactive||!1,e}function ou(e,t){const n=(r,i)=>Xl(e[r],Xl(t[r],i));return n.isVertical=r=>EOt===Xl(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Xl(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Xl(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Xl(e.columns,Xl(t.columns,+n.isVertical(!0))),n}function CCe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function $Ot(e,t,n){const r=t.config.style[n];return r&&r[e]}function GO(e,t,n){return`item.anchor === '${wOt}' ? ${e} : item.anchor === '${SOt}' ? ${t} : ${n}`}const VG=GO(lt(K_),lt(X_),lt(SCe));function FOt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},vt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function ACe(e,t){return t?e?vt(e)?Object.assign({},e,{offset:ACe(e.offset,t)}):{value:e,offset:t}:t:e}function Bu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Y_(e.encode,t,B2)):e.interactive=!1,e}function LOt(e,t,n,r){const i=ou(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Vn,x:Vn,y:Vn,width:Ts(f),height:Ts(d)},update:gn({},u,{opacity:pl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Vn}};return so(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Bu({type:TCe,role:f3t,encode:h},r)}function BOt(e,t,n,r,i){const s=ou(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Vn,fill:{scale:t,field:hl}};p[l]={signal:h+"datum."+jb,mult:u},p[c]=Vn,p[f]={signal:h+"datum."+COt,mult:u},p[d]=Ts(a);const m={enter:p,update:gn({},p,{opacity:pl}),exit:{opacity:Vn}};return so(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Bu({type:TCe,role:l3t,key:hl,from:i,encode:m},r)}const jOt=`datum.${jb}<=0?"${K_}":datum.${jb}>=1?"${X_}":"${SCe}"`,zOt=`datum.${jb}<=0?"${Im}":datum.${jb}>=1?"${$c}":"${xOt}"`;function xoe(e,t,n,r){const i=ou(e,t),s=i.isVertical(),o=Ts(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Vn},update:c={opacity:pl,text:{field:BG}},exit:{opacity:Vn}};return so(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Xl(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:zOt},f="y",d="x",h="1-"):(l.align=c.align={signal:jOt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+jb,mult:a},l[d]=c[d]=o,o.offset=Xl(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+k9}:void 0,Bu({type:Hy,role:uCe,style:L2,key:hl,from:r,encode:p,overlap:u},n)}function UOt(e,t,n,r,i){const s=ou(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${TOt} : datum.${P9}`,h=l?Ts(l):{field:P9},p=`datum.${k9}`,m=`max(1, ${i})`;let g,y,v,b,E;h.mult=.5,g={enter:y={opacity:Vn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:pl,x:y.x,y:y.y},exit:{opacity:Vn}};let _=null,w=null;e.fill||(_=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),so(g,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),zG.forEach(D=>{e[D]&&(v[D]=y[D]={scale:e[D],field:hl})});const S=Bu({type:MOt,role:d3t,key:hl,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=Ts(c);C.offset=s("labelOffset"),g={enter:y={opacity:Vn,x:{signal:d,offset:C},y:h},update:v={opacity:pl,text:{field:BG},x:y.x,y:y.y},exit:{opacity:Vn}},so(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Bu({type:Hy,role:uCe,style:L2,key:hl,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Vn,height:l?Ts(l):Vn,opacity:Vn},exit:{opacity:Vn},update:v={opacity:pl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,E={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,E={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:k9}},aT({role:$G,from:r,encode:Y_(g,o,B2),marks:[S,A],name:u,interactive:a,sort:E})}function VOt(e,t){const n=ou(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const HG='item.orient === "left"',qG='item.orient === "right"',YO=`(${HG} || ${qG})`,HOt=`datum.vgrad && ${YO}`,qOt=GO('"top"','"bottom"','"middle"'),WOt=GO('"right"','"left"','"center"'),GOt=`datum.vgrad && ${qG} ? (${WOt}) : (${YO} && !(datum.vgrad && ${HG})) ? "left" : ${VG}`,YOt=`item._anchor || (${YO} ? "middle" : "start")`,KOt=`${HOt} ? (${HG} ? -90 : 90) : 0`,XOt=`${YO} ? (datum.vgrad ? (${qG} ? "bottom" : "top") : ${qOt}) : "top"`;function QOt(e,t,n,r){const i=ou(e,t),s={enter:{opacity:Vn},update:{opacity:pl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Vn}};return so(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:YOt},angle:{signal:KOt},align:{signal:GOt},baseline:{signal:XOt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Bu({type:Hy,role:h3t,style:jG,from:r,encode:s},n)}function JOt(e,t){let n;return vt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Soe(e.path)+")":e.sphere&&(n="geoShape("+Soe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Soe(e){return vt(e)&&e.signal?e.signal:lt(e)}function DCe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===WO?$G:t||OG}function ZOt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||DCe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function eMt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function WG(e,t){const n=hxe(e.type);n||Le("Unrecognized transform type: "+lt(e.type));const r=VO(n.type.toLowerCase(),null,ICe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function ICe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=tMt(o,t,n)}return r}function tMt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return nMt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+lt(t.type)+" parameter: "+lt(e.name));return}else{if(r==="param")return rMt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ls(i)?i.map(s=>Toe(e,s,n)):Toe(e,i,n)}function Toe(e,t,n){const r=e.type;if(ls(t))return Aoe(r)?Le("Expression references can not be signals."):j6(r)?n.fieldRef(t):Doe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||j6(r);return i&&iMt(t)?n.exprRef(t.expr,t.as):i&&sMt(t)?sT(t.field,t.as):Aoe(r)?Ff(t,n):oMt(r)?Lt(n.getData(t).values):j6(r)?sT(t):Doe(r)?n.compareRef(t):t}}function nMt(e,t,n){return yt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function rMt(e,t,n){const r=t[e.name];return e.array?(Ue(r)||Le("Expected an array of sub-parameters. Instead: "+lt(r)),r.map(i=>Coe(e,i,n))):Coe(e,r,n)}function Coe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+lt(t));const s=gn(ICe(i,t,n),i.key);return Lt(n.add(eOt(s)))}const iMt=e=>e&&e.expr,sMt=e=>e&&e.field,oMt=e=>e==="data",Aoe=e=>e==="expr",j6=e=>e==="field",Doe=e=>e==="compare";function aMt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=sI(r,n):(e.data?a=Lt(n.getData(e.data).aggregate):(s=WG(gn({type:"aggregate",groupby:gt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=sI(r,n),o=a=Lt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Lt(n.add(Mc(null,[{}]))),o||(o=sI(e,n)),{key:i,pulse:o,parent:a}}function sI(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Lt(t.getData(e.data).output)}function ey(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}ey.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Lt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new ey(e,s,i,r,o)};function NCe(e){return yt(e)?e:null}function Ioe(e,t,n){const r=HO(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function QE(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=N3t(s);let l=NCe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:D9,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Lt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(VO(r,void 0,d)),o&&(t.index[i]=f),c=Lt(f),l!=null&&(a[l]=c)}return c}ey.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=NCe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Ioe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Lt(r.output)},n&&n.field&&Ioe(e,u,n),a=e.add(pCe(u)),o=e.add(Mc({pulse:Lt(a)})),o={agg:a,ref:Lt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Lt(this.values)},extentRef(e,t){return QE(e,this,"extent","extent",t,!1)},domainRef(e,t){return QE(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return QE(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return QE(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return QE(e,this,"indata","tupleindex",t,!0,!0)}};function uMt(e,t,n){const r=e.from.facet,i=r.name,s=sI(r,t);let o;r.name||Le("Facet must have a name: "+lt(r)),r.data||Le("Facet must reference a data set: "+lt(r)),r.field?o=t.add(yCe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(q3t({key:t.keyRef(r.groupby),group:Lt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+lt(r));const a=t.fork(),u=a.add(Mc()),l=a.add(Vy({pulse:Lt(u)}));a.addData(i,new ey(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function lMt(e,t,n){const r=t.add(yCe({pulse:n.pulse})),i=t.fork();i.add(Vy()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function kCe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(Xk()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Ff(l,t);u.update=c.$expr,u.params=c.$params}function KO(e,t){const n=DCe(e),r=e.type===WO,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===$G||n===MG,a,u,l,c,f,d,h;const p=n===OG||o||i,m=aMt(e.from,r,t);u=t.add(V3t({key:m.key||(e.key?sT(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Lt(u);u=l=t.add(Mc({pulse:g})),u=t.add(X3t({markdef:ZOt(e),interactive:eMt(e.interactive,t),clip:JOt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Lt(u)}));const y=Lt(u);u=c=t.add(gCe(dCe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const S=WG(w,t),C=S.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=Lt(u),t.add(u=S)}),e.sort&&(u=t.add(sOt({sort:t.compareRef(e.sort),pulse:Lt(u)})));const v=Lt(u);(i||o)&&(o=t.add(bCe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Lt(o));const b=t.add(mCe({mark:y,pulse:d||v}));h=Lt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?uMt(e,t,m):p?lMt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=cMt(s,h,t));const E=t.add(vCe({pulse:h})),_=t.add(Vy({pulse:Lt(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new ey(t,l,E,_)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&Le("Marks only support modify triggers."),kCe(w,t,f)}))}function cMt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:ls(s)?n.signalRef(s.signal):s,method:ls(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=ls(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Lt(n.add(Z3t(o)))}function fMt(e,t){const n=t.config.legend,r=e.encode||{},i=ou(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;zG.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Le("Missing valid scale for legend.");const p=dMt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Lt(t.add(Mc(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Lt(t.add(Y3t(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===iI?(h=[LOt(e,c,n,r.gradient),xoe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${b0(i.gradientLength())})/100))`)):p===R9?h=[BOt(e,c,n,r.gradient,v),xoe(e,n,r.labels,v)]:(f=VOt(e,n),h=[UOt(e,n,r,v,b0(f.columns))],d.size=mMt(e,t,h[0].marks)),h=[aT({role:c3t,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(QOt(e,n,r.title,g)),KO(aT({role:u3t,from:g,encode:Y_(pMt(i,e,n),s,B2),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function dMt(e,t){let n=e.type||woe;return!e.type&&hMt(e)===1&&(e.fill||e.stroke)&&(n=rW(t)?iI:G8(t)?R9:woe),n!==iI?n:G8(t)?R9:iI}function hMt(e){return zG.reduce((t,n)=>t+(e[n]?1:0),0)}function pMt(e,t,n){const r={enter:{},update:{}};return so(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function mMt(e,t,n){const r=b0(Noe("size",e,n)),i=b0(Noe("strokeWidth",e,n)),s=b0(gMt(n[1].encode,t,L2));return Ff(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Noe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:CCe(e,n[0].encode)}function gMt(e,t,n){return CCe("fontSize",e)||$Ot("fontSize",t,n)}const yMt=`item.orient==="${K_}"?-90:item.orient==="${X_}"?90:0`;function vMt(e,t){e=yt(e)?{text:e}:e;const n=ou(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Lt(t.add(Mc(null,[l])));return u.push(EMt(e,n,bMt(e),c)),e.subtitle&&u.push(wMt(e,n,r.subtitle,c)),KO(aT({role:p3t,from:c,encode:_Mt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function bMt(e){const t=e.encode;return t&&t.title||gn({name:e.name,interactive:e.interactive,style:e.style},t)}function _Mt(e,t){const n={enter:{},update:{}};return so(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:VG},angle:{signal:yMt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Y_(n,t,B2)}function EMt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return so(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Bu({type:Hy,role:m3t,style:AOt,from:r,encode:o},n)}function wMt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return so(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Bu({type:Hy,role:g3t,style:DOt,from:r,encode:o},n)}function xMt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(WG(r,t))}),e.on&&e.on.forEach(r=>{kCe(r,t,e.name)}),t.addDataPipeline(e.name,SMt(e,t,n))}function SMt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?ls(e.values)||nI(e.format)?(r.push(koe(t,e)),r.push(i=Eg())):r.push(i=Eg({$ingest:e.values,$format:e.format})):e.url?nI(e.url)||nI(e.format)?(r.push(koe(t,e)),r.push(i=Eg())):r.push(i=Eg({$request:e.url,$format:e.format})):e.source&&(i=a=gt(e.source).map(d=>Lt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Eg()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=rOt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Eg())),i||r.push(Eg()),r.push(Vy({})),r}function Eg(e){const t=Mc({},e);return t.metadata={source:!0},t}function koe(e,t){return K3t({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const RCe=e=>e===Im||e===$c,XO=(e,t,n)=>ls(e)?DMt(e.signal,t,n):e===K_||e===$c?t:n,Cs=(e,t,n)=>ls(e)?CMt(e.signal,t,n):RCe(e)?t:n,_c=(e,t,n)=>ls(e)?AMt(e.signal,t,n):RCe(e)?n:t,PCe=(e,t,n)=>ls(e)?IMt(e.signal,t,n):e===$c?{value:t}:{value:n},TMt=(e,t,n)=>ls(e)?NMt(e.signal,t,n):e===X_?{value:t}:{value:n},CMt=(e,t,n)=>OCe(`${e} === '${$c}' || ${e} === '${Im}'`,t,n),AMt=(e,t,n)=>OCe(`${e} !== '${$c}' && ${e} !== '${Im}'`,t,n),DMt=(e,t,n)=>GG(`${e} === '${K_}' || ${e} === '${$c}'`,t,n),IMt=(e,t,n)=>GG(`${e} === '${$c}'`,t,n),NMt=(e,t,n)=>GG(`${e} === '${X_}'`,t,n),OCe=(e,t,n)=>(t=t!=null?Ts(t):t,n=n!=null?Ts(n):n,Roe(t)&&Roe(n)?(t=t?t.signal||lt(t.value):null,n=n?n.signal||lt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[gn({test:e},t)].concat(n||[])),Roe=e=>e==null||Object.keys(e).length===1,GG=(e,t,n)=>({signal:`${e} ? (${fv(t)}) : (${fv(n)})`}),kMt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${K_}' ? (${fv(r)}) : `:"")+(n!=null?`${e} === '${Im}' ? (${fv(n)}) : `:"")+(i!=null?`${e} === '${X_}' ? (${fv(i)}) : `:"")+(t!=null?`${e} === '${$c}' ? (${fv(t)}) : `:"")+"(null)"}),fv=e=>ls(e)?e.signal:e==null?null:lt(e),RMt=(e,t)=>t===0?0:ls(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Fv=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function C1(e,t,n,r){let i;if(t&&Ut(t,e))return t[e];if(Ut(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[jG][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[L2][i]}return null}function Poe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function PMt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(ls(o)){const f=Poe([n.axisX,n.axisY]),d=Poe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Cs(o,C1(l,n.axisX,i,r),C1(l,n.axisY,i,r));u={};for(l of d)u[l]=kMt(o.signal,C1(l,n.axisTop,i,r),C1(l,n.axisBottom,i,r),C1(l,n.axisLeft,i,r),C1(l,n.axisRight,i,r))}else a=o===$c||o===Im?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?gn({},i,a,u,s):i}function OMt(e,t,n,r){const i=ou(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Vn},update:a={opacity:pl},exit:{opacity:Vn}};so(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Ooe(e,0),c=Ooe(e,1);return o.x=a.x=Cs(s,l,Vn),o.x2=a.x2=Cs(s,c),o.y=a.y=_c(s,l,Vn),o.y2=a.y2=_c(s,c),Bu({type:UG,role:r3t,from:r,encode:u},n)}function Ooe(e,t){return{scale:e.scale,range:t}}function MMt(e,t,n,r,i){const s=ou(e,t),o=e.orient,a=e.gridScale,u=XO(o,1,-1),l=$Mt(e.offset,u);let c,f,d;const h={enter:c={opacity:Vn},update:d={opacity:pl},exit:f={opacity:Vn}};so(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:hl,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Cs(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:gn(m,{mult:u,offset:l});return c.x=d.x=Cs(o,p,g),c.y=d.y=_c(o,p,g),c.x2=d.x2=_c(o,y),c.y2=d.y2=Cs(o,y),f.x=Cs(o,p),f.y=_c(o,p),Bu({type:UG,role:i3t,key:hl,from:r,encode:h},n)}function $Mt(e,t){if(t!==1)if(!vt(e))e=ls(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=gn({},e);for(;n.mult!=null;)if(vt(n.mult))n=n.mult=gn({},n.mult);else return n.mult=ls(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function FMt(e,t,n,r,i,s){const o=ou(e,t),a=e.orient,u=XO(a,-1,1);let l,c,f;const d={enter:l={opacity:Vn},update:f={opacity:pl},exit:c={opacity:Vn}};so(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Ts(i);h.mult=u;const p={scale:e.scale,field:hl,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Cs(a,Vn,p),f.y2=l.y2=Cs(a,h),c.x=Cs(a,p),f.x=l.x=_c(a,Vn,p),f.x2=l.x2=_c(a,h),c.y=_c(a,p),Bu({type:UG,role:o3t,key:hl,from:r,encode:d},n)}function z6(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function LMt(e,t,n,r,i,s){const o=ou(e,t),a=e.orient,u=e.scale,l=XO(a,-1,1),c=b0(o("labelFlush")),f=b0(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Ts(i);g.mult=l,g.offset=Ts(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:hl,band:.5,offset:ACe(s.offset,o("labelOffset"))},v=Cs(a,p?z6(u,c,'"left"','"right"','"center"'):{value:"center"},TMt(a,"left","right")),b=Cs(a,PCe(a,"bottom","top"),p?z6(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=z6(u,c,`-(${f})`,f,0);p=p&&f;const _={opacity:Vn,x:Cs(a,y,g),y:_c(a,y,g)},w={enter:_,update:m={opacity:pl,text:{field:BG},x:_.x,y:_.y,align:v,baseline:b},exit:{opacity:Vn,x:_.x,y:_.y}};so(w,{dx:!d&&p?Cs(a,E):null,dy:!h&&p?_c(a,E):null}),so(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let C=o("labelOverlap");return C=C||S?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=Fv(m.align,v)),m.baseline!==b&&(m.baseline=Fv(m.baseline,b)),Bu({type:Hy,role:s3t,style:L2,key:hl,from:r,encode:w,overlap:C},n)}function BMt(e,t,n,r){const i=ou(e,t),s=e.orient,o=XO(s,-1,1);let a,u;const l={enter:a={opacity:Vn,anchor:Ts(i("titleAnchor",null)),align:{signal:VG}},update:u=gn({},a,{opacity:pl,text:Ts(e.title)}),exit:{opacity:Vn}},c={signal:`lerp(range("${e.scale}"), ${GO(0,1,.5)})`};return u.x=Cs(s,c),u.y=_c(s,c),a.angle=Cs(s,Vn,RMt(o,90)),a.baseline=Cs(s,PCe(s,Im,$c),{value:Im}),u.angle=a.angle,u.baseline=a.baseline,so(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),jMt(i,s,l,n),l.update.align=Fv(l.update.align,a.align),l.update.angle=Fv(l.update.angle,a.angle),l.update.baseline=Fv(l.update.baseline,a.baseline),Bu({type:Hy,role:a3t,style:jG,from:r,encode:l},n)}function jMt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Fv(Ts(a),n.update[u]),!1):!j1(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Ts(o):Cs(t,Ts(o),Ts(s))}function zMt(e,t){const n=PMt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=ou(e,n),l=FOt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Lt(t.add(Mc({},[c]))),d=Lt(t.add(U3t({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(MMt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(FMt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(LMt(e,n,r.labels,d,p,l))),c.domain&&h.push(OMt(e,n,r.domain,f)),c.title&&h.push(BMt(e,n,r.title,f)),KO(aT({role:n3t,from:f,encode:Y_(UMt(u,e),i,B2),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function UMt(e,t){const n={enter:{},update:{}};return so(n,{orient:e("orient"),offset:e("offset")||0,position:Xl(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function MCe(e,t,n){const r=gt(e.signals),i=gt(e.scales);return n||r.forEach(s=>hCe(s,t)),gt(e.projections).forEach(s=>_Ot(s,t)),i.forEach(s=>uOt(s,t)),gt(e.data).forEach(s=>xMt(s,t)),i.forEach(s=>lOt(s,t)),(n||r).forEach(s=>z3t(s,t)),gt(e.axes).forEach(s=>zMt(s,t)),gt(e.marks).forEach(s=>KO(s,t)),gt(e.legends).forEach(s=>fMt(s,t)),e.title&&vMt(e.title,t),t.parseLambdas(),t}const VMt=e=>Y_({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function HMt(e,t){const n=t.config,r=Lt(t.root=t.add(Xk())),i=qMt(e,n);i.forEach(l=>hCe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Mc()),o=t.add(gCe(dCe(VMt(e.encode),WO,MG,e.style,t,{pulse:Lt(s)}))),a=t.add(bCe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Lt(o)}));t.operators.pop(),t.pushState(Lt(o),Lt(a),null),MCe(e,t,i),t.operators.push(a);let u=t.add(mCe({mark:r,pulse:Lt(a)}));return u=t.add(vCe({pulse:Lt(u)})),u=t.add(Vy({pulse:Lt(u)})),t.addData("root",new ey(t,s,s,u)),t}function JE(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function qMt(e,t){const n=o=>Xl(e[o],t[o]),r=[JE("background",n("background")),JE("autosize",ZPt(n("autosize"))),JE("padding",t3t(n("padding"))),JE("width",n("width")||0),JE("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return gt(e.signals).forEach(o=>{Ut(i,o.name)?o=gn(i[o.name],o):r.push(o),s[o.name]=o}),gt(t.signals).forEach(o=>{!Ut(s,o.name)&&!Ut(i,o.name)&&r.push(o)}),r}function $Ce(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Moe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}$Ce.prototype=Moe.prototype={parse(e){return MCe(e,this)},fork(){return new Moe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof A9?Lt(e):e;return this.add(nOt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Lt(this.add(Vy({pulse:e})))),this._parent.push(t),this._lookup.push(n?Lt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return zn(this._parent)},encode(){return zn(this._encode)},lookup(){return zn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(yt(e))return sT(e,t);e.signal||Le("Unsupported field reference: "+lt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Lt(this.add(W3t(i)))}return r},compareRef(e){let t=!1;const n=s=>ls(s)?(t=!0,this.signalRef(s.signal)):k3t(s)?(t=!0,this.exprRef(s.expr)):s,r=gt(e.field).map(n),i=gt(e.order).map(n);return t?Lt(this.add(Eoe({fields:r,orders:i}))):boe(r,i)},keyRef(e,t){let n=!1;const r=s=>ls(s)?(n=!0,Lt(i[s.signal])):s,i=this.signals;return e=gt(e).map(r),n?Lt(this.add(G3t({fields:e,flat:t}))):A3t(e,t)},sortRef(e){if(!e)return e;const t=HO(e.op,e.field),n=e.order||D3t;return n.signal?Lt(this.add(Eoe({fields:t,orders:this.signalRef(n.signal)}))):boe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ut(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+lt(e));const n=t instanceof A9?t:this.add(Xk(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+lt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Lt(this.signals[e]):(Ut(this.lambdas,e)||(this.lambdas[e]=this.add(Xk(null))),Lt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Ff(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!vt(e)?e:this.signalRef(e.signal||YG(e))},exprRef(e,t){const n={expr:Ff(e,this)};return t&&(n.expr.$name=t),Lt(this.add(H3t(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+lt(e)),this.bindings.push(gn({signal:e},t))},addScaleProj(e,t){Ut(this.scales,e)&&Le("Duplicate scale or projection name: "+lt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,iOt(t))},addProjection(e,t){this.addScaleProj(e,tOt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+lt(e)),this.scales[e]},scaleRef(e){return Lt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ut(this.data,e)&&Le("Duplicate data set name: "+lt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+lt(e)),this.data[e]},addDataPipeline(e,t){return Ut(this.data,e)&&Le("Duplicate data set name: "+lt(e)),this.addData(e,ey.fromEntries(this,t))}};function YG(e){return(Ue(e)?WMt:GMt)(e)}function WMt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(vt(i)?i.signal||YG(i):lt(i))}return n+"]"}function GMt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+lt(r)+":"+(vt(i)?i.signal||YG(i):lt(i));return t+"}"}function YMt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function KMt(e,t,n){return vt(e)||Le("Input Vega specification must be an object."),t=j_(YMt(),t,e.config),HMt(e,new $Ce(t,n)).toRuntime()}var XMt="5.29.0";gn(Rb,KSt,FAt,mDt,WDt,ZDt,CIt,sIt,DIt,RIt,UIt,KIt);const QMt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Xi,CanvasHandler:P2,CanvasRenderer:Lk,DATE:tu,DAY:Ao,DAYOFYEAR:$f,Dataflow:$v,Debug:awe,Error:UH,EventStream:dO,Gradient:SSe,GroupItem:TO,HOURS:$u,Handler:DW,HybridHandler:mTe,HybridRenderer:i9,Info:owe,Item:SO,MILLISECONDS:Ac,MINUTES:Fu,MONTH:Po,Marks:Lu,MultiPulse:uq,None:swe,Operator:Dr,Parameters:fO,Pulse:im,QUARTER:eu,RenderType:Mp,Renderer:R2,ResourceLoader:kSe,SECONDS:wl,SVGHandler:nTe,SVGRenderer:OW,SVGStringRenderer:pTe,Scenegraph:YSe,TIME_UNITS:eq,Transform:Oe,View:eCe,WEEK:ss,Warn:VH,YEAR:eo,accessor:su,accessorFields:Ro,accessorName:Ci,array:gt,ascending:sO,bandwidthNRD:dq,bin:gxe,bootstrapCI:yxe,boundClip:TTe,boundContext:D2,boundItem:Z8,boundMark:HSe,boundStroke:zh,changeset:jy,clampRange:vwe,codegenExpression:A2e,compare:YH,constant:jo,cumulativeLogNormal:vq,cumulativeNormal:pO,cumulativeUniform:wq,dayofyear:Nwe,debounce:KH,defaultLocale:rq,definition:hxe,densityLogNormal:yq,densityNormal:hq,densityUniform:Eq,domChild:rs,domClear:rl,domCreate:Pp,domFind:AW,dotbin:vxe,error:Le,expressionFunction:Bi,extend:gn,extent:Mf,extentIndex:bwe,falsy:sp,fastmap:U_,field:_l,flush:_we,font:NO,fontFamily:k2,fontSize:nd,format:jD,formatLocale:Tk,formats:oq,hasOwnProperty:Ut,id:g2,identity:Bo,inferType:nxe,inferTypes:rxe,ingest:sr,inherits:dt,inrange:uv,interpolate:iW,interpolateColors:wO,interpolateRange:cSe,intersect:ETe,intersectBoxLine:lv,intersectPath:dW,intersectPoint:hW,intersectRule:PSe,isArray:Ue,isBoolean:ng,isDate:rm,isFunction:yn,isIterable:Ewe,isNumber:Wn,isObject:vt,isRegExp:wwe,isString:yt,isTuple:lO,key:XH,lerp:xwe,lineHeight:Cm,loader:aO,locale:exe,logger:HH,lruCache:Swe,markup:PW,merge:Twe,mergeConfig:j_,multiLineOffset:SW,one:B_,pad:Cwe,panLinear:dwe,panLog:hwe,panPow:pwe,panSymlog:mwe,parse:KMt,parseExpression:EG,parseSelector:ig,path:WP,pathCurves:lW,pathEqual:CTe,pathParse:$b,pathRectangle:ASe,pathRender:QS,pathSymbols:CSe,pathTrail:DSe,peek:zn,point:RO,projection:WW,quantileLogNormal:bq,quantileNormal:mO,quantileUniform:xq,quantiles:cq,quantizeInterpolator:fSe,quarter:gwe,quartiles:fq,get random(){return xl},randomInteger:Zxt,randomKDE:mq,randomLCG:Jxt,randomLogNormal:_xe,randomMixture:Exe,randomNormal:pq,randomUniform:wxe,read:oxe,regressionConstant:Sq,regressionExp:Sxe,regressionLinear:Tq,regressionLoess:Axe,regressionLog:xxe,regressionPoly:Cxe,regressionPow:Txe,regressionQuad:Cq,renderModule:PO,repeat:kw,resetDefaultLocale:Kwt,resetSVGClipId:NSe,resetSVGDefIds:tAt,responseType:sxe,runtimeContext:z2e,sampleCurve:yO,sampleLogNormal:gq,sampleNormal:hO,sampleUniform:_q,scale:Jn,sceneEqual:MW,sceneFromJSON:WSe,scenePickVisit:Nk,sceneToJSON:qSe,sceneVisit:Dc,sceneZOrder:pW,scheme:sW,serializeXML:cTe,setHybridRendererOptions:QCt,setRandom:Xxt,span:y2,splitAccessPath:td,stringValue:lt,textMetrics:Cu,timeBin:Gwe,timeFloor:Fwe,timeFormatLocale:YS,timeInterval:V_,timeOffset:jwe,timeSequence:Vwe,timeUnitSpecifier:Iwe,timeUnits:tq,toBoolean:QH,toDate:JH,toNumber:Do,toSet:Cc,toString:ZH,transform:pxe,transforms:Rb,truncate:Awe,truthy:El,tupleid:Bt,typeParsers:H8,utcFloor:Lwe,utcInterval:H_,utcOffset:zwe,utcSequence:Hwe,utcdayofyear:Pwe,utcquarter:ywe,utcweek:Owe,version:XMt,visitArray:dp,week:kwe,writeConfig:z_,zero:Sp,zoomLinear:qH,zoomLog:WH,zoomPow:Sk,zoomSymlog:GH},Symbol.toStringTag,{value:"Module"}));function JMt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var ZMt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},e$t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},t$t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const n$t=Array.prototype.slice,wg=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,n$t.call(t,1))},r$t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var i$t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:r$t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return wg("join",arguments)},indexof:function(){return wg("indexOf",arguments)},lastindexof:function(){return wg("lastIndexOf",arguments)},slice:function(){return wg("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return wg("substring",arguments,String)},split:function(){return wg("split",arguments,String)},replace:function(){return wg("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const s$t=["view","item","group","xy","x","y"],O9=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&O9.add(setImmediate);const o$t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:ZMt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),O9.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||i$t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>e$t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>t$t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,O9.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function ZE(e,t,n,r,i,s){const o=a=>o$t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,s$t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var a$t={operator(e,t){const n=t.ast,r=e.functions;return i=>ZE(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>ZE(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>ZE(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return ZE(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=ZE(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&JMt(o,r,s),l}}};const u$t="vega-lite",l$t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',c$t="5.18.1",f$t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],d$t="https://vega.github.io/vega-lite/",h$t="Vega-Lite is a concise high-level language for interactive visualization.",p$t=["vega","chart","visualization"],m$t="build/vega-lite.js",g$t="build/vega-lite.min.js",y$t="build/vega-lite.min.js",v$t="build/src/index",b$t="build/src/index.d.ts",_$t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},E$t=["bin","build","src","vega-lite*","tsconfig.json"],w$t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},x$t={type:"git",url:"https://github.com/vega/vega-lite.git"},S$t="BSD-3-Clause",T$t={url:"https://github.com/vega/vega-lite/issues"},C$t={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},A$t={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},D$t={vega:"^5.24.0"},I$t={node:">=18"},N$t="yarn@1.22.19",k$t={name:u$t,author:l$t,version:c$t,collaborators:f$t,homepage:d$t,description:h$t,keywords:p$t,main:m$t,unpkg:g$t,jsdelivr:y$t,module:v$t,types:b$t,bin:_$t,files:E$t,scripts:w$t,repository:x$t,license:S$t,bugs:T$t,devDependencies:C$t,dependencies:A$t,peerDependencies:D$t,engines:I$t,packageManager:N$t};function KG(e){return!!e.or}function XG(e){return!!e.and}function QG(e){return!!e.not}function oI(e,t){if(QG(e))oI(e.not,t);else if(XG(e))for(const n of e.and)oI(n,t);else if(KG(e))for(const n of e.or)oI(n,t);else t(e)}function Lv(e,t){return QG(e)?{not:Lv(e.not,t)}:XG(e)?{and:e.and.map(n=>Lv(n,t))}:KG(e)?{or:e.or.map(n=>Lv(n,t))}:t(e)}const tn=structuredClone;function FCe(e){throw new Error(e)}function zb(e,t){const n={};for(const r of t)Ut(e,r)&&(n[r]=e[r]);return n}function Ga(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Er(e)).join(",")})`};function Pn(e){if(Wn(e))return e;const t=yt(e)?e:Er(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function M9(e){return e===!1||e===null}function On(e,t){return e.includes(t)}function ty(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function JG(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function LCe(e,...t){for(const n of t)R$t(e,n??{});return e}function R$t(e,t){for(const n of Ze(t))z_(e,n,t[n],!0)}function mf(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function P$t(e,t){const n=Ze(e),r=Ze(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function BCe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ZG(e,t){for(const n of e)if(t.has(n))return!0;return!1}function $9(e){const t=new Set;for(const n of e){const i=td(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function eY(e,t){return e===void 0||t===void 0?!0:ZG($9(e),$9(t))}function _r(e){return Ze(e).length===0}const Ze=Object.keys,to=Object.values,Nm=Object.entries;function uT(e){return e===!0||e===!1}function ri(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Lx(e,t){return QG(e)?`!(${Lx(e.not,t)})`:XG(e)?`(${e.and.map(n=>Lx(n,t)).join(") && (")})`:KG(e)?`(${e.or.map(n=>Lx(n,t)).join(") || (")})`:t(e)}function Qk(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Qk(e[n],t)&&delete e[n],_r(e)}function j2(e){return e.charAt(0).toUpperCase()+e.substr(1)}function tY(e,t="datum"){const n=td(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(lt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function jCe(e,t="datum"){return`${t}[${lt(td(e).join("."))}]`}function O$t(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Sl(e){return`${td(e).map(O$t).join("\\.")}`}function ny(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Q_(e){return`${td(e).join(".")}`}function Ub(e){return e?td(e).length:0}function Fi(...e){for(const t of e)if(t!==void 0)return t}let zCe=42;function UCe(e){const t=++zCe;return e?String(e)+t:t}function M$t(){zCe=42}function VCe(e){return HCe(e)?e:`__${e}`}function HCe(e){return e.startsWith("__")}function lT(e){if(e!==void 0)return(e%360+360)%360}function QO(e){return Wn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const $oe=Object.getPrototypeOf(structuredClone({}));function Su(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Su(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Su(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==$oe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==$oe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Su(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Er(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const nh="row",rh="column",JO="facet",ii="x",Os="y",Fc="x2",sd="y2",sg="xOffset",J_="yOffset",Lc="radius",Vh="radius2",Ol="theta",Hh="theta2",Bc="latitude",jc="longitude",zc="latitude2",Tl="longitude2",nu="color",od="fill",ad="stroke",ru="shape",qh="size",qy="angle",Wh="opacity",og="fillOpacity",ag="strokeOpacity",ug="strokeWidth",lg="strokeDash",z2="text",Vb="order",U2="detail",ZO="key",ry="tooltip",eM="href",tM="url",nM="description",$$t={x:1,y:1,x2:1,y2:1},qCe={theta:1,theta2:1,radius:1,radius2:1};function WCe(e){return e in qCe}const nY={longitude:1,longitude2:1,latitude:1,latitude2:1};function GCe(e){switch(e){case Bc:return"y";case zc:return"y2";case jc:return"x";case Tl:return"x2"}}function YCe(e){return e in nY}const F$t=Ze(nY),rY={...$$t,...qCe,...nY,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Bv(e){return e===nu||e===od||e===ad}const KCe={row:1,column:1,facet:1},cl=Ze(KCe),iY={...rY,...KCe},L$t=Ze(iY),{order:Zzt,detail:eUt,tooltip:tUt,...B$t}=iY,{row:nUt,column:rUt,facet:iUt,...j$t}=B$t;function z$t(e){return!!j$t[e]}function XCe(e){return!!iY[e]}const U$t=[Fc,sd,zc,Tl,Hh,Vh];function QCe(e){return Wy(e)!==e}function Wy(e){switch(e){case Fc:return ii;case sd:return Os;case zc:return Bc;case Tl:return jc;case Hh:return Ol;case Vh:return Lc}return e}function km(e){if(WCe(e))switch(e){case Ol:return"startAngle";case Hh:return"endAngle";case Lc:return"outerRadius";case Vh:return"innerRadius"}return e}function ud(e){switch(e){case ii:return Fc;case Os:return sd;case Bc:return zc;case jc:return Tl;case Ol:return Hh;case Lc:return Vh}}function iu(e){switch(e){case ii:case Fc:return"width";case Os:case sd:return"height"}}function JCe(e){switch(e){case ii:return"xOffset";case Os:return"yOffset";case Fc:return"x2Offset";case sd:return"y2Offset";case Ol:return"thetaOffset";case Lc:return"radiusOffset";case Hh:return"theta2Offset";case Vh:return"radius2Offset"}}function sY(e){switch(e){case ii:return"xOffset";case Os:return"yOffset"}}function V$t(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const H$t=Ze(rY),{x:sUt,y:oUt,x2:aUt,y2:uUt,xOffset:lUt,yOffset:cUt,latitude:fUt,longitude:dUt,latitude2:hUt,longitude2:pUt,theta:mUt,theta2:gUt,radius:yUt,radius2:vUt,...oY}=rY,q$t=Ze(oY),aY={x:1,y:1},ld=Ze(aY);function Li(e){return e in aY}const uY={theta:1,radius:1},W$t=Ze(uY);function rM(e){return e==="width"?ii:Os}const ZCe={xOffset:1,yOffset:1};function V2(e){return e in ZCe}const{text:bUt,tooltip:_Ut,href:EUt,url:wUt,description:xUt,detail:SUt,key:TUt,order:CUt,...eAe}=oY,G$t=Ze(eAe);function Y$t(e){return!!oY[e]}function K$t(e){switch(e){case nu:case od:case ad:case qh:case ru:case Wh:case ug:case lg:return!0;case og:case ag:case qy:return!1}}const tAe={...aY,...uY,...ZCe,...eAe},iM=Ze(tAe);function Gh(e){return!!tAe[e]}function X$t(e,t){return J$t(e)[t]}const nAe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:AUt,...Q$t}=nAe;function J$t(e){switch(e){case nu:case od:case ad:case nM:case U2:case ZO:case ry:case eM:case Vb:case Wh:case og:case ag:case ug:case JO:case nh:case rh:return nAe;case ii:case Os:case sg:case J_:case Bc:case jc:return Q$t;case Fc:case sd:case zc:case Tl:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case qh:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case lg:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ru:return{point:"always",geoshape:"always"};case z2:return{text:"always"};case qy:return{point:"always",square:"always",text:"always"};case tM:return{image:"always"};case Ol:return{text:"always",arc:"always"};case Lc:return{text:"always",arc:"always"};case Hh:case Vh:return{arc:"always"}}}function U6(e){switch(e){case ii:case Os:case Ol:case Lc:case sg:case J_:case qh:case qy:case ug:case Wh:case og:case ag:case Fc:case sd:case Hh:case Vh:return;case JO:case nh:case rh:case ru:case lg:case z2:case ry:case eM:case tM:case nM:return"discrete";case nu:case od:case ad:return"flexible";case Bc:case jc:case zc:case Tl:case U2:case ZO:case Vb:return}}const Z$t={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},eFt={count:1,min:1,max:1};function Ah(e){return!!e&&!!e.argmin}function cg(e){return!!e&&!!e.argmax}function lY(e){return yt(e)&&!!Z$t[e]}const tFt=new Set(["count","valid","missing","distinct"]);function rAe(e){return yt(e)&&tFt.has(e)}function nFt(e){return yt(e)&&On(["min","max"],e)}const rFt=new Set(["count","sum","distinct","valid","missing"]),iFt=new Set(["mean","average","median","q1","q3","min","max"]);function iAe(e){return ng(e)&&(e=gM(e,void 0)),"bin"+Ze(e).map(t=>sM(e[t])?ri(`_${t}_${Nm(e[t])}`):ri(`_${t}_${e[t]}`)).join("")}function Fr(e){return e===!0||Gy(e)&&!e.binned}function qs(e){return e==="binned"||Gy(e)&&e.binned===!0}function Gy(e){return vt(e)}function sM(e){return e==null?void 0:e.param}function Foe(e){switch(e){case nh:case rh:case qh:case nu:case od:case ad:case ug:case Wh:case og:case ag:case ru:return 6;case lg:return 4;default:return 10}}function H2(e){return!!(e!=null&&e.expr)}function Ra(e){const t=Ze(e||{}),n={};for(const r of t)n[r]=gu(e[r]);return n}function sAe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=zb(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function mp(e){return yt(e)||Ue(e)&&yt(e[0])}function Pt(e){return!!(e!=null&&e.signal)}function fg(e){return!!e.step}function sFt(e){return Ue(e)?!1:"fields"in e&&!("data"in e)}function oFt(e){return Ue(e)?!1:"fields"in e&&"data"in e}function Wd(e){return Ue(e)?!1:"field"in e&&"data"in e}const aFt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},uFt=Ze(aFt),lFt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},F9=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function oAe(e){const t=Ue(e.condition)?e.condition.map(Loe):Loe(e.condition);return{...gu(e),condition:t}}function gu(e){if(H2(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Loe(e){if(H2(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Vr(e){if(H2(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Pt(e)?e:e!==void 0?{value:e}:void 0}function cFt(e){return Pt(e)?e.signal:lt(e)}function Boe(e){return Pt(e)?e.signal:lt(e.value)}function uc(e){return Pt(e)?e.signal:e==null?null:lt(e)}function fFt(e,t,n){for(const r of n){const i=Dh(r,t.markDef,t.config);i!==void 0&&(e[r]=Vr(i))}return e}function aAe(e){return[].concat(e.type,e.style??[])}function ir(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Dh(e,t,n,r)}function Dh(e,t,n,{vgChannel:r}={}){return Fi(r?Jk(e,t,n.style):void 0,Jk(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Jk(e,t,n){return uAe(e,aAe(t),n)}function uAe(e,t,n){t=gt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function lAe(e,t){return gt(e).reduce((n,r)=>(n.field.push(ft(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function cAe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Su(i,r))return;n.push(r)}),n}function fAe(e,t){return Su(e,t)||!t?e:e?[...gt(e),...gt(t)].join(", "):t}function dAe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((mp(n)||Pt(n))&&(mp(r)||Pt(r)))return{explicit:e.explicit,value:fAe(n,r)};if(mp(n)||Pt(n))return{explicit:e.explicit,value:n};if(mp(r)||Pt(r))return{explicit:e.explicit,value:r};if(!mp(n)&&!Pt(n)&&!mp(r)&&!Pt(r))return{explicit:e.explicit,value:cAe(n,r)};throw new Error("It should never reach here")}function cY(e){return`Invalid specification ${Er(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const dFt='Autosize "fit" only works for single views and layered views.';function joe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function zoe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Uoe(e){return e?`Dropping "fit-${e}" because spec has discrete ${iu(e)}.`:'Dropping "fit" because spec has discrete size.'}function fY(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Voe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function hFt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function pFt(e){return`The "nearest" transform is not supported for ${e} marks.`}function hAe(e){return`Selection not supported for ${e} yet.`}function mFt(e){return`Cannot find a selection named "${e}".`}const gFt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",yFt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",vFt="Legend bindings are only supported for selections over an individual field or encoding channel.";function bFt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function _Ft(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const EFt="The same selection must be used to override scale domains in a layered view.",wFt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function xFt(e){return`Unknown repeated value "${e}".`}function Hoe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const SFt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function TFt(e){return`Unrecognized parse "${e}".`}function qoe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const CFt="Attempt to add the same child twice.";function AFt(e){return`Ignoring an invalid transform: ${Er(e)}.`}const DFt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Woe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function IFt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Er(t)} is overridden by a child projection ${Er(n)}.`}const NFt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function kFt(e){return`${e}Offset dropped because ${e} is continuous`}function RFt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Er(n)}}.`}function pAe(e){return`Invalid field type "${e}".`}function PFt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function OFt(e){return`Invalid aggregation operator "${e}".`}function mAe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function MFt(e){return`Position range does not support relative band size for ${e}.`}function L9(e,t){return`Dropping ${Er(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const $Ft="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function oM(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function FFt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function LFt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function BFt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function jFt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function V6(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function zFt(e){return`The ${e} for range marks cannot be an expression`}function UFt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function VFt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function HFt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function qFt(e){return`Cannot use the relative band size with ${e} scale.`}function WFt(e){return`Using unaggregated domain with raw field has no effect (${Er(e)}).`}function GFt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function YFt(e){return`Unaggregated domain is currently unsupported for log scale (${Er(e)}).`}function KFt(e){return`Cannot apply size to non-oriented mark "${e}".`}function XFt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function QFt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function gAe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function yAe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function JFt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Er(n)} and ${Er(r)}). Using ${Er(n)}.`}function ZFt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Er(n)} and ${Er(r)}). Using the union of the two domains.`}function e6t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function t6t(e){return`Dropping sort property ${Er(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Goe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",n6t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",r6t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",i6t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function s6t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function o6t(e){return`Stack is applied to a non-linear scale (${e}).`}function a6t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Zk(e,t){return`Invalid ${e}: ${Er(t)}.`}function u6t(e){return`Dropping day from datetime ${Er(e)} as day cannot be combined with other units.`}function l6t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function c6t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function f6t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Yoe(e){return`1D error band does not support ${e}.`}function vAe(e){return`Channel ${e} is required for "binned" bin.`}function d6t(e){return`Channel ${e} should not be used with "binned" bin.`}function h6t(e){return`Domain for ${e} is required for threshold scale.`}const bAe=HH(VH);let Hb=bAe;function p6t(e){return Hb=e,Hb}function m6t(){return Hb=bAe,Hb}function it(...e){Hb.warn(...e)}function g6t(...e){Hb.debug(...e)}function Yy(e){if(e&&vt(e)){for(const t of hY)if(t in e)return!0}return!1}const _Ae=["january","february","march","april","may","june","july","august","september","october","november","december"],y6t=_Ae.map(e=>e.substr(0,3)),EAe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],v6t=EAe.map(e=>e.substr(0,3));function b6t(e){if(QO(e)&&(e=+e),Wn(e))return e>4&&it(Zk("quarter",e)),e-1;throw new Error(Zk("quarter",e))}function _6t(e){if(QO(e)&&(e=+e),Wn(e))return e-1;{const t=e.toLowerCase(),n=_Ae.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=y6t.indexOf(r);if(i!==-1)return i;throw new Error(Zk("month",e))}}function E6t(e){if(QO(e)&&(e=+e),Wn(e))return e%7;{const t=e.toLowerCase(),n=EAe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=v6t.indexOf(r);if(i!==-1)return i;throw new Error(Zk("day",e))}}function dY(e,t){const n=[];if(t&&e.day!==void 0&&Ze(e).length>1&&(it(u6t(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?_6t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?b6t(e.quarter):e.quarter;n.push(Wn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?E6t(e.day):e.day;n.push(Wn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function iy(e){const n=dY(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function w6t(e){const n=dY(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function x6t(e){const t=dY(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const wAe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},hY=Ze(wAe);function S6t(e){return!!wAe[e]}function Ky(e){return vt(e)?e.binned:xAe(e)}function xAe(e){return e&&e.startsWith("binned")}function pY(e){return e.startsWith("utc")}function T6t(e){return e.substring(3)}const C6t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function aM(e){return hY.filter(t=>TAe(e,t))}function SAe(e){const t=aM(e);return t[t.length-1]}function TAe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function A6t(e,t,{end:n}={end:!1}){const r=tY(t),i=pY(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of hY)TAe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),w6t(a)}function CAe(e){if(!e)return;const t=aM(e);return`timeUnitSpecifier(${Er(t)}, ${Er(C6t)})`}function D6t(e,t,n){if(!e)return;const r=CAe(e);return`${n||pY(e)?"utc":"time"}Format(${t}, ${r})`}function Ds(e){if(!e)return;let t;return yt(e)?xAe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:vt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),pY(t.unit)&&(t.utc=!0,t.unit=T6t(t.unit)),t}function I6t(e){const{utc:t,...n}=Ds(e);return n.unit?(t?"utc":"")+Ze(n).map(r=>ri(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ze(n).map(r=>ri(`_${r}_${n[r]}`)).join("")}function AAe(e,t=n=>n){const n=Ds(e),r=SAe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=DAe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(iy(a))} - ${t(iy(i))}`}}const N6t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function k6t(e){return!!N6t[e]}function DAe(e,t=1){if(k6t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function R6t(e){return e==null?void 0:e.param}function mY(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function gY(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function yY(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function vY(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function bY(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function _Y(e){if(e!=null&&e.field){if(Ue(e.range)&&e.range.length===2)return!0;if(Pt(e.range))return!0}return!1}function EY(e){return!!(e!=null&&e.field)&&(Ue(e.oneOf)||Ue(e.in))}function P6t(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function IAe(e){return EY(e)||mY(e)||_Y(e)||gY(e)||vY(e)||yY(e)||bY(e)}function Gc(e,t){return yM(e,{timeUnit:t,wrapTime:!0})}function O6t(e,t){return e.map(n=>Gc(n,t))}function NAe(e,t=!0){const{field:n}=e,r=Ds(e.timeUnit),{unit:i,binned:s}=r||{},o=ft(e,{expr:"datum"}),a=i?`time(${s?o:A6t(i,n)})`:o;if(mY(e))return`${a}===${Gc(e.equal,i)}`;if(gY(e)){const u=e.lt;return`${a}<${Gc(u,i)}`}else if(vY(e)){const u=e.gt;return`${a}>${Gc(u,i)}`}else if(yY(e)){const u=e.lte;return`${a}<=${Gc(u,i)}`}else if(bY(e)){const u=e.gte;return`${a}>=${Gc(u,i)}`}else{if(EY(e))return`indexof([${O6t(e.oneOf,i).join(",")}], ${a}) !== -1`;if(P6t(e))return wY(a,e.valid);if(_Y(e)){const{range:u}=e,l=Pt(u)?{signal:`${u.signal}[0]`}:u[0],c=Pt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Gc(l,i)+", "+Gc(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Gc(l,i)}`),c!==null&&f.push(`${a} <= ${Gc(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Er(e)}`)}function wY(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function M6t(e){return IAe(e)&&e.timeUnit?{...e,timeUnit:Ds(e.timeUnit)}:e}const q2={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function $6t(e){return e==="quantitative"||e==="temporal"}function kAe(e){return e==="ordinal"||e==="nominal"}const sy=q2.quantitative,xY=q2.ordinal,qb=q2.temporal,SY=q2.nominal,Z_=q2.geojson;function F6t(e){if(e)switch(e=e.toLowerCase(),e){case"q":case sy:return"quantitative";case"t":case qb:return"temporal";case"o":case xY:return"ordinal";case"n":case SY:return"nominal";case Z_:return"geojson"}}const Ya={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},B9={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function L6t(e,t){const n=B9[e],r=B9[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const B6t={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Koe(e){return B6t[e]}const RAe=new Set(["linear","log","pow","sqrt","symlog"]),PAe=new Set([...RAe,"time","utc"]);function OAe(e){return RAe.has(e)}const MAe=new Set(["quantile","quantize","threshold"]),j6t=new Set([...PAe,...MAe,"sequential","identity"]),z6t=new Set(["ordinal","bin-ordinal","point","band"]);function Ns(e){return z6t.has(e)}function ju(e){return j6t.has(e)}function lc(e){return PAe.has(e)}function Wb(e){return MAe.has(e)}const U6t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function V6t(e){return!yt(e)&&!!e.name}function $Ae(e){return e==null?void 0:e.param}function H6t(e){return e==null?void 0:e.unionWith}function q6t(e){return vt(e)&&"field"in e}const W6t={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:DUt,domain:IUt,range:NUt,rangeMax:kUt,rangeMin:RUt,scheme:PUt,...G6t}=W6t,Y6t=Ze(G6t);function j9(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return lc(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return lc(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return lc(e);case"nice":return lc(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ju(e)&&!On(["log","time","utc","threshold","quantile"],e)}}function FAe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Bv(e)?void 0:HFt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function K6t(e,t){return On([xY,SY],t)?e===void 0||Ns(e):t===qb?On([Ya.TIME,Ya.UTC,void 0],e):t===sy?OAe(e)||Wb(e)||e===void 0:!0}function X6t(e,t,n=!1){if(!Gh(e))return!1;switch(e){case ii:case Os:case sg:case J_:case Ol:case Lc:return lc(t)||t==="band"?!0:t==="point"?!n:!1;case qh:case ug:case Wh:case og:case ag:case qy:return lc(t)||Wb(t)||On(["band","point","ordinal"],t);case nu:case od:case ad:return t!=="band";case lg:case ru:return t==="ordinal"||Wb(t)}}function TY(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=AY(e);return st(n)&&!rAe(n.aggregate)&&i&&lc(i.get("type"))?Q6t({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function Q6t({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return ir("invalid",n,i)===null?[J6t(e,t),r]:r}function J6t(e,t){const n=CY(e,!0),i=Wy(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function CY(e,t=!0){return wY(yt(e)?e:ft(e,{expr:"datum"}),!t)}function Z6t(e){const{datum:t}=e;return Yy(t)?iy(t):`${Er(t)}`}function _0(e,t,n,r){const i={};if(t&&(i.scale=t),cd(e)){const{datum:s}=e;Yy(s)?i.signal=iy(s):Pt(s)?i.signal=s.signal:H2(s)?i.signal=s.expr:i.value=s}else i.field=ft(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function eR({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Pt(o)&&0<o&&o<1?"datum":void 0,u=ft(t,{expr:a,suffix:i}),l=n!==void 0?ft(n,{expr:a}):ft(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Pt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function eLt({scaleName:e,fieldDef:t}){const n=ft(t,{expr:"datum"}),r=ft(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function AY({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ln(t)){const f=o==null?void 0:o.get("type");if(da(t)){c??(c=Rm({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Fr(d)||c&&h&&p===qb)return a!=null&&a.impute?_0(t,s,{binSuffix:"mid"},{offset:u}):c&&!Ns(f)?eR({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):_0(t,s,K2(t,e)?{binSuffix:"range"}:{},{offset:u});if(qs(d)){if(st(n))return eR({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});it(vAe(e===ii?Fc:sd))}}return _0(t,s,Ns(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Ic(t)){const f=t.value,d=u?{offset:u}:{};return{...Bx(e,f),...d}}}return yn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Bx(e,t){return On(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:On(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Vr(t)}function oy(e){return e&&e!=="number"&&e!=="time"}function LAe(e,t,n){return`${e}(${t}${n?`, ${Er(n)}`:""})`}const tLt="  ";function DY({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(oy(n))return cc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=BAe(e,r,i),a=Gb(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return cc({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return cc({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&st(e)&&e.timeUnit===void 0)return cc({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Kb(e)){const c=rLt({field:o,timeUnit:st(e)?(u=Ds(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Qy(e)&&((l=e.scale)==null?void 0:l.type)===Ya.UTC});return c?{signal:c}:void 0}if(t=z9({type:a,specifiedFormat:t,config:s,normalizeStack:i}),st(e)&&Fr(e.bin)){const c=ft(e,{expr:r,binSuffix:"end"});return{signal:W2(o,c,t,n,s)}}else return t||Gb(e)==="quantitative"?{signal:`${UAe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function BAe(e,t,n){return st(e)?n?`${ft(e,{expr:t,suffix:"end"})}-${ft(e,{expr:t,suffix:"start"})}`:ft(e,{expr:t}):Z6t(e)}function cc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=BAe(e,r,i)),o!=="datum.value"&&st(e)&&Fr(e.bin)){const a=ft(e,{expr:r,binSuffix:"end"});return{signal:W2(o,a,t,n,s)}}return{signal:LAe(n,o,t)}}function jAe(e,t,n,r,i,s){var o;if(!(yt(r)&&oy(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Gb(e)==="quantitative"&&(i.normalizedNumberFormatType&&Yb(e)&&e.stack==="normalize"||i.numberFormatType))){if(Yb(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return z9({type:"quantitative",config:i,normalizeStack:!0});if(Kb(e)){const a=st(e)?(o=Ds(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:nLt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return z9({type:t,specifiedFormat:n,config:i})}}function zAe(e,t,n){var r;if(e&&(Pt(e)||e==="number"||e==="time"))return e;if(Kb(t)&&n!=="time"&&n!=="utc")return st(t)&&((r=Ds(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function z9({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(yt(t))return t;if(e===sy)return r?n.normalizedNumberFormat:n.numberFormat}function nLt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:CAe(t)}:r?void 0:n.timeFormat)}function UAe(e,t){return`format(${e}, "${t||""}")`}function Xoe(e,t,n,r){return oy(n)?LAe(n,e,t):UAe(e,(yt(t)?t:void 0)??r.numberFormat)}function W2(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return W2(e,t,i.numberFormat,i.numberFormatType,i);const s=Xoe(e,n,r,i),o=Xoe(t,n,r,i);return`${wY(e,!1)} ? "null" : ${s} + "${tLt}" + ${o}`}function rLt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=yt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):D6t(t,e,s)}const va={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},VAe=va.arc,uM=va.area,lM=va.bar,iLt=va.image,cM=va.line,fM=va.point,sLt=va.rect,tR=va.rule,HAe=va.text,IY=va.tick,oLt=va.trail,NY=va.circle,kY=va.square,qAe=va.geoshape;function Xy(e){return["line","area","trail"].includes(e)}function cT(e){return["rect","bar","image","arc"].includes(e)}const aLt=new Set(Ze(va));function Lf(e){return e.type}const uLt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],lLt=["fill","fillOpacity"],cLt=[...uLt,...lLt],fLt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Qoe=Ze(fLt),dLt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},hLt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},pLt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},WAe=Ze(pLt);function ay(e){return e&&e.band!=null}const mLt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},GAe=5,gLt={binSpacing:1,continuousBandSize:GAe,minBandSize:.25,timeUnitBandPosition:.5},yLt={binSpacing:0,continuousBandSize:GAe,minBandSize:.25,timeUnitBandPosition:.5},vLt={thickness:1};function bLt(e){return Lf(e)?e.type:e}const dM="min",_Lt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Joe(e){return e in _Lt}function YAe(e){return!!(e!=null&&e.encoding)}function Tf(e){return e&&(e.op==="count"||!!e.field)}function KAe(e){return e&&Ue(e)}function G2(e){return"row"in e||"column"in e}function RY(e){return!!e&&"header"in e}function hM(e){return"facet"in e}function ELt(e){return e.param}function wLt(e){return e&&!yt(e)&&"repeat"in e}function Zoe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function PY(e){return"sort"in e}function Rm({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(st(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Dh("timeUnitBandPosition",n,r);if(Fr(s))return .5}}function XAe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=iu(e),u=ir(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(st(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Dh("timeUnitBandSize",r,i)};if(Fr(h)&&!Ns(s))return{band:1}}if(cT(r.type))return s?Ns(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function QAe(e,t,n,r){return Fr(e.bin)||e.timeUnit&&da(e)&&e.type==="temporal"?Rm({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function JAe(e){return e&&!!e.sort&&!e.field}function pM(e){return e&&"condition"in e}function mM(e){const t=e==null?void 0:e.condition;return!!t&&!Ue(t)&&st(t)}function Y2(e){const t=e==null?void 0:e.condition;return!!t&&!Ue(t)&&ln(t)}function xLt(e){const t=e==null?void 0:e.condition;return!!t&&(Ue(t)||Ic(t))}function st(e){return e&&(!!e.field||e.aggregate==="count")}function Gb(e){return e==null?void 0:e.type}function cd(e){return e&&"datum"in e}function Bp(e){return da(e)&&!rR(e)||nR(e)}function eae(e){return da(e)&&e.type==="quantitative"&&!e.bin||nR(e)}function nR(e){return cd(e)&&Wn(e.datum)}function ln(e){return st(e)||cd(e)}function da(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Ic(e){return e&&"value"in e&&"value"in e}function Qy(e){return e&&("scale"in e||"sort"in e)}function Yb(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function ZAe(e){return e&&"legend"in e}function eDe(e){return e&&("format"in e||"formatType"in e)}function SLt(e){return Ga(e,["legend","axis","header","scale"])}function TLt(e){return"op"in e}function ft(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(ALt(e))n=VCe("count");else{let o;if(!t.nofn)if(TLt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Fr(a)?(o=iAe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?cg(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Ah(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Ky(l)&&(o=I6t(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Q_(n):t.expr?jCe(n,t.expr)+s:Sl(n)+s}function rR(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return st(e)&&!!e.bin;case"temporal":return!1}throw new Error(pAe(e.type))}function CLt(e){var t;return Qy(e)&&Wb((t=e.scale)==null?void 0:t.type)}function ALt(e){return e.aggregate==="count"}function DLt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Fr(r))return`${n} (binned)`;if(i&&!Ky(i)){const a=(o=Ds(i))==null?void 0:o.unit;if(a)return`${n} (${aM(a).join("-")})`}else if(s)return cg(s)?`${n} for max ${s.argmax}`:Ah(s)?`${n} for min ${s.argmin}`:`${j2(s)} of ${n}`;return n}function ILt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(cg(t))return`${i} for argmax(${t.argmax})`;if(Ah(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Ky(r)?Ds(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Fr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const tDe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return ILt(e);default:return DLt(e,t)}};let nDe=tDe;function rDe(e){nDe=e}function NLt(){rDe(tDe)}function jv(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=OY(e))==null?void 0:a.title;if(!st(e))return i??e.title;const s=e,o=r?MY(s,t):void 0;return n?Fi(i,s.title,o):i??s.title??o}function OY(e){if(Yb(e)&&e.axis)return e.axis;if(ZAe(e)&&e.legend)return e.legend;if(RY(e)&&e.header)return e.header}function MY(e,t){return nDe(e,t)}function iR(e){if(eDe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=OY(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function kLt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(PY(e)&&Ue(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!cg(n)&&!Ah(n))return"quantitative";if(Qy(e)&&((s=e.scale)!=null&&s.type))switch(B9[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Bf(e){if(st(e))return e;if(mM(e))return e.condition}function os(e){if(ln(e))return e;if(Y2(e))return e.condition}function iDe(e,t,n,r={}){if(yt(e)||Wn(e)||ng(e)){const i=yt(e)?"string":Wn(e)?"number":"boolean";return it(RFt(t,i,e)),{value:e}}return ln(e)?sR(e,t,n,r):Y2(e)?{...e,condition:sR(e.condition,t,n,r)}:e}function sR(e,t,n,r){if(eDe(e)){const{format:i,formatType:s,...o}=e;if(oy(s)&&!n.customFormatTypes)return it(Woe(t)),sR(o,t,n,r)}else{const i=Yb(e)?"axis":ZAe(e)?"legend":RY(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(oy(o)&&!n.customFormatTypes)return it(Woe(t)),sR({...e,[i]:a},t,n,r)}}return st(e)?$Y(e,t,r):RLt(e)}function RLt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Wn(n)?"quantitative":yt(n)?"nominal":Yy(n)?"temporal":void 0,{...e,type:t}}function $Y(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!lY(r)&&!cg(r)&&!Ah(r)&&(it(OFt(r)),delete a.aggregate),i&&(a.timeUnit=Ds(i)),o&&(a.field=`${o}`),Fr(s)&&(a.bin=gM(s,t)),qs(s)&&!Li(t)&&it(d6t(t)),da(a)){const{type:u}=a,l=F6t(u);u!==l&&(a.type=l),u!=="quantitative"&&rAe(r)&&(it(PFt(u,r)),a.type="quantitative")}else if(!QCe(t)){const u=kLt(a,t);a.type=u}if(da(a)){const{compatible:u,warning:l}=PLt(a,t)||{};u===!1&&it(l)}if(PY(a)&&yt(a.sort)){const{sort:u}=a;if(Joe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Joe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(RY(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function gM(e,t){return ng(e)?{maxbins:Foe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Foe(t)}:e}const A1={compatible:!0};function PLt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case nh:case rh:case JO:return rR(e)?A1:{compatible:!1,warning:LFt(t)};case ii:case Os:case sg:case J_:case nu:case od:case ad:case z2:case U2:case ZO:case ry:case eM:case tM:case qy:case Ol:case Lc:case nM:return A1;case jc:case Tl:case Bc:case zc:return n!==sy?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:A1;case Wh:case og:case ag:case ug:case qh:case Hh:case Vh:case Fc:case sd:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:A1;case ru:case lg:return!rR(e)&&!CLt(e)?{compatible:!1,warning:BFt(t)}:A1;case Vb:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:A1}}function Kb(e){const{formatType:t}=iR(e);return t==="time"||!t&&OLt(e)}function OLt(e){return e&&(e.type==="temporal"||st(e)&&!!e.timeUnit)}function yM(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ds(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return H2(e)?a=e.expr:Pt(e)?a=e.signal:Yy(e)?(o=!0,a=iy(e)):(yt(e)||Wn(e))&&o&&(a=`datetime(${Er(e)})`,S6t(s)&&(Wn(e)&&e<1e4||yt(e)&&isNaN(Date.parse(e)))&&(a=iy({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Er(e)}function sDe(e,t){const{type:n}=e;return t.map(r=>{const i=st(e)&&!Ky(e.timeUnit)?e.timeUnit:void 0,s=yM(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function K2(e,t){return Fr(e.bin)?Gh(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const tae={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function X2(e){return e==null?void 0:e.condition}const oDe=["domain","grid","labels","ticks","title"],MLt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},aDe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},$Lt={...aDe,style:1,labelExpr:1,encoding:1};function nae(e){return!!$Lt[e]}const FLt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},uDe=Ze(FLt);function Yh(e){return"mark"in e}class vM{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Yh(t)?bLt(t.mark)===this.name:!1}}function E0(e,t){const n=e&&e[t];return n?Ue(n)?ty(n,r=>!!r.field):st(n)||mM(n):!1}function lDe(e,t){const n=e&&e[t];return n?Ue(n)?ty(n,r=>!!r.field):st(n)||cd(n)||Y2(n):!1}function cDe(e,t){if(Li(t)){const n=e[t];if((st(n)||cd(n))&&(kAe(n.type)||st(n)&&n.timeUnit)){const r=sY(t);return lDe(e,r)}}return!1}function FY(e){return ty(L$t,t=>{if(E0(e,t)){const n=e[t];if(Ue(n))return ty(n,r=>!!r.aggregate);{const r=Bf(n);return r&&!!r.aggregate}}return!1})}function fDe(e,t){const n=[],r=[],i=[],s=[],o={};return LY(e,(a,u)=>{if(st(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=OY(a),m=p==null?void 0:p.title;let g=ft(a,{forAs:!0});const y={...m?[]:{title:jv(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(cg(c)?(v="argmax",g=ft({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Ah(c)?(v="argmin",g=ft({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),da(a)&&Fr(f)){if(r.push({bin:f,field:l,as:g}),n.push(ft(a,{binSuffix:"end"})),K2(a,u)&&n.push(ft(a,{binSuffix:"range"})),Li(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",QCe(u)||(y.type=sy)}else if(d&&!Ky(d)){i.push({timeUnit:d,field:l,as:g});const v=da(a)&&a.type!==qb&&"time";v&&(u===z2||u===ry?y.formatType=v:Y$t(u)?y.legend={formatType:v,...y.legend}:Li(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function LLt(e,t,n){const r=X$t(t,n);if(r){if(r==="binned"){const i=e[t===Fc?ii:Os];return!!(st(i)&&st(e[t])&&qs(i.bin))}}else return!1;return!0}function BLt(e,t,n,r){const i={};for(const s of Ze(e))XCe(s)||it(FFt(s));for(let s of H$t){if(!e[s])continue;const o=e[s];if(V2(s)){const a=V$t(s),u=i[a];if(st(u)&&$6t(u.type)&&st(o)&&!u.timeUnit){it(kFt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(it(NFt),s=Ol),!LLt(e,s,t)){it(oM(s,t));continue}if(s===qh&&t==="line"){const a=Bf(e[s]);if(a!=null&&a.aggregate){it($Ft);continue}}if(s===nu&&(n?"fill"in e:"stroke"in e)){it(mAe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===U2||s===Vb&&!Ue(o)&&!Ic(o)||s===ry&&Ue(o)){if(o){if(s===Vb){const a=e[s];if(JAe(a)){i[s]=a;continue}}i[s]=gt(o).reduce((a,u)=>(st(u)?a.push($Y(u,s)):it(L9(u,s)),a),[])}}else{if(s===ry&&o===null)i[s]=null;else if(!st(o)&&!cd(o)&&!Ic(o)&&!pM(o)&&!Pt(o)){it(L9(o,s));continue}i[s]=iDe(o,s,r)}}return i}function bM(e,t){const n={};for(const r of Ze(e)){const i=iDe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function jLt(e){const t=[];for(const n of Ze(e))if(E0(e,n)){const r=e[n],i=gt(r);for(const s of i)st(s)?t.push(s):mM(s)&&t.push(s.condition)}return t}function LY(e,t,n){if(e)for(const r of Ze(e)){const i=e[r];if(Ue(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function zLt(e,t,n,r){return e?Ze(e).reduce((i,s)=>{const o=e[s];return Ue(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function dDe(e,t){return Ze(t).reduce((n,r)=>{switch(r){case ii:case Os:case eM:case nM:case tM:case Fc:case sd:case sg:case J_:case Ol:case Hh:case Lc:case Vh:case Bc:case jc:case zc:case Tl:case z2:case ru:case qy:case ry:return n;case Vb:if(e==="line"||e==="trail")return n;case U2:case ZO:{const i=t[r];if(Ue(i)||st(i))for(const s of gt(i))s.aggregate||n.push(ft(s,{}));return n}case qh:if(e==="trail")return n;case nu:case od:case ad:case Wh:case og:case ag:case lg:case ug:{const i=Bf(t[r]);return i&&!i.aggregate&&n.push(ft(i,{})),n}}},[])}function ULt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ue(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ue(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function U9(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${BY(t)}`:"";return{field:o+t.field,type:t.type,title:Pt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=jLt(n).map(SLt);return{tooltip:[...i,...mf(s,Pn)]}}function BY(e){const{title:t,field:n}=e;return Fi(t,n)}function jY(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=BY(n);return hDe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...yt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function hDe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Lf(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...ng(e[t])?{}:e[t]}}]:[]}function pDe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:BA(s,n),continuousAxisChannelDef2:BA(o,n),continuousAxisChannelDefError:BA(a,n),continuousAxisChannelDefError2:BA(u,n),continuousAxis:i}}function BA(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&it(f6t(n,t)),r}else return e}function mDe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Lf(n)&&n.orient)return n.orient;if(Bp(i)){if(Bp(s)){const o=st(i)&&i.aggregate,a=st(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Kb(s)&&!Kb(i)?"horizontal":"vertical"}return"horizontal"}else{if(Bp(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const oR="boxplot",VLt=["box","median","outliers","rule","ticks"],HLt=new vM(oR,yDe);function gDe(e){return Wn(e)?"tukey":e}function yDe(e,{config:t}){e={...e,encoding:bM(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Lf(n)?n:{type:n};i&&it(hAe("boxplot"));const u=a.extent??t.boxplot.extent,l=ir("size",a,t),c=a.invalid,f=gDe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:w}=qLt(e,u,t),S=Q_(m.field),{color:C,size:A,...D}=b,I=Be=>jY(a,g,m,Be,t.boxplot),O=I(D),R=I(b),M=(vt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=I({...D,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:M}}}}),P=U9([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),j={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},z=f==="min-max"?P:U9([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...O({partName:"ticks",mark:j,positionPrefix:"lower_whisker",extraEncoding:z}),...O({partName:"ticks",mark:j,positionPrefix:"upper_whisker",extraEncoding:z})],$=[...f!=="tukey"?V:[],...R({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...F({partName:"median",mark:{type:"tick",invalid:c,...vt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:P})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:$};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,B=`(${W} - ${U})`,q=`${U} - ${u} * ${B}`,Y=`${W} + ${u} * ${B}`,re=`datum["${m.field}"]`,pe={joinaggregate:vDe(m.field),groupby:y},_e={transform:[{filter:`(${q} <= ${re}) && (${re} <= ${Y})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:V},{tooltip:de,...ye}=D,{scale:Ce,axis:ve}=m,qe=BY(m),He=Ga(ve,["title"]),ht=hDe(a,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${q}) || (${re} > ${Y})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...qe!==void 0?{title:qe}:{},...Ce!==void 0?{scale:Ce}:{},..._r(He)?{}:{axis:He}},...ye,...C?{color:C}:{},...w?{tooltip:w}:{}}})[0];let rt;const Pe=[...d,...h,pe];return ht?rt={transform:Pe,layer:[ht,_e]}:(rt=_e,rt.transform.unshift(...Pe)),{...o,layer:[rt,{transform:p,layer:$}]}}function vDe(e){const t=Q_(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function qLt(e,t,n){const r=mDe(e,oR),{continuousAxisChannelDef:i,continuousAxis:s}=pDe(e,r,oR),o=i.field,a=Q_(o),u=gDe(t),l=[...vDe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=ULt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=fDe(p,n),E=r==="vertical"?"horizontal":"vertical",_=r,w=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:w,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:h}}const zY="errorbar",WLt=["ticks","rule"],GLt=new vM(zY,bDe);function bDe(e,{config:t}){e={...e,encoding:bM(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=_De(e,zY,t);delete s.size;const c=jY(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function YLt(e,t){const{encoding:n}=e;if(KLt(n))return{orient:mDe(e,t),inputType:"raw"};const r=XLt(n),i=QLt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ln(a)&&ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(ln(a)){if(Bp(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ln(u)){if(Bp(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ln(u)&&!ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(ln(c)&&!ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(ln(a)&&ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ln(a)){if(Bp(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ln(l)){if(Bp(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function KLt(e){return(ln(e.x)||ln(e.y))&&!ln(e.x2)&&!ln(e.y2)&&!ln(e.xError)&&!ln(e.xError2)&&!ln(e.yError)&&!ln(e.yError2)}function XLt(e){return ln(e.x2)||ln(e.y2)}function QLt(e){return ln(e.xError)||ln(e.xError2)||ln(e.yError)||ln(e.yError2)}function _De(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Lf(r)?r:{type:r};s&&it(hAe(t));const{orient:l,inputType:c}=YLt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=pDe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=JLt(u,f,d,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:_,[m==="x"?"xError":"yError"]:w,[m==="x"?"xError2":"yError2"]:S,...C}=i,{bins:A,timeUnits:D,aggregate:I,groupby:O,encoding:R}=fDe(C,n),M=[...I,...g],F=c!=="raw"?[]:O,P=U9(v,f,R,b);return{transform:[...a.transform??[],...A,...D,...M.length===0?[]:[{aggregate:M,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:R,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:P}}function JLt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&it(c6t(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:j2(h)},{fieldPrefix:"upper_",titlePrefix:rae(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:rae(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:jv({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:jv({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:jv({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&it(l6t(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:ny(ny(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function rae(e,t,n){return`${j2(e)} ${n} ${t}`}const UY="errorband",ZLt=["band","borders"],e4t=new vM(UY,EDe);function EDe(e,{config:t}){e={...e,encoding:bM(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=_De(e,UY,t),l=o,c=jY(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?it(Yoe("interpolate")):l.tension&&it(Yoe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const wDe={};function VY(e,t,n){const r=new vM(e,t);wDe[e]={normalizer:r,parts:n}}function t4t(){return Ze(wDe)}VY(oR,yDe,VLt);VY(zY,bDe,WLt);VY(UY,EDe,ZLt);const n4t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],xDe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},SDe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},r4t=Ze(xDe),i4t=Ze(SDe),s4t={header:1,headerRow:1,headerColumn:1,headerFacet:1},TDe=Ze(s4t),CDe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],o4t={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},a4t={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Nc="_vgsid_",u4t={point:{on:"click",fields:[Nc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function HY(e){return e==="legend"||!!(e!=null&&e.legend)}function H6(e){return HY(e)&&vt(e)}function qY(e){return!!(e!=null&&e.select)}function ADe(e){const t=[];for(const n of e||[]){if(qY(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function l4t(e){return _M(e)||GY(e)||WY(e)}function WY(e){return"concat"in e}function _M(e){return"vconcat"in e}function GY(e){return"hconcat"in e}function DDe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function jf(e){return vt(e)&&e.step!==void 0}function iae(e){return e.view||e.width||e.height}const sae=20,c4t={align:1,bounds:1,center:1,columns:1,spacing:1},f4t=Ze(c4t);function d4t(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(hM(e)&&!G2(e.facet)||WY(e))&&(i.columns=o),_M(e)&&(i.columns=1);for(const a of f4t)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Wn(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function V9(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function aR(e,t){const n=uR(e,t);return jf(n)?n.step:IDe}function uR(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Fi(n,{step:e.step})}const IDe=20,h4t={continuousWidth:200,continuousHeight:200,step:IDe},p4t={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:h4t,mark:hLt,arc:{},area:{},bar:gLt,circle:{},geoshape:{},image:{},line:{},point:{},rect:yLt,rule:{color:"black"},square:{},text:{color:"black"},tick:vLt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:U6t,projection:{},legend:o4t,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:u4t,style:{},title:{},facet:{spacing:sae},concat:{spacing:sae},normalizedNumberFormat:".0%"},wd=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],oae={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},aae={blue:wd[0],orange:wd[1],red:wd[2],teal:wd[3],green:wd[4],yellow:wd[5],purple:wd[6],pink:wd[7],brown:wd[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function m4t(e={}){return{signals:[{name:"color",value:vt(e)?{...aae,...e}:aae}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function g4t(e){return{signals:[{name:"fontSize",value:vt(e)?{...oae,...e}:oae}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function y4t(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function NDe(e){const t=Ze(e||{}),n={};for(const r of t){const i=e[r];n[r]=X2(i)?oAe(i):gu(i)}return n}function v4t(e){const t=Ze(e),n={};for(const r of t)n[r]=NDe(e[r]);return n}const b4t=[...WAe,...uDe,...TDe,"background","padding","legend","lineBreak","scale","style","title","view"];function kDe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=j_({},tn(p4t),n?y4t(n):{},t?m4t(t):{},r?g4t(r):{},s||{});i&&z_(o,"selection",i,!0);const a=Ga(o,b4t);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=gu(o[u]));for(const u of WAe)o[u]&&(a[u]=Ra(o[u]));for(const u of uDe)o[u]&&(a[u]=NDe(o[u]));for(const u of TDe)o[u]&&(a[u]=Ra(o[u]));return o.legend&&(a.legend=Ra(o.legend)),o.scale&&(a.scale=Ra(o.scale)),o.style&&(a.style=v4t(o.style)),o.title&&(a.title=Ra(o.title)),o.view&&(a.view=Ra(o.view)),a}const _4t=new Set(["view",...aLt]),E4t=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],w4t={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...dLt};function x4t(e){e=tn(e);for(const t of E4t)delete e[t];if(e.axis)for(const t in e.axis)X2(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of n4t)delete e.legend[t];if(e.mark){for(const t of Qoe)delete e.mark[t];e.mark.tooltip&&vt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(ADe(e.params)),delete e.params);for(const t of _4t){for(const r of Qoe)delete e[t][r];const n=w4t[t];if(n)for(const r of n)delete e[t][r];T4t(e,t)}for(const t of t4t())delete e[t];S4t(e);for(const t in e)vt(e[t])&&_r(e[t])&&delete e[t];return _r(e)?void 0:e}function S4t(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=sAe(e.title);_r(t)||(e.style["group-title"]={...e.style["group-title"],...t}),_r(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),_r(r)?delete e.title:e.title=r}function T4t(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};_r(s)||(e.style[n??t]=s),delete e[t]}function EM(e){return"layer"in e}function C4t(e){return"repeat"in e}function A4t(e){return!Ue(e.repeat)&&e.repeat.layer}class YY{map(t,n){return hM(t)?this.mapFacet(t,n):C4t(t)?this.mapRepeat(t,n):GY(t)?this.mapHConcat(t,n):_M(t)?this.mapVConcat(t,n):WY(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(EM(t))return this.mapLayer(t,n);if(Yh(t))return this.mapUnit(t,n);throw new Error(cY(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const D4t={zero:1,center:1,normalize:1};function I4t(e){return e in D4t}const N4t=new Set([VAe,lM,uM,tR,fM,NY,kY,cM,HAe,IY]),k4t=new Set([lM,uM,VAe]);function D1(e){return st(e)&&Gb(e)==="quantitative"&&!e.bin}function uae(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(st(o)&&st(a))if(D1(o)&&D1(a)){if(o.stack)return t;if(a.stack)return i;const u=st(o)&&!!o.aggregate,l=st(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(D1(o))return t;if(D1(a))return i}else{if(D1(o))return s&&n==="vertical"?void 0:t;if(D1(a))return s&&n==="horizontal"?void 0:i}}function R4t(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function RDe(e,t){var m,g;const n=Lf(e)?e:{type:e},r=n.type;if(!N4t.has(r))return null;const i=uae(t,"x",n)||uae(t,"theta",n);if(!i)return null;const s=t[i],o=st(s)?ft(s,{}):void 0,a=R4t(i),u=[],l=new Set;if(t[a]){const y=t[a],v=st(y)?ft(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=st(f)?ft(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=q$t.reduce((y,v)=>{if(v!=="tooltip"&&E0(t,v)){const b=t[v];for(const E of gt(b)){const _=Bf(E);if(_.aggregate)continue;const w=ft(_,{});(!w||!l.has(w))&&y.push({channel:v,fieldDef:_})}}return y},[]);let p;return s.stack!==void 0?ng(s.stack)?p=s.stack?"zero":null:p=s.stack:k4t.has(r)&&(p="zero"),!p||!I4t(p)||FY(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Ya.LINEAR&&s!=null&&s.stack&&it(o6t(s.scale.type)),ln(t[ud(i)])?(s.stack!==void 0&&it(s6t(i)),null):(st(s)&&s.aggregate&&!rFt.has(s.aggregate)&&it(a6t(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Xy(r),stackBy:h,offset:p}))}function PDe(e,t,n){const r=Ra(e),i=ir("orient",r,n);if(r.orient=$4t(r.type,t,i),i!==void 0&&i!==r.orient&&it(VFt(r.orient,i)),r.type==="bar"&&r.orient){const u=ir("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:mLt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=ir("opacity",r,n),o=ir("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=O4t(r.type,t)),ir("cursor",r,n)===void 0&&(r.cursor=P4t(r,t,n)),r}function P4t(e,t,n){return t.href||e.href||ir("href",e,n)?"pointer":e.cursor}function O4t(e,t){if(On([fM,IY,NY,kY],e)&&!FY(t))return .7}function M4t(e,t,{graticule:n}){if(n)return!1;const r=Dh("filled",e,t),i=e.type;return Fi(r,i!==fM&&i!==cM&&i!==tR)}function $4t(e,t,n){switch(e){case fM:case NY:case kY:case HAe:case sLt:case iLt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case lM:if(st(r)&&(qs(r.bin)||st(i)&&i.aggregate&&!r.aggregate))return"vertical";if(st(i)&&(qs(i.bin)||st(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(st(r)&&r.type===sy&&!Fr(r.bin)||nR(r))&&st(i)&&qs(i.bin)?"horizontal":"vertical";if(!o)return(st(i)&&i.type===sy&&!Fr(i.bin)||nR(i))&&st(r)&&qs(r.bin)?"vertical":"horizontal"}case tR:if(s&&!(st(r)&&qs(r.bin))&&o&&!(st(i)&&qs(i.bin)))return;case uM:if(o)return st(i)&&qs(i.bin)?"horizontal":"vertical";if(s)return st(r)&&qs(r.bin)?"vertical":"horizontal";if(e===tR){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case cM:case IY:{const a=eae(r),u=eae(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=da(r)&&r.type===qb,c=da(i)&&i.type===qb;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function F4t(e){const{point:t,line:n,...r}=e;return Ze(r).length>1?r:r.type}function L4t(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ga(e[t],["point","line"])});return e}function q6(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?vt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?vt(t.point)?t.point:{}:void 0}function lae(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class B4t{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Yh(t)){const{mark:r,encoding:i}=t,s=Lf(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!q6(s,n[s.type],i);case"area":return!!q6(s,n[s.type],i)||!!lae(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=bM(l,i),d=Lf(a)?a:{type:a},h=q6(d,i[d.type],f),p=d.type==="area"&&lae(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:F4t({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Ga(f,["shape"])}],g=RDe(PDe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Ga(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...zb(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...zb(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:L4t(i)})}}function j4t(e,t){return t?G2(e)?MDe(e,t):ODe(e,t):e}function W6(e,t){return t?MDe(e,t):e}function H9(e,t,n){const r=t[e];if(wLt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};it(xFt(r.repeat));return}return t}function ODe(e,t){if(e=H9("field",e,t),e!==void 0){if(e===null)return null;if(PY(e)&&Tf(e.sort)){const n=H9("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function cae(e,t){if(st(e))return ODe(e,t);{const n=H9("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function fae(e,t){if(ln(e)){const n=cae(e,t);if(n)return n;if(pM(e))return{condition:e.condition}}else{if(Y2(e)){const n=cae(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function MDe(e,t){const n={};for(const r in e)if(Ut(e,r)){const i=e[r];if(Ue(i))n[r]=i.map(s=>fae(s,t)).filter(s=>s);else{const s=fae(i,t);s!==void 0&&(n[r]=s)}}return n}class z4t{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Yh(t)){const{encoding:n,mark:r}=t;if(r==="line"||Lf(r)&&r.type==="line")for(const i of U$t){const s=Wy(i),o=n[s];if(n[i]&&(st(o)&&!qs(o.bin)||cd(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return it(UFt(!!i.x2,!!i.y2)),r({...t,mark:vt(s)?{...s,type:"rule"}:"rule"},n)}}class U4t extends YY{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[HLt,GLt,e4t,new B4t,new z4t]}map(t,n){if(Yh(t)){const r=E0(t.encoding,nh),i=E0(t.encoding,rh),s=E0(t.encoding,JO);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=W6(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return A4t(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${ri(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ue(r)&&t.columns&&(t=Ga(t,["columns"]),it(Hoe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ue(r)&&r.row||[u?u.row:null],f=!Ue(r)&&r.column||[u?u.column:null],d=Ue(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ue(r)?`${ri(p)}`:(r.row?`row_${ri(m)}`:"")+(r.column?`column_${ri(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Ga(b,["data"]))}const h=Ue(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return G2(r)&&t.columns&&(t=Ga(t,["columns"]),it(Hoe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=hae({parentProjection:o,projection:i}),l=dae({parentEncoding:s,encoding:W6(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=W6(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&it(jFt([...r?[nh]:[],...i?[rh]:[]]));const o={},a={};for(const u of[nh,rh]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:j4t(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:dae({parentEncoding:n,encoding:s,layer:!0}),parentProjection:hae({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function dae({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ze(e),...Ze(t)]);for(const s of i){const o=t[s],a=e[s];if(ln(o)){const u={...a,...o};r[s]=u}else Y2(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Ic(a)||Pt(a)||ln(a)||Ue(a))&&(r[s]=a)}}else r=t;return!r||_r(r)?void 0:r}function hae(e){const{parentProjection:t,projection:n}=e;return t&&n&&it(IFt({parentProjection:t,projection:n})),n??t}function KY(e){return"filter"in e}function V4t(e){return(e==null?void 0:e.stop)!==void 0}function $De(e){return"lookup"in e}function H4t(e){return"data"in e}function q4t(e){return"param"in e}function W4t(e){return"pivot"in e}function G4t(e){return"density"in e}function Y4t(e){return"quantile"in e}function K4t(e){return"regression"in e}function X4t(e){return"loess"in e}function Q4t(e){return"sample"in e}function J4t(e){return"window"in e}function Z4t(e){return"joinaggregate"in e}function e5t(e){return"flatten"in e}function t5t(e){return"calculate"in e}function FDe(e){return"bin"in e}function n5t(e){return"impute"in e}function r5t(e){return"timeUnit"in e}function i5t(e){return"aggregate"in e}function s5t(e){return"stack"in e}function o5t(e){return"fold"in e}function a5t(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function u5t(e){return e.map(t=>KY(t)?{filter:Lv(t.filter,M6t)}:t)}class l5t extends YY{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=pae(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=pae(t,n),t.encoding){const r={};for(const[i,s]of Nm(t.encoding))r[i]=LDe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Nm(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of to(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function pae(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(KY(s))return{filter:q9(s,t)};if(FDe(s)&&Gy(s.bin))return{...s,bin:BDe(s.bin)};if($De(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function LDe(e,t){var r,i;const n=tn(e);if(st(n)&&Gy(n.bin)&&(n.bin=BDe(n.bin)),Qy(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(pM(n))if(Ue(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:q9(s,t)}});else{const{selection:s,param:o,test:a,...u}=LDe(n.condition,t);n.condition=o?n.condition:{...u,test:q9(n.condition,t)}}return n}function BDe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function q9(e,t){const n=r=>Lv(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Lv(e.test||e.filter,r=>r.selection?n(r.selection):r)}class W9 extends YY{map(t,n){const r=n.selections??[];if(t.params&&!Yh(t)){const i=[];for(const s of t.params)qY(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(yt(a)&&(a===t.name||i.includes(a))||Ue(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=W9.prototype[e];W9.prototype[e]=function(n,r){return t.call(this,n,c5t(n,r))}}function c5t(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function jDe(e,t){t===void 0&&(t=kDe(e.config));const n=p5t(e,t),{width:r,height:i}=e,s=m5t(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const f5t=new U4t,d5t=new l5t,h5t=new W9;function p5t(e,t={}){const n={config:t};return h5t.map(f5t.map(d5t.map(e,n),n),n)}function mae(e){return yt(e)?{type:e}:e??{}}function m5t(e,t,n){let{width:r,height:i}=t;const s=Yh(e)||EM(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(it(joe("width")),r=void 0),i=="container"&&(it(joe("height")),i=void 0));const a={type:"pad",...o,...n?mae(n.autosize):{},...mae(e.autosize)};if(a.type==="fit"&&!s&&(it(dFt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&it(zoe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&it(zoe("height")),!Su(a,{type:"pad"}))return a}function g5t(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function y5t(e){return e?`fit-${rM(e)}`:"fit"}const v5t=["background","padding"];function gae(e,t){const n={};for(const r of v5t)e&&e[r]!==void 0&&(n[r]=gu(e[r]));return t&&(n.params=e.params),n}class Kh{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Kh(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Fi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ze(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Zc(e){return{explicit:!0,value:e}}function fu(e){return{explicit:!1,value:e}}function zDe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:wM(t,n,r,i)}}function wM(e,t,n,r){return e.explicit&&t.explicit&&it(JFt(n,r,e.value,t.value)),e}function Pm(e,t,n,r,i=wM){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Su(e.value,t.value)?e:i(e,t,n,r)}class b5t extends Kh{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Xb(e){return"url"in e}function fT(e){return"values"in e}function UDe(e){return"name"in e&&!Xb(e)&&!fT(e)&&!am(e)}function am(e){return e&&(VDe(e)||HDe(e)||XY(e))}function VDe(e){return"sequence"in e}function HDe(e){return"sphere"in e}function XY(e){return"graticule"in e}var ei;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ei||(ei={}));function qDe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Sl(i.field),i}function uy(e,t=!0,n=Bo){if(Ue(e)){const r=e.map(i=>uy(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Yy(e))return n(t?iy(e):x6t(e));return t?n(Er(e)):e}function _5t(e,t){for(const n of to(e.component.selection??{})){const r=n.name;let i=`${r}${Mm}, ${n.resolve==="global"?"true":`{unit: ${w0(e)}}`}`;for(const s of CM)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+J5t,on:[{events:{signal:n.name+Mm},update:`modify(${lt(n.name+ly)}, ${i})`}]})}return QY(t)}function E5t(e,t){if(e.component.selection&&Ze(e.component.selection).length){const n=lt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:ig("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return QY(t)}function w5t(e,t){let n=!1;for(const r of to(e.component.selection??{})){const i=r.name,s=lt(i+ly);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${lIe}(${s}, ${lt(a)}${u}`})}n=!0;for(const a of CM)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),QY(t)}function x5t(e,t){const n=[...t],r=w0(e,{escape:!1});for(const i of to(e.component.selection??{})){const s={name:i.name+ly};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Nc}}]),i.init){const a=i.project.items.map(qDe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Nc]:uy(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:uy(u,!1)}))}n.filter(a=>a.name===i.name+ly).length||n.push(s)}return n}function WDe(e,t){for(const n of to(e.component.selection??{}))for(const r of CM)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function S5t(e,t){for(const n of e.children)wi(n)&&(t=WDe(n,t));return t}function T5t(e,t,n,r){const i=pIe(e,t.param,t);return{signal:ju(n.get("type"))&&Ue(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function QY(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class mr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){it(CFt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ka extends mr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${UCe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function G6(e){return e.as!==void 0}function yae(e){return`${e}_end`}class Cf extends mr{clone(){return new Cf(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Ky(u)){if(wi(n)){const{mark:c,markDef:f,config:d}=n,h=Rm({fieldDef:s,markDef:f,config:d});(cT(c)||h)&&(l={timeUnit:Ds(u),field:a})}}else l={as:ft(s,{forAs:!0}),field:a,timeUnit:u};if(wi(n)){const{mark:c,markDef:f,config:d}=n,h=Rm({fieldDef:s,markDef:f,config:d});cT(c)&&Li(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Pn(l)]=l)}return i},{});return _r(r)?null:new Cf(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ds(r),o={...i,timeUnit:s};return new Cf(t,{[Pn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Nm(this.timeUnits)){const s=G6(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(to(this.timeUnits).map(t=>G6(t)?t.as:yae(t.field)))}dependentFields(){return new Set(to(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Pn(this.timeUnits)}`}assemble(){const t=[];for(const n of to(this.timeUnits)){const{rectBandPosition:r}=n,i=Ds(n.timeUnit);if(G6(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Sl(s),type:"timeunit",...a?{units:aM(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...vae(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=GDe({timeUnit:i,field:o}),u=yae(o);t.push({type:"formula",expr:a,as:u}),t.push(...vae([o,u],r,i))}}return t}}const xM="offsetted_rect_start",SM="offsetted_rect_end";function GDe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=SAe(r),{part:o,step:a}=DAe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function vae([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:bae([GDe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${xM}`},{type:"formula",expr:bae([i,s],n+.5),as:`${e}_${SM}`}]}return[]}function bae([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Q2="_tuple_fields";class C5t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const A5t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new C5t),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=ri(`${r}_${g}`);for(let v=1;a.has(y);v++)y=ri(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?gt(n.value):null;let{fields:d,encodings:h}=vt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(vt(p))for(const m of Ze(p))z$t(m)?(h||(h=[])).push(m):l==="interval"?(it(wFt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){it(hFt(p,m.aggregate));continue}else if(!g){it(Voe(p));continue}if(m.timeUnit&&!Ky(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Pn(y)]=y}if(!s[g]){const y=l==="interval"&&Gh(p)&&ju(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Nc,YCe(p)?(v.geoChannel=p,v.channel=GCe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else it(Voe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Nc}f&&(t.init=f.map(p=>i.items.map(m=>vt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),_r(o)||(i.timeUnit=new Cf(null,o))},signals:(e,t,n)=>{const r=t.name+Q2;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(qDe)})}},ih={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Gh(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&it(yFt),!s||!ju(o)){it(gFt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||_ae(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(lIe)>=0)i.update=`{${r.map(o=>`${lt(Sl(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${lt(Sl(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!_ae(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function G9(e,t){return`domain(${lt(e.scaleName(t))})`}function _ae(e){return e.parent&&iE(e.parent)&&!e.parent.parent}const zv="_brush",YDe="_scale_trigger",ew="geo_interval_init_tick",KDe="_init",D5t="_center",I5t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...vt(n.select)?n.select:{}};i.fields=[Nc],i.encodings||(i.encodings=n.value?Ze(n.value):[jc,Bc]),n.select={type:"interval",...i}}if(t.translate&&!ih.defined(t)){const i=`!event.item || event.item.mark.name !== ${lt(t.name+zv)}`;for(const s of t.events){if(!s.between){it(`${s} is not an ordered event stream for interval selections.`);continue}const o=gt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Mm,s=to(t.project.hasChannel).filter(a=>a.channel===ii||a.channel===Os),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(N5t(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=lt(e.projectionName()),u=e.projectionName()+D5t,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=_=>e.getSizeSignalRef(_).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+KDe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(w=>w.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${lt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${w0(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,E=s.map(_=>_.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:ew}]:[]],update:b}]})}else{if(!ih.defined(t)){const l=r+YDe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=lt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=ju(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${w0(e)}, fields: ${r+Q2}, values`;return n.concat({name:i,...o?{init:`{${u}: ${uy(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===ew).length||n.unshift({name:ew,value:null,on:[{events:"timer{1}",update:`${ew} === null ? {} : ${ew}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${lt(t.name+ly)})`;if(ih.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ze(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${w0(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ze(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+zv}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+zv,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function N5t(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=lt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===ii?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=ih.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:uy(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+YDe},update:ju(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:uy(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===ii?0:1,h=t.name+KDe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const k5t={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+Q2,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=to(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+zv):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${w0(e)}, `;if(t.project.hasSelectionId)l+=`${Nc}: ${o}[${lt(Nc)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${lt(e.vgField(d.channel,{}))}], ${o}[${lt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${lt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Mm,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function eE(e,t,n,r){const i=pM(t)&&t.condition,s=r(t);if(i){const a=gt(i).map(u=>{const l=r(u);if(ELt(u)){const{param:c,empty:f}=u;return{test:hIe(e,{param:c,empty:f}),...l}}else return{test:fR(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function JY(e,t="text"){const n=e.encoding[t];return eE(e,n,t,r=>TM(r,e.config))}function TM(e,t,n="datum"){if(e){if(Ic(e))return Vr(e.value);if(ln(e)){const{format:r,formatType:i}=iR(e);return DY({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function XDe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ue(o))return{tooltip:Eae({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return eE(e,o,"tooltip",u=>{const l=TM(u,i,a);if(l)return l;if(u===null)return;let c=ir("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),yt(c))return{value:c};if(vt(c))return Pt(c)?c:c.content==="encoding"?Eae(n,s,i,t):{signal:a}})}}function QDe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Wy(f),h=da(c)?c:{...c,type:e[d].type},p=h.title||MY(h,i),m=gt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Li(f)){const y=f==="x"?"x2":"y2",v=Bf(e[y]);if(qs(h.bin)&&v){const b=ft(h,{expr:o}),E=ft(v,{expr:o}),{format:_,formatType:w}=iR(h);g=W2(b,E,_,w,i),s[y]=!0}}if((Li(f)||f===Ol||f===Lc)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=iR(h);g=DY({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=TM(h,i,o).signal),a.push({channel:f,key:m,value:g})}LY(e,(c,f)=>{st(c)?u(c,f):mM(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Eae(e,t,n,{reactiveGeom:r}={}){const i=QDe(e,t,n,{reactiveGeom:r}),s=Nm(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function R5t(e){const{markDef:t,config:n}=e,r=ir("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...P5t(e),...O5t(e)}}function P5t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=ir("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in lFt?{}:{ariaRoleDescription:{value:t}}}function O5t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return eE(e,s,"description",u=>TM(u,e.config));const o=ir("description",n,r);if(o!=null)return{description:Vr(o)};if(r.aria===!1)return{};const a=QDe(t,i,r);if(!_r(a))return{description:{signal:Nm(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Es(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=ir(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Vr(u)));const l=i[e];return eE(t,l,o??e,c=>AY({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function JDe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??ir("filled",n,i),a=On(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=ir(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=ir(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Vr(u)}:{},...l?{stroke:Vr(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&it(mAe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Es("color",e,{vgChannel:c,defaultValue:o?u:l}),...Es("fill",e,{defaultValue:r.fill?u:void 0}),...Es("stroke",e,{defaultValue:r.stroke?l:void 0})}}function M5t(e){const{encoding:t,mark:n}=e,r=t.order;return!Xy(n)&&Ic(r)?eE(e,r,"zindex",i=>Vr(i.value)):{}}function Qb({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:AY({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Vr(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Io(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[ud(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Qb({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=ZY({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Li(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:$5t({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function $5t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(ln(n)&&i&&t===i.fieldChannel){if(st(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return eR({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return _0(n,r,{suffix:"end"},{offset:s})}return TY(e)}function ZY({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Wy(n),u=km(n),l=ir(n,s,o,{vgChannel:u});if(l!==void 0)return Bx(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!On([Ya.LOG,Ya.TIME,Ya.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[iu(n)],mult:.5}}}}const F5t={left:"x",center:"xc",right:"x2"},L5t={top:"y",middle:"yc",bottom:"y2"};function ZDe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return km(e);const i=e==="x"?"align":"baseline",s=ir(i,t,n);let o;return Pt(s)?(it(zFt(i)),o=void 0):o=s,e==="x"?F5t[o||(r==="top"?"left":"center")]:L5t[o||r]}function lR(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?eIe(e,t,{defaultPos:n,defaultPos2:r}):Io(e,t,{defaultPos:n})}function eIe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=ud(e),a=iu(e),u=B5t(t,r,o),l=u[a]?ZDe(e,i,s):km(e);return{...Io(e,t,{defaultPos:n,vgChannel:l}),...u}}function B5t(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Wy(n),l=iu(n),c=km(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Qb({channel:n,markDef:s,encoding:r,model:e}):Qb({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=iu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=j5t({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:jA(n,s)||jA(n,{[n]:Jk(n,s,a.style),[l]:Jk(l,s,a.style)})||jA(n,a[i])||jA(n,a.mark)||{[c]:ZY({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function j5t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?_0(t,s,{suffix:"start"},{offset:u}):TY({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function jA(e,t){const n=iu(e),r=km(e);if(t[r]!==void 0)return{[r]:Bx(e,t[r])};if(t[e]!==void 0)return{[r]:Bx(e,t[e])};if(t[n]){const i=t[n];if(ay(i))it(MFt(n));else return{[n]:Bx(e,i)}}}function Om(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=ud(t),a=iu(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??ir("size",i,n,{vgChannel:a}),p=JCe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return st(u)&&(Fr(u.bin)||qs(u.bin)||u.timeUnit&&!l)&&!(h&&!ay(h))&&!r[p]&&!Ns(f)?V5t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ln(u)&&Ns(f)||m)&&!l?U5t(u,t,e):eIe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function z5t(e,t,n,r,i,s,o){if(ay(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Dh("minBandSize",{type:o},r);return{signal:c?`max(${uc(c)}, ${l})`:l}}else i.band!==1&&(it(qFt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Pt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(fg(u)&&Wn(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Fi(u,o==="bar"?l:c);if(Pt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Wn(f))return{signal:`${1-f} * ${e}`}}return{value:aR(r.view,e)-2}}function U5t(e,t,n){var A,D;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=iu(t),f=ud(t),d=JCe(t),h=n.scaleName(d),p=n.getScaleComponent(sY(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Es("size",n,{vgChannel:c,defaultRef:Vr(r.size)}):it(KFt(r.type)));const y=!!g,v=XAe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:z5t(c,h||u,p||l,s,v,!!e,r.type)};const b=((D=l||p)==null?void 0:D.get("type"))==="band"&&ay(v)&&!y?"top":"middle",E=ZDe(t,r,s,b),_=E==="xc"||E==="yc",{offset:w,offsetType:S}=Qb({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),C=TY({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:w,defaultRef:ZY({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:_?S==="encoding"?0:.5:Pt(v)?{signal:`(1-${v})/2`}:ay(v)?(1-v.band)/2:0});if(c)return{[E]:C,...g};{const I=km(f),O=g[c],R=w?{...O,offset:w}:O;return{[E]:C,[I]:Ue(C)?[C[0],{...C[1],offset:R}]:{...C,offset:R}}}}function wae(e,t,n,r,i,s,o){if(WCe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Pt(n)||Pt(i)||Pt(r)||s){const l=uc(n),c=uc(i),f=uc(r),d=uc(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function V5t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var D;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=XAe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(D=r.component.axes[n])==null?void 0:D[0],h=(d==null?void 0:d.get("translate"))??.5,p=Li(n)?ir("binSpacing",s,i)??0:0,m=ud(n),g=km(n),y=km(m),v=Dh("minBandSize",s,i),{offset:b}=Qb({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=Qb({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),_=eLt({fieldDef:e,scaleName:u}),w=wae(n,p,c,h,b,v,_),S=wae(m,p,c,h,E??b,v,_),C=Pt(f)?{signal:`(1-${f.signal})/2`}:ay(f)?(1-f.band)/2:.5,A=Rm({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Fr(e.bin)||e.timeUnit){const I=e.timeUnit&&A!==.5;return{[y]:xae({fieldDef:e,scaleName:u,bandPosition:C,offset:S,useRectOffsetField:I}),[g]:xae({fieldDef:e,scaleName:u,bandPosition:Pt(C)?{signal:`1-${C.signal}`}:1-C,offset:w,useRectOffsetField:I})}}else if(qs(e.bin)){const I=_0(e,u,{},{offset:S});if(st(t))return{[y]:I,[g]:_0(t,u,{},{offset:w})};if(Gy(e.bin)&&e.bin.step)return{[y]:I,[g]:{signal:`scale("${u}", ${ft(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}it(vAe(m))}function xae({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return eR({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:xM,endSuffix:SM}:{}})}const H5t=new Set(["aria","width","height"]);function Ml(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?JDe(e):{};return{...q5t(e.markDef,t),...Sae(e,"fill",n),...Sae(e,"stroke",r),...Es("opacity",e),...Es("fillOpacity",e),...Es("strokeOpacity",e),...Es("strokeWidth",e),...Es("strokeDash",e),...M5t(e),...XDe(e),...JY(e,"href"),...R5t(e)}}function Sae(e,t,n){const{config:r,mark:i,markDef:s}=e;if(ir("invalid",s,r)==="hide"&&n&&!Xy(i)){const a=W5t(e,{invalid:!0,channels:iM});if(a)return{[t]:[{test:a,value:null},...gt(n)]}}return n?{[t]:n}:{}}function q5t(e,t){return uFt.reduce((n,r)=>(!H5t.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Vr(e[r])),n),{})}function W5t(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&ju(u)&&(s[l]=!0)}return s},{}),i=Ze(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>CY(o,t)).join(` ${s} `)}}function eK(e){const{config:t,markDef:n}=e;if(ir("invalid",n,t)){const i=G5t(e,{channels:ld});if(i)return{defined:{signal:i}}}return{}}function G5t(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&ju(l)&&(s[c]=!0)}return s},{}),i=Ze(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>CY(o,t)).join(` ${s} `)}}function Tae(e,t){if(t!==void 0)return{[e]:Vr(t)}}const Y6="voronoi",tIe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Y6)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Xy(s))return it(pFt(s)),n;const o={name:e.getName(Y6),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...XDe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(Y6)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},nIe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!HY(e.bind),parse:(e,t,n)=>cIe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=tIe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=ri(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:uy(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${lt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Mm)[0],o=r+Q2,a=i.items.map(l=>ri(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},cR="_toggle",rIe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+cR,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Mm,r=t.name+cR;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${w0(e)}}, `)+`${r} ? ${n} : null`}},Y5t={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=yt(t.clear)?ig(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(nIe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===ri(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Mm);r(i,"null"),rIe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+cR),r(i,"false"))}return n}},iIe={defined:e=>{const t=e.resolve==="global"&&e.bind&&HY(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Nc;return t&&!n&&it(vFt),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=yt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},cIe(t,r),vt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=gt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=H6(t.bind)?t.bind.legend:"click",s=yt(i)?ig(i,"view"):gt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=H6(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${ri(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Mm),o=r+Q2,a=i.items.filter(d=>d.hasLegend).map(d=>ri(`${r}_${ri(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+cR),f=H6(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function K5t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of to(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&iIe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const sIe="_translate_anchor",oIe="_translate_delta",X5t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=ih.defined(t),s=r+sIe,{x:o,y:a}=t.project.hasChannel;let u=ig(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+zv,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?G9(e,ii):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?G9(e,Os):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+oIe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Cae(e,t,o,"width",n),a!==void 0&&Cae(e,t,a,"height",n),n}};function Cae(e,t,n,r,i){const s=t.name,o=s+sIe,a=s+oIe,u=n.channel,l=ih.defined(t),c=i.filter(_=>_.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===ii?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const aIe="_zoom_anchor",uIe="_zoom_delta",Q5t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=ih.defined(t),s=r+uIe,{x:o,y:a}=t.project.hasChannel,u=lt(e.scaleName(ii)),l=lt(e.scaleName(Os));let c=ig(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+zv,f))),n.push({name:r+aIe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Aae(e,t,o,"width",n),a!==void 0&&Aae(e,t,a,"height",n),n}};function Aae(e,t,n,r,i){const s=t.name,o=n.channel,a=ih.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?G9(e,o):u.name,h=s+uIe,p=`${s}${aIe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const ly="_store",Mm="_tuple",J5t="_modify",lIe="vlSelectionResolve",CM=[k5t,I5t,A5t,rIe,nIe,ih,iIe,Y5t,X5t,Q5t,tIe];function Z5t(e){let t=e.parent;for(;t&&!Du(t);)t=t.parent;return t}function w0(e,{escape:t}={escape:!0}){let n=t?lt(e.name):e.name;const r=Z5t(e);if(r){const{facet:i}=r;for(const s of cl)i[s]&&(n+=` + '__facet_${s}_' + (facet[${lt(r.vgField(s))}])`)}return n}function tK(e){return to(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function cIe(e,t){(yt(t.select)||!t.select.on)&&delete e.events,(yt(t.select)||!t.select.clear)&&delete e.clear,(yt(t.select)||!t.select.toggle)&&delete e.toggle}function Y9(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Y9(e.object)),t.push(...Y9(e.property))),t)}function fIe(e){return e.object.type==="MemberExpression"?fIe(e.object):e.object.name==="datum"}function dIe(e){const t=EG(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&fIe(r)&&n.add(Y9(r).slice(1).join("."))}),n}class tE extends mr{clone(){return new tE(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=fR(this.model,this.filter,this),this._dependentFields=dIe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function e8t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=ri(i.name),o=i.select,a=yt(o)?o:o.type,u=vt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:yt(u.on)?ig(u.on,"scope"):gt(tn(u.on))},f=tn(i);for(const d of CM)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function hIe(e,t,n,r="datum"){const i=yt(t)?t:t.param,s=ri(i),o=lt(s+ly);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${lt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function pIe(e,t,n){const r=ri(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&it(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${lt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,it((a.length?"Multiple ":"No ")+`matching ${lt(i)} encoding found for selection ${lt(n.param)}. Using "field": ${lt(s)}.`)):s=a[0].field}return`${o.name}[${lt(Sl(s))}]`}function t8t(e,t){for(const[n,r]of Nm(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ka(new tE(t,e,{param:n}),i,ei.Lookup,e.component.data.outputNodeRefCounts)}}function fR(e,t,n){return Lx(t,r=>yt(r)?r:R6t(r)?hIe(e,r,n):NAe(r))}function n8t(e,t){if(e)return Ue(e)&&!mp(e)?e.map(n=>MY(n,t)).join(", "):e}function K6(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Vw(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=MLt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(X2(m)){const{condition:g,...y}=m,v=gt(g),b=tae[h];if(b){const{vgProp:E,part:_}=b,w=[...v.map(S=>{const{test:C,...A}=S;return{test:fR(null,C),...A}}),y];K6(c,_,E,w),delete c[h]}else if(b===null){const E={signal:v.map(_=>{const{test:w,...S}=_;return`${fR(null,w)} ? ${Boe(S)} : `}).join("")+Boe(y)};c[h]=E}}else if(Pt(m)){const g=tae[h];if(g){const{vgProp:y,part:v}=g;K6(c,v,y,m),delete c[h]}}On(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},_r(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Fi(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Pt(c.encode.labels.update.text)&&(p=ny(a,"datum.label",c.encode.labels.update.text.signal)),K6(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of oDe)e.hasAxisPart(p)||delete c.encode[p];_r(c.encode)&&delete c.encode}const h=n8t(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Fi(l,0)}}}}function mIe(e){const{axes:t}=e.component,n=[];for(const r of ld)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function r8t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Vw(i,"grid",t)),...r.map(i=>Vw(i,"grid",t)),...n.map(i=>Vw(i,"main",t)),...r.map(i=>Vw(i,"main",t))].filter(i=>i)}function Dae(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ze(o),...Ze(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${uc(o[c])} : ${uc(a[c])}`};return l}return t[i]})])}function i8t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:OAe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Pt(n)?"axisOrient":`axis${j2(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Dae(a,r,e,n),vgAxisConfig:Dae(u,r,e,n),axisConfigStyle:s8t([...u,...a],r)}}function s8t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=gt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function K9(e,t,n,r={}){var s;const i=uAe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Iae={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??o8t(n,e),gridScale:({model:e,channel:t})=>a8t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||yIe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||gIe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??l8t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??c8t(t.type,n,st(t)&&!!t.timeUnit,st(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??d8t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:h8t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=vIe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return cAe(i?[Zoe(i)]:[],st(o)?[Zoe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>p8t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??m8t(n,t)};function o8t(e,t){return!Ns(e)&&st(t)&&!Fr(t==null?void 0:t.bin)&&!qs(t==null?void 0:t.bin)}function a8t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function u8t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Pt(s)?s:lT(s);{const{configValue:o}=K9("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?lT(o):n===ii&&On([SY,xY],e.type)&&!(st(e)&&e.timeUnit)?270:void 0}}function X9(e){return`(((${e.signal} % 360) + 360) % 360)`}function gIe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Pt(e)){const i=X9(e),s=Pt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Pt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Pt(e)){const i=X9(e),s=Pt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Pt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function yIe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Pt(e)){const o=X9(e),a=Pt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Pt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function l8t(e,t){if(t==="x"&&On(["quantitative","temporal"],e))return!0}function c8t(e,t,n,r){if(n&&!vt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function f8t(e){return e==="x"?"bottom":"left"}function d8t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ns(t)&&t!=="log"){if(st(e)){if(Fr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&On(["month","hours","day","quarter"],(i=Ds(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function h8t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(st(t)){const{timeUnit:n}=t;if(n){const r=AAe(n);if(r)return{signal:r}}}}function vIe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return fAe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function p8t(e,t){const n=e.values;if(Ue(n))return sDe(t,n);if(Pt(n))return n}function m8t(e,t){return e==="rect"&&rR(t)?1:0}class Jb extends mr{clone(){return new Jb(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=dIe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Qy(r)&&KAe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${NAe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Jb(t,{calculate:u,as:Zb(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Pn(this.transform)}`}}function Zb(e,t,n){return ft(e,{prefix:t,suffix:"sort_index",...n})}function AM(e,t){return On(["top","bottom"],t)?"column":On(["left","right"],t)||e==="row"?"row":"column"}function e_(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Fi((t||{})[e],i[e],n.header[e])}function DM(e,t,n,r){const i={};for(const s of e){const o=e_(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const nK=["row","column"],rK=["header","footer"];function g8t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=DM(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=AM(t,a),l=lT(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",..._Ie(l,u),...bIe(u,l,s),...EIe(r,i,t,r4t,xDe)}}}function bIe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=yIe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function _Ie(e,t){const n=gIe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function y8t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of rK)if(n[i])for(const s of n[i]){const o=b8t(e,t,i,n,s);o!=null&&r.push(o)}return r}function v8t(e,t){const{sort:n}=e;return Tf(n)?{field:ft(n,{expr:"datum"}),order:n.order??"ascending"}:Ue(n)?{field:Zb(e,t,{expr:"datum"}),order:"ascending"}:{field:ft(e,{expr:"datum"}),order:n??"ascending"}}function Q9(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=DM(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=DY({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=AM(t,a);return{text:{signal:u?ny(ny(u,"datum.label",l),"datum.value",ft(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",..._Ie(s,c),...bIe(c,s,o),...EIe(n,e,t,i4t,SDe)}}function b8t(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=DM(["labelOrient"],o.header,a,t);(t==="row"&&!On(["top","bottom"],f)||t==="column"&&!On(["left","right"],f))&&(s=Q9(o,t,a))}const u=Du(e)&&!G2(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:v8t(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const _8t={column:{start:0,end:1},row:{start:1,end:0}};function E8t(e,t){return _8t[t][e]}function w8t(e,t){const n={};for(const r of cl){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=DM(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=AM(r,o),u=E8t(s,a);u!==void 0&&(n[a]=u)}}return _r(n)?void 0:n}function EIe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=e_(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function iK(e){return[...zA(e,"width"),...zA(e,"height"),...zA(e,"childWidth"),...zA(e,"childHeight")]}function zA(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Ns(o)&&fg(a)){const u=e.scaleName(n);return Du(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Nae(u,a)]:[Nae(u,a),{name:i,update:wIe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=V9(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Nae(e,t){const n=`${e}_step`;return Pt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function wIe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Fi(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${uc(o)}, ${uc(s)}) * ${e}_step`}function xIe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function SIe(e,t){return Ze(e).reduce((n,r)=>{const i=e[r];return{...n,...eE(t,i,r,s=>Vr(s.value))}},{})}function TIe(e,t){if(Du(t))return e==="theta"?"independent":"shared";if(iE(t))return"shared";if(fK(t))return Li(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function sK(e,t){const n=e.scale[t],r=Li(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&it(e6t(t)),"independent"):e[r][t]||"shared"}const x8t={...a4t,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},CIe=Ze(x8t);class S8t extends Kh{}const kae={symbols:T8t,gradient:C8t,labels:A8t,entries:D8t};function T8t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...fFt({},n,cLt),...JDe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?AIe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===nu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Vr(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Vr(m??1));else if(Ue(f.fill)){const g=J9(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Vr(g))}}if(f.stroke){if(r==="stroke"||!c&&r===nu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ue(f.stroke)){const g=Fi(J9(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Wh){const g=st(t)&&IIe(n,i,t);g?f.opacity=[{test:g,...Vr(m??1)},Vr(u.legend.unselectedOpacity)]:m&&(f.opacity=Vr(m))}return f={...f,...e},_r(f)?void 0:f}function C8t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?AIe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Vr(l)),a={...a,...e},_r(a)?void 0:a}function A8t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=st(t)?IIe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;oy(c)?f=cc({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=cc({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&st(t)&&t.timeUnit===void 0&&(f=cc({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return _r(d)?void 0:d}function D8t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function AIe(e){return DIe(e,(t,n)=>Math.max(t,n.value))}function J9(e){return DIe(e,(t,n)=>Fi(t,n.value))}function DIe(e,t){if(xLt(e))return gt(e.condition).reduce(t,e.value);if(Ic(e))return e.value}function IIe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=lt(n.field);return r.map(s=>`(!length(data(${lt(ri(s)+ly)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Rae={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return jAe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return zAe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??M8t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??$8t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??N8t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>jv(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Bv(n)&&lc(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>I8t(t,e)};function I8t(e,t){const n=e.values;if(Ue(n))return sDe(t,n);if(Pt(n))return n}function N8t(e,t,n,r){if(t!=="shape"){const i=J9(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function k8t(e){const{legend:t}=e;return Fi(t.type,R8t(e))}function R8t({channel:e,timeUnit:t,scaleType:n}){if(Bv(e)){if(On(["quarter","month","day"],t))return"symbol";if(lc(n))return"gradient"}return"symbol"}function P8t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??O8t(n,t)}function O8t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function M8t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(lc(i))return n==="horizontal"?r==="top"||r==="bottom"?Pae(t,"width",o,s):o:Pae(t,"height",u,a)}function Pae(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function $8t(e){if(On(["quantile","threshold","log","symlog"],e))return"greedy"}function NIe(e){const t=wi(e)?F8t(e):z8t(e);return e.component.legends=t,t}function F8t(e){const{encoding:t}=e,n={};for(const r of[nu,...CDe]){const i=os(t[r]);!i||!e.getScaleComponent(r)||r===ru&&st(i)&&i.type===Z_||(n[r]=j8t(e,r))}return n}function L8t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function B8t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function j8t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new S8t({},L8t(e,t));K5t(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=os(i[t]),f=st(c)?(E=Ds(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=k8t({legend:n,channel:t,timeUnit:f,scaleType:l}),p=P8t({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const _ of CIe){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const w=_ in Rae?Rae[_](m):n[_];if(w!==void 0){const S=B8t(w,_,n,e.fieldDef(t));(S||s.legend[_]===void 0)&&a.set(_,w,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const w=SIe(g[_]??{},e),S=_ in kae?kae[_](w,b):w;S!==void 0&&!_r(S)&&(v[_]={...y!=null&&y.length&&st(c)?{name:`${ri(c.field)}_legend_${_}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return _r(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function z8t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){NIe(r);for(const i of Ze(r.component.legends))n.legend[i]=sK(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=kIe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ze(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function kIe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of CIe){const c=Pm(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return U8t(f,d);case"title":return dAe(f,d);case"type":return i=!0,fu("symbol")}return wM(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&Qk(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&Qk(e.explicit,["encode","gradient"])),e}function U8t(e,t){return t.value==="circle"?t:e}function V8t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function RIe(e){const t=e.component.legends,n={};for(const i of Ze(t)){const s=e.getScaleComponent(i),o=Er(s.get("domains"));if(n[o])for(const a of n[o])kIe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return to(n).flat().map(i=>H8t(i,e.config)).filter(i=>i!==void 0)}function H8t(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of CDe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Pt(s.encode.labels.update.text)&&(l=ny(r,"datum.label",s.encode.labels.update.text.signal)),V8t(s,"labels","text",{signal:l})}return s}}function q8t(e){return iE(e)||fK(e)?W8t(e):PIe(e)}function W8t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),PIe(e))}function PIe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Pt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return On(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const G8t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class OIe extends Kh{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function MIe(e){e.component.projection=wi(e)?Y8t(e):Q8t(e)}function Y8t(e){if(e.hasProjection){const t=Ra(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?K8t(e):void 0,s=new OIe(e.projectionName(!0),{...Ra(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function K8t(e){const t=[],{encoding:n}=e;for(const r of[[jc,Bc],[Tl,zc]])(os(n[r[0]])||os(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ru)&&e.typedFieldDef(ru).type===Z_&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ei.Main)),t}function X8t(e,t){const n=JG(G8t,i=>!!(!Ut(e.explicit,i)&&!Ut(t.explicit,i)||Ut(e.explicit,i)&&Ut(t.explicit,i)&&Su(e.get(i),t.get(i))));if(Su(e.size,t.size)){if(n)return e;if(Su(e.explicit,{}))return t;if(Su(t.explicit,{}))return e}return null}function Q8t(e){if(e.children.length===0)return;let t;for(const r of e.children)MIe(r);const n=JG(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=X8t(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new OIe(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function J8t(e,t,n,r){if(K2(t,n)){const i=wi(e)?e.axis(n)??e.legend(n)??{}:{},s=ft(t,{expr:"datum"}),o=ft(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ft(t,{binSuffix:"range",forAs:!0}),formula:W2(s,o,i.format,i.formatType,r)}}return{}}function $Ie(e,t){return`${iAe(e)}_${t}`}function Z8t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function oK(e,t,n){const r=gM(n,void 0)??{},i=$Ie(r,t);return e.getName(`${i}_bins`)}function e9t(e){return"as"in e}function Oae(e,t,n){let r,i;e9t(e)?r=yt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ft(e,{forAs:!0}),ft(e,{binSuffix:"end",forAs:!0})];const s={...gM(t,void 0)},o=$Ie(s,e.field),{signal:a,extentSignal:u}=Z8t(n,o);if(sM(s.extent)){const c=s.extent;i=pIe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Af extends mr{clone(){return new Af(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(da(s)&&Fr(s.bin)){const{key:a,binComponent:u}=Oae(s,s.bin,n);i[a]={...u,...i[a],...J8t(n,s,o,n.config)}}return i},{});return _r(r)?null:new Af(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Oae(n,n.bin,r);return new Af(t,{[i]:s})}merge(t,n){for(const r of Ze(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=mf([...this.bins[r].as,...t.bins[r].as],Pn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(to(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(to(this.bins).map(t=>t.field))}hash(){return`Bin ${Pn(this.bins)}`}assemble(){return to(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Sl(t.field),as:r,signal:t.signal,...sM(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Sl(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:ft({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function t9t(e,t,n,r){var s;const i=wi(r)?r.encoding[ud(t)]:void 0;if(da(n)&&wi(r)&&QAe(n,i,r.markDef,r.config)){e.add(ft(n,{})),e.add(ft(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Rm({fieldDef:n,markDef:a,config:u});cT(o)&&l!==.5&&Li(t)&&(e.add(ft(n,{suffix:xM})),e.add(ft(n,{suffix:SM}))),n.bin&&K2(n,t)&&e.add(ft(n,{binSuffix:"range"}))}else if(YCe(t)){const o=GCe(t);e.add(r.getName(o))}else e.add(ft(n));return Qy(n)&&q6t((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function n9t(e,t){for(const n of Ze(t)){const r=t[n];for(const i of Ze(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ec extends mr{clone(){return new Ec(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ft(o,{forAs:!0})]);else{if(Ah(u)||cg(u)){const c=Ah(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([ft({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([ft(o,{forAs:!0})]);Gh(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([ft({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([ft({field:l,aggregate:"max"},{forAs:!0})]))}else t9t(s,a,o,n)}),s.size+Ze(i).length===0)?null:new Ec(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||ft(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||ft(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ze(i).length===0?null:new Ec(t,r,i)}merge(t){return BCe(this.dimensions,t.dimensions)?(n9t(this.measures,t.measures),!0):(g6t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ze(this.measures)])}producedFields(){const t=new Set;for(const n of Ze(this.measures))for(const r of Ze(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Pn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ze(this.measures))for(const o of Ze(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Sl(s));return{type:"aggregate",groupby:[...this.dimensions].map(Sl),ops:t,fields:n,as:r}}}class nE extends mr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of cl){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[ft(o),...Fr(a)?[ft(o,{binSuffix:"end"})]:[]],...Tf(u)?{sortField:u}:Ue(u)?{sortIndexField:Zb(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of cl)this[n]&&(t+=` ${n.charAt(0)}:${Pn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of cl)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of cl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ld){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Ns(i)&&fg(s)){const o=IM(this.childModel,n),a=cK(o);a?t[n]=a:it(fY(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=dM,field:f}=u;s.push(f),o.push(c),a.push(ft(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of nK){for(const c of rK){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[rh,nh])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Mae(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function r9t(e,t){const n=tY(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Mae(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Mae(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return it(TFt(t)),null}function i9t(e){const t={};return oI(e.filter,n=>{if(IAe(n)){let r=null;mY(n)?r=gu(n.equal):yY(n)?r=gu(n.lte):gY(n)?r=gu(n.lt):vY(n)?r=gu(n.gt):bY(n)?r=gu(n.gte):_Y(n)?r=n.range[0]:EY(n)&&(r=(n.oneOf??n.in)[0]),r&&(Yy(r)?t[n.field]="date":Wn(r)?t[n.field]="number":yt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function s9t(e){const t={};function n(r){Kb(r)?t[r.field]="date":r.type==="quantitative"&&nFt(r.aggregate)?t[r.field]="number":Ub(r.field)>1?r.field in t||(t[r.field]="flatten"):Qy(r)&&Tf(r.sort)&&Ub(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((wi(e)||Du(e))&&e.forEachFieldDef((r,i)=>{if(da(r))n(r);else{const s=Wy(i),o=e.fieldDef(s);n({...r,type:o.type})}}),wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Xy(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];st(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function o9t(e){const t={};if(wi(e)&&e.component.selection)for(const n of Ze(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Ub(i.field)>1&&(t[i.field]="flatten")}return t}class No extends mr{clone(){return new No(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Pn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!am(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ze(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:it(qoe(a,r[a],u.value)))}for(const a of Ze(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:it(qoe(a,n[a],u)))}const s=new Kh(n,r);i.copyAll(s);const o={};for(const a of Ze(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ze(o).length===0||i.parseNothing?null:new No(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ze(this._parse)){const r=this._parse[n];Ub(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ze(this._parse))}dependentFields(){return new Set(Ze(this._parse))}assembleTransforms(t=!1){return Ze(this._parse).filter(n=>t?Ub(n)>1:!0).map(n=>{const r=r9t(n,this._parse[n]);return r?{type:"formula",expr:r,as:Q_(n)}:null}).filter(n=>n!==null)}}class $m extends mr{clone(){return new $m(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Nc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Nc}}}class J2 extends mr{clone(){return new J2(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Pn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Z2 extends mr{clone(){return new Z2(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Pn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class cy extends mr{constructor(t){super(null),t??(t={name:"source"});let n;if(am(t)||(n=t.format?{...Ga(t.format,["parse"])}:{}),fT(t))this._data={values:t.values};else if(Xb(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];On(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else HDe(t)?this._data={values:[{type:"Sphere"}]}:(UDe(t)||am(t))&&(this._data={});this._generator=am(t),t.name&&(this._name=t.name),n&&!_r(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var $ae=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},a9t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Hw;function aK(e){return e instanceof cy||e instanceof J2||e instanceof Z2}class uK{constructor(){Hw.set(this,void 0),$ae(this,Hw,!1,"f")}setModified(){$ae(this,Hw,!0,"f")}get modifiedFlag(){return a9t(this,Hw,"f")}}Hw=new WeakMap;class Jy extends uK{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class lK extends uK{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class u9t extends lK{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ze(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class l9t extends lK{constructor(t){super(),this.requiresSelectionId=t&&tK(t)}run(t){t instanceof $m&&(this.requiresSelectionId&&(aK(t.parent)||t.parent instanceof Ec||t.parent instanceof No)||(this.setModified(),t.remove()))}}class c9t extends uK{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Cf&&(r=t.producedFields(),ZG(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class f9t extends lK{constructor(){super()}run(t){t instanceof Ka&&!t.isRequired()&&(this.setModified(),t.remove())}}class d9t extends Jy{run(t){if(!aK(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof No)if(t instanceof No)this.setModified(),t.merge(n);else{if(eY(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class h9t extends Jy{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof No);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ze(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!_r(i)){this.setModified();const o=new No(t,i);for(const a of n){if(a instanceof No)for(const u of Ze(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof No&&Ze(a.parse).length===0&&a.remove()}}}}}class p9t extends Jy{run(t){t instanceof Ka||t.numChildren()>0||t instanceof nE||t instanceof cy||(this.setModified(),t.remove())}}class m9t extends Jy{run(t){const n=t.children.filter(i=>i instanceof Cf),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class g9t extends Jy{run(t){const n=t.children.filter(i=>i instanceof Ec),r={};for(const i of n){const s=Pn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ze(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class y9t extends Jy{constructor(t){super(),this.model=t}run(t){const n=!(aK(t)||t instanceof tE||t instanceof No||t instanceof $m),r=[],i=[];for(const s of t.children)s instanceof Af&&(n&&!eY(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Af?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class v9t extends Jy{run(t){const n=[...t.children];if(!ty(n,o=>o instanceof Ka)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ka){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ka)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Zy extends mr{clone(){return new Zy(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=mf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ft(t)}hash(){return`JoinAggregateTransform ${Pn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function b9t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ft(r);return i&&t.push(i),t},[])}function _9t(e){return Ue(e)&&e.every(t=>yt(t))&&e.length>1}class sh extends mr{clone(){return new sh(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Fi(f.order,"ascending"));const l={field:a,order:u};let c;return _9t(s)?c=s:yt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new sh(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Bf(p)}).filter(h=>!!h),c=b9t(n),f=n.encoding.order;let d;if(Ue(f)||st(f))d=lAe(f);else{const h=JAe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new sh(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Pn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ft(i,{binSuffix:"mid"})]:[ft(i,{}),ft(i,{binSuffix:"end"})]:[ft(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ft(c,{expr:"datum"}),p=ft(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:ft(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:ft(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class rE extends mr{clone(){return new rE(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=mf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ft(t)}hash(){return`WindowTransform ${Pn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>lY(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function E9t(e){function t(n){if(!(n instanceof nE)){const r=n.clone();if(r instanceof Ka){const i=eB+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ec||r instanceof sh||r instanceof rE||r instanceof Zy)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Z9(e){if(e instanceof nE)if(e.numChildren()===1&&!(e.children[0]instanceof Ka)){const t=e.children[0];(t instanceof Ec||t instanceof sh||t instanceof rE||t instanceof Zy)&&t.addDimensions(e.fields),t.swapWithParent(),Z9(e)}else{const t=e.model.component.data.main;FIe(t);const n=E9t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Z9)}function FIe(e){if(e instanceof Ka&&e.type===ei.Main&&e.numChildren()===1){const t=e.children[0];t instanceof nE||(t.swapWithParent(),FIe(e))}}const eB="scale_",UA=5;function tB(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!tB(t.children))return!1}return!0}function zl(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Fae(e,t,n){let r=e.sources,i=!1;return i=zl(new f9t,r)||i,i=zl(new l9t(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=zl(new p9t,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=zl(new d9t,r)||i,i=zl(new y9t(t),r)||i,i=zl(new c9t,r)||i,i=zl(new h9t,r)||i,i=zl(new g9t,r)||i,i=zl(new m9t,r)||i,i=zl(new u9t,r)||i,i=zl(new v9t,r)||i),e.sources=r,i}function w9t(e,t){tB(e.sources);let n=0,r=0;for(let i=0;i<UA&&Fae(e,t,!0);i++)n++;e.sources.map(Z9);for(let i=0;i<UA&&Fae(e,t,!1);i++)r++;tB(e.sources),Math.max(n,r)===UA&&it(`Maximum optimization runs(${UA}) reached.`)}class bs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new bs(()=>t(n))}}function LIe(e){wi(e)?x9t(e):S9t(e)}function x9t(e){const t=e.component.scales;for(const n of Ze(t)){const r=C9t(e,n);if(t[n].setWithExplicit("domains",r),D9t(e,n),e.component.data.isFaceted){let s=e;for(;!Du(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Wd(a)&&(a.data=eB+a.data.replace(eB,""))}}}function S9t(e){for(const n of e.children)LIe(n);const t=e.component.scales;for(const n of Ze(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Pm(r,o.getWithExplicit("domains"),"domains","scale",nB);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&it(EFt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function T9t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Lae(t,n);if(!i){it(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Lae(t,n);if(i)return"unaggregated"}return e}function C9t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=T9t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&os(r.x2)?os(r.x)?Pm(ap(n,i,e,"x"),ap(n,i,e,"x2"),"domain","scale",nB):ap(n,i,e,"x2"):t==="y"&&os(r.y2)?os(r.y)?Pm(ap(n,i,e,"y"),ap(n,i,e,"y2"),"domain","scale",nB):ap(n,i,e,"y2"):ap(n,i,e,t)}function A9t(e,t,n){return e.map(r=>({signal:`{data: ${yM(r,{timeUnit:n,type:t})}}`}))}function X6(e,t,n){var i;const r=(i=Ds(n))==null?void 0:i.unit;return t==="temporal"||r?A9t(e,t,r):[e]}function ap(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=os(i[r]),{type:c}=l,f=l.timeUnit;if(H6t(t)){const p=ap(e,void 0,n,r),m=X6(t.unionWith,c,f);return Zc([...m,...p.value])}else{if(Pt(t))return Zc([t]);if(t&&t!=="unaggregated"&&!$Ae(t))return Zc(X6(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return fu([[0,1]]);const p=n.requestDataName(ei.Main);return fu([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Gh(r)&&st(l)?I9t(n,r,e):void 0;if(cd(l)){const p=X6([l.datum],c,f);return fu(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(ei.Main),{field:m}=l;return fu([{data:p,field:ft({field:m,aggregate:"min"})},{data:p,field:ft({field:m,aggregate:"max"})}])}else if(Fr(h.bin)){if(Ns(e))return fu(e==="bin-ordinal"?[]:[{data:uT(d)?n.requestDataName(ei.Main):n.requestDataName(ei.Raw),field:n.vgField(r,K2(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!vt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Fr(p)){const m=oK(n,h.field,p);return fu([new bs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return fu([{data:n.requestDataName(ei.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&On(["time","utc"],e)){const p=i[ud(r)];if(QAe(h,p,s,a)){const m=n.requestDataName(ei.Main),g=Rm({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=cT(o)&&g!==.5&&Li(r);return fu([{data:m,field:n.vgField(r,y?{suffix:xM}:{})},{data:m,field:n.vgField(r,{suffix:y?SM:"end"})}])}}return fu(d?[{data:uT(d)?n.requestDataName(ei.Main):n.requestDataName(ei.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ei.Main),field:n.vgField(r)}])}function Q6(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":dM),...r?{field:Sl(r)}:{},...i?{order:i}:{}}}function D9t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=$Ae(r)&&r,o=Gy(i)&&sM(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function I9t(e,t,n){if(!Ns(n))return;const r=e.fieldDef(t),i=r.sort;if(KAe(i))return{op:"min",field:Zb(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Tf(i)){const a=s&&!o.has(i.field);return Q6(i,a)}else if(YAe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Ah(c)||cg(c))return Q6({field:ft(l),order:u},d);if(lY(c)||!c)return Q6({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(On(["ascending",void 0],i))return!0}}function Lae(e,t){const{aggregate:n,type:r}=e;return n?yt(n)&&!iFt.has(n)?{valid:!1,reason:GFt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:YFt(e)}:{valid:!0}:{valid:!1,reason:WFt(e)}}function nB(e,t,n,r){return e.explicit&&t.explicit&&it(ZFt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function N9t(e){const t=mf(e.map(o=>{if(Wd(o)){const{sort:a,...u}=o;return u}return o}),Pn),n=mf(e.map(o=>{if(Wd(o)){const a=o.sort;return a!==void 0&&!uT(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Pn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Wd(o)&&n.length>0){let a=n[0];if(n.length>1){it(Goe);const u=n.filter(l=>vt(l)&&"op"in l&&l.op!=="min");n.every(l=>vt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(vt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=mf(n.map(o=>uT(o)||!("op"in o)||yt(o.op)&&o.op in eFt?o:(it(t6t(o)),!0)),Pn);let i;r.length===1?i=r[0]:r.length>1&&(it(Goe),i=!0);const s=mf(e.map(o=>Wd(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function cK(e){if(Wd(e)&&yt(e.field))return e.field;if(sFt(e)){let t;for(const n of e.fields)if(Wd(n)&&yt(n.field)){if(!t)t=n.field;else if(t!==n.field)return it(n6t),t}return it(r6t),t}else if(oFt(e)){it(i6t);const t=e.fields[0];return yt(t)?t:void 0}}function IM(e,t){const r=e.component.scales[t].get("domains").map(i=>(Wd(i)&&(i.data=e.lookupDataSource(i.data)),i));return N9t(r)}function BIe(e){return iE(e)||fK(e)?e.children.reduce((t,n)=>t.concat(BIe(n)),Bae(e)):Bae(e)}function Bae(e){return Ze(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=k9t(i.range,s,n,e),h=IM(e,n),p=a?T5t(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function k9t(e,t,n,r){if(Li(n)){if(fg(e))return{step:{signal:`${t}_step`}}}else if(vt(e)&&Wd(e))return{...e,data:r.lookupDataSource(e.data)};return e}class jIe extends Kh{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ty(this.get("domains"),t=>Ue(t)&&t.length===2&&Wn(t[0])&&t[0]<=0&&Wn(t[1])&&t[1]>=0)}}const R9t=["range","scheme"];function P9t(e){const t=e.component.scales;for(const n of iM){const r=t[n];if(!r)continue;const i=O9t(n,e);r.setWithExplicit("range",i)}}function jae(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=iu(t),o=e.getName(s);if(vt(r)&&r.binned&&r.step!==void 0)return new bs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Fr(r)){const a=oK(e,i,r);return new bs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function O9t(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of R9t)if(n[f]!==void 0){const d=j9(s,f),h=FAe(e,f);if(!d)it(gAe(s,f,e));else if(h)it(h);else switch(f){case"range":{const p=n.range;if(Ue(p)){if(Li(e))return Zc(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return bs.fromName(y,g)}return m}))}else if(vt(p))return Zc({data:t.requestDataName(ei.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Zc(p)}case"scheme":return Zc(M9t(n[f]))}}const o=e===ii||e==="xOffset"?"width":"height",a=r[o];if(jf(a)){if(Li(e))if(Ns(s)){const f=UIe(a,t,e);if(f)return Zc({step:f})}else it(yAe(o));else if(V2(e)){const f=e===sg?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=VIe(a,s);if(p)return Zc(p)}}}const{rangeMin:u,rangeMax:l}=n,c=$9t(e,t);return(u!==void 0||l!==void 0)&&j9(s,"rangeMin")&&Ue(c)&&c.length===2?Zc([u??c[0],l??c[1]]):fu(c)}function M9t(e){return V6t(e)?{scheme:e.name,...Ga(e,["name"])}:{scheme:e}}function zIe(e,t,n,{center:r}={}){const i=iu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Os&&ju(n)?r?[bs.fromName(a=>`${o(a)}/2`,s),bs.fromName(a=>`-${o(a)}/2`,s)]:[bs.fromName(o,s),0]:r?[bs.fromName(a=>`-${o(a)}/2`,s),bs.fromName(a=>`${o(a)}/2`,s)]:[0,bs.fromName(o,s)]}function $9t(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=os(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case ii:case Os:{if(On(["point","band"],u)){const f=HIe(e,n,r.view);if(jf(f))return{step:UIe(f,t,e)}}return zIe(e,t,u)}case sg:case J_:return F9t(e,t,u);case qh:{const f=t.component.scales[e].get("zero"),d=qIe(i,f,r),h=j9t(i,n,t,r);return Wb(u)?B9t(d,h,L9t(u,r,l,e)):[d,h]}case Ol:return[0,Math.PI*2];case qy:return[0,360];case Lc:return[0,new bs(()=>{const f=t.getSignalName(Du(t.parent)?"child_width":"width"),d=t.getSignalName(Du(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case ug:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case lg:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ru:return"symbol";case nu:case od:case ad:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Wh:case og:case ag:return[r.scale.minOpacity,r.scale.maxOpacity]}}function UIe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=sY(n),o=r[s];if(DDe({step:e,offsetIsDiscrete:ln(o)&&kAe(o.type)})==="offset"&&lDe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${cFt(f)})`}}else return e.step}function VIe(e,t){if(DDe({step:e,offsetIsDiscrete:Ns(t)})==="offset")return{step:e.step}}function F9t(e,t,n){const r=e===sg?"x":"y",i=t.getScaleComponent(r);if(!i)return zIe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=HIe(r,t.size,t.config.view);if(jf(l)){const c=VIe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(st(l)&&l.timeUnit){const c=AAe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Rm({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Pt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Pt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return FCe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function HIe(e,t,n){const r=e===ii?"width":"height",i=t[r];return i||uR(n,r)}function L9t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ue(n)?n.length+1:(it(h6t(r)),3)}}function B9t(e,t,n){const r=()=>{const i=uc(t),s=uc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Pt(t)?new bs(r):{signal:r()}}function qIe(e,t,n){if(t)return Pt(t)?{signal:`${t.signal} ? 0 : ${qIe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(oM("size",e))}const zae=.95;function j9t(e,t,n,r){const i={x:jae(n,"x"),y:jae(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Uae(t,i,r.view);return Wn(s)?s-1:new bs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Uae(t,i,r.view);return Wn(s)?Math.pow(zae*s,2):new bs(()=>`pow(${zae} * ${s.signal}, 2)`)}}throw new Error(oM("size",e))}function Uae(e,t,n){const r=jf(e.width)?e.width.step:aR(n,"width"),i=jf(e.height)?e.height.step:aR(n,"height");return t.x||t.y?new bs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function WIe(e,t){wi(e)?z9t(e,t):YIe(e,t)}function z9t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ze(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=os(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=j9(h,t),y=FAe(a,t);if(d!==void 0&&(g?y&&it(y):it(gAe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Yy(u[t])||b==="temporal"||v?l.set(t,{signal:yM(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Vae?Vae[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:cDe(i,a),hasSecondaryRangeChannel:!!i[ud(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Vae={bins:({model:e,fieldOrDatumDef:t})=>st(t)?U9t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>V9t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>H9t(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>q9t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>W9t(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>G9t(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=st(e)?e.sort:void 0;return Y9t(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>K9t(e,t,n,r,i,s.scale,o)};function GIe(e){wi(e)?P9t(e):YIe(e,"range")}function YIe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?GIe(r):WIe(r,t);for(const r of Ze(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Pm(i,a,t,"scale",zDe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function U9t(e,t){const n=t.bin;if(Fr(n)){const r=oK(e,t.field,n);return new bs(()=>e.getSignalName(r))}else if(qs(n)&&Gy(n)&&n.step!==void 0)return{step:n.step}}function V9t(e,t){if(On([nu,od,ad],e)&&t!=="nominal")return"hcl"}function H9t(e,t,n,r,i,s){var o;if(!((o=Bf(s))!=null&&o.bin||Ue(n)||i!=null||r!=null||On([Ya.TIME,Ya.UTC],e)))return Li(t)?!0:void 0}function q9t(e,t,n,r,i,s){if(Li(e)){if(lc(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(st(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Ya.POINT)return n.pointPadding}}function W9t(e,t,n,r,i,s=!1){if(e===void 0){if(Li(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Fi(o,n==="bar"?a:u)}else if(V2(t)&&r===Ya.BAND)return i.offsetBandPaddingInner}}function G9t(e,t,n,r,i,s=!1){if(e===void 0){if(Li(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Ya.BAND)return Fi(o,Pt(r)?{signal:`${r.signal}/2`}:r/2)}else if(V2(t)){if(n===Ya.POINT)return .5;if(n===Ya.BAND)return i.offsetBandPaddingOuter}}}function Y9t(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ju(e)&&t==="descending"?Pt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ju(e)&&t==="descending")return!0}function K9t(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&ju(i)){if(Ue(n)){const u=n[0],l=n[n.length-1];if(Wn(u)&&u<=0&&Wn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Wb(i))return!0;if(!(st(t)&&t.bin)&&On([...ld,...W$t],e)){const{orient:u,type:l}=r;return On(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:On(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function X9t(e,t,n,r,i=!1){const s=Q9t(t,n,r,i),{type:o}=e;return Gh(t)?o!==void 0?X6t(t,o)?st(n)&&!K6t(o,n.type)?(it(QFt(o,s)),s):o:(it(XFt(t,o,s)),s):s:null}function Q9t(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Bv(e)||U6(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&it(V6(e,"ordinal")),"ordinal";if(Li(e)||V2(e)){if(On(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in uY)return"band";const s=n[iu(e)];return ay(s)||Yb(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Bv(e)?"time":U6(e)==="discrete"?(it(V6(e,"temporal")),"ordinal"):st(t)&&t.timeUnit&&Ds(t.timeUnit).utc?"utc":"time";case"quantitative":return Bv(e)?st(t)&&Fr(t.bin)?"bin-ordinal":"linear":U6(e)==="discrete"?(it(V6(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(pAe(t.type))}function J9t(e,{ignoreRange:t}={}){KIe(e),LIe(e);for(const n of Y6t)WIe(e,n);t||GIe(e)}function KIe(e){wi(e)?e.component.scales=Z9t(e):e.component.scales=tBt(e)}function Z9t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of iM){const o=os(t[s]);if(o&&n===qAe&&s===ru&&o.type===Z_)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=cDe(t,s),l=X9t(a,s,o,r,u);i[s]=new jIe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const eBt=zDe((e,t)=>Koe(e)-Koe(t));function tBt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){KIe(s);for(const o of Ze(s.component.scales))if((t=i.scale)[o]??(t[o]=TIe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?L6t(a.value,u.value)?r[o]=Pm(a,u,"type","scale",eBt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ze(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new jIe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class J6{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function wi(e){return(e==null?void 0:e.type)==="unit"}function Du(e){return(e==null?void 0:e.type)==="facet"}function fK(e){return(e==null?void 0:e.type)==="concat"}function iE(e){return(e==null?void 0:e.type)==="layer"}class dK{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Ra(a),this.name=t.name??i,this.title=mp(t.title)?{text:t.title}:t.title?Ra(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new J6,this.projectionNameMap=r?r.projectionNameMap:new J6,this.signalNameMap=r?r.signalNameMap:new J6,this.data=t.data,this.description=t.description,this.transforms=u5t(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:d4t(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:hM(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Kh,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){J9t(this)}parseProjection(){MIe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){NIe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ze(r)){const o=r[s];o!==void 0&&(i[s]=Vr(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Vr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:_r(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=w8t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of cl)t[r].title&&n.push(g8t(this,r));for(const r of nK)n=n.concat(y8t(this,r));return n}assembleAxes(){return r8t(this.component.axes,this.config)}assembleLegends(){return RIe(this)}assembleProjections(){return q8t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...sAe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return On(["unit","layer"],this.type)?On(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),_r(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Du(this.parent)?BIe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return ri((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ei[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Du(this.parent)){const n=xIe(t),r=rM(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ns(s)&&fg(o)){const a=i.get("name"),u=IM(this,r),l=cK(u);if(l){const c=ft({aggregate:"distinct",field:l},{expr:"datum"});return{signal:wIe(a,i,c)}}else return it(fY(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(XCe(t)&&Gh(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(mFt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class XIe extends dK{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ft(r,n)}reduceFieldDef(t,n){return zLt(this.getMapping(),(r,i,s)=>{const o=Bf(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){LY(this.getMapping(),(r,i)=>{const s=Bf(r);s&&t(s,i)},n)}}class NM extends mr{clone(){return new NM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Pn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class kM extends mr{clone(){return new kM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Pn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class dT extends mr{clone(){return new dT(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(ir("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Gh(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");ju(d)&&l.aggregate!=="count"&&!Xy(i)&&(u[l.field]=l)}return u},{});return Ze(a).length?new dT(t,a):null}dependentFields(){return new Set(Ze(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Pn(this.filter)}`}assemble(){const t=Ze(this.filter).reduce((n,r)=>{const i=this.filter[r],s=ft(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class RM extends mr{clone(){return new RM(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Pn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class PM extends mr{clone(){return new PM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Pn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Uv extends mr{clone(){return new Uv(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[jc,Bc],[Tl,zc]]){const s=i.map(o=>{const a=os(n.encoding[o]);return st(a)?a.field:cd(a)?{expr:`${a.datum}`}:Ic(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Uv(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ru)){const i=n.typedFieldDef(ru);i.type===Z_&&(t=new Uv(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(yt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Pn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class hT extends mr{clone(){return new hT(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[jc,Bc],[Tl,zc]]){const i=r.map(o=>{const a=os(n.encoding[o]);return st(a)?a.field:cd(a)?{expr:`${a.datum}`}:Ic(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Tl?"2":"";(i[0]||i[1])&&(t=new hT(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(yt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Pn(this.fields)} ${Pn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class x0 extends mr{clone(){return new x0(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new x0(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(st(i)&&st(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=dDe(n.mark,r);return new x0(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Pn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:V4t(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class OM extends mr{clone(){return new OM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Pn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class pT extends mr{clone(){return new pT(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(H4t(o)){let u=ZIe(o.data,s);u||(u=new cy(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Ka(u,l,ei.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(q4t(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(ri(u),u)}catch{throw new Error(bFt(u))}if(a=l.materialized,!a)throw new Error(_Ft(u))}return new pT(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?gt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Pn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:gt(this.transform.as)}:{}};else{let n=this.transform.as;yt(n)||(it(DFt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class MM extends mr{clone(){return new MM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Pn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class $M extends mr{clone(){return new $M(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Pn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class FM extends mr{clone(){return new FM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=mf((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Pn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class LM extends mr{clone(){return new LM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Pn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function QIe(e){let t=0;function n(r,i){if(r instanceof cy&&!r.isGenerator&&!Xb(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof No&&(r.parent instanceof cy&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof nE){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof J2||r instanceof Z2||r instanceof dT||r instanceof tE||r instanceof Jb||r instanceof hT||r instanceof Ec||r instanceof pT||r instanceof rE||r instanceof Zy||r instanceof PM||r instanceof RM||r instanceof NM||r instanceof OM||r instanceof MM||r instanceof $M||r instanceof $m||r instanceof LM||r instanceof FM||r instanceof kM)&&i.transform.push(r.assemble()),(r instanceof Af||r instanceof Cf||r instanceof x0||r instanceof sh||r instanceof Uv)&&i.transform.push(...r.assemble()),r instanceof Ka&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ka?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ka&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function nBt(e){const t=[],n=QIe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function rBt(e,t){const n=[],r=QIe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function iBt(e){return e==="top"||e==="left"||Pt(e)?"header":"footer"}function sBt(e){for(const t of cl)oBt(e,t);Hae(e,"x"),Hae(e,"y")}function oBt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=e_("title",null,r,t);let l=jv(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ue(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=e_("labelOrient",a.header,r,t),f=a.header!==null?Fi((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=On(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[JIe(e,t,f)]}}}function JIe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Hae(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=sK(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=iBt(a.get("orient"));o[u]??(o[u]=[JIe(e,s,!1)]);const l=Vw(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function aBt(e){hK(e),dR(e,"width"),dR(e,"height")}function uBt(e){hK(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";dR(e,t),dR(e,n)}function hK(e){for(const t of e.children)t.parseLayoutSize()}function dR(e,t){const n=xIe(t),r=rM(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??TIe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Pm(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function lBt(e){const{size:t,component:n}=e;for(const r of ld){const i=iu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,jf(s)?"step":s,!0)}else{const s=cBt(e,i);n.layoutSize.set(i,s,!1)}}}function cBt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Ns(s)){const a=uR(r.view,t);return fg(o)||jf(a)?"step":a}else return V9(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return V9(r.view,t);{const s=uR(r.view,t);return jf(s)?s.step:s}}}function rB(e,t,n){return ft(t,{suffix:`by_${ft(e)}`,...n})}class jx extends XIe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=vK(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!G2(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ze(t),r={};for(const i of n){if(![nh,rh].includes(i)){it(oM(i,"facet"));break}const s=t[i];if(s.field===void 0){it(L9(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=$Y(t,n);return r.header?r.header=Ra(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=BM(this),this.child.parseData()}parseLayoutSize(){hK(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),sBt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of cl)for(const r of rK){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=e_("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=AM(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof jx))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof jx?{...this.channelHasField("column")?{encode:{update:{columns:{field:ft(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof jx){if(this.child.channelHasField("column")){const i=ft(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of ld){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Ns(o)&&fg(a)){const u=IM(this.child,i),l=cK(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):it(fY(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of cl){const f=this.facet[c];if(f){u.push(ft(f));const{bin:d,sort:h}=f;if(Fr(d)&&u.push(ft(f,{binSuffix:"end"})),Tf(h)){const{field:p,op:m=dM}=h,g=rB(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ue(h)){const p=Zb(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Tf(r.sort)?[rB(r,r.sort,{expr:"datum"})]:Ue(r.sort)?[Zb(r,t,{expr:"datum"})]:[ft(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Tf(i)?i.order:!Ue(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Q9(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of nK)if(t[s]){const o=e_("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Q9(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=nBt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:cl.map(u=>this.facetSortFields(u)).flat(),order:cl.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(E5t(this,[]))}]}getMapping(){return this.facet}}function fBt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Tf(s.sort)){const{field:o,op:a=dM}=s.sort;e=i=new Zy(e,{joinaggregate:[{op:a,field:o,as:rB(s,s.sort,{forAs:!0})}],groupby:[ft(s)]})}return i}return null}function ZIe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(fT(e)&&fT(a)){if(Su(e.values,a.values))return o}else if(Xb(e)&&Xb(a)){if(e.url===a.url)return o}else if(UDe(e)&&e.name===o.dataName)return o}}return null}function dBt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new cy({values:[]});return t.push(r),r}const n=ZIe(e.data,t);if(n)return am(e.data)||(n.data.format=LCe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new cy(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function hBt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(t5t(i))o=e=new Jb(e,i),s="derived";else if(KY(i)){const a=i9t(i);o=e=No.makeWithAncestors(e,{},a,n)??e,e=new tE(e,t,i.filter)}else if(FDe(i))o=e=Af.makeFromTransform(e,i,t),s="number";else if(r5t(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new No(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Cf.makeFromTransform(e,i);else if(i5t(i))o=e=Ec.makeFromTransform(e,i),s="number",tK(t)&&(e=new $m(e));else if($De(i))o=e=pT.make(e,t,i,r++),s="derived";else if(J4t(i))o=e=new rE(e,i),s="number";else if(Z4t(i))o=e=new Zy(e,i),s="number";else if(s5t(i))o=e=sh.makeFromTransform(e,i),s="derived";else if(o5t(i))o=e=new PM(e,i),s="derived";else if(a5t(i))o=e=new kM(e,i),s="derived";else if(e5t(i))o=e=new RM(e,i),s="derived";else if(W4t(i))o=e=new FM(e,i),s="derived";else if(Q4t(i))e=new LM(e,i);else if(n5t(i))o=e=x0.makeFromTransform(e,i),s="derived";else if(G4t(i))o=e=new NM(e,i),s="derived";else if(Y4t(i))o=e=new MM(e,i),s="derived";else if(K4t(i))o=e=new $M(e,i),s="derived";else if(X4t(i))o=e=new OM(e,i),s="derived";else{it(AFt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function BM(e){var h;let t=dBt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(am(i)||Xb(i)||fT(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new b5t;am(i)?(VDe(i)?t=new Z2(t,i.sequence):XY(i)&&(t=new J2(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=No.makeExplicit(t,e,o)??t,t=new $m(t);const a=e.parent&&iE(e.parent);(wi(e)||Du(e))&&a&&(t=Af.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=hBt(t,e,o));const u=o9t(e),l=s9t(e);t=No.makeWithAncestors(t,{},{...u,...l},o)??t,wi(e)&&(t=Uv.parseAll(t,e),t=hT.parseAll(t,e)),(wi(e)||Du(e))&&(a||(t=Af.makeFromEncoding(t,e)??t),t=Cf.makeFromEncoding(t,e)??t,t=Jb.parseAllForSortIndex(t,e));const c=t=qae(ei.Raw,e,t);if(wi(e)){const p=Ec.makeFromEncoding(t,e);p&&(t=p,tK(e)&&(t=new $m(t))),t=x0.makeFromEncoding(t,e)??t,t=sh.makeFromEncoding(t,e)??t}wi(e)&&(t=dT.make(t,e)??t);const f=t=qae(ei.Main,e,t);wi(e)&&t8t(e,f);let d=null;if(Du(e)){const p=e.getName("facet");t=fBt(t,e.facet)??t,d=new nE(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function qae(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Ka(n,s,e,i);return r[s]=o,o}class pBt extends dK{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&it(SFt),this.children=this.getChildren(t).map((l,c)=>vK(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=BM(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ze(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return _M(t)?t.vconcat:GY(t)?t.hconcat:t.concat}parseLayoutSize(){uBt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=iK(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function mBt(e){return e===!1||e===null}const gBt={disable:1,gridScale:1,scale:1,...aDe,labelExpr:1,encode:1},eNe=Ze(gBt);class pK extends Kh{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new pK(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!mBt(this.get(t))}hasOrientSignalRef(){return Pt(this.explicit.orient)}}function yBt(e,t,n){const{encoding:r,config:i}=e,s=os(r[t])??os(r[ud(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(oy(u))return{text:cc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Gb(s)==="quantitative"){if(Yb(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:cc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:cc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Gb(s)==="temporal"&&i.timeFormatType&&st(s)&&!s.timeUnit)return{text:cc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function vBt(e){return ld.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[TBt(n,e)]),t),{})}const bBt={bottom:"top",top:"bottom",left:"right",right:"left"};function _Bt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ze(i.component.axes))n.axis[s]=sK(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=EBt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of ld){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Pt(a)){if(r[a]>0&&!u){const l=bBt[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function EBt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=wBt(i,s)}}}else return t.map(n=>n.clone());return e}function wBt(e,t){for(const n of eNe){const r=Pm(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return dAe(i,s);case"gridScale":return{explicit:i.explicit,value:Fi(i.value,s.value)}}return wM(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function xBt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Pt(n.labelAngle)?n.labelAngle:lT(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===vIe(r,i))return!0}return e===n[t]}const SBt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function TBt(e,t){var y,v;let n=t.axis(e);const r=new pK,i=os(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||f8t(e),u=t.getScaleComponent(e).get("type"),l=i8t(e,u,a,t.config),c=n!==void 0?!n:K9("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=u8t(i,n,e,o.style,l),d=zAe(n.formatType,i,u),h=jAe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of eNe){const E=b in Iae?Iae[b](p):nae(b)?n[b]:void 0,_=E!==void 0,w=xBt(E,b,n,t,e);if(_&&w)r.set(b,E,w);else{const{configValue:S=void 0,configFrom:C=void 0}=nae(b)&&b!=="values"?K9(b,o.style,n.style,l):{},A=S!==void 0;_&&!A?r.set(b,E,w):(C!=="vgAxisConfig"||SBt.has(b)&&A||X2(S)||Pt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=oDe.reduce((b,E)=>{if(!r.hasAxisPart(E))return b;const _=SIe(m[E]??{},t),w=E==="labels"?yBt(t,e,_):_;return w!==void 0&&!_r(w)&&(b[E]={update:w}),b},{});return _r(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function CBt({encoding:e,size:t}){for(const n of ld){const r=iu(n);jf(t[r])&&Bp(e[n])&&(delete t[r],it(yAe(r)))}return t}const ABt={vgMark:"arc",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Io("x",e,{defaultPos:"mid"}),...Io("y",e,{defaultPos:"mid"}),...Om(e,"radius"),...Om(e,"theta")})},DBt={vgMark:"area",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...lR("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...lR("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...eK(e)})},IBt={vgMark:"rect",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Om(e,"x"),...Om(e,"y")})},NBt={vgMark:"shape",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&st(n)&&n.type===Z_?{field:ft(n,{expr:"datum"})}:{}}]}},kBt={vgMark:"image",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Om(e,"x"),...Om(e,"y"),...JY(e,"url")})},RBt={vgMark:"line",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Io("x",e,{defaultPos:"mid"}),...Io("y",e,{defaultPos:"mid"}),...Es("size",e,{vgChannel:"strokeWidth"}),...eK(e)})},PBt={vgMark:"trail",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Io("x",e,{defaultPos:"mid"}),...Io("y",e,{defaultPos:"mid"}),...Es("size",e),...eK(e)})};function mK(e,t){const{config:n}=e;return{...Ml(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Io("x",e,{defaultPos:"mid"}),...Io("y",e,{defaultPos:"mid"}),...Es("size",e),...Es("angle",e),...OBt(e,n,t)}}function OBt(e,t,n){return n?{shape:{value:n}}:Es("shape",e)}const MBt={vgMark:"symbol",encodeEntry:e=>mK(e)},$Bt={vgMark:"symbol",encodeEntry:e=>mK(e,"circle")},FBt={vgMark:"symbol",encodeEntry:e=>mK(e,"square")},LBt={vgMark:"rect",encodeEntry:e=>({...Ml(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Om(e,"x"),...Om(e,"y")})},BBt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ml(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...lR("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...lR("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Es("size",e,{vgChannel:"strokeWidth"})}}},jBt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ml(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Io("x",e,{defaultPos:"mid"}),...Io("y",e,{defaultPos:"mid"}),...JY(e),...Es("size",e,{vgChannel:"fontSize"}),...Es("angle",e),...Tae("align",zBt(e.markDef,n,t)),...Tae("baseline",UBt(e.markDef,n,t)),...Io("radius",e,{defaultPos:null}),...Io("theta",e,{defaultPos:null})}}};function zBt(e,t,n){if(ir("align",e,n)===void 0)return"center"}function UBt(e,t,n){if(ir("baseline",e,n)===void 0)return"middle"}const VBt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Ml(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Io("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Io("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Es("size",e,{defaultValue:HBt(e),vgChannel:i}),[s]:Vr(ir("thickness",n,t))}}};function HBt(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=ir("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&fg(a)&&Wn(a.step)?a.step*3/4:aR(t.view,i)*3/4}}const VA={arc:ABt,area:DBt,bar:IBt,circle:$Bt,geoshape:NBt,image:kBt,line:RBt,point:MBt,rect:LBt,rule:BBt,square:FBt,text:jBt,tick:VBt,trail:PBt};function qBt(e){if(On([cM,uM,oLt],e.mark)){const t=dDe(e.mark,e.encoding);if(t.length>0)return WBt(e,t)}else if(e.mark===lM){const t=F9.some(n=>ir(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return GBt(e)}return gK(e)}const Wae="faceted_path_";function WBt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Wae+e.requestDataName(ei.Main),data:e.requestDataName(ei.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:gK(e,{fromPrefix:Wae})}]}const Gae="stack_group_";function GBt(e){var l;const[t]=gK(e,{fromPrefix:Gae}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...zb(t.encode.update,["y","yc","y2","height",...F9]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ga(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...zb(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ga(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of F9){const f=Dh(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Vr(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ft(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ft(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Dh(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Vr(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ei.Main),name:Gae+e.requestDataName(ei.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function YBt(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ue(o)&&Ic(o)&&M9(o.value)||!o&&M9(ir("order",i,s)))){if((Ue(o)||st(o))&&!n)return lAe(o,{expr:"datum"});if(Xy(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(st(l)){const c=l.sort;if(Ue(c))return{field:ft(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Tf(c))return{field:ft({aggregate:FY(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(YAe(c)){const f=e.fieldDef(c.encoding);return{field:ft(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ft(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function gK(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Fi(r.clip,KBt(e),XBt(e)),a=aAe(r),u=i.key,l=YBt(e),c=QBt(e),f=ir("aria",r,s),d=VA[n].postEncodingTransform?VA[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:VA[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(ei.Main)},encode:{update:VA[n].encodeEntry(e)},...d?{transform:d}:{}}]}function KBt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function XBt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function QBt(e){if(!e.component.selection)return null;const t=Ze(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ze(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class tNe extends XIe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,iae(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Lf(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=M4t(o,s,{graticule:t.data&&XY(t.data)}));const u=this.encoding=BLt(t.encoding||{},a,o.filled,s);this.markDef=PDe(o,u,s),this.size=CBt({encoding:u,size:iae(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=RDe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>qY(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===qAe,r=t&&F$t.some(i=>ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return iM.reduce((r,i)=>{const s=os(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ra(t);return Ue(n)&&(i.domain=n.map(gu)),Ue(r)&&(i.range=r.map(gu)),i}initAxes(t){return ld.reduce((n,r)=>{const i=t[r];if(ln(i)||r===ii&&ln(t.x2)||r===Os&&ln(t.y2)){const s=ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ze(t),r={};for(const i of n){const s=t[i];r[i]=X2(s)?oAe(s):gu(s)}return r}initLegends(t){return G$t.reduce((n,r)=>{const i=os(t[r]);if(i&&K$t(r)){const s=i.legend;n[r]=s&&Ra(s)}return n},{})}parseData(){this.component.data=BM(this)}parseLayoutSize(){lBt(this)}parseSelections(){this.component.selection=e8t(this,this.selection)}parseMarkGroup(){this.component.mark=qBt(this)}parseAxesAndHeaders(){this.component.axes=vBt(this)}assembleSelectionTopLevelSignals(t){return w5t(this,t)}assembleSignals(){return[...mIe(this),..._5t(this,[])]}assembleSelectionData(t){return x5t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return iK(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!iE(this.parent))&&(t=WDe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return E0(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Bf(n)}typedFieldDef(t){const n=this.fieldDef(t);return da(n)?n:null}}class yK extends dK{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(EM(a))return new yK(a,this,this.getName(`layer_${u}`),o,s);if(Yh(a))return new tNe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(cY(a))})}parseData(){this.component.data=BM(this);for(const t of this.children)t.parseData()}parseLayoutSize(){aBt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ze(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){_Bt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),mIe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),iK(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of gt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return S5t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),RIe(this))}}function vK(e,t,n,r,i){if(hM(e))return new jx(e,t,n,i);if(EM(e))return new yK(e,t,n,r,i);if(Yh(e))return new tNe(e,t,n,r,i);if(l4t(e))return new pBt(e,t,n,i);throw new Error(cY(e))}function JBt(e,t={}){t.logger&&p6t(t.logger),t.fieldTitle&&rDe(t.fieldTitle);try{const n=kDe(j_(t.config,e.config)),r=jDe(e,n),i=vK(r,null,"",void 0,n);return i.parse(),w9t(i.component.data,i),{spec:e7t(i,ZBt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&m6t(),t.fieldTitle&&NLt()}}function ZBt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):yt(t)&&(t={type:t}),i&&s&&g5t(t.type)){if(i==="step"&&s==="step")it(Uoe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";it(Uoe(rM(o)));const a=o==="width"?"height":"width";t.type=y5t(a)}}return{...Ze(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...gae(n,!1),...gae(e,!0)}}function e7t(e,t,n={},r){const i=e.config?x4t(e.config):void 0,s=[].concat(e.assembleSelectionData([]),rBt(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...ADe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const t7t=k$t.version,n7t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Ub,accessPathWithDatum:tY,compile:JBt,contains:On,deepEqual:Su,deleteNestedProperty:Qk,duplicate:tn,entries:Nm,every:JG,fieldIntersection:eY,flatAccessWithDatum:jCe,getFirstDefined:Fi,hasIntersection:ZG,hash:Pn,internalField:VCe,isBoolean:uT,isEmpty:_r,isEqual:P$t,isInternalField:HCe,isNullOrFalse:M9,isNumeric:QO,keys:Ze,logicalExpr:Lx,mergeDeep:LCe,never:FCe,normalize:jDe,normalizeAngle:lT,omit:Ga,pick:zb,prefixGenerator:$9,removePathFromField:Q_,replaceAll:ny,replacePathInField:Sl,resetIdCounter:M$t,setEqual:BCe,some:ty,stringify:Er,titleCase:j2,unique:mf,uniqueId:UCe,vals:to,varName:ri,version:t7t},Symbol.toStringTag,{value:"Module"}));function nNe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var r7t="vega-themes",i7t="2.15.0",s7t="Themes for stylized Vega and Vega-Lite visualizations.",o7t=["vega","vega-lite","themes","style"],a7t="BSD-3-Clause",u7t={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},l7t=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],c7t="build/vega-themes.js",bK="build/vega-themes.module.js",f7t="build/vega-themes.min.js",d7t="build/vega-themes.min.js",h7t="build/vega-themes.module.d.ts",p7t={type:"git",url:"https://github.com/vega/vega-themes.git"},m7t=["src","build"],g7t={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},y7t={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},v7t={vega:"*","vega-lite":"*"},b7t={},_7t={name:r7t,version:i7t,description:s7t,keywords:o7t,license:a7t,author:u7t,contributors:l7t,main:c7t,module:bK,unpkg:f7t,jsdelivr:d7t,types:h7t,repository:p7t,files:m7t,scripts:g7t,devDependencies:y7t,peerDependencies:v7t,dependencies:b7t};const I1="#fff",Yae="#888",E7t={background:"#333",view:{stroke:Yae},title:{color:I1,subtitleColor:I1},style:{"guide-label":{fill:I1},"guide-title":{fill:I1}},axis:{domainColor:I1,gridColor:Yae,tickColor:I1}},xg="#4572a7",w7t={background:"#fff",arc:{fill:xg},area:{fill:xg},line:{stroke:xg,strokeWidth:2},path:{stroke:xg},rect:{fill:xg},shape:{stroke:xg},symbol:{fill:xg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Sg="#30a2da",Z6="#cbcbcb",x7t="#999",S7t="#333",Kae="#f0f0f0",Xae="#333",T7t={arc:{fill:Sg},area:{fill:Sg},axis:{domainColor:Z6,grid:!0,gridColor:Z6,gridWidth:1,labelColor:x7t,labelFontSize:10,titleColor:S7t,tickColor:Z6,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Kae,group:{fill:Kae},legend:{labelColor:Xae,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Xae,titleFontSize:14,titlePadding:10},line:{stroke:Sg,strokeWidth:2},path:{stroke:Sg,strokeWidth:.5},rect:{fill:Sg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Sg},bar:{binSpacing:2,fill:Sg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Tg="#000",C7t={group:{fill:"#e5e5e5"},arc:{fill:Tg},area:{fill:Tg},line:{stroke:Tg},path:{stroke:Tg},rect:{fill:Tg},shape:{stroke:Tg},symbol:{fill:Tg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},A7t=22,D7t="normal",Qae="Benton Gothic, sans-serif",Jae=11.5,I7t="normal",Cg="#82c6df",eL="Benton Gothic Bold, sans-serif",Zae="normal",eue=13,tw={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},N7t={background:"#ffffff",title:{anchor:"start",color:"#000000",font:eL,fontSize:A7t,fontWeight:D7t},arc:{fill:Cg},area:{fill:Cg},line:{stroke:Cg,strokeWidth:2},path:{stroke:Cg},rect:{fill:Cg},shape:{stroke:Cg},symbol:{fill:Cg,size:30},axis:{labelFont:Qae,labelFontSize:Jae,labelFontWeight:I7t,titleFont:eL,titleFontSize:eue,titleFontWeight:Zae},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Qae,labelFontSize:Jae,symbolType:"square",titleFont:eL,titleFontSize:eue,titleFontWeight:Zae},range:{category:tw["category-6"],diverging:tw["fireandice-6"],heatmap:tw["fire-7"],ordinal:tw["fire-7"],ramp:tw["fire-7"]}},Ag="#ab5787",HA="#979797",k7t={background:"#f9f9f9",arc:{fill:Ag},area:{fill:Ag},line:{stroke:Ag},path:{stroke:Ag},rect:{fill:Ag},shape:{stroke:Ag},symbol:{fill:Ag,size:30},axis:{domainColor:HA,domainWidth:.5,gridWidth:.2,labelColor:HA,tickColor:HA,tickWidth:.2,titleColor:HA},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Dg="#3e5c69",R7t={background:"#fff",arc:{fill:Dg},area:{fill:Dg},line:{stroke:Dg},path:{stroke:Dg},rect:{fill:Dg},shape:{stroke:Dg},symbol:{fill:Dg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Xu="#1696d2",tue="#000000",P7t="#FFFFFF",qA="Lato",tL="Lato",O7t="Lato",M7t="#DEDDDD",$7t=18,nw={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},F7t={background:P7t,title:{anchor:"start",fontSize:$7t,font:qA},axisX:{domain:!0,domainColor:tue,domainWidth:1,grid:!1,labelFontSize:12,labelFont:tL,labelAngle:0,tickColor:tue,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:qA},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:M7t,gridWidth:1,labelFontSize:12,labelFont:tL,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:qA,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:tL,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:qA,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:nw["six-groups-cat-1"],diverging:nw["diverging-colors"],heatmap:nw["diverging-colors"],ordinal:nw["six-groups-seq"],ramp:nw["shades-blue"]},area:{fill:Xu},rect:{fill:Xu},line:{color:Xu,stroke:Xu,strokeWidth:5},trail:{color:Xu,stroke:Xu,strokeWidth:0,size:1},path:{stroke:Xu,strokeWidth:.5},point:{filled:!0},text:{font:O7t,color:Xu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Xu,stroke:null}},arc:{fill:Xu},shape:{stroke:Xu},symbol:{fill:Xu,size:30}},Ig="#3366CC",nue="#ccc",WA="Arial, sans-serif",L7t={arc:{fill:Ig},area:{fill:Ig},path:{stroke:Ig},rect:{fill:Ig},shape:{stroke:Ig},symbol:{stroke:Ig},circle:{fill:Ig},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:WA,fontSize:12},"guide-title":{font:WA,fontSize:12},"group-title":{font:WA,fontSize:12}},title:{font:WA,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:nue,tickColor:nue,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},_K=e=>e*(1/3+1),rue=_K(9),iue=_K(10),sue=_K(12),rw="Segoe UI",oue="wf_standard-font, helvetica, arial, sans-serif",aue="#252423",iw="#605E5C",uue="transparent",B7t="#C8C6C4",Hl="#118DFF",j7t="#12239E",z7t="#E66C37",U7t="#6B007B",V7t="#E044A7",H7t="#744EC2",q7t="#D9B300",W7t="#D64550",rNe=Hl,iNe="#DEEFFF",lue=[iNe,rNe],G7t=[iNe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",rNe],Y7t={view:{stroke:uue},background:uue,font:rw,header:{titleFont:oue,titleFontSize:sue,titleColor:aue,labelFont:rw,labelFontSize:iue,labelColor:iw},axis:{ticks:!1,grid:!1,domain:!1,labelColor:iw,labelFontSize:rue,titleFont:oue,titleColor:aue,titleFontSize:sue,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:B7t,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hl},line:{stroke:Hl,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:rw,fontSize:rue,fill:iw},arc:{fill:Hl},area:{fill:Hl,line:!0,opacity:.6},path:{stroke:Hl},rect:{fill:Hl},point:{fill:Hl,filled:!0,size:75},shape:{stroke:Hl},symbol:{fill:Hl,strokeWidth:1.5,size:50},legend:{titleFont:rw,titleFontWeight:"bold",titleColor:iw,labelFont:rw,labelFontSize:iue,labelColor:iw,symbolType:"circle",symbolSize:75},range:{category:[Hl,j7t,z7t,U7t,V7t,H7t,q7t,W7t],diverging:lue,heatmap:lue,ordinal:G7t}},nL='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',K7t='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',rL=400,GA={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},X7t=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Q7t=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function jM({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=GA.gridBg[e],i=GA.textPrimary[e],s=GA.textSecondary[e],o=n==="dark"?X7t:Q7t,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:nL,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:K7t,labelFontWeight:rL,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:GA.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:nL,fill:s,fontWeight:rL},"guide-title":{font:nL,fill:s,fontWeight:rL}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const J7t=jM({theme:"white",background:"#ffffff"}),Z7t=jM({theme:"g10",background:"#f4f4f4"}),ejt=jM({theme:"g90",background:"#262626"}),tjt=jM({theme:"g100",background:"#161616"}),njt=_7t.version,rjt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Z7t,carbong100:tjt,carbong90:ejt,carbonwhite:J7t,dark:E7t,excel:w7t,fivethirtyeight:T7t,ggplot2:C7t,googlecharts:L7t,latimes:N7t,powerbi:Y7t,quartz:k7t,urbaninstitute:F7t,version:njt,vox:R7t},Symbol.toStringTag,{value:"Module"}));function ijt(e,t,n,r){if(Ue(e))return`[${e.map(i=>t(yt(i)?i:cue(i,n))).join(", ")}]`;if(vt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(vt(c)&&(c=cue(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function sjt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function cue(e,t){return JSON.stringify(e,sjt(t))}var ojt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const sNe="vg-tooltip-element",ajt={offsetX:10,offsetY:10,id:sNe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:ujt,maxDepth:2,formatTooltip:ijt,baseURL:""};function ujt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function ljt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return ojt.toString().replace(sNe,e)}function cjt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class fjt{constructor(t){this.options={...ajt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=ljt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=cjt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var iL={};function djt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sL,fue;function hjt(){return fue||(fue=1,sL=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),sL}var pjt=Zn;Zn.Node=fy;Zn.create=Zn;function Zn(e){var t=this;if(t instanceof Zn||(t=new Zn),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Zn.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Zn.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Zn.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Zn.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)gjt(this,arguments[e]);return this.length};Zn.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)yjt(this,arguments[e]);return this.length};Zn.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Zn.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Zn.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Zn.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Zn.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Zn.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Zn.prototype.map=function(e,t){t=t||this;for(var n=new Zn,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Zn.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Zn,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Zn.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Zn.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Zn.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Zn.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Zn.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Zn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Zn.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Zn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Zn.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=mjt(this,i,n[r]);return s};Zn.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function mjt(e,t,n){var r=t===e.head?new fy(n,null,t,e):new fy(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function gjt(e,t){e.tail=new fy(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function yjt(e,t){e.head=new fy(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function fy(e,t,n,r){if(!(this instanceof fy))return new fy(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{hjt()(Zn)}catch{}const vjt=pjt,Kg=Symbol("max"),Nd=Symbol("length"),N1=Symbol("lengthCalculator"),zx=Symbol("allowStale"),a0=Symbol("maxAge"),Cd=Symbol("dispose"),due=Symbol("noDisposeOnSet"),gs=Symbol("lruList"),ql=Symbol("cache"),oNe=Symbol("updateAgeOnGet"),oL=()=>1;class bjt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Kg]=t.max||1/0;const n=t.length||oL;if(this[N1]=typeof n!="function"?oL:n,this[zx]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[a0]=t.maxAge||0,this[Cd]=t.dispose,this[due]=t.noDisposeOnSet||!1,this[oNe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Kg]=t||1/0,sw(this)}get max(){return this[Kg]}set allowStale(t){this[zx]=!!t}get allowStale(){return this[zx]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[a0]=t,sw(this)}get maxAge(){return this[a0]}set lengthCalculator(t){typeof t!="function"&&(t=oL),t!==this[N1]&&(this[N1]=t,this[Nd]=0,this[gs].forEach(n=>{n.length=this[N1](n.value,n.key),this[Nd]+=n.length})),sw(this)}get lengthCalculator(){return this[N1]}get length(){return this[Nd]}get itemCount(){return this[gs].length}rforEach(t,n){n=n||this;for(let r=this[gs].tail;r!==null;){const i=r.prev;hue(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[gs].head;r!==null;){const i=r.next;hue(this,t,r,n),r=i}}keys(){return this[gs].toArray().map(t=>t.key)}values(){return this[gs].toArray().map(t=>t.value)}reset(){this[Cd]&&this[gs]&&this[gs].length&&this[gs].forEach(t=>this[Cd](t.key,t.value)),this[ql]=new Map,this[gs]=new vjt,this[Nd]=0}dump(){return this[gs].map(t=>hR(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[gs]}set(t,n,r){if(r=r||this[a0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[N1](n,t);if(this[ql].has(t)){if(s>this[Kg])return Vv(this,this[ql].get(t)),!1;const u=this[ql].get(t).value;return this[Cd]&&(this[due]||this[Cd](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Nd]+=s-u.length,u.length=s,this.get(t),sw(this),!0}const o=new _jt(t,n,s,i,r);return o.length>this[Kg]?(this[Cd]&&this[Cd](t,n),!1):(this[Nd]+=o.length,this[gs].unshift(o),this[ql].set(t,this[gs].head),sw(this),!0)}has(t){if(!this[ql].has(t))return!1;const n=this[ql].get(t).value;return!hR(this,n)}get(t){return aL(this,t,!0)}peek(t){return aL(this,t,!1)}pop(){const t=this[gs].tail;return t?(Vv(this,t),t.value):null}del(t){Vv(this,this[ql].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[ql].forEach((t,n)=>aL(this,n,!1))}}const aL=(e,t,n)=>{const r=e[ql].get(t);if(r){const i=r.value;if(hR(e,i)){if(Vv(e,r),!e[zx])return}else n&&(e[oNe]&&(r.value.now=Date.now()),e[gs].unshiftNode(r));return i.value}},hR=(e,t)=>{if(!t||!t.maxAge&&!e[a0])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[a0]&&n>e[a0]},sw=e=>{if(e[Nd]>e[Kg])for(let t=e[gs].tail;e[Nd]>e[Kg]&&t!==null;){const n=t.prev;Vv(e,t),t=n}},Vv=(e,t)=>{if(t){const n=t.value;e[Cd]&&e[Cd](n.key,n.value),e[Nd]-=n.length,e[ql].delete(n.key),e[gs].removeNode(t)}};class _jt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const hue=(e,t,n,r)=>{let i=n.value;hR(e,i)&&(Vv(e,n),e[zx]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Ejt=bjt;const wjt=Object.freeze({loose:!0}),xjt=Object.freeze({}),Sjt=e=>e?typeof e!="object"?wjt:e:xjt;var EK=Sjt,iB={exports:{}};const Tjt="2.0.0",aNe=256,Cjt=Number.MAX_SAFE_INTEGER||9007199254740991,Ajt=16,Djt=aNe-6,Ijt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var wK={MAX_LENGTH:aNe,MAX_SAFE_COMPONENT_LENGTH:Ajt,MAX_SAFE_BUILD_LENGTH:Djt,MAX_SAFE_INTEGER:Cjt,RELEASE_TYPES:Ijt,SEMVER_SPEC_VERSION:Tjt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Njt=typeof process=="object"&&iL&&iL.NODE_DEBUG&&/\bsemver\b/i.test(iL.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var zM=Njt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=wK,s=zM;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(iB,iB.exports);var xK=iB.exports;const pue=/^[0-9]+$/,uNe=(e,t)=>{const n=pue.test(e),r=pue.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},kjt=(e,t)=>uNe(t,e);var Rjt={compareIdentifiers:uNe,rcompareIdentifiers:kjt};const YA=zM,{MAX_LENGTH:mue,MAX_SAFE_INTEGER:KA}=wK,{safeRe:gue,t:yue}=xK,Pjt=EK,{compareIdentifiers:k1}=Rjt;let Ojt=class Yc{constructor(t,n){if(n=Pjt(n),t instanceof Yc){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>mue)throw new TypeError(`version is longer than ${mue} characters`);YA("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?gue[yue.LOOSE]:gue[yue.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>KA||this.major<0)throw new TypeError("Invalid major version");if(this.minor>KA||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>KA||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<KA)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(YA("SemVer.compare",this.version,this.options,t),!(t instanceof Yc)){if(typeof t=="string"&&t===this.version)return 0;t=new Yc(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Yc||(t=new Yc(t,this.options)),k1(this.major,t.major)||k1(this.minor,t.minor)||k1(this.patch,t.patch)}comparePre(t){if(t instanceof Yc||(t=new Yc(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(YA("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return k1(r,i)}while(++n)}compareBuild(t){t instanceof Yc||(t=new Yc(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(YA("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return k1(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),k1(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var SK=Ojt;const vue=SK,Mjt=(e,t,n)=>new vue(e,n).compare(new vue(t,n));var sE=Mjt;const $jt=sE,Fjt=(e,t,n)=>$jt(e,t,n)===0;var Ljt=Fjt;const Bjt=sE,jjt=(e,t,n)=>Bjt(e,t,n)!==0;var zjt=jjt;const Ujt=sE,Vjt=(e,t,n)=>Ujt(e,t,n)>0;var Hjt=Vjt;const qjt=sE,Wjt=(e,t,n)=>qjt(e,t,n)>=0;var Gjt=Wjt;const Yjt=sE,Kjt=(e,t,n)=>Yjt(e,t,n)<0;var Xjt=Kjt;const Qjt=sE,Jjt=(e,t,n)=>Qjt(e,t,n)<=0;var Zjt=Jjt;const ezt=Ljt,tzt=zjt,nzt=Hjt,rzt=Gjt,izt=Xjt,szt=Zjt,ozt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return ezt(e,n,r);case"!=":return tzt(e,n,r);case">":return nzt(e,n,r);case">=":return rzt(e,n,r);case"<":return izt(e,n,r);case"<=":return szt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var azt=ozt,uL,bue;function uzt(){if(bue)return uL;bue=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}uL=t;const n=EK,{safeRe:r,t:i}=xK,s=azt,o=zM,a=SK,u=lNe();return uL}var lL,_ue;function lNe(){if(_ue)return lL;_ue=1;class e{constructor(M,F){if(F=r(F),M instanceof e)return M.loose===!!F.loose&&M.includePrerelease===!!F.includePrerelease?M:new e(M.raw,F);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(j=>!p(j[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&m(j[0])){this.set=[j];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const P=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+M,j=n.get(P);if(j)return j;const z=this.options.loose,V=z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];M=M.replace(V,I(this.options.includePrerelease)),s("hyphen replace",M),M=M.replace(a[u.COMPARATORTRIM],l),s("comparator trim",M),M=M.replace(a[u.TILDETRIM],c),s("tilde trim",M),M=M.replace(a[u.CARETTRIM],f),s("caret trim",M);let $=M.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>D(q,this.options));z&&($=$.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",$);const U=new Map,W=$.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];U.set(q.value,q)}U.size>1&&U.has("")&&U.delete("");const B=[...U.values()];return n.set(P,B),B}intersects(M,F){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(P=>g(P,F)&&M.set.some(j=>g(j,F)&&P.every(z=>j.every(V=>z.intersects(V,F)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new o(M,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],M,this.options))return!0;return!1}}lL=e;const t=Ejt,n=new t({max:1e3}),r=EK,i=uzt(),s=zM,o=SK,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=xK,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=wK,p=R=>R.value==="<0.0.0-0",m=R=>R.value==="",g=(R,M)=>{let F=!0;const P=R.slice();let j=P.pop();for(;F&&P.length;)F=P.every(z=>j.intersects(z,M)),j=P.pop();return F},y=(R,M)=>(s("comp",R,M),R=_(R,M),s("caret",R),R=b(R,M),s("tildes",R),R=S(R,M),s("xrange",R),R=A(R,M),s("stars",R),R),v=R=>!R||R.toLowerCase()==="x"||R==="*",b=(R,M)=>R.trim().split(/\s+/).map(F=>E(F,M)).join(" "),E=(R,M)=>{const F=M.loose?a[u.TILDELOOSE]:a[u.TILDE];return R.replace(F,(P,j,z,V,$)=>{s("tilde",R,P,j,z,V,$);let U;return v(j)?U="":v(z)?U=`>=${j}.0.0 <${+j+1}.0.0-0`:v(V)?U=`>=${j}.${z}.0 <${j}.${+z+1}.0-0`:$?(s("replaceTilde pr",$),U=`>=${j}.${z}.${V}-${$} <${j}.${+z+1}.0-0`):U=`>=${j}.${z}.${V} <${j}.${+z+1}.0-0`,s("tilde return",U),U})},_=(R,M)=>R.trim().split(/\s+/).map(F=>w(F,M)).join(" "),w=(R,M)=>{s("caret",R,M);const F=M.loose?a[u.CARETLOOSE]:a[u.CARET],P=M.includePrerelease?"-0":"";return R.replace(F,(j,z,V,$,U)=>{s("caret",R,j,z,V,$,U);let W;return v(z)?W="":v(V)?W=`>=${z}.0.0${P} <${+z+1}.0.0-0`:v($)?z==="0"?W=`>=${z}.${V}.0${P} <${z}.${+V+1}.0-0`:W=`>=${z}.${V}.0${P} <${+z+1}.0.0-0`:U?(s("replaceCaret pr",U),z==="0"?V==="0"?W=`>=${z}.${V}.${$}-${U} <${z}.${V}.${+$+1}-0`:W=`>=${z}.${V}.${$}-${U} <${z}.${+V+1}.0-0`:W=`>=${z}.${V}.${$}-${U} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?V==="0"?W=`>=${z}.${V}.${$}${P} <${z}.${V}.${+$+1}-0`:W=`>=${z}.${V}.${$}${P} <${z}.${+V+1}.0-0`:W=`>=${z}.${V}.${$} <${+z+1}.0.0-0`),s("caret return",W),W})},S=(R,M)=>(s("replaceXRanges",R,M),R.split(/\s+/).map(F=>C(F,M)).join(" ")),C=(R,M)=>{R=R.trim();const F=M.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return R.replace(F,(P,j,z,V,$,U)=>{s("xRange",R,P,j,z,V,$,U);const W=v(z),B=W||v(V),q=B||v($),Y=q;return j==="="&&Y&&(j=""),U=M.includePrerelease?"-0":"",W?j===">"||j==="<"?P="<0.0.0-0":P="*":j&&Y?(B&&(V=0),$=0,j===">"?(j=">=",B?(z=+z+1,V=0,$=0):(V=+V+1,$=0)):j==="<="&&(j="<",B?z=+z+1:V=+V+1),j==="<"&&(U="-0"),P=`${j+z}.${V}.${$}${U}`):B?P=`>=${z}.0.0${U} <${+z+1}.0.0-0`:q&&(P=`>=${z}.${V}.0${U} <${z}.${+V+1}.0-0`),s("xRange return",P),P})},A=(R,M)=>(s("replaceStars",R,M),R.trim().replace(a[u.STAR],"")),D=(R,M)=>(s("replaceGTE0",R,M),R.trim().replace(a[M.includePrerelease?u.GTE0PRE:u.GTE0],"")),I=R=>(M,F,P,j,z,V,$,U,W,B,q,Y,re)=>(v(P)?F="":v(j)?F=`>=${P}.0.0${R?"-0":""}`:v(z)?F=`>=${P}.${j}.0${R?"-0":""}`:V?F=`>=${F}`:F=`>=${F}${R?"-0":""}`,v(W)?U="":v(B)?U=`<${+W+1}.0.0-0`:v(q)?U=`<${W}.${+B+1}.0-0`:Y?U=`<=${W}.${B}.${q}-${Y}`:R?U=`<${W}.${B}.${+q+1}-0`:U=`<=${U}`,`${F} ${U}`.trim()),O=(R,M,F)=>{for(let P=0;P<R.length;P++)if(!R[P].test(M))return!1;if(M.prerelease.length&&!F.includePrerelease){for(let P=0;P<R.length;P++)if(s(R[P].semver),R[P].semver!==i.ANY&&R[P].semver.prerelease.length>0){const j=R[P].semver;if(j.major===M.major&&j.minor===M.minor&&j.patch===M.patch)return!0}return!1}return!0};return lL}const lzt=lNe(),czt=(e,t,n)=>{try{t=new lzt(t,n)}catch{return!1}return t.test(e)};var fzt=czt,cNe=djt(fzt);function dzt(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var hzt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function fNe(e,...t){for(const n of t)pzt(e,n);return e}function pzt(e,t){for(const n of Object.keys(t))z_(e,n,t[n],!0)}const Gl=QMt;let mT=n7t;const XA=typeof window<"u"?window:void 0;var Tue;mT===void 0&&((Tue=XA==null?void 0:XA.vl)!=null&&Tue.compile)&&(mT=XA.vl);const mzt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},gzt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},qw={vega:"Vega","vega-lite":"Vega-Lite"},pR={vega:Gl.version,"vega-lite":mT?mT.version:"not available"},yzt={vega:e=>e,"vega-lite":(e,t)=>mT.compile(e,{config:t}).spec},vzt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,bzt="chart-wrapper";function _zt(e){return typeof e=="function"}function Eue(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${qw[r]} JSON Source`}function Ezt(e,t){if(e.$schema){const n=nNe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${qw[n.library]}, but mode argument sets ${qw[t]??t}.`);const r=n.library;return cNe(pR[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${qw[r]} ${n.version}, but the current version of ${qw[r]} is v${pR[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function dNe(e){return!!(e&&"load"in e)}function wue(e){return dNe(e)?e:Gl.loader(e)}function wzt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return yt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function xzt(e,t,n={}){let r,i;yt(t)?(i=wue(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=wzt(r),o=s.loader;(!i||o)&&(i=wue(n.loader??o));const a=await xue(s,i),u=await xue(n,i),l={...fNe(u,a),config:j_(u.config??{},a.config??{})};return await Tzt(e,r,l,i)}async function xue(e,t){const n=yt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=yt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Szt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Tzt(e,t,n={},r){const i=n.theme?j_(rjt[n.theme],n.config??{}):n.config,s=ng(n.actions)?n.actions:fNe({},mzt,n.actions??{}),o={...gzt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Gl.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:w,rootContainer:S}=Szt(c);if(!w.getElementById(_)){const C=document.createElement("style");C.id=_,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?hzt.toString():n.defaultStyle,S.appendChild(C)}}const f=Ezt(t,n.mode);let d=yzt[f](t,i);if(f==="vega-lite"&&d.$schema){const _=nNe(d.$schema);cNe(pR.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${pR.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const _=document.createElement("div");_.classList.add(bzt),c.appendChild(_),h=_}const p=n.patch;if(p&&(d=p instanceof Function?p(d):nO(d,p,!0,!1).newDocument),n.formatLocale&&Gl.formatLocale(n.formatLocale),n.timeFormatLocale&&Gl.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const w=n.expressionFunctions[_];"fn"in w?Gl.expressionFunction(_,w.fn,w.visitor):w instanceof Function&&Gl.expressionFunction(_,w)}const{ast:m}=n,g=Gl.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Gl.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Gl.expressionInterpreter??n.expr??a$t}:{}});if(y.addSignalListener("autosize",(_,w)=>{const{type:S}=w;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:w}=n,S=_&&!dNe(_)?_==null?void 0:_.baseURL:void 0,C=_zt(w)?w:new fjt({baseURL:S,...w===!0?{}:w}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:_,updateSet:w}=typeof v=="boolean"?{}:v;y.hover(_,w)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let _=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),_=S;const C=document.createElement("summary");C.innerHTML=vzt,S.append(C),b=A=>{S.contains(A.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const w=document.createElement("div");if(_.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const C=o[`${S.toUpperCase()}_ACTION`],A=document.createElement("a"),D=vt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${S}`,A.addEventListener("mousedown",async function(I){I.preventDefault();const O=await y.toImageURL(S,D);this.href=O}),w.append(A)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){Eue(c6(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),w.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){Eue(c6(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),w.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){dzt(window,S,{config:i,mode:f,renderer:a,spec:c6(t)}),A.preventDefault()}),w.append(C)}}function E(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function Czt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Azt(e,t,n){n&&(Czt(n)?n(e.data(t)):e.change(t,Gl.changeset().remove(()=>!0).insert(n)))}function Dzt(e,t){Object.keys(t).forEach(n=>{Azt(e,n,t[n])})}function hNe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const pNe=()=>{};function cL(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Izt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=hNe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!vD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Sue(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function fL(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function Ww(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class mNe extends xi.PureComponent{constructor(){super(...arguments),Ww(this,"containerRef",xi.createRef()),Ww(this,"resultPromise",void 0),Ww(this,"handleError",t=>{const{onError:n=pNe}=this.props;n(t,this.containerRef.current),console.warn(t)}),Ww(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=hNe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Izt(fL(this.props),fL(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!N8(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Sue(a,s),i&&cL(a,i)),a.run()})}else N8(i,s)||this.modifyView(o=>{s&&Sue(o,s),i&&cL(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=fL(this.props);this.resultPromise=xzt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;cL(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return xi.createElement("div",{ref:this.containerRef,className:t,style:n})}}Ww(mNe,"propTypes",{className:Nie.string,onError:Nie.func});function sB(){return sB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sB.apply(this,arguments)}function oB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Nzt={};class gNe extends xi.PureComponent{constructor(){super(...arguments),oB(this,"vegaEmbed",xi.createRef()),oB(this,"handleNewView",t=>{this.update();const{onNewView:n=pNe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){N8(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Dzt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return xi.createElement(mNe,sB({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}oB(gNe,"defaultProps",{data:Nzt});function aB(){return aB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aB.apply(this,arguments)}function kzt(e){return xi.createElement(gNe,aB({},e,{mode:"vega-lite"}))}function Rzt(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Pzt(e){const{studyId:t,allParticipants:n,config:r}=e,i=Fh(),[s,o]=Zce(),a=n.filter(b=>b.completed).map(b=>Math.max(...Object.values(b.answers).map(E=>E.endTime).filter(E=>E!==void 0))).filter(b=>Number.isFinite(b)),[u,l]=k.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,f,d,h]=k.useMemo(()=>{const b=n.filter(w=>!w.rejected&&w.completed),E=n.filter(w=>!w.rejected&&!w.completed),_=n.filter(w=>w.rejected);return[b,E,_,b.filter(w=>Rzt(w.answers,u))]},[n,u]),p=k.useMemo(()=>{var b,E;return h.length>0?[{Date:(b=u[0])==null?void 0:b.getTime(),Participants:0},...h.map(_=>Math.max(...Object.values(_.answers).map(w=>w.endTime).flat())).sort((_,w)=>_-w).map((_,w)=>({Date:_,Participants:w})),{Date:(E=u[1])==null?void 0:E.getTime(),Participants:h.length}]:[]},[h,u]),m=k.useMemo(()=>{var b,E;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(b=u[0])==null?void 0:b.getTime(),(E=u[1])==null?void 0:E.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,u,p]),[g,{close:y,open:v}]=bv(!1);return x.jsx(vl,{children:x.jsxs(_y,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[x.jsxs(Jt,{align:"center",mb:"xs",justify:"space-between",children:[x.jsxs(Jt,{direction:"row",align:"center",children:[x.jsx(ci,{order:5,children:t}),x.jsx(NEe,{completed:c.length,inProgress:f.length,rejected:d.length,filteredCompleted:h.length})]}),x.jsxs(ro,{children:[x.jsx(IEe,{allParticipants:n,studyId:t}),x.jsxs(Rr,{opened:g,children:[x.jsx(Rr.Target,{children:x.jsx(Ln,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:x.jsx(F8e,{})})}),x.jsx(Rr.Dropdown,{children:x.jsx(nt,{children:"Analyze and manage study data"})})]})]})]}),x.jsx(BH,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),p.length>0?x.jsxs(x.Fragment,{children:[x.jsx(nt,{mt:16,children:"Finished Participants"}),x.jsx(kzt,{spec:m,actions:!1})]}):x.jsx(we,{h:293.4,children:x.jsx(Qa,{style:{height:"100%"},children:x.jsx(nt,{children:"Not enough participants for chart"})})})]})})}function Ozt(e){const{globalConfig:t}=e,[n,r]=k.useState(!1),[i,s]=k.useState({}),[o,a]=k.useState({}),[u,l]=k.useState({}),{storageEngine:c}=Qi(),{user:f}=Ly();k.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async b=>{const E=await y3(b,t);if(c){if(p[b]=await c.getAllParticipantsDataByStudy(b),E===null)return;if(m[b]=E,c instanceof nl){const _=await c.getModes(b);g[b]=_.analyticsInterfacePubliclyAccessible}}};await(async()=>{const b=t.configsList.map(E=>y(E));try{await Promise.all(b),s(p),a(m),l(g)}catch(E){console.error("Error fetching data:",E)}finally{r(!1)}})()})()},[t,c]);const d=t.configsList.map(h=>i[h]&&(u[h]||f.isAdmin?x.jsx(ol.Col,{span:{md:12,xl:6},children:x.jsx(Pzt,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return x.jsxs(we,{children:[x.jsx(ci,{mb:20,order:4,children:"Your Studies:"}),x.jsxs(ol,{children:[d.length>0?d:x.jsx(vl,{mt:100,children:x.jsx(nt,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),x.jsx(Ru,{visible:n})]})]})}function Mzt({globalConfig:e}){return x.jsxs(x.Fragment,{children:[x.jsx(kx,{studyIds:e.configsList}),x.jsx(Wr.Main,{children:x.jsx(vl,{fluid:!0,children:x.jsx(Ozt,{globalConfig:e})})})]})}function $zt(){const{user:e,triggerAuth:t}=Ly(),{storageEngine:n}=Qi(),[r,i]=k.useState(!1),[s,o]=k.useState([]),[a,u]=k.useState(!1),[l,c]=k.useState(!1),[f,d]=k.useState(!1),[h,p]=k.useState(!1),[m,g]=k.useState(""),[y,v]=k.useState(null),b=$me({initialValues:{email:""},validate:{email:AWe("Invalid email")}});k.useEffect(()=>{(async()=>{if(u(!0),n instanceof nl){const I=await(n==null?void 0:n.getUserManagementData("authentication"));i(I==null?void 0:I.isEnabled);const O=await(n==null?void 0:n.getUserManagementData("adminUsers"));O&&O.adminUsersList&&o(O==null?void 0:O.adminUsersList.map(R=>R.email))}else i(!1);u(!1)})()},[n]);const E=async()=>{if(u(!0),n instanceof nl){const D=await kEe(n,u);D&&D.email&&v({email:D.email,uid:D.uid}),p(!0)}u(!1)},_=async D=>{u(!0),n instanceof nl&&D&&(await n.changeAuth(!0),await n.addAdminUser(D),o([D.email]),i(!0),t()),p(!1),u(!1)},w=async()=>{if(u(!0),n instanceof nl){await n.addAdminUser({email:b.values.email,uid:null});const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(I=>I.email))}u(!1),c(!1),b.setValues({email:""})},S=D=>{d(!0),g(D)},C=async()=>{if(u(!0),n instanceof nl){await n.removeAdminUser(m);const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(I=>I.email))}d(!1),u(!1)},A=k.useMemo(()=>n instanceof nl,[n]);return x.jsxs(x.Fragment,{children:[x.jsx(vl,{children:x.jsxs(_y,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[x.jsx(ci,{mb:20,order:3,children:"Authentication"}),r?x.jsx(Jt,{children:x.jsx(nt,{children:"Authentication is enabled."})}):x.jsxs(Jt,{justify:"space-between",children:[x.jsx(we,{children:x.jsx(nt,{children:"Authentication is currently disabled."})}),x.jsx(Wi,{label:"You can only enable auth when using Firebase",disabled:A,children:x.jsx(Ln,{onClick:D=>A?E():D.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?x.jsxs(Jt,{mt:40,direction:"column",children:[x.jsxs(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[x.jsx(ci,{order:6,children:"Enabled Users"}),x.jsx(Zj,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(D=>{var I;return x.jsxs(Jt,{justify:"space-between",mb:10,children:[x.jsx(nt,{children:D}),D===((I=e.user)==null?void 0:I.email)?x.jsx(nt,{color:"blue",size:"xs",children:"You"}):x.jsx(dm,{variant:"subtle",onClick:()=>S(D),children:x.jsx(Ohe,{color:"red"})})]},D)}):null]}):null]})}),x.jsx(Ki,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:x.jsxs(we,{component:"form",onSubmit:b.onSubmit(()=>w()),children:[x.jsx(f0,{leftSection:x.jsx(P8e,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),x.jsxs(Jt,{mt:30,justify:"right",children:[x.jsx(Ln,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),x.jsx(Ln,{type:"submit",children:"Save"})]})]})}),x.jsxs(Ki,{opened:f,size:"large",onClose:()=>d(!1),title:x.jsxs(nt,{fw:700,children:["Remove",m,"?"]}),children:[x.jsxs(nt,{mt:40,children:["Are you sure you want to remove",x.jsx("b",{children:m})," ","as an administrator?"]}),x.jsxs(Jt,{mt:40,justify:"right",children:[x.jsx(Ln,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),x.jsx(Ln,{onClick:()=>C(),children:"Yes, I'm sure."})]})]}),x.jsxs(Ki,{opened:h,size:"md",onClose:()=>d(!1),title:x.jsx(nt,{fw:700,children:"Enable Authentication?"}),children:[x.jsxs(nt,{mt:40,children:["User"," ",x.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),x.jsxs(Jt,{mt:40,justify:"right",children:[x.jsx(Ln,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),x.jsx(Ln,{onClick:()=>_(y),children:"Yes, I'm sure."})]})]}),x.jsx(Ru,{visible:a})]})}class Fzt extends AEe{constructor(){super("localStorage");Ea(this,"studyDatabase");Ea(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await B1.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await _k(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await _k(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await B1.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=bk();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=B1.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=bk();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await B1.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await B1.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function Lzt(){let e,t=!1;{const n=new nl;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Fzt;await n.connect(),e=n}return e}async function Bzt(){const t=await(await fetch(`${Hf}global.json`)).text();return eht(t)}function jzt(){const[e,t]=k.useState(null),[n,r]=k.useState({});k.useEffect(()=>{async function a(){e&&r(await Vht(e))}a()},[e]),k.useEffect(()=>{e||Bzt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Qi();k.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Lzt();s(u)}a()},[s,i]);const o=async a=>i instanceof nl?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?x.jsx(x8e,{basename:Hf,children:x.jsx(U_t,{children:x.jsx(I8e,{children:x.jsx(Wr,{padding:"md",header:{height:70},children:x.jsxs(b8e,{children:[x.jsx(xd,{path:"/",element:x.jsxs(x.Fragment,{children:[x.jsx(kx,{studyIds:e.configsList}),x.jsx(RHe,{globalConfig:e,studyConfigs:n})]})}),x.jsx(xd,{path:"/:studyId/*",element:x.jsx(Hht,{globalConfig:e})}),x.jsx(xd,{path:"/analysis/dashboard",element:x.jsx(Mzt,{globalConfig:e})}),x.jsx(xd,{path:"/analysis",element:x.jsx(e8,{to:"/analysis/dashboard"})}),x.jsx(xd,{path:"/analysis/stats/:studyId/:tab",element:x.jsx(Cie,{paramToCheck:"studyId",paramCallback:o,children:x.jsx(K_t,{globalConfig:e})})}),x.jsx(xd,{path:"/analysis/stats/:studyId",element:x.jsx(e8,{to:"./table",replace:!0})}),x.jsx(xd,{path:"/settings",element:x.jsxs(Cie,{children:[x.jsx(kx,{studyIds:e.configsList}),x.jsx(Wr.Main,{children:x.jsx($zt,{})})]})}),x.jsx(xd,{path:"/login",element:x.jsxs(x.Fragment,{children:[x.jsx(kx,{studyIds:e.configsList}),x.jsx(Wr.Main,{children:x.jsx(X_t,{})})]})})]})})})})}):null}dL.createRoot(document.getElementById("root")).render(x.jsx(xi.StrictMode,{children:x.jsx(I5e,{children:x.jsx(sfe,{children:x.jsx(jzt,{})})})}))});export default zzt();
