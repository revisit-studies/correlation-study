var ANe=Object.defineProperty;var DNe=(e,t,n)=>t in e?ANe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var INe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var wa=(e,t,n)=>(DNe(e,typeof t!="symbol"?t+"":t,n),n);var lUt=INe((nVt,TK)=>{function NNe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kNe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Pue={exports:{}},bR={},Oue={exports:{}},Nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT=Symbol.for("react.element"),RNe=Symbol.for("react.portal"),PNe=Symbol.for("react.fragment"),ONe=Symbol.for("react.strict_mode"),MNe=Symbol.for("react.profiler"),$Ne=Symbol.for("react.provider"),FNe=Symbol.for("react.context"),LNe=Symbol.for("react.forward_ref"),BNe=Symbol.for("react.suspense"),jNe=Symbol.for("react.memo"),zNe=Symbol.for("react.lazy"),HK=Symbol.iterator;function UNe(e){return e===null||typeof e!="object"?null:(e=HK&&e[HK]||e["@@iterator"],typeof e=="function"?e:null)}var Mue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$ue=Object.assign,Fue={};function t_(e,t,n){this.props=e,this.context=t,this.refs=Fue,this.updater=n||Mue}t_.prototype.isReactComponent={};t_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};t_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lue(){}Lue.prototype=t_.prototype;function mB(e,t,n){this.props=e,this.context=t,this.refs=Fue,this.updater=n||Mue}var gB=mB.prototype=new Lue;gB.constructor=mB;$ue(gB,t_.prototype);gB.isPureReactComponent=!0;var qK=Array.isArray,Bue=Object.prototype.hasOwnProperty,yB={current:null},jue={key:!0,ref:!0,__self:!0,__source:!0};function zue(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Bue.call(t,r)&&!jue.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:vT,type:e,key:s,ref:o,props:i,_owner:yB.current}}function VNe(e,t){return{$$typeof:vT,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vB(e){return typeof e=="object"&&e!==null&&e.$$typeof===vT}function HNe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var WK=/\/+/g;function JM(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HNe(""+e.key):t.toString(36)}function eD(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vT:case RNe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+JM(o,0):r,qK(i)?(n="",e!=null&&(n=e.replace(WK,"$&/")+"/"),eD(i,t,n,"",function(l){return l})):i!=null&&(vB(i)&&(i=VNe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(WK,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",qK(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+JM(s,a);o+=eD(s,t,n,u,i)}else if(u=UNe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+JM(s,a++),o+=eD(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hC(e,t,n){if(e==null)return e;var r=[],i=0;return eD(e,r,"","",function(s){return t.call(n,s,i++)}),r}function qNe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ma={current:null},tD={transition:null},WNe={ReactCurrentDispatcher:ma,ReactCurrentBatchConfig:tD,ReactCurrentOwner:yB};function Uue(){throw Error("act(...) is not supported in production builds of React.")}Nn.Children={map:hC,forEach:function(e,t,n){hC(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hC(e,function(){t++}),t},toArray:function(e){return hC(e,function(t){return t})||[]},only:function(e){if(!vB(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nn.Component=t_;Nn.Fragment=PNe;Nn.Profiler=MNe;Nn.PureComponent=mB;Nn.StrictMode=ONe;Nn.Suspense=BNe;Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WNe;Nn.act=Uue;Nn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=$ue({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=yB.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Bue.call(t,u)&&!jue.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:vT,type:e.type,key:i,ref:s,props:r,_owner:o}};Nn.createContext=function(e){return e={$$typeof:FNe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$Ne,_context:e},e.Consumer=e};Nn.createElement=zue;Nn.createFactory=function(e){var t=zue.bind(null,e);return t.type=e,t};Nn.createRef=function(){return{current:null}};Nn.forwardRef=function(e){return{$$typeof:LNe,render:e}};Nn.isValidElement=vB;Nn.lazy=function(e){return{$$typeof:zNe,_payload:{_status:-1,_result:e},_init:qNe}};Nn.memo=function(e,t){return{$$typeof:jNe,type:e,compare:t===void 0?null:t}};Nn.startTransition=function(e){var t=tD.transition;tD.transition={};try{e()}finally{tD.transition=t}};Nn.unstable_act=Uue;Nn.useCallback=function(e,t){return ma.current.useCallback(e,t)};Nn.useContext=function(e){return ma.current.useContext(e)};Nn.useDebugValue=function(){};Nn.useDeferredValue=function(e){return ma.current.useDeferredValue(e)};Nn.useEffect=function(e,t){return ma.current.useEffect(e,t)};Nn.useId=function(){return ma.current.useId()};Nn.useImperativeHandle=function(e,t,n){return ma.current.useImperativeHandle(e,t,n)};Nn.useInsertionEffect=function(e,t){return ma.current.useInsertionEffect(e,t)};Nn.useLayoutEffect=function(e,t){return ma.current.useLayoutEffect(e,t)};Nn.useMemo=function(e,t){return ma.current.useMemo(e,t)};Nn.useReducer=function(e,t,n){return ma.current.useReducer(e,t,n)};Nn.useRef=function(e){return ma.current.useRef(e)};Nn.useState=function(e){return ma.current.useState(e)};Nn.useSyncExternalStore=function(e,t,n){return ma.current.useSyncExternalStore(e,t,n)};Nn.useTransition=function(){return ma.current.useTransition()};Nn.version="18.3.1";Oue.exports=Nn;var k=Oue.exports;const xi=pa(k),cI=NNe({__proto__:null,default:xi},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GNe=k,YNe=Symbol.for("react.element"),KNe=Symbol.for("react.fragment"),XNe=Object.prototype.hasOwnProperty,QNe=GNe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JNe={key:!0,ref:!0,__self:!0,__source:!0};function Vue(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)XNe.call(t,r)&&!JNe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:YNe,type:e,key:s,ref:o,props:i,_owner:QNe.current}}bR.Fragment=KNe;bR.jsx=Vue;bR.jsxs=Vue;Pue.exports=bR;var w=Pue.exports,_L={},Hue={exports:{}},Uu={},que={exports:{}},Wue={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var $=z.length;z.push(V);e:for(;0<$;){var U=$-1>>>1,W=z[U];if(0<i(W,V))z[U]=V,z[$]=W,$=U;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],$=z.pop();if($!==V){z[0]=$;e:for(var U=0,W=z.length,B=W>>>1;U<B;){var q=2*(U+1)-1,Y=z[q],re=q+1,pe=z[re];if(0>i(Y,$))re<W&&0>i(pe,Y)?(z[U]=pe,z[re]=$,U=re):(z[U]=Y,z[q]=$,U=q);else if(re<W&&0>i(pe,$))z[U]=pe,z[re]=$,U=re;else break e}}return V}function i(z,V){var $=z.sortIndex-V.sortIndex;return $!==0?$:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=z)r(l),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(l)}}function E(z){if(m=!1,b(z),!p)if(n(u)!==null)p=!0,P(_);else{var V=n(l);V!==null&&j(E,V.startTime-z)}}function _(z,V){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var $=d;try{for(b(V),f=n(u);f!==null&&(!(f.expirationTime>V)||z&&!I());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=V);V=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(V)}else r(u);f=n(u)}if(f!==null)var B=!0;else{var q=n(l);q!==null&&j(E,q.startTime-V),B=!1}return B}finally{f=null,d=$,h=!1}}var x=!1,S=null,C=-1,A=5,D=-1;function I(){return!(e.unstable_now()-D<A)}function O(){if(S!==null){var z=e.unstable_now();D=z;var V=!0;try{V=S(!0,z)}finally{V?R():(x=!1,S=null)}}else x=!1}var R;if(typeof v=="function")R=function(){v(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,F=M.port2;M.port1.onmessage=O,R=function(){F.postMessage(null)}}else R=function(){g(O,0)};function P(z){S=z,x||(x=!0,R())}function j(z,V){C=g(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,P(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var $=d;d=V;try{return z()}finally{d=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=d;d=z;try{return V()}finally{d=$}},e.unstable_scheduleCallback=function(z,V,$){var U=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=$+W,z={id:c++,callback:V,priorityLevel:z,startTime:$,expirationTime:W,sortIndex:-1},$>U?(z.sortIndex=$,t(l,z),n(u)===null&&z===n(l)&&(m?(y(C),C=-1):m=!0,j(E,$-U))):(z.sortIndex=W,t(u,z),p||h||(p=!0,P(_))),z},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(z){var V=d;return function(){var $=d;d=V;try{return z.apply(this,arguments)}finally{d=$}}}})(Wue);que.exports=Wue;var ZNe=que.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eke=k,Nu=ZNe;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gue=new Set,Hx={};function hy(e,t){qv(e,t),qv(e+"Capture",t)}function qv(e,t){for(Hx[e]=t,e=0;e<t.length;e++)Gue.add(t[e])}var oh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),EL=Object.prototype.hasOwnProperty,tke=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GK={},YK={};function nke(e){return EL.call(YK,e)?!0:EL.call(GK,e)?!1:tke.test(e)?YK[e]=!0:(GK[e]=!0,!1)}function rke(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ike(e,t,n,r){if(t===null||typeof t>"u"||rke(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ga(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var io={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){io[e]=new ga(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];io[t]=new ga(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){io[e]=new ga(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){io[e]=new ga(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){io[e]=new ga(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){io[e]=new ga(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){io[e]=new ga(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){io[e]=new ga(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){io[e]=new ga(e,5,!1,e.toLowerCase(),null,!1,!1)});var bB=/[\-:]([a-z])/g;function _B(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bB,_B);io[t]=new ga(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bB,_B);io[t]=new ga(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bB,_B);io[t]=new ga(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){io[e]=new ga(e,1,!1,e.toLowerCase(),null,!1,!1)});io.xlinkHref=new ga("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){io[e]=new ga(e,1,!1,e.toLowerCase(),null,!0,!0)});function EB(e,t,n,r){var i=io.hasOwnProperty(t)?io[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ike(t,n,i,r)&&(n=null),r||i===null?nke(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Nh=eke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pC=Symbol.for("react.element"),U1=Symbol.for("react.portal"),V1=Symbol.for("react.fragment"),wB=Symbol.for("react.strict_mode"),wL=Symbol.for("react.profiler"),Yue=Symbol.for("react.provider"),Kue=Symbol.for("react.context"),xB=Symbol.for("react.forward_ref"),xL=Symbol.for("react.suspense"),SL=Symbol.for("react.suspense_list"),SB=Symbol.for("react.memo"),lp=Symbol.for("react.lazy"),Xue=Symbol.for("react.offscreen"),KK=Symbol.iterator;function lE(e){return e===null||typeof e!="object"?null:(e=KK&&e[KK]||e["@@iterator"],typeof e=="function"?e:null)}var pi=Object.assign,ZM;function aw(e){if(ZM===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ZM=t&&t[1]||""}return`
`+ZM+e}var e$=!1;function t$(e,t){if(!e||e$)return"";e$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{e$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?aw(e):""}function ske(e){switch(e.tag){case 5:return aw(e.type);case 16:return aw("Lazy");case 13:return aw("Suspense");case 19:return aw("SuspenseList");case 0:case 2:case 15:return e=t$(e.type,!1),e;case 11:return e=t$(e.type.render,!1),e;case 1:return e=t$(e.type,!0),e;default:return""}}function TL(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V1:return"Fragment";case U1:return"Portal";case wL:return"Profiler";case wB:return"StrictMode";case xL:return"Suspense";case SL:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kue:return(e.displayName||"Context")+".Consumer";case Yue:return(e._context.displayName||"Context")+".Provider";case xB:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case SB:return t=e.displayName||null,t!==null?t:TL(e.type)||"Memo";case lp:t=e._payload,e=e._init;try{return TL(e(t))}catch{}}return null}function oke(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TL(t);case 8:return t===wB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lm(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Que(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ake(e){var t=Que(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mC(e){e._valueTracker||(e._valueTracker=ake(e))}function Jue(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Que(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fI(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function CL(e,t){var n=t.checked;return pi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function XK(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=lm(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zue(e,t){t=t.checked,t!=null&&EB(e,"checked",t,!1)}function AL(e,t){Zue(e,t);var n=lm(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?DL(e,t.type,n):t.hasOwnProperty("defaultValue")&&DL(e,t.type,lm(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function QK(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function DL(e,t,n){(t!=="number"||fI(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var uw=Array.isArray;function hv(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lm(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function IL(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return pi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function JK(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ot(92));if(uw(n)){if(1<n.length)throw Error(ot(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:lm(n)}}function ele(e,t){var n=lm(t.value),r=lm(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ZK(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tle(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NL(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tle(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gC,nle=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gC=gC||document.createElement("div"),gC.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gC.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qx(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uke=["Webkit","ms","Moz","O"];Object.keys(Kw).forEach(function(e){uke.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kw[t]=Kw[e]})});function rle(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kw.hasOwnProperty(e)&&Kw[e]?(""+t).trim():t+"px"}function ile(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rle(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var lke=pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kL(e,t){if(t){if(lke[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function RL(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PL=null;function TB(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var OL=null,pv=null,mv=null;function eX(e){if(e=ET(e)){if(typeof OL!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=SR(t),OL(e.stateNode,e.type,t))}}function sle(e){pv?mv?mv.push(e):mv=[e]:pv=e}function ole(){if(pv){var e=pv,t=mv;if(mv=pv=null,eX(e),t)for(e=0;e<t.length;e++)eX(t[e])}}function ale(e,t){return e(t)}function ule(){}var n$=!1;function lle(e,t,n){if(n$)return e(t,n);n$=!0;try{return ale(e,t,n)}finally{n$=!1,(pv!==null||mv!==null)&&(ule(),ole())}}function Wx(e,t){var n=e.stateNode;if(n===null)return null;var r=SR(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ot(231,t,typeof n));return n}var ML=!1;if(oh)try{var cE={};Object.defineProperty(cE,"passive",{get:function(){ML=!0}}),window.addEventListener("test",cE,cE),window.removeEventListener("test",cE,cE)}catch{ML=!1}function cke(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Xw=!1,dI=null,hI=!1,$L=null,fke={onError:function(e){Xw=!0,dI=e}};function dke(e,t,n,r,i,s,o,a,u){Xw=!1,dI=null,cke.apply(fke,arguments)}function hke(e,t,n,r,i,s,o,a,u){if(dke.apply(this,arguments),Xw){if(Xw){var l=dI;Xw=!1,dI=null}else throw Error(ot(198));hI||(hI=!0,$L=l)}}function py(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cle(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tX(e){if(py(e)!==e)throw Error(ot(188))}function pke(e){var t=e.alternate;if(!t){if(t=py(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tX(i),e;if(s===r)return tX(i),t;s=s.sibling}throw Error(ot(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ot(189))}}if(n.alternate!==r)throw Error(ot(190))}if(n.tag!==3)throw Error(ot(188));return n.stateNode.current===n?e:t}function fle(e){return e=pke(e),e!==null?dle(e):null}function dle(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dle(e);if(t!==null)return t;e=e.sibling}return null}var hle=Nu.unstable_scheduleCallback,nX=Nu.unstable_cancelCallback,mke=Nu.unstable_shouldYield,gke=Nu.unstable_requestPaint,Oi=Nu.unstable_now,yke=Nu.unstable_getCurrentPriorityLevel,CB=Nu.unstable_ImmediatePriority,ple=Nu.unstable_UserBlockingPriority,pI=Nu.unstable_NormalPriority,vke=Nu.unstable_LowPriority,mle=Nu.unstable_IdlePriority,_R=null,yf=null;function bke(e){if(yf&&typeof yf.onCommitFiberRoot=="function")try{yf.onCommitFiberRoot(_R,e,void 0,(e.current.flags&128)===128)}catch{}}var hc=Math.clz32?Math.clz32:wke,_ke=Math.log,Eke=Math.LN2;function wke(e){return e>>>=0,e===0?32:31-(_ke(e)/Eke|0)|0}var yC=64,vC=4194304;function lw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mI(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=lw(a):(s&=o,s!==0&&(r=lw(s)))}else o=n&~i,o!==0?r=lw(o):s!==0&&(r=lw(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hc(t),i=1<<n,r|=e[n],t&=~i;return r}function xke(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ske(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-hc(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=xke(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function FL(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gle(){var e=yC;return yC<<=1,!(yC&4194240)&&(yC=64),e}function r$(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bT(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hc(t),e[t]=n}function Tke(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-hc(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function AB(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var pr=0;function yle(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vle,DB,ble,_le,Ele,LL=!1,bC=[],zp=null,Up=null,Vp=null,Gx=new Map,Yx=new Map,yp=[],Cke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rX(e,t){switch(e){case"focusin":case"focusout":zp=null;break;case"dragenter":case"dragleave":Up=null;break;case"mouseover":case"mouseout":Vp=null;break;case"pointerover":case"pointerout":Gx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yx.delete(t.pointerId)}}function fE(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ET(t),t!==null&&DB(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ake(e,t,n,r,i){switch(t){case"focusin":return zp=fE(zp,e,t,n,r,i),!0;case"dragenter":return Up=fE(Up,e,t,n,r,i),!0;case"mouseover":return Vp=fE(Vp,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Gx.set(s,fE(Gx.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Yx.set(s,fE(Yx.get(s)||null,e,t,n,r,i)),!0}return!1}function wle(e){var t=Jg(e.target);if(t!==null){var n=py(t);if(n!==null){if(t=n.tag,t===13){if(t=cle(n),t!==null){e.blockedOn=t,Ele(e.priority,function(){ble(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nD(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=BL(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);PL=r,n.target.dispatchEvent(r),PL=null}else return t=ET(n),t!==null&&DB(t),e.blockedOn=n,!1;t.shift()}return!0}function iX(e,t,n){nD(e)&&n.delete(t)}function Dke(){LL=!1,zp!==null&&nD(zp)&&(zp=null),Up!==null&&nD(Up)&&(Up=null),Vp!==null&&nD(Vp)&&(Vp=null),Gx.forEach(iX),Yx.forEach(iX)}function dE(e,t){e.blockedOn===t&&(e.blockedOn=null,LL||(LL=!0,Nu.unstable_scheduleCallback(Nu.unstable_NormalPriority,Dke)))}function Kx(e){function t(i){return dE(i,e)}if(0<bC.length){dE(bC[0],e);for(var n=1;n<bC.length;n++){var r=bC[n];r.blockedOn===e&&(r.blockedOn=null)}}for(zp!==null&&dE(zp,e),Up!==null&&dE(Up,e),Vp!==null&&dE(Vp,e),Gx.forEach(t),Yx.forEach(t),n=0;n<yp.length;n++)r=yp[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yp.length&&(n=yp[0],n.blockedOn===null);)wle(n),n.blockedOn===null&&yp.shift()}var gv=Nh.ReactCurrentBatchConfig,gI=!0;function Ike(e,t,n,r){var i=pr,s=gv.transition;gv.transition=null;try{pr=1,IB(e,t,n,r)}finally{pr=i,gv.transition=s}}function Nke(e,t,n,r){var i=pr,s=gv.transition;gv.transition=null;try{pr=4,IB(e,t,n,r)}finally{pr=i,gv.transition=s}}function IB(e,t,n,r){if(gI){var i=BL(e,t,n,r);if(i===null)h$(e,t,r,yI,n),rX(e,r);else if(Ake(i,e,t,n,r))r.stopPropagation();else if(rX(e,r),t&4&&-1<Cke.indexOf(e)){for(;i!==null;){var s=ET(i);if(s!==null&&vle(s),s=BL(e,t,n,r),s===null&&h$(e,t,r,yI,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else h$(e,t,r,null,n)}}var yI=null;function BL(e,t,n,r){if(yI=null,e=TB(r),e=Jg(e),e!==null)if(t=py(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cle(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yI=e,null}function xle(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yke()){case CB:return 1;case ple:return 4;case pI:case vke:return 16;case mle:return 536870912;default:return 16}default:return 16}}var Cp=null,NB=null,rD=null;function Sle(){if(rD)return rD;var e,t=NB,n=t.length,r,i="value"in Cp?Cp.value:Cp.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return rD=i.slice(e,1<r?1-r:void 0)}function iD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _C(){return!0}function sX(){return!1}function Vu(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_C:sX,this.isPropagationStopped=sX,this}return pi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_C)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_C)},persist:function(){},isPersistent:_C}),t}var n_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kB=Vu(n_),_T=pi({},n_,{view:0,detail:0}),kke=Vu(_T),i$,s$,hE,ER=pi({},_T,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RB,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hE&&(hE&&e.type==="mousemove"?(i$=e.screenX-hE.screenX,s$=e.screenY-hE.screenY):s$=i$=0,hE=e),i$)},movementY:function(e){return"movementY"in e?e.movementY:s$}}),oX=Vu(ER),Rke=pi({},ER,{dataTransfer:0}),Pke=Vu(Rke),Oke=pi({},_T,{relatedTarget:0}),o$=Vu(Oke),Mke=pi({},n_,{animationName:0,elapsedTime:0,pseudoElement:0}),$ke=Vu(Mke),Fke=pi({},n_,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lke=Vu(Fke),Bke=pi({},n_,{data:0}),aX=Vu(Bke),jke={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vke(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Uke[e])?!!t[e]:!1}function RB(){return Vke}var Hke=pi({},_T,{key:function(e){if(e.key){var t=jke[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=iD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zke[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RB,charCode:function(e){return e.type==="keypress"?iD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?iD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qke=Vu(Hke),Wke=pi({},ER,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uX=Vu(Wke),Gke=pi({},_T,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RB}),Yke=Vu(Gke),Kke=pi({},n_,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xke=Vu(Kke),Qke=pi({},ER,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jke=Vu(Qke),Zke=[9,13,27,32],PB=oh&&"CompositionEvent"in window,Qw=null;oh&&"documentMode"in document&&(Qw=document.documentMode);var eRe=oh&&"TextEvent"in window&&!Qw,Tle=oh&&(!PB||Qw&&8<Qw&&11>=Qw),lX=" ",cX=!1;function Cle(e,t){switch(e){case"keyup":return Zke.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ale(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var H1=!1;function tRe(e,t){switch(e){case"compositionend":return Ale(t);case"keypress":return t.which!==32?null:(cX=!0,lX);case"textInput":return e=t.data,e===lX&&cX?null:e;default:return null}}function nRe(e,t){if(H1)return e==="compositionend"||!PB&&Cle(e,t)?(e=Sle(),rD=NB=Cp=null,H1=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tle&&t.locale!=="ko"?null:t.data;default:return null}}var rRe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fX(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rRe[e.type]:t==="textarea"}function Dle(e,t,n,r){sle(r),t=vI(t,"onChange"),0<t.length&&(n=new kB("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jw=null,Xx=null;function iRe(e){Ble(e,0)}function wR(e){var t=G1(e);if(Jue(t))return e}function sRe(e,t){if(e==="change")return t}var Ile=!1;if(oh){var a$;if(oh){var u$="oninput"in document;if(!u$){var dX=document.createElement("div");dX.setAttribute("oninput","return;"),u$=typeof dX.oninput=="function"}a$=u$}else a$=!1;Ile=a$&&(!document.documentMode||9<document.documentMode)}function hX(){Jw&&(Jw.detachEvent("onpropertychange",Nle),Xx=Jw=null)}function Nle(e){if(e.propertyName==="value"&&wR(Xx)){var t=[];Dle(t,Xx,e,TB(e)),lle(iRe,t)}}function oRe(e,t,n){e==="focusin"?(hX(),Jw=t,Xx=n,Jw.attachEvent("onpropertychange",Nle)):e==="focusout"&&hX()}function aRe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wR(Xx)}function uRe(e,t){if(e==="click")return wR(t)}function lRe(e,t){if(e==="input"||e==="change")return wR(t)}function cRe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xc=typeof Object.is=="function"?Object.is:cRe;function Qx(e,t){if(xc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!EL.call(t,i)||!xc(e[i],t[i]))return!1}return!0}function pX(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mX(e,t){var n=pX(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pX(n)}}function kle(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kle(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rle(){for(var e=window,t=fI();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fI(e.document)}return t}function OB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fRe(e){var t=Rle(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kle(n.ownerDocument.documentElement,n)){if(r!==null&&OB(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=mX(n,s);var o=mX(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dRe=oh&&"documentMode"in document&&11>=document.documentMode,q1=null,jL=null,Zw=null,zL=!1;function gX(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zL||q1==null||q1!==fI(r)||(r=q1,"selectionStart"in r&&OB(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zw&&Qx(Zw,r)||(Zw=r,r=vI(jL,"onSelect"),0<r.length&&(t=new kB("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=q1)))}function EC(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var W1={animationend:EC("Animation","AnimationEnd"),animationiteration:EC("Animation","AnimationIteration"),animationstart:EC("Animation","AnimationStart"),transitionend:EC("Transition","TransitionEnd")},l$={},Ple={};oh&&(Ple=document.createElement("div").style,"AnimationEvent"in window||(delete W1.animationend.animation,delete W1.animationiteration.animation,delete W1.animationstart.animation),"TransitionEvent"in window||delete W1.transitionend.transition);function xR(e){if(l$[e])return l$[e];if(!W1[e])return e;var t=W1[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ple)return l$[e]=t[n];return e}var Ole=xR("animationend"),Mle=xR("animationiteration"),$le=xR("animationstart"),Fle=xR("transitionend"),Lle=new Map,yX="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bm(e,t){Lle.set(e,t),hy(t,[e])}for(var c$=0;c$<yX.length;c$++){var f$=yX[c$],hRe=f$.toLowerCase(),pRe=f$[0].toUpperCase()+f$.slice(1);Bm(hRe,"on"+pRe)}Bm(Ole,"onAnimationEnd");Bm(Mle,"onAnimationIteration");Bm($le,"onAnimationStart");Bm("dblclick","onDoubleClick");Bm("focusin","onFocus");Bm("focusout","onBlur");Bm(Fle,"onTransitionEnd");qv("onMouseEnter",["mouseout","mouseover"]);qv("onMouseLeave",["mouseout","mouseover"]);qv("onPointerEnter",["pointerout","pointerover"]);qv("onPointerLeave",["pointerout","pointerover"]);hy("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hy("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hy("onBeforeInput",["compositionend","keypress","textInput","paste"]);hy("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hy("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hy("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mRe=new Set("cancel close invalid load scroll toggle".split(" ").concat(cw));function vX(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,hke(r,t,void 0,e),e.currentTarget=null}function Ble(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;vX(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;vX(i,a,l),s=u}}}if(hI)throw e=$L,hI=!1,$L=null,e}function Br(e,t){var n=t[WL];n===void 0&&(n=t[WL]=new Set);var r=e+"__bubble";n.has(r)||(jle(t,e,2,!1),n.add(r))}function d$(e,t,n){var r=0;t&&(r|=4),jle(n,e,r,t)}var wC="_reactListening"+Math.random().toString(36).slice(2);function Jx(e){if(!e[wC]){e[wC]=!0,Gue.forEach(function(n){n!=="selectionchange"&&(mRe.has(n)||d$(n,!1,e),d$(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wC]||(t[wC]=!0,d$("selectionchange",!1,t))}}function jle(e,t,n,r){switch(xle(t)){case 1:var i=Ike;break;case 4:i=Nke;break;default:i=IB}n=i.bind(null,t,n,e),i=void 0,!ML||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function h$(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Jg(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}lle(function(){var l=s,c=TB(n),f=[];e:{var d=Lle.get(e);if(d!==void 0){var h=kB,p=e;switch(e){case"keypress":if(iD(n)===0)break e;case"keydown":case"keyup":h=qke;break;case"focusin":p="focus",h=o$;break;case"focusout":p="blur",h=o$;break;case"beforeblur":case"afterblur":h=o$;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=oX;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Pke;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Yke;break;case Ole:case Mle:case $le:h=$ke;break;case Fle:h=Xke;break;case"scroll":h=kke;break;case"wheel":h=Jke;break;case"copy":case"cut":case"paste":h=Lke;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=uX}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,y!==null&&(E=Wx(v,y),E!=null&&m.push(Zx(v,E,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==PL&&(p=n.relatedTarget||n.fromElement)&&(Jg(p)||p[ah]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Jg(p):null,p!==null&&(g=py(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=oX,E="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=uX,E="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:G1(h),b=p==null?d:G1(p),d=new m(E,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,E=null,Jg(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,E=m),g=E,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=o1(b))v++;for(b=0,E=y;E;E=o1(E))b++;for(;0<v-b;)m=o1(m),v--;for(;0<b-v;)y=o1(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=o1(m),y=o1(y)}m=null}else m=null;h!==null&&bX(f,d,h,m,!1),p!==null&&g!==null&&bX(f,g,p,m,!0)}}e:{if(d=l?G1(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var _=sRe;else if(fX(d))if(Ile)_=lRe;else{_=aRe;var x=oRe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=uRe);if(_&&(_=_(e,l))){Dle(f,_,n,c);break e}x&&x(e,d,l),e==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&DL(d,"number",d.value)}switch(x=l?G1(l):window,e){case"focusin":(fX(x)||x.contentEditable==="true")&&(q1=x,jL=l,Zw=null);break;case"focusout":Zw=jL=q1=null;break;case"mousedown":zL=!0;break;case"contextmenu":case"mouseup":case"dragend":zL=!1,gX(f,n,c);break;case"selectionchange":if(dRe)break;case"keydown":case"keyup":gX(f,n,c)}var S;if(PB)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else H1?Cle(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Tle&&n.locale!=="ko"&&(H1||C!=="onCompositionStart"?C==="onCompositionEnd"&&H1&&(S=Sle()):(Cp=c,NB="value"in Cp?Cp.value:Cp.textContent,H1=!0)),x=vI(l,C),0<x.length&&(C=new aX(C,e,null,n,c),f.push({event:C,listeners:x}),S?C.data=S:(S=Ale(n),S!==null&&(C.data=S)))),(S=eRe?tRe(e,n):nRe(e,n))&&(l=vI(l,"onBeforeInput"),0<l.length&&(c=new aX("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}Ble(f,t)})}function Zx(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vI(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wx(e,n),s!=null&&r.unshift(Zx(e,s,i)),s=Wx(e,t),s!=null&&r.push(Zx(e,s,i))),e=e.return}return r}function o1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bX(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=Wx(n,s),u!=null&&o.unshift(Zx(n,u,a))):i||(u=Wx(n,s),u!=null&&o.push(Zx(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var gRe=/\r\n?/g,yRe=/\u0000|\uFFFD/g;function _X(e){return(typeof e=="string"?e:""+e).replace(gRe,`
`).replace(yRe,"")}function xC(e,t,n){if(t=_X(t),_X(e)!==t&&n)throw Error(ot(425))}function bI(){}var UL=null,VL=null;function HL(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qL=typeof setTimeout=="function"?setTimeout:void 0,vRe=typeof clearTimeout=="function"?clearTimeout:void 0,EX=typeof Promise=="function"?Promise:void 0,bRe=typeof queueMicrotask=="function"?queueMicrotask:typeof EX<"u"?function(e){return EX.resolve(null).then(e).catch(_Re)}:qL;function _Re(e){setTimeout(function(){throw e})}function p$(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Kx(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kx(t)}function Hp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wX(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var r_=Math.random().toString(36).slice(2),rf="__reactFiber$"+r_,eS="__reactProps$"+r_,ah="__reactContainer$"+r_,WL="__reactEvents$"+r_,ERe="__reactListeners$"+r_,wRe="__reactHandles$"+r_;function Jg(e){var t=e[rf];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ah]||n[rf]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wX(e);e!==null;){if(n=e[rf])return n;e=wX(e)}return t}e=n,n=e.parentNode}return null}function ET(e){return e=e[rf]||e[ah],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function G1(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function SR(e){return e[eS]||null}var GL=[],Y1=-1;function jm(e){return{current:e}}function qr(e){0>Y1||(e.current=GL[Y1],GL[Y1]=null,Y1--)}function Pr(e,t){Y1++,GL[Y1]=e.current,e.current=t}var cm={},Fo=jm(cm),za=jm(!1),C0=cm;function Wv(e,t){var n=e.type.contextTypes;if(!n)return cm;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ua(e){return e=e.childContextTypes,e!=null}function _I(){qr(za),qr(Fo)}function xX(e,t,n){if(Fo.current!==cm)throw Error(ot(168));Pr(Fo,t),Pr(za,n)}function zle(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ot(108,oke(e)||"Unknown",i));return pi({},n,r)}function EI(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cm,C0=Fo.current,Pr(Fo,e),Pr(za,za.current),!0}function SX(e,t,n){var r=e.stateNode;if(!r)throw Error(ot(169));n?(e=zle(e,t,C0),r.__reactInternalMemoizedMergedChildContext=e,qr(za),qr(Fo),Pr(Fo,e)):qr(za),Pr(za,n)}var Ad=null,TR=!1,m$=!1;function Ule(e){Ad===null?Ad=[e]:Ad.push(e)}function xRe(e){TR=!0,Ule(e)}function zm(){if(!m$&&Ad!==null){m$=!0;var e=0,t=pr;try{var n=Ad;for(pr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ad=null,TR=!1}catch(i){throw Ad!==null&&(Ad=Ad.slice(e+1)),hle(CB,zm),i}finally{pr=t,m$=!1}}return null}var K1=[],X1=0,wI=null,xI=0,el=[],tl=0,A0=null,Od=1,Md="";function Rg(e,t){K1[X1++]=xI,K1[X1++]=wI,wI=e,xI=t}function Vle(e,t,n){el[tl++]=Od,el[tl++]=Md,el[tl++]=A0,A0=e;var r=Od;e=Md;var i=32-hc(r)-1;r&=~(1<<i),n+=1;var s=32-hc(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Od=1<<32-hc(t)+i|n<<i|r,Md=s+e}else Od=1<<s|n<<i|r,Md=e}function MB(e){e.return!==null&&(Rg(e,1),Vle(e,1,0))}function $B(e){for(;e===wI;)wI=K1[--X1],K1[X1]=null,xI=K1[--X1],K1[X1]=null;for(;e===A0;)A0=el[--tl],el[tl]=null,Md=el[--tl],el[tl]=null,Od=el[--tl],el[tl]=null}var Cu=null,vu=null,ti=!1,Zl=null;function Hle(e,t){var n=al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function TX(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cu=e,vu=Hp(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cu=e,vu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=A0!==null?{id:Od,overflow:Md}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=al(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Cu=e,vu=null,!0):!1;default:return!1}}function YL(e){return(e.mode&1)!==0&&(e.flags&128)===0}function KL(e){if(ti){var t=vu;if(t){var n=t;if(!TX(e,t)){if(YL(e))throw Error(ot(418));t=Hp(n.nextSibling);var r=Cu;t&&TX(e,t)?Hle(r,n):(e.flags=e.flags&-4097|2,ti=!1,Cu=e)}}else{if(YL(e))throw Error(ot(418));e.flags=e.flags&-4097|2,ti=!1,Cu=e}}}function CX(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cu=e}function SC(e){if(e!==Cu)return!1;if(!ti)return CX(e),ti=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!HL(e.type,e.memoizedProps)),t&&(t=vu)){if(YL(e))throw qle(),Error(ot(418));for(;t;)Hle(e,t),t=Hp(t.nextSibling)}if(CX(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vu=Hp(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vu=null}}else vu=Cu?Hp(e.stateNode.nextSibling):null;return!0}function qle(){for(var e=vu;e;)e=Hp(e.nextSibling)}function Gv(){vu=Cu=null,ti=!1}function FB(e){Zl===null?Zl=[e]:Zl.push(e)}var SRe=Nh.ReactCurrentBatchConfig;function pE(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ot(309));var r=n.stateNode}if(!r)throw Error(ot(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ot(284));if(!n._owner)throw Error(ot(290,e))}return e}function TC(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function AX(e){var t=e._init;return t(e._payload)}function Wle(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Yp(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,E){return v===null||v.tag!==6?(v=w$(b,y.mode,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,E){var _=b.type;return _===V1?c(y,v,b.props.children,E,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===lp&&AX(_)===v.type)?(E=i(v,b.props),E.ref=pE(y,v,b),E.return=y,E):(E=fD(b.type,b.key,b.props,null,y.mode,E),E.ref=pE(y,v,b),E.return=y,E)}function l(y,v,b,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=x$(b,y.mode,E),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,E,_){return v===null||v.tag!==7?(v=f0(b,y.mode,E,_),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=w$(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pC:return b=fD(v.type,v.key,v.props,null,y.mode,b),b.ref=pE(y,null,v),b.return=y,b;case U1:return v=x$(v,y.mode,b),v.return=y,v;case lp:var E=v._init;return f(y,E(v._payload),b)}if(uw(v)||lE(v))return v=f0(v,y.mode,b,null),v.return=y,v;TC(y,v)}return null}function d(y,v,b,E){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(y,v,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pC:return b.key===_?u(y,v,b,E):null;case U1:return b.key===_?l(y,v,b,E):null;case lp:return _=b._init,d(y,v,_(b._payload),E)}if(uw(b)||lE(b))return _!==null?null:c(y,v,b,E,null);TC(y,b)}return null}function h(y,v,b,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(b)||null,a(v,y,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case pC:return y=y.get(E.key===null?b:E.key)||null,u(v,y,E,_);case U1:return y=y.get(E.key===null?b:E.key)||null,l(v,y,E,_);case lp:var x=E._init;return h(y,v,b,x(E._payload),_)}if(uw(E)||lE(E))return y=y.get(b)||null,c(v,y,E,_,null);TC(v,E)}return null}function p(y,v,b,E){for(var _=null,x=null,S=v,C=v=0,A=null;S!==null&&C<b.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var D=d(y,S,b[C],E);if(D===null){S===null&&(S=A);break}e&&S&&D.alternate===null&&t(y,S),v=s(D,v,C),x===null?_=D:x.sibling=D,x=D,S=A}if(C===b.length)return n(y,S),ti&&Rg(y,C),_;if(S===null){for(;C<b.length;C++)S=f(y,b[C],E),S!==null&&(v=s(S,v,C),x===null?_=S:x.sibling=S,x=S);return ti&&Rg(y,C),_}for(S=r(y,S);C<b.length;C++)A=h(S,y,C,b[C],E),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),v=s(A,v,C),x===null?_=A:x.sibling=A,x=A);return e&&S.forEach(function(I){return t(y,I)}),ti&&Rg(y,C),_}function m(y,v,b,E){var _=lE(b);if(typeof _!="function")throw Error(ot(150));if(b=_.call(b),b==null)throw Error(ot(151));for(var x=_=null,S=v,C=v=0,A=null,D=b.next();S!==null&&!D.done;C++,D=b.next()){S.index>C?(A=S,S=null):A=S.sibling;var I=d(y,S,D.value,E);if(I===null){S===null&&(S=A);break}e&&S&&I.alternate===null&&t(y,S),v=s(I,v,C),x===null?_=I:x.sibling=I,x=I,S=A}if(D.done)return n(y,S),ti&&Rg(y,C),_;if(S===null){for(;!D.done;C++,D=b.next())D=f(y,D.value,E),D!==null&&(v=s(D,v,C),x===null?_=D:x.sibling=D,x=D);return ti&&Rg(y,C),_}for(S=r(y,S);!D.done;C++,D=b.next())D=h(S,y,C,D.value,E),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?C:D.key),v=s(D,v,C),x===null?_=D:x.sibling=D,x=D);return e&&S.forEach(function(O){return t(y,O)}),ti&&Rg(y,C),_}function g(y,v,b,E){if(typeof b=="object"&&b!==null&&b.type===V1&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pC:e:{for(var _=b.key,x=v;x!==null;){if(x.key===_){if(_=b.type,_===V1){if(x.tag===7){n(y,x.sibling),v=i(x,b.props.children),v.return=y,y=v;break e}}else if(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===lp&&AX(_)===x.type){n(y,x.sibling),v=i(x,b.props),v.ref=pE(y,x,b),v.return=y,y=v;break e}n(y,x);break}else t(y,x);x=x.sibling}b.type===V1?(v=f0(b.props.children,y.mode,E,b.key),v.return=y,y=v):(E=fD(b.type,b.key,b.props,null,y.mode,E),E.ref=pE(y,v,b),E.return=y,y=E)}return o(y);case U1:e:{for(x=b.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=x$(b,y.mode,E),v.return=y,y=v}return o(y);case lp:return x=b._init,g(y,v,x(b._payload),E)}if(uw(b))return p(y,v,b,E);if(lE(b))return m(y,v,b,E);TC(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=w$(b,y.mode,E),v.return=y,y=v),o(y)):n(y,v)}return g}var Yv=Wle(!0),Gle=Wle(!1),SI=jm(null),TI=null,Q1=null,LB=null;function BB(){LB=Q1=TI=null}function jB(e){var t=SI.current;qr(SI),e._currentValue=t}function XL(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yv(e,t){TI=e,LB=Q1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fa=!0),e.firstContext=null)}function yl(e){var t=e._currentValue;if(LB!==e)if(e={context:e,memoizedValue:t,next:null},Q1===null){if(TI===null)throw Error(ot(308));Q1=e,TI.dependencies={lanes:0,firstContext:e}}else Q1=Q1.next=e;return t}var Zg=null;function zB(e){Zg===null?Zg=[e]:Zg.push(e)}function Yle(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,zB(t)):(n.next=i.next,i.next=n),t.interleaved=n,uh(e,r)}function uh(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cp=!1;function UB(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kle(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qp(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,qn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,uh(e,n)}return i=r.interleaved,i===null?(t.next=t,zB(r)):(t.next=i.next,i.next=t),r.interleaved=t,uh(e,n)}function sD(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,AB(e,n)}}function DX(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function CI(e,t,n,r){var i=e.updateQueue;cp=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=pi({},f,d);break e;case 2:cp=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);I0|=o,e.lanes=o,e.memoizedState=f}}function IX(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ot(191,i));i.call(r)}}}var wT={},vf=jm(wT),tS=jm(wT),nS=jm(wT);function e0(e){if(e===wT)throw Error(ot(174));return e}function VB(e,t){switch(Pr(nS,t),Pr(tS,e),Pr(vf,wT),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:NL(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=NL(t,e)}qr(vf),Pr(vf,t)}function Kv(){qr(vf),qr(tS),qr(nS)}function Xle(e){e0(nS.current);var t=e0(vf.current),n=NL(t,e.type);t!==n&&(Pr(tS,e),Pr(vf,n))}function HB(e){tS.current===e&&(qr(vf),qr(tS))}var li=jm(0);function AI(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var g$=[];function qB(){for(var e=0;e<g$.length;e++)g$[e]._workInProgressVersionPrimary=null;g$.length=0}var oD=Nh.ReactCurrentDispatcher,y$=Nh.ReactCurrentBatchConfig,D0=0,di=null,Zi=null,_s=null,DI=!1,ex=!1,rS=0,TRe=0;function mo(){throw Error(ot(321))}function WB(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xc(e[n],t[n]))return!1;return!0}function GB(e,t,n,r,i,s){if(D0=s,di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oD.current=e===null||e.memoizedState===null?IRe:NRe,e=n(r,i),ex){s=0;do{if(ex=!1,rS=0,25<=s)throw Error(ot(301));s+=1,_s=Zi=null,t.updateQueue=null,oD.current=kRe,e=n(r,i)}while(ex)}if(oD.current=II,t=Zi!==null&&Zi.next!==null,D0=0,_s=Zi=di=null,DI=!1,t)throw Error(ot(300));return e}function YB(){var e=rS!==0;return rS=0,e}function Xc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _s===null?di.memoizedState=_s=e:_s=_s.next=e,_s}function vl(){if(Zi===null){var e=di.alternate;e=e!==null?e.memoizedState:null}else e=Zi.next;var t=_s===null?di.memoizedState:_s.next;if(t!==null)_s=t,Zi=e;else{if(e===null)throw Error(ot(310));Zi=e,e={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},_s===null?di.memoizedState=_s=e:_s=_s.next=e}return _s}function iS(e,t){return typeof t=="function"?t(e):t}function v$(e){var t=vl(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=Zi,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((D0&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,di.lanes|=c,I0|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,xc(r,t.memoizedState)||(Fa=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,di.lanes|=s,I0|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function b$(e){var t=vl(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);xc(s,t.memoizedState)||(Fa=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Qle(){}function Jle(e,t){var n=di,r=vl(),i=t(),s=!xc(r.memoizedState,i);if(s&&(r.memoizedState=i,Fa=!0),r=r.queue,KB(tce.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||_s!==null&&_s.memoizedState.tag&1){if(n.flags|=2048,sS(9,ece.bind(null,n,r,i,t),void 0,null),Is===null)throw Error(ot(349));D0&30||Zle(n,t,i)}return i}function Zle(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ece(e,t,n,r){t.value=n,t.getSnapshot=r,nce(t)&&rce(e)}function tce(e,t,n){return n(function(){nce(t)&&rce(e)})}function nce(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xc(e,n)}catch{return!0}}function rce(e){var t=uh(e,1);t!==null&&pc(t,e,1,-1)}function NX(e){var t=Xc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iS,lastRenderedState:e},t.queue=e,e=e.dispatch=DRe.bind(null,di,e),[t.memoizedState,e]}function sS(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ice(){return vl().memoizedState}function aD(e,t,n,r){var i=Xc();di.flags|=e,i.memoizedState=sS(1|t,n,void 0,r===void 0?null:r)}function CR(e,t,n,r){var i=vl();r=r===void 0?null:r;var s=void 0;if(Zi!==null){var o=Zi.memoizedState;if(s=o.destroy,r!==null&&WB(r,o.deps)){i.memoizedState=sS(t,n,s,r);return}}di.flags|=e,i.memoizedState=sS(1|t,n,s,r)}function kX(e,t){return aD(8390656,8,e,t)}function KB(e,t){return CR(2048,8,e,t)}function sce(e,t){return CR(4,2,e,t)}function oce(e,t){return CR(4,4,e,t)}function ace(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uce(e,t,n){return n=n!=null?n.concat([e]):null,CR(4,4,ace.bind(null,t,e),n)}function XB(){}function lce(e,t){var n=vl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&WB(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cce(e,t){var n=vl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&WB(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fce(e,t,n){return D0&21?(xc(n,t)||(n=gle(),di.lanes|=n,I0|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fa=!0),e.memoizedState=n)}function CRe(e,t){var n=pr;pr=n!==0&&4>n?n:4,e(!0);var r=y$.transition;y$.transition={};try{e(!1),t()}finally{pr=n,y$.transition=r}}function dce(){return vl().memoizedState}function ARe(e,t,n){var r=Gp(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hce(e))pce(t,n);else if(n=Yle(e,t,n,r),n!==null){var i=oa();pc(n,e,r,i),mce(n,t,r)}}function DRe(e,t,n){var r=Gp(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hce(e))pce(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,xc(a,o)){var u=t.interleaved;u===null?(i.next=i,zB(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Yle(e,t,i,r),n!==null&&(i=oa(),pc(n,e,r,i),mce(n,t,r))}}function hce(e){var t=e.alternate;return e===di||t!==null&&t===di}function pce(e,t){ex=DI=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mce(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,AB(e,n)}}var II={readContext:yl,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},IRe={readContext:yl,useCallback:function(e,t){return Xc().memoizedState=[e,t===void 0?null:t],e},useContext:yl,useEffect:kX,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,aD(4194308,4,ace.bind(null,t,e),n)},useLayoutEffect:function(e,t){return aD(4194308,4,e,t)},useInsertionEffect:function(e,t){return aD(4,2,e,t)},useMemo:function(e,t){var n=Xc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xc();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ARe.bind(null,di,e),[r.memoizedState,e]},useRef:function(e){var t=Xc();return e={current:e},t.memoizedState=e},useState:NX,useDebugValue:XB,useDeferredValue:function(e){return Xc().memoizedState=e},useTransition:function(){var e=NX(!1),t=e[0];return e=CRe.bind(null,e[1]),Xc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=di,i=Xc();if(ti){if(n===void 0)throw Error(ot(407));n=n()}else{if(n=t(),Is===null)throw Error(ot(349));D0&30||Zle(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,kX(tce.bind(null,r,s,e),[e]),r.flags|=2048,sS(9,ece.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Xc(),t=Is.identifierPrefix;if(ti){var n=Md,r=Od;n=(r&~(1<<32-hc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rS++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=TRe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},NRe={readContext:yl,useCallback:lce,useContext:yl,useEffect:KB,useImperativeHandle:uce,useInsertionEffect:sce,useLayoutEffect:oce,useMemo:cce,useReducer:v$,useRef:ice,useState:function(){return v$(iS)},useDebugValue:XB,useDeferredValue:function(e){var t=vl();return fce(t,Zi.memoizedState,e)},useTransition:function(){var e=v$(iS)[0],t=vl().memoizedState;return[e,t]},useMutableSource:Qle,useSyncExternalStore:Jle,useId:dce,unstable_isNewReconciler:!1},kRe={readContext:yl,useCallback:lce,useContext:yl,useEffect:KB,useImperativeHandle:uce,useInsertionEffect:sce,useLayoutEffect:oce,useMemo:cce,useReducer:b$,useRef:ice,useState:function(){return b$(iS)},useDebugValue:XB,useDeferredValue:function(e){var t=vl();return Zi===null?t.memoizedState=e:fce(t,Zi.memoizedState,e)},useTransition:function(){var e=b$(iS)[0],t=vl().memoizedState;return[e,t]},useMutableSource:Qle,useSyncExternalStore:Jle,useId:dce,unstable_isNewReconciler:!1};function Yl(e,t){if(e&&e.defaultProps){t=pi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function QL(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var AR={isMounted:function(e){return(e=e._reactInternals)?py(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=oa(),i=Gp(e),s=Gd(r,i);s.payload=t,n!=null&&(s.callback=n),t=qp(e,s,i),t!==null&&(pc(t,e,i,r),sD(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=oa(),i=Gp(e),s=Gd(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=qp(e,s,i),t!==null&&(pc(t,e,i,r),sD(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=oa(),r=Gp(e),i=Gd(n,r);i.tag=2,t!=null&&(i.callback=t),t=qp(e,i,r),t!==null&&(pc(t,e,r,n),sD(t,e,r))}};function RX(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Qx(n,r)||!Qx(i,s):!0}function gce(e,t,n){var r=!1,i=cm,s=t.contextType;return typeof s=="object"&&s!==null?s=yl(s):(i=Ua(t)?C0:Fo.current,r=t.contextTypes,s=(r=r!=null)?Wv(e,i):cm),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=AR,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function PX(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&AR.enqueueReplaceState(t,t.state,null)}function JL(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},UB(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=yl(s):(s=Ua(t)?C0:Fo.current,i.context=Wv(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(QL(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&AR.enqueueReplaceState(i,i.state,null),CI(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Xv(e,t){try{var n="",r=t;do n+=ske(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function _$(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ZL(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var RRe=typeof WeakMap=="function"?WeakMap:Map;function yce(e,t,n){n=Gd(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){kI||(kI=!0,l4=r),ZL(e,t)},n}function vce(e,t,n){n=Gd(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ZL(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ZL(e,t),typeof r!="function"&&(Wp===null?Wp=new Set([this]):Wp.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function OX(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new RRe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=WRe.bind(null,e,t,n),t.then(e,e))}function MX(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $X(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gd(-1,1),t.tag=2,qp(n,t,1))),n.lanes|=1),e)}var PRe=Nh.ReactCurrentOwner,Fa=!1;function Qo(e,t,n,r){t.child=e===null?Gle(t,null,n,r):Yv(t,e.child,n,r)}function FX(e,t,n,r,i){n=n.render;var s=t.ref;return yv(t,i),r=GB(e,t,n,r,s,i),n=YB(),e!==null&&!Fa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,lh(e,t,i)):(ti&&n&&MB(t),t.flags|=1,Qo(e,t,r,i),t.child)}function LX(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!i7(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,bce(e,t,s,r,i)):(e=fD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qx,n(o,r)&&e.ref===t.ref)return lh(e,t,i)}return t.flags|=1,e=Yp(s,r),e.ref=t.ref,e.return=t,t.child=e}function bce(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Qx(s,r)&&e.ref===t.ref)if(Fa=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Fa=!0);else return t.lanes=e.lanes,lh(e,t,i)}return e4(e,t,n,r,i)}function _ce(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(Z1,hu),hu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pr(Z1,hu),hu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pr(Z1,hu),hu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Pr(Z1,hu),hu|=r;return Qo(e,t,i,n),t.child}function Ece(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function e4(e,t,n,r,i){var s=Ua(n)?C0:Fo.current;return s=Wv(t,s),yv(t,i),n=GB(e,t,n,r,s,i),r=YB(),e!==null&&!Fa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,lh(e,t,i)):(ti&&r&&MB(t),t.flags|=1,Qo(e,t,n,i),t.child)}function BX(e,t,n,r,i){if(Ua(n)){var s=!0;EI(t)}else s=!1;if(yv(t,i),t.stateNode===null)uD(e,t),gce(t,n,r),JL(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=yl(l):(l=Ua(n)?C0:Fo.current,l=Wv(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&PX(t,o,r,l),cp=!1;var d=t.memoizedState;o.state=d,CI(t,r,o,i),u=t.memoizedState,a!==r||d!==u||za.current||cp?(typeof c=="function"&&(QL(t,n,c,r),u=t.memoizedState),(a=cp||RX(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Kle(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Yl(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=yl(u):(u=Ua(n)?C0:Fo.current,u=Wv(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&PX(t,o,r,u),cp=!1,d=t.memoizedState,o.state=d,CI(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||za.current||cp?(typeof h=="function"&&(QL(t,n,h,r),p=t.memoizedState),(l=cp||RX(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return t4(e,t,n,r,s,i)}function t4(e,t,n,r,i,s){Ece(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&SX(t,n,!1),lh(e,t,s);r=t.stateNode,PRe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Yv(t,e.child,null,s),t.child=Yv(t,null,a,s)):Qo(e,t,a,s),t.memoizedState=r.state,i&&SX(t,n,!0),t.child}function wce(e){var t=e.stateNode;t.pendingContext?xX(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xX(e,t.context,!1),VB(e,t.containerInfo)}function jX(e,t,n,r,i){return Gv(),FB(i),t.flags|=256,Qo(e,t,n,r),t.child}var n4={dehydrated:null,treeContext:null,retryLane:0};function r4(e){return{baseLanes:e,cachePool:null,transitions:null}}function xce(e,t,n){var r=t.pendingProps,i=li.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pr(li,i&1),e===null)return KL(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=NR(o,r,0,null),e=f0(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=r4(n),t.memoizedState=n4,e):QB(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ORe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Yp(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yp(a,s):(s=f0(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?r4(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=n4,r}return s=e.child,e=s.sibling,r=Yp(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function QB(e,t){return t=NR({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function CC(e,t,n,r){return r!==null&&FB(r),Yv(t,e.child,null,n),e=QB(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ORe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=_$(Error(ot(422))),CC(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=NR({mode:"visible",children:r.children},i,0,null),s=f0(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Yv(t,e.child,null,o),t.child.memoizedState=r4(o),t.memoizedState=n4,s);if(!(t.mode&1))return CC(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ot(419)),r=_$(s,r,void 0),CC(e,t,o,r)}if(a=(o&e.childLanes)!==0,Fa||a){if(r=Is,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,uh(e,i),pc(r,e,i,-1))}return r7(),r=_$(Error(ot(421))),CC(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=GRe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,vu=Hp(i.nextSibling),Cu=t,ti=!0,Zl=null,e!==null&&(el[tl++]=Od,el[tl++]=Md,el[tl++]=A0,Od=e.id,Md=e.overflow,A0=t),t=QB(t,r.children),t.flags|=4096,t)}function zX(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),XL(e.return,t,n)}function E$(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sce(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Qo(e,t,r.children,n),r=li.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zX(e,n,t);else if(e.tag===19)zX(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pr(li,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&AI(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),E$(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&AI(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}E$(t,!0,n,null,s);break;case"together":E$(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uD(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lh(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),I0|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,n=Yp(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yp(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function MRe(e,t,n){switch(t.tag){case 3:wce(t),Gv();break;case 5:Xle(t);break;case 1:Ua(t.type)&&EI(t);break;case 4:VB(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pr(SI,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pr(li,li.current&1),t.flags|=128,null):n&t.child.childLanes?xce(e,t,n):(Pr(li,li.current&1),e=lh(e,t,n),e!==null?e.sibling:null);Pr(li,li.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Sce(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pr(li,li.current),r)break;return null;case 22:case 23:return t.lanes=0,_ce(e,t,n)}return lh(e,t,n)}var Tce,i4,Cce,Ace;Tce=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};i4=function(){};Cce=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,e0(vf.current);var s=null;switch(n){case"input":i=CL(e,i),r=CL(e,r),s=[];break;case"select":i=pi({},i,{value:void 0}),r=pi({},r,{value:void 0}),s=[];break;case"textarea":i=IL(e,i),r=IL(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bI)}kL(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Hx.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Hx.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Br("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Ace=function(e,t,n,r){n!==r&&(t.flags|=4)};function mE(e,t){if(!ti)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function go(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $Re(e,t,n){var r=t.pendingProps;switch($B(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return go(t),null;case 1:return Ua(t.type)&&_I(),go(t),null;case 3:return r=t.stateNode,Kv(),qr(za),qr(Fo),qB(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(SC(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zl!==null&&(d4(Zl),Zl=null))),i4(e,t),go(t),null;case 5:HB(t);var i=e0(nS.current);if(n=t.type,e!==null&&t.stateNode!=null)Cce(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ot(166));return go(t),null}if(e=e0(vf.current),SC(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[rf]=t,r[eS]=s,e=(t.mode&1)!==0,n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<cw.length;i++)Br(cw[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":XK(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":JK(r,s),Br("invalid",r)}kL(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&xC(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&xC(r.textContent,a,e),i=["children",""+a]):Hx.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Br("scroll",r)}switch(n){case"input":mC(r),QK(r,s,!0);break;case"textarea":mC(r),ZK(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bI)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tle(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[rf]=t,e[eS]=r,Tce(e,t,!1,!1),t.stateNode=e;e:{switch(o=RL(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<cw.length;i++)Br(cw[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":XK(e,r),i=CL(e,r),Br("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=pi({},r,{value:void 0}),Br("invalid",e);break;case"textarea":JK(e,r),i=IL(e,r),Br("invalid",e);break;default:i=r}kL(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?ile(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nle(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&qx(e,u):typeof u=="number"&&qx(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hx.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Br("scroll",e):u!=null&&EB(e,s,u,o))}switch(n){case"input":mC(e),QK(e,r,!1);break;case"textarea":mC(e),ZK(e);break;case"option":r.value!=null&&e.setAttribute("value",""+lm(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?hv(e,!!r.multiple,s,!1):r.defaultValue!=null&&hv(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=bI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return go(t),null;case 6:if(e&&t.stateNode!=null)Ace(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ot(166));if(n=e0(nS.current),e0(vf.current),SC(t)){if(r=t.stateNode,n=t.memoizedProps,r[rf]=t,(s=r.nodeValue!==n)&&(e=Cu,e!==null))switch(e.tag){case 3:xC(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xC(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rf]=t,t.stateNode=r}return go(t),null;case 13:if(qr(li),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ti&&vu!==null&&t.mode&1&&!(t.flags&128))qle(),Gv(),t.flags|=98560,s=!1;else if(s=SC(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ot(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ot(317));s[rf]=t}else Gv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;go(t),s=!1}else Zl!==null&&(d4(Zl),Zl=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||li.current&1?is===0&&(is=3):r7())),t.updateQueue!==null&&(t.flags|=4),go(t),null);case 4:return Kv(),i4(e,t),e===null&&Jx(t.stateNode.containerInfo),go(t),null;case 10:return jB(t.type._context),go(t),null;case 17:return Ua(t.type)&&_I(),go(t),null;case 19:if(qr(li),s=t.memoizedState,s===null)return go(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)mE(s,!1);else{if(is!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=AI(e),o!==null){for(t.flags|=128,mE(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pr(li,li.current&1|2),t.child}e=e.sibling}s.tail!==null&&Oi()>Qv&&(t.flags|=128,r=!0,mE(s,!1),t.lanes=4194304)}else{if(!r)if(e=AI(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mE(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ti)return go(t),null}else 2*Oi()-s.renderingStartTime>Qv&&n!==1073741824&&(t.flags|=128,r=!0,mE(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Oi(),t.sibling=null,n=li.current,Pr(li,r?n&1|2:n&1),t):(go(t),null);case 22:case 23:return n7(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?hu&1073741824&&(go(t),t.subtreeFlags&6&&(t.flags|=8192)):go(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function FRe(e,t){switch($B(t),t.tag){case 1:return Ua(t.type)&&_I(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kv(),qr(za),qr(Fo),qB(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return HB(t),null;case 13:if(qr(li),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));Gv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qr(li),null;case 4:return Kv(),null;case 10:return jB(t.type._context),null;case 22:case 23:return n7(),null;case 24:return null;default:return null}}var AC=!1,To=!1,LRe=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function J1(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_i(e,t,r)}else n.current=null}function s4(e,t,n){try{n()}catch(r){_i(e,t,r)}}var UX=!1;function BRe(e,t){if(UL=gI,e=Rle(),OB(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(VL={focusedElem:e,selectionRange:n},gI=!1,Tt=t;Tt!==null;)if(t=Tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Tt=e;else for(;Tt!==null;){t=Tt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Yl(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(E){_i(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Tt=e;break}Tt=t.return}return p=UX,UX=!1,p}function tx(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&s4(t,n,s)}i=i.next}while(i!==r)}}function DR(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function o4(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Dce(e){var t=e.alternate;t!==null&&(e.alternate=null,Dce(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rf],delete t[eS],delete t[WL],delete t[ERe],delete t[wRe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ice(e){return e.tag===5||e.tag===3||e.tag===4}function VX(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ice(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function a4(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bI));else if(r!==4&&(e=e.child,e!==null))for(a4(e,t,n),e=e.sibling;e!==null;)a4(e,t,n),e=e.sibling}function u4(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(u4(e,t,n),e=e.sibling;e!==null;)u4(e,t,n),e=e.sibling}var qs=null,Xl=!1;function Jh(e,t,n){for(n=n.child;n!==null;)Nce(e,t,n),n=n.sibling}function Nce(e,t,n){if(yf&&typeof yf.onCommitFiberUnmount=="function")try{yf.onCommitFiberUnmount(_R,n)}catch{}switch(n.tag){case 5:To||J1(n,t);case 6:var r=qs,i=Xl;qs=null,Jh(e,t,n),qs=r,Xl=i,qs!==null&&(Xl?(e=qs,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qs.removeChild(n.stateNode));break;case 18:qs!==null&&(Xl?(e=qs,n=n.stateNode,e.nodeType===8?p$(e.parentNode,n):e.nodeType===1&&p$(e,n),Kx(e)):p$(qs,n.stateNode));break;case 4:r=qs,i=Xl,qs=n.stateNode.containerInfo,Xl=!0,Jh(e,t,n),qs=r,Xl=i;break;case 0:case 11:case 14:case 15:if(!To&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&s4(n,t,o),i=i.next}while(i!==r)}Jh(e,t,n);break;case 1:if(!To&&(J1(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_i(n,t,a)}Jh(e,t,n);break;case 21:Jh(e,t,n);break;case 22:n.mode&1?(To=(r=To)||n.memoizedState!==null,Jh(e,t,n),To=r):Jh(e,t,n);break;default:Jh(e,t,n)}}function HX(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new LRe),t.forEach(function(r){var i=YRe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:qs=a.stateNode,Xl=!1;break e;case 3:qs=a.stateNode.containerInfo,Xl=!0;break e;case 4:qs=a.stateNode.containerInfo,Xl=!0;break e}a=a.return}if(qs===null)throw Error(ot(160));Nce(s,o,i),qs=null,Xl=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){_i(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kce(t,e),t=t.sibling}function kce(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jl(t,e),qc(e),r&4){try{tx(3,e,e.return),DR(3,e)}catch(m){_i(e,e.return,m)}try{tx(5,e,e.return)}catch(m){_i(e,e.return,m)}}break;case 1:jl(t,e),qc(e),r&512&&n!==null&&J1(n,n.return);break;case 5:if(jl(t,e),qc(e),r&512&&n!==null&&J1(n,n.return),e.flags&32){var i=e.stateNode;try{qx(i,"")}catch(m){_i(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Zue(i,s),RL(a,o);var l=RL(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?ile(i,f):c==="dangerouslySetInnerHTML"?nle(i,f):c==="children"?qx(i,f):EB(i,c,f,l)}switch(a){case"input":AL(i,s);break;case"textarea":ele(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?hv(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?hv(i,!!s.multiple,s.defaultValue,!0):hv(i,!!s.multiple,s.multiple?[]:"",!1))}i[eS]=s}catch(m){_i(e,e.return,m)}}break;case 6:if(jl(t,e),qc(e),r&4){if(e.stateNode===null)throw Error(ot(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){_i(e,e.return,m)}}break;case 3:if(jl(t,e),qc(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kx(t.containerInfo)}catch(m){_i(e,e.return,m)}break;case 4:jl(t,e),qc(e);break;case 13:jl(t,e),qc(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(e7=Oi())),r&4&&HX(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(To=(l=To)||c,jl(t,e),To=l):jl(t,e),qc(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Tt=e,c=e.child;c!==null;){for(f=Tt=c;Tt!==null;){switch(d=Tt,h=d.child,d.tag){case 0:case 11:case 14:case 15:tx(4,d,d.return);break;case 1:J1(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){_i(r,n,m)}}break;case 5:J1(d,d.return);break;case 22:if(d.memoizedState!==null){WX(f);continue}}h!==null?(h.return=d,Tt=h):WX(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=rle("display",o))}catch(m){_i(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){_i(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:jl(t,e),qc(e),r&4&&HX(e);break;case 21:break;default:jl(t,e),qc(e)}}function qc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ice(n)){var r=n;break e}n=n.return}throw Error(ot(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qx(i,""),r.flags&=-33);var s=VX(e);u4(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=VX(e);a4(e,a,o);break;default:throw Error(ot(161))}}catch(u){_i(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jRe(e,t,n){Tt=e,Rce(e)}function Rce(e,t,n){for(var r=(e.mode&1)!==0;Tt!==null;){var i=Tt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||AC;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||To;a=AC;var l=To;if(AC=o,(To=u)&&!l)for(Tt=i;Tt!==null;)o=Tt,u=o.child,o.tag===22&&o.memoizedState!==null?GX(i):u!==null?(u.return=o,Tt=u):GX(i);for(;s!==null;)Tt=s,Rce(s),s=s.sibling;Tt=i,AC=a,To=l}qX(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Tt=s):qX(e)}}function qX(e){for(;Tt!==null;){var t=Tt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:To||DR(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!To)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Yl(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&IX(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}IX(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Kx(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}To||t.flags&512&&o4(t)}catch(d){_i(t,t.return,d)}}if(t===e){Tt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function WX(e){for(;Tt!==null;){var t=Tt;if(t===e){Tt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function GX(e){for(;Tt!==null;){var t=Tt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{DR(4,t)}catch(u){_i(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){_i(t,i,u)}}var s=t.return;try{o4(t)}catch(u){_i(t,s,u)}break;case 5:var o=t.return;try{o4(t)}catch(u){_i(t,o,u)}}}catch(u){_i(t,t.return,u)}if(t===e){Tt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Tt=a;break}Tt=t.return}}var zRe=Math.ceil,NI=Nh.ReactCurrentDispatcher,JB=Nh.ReactCurrentOwner,hl=Nh.ReactCurrentBatchConfig,qn=0,Is=null,qi=null,Zs=0,hu=0,Z1=jm(0),is=0,oS=null,I0=0,IR=0,ZB=0,nx=null,Na=null,e7=0,Qv=1/0,Sd=null,kI=!1,l4=null,Wp=null,DC=!1,Ap=null,RI=0,rx=0,c4=null,lD=-1,cD=0;function oa(){return qn&6?Oi():lD!==-1?lD:lD=Oi()}function Gp(e){return e.mode&1?qn&2&&Zs!==0?Zs&-Zs:SRe.transition!==null?(cD===0&&(cD=gle()),cD):(e=pr,e!==0||(e=window.event,e=e===void 0?16:xle(e.type)),e):1}function pc(e,t,n,r){if(50<rx)throw rx=0,c4=null,Error(ot(185));bT(e,n,r),(!(qn&2)||e!==Is)&&(e===Is&&(!(qn&2)&&(IR|=n),is===4&&vp(e,Zs)),Va(e,r),n===1&&qn===0&&!(t.mode&1)&&(Qv=Oi()+500,TR&&zm()))}function Va(e,t){var n=e.callbackNode;Ske(e,t);var r=mI(e,e===Is?Zs:0);if(r===0)n!==null&&nX(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nX(n),t===1)e.tag===0?xRe(YX.bind(null,e)):Ule(YX.bind(null,e)),bRe(function(){!(qn&6)&&zm()}),n=null;else{switch(yle(r)){case 1:n=CB;break;case 4:n=ple;break;case 16:n=pI;break;case 536870912:n=mle;break;default:n=pI}n=jce(n,Pce.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pce(e,t){if(lD=-1,cD=0,qn&6)throw Error(ot(327));var n=e.callbackNode;if(vv()&&e.callbackNode!==n)return null;var r=mI(e,e===Is?Zs:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=PI(e,r);else{t=r;var i=qn;qn|=2;var s=Mce();(Is!==e||Zs!==t)&&(Sd=null,Qv=Oi()+500,c0(e,t));do try{HRe();break}catch(a){Oce(e,a)}while(!0);BB(),NI.current=s,qn=i,qi!==null?t=0:(Is=null,Zs=0,t=is)}if(t!==0){if(t===2&&(i=FL(e),i!==0&&(r=i,t=f4(e,i))),t===1)throw n=oS,c0(e,0),vp(e,r),Va(e,Oi()),n;if(t===6)vp(e,r);else{if(i=e.current.alternate,!(r&30)&&!URe(i)&&(t=PI(e,r),t===2&&(s=FL(e),s!==0&&(r=s,t=f4(e,s))),t===1))throw n=oS,c0(e,0),vp(e,r),Va(e,Oi()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ot(345));case 2:Pg(e,Na,Sd);break;case 3:if(vp(e,r),(r&130023424)===r&&(t=e7+500-Oi(),10<t)){if(mI(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){oa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qL(Pg.bind(null,e,Na,Sd),t);break}Pg(e,Na,Sd);break;case 4:if(vp(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-hc(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Oi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zRe(r/1960))-r,10<r){e.timeoutHandle=qL(Pg.bind(null,e,Na,Sd),r);break}Pg(e,Na,Sd);break;case 5:Pg(e,Na,Sd);break;default:throw Error(ot(329))}}}return Va(e,Oi()),e.callbackNode===n?Pce.bind(null,e):null}function f4(e,t){var n=nx;return e.current.memoizedState.isDehydrated&&(c0(e,t).flags|=256),e=PI(e,t),e!==2&&(t=Na,Na=n,t!==null&&d4(t)),e}function d4(e){Na===null?Na=e:Na.push.apply(Na,e)}function URe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xc(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vp(e,t){for(t&=~ZB,t&=~IR,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hc(t),r=1<<n;e[n]=-1,t&=~r}}function YX(e){if(qn&6)throw Error(ot(327));vv();var t=mI(e,0);if(!(t&1))return Va(e,Oi()),null;var n=PI(e,t);if(e.tag!==0&&n===2){var r=FL(e);r!==0&&(t=r,n=f4(e,r))}if(n===1)throw n=oS,c0(e,0),vp(e,t),Va(e,Oi()),n;if(n===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pg(e,Na,Sd),Va(e,Oi()),null}function t7(e,t){var n=qn;qn|=1;try{return e(t)}finally{qn=n,qn===0&&(Qv=Oi()+500,TR&&zm())}}function N0(e){Ap!==null&&Ap.tag===0&&!(qn&6)&&vv();var t=qn;qn|=1;var n=hl.transition,r=pr;try{if(hl.transition=null,pr=1,e)return e()}finally{pr=r,hl.transition=n,qn=t,!(qn&6)&&zm()}}function n7(){hu=Z1.current,qr(Z1)}function c0(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,vRe(n)),qi!==null)for(n=qi.return;n!==null;){var r=n;switch($B(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_I();break;case 3:Kv(),qr(za),qr(Fo),qB();break;case 5:HB(r);break;case 4:Kv();break;case 13:qr(li);break;case 19:qr(li);break;case 10:jB(r.type._context);break;case 22:case 23:n7()}n=n.return}if(Is=e,qi=e=Yp(e.current,null),Zs=hu=t,is=0,oS=null,ZB=IR=I0=0,Na=nx=null,Zg!==null){for(t=0;t<Zg.length;t++)if(n=Zg[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zg=null}return e}function Oce(e,t){do{var n=qi;try{if(BB(),oD.current=II,DI){for(var r=di.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}DI=!1}if(D0=0,_s=Zi=di=null,ex=!1,rS=0,JB.current=null,n===null||n.return===null){is=1,oS=t,qi=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Zs,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=MX(o);if(h!==null){h.flags&=-257,$X(h,o,a,s,t),h.mode&1&&OX(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){OX(s,l,t),r7();break e}u=Error(ot(426))}}else if(ti&&a.mode&1){var g=MX(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),$X(g,o,a,s,t),FB(Xv(u,a));break e}}s=u=Xv(u,a),is!==4&&(is=2),nx===null?nx=[s]:nx.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=yce(s,u,t);DX(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Wp===null||!Wp.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=vce(s,a,t);DX(s,E);break e}}s=s.return}while(s!==null)}Fce(n)}catch(_){t=_,qi===n&&n!==null&&(qi=n=n.return);continue}break}while(!0)}function Mce(){var e=NI.current;return NI.current=II,e===null?II:e}function r7(){(is===0||is===3||is===2)&&(is=4),Is===null||!(I0&268435455)&&!(IR&268435455)||vp(Is,Zs)}function PI(e,t){var n=qn;qn|=2;var r=Mce();(Is!==e||Zs!==t)&&(Sd=null,c0(e,t));do try{VRe();break}catch(i){Oce(e,i)}while(!0);if(BB(),qn=n,NI.current=r,qi!==null)throw Error(ot(261));return Is=null,Zs=0,is}function VRe(){for(;qi!==null;)$ce(qi)}function HRe(){for(;qi!==null&&!mke();)$ce(qi)}function $ce(e){var t=Bce(e.alternate,e,hu);e.memoizedProps=e.pendingProps,t===null?Fce(e):qi=t,JB.current=null}function Fce(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FRe(n,t),n!==null){n.flags&=32767,qi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{is=6,qi=null;return}}else if(n=$Re(n,t,hu),n!==null){qi=n;return}if(t=t.sibling,t!==null){qi=t;return}qi=t=e}while(t!==null);is===0&&(is=5)}function Pg(e,t,n){var r=pr,i=hl.transition;try{hl.transition=null,pr=1,qRe(e,t,n,r)}finally{hl.transition=i,pr=r}return null}function qRe(e,t,n,r){do vv();while(Ap!==null);if(qn&6)throw Error(ot(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Tke(e,s),e===Is&&(qi=Is=null,Zs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||DC||(DC=!0,jce(pI,function(){return vv(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hl.transition,hl.transition=null;var o=pr;pr=1;var a=qn;qn|=4,JB.current=null,BRe(e,n),kce(n,e),fRe(VL),gI=!!UL,VL=UL=null,e.current=n,jRe(n),gke(),qn=a,pr=o,hl.transition=s}else e.current=n;if(DC&&(DC=!1,Ap=e,RI=i),s=e.pendingLanes,s===0&&(Wp=null),bke(n.stateNode),Va(e,Oi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kI)throw kI=!1,e=l4,l4=null,e;return RI&1&&e.tag!==0&&vv(),s=e.pendingLanes,s&1?e===c4?rx++:(rx=0,c4=e):rx=0,zm(),null}function vv(){if(Ap!==null){var e=yle(RI),t=hl.transition,n=pr;try{if(hl.transition=null,pr=16>e?16:e,Ap===null)var r=!1;else{if(e=Ap,Ap=null,RI=0,qn&6)throw Error(ot(331));var i=qn;for(qn|=4,Tt=e.current;Tt!==null;){var s=Tt,o=s.child;if(Tt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Tt=l;Tt!==null;){var c=Tt;switch(c.tag){case 0:case 11:case 15:tx(8,c,s)}var f=c.child;if(f!==null)f.return=c,Tt=f;else for(;Tt!==null;){c=Tt;var d=c.sibling,h=c.return;if(Dce(c),c===l){Tt=null;break}if(d!==null){d.return=h,Tt=d;break}Tt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Tt=o;else e:for(;Tt!==null;){if(s=Tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tx(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Tt=y;break e}Tt=s.return}}var v=e.current;for(Tt=v;Tt!==null;){o=Tt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Tt=b;else e:for(o=v;Tt!==null;){if(a=Tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:DR(9,a)}}catch(_){_i(a,a.return,_)}if(a===o){Tt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Tt=E;break e}Tt=a.return}}if(qn=i,zm(),yf&&typeof yf.onPostCommitFiberRoot=="function")try{yf.onPostCommitFiberRoot(_R,e)}catch{}r=!0}return r}finally{pr=n,hl.transition=t}}return!1}function KX(e,t,n){t=Xv(n,t),t=yce(e,t,1),e=qp(e,t,1),t=oa(),e!==null&&(bT(e,1,t),Va(e,t))}function _i(e,t,n){if(e.tag===3)KX(e,e,n);else for(;t!==null;){if(t.tag===3){KX(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wp===null||!Wp.has(r))){e=Xv(n,e),e=vce(t,e,1),t=qp(t,e,1),e=oa(),t!==null&&(bT(t,1,e),Va(t,e));break}}t=t.return}}function WRe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=oa(),e.pingedLanes|=e.suspendedLanes&n,Is===e&&(Zs&n)===n&&(is===4||is===3&&(Zs&130023424)===Zs&&500>Oi()-e7?c0(e,0):ZB|=n),Va(e,t)}function Lce(e,t){t===0&&(e.mode&1?(t=vC,vC<<=1,!(vC&130023424)&&(vC=4194304)):t=1);var n=oa();e=uh(e,t),e!==null&&(bT(e,t,n),Va(e,n))}function GRe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lce(e,n)}function YRe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ot(314))}r!==null&&r.delete(t),Lce(e,n)}var Bce;Bce=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||za.current)Fa=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Fa=!1,MRe(e,t,n);Fa=!!(e.flags&131072)}else Fa=!1,ti&&t.flags&1048576&&Vle(t,xI,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;uD(e,t),e=t.pendingProps;var i=Wv(t,Fo.current);yv(t,n),i=GB(null,t,r,e,i,n);var s=YB();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ua(r)?(s=!0,EI(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UB(t),i.updater=AR,t.stateNode=i,i._reactInternals=t,JL(t,r,e,n),t=t4(null,t,r,!0,s,n)):(t.tag=0,ti&&s&&MB(t),Qo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(uD(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=XRe(r),e=Yl(r,e),i){case 0:t=e4(null,t,r,e,n);break e;case 1:t=BX(null,t,r,e,n);break e;case 11:t=FX(null,t,r,e,n);break e;case 14:t=LX(null,t,r,Yl(r.type,e),n);break e}throw Error(ot(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yl(r,i),e4(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yl(r,i),BX(e,t,r,i,n);case 3:e:{if(wce(t),e===null)throw Error(ot(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Kle(e,t),CI(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Xv(Error(ot(423)),t),t=jX(e,t,r,n,i);break e}else if(r!==i){i=Xv(Error(ot(424)),t),t=jX(e,t,r,n,i);break e}else for(vu=Hp(t.stateNode.containerInfo.firstChild),Cu=t,ti=!0,Zl=null,n=Gle(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gv(),r===i){t=lh(e,t,n);break e}Qo(e,t,r,n)}t=t.child}return t;case 5:return Xle(t),e===null&&KL(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,HL(r,i)?o=null:s!==null&&HL(r,s)&&(t.flags|=32),Ece(e,t),Qo(e,t,o,n),t.child;case 6:return e===null&&KL(t),null;case 13:return xce(e,t,n);case 4:return VB(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yv(t,null,r,n):Qo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yl(r,i),FX(e,t,r,i,n);case 7:return Qo(e,t,t.pendingProps,n),t.child;case 8:return Qo(e,t,t.pendingProps.children,n),t.child;case 12:return Qo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Pr(SI,r._currentValue),r._currentValue=o,s!==null)if(xc(s.value,o)){if(s.children===i.children&&!za.current){t=lh(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Gd(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),XL(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ot(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),XL(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,yv(t,n),i=yl(i),r=r(i),t.flags|=1,Qo(e,t,r,n),t.child;case 14:return r=t.type,i=Yl(r,t.pendingProps),i=Yl(r.type,i),LX(e,t,r,i,n);case 15:return bce(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yl(r,i),uD(e,t),t.tag=1,Ua(r)?(e=!0,EI(t)):e=!1,yv(t,n),gce(t,r,i),JL(t,r,i,n),t4(null,t,r,!0,e,n);case 19:return Sce(e,t,n);case 22:return _ce(e,t,n)}throw Error(ot(156,t.tag))};function jce(e,t){return hle(e,t)}function KRe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function al(e,t,n,r){return new KRe(e,t,n,r)}function i7(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XRe(e){if(typeof e=="function")return i7(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xB)return 11;if(e===SB)return 14}return 2}function Yp(e,t){var n=e.alternate;return n===null?(n=al(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")i7(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case V1:return f0(n.children,i,s,t);case wB:o=8,i|=8;break;case wL:return e=al(12,n,t,i|2),e.elementType=wL,e.lanes=s,e;case xL:return e=al(13,n,t,i),e.elementType=xL,e.lanes=s,e;case SL:return e=al(19,n,t,i),e.elementType=SL,e.lanes=s,e;case Xue:return NR(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yue:o=10;break e;case Kue:o=9;break e;case xB:o=11;break e;case SB:o=14;break e;case lp:o=16,r=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=al(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function f0(e,t,n,r){return e=al(7,e,r,t),e.lanes=n,e}function NR(e,t,n,r){return e=al(22,e,r,t),e.elementType=Xue,e.lanes=n,e.stateNode={isHidden:!1},e}function w$(e,t,n){return e=al(6,e,null,t),e.lanes=n,e}function x$(e,t,n){return t=al(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function QRe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=r$(0),this.expirationTimes=r$(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r$(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function s7(e,t,n,r,i,s,o,a,u){return e=new QRe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=al(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UB(s),e}function JRe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U1,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zce(e){if(!e)return cm;e=e._reactInternals;e:{if(py(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ua(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var n=e.type;if(Ua(n))return zle(e,n,t)}return t}function Uce(e,t,n,r,i,s,o,a,u){return e=s7(n,r,!0,e,i,s,o,a,u),e.context=zce(null),n=e.current,r=oa(),i=Gp(n),s=Gd(r,i),s.callback=t??null,qp(n,s,i),e.current.lanes=i,bT(e,i,r),Va(e,r),e}function kR(e,t,n,r){var i=t.current,s=oa(),o=Gp(i);return n=zce(n),t.context===null?t.context=n:t.pendingContext=n,t=Gd(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qp(i,t,o),e!==null&&(pc(e,i,o,s),sD(e,i,o)),o}function OI(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function XX(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function o7(e,t){XX(e,t),(e=e.alternate)&&XX(e,t)}function ZRe(){return null}var Vce=typeof reportError=="function"?reportError:function(e){console.error(e)};function a7(e){this._internalRoot=e}RR.prototype.render=a7.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));kR(e,t,null,null)};RR.prototype.unmount=a7.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;N0(function(){kR(null,e,null,null)}),t[ah]=null}};function RR(e){this._internalRoot=e}RR.prototype.unstable_scheduleHydration=function(e){if(e){var t=_le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yp.length&&t!==0&&t<yp[n].priority;n++);yp.splice(n,0,e),n===0&&wle(e)}};function u7(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function PR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function QX(){}function ePe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=OI(o);s.call(l)}}var o=Uce(t,r,e,0,null,!1,!1,"",QX);return e._reactRootContainer=o,e[ah]=o.current,Jx(e.nodeType===8?e.parentNode:e),N0(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=OI(u);a.call(l)}}var u=s7(e,0,!1,null,null,!1,!1,"",QX);return e._reactRootContainer=u,e[ah]=u.current,Jx(e.nodeType===8?e.parentNode:e),N0(function(){kR(t,u,n,r)}),u}function OR(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=OI(o);a.call(u)}}kR(t,o,e,i)}else o=ePe(n,t,e,i,r);return OI(o)}vle=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=lw(t.pendingLanes);n!==0&&(AB(t,n|1),Va(t,Oi()),!(qn&6)&&(Qv=Oi()+500,zm()))}break;case 13:N0(function(){var r=uh(e,1);if(r!==null){var i=oa();pc(r,e,1,i)}}),o7(e,1)}};DB=function(e){if(e.tag===13){var t=uh(e,134217728);if(t!==null){var n=oa();pc(t,e,134217728,n)}o7(e,134217728)}};ble=function(e){if(e.tag===13){var t=Gp(e),n=uh(e,t);if(n!==null){var r=oa();pc(n,e,t,r)}o7(e,t)}};_le=function(){return pr};Ele=function(e,t){var n=pr;try{return pr=e,t()}finally{pr=n}};OL=function(e,t,n){switch(t){case"input":if(AL(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=SR(r);if(!i)throw Error(ot(90));Jue(r),AL(r,i)}}}break;case"textarea":ele(e,n);break;case"select":t=n.value,t!=null&&hv(e,!!n.multiple,t,!1)}};ale=t7;ule=N0;var tPe={usingClientEntryPoint:!1,Events:[ET,G1,SR,sle,ole,t7]},gE={findFiberByHostInstance:Jg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nPe={bundleType:gE.bundleType,version:gE.version,rendererPackageName:gE.rendererPackageName,rendererConfig:gE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fle(e),e===null?null:e.stateNode},findFiberByHostInstance:gE.findFiberByHostInstance||ZRe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var IC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!IC.isDisabled&&IC.supportsFiber)try{_R=IC.inject(nPe),yf=IC}catch{}}Uu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tPe;Uu.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u7(t))throw Error(ot(200));return JRe(e,t,null,n)};Uu.createRoot=function(e,t){if(!u7(e))throw Error(ot(299));var n=!1,r="",i=Vce;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=s7(e,1,!1,null,null,n,!1,r,i),e[ah]=t.current,Jx(e.nodeType===8?e.parentNode:e),new a7(t)};Uu.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=fle(t),e=e===null?null:e.stateNode,e};Uu.flushSync=function(e){return N0(e)};Uu.hydrate=function(e,t,n){if(!PR(t))throw Error(ot(200));return OR(null,e,t,!0,n)};Uu.hydrateRoot=function(e,t,n){if(!u7(e))throw Error(ot(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Vce;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Uce(t,null,e,1,n??null,i,!1,s,o),e[ah]=t.current,Jx(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new RR(t)};Uu.render=function(e,t,n){if(!PR(t))throw Error(ot(200));return OR(null,e,t,!1,n)};Uu.unmountComponentAtNode=function(e){if(!PR(e))throw Error(ot(40));return e._reactRootContainer?(N0(function(){OR(null,null,e,!1,function(){e._reactRootContainer=null,e[ah]=null})}),!0):!1};Uu.unstable_batchedUpdates=t7;Uu.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!PR(n))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return OR(e,t,n,!1,r)};Uu.version="18.3.1-next-f1338f8080-20240426";function Hce(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hce)}catch(e){console.error(e)}}Hce(),Hue.exports=Uu;var xT=Hue.exports;const rPe=pa(xT);var JX=xT;_L.createRoot=JX.createRoot,_L.hydrateRoot=JX.hydrateRoot;var sf=function(){return sf=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},sf.apply(this,arguments)};function ST(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function iPe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var dD="right-scroll-bar-position",hD="width-before-scroll-bar",sPe="with-scroll-bars-hidden",oPe="--removed-body-scroll-bar-size";function S$(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function aPe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var uPe=typeof window<"u"?k.useLayoutEffect:k.useEffect,ZX=new WeakMap;function lPe(e,t){var n=aPe(null,function(r){return e.forEach(function(i){return S$(i,r)})});return uPe(function(){var r=ZX.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||S$(a,null)}),s.forEach(function(a){i.has(a)||S$(a,o)})}ZX.set(n,e)},[e]),n}function cPe(e){return e}function fPe(e,t){t===void 0&&(t=cPe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function dPe(e){e===void 0&&(e={});var t=fPe(null);return t.options=sf({async:!0,ssr:!1},e),t}var qce=function(e){var t=e.sideCar,n=ST(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,sf({},n))};qce.isSideCarExport=!0;function hPe(e,t){return e.useMedium(t),qce}var Wce=dPe(),T$=function(){},MR=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:T$,onWheelCapture:T$,onTouchMoveCapture:T$}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=ST(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,_=lPe([n,t]),x=sf(sf({},b),i);return k.createElement(k.Fragment,null,c&&k.createElement(E,{sideCar:Wce,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?k.cloneElement(k.Children.only(a),sf(sf({},x),{ref:_})):k.createElement(y,sf({},x,{className:u,ref:_}),a))});MR.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};MR.classNames={fullWidth:hD,zeroRight:dD};var pPe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function mPe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=pPe();return t&&e.setAttribute("nonce",t),e}function gPe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function yPe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var vPe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=mPe())&&(gPe(t,n),yPe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},bPe=function(){var e=vPe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Gce=function(){var e=bPe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},_Pe={left:0,top:0,right:0,gap:0},C$=function(e){return parseInt(e||"",10)||0},EPe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[C$(n),C$(r),C$(i)]},wPe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return _Pe;var t=EPe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},xPe=Gce(),bv="data-scroll-locked",SPe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(sPe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(bv,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(hD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dD," .").concat(dD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(hD," .").concat(hD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bv,`] {
    `).concat(oPe,": ").concat(a,`px;
  }
`)},eQ=function(){var e=parseInt(document.body.getAttribute(bv)||"0",10);return isFinite(e)?e:0},TPe=function(){k.useEffect(function(){return document.body.setAttribute(bv,(eQ()+1).toString()),function(){var e=eQ()-1;e<=0?document.body.removeAttribute(bv):document.body.setAttribute(bv,e.toString())}},[])},CPe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;TPe();var s=k.useMemo(function(){return wPe(i)},[i]);return k.createElement(xPe,{styles:SPe(s,!t,i,n?"":"!important")})},h4=!1;if(typeof window<"u")try{var NC=Object.defineProperty({},"passive",{get:function(){return h4=!0,!0}});window.addEventListener("test",NC,NC),window.removeEventListener("test",NC,NC)}catch{h4=!1}var a1=h4?{passive:!1}:!1,APe=function(e){return e.tagName==="TEXTAREA"},Yce=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!APe(e)&&n[t]==="visible")},DPe=function(e){return Yce(e,"overflowY")},IPe=function(e){return Yce(e,"overflowX")},tQ=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Kce(e,r);if(i){var s=Xce(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NPe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},kPe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Kce=function(e,t){return e==="v"?DPe(t):IPe(t)},Xce=function(e,t){return e==="v"?NPe(t):kPe(t)},RPe=function(e,t){return e==="h"&&t==="rtl"?-1:1},PPe=function(e,t,n,r,i){var s=RPe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Xce(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Kce(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},kC=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nQ=function(e){return[e.deltaX,e.deltaY]},rQ=function(e){return e&&"current"in e?e.current:e},OPe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},MPe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},$Pe=0,u1=[];function FPe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState($Pe++)[0],s=k.useState(Gce)[0],o=k.useRef(e);k.useEffect(function(){o.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=iPe([e.lockRef.current],(e.shards||[]).map(rQ),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=kC(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],E="deltaY"in m?m.deltaY:v[1]-y[1],_,x=m.target,S=Math.abs(b)>Math.abs(E)?"h":"v";if("touches"in m&&S==="h"&&x.type==="range")return!1;var C=tQ(S,x);if(!C)return!0;if(C?_=S:(_=S==="v"?"h":"v",C=tQ(S,x)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||E)&&(r.current=_),!_)return!0;var A=r.current||_;return PPe(A,g,m,A==="h"?b:E,!0)},[]),u=k.useCallback(function(m){var g=m;if(!(!u1.length||u1[u1.length-1]!==s)){var y="deltaY"in g?nQ(g):kC(g),v=t.current.filter(function(_){return _.name===g.type&&(_.target===g.target||g.target===_.shadowParent)&&OPe(_.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(rQ).filter(Boolean).filter(function(_){return _.contains(g.target)}),E=b.length>0?a(g,b[0]):!o.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=k.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:LPe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(E){return E!==b})},1)},[]),c=k.useCallback(function(m){n.current=kC(m),r.current=void 0},[]),f=k.useCallback(function(m){l(m.type,nQ(m),m.target,a(m,e.lockRef.current))},[]),d=k.useCallback(function(m){l(m.type,kC(m),m.target,a(m,e.lockRef.current))},[]);k.useEffect(function(){return u1.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,a1),document.addEventListener("touchmove",u,a1),document.addEventListener("touchstart",c,a1),function(){u1=u1.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,a1),document.removeEventListener("touchmove",u,a1),document.removeEventListener("touchstart",c,a1)}},[]);var h=e.removeScrollBar,p=e.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:MPe(i)}):null,h?k.createElement(CPe,{gapMode:e.gapMode}):null)}function LPe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const BPe=hPe(Wce,FPe);var $R=k.forwardRef(function(e,t){return k.createElement(MR,sf({},e,{ref:t,sideCar:BPe}))});$R.classNames=MR.classNames;function hi(e){return Object.keys(e)}function A$(e){return e&&typeof e=="object"&&!Array.isArray(e)}function l7(e,t){const n={...e},r=t;return A$(e)&&A$(t)&&Object.keys(t).forEach(i=>{A$(r[i])&&i in e?n[i]=l7(n[i],r[i]):n[i]=r[i]}),n}function jPe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function zPe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function p4(e){const t=zPe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function D$(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Qce(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?D$(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?D$(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?D$(s):s}}return r}return n}const Ne=Qce("rem",{shouldScale:!0}),MI=Qce("em");function i_(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Jce(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Um(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==k.Fragment:!1}function Ps(e){const t=k.createContext(null);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>{const i=k.useContext(t);if(i===null)throw new Error(e);return i}]}function s_(e=null){const t=k.createContext(e);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>k.useContext(t)]}function $I(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function FI(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function UPe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function VPe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function HPe(e,t,n){return FI(e,n)===FI(t,n)}function c7({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=FI(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>HPe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=VPe(l,u,r),f=UPe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const qPe={app:100,modal:200,popover:300,overlay:400,max:9999};function Dl(e){return qPe[e]}const WPe=()=>{};function GPe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||WPe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function cn(e,t="size",n=!0){if(e!==void 0)return Jce(e)?n?Ne(e):e:`var(--${t}-${e})`}function ku(e){return cn(e,"mantine-spacing")}function Kr(e){return e===void 0?"var(--mantine-radius-default)":cn(e,"mantine-radius")}function eo(e){return cn(e,"mantine-font-size")}function Zce(e){return cn(e,"mantine-line-height",!1)}function f7(e){if(e)return cn(e,"mantine-shadow",!1)}function $d(e,t){return n=>{e==null||e(n),t==null||t(n)}}function d7(e,t){return e in t.breakpoints?p4(t.breakpoints[e]):p4(e)}function LI(e,t){const n=e.map(r=>({value:r,px:d7(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function fw(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function YPe(e,t,n){var r;return n?Array.from(((r=FI(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function KPe(){const[e,t]=k.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function ff(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function ix(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Bg(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function FR(e,t){const n=Bg(e),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const iQ=["mousedown","touchstart"];function XPe(e,t,n){const r=k.useRef();return k.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||iQ).forEach(s=>document.addEventListener(s,i)),()=>{(t||iQ).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function QPe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function JPe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function ZPe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=k.useState(n?t:JPe(e)),s=k.useRef();return k.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),QPe(s.current,o=>i(o.matches))},[e]),r}const my=typeof document<"u"?k.useLayoutEffect:k.useEffect;function ch(e,t){const n=k.useRef(!1);k.useEffect(()=>()=>{n.current=!1},[]),k.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function efe({opened:e,shouldReturnFocus:t=!0}){const n=k.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return ch(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function e3e(e,t="body > :not(script)"){const n=ix(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const t3e=/input|select|textarea|button|object/,tfe="a, input, select, textarea, button, object, [tabindex]";function n3e(e){return e.style.display==="none"}function r3e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(n3e(n))return!1;n=n.parentNode}return!0}function nfe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function m4(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(nfe(e));return(t3e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&r3e(e)}function rfe(e){const t=nfe(e);return(Number.isNaN(t)||t>=0)&&m4(e)}function i3e(e){return Array.from(e.querySelectorAll(tfe)).filter(rfe)}function s3e(e,t){const n=i3e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function o3e(e=!0){const t=k.useRef(),n=k.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(tfe));o=a.find(rfe)||a.find(m4)||null,!o&&m4(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=k.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=e3e(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return k.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&s3e(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const a3e=xi.useId||(()=>{});function u3e(){const e=a3e();return e?`mantine-${e.replace(/:/g,"")}`:""}function ya(e){const t=u3e(),[n,r]=k.useState(t);return my(()=>{r(ix())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function ife(e,t,n){k.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function h7(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function sfe(...e){return t=>{e.forEach(n=>h7(n,t))}}function ds(...e){return k.useCallback(sfe(...e),e)}function l3e(e,t,n="ltr"){const r=k.useRef(null),i=k.useRef(!1),s=k.useRef(!1),o=k.useRef(0),[a,u]=k.useState(!1);return k.useEffect(()=>{i.current=!0},[]),k.useEffect(()=>{var v,b;const l=({x:E,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const x=r.current.getBoundingClientRect();if(x.width&&x.height){const S=ff((E-x.left)/x.width,0,1);e({x:n==="ltr"?S:1-S,y:ff((_-x.top)/x.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),d(),y(E)},y=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ks({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=k.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function p7(e,t){return ZPe("(prefers-reduced-motion: reduce)",e,t)}const c3e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function ofe(e){const t=k.useRef(0),n=k.useRef(null),[r,i]=k.useState(c3e),s=k.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return k.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function f3e(e){const[t,{width:n,height:r}]=ofe(e);return{ref:t,width:n,height:r}}function _v(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=k.useState(e),o=k.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=k.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=k.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function d3e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function h3e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});my(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>d3e(`${e}:${String(r)}`,i[0])}return[t,n]}var p3e={};function m3e(){return typeof process<"u"&&p3e?"production":"development"}function afe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=afe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ai(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=afe(e))&&(r&&(r+=" "),r+=t);return r}const g3e={};function y3e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ai(t[r],i):t[r]=i})}),t}function LR({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||g3e);return y3e(s)}function BI({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const ufe=k.createContext(null);function Vm(){const e=k.useContext(ufe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function v3e(){return Vm().cssVariablesResolver}function b3e(){return Vm().classNamesPrefix}function m7(){return Vm().getStyleNonce}function _3e(){return Vm().withStaticClasses}function E3e(){return Vm().headless}function w3e(){var e;return(e=Vm().stylesTransform)==null?void 0:e.sx}function x3e(){var e;return(e=Vm().stylesTransform)==null?void 0:e.styles}function S3e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function T3e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function C3e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function A3e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function g7(e){return S3e(e)?T3e(e):e.startsWith("rgb")?C3e(e):e.startsWith("hsl")?A3e(e):{r:0,g:0,b:0,a:1}}function RC(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=g7(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function aS(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function I$(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function D3e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function I3e(e){if(e.startsWith("oklch("))return(D3e(e)||0)/100;const{r:t,g:n,b:r}=g7(e),i=t/255,s=n/255,o=r/255,a=I$(i),u=I$(s),l=I$(o);return .2126*a+.7152*u+.0722*l}function yE(e,t=.179){return e.startsWith("var(")?!1:I3e(e)>t}function Uf({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:yE(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:yE(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:yE(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][aS(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:yE(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:yE(e,t.luminanceThreshold),shade:s,variable:void 0}}function Gr(e,t){const n=Uf({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function g4(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Gr(n.from,t),i=Gr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Qc(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=g7(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const l1=Qc,N3e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Uf({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ne(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ne(1)} solid transparent`}:{background:e,hover:RC(e,.1),color:a,border:`${Ne(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ne(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Qc(a,.1),hover:Qc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ne(1)} solid transparent`}}return{background:Qc(e,.1),hover:Qc(e,.12),color:e,border:`${Ne(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ne(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Qc(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ne(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Qc(e,.05),color:e,border:`${Ne(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ne(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Qc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ne(1)} solid transparent`}}return{background:"transparent",hover:Qc(e,.12),color:e,border:`${Ne(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ne(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ne(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ne(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:RC(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ne(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:RC(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ne(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:RC(t.white,.01),color:e,border:`${Ne(1)} solid transparent`}:n==="gradient"?{background:g4(r,t),hover:g4(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ne(1)} solid var(--mantine-color-default-border)`}:{}},k3e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},sQ="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",y7={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:k3e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:N3e,autoContrast:!1,luminanceThreshold:.3,fontFamily:sQ,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:sQ,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ne(34),lineHeight:"1.3"},h2:{fontSize:Ne(26),lineHeight:"1.35"},h3:{fontSize:Ne(22),lineHeight:"1.4"},h4:{fontSize:Ne(18),lineHeight:"1.45"},h5:{fontSize:Ne(16),lineHeight:"1.5"},h6:{fontSize:Ne(14),lineHeight:"1.5"}}},fontSizes:{xs:Ne(12),sm:Ne(14),md:Ne(16),lg:Ne(18),xl:Ne(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ne(2),sm:Ne(4),md:Ne(8),lg:Ne(16),xl:Ne(32)},spacing:{xs:Ne(10),sm:Ne(12),md:Ne(16),lg:Ne(20),xl:Ne(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), 0 ${Ne(1)} ${Ne(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(10)} ${Ne(15)} ${Ne(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ne(7)} ${Ne(7)} ${Ne(-5)}`,md:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(20)} ${Ne(25)} ${Ne(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ne(10)} ${Ne(10)} ${Ne(-5)}`,lg:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(28)} ${Ne(23)} ${Ne(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ne(12)} ${Ne(12)} ${Ne(-7)}`,xl:`0 ${Ne(1)} ${Ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ne(36)} ${Ne(28)} ${Ne(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ne(17)} ${Ne(17)} ${Ne(-7)}`},other:{},components:{}};function oQ(e){return e==="auto"||e==="dark"||e==="light"}function R3e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return oQ(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&oQ(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const P3e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",aQ="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function N$(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function uQ(e){if(!(e.primaryColor in e.colors))throw new Error(P3e);if(typeof e.primaryShade=="object"&&(!N$(e.primaryShade.dark)||!N$(e.primaryShade.light)))throw new Error(aQ);if(typeof e.primaryShade=="number"&&!N$(e.primaryShade))throw new Error(aQ)}function O3e(e,t){var r;if(!t)return uQ(e),e;const n=l7(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),uQ(n),n}const v7=k.createContext(null),M3e=()=>k.useContext(v7)||y7;function Os(){const e=k.useContext(v7);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function lfe({theme:e,children:t,inherit:n=!0}){const r=M3e(),i=k.useMemo(()=>O3e(n?r:y7,e),[e,r,n]);return w.jsx(v7.Provider,{value:i,children:t})}lfe.displayName="@mantine/core/MantineThemeProvider";function $3e(){const e=Os(),t=m7(),n=hi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=p4(e.breakpoints[i]),a=s?`${o-.1}px`:MI(o-.1),u=s?`${o}px`:MI(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function k$(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function R$(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function F3e(e,t){const n=k$(e.variables),r=n?R$(t,n):"",i=k$(e.dark),s=i?R$(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=k$(e.light),a=o?R$(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function gy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Uf({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function lQ(e,t){return gy({color:e.colors[e.primaryColor][aS(e,t)],theme:e,autoContrast:null})}function PC({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=aS(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:l1(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:l1(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:l1(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=aS(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:l1(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:l1(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:l1(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function L3e(e){return Array.isArray(e)?e:Array(10).fill(e)}function B3e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function c1(e,t,n){hi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const cfe=e=>{const t=aS(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ne(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":lQ(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":lQ(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};c1(r.variables,e.breakpoints,"breakpoint"),c1(r.variables,e.spacing,"spacing"),c1(r.variables,e.fontSizes,"font-size"),c1(r.variables,e.lineHeights,"line-height"),c1(r.variables,e.shadows,"shadow"),c1(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),hi(e.colors).forEach(s=>{const o=e.colors[s];if(B3e(o)){Object.assign(r.light,PC({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,PC({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,PC({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,PC({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return hi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function j3e({theme:e,generator:t}){const n=cfe(e),r=t==null?void 0:t(e);return r?l7(n,r):n}const P$=cfe(y7);function z3e(e){const t={variables:{},light:{},dark:{}};return hi(e.variables).forEach(n=>{P$.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),hi(e.light).forEach(n=>{P$.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),hi(e.dark).forEach(n=>{P$.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function U3e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function ffe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Os(),r=m7(),i=v3e(),s=j3e({theme:n,generator:i}),o=e===":root"&&t,a=o?z3e(s):s,u=F3e(a,e);return u?w.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":U3e(e)}`}}):null}ffe.displayName="@mantine/CssVariables";function V3e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function f1(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function H3e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=k.useRef(),[s,o]=k.useState(()=>e.get(t)),a=r||s,u=k.useCallback(c=>{r||(f1(c,n),o(c),e.set(c))},[e.set,a,r]),l=k.useCallback(()=>{o(t),f1(t,n),e.clear()},[e.clear,t]);return k.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),my(()=>{f1(e.get(t),n)},[]),k.useEffect(()=>{var f;if(r)return f1(r,n),()=>{};r===void 0&&f1(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&f1(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function q3e({respectReducedMotion:e,getRootElement:t}){my(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}V3e();function dfe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=R3e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=H3e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return q3e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),w.jsx(ufe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:w.jsxs(lfe,{theme:e,children:[o&&w.jsx(ffe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&w.jsx($3e,{}),t]})})}dfe.displayName="@mantine/core/MantineProvider";function kh({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Os();return{resolvedClassNames:LR({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:BI({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const W3e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function G3e({theme:e,options:t,unstyled:n}){return Ai((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||W3e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Y3e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return LR({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function cQ({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return LR({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function K3e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function X3e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Q3e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function J3e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=LR({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Z3e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function eOe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ai(G3e({theme:e,options:t,unstyled:a||h}),J3e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Z3e({options:t,classes:o,selector:r,unstyled:a}),cQ({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),cQ({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Y3e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),K3e({rootSelector:l,selector:r,className:u}),X3e({selector:r,classes:o,unstyled:a||h}),d&&!h&&Q3e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function tOe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return BI({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function y4({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...y4({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function nOe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...i_(n[r])}}),t),{})}function rOe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=nOe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function iOe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&tOe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&BI({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&BI({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...rOe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?y4({style:u,theme:e}):null,...y4({style:r==null?void 0:r.style,theme:e})}}function sOe({props:e,stylesCtx:t,themeName:n}){var o;const r=Os(),i=(o=x3e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Et({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Os(),h=b3e(),p=_3e(),m=E3e(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=sOe({props:n,stylesCtx:r,themeName:g});return(b,E)=>({className:eOe({theme:d,options:E,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([E==null?void 0:E.styles,l])}),style:iOe({theme:d,themeName:g,selector:b,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function o_(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ie(e,t,n){var o;const r=Os(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...i_(n)}}function O$(e){return hi(e).reduce((t,n)=>e[n]!==void 0?`${t}${jPe(n)}:${e[n]};`:t,"").trim()}function oOe({selector:e,styles:t,media:n,container:r}){const i=t?O$(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${O$(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${O$(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function TT(e){const t=m7();return w.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:oOe(e)}})}function yy(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:E,c:_,opacity:x,ff:S,fz:C,fw:A,lts:D,ta:I,lh:O,fs:R,tt:M,td:F,w:P,miw:j,maw:z,h:V,mih:$,mah:U,bgsz:W,bgp:B,bgr:q,bga:Y,pos:re,top:pe,left:_e,bottom:de,right:ye,inset:Ce,display:ve,flex:qe,hiddenFrom:He,visibleFrom:ht,lightHidden:rt,darkHidden:Pe,sx:Be,...Xe}=e;return{styleProps:i_({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:E,c:_,opacity:x,ff:S,fz:C,fw:A,lts:D,ta:I,lh:O,fs:R,tt:M,td:F,w:P,miw:j,maw:z,h:V,mih:$,mah:U,bgsz:W,bgp:B,bgr:q,bga:Y,pos:re,top:pe,left:_e,bottom:de,right:ye,inset:Ce,display:ve,flex:qe,hiddenFrom:He,visibleFrom:ht,lightHidden:rt,darkHidden:Pe,sx:Be}),rest:Xe}}const aOe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function b7(e,t){const n=Uf({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function uOe(e,t){const n=Uf({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:b7(e,t)}function lOe(e,t){if(typeof e=="number")return Ne(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ne(n)}`;return r&&(s+=` ${r}`),L3e.length>0&&(s+=` ${b7(i.join(" "),t)}`),s.trim()}return e}const fQ={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function cOe(e){return typeof e=="string"&&e in fQ?fQ[e]:e}const fOe=["h1","h2","h3","h4","h5","h6"];function dOe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&fOe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ne(e):e}function hOe(e){return e}const pOe=["h1","h2","h3","h4","h5","h6"];function mOe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&pOe.includes(e)?`var(--mantine-${e}-line-height)`:e}function gOe(e){return typeof e=="number"?Ne(e):e}function yOe(e,t){if(typeof e=="number")return Ne(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ne(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const M$={color:b7,textColor:uOe,fontSize:dOe,spacing:yOe,identity:hOe,size:gOe,lineHeight:mOe,fontFamily:cOe,border:lOe};function dQ(e){return e.replace("(min-width: ","").replace("em)","")}function vOe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(dQ(i))-Number(dQ(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function bOe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function _Oe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function EOe(e){return typeof e=="object"&&e!==null?hi(e).filter(t=>t!=="base"):[]}function wOe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function hfe({styleProps:e,data:t,theme:n}){return vOe(hi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=_Oe(e[i]);if(!bOe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=M$[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=EOe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=M$[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:M$[s.type](wOe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function BR(){return`__m__-${k.useId().replace(/:/g,"")}`}function _7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,..._7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function pfe(e){return e.startsWith("data-")?e:`data-${e}`}function xOe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[pfe(n)]=e[n]),t},{})}function mfe(e){return e?typeof e=="string"?{[pfe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...mfe(n)}),{}):xOe(e):null}function v4(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...v4(r,t)}),{}):typeof e=="function"?e(t):e??{}}function SOe({theme:e,style:t,vars:n,styleProps:r}){const i=v4(t,e),s=v4(n,e);return{...i,...s,...r}}const gfe=k.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=Os(),g=e||"div",{styleProps:y,rest:v}=yy(h),b=w3e(),E=(C=b==null?void 0:b())==null?void 0:C(y.sx),_=BR(),x=hfe({styleProps:y,theme:m,data:aOe}),S={ref:p,style:SOe({theme:m,style:t,vars:n,styleProps:x.inlineStyles}),className:Ai(r,E,{[_]:x.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":Jce(o)?void 0:o||void 0,size:d,...mfe(s),...v};return w.jsxs(w.Fragment,{children:[x.hasResponsiveStyles&&w.jsx(TT,{selector:`.${_}`,styles:x.styles,media:x.media}),typeof f=="function"?f(S):w.jsx(g,{...S})]})});gfe.displayName="@mantine/core/Box";const we=gfe;function yfe(e){return e}function Ve(e){const t=k.forwardRef(e);return t.extend=yfe,t}function hs(e){const t=k.forwardRef(e);return t.extend=yfe,t}const TOe=k.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Rh(){return k.useContext(TOe)}function COe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function $$(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const vE=typeof window<"u"&&window.requestAnimationFrame;function AOe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=k.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=k.useState(r?{}:o),l=p=>{xT.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||COe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}ch(()=>{typeof vE=="function"&&vE(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),vE(()=>{const p=$$(i);c({...f(p),height:p})})}:()=>{const p=$$(i);c({...f(p),willChange:"height",height:p}),vE(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=$$(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:sfe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const DOe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},E7=Ve((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ie("Collapse",DOe,e),c=Os(),f=p7(),h=(c.respectReducedMotion?f:!1)?0:i,p=AOe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?w.jsx(we,{...l,children:n}):null:w.jsx(we,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",..._7(o,c)},ref:t,...l}),children:n})});E7.displayName="@mantine/core/Collapse";const[IOe,Il]=Ps("ScrollArea.Root component was not found in tree");function Jv(e,t){const n=Bg(t);my(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const NOe=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=Il(),[s,o]=k.useState(0),[a,u]=k.useState(0),l=!!(s&&a);return Jv(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),Jv(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?w.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),kOe=k.forwardRef((e,t)=>{const n=Il(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?w.jsx(NOe,{...e,ref:t}):null}),ROe={scrollHideDelay:1e3,type:"hover"},vfe=k.forwardRef((e,t)=>{const n=Ie("ScrollAreaRoot",ROe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=k.useState(null),[l,c]=k.useState(null),[f,d]=k.useState(null),[h,p]=k.useState(null),[m,g]=k.useState(null),[y,v]=k.useState(0),[b,E]=k.useState(0),[_,x]=k.useState(!1),[S,C]=k.useState(!1),A=ds(t,D=>u(D));return w.jsx(IOe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:_,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:E},children:w.jsx(we,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});vfe.displayName="@mantine/core/ScrollAreaRoot";function bfe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function jR(e){const t=bfe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function _fe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function POe(e,[t,n]){return Math.min(n,Math.max(t,e))}function hQ(e,t,n="ltr"){const r=jR(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=POe(e,u);return _fe([0,o],[0,a])(l)}function OOe(e,t,n,r="ltr"){const i=jR(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return _fe([u,l],f)(e)}function Efe(e,t){return e>0&&e<t}function jI(e){return e?parseInt(e,10):0}function d0(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[MOe,wfe]=Ps("ScrollAreaScrollbar was not found in tree"),xfe=k.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Il(),[h,p]=k.useState(null),m=ds(t,C=>p(C)),g=k.useRef(null),y=k.useRef(""),{viewport:v}=d,b=n.content-n.viewport,E=Bg(l),_=Bg(a),x=FR(c,10),S=C=>{if(g.current){const A=C.clientX-g.current.left,D=C.clientY-g.current.top;u({x:A,y:D})}};return k.useEffect(()=>{const C=A=>{const D=A.target;(h==null?void 0:h.contains(D))&&E(A,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,E]),k.useEffect(_,[n,_]),Jv(h,x),Jv(d.content,x),w.jsx(MOe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Bg(i),onThumbPointerUp:Bg(s),onThumbPositionChange:_,onThumbPointerDown:Bg(o)},children:w.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:d0(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(C))}),onPointerMove:d0(e.onPointerMove,S),onPointerUp:d0(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),$Oe=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Il(),[a,u]=k.useState(),l=k.useRef(null),c=ds(t,l,o.onScrollbarXChange);return k.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),w.jsx(xfe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${jR(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Efe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:jI(a.paddingLeft),paddingEnd:jI(a.paddingRight)}})}})}),FOe=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Il(),[a,u]=k.useState(),l=k.useRef(null),c=ds(t,l,o.onScrollbarYChange);return k.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),w.jsx(xfe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${jR(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Efe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:jI(a.paddingTop),paddingEnd:jI(a.paddingBottom)}})}})}),w7=k.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Rh(),s=Il(),o=k.useRef(null),a=k.useRef(0),[u,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=bfe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>OOe(h,a.current,u,p);return n==="horizontal"?w.jsx($Oe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=hQ(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?w.jsx(FOe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=hQ(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Sfe=k.forwardRef((e,t)=>{const n=Il(),{forceMount:r,...i}=e,[s,o]=k.useState(!1),a=e.orientation==="horizontal",u=FR(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return Jv(n.viewport,u),Jv(n.content,u),r||s?w.jsx(w7,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),LOe=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Il(),[s,o]=k.useState(!1);return k.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?w.jsx(Sfe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),BOe=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Il(),s=e.orientation==="horizontal",[o,a]=k.useState("hidden"),u=FR(()=>a("idle"),100);return k.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),k.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?w.jsx(w7,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:d0(e.onPointerEnter,()=>a("interacting")),onPointerLeave:d0(e.onPointerLeave,()=>a("idle"))}):null}),pQ=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Il(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return k.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?w.jsx(LOe,{...r,ref:t,forceMount:n}):i.type==="scroll"?w.jsx(BOe,{...r,ref:t,forceMount:n}):i.type==="auto"?w.jsx(Sfe,{...r,ref:t,forceMount:n}):i.type==="always"?w.jsx(w7,{...r,ref:t}):null});function jOe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const zOe=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=Il(),s=wfe(),{onThumbPositionChange:o}=s,a=ds(t,c=>s.onThumbChange(c)),u=k.useRef(),l=FR(()=>{u.current&&(u.current(),u.current=void 0)},100);return k.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=jOe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),w.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:d0(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:d0(e.onPointerUp,s.onThumbPointerUp)})}),mQ=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=wfe();return n||i.hasThumb?w.jsx(zOe,{ref:t,...r}):null}),Tfe=k.forwardRef(({children:e,style:t,...n},r)=>{const i=Il(),s=ds(r,i.onViewportChange);return w.jsx(we,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:w.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Tfe.displayName="@mantine/core/ScrollAreaViewport";var x7={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Cfe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},UOe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ne(t)}}),vy=Ve((e,t)=>{const n=Ie("ScrollArea",Cfe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,E]=k.useState(!1),_=Et({name:"ScrollArea",props:n,classes:x7,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:UOe});return w.jsxs(vfe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,..._("root"),...v,children:[w.jsx(Tfe,{...d,..._("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:x=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,x),p==null||p({x:x.currentTarget.scrollLeft,y:x.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&w.jsx(pQ,{..._("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:w.jsx(mQ,{..._("thumb")})}),(y==="xy"||y==="y")&&w.jsx(pQ,{..._("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:w.jsx(mQ,{..._("thumb")})}),w.jsx(kOe,{..._("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});vy.displayName="@mantine/core/ScrollArea";const S7=Ve((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Ie("ScrollAreaAutosize",Cfe,e);return w.jsx(we,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:w.jsx(we,{style:{display:"flex",flexDirection:"column",flex:1},children:w.jsx(vy,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});vy.classes=x7;S7.displayName="@mantine/core/ScrollAreaAutosize";S7.classes=x7;vy.Autosize=S7;var Afe={root:"m_87cf2631"};const VOe={__staticSelector:"UnstyledButton"},Yi=hs((e,t)=>{const n=Ie("UnstyledButton",VOe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Et({name:s,props:n,classes:Afe,className:r,style:l,classNames:a,styles:u,unstyled:o});return w.jsx(we,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Yi.classes=Afe;Yi.displayName="@mantine/core/UnstyledButton";var Dfe={root:"m_515a97f8"};const HOe={},T7=Ve((e,t)=>{const n=Ie("VisuallyHidden",HOe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Et({name:"VisuallyHidden",classes:Dfe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return w.jsx(we,{component:"span",ref:t,...c("root"),...l})});T7.classes=Dfe;T7.displayName="@mantine/core/VisuallyHidden";var Ife={root:"m_1b7284a3"};const qOe={},WOe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Kr(t),"--paper-shadow":f7(n)}}),zR=hs((e,t)=>{const n=Ie("Paper",qOe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Et({name:"Paper",props:n,classes:Ife,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:WOe});return w.jsx(we,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});zR.classes=Ife;zR.displayName="@mantine/core/Paper";function a_(e){return Nfe(e)?(e.nodeName||"").toLowerCase():"#document"}function Ha(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ph(e){var t;return(t=(Nfe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Nfe(e){return e instanceof Node||e instanceof Ha(e).Node}function ni(e){return e instanceof Element||e instanceof Ha(e).Element}function Ru(e){return e instanceof HTMLElement||e instanceof Ha(e).HTMLElement}function b4(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ha(e).ShadowRoot}function CT(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=bl(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function GOe(e){return["table","td","th"].includes(a_(e))}function C7(e){const t=A7(),n=bl(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function YOe(e){let t=fh(e);for(;Ru(t)&&!fm(t);){if(C7(t))return t;t=fh(t)}return null}function A7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function fm(e){return["html","body","#document"].includes(a_(e))}function bl(e){return Ha(e).getComputedStyle(e)}function UR(e){return ni(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function fh(e){if(a_(e)==="html")return e;const t=e.assignedSlot||e.parentNode||b4(e)&&e.host||Ph(e);return b4(t)?t.host:t}function kfe(e){const t=fh(e);return fm(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ru(t)&&CT(t)?t:kfe(t)}function Yd(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=kfe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Ha(i);return s?t.concat(o,o.visualViewport||[],CT(i)?i:[],o.frameElement&&n?Yd(o.frameElement):[]):t.concat(i,Yd(i,[],n))}function gQ(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function uS(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&b4(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Rfe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Pfe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function KOe(e){return JOe()?!1:!yQ()&&e.width===0&&e.height===0||yQ()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function XOe(){return/apple/i.test(navigator.vendor)}function yQ(){const e=/android/i;return e.test(Rfe())||e.test(Pfe())}function QOe(){return Rfe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function JOe(){return Pfe().includes("jsdom/")}function _4(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function ZOe(e){return"nativeEvent"in e}function eMe(e){return e.matches("html,body")}function t0(e){return(e==null?void 0:e.ownerDocument)||document}function F$(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function R1(e){return"composedPath"in e?e.composedPath()[0]:e.target}const tMe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function nMe(e){return Ru(e)&&e.matches(tMe)}const bu=Math.min,Co=Math.max,zI=Math.round,OC=Math.floor,dm=e=>({x:e,y:e}),rMe={left:"right",right:"left",bottom:"top",top:"bottom"},iMe={start:"end",end:"start"};function E4(e,t,n){return Co(e,bu(t,n))}function dh(e,t){return typeof e=="function"?e(t):e}function Sc(e){return e.split("-")[0]}function u_(e){return e.split("-")[1]}function D7(e){return e==="x"?"y":"x"}function I7(e){return e==="y"?"height":"width"}function by(e){return["top","bottom"].includes(Sc(e))?"y":"x"}function N7(e){return D7(by(e))}function sMe(e,t,n){n===void 0&&(n=!1);const r=u_(e),i=N7(e),s=I7(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=UI(o)),[o,UI(o)]}function oMe(e){const t=UI(e);return[w4(e),t,w4(t)]}function w4(e){return e.replace(/start|end/g,t=>iMe[t])}function aMe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function uMe(e,t,n,r){const i=u_(e);let s=aMe(Sc(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(w4)))),s}function UI(e){return e.replace(/left|right|bottom|top/g,t=>rMe[t])}function lMe(e){return{top:0,right:0,bottom:0,left:0,...e}}function k7(e){return typeof e!="number"?lMe(e):{top:e,right:e,bottom:e,left:e}}function Zv(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function vQ(e,t,n){let{reference:r,floating:i}=e;const s=by(t),o=N7(t),a=I7(o),u=Sc(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(u_(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const cMe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=vQ(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:E,reset:_}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...E}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(l=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:f}=vQ(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function R7(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=dh(t,e),p=k7(h),g=a[d?f==="floating"?"reference":"floating":f],y=Zv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Zv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-_.top+p.top)/E.y,bottom:(_.bottom-y.bottom+p.bottom)/E.y,left:(y.left-_.left+p.left)/E.x,right:(_.right-y.right+p.right)/E.x}}const fMe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=dh(e,t)||{};if(l==null)return{};const f=k7(c),d={x:n,y:r},h=N7(i),p=I7(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],_=d[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=x?x[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(x)))&&(S=a.floating[b]||s.floating[p]);const C=E/2-_/2,A=S/2-m[p]/2-1,D=bu(f[y],A),I=bu(f[v],A),O=D,R=S-m[p]-I,M=S/2-m[p]/2+C,F=E4(O,M,R),P=!u.arrow&&u_(i)!=null&&M!==F&&s.reference[p]/2-(M<O?D:I)-m[p]/2<0,j=P?M<O?M-O:M-R:0;return{[h]:d[h]+j,data:{[h]:F,centerOffset:M-F-j,...P&&{alignmentOffset:j}},reset:P}}}),dMe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=dh(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Sc(i),v=Sc(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(v||!m?[UI(a)]:oMe(a));!d&&p!=="none"&&E.push(...uMe(a,m,p,b));const _=[a,...E],x=await R7(t,g),S=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(x[y]),f){const O=sMe(i,o,b);S.push(x[O[0]],x[O[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(O=>O<=0)){var A,D;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,R=_[O];if(R)return{data:{index:O,overflows:C},reset:{placement:R}};let M=(D=C.filter(F=>F.overflows[0]<=0).sort((F,P)=>F.overflows[1]-P.overflows[1])[0])==null?void 0:D.placement;if(!M)switch(h){case"bestFit":{var I;const F=(I=C.map(P=>[P.placement,P.overflows.filter(j=>j>0).reduce((j,z)=>j+z,0)]).sort((P,j)=>P[1]-j[1])[0])==null?void 0:I[0];F&&(M=F);break}case"initialPlacement":M=a;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function Ofe(e){const t=bu(...e.map(s=>s.left)),n=bu(...e.map(s=>s.top)),r=Co(...e.map(s=>s.right)),i=Co(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function hMe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Zv(Ofe(i)))}const pMe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=dh(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=hMe(c),d=Zv(Ofe(c)),h=k7(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(by(n)==="y"){const D=f[0],I=f[f.length-1],O=Sc(n)==="top",R=D.top,M=I.bottom,F=O?D.left:I.left,P=O?D.right:I.right,j=P-F,z=M-R;return{top:R,bottom:M,left:F,right:P,width:j,height:z,x:F,y:R}}const g=Sc(n)==="left",y=Co(...f.map(D=>D.right)),v=bu(...f.map(D=>D.left)),b=f.filter(D=>g?D.left===v:D.right===y),E=b[0].top,_=b[b.length-1].bottom,x=v,S=y,C=S-x,A=_-E;return{top:E,bottom:_,left:x,right:S,width:C,height:A,x,y:E}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function mMe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Sc(n),a=u_(n),u=by(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=dh(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const gMe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await mMe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},yMe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=dh(e,t),l={x:n,y:r},c=await R7(t,u),f=by(Sc(i)),d=D7(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=E4(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=E4(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},vMe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=dh(e,t),c={x:n,y:r},f=by(i),d=D7(f);let h=c[d],p=c[f];const m=dh(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",E=s.reference[d]-s.floating[b]+g.mainAxis,_=s.reference[d]+s.reference[b]-g.mainAxis;h<E?h=E:h>_&&(h=_)}if(l){var y,v;const b=d==="y"?"width":"height",E=["top","left"].includes(Sc(i)),_=s.reference[f]-s.floating[b]+(E&&((y=o.offset)==null?void 0:y[f])||0)+(E?0:g.crossAxis),x=s.reference[f]+s.reference[b]+(E?0:((v=o.offset)==null?void 0:v[f])||0)-(E?g.crossAxis:0);p<_?p=_:p>x&&(p=x)}return{[d]:h,[f]:p}}}},bMe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=dh(e,t),u=await R7(t,a),l=Sc(n),c=u_(n),f=by(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=bu(h-u[p],g),b=bu(d-u[m],y),E=!t.middlewareData.shift;let _=v,x=b;if(f?x=c||E?bu(b,y):y:_=c||E?bu(v,g):g,E&&!c){const C=Co(u.left,0),A=Co(u.right,0),D=Co(u.top,0),I=Co(u.bottom,0);f?x=d-2*(C!==0||A!==0?C+A:Co(u.left,u.right)):_=h-2*(D!==0||I!==0?D+I:Co(u.top,u.bottom))}await o({...t,availableWidth:x,availableHeight:_});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Mfe(e){const t=bl(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ru(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=zI(n)!==s||zI(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function P7(e){return ni(e)?e:e.contextElement}function Ev(e){const t=P7(e);if(!Ru(t))return dm(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Mfe(t);let o=(s?zI(n.width):n.width)/r,a=(s?zI(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _Me=dm(0);function $fe(e){const t=Ha(e);return!A7()||!t.visualViewport?_Me:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function EMe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ha(e)?!1:t}function k0(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=P7(e);let o=dm(1);t&&(r?ni(r)&&(o=Ev(r)):o=Ev(e));const a=EMe(s,n,r)?$fe(s):dm(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Ha(s),h=r&&ni(r)?Ha(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Ev(m),y=m.getBoundingClientRect(),v=bl(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,E=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=E,p=Ha(m),m=p.frameElement}}return Zv({width:c,height:f,x:u,y:l})}const wMe=[":popover-open",":modal"];function O7(e){return wMe.some(t=>{try{return e.matches(t)}catch{return!1}})}function xMe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Ph(r),a=t?O7(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=dm(1);const c=dm(0),f=Ru(r);if((f||!f&&!s)&&((a_(r)!=="body"||CT(o))&&(u=UR(r)),Ru(r))){const d=k0(r);l=Ev(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function SMe(e){return Array.from(e.getClientRects())}function Ffe(e){return k0(Ph(e)).left+UR(e).scrollLeft}function TMe(e){const t=Ph(e),n=UR(e),r=e.ownerDocument.body,i=Co(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Co(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ffe(e);const a=-n.scrollTop;return bl(r).direction==="rtl"&&(o+=Co(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function CMe(e,t){const n=Ha(e),r=Ph(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=A7();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function AMe(e,t){const n=k0(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ru(e)?Ev(e):dm(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function bQ(e,t,n){let r;if(t==="viewport")r=CMe(e,n);else if(t==="document")r=TMe(Ph(e));else if(ni(t))r=AMe(t,n);else{const i=$fe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Zv(r)}function Lfe(e,t){const n=fh(e);return n===t||!ni(n)||fm(n)?!1:bl(n).position==="fixed"||Lfe(n,t)}function DMe(e,t){const n=t.get(e);if(n)return n;let r=Yd(e,[],!1).filter(a=>ni(a)&&a_(a)!=="body"),i=null;const s=bl(e).position==="fixed";let o=s?fh(e):e;for(;ni(o)&&!fm(o);){const a=bl(o),u=C7(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||CT(o)&&!u&&Lfe(e,o))?r=r.filter(c=>c!==o):i=a,o=fh(o)}return t.set(e,r),r}function IMe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?O7(t)?[]:DMe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=bQ(t,c,i);return l.top=Co(f.top,l.top),l.right=bu(f.right,l.right),l.bottom=bu(f.bottom,l.bottom),l.left=Co(f.left,l.left),l},bQ(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function NMe(e){const{width:t,height:n}=Mfe(e);return{width:t,height:n}}function kMe(e,t,n){const r=Ru(t),i=Ph(t),s=n==="fixed",o=k0(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=dm(0);if(r||!r&&!s)if((a_(t)!=="body"||CT(i))&&(a=UR(t)),r){const f=k0(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Ffe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function L$(e){return bl(e).position==="static"}function _Q(e,t){return!Ru(e)||bl(e).position==="fixed"?null:t?t(e):e.offsetParent}function Bfe(e,t){const n=Ha(e);if(O7(e))return n;if(!Ru(e)){let i=fh(e);for(;i&&!fm(i);){if(ni(i)&&!L$(i))return i;i=fh(i)}return n}let r=_Q(e,t);for(;r&&GOe(r)&&L$(r);)r=_Q(r,t);return r&&fm(r)&&L$(r)&&!C7(r)?n:r||YOe(e)||n}const RMe=async function(e){const t=this.getOffsetParent||Bfe,n=this.getDimensions,r=await n(e.floating);return{reference:kMe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function PMe(e){return bl(e).direction==="rtl"}const OMe={convertOffsetParentRelativeRectToViewportRelativeRect:xMe,getDocumentElement:Ph,getClippingRect:IMe,getOffsetParent:Bfe,getElementRects:RMe,getClientRects:SMe,getDimensions:NMe,getScale:Ev,isElement:ni,isRTL:PMe};function MMe(e,t){let n=null,r;const i=Ph(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=OC(c),p=OC(i.clientWidth-(l+f)),m=OC(i.clientHeight-(c+d)),g=OC(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Co(0,bu(1,u))||1};let b=!0;function E(_){const x=_[0].intersectionRatio;if(x!==u){if(!b)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(e)}return o(!0),s}function $Me(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=P7(e),c=i||s?[...l?Yd(l):[],...Yd(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?MMe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?k0(e):null;u&&g();function g(){const y=k0(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const FMe=gMe,LMe=yMe,BMe=dMe,jMe=bMe,EQ=fMe,zMe=pMe,UMe=vMe,VMe=(e,t,n)=>{const r=new Map,i={platform:OMe,...n},s={...i.platform,_c:r};return cMe(e,t,{...i,platform:s})};var pD=typeof document<"u"?k.useLayoutEffect:k.useEffect;function VI(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!VI(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!VI(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function jfe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wQ(e,t){const n=jfe(e);return Math.round(t*n)/n}function xQ(e){const t=k.useRef(e);return pD(()=>{t.current=e}),t}function HMe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=k.useState(r);VI(d,r)||h(r);const[p,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(j=>{j!==x.current&&(x.current=j,m(j))},[]),b=k.useCallback(j=>{j!==S.current&&(S.current=j,y(j))},[]),E=s||p,_=o||g,x=k.useRef(null),S=k.useRef(null),C=k.useRef(c),A=u!=null,D=xQ(u),I=xQ(i),O=k.useCallback(()=>{if(!x.current||!S.current)return;const j={placement:t,strategy:n,middleware:d};I.current&&(j.platform=I.current),VMe(x.current,S.current,j).then(z=>{const V={...z,isPositioned:!0};R.current&&!VI(C.current,V)&&(C.current=V,xT.flushSync(()=>{f(V)}))})},[d,t,n,I]);pD(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(j=>({...j,isPositioned:!1})))},[l]);const R=k.useRef(!1);pD(()=>(R.current=!0,()=>{R.current=!1}),[]),pD(()=>{if(E&&(x.current=E),_&&(S.current=_),E&&_){if(D.current)return D.current(E,_,O);O()}},[E,_,O,D,A]);const M=k.useMemo(()=>({reference:x,floating:S,setReference:v,setFloating:b}),[v,b]),F=k.useMemo(()=>({reference:E,floating:_}),[E,_]),P=k.useMemo(()=>{const j={position:n,left:0,top:0};if(!F.floating)return j;const z=wQ(F.floating,c.x),V=wQ(F.floating,c.y);return a?{...j,transform:"translate("+z+"px, "+V+"px)",...jfe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:V}},[n,a,F.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:O,refs:M,elements:F,floatingStyles:P}),[c,O,M,F,P])}const qMe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?EQ({element:r.current,padding:i}).fn(n):{}:r?EQ({element:r,padding:i}).fn(n):{}}}},zfe=(e,t)=>({...FMe(e),options:[e,t]}),M7=(e,t)=>({...LMe(e),options:[e,t]}),SQ=(e,t)=>({...UMe(e),options:[e,t]}),x4=(e,t)=>({...BMe(e),options:[e,t]}),WMe=(e,t)=>({...jMe(e),options:[e,t]}),S4=(e,t)=>({...zMe(e),options:[e,t]}),Ufe=(e,t)=>({...qMe(e),options:[e,t]}),Vfe={...cI},GMe=Vfe.useInsertionEffect,YMe=GMe||(e=>e());function bp(e){const t=k.useRef(()=>{});return YMe(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var bf=typeof document<"u"?k.useLayoutEffect:k.useEffect;let TQ=!1,KMe=0;const CQ=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+KMe++;function XMe(){const[e,t]=k.useState(()=>TQ?CQ():void 0);return bf(()=>{e==null&&t(CQ())},[]),k.useEffect(()=>{TQ=!0},[]),e}const QMe=Vfe.useId,Hfe=QMe||XMe;function JMe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const ZMe=k.createContext(null),e$e=k.createContext(null),$7=()=>{var e;return((e=k.useContext(ZMe))==null?void 0:e.id)||null},F7=()=>k.useContext(e$e);function L7(e){return"data-floating-ui-"+e}function AQ(e){const t=k.useRef(e);return bf(()=>{t.current=e}),t}const DQ=L7("safe-polygon");function mD(e,t,n){return n&&!_4(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function t$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=F7(),m=$7(),g=AQ(c),y=AQ(l),v=k.useRef(),b=k.useRef(-1),E=k.useRef(),_=k.useRef(-1),x=k.useRef(!0),S=k.useRef(!1),C=k.useRef(()=>{}),A=k.useCallback(()=>{var R;const M=(R=i.current.openEvent)==null?void 0:R.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[i]);k.useEffect(()=>{if(!u)return;function R(M){let{open:F}=M;F||(clearTimeout(b.current),clearTimeout(_.current),x.current=!0)}return s.on("openchange",R),()=>{s.off("openchange",R)}},[u,s]),k.useEffect(()=>{if(!u||!g.current||!n)return;function R(F){A()&&r(!1,F,"hover")}const M=t0(a).documentElement;return M.addEventListener("mouseleave",R),()=>{M.removeEventListener("mouseleave",R)}},[a,n,r,u,g,A]);const D=k.useCallback(function(R,M,F){M===void 0&&(M=!0),F===void 0&&(F="hover");const P=mD(y.current,"close",v.current);P&&!E.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,R,F),P)):M&&(clearTimeout(b.current),r(!1,R,F))},[y,r]),I=bp(()=>{C.current(),E.current=void 0}),O=bp(()=>{if(S.current){const R=t0(a).body;R.style.pointerEvents="",R.removeAttribute(DQ),S.current=!1}});return k.useEffect(()=>{if(!u)return;function R(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function M(j){if(clearTimeout(b.current),x.current=!1,f&&!_4(v.current)||d>0&&!mD(y.current,"open"))return;const z=mD(y.current,"open",v.current);z?b.current=window.setTimeout(()=>{r(!0,j,"hover")},z):r(!0,j,"hover")}function F(j){if(R())return;C.current();const z=t0(a);if(clearTimeout(_.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),E.current=g.current({...i.current.floatingContext,tree:p,x:j.clientX,y:j.clientY,onClose(){O(),I(),D(j,!0,"safe-polygon")}});const $=E.current;z.addEventListener("mousemove",$),C.current=()=>{z.removeEventListener("mousemove",$)};return}(v.current==="touch"?!uS(a,j.relatedTarget):!0)&&D(j)}function P(j){R()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:j.clientX,y:j.clientY,onClose(){O(),I(),D(j)}})(j))}if(ni(o)){const j=o;return n&&j.addEventListener("mouseleave",P),a==null||a.addEventListener("mouseleave",P),h&&j.addEventListener("mousemove",M,{once:!0}),j.addEventListener("mouseenter",M),j.addEventListener("mouseleave",F),()=>{n&&j.removeEventListener("mouseleave",P),a==null||a.removeEventListener("mouseleave",P),h&&j.removeEventListener("mousemove",M),j.removeEventListener("mouseenter",M),j.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,D,I,O,r,n,p,y,g,i]),bf(()=>{var R;if(u&&n&&(R=g.current)!=null&&R.__options.blockPointerEvents&&A()){const F=t0(a).body;if(F.setAttribute(DQ,""),F.style.pointerEvents="none",S.current=!0,ni(o)&&a){var M;const P=o,j=p==null||(M=p.nodesRef.current.find(z=>z.id===m))==null||(M=M.context)==null?void 0:M.elements.floating;return j&&(j.style.pointerEvents=""),P.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{P.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),bf(()=>{n||(v.current=void 0,I(),O())},[n,I,O]),k.useEffect(()=>()=>{I(),clearTimeout(b.current),clearTimeout(_.current),O()},[u,o,I,O]),k.useMemo(()=>{if(!u)return{};function R(M){v.current=M.pointerType}return{reference:{onPointerDown:R,onPointerEnter:R,onMouseMove(M){function F(){x.current||r(!0,M.nativeEvent,"hover")}f&&!_4(v.current)||n||d===0||(clearTimeout(_.current),v.current==="touch"?F():_.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(M){D(M.nativeEvent,!1)}}}},[u,f,n,d,r,D])}const T4=()=>{},qfe=k.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:T4,setState:T4,isInstantPhase:!1}),Wfe=()=>k.useContext(qfe);function n$e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=k.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=k.useRef(null),a=k.useCallback(u=>{s({currentId:u})},[]);return bf(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),k.createElement(qfe.Provider,{value:k.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function r$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Wfe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return bf(()=>{u&&(f({delay:{open:1,close:mD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),bf(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),bf(()=>{l===T4||!n||l(o)},[n,l,o]),a}function B$(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const i$e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},s$e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},IQ=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function o$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=F7(),v=bp(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,E=k.useRef(!1),_=k.useRef(!1),{escapeKey:x,outsidePress:S}=IQ(m),{escapeKey:C,outsidePress:A}=IQ(g),D=bp(M=>{var F;if(!n||!u||!l||M.key!=="Escape")return;const P=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y?B$(y.nodesRef.current,P):[];if(!x&&(M.stopPropagation(),j.length>0)){let z=!0;if(j.forEach(V=>{var $;if(($=V.context)!=null&&$.open&&!V.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,ZOe(M)?M.nativeEvent:M,"escape-key")}),I=bp(M=>{var F;const P=()=>{var j;D(M),(j=R1(M))==null||j.removeEventListener("keydown",P)};(F=R1(M))==null||F.addEventListener("keydown",P)}),O=bp(M=>{var F;const P=E.current;E.current=!1;const j=_.current;if(_.current=!1,f==="click"&&j||P||typeof b=="function"&&!b(M))return;const z=R1(M),V="["+L7("inert")+"]",$=t0(o).querySelectorAll(V);let U=ni(z)?z:null;for(;U&&!fm(U);){const Y=fh(U);if(fm(Y)||!ni(Y))break;U=Y}if($.length&&ni(z)&&!eMe(z)&&!uS(z,o)&&Array.from($).every(Y=>!uS(U,Y)))return;if(Ru(z)&&o){const Y=z.clientWidth>0&&z.scrollWidth>z.clientWidth,re=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let pe=re&&M.offsetX>z.clientWidth;if(re&&bl(z).direction==="rtl"&&(pe=M.offsetX<=z.offsetWidth-z.clientWidth),pe||Y&&M.offsetY>z.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y&&B$(y.nodesRef.current,W).some(Y=>{var re;return F$(M,(re=Y.context)==null?void 0:re.elements.floating)});if(F$(M,o)||F$(M,s)||B)return;const q=y?B$(y.nodesRef.current,W):[];if(q.length>0){let Y=!0;if(q.forEach(re=>{var pe;if((pe=re.context)!=null&&pe.open&&!re.context.dataRef.current.__outsidePressBubbles){Y=!1;return}}),!Y)return}r(!1,M,"outside-press")}),R=bp(M=>{var F;const P=()=>{var j;O(M),(j=R1(M))==null||j.removeEventListener(f,P)};(F=R1(M))==null||F.addEventListener(f,P)});return k.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=x,a.current.__outsidePressBubbles=S;function M(j){r(!1,j,"ancestor-scroll")}const F=t0(o);l&&F.addEventListener("keydown",C?I:D,C),b&&F.addEventListener(f,A?R:O,A);let P=[];return p&&(ni(s)&&(P=Yd(s)),ni(o)&&(P=P.concat(Yd(o))),!ni(i)&&i&&i.contextElement&&(P=P.concat(Yd(i.contextElement)))),P=P.filter(j=>{var z;return j!==((z=F.defaultView)==null?void 0:z.visualViewport)}),P.forEach(j=>{j.addEventListener("scroll",M,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?I:D,C),b&&F.removeEventListener(f,A?R:O,A),P.forEach(j=>{j.removeEventListener("scroll",M)})}},[a,o,s,i,l,b,f,n,r,p,u,x,S,D,C,I,O,A,R]),k.useEffect(()=>{E.current=!1},[b,f]),k.useMemo(()=>u?{reference:{onKeyDown:D,[i$e[h]]:M=>{d&&r(!1,M.nativeEvent,"reference-press")}},floating:{onKeyDown:D,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[s$e[f]]:()=>{E.current=!0}}}:{},[u,d,f,h,r,D])}function a$e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Hfe(),s=k.useRef({}),[o]=k.useState(()=>JMe()),a=$7()!=null,[u,l]=k.useState(r.reference),c=bp((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=k.useMemo(()=>({setPositionReference:l}),[]),d=k.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return k.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function B7(e){e===void 0&&(e={});const{nodeId:t}=e,n=a$e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=k.useState(null),[a,u]=k.useState(null),c=(i==null?void 0:i.reference)||s,f=k.useRef(null),d=F7();bf(()=>{c&&(f.current=c)},[c]);const h=HMe({...e,elements:{...i,...a&&{reference:a}}}),p=k.useCallback(b=>{const E=ni(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(E),h.refs.setReference(E)},[h.refs]),m=k.useCallback(b=>{(ni(b)||b===null)&&(f.current=b,o(b)),(ni(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!ni(b))&&h.refs.setReference(b)},[h.refs]),g=k.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=k.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=k.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return bf(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);b&&(b.context=v)}),k.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function u$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=k.useRef(!1),c=k.useRef(),f=k.useRef(!0);return k.useEffect(()=>{if(!a)return;const d=Ha(o);function h(){!n&&Ru(o)&&o===gQ(t0(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),k.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),k.useEffect(()=>()=>{clearTimeout(c.current)},[]),k.useMemo(()=>a?{reference:{onPointerDown(d){KOe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=R1(d.nativeEvent);if(u&&ni(h))try{if(XOe()&&QOe())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!nMe(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=ni(h)&&h.hasAttribute(L7("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=gQ(o?o.ownerDocument:document);!h&&g===o||uS((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||uS(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const NQ="active",kQ="selected";function j$(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[NQ]:o,[kQ]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[NQ,kQ].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function l$e(e){e===void 0&&(e=[]);const t=e,n=k.useCallback(s=>j$(s,e,"reference"),t),r=k.useCallback(s=>j$(s,e,"floating"),t),i=k.useCallback(s=>j$(s,e,"item"),e.map(s=>s==null?void 0:s.item));return k.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const c$e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function f$e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=c$e.get(o))!=null?n:o,u=Hfe(),c=$7()!=null;return k.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Gfe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function RQ(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function PQ(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const d$e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function h$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ne(t),height:Ne(t),transform:"rotate(45deg)",position:"absolute",[d$e[u]]:Ne(r)},f=Ne(-t/2);return u==="left"?{...c,...RQ(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...RQ(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...PQ(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...PQ(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const j7=k.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Rh();return s?w.jsx("div",{...l,ref:c,style:{...u,...h$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});j7.displayName="@mantine/core/FloatingArrow";const[p$e,Yfe]=Ps("Popover component was not found in the tree");function VR({children:e,active:t=!0,refProp:n="ref"}){const r=o3e(t),i=ds(r,e==null?void 0:e.ref);return Um(e)?k.cloneElement(e,{[n]:i}):e}function Kfe(e){return w.jsx(T7,{tabIndex:-1,"data-autofocus":!0,...e})}VR.displayName="@mantine/core/FocusTrap";Kfe.displayName="@mantine/core/FocusTrapInitialFocus";VR.InitialFocus=Kfe;function m$e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const g$e={},Xfe=k.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ie("Portal",g$e,e),[s,o]=k.useState(!1),a=k.useRef(null);return my(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:m$e(i),h7(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:xT.createPortal(w.jsx(w.Fragment,{children:n}),a.current)});Xfe.displayName="@mantine/core/Portal";function AT({withinPortal:e=!0,children:t,...n}){return e?w.jsx(Xfe,{...n,children:t}):w.jsx(w.Fragment,{children:t})}AT.displayName="@mantine/core/OptionalPortal";const bE=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ne(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),MC={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ne(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ne(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ne(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ne(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ne(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ne(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ne(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ne(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...bE("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...bE("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...bE("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...bE("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...bE("top"),common:{transformOrigin:"top right"}}},OQ={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function y$e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in MC?{transitionProperty:MC[e].transitionProperty,...i,...MC[e].common,...MC[e][OQ[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[OQ[t]]}}function v$e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Os(),l=p7(),c=u.respectReducedMotion?l:!1,[f,d]=k.useState(c?0:e),[h,p]=k.useState(r?"entered":"exited"),m=k.useRef(-1),g=k.useRef(-1),y=v=>{const b=v?i:s,E=v?o:a;window.clearTimeout(m.current);const _=c?0:v?e:t;d(_),_===0?(typeof b=="function"&&b(),typeof E=="function"&&E(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{rPe.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof E=="function"&&E(),p(v?"entered":"exited")},_)})})};return ch(()=>{y(r)},[r]),k.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Oh({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=v$e({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?w.jsx(w.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:w.jsx(w.Fragment,{children:s(y$e({transition:t,duration:f,state:d,timingFunction:h}))})}Oh.displayName="@mantine/core/Transition";var Qfe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const b$e={},z7=Ve((e,t)=>{var g,y,v,b;const n=Ie("PopoverDropdown",b$e,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Yfe(),h=efe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ds(t,d.floating);return d.disabled?null:w.jsx(AT,{...d.portalProps,withinPortal:d.withinPortal,children:w.jsx(Oh,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:E=>w.jsx(VR,{active:d.trapFocus,children:w.jsxs(we,{...p,...f,variant:u,ref:m,onKeyDownCapture:GPe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ne(d.width)},i]}),children:[o,w.jsx(j7,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});z7.classes=Qfe;z7.displayName="@mantine/core/PopoverDropdown";const _$e={refProp:"ref",popupType:"dialog"},Jfe=Ve((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ie("PopoverTarget",_$e,e);if(!Um(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Yfe(),u=ds(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return k.cloneElement(n,{...o,...l,...a.targetProps,className:Ai(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Jfe.displayName="@mantine/core/PopoverTarget";function Zfe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=k.useState(0);k.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return $Me(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),ch(()=>{t.update()},r),ch(()=>{s(o=>o+1)},[e])}function E$e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function w$e(e,t){const n=E$e(e.middlewares),r=[zfe(e.offset)];return n.shift&&r.push(M7(typeof n.shift=="boolean"?{limiter:SQ(),padding:5}:{limiter:SQ(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?x4():x4(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?S4():S4(n.inline)),r.push(Ufe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(WMe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function x$e(e){const[t,n]=ks({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=B7({strategy:e.strategy,placement:e.position,middleware:w$e(e,()=>s)});return Zfe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),ch(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),ch(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const S$e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Dl("popover"),__staticSelector:"Popover",width:"max-content"},T$e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Kr(t),"--popover-shadow":f7(n)}});function Rr(e){var Pe,Be,Xe,mt,Ft,bt;const t=Ie("Popover",S$e,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:E,portalProps:_,closeOnEscape:x,clickOutsideEvents:S,trapFocus:C,onClose:A,onOpen:D,onChange:I,zIndex:O,radius:R,shadow:M,id:F,defaultOpened:P,__staticSelector:j,withRoles:z,disabled:V,returnFocus:$,variant:U,keepMounted:W,vars:B,floatingStrategy:q,...Y}=t,re=Et({name:j,props:t,classes:Qfe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:B,varsResolver:T$e}),pe=k.useRef(null),[_e,de]=k.useState(null),[ye,Ce]=k.useState(null),{dir:ve}=Rh(),qe=ya(F),He=x$e({middlewares:c,width:l,position:Gfe(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:pe,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:P,onChange:I,onOpen:D,onClose:A,strategy:q});XPe(()=>b&&He.onClose(),S,[_e,ye]);const ht=k.useCallback(G=>{de(G),He.floating.refs.setReference(G)},[He.floating.refs.setReference]),rt=k.useCallback(G=>{Ce(G),He.floating.refs.setFloating(G)},[He.floating.refs.setFloating]);return w.jsx(p$e,{value:{returnFocus:$,disabled:V,controlled:He.controlled,reference:ht,floating:rt,x:He.floating.x,y:He.floating.y,arrowX:(Xe=(Be=(Pe=He.floating)==null?void 0:Pe.middlewareData)==null?void 0:Be.arrow)==null?void 0:Xe.x,arrowY:(bt=(Ft=(mt=He.floating)==null?void 0:mt.middlewareData)==null?void 0:Ft.arrow)==null?void 0:bt.y,opened:He.opened,arrowRef:pe,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:He.floating.placement,trapFocus:C,withinPortal:E,portalProps:_,zIndex:O,radius:R,shadow:M,closeOnEscape:x,onClose:He.onClose,onToggle:He.onToggle,getTargetId:()=>`${qe}-target`,getDropdownId:()=>`${qe}-dropdown`,withRoles:z,targetProps:Y,__staticSelector:j,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:re},children:n})}Rr.Target=Jfe;Rr.Dropdown=z7;Rr.displayName="@mantine/core/Popover";Rr.extend=e=>e;var oc={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const C$e=k.forwardRef(({className:e,...t},n)=>w.jsxs(we,{component:"span",className:Ai(oc.barsLoader,e),...t,ref:n,children:[w.jsx("span",{className:oc.bar}),w.jsx("span",{className:oc.bar}),w.jsx("span",{className:oc.bar})]})),A$e=k.forwardRef(({className:e,...t},n)=>w.jsxs(we,{component:"span",className:Ai(oc.dotsLoader,e),...t,ref:n,children:[w.jsx("span",{className:oc.dot}),w.jsx("span",{className:oc.dot}),w.jsx("span",{className:oc.dot})]})),D$e=k.forwardRef(({className:e,...t},n)=>w.jsx(we,{component:"span",className:Ai(oc.ovalLoader,e),...t,ref:n})),ede={bars:C$e,oval:D$e,dots:A$e},I$e={loaders:ede,type:"oval"},N$e=(e,{size:t,color:n})=>({root:{"--loader-size":cn(t,"loader-size"),"--loader-color":n?Gr(n,e):void 0}}),_y=Ve((e,t)=>{const n=Ie("Loader",I$e,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Et({name:"Loader",props:n,classes:oc,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:N$e});return p?w.jsx(we,{...g("root"),ref:t,...m,children:p}):w.jsx(we,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});_y.defaultLoaders=ede;_y.classes=oc;_y.displayName="@mantine/core/Loader";var HR={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const MQ={orientation:"horizontal"},k$e=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ne(t)}}),U7=Ve((e,t)=>{const n=Ie("ActionIconGroup",MQ,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ie("ActionIconGroup",MQ,e),p=Et({name:"ActionIconGroup",props:n,classes:HR,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:k$e,rootSelector:"group"});return w.jsx(we,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});U7.classes=HR;U7.displayName="@mantine/core/ActionIconGroup";const R$e={},P$e=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":cn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Kr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},hm=hs((e,t)=>{const n=Ie("ActionIcon",R$e,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:E,mod:_,...x}=n,S=Et({name:["ActionIcon",p],props:n,className:r,style:u,classes:HR,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:P$e});return w.jsxs(Yi,{...S("root",{active:!v&&!l&&!b}),...x,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},_],children:[w.jsx(Oh,{mounted:!!l,transition:"slide-down",duration:150,children:C=>w.jsx(we,{component:"span",...S("loader",{style:C}),"aria-hidden":!0,children:w.jsx(_y,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),w.jsx(we,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});hm.classes=HR;hm.displayName="@mantine/core/ActionIcon";hm.Group=U7;const tde=k.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));tde.displayName="@mantine/core/CloseIcon";var nde={root:"m_86a44da5","root--subtle":"m_220c80f2"};const O$e={variant:"subtle"},M$e=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":cn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Kr(n),"--cb-icon-size":Ne(r)}}),Hm=hs((e,t)=>{const n=Ie("CloseButton",O$e,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Et({name:"CloseButton",props:n,className:a,style:l,classes:nde,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:M$e});return w.jsxs(Yi,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||w.jsx(tde,{}),i]})});Hm.classes=nde;Hm.displayName="@mantine/core/CloseButton";function $$e(e){return k.Children.toArray(e).filter(Boolean)}var rde={root:"m_4081bf90"};const F$e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},L$e=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":ku(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),cs=Ve((e,t)=>{const n=Ie("Group",F$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,E=$$e(u),_=E.length,x=ku(l??"md"),C={childWidth:`calc(${100/_}% - (${x} - ${x} / ${_}))`},A=Et({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:rde,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:L$e});return w.jsx(we,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:E})});cs.classes=rde;cs.displayName="@mantine/core/Group";var ide={root:"m_9814e45f"};const B$e={zIndex:Dl("modal")},j$e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Qc(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ne(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Kr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),lS=hs((e,t)=>{const n=Ie("Overlay",B$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,E=Et({name:"Overlay",props:n,classes:ide,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:j$e});return w.jsx(we,{ref:t,...E("root"),mod:[{center:c,fixed:l},v],...b,children:f})});lS.classes=ide;lS.displayName="@mantine/core/Overlay";const[z$e,Mh]=Ps("ModalBase component was not found in tree");function U$e({opened:e,transitionDuration:t}){const[n,r]=k.useState(e),i=k.useRef(),o=p7()?0:t;return k.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function V$e({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ya(e),[u,l]=k.useState(!1),[c,f]=k.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=U$e({opened:n,transitionDuration:d});return ife("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),efe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const sde=k.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},E)=>{const{_id:_,titleMounted:x,bodyMounted:S,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:D}=V$e({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return w.jsx(AT,{...c,withinPortal:l,children:w.jsx(z$e,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${_}-title`,getBodyId:()=>`${_}-body`,titleMounted:x,bodyMounted:S,setTitleMounted:A,setBodyMounted:D,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:w.jsx($R,{enabled:C&&f,...v,children:w.jsx(we,{ref:E,...b,__vars:{...g,"--mb-z-index":(h||Dl("modal")).toString(),"--mb-shadow":f7(p),"--mb-padding":ku(m)},children:d})})})})});function H$e(){const e=Mh();return k.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var eb={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const V7=k.forwardRef(({className:e,...t},n)=>{const r=H$e(),i=Mh();return w.jsx(we,{ref:n,...t,id:r,className:Ai({[eb.body]:!i.unstyled},e)})});V7.displayName="@mantine/core/ModalBaseBody";const H7=k.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Mh();return w.jsx(Hm,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ai({[eb.close]:!i.unstyled},e),unstyled:i.unstyled})});H7.displayName="@mantine/core/ModalBaseCloseButton";const ode=k.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Mh();return w.jsx(Oh,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>w.jsx("div",{...n,className:Ai({[eb.inner]:!a.unstyled},n.className),children:w.jsx(VR,{active:a.opened&&a.trapFocus,children:w.jsx(zR,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ai({[eb.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),q7=k.forwardRef(({className:e,...t},n)=>{const r=Mh();return w.jsx(we,{component:"header",ref:n,className:Ai({[eb.header]:!r.unstyled},e),...t})});q7.displayName="@mantine/core/ModalBaseHeader";const q$e={duration:200,timingFunction:"ease",transition:"fade"};function W$e(e){const t=Mh();return{...q$e,...t.transitionProps,...e}}const W7=k.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Mh(),o=W$e(t);return w.jsx(Oh,{mounted:s.opened,...o,transition:"fade",children:a=>w.jsx(lS,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});W7.displayName="@mantine/core/ModalBaseOverlay";function G$e(){const e=Mh();return k.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const G7=k.forwardRef(({className:e,...t},n)=>{const r=G$e(),i=Mh();return w.jsx(we,{component:"h2",ref:n,className:Ai({[eb.title]:!i.unstyled},e),...t,id:r})});G7.displayName="@mantine/core/ModalBaseTitle";function ade({children:e}){return w.jsx(w.Fragment,{children:e})}const[Y$e,l_]=s_({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Nl={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const $Q={},K$e=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${eo(t)} - ${Ne(2)})`}}),qR=Ve((e,t)=>{const n=Ie("InputDescription",$Q,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ie("InputDescription",$Q,n),p=l_(),m=Et({name:["InputWrapper",c],props:n,classes:Nl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:K$e}),g=f&&(p==null?void 0:p.getStyles)||m;return w.jsx(we,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});qR.classes=Nl;qR.displayName="@mantine/core/InputDescription";const X$e={},Q$e=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${eo(t)} - ${Ne(2)})`}}),WR=Ve((e,t)=>{const n=Ie("InputError",X$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Et({name:["InputWrapper",c],props:n,classes:Nl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Q$e}),m=l_(),g=f&&(m==null?void 0:m.getStyles)||p;return w.jsx(we,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});WR.classes=Nl;WR.displayName="@mantine/core/InputError";const FQ={labelElement:"label"},J$e=(e,{size:t})=>({label:{"--input-label-size":eo(t),"--input-asterisk-color":void 0}}),GR=Ve((e,t)=>{const n=Ie("InputLabel",FQ,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Ie("InputLabel",FQ,n),b=Et({name:["InputWrapper",m],props:n,classes:Nl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:J$e}),E=l_(),_=(E==null?void 0:E.getStyles)||b;return w.jsxs(we,{..._("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:x=>{h==null||h(x),!x.defaultPrevented&&x.detail>1&&x.preventDefault()},...v,children:[p,f&&w.jsx("span",{..._("required"),"aria-hidden":!0,children:" *"})]})});GR.classes=Nl;GR.displayName="@mantine/core/InputLabel";const LQ={},Y7=Ve((e,t)=>{const n=Ie("InputPlaceholder",LQ,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ie("InputPlaceholder",LQ,n),p=Et({name:["InputPlaceholder",l],props:n,classes:Nl,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return w.jsx(we,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});Y7.classes=Nl;Y7.displayName="@mantine/core/InputPlaceholder";function Z$e(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const eFe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},tFe=(e,{size:t})=>({label:{"--input-label-size":eo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${eo(t)} - ${Ne(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${eo(t)} - ${Ne(2)})`}}),K7=Ve((e,t)=>{const n=Ie("InputWrapper",eFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:E,children:_,withAsterisk:x,id:S,required:C,__stylesApiProps:A,mod:D,...I}=n,O=Et({name:["InputWrapper",f],props:A||n,classes:Nl,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tFe}),R={size:l,variant:c,__staticSelector:f},M=ya(S),F=typeof x=="boolean"?x:C,P=(b==null?void 0:b.id)||`${M}-error`,j=(v==null?void 0:v.id)||`${M}-description`,z=M,V=!!m&&typeof m!="boolean",$=!!g,U=`${V?P:""} ${$?j:""}`,W=U.trim().length>0?U.trim():void 0,B=(y==null?void 0:y.id)||`${M}-label`,q=p&&w.jsx(GR,{labelElement:E,id:B,htmlFor:z,required:F,...R,...y,children:p},"label"),Y=$&&w.jsx(qR,{...v,...R,size:(v==null?void 0:v.size)||R.size,id:(v==null?void 0:v.id)||j,children:g},"description"),re=w.jsx(k.Fragment,{children:d(_)},"input"),pe=V&&k.createElement(WR,{...b,...R,size:(b==null?void 0:b.size)||R.size,key:"error",id:(b==null?void 0:b.id)||P},m),_e=h.map(de=>{switch(de){case"label":return q;case"input":return re;case"description":return Y;case"error":return pe;default:return null}});return w.jsx(Y$e,{value:{getStyles:O,describedBy:W,inputId:z,labelId:B,...Z$e(h,{hasDescription:$,hasError:V})},children:w.jsx(we,{ref:t,variant:c,size:l,mod:[{error:!!m},D],...O("root"),...I,children:_e})})});K7.classes=Nl;K7.displayName="@mantine/core/InputWrapper";const nFe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},rFe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":cn(t.size,"input-height"),"--input-fz":eo(t.size),"--input-radius":t.radius===void 0?void 0:Kr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ne(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ne(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?cn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Yr=hs((e,t)=>{const n=Ie("Input",nFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:E,rightSectionPointerEvents:_,leftSectionPointerEvents:x,variant:S,vars:C,pointer:A,multiline:D,radius:I,id:O,withAria:R,withErrorStyles:M,mod:F,inputSize:P,...j}=n,{styleProps:z,rest:V}=yy(j),$=l_(),U={offsetBottom:$==null?void 0:$.offsetBottom,offsetTop:$==null?void 0:$.offsetTop},W=Et({name:["Input",l],props:c||n,classes:Nl,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:C,varsResolver:rFe}),B=R?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":$==null?void 0:$.describedBy,id:($==null?void 0:$.inputId)||O}:{};return w.jsxs(we,{...W("wrapper"),...z,...d,mod:[{error:!!h&&M,pointer:A,disabled:p,multiline:D,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&w.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),w.jsx(we,{component:"input",...V,...B,ref:t,required:u,mod:{disabled:p,error:!!h&&M},variant:S,__size:P,...W("input")}),v&&w.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Yr.classes=Nl;Yr.Wrapper=K7;Yr.Label=GR;Yr.Error=WR;Yr.Description=qR;Yr.Placeholder=Y7;Yr.displayName="@mantine/core/Input";function ude(e,t,n){const r=Ie(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:E,inputContainer:_,inputWrapperOrder:x,withAsterisk:S,variant:C,vars:A,mod:D,...I}=r,{styleProps:O,rest:R}=yy(I),M={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:E,inputContainer:_,inputWrapperOrder:x,withAsterisk:S,variant:C,id:v,mod:D,...y};return{...R,classNames:u,styles:l,unstyled:f,wrapperProps:{...M,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const iFe={__staticSelector:"InputBase",withAria:!0},kl=hs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=ude("InputBase",iFe,e);return w.jsx(Yr.Wrapper,{...r,children:w.jsx(Yr,{...n,...i,ref:t})})});kl.classes={...Yr.classes,...Yr.Wrapper.classes};kl.displayName="@mantine/core/InputBase";const sFe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var lde={root:"m_8bffd616"};const oFe={},Jt=hs((e,t)=>{const n=Ie("Flex",oFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Et({name:"Flex",classes:lde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Os(),b=BR(),E=hfe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:sFe});return w.jsxs(w.Fragment,{children:[E.hasResponsiveStyles&&w.jsx(TT,{selector:`.${b}`,styles:E.styles,media:E.media}),w.jsx(we,{ref:t,...y("root",{className:b,style:i_(E.inlineStyles)}),...g})]})});Jt.classes=lde;Jt.displayName="@mantine/core/Flex";const[aFe,X7]=Ps("Accordion component was not found in the tree");function tb({style:e,size:t=16,...n}){return w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ne(t),height:Ne(t),display:"block"},...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}tb.displayName="@mantine/core/AccordionChevron";const[uFe,cde]=Ps("Accordion.Item component was not found in the tree");var DT={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const lFe={},Q7=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Ie("AccordionControl",lFe,e),{value:m}=cde(),g=X7(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,E=w.jsxs(Yi,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:_=>{l==null||l(_),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:c7({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[w.jsx(we,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),w.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&w.jsx(we,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?w.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});Q7.displayName="@mantine/core/AccordionControl";Q7.classes=DT;const cFe={},J7=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Ie("AccordionItem",cFe,e),c=X7();return w.jsx(uFe,{value:{value:a},children:w.jsx(we,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});J7.displayName="@mantine/core/AccordionItem";J7.classes=DT;const fFe={},Z7=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Ie("AccordionPanel",fFe,e),{value:l}=cde(),c=X7();return w.jsx(E7,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:w.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});Z7.displayName="@mantine/core/AccordionPanel";Z7.classes=DT;const dFe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:w.jsx(tb,{})},hFe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ne(n),"--accordion-radius":r===void 0?void 0:Kr(r)}});function Da(e){const t=Ie("Accordion",dFe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:E,variant:_,radius:x,...S}=t,C=ya(h),[A,D]=ks({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),I=M=>Array.isArray(A)?A.includes(M):M===A,O=M=>{const F=Array.isArray(A)?A.includes(M)?A.filter(P=>P!==M):[...A,M]:M===A?null:M;D(F)},R=Et({name:"Accordion",classes:DT,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:hFe});return w.jsx(aFe,{value:{isItemActive:I,onChange:O,getControlId:$I(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:$I(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:E,loop:p,getStyles:R,variant:_,unstyled:o},children:w.jsx(we,{...R("root"),id:C,...S,variant:_,"data-accordion":!0,children:u})})}const pFe=e=>e;Da.extend=pFe;Da.classes=DT;Da.displayName="@mantine/core/Accordion";Da.Item=J7;Da.Panel=Z7;Da.Control=Q7;Da.Chevron=tb;var fde={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const mFe={},gFe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Kr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},IT=Ve((e,t)=>{const n=Ie("Alert",mFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...E}=n,_=Et({name:"Alert",classes:fde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gFe}),x=ya(h),S=f&&`${x}-title`||void 0,C=`${x}-body`;return w.jsx(we,{id:x,..._("root",{variant:v}),variant:v,ref:t,...E,role:"alert","aria-describedby":C,"aria-labelledby":S,children:w.jsxs("div",{..._("wrapper"),children:[p&&w.jsx("div",{..._("icon"),children:p}),w.jsxs("div",{..._("body"),children:[f&&w.jsx("div",{..._("title"),"data-with-close-button":m||void 0,children:w.jsx("span",{id:S,..._("label"),children:f})}),d&&w.jsx("div",{id:C,..._("message"),"data-variant":v,children:d})]}),m&&w.jsx(Hm,{..._("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});IT.classes=fde;IT.displayName="@mantine/core/Alert";var dde={root:"m_b6d8b162"};function yFe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const vFe={inherit:!1},bFe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":eo(i),"--text-lh":Zce(i),"--text-gradient":t==="gradient"?g4(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Gr(s,e):void 0}}),Ze=hs((e,t)=>{const n=Ie("Text",vFe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,E=Et({name:["Text",l],props:n,classes:dde,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:bFe});return w.jsx(we,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":yFe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});Ze.classes=dde;Ze.displayName="@mantine/core/Text";var hde={root:"m_849cf0da"};const _Fe={underline:"hover"},c_=hs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ie("Anchor",_Fe,e);return w.jsx(Ze,{component:"a",ref:t,className:Ai({[hde.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});c_.classes=hde;c_.displayName="@mantine/core/Anchor";const[EFe,f_]=Ps("AppShell was not found in tree");var qm={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const wFe={},ej=Ve((e,t)=>{const n=Ie("AppShellAside",wFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:w.jsx(we,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});ej.classes=qm;ej.displayName="@mantine/core/AppShellAside";const xFe={},tj=Ve((e,t)=>{var p;const n=Ie("AppShellFooter",xFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:w.jsx(we,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ai({[$R.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});tj.classes=qm;tj.displayName="@mantine/core/AppShellFooter";const SFe={},nj=Ve((e,t)=>{var p;const n=Ie("AppShellHeader",SFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:w.jsx(we,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ai({[$R.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});nj.classes=qm;nj.displayName="@mantine/core/AppShellHeader";const TFe={},rj=Ve((e,t)=>{const n=Ie("AppShellMain",TFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=f_();return w.jsx(we,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});rj.classes=qm;rj.displayName="@mantine/core/AppShellMain";function NT(e){return typeof e=="object"?e.base:e}function kT(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function RT(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function CFe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),kT(s)){const f=Ne(NT(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(RT(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ne(s.base),e["--app-shell-aside-offset"]=Ne(s.base)),hi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ne(s[f]),t[f]["--app-shell-aside-offset"]=Ne(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=d7(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function AFe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(kT(r)){const o=Ne(NT(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}RT(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ne(r.base),s&&(e["--app-shell-footer-offset"]=Ne(r.base))),hi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ne(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ne(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function DFe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(kT(r)){const o=Ne(NT(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}RT(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ne(r.base),s&&(e["--app-shell-header-offset"]=Ne(r.base))),hi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ne(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ne(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function IFe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),kT(s)){const f=Ne(NT(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(RT(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ne(s.base),e["--app-shell-navbar-offset"]=Ne(s.base)),hi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ne(s[f]),t[f]["--app-shell-navbar-offset"]=Ne(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=d7(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function z$(e){return Number(e)===0?"0px":ku(e)}function NFe({padding:e,baseStyles:t,minMediaStyles:n}){kT(e)&&(t["--app-shell-padding"]=z$(NT(e))),RT(e)&&(e.base&&(t["--app-shell-padding"]=z$(e.base)),hi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=z$(e[r]))}))}function kFe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};IFe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),CFe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),DFe({baseStyles:u,minMediaStyles:o,header:t}),AFe({baseStyles:u,minMediaStyles:o,footer:n}),NFe({baseStyles:u,minMediaStyles:o,padding:i});const l=LI(hi(o),s).map(d=>({query:`(min-width: ${MI(d.px)})`,styles:o[d.value]})),c=LI(hi(a),s).map(d=>({query:`(max-width: ${MI(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function RFe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Os(),o=Vm(),{media:a,baseStyles:u}=kFe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return w.jsx(TT,{media:a,styles:u,selector:o.cssVariablesSelector})}const PFe={},ij=Ve((e,t)=>{const n=Ie("AppShellNavbar",PFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=f_();return h.disabled?null:w.jsx(we,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});ij.classes=qm;ij.displayName="@mantine/core/AppShellNavbar";const OFe={},sj=hs((e,t)=>{const n=Ie("AppShellSection",OFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=f_();return w.jsx(we,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});sj.classes=qm;sj.displayName="@mantine/core/AppShellSection";function MFe({transitionDuration:e,disabled:t}){const[n,r]=k.useState(!0),i=k.useRef(),s=k.useRef();return ife("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),my(()=>{k.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const $Fe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Dl("app")},FFe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Wr=Ve((e,t)=>{const n=Ie("AppShell",$Fe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:E,mod:_,...x}=n,S=Et({name:"AppShell",classes:qm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FFe}),C=MFe({disabled:y,transitionDuration:d});return w.jsxs(EFe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:E},children:[w.jsx(RFe,{navbar:l,header:p,aside:v,footer:b,padding:f}),w.jsx(we,{ref:t,...S("root"),mod:[{resizing:C,layout:g,disabled:y},_],...x})]})});Wr.classes=qm;Wr.displayName="@mantine/core/AppShell";Wr.Navbar=ij;Wr.Header=nj;Wr.Main=rj;Wr.Aside=ej;Wr.Footer=tj;Wr.Section=sj;function pde(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>pde(t))}:e}function mde(e){return e?e.map(t=>pde(t)):[]}function oj(e){return e.reduce((t,n)=>"group"in n?{...t,...oj(n.items)}:(t[n.value]=n,t),{})}var Ja={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const LFe={error:null},BFe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":cn(t,"combobox-chevron-size")}}),aj=Ve((e,t)=>{const n=Ie("ComboboxChevron",LFe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Et({name:"ComboboxChevron",classes:Ja,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:BFe,rootSelector:"chevron"});return w.jsx(we,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:w.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});aj.classes=Ja;aj.displayName="@mantine/core/ComboboxChevron";const[jFe,Rl]=Ps("Combobox component was not found in tree"),gde=k.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>w.jsx(Hm,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));gde.displayName="@mantine/core/ComboboxClearButton";const zFe={},uj=Ve((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ie("ComboboxDropdown",zFe,e),u=Rl();return w.jsx(Rr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});uj.classes=Ja;uj.displayName="@mantine/core/ComboboxDropdown";const UFe={refProp:"ref"},yde=Ve((e,t)=>{const{children:n,refProp:r}=Ie("ComboboxDropdownTarget",UFe,e);if(Rl(),!Um(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return w.jsx(Rr.Target,{ref:t,refProp:r,children:n})});yde.displayName="@mantine/core/ComboboxDropdownTarget";const VFe={},lj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ComboboxEmpty",VFe,e),u=Rl();return w.jsx(we,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});lj.classes=Ja;lj.displayName="@mantine/core/ComboboxEmpty";function cj({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Rl(),[a,u]=k.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const HFe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},vde=Ve((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ie("ComboboxEventsTarget",HFe,e);if(!Um(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Rl(),f=cj({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return k.cloneElement(n,{...f,...l,[r]:ds(t,c.store.targetRef,n==null?void 0:n.ref)})});vde.displayName="@mantine/core/ComboboxEventsTarget";const qFe={},fj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ComboboxFooter",qFe,e),u=Rl();return w.jsx(we,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});fj.classes=Ja;fj.displayName="@mantine/core/ComboboxFooter";const WFe={},dj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ie("ComboboxGroup",WFe,e),c=Rl();return w.jsxs(we,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&w.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});dj.classes=Ja;dj.displayName="@mantine/core/ComboboxGroup";const GFe={},hj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ComboboxHeader",GFe,e),u=Rl();return w.jsx(we,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});hj.classes=Ja;hj.displayName="@mantine/core/ComboboxHeader";function bde({value:e,valuesDivider:t=",",...n}){return w.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}bde.displayName="@mantine/core/ComboboxHiddenInput";const YFe={},pj=Ve((e,t)=>{const n=Ie("ComboboxOption",YFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Rl(),v=k.useId(),b=l||v;return w.jsx(we,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var _;h?E.preventDefault():((_=y.onOptionSubmit)==null||_.call(y,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(E)}})});pj.classes=Ja;pj.displayName="@mantine/core/ComboboxOption";const KFe={},mj=Ve((e,t)=>{const n=Ie("ComboboxOptions",KFe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Rl(),d=ya(a);return k.useEffect(()=>{f.store.setListId(d)},[d]),w.jsx(we,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});mj.classes=Ja;mj.displayName="@mantine/core/ComboboxOptions";const XFe={withAriaAttributes:!0,withKeyboardNavigation:!0},gj=Ve((e,t)=>{const n=Ie("ComboboxSearch",XFe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Rl(),h=d.getStyles("search"),p=cj({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return w.jsx(Yr,{ref:ds(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});gj.classes=Ja;gj.displayName="@mantine/core/ComboboxSearch";const QFe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},_de=Ve((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ie("ComboboxTarget",QFe,e);if(!Um(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Rl(),f=cj({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=k.cloneElement(n,{...f,...l});return w.jsx(Rr.Target,{ref:ds(t,c.store.targetRef),children:d})});_de.displayName="@mantine/core/ComboboxTarget";function JFe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function ZFe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function e6e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function yj({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ks({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=k.useRef(null),c=k.useRef(-1),f=k.useRef(null),d=k.useRef(null),h=k.useRef(-1),p=k.useRef(-1),m=k.useRef(-1),g=k.useCallback((P="unknown")=>{a||(u(!0),i==null||i(P))},[u,i,a]),y=k.useCallback((P="unknown")=>{a&&(u(!1),r==null||r(P))},[u,r,a]),v=k.useCallback((P="unknown")=>{a?y(P):g(P)},[y,g,a]),b=k.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-selected]`);P==null||P.removeAttribute("data-combobox-selected"),P==null||P.removeAttribute("aria-selected")},[]),E=k.useCallback(P=>{const j=document.getElementById(l.current),z=j==null?void 0:j.querySelectorAll("[data-combobox-option]");if(!z)return null;const V=P>=z.length?0:P<0?z.length-1:P;return c.current=V,z!=null&&z[V]&&!z[V].hasAttribute("data-combobox-disabled")?(b(),z[V].setAttribute("data-combobox-selected","true"),z[V].setAttribute("aria-selected","true"),z[V].scrollIntoView({block:"nearest",behavior:o}),z[V].id):null},[o,b]),_=k.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-active]`);if(P){const j=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=Array.from(j).findIndex(V=>V===P);return E(z)}return E(0)},[E]),x=k.useCallback(()=>E(ZFe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),S=k.useCallback(()=>E(JFe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),C=k.useCallback(()=>E(e6e(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),A=k.useCallback((P="selected",j)=>{m.current=window.setTimeout(()=>{var $;const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),V=Array.from(z).findIndex(U=>U.hasAttribute(`data-combobox-${P}`));c.current=V,j!=null&&j.scrollIntoView&&(($=z[V])==null||$.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),D=k.useCallback(()=>{c.current=-1,b()},[b]),I=k.useCallback(()=>{const P=document.querySelectorAll(`#${l.current} [data-combobox-option]`),j=P==null?void 0:P[c.current];j==null||j.click()},[]),O=k.useCallback(P=>{l.current=P},[]),R=k.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),M=k.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=k.useCallback(()=>c.current,[]);return k.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:E,selectFirstOption:C,selectActiveOption:_,selectNextOption:x,selectPreviousOption:S,resetSelectedOption:D,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:I,searchRef:f,focusSearchInput:R,targetRef:d,focusTarget:M}}const t6e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},n6e=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":eo(t),"--combobox-option-padding":cn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ne(n),"--combobox-option-fz":eo(t),"--combobox-option-padding":cn(t,"combobox-option-padding")}});function Bn(e){const t=Ie("Combobox",t6e,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=yj(),y=o||g,v=Et({name:h||"Combobox",classes:Ja,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:n6e}),b=()=>{l==null||l(),y.closeDropdown()};return w.jsx(jFe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:w.jsx(Rr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const r6e=e=>e;Bn.extend=r6e;Bn.classes=Ja;Bn.displayName="@mantine/core/Combobox";Bn.Target=_de;Bn.Dropdown=uj;Bn.Options=mj;Bn.Option=pj;Bn.Search=gj;Bn.Empty=lj;Bn.Chevron=aj;Bn.Footer=fj;Bn.Header=hj;Bn.EventsTarget=vde;Bn.DropdownTarget=yde;Bn.Group=dj;Bn.ClearButton=gde;Bn.HiddenInput=bde;var Ede={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const wde=Ede,YR=k.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...E},_)=>{const x=Et({name:e,props:t,className:n,style:y,classes:Ede,classNames:r,styles:i,unstyled:s});return w.jsx(we,{...x("root"),ref:_,__vars:{"--label-fz":eo(d),"--label-lh":cn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...E,children:w.jsxs(we,{component:p,htmlFor:p==="label"?l:void 0,...x("body"),children:[o,w.jsxs("div",{...x("labelWrapper"),"data-disabled":c||void 0,children:[a&&w.jsx(we,{component:m,htmlFor:m==="label"?l:void 0,...x("label"),"data-disabled":c||void 0,children:a}),u&&w.jsx(Yr.Description,{size:d,__inheritStyles:!1,...x("description"),children:u}),f&&typeof f!="boolean"&&w.jsx(Yr.Error,{size:d,__inheritStyles:!1,...x("error"),children:f})]})]})})});YR.displayName="@mantine/core/InlineInput";const xde=k.createContext(null),i6e=xde.Provider,Sde=()=>k.useContext(xde),[s6e,o6e]=s_();var Tde={card:"m_26775b0a"};const a6e={withBorder:!0},u6e=(e,{radius:t})=>({card:{"--card-radius":Kr(t)}}),vj=Ve((e,t)=>{const n=Ie("CheckboxCard",a6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Et({name:"CheckboxCard",classes:Tde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:u6e,rootSelector:"card"}),g=Sde(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return w.jsx(s6e,{value:{checked:y},children:w.jsx(Yi,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});vj.displayName="@mantine/core/CheckboxCard";vj.classes=Tde;function bj({children:e,role:t}){const n=l_();return n?w.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):w.jsx(w.Fragment,{children:e})}const l6e={},_j=Ve((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ie("CheckboxGroup",l6e,e),[c,f]=ks({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return w.jsx(i6e,{value:{value:c,onChange:d,size:s},children:w.jsx(Yr.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:w.jsx(bj,{role:"group",children:a})})})});_j.classes=Yr.Wrapper.classes;_j.displayName="@mantine/core/CheckboxGroup";function Cde({size:e,style:t,...n}){const r=e!==void 0?{width:Ne(e),height:Ne(e),...t}:t;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Ade({indeterminate:e,...t}){return e?w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:w.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):w.jsx(Cde,{...t})}var Dde={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const c6e={icon:Ade},f6e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Uf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Kr(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):o_(o,e)?gy({color:n,theme:e,autoContrast:o}):void 0}}},Ej=Ve((e,t)=>{const n=Ie("CheckboxIndicator",c6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,E=l,_=Et({name:"CheckboxIndicator",classes:Dde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:f6e,rootSelector:"indicator"}),x=o6e(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(x==null?void 0:x.checked)||!1;return w.jsx(we,{ref:t,..._("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:w.jsx(E,{indeterminate:c,..._("icon")})})});Ej.displayName="@mantine/core/CheckboxIndicator";Ej.classes=Dde;var Ide={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const d6e={labelPosition:"right",icon:Ade},h6e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Uf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Kr(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):o_(o,e)?gy({color:n,theme:e,autoContrast:o}):void 0}}},hh=Ve((e,t)=>{const n=Ie("Checkbox",d6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:E,variant:_,indeterminate:x,icon:S,rootRef:C,iconColor:A,onChange:D,autoContrast:I,mod:O,...R}=n,M=Sde(),F=d||(M==null?void 0:M.size),P=S,j=Et({name:"Checkbox",props:n,classes:Ide,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:h6e}),{styleProps:z,rest:V}=yy(R),$=ya(f),U=M?{checked:M.value.includes(V.value),onChange:W=>{M.onChange(W),D==null||D(W)}}:{};return w.jsx(YR,{...j("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:$,size:F,labelPosition:y,label:c,description:v,error:b,disabled:E,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:_,ref:C,mod:O,...z,...p,children:w.jsxs(we,{...j("inner"),mod:{"data-label-position":y},children:[w.jsx(we,{component:"input",id:$,ref:t,checked:g,disabled:E,mod:{error:!!b,indeterminate:x},...j("input",{focusable:!0,variant:_}),onChange:D,...V,...U,type:"checkbox"}),w.jsx(P,{indeterminate:x,...j("icon")})]})})});hh.classes={...Ide,...wde};hh.displayName="@mantine/core/Checkbox";hh.Group=_j;hh.Indicator=Ej;hh.Card=vj;function nb(e){return"group"in e}function Nde({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;nb(o)&&i.push({group:o.group,items:Nde({options:o.items,search:t,limit:n-i.length})}),nb(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function p6e(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function kde(e,t=new Set){if(Array.isArray(e))for(const n of e)if(nb(n))kde(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function m6e(e,t){return Array.isArray(e)?e.includes(t):e===t}function Rde({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!nb(e)){const a=m6e(n,e.value),u=t&&a&&w.jsx(Cde,{className:Ja.optionsDropdownCheckIcon}),l=w.jsxs(w.Fragment,{children:[r==="left"&&u,w.jsx("span",{children:e.label}),r==="right"&&u]});return w.jsx(Bn.Option,{value:e.value,disabled:e.disabled,className:Ai({[Ja.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>w.jsx(Rde,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return w.jsx(Bn.Group,{label:e.group,children:o})}function Pde({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){kde(e);const b=typeof i=="string"?(r||Nde)({options:e,search:u?i:"",limit:s??1/0}):e,E=p6e(b),_=b.map(x=>w.jsx(Rde,{data:x,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},nb(x)?x.group:x.value));return w.jsx(Bn.Dropdown,{hidden:t||n&&E,children:w.jsxs(Bn.Options,{labelledBy:p,"aria-label":y,children:[a?w.jsx(vy.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:_}):_,E&&d&&w.jsx(Bn.Empty,{children:d})]})})}var Ode={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const g6e={},y6e=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":cn(s,"badge-height"),"--badge-padding-x":cn(s,"badge-padding-x"),"--badge-fz":cn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Kr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Gr(n,e):void 0}}},Kd=hs((e,t)=>{const n=Ie("Badge",g6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...E}=n,_=Et({name:"Badge",props:n,classes:Ode,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:y6e});return w.jsxs(we,{variant:m,mod:[{block:g,circle:v},b],..._("root",{variant:m}),ref:t,...E,children:[d&&w.jsx("span",{..._("section"),"data-position":"left",children:d}),w.jsx("span",{..._("label"),children:p}),h&&w.jsx("span",{..._("section"),"data-position":"right",children:h})]})});Kd.classes=Ode;Kd.displayName="@mantine/core/Badge";var Mde={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const v6e={},b6e=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Gr(t,e):void 0,"--burger-size":cn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),wj=Ve((e,t)=>{const n=Ie("Burger",v6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=Et({name:"Burger",classes:Mde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:b6e});return w.jsxs(Yi,{...p("root"),ref:t,...h,children:[w.jsx(we,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});wj.classes=Mde;wj.displayName="@mantine/core/Burger";var KR={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const BQ={orientation:"horizontal"},_6e=(e,{borderWidth:t})=>({group:{"--button-border-width":Ne(t)}}),xj=Ve((e,t)=>{const n=Ie("ButtonGroup",BQ,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ie("ButtonGroup",BQ,e),p=Et({name:"ButtonGroup",props:n,classes:KR,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:_6e,rootSelector:"group"});return w.jsx(we,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});xj.classes=KR;xj.displayName="@mantine/core/ButtonGroup";const E6e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ne(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},w6e={},x6e=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":cn(s,"button-height"),"--button-padding-x":cn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?eo(s.replace("compact-","")):eo(s),"--button-radius":t===void 0?void 0:Kr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},In=hs((e,t)=>{const n=Ie("Button",w6e,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":E,autoContrast:_,mod:x,...S}=n,C=Et({name:"Button",props:n,classes:KR,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:x6e}),A=!!l,D=!!c;return w.jsxs(Yi,{ref:t,...C("root",{active:!a&&!p&&!E}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":A,"with-right-section":D},x],...S,children:[w.jsx(Oh,{mounted:!!p,transition:E6e,duration:150,children:I=>w.jsx(we,{component:"span",...C("loader",{style:I}),"aria-hidden":!0,children:w.jsx(_y,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),w.jsxs("span",{...C("inner"),children:[l&&w.jsx(we,{component:"span",...C("section"),mod:{position:"left"},children:l}),w.jsx(we,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&w.jsx(we,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});In.classes=KR;In.displayName="@mantine/core/Button";In.Group=xj;const[S6e,T6e]=Ps("Card component was not found in tree");var Sj={root:"m_e615b15f",section:"m_599a2148"};const C6e={},XR=hs((e,t)=>{const n=Ie("CardSection",C6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=T6e();return w.jsx(we,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});XR.classes=Sj;XR.displayName="@mantine/core/CardSection";const A6e={},D6e=(e,{padding:t})=>({root:{"--card-padding":ku(t)}}),Ey=hs((e,t)=>{const n=Ie("Card",A6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Et({name:"Card",props:n,classes:Sj,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D6e}),h=k.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===XR?k.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return w.jsx(S6e,{value:{getStyles:d},children:w.jsx(zR,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Ey.classes=Sj;Ey.displayName="@mantine/core/Card";Ey.Section=XR;var $de={root:"m_4451eb3a"};const I6e={},fs=hs((e,t)=>{const n=Ie("Center",I6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Et({name:"Center",props:n,classes:$de,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return w.jsx(we,{ref:t,mod:[{inline:l},c],...d("root"),...f})});fs.classes=$de;fs.displayName="@mantine/core/Center";var Fde={root:"m_7485cace"};const N6e={},k6e=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:cn(t,"container-size")}}),_l=Ve((e,t)=>{const n=Ie("Container",N6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Et({name:"Container",classes:Fde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:k6e});return w.jsx(we,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});_l.classes=Fde;_l.displayName="@mantine/core/Container";var Lde={root:"m_3eebeb36",label:"m_9e365f20"};const R6e={orientation:"horizontal"},P6e=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Gr(t,e):void 0,"--divider-border-style":n,"--divider-size":cn(r,"divider-size")}}),Tj=Ve((e,t)=>{const n=Ie("Divider",R6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Et({name:"Divider",classes:Lde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:P6e});return w.jsx(we,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&w.jsx(we,{component:"span",mod:{position:d},...m("label"),children:f})})});Tj.classes=Lde;Tj.displayName="@mantine/core/Divider";const[O6e,d_]=Ps("Drawer component was not found in tree");var $h={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const M6e={},QR=Ve((e,t)=>{const n=Ie("DrawerBody",M6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return w.jsx(V7,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});QR.classes=$h;QR.displayName="@mantine/core/DrawerBody";const $6e={},JR=Ve((e,t)=>{const n=Ie("DrawerCloseButton",$6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return w.jsx(H7,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});JR.classes=$h;JR.displayName="@mantine/core/DrawerCloseButton";const F6e={},ZR=Ve((e,t)=>{const n=Ie("DrawerContent",F6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=d_(),d=f.scrollAreaComponent||ade;return w.jsx(ode,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:w.jsx(d,{style:{height:"100vh"},children:u})})});ZR.classes=$h;ZR.displayName="@mantine/core/DrawerContent";const L6e={},eP=Ve((e,t)=>{const n=Ie("DrawerHeader",L6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return w.jsx(q7,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});eP.classes=$h;eP.displayName="@mantine/core/DrawerHeader";const B6e={},tP=Ve((e,t)=>{const n=Ie("DrawerOverlay",B6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return w.jsx(W7,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});tP.classes=$h;tP.displayName="@mantine/core/DrawerOverlay";function j6e(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function z6e(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const U6e={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},V6e={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},H6e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Dl("modal"),position:"left"},q6e=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":cn(n,"drawer-size"),"--drawer-flex":z6e(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":j6e(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ne(r)}}),nP=Ve((e,t)=>{const n=Ie("DrawerRoot",H6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Rh(),m=Et({name:"Drawer",classes:$h,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:q6e}),g=(p==="rtl"?V6e:U6e)[c];return w.jsx(O6e,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:w.jsx(sde,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});nP.classes=$h;nP.displayName="@mantine/core/DrawerRoot";const W6e={},rP=Ve((e,t)=>{const n=Ie("DrawerTitle",W6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=d_();return w.jsx(G7,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});rP.classes=$h;rP.displayName="@mantine/core/DrawerTitle";const G6e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Dl("modal"),withOverlay:!0,withCloseButton:!0},Vf=Ve((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ie("Drawer",G6e,e),l=!!n||s;return w.jsxs(nP,{ref:t,...u,children:[r&&w.jsx(tP,{...i}),w.jsxs(ZR,{children:[l&&w.jsxs(eP,{children:[n&&w.jsx(rP,{children:n}),s&&w.jsx(JR,{...o})]}),w.jsx(QR,{children:a})]})]})});Vf.classes=$h;Vf.displayName="@mantine/core/Drawer";Vf.Root=nP;Vf.Overlay=tP;Vf.Content=ZR;Vf.Body=QR;Vf.Header=eP;Vf.Title=rP;Vf.CloseButton=JR;function Y6e({open:e,close:t,openDelay:n,closeDelay:r}){const i=k.useRef(-1),s=k.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return k.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[K6e,Bde]=Ps("Grid component was not found in tree"),C4=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,jQ=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":C4(e,t),zQ=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},UQ=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function X6e({span:e,order:t,offset:n,selector:r}){var d;const i=Os(),s=Bde(),a=fw(e)===void 0?12:fw(e),u=i_({"--col-order":(d=fw(t))==null?void 0:d.toString(),"--col-flex-grow":zQ(a,s.grow),"--col-flex-basis":C4(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":jQ(a,s.columns,s.grow),"--col-offset":UQ(fw(n),s.columns)}),l=hi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=zQ(e[p],s.grow),h[p]["--col-flex-basis"]=C4(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=jQ(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=UQ(n[p],s.columns)),h},{}),f=LI(hi(l),i).filter(h=>hi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return w.jsx(TT,{styles:u,media:f,selector:r})}var Cj={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Q6e={span:12},Aj=Ve((e,t)=>{const n=Ie("GridCol",Q6e,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=Bde(),h=BR();return w.jsxs(w.Fragment,{children:[w.jsx(X6e,{selector:`.${h}`,span:u,order:l,offset:c}),w.jsx(we,{ref:t,...d.getStyles("col",{className:Ai(i,h),style:s,classNames:r,styles:o}),...f})]})});Aj.classes=Cj;Aj.displayName="@mantine/core/GridCol";function J6e({gutter:e,selector:t}){const n=Os(),r=i_({"--grid-gutter":ku(fw(e))}),i=hi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=ku(e[u])),a),{}),o=LI(hi(i),n).filter(a=>hi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return w.jsx(TT,{styles:r,media:o,selector:t})}const Z6e={gutter:"md",grow:!1,columns:12},eLe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),ul=Ve((e,t)=>{const n=Ie("Grid",Z6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Et({name:"Grid",classes:Cj,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eLe}),y=BR();return w.jsxs(K6e,{value:{getStyles:g,grow:l,columns:f},children:[w.jsx(J6e,{selector:`.${y}`,...n}),w.jsx(we,{ref:t,...g("root",{className:y}),...m,children:w.jsx("div",{...g("inner"),children:p})})]})});ul.classes=Cj;ul.displayName="@mantine/core/Grid";ul.Col=Aj;var jde={root:"m_9e117634"};const tLe={},nLe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Kr(t),"--image-object-fit":n}}),Wm=hs((e,t)=>{const n=Ie("Image",tLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=k.useState(!c);k.useEffect(()=>y(!c),[c]);const v=Et({name:"Image",classes:jde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nLe});return g&&h?w.jsx(we,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):w.jsx(we,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Wm.classes=jde;Wm.displayName="@mantine/core/Image";function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cS.apply(null,arguments)}function rLe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var iLe=k.useLayoutEffect,sLe=function(t){var n=k.useRef(t);return iLe(function(){n.current=t}),n},VQ=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},oLe=function(t,n){var r=k.useRef();return k.useCallback(function(i){t.current=i,r.current&&VQ(r.current,null),r.current=n,n&&VQ(n,i)},[n])},HQ={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},aLe=function(t){Object.keys(HQ).forEach(function(n){t.style.setProperty(n,HQ[n],"important")})},qQ=aLe,Wo=null,WQ=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function uLe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Wo||(Wo=document.createElement("textarea"),Wo.setAttribute("tabindex","-1"),Wo.setAttribute("aria-hidden","true"),qQ(Wo)),Wo.parentNode===null&&document.body.appendChild(Wo);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Wo.style[h]=o[h]}),qQ(Wo),Wo.value=t;var u=WQ(Wo,e);Wo.value=t,u=WQ(Wo,e),Wo.value="x";var l=Wo.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var GQ=function(){},lLe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},cLe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],fLe=!!document.documentElement.currentStyle,dLe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=lLe(cLe,n),i=r.boxSizing;if(i==="")return null;fLe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},hLe=dLe;function zde(e,t,n){var r=sLe(n);k.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var pLe=function(t){zde(window,"resize",t)},mLe=function(t){zde(document.fonts,"loadingdone",t)},gLe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],yLe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?GQ:o,u=t.onHeightChange,l=u===void 0?GQ:u,c=rLe(t,gLe),f=c.value!==void 0,d=k.useRef(null),h=oLe(d,n),p=k.useRef(0),m=k.useRef(),g=function(){var b=d.current,E=r&&m.current?m.current:hLe(b);if(E){m.current=E;var _=uLe(E,b.value||b.placeholder||"x",s,i),x=_[0],S=_[1];p.current!==x&&(p.current=x,b.style.setProperty("height",x+"px","important"),l(x,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return k.useLayoutEffect(g),pLe(g),mLe(g),k.createElement("textarea",cS({},c,{onChange:y,ref:h}))},vLe=k.forwardRef(yLe);const bLe={},Dj=Ve((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ie("Textarea",bLe,e),u=n&&m3e()!=="test",l=u?{maxRows:r,minRows:i}:{};return w.jsx(kl,{component:u?vLe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});Dj.classes=kl.classes;Dj.displayName="@mantine/core/Textarea";const[_Le,ELe]=Ps("List component was not found in tree");var Ij={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const wLe={},Nj=Ve((e,t)=>{const n=Ie("ListItem",wLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=ELe(),h=u||d.icon,p={classNames:r,styles:o};return w.jsx(we,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:w.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&w.jsx("span",{...d.getStyles("itemIcon",p),children:h}),w.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});Nj.classes=Ij;Nj.displayName="@mantine/core/ListItem";const xLe={type:"unordered"},SLe=(e,{size:t,spacing:n})=>({root:{"--list-fz":eo(t),"--list-lh":Zce(t),"--list-spacing":ku(n)}}),mc=Ve((e,t)=>{const n=Ie("List",xLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Et({name:"List",classes:Ij,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SLe});return w.jsx(_Le,{value:{center:p,icon:d,getStyles:v},children:w.jsx(we,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});mc.classes=Ij;mc.displayName="@mantine/core/List";mc.Item=Nj;var Ude={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const YQ={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Dl("overlay")},TLe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Pu=Ve((e,t)=>{const n=Ie("LoadingOverlay",YQ,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Os(),g=Et({name:"LoadingOverlay",classes:Ude,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TLe}),y={...YQ.overlayProps,...f};return w.jsx(Oh,{transition:"fade",...l,mounted:!!d,children:v=>w.jsxs(we,{...g("root",{style:v}),ref:t,...p,children:[w.jsx(_y,{...g("loader"),unstyled:a,...c}),w.jsx(lS,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),w.jsx(lS,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Pu.classes=Ude;Pu.displayName="@mantine/core/LoadingOverlay";const[CLe,PT]=Ps("Menu component was not found in the tree");var h_={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const ALe={},kj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("MenuDivider",ALe,e),u=PT();return w.jsx(we,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});kj.classes=h_;kj.displayName="@mantine/core/MenuDivider";const DLe={},Rj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ie("MenuDropdown",DLe,e),f=k.useRef(null),d=PT(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=$d(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=$d(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return w.jsxs(Rr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ds(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[w.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});Rj.classes=h_;Rj.displayName="@mantine/core/MenuDropdown";const ILe={},Pj=hs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ie("MenuItem",ILe,e),p=PT(),m=Os(),{dir:g}=Rh(),y=k.useRef(),v=p.getItemIndex(y.current),b=h,E=$d(b.onMouseLeave,()=>p.setHovered(-1)),_=$d(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),x=$d(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=$d(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Uf({color:a,theme:m}):null;return w.jsxs(Yi,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ds(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:_,onMouseLeave:E,onClick:x,onKeyDown:c7({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&w.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});Pj.classes=h_;Pj.displayName="@mantine/core/MenuItem";const NLe={},Oj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("MenuLabel",NLe,e),u=PT();return w.jsx(we,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});Oj.classes=h_;Oj.displayName="@mantine/core/MenuLabel";const kLe={refProp:"ref"},Vde=k.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ie("MenuTarget",kLe,e);if(!Um(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=PT(),o=$d(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=$d(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=$d(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return w.jsx(Rr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:k.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});Vde.displayName="@mantine/core/MenuTarget";const RLe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function ka(e){const t=Ie("Menu",RLe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:E,keepMounted:_,...x}=t,S=Et({name:"Menu",classes:h_,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:D}]=KPe(),[I,O]=ks({value:s,defaultValue:o,finalValue:!1,onChange:u}),[R,M]=k.useState(!1),F=()=>{O(!1),M(!1),I&&(i==null||i())},P=()=>{O(!0),!I&&(r==null||r())},j=()=>{I?F():P()},{openDropdown:z,closeDropdown:V}=Y6e({open:P,close:F,closeDelay:p,openDelay:h}),$=B=>YPe("[data-menu-item]","[data-menu-dropdown]",B),{resolvedClassNames:U,resolvedStyles:W}=kh({classNames:m,styles:g,props:t});return ch(()=>{D()},[I]),w.jsx(CLe,{value:{getStyles:S,opened:I,toggleDropdown:j,getItemIndex:$,hovered:C,setHovered:A,openedViaClick:R,setOpenedViaClick:M,closeOnItemClick:l,closeDropdown:d==="click"?F:V,openDropdown:d==="click"?P:z,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:E},children:w.jsx(Rr,{...x,opened:I,onChange:j,defaultOpened:o,trapFocus:_?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:_,children:n})})}ka.extend=e=>e;ka.classes=h_;ka.displayName="@mantine/core/Menu";ka.Item=Pj;ka.Label=Oj;ka.Dropdown=Rj;ka.Target=Vde;ka.Divider=kj;const[PLe,p_]=Ps("Modal component was not found in tree");var Fh={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const OLe={},iP=Ve((e,t)=>{const n=Ie("ModalBody",OLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return w.jsx(V7,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});iP.classes=Fh;iP.displayName="@mantine/core/ModalBody";const MLe={},sP=Ve((e,t)=>{const n=Ie("ModalCloseButton",MLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return w.jsx(H7,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});sP.classes=Fh;sP.displayName="@mantine/core/ModalCloseButton";const $Le={},oP=Ve((e,t)=>{const n=Ie("ModalContent",$Le,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=p_(),f=c.scrollAreaComponent||ade;return w.jsx(ode,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:w.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ne(c.yOffset)} * 2))`},children:u})})});oP.classes=Fh;oP.displayName="@mantine/core/ModalContent";const FLe={},aP=Ve((e,t)=>{const n=Ie("ModalHeader",FLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return w.jsx(q7,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});aP.classes=Fh;aP.displayName="@mantine/core/ModalHeader";const LLe={},uP=Ve((e,t)=>{const n=Ie("ModalOverlay",LLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return w.jsx(W7,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});uP.classes=Fh;uP.displayName="@mantine/core/ModalOverlay";const BLe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Dl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},jLe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Kr(t),"--modal-size":cn(n,"modal-size"),"--modal-y-offset":Ne(r),"--modal-x-offset":Ne(i)}}),lP=Ve((e,t)=>{const n=Ie("ModalRoot",BLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Et({name:m,classes:Fh,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jLe});return w.jsx(PLe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:w.jsx(sde,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});lP.classes=Fh;lP.displayName="@mantine/core/ModalRoot";const zLe={},cP=Ve((e,t)=>{const n=Ie("ModalTitle",zLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=p_();return w.jsx(G7,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});cP.classes=Fh;cP.displayName="@mantine/core/ModalTitle";const ULe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Dl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ki=Ve((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ie("Modal",ULe,e),c=!!n||s;return w.jsxs(lP,{ref:t,radius:u,...l,children:[r&&w.jsx(uP,{...i}),w.jsxs(oP,{radius:u,children:[c&&w.jsxs(aP,{children:[n&&w.jsx(cP,{children:n}),s&&w.jsx(sP,{...o})]}),w.jsx(iP,{children:a})]})]})});Ki.classes=Fh;Ki.displayName="@mantine/core/Modal";Ki.Root=lP;Ki.Overlay=uP;Ki.Content=oP;Ki.Body=iP;Ki.Header=aP;Ki.Title=cP;Ki.CloseButton=sP;const[VLe,Mj]=s_(),[HLe,qLe]=s_();var fP={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const WLe={},GLe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?cn(t):cn(n,"pg-gap")}}),$j=Ve((e,t)=>{const n=Ie("PillGroup",WLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=Mj(),h=(d==null?void 0:d.size)||l||void 0,p=Et({name:"PillGroup",classes:fP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GLe,stylesCtx:{size:h},rootSelector:"group"});return w.jsx(HLe,{value:{size:h,disabled:c},children:w.jsx(we,{ref:t,size:h,...p("group"),...f})})});$j.classes=fP;$j.displayName="@mantine/core/PillGroup";const YLe={variant:"default"},KLe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":cn(n,"pill-fz"),"--pill-height":cn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Kr(t)}}),fS=Ve((e,t)=>{const n=Ie("Pill",YLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=qLe(),E=Mj(),_=m||(b==null?void 0:b.size)||void 0,x=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",S=Et({name:"Pill",classes:fP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KLe,stylesCtx:{size:_}});return w.jsxs(we,{component:"span",ref:t,variant:x,size:_,...S("root",{variant:x}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[w.jsx("span",{...S("label"),children:c}),f&&w.jsx(Hm,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});fS.classes=fP;fS.displayName="@mantine/core/Pill";fS.Group=$j;var Hde={field:"m_45c4369d"};const XLe={type:"visible"},Fj=Ve((e,t)=>{const n=Ie("PillsInputField",XLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=Mj(),g=l_(),y=Et({name:"PillsInputField",classes:Hde,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return w.jsx(we,{component:"input",ref:ds(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});Fj.classes=Hde;Fj.displayName="@mantine/core/PillsInputField";const QLe={},HI=Ve((e,t)=>{const n=Ie("PillsInput",QLe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=k.useRef();return w.jsx(VLe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:w.jsx(kl,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});HI.displayName="@mantine/core/PillsInput";HI.Field=Fj;function JLe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(nb(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const ZLe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},Lj=Ve((e,t)=>{const n=Ie("MultiSelect",ZLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:E,onOptionSubmit:_,comboboxProps:x,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:D,searchValue:I,defaultSearchValue:O,onSearchChange:R,readOnly:M,disabled:F,onFocus:P,onBlur:j,onPaste:z,radius:V,rightSection:$,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:B,leftSection:q,leftSectionWidth:Y,leftSectionPointerEvents:re,leftSectionProps:pe,inputContainer:_e,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:qe,wrapperProps:He,description:ht,label:rt,error:Pe,maxValues:Be,searchable:Xe,nothingFoundMessage:mt,withCheckIcon:Ft,checkIconPosition:bt,hidePickedOptions:G,withErrorStyles:ie,name:me,form:J,id:se,clearable:ce,clearButtonProps:Se,hiddenInputProps:Te,placeholder:Ge,hiddenInputValuesDivider:je,required:Ct,mod:Ot,renderOption:Dt,onRemove:Vt,onClear:Zt,scrollAreaProps:an,...gr}=n,lr=ya(se),fn=mde(m),Xr=oj(fn),er=yj({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),er.resetSelectedOption()}}),{styleProps:gi,rest:{type:Ll,autoComplete:Ho,...Wu}}=yy(gr),[Yn,Lr]=ks({value:c,defaultValue:f,finalValue:[],onChange:d}),[yr,uo]=ks({value:I,defaultValue:O,finalValue:"",onChange:R}),Fs=Et({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ls,resolvedStyles:ue}=kh({props:n,styles:o,classNames:r}),te=at=>{h==null||h(at),at.key===" "&&!Xe&&(at.preventDefault(),er.toggleDropdown()),at.key==="Backspace"&&yr.length===0&&Yn.length>0&&(Vt==null||Vt(Yn[Yn.length-1]),Lr(Yn.slice(0,Yn.length-1)))},le=Yn.map((at,St)=>{var Xt,_n;return w.jsx(fS,{withRemoveButton:!M&&!((Xt=Xr[at])!=null&&Xt.disabled),onRemove:()=>{Lr(Yn.filter(Sn=>at!==Sn)),Vt==null||Vt(at)},unstyled:a,disabled:F,...Fs("pill"),children:((_n=Xr[at])==null?void 0:_n.label)||at},`${at}-${St}`)});k.useEffect(()=>{E&&er.selectFirstOption()},[E,Yn]);const De=ce&&Yn.length>0&&!F&&!M&&w.jsx(Bn.ClearButton,{size:l,...Se,onClear:()=>{Zt==null||Zt(),Lr([]),uo("")}}),Ae=JLe({data:fn,value:Yn});return w.jsxs(w.Fragment,{children:[w.jsxs(Bn,{store:er,classNames:Ls,styles:ue,unstyled:a,size:l,readOnly:M,__staticSelector:"MultiSelect",onOptionSubmit:at=>{_==null||_(at),uo(""),er.updateSelectedOptionIndex("selected"),Yn.includes(Xr[at].value)?(Lr(Yn.filter(St=>St!==Xr[at].value)),Vt==null||Vt(Xr[at].value)):Yn.length<Be&&Lr([...Yn,Xr[at].value])},...x,children:[w.jsx(Bn.DropdownTarget,{children:w.jsx(HI,{...gi,__staticSelector:"MultiSelect",classNames:Ls,styles:ue,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:V,rightSection:$||De||w.jsx(Bn.Chevron,{size:l,error:Pe,unstyled:a}),rightSectionPointerEvents:W||(De?"all":"none"),rightSectionWidth:U,rightSectionProps:B,leftSection:q,leftSectionWidth:Y,leftSectionPointerEvents:re,leftSectionProps:pe,inputContainer:_e,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:qe,wrapperProps:He,description:ht,label:rt,error:Pe,multiline:!0,withErrorStyles:ie,__stylesApiProps:{...n,rightSectionPointerEvents:W||(De?"all":"none"),multiline:!0},pointer:!Xe,onClick:()=>Xe?er.openDropdown():er.toggleDropdown(),"data-expanded":er.dropdownOpened||void 0,id:lr,required:Ct,mod:Ot,children:w.jsxs(fS.Group,{disabled:F,unstyled:a,...Fs("pillsList"),children:[le,w.jsx(Bn.EventsTarget,{autoComplete:Ho,children:w.jsx(HI.Field,{...Wu,ref:t,id:lr,placeholder:Ge,type:!Xe&&!Ge?"hidden":"visible",...Fs("inputField"),unstyled:a,onFocus:at=>{P==null||P(at),Xe&&er.openDropdown()},onBlur:at=>{j==null||j(at),er.closeDropdown(),uo("")},onKeyDown:te,value:yr,onChange:at=>{uo(at.currentTarget.value),Xe&&er.openDropdown(),E&&er.selectFirstOption()},disabled:F,readOnly:M||!Xe,pointer:!Xe})})]})})}),w.jsx(Pde,{data:G?Ae:fn,hidden:M||F,filter:S,search:yr,limit:C,hiddenWhenEmpty:!Xe||!mt||G&&Ae.length===0&&yr.trim().length===0,withScrollArea:A,maxDropdownHeight:D,filterOptions:Xe,value:Yn,checkIconPosition:bt,withCheckIcon:Ft,nothingFoundMessage:mt,unstyled:a,labelId:rt?`${lr}-label`:void 0,"aria-label":rt?void 0:gr["aria-label"],renderOption:Dt,scrollAreaProps:an})]}),w.jsx(Bn.HiddenInput,{name:me,valuesDivider:je,value:Yn,form:J,disabled:F,...Te})]})});Lj.classes={...kl.classes,...Bn.classes};Lj.displayName="@mantine/core/MultiSelect";var qde={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const e4e={},t4e=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":ku(r)}}},dP=hs((e,t)=>{const n=Ie("NavLink",e4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:E,noWrap:_,childrenOffset:x,onKeyDown:S,autoContrast:C,mod:A,...D}=n,I=Et({name:"NavLink",props:n,classes:qde,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:t4e}),[O,R]=ks({value:l,defaultValue:c,finalValue:!1,onChange:f}),M=!!d,F=P=>{h==null||h(P),M&&(P.preventDefault(),R(!O))};return w.jsxs(w.Fragment,{children:[w.jsxs(Yi,{...I("root"),component:"a",ref:t,onClick:F,onKeyDown:P=>{S==null||S(P),P.nativeEvent.code==="Space"&&M&&(P.preventDefault(),R(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...D,children:[g&&w.jsx(we,{component:"span",...I("section"),mod:{position:"left"},children:g}),w.jsxs(we,{...I("body"),mod:{"no-wrap":_},children:[w.jsx(we,{component:"span",...I("label"),children:v}),w.jsx(we,{component:"span",mod:{active:p},...I("description"),children:b})]}),(M||y)&&w.jsx(we,{...I("section"),component:"span",mod:{rotate:O&&!E,position:"right"},children:M?y||w.jsx(tb,{...I("chevron")}):y})]}),w.jsx(E7,{in:O,...I("collapse"),children:w.jsx("div",{...I("children"),children:d})})]})});dP.classes=qde;dP.displayName="@mantine/core/NavLink";function Wde(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var dS;(function(e){e.event="event",e.props="prop"})(dS||(dS={}));function _p(){}function n4e(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function hS(e){return!!(e||"").match(/\d/)}function wv(e){return e==null}function r4e(e){return typeof e=="number"&&isNaN(e)}function Gde(e){return wv(e)||r4e(e)||typeof e=="number"&&!isFinite(e)}function Yde(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function i4e(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function s4e(e,t,n){var r=i4e(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function o4e(e){var t=k.useRef(e);t.current=e;var n=k.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function Bj(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function a4e(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Kde(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function KQ(e,t){return Array(t+1).join(e)}function Xde(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+KQ("0",Math.abs(o))+i:o>=a?i=i+KQ("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function XQ(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=Bj(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Kde(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function jg(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Qde=n4e(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),u4e=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function l4e(e,t,n){return Math.min(Math.max(e,t),n)}function U$(e){return Math.max(e.selectionStart,e.selectionEnd)}function c4e(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function f4e(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function d4e(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function h4e(e,t,n,r,i,s,o){o===void 0&&(o=d4e);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function QQ(e,t,n,r){var i=e.length;if(t=l4e(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function p4e(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(hS(e[n])||hS(e[n-1]));return t}function Jde(e,t,n,r,i,s){s===void 0&&(s=_p);var o=o4e(function(p,m){var g,y;return Gde(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Xde(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=k.useState(function(){return o(wv(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;wv(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return k.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function m4e(e){return e.replace(/[^0-9]/g,"")}function g4e(e){return e}function y4e(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=g4e);var a=e.removeFormatting;a===void 0&&(a=m4e);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=_p);var h=e.onKeyDown;h===void 0&&(h=_p);var p=e.onMouseUp;p===void 0&&(p=_p);var m=e.onFocus;m===void 0&&(m=_p);var g=e.onBlur;g===void 0&&(g=_p);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=p4e);var b=e.isValidInputCharacter;b===void 0&&(b=hS);var E=e.isCharacterSame,_=Wde(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),x=Jde(y,u,!!l,o,a,c),S=x[0],C=S.formattedValue,A=S.numAsString,D=x[1],I=k.useRef(),O=k.useRef({formattedValue:C,numAsString:A}),R=function(Pe,Be){O.current={formattedValue:Pe.formattedValue,numAsString:Pe.value},D(Pe,Be)},M=k.useState(!1),F=M[0],P=M[1],j=k.useRef(null),z=k.useRef({setCaretTimeout:null,focusTimeout:null});k.useEffect(function(){return P(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var V=o,$=function(Pe,Be){var Xe=parseFloat(Be);return{formattedValue:Pe,value:Be,floatValue:isNaN(Xe)?void 0:Xe}},U=function(Pe,Be,Xe){Pe.selectionStart===0&&Pe.selectionEnd===Pe.value.length||(jg(Pe,Be),z.current.setCaretTimeout=setTimeout(function(){Pe.value===Xe&&Pe.selectionStart!==Be&&jg(Pe,Be)},0))},W=function(Pe,Be,Xe){return QQ(Pe,Be,v(Pe),Xe)},B=function(Pe,Be,Xe){var mt=v(Be),Ft=h4e(Be,C,Pe,Xe,mt,b,E);return Ft=QQ(Be,Ft,mt),Ft},q=function(Pe){var Be=Pe.formattedValue;Be===void 0&&(Be="");var Xe=Pe.input,mt=Pe.source,Ft=Pe.event,bt=Pe.numAsString,G;if(Xe){var ie=Pe.inputValue||Xe.value,me=U$(Xe);Xe.value=Be,G=B(ie,Be,me),G!==void 0&&U(Xe,G,Be)}Be!==C&&R($(Be,bt),{event:Ft,source:mt})};k.useEffect(function(){var Pe=O.current,Be=Pe.formattedValue,Xe=Pe.numAsString;(C!==Be||A!==Xe)&&R($(C,A),{event:void 0,source:dS.props})},[C,A]);var Y=j.current?U$(j.current):void 0,re=typeof window<"u"?k.useLayoutEffect:k.useEffect;re(function(){var Pe=j.current;if(C!==O.current.formattedValue&&Pe){var Be=B(O.current.formattedValue,C,Y);Pe.value=C,U(Pe,Be,C)}},[C]);var pe=function(Pe,Be,Xe){var mt=Be.target,Ft=I.current?u4e(I.current,mt.selectionEnd):Qde(C,Pe),bt=Object.assign(Object.assign({},Ft),{lastValue:C}),G=a(Pe,bt),ie=V(G);if(G=a(ie,void 0),f&&!f($(ie,G))){var me=Be.target,J=U$(me),se=B(Pe,C,J);return me.value=C,U(me,se,C),!1}return q({formattedValue:ie,numAsString:G,inputValue:Pe,event:Be,source:Xe,input:Be.target}),!0},_e=function(Pe,Be){Be===void 0&&(Be=0);var Xe=Pe.selectionStart,mt=Pe.selectionEnd;I.current={selectionStart:Xe,selectionEnd:mt+Be}},de=function(Pe){var Be=Pe.target,Xe=Be.value,mt=pe(Xe,Pe,dS.event);mt&&d(Pe),I.current=void 0},ye=function(Pe){var Be=Pe.target,Xe=Pe.key,mt=Be.selectionStart,Ft=Be.selectionEnd,bt=Be.value;bt===void 0&&(bt="");var G;Xe==="ArrowLeft"||Xe==="Backspace"?G=Math.max(mt-1,0):Xe==="ArrowRight"?G=Math.min(mt+1,bt.length):Xe==="Delete"&&(G=mt);var ie=0;Xe==="Delete"&&mt===Ft&&(ie=1);var me=Xe==="ArrowLeft"||Xe==="ArrowRight";if(G===void 0||mt!==Ft&&!me){h(Pe),_e(Be,ie);return}var J=G;if(me){var se=Xe==="ArrowLeft"?"left":"right";J=W(bt,G,se),J!==G&&Pe.preventDefault()}else Xe==="Delete"&&!b(bt[G])?J=W(bt,G,"right"):Xe==="Backspace"&&!b(bt[G])&&(J=W(bt,G,"left"));J!==G&&U(Be,J,bt),h(Pe),_e(Be,ie)},Ce=function(Pe){var Be=Pe.target,Xe=function(){var mt=Be.selectionStart,Ft=Be.selectionEnd,bt=Be.value;if(bt===void 0&&(bt=""),mt===Ft){var G=W(bt,mt);G!==mt&&U(Be,G,bt)}};Xe(),requestAnimationFrame(function(){Xe()}),p(Pe),_e(Be)},ve=function(Pe){Pe.persist&&Pe.persist();var Be=Pe.target,Xe=Pe.currentTarget;j.current=Be,z.current.focusTimeout=setTimeout(function(){var mt=Be.selectionStart,Ft=Be.selectionEnd,bt=Be.value;bt===void 0&&(bt="");var G=W(bt,mt);G!==mt&&!(mt===0&&Ft===bt.length)&&U(Be,G,bt),m(Object.assign(Object.assign({},Pe),{currentTarget:Xe}))},0)},qe=function(Pe){j.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),g(Pe)},He=F&&c4e()?"numeric":void 0,ht=Object.assign({inputMode:He},_,{type:t,value:C,onChange:de,onKeyDown:ye,onMouseUp:Ce,onFocus:ve,onBlur:qe});if(n==="text")return i?xi.createElement(xi.Fragment,null,i(C,_)||null):xi.createElement("span",Object.assign({},_,{ref:s}),C);if(r){var rt=r;return xi.createElement(rt,Object.assign({},ht,{ref:s}))}return xi.createElement("input",Object.assign({},ht,{ref:s}))}function JQ(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=hP(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=Bj(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Kde(p,n,!!r)),l&&(h=s4e(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function hP(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function v4e(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function b4e(e,t){return new RegExp("(^-)|[0-9]|"+Yde(e),"g")}function _4e(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function E4e(e,t,n){var r;t===void 0&&(t=f4e(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=hP(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(hS(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(j,z,V){var $=!1,U=!1;s.startsWith("-")?$=!1:j.startsWith("--")?($=!1,U=!0):o.startsWith("-")&&j.length===o.length?$=!1:j[0]==="-"&&($=!0);var W=$?1:0;return U&&(W=2),W&&(j=j.substring(W),z-=W,V-=W),{value:j,start:z,end:V,hasNegation:$}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var E=y(t.lastValue,u.start,u.end),_=E.start,x=E.end,S=E.value,C=e.substring(c,f);e.length&&S.length&&(_>S.length-o.length||x<s.length)&&!(C&&o.startsWith(C))&&(e=S);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var D=e.length,I=e.length-o.length;e.endsWith(o)?D=I:(f>I||f>e.length-o.length)&&(D=f),e=e.substring(0,D),e=v4e(b?"-"+e:e,i),e=(e.match(b4e(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(Yde(p),"g"),function(j,z){return z===O?".":""});var R=Bj(e,i),M=R.beforeDecimal,F=R.afterDecimal,P=R.addNegation;return l.end-l.start<u.end-u.start&&M===""&&m&&!parseFloat(F)&&(e=P?"-":""),e}function w4e(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function x4e(e){var t=hP(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function S4e(e){e=x4e(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=_p);var s=e.onBlur;s===void 0&&(s=_p);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Wde(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=hP(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(P){return JQ(P,e)},b=function(P,j){return E4e(P,j,e)},E=wv(f)?c:f,_=d??_4e(E,l,t);wv(f)?wv(c)||(_=_||typeof c=="number"):_=_||typeof f=="number";var x=function(P){return Gde(P)?P:(typeof P=="number"&&(P=Xde(P)),_&&typeof a=="number"?XQ(P,a,!!u):P)},S=Jde(x(f),x(c),!!_,v,b,h),C=S[0],A=C.numAsString,D=C.formattedValue,I=S[1],O=function(P){var j=P.target,z=P.key,V=j.selectionStart,$=j.selectionEnd,U=j.value;if(U===void 0&&(U=""),(z==="Backspace"||z==="Delete")&&$<l.length){P.preventDefault();return}if(V!==$){i(P);return}z==="Backspace"&&U[0]==="-"&&V===l.length+1&&n&&jg(j,1),a&&u&&(z==="Backspace"&&U[V-1]===g?(jg(j,V-1),P.preventDefault()):z==="Delete"&&U[V]===g&&P.preventDefault()),y!=null&&y.includes(z)&&U[V]===g&&jg(j,V+1);var W=o===!0?",":o;z==="Backspace"&&U[V-1]===W&&jg(j,V-1),z==="Delete"&&U[V]===W&&jg(j,V+1),i(P)},R=function(P){var j=A;if(j.match(/\d/g)||(j=""),r||(j=a4e(j)),u&&a&&(j=XQ(j,a,u)),j!==A){var z=JQ(j,e);I({formattedValue:z,value:j,floatValue:parseFloat(j)},{event:P,source:dS.event})}s(P)},M=function(P){return P===g?!0:hS(P)},F=function(P){var j=P.currentValue,z=P.lastValue,V=P.formattedValue,$=P.currentValueIndex,U=P.formattedValueIndex,W=j[$],B=V[U],q=Qde(z,j),Y=q.to;return $>=Y.start&&$<Y.end&&y&&y.includes(W)&&B===g?!0:W===B};return Object.assign(Object.assign({},p),{value:D,valueIsNumericString:!1,isValidInputCharacter:M,isCharacterSame:F,onValueChange:I,format:v,removeFormatting:b,getCaretBoundary:function(P){return w4e(P,e)},onKeyDown:O,onBlur:R})}function T4e(e){var t=S4e(e);return xi.createElement(y4e,Object.assign({},t))}function ZQ({direction:e,style:t,...n}){return w.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var A4={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const C4e=/^(0\.0*|-0(\.0*)?)$/,A4e=/^-?0\d+(\.\d+)?\.?$/;function D4e(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function eJ(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const I4e={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},N4e=(e,{size:t})=>({controls:{"--ni-chevron-size":cn(t,"ni-chevron-size")}}),jj=Ve((e,t)=>{const n=Ie("NumberInput",I4e,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:E,decimalScale:_,onKeyDown:x,onKeyDownCapture:S,handlersRef:C,startValue:A,disabled:D,rightSectionPointerEvents:I,allowNegative:O,readOnly:R,size:M,rightSectionWidth:F,stepHoldInterval:P,stepHoldDelay:j,allowLeadingZeros:z,withKeyboardEvents:V,trimLeadingZeroesOnBlur:$,...U}=n,W=Et({name:"NumberInput",classes:A4,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:N4e}),{resolvedClassNames:B,resolvedStyles:q}=kh({classNames:i,styles:s,props:n}),[Y,re]=ks({value:c,defaultValue:f,onChange:u}),pe=j!==void 0&&P!==void 0,_e=k.useRef(null),de=k.useRef(null),ye=k.useRef(0),Ce=(G,ie)=>{ie.source==="event"&&re(D4e(G.floatValue)&&!C4e.test(G.value)&&!(z&&A4e.test(G.value))?G.floatValue:G.value),l==null||l(G,ie)},ve=G=>{const ie=String(G).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ie?Math.max(0,(ie[1]?ie[1].length:0)-(ie[2]?+ie[2]:0)):0},qe=G=>{_e.current&&typeof G<"u"&&_e.current.setSelectionRange(G,G)},He=k.useRef();He.current=()=>{let G;const ie=ve(Y),me=ve(p),J=Math.max(ie,me),se=10**J;if(typeof Y!="number"||Number.isNaN(Y))G=ff(A,h,d);else if(d!==void 0){const Se=(Math.round(Y*se)+Math.round(p*se))/se;G=Se<=d?Se:d}else G=(Math.round(Y*se)+Math.round(p*se))/se;const ce=G.toFixed(J);re(parseFloat(ce)),l==null||l({floatValue:parseFloat(ce),formattedValue:ce,value:ce},{source:"increment"}),setTimeout(()=>{var Se;return qe((Se=_e.current)==null?void 0:Se.value.length)},0)};const ht=k.useRef();ht.current=()=>{let G;const ie=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,me=ve(Y),J=ve(p),se=Math.max(me,J),ce=10**se;if(typeof Y!="number"||Number.isNaN(Y))G=ff(A,ie,d);else{const Te=(Math.round(Y*ce)-Math.round(p*ce))/ce;G=ie!==void 0&&Te<ie?ie:Te}const Se=G.toFixed(se);re(parseFloat(Se)),l==null||l({floatValue:parseFloat(Se),formattedValue:Se,value:Se},{source:"decrement"}),setTimeout(()=>{var Te;return qe((Te=_e.current)==null?void 0:Te.value.length)},0)};const rt=G=>{x==null||x(G),!(R||!V)&&(G.key==="ArrowUp"&&(G.preventDefault(),He.current()),G.key==="ArrowDown"&&(G.preventDefault(),ht.current()))},Pe=G=>{if(S==null||S(G),G.key==="Backspace"){const ie=_e.current;ie.selectionStart===0&&ie.selectionStart===ie.selectionEnd&&(G.preventDefault(),window.setTimeout(()=>qe(0),0))}};h7(C,{increment:He.current,decrement:ht.current});const Be=G=>{G?He.current():ht.current(),ye.current+=1},Xe=G=>{if(Be(G),pe){const ie=typeof P=="number"?P:P(ye.current);de.current=window.setTimeout(()=>Xe(G),ie)}},mt=(G,ie)=>{var me;G.preventDefault(),(me=_e.current)==null||me.focus(),Be(ie),pe&&(de.current=window.setTimeout(()=>Xe(ie),j))},Ft=()=>{de.current&&window.clearTimeout(de.current),de.current=null,ye.current=0},bt=w.jsxs("div",{...W("controls"),children:[w.jsx(Yi,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:D||typeof Y=="number"&&d!==void 0&&Y>=d,mod:{direction:"up"},onMouseDown:G=>G.preventDefault(),onPointerDown:G=>{mt(G,!0)},onPointerUp:Ft,onPointerLeave:Ft,children:w.jsx(ZQ,{direction:"up"})}),w.jsx(Yi,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:D||typeof Y=="number"&&h!==void 0&&Y<=h,mod:{direction:"down"},onMouseDown:G=>G.preventDefault(),onPointerDown:G=>{mt(G,!1)},onPointerUp:Ft,onPointerLeave:Ft,children:w.jsx(ZQ,{direction:"down"})})]});return w.jsx(kl,{component:T4e,allowNegative:O,className:Ai(A4.root,r),size:M,...U,readOnly:R,disabled:D,value:Y,getInputRef:ds(t,_e),onValueChange:Ce,rightSection:m||R?g:g||bt,classNames:B,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?_:0,onKeyDown:rt,onKeyDownCapture:Pe,rightSectionPointerEvents:I??(D?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${M||"sm"})`,allowLeadingZeros:z,onBlur:G=>{if(b==null||b(G),v==="blur"&&typeof Y=="number"&&ff(Y,h,d)!==Y&&re(ff(Y,h,d)),$&&typeof Y=="string"){const ie=Y.replace(/^0+/,""),me=parseFloat(ie);re(Number.isNaN(me)?ie:me)}},isAllowed:G=>v==="strict"?y?y(G)&&eJ(G.floatValue,h,d):eJ(G.floatValue,h,d):y?y(G):!0})});jj.classes={...kl.classes,...A4};jj.displayName="@mantine/core/NumberInput";const[k4e,Zde]=Ps("Progress.Root component was not found in tree");var OT={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const R4e={},zj=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ie("ProgressLabel",R4e,e),u=Zde();return w.jsx(we,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});zj.classes=OT;zj.displayName="@mantine/core/ProgressLabel";const P4e={},O4e=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":cn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Kr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),pP=Ve((e,t)=>{const n=Ie("ProgressRoot",P4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Et({name:"Progress",classes:OT,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:O4e});return w.jsx(k4e,{value:{getStyles:d,autoContrast:l},children:w.jsx(we,{ref:t,...d("root"),...f})})});pP.classes=OT;pP.displayName="@mantine/core/ProgressRoot";const M4e={withAria:!0},mP=Ve((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ie("ProgressSection",M4e,e),p=Zde(),m=Os(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return w.jsx(we,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Gr(l,m),"--progress-label-color":o_(p.autoContrast,m)?gy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});mP.classes=OT;mP.displayName="@mantine/core/ProgressSection";const $4e={},m_=Ve((e,t)=>{const n=Ie("Progress",$4e,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=kh({classNames:i,styles:s,props:n});return w.jsx(pP,{ref:t,classNames:d,styles:h,vars:o,...f,children:w.jsx(mP,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});m_.classes=OT;m_.displayName="@mantine/core/Progress";m_.Section=mP;m_.Root=pP;m_.Label=zj;const[F4e,ehe]=s_(),[L4e,B4e]=s_();var the={card:"m_9dc8ae12"};const j4e={withBorder:!0},z4e=(e,{radius:t})=>({card:{"--card-radius":Kr(t)}}),Uj=Ve((e,t)=>{const n=Ie("RadioCard",j4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Et({name:"RadioCard",classes:the,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:z4e,rootSelector:"card"}),{dir:v}=Rh(),b=ehe(),E=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,_=p||(b==null?void 0:b.name),x=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${_||"__mantine"}"]`)),A=C.findIndex(O=>O===S.target),D=A+1>=C.length?0:A+1,I=A-1<0?C.length-1:A-1;S.nativeEvent.code==="ArrowDown"&&(C[D].focus(),C[D].click()),S.nativeEvent.code==="ArrowUp"&&(C[I].focus(),C[I].click()),S.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?I:D].focus(),C[v==="ltr"?I:D].click()),S.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?D:I].focus(),C[v==="ltr"?D:I].click())}};return w.jsx(L4e,{value:{checked:E},children:w.jsx(Yi,{ref:t,mod:[{"with-border":f,checked:E},c],...y("card"),...g,role:"radio","aria-checked":E,name:_,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:x})})});Uj.displayName="@mantine/core/RadioCard";Uj.classes=the;const U4e={},gP=Ve((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ie("RadioGroup",U4e,e),f=ya(u),[d,h]=ks({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return w.jsx(F4e,{value:{value:d,onChange:p,size:s,name:f},children:w.jsx(Yr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:w.jsx(bj,{role:"radiogroup",children:a})})})});gP.classes=Yr.Wrapper.classes;gP.displayName="@mantine/core/RadioGroup";function nhe({size:e,style:t,...n}){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ne(e),height:Ne(e),...t},"aria-hidden":!0,...n,children:w.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var rhe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const V4e={icon:nhe},H4e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Uf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":cn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Kr(t),"--radio-color":s==="outline"?u:Gr(n,e),"--radio-icon-size":cn(r,"radio-icon-size"),"--radio-icon-color":i?Gr(i,e):o_(o,e)?gy({color:n,theme:e,autoContrast:o}):void 0}}},Vj=Ve((e,t)=>{const n=Ie("RadioIndicator",V4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,E=Et({name:"RadioIndicator",classes:rhe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:H4e,rootSelector:"indicator"}),_=B4e(),x=typeof p=="boolean"?p:(_==null?void 0:_.checked)||!1;return w.jsx(we,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:x,disabled:y},m],...v,children:w.jsx(b,{...E("icon")})})});Vj.displayName="@mantine/core/RadioIndicator";Vj.classes=rhe;var ihe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const q4e={labelPosition:"right"},W4e=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Uf({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":cn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Kr(n),"--radio-color":s==="outline"?u:Gr(r,e),"--radio-icon-color":i?Gr(i,e):o_(o,e)?gy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":cn(t,"radio-icon-size")}}},ph=Ve((e,t)=>{const n=Ie("Radio",q4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:E=nhe,rootRef:_,iconColor:x,onChange:S,mod:C,...A}=n,D=Et({name:"Radio",classes:ihe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:W4e}),I=ehe(),O=(I==null?void 0:I.size)??c,R=n.size?c:O,{styleProps:M,rest:F}=yy(A),P=ya(l),j=I?{checked:I.value===F.value,name:F.name??I.name,onChange:z=>{I.onChange(z),S==null||S(z)}}:{};return w.jsx(YR,{...D("root"),__staticSelector:"Radio",__stylesApiProps:n,id:P,size:R,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":j.checked||void 0,variant:y,ref:_,mod:C,...M,...b,children:w.jsxs(we,{...D("inner"),mod:{"label-position":d},children:[w.jsx(we,{...D("radio",{focusable:!0,variant:y}),onChange:S,...F,...j,component:"input",mod:{error:!!p},ref:t,id:P,disabled:v,type:"radio"}),w.jsx(E,{...D("icon"),"aria-hidden":!0})]})})});ph.classes=ihe;ph.displayName="@mantine/core/Radio";ph.Group=gP;ph.Card=Uj;ph.Indicator=Vj;const G4e={duration:100,transition:"fade"};function Y4e(e,t){return{...G4e,...t,...e}}function K4e({offset:e,position:t}){const[n,r]=k.useState(!1),i=k.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=B7({placement:t,middleware:[M7({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=k.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return k.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Yd(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var yP={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const X4e={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Dl("popover")},Q4e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Kr(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Hj=Ve((e,t)=>{const n=Ie("TooltipFloating",X4e,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:E,portalProps:_,...x}=n,S=Os(),C=Et({name:"TooltipFloating",props:n,classes:yP,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:Q4e}),{handleMouseMove:A,x:D,y:I,opened:O,boundaryRef:R,floating:M,setOpened:F}=K4e({offset:p,position:m});if(!Um(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const P=ds(R,r.ref,t),j=V=>{var $,U;(U=($=r.props).onMouseEnter)==null||U.call($,V),A(V),F(!0)},z=V=>{var $,U;(U=($=r.props).onMouseLeave)==null||U.call($,V),F(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(AT,{..._,withinPortal:s,children:w.jsx(we,{...x,...C("tooltip",{style:{..._7(o,S),zIndex:y,display:!v&&O?"block":"none",top:(I&&Math.round(I))??"",left:(D&&Math.round(D))??""}}),variant:b,ref:M,mod:{multiline:g},children:h})}),k.cloneElement(r,{...r.props,[i]:P,onMouseEnter:j,onMouseLeave:z})]})});Hj.classes=yP;Hj.displayName="@mantine/core/TooltipFloating";const she=k.createContext(!1),J4e=she.Provider,Z4e=()=>k.useContext(she),e5e={openDelay:0,closeDelay:0};function ohe(e){const{openDelay:t,closeDelay:n,children:r}=Ie("TooltipGroup",e5e,e);return w.jsx(J4e,{value:!0,children:w.jsx(n$e,{delay:{open:t,close:n},children:r})})}ohe.displayName="@mantine/core/TooltipGroup";function t5e(e){var x,S,C;const[t,n]=k.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Z4e(),o=ya(),{delay:a,currentId:u,setCurrentId:l}=Wfe(),c=k.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=B7({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[zfe(e.offset),M7({padding:8}),x4(),Ufe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[S4()]:[]]}),{getReferenceProps:b,getFloatingProps:E}=l$e([t$e(h,{enabled:(x=e.events)==null?void 0:x.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),u$e(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),f$e(h,{role:"tooltip"}),o$e(h,{enabled:typeof e.opened>"u"}),r$e(h,{id:o})]);Zfe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),ch(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const _=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:b,isGroupPhase:_,opened:i,placement:g}}const tJ={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Dl("popover"),positionDependencies:[]},n5e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Kr(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Wi=Ve((e,t)=>{const n=Ie("Tooltip",tJ,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:E,arrowOffset:_,arrowRadius:x,arrowPosition:S,offset:C,transitionProps:A,multiline:D,events:I,zIndex:O,disabled:R,positionDependencies:M,onClick:F,onMouseEnter:P,onMouseLeave:j,inline:z,variant:V,keepMounted:$,vars:U,portalProps:W,mod:B,floatingStrategy:q,...Y}=Ie("Tooltip",tJ,n),{dir:re}=Rh(),pe=k.useRef(null),_e=t5e({position:Gfe(re,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:I,arrowRef:pe,arrowOffset:_,offset:typeof C=="number"?C+(b?E/2:0):C,positionDependencies:[...M,r],inline:z,strategy:q}),de=Et({name:"Tooltip",props:n,classes:yP,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:n5e});if(!Um(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=ds(_e.reference,r.ref,t),Ce=Y4e(A,{duration:100,transition:"fade"});return w.jsxs(w.Fragment,{children:[w.jsx(AT,{...W,withinPortal:f,children:w.jsx(Oh,{...Ce,keepMounted:$,mounted:!R&&!!_e.opened,duration:_e.isGroupPhase?10:Ce.duration,children:ve=>w.jsxs(we,{...Y,variant:V,mod:[{multiline:D},B],..._e.getFloatingProps({ref:_e.floating,className:de("tooltip").className,style:{...de("tooltip").style,...ve,zIndex:O,top:_e.y??0,left:_e.x??0}}),children:[o,w.jsx(j7,{ref:pe,arrowX:_e.arrowX,arrowY:_e.arrowY,visible:b,position:_e.placement,arrowSize:E,arrowOffset:_,arrowRadius:x,arrowPosition:S,...de("arrow")})]})})}),k.cloneElement(r,_e.getReferenceProps({onClick:F,onMouseEnter:P,onMouseLeave:j,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Ai(v,r.props.className),...r.props}))]})});Wi.classes=yP;Wi.displayName="@mantine/core/Tooltip";Wi.Floating=Hj;Wi.Group=ohe;const r5e={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},MT=Ve((e,t)=>{const n=Ie("Select",r5e,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:E,readOnly:_,disabled:x,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:D,size:I,searchable:O,rightSection:R,checkIconPosition:M,withCheckIcon:F,nothingFoundMessage:P,name:j,form:z,searchValue:V,defaultSearchValue:$,onSearchChange:U,allowDeselect:W,error:B,rightSectionPointerEvents:q,id:Y,clearable:re,clearButtonProps:pe,hiddenInputProps:_e,renderOption:de,onClear:ye,autoComplete:Ce,scrollAreaProps:ve,...qe}=n,He=k.useMemo(()=>mde(m),[m]),ht=k.useMemo(()=>oj(He),[He]),rt=ya(Y),[Pe,Be,Xe]=ks({value:g,defaultValue:y,finalValue:null,onChange:p}),mt=typeof Pe=="string"?ht[Pe]:void 0,[Ft,bt]=ks({value:V,defaultValue:$,finalValue:mt?mt.label:"",onChange:U}),G=yj({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),G.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),G.resetSelectedOption()}}),{resolvedClassNames:ie,resolvedStyles:me}=kh({props:n,styles:i,classNames:r});k.useEffect(()=>{v&&G.selectFirstOption()},[v,Pe]),k.useEffect(()=>{g===null&&bt(""),typeof g=="string"&&mt&&bt(mt.label)},[g,mt]);const J=re&&!!Pe&&!x&&!_&&w.jsx(Bn.ClearButton,{size:I,...pe,onClear:()=>{Be(null,null),bt(""),ye==null||ye()}});return w.jsxs(w.Fragment,{children:[w.jsxs(Bn,{store:G,__staticSelector:"Select",classNames:ie,styles:me,unstyled:s,readOnly:_,onOptionSubmit:se=>{b==null||b(se);const ce=W&&ht[se].value===Pe?null:ht[se],Se=ce?ce.value:null;Be(Se,ce),!Xe&&bt(typeof Se=="string"&&(ce==null?void 0:ce.label)||""),G.closeDropdown()},size:I,...E,children:[w.jsx(Bn.Target,{targetType:O?"input":"button",autoComplete:Ce,children:w.jsx(kl,{id:rt,ref:t,rightSection:R||J||w.jsx(Bn.Chevron,{size:I,error:B,unstyled:s}),rightSectionPointerEvents:q||(J?"all":"none"),...qe,size:I,__staticSelector:"Select",disabled:x,readOnly:_||!O,value:Ft,onChange:se=>{bt(se.currentTarget.value),G.openDropdown(),v&&G.selectFirstOption()},onFocus:se=>{O&&G.openDropdown(),f==null||f(se)},onBlur:se=>{var ce;O&&G.closeDropdown(),bt(Pe!=null&&((ce=ht[Pe])==null?void 0:ce.label)||""),d==null||d(se)},onClick:se=>{O?G.openDropdown():G.toggleDropdown(),h==null||h(se)},classNames:ie,styles:me,unstyled:s,pointer:!O,error:B})}),w.jsx(Pde,{data:He,hidden:_||x,filter:S,search:Ft,limit:C,hiddenWhenEmpty:!O||!P,withScrollArea:A,maxDropdownHeight:D,filterOptions:O&&(mt==null?void 0:mt.label)!==Ft,value:Pe,checkIconPosition:M,withCheckIcon:F,nothingFoundMessage:P,unstyled:s,labelId:qe.label?`${rt}-label`:void 0,"aria-label":qe.label?void 0:qe["aria-label"],renderOption:de,scrollAreaProps:ve})]}),w.jsx(Bn.HiddenInput,{value:Pe,name:j,form:z,disabled:x,..._e})]})});MT.classes={...kl.classes,...Bn.classes};MT.displayName="@mantine/core/Select";const[i5e,vP]=Ps("SliderProvider was not found in tree"),ahe=k.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=vP();return w.jsx(we,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});ahe.displayName="@mantine/core/SliderRoot";const uhe=k.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=vP(),[b,E]=k.useState(!1),_=l||s||b||h&&p;return w.jsxs(we,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{E(!0),typeof f=="function"&&f()},onBlur:()=>{E(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:x=>x.stopPropagation(),children:[m,w.jsx(Oh,{mounted:i!=null&&!!_,transition:"fade",duration:0,...u,children:x=>w.jsx("div",{...v("label",{style:x}),children:i})})]})});uhe.displayName="@mantine/core/SliderThumb";function lhe({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function s5e({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function che({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=vP();if(!e)return null;const u=e.map((l,c)=>k.createElement(we,{...a("markWrapper"),__vars:{"--mark-offset":`${lhe({value:l.value,min:t,max:n})}%`},key:c},w.jsx(we,{...a("mark"),mod:{filled:s5e({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&w.jsx("div",{...a("markLabel"),children:l.label})));return w.jsx("div",{children:u})}che.displayName="@mantine/core/SliderMarks";function fhe({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=vP();return w.jsx(w.Fragment,{children:w.jsx(we,{...u("trackContainer"),mod:{disabled:r},...o,children:w.jsxs(we,{...u("track"),mod:{inverted:s,disabled:r},children:[w.jsx(we,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,w.jsx(che,{...a,offset:i,disabled:r,inverted:s})]})})})}fhe.displayName="@mantine/core/SliderTrack";function o5e({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function $C(e,t){return parseFloat(e.toFixed(t))}function a5e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var dhe={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const u5e={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},l5e=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":cn(t,"slider-size"),"--slider-color":n?Gr(n,e):void 0,"--slider-radius":i===void 0?void 0:Kr(i),"--slider-thumb-size":r!==void 0?Ne(r):"calc(var(--slider-size) * 2)"}}),qj=Ve((e,t)=>{const n=Ie("Slider",u5e,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:E,thumbChildren:_,disabled:x,unstyled:S,scale:C,inverted:A,className:D,style:I,vars:O,hiddenInputProps:R,...M}=n,F=Et({name:"Slider",props:n,classes:dhe,classNames:r,className:D,styles:i,style:I,vars:O,varsResolver:l5e,unstyled:S}),{dir:P}=Rh(),[j,z]=k.useState(!1),[V,$]=ks({value:typeof s=="number"?ff(s,l,c):s,defaultValue:typeof h=="number"?ff(h,l,c):h,finalValue:ff(0,l,c),onChange:o}),U=k.useRef(V),W=k.useRef(),B=k.useRef(),q=lhe({value:V,min:l,max:c}),Y=C(V),re=typeof g=="function"?g(Y):g,pe=d??a5e(f),_e=k.useCallback(({x:ve})=>{if(!x){const qe=o5e({value:ve,min:l,max:c,step:f,precision:pe});$(qe),U.current=qe}},[x,l,c,f,pe,$]),{ref:de,active:ye}=l3e(_e,{onScrubEnd:()=>a==null?void 0:a(U.current)},P),Ce=ve=>{var qe,He,ht,rt,Pe,Be;if(!x)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(qe=B.current)==null||qe.focus();const Xe=$C(Math.min(Math.max(V+f,l),c),pe);$(Xe),a==null||a(Xe);break}case"ArrowRight":{ve.preventDefault(),(He=B.current)==null||He.focus();const Xe=$C(Math.min(Math.max(P==="rtl"?V-f:V+f,l),c),pe);$(Xe),a==null||a(Xe);break}case"ArrowDown":{ve.preventDefault(),(ht=B.current)==null||ht.focus();const Xe=$C(Math.min(Math.max(V-f,l),c),pe);$(Xe),a==null||a(Xe);break}case"ArrowLeft":{ve.preventDefault(),(rt=B.current)==null||rt.focus();const Xe=$C(Math.min(Math.max(P==="rtl"?V+f:V-f,l),c),pe);$(Xe),a==null||a(Xe);break}case"Home":{ve.preventDefault(),(Pe=B.current)==null||Pe.focus(),$(l),a==null||a(l);break}case"End":{ve.preventDefault(),(Be=B.current)==null||Be.focus(),$(c),a==null||a(c);break}}};return w.jsx(i5e,{value:{getStyles:F},children:w.jsxs(ahe,{...M,ref:ds(t,W),onKeyDownCapture:Ce,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:x,children:[w.jsx(fhe,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:Y,disabled:x,containerProps:{ref:de,onMouseEnter:E?()=>z(!0):void 0,onMouseLeave:E?()=>z(!1):void 0},children:w.jsx(uhe,{max:c,min:l,value:Y,position:q,dragging:ye,label:re,ref:B,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:E,isHovered:j,disabled:x,children:_})}),w.jsx("input",{type:"hidden",name:p,value:Y,...R})]})})});qj.classes=dhe;qj.displayName="@mantine/core/Slider";const c5e={},pl=Ve((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ie("Space",c5e,e);return w.jsx(we,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});pl.displayName="@mantine/core/Space";var hhe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const f5e={maxHeight:100,initialState:!1},d5e=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),Wj=Ve((e,t)=>{const n=Ie("Spoiler",f5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Et({name:"Spoiler",classes:hhe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:d5e}),b=ya(g),E=`${b}-region`,[_,x]=k.useState(l),{ref:S,height:C}=f3e(),A=_?f:d,D=A!==null&&c<C;return w.jsxs(we,{...v("root"),id:b,ref:t,"data-has-spoiler":D||void 0,...y,children:[D&&w.jsx(c_,{component:"button",type:"button",ref:p,onClick:()=>x(I=>!I),"aria-expanded":_,"aria-controls":E,...v("control"),children:A}),w.jsx("div",{...v("content",{style:{maxHeight:_?C?Ne(C):void 0:Ne(c)}}),"data-reduce-motion":!0,role:"region",id:E,children:w.jsx("div",{ref:S,children:h})})]})});Wj.classes=hhe;Wj.displayName="@mantine/core/Spoiler";var phe={root:"m_6d731127"};const h5e={gap:"md",align:"stretch",justify:"flex-start"},p5e=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":ku(t),"--stack-align":n,"--stack-justify":r}}),Hu=Ve((e,t)=>{const n=Ie("Stack",h5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Et({name:"Stack",props:n,classes:phe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:p5e});return w.jsx(we,{ref:t,...p("root"),variant:d,...h})});Hu.classes=phe;Hu.displayName="@mantine/core/Stack";const mhe=k.createContext(null),m5e=mhe.Provider,g5e=()=>k.useContext(mhe),y5e={},Gj=Ve((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ie("SwitchGroup",y5e,e),[c,f]=ks({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return w.jsx(m5e,{value:{value:c,onChange:d,size:s},children:w.jsx(Yr.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:w.jsx(bj,{role:"group",children:a})})})});Gj.classes=Yr.Wrapper.classes;Gj.displayName="@mantine/core/SwitchGroup";var ghe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const v5e={labelPosition:"right"},b5e=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Kr(t),"--switch-height":cn(r,"switch-height"),"--switch-width":cn(r,"switch-width"),"--switch-thumb-size":cn(r,"switch-thumb-size"),"--switch-label-font-size":cn(r,"switch-label-font-size"),"--switch-track-label-padding":cn(r,"switch-track-label-padding"),"--switch-color":n?Gr(n,e):void 0}}),xv=Ve((e,t)=>{const n=Ie("Switch",v5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:E,onChange:_,labelPosition:x,description:S,error:C,disabled:A,variant:D,rootRef:I,mod:O,...R}=n,M=g5e(),F=p||(M==null?void 0:M.size),P=Et({name:"Switch",props:n,classes:ghe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:b5e}),{styleProps:j,rest:z}=yy(R),V=ya(h),$=M?{checked:M.value.includes(z.value),onChange:M.onChange}:{},[U,W]=ks({value:$.checked??b,defaultValue:E,finalValue:!1});return w.jsxs(YR,{...P("root"),__staticSelector:"Switch",__stylesApiProps:n,id:V,size:F,labelPosition:x,label:c,description:S,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":$.checked||void 0,variant:D,ref:I,mod:O,...j,...g,children:[w.jsx("input",{...z,disabled:A,checked:U,onChange:B=>{var q;M?(q=$.onChange)==null||q.call($,B):_==null||_(B),W(B.currentTarget.checked)},id:V,ref:t,type:"checkbox",role:"switch",...P("input")}),w.jsxs(we,{"aria-hidden":"true",mod:{error:C,"label-position":x},...P("track"),children:[w.jsx(we,{component:"span",mod:"reduce-motion",...P("thumb"),children:v}),w.jsx("span",{...P("trackLabel"),children:U?d:f})]})]})});xv.classes={...ghe,...wde};xv.displayName="@mantine/core/Switch";xv.Group=Gj;const[_5e,E5e]=Ps("Table component was not found in the tree");var $T={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function w5e(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function wy(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Ve((i,s)=>{const o=Ie(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=E5e();return w.jsx(we,{component:e,ref:s,...w5e(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=$T,r}const D4=wy("th",{columnBorder:!0}),yhe=wy("td",{columnBorder:!0}),gD=wy("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),vhe=wy("thead",{stickyHeader:!0}),bhe=wy("tbody"),_he=wy("tfoot"),Ehe=wy("caption",{captionSide:!0});function Yj({data:e}){return w.jsxs(w.Fragment,{children:[e.caption&&w.jsx(Ehe,{children:e.caption}),e.head&&w.jsx(vhe,{children:w.jsx(gD,{children:e.head.map((t,n)=>w.jsx(D4,{children:t},n))})}),e.body&&w.jsx(bhe,{children:e.body.map((t,n)=>w.jsx(gD,{children:t.map((r,i)=>w.jsx(yhe,{children:r},i))},n))}),e.foot&&w.jsx(_he,{children:w.jsx(gD,{children:e.foot.map((t,n)=>w.jsx(D4,{children:t},n))})})]})}Yj.displayName="@mantine/core/TableDataRenderer";const x5e={type:"scrollarea"},S5e=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ne(t),"--table-overflow":n==="native"?"auto":void 0}}),Kj=Ve((e,t)=>{const n=Ie("TableScrollContainer",x5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Et({name:"TableScrollContainer",classes:$T,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:S5e,rootSelector:"scrollContainer"});return w.jsx(we,{component:f==="scrollarea"?vy:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:w.jsx("div",{...h("scrollContainerInner"),children:l})})});Kj.classes=$T;Kj.displayName="@mantine/core/TableScrollContainer";const T5e={withRowBorders:!0,verticalSpacing:7},C5e=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":ku(r),"--table-vertical-spacing":ku(i),"--table-border-color":s?Gr(s,e):void 0,"--table-striped-color":u&&o?Gr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Gr(a,e):void 0,"--table-sticky-header-offset":f?Ne(c):void 0}}),En=Ve((e,t)=>{const n=Ie("Table",T5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:E,variant:_,data:x,children:S,stickyHeader:C,stickyHeaderOffset:A,mod:D,...I}=n,O=Et({name:"Table",props:n,className:i,style:s,classes:$T,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:C5e});return w.jsx(_5e,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:w.jsx(we,{component:"table",variant:_,ref:t,mod:[{"data-with-table-border":v},D],...O("table"),...I,children:S||!!x&&w.jsx(Yj,{data:x})})})});En.classes=$T;En.displayName="@mantine/core/Table";En.Td=yhe;En.Th=D4;En.Tr=gD;En.Thead=vhe;En.Tbody=bhe;En.Tfoot=_he;En.Caption=Ehe;En.ScrollContainer=Kj;En.DataRenderer=Yj;const[A5e,Xj]=Ps("Tabs component was not found in the tree");var FT={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const D5e={},Qj=Ve((e,t)=>{const n=Ie("TabsList",D5e,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=Xj();return w.jsx(we,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});Qj.classes=FT;Qj.displayName="@mantine/core/TabsList";const I5e={},Jj=Ve((e,t)=>{const n=Ie("TabsPanel",I5e,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=Xj(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return w.jsx(we,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});Jj.classes=FT;Jj.displayName="@mantine/core/TabsPanel";const N5e={},Zj=Ve((e,t)=>{const n=Ie("TabsTab",N5e,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Os(),{dir:b}=Rh(),E=Xj(),_=a===E.value,x=C=>{E.onChange(E.allowTabDeactivation&&a===E.value?null:a),u==null||u(C)},S={classNames:h,styles:p,props:n};return w.jsxs(Yi,{...y,...E.getStyles("tab",{className:r,style:d,variant:E.variant,...S}),disabled:c,unstyled:E.unstyled,variant:E.variant,mod:[{active:_,disabled:c,orientation:E.orientation,inverted:E.inverted,placement:E.orientation==="vertical"&&E.placement},g],ref:t,role:"tab",id:E.getTabId(a),"aria-selected":_,tabIndex:_||E.value===null?0:-1,"aria-controls":E.getPanelId(a),onClick:x,__vars:{"--tabs-color":f?Gr(f,v):void 0},onKeyDown:c7({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:E.activateTabWithKeyboard,loop:E.loop,orientation:E.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&w.jsx("span",{...E.getStyles("tabSection",S),"data-position":"left",children:o}),i&&w.jsx("span",{...E.getStyles("tabLabel",S),children:i}),s&&w.jsx("span",{...E.getStyles("tabSection",S),"data-position":"right",children:s})]})});Zj.classes=FT;Zj.displayName="@mantine/core/TabsTab";const nJ="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",k5e={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},R5e=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Kr(t),"--tabs-color":Gr(n,e),"--tabs-text-color":o_(r,e)?gy({color:n,theme:e,autoContrast:r}):void 0}}),Ri=Ve((e,t)=>{const n=Ie("Tabs",k5e,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:E,className:_,style:x,vars:S,autoContrast:C,mod:A,...D}=n,I=ya(l),[O,R]=ks({value:i,defaultValue:r,finalValue:null,onChange:s}),M=Et({name:"Tabs",props:n,classes:FT,className:_,style:x,classNames:v,styles:b,unstyled:E,vars:S,varsResolver:R5e});return w.jsx(A5e,{value:{placement:g,value:O,orientation:o,id:I,loop:u,activateTabWithKeyboard:c,getTabId:$I(`${I}-tab`,nJ),getPanelId:$I(`${I}-panel`,nJ),onChange:R,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:E,getStyles:M},children:w.jsx(we,{ref:t,id:I,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...M("root"),...D,children:a})})});Ri.classes=FT;Ri.displayName="@mantine/core/Tabs";Ri.Tab=Zj;Ri.Panel=Jj;Ri.List=Qj;const P5e={},h0=Ve((e,t)=>{const n=Ie("TextInput",P5e,e);return w.jsx(kl,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});h0.classes=kl.classes;h0.displayName="@mantine/core/TextInput";const O5e=["h1","h2","h3","h4","h5","h6"];function M5e(e,t){const n=t!==void 0?t:`h${e}`;return O5e.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ne(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var whe={root:"m_8a5d1357"};const $5e={order:1},F5e=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=M5e(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ci=Ve((e,t)=>{const n=Ie("Title",$5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Et({name:"Title",props:n,classes:whe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:F5e});return[1,2,3,4,5,6].includes(u)?w.jsx(we,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ci.classes=whe;ci.displayName="@mantine/core/Title";const xhe=k.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Qi=()=>k.useContext(xhe);function L5e({children:e}){const[t,n]=xi.useState(void 0),r=xi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return w.jsx(xhe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pS.apply(this,arguments)}var Dp;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Dp||(Dp={}));const rJ="popstate";function B5e(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return I4("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:The(i)}return z5e(t,n,null,e)}function $i(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function She(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function j5e(){return Math.random().toString(36).substr(2,8)}function iJ(e,t){return{usr:e.state,key:e.key,idx:t}}function I4(e,t,n,r){return n===void 0&&(n=null),pS({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?g_(t):t,{state:n,key:t&&t.key||r||j5e()})}function The(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function g_(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function z5e(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Dp.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(pS({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Dp.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Dp.Push;let v=I4(m.location,g,y);l=c()+1;let b=iJ(v,l),E=m.createHref(v);try{o.pushState(b,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Dp.Replace;let v=I4(m.location,g,y);l=c();let b=iJ(v,l),E=m.createHref(v);o.replaceState(b,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:The(g);return v=v.replace(/ $/,"%20"),$i(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(rJ,f),u=g,()=>{i.removeEventListener(rJ,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var sJ;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sJ||(sJ={}));function U5e(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?g_(t):t,i=Dhe(r.pathname||"/",n);if(i==null)return null;let s=Che(e);V5e(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=t8e(i);o=J5e(s[a],u)}return o}function Che(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&($i(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Kp([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&($i(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Che(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:X5e(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Ahe(s.path))i(s,o,u)}),t}function Ahe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Ahe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function V5e(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Q5e(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const H5e=/^:[\w-]+$/,q5e=3,W5e=2,G5e=1,Y5e=10,K5e=-2,oJ=e=>e==="*";function X5e(e,t){let n=e.split("/"),r=n.length;return n.some(oJ)&&(r+=K5e),t&&(r+=W5e),n.filter(i=>!oJ(i)).reduce((i,s)=>i+(H5e.test(s)?q5e:s===""?G5e:Y5e),r)}function Q5e(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function J5e(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=Z5e({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Kp([i,c.pathname]),pathnameBase:s8e(Kp([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Kp([i,c.pathnameBase]))}return s}function Z5e(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=e8e(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function e8e(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),She(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function t8e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return She(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Dhe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function n8e(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?g_(e):e;return{pathname:n?n.startsWith("/")?n:r8e(n,t):t,search:o8e(r),hash:a8e(i)}}function r8e(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function V$(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i8e(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ez(e,t){let n=i8e(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tz(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=g_(e):(i=pS({},e),$i(!i.pathname||!i.pathname.includes("?"),V$("?","pathname","search",i)),$i(!i.pathname||!i.pathname.includes("#"),V$("#","pathname","hash",i)),$i(!i.search||!i.search.includes("#"),V$("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=n8e(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Kp=e=>e.join("/").replace(/\/\/+/g,"/"),s8e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),o8e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,a8e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function u8e(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ihe=["post","put","patch","delete"];new Set(Ihe);const l8e=["get",...Ihe];new Set(l8e);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mS(){return mS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mS.apply(this,arguments)}const nz=k.createContext(null),c8e=k.createContext(null),xy=k.createContext(null),bP=k.createContext(null),Hf=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Nhe=k.createContext(null);function khe(e,t){let{relative:n}={};y_()||$i(!1);let{basename:r,navigator:i}=k.useContext(xy),{hash:s,pathname:o,search:a}=p8e(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Kp([r,o])),i.createHref({pathname:u,search:a,hash:s})}function y_(){return k.useContext(bP)!=null}function Sy(){return y_()||$i(!1),k.useContext(bP).location}function Rhe(e){k.useContext(xy).static||k.useLayoutEffect(e)}function Lh(){let{isDataRoute:e}=k.useContext(Hf);return e?T8e():f8e()}function f8e(){y_()||$i(!1);let e=k.useContext(nz),{basename:t,future:n,navigator:r}=k.useContext(xy),{matches:i}=k.useContext(Hf),{pathname:s}=Sy(),o=JSON.stringify(ez(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return Rhe(()=>{a.current=!0}),k.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=tz(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Kp([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const d8e=k.createContext(null);function h8e(e){let t=k.useContext(Hf).outlet;return t&&k.createElement(d8e.Provider,{value:e},t)}function R0(){let{matches:e}=k.useContext(Hf),t=e[e.length-1];return t?t.params:{}}function p8e(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext(xy),{matches:i}=k.useContext(Hf),{pathname:s}=Sy(),o=JSON.stringify(ez(i,r.v7_relativeSplatPath));return k.useMemo(()=>tz(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Phe(e,t){return m8e(e,t)}function m8e(e,t,n,r){y_()||$i(!1);let{navigator:i}=k.useContext(xy),{matches:s}=k.useContext(Hf),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Sy(),c;if(t){var f;let g=typeof t=="string"?g_(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||$i(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=U5e(e,{pathname:h}),m=_8e(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Kp([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:Kp([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?k.createElement(bP.Provider,{value:{location:mS({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Dp.Pop}},m):m}function g8e(){let e=S8e(),t=u8e(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,null)}const y8e=k.createElement(g8e,null);class v8e extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(Hf.Provider,{value:this.props.routeContext},k.createElement(Nhe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b8e(e){let{routeContext:t,match:n,children:r}=e,i=k.useContext(nz);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Hf.Provider,{value:t},r)}function _8e(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||$i(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||y8e,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=k.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,k.createElement(b8e,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?k.createElement(v8e,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Ohe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ohe||{}),qI=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(qI||{});function E8e(e){let t=k.useContext(nz);return t||$i(!1),t}function w8e(e){let t=k.useContext(c8e);return t||$i(!1),t}function x8e(e){let t=k.useContext(Hf);return t||$i(!1),t}function Mhe(e){let t=x8e(),n=t.matches[t.matches.length-1];return n.route.id||$i(!1),n.route.id}function S8e(){var e;let t=k.useContext(Nhe),n=w8e(qI.UseRouteError),r=Mhe(qI.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function T8e(){let{router:e}=E8e(Ohe.UseNavigateStable),t=Mhe(qI.UseNavigateStable),n=k.useRef(!1);return Rhe(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,mS({fromRouteId:t},s)))},[e,t])}function rz(e){let{to:t,replace:n,state:r,relative:i}=e;y_()||$i(!1);let{future:s,static:o}=k.useContext(xy),{matches:a}=k.useContext(Hf),{pathname:u}=Sy(),l=Lh(),c=tz(t,ez(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return k.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function C8e(e){return h8e(e.context)}function xd(e){$i(!1)}function A8e(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Dp.Pop,navigator:s,static:o=!1,future:a}=e;y_()&&$i(!1);let u=t.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:u,navigator:s,static:o,future:mS({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=g_(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=k.useMemo(()=>{let g=Dhe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:k.createElement(xy.Provider,{value:l},k.createElement(bP.Provider,{children:n,value:m}))}function D8e(e){let{children:t,location:n}=e;return Phe(N4(t),n)}new Promise(()=>{});function N4(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let s=[...t,i];if(r.type===k.Fragment){n.push.apply(n,N4(r.props.children,s));return}r.type!==xd&&$i(!1),!r.props.index||!r.props.children||$i(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=N4(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function k4(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function I8e(e,t){let n=k4(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const N8e="6";try{window.__reactRouterVersion=N8e}catch{}const k8e="startTransition",aJ=cI[k8e];function R8e(e){let{basename:t,children:n,future:r,window:i}=e,s=k.useRef();s.current==null&&(s.current=B5e({window:i,v5Compat:!0}));let o=s.current,[a,u]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=k.useCallback(f=>{l&&aJ?aJ(()=>u(f)):u(f)},[u,l]);return k.useLayoutEffect(()=>o.listen(c),[o,c]),k.createElement(A8e,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var uJ;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uJ||(uJ={}));var lJ;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lJ||(lJ={}));function iz(e){let t=k.useRef(k4(e)),n=k.useRef(!1),r=Sy(),i=k.useMemo(()=>I8e(r.search,n.current?null:t.current),[r.search]),s=Lh(),o=k.useCallback((a,u)=>{const l=k4(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const sz=k.createContext(null);sz.displayName="@mantine/modals/ModalsContext";function P8e(){const e=k.useContext(sz);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function O8e({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=P8e(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return w.jsxs(w.Fragment,{children:[l&&w.jsx(we,{mb:"md",children:l}),w.jsxs(cs,{justify:"flex-end",...o,children:[w.jsx(In,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),w.jsx(In,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[M8e,_P]=h3e("mantine-modals");_P("openModal");_P("closeModal");_P("closeAllModals");const R4=_P("openConfirmModal");function cJ(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function $8e(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;cJ(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{cJ(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function F8e(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function L8e({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=k.useReducer($8e,{modals:[],current:null}),o=k.useRef(i);o.current=i;const a=k.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=k.useCallback(({modalId:g,...y})=>{const v=g||ix();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=k.useCallback(({modalId:g,...y})=>{const v=g||ix();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=k.useCallback((g,{modalId:y,...v})=>{const b=y||ix();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=k.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);M8e({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:w.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=F8e(g.props);return{modalProps:y,content:w.jsx(O8e,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:w.jsx(w.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return w.jsxs(sz.Provider,{value:d,children:[w.jsx(Ki,{zIndex:Dl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B8e={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=(e,t,n,r)=>{const i=k.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>k.createElement("svg",{ref:f,...B8e[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>k.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var j8e=Ir("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fJ=Ir("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z8e=Ir("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var U8e=Ir("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V8e=Ir("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H8e=Ir("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var q8e=Ir("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var W8e=Ir("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $he=Ir("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G8e=Ir("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y8e=Ir("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var K8e=Ir("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fhe=Ir("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var X8e=Ir("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q8e=Ir("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var J8e=Ir("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lhe=Ir("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z8e=Ir("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var e9e=Ir("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var t9e=Ir("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bhe=Ir("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jhe=Ir("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n9e=Ir("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zhe=Ir("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oz=Ir("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var az=Ir("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var r9e=Ir("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Uhe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const qf="/study/";function dJ(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Vhe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const i9e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,s9e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,o9e={};function hJ(e,t){return(o9e.jsx?s9e:i9e).test(e)}const a9e=/[ \t\n\f\r]/g;function u9e(e){return typeof e=="object"?e.type==="text"?pJ(e.value):!1:pJ(e)}function pJ(e){return e.replace(a9e,"")===""}class LT{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}LT.prototype.property={};LT.prototype.normal={};LT.prototype.space=null;function Hhe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new LT(n,r,t)}function gS(e){return e.toLowerCase()}let Pl=class{constructor(t,n){this.property=t,this.attribute=n}};Pl.prototype.space=null;Pl.prototype.boolean=!1;Pl.prototype.booleanish=!1;Pl.prototype.overloadedBoolean=!1;Pl.prototype.number=!1;Pl.prototype.commaSeparated=!1;Pl.prototype.spaceSeparated=!1;Pl.prototype.commaOrSpaceSeparated=!1;Pl.prototype.mustUseProperty=!1;Pl.prototype.defined=!1;let l9e=0;const mn=Ty(),zi=Ty(),qhe=Ty(),ut=Ty(),Nr=Ty(),Sv=Ty(),cu=Ty();function Ty(){return 2**++l9e}const P4=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:zi,commaOrSpaceSeparated:cu,commaSeparated:Sv,number:ut,overloadedBoolean:qhe,spaceSeparated:Nr},Symbol.toStringTag,{value:"Module"})),H$=Object.keys(P4);class uz extends Pl{constructor(t,n,r,i){let s=-1;if(super(t,n),mJ(this,"space",i),typeof r=="number")for(;++s<H$.length;){const o=H$[s];mJ(this,H$[s],(r&P4[o])===P4[o])}}}uz.prototype.defined=!0;function mJ(e,t,n){n&&(e[t]=n)}const c9e={}.hasOwnProperty;function v_(e){const t={},n={};let r;for(r in e.properties)if(c9e.call(e.properties,r)){const i=e.properties[r],s=new uz(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[gS(r)]=r,n[gS(s.attribute)]=r}return new LT(t,n,e.space)}const Whe=v_({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Ghe=v_({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Yhe(e,t){return t in e?e[t]:t}function Khe(e,t){return Yhe(e,t.toLowerCase())}const Xhe=v_({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Khe,properties:{xmlns:null,xmlnsXLink:null}}),Qhe=v_({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:zi,ariaAutoComplete:null,ariaBusy:zi,ariaChecked:zi,ariaColCount:ut,ariaColIndex:ut,ariaColSpan:ut,ariaControls:Nr,ariaCurrent:null,ariaDescribedBy:Nr,ariaDetails:null,ariaDisabled:zi,ariaDropEffect:Nr,ariaErrorMessage:null,ariaExpanded:zi,ariaFlowTo:Nr,ariaGrabbed:zi,ariaHasPopup:null,ariaHidden:zi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Nr,ariaLevel:ut,ariaLive:null,ariaModal:zi,ariaMultiLine:zi,ariaMultiSelectable:zi,ariaOrientation:null,ariaOwns:Nr,ariaPlaceholder:null,ariaPosInSet:ut,ariaPressed:zi,ariaReadOnly:zi,ariaRelevant:null,ariaRequired:zi,ariaRoleDescription:Nr,ariaRowCount:ut,ariaRowIndex:ut,ariaRowSpan:ut,ariaSelected:zi,ariaSetSize:ut,ariaSort:null,ariaValueMax:ut,ariaValueMin:ut,ariaValueNow:ut,ariaValueText:null,role:null}}),f9e=v_({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Khe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Sv,acceptCharset:Nr,accessKey:Nr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Nr,autoFocus:mn,autoPlay:mn,blocking:Nr,capture:null,charSet:null,checked:mn,cite:null,className:Nr,cols:ut,colSpan:null,content:null,contentEditable:zi,controls:mn,controlsList:Nr,coords:ut|Sv,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:qhe,draggable:zi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Nr,height:ut,hidden:mn,high:ut,href:null,hrefLang:null,htmlFor:Nr,httpEquiv:Nr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Nr,itemRef:Nr,itemScope:mn,itemType:Nr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:ut,manifest:null,max:null,maxLength:ut,media:null,method:null,min:null,minLength:ut,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:ut,pattern:null,ping:Nr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Nr,required:mn,reversed:mn,rows:ut,rowSpan:ut,sandbox:Nr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:ut,sizes:null,slot:null,span:ut,spellCheck:zi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ut,step:null,style:null,tabIndex:ut,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:zi,width:ut,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Nr,axis:null,background:null,bgColor:null,border:ut,borderColor:null,bottomMargin:ut,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:ut,leftMargin:ut,link:null,longDesc:null,lowSrc:null,marginHeight:ut,marginWidth:ut,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:ut,rules:null,scheme:null,scrolling:zi,standby:null,summary:null,text:null,topMargin:ut,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ut,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:ut,security:null,unselectable:null}}),d9e=v_({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Yhe,properties:{about:cu,accentHeight:ut,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ut,amplitude:ut,arabicForm:null,ascent:ut,attributeName:null,attributeType:null,azimuth:ut,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ut,by:null,calcMode:null,capHeight:ut,className:Nr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ut,diffuseConstant:ut,direction:null,display:null,dur:null,divisor:ut,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:ut,enableBackground:null,end:null,event:null,exponent:ut,externalResourcesRequired:null,fill:null,fillOpacity:ut,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Sv,g2:Sv,glyphName:Sv,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ut,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ut,horizOriginX:ut,horizOriginY:ut,id:null,ideographic:ut,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ut,k:ut,k1:ut,k2:ut,k3:ut,k4:ut,kernelMatrix:cu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ut,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ut,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ut,overlineThickness:ut,paintOrder:null,panose1:null,path:null,pathLength:ut,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Nr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ut,pointsAtY:ut,pointsAtZ:ut,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cu,rev:cu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cu,requiredFeatures:cu,requiredFonts:cu,requiredFormats:cu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ut,specularExponent:ut,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ut,strikethroughThickness:ut,string:null,stroke:null,strokeDashArray:cu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ut,strokeOpacity:ut,strokeWidth:null,style:null,surfaceScale:ut,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cu,tabIndex:ut,tableValues:null,target:null,targetX:ut,targetY:ut,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ut,underlineThickness:ut,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ut,values:null,vAlphabetic:ut,vMathematical:ut,vectorEffect:null,vHanging:ut,vIdeographic:ut,version:null,vertAdvY:ut,vertOriginX:ut,vertOriginY:ut,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ut,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),h9e=/^data[-\w.:]+$/i,gJ=/-[a-z]/g,p9e=/[A-Z]/g;function EP(e,t){const n=gS(t);let r=t,i=Pl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&h9e.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(gJ,g9e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!gJ.test(s)){let o=s.replace(p9e,m9e);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=uz}return new i(r,t)}function m9e(e){return"-"+e.toLowerCase()}function g9e(e){return e.charAt(1).toUpperCase()}const y9e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},BT=Hhe([Ghe,Whe,Xhe,Qhe,f9e],"html"),Gm=Hhe([Ghe,Whe,Xhe,Qhe,d9e],"svg");function yJ(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Jhe(e){return e.join(" ").trim()}var Zhe={},vJ=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,v9e=/\n/g,b9e=/^\s*/,_9e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,E9e=/^:\s*/,w9e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,x9e=/^[;\s]*/,S9e=/^\s+|\s+$/g,T9e=`
`,bJ="/",_J="*",zg="",C9e="comment",A9e="declaration",D9e=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(v9e);m&&(n+=m.length);var g=p.lastIndexOf(T9e);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(b9e)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(bJ!=e.charAt(0)||_J!=e.charAt(1))){for(var m=2;zg!=e.charAt(m)&&(_J!=e.charAt(m)||bJ!=e.charAt(m+1));)++m;if(m+=2,zg===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:C9e,comment:g})}}function d(){var p=s(),m=u(_9e);if(m){if(f(),!u(E9e))return a("property missing ':'");var g=u(w9e),y=p({type:A9e,property:EJ(m[0].replace(vJ,zg)),value:g?EJ(g[0].replace(vJ,zg)):zg});return u(x9e),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function EJ(e){return e?e.replace(S9e,zg):zg}var I9e=Hr&&Hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zhe,"__esModule",{value:!0});var N9e=I9e(D9e);function k9e(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,N9e.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var wJ=Zhe.default=k9e;const R9e=wJ.default||wJ,wP=epe("end"),Wf=epe("start");function epe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function P9e(e){const t=Wf(e),n=wP(e);if(t&&n)return{start:t,end:n}}function sx(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?xJ(e.position):"start"in e||"end"in e?xJ(e):"line"in e||"column"in e?O4(e):""}function O4(e){return SJ(e&&e.line)+":"+SJ(e&&e.column)}function xJ(e){return O4(e&&e.start)+"-"+O4(e&&e.end)}function SJ(e){return e&&typeof e=="number"?e:1}class Uo extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=sx(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Uo.prototype.file="";Uo.prototype.name="";Uo.prototype.reason="";Uo.prototype.message="";Uo.prototype.stack="";Uo.prototype.column=void 0;Uo.prototype.line=void 0;Uo.prototype.ancestors=void 0;Uo.prototype.cause=void 0;Uo.prototype.fatal=void 0;Uo.prototype.place=void 0;Uo.prototype.ruleId=void 0;Uo.prototype.source=void 0;const lz={}.hasOwnProperty,O9e=new Map,M9e=/[A-Z]/g,$9e=/-([a-z])/g,F9e=new Set(["table","tbody","thead","tfoot","tr"]),L9e=new Set(["td","th"]),tpe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function B9e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=G9e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=W9e(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Gm:BT,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=npe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function npe(e,t,n){if(t.type==="element")return j9e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return z9e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return V9e(e,t,n);if(t.type==="mdxjsEsm")return U9e(e,t);if(t.type==="root")return H9e(e,t,n);if(t.type==="text")return q9e(e,t)}function j9e(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Gm,e.schema=i),e.ancestors.push(t);const s=ipe(e,t.tagName,!1),o=Y9e(e,t);let a=fz(e,t);return F9e.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!u9e(u):!0})),rpe(e,o,s,t),cz(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function z9e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}yS(e,t.position)}function U9e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);yS(e,t.position)}function V9e(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Gm,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:ipe(e,t.name,!0),o=K9e(e,t),a=fz(e,t);return rpe(e,o,s,t),cz(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function H9e(e,t,n){const r={};return cz(r,fz(e,t)),e.create(t,e.Fragment,r,n)}function q9e(e,t){return t.value}function rpe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function cz(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function W9e(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function G9e(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Wf(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Y9e(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&lz.call(t.properties,i)){const s=X9e(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&L9e.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function K9e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else yS(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else yS(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function fz(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:O9e;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=npe(e,s,o);a!==void 0&&n.push(a)}return n}function X9e(e,t,n){const r=EP(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Vhe(n):Jhe(n)),r.property==="style"){let i=typeof n=="object"?n:Q9e(e,String(n));return e.stylePropertyNameCase==="css"&&(i=J9e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?y9e[r.property]||r.property:r.attribute,n]}}function Q9e(e,t){const n={};try{R9e(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Uo("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=tpe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace($9e,eBe)),n[o]=s}}function ipe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=hJ(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=hJ(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return lz.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);yS(e)}function yS(e,t){const n=new Uo("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=tpe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function J9e(e){const t={};let n;for(n in e)lz.call(e,n)&&(t[Z9e(n)]=e[n]);return t}function Z9e(e){let t=e.replace(M9e,tBe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function eBe(e,t){return t.toUpperCase()}function tBe(e){return"-"+e.toLowerCase()}const q$={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},nBe={};function rBe(e,t){const n=nBe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return spe(e,r,i)}function spe(e,t,n){if(iBe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return TJ(e.children,t,n)}return Array.isArray(e)?TJ(e,t,n):""}function TJ(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=spe(e[i],t,n);return r.join("")}function iBe(e){return!!(e&&typeof e=="object")}const CJ=document.createElement("i");function dz(e){const t="&"+e+";";CJ.innerHTML=t;const n=CJ.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function mh(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function nl(e,t){return e.length>0?(mh(e,e.length,0,t),e):t}const AJ={}.hasOwnProperty;function sBe(e){const t={};let n=-1;for(;++n<e.length;)oBe(t,e[n]);return t}function oBe(e,t){let n;for(n in t){const i=(AJ.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){AJ.call(i,o)||(i[o]=[]);const a=s[o];aBe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function aBe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mh(e,0,0,r)}function ope(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Tv(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const of=Ym(/[A-Za-z]/),_u=Ym(/[\dA-Za-z]/),uBe=Ym(/[#-'*+\--9=?A-Z^-~]/);function M4(e){return e!==null&&(e<32||e===127)}const $4=Ym(/\d/),lBe=Ym(/[\dA-Fa-f]/),cBe=Ym(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function qa(e){return e!==null&&(e<0||e===32)}function rr(e){return e===-2||e===-1||e===32}const fBe=Ym(new RegExp("\\p{P}|\\p{S}","u")),dBe=Ym(/\s/);function Ym(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function b_(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&_u(e.charCodeAt(n+1))&&_u(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Or(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return rr(u)?(e.enter(n),a(u)):t(u)}function a(u){return rr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const hBe={tokenize:pBe};function pBe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Or(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const mBe={tokenize:gBe},DJ={tokenize:yBe};function gBe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const E=t.events.length;let _=E,x;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){x=t.events[_][1].end;break}y(r);let S=E;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},x),S++;return mh(t.events,_+1,0,t.events.slice(E)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(DJ,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(DJ,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return en(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,E){const _=t.sliceStream(b);if(E&&_.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(_),t.parser.lazy[b.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const S=t.events.length;let C=S,A,D;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){D=t.events[C][1].end;break}A=!0}for(y(r),x=S;x<t.events.length;)t.events[x][1].end=Object.assign({},D),x++;mh(t.events,C+1,0,t.events.slice(S)),t.events.length=x}}function y(b){let E=n.length;for(;E-- >b;){const _=n[E];t.containerState=_[1],_[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function yBe(e,t,n){return Or(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function IJ(e){if(e===null||qa(e)||dBe(e))return 1;if(fBe(e))return 2}function hz(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const F4={name:"attention",tokenize:bBe,resolveAll:vBe};function vBe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);NJ(f,-u),NJ(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=nl(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=nl(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=nl(l,hz(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=nl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=nl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,mh(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function bBe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=IJ(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=IJ(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function NJ(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const _Be={name:"autolink",tokenize:EBe};function EBe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return of(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||_u(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||_u(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||M4(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):uBe(h)?(e.consume(h),l):n(h)}function c(h){return _u(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||_u(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const xP={tokenize:wBe,partial:!0};function wBe(e,t,n){return r;function r(s){return rr(s)?Or(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const ape={name:"blockQuote",tokenize:xBe,continuation:{tokenize:SBe},exit:TBe};function xBe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return rr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function SBe(e,t,n){const r=this;return i;function i(o){return rr(o)?Or(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(ape,t,n)(o)}}function TBe(e){e.exit("blockQuote")}const upe={name:"characterEscape",tokenize:CBe};function CBe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return cBe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const lpe={name:"characterReference",tokenize:ABe};function ABe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=_u,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=lBe,c):(e.enter("characterReferenceValue"),s=7,o=$4,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===_u&&!dz(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const kJ={tokenize:IBe,partial:!0},RJ={name:"codeFenced",tokenize:DBe,concrete:!0};function DBe(e,t,n){const r=this,i={tokenize:_,partial:!0};let s=0,o=0,a;return u;function u(x){return l(x)}function l(x){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,e.consume(x),c):o<3?n(x):(e.exit("codeFencedFenceSequence"),rr(x)?Or(e,f,"whitespace")(x):f(x))}function f(x){return x===null||en(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(kJ,m,E)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(x))}function d(x){return x===null||en(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(x)):rr(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Or(e,h,"whitespace")(x)):x===96&&x===a?n(x):(e.consume(x),d)}function h(x){return x===null||en(x)?f(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||en(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(x)):x===96&&x===a?n(x):(e.consume(x),p)}function m(x){return e.attempt(i,E,g)(x)}function g(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),y}function y(x){return s>0&&rr(x)?Or(e,v,"linePrefix",s+1)(x):v(x)}function v(x){return x===null||en(x)?e.check(kJ,m,E)(x):(e.enter("codeFlowValue"),b(x))}function b(x){return x===null||en(x)?(e.exit("codeFlowValue"),v(x)):(e.consume(x),b)}function E(x){return e.exit("codeFenced"),t(x)}function _(x,S,C){let A=0;return D;function D(F){return x.enter("lineEnding"),x.consume(F),x.exit("lineEnding"),I}function I(F){return x.enter("codeFencedFence"),rr(F)?Or(x,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(x.enter("codeFencedFenceSequence"),R(F)):C(F)}function R(F){return F===a?(A++,x.consume(F),R):A>=o?(x.exit("codeFencedFenceSequence"),rr(F)?Or(x,M,"whitespace")(F):M(F)):C(F)}function M(F){return F===null||en(F)?(x.exit("codeFencedFence"),S(F)):C(F)}}}function IBe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const W$={name:"codeIndented",tokenize:kBe},NBe={tokenize:RBe,partial:!0};function kBe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Or(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(NBe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function RBe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Or(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const PBe={name:"codeText",tokenize:$Be,resolve:OBe,previous:MBe};function OBe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function MBe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function $Be(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class FBe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&_E(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),_E(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),_E(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);_E(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);_E(this.left,n.reverse())}}}function _E(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function cpe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new FBe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,LBe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return mh(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function LBe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const BBe={tokenize:UBe,resolve:zBe},jBe={tokenize:VBe,partial:!0};function zBe(e){return cpe(e),e}function UBe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(jBe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function VBe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Or(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function fpe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||M4(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||qa(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||M4(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function dpe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!rr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function hpe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Or(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function ox(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):rr(i)?Or(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const HBe={name:"definition",tokenize:WBe},qBe={tokenize:GBe,partial:!0};function WBe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return dpe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Tv(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return qa(h)?ox(e,l)(h):l(h)}function l(h){return fpe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(qBe,f,f)(h)}function f(h){return rr(h)?Or(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function GBe(e,t,n){return r;function r(a){return qa(a)?ox(e,i)(a):n(a)}function i(a){return hpe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return rr(a)?Or(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const YBe={name:"hardBreakEscape",tokenize:KBe};function KBe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const XBe={name:"headingAtx",tokenize:JBe,resolve:QBe};function QBe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mh(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function JBe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||qa(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):rr(c)?Or(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||qa(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const ZBe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],PJ=["pre","script","style","textarea"],e7e={name:"htmlFlow",tokenize:i7e,resolveTo:r7e,concrete:!0},t7e={tokenize:o7e,partial:!0},n7e={tokenize:s7e,partial:!0};function r7e(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function i7e(e,t,n){const r=this;let i,s,o,a,u;return l;function l(B){return c(B)}function c(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),f}function f(B){return B===33?(e.consume(B),d):B===47?(e.consume(B),s=!0,m):B===63?(e.consume(B),i=3,r.interrupt?t:$):of(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function d(B){return B===45?(e.consume(B),i=2,h):B===91?(e.consume(B),i=5,a=0,p):of(B)?(e.consume(B),i=4,r.interrupt?t:$):n(B)}function h(B){return B===45?(e.consume(B),r.interrupt?t:$):n(B)}function p(B){const q="CDATA[";return B===q.charCodeAt(a++)?(e.consume(B),a===q.length?r.interrupt?t:O:p):n(B)}function m(B){return of(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function g(B){if(B===null||B===47||B===62||qa(B)){const q=B===47,Y=o.toLowerCase();return!q&&!s&&PJ.includes(Y)?(i=1,r.interrupt?t(B):O(B)):ZBe.includes(o.toLowerCase())?(i=6,q?(e.consume(B),y):r.interrupt?t(B):O(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?v(B):b(B))}return B===45||_u(B)?(e.consume(B),o+=String.fromCharCode(B),g):n(B)}function y(B){return B===62?(e.consume(B),r.interrupt?t:O):n(B)}function v(B){return rr(B)?(e.consume(B),v):D(B)}function b(B){return B===47?(e.consume(B),D):B===58||B===95||of(B)?(e.consume(B),E):rr(B)?(e.consume(B),b):D(B)}function E(B){return B===45||B===46||B===58||B===95||_u(B)?(e.consume(B),E):_(B)}function _(B){return B===61?(e.consume(B),x):rr(B)?(e.consume(B),_):b(B)}function x(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),u=B,S):rr(B)?(e.consume(B),x):C(B)}function S(B){return B===u?(e.consume(B),u=null,A):B===null||en(B)?n(B):(e.consume(B),S)}function C(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||qa(B)?_(B):(e.consume(B),C)}function A(B){return B===47||B===62||rr(B)?b(B):n(B)}function D(B){return B===62?(e.consume(B),I):n(B)}function I(B){return B===null||en(B)?O(B):rr(B)?(e.consume(B),I):n(B)}function O(B){return B===45&&i===2?(e.consume(B),P):B===60&&i===1?(e.consume(B),j):B===62&&i===4?(e.consume(B),U):B===63&&i===3?(e.consume(B),$):B===93&&i===5?(e.consume(B),V):en(B)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(t7e,W,R)(B)):B===null||en(B)?(e.exit("htmlFlowData"),R(B)):(e.consume(B),O)}function R(B){return e.check(n7e,M,W)(B)}function M(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),F}function F(B){return B===null||en(B)?R(B):(e.enter("htmlFlowData"),O(B))}function P(B){return B===45?(e.consume(B),$):O(B)}function j(B){return B===47?(e.consume(B),o="",z):O(B)}function z(B){if(B===62){const q=o.toLowerCase();return PJ.includes(q)?(e.consume(B),U):O(B)}return of(B)&&o.length<8?(e.consume(B),o+=String.fromCharCode(B),z):O(B)}function V(B){return B===93?(e.consume(B),$):O(B)}function $(B){return B===62?(e.consume(B),U):B===45&&i===2?(e.consume(B),$):O(B)}function U(B){return B===null||en(B)?(e.exit("htmlFlowData"),W(B)):(e.consume(B),U)}function W(B){return e.exit("htmlFlow"),t(B)}}function s7e(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function o7e(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(xP,t,n)}}const a7e={name:"htmlText",tokenize:u7e};function u7e(e,t,n){const r=this;let i,s,o;return a;function a($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),u}function u($){return $===33?(e.consume($),l):$===47?(e.consume($),_):$===63?(e.consume($),b):of($)?(e.consume($),C):n($)}function l($){return $===45?(e.consume($),c):$===91?(e.consume($),s=0,p):of($)?(e.consume($),v):n($)}function c($){return $===45?(e.consume($),h):n($)}function f($){return $===null?n($):$===45?(e.consume($),d):en($)?(o=f,j($)):(e.consume($),f)}function d($){return $===45?(e.consume($),h):f($)}function h($){return $===62?P($):$===45?d($):f($)}function p($){const U="CDATA[";return $===U.charCodeAt(s++)?(e.consume($),s===U.length?m:p):n($)}function m($){return $===null?n($):$===93?(e.consume($),g):en($)?(o=m,j($)):(e.consume($),m)}function g($){return $===93?(e.consume($),y):m($)}function y($){return $===62?P($):$===93?(e.consume($),y):m($)}function v($){return $===null||$===62?P($):en($)?(o=v,j($)):(e.consume($),v)}function b($){return $===null?n($):$===63?(e.consume($),E):en($)?(o=b,j($)):(e.consume($),b)}function E($){return $===62?P($):b($)}function _($){return of($)?(e.consume($),x):n($)}function x($){return $===45||_u($)?(e.consume($),x):S($)}function S($){return en($)?(o=S,j($)):rr($)?(e.consume($),S):P($)}function C($){return $===45||_u($)?(e.consume($),C):$===47||$===62||qa($)?A($):n($)}function A($){return $===47?(e.consume($),P):$===58||$===95||of($)?(e.consume($),D):en($)?(o=A,j($)):rr($)?(e.consume($),A):P($)}function D($){return $===45||$===46||$===58||$===95||_u($)?(e.consume($),D):I($)}function I($){return $===61?(e.consume($),O):en($)?(o=I,j($)):rr($)?(e.consume($),I):A($)}function O($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),i=$,R):en($)?(o=O,j($)):rr($)?(e.consume($),O):(e.consume($),M)}function R($){return $===i?(e.consume($),i=void 0,F):$===null?n($):en($)?(o=R,j($)):(e.consume($),R)}function M($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||qa($)?A($):(e.consume($),M)}function F($){return $===47||$===62||qa($)?A($):n($)}function P($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function j($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),z}function z($){return rr($)?Or(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):V($)}function V($){return e.enter("htmlTextData"),o($)}}const pz={name:"labelEnd",tokenize:p7e,resolveTo:h7e,resolveAll:d7e},l7e={tokenize:m7e},c7e={tokenize:g7e},f7e={tokenize:y7e};function d7e(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function h7e(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=nl(a,e.slice(s+1,s+r+3)),a=nl(a,[["enter",c,t]]),a=nl(a,hz(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=nl(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=nl(a,e.slice(o+1)),a=nl(a,[["exit",u,t]]),mh(e,s,e.length,a),e}function p7e(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Tv(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(l7e,c,o?c:f)(d):d===91?e.attempt(c7e,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(f7e,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function m7e(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return qa(f)?ox(e,s)(f):s(f)}function s(f){return f===41?c(f):fpe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return qa(f)?ox(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?hpe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return qa(f)?ox(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function g7e(e,t,n){const r=this;return i;function i(a){return dpe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Tv(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function y7e(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const v7e={name:"labelStartImage",tokenize:b7e,resolveAll:pz.resolveAll};function b7e(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const _7e={name:"labelStartLink",tokenize:E7e,resolveAll:pz.resolveAll};function E7e(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const G$={name:"lineEnding",tokenize:w7e};function w7e(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Or(e,t,"linePrefix")}}const yD={name:"thematicBreak",tokenize:x7e};function x7e(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),rr(l)?Or(e,a,"whitespace")(l):a(l))}}const Sa={name:"list",tokenize:C7e,continuation:{tokenize:A7e},exit:I7e},S7e={tokenize:N7e,partial:!0},T7e={tokenize:D7e,partial:!0};function C7e(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:$4(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(yD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return $4(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(xP,r.interrupt?n:c,e.attempt(S7e,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return rr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function A7e(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(xP,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Or(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!rr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(T7e,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Or(e,e.attempt(Sa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function D7e(e,t,n){const r=this;return Or(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function I7e(e){e.exit(this.containerState.type)}function N7e(e,t,n){const r=this;return Or(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!rr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const OJ={name:"setextUnderline",tokenize:R7e,resolveTo:k7e};function k7e(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function R7e(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),rr(l)?Or(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const P7e={tokenize:O7e};function O7e(e){const t=this,n=e.attempt(xP,r,e.attempt(this.parser.constructs.flowInitial,i,Or(e,e.attempt(this.parser.constructs.flow,i,e.attempt(BBe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const M7e={resolveAll:mpe()},$7e=ppe("string"),F7e=ppe("text");function ppe(e){return{tokenize:t,resolveAll:mpe(e==="text"?L7e:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function mpe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function L7e(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function B7e(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:E,attempt:S(_),check:S(x),interrupt:S(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(I){return o=nl(o,I),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=hz(s,l.events,l),l.events)}function d(I,O){return z7e(h(I),O)}function h(I){return j7e(o,I)}function p(){const{line:I,column:O,offset:R,_index:M,_bufferIndex:F}=r;return{line:I,column:O,offset:R,_index:M,_bufferIndex:F}}function m(I){i[I.line]=I.column,D()}function g(){let I;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(I){c=c(I)}function v(I){en(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,D()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=I}function b(I,O){const R=O||{};return R.type=I,R.start=p(),l.events.push(["enter",R,l]),a.push(R),R}function E(I){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function _(I,O){C(I,O.from)}function x(I,O){O.restore()}function S(I,O){return R;function R(M,F,P){let j,z,V,$;return Array.isArray(M)?W(M):"tokenize"in M?W([M]):U(M);function U(re){return pe;function pe(_e){const de=_e!==null&&re[_e],ye=_e!==null&&re.null,Ce=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ce)(_e)}}function W(re){return j=re,z=0,re.length===0?P:B(re[z])}function B(re){return pe;function pe(_e){return $=A(),V=re,re.partial||(l.currentConstruct=re),re.name&&l.parser.constructs.disable.null.includes(re.name)?Y():re.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,Y)(_e)}}function q(re){return I(V,$),F}function Y(re){return $.restore(),++z<j.length?B(j[z]):P}}}function C(I,O){I.resolveAll&&!s.includes(I)&&s.push(I),I.resolve&&mh(l.events,O,l.events.length-O,I.resolve(l.events.slice(O),l)),I.resolveTo&&(l.events=I.resolveTo(l.events,l))}function A(){const I=p(),O=l.previous,R=l.currentConstruct,M=l.events.length,F=Array.from(a);return{restore:P,from:M};function P(){r=I,l.previous=O,l.currentConstruct=R,l.events.length=M,a=F,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function j7e(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function z7e(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const U7e={42:Sa,43:Sa,45:Sa,48:Sa,49:Sa,50:Sa,51:Sa,52:Sa,53:Sa,54:Sa,55:Sa,56:Sa,57:Sa,62:ape},V7e={91:HBe},H7e={[-2]:W$,[-1]:W$,32:W$},q7e={35:XBe,42:yD,45:[OJ,yD],60:e7e,61:OJ,95:yD,96:RJ,126:RJ},W7e={38:lpe,92:upe},G7e={[-5]:G$,[-4]:G$,[-3]:G$,33:v7e,38:lpe,42:F4,60:[_Be,a7e],91:_7e,92:[YBe,upe],93:pz,95:F4,96:PBe},Y7e={null:[F4,M7e]},K7e={null:[42,95]},X7e={null:[]},Q7e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:K7e,contentInitial:V7e,disable:X7e,document:U7e,flow:q7e,flowInitial:H7e,insideSpan:Y7e,string:W7e,text:G7e},Symbol.toStringTag,{value:"Module"}));function J7e(e){const n=sBe([Q7e,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(hBe),document:i(mBe),flow:i(P7e),string:i($7e),text:i(F7e)};return r;function i(s){return o;function o(a){return B7e(r,s,a)}}}function Z7e(e){for(;!cpe(e););return e}const MJ=/[\0\t\n\r]/g;function eje(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(MJ.lastIndex=f,l=MJ.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const tje=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function nje(e){return e.replace(tje,rje)}function rje(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return ope(n.slice(s?2:1),s?16:10)}return dz(n)||e}const gpe={}.hasOwnProperty;function ije(e,t,n){return typeof t!="string"&&(n=t,t=void 0),sje(n)(Z7e(J7e(n).document().write(eje()(e,t,!0))))}function sje(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Xe),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(ht),blockQuote:s(ye),characterEscape:A,characterReference:A,codeFenced:s(Ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ce,o),codeText:s(ve,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(qe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(He),hardBreakEscape:s(rt),hardBreakTrailing:s(rt),htmlFlow:s(Pe,o),htmlFlowData:A,htmlText:s(Pe,o),htmlTextData:A,image:s(Be),label:o,link:s(Xe),listItem:s(Ft),listItemValue:d,listOrdered:s(mt,f),listUnordered:s(mt),paragraph:s(bt),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ht),strong:s(G),thematicBreak:s(me)},exit:{atxHeading:u(),atxHeadingSequence:_,autolink:u(),autolinkEmail:de,autolinkProtocol:_e,blockQuote:u(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:re,characterReference:pe,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:D,codeIndented:u(y),codeText:u(F),codeTextData:D,data:D,definition:u(),definitionDestinationString:E,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(R),htmlFlowData:D,htmlText:u(M),htmlTextData:D,image:u(j),label:V,labelText:z,lineEnding:I,link:u(P),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:$,resourceTitleString:U,resource:W,setextHeading:u(C),setextHeadingLineSequence:S,setextHeadingText:x,strong:u(),thematicBreak:u()}};ype(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(J){let se={type:"root",children:[]};const ce={stack:[se],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Se=[];let Te=-1;for(;++Te<J.length;)if(J[Te][1].type==="listOrdered"||J[Te][1].type==="listUnordered")if(J[Te][0]==="enter")Se.push(Te);else{const Ge=Se.pop();Te=i(J,Ge,Te)}for(Te=-1;++Te<J.length;){const Ge=t[J[Te][0]];gpe.call(Ge,J[Te][1].type)&&Ge[J[Te][1].type].call(Object.assign({sliceSerialize:J[Te][2].sliceSerialize},ce),J[Te][1])}if(ce.tokenStack.length>0){const Ge=ce.tokenStack[ce.tokenStack.length-1];(Ge[1]||$J).call(ce,void 0,Ge[0])}for(se.position={start:Zh(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:Zh(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},Te=-1;++Te<t.transforms.length;)se=t.transforms[Te](se)||se;return se}function i(J,se,ce){let Se=se-1,Te=-1,Ge=!1,je,Ct,Ot,Dt;for(;++Se<=ce;){const Vt=J[Se];switch(Vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Vt[0]==="enter"?Te++:Te--,Dt=void 0;break}case"lineEndingBlank":{Vt[0]==="enter"&&(je&&!Dt&&!Te&&!Ot&&(Ot=Se),Dt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Dt=void 0}if(!Te&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Te===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(je){let Zt=Se;for(Ct=void 0;Zt--;){const an=J[Zt];if(an[1].type==="lineEnding"||an[1].type==="lineEndingBlank"){if(an[0]==="exit")continue;Ct&&(J[Ct][1].type="lineEndingBlank",Ge=!0),an[1].type="lineEnding",Ct=Zt}else if(!(an[1].type==="linePrefix"||an[1].type==="blockQuotePrefix"||an[1].type==="blockQuotePrefixWhitespace"||an[1].type==="blockQuoteMarker"||an[1].type==="listItemIndent"))break}Ot&&(!Ct||Ot<Ct)&&(je._spread=!0),je.end=Object.assign({},Ct?J[Ct][1].start:Vt[1].end),J.splice(Ct||Se,0,["exit",je,Vt[2]]),Se++,ce++}if(Vt[1].type==="listItemPrefix"){const Zt={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start),end:void 0};je=Zt,J.splice(Se,0,["enter",Zt,Vt[2]]),Se++,ce++,Ot=void 0,Dt=!0}}}return J[se][1]._spread=Ge,ce}function s(J,se){return ce;function ce(Se){a.call(this,J(Se),Se),se&&se.call(this,Se)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(J,se,ce){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([se,ce]),J.position={start:Zh(se.start),end:void 0}}function u(J){return se;function se(ce){J&&J.call(this,ce),l.call(this,ce)}}function l(J,se){const ce=this.stack.pop(),Se=this.tokenStack.pop();if(Se)Se[0].type!==J.type&&(se?se.call(this,J,Se[0]):(Se[1]||$J).call(this,J,Se[0]));else throw new Error("Cannot close `"+J.type+"` ("+sx({start:J.start,end:J.end})+"): its not open");ce.position.end=Zh(J.end)}function c(){return rBe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(J){if(this.data.expectingFirstListItemValue){const se=this.stack[this.stack.length-2];se.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function h(){const J=this.resume(),se=this.stack[this.stack.length-1];se.lang=J}function p(){const J=this.resume(),se=this.stack[this.stack.length-1];se.meta=J}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J.replace(/(\r?\n|\r)$/g,"")}function v(J){const se=this.resume(),ce=this.stack[this.stack.length-1];ce.label=se,ce.identifier=Tv(this.sliceSerialize(J)).toLowerCase()}function b(){const J=this.resume(),se=this.stack[this.stack.length-1];se.title=J}function E(){const J=this.resume(),se=this.stack[this.stack.length-1];se.url=J}function _(J){const se=this.stack[this.stack.length-1];if(!se.depth){const ce=this.sliceSerialize(J).length;se.depth=ce}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function S(J){const se=this.stack[this.stack.length-1];se.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(J){const ce=this.stack[this.stack.length-1].children;let Se=ce[ce.length-1];(!Se||Se.type!=="text")&&(Se=ie(),Se.position={start:Zh(J.start),end:void 0},ce.push(Se)),this.stack.push(Se)}function D(J){const se=this.stack.pop();se.value+=this.sliceSerialize(J),se.position.end=Zh(J.end)}function I(J){const se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ce=se.children[se.children.length-1];ce.position.end=Zh(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(se.type)&&(A.call(this,J),D.call(this,J))}function O(){this.data.atHardBreak=!0}function R(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J}function M(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J}function F(){const J=this.resume(),se=this.stack[this.stack.length-1];se.value=J}function P(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=se,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function j(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=se,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function z(J){const se=this.sliceSerialize(J),ce=this.stack[this.stack.length-2];ce.label=nje(se),ce.identifier=Tv(se).toLowerCase()}function V(){const J=this.stack[this.stack.length-1],se=this.resume(),ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,ce.type==="link"){const Se=J.children;ce.children=Se}else ce.alt=se}function $(){const J=this.resume(),se=this.stack[this.stack.length-1];se.url=J}function U(){const J=this.resume(),se=this.stack[this.stack.length-1];se.title=J}function W(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function q(J){const se=this.resume(),ce=this.stack[this.stack.length-1];ce.label=se,ce.identifier=Tv(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function Y(J){this.data.characterReferenceType=J.type}function re(J){const se=this.sliceSerialize(J),ce=this.data.characterReferenceType;let Se;ce?(Se=ope(se,ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Se=dz(se);const Te=this.stack[this.stack.length-1];Te.value+=Se}function pe(J){const se=this.stack.pop();se.position.end=Zh(J.end)}function _e(J){D.call(this,J);const se=this.stack[this.stack.length-1];se.url=this.sliceSerialize(J)}function de(J){D.call(this,J);const se=this.stack[this.stack.length-1];se.url="mailto:"+this.sliceSerialize(J)}function ye(){return{type:"blockquote",children:[]}}function Ce(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function He(){return{type:"emphasis",children:[]}}function ht(){return{type:"heading",depth:0,children:[]}}function rt(){return{type:"break"}}function Pe(){return{type:"html",value:""}}function Be(){return{type:"image",title:null,url:"",alt:null}}function Xe(){return{type:"link",title:null,url:"",children:[]}}function mt(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function Ft(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function bt(){return{type:"paragraph",children:[]}}function G(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function me(){return{type:"thematicBreak"}}}function Zh(e){return{line:e.line,column:e.column,offset:e.offset}}function ype(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?ype(e,r):oje(e,r)}}function oje(e,t){let n;for(n in t)if(gpe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function $J(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+sx({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+sx({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+sx({start:t.start,end:t.end})+") is still open")}function aje(e){const t=this;t.parser=n;function n(r){return ije(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function uje(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function lje(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function cje(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function fje(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dje(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function hje(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=b_(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function pje(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mje(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function vpe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function gje(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return vpe(e,t);const i={src:b_(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function yje(e,t){const n={src:b_(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function vje(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function bje(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return vpe(e,t);const i={href:b_(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function _je(e,t){const n={href:b_(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Eje(e,t,n){const r=e.all(t),i=n?wje(n):bpe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function wje(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=bpe(n[r])}return t}function bpe(e){const t=e.spread;return t??e.children.length>1}function xje(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Sje(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Tje(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Cje(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Aje(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Wf(t.children[1]),u=wP(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Dje(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Ije(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const FJ=9,LJ=32;function Nje(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(BJ(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(BJ(t.slice(i),i>0,!1)),s.join("")}function BJ(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===FJ||s===LJ;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===FJ||s===LJ;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function kje(e,t){const n={type:"text",value:Nje(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Rje(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Pje={blockquote:uje,break:lje,code:cje,delete:fje,emphasis:dje,footnoteReference:hje,heading:pje,html:mje,imageReference:gje,image:yje,inlineCode:vje,linkReference:bje,link:_je,listItem:Eje,list:xje,paragraph:Sje,root:Tje,strong:Cje,table:Aje,tableCell:Ije,tableRow:Dje,text:kje,thematicBreak:Rje,toml:FC,yaml:FC,definition:FC,footnoteDefinition:FC};function FC(){}const _pe=-1,SP=0,WI=1,GI=2,mz=3,gz=4,yz=5,vz=6,Epe=7,wpe=8,jJ=typeof self=="object"?self:globalThis,Oje=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case SP:case _pe:return n(o,i);case WI:{const a=n([],i);for(const u of o)a.push(r(u));return a}case GI:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case mz:return n(new Date(o),i);case gz:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case yz:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case vz:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case Epe:{const{name:a,message:u}=o;return n(new jJ[a](u),i)}case wpe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new jJ[s](o),i)};return r},zJ=e=>Oje(new Map,e)(0),d1="",{toString:Mje}={},{keys:$je}=Object,EE=e=>{const t=typeof e;if(t!=="object"||!e)return[SP,t];const n=Mje.call(e).slice(8,-1);switch(n){case"Array":return[WI,d1];case"Object":return[GI,d1];case"Date":return[mz,d1];case"RegExp":return[gz,d1];case"Map":return[yz,d1];case"Set":return[vz,d1]}return n.includes("Array")?[WI,n]:n.includes("Error")?[Epe,n]:[GI,n]},LC=([e,t])=>e===SP&&(t==="function"||t==="symbol"),Fje=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=EE(o);switch(a){case SP:{let c=o;switch(u){case"bigint":a=wpe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([_pe],o)}return i([a,c],o)}case WI:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case GI:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of $je(o))(e||!LC(EE(o[d])))&&c.push([s(d),s(o[d])]);return f}case mz:return i([a,o.toISOString()],o);case gz:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case yz:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(LC(EE(d))||LC(EE(h))))&&c.push([s(d),s(h)]);return f}case vz:{const c=[],f=i([a,c],o);for(const d of o)(e||!LC(EE(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},UJ=(e,{json:t,lossy:n}={})=>{const r=[];return Fje(!(t||n),!!t,new Map,r)(e),r},rb=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?zJ(UJ(e,t)):structuredClone(e):(e,t)=>zJ(UJ(e,t));function Lje(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Bje(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function jje(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Lje,r=e.options.footnoteBackLabel||Bje,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=b_(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...rb(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const xpe=function(e){if(e==null)return Hje;if(typeof e=="function")return TP(e);if(typeof e=="object")return Array.isArray(e)?zje(e):Uje(e);if(typeof e=="string")return Vje(e);throw new Error("Expected function, string, or object as test")};function zje(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=xpe(e[n]);return TP(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Uje(e){const t=e;return TP(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Vje(e){return TP(t);function t(n){return n&&n.type===e}}function TP(e){return t;function t(n,r,i){return!!(qje(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Hje(){return!0}function qje(e){return e!==null&&typeof e=="object"&&"type"in e}const Spe=[],Wje=!0,VJ=!1,Gje="skip";function Yje(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=xpe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Spe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Kje(n(u,c)),h[0]===VJ))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Gje)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===VJ)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Kje(e){return Array.isArray(e)?e:typeof e=="number"?[Wje,e]:e==null?Spe:[e]}function bz(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Yje(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const L4={}.hasOwnProperty,Xje={};function Qje(e,t){const n=t||Xje,r=new Map,i=new Map,s=new Map,o={...Pje,...n.handlers},a={all:l,applyData:Zje,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Jje,wrap:tze};return bz(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(L4.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=rb(g);return y.children=a.all(c),y}return rb(c)}return(a.options.unknownHandler||eze)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=HJ(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=HJ(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Jje(e,t){e.position&&(t.position=P9e(e))}function Zje(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,rb(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function eze(e,t){const n=t.data||{},r="value"in t&&!(L4.call(n,"hProperties")||L4.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function tze(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function HJ(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function qJ(e,t){const n=Qje(e,t),r=n.one(e,void 0),i=jje(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function nze(e,t){return e&&"run"in e?async function(n,r){const i=qJ(n,{file:r,...t});await e.run(i,r)}:function(n,r){return qJ(n,{file:r,...t||e})}}function WJ(e){if(e)throw e}var vD=Object.prototype.hasOwnProperty,Tpe=Object.prototype.toString,GJ=Object.defineProperty,YJ=Object.getOwnPropertyDescriptor,KJ=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Tpe.call(t)==="[object Array]"},XJ=function(t){if(!t||Tpe.call(t)!=="[object Object]")return!1;var n=vD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&vD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||vD.call(t,i)},QJ=function(t,n){GJ&&n.name==="__proto__"?GJ(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},JJ=function(t,n){if(n==="__proto__")if(vD.call(t,n)){if(YJ)return YJ(t,n).value}else return;return t[n]},rze=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=JJ(a,n),i=JJ(t,n),a!==i&&(c&&i&&(XJ(i)||(s=KJ(i)))?(s?(s=!1,o=r&&KJ(r)?r:[]):o=r&&XJ(r)?r:{},QJ(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&QJ(a,{name:n,newValue:i}));return a};const Y$=pa(rze);function B4(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ize(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?sze(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function sze(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Jc={basename:oze,dirname:aze,extname:uze,join:lze,sep:"/"};function oze(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');jT(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function aze(e){if(jT(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function uze(e){jT(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function lze(...e){let t=-1,n;for(;++t<e.length;)jT(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":cze(n)}function cze(e){jT(e);const t=e.codePointAt(0)===47;let n=fze(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function fze(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function jT(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const dze={cwd:hze};function hze(){return"/"}function j4(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function pze(e){if(typeof e=="string")e=new URL(e);else if(!j4(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return mze(e)}function mze(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const K$=["history","path","basename","stem","extname","dirname"];class Cpe{constructor(t){let n;t?j4(t)?n={path:t}:typeof t=="string"||gze(t)?n={value:t}:n=t:n={},this.cwd=dze.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<K$.length;){const s=K$[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)K$.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Jc.basename(this.path):void 0}set basename(t){Q$(t,"basename"),X$(t,"basename"),this.path=Jc.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Jc.dirname(this.path):void 0}set dirname(t){ZJ(this.basename,"dirname"),this.path=Jc.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Jc.extname(this.path):void 0}set extname(t){if(X$(t,"extname"),ZJ(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Jc.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){j4(t)&&(t=pze(t)),Q$(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Jc.basename(this.path,this.extname):void 0}set stem(t){Q$(t,"stem"),X$(t,"stem"),this.path=Jc.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Uo(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function X$(e,t){if(e&&e.includes(Jc.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Jc.sep+"`")}function Q$(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ZJ(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function gze(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const yze=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},vze={}.hasOwnProperty;class _z extends yze{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ize()}copy(){const t=new _z;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Y$(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(eF("data",this.frozen),this.namespace[t]=n,this):vze.call(this.namespace,t)&&this.namespace[t]||void 0:t?(eF("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=BC(t),r=this.parser||this.Parser;return J$("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),J$("process",this.parser||this.Parser),Z$("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=BC(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Eze(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),J$("processSync",this.parser||this.Parser),Z$("processSync",this.compiler||this.Compiler),this.process(t,i),tZ("processSync","process",n),r;function i(s,o){n=!0,WJ(s),r=o}}run(t,n,r){eZ(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=BC(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),tZ("runSync","run",r),i;function s(o,a){WJ(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=BC(n),i=this.compiler||this.Compiler;return Z$("stringify",i),eZ(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(eF("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Y$(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];B4(m)&&B4(h)&&(h=Y$(!0,m,h)),r[d]=[l,h,...p]}}}}const bze=new _z().freeze();function J$(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Z$(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function eF(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function eZ(e){if(!B4(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function tZ(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function BC(e){return _ze(e)?e:new Cpe(e)}function _ze(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Eze(e){return typeof e=="string"||wze(e)}function wze(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const xze="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",nZ=[],rZ={allowDangerousHtml:!0},Sze=/^(https?|ircs?|mailto|xmpp)$/i,Tze=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Cze(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||nZ,u=e.remarkPlugins||nZ,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...rZ}:rZ,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Aze,h=bze().use(aje).use(u).use(nze,l).use(a),p=new Cpe;typeof r=="string"&&(p.value=r);for(const v of Tze)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+xze+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),bz(g,y),B9e(g,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function y(v,b,E){if(v.type==="raw"&&E&&typeof b=="number")return c?E.children.splice(b,1):E.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let _;for(_ in q$)if(Object.hasOwn(q$,_)&&Object.hasOwn(v.properties,_)){const x=v.properties[_],S=q$[_];(S===null||S.includes(v.tagName))&&(v.properties[_]=d(String(x||""),_,v))}}if(v.type==="element"){let _=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!_&&n&&typeof b=="number"&&(_=!n(v,b,E)),_&&E&&typeof b=="number")return f&&v.children?E.children.splice(b,1,...v.children):E.children.splice(b,1),b}}}function Aze(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Sze.test(e.slice(0,t))?e:""}const iZ=/[#.]/g;function Dze(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){iZ.lastIndex=i;const a=iZ.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Ize=new Set(["button","menu","reset","submit"]),z4={}.hasOwnProperty;function Ape(e,t,n){const r=n&&Pze(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Dze(s,t),l.tagName=l.tagName.toLowerCase(),r&&z4.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Nze(o,l.tagName)){let c;for(c in o)z4.call(o,c)&&kze(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)U4(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Nze(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Ize.has(e.type.toLowerCase()):!("value"in e)}function kze(e,t,n,r){const i=EP(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=yJ(r):i.commaSeparated?o=dJ(r):i.commaOrSpaceSeparated?o=yJ(dJ(r).join(" ")):o=sZ(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Rze(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=sZ(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function U4(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)U4(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?U4(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function sZ(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||gS(n)===gS(t)))return!0}return n}function Rze(e){const t=[];let n;for(n in e)z4.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Pze(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Oze=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Mze=Ape(BT,"div"),$ze=Ape(Gm,"g",Oze),tF=/\r?\n|\r/g;function Fze(e){const t=String(e),n=[];for(tF.lastIndex=0;tF.test(t);)n.push(tF.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const n0={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Dpe={}.hasOwnProperty,Lze=Object.prototype;function Bze(e,t){const n=t||{};return Ez({file:n.file||void 0,location:!1,schema:n.space==="svg"?Gm:BT,verbose:n.verbose||!1},e)}function Ez(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},bD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Ipe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Fze(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},bD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},bD(e,r,n),n}default:return n=jze(e,t),n}}function Ipe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=Ez(e,t[n]);r.push(i)}return r}function jze(e,t){const n=e.schema;e.schema=t.namespaceURI===n0.svg?Gm:BT;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Dpe.call(Lze,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?$ze:Mze)(t.tagName,i,Ipe(e,t.childNodes));if(bD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&ev(u.startTag),c=u&&u.endTag&&ev(u.endTag),f=Ez(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function bD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=zze(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function zze(e,t,n){const r=ev(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)Dpe.call(n.attrs,o)&&(s[EP(e.schema,o).property]=ev(n.attrs[o]));n.startTag;const a=ev(n.startTag),u=n.endTag?ev(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function ev(e){const t=oZ({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=oZ({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function oZ(e){return e.line&&e.column?e:void 0}const aZ={}.hasOwnProperty;function Npe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&aZ.call(i,e)){const u=String(i[e]);o=aZ.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Uze={},Vze={}.hasOwnProperty,kpe=Npe("type",{handlers:{root:qze,element:Xze,text:Yze,comment:Kze,doctype:Gze}});function Hze(e,t){const r=(t||Uze).space;return kpe(e,r==="svg"?Gm:BT)}function qze(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=wz(e.children,n,t),__(e,n),n}function Wze(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=wz(e.children,n,t),__(e,n),n}function Gze(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return __(e,t),t}function Yze(e){const t={nodeName:"#text",value:e.value,parentNode:null};return __(e,t),t}function Kze(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return __(e,t),t}function Xze(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Gm);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Vze.call(e.properties,s)){const u=Qze(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:n0[o],childNodes:[],parentNode:null};return a.childNodes=wz(e.children,a,r),__(e,a),e.tagName==="template"&&e.content&&(a.content=Wze(e.content,r)),a}function Qze(e,t,n){const r=EP(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Vhe(n):Jhe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=n0[r.space]}return i}function wz(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=kpe(e[r],n);s.parentNode=t,i.push(s)}return i}function __(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Jze=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Zze=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Jr="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const xa={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Rpe(e){return e>=55296&&e<=57343}function eUe(e){return e>=56320&&e<=57343}function tUe(e,t){return(e-55296)*1024+9216+t}function Ppe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Ope(e){return e>=64976&&e<=65007||Zze.has(e)}var Re;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Re=Re||(Re={}));const nUe=65536;class rUe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=nUe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(eUe(n))return this.pos++,this._addGap(),tUe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Re.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Rpe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Ppe(t)?this._err(Re.controlCharacterInInputStream):Ope(t)&&this._err(Re.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var wn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(wn=wn||(wn={}));function Mpe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const ip=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),iUe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var nF;const sUe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),oUe=(nF=String.fromCodePoint)!==null&&nF!==void 0?nF:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function aUe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=sUe.get(e))!==null&&t!==void 0?t:e}var ws;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ws||(ws={}));const uUe=32;var df;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(df||(df={}));function V4(e){return e>=ws.ZERO&&e<=ws.NINE}function lUe(e){return e>=ws.UPPER_A&&e<=ws.UPPER_F||e>=ws.LOWER_A&&e<=ws.LOWER_F}function cUe(e){return e>=ws.UPPER_A&&e<=ws.UPPER_Z||e>=ws.LOWER_A&&e<=ws.LOWER_Z||V4(e)}function fUe(e){return e===ws.EQUALS||cUe(e)}var ys;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ys||(ys={}));var Ug;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ug||(Ug={}));class dUe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ys.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ug.Strict}startEntity(t){this.decodeMode=t,this.state=ys.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ys.EntityStart:return t.charCodeAt(n)===ws.NUM?(this.state=ys.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ys.NamedEntity,this.stateNamedEntity(t,n));case ys.NumericStart:return this.stateNumericStart(t,n);case ys.NumericDecimal:return this.stateNumericDecimal(t,n);case ys.NumericHex:return this.stateNumericHex(t,n);case ys.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|uUe)===ws.LOWER_X?(this.state=ys.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ys.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(V4(i)||lUe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(V4(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ws.SEMI)this.consumed+=1;else if(this.decodeMode===Ug.Strict)return 0;return this.emitCodePoint(aUe(this.result),this.consumed),this.errors&&(t!==ws.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&df.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Fpe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ug.Attribute&&(s===0||fUe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&df.VALUE_LENGTH)>>14,s!==0){if(o===ws.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ug.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&df.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~df.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ys.NamedEntity:return this.result!==0&&(this.decodeMode!==Ug.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ys.NumericDecimal:return this.emitNumericEntity(0,2);case ys.NumericHex:return this.emitNumericEntity(0,3);case ys.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ys.EntityStart:return 0}}}function $pe(e){let t="";const n=new dUe(e,r=>t+=oUe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function Fpe(e,t,n,r){const i=(t&df.BRANCH_LENGTH)>>7,s=t&df.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}$pe(ip);$pe(iUe);var ze;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ze=ze||(ze={}));var Xp;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Xp=Xp||(Xp={}));var mu;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(mu=mu||(mu={}));var xe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(xe=xe||(xe={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const hUe=new Map([[xe.A,N.A],[xe.ADDRESS,N.ADDRESS],[xe.ANNOTATION_XML,N.ANNOTATION_XML],[xe.APPLET,N.APPLET],[xe.AREA,N.AREA],[xe.ARTICLE,N.ARTICLE],[xe.ASIDE,N.ASIDE],[xe.B,N.B],[xe.BASE,N.BASE],[xe.BASEFONT,N.BASEFONT],[xe.BGSOUND,N.BGSOUND],[xe.BIG,N.BIG],[xe.BLOCKQUOTE,N.BLOCKQUOTE],[xe.BODY,N.BODY],[xe.BR,N.BR],[xe.BUTTON,N.BUTTON],[xe.CAPTION,N.CAPTION],[xe.CENTER,N.CENTER],[xe.CODE,N.CODE],[xe.COL,N.COL],[xe.COLGROUP,N.COLGROUP],[xe.DD,N.DD],[xe.DESC,N.DESC],[xe.DETAILS,N.DETAILS],[xe.DIALOG,N.DIALOG],[xe.DIR,N.DIR],[xe.DIV,N.DIV],[xe.DL,N.DL],[xe.DT,N.DT],[xe.EM,N.EM],[xe.EMBED,N.EMBED],[xe.FIELDSET,N.FIELDSET],[xe.FIGCAPTION,N.FIGCAPTION],[xe.FIGURE,N.FIGURE],[xe.FONT,N.FONT],[xe.FOOTER,N.FOOTER],[xe.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[xe.FORM,N.FORM],[xe.FRAME,N.FRAME],[xe.FRAMESET,N.FRAMESET],[xe.H1,N.H1],[xe.H2,N.H2],[xe.H3,N.H3],[xe.H4,N.H4],[xe.H5,N.H5],[xe.H6,N.H6],[xe.HEAD,N.HEAD],[xe.HEADER,N.HEADER],[xe.HGROUP,N.HGROUP],[xe.HR,N.HR],[xe.HTML,N.HTML],[xe.I,N.I],[xe.IMG,N.IMG],[xe.IMAGE,N.IMAGE],[xe.INPUT,N.INPUT],[xe.IFRAME,N.IFRAME],[xe.KEYGEN,N.KEYGEN],[xe.LABEL,N.LABEL],[xe.LI,N.LI],[xe.LINK,N.LINK],[xe.LISTING,N.LISTING],[xe.MAIN,N.MAIN],[xe.MALIGNMARK,N.MALIGNMARK],[xe.MARQUEE,N.MARQUEE],[xe.MATH,N.MATH],[xe.MENU,N.MENU],[xe.META,N.META],[xe.MGLYPH,N.MGLYPH],[xe.MI,N.MI],[xe.MO,N.MO],[xe.MN,N.MN],[xe.MS,N.MS],[xe.MTEXT,N.MTEXT],[xe.NAV,N.NAV],[xe.NOBR,N.NOBR],[xe.NOFRAMES,N.NOFRAMES],[xe.NOEMBED,N.NOEMBED],[xe.NOSCRIPT,N.NOSCRIPT],[xe.OBJECT,N.OBJECT],[xe.OL,N.OL],[xe.OPTGROUP,N.OPTGROUP],[xe.OPTION,N.OPTION],[xe.P,N.P],[xe.PARAM,N.PARAM],[xe.PLAINTEXT,N.PLAINTEXT],[xe.PRE,N.PRE],[xe.RB,N.RB],[xe.RP,N.RP],[xe.RT,N.RT],[xe.RTC,N.RTC],[xe.RUBY,N.RUBY],[xe.S,N.S],[xe.SCRIPT,N.SCRIPT],[xe.SECTION,N.SECTION],[xe.SELECT,N.SELECT],[xe.SOURCE,N.SOURCE],[xe.SMALL,N.SMALL],[xe.SPAN,N.SPAN],[xe.STRIKE,N.STRIKE],[xe.STRONG,N.STRONG],[xe.STYLE,N.STYLE],[xe.SUB,N.SUB],[xe.SUMMARY,N.SUMMARY],[xe.SUP,N.SUP],[xe.TABLE,N.TABLE],[xe.TBODY,N.TBODY],[xe.TEMPLATE,N.TEMPLATE],[xe.TEXTAREA,N.TEXTAREA],[xe.TFOOT,N.TFOOT],[xe.TD,N.TD],[xe.TH,N.TH],[xe.THEAD,N.THEAD],[xe.TITLE,N.TITLE],[xe.TR,N.TR],[xe.TRACK,N.TRACK],[xe.TT,N.TT],[xe.U,N.U],[xe.UL,N.UL],[xe.SVG,N.SVG],[xe.VAR,N.VAR],[xe.WBR,N.WBR],[xe.XMP,N.XMP]]);function E_(e){var t;return(t=hUe.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const nt=N,pUe={[ze.HTML]:new Set([nt.ADDRESS,nt.APPLET,nt.AREA,nt.ARTICLE,nt.ASIDE,nt.BASE,nt.BASEFONT,nt.BGSOUND,nt.BLOCKQUOTE,nt.BODY,nt.BR,nt.BUTTON,nt.CAPTION,nt.CENTER,nt.COL,nt.COLGROUP,nt.DD,nt.DETAILS,nt.DIR,nt.DIV,nt.DL,nt.DT,nt.EMBED,nt.FIELDSET,nt.FIGCAPTION,nt.FIGURE,nt.FOOTER,nt.FORM,nt.FRAME,nt.FRAMESET,nt.H1,nt.H2,nt.H3,nt.H4,nt.H5,nt.H6,nt.HEAD,nt.HEADER,nt.HGROUP,nt.HR,nt.HTML,nt.IFRAME,nt.IMG,nt.INPUT,nt.LI,nt.LINK,nt.LISTING,nt.MAIN,nt.MARQUEE,nt.MENU,nt.META,nt.NAV,nt.NOEMBED,nt.NOFRAMES,nt.NOSCRIPT,nt.OBJECT,nt.OL,nt.P,nt.PARAM,nt.PLAINTEXT,nt.PRE,nt.SCRIPT,nt.SECTION,nt.SELECT,nt.SOURCE,nt.STYLE,nt.SUMMARY,nt.TABLE,nt.TBODY,nt.TD,nt.TEMPLATE,nt.TEXTAREA,nt.TFOOT,nt.TH,nt.THEAD,nt.TITLE,nt.TR,nt.TRACK,nt.UL,nt.WBR,nt.XMP]),[ze.MATHML]:new Set([nt.MI,nt.MO,nt.MN,nt.MS,nt.MTEXT,nt.ANNOTATION_XML]),[ze.SVG]:new Set([nt.TITLE,nt.FOREIGN_OBJECT,nt.DESC]),[ze.XLINK]:new Set,[ze.XML]:new Set,[ze.XMLNS]:new Set};function Lpe(e){return e===nt.H1||e===nt.H2||e===nt.H3||e===nt.H4||e===nt.H5||e===nt.H6}xe.STYLE,xe.SCRIPT,xe.XMP,xe.IFRAME,xe.NOEMBED,xe.NOFRAMES,xe.PLAINTEXT;const mUe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Z;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Z||(Z={}));const Mi={DATA:Z.DATA,RCDATA:Z.RCDATA,RAWTEXT:Z.RAWTEXT,SCRIPT_DATA:Z.SCRIPT_DATA,PLAINTEXT:Z.PLAINTEXT,CDATA_SECTION:Z.CDATA_SECTION};function ax(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function dw(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function gUe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function sp(e){return gUe(e)||dw(e)}function H4(e){return sp(e)||ax(e)}function Bpe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function jpe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function yUe(e){return ax(e)||Bpe(e)||jpe(e)}function jC(e){return e+32}function zpe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function vUe(e){return e===X.EQUALS_SIGN||H4(e)}function uZ(e){return zpe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class bUe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Z.DATA,this.returnState=Z.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new rUe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:wn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:wn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:wn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:wn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Mpe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Re.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=E_(t.tagName),t.type===wn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Re.endTagWithAttributes),t.selfClosing&&this._err(Re.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case wn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case wn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case wn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:wn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=zpe(t)?wn.WHITESPACE_CHARACTER:t===X.NULL?wn.NULL_CHARACTER:wn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(wn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=ip[0];s>=0&&(s=Fpe(ip,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=ip[s];const a=o&df.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&vUe(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[ip[s]&~df.VALUE_LENGTH]:u===1?[ip[++s]]:[ip[++s],ip[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Re.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Z.DATA:{this._stateData(t);break}case Z.RCDATA:{this._stateRcdata(t);break}case Z.RAWTEXT:{this._stateRawtext(t);break}case Z.SCRIPT_DATA:{this._stateScriptData(t);break}case Z.PLAINTEXT:{this._statePlaintext(t);break}case Z.TAG_OPEN:{this._stateTagOpen(t);break}case Z.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Z.TAG_NAME:{this._stateTagName(t);break}case Z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Z.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Z.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Z.COMMENT_START:{this._stateCommentStart(t);break}case Z.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Z.COMMENT:{this._stateComment(t);break}case Z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Z.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Z.COMMENT_END:{this._stateCommentEnd(t);break}case Z.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Z.DOCTYPE:{this._stateDoctype(t);break}case Z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Z.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Z.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Z.CDATA_SECTION:{this._stateCdataSection(t);break}case Z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Z.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Z.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Z.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Z.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Z.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Z.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=Z.DATA,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=Z.RCDATA,this.state=Z.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=Z.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(sp(t))this._createStartTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=Z.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=Z.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Re.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Z.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(sp(t))this._createEndTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Re.missingEndTagName),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.tagName+=Jr;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(dw(t)?jC(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=Z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){sp(t)?(this.state=Z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Z.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Z.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=Z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){sp(t)?(this.state=Z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=Z.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=Z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){sp(t)?(this.state=Z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:sp(t)?(this._emitChars("<"),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){sp(t)?(this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(xa.SCRIPT,!1)&&uZ(this.preprocessor.peek(xa.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<xa.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Jr);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(xa.SCRIPT,!1)&&uZ(this.preprocessor.peek(xa.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<xa.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Re.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Re.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.name+=Jr;break}default:this.currentAttr.name+=String.fromCodePoint(dw(t)?jC(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingAttributeValue),this.state=Z.DATA,this.emitCurrentTagToken();break}default:this.state=Z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=Jr;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=Jr;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_UNQUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=Jr;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Re.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBetweenAttributes),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.unexpectedSolidusInTag),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.data+=Jr;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(xa.DASH_DASH,!0)?(this._createCommentToken(xa.DASH_DASH.length+1),this.state=Z.COMMENT_START):this._consumeSequenceIfMatch(xa.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(xa.DOCTYPE.length+1),this.state=Z.DOCTYPE):this._consumeSequenceIfMatch(xa.CDATA_START,!0)?this.inForeignNode?this.state=Z.CDATA_SECTION:(this._err(Re.cdataInHtmlContent),this._createCommentToken(xa.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Re.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=Z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=Z.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.data+=Jr;break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=Z.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Z.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Z.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Re.nestedComment),this.state=Z.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=Z.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=Z.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Re.incorrectlyClosedComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Z.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBeforeDoctypeName),this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(dw(t))this._createDoctypeToken(String.fromCharCode(jC(t))),this.state=Z.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Re.unexpectedNullCharacter),this._createDoctypeToken(Jr),this.state=Z.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Z.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.name+=Jr;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(dw(t)?jC(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(xa.PUBLIC,!1)?this.state=Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(xa.SYSTEM,!1)?this.state=Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Re.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.publicId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.publicId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.systemId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.systemId+=Jr;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.NULL:{this._err(Re.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=Z.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Re.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=Z.CDATA_SECTION_END:(this._emitChars("]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=Z.NUMERIC_CHARACTER_REFERENCE:H4(t)?(this.state=Z.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=Z.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){H4(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Re.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE_START:ax(t)?(this.state=Z.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Re.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){yUe(t)?(this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Re.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Bpe(t)?this.charRefCode=this.charRefCode*16+t-55:jpe(t)?this.charRefCode=this.charRefCode*16+t-87:ax(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){ax(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Re.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Re.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Rpe(this.charRefCode))this._err(Re.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Ope(this.charRefCode))this._err(Re.noncharacterCharacterReference);else if(Ppe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Re.controlCharacterReference);const n=mUe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Upe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),lZ=new Set([...Upe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),zC=new Map([[N.APPLET,ze.HTML],[N.CAPTION,ze.HTML],[N.HTML,ze.HTML],[N.MARQUEE,ze.HTML],[N.OBJECT,ze.HTML],[N.TABLE,ze.HTML],[N.TD,ze.HTML],[N.TEMPLATE,ze.HTML],[N.TH,ze.HTML],[N.ANNOTATION_XML,ze.MATHML],[N.MI,ze.MATHML],[N.MN,ze.MATHML],[N.MO,ze.MATHML],[N.MS,ze.MATHML],[N.MTEXT,ze.MATHML],[N.DESC,ze.SVG],[N.FOREIGN_OBJECT,ze.SVG],[N.TITLE,ze.SVG]]),_Ue=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],EUe=[N.TR,N.TEMPLATE,N.HTML],wUe=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],xUe=[N.TABLE,N.TEMPLATE,N.HTML],SUe=[N.TD,N.TH];class TUe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ze.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ze.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(_Ue,ze.HTML)}popUntilTableCellPopped(){this.popUntilPopped(SUe,ze.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(xUe,ze.HTML)}clearBackToTableBodyContext(){this.clearBackTo(wUe,ze.HTML)}clearBackToTableRowContext(){this.clearBackTo(EUe,ze.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if(zC.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(Lpe(n)&&r===ze.HTML)return!0;if(zC.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if((r===N.UL||r===N.OL)&&i===ze.HTML||zC.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if(r===N.BUTTON&&i===ze.HTML||zC.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ze.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Upe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;lZ.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&lZ.has(this.currentTagId);)this.pop()}}const rF=3;var ec;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(ec=ec||(ec={}));const cZ={type:ec.Marker};class CUe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===ec.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<rF)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<rF)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=rF&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(cZ)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:ec.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ec.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(cZ);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===ec.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===ec.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===ec.Element&&n.element===t)}}function fZ(e){return{nodeName:"#text",value:e,parentNode:null}}const P1={createDocument(){return{nodeName:"#document",mode:mu.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};P1.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(P1.isTextNode(n)){n.value+=t;return}}P1.appendChild(e,fZ(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&P1.isTextNode(r)?r.value+=t:P1.insertBefore(e,fZ(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Vpe="html",AUe="about:legacy-compat",DUe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Hpe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],IUe=[...Hpe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],NUe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),qpe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],kUe=[...qpe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function dZ(e,t){return t.some(n=>e.startsWith(n))}function RUe(e){return e.name===Vpe&&e.publicId===null&&(e.systemId===null||e.systemId===AUe)}function PUe(e){if(e.name!==Vpe)return mu.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===DUe)return mu.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),NUe.has(n))return mu.QUIRKS;let r=t===null?IUe:Hpe;if(dZ(n,r))return mu.QUIRKS;if(r=t===null?qpe:kUe,dZ(n,r))return mu.LIMITED_QUIRKS}return mu.NO_QUIRKS}const hZ={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},OUe="definitionurl",MUe="definitionURL",$Ue=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),FUe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ze.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ze.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ze.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ze.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ze.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ze.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ze.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ze.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ze.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ze.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ze.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ze.XMLNS}]]),LUe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),BUe=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function jUe(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===Xp.COLOR||r===Xp.SIZE||r===Xp.FACE)||BUe.has(t)}function Wpe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===OUe){e.attrs[t].name=MUe;break}}function Gpe(e){for(let t=0;t<e.attrs.length;t++){const n=$Ue.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function xz(e){for(let t=0;t<e.attrs.length;t++){const n=FUe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function zUe(e){const t=LUe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=E_(e.tagName))}function UUe(e,t){return t===ze.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function VUe(e,t,n){if(t===ze.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Xp.ENCODING){const i=n[r].value.toLowerCase();return i===hZ.TEXT_HTML||i===hZ.APPLICATION_XML}}return t===ze.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function HUe(e,t,n,r){return(!r||r===ze.HTML)&&VUe(e,t,n)||(!r||r===ze.MATHML)&&UUe(e,t)}const qUe="hidden",WUe=8,GUe=3;var oe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(oe||(oe={}));const YUe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Ype=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),pZ={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:P1,onParseError:null};class mZ{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=oe.INITIAL,this.originalInsertionMode=oe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...pZ,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new bUe(this.options,this),this.activeFormattingElements=new CUe(this.treeAdapter),this.fragmentContextID=r?E_(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new TUe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...pZ,...n};t??(t=r.treeAdapter.createElement(xe.TEMPLATE,ze.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ze.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:YUe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ze.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ze.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=oe.TEXT}switchToPlaintextParsing(){this.insertionMode=oe.TEXT,this.originalInsertionMode=oe.IN_BODY,this.tokenizer.state=Mi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===xe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ze.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=Mi.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=Mi.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=Mi.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=Mi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ze.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ze.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(xe.HTML,ze.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===wn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===xe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ze.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ze.HTML)}_processToken(t){switch(t.type){case wn.CHARACTER:{this.onCharacter(t);break}case wn.NULL_CHARACTER:{this.onNullCharacter(t);break}case wn.COMMENT:{this.onComment(t);break}case wn.DOCTYPE:{this.onDoctype(t);break}case wn.START_TAG:{this._processStartTag(t);break}case wn.END_TAG:{this.onEndTag(t);break}case wn.EOF:{this.onEof(t);break}case wn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return HUe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===ec.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=oe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=oe.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=oe.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=oe.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=oe.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=oe.IN_TABLE;return}case N.BODY:{this.insertionMode=oe.IN_BODY;return}case N.FRAMESET:{this.insertionMode=oe.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?oe.AFTER_HEAD:oe.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=oe.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=oe.IN_HEAD;return}break}}this.insertionMode=oe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=oe.IN_SELECT_IN_TABLE;return}}this.insertionMode=oe.IN_SELECT}_isElementCausesFosterParenting(t){return Ype.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ze.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return pUe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){SHe(this,t);return}switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{ux(this,t);break}case oe.BEFORE_HEAD:{lx(this,t);break}case oe.IN_HEAD:{cx(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{fx(this,t);break}case oe.AFTER_HEAD:{dx(this,t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:{Xpe(this,t);break}case oe.TEXT:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{iF(this,t);break}case oe.IN_TABLE_TEXT:{nme(this,t);break}case oe.IN_COLUMN_GROUP:{YI(this,t);break}case oe.AFTER_BODY:{KI(this,t);break}case oe.AFTER_AFTER_BODY:{_D(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){xHe(this,t);return}switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{ux(this,t);break}case oe.BEFORE_HEAD:{lx(this,t);break}case oe.IN_HEAD:{cx(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{fx(this,t);break}case oe.AFTER_HEAD:{dx(this,t);break}case oe.TEXT:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{iF(this,t);break}case oe.IN_COLUMN_GROUP:{YI(this,t);break}case oe.AFTER_BODY:{KI(this,t);break}case oe.AFTER_AFTER_BODY:{_D(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){q4(this,t);return}switch(this.insertionMode){case oe.INITIAL:case oe.BEFORE_HTML:case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_TEMPLATE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{q4(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.AFTER_BODY:{tVe(this,t);break}case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{nVe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case oe.INITIAL:{rVe(this,t);break}case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:{this._err(t,Re.misplacedDoctype);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Re.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?THe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{iVe(this,t);break}case oe.BEFORE_HEAD:{oVe(this,t);break}case oe.IN_HEAD:{Rc(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{lVe(this,t);break}case oe.AFTER_HEAD:{fVe(this,t);break}case oe.IN_BODY:{Vo(this,t);break}case oe.IN_TABLE:{ib(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.IN_CAPTION:{aHe(this,t);break}case oe.IN_COLUMN_GROUP:{Cz(this,t);break}case oe.IN_TABLE_BODY:{DP(this,t);break}case oe.IN_ROW:{IP(this,t);break}case oe.IN_CELL:{cHe(this,t);break}case oe.IN_SELECT:{sme(this,t);break}case oe.IN_SELECT_IN_TABLE:{dHe(this,t);break}case oe.IN_TEMPLATE:{pHe(this,t);break}case oe.AFTER_BODY:{gHe(this,t);break}case oe.IN_FRAMESET:{yHe(this,t);break}case oe.AFTER_FRAMESET:{bHe(this,t);break}case oe.AFTER_AFTER_BODY:{EHe(this,t);break}case oe.AFTER_AFTER_FRAMESET:{wHe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?CHe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{sVe(this,t);break}case oe.BEFORE_HEAD:{aVe(this,t);break}case oe.IN_HEAD:{uVe(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{cVe(this,t);break}case oe.AFTER_HEAD:{dVe(this,t);break}case oe.IN_BODY:{AP(this,t);break}case oe.TEXT:{QVe(this,t);break}case oe.IN_TABLE:{vS(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.IN_CAPTION:{uHe(this,t);break}case oe.IN_COLUMN_GROUP:{lHe(this,t);break}case oe.IN_TABLE_BODY:{W4(this,t);break}case oe.IN_ROW:{ime(this,t);break}case oe.IN_CELL:{fHe(this,t);break}case oe.IN_SELECT:{ome(this,t);break}case oe.IN_SELECT_IN_TABLE:{hHe(this,t);break}case oe.IN_TEMPLATE:{mHe(this,t);break}case oe.AFTER_BODY:{ume(this,t);break}case oe.IN_FRAMESET:{vHe(this,t);break}case oe.AFTER_FRAMESET:{_He(this,t);break}case oe.AFTER_AFTER_BODY:{_D(this,t);break}}}onEof(t){switch(this.insertionMode){case oe.INITIAL:{wE(this,t);break}case oe.BEFORE_HTML:{ux(this,t);break}case oe.BEFORE_HEAD:{lx(this,t);break}case oe.IN_HEAD:{cx(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{fx(this,t);break}case oe.AFTER_HEAD:{dx(this,t);break}case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{eme(this,t);break}case oe.TEXT:{JVe(this,t);break}case oe.IN_TABLE_TEXT:{xE(this,t);break}case oe.IN_TEMPLATE:{ame(this,t);break}case oe.AFTER_BODY:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{Tz(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.TEXT:case oe.IN_COLUMN_GROUP:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{this._insertCharacters(t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:case oe.AFTER_BODY:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{Kpe(this,t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{iF(this,t);break}case oe.IN_TABLE_TEXT:{tme(this,t);break}}}}function KUe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Zpe(e,t),n}function XUe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function QUe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=GUe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=JUe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function JUe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function ZUe(e,t,n){const r=e.treeAdapter.getTagName(t),i=E_(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===ze.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function eVe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function Sz(e,t){for(let n=0;n<WUe;n++){const r=KUe(e,t);if(!r)break;const i=XUe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=QUe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&ZUe(e,o,s),eVe(e,i,r)}}function q4(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function tVe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function nVe(e,t){e._appendCommentNode(t,e.document)}function Tz(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function rVe(e,t){e._setDocumentType(t);const n=t.forceQuirks?mu.QUIRKS:PUe(t);RUe(t)||e._err(t,Re.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=oe.BEFORE_HTML}function wE(e,t){e._err(t,Re.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,mu.QUIRKS),e.insertionMode=oe.BEFORE_HTML,e._processToken(t)}function iVe(e,t){t.tagID===N.HTML?(e._insertElement(t,ze.HTML),e.insertionMode=oe.BEFORE_HEAD):ux(e,t)}function sVe(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&ux(e,t)}function ux(e,t){e._insertFakeRootElement(),e.insertionMode=oe.BEFORE_HEAD,e._processToken(t)}function oVe(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.HEAD:{e._insertElement(t,ze.HTML),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD;break}default:lx(e,t)}}function aVe(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?lx(e,t):e._err(t,Re.endTagWithoutMatchingOpenElement)}function lx(e,t){e._insertFakeElement(xe.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD,e._processToken(t)}function Rc(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,Mi.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Mi.RAWTEXT):(e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,Mi.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,Mi.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=oe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:cx(e,t)}}function uVe(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{cx(e,t);break}case N.TEMPLATE:{Cy(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function Cy(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Re.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Re.endTagWithoutMatchingOpenElement)}function cx(e,t){e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD,e._processToken(t)}function lVe(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{Rc(e,t);break}case N.NOSCRIPT:{e._err(t,Re.nestedNoscriptInHead);break}default:fx(e,t)}}function cVe(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=oe.IN_HEAD;break}case N.BR:{fx(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function fx(e,t){const n=t.type===wn.EOF?Re.openElementsLeftAfterEof:Re.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=oe.IN_HEAD,e._processToken(t)}function fVe(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.BODY:{e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Re.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),Rc(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:dx(e,t)}}function dVe(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{dx(e,t);break}case N.TEMPLATE:{Cy(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function dx(e,t){e._insertFakeElement(xe.BODY,N.BODY),e.insertionMode=oe.IN_BODY,CP(e,t)}function CP(e,t){switch(t.type){case wn.CHARACTER:{Xpe(e,t);break}case wn.WHITESPACE_CHARACTER:{Kpe(e,t);break}case wn.COMMENT:{q4(e,t);break}case wn.START_TAG:{Vo(e,t);break}case wn.END_TAG:{AP(e,t);break}case wn.EOF:{eme(e,t);break}}}function Kpe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Xpe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function hVe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function pVe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function mVe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_FRAMESET)}function gVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML)}function yVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),Lpe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ze.HTML)}function vVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function bVe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),n||(e.formElement=e.openElements.current))}function _Ve(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML)}function EVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.tokenizer.state=Mi.PLAINTEXT}function wVe(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.framesetOk=!1}function xVe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(xe.A);n&&(Sz(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function SVe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function TVe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(Sz(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function CVe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function AVe(e,t){e.treeAdapter.getDocumentMode(e.document)!==mu.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_TABLE}function Qpe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Jpe(e){const t=Mpe(e,Xp.TYPE);return t!=null&&t.toLowerCase()===qUe}function DVe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ze.HTML),Jpe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function IVe(e,t){e._appendElement(t,ze.HTML),t.ackSelfClosing=!0}function NVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function kVe(e,t){t.tagName=xe.IMG,t.tagID=N.IMG,Qpe(e,t)}function RVe(e,t){e._insertElement(t,ze.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Mi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=oe.TEXT}function PVe(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Mi.RAWTEXT)}function OVe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Mi.RAWTEXT)}function gZ(e,t){e._switchToTextParsing(t,Mi.RAWTEXT)}function MVe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===oe.IN_TABLE||e.insertionMode===oe.IN_CAPTION||e.insertionMode===oe.IN_TABLE_BODY||e.insertionMode===oe.IN_ROW||e.insertionMode===oe.IN_CELL?oe.IN_SELECT_IN_TABLE:oe.IN_SELECT}function $Ve(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML)}function FVe(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ze.HTML)}function LVe(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,ze.HTML)}function BVe(e,t){e._reconstructActiveFormattingElements(),Wpe(t),xz(t),t.selfClosing?e._appendElement(t,ze.MATHML):e._insertElement(t,ze.MATHML),t.ackSelfClosing=!0}function jVe(e,t){e._reconstructActiveFormattingElements(),Gpe(t),xz(t),t.selfClosing?e._appendElement(t,ze.SVG):e._insertElement(t,ze.SVG),t.ackSelfClosing=!0}function yZ(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML)}function Vo(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{SVe(e,t);break}case N.A:{xVe(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{yVe(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{gVe(e,t);break}case N.LI:case N.DD:case N.DT:{_Ve(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{Qpe(e,t);break}case N.HR:{NVe(e,t);break}case N.RB:case N.RTC:{FVe(e,t);break}case N.RT:case N.RP:{LVe(e,t);break}case N.PRE:case N.LISTING:{vVe(e,t);break}case N.XMP:{PVe(e,t);break}case N.SVG:{jVe(e,t);break}case N.HTML:{hVe(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{Rc(e,t);break}case N.BODY:{pVe(e,t);break}case N.FORM:{bVe(e,t);break}case N.NOBR:{TVe(e,t);break}case N.MATH:{BVe(e,t);break}case N.TABLE:{AVe(e,t);break}case N.INPUT:{DVe(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{IVe(e,t);break}case N.IMAGE:{kVe(e,t);break}case N.BUTTON:{wVe(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{CVe(e,t);break}case N.IFRAME:{OVe(e,t);break}case N.SELECT:{MVe(e,t);break}case N.OPTION:case N.OPTGROUP:{$Ve(e,t);break}case N.NOEMBED:{gZ(e,t);break}case N.FRAMESET:{mVe(e,t);break}case N.TEXTAREA:{RVe(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?gZ(e,t):yZ(e,t);break}case N.PLAINTEXT:{EVe(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:yZ(e,t)}}function zVe(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=oe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function UVe(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=oe.AFTER_BODY,ume(e,t))}function VVe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function HVe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function qVe(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(xe.P,N.P),e._closePElement()}function WVe(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function GVe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function YVe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function KVe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function XVe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(xe.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function Zpe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function AP(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{Sz(e,t);break}case N.P:{qVe(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{VVe(e,t);break}case N.LI:{WVe(e);break}case N.DD:case N.DT:{GVe(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{YVe(e);break}case N.BR:{XVe(e);break}case N.BODY:{zVe(e,t);break}case N.HTML:{UVe(e,t);break}case N.FORM:{HVe(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{KVe(e,t);break}case N.TEMPLATE:{Cy(e,t);break}default:Zpe(e,t)}}function eme(e,t){e.tmplInsertionModeStack.length>0?ame(e,t):Tz(e,t)}function QVe(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function JVe(e,t){e._err(t,Re.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function iF(e,t){if(Ype.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=oe.IN_TABLE_TEXT,t.type){case wn.CHARACTER:{nme(e,t);break}case wn.WHITESPACE_CHARACTER:{tme(e,t);break}}else zT(e,t)}function ZVe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_CAPTION}function eHe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_COLUMN_GROUP}function tHe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(xe.COLGROUP,N.COLGROUP),e.insertionMode=oe.IN_COLUMN_GROUP,Cz(e,t)}function nHe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_TABLE_BODY}function rHe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(xe.TBODY,N.TBODY),e.insertionMode=oe.IN_TABLE_BODY,DP(e,t)}function iHe(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function sHe(e,t){Jpe(t)?e._appendElement(t,ze.HTML):zT(e,t),t.ackSelfClosing=!0}function oHe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ze.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function ib(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{rHe(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{Rc(e,t);break}case N.COL:{tHe(e,t);break}case N.FORM:{oHe(e,t);break}case N.TABLE:{iHe(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{nHe(e,t);break}case N.INPUT:{sHe(e,t);break}case N.CAPTION:{ZVe(e,t);break}case N.COLGROUP:{eHe(e,t);break}default:zT(e,t)}}function vS(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Cy(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:zT(e,t)}}function zT(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,CP(e,t),e.fosterParentingEnabled=n}function tme(e,t){e.pendingCharacterTokens.push(t)}function nme(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function xE(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)zT(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const rme=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function aHe(e,t){const n=t.tagID;rme.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,ib(e,t)):Vo(e,t)}function uHe(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,n===N.TABLE&&vS(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:AP(e,t)}}function Cz(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.COL:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{Rc(e,t);break}default:YI(e,t)}}function lHe(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case N.TEMPLATE:{Cy(e,t);break}case N.COL:break;default:YI(e,t)}}function YI(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE,e._processToken(t))}function DP(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(xe.TR,N.TR),e.insertionMode=oe.IN_ROW,IP(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,ib(e,t));break}default:ib(e,t)}}function W4(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,vS(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:vS(e,t)}}function IP(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,DP(e,t));break}default:ib(e,t)}}function ime(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,W4(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,W4(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:vS(e,t)}}function cHe(e,t){const n=t.tagID;rme.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),IP(e,t)):Vo(e,t)}function fHe(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),ime(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:AP(e,t)}}function sme(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,ze.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ze.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{Rc(e,t);break}}}function ome(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Cy(e,t);break}}}function dHe(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):sme(e,t)}function hHe(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ome(e,t)}function pHe(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{Rc(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=oe.IN_TABLE,e.insertionMode=oe.IN_TABLE,ib(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=oe.IN_COLUMN_GROUP,e.insertionMode=oe.IN_COLUMN_GROUP,Cz(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=oe.IN_TABLE_BODY,e.insertionMode=oe.IN_TABLE_BODY,DP(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=oe.IN_ROW,e.insertionMode=oe.IN_ROW,IP(e,t);break}default:e.tmplInsertionModeStack[0]=oe.IN_BODY,e.insertionMode=oe.IN_BODY,Vo(e,t)}}function mHe(e,t){t.tagID===N.TEMPLATE&&Cy(e,t)}function ame(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Tz(e,t)}function gHe(e,t){t.tagID===N.HTML?Vo(e,t):KI(e,t)}function ume(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=oe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else KI(e,t)}function KI(e,t){e.insertionMode=oe.IN_BODY,CP(e,t)}function yHe(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.FRAMESET:{e._insertElement(t,ze.HTML);break}case N.FRAME:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{Rc(e,t);break}}}function vHe(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=oe.AFTER_FRAMESET))}function bHe(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.NOFRAMES:{Rc(e,t);break}}}function _He(e,t){t.tagID===N.HTML&&(e.insertionMode=oe.AFTER_AFTER_FRAMESET)}function EHe(e,t){t.tagID===N.HTML?Vo(e,t):_D(e,t)}function _D(e,t){e.insertionMode=oe.IN_BODY,CP(e,t)}function wHe(e,t){switch(t.tagID){case N.HTML:{Vo(e,t);break}case N.NOFRAMES:{Rc(e,t);break}}}function xHe(e,t){t.chars=Jr,e._insertCharacters(t)}function SHe(e,t){e._insertCharacters(t),e.framesetOk=!1}function lme(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ze.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function THe(e,t){if(jUe(t))lme(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ze.MATHML?Wpe(t):r===ze.SVG&&(zUe(t),Gpe(t)),xz(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function CHe(e,t){if(t.tagID===N.P||t.tagID===N.BR){lme(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ze.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}xe.AREA,xe.BASE,xe.BASEFONT,xe.BGSOUND,xe.BR,xe.COL,xe.EMBED,xe.FRAME,xe.HR,xe.IMG,xe.INPUT,xe.KEYGEN,xe.LINK,xe.META,xe.PARAM,xe.SOURCE,xe.TRACK,xe.WBR;const AHe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),vZ={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function cme(e,t){const n=FHe(e),r=Npe("type",{handlers:{root:DHe,element:IHe,text:NHe,comment:dme,doctype:kHe,raw:PHe},unknown:OHe}),i={parser:n?new mZ(vZ):mZ.getFragmentParser(void 0,vZ),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),w_(i,Wf());const s=n?i.parser.document:i.parser.getFragment(),o=Bze(s,{file:i.options.file});return i.stitches&&bz(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function fme(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function DHe(e,t){fme(e.children,t)}function IHe(e,t){MHe(e,t),fme(e.children,t),$He(e,t)}function NHe(e,t){const n={type:wn.CHARACTER,chars:e.value,location:UT(e)};w_(t,Wf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function kHe(e,t){const n={type:wn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:UT(e)};w_(t,Wf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function RHe(e,t){t.stitches=!0;const n=LHe(e);if("children"in e&&"children"in n){const r=cme({type:"root",children:e.children},t.options);n.children=r.children}dme({type:"comment",value:{stitch:n}},t)}function dme(e,t){const n=e.value,r={type:wn.COMMENT,data:n,location:UT(e)};w_(t,Wf(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function PHe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,hme(t,Wf(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function OHe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))RHe(n,t);else{let r="";throw AHe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function w_(e,t){hme(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Mi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function hme(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function MHe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Mi.PLAINTEXT)return;w_(t,Wf(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:n0.html;i===n0.html&&n==="svg"&&(i=n0.svg);const s=Hze({...e,children:[]},{space:i===n0.svg?"svg":"html"}),o={type:wn.START_TAG,tagName:n,tagID:E_(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:UT(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function $He(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Jze.includes(n)||t.parser.tokenizer.state===Mi.PLAINTEXT)return;w_(t,wP(e));const r={type:wn.END_TAG,tagName:n,tagID:E_(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:UT(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Mi.RCDATA||t.parser.tokenizer.state===Mi.RAWTEXT||t.parser.tokenizer.state===Mi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Mi.DATA)}function FHe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function UT(e){const t=Wf(e)||{line:void 0,column:void 0,offset:void 0},n=wP(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function LHe(e){return"children"in e?rb({...e,children:[]}):rb(e)}function BHe(e){return function(t,n){return cme(t,{...e,file:n})}}function ca({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return w.jsx(Wm,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return w.jsx(Ze,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return w.jsx(ci,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return w.jsx(ci,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return w.jsx(ci,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return w.jsx(ci,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return w.jsx(ci,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return w.jsx(ci,{...s,order:6,...s,pb:12})},a({node:i,...s}){return w.jsx(c_,{...s,ref:void 0})},ul({node:i,...s}){return w.jsx(mc,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return w.jsx(mc,{type:"ordered",withPadding:!0,...o,pb:8})}};return w.jsx(Cze,{components:n,rehypePlugins:[BHe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function G4({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return w.jsx(ca,{text:n})}const jHe="https://github.com/revisit-studies/study/tree/main/public/";function zHe({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Lh();return w.jsx(Wr.Main,{children:w.jsxs(_l,{size:"xs",px:"xs",children:[w.jsx(Wm,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${qf}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),w.jsx(Ze,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Uhe(i);return w.jsx(Yi,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:w.jsxs(Ey,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(Ze,{fw:"bold",children:i}),w.jsxs(Jt,{align:"center",direction:"row",children:[w.jsx(fJ,{color:"red"}),w.jsx(Ze,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),w.jsx(G4,{issues:s.errors,type:"error"})]}):w.jsxs(w.Fragment,{children:[w.jsx(Ze,{fw:"bold",children:s.studyMetadata.title}),w.jsxs(Ze,{c:"dimmed",children:[w.jsx(Ze,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),w.jsx(Ze,{c:"dimmed",children:s.studyMetadata.description}),w.jsx(Ze,{c:"dimmed",ta:"right",style:{paddingRight:5},children:w.jsxs(c_,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${jHe}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs(Jt,{align:"center",direction:"row",children:[w.jsx(fJ,{color:"orange"}),w.jsx(Ze,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),w.jsx(G4,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var pme={exports:{}},mme={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=k;function UHe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var VHe=typeof Object.is=="function"?Object.is:UHe,HHe=VT.useSyncExternalStore,qHe=VT.useRef,WHe=VT.useEffect,GHe=VT.useMemo,YHe=VT.useDebugValue;mme.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=qHe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=GHe(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,VHe(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=HHe(e,s[0],s[1]);return WHe(function(){o.hasValue=!0,o.value=a},[a]),YHe(a),a};pme.exports=mme;var KHe=pme.exports,Eu="default"in cI?xi:cI,bZ=Symbol.for("react-redux-context"),_Z=typeof globalThis<"u"?globalThis:{};function XHe(){if(!Eu.createContext)return{};const e=_Z[bZ]??(_Z[bZ]=new Map);let t=e.get(Eu.createContext);return t||(t=Eu.createContext(null),e.set(Eu.createContext,t)),t}var pm=XHe(),QHe=()=>{throw new Error("uSES not initialized!")};function Az(e=pm){return function(){return Eu.useContext(e)}}var gme=Az(),yme=QHe,JHe=e=>{yme=e},ZHe=(e,t)=>e===t;function eqe(e=pm){const t=e===pm?gme:Az(e),n=(r,i={})=>{const{equalityFn:s=ZHe,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Eu.useRef(!0);const d=Eu.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=yme(u.addNestedSub,a.getState,l||a.getState,d,s);return Eu.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var tqe=eqe();function nqe(e){e()}function rqe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){nqe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var EZ={notify(){},get:()=>[]};function iqe(e,t){let n,r=EZ,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=rqe())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=EZ)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var sqe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oqe=typeof navigator<"u"&&navigator.product==="ReactNative",aqe=sqe||oqe?Eu.useLayoutEffect:Eu.useEffect;function uqe({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Eu.useMemo(()=>{const l=iqe(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Eu.useMemo(()=>e.getState(),[e]);aqe(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||pm;return Eu.createElement(u.Provider,{value:o},n)}var lqe=uqe;function vme(e=pm){const t=e===pm?gme:Az(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var cqe=vme();function fqe(e=pm){const t=e===pm?cqe:vme(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var bme=fqe();JHe(KHe.useSyncExternalStoreWithSelector);function Hs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dqe=typeof Symbol=="function"&&Symbol.observable||"@@observable",wZ=dqe,sF=()=>Math.random().toString(36).substring(7).split("").join("."),hqe={INIT:`@@redux/INIT${sF()}`,REPLACE:`@@redux/REPLACE${sF()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sF()}`},XI=hqe;function Dz(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function _me(e,t,n){if(typeof e!="function")throw new Error(Hs(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Hs(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Hs(1));return n(_me)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Hs(3));return i}function f(g){if(typeof g!="function")throw new Error(Hs(4));if(u)throw new Error(Hs(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Hs(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!Dz(g))throw new Error(Hs(7));if(typeof g.type>"u")throw new Error(Hs(8));if(typeof g.type!="string")throw new Error(Hs(17));if(u)throw new Error(Hs(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Hs(10));r=g,d({type:XI.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Hs(11));function v(){const E=y;E.next&&E.next(c())}return v(),{unsubscribe:g(v)}},[wZ](){return this}}}return d({type:XI.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[wZ]:p}}function pqe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:XI.INIT})>"u")throw new Error(Hs(12));if(typeof n(void 0,{type:XI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Hs(13))})}function mqe(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{pqe(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Hs(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function QI(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function gqe(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Hs(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=QI(...a)(i.dispatch),{...i,dispatch:s}}}function yqe(e){return Dz(e)&&"type"in e&&typeof e.type=="string"}var Eme=Symbol.for("immer-nothing"),xZ=Symbol.for("immer-draftable"),Ou=Symbol.for("immer-state");function nc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sb=Object.getPrototypeOf;function mm(e){return!!e&&!!e[Ou]}function gh(e){var t;return e?wme(e)||Array.isArray(e)||!!e[xZ]||!!((t=e.constructor)!=null&&t[xZ])||kP(e)||RP(e):!1}var vqe=Object.prototype.constructor.toString();function wme(e){if(!e||typeof e!="object")return!1;const t=sb(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===vqe}function JI(e,t){NP(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function NP(e){const t=e[Ou];return t?t.type_:Array.isArray(e)?1:kP(e)?2:RP(e)?3:0}function Y4(e,t){return NP(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xme(e,t,n){const r=NP(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function bqe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function kP(e){return e instanceof Map}function RP(e){return e instanceof Set}function Og(e){return e.copy_||e.base_}function K4(e,t){if(kP(e))return new Map(e);if(RP(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=wme(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ou];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(sb(e),r)}else{const r=sb(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Iz(e,t=!1){return PP(e)||mm(e)||!gh(e)||(NP(e)>1&&(e.set=e.add=e.clear=e.delete=_qe),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Iz(r,!0))),e}function _qe(){nc(2)}function PP(e){return Object.isFrozen(e)}var Eqe={};function P0(e){const t=Eqe[e];return t||nc(0,e),t}var bS;function Sme(){return bS}function wqe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SZ(e,t){t&&(P0("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X4(e){Q4(e),e.drafts_.forEach(xqe),e.drafts_=null}function Q4(e){e===bS&&(bS=e.parent_)}function TZ(e){return bS=wqe(bS,e)}function xqe(e){const t=e[Ou];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function CZ(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ou].modified_&&(X4(t),nc(4)),gh(e)&&(e=ZI(t,e),t.parent_||eN(t,e)),t.patches_&&P0("Patches").generateReplacementPatches_(n[Ou].base_,e,t.patches_,t.inversePatches_)):e=ZI(t,n,[]),X4(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Eme?e:void 0}function ZI(e,t,n){if(PP(t))return t;const r=t[Ou];if(!r)return JI(t,(i,s)=>AZ(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return eN(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),JI(s,(a,u)=>AZ(e,r,i,a,u,n,o)),eN(e,i,!1),n&&e.patches_&&P0("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function AZ(e,t,n,r,i,s,o){if(mm(i)){const a=s&&t&&t.type_!==3&&!Y4(t.assigned_,r)?s.concat(r):void 0,u=ZI(e,i,a);if(xme(n,r,u),mm(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gh(i)&&!PP(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ZI(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&eN(e,i)}}function eN(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Iz(t,n)}function Sqe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Sme(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Nz;n&&(i=[r],s=_S);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Nz={get(e,t){if(t===Ou)return e;const n=Og(e);if(!Y4(n,t))return Tqe(e,n,t);const r=n[t];return e.finalized_||!gh(r)?r:r===oF(e.base_,t)?(aF(e),e.copy_[t]=Z4(r,e)):r},has(e,t){return t in Og(e)},ownKeys(e){return Reflect.ownKeys(Og(e))},set(e,t,n){const r=Tme(Og(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=oF(Og(e),t),s=i==null?void 0:i[Ou];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(bqe(n,i)&&(n!==void 0||Y4(e.base_,t)))return!0;aF(e),J4(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return oF(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,aF(e),J4(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Og(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){nc(11)},getPrototypeOf(e){return sb(e.base_)},setPrototypeOf(){nc(12)}},_S={};JI(Nz,(e,t)=>{_S[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_S.deleteProperty=function(e,t){return _S.set.call(this,e,t,void 0)};_S.set=function(e,t,n){return Nz.set.call(this,e[0],t,n,e[0])};function oF(e,t){const n=e[Ou];return(n?Og(n):e)[t]}function Tqe(e,t,n){var i;const r=Tme(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Tme(e,t){if(!(t in e))return;let n=sb(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=sb(n)}}function J4(e){e.modified_||(e.modified_=!0,e.parent_&&J4(e.parent_))}function aF(e){e.copy_||(e.copy_=K4(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Cqe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&nc(6),r!==void 0&&typeof r!="function"&&nc(7);let i;if(gh(t)){const s=TZ(this),o=Z4(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?X4(s):Q4(s)}return SZ(s,r),CZ(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Eme&&(i=void 0),this.autoFreeze_&&Iz(i,!0),r){const s=[],o=[];P0("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else nc(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gh(e)||nc(8),mm(e)&&(e=Cme(e));const t=TZ(this),n=Z4(e,void 0);return n[Ou].isManual_=!0,Q4(t),n}finishDraft(e,t){const n=e&&e[Ou];(!n||!n.isManual_)&&nc(9);const{scope_:r}=n;return SZ(r,t),CZ(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=P0("Patches").applyPatches_;return mm(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Z4(e,t){const n=kP(e)?P0("MapSet").proxyMap_(e,t):RP(e)?P0("MapSet").proxySet_(e,t):Sqe(e,t);return(t?t.scope_:Sme()).drafts_.push(n),n}function Cme(e){return mm(e)||nc(10,e),Ame(e)}function Ame(e){if(!gh(e)||PP(e))return e;const t=e[Ou];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=K4(e,t.scope_.immer_.useStrictShallowCopy_)}else n=K4(e,!0);return JI(n,(r,i)=>{xme(n,r,Ame(i))}),t&&(t.finalized_=!1),n}var Mu=new Cqe,Dme=Mu.produce;Mu.produceWithPatches.bind(Mu);Mu.setAutoFreeze.bind(Mu);Mu.setUseStrictShallowCopy.bind(Mu);Mu.applyPatches.bind(Mu);Mu.createDraft.bind(Mu);Mu.finishDraft.bind(Mu);function Aqe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Dqe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Iqe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var DZ=e=>Array.isArray(e)?e:[e];function Nqe(e){const t=Array.isArray(e[0])?e[0]:e;return Iqe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function kqe(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Rqe=class{constructor(e){this.value=e}deref(){return this.value}},Pqe=typeof WeakRef<"u"?WeakRef:Rqe,Oqe=0,IZ=1;function UC(){return{s:Oqe,v:void 0,o:null,p:null}}function kz(e,t={}){let n=UC();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=UC(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=UC(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===IZ)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Pqe(c):c}return l.s=IZ,l.v=c,c}return o.clearCache=()=>{n=UC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Ime(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Aqe(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=kz,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=DZ(d),y=DZ(p),v=Nqe(i),b=f(function(){return s++,l.apply(null,arguments)},...g),E=h(function(){o++;const x=kqe(v,arguments);return a=b.apply(null,x),a},...y);return Object.assign(E,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Mqe=Ime(kz),$qe=Object.assign((e,t=Mqe)=>{Dqe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>$qe});function Nme(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Fqe=Nme(),Lqe=Nme,Bqe=(...e)=>{const t=Ime(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(mm(o)?Cme(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Bqe(kz);var jqe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?QI:QI.apply(null,arguments)};function ob(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Wa(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>yqe(r)&&r.type===e,n}var kme=class hw extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hw.prototype)}static get[Symbol.species](){return hw}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hw(...t[0].concat(this)):new hw(...t.concat(this))}};function NZ(e){return gh(e)?Dme(e,()=>{}):e}function kZ(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Wa(10));const r=n.insert(t,e);return e.set(t,r),r}function zqe(e){return typeof e=="boolean"}var Uqe=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new kme;return n&&(zqe(n)?o.push(Fqe):o.push(Lqe(n.extraArgument))),o},Vqe="RTK_autoBatch",Rme=e=>t=>{setTimeout(t,e)},Hqe=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Rme(10),qqe=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Hqe:e.type==="callback"?e.queueNotification:Rme(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Vqe]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Wqe=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new kme(e);return r&&i.push(qqe(typeof r=="object"?r:void 0)),i},Gqe=!0;function Yqe(e){const t=Uqe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(Dz(n))a=mqe(n);else throw new Error(Wa(1));let u;typeof r=="function"?u=r(t):u=t();let l=QI;i&&(l=jqe({trace:!Gqe,...typeof i=="object"&&i}));const c=gqe(...u),f=Wqe(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return _me(a,s,h)}function Pme(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Wa(28));if(a in t)throw new Error(Wa(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Kqe(e){return typeof e=="function"}function Xqe(e,t){let[n,r,i]=Pme(t),s;if(Kqe(e))s=()=>NZ(e());else{const a=NZ(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(mm(c)){const h=f(c,u);return h===void 0?c:h}else{if(gh(c))return Dme(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Wa(9))}return d}}return c},a)}return o.getInitialState=s,o}var Qqe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Jqe=(e=21)=>{let t="",n=e;for(;n--;)t+=Qqe[Math.random()*64|0];return t},Zqe=Symbol.for("rtk-slice-createasyncthunk");function eWe(e,t){return`${e}/${t}`}function tWe({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Zqe];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Wa(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(iWe()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,E){const _=typeof b=="string"?b:b.type;if(!_)throw new Error(Wa(12));if(_ in l.sliceCaseReducersByType)throw new Error(Wa(13));return l.sliceCaseReducersByType[_]=E,c},addMatcher(b,E){return l.sliceMatchers.push({matcher:b,reducer:E}),c},exposeAction(b,E){return l.actionCreators[b]=E,c},exposeCaseReducer(b,E){return l.sliceCaseReducersByName[b]=E,c}};u.forEach(b=>{const E=a[b],_={reducerName:b,type:eWe(s,b),createNotation:typeof i.reducers=="function"};oWe(E)?uWe(_,E,c,t):sWe(_,E,c)});function f(){const[b={},E=[],_=void 0]=typeof i.extraReducers=="function"?Pme(i.extraReducers):[i.extraReducers],x={...b,...l.sliceCaseReducersByType};return Xqe(i.initialState,S=>{for(let C in x)S.addCase(C,x[C]);for(let C of l.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of E)S.addMatcher(C.matcher,C.reducer);_&&S.addDefaultCase(_)})}const d=b=>b,h=new Map;let p;function m(b,E){return p||(p=f()),p(b,E)}function g(){return p||(p=f()),p.getInitialState()}function y(b,E=!1){function _(S){let C=S[b];return typeof C>"u"&&E&&(C=g()),C}function x(S=d){const C=kZ(h,E,{insert:()=>new WeakMap});return kZ(C,S,{insert:()=>{const A={};for(const[D,I]of Object.entries(i.selectors??{}))A[D]=nWe(I,S,g,E);return A}})}return{reducerPath:b,getSelectors:x,get selectors(){return x(_)},selectSlice:_}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:E,..._}={}){const x=E??o;return b.inject({reducerPath:x,reducer:m},_),{...v,...y(x,!0)}}};return v}}function nWe(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var rWe=tWe();function iWe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function sWe({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!aWe(r))throw new Error(Wa(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?ob(e,o):ob(e))}function oWe(e){return e._reducerDefinitionType==="asyncThunk"}function aWe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function uWe({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Wa(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||VC,pending:a||VC,rejected:u||VC,settled:l||VC})}function VC(){}var lWe=(e,t)=>{if(typeof e!="function")throw new Error(Wa(32))},Rz="listenerMiddleware",cWe=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=ob(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Wa(21));return lWe(s),{predicate:i,type:t,effect:s}},fWe=Object.assign(e=>{const{type:t,predicate:n,effect:r}=cWe(e);return{id:Jqe(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Wa(22))}}},{withTypes:()=>fWe}),dWe=Object.assign(ob(`${Rz}/add`),{withTypes:()=>dWe});ob(`${Rz}/removeAll`);var hWe=Object.assign(ob(`${Rz}/remove`),{withTypes:()=>hWe});function Wa(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function yh(e){return e.components.flatMap(t=>typeof t=="string"?t:yh(t))}function Ome(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:Ome(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Mme(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+yh(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+yh(e).length-1}];r+=1}else{const o=Mme(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function $me(e,t){const n=Mme(e,t,0);return typeof n=="number"?null:n}function Fme(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Fme(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function pWe(e,t){const n=Fme(e,t,0);return n.found?n.distance:-1}function Lme(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...Lme(i,`${t}-${s}`))}),n}async function mWe(e,t,n,r,i){const s=yh(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=rWe({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Yqe({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const Bme=k.createContext(null);function Gf(){return k.useContext(Bme).actions}const Yf=bme,Ol=tqe;function gWe(e){return Ol(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function Pz(){return Ol(e=>yh(e.sequence))}function Ay(){const{studyId:e}=R0();return`${e}`}function Bh(){const{index:e}=R0(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Dy(){const e=Bh(),t=Pz();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var tN={exports:{}};tN.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",E="[object RegExp]",_="[object Set]",x="[object String]",S="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",D="[object DataView]",I="[object Float32Array]",O="[object Float64Array]",R="[object Int8Array]",M="[object Int16Array]",F="[object Int32Array]",P="[object Uint8Array]",j="[object Uint8ClampedArray]",z="[object Uint16Array]",V="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,B={};B[I]=B[O]=B[R]=B[M]=B[F]=B[P]=B[j]=B[z]=B[V]=!0,B[a]=B[u]=B[A]=B[c]=B[D]=B[f]=B[d]=B[h]=B[m]=B[g]=B[v]=B[E]=B[_]=B[x]=B[C]=!1;var q=typeof Hr=="object"&&Hr&&Hr.Object===Object&&Hr,Y=typeof self=="object"&&self&&self.Object===Object&&self,re=q||Y||Function("return this")(),pe=t&&!t.nodeType&&t,_e=pe&&!0&&e&&!e.nodeType&&e,de=_e&&_e.exports===pe,ye=de&&q.process,Ce=function(){try{var ne=_e&&_e.require&&_e.require("util").types;return ne||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ce&&Ce.isTypedArray;function qe(ne,fe,ke){switch(ke.length){case 0:return ne.call(fe);case 1:return ne.call(fe,ke[0]);case 2:return ne.call(fe,ke[0],ke[1]);case 3:return ne.call(fe,ke[0],ke[1],ke[2])}return ne.apply(fe,ke)}function He(ne,fe){for(var ke=-1,It=Array(ne);++ke<ne;)It[ke]=fe(ke);return It}function ht(ne){return function(fe){return ne(fe)}}function rt(ne,fe){return ne==null?void 0:ne[fe]}function Pe(ne,fe){return function(ke){return ne(fe(ke))}}var Be=Array.prototype,Xe=Function.prototype,mt=Object.prototype,Ft=re["__core-js_shared__"],bt=Xe.toString,G=mt.hasOwnProperty,ie=function(){var ne=/[^.]+$/.exec(Ft&&Ft.keys&&Ft.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),me=mt.toString,J=bt.call(Object),se=RegExp("^"+bt.call(G).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ce=de?re.Buffer:void 0,Se=re.Symbol,Te=re.Uint8Array;ce&&ce.allocUnsafe;var Ge=Pe(Object.getPrototypeOf,Object),je=Object.create,Ct=mt.propertyIsEnumerable,Ot=Be.splice,Dt=Se?Se.toStringTag:void 0,Vt=function(){try{var ne=Qe(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),Zt=ce?ce.isBuffer:void 0,an=Math.max,gr=Date.now,lr=Qe(re,"Map"),fn=Qe(Object,"create"),Xr=function(){function ne(){}return function(fe){if(!pd(fe))return{};if(je)return je(fe);ne.prototype=fe;var ke=new ne;return ne.prototype=void 0,ke}}();function er(ne){var fe=-1,ke=ne==null?0:ne.length;for(this.clear();++fe<ke;){var It=ne[fe];this.set(It[0],It[1])}}function gi(){this.__data__=fn?fn(null):{},this.size=0}function Ll(ne){var fe=this.has(ne)&&delete this.__data__[ne];return this.size-=fe?1:0,fe}function Ho(ne){var fe=this.__data__;if(fn){var ke=fe[ne];return ke===r?void 0:ke}return G.call(fe,ne)?fe[ne]:void 0}function Wu(ne){var fe=this.__data__;return fn?fe[ne]!==void 0:G.call(fe,ne)}function Yn(ne,fe){var ke=this.__data__;return this.size+=this.has(ne)?0:1,ke[ne]=fn&&fe===void 0?r:fe,this}er.prototype.clear=gi,er.prototype.delete=Ll,er.prototype.get=Ho,er.prototype.has=Wu,er.prototype.set=Yn;function Lr(ne){var fe=-1,ke=ne==null?0:ne.length;for(this.clear();++fe<ke;){var It=ne[fe];this.set(It[0],It[1])}}function yr(){this.__data__=[],this.size=0}function uo(ne){var fe=this.__data__,ke=bn(fe,ne);if(ke<0)return!1;var It=fe.length-1;return ke==It?fe.pop():Ot.call(fe,ke,1),--this.size,!0}function Fs(ne){var fe=this.__data__,ke=bn(fe,ne);return ke<0?void 0:fe[ke][1]}function Ls(ne){return bn(this.__data__,ne)>-1}function ue(ne,fe){var ke=this.__data__,It=bn(ke,ne);return It<0?(++this.size,ke.push([ne,fe])):ke[It][1]=fe,this}Lr.prototype.clear=yr,Lr.prototype.delete=uo,Lr.prototype.get=Fs,Lr.prototype.has=Ls,Lr.prototype.set=ue;function te(ne){var fe=-1,ke=ne==null?0:ne.length;for(this.clear();++fe<ke;){var It=ne[fe];this.set(It[0],It[1])}}function le(){this.size=0,this.__data__={hash:new er,map:new(lr||Lr),string:new er}}function De(ne){var fe=Ke(this,ne).delete(ne);return this.size-=fe?1:0,fe}function Ae(ne){return Ke(this,ne).get(ne)}function at(ne){return Ke(this,ne).has(ne)}function St(ne,fe){var ke=Ke(this,ne),It=ke.size;return ke.set(ne,fe),this.size+=ke.size==It?0:1,this}te.prototype.clear=le,te.prototype.delete=De,te.prototype.get=Ae,te.prototype.has=at,te.prototype.set=St;function Xt(ne){var fe=this.__data__=new Lr(ne);this.size=fe.size}function _n(){this.__data__=new Lr,this.size=0}function Sn(ne){var fe=this.__data__,ke=fe.delete(ne);return this.size=fe.size,ke}function un(ne){return this.__data__.get(ne)}function $n(ne){return this.__data__.has(ne)}function tr(ne,fe){var ke=this.__data__;if(ke instanceof Lr){var It=ke.__data__;if(!lr||It.length<n-1)return It.push([ne,fe]),this.size=++ke.size,this;ke=this.__data__=new te(It)}return ke.set(ne,fe),this.size=ke.size,this}Xt.prototype.clear=_n,Xt.prototype.delete=Sn,Xt.prototype.get=un,Xt.prototype.has=$n,Xt.prototype.set=tr;function Ht(ne,fe){var ke=dd(ne),It=!ke&&_a(ne),Dn=!ke&&!It&&hd(ne),or=!ke&&!It&&!Dn&&sC(ne),xr=ke||It||Dn||or,Rn=xr?He(ne.length,String):[],Sr=Rn.length;for(var Ni in ne)xr&&(Ni=="length"||Dn&&(Ni=="offset"||Ni=="parent")||or&&(Ni=="buffer"||Ni=="byteLength"||Ni=="byteOffset")||xt(Ni,Sr))||Rn.push(Ni);return Rn}function Fn(ne,fe,ke){(ke!==void 0&&!Yu(ne[fe],ke)||ke===void 0&&!(fe in ne))&&Gt(ne,fe,ke)}function cr(ne,fe,ke){var It=ne[fe];(!(G.call(ne,fe)&&Yu(It,ke))||ke===void 0&&!(fe in ne))&&Gt(ne,fe,ke)}function bn(ne,fe){for(var ke=ne.length;ke--;)if(Yu(ne[ke][0],fe))return ke;return-1}function Gt(ne,fe,ke){fe=="__proto__"&&Vt?Vt(ne,fe,{configurable:!0,enumerable:!0,value:ke,writable:!0}):ne[fe]=ke}var Hn=$e();function vr(ne){return ne==null?ne===void 0?S:y:Dt&&Dt in Object(ne)?Je(ne):co(ne)}function yi(ne){return Ea(ne)&&vr(ne)==a}function br(ne){if(!pd(ne)||kn(ne))return!1;var fe=aE(ne)?se:U;return fe.test(nC(ne))}function Qr(ne){return Ea(ne)&&iC(ne.length)&&!!B[vr(ne)]}function lo(ne){if(!pd(ne))return dr(ne);var fe=fr(ne),ke=[];for(var It in ne)It=="constructor"&&(fe||!G.call(ne,It))||ke.push(It);return ke}function qo(ne,fe,ke,It,Dn){ne!==fe&&Hn(fe,function(or,xr){if(Dn||(Dn=new Xt),pd(or))gs(ne,fe,xr,ke,qo,It,Dn);else{var Rn=It?It(fd(ne,xr),or,xr+"",ne,fe,Dn):void 0;Rn===void 0&&(Rn=or),Fn(ne,xr,Rn)}},gg)}function gs(ne,fe,ke,It,Dn,or,xr){var Rn=fd(ne,ke),Sr=fd(fe,ke),Ni=xr.get(Sr);if(Ni){Fn(ne,ke,Ni);return}var fo=or?or(Rn,Sr,ke+"",ne,fe,xr):void 0,vg=fo===void 0;if(vg){var md=dd(Sr),n1=!md&&hd(Sr),r1=!md&&!n1&&sC(Sr);fo=Sr,md||n1||r1?dd(Rn)?fo=Rn:rC(Rn)?fo=ge(Rn):n1?(vg=!1,fo=K(Sr)):r1?(vg=!1,fo=ee(Sr)):fo=[]:YM(Sr)||_a(Sr)?(fo=Rn,_a(Rn)?fo=mg(Rn):(!pd(Rn)||aE(Rn))&&(fo=ct(Sr))):vg=!1}vg&&(xr.set(Sr,fo),Dn(fo,Sr,It,or,xr),xr.delete(Sr)),Fn(ne,ke,fo)}function Gu(ne,fe){return oE(Hc(ne,fe,Qh),ne+"")}var Vc=Vt?function(ne,fe){return Vt(ne,"toString",{configurable:!0,enumerable:!1,value:yg(fe),writable:!0})}:Qh;function K(ne,fe){return ne.slice()}function ae(ne){var fe=new ne.constructor(ne.byteLength);return new Te(fe).set(new Te(ne)),fe}function ee(ne,fe){var ke=ae(ne.buffer);return new ne.constructor(ke,ne.byteOffset,ne.length)}function ge(ne,fe){var ke=-1,It=ne.length;for(fe||(fe=Array(It));++ke<It;)fe[ke]=ne[ke];return fe}function be(ne,fe,ke,It){var Dn=!ke;ke||(ke={});for(var or=-1,xr=fe.length;++or<xr;){var Rn=fe[or],Sr=void 0;Sr===void 0&&(Sr=ne[Rn]),Dn?Gt(ke,Rn,Sr):cr(ke,Rn,Sr)}return ke}function he(ne){return Gu(function(fe,ke){var It=-1,Dn=ke.length,or=Dn>1?ke[Dn-1]:void 0,xr=Dn>2?ke[2]:void 0;for(or=ne.length>3&&typeof or=="function"?(Dn--,or):void 0,xr&&pn(ke[0],ke[1],xr)&&(or=Dn<3?void 0:or,Dn=1),fe=Object(fe);++It<Dn;){var Rn=ke[It];Rn&&ne(fe,Rn,It,or)}return fe})}function $e(ne){return function(fe,ke,It){for(var Dn=-1,or=Object(fe),xr=It(fe),Rn=xr.length;Rn--;){var Sr=xr[++Dn];if(ke(or[Sr],Sr,or)===!1)break}return fe}}function Ke(ne,fe){var ke=ne.__data__;return Mt(fe)?ke[typeof fe=="string"?"string":"hash"]:ke.map}function Qe(ne,fe){var ke=rt(ne,fe);return br(ke)?ke:void 0}function Je(ne){var fe=G.call(ne,Dt),ke=ne[Dt];try{ne[Dt]=void 0;var It=!0}catch{}var Dn=me.call(ne);return It&&(fe?ne[Dt]=ke:delete ne[Dt]),Dn}function ct(ne){return typeof ne.constructor=="function"&&!fr(ne)?Xr(Ge(ne)):{}}function xt(ne,fe){var ke=typeof ne;return fe=fe??o,!!fe&&(ke=="number"||ke!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<fe}function pn(ne,fe,ke){if(!pd(ke))return!1;var It=typeof fe;return(It=="number"?t1(ke)&&xt(fe,ke.length):It=="string"&&fe in ke)?Yu(ke[fe],ne):!1}function Mt(ne){var fe=typeof ne;return fe=="string"||fe=="number"||fe=="symbol"||fe=="boolean"?ne!=="__proto__":ne===null}function kn(ne){return!!ie&&ie in ne}function fr(ne){var fe=ne&&ne.constructor,ke=typeof fe=="function"&&fe.prototype||mt;return ne===ke}function dr(ne){var fe=[];if(ne!=null)for(var ke in Object(ne))fe.push(ke);return fe}function co(ne){return me.call(ne)}function Hc(ne,fe,ke){return fe=an(fe===void 0?ne.length-1:fe,0),function(){for(var It=arguments,Dn=-1,or=an(It.length-fe,0),xr=Array(or);++Dn<or;)xr[Dn]=It[fe+Dn];Dn=-1;for(var Rn=Array(fe+1);++Dn<fe;)Rn[Dn]=It[Dn];return Rn[fe]=ke(xr),qe(ne,this,Rn)}}function fd(ne,fe){if(!(fe==="constructor"&&typeof ne[fe]=="function")&&fe!="__proto__")return ne[fe]}var oE=pg(Vc);function pg(ne){var fe=0,ke=0;return function(){var It=gr(),Dn=s-(It-ke);if(ke=It,Dn>0){if(++fe>=i)return arguments[0]}else fe=0;return ne.apply(void 0,arguments)}}function nC(ne){if(ne!=null){try{return bt.call(ne)}catch{}try{return ne+""}catch{}}return""}function Yu(ne,fe){return ne===fe||ne!==ne&&fe!==fe}var _a=yi(function(){return arguments}())?yi:function(ne){return Ea(ne)&&G.call(ne,"callee")&&!Ct.call(ne,"callee")},dd=Array.isArray;function t1(ne){return ne!=null&&iC(ne.length)&&!aE(ne)}function rC(ne){return Ea(ne)&&t1(ne)}var hd=Zt||aC;function aE(ne){if(!pd(ne))return!1;var fe=vr(ne);return fe==h||fe==p||fe==l||fe==b}function iC(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function pd(ne){var fe=typeof ne;return ne!=null&&(fe=="object"||fe=="function")}function Ea(ne){return ne!=null&&typeof ne=="object"}function YM(ne){if(!Ea(ne)||vr(ne)!=v)return!1;var fe=Ge(ne);if(fe===null)return!0;var ke=G.call(fe,"constructor")&&fe.constructor;return typeof ke=="function"&&ke instanceof ke&&bt.call(ke)==J}var sC=ve?ht(ve):Qr;function mg(ne){return be(ne,gg(ne))}function gg(ne){return t1(ne)?Ht(ne):lo(ne)}var oC=he(function(ne,fe,ke){qo(ne,fe,ke)});function yg(ne){return function(){return ne}}function Qh(ne){return ne}function aC(){return!1}e.exports=oC})(tN,tN.exports);var yWe=tN.exports;const Oz=pa(yWe);function p0(e){return structuredClone(e)}function Mz(){const{answers:e}=Ol(i=>i),t=Bh(),r=`${Dy()}_${t}`;return e[r]}const jme=k.createContext(null);function vWe(){const e=k.useContext(jme);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function vh(){return Ol(e=>e.config)}function RZ(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function bWe(){const e=Bh(),t=Pz(),r=`${Dy()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Ol(x=>x),a=Yf(),{saveTrialAnswer:u,setIframeAnswers:l}=Gf(),{storageEngine:c}=Qi(),f=Ay(),[d,h]=k.useState(!0);k.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=gWe(r),m=typeof e!="number"||!p,g=Mz(),y=Lh(),v=vh(),b=k.useMemo(()=>Date.now(),[]),E=vWe(),_=k.useCallback(()=>{if(typeof e!="number")return;const x=p0(i[r]),S=Object.values(x).reduce((F,P)=>Object.hasOwn(P,"values")?{...F,...P.values}:F,{}),{provenanceGraph:C}=x,A=Date.now(),D=E&&"current"in E&&E.current?E.current.splice(0,E.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:D})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:D}}),a(l({})));let I=e+1;const O=$me(s,e),R=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),M={...o,[r]:{answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:D}};R&&[...O.flatMap(P=>P.currentBlock.skip?P.currentBlock.skip.map(j=>({...j,firstIndex:P.firstIndex,lastIndex:P.lastIndex})):[])].some(P=>{let j=!1;const z=Object.fromEntries(Object.entries(M).filter(([$])=>{const U=parseInt($.slice($.lastIndexOf("_")+1),10);return U>=P.firstIndex&&U<=e})),V=P.check!=="block"?Object.entries(z).filter(([$])=>$.slice(0,$.lastIndexOf("_"))===P.name):Object.entries(z);if(V.length===0)return!1;if(V.some(([$,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(P,null,2)}`);if(P.check==="response"||P.check==="responses"){const[$,U]=V[0];P.check==="response"?j=P.value!==U.answer[P.responseId]:j=!RZ(U.answer,$,v.components[$.slice(0,$.lastIndexOf("_"))],v)}else if(P.check==="block"||P.check==="repeatedComponent"){if(V.length<P.value)return!1;const $=V.map(([B,q])=>RZ(q.answer,B,v.components[B.slice(0,B.lastIndexOf("_"))],v)),U=$.filter(B=>B).length,W=$.length-U;j=P.condition==="numCorrect"&&U===P.value||P.condition==="numIncorrect"&&W===P.value}if(j){const $=t.indexOf(P.to),U=$===-1?pWe(s,P.to):-1;return I=$===-1?U:$,!0}return!1}),y(`/${f}/${I}${window.location.search}`)},[i,r,E,g,e,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:_}}function _We({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=bWe(),o=k.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return w.jsx(In,{type:"submit",disabled:t||i,onClick:o,children:e})}function EWe(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const wWe=typeof window<"u"?k.useLayoutEffect:k.useEffect;function js(e,t){wWe(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function xWe(e,t){e&&EWe(e),js(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),js(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),js(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),js(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),js(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),js(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),js(`mantine-form:${e}:clear-errors`,t.clearErrors),js(`mantine-form:${e}:reset`,t.reset),js(`mantine-form:${e}:validate`,t.validate),js(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),js(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),js(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),js(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),js(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),js(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),js(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),js(`mantine-form:${e}:reset-touched`,t.resetTouched)}function SWe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function e5(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function TWe(e){const[t,n]=k.useState(e5(e)),r=k.useRef(t),i=k.useCallback(u=>{n(l=>{const c=e5(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=k.useCallback(()=>i({}),[]),o=k.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=k.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function zme(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function PZ(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function OZ(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=zme(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=PZ(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=PZ(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function CWe(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function MZ(e,t,n){typeof n.value=="object"&&(n.value=tv(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function tv(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(tv(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(tv(a),tv(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(tv(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)MZ(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||MZ(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Ume(e){return typeof e!="string"?[]:e.split(".")}function La(e,t){const n=Ume(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function OP(e,t,n){const r=Ume(e);if(r.length===0)return n;const i=tv(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function AWe(e,{from:t,to:n},r){const i=La(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),OP(e,s,r)}function DWe(e,t,n,r){const i=La(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),OP(e,s,r)}function IWe(e,t,n){const r=La(e,n);return Array.isArray(r)?OP(e,r.filter((i,s)=>s!==t),n):n}function NWe({$values:e,$errors:t,$status:n}){const r=k.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>CWe(o,a,u)),e.setValues({values:AWe(o,a,e.refValues.current),updateState:!0})},[]),i=k.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>OZ(o,a,u,-1)),e.setValues({values:IWe(o,a,e.refValues.current),updateState:!0})},[]),s=k.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>OZ(o,u,l,1)),e.setValues({values:DWe(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var $z=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const ED=pa($z);function HC(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function kWe({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=k.useState(t),[o,a]=k.useState(e),u=k.useRef(t),l=k.useRef(e),c=k.useCallback(_=>{const x=typeof _=="function"?_(u.current):_;u.current=x,n==="controlled"&&s(x)},[]),f=k.useCallback(_=>{const x=typeof _=="function"?_(l.current):_;l.current=x,n==="controlled"&&a(x)},[]),d=k.useCallback(()=>c({}),[]),h=_=>{const x=_?{..._,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(x),f({})},p=k.useCallback((_,x)=>{c(S=>HC(S,_)===x?S:{...S,[_]:x})},[]),m=k.useCallback((_,x)=>{f(S=>HC(S,_)===x?S:{...S,[_]:x})},[]),g=k.useCallback(_=>HC(u.current,_),[]),y=k.useCallback(_=>f(x=>{if(typeof _!="string")return x;const S=zme(_,x);return delete S[_],ED(S,x)?x:S}),[]),v=k.useCallback(_=>{if(_){const S=La(_,l.current);if(typeof S=="boolean")return S;const C=La(_,r.refValues.current),A=La(_,r.valuesSnapshot.current);return!ED(C,A)}return Object.keys(l.current).length>0?HC(l.current):!ED(r.refValues.current,r.valuesSnapshot.current)},[]),b=k.useCallback(()=>l.current,[]),E=k.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:E}}function RWe({initialValues:e,onValuesChange:t,mode:n}){const r=k.useRef(!1),[i,s]=k.useState(e||{}),o=k.useRef(i),a=k.useRef(i),u=k.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,E=y?{...v,...b}:b;o.current=E,g&&s(E),t==null||t(E,v),m==null||m.filter(Boolean).forEach(_=>_({updatedValues:E,previousValues:v}))},[t]),l=k.useCallback(p=>{var y;const m=La(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=OP(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(E=>E({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=k.useCallback(p=>{a.current=p},[]),f=k.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=k.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=k.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function PWe({$status:e}){const t=k.useRef({}),n=k.useCallback((i,s)=>{k.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=k.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:La(i,o.previousValues),value:La(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function $Z(e,t){return e?`${e}-${t.toString()}`:t.toString()}function FZ(e){const t=e5(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function t5(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=La(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>t5(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||t5(o,t,a,i)),i},r)}function n5(e,t){return FZ(typeof e=="function"?e(t):t5(e,t))}function qC(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=n5(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const OWe="__MANTINE_FORM_INDEX__";function LZ(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${OWe}`)):!1:!1}function Vme({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=TWe(r),p=RWe({initialValues:n,onValuesChange:l,mode:t}),m=kWe({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=NWe({$values:p,$errors:h,$status:m}),y=PWe({$status:m}),[v,b]=k.useState(0),[E,_]=k.useState({}),x=k.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b($=>$+1)},[]),S=k.useCallback($=>{p.initialize($,()=>t==="uncontrolled"&&b(U=>U+1))},[]),C=k.useCallback(($,U,W)=>{const B=LZ($,a);m.clearFieldDirty($),m.setFieldTouched($,!0),!B&&o&&h.clearFieldError($),p.setFieldValue({path:$,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers($),B?q=>{const Y=qC($,d,q.updatedValues);Y.hasError?h.setFieldError($,Y.error):h.clearFieldError($)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>_(q=>({...q,[$]:(q[$]||0)+1})):null]})},[l,d]),A=k.useCallback($=>{const U=p.refValues.current;p.setValues({values:$,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const B=La(W,p.refValues.current),q=La(W,U);B!==q&&y.getFieldSubscribers(W).forEach(Y=>Y({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),D=k.useCallback(()=>{const $=n5(d,p.refValues.current);return h.setErrors($.errors),$},[d]),I=k.useCallback($=>{const U=qC($,d,p.refValues.current);return U.hasError?h.setFieldError($,U.error):h.clearFieldError($),U},[d]),O=($,{type:U="input",withError:W=!0,withFocus:B=!0,...q}={})=>{const re={onChange:SWe(pe=>C($,pe,{forceUpdate:!1})),"data-path":$Z(e,$)};return W&&(re.error=h.errorsState[$]),U==="checkbox"?re[t==="controlled"?"checked":"defaultChecked"]=La($,p.refValues.current):re[t==="controlled"?"value":"defaultValue"]=La($,p.refValues.current),B&&(re.onFocus=()=>m.setFieldTouched($,!0),re.onBlur=()=>{if(LZ($,u)){const pe=qC($,d,p.refValues.current);pe.hasError?h.setFieldError($,pe.error):h.clearFieldError($)}}),Object.assign(re,f==null?void 0:f({inputProps:re,field:$,options:{type:U,withError:W,withFocus:B,...q},form:V}))},R=($,U)=>W=>{W==null||W.preventDefault();const B=D();B.hasErrors?U==null||U(B.errors,p.refValues.current,W):$==null||$(c(p.refValues.current),W)},M=$=>c($||p.refValues.current),F=k.useCallback($=>{$.preventDefault(),x()},[]),P=k.useCallback($=>$?!qC($,d,p.refValues.current).hasError:!n5(d,p.refValues.current).hasErrors,[d]),j=$=>`${v}-${$}-${E[$]||0}`,z=k.useCallback($=>document.querySelector(`[data-path="${$Z(e,$)}"]`),[]),V={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:x,validate:D,validateField:I,getInputProps:O,onSubmit:R,onReset:F,isValid:P,getTransformedValues:M,key:j,getInputNode:z};return xWe(e,V),V}function MWe(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function $We(e){return MWe(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const FWe=new URLSearchParams(window.location.search),LWe=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?FWe.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},BWe=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function jWe(e,t,n){const[r,i]=k.useState(null),s=Vme({initialValues:LWe(e,n),validate:BWe(e)});return k.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Iy(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function zWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return w.jsx(hh.Group,{label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:s,required:o})})]}),description:u,...n,error:Iy(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsx(cs,{mt:"xs",children:a.map(l=>w.jsx(hh,{disabled:t,value:l.value,label:l.label},l.value))})})}function UWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return w.jsx(MT,{disabled:t,label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Iy(e,n,u)})}function VWe({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return w.jsx(Yr.Wrapper,{label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${n}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:i,required:s})})]}),description:o,size:"md",children:w.jsx(mc,{children:Array.isArray(t.value)?t.value.map(a=>w.jsx(mc.Item,{children:a},a)):w.jsx(mc.Item,{children:t.value})})})}function Hme({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return w.jsx(ph.Group,{name:`radioInput${e.id}`,label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:s,required:o})})]}),description:c,...n,error:Iy(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsxs(cs,{mt:"xs",children:[u?w.jsx(Ze,{style:{textAlign:"center"},children:u}):null,a.map(f=>w.jsx(ph,{disabled:t,value:f.value,label:f.label},f.label)),w.jsx(Ze,{children:l})]})},e.id)}function HWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return w.jsx(Hme,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function qWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return w.jsx(jj,{disabled:t,placeholder:l,label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Iy(e,n)})}function WWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Iy(e,n);return w.jsx(Yr.Wrapper,{label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsx(qj,{disabled:t,marks:a,...n,h:40})})}function GWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return w.jsx(h0,{disabled:t,placeholder:s,label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Iy(e,n)})}function YWe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return w.jsx(Dj,{disabled:t,placeholder:s,label:w.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ca,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Iy(e,n)})}function KWe({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=iz(),u=vh().uiConfig.enumerateQuestions??!1,l=k.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return w.jsxs(we,{mb:"md",children:[e.type==="numerical"&&w.jsx(qWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&w.jsx(GWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&w.jsx(YWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&w.jsx(HWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&w.jsx(UWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&w.jsx(WWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&w.jsx(Hme,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&w.jsx(zWe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&w.jsx(VWe,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function nN({config:e,location:t,status:n,style:r}){var E;const i=Bh(),s=Dy(),o=n==null?void 0:n.answer,a=e,u=k.useMemo(()=>{var _;return((_=a==null?void 0:a.response)==null?void 0:_.filter(x=>x.location?x.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Yf(),{updateResponseBlockValidation:c}=Gf(),f=jWe(u,i,o||{}),[d,h]=k.useState(void 0),[p,m]=k.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Ol(_=>_),v=(a==null?void 0:a.provideFeedback)&&(((E=a==null?void 0:a.correctAnswer)==null?void 0:E.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return k.useEffect(()=>{const _=u.find(x=>x.type==="iframe");if(g&&_){const x=_.id;f.setValues({...f.values,[x]:g[x]})}},[g]),k.useEffect(()=>{y&&h(y)},[y]),k.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:p0(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),w.jsxs("div",{style:r,children:[u.map((_,x)=>{var S,C;return w.jsx(xi.Fragment,{children:_.hidden?"":w.jsxs(w.Fragment,{children:[w.jsx(KWe,{storedAnswer:o?o[_.id]:void 0,answer:{...f.getInputProps(_.id,{type:_.type==="checkbox"?"checkbox":"input"})},response:_,index:x+1}),v&&p&&w.jsx(Ze,{children:`The correct answer is: ${(C=(S=a.correctAnswer)==null?void 0:S.find(A=>A.id===_.id))==null?void 0:C.answer}`})]})},`${_.id}-${i}`)}),w.jsxs(cs,{justify:"right",gap:"xs",children:[v&&b&&w.jsx(In,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&w.jsx(_We,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const SE="@REVISIT_COMMS",XWe={minHeight:"500px",width:"100%",border:0};function QWe({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Gf(),r=Yf(),i=bme(),s=k.useRef(null),o=k.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Dy(),u=Lh(),l=k.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${SE}/${c}`,iframeId:o,message:f},"*")},[s,o]);return k.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${SE}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${SE}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${SE}/ANSWERS`:r(t(d.message));break;case`${SE}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),w.jsx("iframe",{ref:s,src:`${qf}${e.path}?trialid=${a}&id=${o}`,style:XWe})}async function Fz(e){const n=await(await fetch(`${qf}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function O0({email:e,path:t}){const n=Sy();return w.jsxs(_l,{fluid:!0,my:50,maw:800,mx:"auto",children:[w.jsx(ci,{order:2,children:w.jsx(Ze,{span:!0,c:"orange",children:"404"})}),w.jsxs(Ze,{children:[w.jsx(Ze,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),w.jsx(pl,{h:"lg"}),w.jsxs(mc,{children:[w.jsx(mc.Item,{children:w.jsx(Ze,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),w.jsx(mc.Item,{children:w.jsxs(Ze,{children:["If you're a participant, please contact the study administrator"," ",e&&w.jsxs(w.Fragment,{children:["at"," ",w.jsxs(c_,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const JWe={maxWidth:"100%"};function ZWe({currentConfig:e}){const t={...JWe,...e.style},[n,r]=k.useState(!0),[i,s]=k.useState(!1);return k.useEffect(()=>{async function o(){const a=await Fz(e.path);s(!!a),r(!1)}o()},[e]),n||i?w.jsx(Wm,{mx:"auto",src:`${qf}${e.path}`,style:t}):w.jsx(O0,{path:e.path})}function Xd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eGe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x_(e){let t,n,r;e.length!==2?(t=Xd,n=(a,u)=>Xd(e(a),u),r=(a,u)=>e(a)-u):(t=e===Xd||e===eGe?e:tGe,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function tGe(){return 0}function qme(e){return e===null?NaN:+e}function*nGe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Wme=x_(Xd),gm=Wme.right,rGe=Wme.left;x_(qme).center;function iGe(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function sGe(e,t){const n=iGe(e,t);return n&&Math.sqrt(n)}class aa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class BZ extends Map{constructor(t,n=Kme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(r5(this,t))}has(t){return super.has(r5(this,t))}set(t,n){return super.set(Gme(this,t),n)}delete(t){return super.delete(Yme(this,t))}}class rN extends Set{constructor(t,n=Kme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(r5(this,t))}add(t){return super.add(Gme(this,t))}delete(t){return super.delete(Yme(this,t))}}function r5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Gme({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Yme({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Kme(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oGe(e,t){return Array.from(t,n=>e[n])}function aGe(e=Xd){if(e===Xd)return Xme;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Xme(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const uGe=Math.sqrt(50),lGe=Math.sqrt(10),cGe=Math.sqrt(2);function iN(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=uGe?10:s>=lGe?5:s>=cGe?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?iN(e,t,n*2):[a,u,l]}function i5(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?iN(t,e,n):iN(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function s5(e,t,n){return t=+t,e=+e,n=+n,iN(e,t,n)[2]}function ym(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?s5(t,e,n):s5(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ga(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function bh(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Qme(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Xme:aGe(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Qme(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(TE(e,n,t),i(e[r],s)>0&&TE(e,n,r);o<a;){for(TE(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?TE(e,n,a):(++a,TE(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function TE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function o5(e,t,n){if(e=Float64Array.from(nGe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return bh(e);if(t>=1)return Ga(e);var r,i=(r-1)*t,s=Math.floor(i),o=Ga(Qme(e,s).subarray(0,s+1)),a=bh(e.subarray(s+1));return o+(a-o)*(i-s)}}function Jme(e,t,n=qme){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function fGe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Zme(e,t){return o5(e,.5,t)}function*dGe(e){for(const t of e)yield*t}function ege(e){return Array.from(dGe(e))}function wu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function tge(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function hGe(e,...t){e=new rN(e),t=t.map(pGe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function pGe(e){return e instanceof rN?e:new rN(e)}function mGe(...e){const t=new rN;for(const n of e)for(const r of n)t.add(r);return t}function Kf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Km(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const a5=Symbol("implicit");function Lz(){var e=new BZ,t=[],n=[],r=a5;function i(s){let o=e.get(s);if(o===void 0){if(r!==a5)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new BZ;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Lz(t,n).unknown(r)},Kf.apply(i,arguments),i}function S_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function HT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xm(){}var M0=.7,ab=1/M0,Cv="\\s*([+-]?\\d+)\\s*",ES="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gGe=/^#([0-9a-f]{3,8})$/,yGe=new RegExp(`^rgb\\(${Cv},${Cv},${Cv}\\)$`),vGe=new RegExp(`^rgb\\(${_f},${_f},${_f}\\)$`),bGe=new RegExp(`^rgba\\(${Cv},${Cv},${Cv},${ES}\\)$`),_Ge=new RegExp(`^rgba\\(${_f},${_f},${_f},${ES}\\)$`),EGe=new RegExp(`^hsl\\(${ES},${_f},${_f}\\)$`),wGe=new RegExp(`^hsla\\(${ES},${_f},${_f},${ES}\\)$`),jZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};S_(Xm,$0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zZ,formatHex:zZ,formatHex8:xGe,formatHsl:SGe,formatRgb:UZ,toString:UZ});function zZ(){return this.rgb().formatHex()}function xGe(){return this.rgb().formatHex8()}function SGe(){return nge(this).formatHsl()}function UZ(){return this.rgb().formatRgb()}function $0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gGe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?VZ(t):n===3?new Ss(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?WC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?WC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yGe.exec(e))?new Ss(t[1],t[2],t[3],1):(t=vGe.exec(e))?new Ss(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bGe.exec(e))?WC(t[1],t[2],t[3],t[4]):(t=_Ge.exec(e))?WC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EGe.exec(e))?WZ(t[1],t[2]/100,t[3]/100,1):(t=wGe.exec(e))?WZ(t[1],t[2]/100,t[3]/100,t[4]):jZ.hasOwnProperty(e)?VZ(jZ[e]):e==="transparent"?new Ss(NaN,NaN,NaN,0):null}function VZ(e){return new Ss(e>>16&255,e>>8&255,e&255,1)}function WC(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ss(e,t,n,r)}function Bz(e){return e instanceof Xm||(e=$0(e)),e?(e=e.rgb(),new Ss(e.r,e.g,e.b,e.opacity)):new Ss}function vm(e,t,n,r){return arguments.length===1?Bz(e):new Ss(e,t,n,r??1)}function Ss(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}S_(Ss,vm,HT(Xm,{brighter(e){return e=e==null?ab:Math.pow(ab,e),new Ss(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?M0:Math.pow(M0,e),new Ss(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ss(m0(this.r),m0(this.g),m0(this.b),sN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HZ,formatHex:HZ,formatHex8:TGe,formatRgb:qZ,toString:qZ}));function HZ(){return`#${r0(this.r)}${r0(this.g)}${r0(this.b)}`}function TGe(){return`#${r0(this.r)}${r0(this.g)}${r0(this.b)}${r0((isNaN(this.opacity)?1:this.opacity)*255)}`}function qZ(){const e=sN(this.opacity);return`${e===1?"rgb(":"rgba("}${m0(this.r)}, ${m0(this.g)}, ${m0(this.b)}${e===1?")":`, ${e})`}`}function sN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function m0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function r0(e){return e=m0(e),(e<16?"0":"")+e.toString(16)}function WZ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rc(e,t,n,r)}function nge(e){if(e instanceof rc)return new rc(e.h,e.s,e.l,e.opacity);if(e instanceof Xm||(e=$0(e)),!e)return new rc;if(e instanceof rc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new rc(o,a,u,e.opacity)}function oN(e,t,n,r){return arguments.length===1?nge(e):new rc(e,t,n,r??1)}function rc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}S_(rc,oN,HT(Xm,{brighter(e){return e=e==null?ab:Math.pow(ab,e),new rc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?M0:Math.pow(M0,e),new rc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ss(uF(e>=240?e-240:e+120,i,r),uF(e,i,r),uF(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new rc(GZ(this.h),GC(this.s),GC(this.l),sN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sN(this.opacity);return`${e===1?"hsl(":"hsla("}${GZ(this.h)}, ${GC(this.s)*100}%, ${GC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function GZ(e){return e=(e||0)%360,e<0?e+360:e}function GC(e){return Math.max(0,Math.min(1,e||0))}function uF(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rge=Math.PI/180,ige=180/Math.PI,aN=18,sge=.96422,oge=1,age=.82521,uge=4/29,Av=6/29,lge=3*Av*Av,CGe=Av*Av*Av;function cge(e){if(e instanceof Ef)return new Ef(e.l,e.a,e.b,e.opacity);if(e instanceof Fd)return fge(e);e instanceof Ss||(e=Bz(e));var t=dF(e.r),n=dF(e.g),r=dF(e.b),i=lF((.2225045*t+.7168786*n+.0606169*r)/oge),s,o;return t===n&&n===r?s=o=i:(s=lF((.4360747*t+.3850649*n+.1430804*r)/sge),o=lF((.0139322*t+.0971045*n+.7141733*r)/age)),new Ef(116*i-16,500*(s-i),200*(i-o),e.opacity)}function uN(e,t,n,r){return arguments.length===1?cge(e):new Ef(e,t,n,r??1)}function Ef(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}S_(Ef,uN,HT(Xm,{brighter(e){return new Ef(this.l+aN*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ef(this.l-aN*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=sge*cF(t),e=oge*cF(e),n=age*cF(n),new Ss(fF(3.1338561*t-1.6168667*e-.4906146*n),fF(-.9787684*t+1.9161415*e+.033454*n),fF(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function lF(e){return e>CGe?Math.pow(e,1/3):e/lge+uge}function cF(e){return e>Av?e*e*e:lge*(e-uge)}function fF(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function dF(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function AGe(e){if(e instanceof Fd)return new Fd(e.h,e.c,e.l,e.opacity);if(e instanceof Ef||(e=cge(e)),e.a===0&&e.b===0)return new Fd(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ige;return new Fd(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lN(e,t,n,r){return arguments.length===1?AGe(e):new Fd(e,t,n,r??1)}function Fd(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function fge(e){if(isNaN(e.h))return new Ef(e.l,0,0,e.opacity);var t=e.h*rge;return new Ef(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}S_(Fd,lN,HT(Xm,{brighter(e){return new Fd(this.h,this.c,this.l+aN*(e??1),this.opacity)},darker(e){return new Fd(this.h,this.c,this.l-aN*(e??1),this.opacity)},rgb(){return fge(this).rgb()}}));var dge=-.14861,jz=1.78277,zz=-.29227,MP=-.90649,wS=1.97294,YZ=wS*MP,KZ=wS*jz,XZ=jz*zz-MP*dge;function DGe(e){if(e instanceof g0)return new g0(e.h,e.s,e.l,e.opacity);e instanceof Ss||(e=Bz(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(XZ*r+YZ*t-KZ*n)/(XZ+YZ-KZ),s=r-i,o=(wS*(n-i)-zz*s)/MP,a=Math.sqrt(o*o+s*s)/(wS*i*(1-i)),u=a?Math.atan2(o,s)*ige-120:NaN;return new g0(u<0?u+360:u,a,i,e.opacity)}function u5(e,t,n,r){return arguments.length===1?DGe(e):new g0(e,t,n,r??1)}function g0(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}S_(g0,u5,HT(Xm,{brighter(e){return e=e==null?ab:Math.pow(ab,e),new g0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?M0:Math.pow(M0,e),new g0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*rge,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ss(255*(t+n*(dge*r+jz*i)),255*(t+n*(zz*r+MP*i)),255*(t+n*(wS*r)),this.opacity)}}));function hge(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function pge(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return hge((n-r/t)*t,o,i,s,a)}}function mge(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return hge((n-r/t)*t,i,s,o,a)}}const $P=e=>()=>e;function gge(e,t){return function(n){return e+n*t}}function IGe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function FP(e,t){var n=t-e;return n?gge(e,n>180||n<-180?n-360*Math.round(n/360):n):$P(isNaN(e)?t:e)}function NGe(e){return(e=+e)==1?Ts:function(t,n){return n-t?IGe(t,n,e):$P(isNaN(t)?n:t)}}function Ts(e,t){var n=t-e;return n?gge(e,n):$P(isNaN(e)?t:e)}const xS=function e(t){var n=NGe(t);function r(i,s){var o=n((i=vm(i)).r,(s=vm(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Ts(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function yge(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=vm(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var vge=yge(pge),kGe=yge(mge);function Uz(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function bge(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RGe(e,t){return(bge(t)?Uz:_ge)(e,t)}function _ge(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Qm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Ege(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function rl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wge(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Qm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var l5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hF=new RegExp(l5.source,"g");function PGe(e){return function(){return e}}function OGe(e){return function(t){return e(t)+""}}function Vz(e,t){var n=l5.lastIndex=hF.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=l5.exec(e))&&(i=hF.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:rl(r,i)})),n=hF.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?OGe(u[0].x):PGe(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Qm(e,t){var n=typeof t,r;return t==null||n==="boolean"?$P(t):(n==="number"?rl:n==="string"?(r=$0(t))?(t=r,xS):Vz:t instanceof $0?xS:t instanceof Date?Ege:bge(t)?Uz:Array.isArray(t)?_ge:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wge:rl)(e,t)}function MGe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function $Ge(e,t){var n=FP(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function qT(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var QZ=180/Math.PI,c5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xge(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*QZ,skewX:Math.atan(u)*QZ,scaleX:o,scaleY:a}}var YC;function FGe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?c5:xge(t.a,t.b,t.c,t.d,t.e,t.f)}function LGe(e){return e==null||(YC||(YC=document.createElementNS("http://www.w3.org/2000/svg","g")),YC.setAttribute("transform",e),!(e=YC.transform.baseVal.consolidate()))?c5:(e=e.matrix,xge(e.a,e.b,e.c,e.d,e.e,e.f))}function Sge(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:rl(l,f)},{i:m-2,x:rl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:rl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:rl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:rl(l,f)},{i:m-2,x:rl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Tge=Sge(FGe,"px, ","px)","deg)"),Cge=Sge(LGe,", ",")",")"),BGe=1e-12;function JZ(e){return((e=Math.exp(e))+1/e)/2}function jGe(e){return((e=Math.exp(e))-1/e)/2}function zGe(e){return((e=Math.exp(2*e))-1)/(e+1)}const UGe=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<BGe)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),E=(d*d-l*l-r*m)/(2*d*n*v),_=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(E*E+1)-E);y=(x-_)/t,g=function(S){var C=S*y,A=JZ(_),D=l/(n*v)*(A*zGe(t*C+_)-jGe(_));return[a+D*h,u+D*p,l*A/JZ(t*C+_)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function Age(e){return function(t,n){var r=e((t=oN(t)).h,(n=oN(n)).h),i=Ts(t.s,n.s),s=Ts(t.l,n.l),o=Ts(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const VGe=Age(FP);var HGe=Age(Ts);function qGe(e,t){var n=Ts((e=uN(e)).l,(t=uN(t)).l),r=Ts(e.a,t.a),i=Ts(e.b,t.b),s=Ts(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function Dge(e){return function(t,n){var r=e((t=lN(t)).h,(n=lN(n)).h),i=Ts(t.c,n.c),s=Ts(t.l,n.l),o=Ts(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const WGe=Dge(FP);var GGe=Dge(Ts);function Ige(e){return function t(n){n=+n;function r(i,s){var o=e((i=u5(i)).h,(s=u5(s)).h),a=Ts(i.s,s.s),u=Ts(i.l,s.l),l=Ts(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const YGe=Ige(FP);var KGe=Ige(Ts);function Hz(e,t){t===void 0&&(t=e,e=Qm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function XGe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const QGe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Qm,interpolateArray:RGe,interpolateBasis:pge,interpolateBasisClosed:mge,interpolateCubehelix:YGe,interpolateCubehelixLong:KGe,interpolateDate:Ege,interpolateDiscrete:MGe,interpolateHcl:WGe,interpolateHclLong:GGe,interpolateHsl:VGe,interpolateHslLong:HGe,interpolateHue:$Ge,interpolateLab:qGe,interpolateNumber:rl,interpolateNumberArray:Uz,interpolateObject:wge,interpolateRgb:xS,interpolateRgbBasis:vge,interpolateRgbBasisClosed:kGe,interpolateRound:qT,interpolateString:Vz,interpolateTransformCss:Tge,interpolateTransformSvg:Cge,interpolateZoom:UGe,piecewise:Hz,quantize:XGe},Symbol.toStringTag,{value:"Module"}));function JGe(e){return function(){return e}}function f5(e){return+e}var ZZ=[0,1];function Ba(e){return e}function d5(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:JGe(isNaN(t)?NaN:.5)}function ZGe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function eYe(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=d5(i,r),s=n(o,s)):(r=d5(r,i),s=n(s,o)),function(a){return s(r(a))}}function tYe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=d5(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=gm(e,a,1,r)-1;return s[u](i[u](a))}}function WT(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function LP(){var e=ZZ,t=ZZ,n=Qm,r,i,s,o=Ba,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Ba&&(o=ZGe(e[0],e[d-1])),a=d>2?tYe:eYe,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),rl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,f5),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=qT,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Ba,c()):o!==Ba},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function Nge(){return LP()(Ba,Ba)}function nYe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function cN(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ub(e){return e=cN(Math.abs(e)),e?e[1]:NaN}function rYe(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function iYe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var sYe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function F0(e){if(!(t=sYe.exec(e)))throw new Error("invalid format: "+e);var t;return new qz({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}F0.prototype=qz.prototype;function qz(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qz.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oYe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var kge;function aYe(e,t){var n=cN(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(kge=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+cN(e,Math.max(0,t+s-1))[0]}function eee(e,t){var n=cN(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tee={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nYe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eee(e*100,t),r:eee,s:aYe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nee(e){return e}var ree=Array.prototype.map,iee=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rge(e){var t=e.grouping===void 0||e.thousands===void 0?nee:rYe(ree.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?nee:iYe(ree.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=F0(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,E=f.trim,_=f.type;_==="n"?(v=!0,_="g"):tee[_]||(b===void 0&&(b=12),E=!0,_="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=m==="$"?r:/[%p]/.test(_)?o:"",C=tee[_],A=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(I){var O=x,R=S,M,F,P;if(_==="c")R=C(I)+R,I="";else{I=+I;var j=I<0||1/I<0;if(I=isNaN(I)?u:C(Math.abs(I),b),E&&(I=oYe(I)),j&&+I==0&&p!=="+"&&(j=!1),O=(j?p==="("?p:a:p==="-"||p==="("?"":p)+O,R=(_==="s"?iee[8+kge/3]:"")+R+(j&&p==="("?")":""),A){for(M=-1,F=I.length;++M<F;)if(P=I.charCodeAt(M),48>P||P>57){R=(P===46?i+I.slice(M+1):I.slice(M))+R,I=I.slice(0,M);break}}}v&&!g&&(I=t(I,1/0));var z=O.length+I.length+R.length,V=z<y?new Array(y-z+1).join(d):"";switch(v&&g&&(I=t(V+I,V.length?y-R.length:1/0),V=""),h){case"<":I=O+I+R+V;break;case"=":I=O+V+I+R;break;case"^":I=V.slice(0,z=V.length>>1)+O+I+R+V.slice(z);break;default:I=V+O+I+R;break}return s(I)}return D.toString=function(){return f+""},D}function c(f,d){var h=l((f=F0(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(ub(d)/3)))*3,m=Math.pow(10,-p),g=iee[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var KC,BP,Wz;uYe({thousands:",",grouping:[3],currency:["$",""]});function uYe(e){return KC=Rge(e),BP=KC.format,Wz=KC.formatPrefix,KC}function Pge(e){return Math.max(0,-ub(Math.abs(e)))}function Oge(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ub(t)/3)))*3-ub(Math.abs(e)))}function Mge(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ub(t)-ub(e))+1}function $ge(e,t,n,r){var i=ym(e,t,n),s;switch(r=F0(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Oge(i,o))&&(r.precision=s),Wz(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Mge(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Pge(i))&&(r.precision=s-(r.type==="%")*2);break}}return BP(r)}function Ny(e){var t=e.domain;return e.ticks=function(n){var r=t();return i5(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return $ge(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=s5(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function bm(){var e=Nge();return e.copy=function(){return WT(e,bm())},Kf.apply(e,arguments),Ny(e)}function Fge(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,f5),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Fge(e).unknown(t)},e=arguments.length?Array.from(e,f5):[0,1],Ny(n)}function Lge(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function see(e){return Math.log(e)}function oee(e){return Math.exp(e)}function lYe(e){return-Math.log(-e)}function cYe(e){return-Math.exp(-e)}function fYe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dYe(e){return e===10?fYe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function hYe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aee(e){return(t,n)=>-e(-t,n)}function Gz(e){const t=e(see,oee),n=t.domain;let r=10,i,s;function o(){return i=hYe(r),s=dYe(r),n()[0]<0?(i=aee(i),s=aee(s),e(lYe,cYe)):e(see,oee),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=i5(l,c,g))}else y=i5(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=F0(u)).precision==null&&(u.trim=!0),u=BP(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(Lge(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function Bge(){const e=Gz(LP()).domain([1,10]);return e.copy=()=>WT(e,Bge()).base(e.base()),Kf.apply(e,arguments),e}function uee(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lee(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Yz(e){var t=1,n=e(uee(t),lee(t));return n.constant=function(r){return arguments.length?e(uee(t=+r),lee(t)):t},Ny(n)}function jge(){var e=Yz(LP());return e.copy=function(){return WT(e,jge()).constant(e.constant())},Kf.apply(e,arguments)}function cee(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pYe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function mYe(e){return e<0?-e*e:e*e}function Kz(e){var t=e(Ba,Ba),n=1;function r(){return n===1?e(Ba,Ba):n===.5?e(pYe,mYe):e(cee(n),cee(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ny(t)}function Xz(){var e=Kz(LP());return e.copy=function(){return WT(e,Xz()).exponent(e.exponent())},Kf.apply(e,arguments),e}function gYe(){return Xz.apply(null,arguments).exponent(.5)}function zge(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Jme(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[gm(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Xd),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return zge().domain(e).range(t).unknown(r)},Kf.apply(s,arguments)}function Uge(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[gm(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Uge().domain([e,t]).range(i).unknown(s)},Kf.apply(Ny(o),arguments)}function Vge(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[gm(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Vge().domain(e).range(t).unknown(n)},Kf.apply(i,arguments)}const pF=new Date,mF=new Date;function ps(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>ps(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(pF.setTime(+s),mF.setTime(+o),e(pF),e(mF),Math.floor(n(pF,mF))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const lb=ps(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ps(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lb);lb.range;const Ld=1e3,ll=Ld*60,Bd=ll*60,_h=Bd*24,Qz=_h*7,fee=_h*30,gF=_h*365,jd=ps(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ld)},(e,t)=>(t-e)/Ld,e=>e.getUTCSeconds());jd.range;const jP=ps(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ld)},(e,t)=>{e.setTime(+e+t*ll)},(e,t)=>(t-e)/ll,e=>e.getMinutes());jP.range;const zP=ps(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ll)},(e,t)=>(t-e)/ll,e=>e.getUTCMinutes());zP.range;const UP=ps(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ld-e.getMinutes()*ll)},(e,t)=>{e.setTime(+e+t*Bd)},(e,t)=>(t-e)/Bd,e=>e.getHours());UP.range;const VP=ps(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bd)},(e,t)=>(t-e)/Bd,e=>e.getUTCHours());VP.range;const Qd=ps(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ll)/_h,e=>e.getDate()-1);Qd.range;const Qp=ps(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_h,e=>e.getUTCDate()-1);Qp.range;const Hge=ps(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_h,e=>Math.floor(e/_h));Hge.range;function ky(e){return ps(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ll)/Qz)}const T_=ky(0),fN=ky(1),yYe=ky(2),vYe=ky(3),cb=ky(4),bYe=ky(5),_Ye=ky(6);T_.range;fN.range;yYe.range;vYe.range;cb.range;bYe.range;_Ye.range;function Ry(e){return ps(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Qz)}const C_=Ry(0),dN=Ry(1),EYe=Ry(2),wYe=Ry(3),fb=Ry(4),xYe=Ry(5),SYe=Ry(6);C_.range;dN.range;EYe.range;wYe.range;fb.range;xYe.range;SYe.range;const SS=ps(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());SS.range;const TS=ps(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());TS.range;const If=ps(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());If.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ps(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});If.range;const Nf=ps(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Nf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ps(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Nf.range;function qge(e,t,n,r,i,s){const o=[[jd,1,Ld],[jd,5,5*Ld],[jd,15,15*Ld],[jd,30,30*Ld],[s,1,ll],[s,5,5*ll],[s,15,15*ll],[s,30,30*ll],[i,1,Bd],[i,3,3*Bd],[i,6,6*Bd],[i,12,12*Bd],[r,1,_h],[r,2,2*_h],[n,1,Qz],[t,1,fee],[t,3,3*fee],[e,1,gF]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=x_(([,,g])=>g).right(o,d);if(h===o.length)return e.every(ym(l/gF,c/gF,f));if(h===0)return lb.every(Math.max(ym(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[TYe,CYe]=qge(Nf,TS,C_,Hge,VP,zP),[AYe,DYe]=qge(If,SS,T_,Qd,UP,jP);function yF(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vF(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function CE(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Wge(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=AE(i),c=DE(i),f=AE(s),d=DE(s),h=AE(o),p=DE(o),m=AE(a),g=DE(a),y=AE(u),v=DE(u),b={a:j,A:z,b:V,B:$,c:null,d:yee,e:yee,f:QYe,g:aKe,G:lKe,H:YYe,I:KYe,j:XYe,L:Gge,m:JYe,M:ZYe,p:U,q:W,Q:_ee,s:Eee,S:eKe,u:tKe,U:nKe,V:rKe,w:iKe,W:sKe,x:null,X:null,y:oKe,Y:uKe,Z:cKe,"%":bee},E={a:B,A:q,b:Y,B:re,c:null,d:vee,e:vee,f:pKe,g:SKe,G:CKe,H:fKe,I:dKe,j:hKe,L:Kge,m:mKe,M:gKe,p:pe,q:_e,Q:_ee,s:Eee,S:yKe,u:vKe,U:bKe,V:_Ke,w:EKe,W:wKe,x:null,X:null,y:xKe,Y:TKe,Z:AKe,"%":bee},_={a:D,A:I,b:O,B:R,c:M,d:mee,e:mee,f:HYe,g:pee,G:hee,H:gee,I:gee,j:jYe,L:VYe,m:BYe,M:zYe,p:A,q:LYe,Q:WYe,s:GYe,S:UYe,u:PYe,U:OYe,V:MYe,w:RYe,W:$Ye,x:F,X:P,y:pee,Y:hee,Z:FYe,"%":qYe};b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),E.x=x(n,E),E.X=x(r,E),E.c=x(t,E);function x(de,ye){return function(Ce){var ve=[],qe=-1,He=0,ht=de.length,rt,Pe,Be;for(Ce instanceof Date||(Ce=new Date(+Ce));++qe<ht;)de.charCodeAt(qe)===37&&(ve.push(de.slice(He,qe)),(Pe=dee[rt=de.charAt(++qe)])!=null?rt=de.charAt(++qe):Pe=rt==="e"?" ":"0",(Be=ye[rt])&&(rt=Be(Ce,Pe)),ve.push(rt),He=qe+1);return ve.push(de.slice(He,qe)),ve.join("")}}function S(de,ye){return function(Ce){var ve=CE(1900,void 0,1),qe=C(ve,de,Ce+="",0),He,ht;if(qe!=Ce.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(He=vF(CE(ve.y,0,1)),ht=He.getUTCDay(),He=ht>4||ht===0?dN.ceil(He):dN(He),He=Qp.offset(He,(ve.V-1)*7),ve.y=He.getUTCFullYear(),ve.m=He.getUTCMonth(),ve.d=He.getUTCDate()+(ve.w+6)%7):(He=yF(CE(ve.y,0,1)),ht=He.getDay(),He=ht>4||ht===0?fN.ceil(He):fN(He),He=Qd.offset(He,(ve.V-1)*7),ve.y=He.getFullYear(),ve.m=He.getMonth(),ve.d=He.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),ht="Z"in ve?vF(CE(ve.y,0,1)).getUTCDay():yF(CE(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(ht+5)%7:ve.w+ve.U*7-(ht+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,vF(ve)):yF(ve)}}function C(de,ye,Ce,ve){for(var qe=0,He=ye.length,ht=Ce.length,rt,Pe;qe<He;){if(ve>=ht)return-1;if(rt=ye.charCodeAt(qe++),rt===37){if(rt=ye.charAt(qe++),Pe=_[rt in dee?ye.charAt(qe++):rt],!Pe||(ve=Pe(de,Ce,ve))<0)return-1}else if(rt!=Ce.charCodeAt(ve++))return-1}return ve}function A(de,ye,Ce){var ve=l.exec(ye.slice(Ce));return ve?(de.p=c.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function D(de,ye,Ce){var ve=h.exec(ye.slice(Ce));return ve?(de.w=p.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function I(de,ye,Ce){var ve=f.exec(ye.slice(Ce));return ve?(de.w=d.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function O(de,ye,Ce){var ve=y.exec(ye.slice(Ce));return ve?(de.m=v.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function R(de,ye,Ce){var ve=m.exec(ye.slice(Ce));return ve?(de.m=g.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function M(de,ye,Ce){return C(de,t,ye,Ce)}function F(de,ye,Ce){return C(de,n,ye,Ce)}function P(de,ye,Ce){return C(de,r,ye,Ce)}function j(de){return o[de.getDay()]}function z(de){return s[de.getDay()]}function V(de){return u[de.getMonth()]}function $(de){return a[de.getMonth()]}function U(de){return i[+(de.getHours()>=12)]}function W(de){return 1+~~(de.getMonth()/3)}function B(de){return o[de.getUTCDay()]}function q(de){return s[de.getUTCDay()]}function Y(de){return u[de.getUTCMonth()]}function re(de){return a[de.getUTCMonth()]}function pe(de){return i[+(de.getUTCHours()>=12)]}function _e(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ye=x(de+="",b);return ye.toString=function(){return de},ye},parse:function(de){var ye=S(de+="",!1);return ye.toString=function(){return de},ye},utcFormat:function(de){var ye=x(de+="",E);return ye.toString=function(){return de},ye},utcParse:function(de){var ye=S(de+="",!0);return ye.toString=function(){return de},ye}}}var dee={"-":"",_:" ",0:"0"},Ms=/^\s*\d+/,IYe=/^%/,NYe=/[\\^$*+?|[\]().{}]/g;function Qn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function kYe(e){return e.replace(NYe,"\\$&")}function AE(e){return new RegExp("^(?:"+e.map(kYe).join("|")+")","i")}function DE(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function RYe(e,t,n){var r=Ms.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function PYe(e,t,n){var r=Ms.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function OYe(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function MYe(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function $Ye(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function hee(e,t,n){var r=Ms.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pee(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function FYe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function LYe(e,t,n){var r=Ms.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function BYe(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mee(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function jYe(e,t,n){var r=Ms.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gee(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function zYe(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function UYe(e,t,n){var r=Ms.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function VYe(e,t,n){var r=Ms.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function HYe(e,t,n){var r=Ms.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qYe(e,t,n){var r=IYe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function WYe(e,t,n){var r=Ms.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function GYe(e,t,n){var r=Ms.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yee(e,t){return Qn(e.getDate(),t,2)}function YYe(e,t){return Qn(e.getHours(),t,2)}function KYe(e,t){return Qn(e.getHours()%12||12,t,2)}function XYe(e,t){return Qn(1+Qd.count(If(e),e),t,3)}function Gge(e,t){return Qn(e.getMilliseconds(),t,3)}function QYe(e,t){return Gge(e,t)+"000"}function JYe(e,t){return Qn(e.getMonth()+1,t,2)}function ZYe(e,t){return Qn(e.getMinutes(),t,2)}function eKe(e,t){return Qn(e.getSeconds(),t,2)}function tKe(e){var t=e.getDay();return t===0?7:t}function nKe(e,t){return Qn(T_.count(If(e)-1,e),t,2)}function Yge(e){var t=e.getDay();return t>=4||t===0?cb(e):cb.ceil(e)}function rKe(e,t){return e=Yge(e),Qn(cb.count(If(e),e)+(If(e).getDay()===4),t,2)}function iKe(e){return e.getDay()}function sKe(e,t){return Qn(fN.count(If(e)-1,e),t,2)}function oKe(e,t){return Qn(e.getFullYear()%100,t,2)}function aKe(e,t){return e=Yge(e),Qn(e.getFullYear()%100,t,2)}function uKe(e,t){return Qn(e.getFullYear()%1e4,t,4)}function lKe(e,t){var n=e.getDay();return e=n>=4||n===0?cb(e):cb.ceil(e),Qn(e.getFullYear()%1e4,t,4)}function cKe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qn(t/60|0,"0",2)+Qn(t%60,"0",2)}function vee(e,t){return Qn(e.getUTCDate(),t,2)}function fKe(e,t){return Qn(e.getUTCHours(),t,2)}function dKe(e,t){return Qn(e.getUTCHours()%12||12,t,2)}function hKe(e,t){return Qn(1+Qp.count(Nf(e),e),t,3)}function Kge(e,t){return Qn(e.getUTCMilliseconds(),t,3)}function pKe(e,t){return Kge(e,t)+"000"}function mKe(e,t){return Qn(e.getUTCMonth()+1,t,2)}function gKe(e,t){return Qn(e.getUTCMinutes(),t,2)}function yKe(e,t){return Qn(e.getUTCSeconds(),t,2)}function vKe(e){var t=e.getUTCDay();return t===0?7:t}function bKe(e,t){return Qn(C_.count(Nf(e)-1,e),t,2)}function Xge(e){var t=e.getUTCDay();return t>=4||t===0?fb(e):fb.ceil(e)}function _Ke(e,t){return e=Xge(e),Qn(fb.count(Nf(e),e)+(Nf(e).getUTCDay()===4),t,2)}function EKe(e){return e.getUTCDay()}function wKe(e,t){return Qn(dN.count(Nf(e)-1,e),t,2)}function xKe(e,t){return Qn(e.getUTCFullYear()%100,t,2)}function SKe(e,t){return e=Xge(e),Qn(e.getUTCFullYear()%100,t,2)}function TKe(e,t){return Qn(e.getUTCFullYear()%1e4,t,4)}function CKe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?fb(e):fb.ceil(e),Qn(e.getUTCFullYear()%1e4,t,4)}function AKe(){return"+0000"}function bee(){return"%"}function _ee(e){return+e}function Eee(e){return Math.floor(+e/1e3)}var h1,Jz,Qge,Zz,Jge;DKe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function DKe(e){return h1=Wge(e),Jz=h1.format,Qge=h1.parse,Zz=h1.utcFormat,Jge=h1.utcParse,h1}function IKe(e){return new Date(e)}function NKe(e){return e instanceof Date?+e:+new Date(+e)}function eU(e,t,n,r,i,s,o,a,u,l){var c=Nge(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),E=l("%Y");function _(x){return(u(x)<x?h:a(x)<x?p:o(x)<x?m:s(x)<x?g:r(x)<x?i(x)<x?y:v:n(x)<x?b:E)(x)}return c.invert=function(x){return new Date(f(x))},c.domain=function(x){return arguments.length?d(Array.from(x,NKe)):d().map(IKe)},c.ticks=function(x){var S=d();return e(S[0],S[S.length-1],x??10)},c.tickFormat=function(x,S){return S==null?_:l(S)},c.nice=function(x){var S=d();return(!x||typeof x.range!="function")&&(x=t(S[0],S[S.length-1],x??10)),x?d(Lge(S,x)):c},c.copy=function(){return WT(c,eU(e,t,n,r,i,s,o,a,u,l))},c}function kKe(){return Kf.apply(eU(AYe,DYe,If,SS,T_,Qd,UP,jP,jd,Jz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RKe(){return Kf.apply(eU(TYe,CYe,Nf,TS,C_,Qp,VP,zP,jd,Zz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function HP(){var e=0,t=1,n,r,i,s,o=Ba,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Qm),l.rangeRound=c(qT),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Jm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tU(){var e=Ny(HP()(Ba));return e.copy=function(){return Jm(e,tU())},Km.apply(e,arguments)}function Zge(){var e=Gz(HP()).domain([1,10]);return e.copy=function(){return Jm(e,Zge()).base(e.base())},Km.apply(e,arguments)}function e0e(){var e=Yz(HP());return e.copy=function(){return Jm(e,e0e()).constant(e.constant())},Km.apply(e,arguments)}function nU(){var e=Kz(HP());return e.copy=function(){return Jm(e,nU()).exponent(e.exponent())},Km.apply(e,arguments)}function PKe(){return nU.apply(null,arguments).exponent(.5)}function qP(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Ba,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=Hz(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Qm),h.rangeRound=p(qT),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function t0e(){var e=Ny(qP()(Ba));return e.copy=function(){return Jm(e,t0e())},Km.apply(e,arguments)}function n0e(){var e=Gz(qP()).domain([.1,1,10]);return e.copy=function(){return Jm(e,n0e()).base(e.base())},Km.apply(e,arguments)}function r0e(){var e=Yz(qP());return e.copy=function(){return Jm(e,r0e()).constant(e.constant())},Km.apply(e,arguments)}function rU(){var e=Kz(qP());return e.copy=function(){return Jm(e,rU()).exponent(e.exponent())},Km.apply(e,arguments)}function OKe(){return rU.apply(null,arguments).exponent(.5)}function MKe(e){return e}var bF=1,_F=2,h5=3,pw=4,wee=1e-6;function $Ke(e){return"translate("+e+",0)"}function FKe(e){return"translate(0,"+e+")"}function LKe(e){return t=>+e(t)}function BKe(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function jKe(){return!this.__axis}function i0e(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===bF||e===pw?-1:1,c=e===pw||e===_F?"x":"y",f=e===bF||e===h5?$Ke:FKe;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):MKe),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,E=(t.bandwidth?BKe:LKe)(t.copy(),u),_=h.selection?h.selection():h,x=_.selectAll(".domain").data([null]),S=_.selectAll(".tick").data(p,t).order(),C=S.exit(),A=S.enter().append("g").attr("class","tick"),D=S.select("line"),I=S.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(A),D=D.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),I=I.merge(A.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===bF?"0em":e===h5?"0.71em":"0.32em")),h!==_&&(x=x.transition(h),S=S.transition(h),D=D.transition(h),I=I.transition(h),C=C.transition(h).attr("opacity",wee).attr("transform",function(O){return isFinite(O=E(O))?f(O+u):this.getAttribute("transform")}),A.attr("opacity",wee).attr("transform",function(O){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(O))?R:E(O))+u)})),C.remove(),x.attr("d",e===pw||e===_F?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),S.attr("opacity",1).attr("transform",function(O){return f(E(O)+u)}),D.attr(c+"2",l*s),I.attr(c,l*g).text(m),_.filter(jKe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===_F?"start":e===pw?"end":"middle"),_.each(function(){this.__axis=E})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function s0e(e){return i0e(h5,e)}function hN(e){return i0e(pw,e)}var zKe={value:()=>{}};function iU(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new wD(n)}function wD(e){this._=e}function UKe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}wD.prototype=iU.prototype={constructor:wD,on:function(e,t){var n=this._,r=UKe(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=VKe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=xee(n[i],e.name,t);else if(t==null)for(i in n)n[i]=xee(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function VKe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function xee(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=zKe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var p5="http://www.w3.org/1999/xhtml";const See={svg:"http://www.w3.org/2000/svg",xhtml:p5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function WP(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),See.hasOwnProperty(t)?{space:See[t],local:e}:e}function HKe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===p5&&t.documentElement.namespaceURI===p5?t.createElement(e):t.createElementNS(n,e)}}function qKe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o0e(e){var t=WP(e);return(t.local?qKe:HKe)(t)}function WKe(){}function sU(e){return e==null?WKe:function(){return this.querySelector(e)}}function GKe(e){typeof e!="function"&&(e=sU(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new $u(r,this._parents)}function YKe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function KKe(){return[]}function a0e(e){return e==null?KKe:function(){return this.querySelectorAll(e)}}function XKe(e){return function(){return YKe(e.apply(this,arguments))}}function QKe(e){typeof e=="function"?e=XKe(e):e=a0e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new $u(r,i)}function u0e(e){return function(){return this.matches(e)}}function l0e(e){return function(t){return t.matches(e)}}var JKe=Array.prototype.find;function ZKe(e){return function(){return JKe.call(this.children,e)}}function eXe(){return this.firstElementChild}function tXe(e){return this.select(e==null?eXe:ZKe(typeof e=="function"?e:l0e(e)))}var nXe=Array.prototype.filter;function rXe(){return Array.from(this.children)}function iXe(e){return function(){return nXe.call(this.children,e)}}function sXe(e){return this.selectAll(e==null?rXe:iXe(typeof e=="function"?e:l0e(e)))}function oXe(e){typeof e!="function"&&(e=u0e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new $u(r,this._parents)}function c0e(e){return new Array(e.length)}function aXe(){return new $u(this._enter||this._groups.map(c0e),this._parents)}function pN(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pN.prototype={constructor:pN,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uXe(e){return function(){return e}}function lXe(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new pN(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function cXe(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new pN(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function fXe(e){return e.__data__}function dXe(e,t){if(!arguments.length)return Array.from(this,fXe);var n=t?cXe:lXe,r=this._parents,i=this._groups;typeof e!="function"&&(e=uXe(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=hXe(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,E,_;v<p;++v)if(E=m[v]){for(v>=b&&(b=v+1);!(_=g[b])&&++b<p;);E._next=_||null}}return o=new $u(o,r),o._enter=a,o._exit=u,o}function hXe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pXe(){return new $u(this._exit||this._groups.map(c0e),this._parents)}function mXe(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function gXe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new $u(a,this._parents)}function yXe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function vXe(e){e||(e=bXe);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new $u(i,this._parents).order()}function bXe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _Xe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function EXe(){return Array.from(this)}function wXe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function xXe(){let e=0;for(const t of this)++e;return e}function SXe(){return!this.node()}function TXe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function CXe(e){return function(){this.removeAttribute(e)}}function AXe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DXe(e,t){return function(){this.setAttribute(e,t)}}function IXe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function NXe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function kXe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function RXe(e,t){var n=WP(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?AXe:CXe:typeof t=="function"?n.local?kXe:NXe:n.local?IXe:DXe)(n,t))}function f0e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function PXe(e){return function(){this.style.removeProperty(e)}}function OXe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function MXe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function $Xe(e,t,n){return arguments.length>1?this.each((t==null?PXe:typeof t=="function"?MXe:OXe)(e,t,n??"")):db(this.node(),e)}function db(e,t){return e.style.getPropertyValue(t)||f0e(e).getComputedStyle(e,null).getPropertyValue(t)}function FXe(e){return function(){delete this[e]}}function LXe(e,t){return function(){this[e]=t}}function BXe(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function jXe(e,t){return arguments.length>1?this.each((t==null?FXe:typeof t=="function"?BXe:LXe)(e,t)):this.node()[e]}function d0e(e){return e.trim().split(/^|\s+/)}function oU(e){return e.classList||new h0e(e)}function h0e(e){this._node=e,this._names=d0e(e.getAttribute("class")||"")}h0e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function p0e(e,t){for(var n=oU(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function m0e(e,t){for(var n=oU(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function zXe(e){return function(){p0e(this,e)}}function UXe(e){return function(){m0e(this,e)}}function VXe(e,t){return function(){(t.apply(this,arguments)?p0e:m0e)(this,e)}}function HXe(e,t){var n=d0e(e+"");if(arguments.length<2){for(var r=oU(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?VXe:t?zXe:UXe)(n,t))}function qXe(){this.textContent=""}function WXe(e){return function(){this.textContent=e}}function GXe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function YXe(e){return arguments.length?this.each(e==null?qXe:(typeof e=="function"?GXe:WXe)(e)):this.node().textContent}function KXe(){this.innerHTML=""}function XXe(e){return function(){this.innerHTML=e}}function QXe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function JXe(e){return arguments.length?this.each(e==null?KXe:(typeof e=="function"?QXe:XXe)(e)):this.node().innerHTML}function ZXe(){this.nextSibling&&this.parentNode.appendChild(this)}function eQe(){return this.each(ZXe)}function tQe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nQe(){return this.each(tQe)}function rQe(e){var t=typeof e=="function"?e:o0e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iQe(){return null}function sQe(e,t){var n=typeof e=="function"?e:o0e(e),r=t==null?iQe:typeof t=="function"?t:sU(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function oQe(){var e=this.parentNode;e&&e.removeChild(this)}function aQe(){return this.each(oQe)}function uQe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lQe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cQe(e){return this.select(e?lQe:uQe)}function fQe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function dQe(e){return function(t){e.call(this,t,this.__data__)}}function hQe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function pQe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function mQe(e,t,n){return function(){var r=this.__on,i,s=dQe(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function gQe(e,t,n){var r=hQe(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?mQe:pQe,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function g0e(e,t,n){var r=f0e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function yQe(e,t){return function(){return g0e(this,e,t)}}function vQe(e,t){return function(){return g0e(this,e,t.apply(this,arguments))}}function bQe(e,t){return this.each((typeof t=="function"?vQe:yQe)(e,t))}function*_Qe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var y0e=[null];function $u(e,t){this._groups=e,this._parents=t}function GT(){return new $u([[document.documentElement]],y0e)}function EQe(){return this}$u.prototype=GT.prototype={constructor:$u,select:GKe,selectAll:QKe,selectChild:tXe,selectChildren:sXe,filter:oXe,data:dXe,enter:aXe,exit:pXe,join:mXe,merge:gXe,selection:EQe,order:yXe,sort:vXe,call:_Xe,nodes:EXe,node:wXe,size:xXe,empty:SXe,each:TXe,attr:RXe,style:$Xe,property:jXe,classed:HXe,text:YXe,html:JXe,raise:eQe,lower:nQe,append:rQe,insert:sQe,remove:aQe,clone:cQe,datum:fQe,on:gQe,dispatch:bQe,[Symbol.iterator]:_Qe};function GP(e){return typeof e=="string"?new $u([[document.querySelector(e)]],[document.documentElement]):new $u([[e]],y0e)}var hb=0,mw=0,IE=0,v0e=1e3,mN,gw,gN=0,L0=0,YP=0,CS=typeof performance=="object"&&performance.now?performance:Date,b0e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function KP(){return L0||(b0e(wQe),L0=CS.now()+YP)}function wQe(){L0=0}function AS(){this._call=this._time=this._next=null}AS.prototype=aU.prototype={constructor:AS,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?KP():+n)+(t==null?0:+t),!this._next&&gw!==this&&(gw?gw._next=this:mN=this,gw=this),this._call=e,this._time=n,m5()},stop:function(){this._call&&(this._call=null,this._time=1/0,m5())}};function aU(e,t,n){var r=new AS;return r.restart(e,t,n),r}function xQe(){KP(),++hb;for(var e=mN,t;e;)(t=L0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hb}function Tee(){L0=(gN=CS.now())+YP,hb=mw=0;try{xQe()}finally{hb=0,TQe(),L0=0}}function SQe(){var e=CS.now(),t=e-gN;t>v0e&&(YP-=t,gN=e)}function TQe(){for(var e,t=mN,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mN=n);gw=e,m5(r)}function m5(e){if(!hb){mw&&(mw=clearTimeout(mw));var t=e-L0;t>24?(e<1/0&&(mw=setTimeout(Tee,e-CS.now()-YP)),IE&&(IE=clearInterval(IE))):(IE||(gN=CS.now(),IE=setInterval(SQe,v0e)),hb=1,b0e(Tee))}}function Cee(e,t,n){var r=new AS;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function CQe(e,t,n){var r=new AS,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?KP():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var AQe=iU("start","end","cancel","interrupt"),DQe=[],_0e=0,Aee=1,g5=2,xD=3,Dee=4,y5=5,SD=6;function XP(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;IQe(e,n,{name:t,index:r,group:i,on:AQe,tween:DQe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_0e})}function uU(e,t){var n=Pc(e,t);if(n.state>_0e)throw new Error("too late; already scheduled");return n}function Xf(e,t){var n=Pc(e,t);if(n.state>xD)throw new Error("too late; already running");return n}function Pc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function IQe(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=aU(s,0,n.time);function s(l){n.state=Aee,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Aee)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===xD)return Cee(o);h.state===Dee?(h.state=SD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=SD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Cee(function(){n.state===xD&&(n.state=Dee,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=g5,n.on.call("start",e,e.__data__,n.index,n.group),n.state===g5){for(n.state=xD,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=y5,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===y5&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=SD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function NQe(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>g5&&r.state<y5,r.state=SD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function kQe(e){return this.each(function(){NQe(this,e)})}function RQe(e,t){var n,r;return function(){var i=Xf(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function PQe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Xf(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function OQe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Pc(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?RQe:PQe)(n,e,t))}function lU(e,t,n){var r=e._id;return e.each(function(){var i=Xf(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Pc(i,r).value[t]}}function E0e(e,t){var n;return(typeof t=="number"?rl:t instanceof $0?xS:(n=$0(t))?(t=n,xS):Vz)(e,t)}function MQe(e){return function(){this.removeAttribute(e)}}function $Qe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function FQe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function LQe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function BQe(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function jQe(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function zQe(e,t){var n=WP(e),r=n==="transform"?Cge:E0e;return this.attrTween(e,typeof t=="function"?(n.local?jQe:BQe)(n,r,lU(this,"attr."+e,t)):t==null?(n.local?$Qe:MQe)(n):(n.local?LQe:FQe)(n,r,t))}function UQe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function VQe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function HQe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&VQe(e,s)),n}return i._value=t,i}function qQe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&UQe(e,s)),n}return i._value=t,i}function WQe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=WP(e);return this.tween(n,(r.local?HQe:qQe)(r,t))}function GQe(e,t){return function(){uU(this,e).delay=+t.apply(this,arguments)}}function YQe(e,t){return t=+t,function(){uU(this,e).delay=t}}function KQe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?GQe:YQe)(t,e)):Pc(this.node(),t).delay}function XQe(e,t){return function(){Xf(this,e).duration=+t.apply(this,arguments)}}function QQe(e,t){return t=+t,function(){Xf(this,e).duration=t}}function JQe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?XQe:QQe)(t,e)):Pc(this.node(),t).duration}function ZQe(e,t){if(typeof t!="function")throw new Error;return function(){Xf(this,e).ease=t}}function eJe(e){var t=this._id;return arguments.length?this.each(ZQe(t,e)):Pc(this.node(),t).ease}function tJe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Xf(this,e).ease=n}}function nJe(e){if(typeof e!="function")throw new Error;return this.each(tJe(this._id,e))}function rJe(e){typeof e!="function"&&(e=u0e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Eh(r,this._parents,this._name,this._id)}function iJe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Eh(o,this._parents,this._name,this._id)}function sJe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function oJe(e,t,n){var r,i,s=sJe(t)?uU:Xf;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function aJe(e,t){var n=this._id;return arguments.length<2?Pc(this.node(),n).on.on(e):this.each(oJe(n,e,t))}function uJe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function lJe(){return this.on("end.remove",uJe(this._id))}function cJe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sU(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,XP(l[d],t,n,d,l,Pc(c,n)));return new Eh(s,this._parents,t,n)}function fJe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=a0e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Pc(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&XP(h,t,n,m,d,p);s.push(d),o.push(c)}return new Eh(s,o,t,n)}var dJe=GT.prototype.constructor;function hJe(){return new dJe(this._groups,this._parents)}function pJe(e,t){var n,r,i;return function(){var s=db(this,e),o=(this.style.removeProperty(e),db(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function w0e(e){return function(){this.style.removeProperty(e)}}function mJe(e,t,n){var r,i=n+"",s;return function(){var o=db(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function gJe(e,t,n){var r,i,s;return function(){var o=db(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),db(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function yJe(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Xf(this,e),l=u.on,c=u.value[s]==null?a||(a=w0e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function vJe(e,t,n){var r=(e+="")=="transform"?Tge:E0e;return t==null?this.styleTween(e,pJe(e,r)).on("end.style."+e,w0e(e)):typeof t=="function"?this.styleTween(e,gJe(e,r,lU(this,"style."+e,t))).each(yJe(this._id,e)):this.styleTween(e,mJe(e,r,t),n).on("end.style."+e,null)}function bJe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function _Je(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&bJe(e,o,n)),r}return s._value=t,s}function EJe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,_Je(e,t,n??""))}function wJe(e){return function(){this.textContent=e}}function xJe(e){return function(){var t=e(this);this.textContent=t??""}}function SJe(e){return this.tween("text",typeof e=="function"?xJe(lU(this,"text",e)):wJe(e==null?"":e+""))}function TJe(e){return function(t){this.textContent=e.call(this,t)}}function CJe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&TJe(i)),t}return r._value=e,r}function AJe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,CJe(e))}function DJe(){for(var e=this._name,t=this._id,n=x0e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Pc(u,t);XP(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Eh(r,this._parents,e,n)}function IJe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Xf(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var NJe=0;function Eh(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function x0e(){return++NJe}var gd=GT.prototype;Eh.prototype={constructor:Eh,select:cJe,selectAll:fJe,selectChild:gd.selectChild,selectChildren:gd.selectChildren,filter:rJe,merge:iJe,selection:hJe,transition:DJe,call:gd.call,nodes:gd.nodes,node:gd.node,size:gd.size,empty:gd.empty,each:gd.each,on:aJe,attr:zQe,attrTween:WQe,style:vJe,styleTween:EJe,text:SJe,textTween:AJe,remove:lJe,tween:OQe,delay:KQe,duration:JQe,ease:eJe,easeVarying:nJe,end:IJe,[Symbol.iterator]:gd[Symbol.iterator]};const kJe=e=>+e;function RJe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var PJe={time:null,delay:0,duration:250,ease:RJe};function OJe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function MJe(e){var t,n;e instanceof Eh?(t=e._id,e=e._name):(t=x0e(),(n=PJe).time=KP(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&XP(u,e,t,l,o,n||OJe(u,t));return new Eh(r,this._parents,e,t)}GT.prototype.interrupt=kQe;GT.prototype.transition=MJe;const v5=Math.PI,b5=2*v5,Mg=1e-6,$Je=b5-Mg;function S0e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function FJe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return S0e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let cU=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?S0e:FJe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Mg)if(!(Math.abs(f*u-l*c)>Mg)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((v5-Math.acos((m+d-g)/(2*y*v)))/2),E=b/v,_=b/y;Math.abs(E-1)>Mg&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Mg||Math.abs(this._y1-c)>Mg)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%b5+b5),d>$Je?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Mg&&this._append`A${r},${r},0,${+(d>=v5)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function QP(){return new cU}QP.prototype=cU.prototype;const Jd=11102230246251565e-32,yo=134217729,LJe=(3+8*Jd)*Jd;function EF(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function BJe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function YT(e){return new Float64Array(e)}const jJe=(3+16*Jd)*Jd,zJe=(2+12*Jd)*Jd,UJe=(9+64*Jd)*Jd*Jd,p1=YT(4),Iee=YT(8),Nee=YT(12),kee=YT(16),Go=YT(4);function VJe(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,E,_,x,S,C;const A=e-i,D=n-i,I=t-s,O=r-s;E=A*O,d=yo*A,h=d-(d-A),p=A-h,d=yo*O,m=d-(d-O),g=O-m,_=p*g-(E-h*m-p*m-h*g),x=I*D,d=yo*I,h=d-(d-I),p=I-h,d=yo*D,m=d-(d-D),g=D-m,S=p*g-(x-h*m-p*m-h*g),y=_-S,f=_-y,p1[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-x,f=b-y,p1[1]=b-(y+f)+(f-x),C=v+y,f=C-v,p1[2]=v-(C-f)+(y-f),p1[3]=C;let R=BJe(4,p1),M=zJe*o;if(R>=M||-R>=M||(f=e-A,a=e-(A+f)+(f-i),f=n-D,l=n-(D+f)+(f-i),f=t-I,u=t-(I+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(M=UJe*o+LJe*Math.abs(R),R+=A*c+O*a-(I*l+D*u),R>=M||-R>=M))return R;E=a*O,d=yo*a,h=d-(d-a),p=a-h,d=yo*O,m=d-(d-O),g=O-m,_=p*g-(E-h*m-p*m-h*g),x=u*D,d=yo*u,h=d-(d-u),p=u-h,d=yo*D,m=d-(d-D),g=D-m,S=p*g-(x-h*m-p*m-h*g),y=_-S,f=_-y,Go[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-x,f=b-y,Go[1]=b-(y+f)+(f-x),C=v+y,f=C-v,Go[2]=v-(C-f)+(y-f),Go[3]=C;const F=EF(4,p1,4,Go,Iee);E=A*c,d=yo*A,h=d-(d-A),p=A-h,d=yo*c,m=d-(d-c),g=c-m,_=p*g-(E-h*m-p*m-h*g),x=I*l,d=yo*I,h=d-(d-I),p=I-h,d=yo*l,m=d-(d-l),g=l-m,S=p*g-(x-h*m-p*m-h*g),y=_-S,f=_-y,Go[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-x,f=b-y,Go[1]=b-(y+f)+(f-x),C=v+y,f=C-v,Go[2]=v-(C-f)+(y-f),Go[3]=C;const P=EF(F,Iee,4,Go,Nee);E=a*c,d=yo*a,h=d-(d-a),p=a-h,d=yo*c,m=d-(d-c),g=c-m,_=p*g-(E-h*m-p*m-h*g),x=u*l,d=yo*u,h=d-(d-u),p=u-h,d=yo*l,m=d-(d-l),g=l-m,S=p*g-(x-h*m-p*m-h*g),y=_-S,f=_-y,Go[0]=_-(y+f)+(f-S),v=E+y,f=v-E,b=E-(v-f)+(y-f),y=b-x,f=b-y,Go[1]=b-(y+f)+(f-x),C=v+y,f=C-v,Go[2]=v-(C-f)+(y-f),Go[3]=C;const j=EF(P,Nee,4,Go,kee);return kee[j-1]}function XC(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=jJe*l?u:-VJe(e,t,n,r,i,s,l)}const Ree=Math.pow(2,-52),QC=new Uint32Array(512);class yN{static from(t,n=YJe,r=KJe){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new yN(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const D=t[2*A],I=t[2*A+1];D<a&&(a=D),I<u&&(u=I),D>l&&(l=D),I>c&&(c=I),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,D=1/0;A<o;A++){const I=wF(f,d,t[2*A],t[2*A+1]);I<D&&(h=A,D=I)}const g=t[2*h],y=t[2*h+1];for(let A=0,D=1/0;A<o;A++){if(A===h)continue;const I=wF(g,y,t[2*A],t[2*A+1]);I<D&&I>0&&(p=A,D=I)}let v=t[2*p],b=t[2*p+1],E=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const D=WJe(g,y,v,b,t[2*A],t[2*A+1]);D<E&&(m=A,E=D)}let _=t[2*m],x=t[2*m+1];if(E===1/0){for(let I=0;I<o;I++)this._dists[I]=t[2*I]-t[0]||t[2*I+1]-t[1];nv(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let D=0;for(let I=0,O=-1/0;I<o;I++){const R=this._ids[I],M=this._dists[R];M>O&&(A[D++]=R,O=M)}this.hull=A.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(XC(g,y,v,b,_,x)<0){const A=p,D=v,I=b;p=m,v=_,b=x,m=A,_=D,x=I}const S=GJe(g,y,v,b,_,x);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=wF(t[2*A],t[2*A+1],S.x,S.y);nv(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(_,x)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,D,I;A<this._ids.length;A++){const O=this._ids[A],R=t[2*O],M=t[2*O+1];if(A>0&&Math.abs(R-D)<=Ree&&Math.abs(M-I)<=Ree||(D=R,I=M,O===h||O===p||O===m))continue;let F=0;for(let $=0,U=this._hashKey(R,M);$<this._hashSize&&(F=s[(U+$)%this._hashSize],!(F!==-1&&F!==r[F]));$++);F=n[F];let P=F,j;for(;j=r[P],XC(R,M,t[2*P],t[2*P+1],t[2*j],t[2*j+1])>=0;)if(P=j,P===F){P=-1;break}if(P===-1)continue;let z=this._addTriangle(P,O,r[P],-1,-1,i[P]);i[O]=this._legalize(z+2),i[P]=z,C++;let V=r[P];for(;j=r[V],XC(R,M,t[2*V],t[2*V+1],t[2*j],t[2*j+1])<0;)z=this._addTriangle(V,O,j,i[O],-1,i[V]),i[O]=this._legalize(z+2),r[V]=V,C--,V=j;if(P===F)for(;j=n[P],XC(R,M,t[2*j],t[2*j+1],t[2*P],t[2*P+1])<0;)z=this._addTriangle(j,O,P,-1,i[P],i[j]),this._legalize(z+2),i[j]=z,r[P]=P,C--,P=j;this._hullStart=n[O]=P,r[P]=n[V]=O,r[O]=V,s[this._hashKey(R,M)]=O,s[this._hashKey(t[2*P],t[2*P+1])]=P}this.hull=new Uint32Array(C);for(let A=0,D=this._hullStart;A<C;A++)this.hull[A]=D,D=r[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(HJe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=QC[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(qJe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<QC.length&&(QC[s++]=v)}else{if(s===0)break;t=QC[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function HJe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function wF(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function qJe(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function WJe(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function GJe(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function nv(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;NE(e,i,s),t[e[n]]>t[e[r]]&&NE(e,n,r),t[e[s]]>t[e[r]]&&NE(e,s,r),t[e[n]]>t[e[s]]&&NE(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;NE(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(nv(e,t,s,r),nv(e,t,n,o-1)):(nv(e,t,n,o-1),nv(e,t,s,r))}}function NE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function YJe(e){return e[0]}function KJe(e){return e[1]}const Pee=1e-6;class i0{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Pee||Math.abs(this._y1-s)>Pee)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class _5{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let XJe=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const E=r[m]*2,_=r[m+1]*2,x=r[m+2]*2,S=t[E],C=t[E+1],A=t[_],D=t[_+1],I=t[x],O=t[x+1],R=A-S,M=D-C,F=I-S,P=O-C,j=(R*P-M*F)*2;if(Math.abs(j)<1e-9){if(s===void 0){s=o=0;for(const V of n)s+=t[V*2],o+=t[V*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-S)*P-(o-C)*F);v=(S+I)/2-z*P,b=(C+O)/2+z*F}else{const z=1/j,V=R*R+M*M,$=F*F+P*P;v=S+(P*V-M*$)*z,b=C+(R*$-F*V)*z}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new i0:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new i0:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new i0:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new _5;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const QJe=2*Math.PI,m1=Math.pow;function JJe(e){return e[0]}function ZJe(e){return e[1]}function eZe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function tZe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class fU{static from(t,n=JJe,r=ZJe,i){return new fU("length"in t?nZe(t,n,r,i):Float64Array.from(rZe(t,n,r,i)))}constructor(t){this._delaunator=new yN(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&eZe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=tZe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new yN(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new XJe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=m1(n-l[t*2],2)+m1(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=m1(n-l[p*2],2)+m1(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&m1(n-l[h*2],2)+m1(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new i0:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new i0:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,QJe)}return r&&r.value()}renderHull(t){const n=t==null?t=new i0:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new _5;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new i0:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new _5;return this.renderTriangle(t,n),n.value()}}function nZe(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*rZe(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Oee={},xF={},SF=34,kE=10,TF=13;function T0e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function iZe(e,t){var n=T0e(e);return function(r,i){return t(n(r),i,e)}}function Mee(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ta(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function sZe(e){return e<0?"-"+Ta(-e,6):e>9999?"+"+Ta(e,6):Ta(e,4)}function oZe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":sZe(e.getUTCFullYear())+"-"+Ta(e.getUTCMonth()+1,2)+"-"+Ta(e.getUTCDate(),2)+(i?"T"+Ta(t,2)+":"+Ta(n,2)+":"+Ta(r,2)+"."+Ta(i,3)+"Z":r?"T"+Ta(t,2)+":"+Ta(n,2)+":"+Ta(r,2)+"Z":n||t?"T"+Ta(t,2)+":"+Ta(n,2)+"Z":"")}function aZe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?iZe(g,d):T0e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===kE&&--p,f.charCodeAt(p-1)===TF&&--p;function E(){if(v)return xF;if(b)return b=!1,Oee;var x,S=m,C;if(f.charCodeAt(S)===SF){for(;m++<p&&f.charCodeAt(m)!==SF||f.charCodeAt(++m)===SF;);return(x=m)>=p?v=!0:(C=f.charCodeAt(m++))===kE?b=!0:C===TF&&(b=!0,f.charCodeAt(m)===kE&&++m),f.slice(S+1,x-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(x=m++))===kE)b=!0;else if(C===TF)b=!0,f.charCodeAt(m)===kE&&++m;else if(C!==n)continue;return f.slice(S,x)}return v=!0,f.slice(S,p)}for(;(y=E())!==xF;){for(var _=[];y!==Oee&&y!==xF;)_.push(y),y=E();d&&(_=d(_,g++))==null||h.push(_)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Mee(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Mee(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?oZe(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function uZe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function lZe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return C0e(this.cover(t,n),t,n,e)}function C0e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function cZe(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)C0e(this,o[n],a[n],e[n]);return this}function fZe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function dZe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function hZe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ra(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function pZe(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new ra(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new ra(h[3],g,y,u,l),new ra(h[2],o,y,g,l),new ra(h[1],g,a,u,y),new ra(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),E=v*v+b*b;if(E<n){var _=Math.sqrt(n=E);i=e-_,s=t-_,c=e+_,f=t+_,r=h.data}}return r}function mZe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function gZe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function yZe(){return this._root}function vZe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function bZe(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new ra(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new ra(i,l,c,a,u)),(i=r[2])&&t.push(new ra(i,s,c,l,u)),(i=r[1])&&t.push(new ra(i,l,o,a,c)),(i=r[0])&&t.push(new ra(i,s,o,l,c))}return this}function _Ze(e){var t=[],n=[],r;for(this._root&&t.push(new ra(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new ra(s,o,a,c,f)),(s=i[1])&&t.push(new ra(s,c,a,u,f)),(s=i[2])&&t.push(new ra(s,o,f,c,l)),(s=i[3])&&t.push(new ra(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function EZe(e){return e[0]}function wZe(e){return arguments.length?(this._x=e,this):this._x}function xZe(e){return e[1]}function SZe(e){return arguments.length?(this._y=e,this):this._y}function dU(e,t,n){var r=new hU(t??EZe,n??xZe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function hU(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function $ee(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var va=dU.prototype=hU.prototype;va.copy=function(){var e=new hU(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=$ee(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=$ee(r));return e};va.add=lZe;va.addAll=cZe;va.cover=fZe;va.data=dZe;va.extent=hZe;va.find=pZe;va.remove=mZe;va.removeAll=gZe;va.root=yZe;va.size=vZe;va.visit=bZe;va.visitAfter=_Ze;va.x=wZe;va.y=SZe;function ia(e){return function(){return e}}function Ip(e){return(e()-.5)*1e-6}function TZe(e){return e.x+e.vx}function CZe(e){return e.y+e.vy}function AZe(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ia(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=dU(t,TZe,CZe).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,E,_,x,S){var C=b.data,A=b.r,D=m+A;if(C){if(C.index>d.index){var I=h-C.x-C.vx,O=p-C.y-C.vy,R=I*I+O*O;R<D*D&&(I===0&&(I=Ip(r),R+=I*I),O===0&&(O=Ip(r),R+=O*O),R=(D-(R=Math.sqrt(R)))/R*i,d.vx+=(I*=R)*(D=(A*=A)/(g+A)),d.vy+=(O*=R)*D,C.vx-=I*(D=1-D),C.vy-=O*D)}return}return E>h+D||x<h-D||_>p+D||S<p-D}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ia(+l),u(),o):e},o}function DZe(e){return e.index}function Fee(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function IZe(e){var t=DZe,n=f,r,i=ia(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,E,_,x,S,C,A,D;b<v;++b)E=e[b],_=E.source,x=E.target,S=x.x+x.vx-_.x-_.vx||Ip(l),C=x.y+x.vy-_.y-_.vy||Ip(l),A=Math.sqrt(S*S+C*C),A=(A-s[b])/A*g*r[b],S*=A,C*=A,x.vx-=S*(D=u[b]),x.vy-=C*D,_.vx+=S*(D=1-D),_.vy+=C*D}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((_,x)=>[t(_,x,o),_])),E;for(g=0,a=new Array(y);g<v;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=Fee(b,E.source)),typeof E.target!="object"&&(E.target=Fee(b,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ia(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ia(+g),m(),d):i},d}const NZe=1664525,kZe=1013904223,Lee=4294967296;function RZe(){let e=1;return()=>(e=(NZe*e+kZe)%Lee)/Lee}function PZe(e){return e.x}function OZe(e){return e.y}var MZe=10,$Ze=Math.PI*(3-Math.sqrt(5));function FZe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=aU(f),l=iU("tick","end"),c=RZe();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=MZe*Math.sqrt(.5+m),b=m*$Ze;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,E,_,x,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],E=m-S.x,_=g-S.y,x=E*E+_*_,x<y&&(C=S,y=x);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function LZe(){var e,t,n,r,i=ia(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=dU(e,PZe,OZe).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,E;if(h.length){for(v=b=E=0;E<4;++E)(m=h[E])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,E=y*y+v*v;if(b*b/u<E)return E<a&&(y===0&&(y=Ip(n),E+=y*y),v===0&&(v=Ip(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)),t.vx+=y*h.value*r/E,t.vy+=v*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Ip(n),E+=y*y),v===0&&(v=Ip(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(b=s[h.data.index]*r/E,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ia(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function BZe(e){var t=ia(.1),n,r,i;typeof e!="function"&&(e=ia(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ia(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ia(+a),o(),s):e},s}function jZe(e){var t=ia(.1),n,r,i;typeof e!="function"&&(e=ia(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ia(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ia(+a),o(),s):e},s}var qt=1e-6,vN=1e-12,Cn=Math.PI,Si=Cn/2,bN=Cn/4,fa=Cn*2,Pi=180/Cn,xn=Cn/180,jn=Math.abs,A_=Math.atan,El=Math.atan2,Yt=Math.cos,JC=Math.ceil,A0e=Math.exp,E5=Math.hypot,_N=Math.log,CF=Math.pow,jt=Math.sin,cl=Math.sign||function(e){return e>0?1:e<0?-1:0},da=Math.sqrt,pU=Math.tan;function D0e(e){return e>1?0:e<-1?Cn:Math.acos(e)}function Za(e){return e>1?Si:e<-1?-Si:Math.asin(e)}function Xs(){}function EN(e,t){e&&jee.hasOwnProperty(e.type)&&jee[e.type](e,t)}var Bee={Feature:function(e,t){EN(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)EN(n[r].geometry,t)}},jee={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){w5(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)w5(n[r],t,0)},Polygon:function(e,t){zee(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)zee(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)EN(n[r],t)}};function w5(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function zee(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)w5(e[n],t,1);t.polygonEnd()}function kd(e,t){e&&Bee.hasOwnProperty(e.type)?Bee[e.type](e,t):EN(e,t)}var wN=new aa,xN=new aa,I0e,N0e,x5,S5,T5,kf={point:Xs,lineStart:Xs,lineEnd:Xs,polygonStart:function(){wN=new aa,kf.lineStart=zZe,kf.lineEnd=UZe},polygonEnd:function(){var e=+wN;xN.add(e<0?fa+e:e),this.lineStart=this.lineEnd=this.point=Xs},sphere:function(){xN.add(fa)}};function zZe(){kf.point=VZe}function UZe(){k0e(I0e,N0e)}function VZe(e,t){kf.point=k0e,I0e=e,N0e=t,e*=xn,t*=xn,x5=e,S5=Yt(t=t/2+bN),T5=jt(t)}function k0e(e,t){e*=xn,t*=xn,t=t/2+bN;var n=e-x5,r=n>=0?1:-1,i=r*n,s=Yt(t),o=jt(t),a=T5*o,u=S5*s+a*Yt(i),l=a*r*jt(i);wN.add(El(l,u)),x5=e,S5=s,T5=o}function HZe(e){return xN=new aa,kd(e,kf),xN*2}function SN(e){return[El(e[1],e[0]),Za(e[2])]}function B0(e){var t=e[0],n=e[1],r=Yt(n);return[r*Yt(t),r*jt(t),jt(n)]}function ZC(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pb(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function AF(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function eA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function TN(e){var t=da(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var oi,Ra,vi,gu,$g,R0e,P0e,Dv,hx,fp,wh,Dd={point:C5,lineStart:Uee,lineEnd:Vee,polygonStart:function(){Dd.point=M0e,Dd.lineStart=qZe,Dd.lineEnd=WZe,hx=new aa,kf.polygonStart()},polygonEnd:function(){kf.polygonEnd(),Dd.point=C5,Dd.lineStart=Uee,Dd.lineEnd=Vee,wN<0?(oi=-(vi=180),Ra=-(gu=90)):hx>qt?gu=90:hx<-qt&&(Ra=-90),wh[0]=oi,wh[1]=vi},sphere:function(){oi=-(vi=180),Ra=-(gu=90)}};function C5(e,t){fp.push(wh=[oi=e,vi=e]),t<Ra&&(Ra=t),t>gu&&(gu=t)}function O0e(e,t){var n=B0([e*xn,t*xn]);if(Dv){var r=pb(Dv,n),i=[r[1],-r[0],0],s=pb(i,r);TN(s),s=SN(s);var o=e-$g,a=o>0?1:-1,u=s[0]*Pi*a,l,c=jn(o)>180;c^(a*$g<u&&u<a*e)?(l=s[1]*Pi,l>gu&&(gu=l)):(u=(u+360)%360-180,c^(a*$g<u&&u<a*e)?(l=-s[1]*Pi,l<Ra&&(Ra=l)):(t<Ra&&(Ra=t),t>gu&&(gu=t))),c?e<$g?pu(oi,e)>pu(oi,vi)&&(vi=e):pu(e,vi)>pu(oi,vi)&&(oi=e):vi>=oi?(e<oi&&(oi=e),e>vi&&(vi=e)):e>$g?pu(oi,e)>pu(oi,vi)&&(vi=e):pu(e,vi)>pu(oi,vi)&&(oi=e)}else fp.push(wh=[oi=e,vi=e]);t<Ra&&(Ra=t),t>gu&&(gu=t),Dv=n,$g=e}function Uee(){Dd.point=O0e}function Vee(){wh[0]=oi,wh[1]=vi,Dd.point=C5,Dv=null}function M0e(e,t){if(Dv){var n=e-$g;hx.add(jn(n)>180?n+(n>0?360:-360):n)}else R0e=e,P0e=t;kf.point(e,t),O0e(e,t)}function qZe(){kf.lineStart()}function WZe(){M0e(R0e,P0e),kf.lineEnd(),jn(hx)>qt&&(oi=-(vi=180)),wh[0]=oi,wh[1]=vi,Dv=null}function pu(e,t){return(t-=e)<0?t+360:t}function GZe(e,t){return e[0]-t[0]}function Hee(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function YZe(e){var t,n,r,i,s,o,a;if(gu=vi=-(oi=Ra=1/0),fp=[],kd(e,Dd),n=fp.length){for(fp.sort(GZe),t=1,r=fp[0],s=[r];t<n;++t)i=fp[t],Hee(r,i[0])||Hee(r,i[1])?(pu(r[0],i[1])>pu(r[0],r[1])&&(r[1]=i[1]),pu(i[0],r[1])>pu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=pu(r[1],i[0]))>o&&(o=a,oi=i[0],vi=r[1])}return fp=wh=null,oi===1/0||Ra===1/0?[[NaN,NaN],[NaN,NaN]]:[[oi,Ra],[vi,gu]]}var yw,CN,AN,DN,IN,NN,kN,RN,A5,D5,I5,$0e,F0e,ea,ta,na,ac={sphere:Xs,point:mU,lineStart:qee,lineEnd:Wee,polygonStart:function(){ac.lineStart=QZe,ac.lineEnd=JZe},polygonEnd:function(){ac.lineStart=qee,ac.lineEnd=Wee}};function mU(e,t){e*=xn,t*=xn;var n=Yt(t);KT(n*Yt(e),n*jt(e),jt(t))}function KT(e,t,n){++yw,AN+=(e-AN)/yw,DN+=(t-DN)/yw,IN+=(n-IN)/yw}function qee(){ac.point=KZe}function KZe(e,t){e*=xn,t*=xn;var n=Yt(t);ea=n*Yt(e),ta=n*jt(e),na=jt(t),ac.point=XZe,KT(ea,ta,na)}function XZe(e,t){e*=xn,t*=xn;var n=Yt(t),r=n*Yt(e),i=n*jt(e),s=jt(t),o=El(da((o=ta*s-na*i)*o+(o=na*r-ea*s)*o+(o=ea*i-ta*r)*o),ea*r+ta*i+na*s);CN+=o,NN+=o*(ea+(ea=r)),kN+=o*(ta+(ta=i)),RN+=o*(na+(na=s)),KT(ea,ta,na)}function Wee(){ac.point=mU}function QZe(){ac.point=ZZe}function JZe(){L0e($0e,F0e),ac.point=mU}function ZZe(e,t){$0e=e,F0e=t,e*=xn,t*=xn,ac.point=L0e;var n=Yt(t);ea=n*Yt(e),ta=n*jt(e),na=jt(t),KT(ea,ta,na)}function L0e(e,t){e*=xn,t*=xn;var n=Yt(t),r=n*Yt(e),i=n*jt(e),s=jt(t),o=ta*s-na*i,a=na*r-ea*s,u=ea*i-ta*r,l=E5(o,a,u),c=Za(l),f=l&&-c/l;A5.add(f*o),D5.add(f*a),I5.add(f*u),CN+=c,NN+=c*(ea+(ea=r)),kN+=c*(ta+(ta=i)),RN+=c*(na+(na=s)),KT(ea,ta,na)}function eet(e){yw=CN=AN=DN=IN=NN=kN=RN=0,A5=new aa,D5=new aa,I5=new aa,kd(e,ac);var t=+A5,n=+D5,r=+I5,i=E5(t,n,r);return i<vN&&(t=NN,n=kN,r=RN,CN<qt&&(t=AN,n=DN,r=IN),i=E5(t,n,r),i<vN)?[NaN,NaN]:[El(n,t)*Pi,Za(r/i)*Pi]}function N5(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function k5(e,t){return jn(e)>Cn&&(e-=Math.round(e/fa)*fa),[e,t]}k5.invert=k5;function B0e(e,t,n){return(e%=fa)?t||n?N5(Yee(e),Kee(t,n)):Yee(e):t||n?Kee(t,n):k5}function Gee(e){return function(t,n){return t+=e,jn(t)>Cn&&(t-=Math.round(t/fa)*fa),[t,n]}}function Yee(e){var t=Gee(e);return t.invert=Gee(-e),t}function Kee(e,t){var n=Yt(e),r=jt(e),i=Yt(t),s=jt(t);function o(a,u){var l=Yt(u),c=Yt(a)*l,f=jt(a)*l,d=jt(u),h=d*n+c*r;return[El(f*i-h*s,c*n-d*r),Za(h*i+f*s)]}return o.invert=function(a,u){var l=Yt(u),c=Yt(a)*l,f=jt(a)*l,d=jt(u),h=d*i-f*s;return[El(f*i+d*s,c*n+h*r),Za(h*n-c*r)]},o}function tet(e){e=B0e(e[0]*xn,e[1]*xn,e.length>2?e[2]*xn:0);function t(n){return n=e(n[0]*xn,n[1]*xn),n[0]*=Pi,n[1]*=Pi,n}return t.invert=function(n){return n=e.invert(n[0]*xn,n[1]*xn),n[0]*=Pi,n[1]*=Pi,n},t}function net(e,t,n,r,i,s){if(n){var o=Yt(t),a=jt(t),u=r*n;i==null?(i=t+r*fa,s=t-u/2):(i=Xee(o,i),s=Xee(o,s),(r>0?i<s:i>s)&&(i+=r*fa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=SN([o,-a*Yt(c),-a*jt(c)]),e.point(l[0],l[1])}}function Xee(e,t){t=B0(t),t[0]-=e,TN(t);var n=D0e(-t[1]);return((-t[2]<0?-n:n)+fa-qt)%fa}function j0e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Xs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function TD(e,t){return jn(e[0]-t[0])<qt&&jn(e[1]-t[1])<qt}function tA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function z0e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(TD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*qt}s.push(v=new tA(g,p,null,!0)),o.push(v.o=new tA(g,null,v,!1)),s.push(v=new tA(y,p,null,!1)),o.push(v.o=new tA(y,null,v,!0))}}),!!s.length){for(o.sort(t),Qee(s),Qee(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Qee(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function DF(e){return jn(e[0])<=Cn?e[0]:cl(e[0])*((jn(e[0])+Cn)%fa-Cn)}function ret(e,t){var n=DF(t),r=t[1],i=jt(r),s=[jt(n),-Yt(n),0],o=0,a=0,u=new aa;i===1?r=Si+qt:i===-1&&(r=-Si-qt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=DF(h),m=h[1]/2+bN,g=jt(m),y=Yt(m),v=0;v<d;++v,p=E,g=x,y=S,h=b){var b=f[v],E=DF(b),_=b[1]/2+bN,x=jt(_),S=Yt(_),C=E-p,A=C>=0?1:-1,D=A*C,I=D>Cn,O=g*x;if(u.add(El(O*A*jt(D),y*S+O*Yt(D))),o+=I?C+A*fa:C,I^p>=n^E>=n){var R=pb(B0(h),B0(b));TN(R);var M=pb(s,R);TN(M);var F=(I^C>=0?-1:1)*Za(M[2]);(r>F||r===F&&(R[0]||R[1]))&&(a+=I^C>=0?1:-1)}}return(o<-qt||o<qt&&u<-vN)^a&1}function U0e(e,t,n,r){return function(i){var s=t(i),o=j0e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=ege(c);var E=ret(l,r);c.length?(u||(i.polygonStart(),u=!0),z0e(c,set,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,_){e(E,_)&&i.point(E,_)}function p(E,_){s.point(E,_)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(E,_){f.push([E,_]),a.point(E,_)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),_=o.result(),x,S=_.length,C,A,D;if(f.pop(),l.push(f),f=null,!!S){if(E&1){if(A=_[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),x=0;x<C;++x)i.point((D=A[x])[0],D[1]);i.lineEnd()}return}S>1&&E&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(iet))}}return d}}function iet(e){return e.length>1}function set(e,t){return((e=e.x)[0]<0?e[1]-Si-qt:Si-e[1])-((t=t.x)[0]<0?t[1]-Si-qt:Si-t[1])}const Jee=U0e(function(){return!0},oet,uet,[-Cn,-Si]);function oet(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Cn:-Cn,u=jn(s-t);jn(u-Cn)<qt?(e.point(t,n=(n+o)/2>0?Si:-Si),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Cn&&(jn(t-r)<qt&&(t-=r*qt),jn(s-a)<qt&&(s-=a*qt),n=aet(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aet(e,t,n,r){var i,s,o=jt(e-n);return jn(o)>qt?A_((jt(t)*(s=Yt(r))*jt(n)-jt(r)*(i=Yt(t))*jt(e))/(i*s*o)):(t+r)/2}function uet(e,t,n,r){var i;if(e==null)i=n*Si,r.point(-Cn,i),r.point(0,i),r.point(Cn,i),r.point(Cn,0),r.point(Cn,-i),r.point(0,-i),r.point(-Cn,-i),r.point(-Cn,0),r.point(-Cn,i);else if(jn(e[0]-t[0])>qt){var s=e[0]<t[0]?Cn:-Cn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function cet(e){var t=Yt(e),n=2*xn,r=t>0,i=jn(t)>qt;function s(c,f,d,h){net(h,e,n,d,c,f)}function o(c,f){return Yt(c)*Yt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,E=o(g,y),_=r?E?0:l(g,y):E?l(g+(g<0?Cn:-Cn),y):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(b=u(f,v),(!b||TD(f,b)||TD(v,b))&&(v[2]=1)),E!==h)m=0,E?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^E){var x;!(_&d)&&(x=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(x[0][0],x[0][1]),c.point(x[1][0],x[1][1]),c.lineEnd()):(c.point(x[1][0],x[1][1]),c.lineEnd(),c.lineStart(),c.point(x[0][0],x[0][1],3)))}E&&(!f||!TD(f,v))&&c.point(v[0],v[1]),f=v,h=E,d=_},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=B0(c),p=B0(f),m=[1,0,0],g=pb(h,p),y=ZC(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var E=t*y/b,_=-t*v/b,x=pb(m,g),S=eA(m,E),C=eA(g,_);AF(S,C);var A=x,D=ZC(S,A),I=ZC(A,A),O=D*D-I*(ZC(S,S)-1);if(!(O<0)){var R=da(O),M=eA(A,(-D-R)/I);if(AF(M,S),M=SN(M),!d)return M;var F=c[0],P=f[0],j=c[1],z=f[1],V;P<F&&(V=F,F=P,P=V);var $=P-F,U=jn($-Cn)<qt,W=U||$<qt;if(!U&&z<j&&(V=j,j=z,z=V),W?U?j+z>0^M[1]<(jn(M[0]-F)<qt?j:z):j<=M[1]&&M[1]<=z:$>Cn^(F<=M[0]&&M[0]<=P)){var B=eA(A,(-D+R)/I);return AF(B,S),[M,SN(B)]}}}function l(c,f){var d=r?e:Cn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return U0e(o,a,s,r?[0,-e]:[-Cn,e-Cn])}function fet(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var vw=1e9,nA=-vw;function V0e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return jn(l[0]-e)<qt?c>0?0:3:jn(l[0]-n)<qt?c>0?2:1:jn(l[1]-t)<qt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=j0e(),d,h,p,m,g,y,v,b,E,_,x,S={point:C,lineStart:O,lineEnd:R,polygonStart:D,polygonEnd:I};function C(F,P){i(F,P)&&c.point(F,P)}function A(){for(var F=0,P=0,j=h.length;P<j;++P)for(var z=h[P],V=1,$=z.length,U=z[0],W,B,q=U[0],Y=U[1];V<$;++V)W=q,B=Y,U=z[V],q=U[0],Y=U[1],B<=r?Y>r&&(q-W)*(r-B)>(Y-B)*(e-W)&&++F:Y<=r&&(q-W)*(r-B)<(Y-B)*(e-W)&&--F;return F}function D(){c=f,d=[],h=[],x=!0}function I(){var F=A(),P=x&&F,j=(d=ege(d)).length;(P||j)&&(l.polygonStart(),P&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),j&&z0e(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=M,h&&h.push(p=[]),_=!0,E=!1,v=b=NaN}function R(){d&&(M(m,g),y&&E&&f.rejoin(),d.push(f.result())),S.point=C,E&&c.lineEnd()}function M(F,P){var j=i(F,P);if(h&&p.push([F,P]),_)m=F,g=P,y=j,_=!1,j&&(c.lineStart(),c.point(F,P));else if(j&&E)c.point(F,P);else{var z=[v=Math.max(nA,Math.min(vw,v)),b=Math.max(nA,Math.min(vw,b))],V=[F=Math.max(nA,Math.min(vw,F)),P=Math.max(nA,Math.min(vw,P))];fet(z,V,e,t,n,r)?(E||(c.lineStart(),c.point(z[0],z[1])),c.point(V[0],V[1]),j||c.lineEnd(),x=!1):j&&(c.lineStart(),c.point(F,P),x=!1)}v=F,b=P,E=j}return S}}function Zee(e,t,n){var r=wu(e,t-qt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function ete(e,t,n){var r=wu(e,t-qt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function det(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return wu(JC(r/c)*c,n,c).map(p).concat(wu(JC(a/f)*f,o,f).map(m)).concat(wu(JC(t/u)*u,e,u).filter(function(b){return jn(b%c)>qt}).map(d)).concat(wu(JC(s/l)*l,i,l).filter(function(b){return jn(b%f)>qt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Zee(s,i,90),h=ete(t,e,g),p=Zee(a,o,90),m=ete(r,n,g),y):g},y.extentMajor([[-180,-90+qt],[180,90-qt]]).extentMinor([[-180,-80-qt],[180,80+qt]])}const DS=e=>e;var IF=new aa,R5=new aa,H0e,q0e,P5,O5,Rd={point:Xs,lineStart:Xs,lineEnd:Xs,polygonStart:function(){Rd.lineStart=het,Rd.lineEnd=met},polygonEnd:function(){Rd.lineStart=Rd.lineEnd=Rd.point=Xs,IF.add(jn(R5)),R5=new aa},result:function(){var e=IF/2;return IF=new aa,e}};function het(){Rd.point=pet}function pet(e,t){Rd.point=W0e,H0e=P5=e,q0e=O5=t}function W0e(e,t){R5.add(O5*e-P5*t),P5=e,O5=t}function met(){W0e(H0e,q0e)}var mb=1/0,PN=mb,IS=-mb,ON=IS,MN={point:get,lineStart:Xs,lineEnd:Xs,polygonStart:Xs,polygonEnd:Xs,result:function(){var e=[[mb,PN],[IS,ON]];return IS=ON=-(PN=mb=1/0),e}};function get(e,t){e<mb&&(mb=e),e>IS&&(IS=e),t<PN&&(PN=t),t>ON&&(ON=t)}var M5=0,$5=0,bw=0,$N=0,FN=0,rv=0,F5=0,L5=0,_w=0,G0e,Y0e,af,uf,ol={point:j0,lineStart:tte,lineEnd:nte,polygonStart:function(){ol.lineStart=bet,ol.lineEnd=_et},polygonEnd:function(){ol.point=j0,ol.lineStart=tte,ol.lineEnd=nte},result:function(){var e=_w?[F5/_w,L5/_w]:rv?[$N/rv,FN/rv]:bw?[M5/bw,$5/bw]:[NaN,NaN];return M5=$5=bw=$N=FN=rv=F5=L5=_w=0,e}};function j0(e,t){M5+=e,$5+=t,++bw}function tte(){ol.point=yet}function yet(e,t){ol.point=vet,j0(af=e,uf=t)}function vet(e,t){var n=e-af,r=t-uf,i=da(n*n+r*r);$N+=i*(af+e)/2,FN+=i*(uf+t)/2,rv+=i,j0(af=e,uf=t)}function nte(){ol.point=j0}function bet(){ol.point=Eet}function _et(){K0e(G0e,Y0e)}function Eet(e,t){ol.point=K0e,j0(G0e=af=e,Y0e=uf=t)}function K0e(e,t){var n=e-af,r=t-uf,i=da(n*n+r*r);$N+=i*(af+e)/2,FN+=i*(uf+t)/2,rv+=i,i=uf*e-af*t,F5+=i*(af+e),L5+=i*(uf+t),_w+=i*3,j0(af=e,uf=t)}function X0e(e){this._context=e}X0e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,fa);break}}},result:Xs};var B5=new aa,NF,Q0e,J0e,Ew,ww,NS={point:Xs,lineStart:function(){NS.point=wet},lineEnd:function(){NF&&Z0e(Q0e,J0e),NS.point=Xs},polygonStart:function(){NF=!0},polygonEnd:function(){NF=null},result:function(){var e=+B5;return B5=new aa,e}};function wet(e,t){NS.point=Z0e,Q0e=Ew=e,J0e=ww=t}function Z0e(e,t){Ew-=e,ww-=t,B5.add(da(Ew*Ew+ww*ww)),Ew=e,ww=t}let rte,LN,ite,ste;class ote{constructor(t){this._append=t==null?eye:xet(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==ite||this._append!==LN){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,ite=r,LN=this._append,ste=this._,this._=i}this._+=ste;break}}}result(){const t=this._;return this._="",t.length?t:null}}function eye(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function xet(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return eye;if(t!==rte){const n=10**t;rte=t,LN=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return LN}function tye(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),kd(a,i(s))),s.result()}return o.area=function(a){return kd(a,i(Rd)),Rd.result()},o.measure=function(a){return kd(a,i(NS)),NS.result()},o.bounds=function(a){return kd(a,i(MN)),MN.result()},o.centroid=function(a){return kd(a,i(ol)),ol.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,DS):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new ote(n)):new X0e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new ote(n)),o},o.projection(e).digits(n).context(t)}function JP(e){return function(t){var n=new j5;for(var r in e)n[r]=e[r];return n.stream=t,n}}function j5(){}j5.prototype={constructor:j5,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function gU(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),kd(n,e.stream(MN)),t(MN.result()),r!=null&&e.clipExtent(r),e}function ZP(e,t,n){return gU(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function yU(e,t,n){return ZP(e,[[0,0],t],n)}function vU(e,t,n){return gU(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function bU(e,t,n){return gU(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var ate=16,Tet=Yt(30*xn);function ute(e,t){return+t?Aet(e,t):Cet(e)}function Cet(e){return JP({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Aet(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var E=o+d,_=a+h,x=u+p,S=da(E*E+_*_+x*x),C=Za(x/=S),A=jn(jn(x)-1)<qt||jn(s-f)<qt?(s+f)/2:El(_,E),D=e(A,C),I=D[0],O=D[1],R=I-r,M=O-i,F=v*R-y*M;(F*F/b>t||jn((y*R+v*M)/b-.5)>.3||o*d+a*h+u*p<Tet)&&(n(r,i,s,o,a,u,I,O,A,E/=S,_/=S,x,m,g),g.point(I,O),n(I,O,A,E,_,x,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,A){var D=B0([C,A]),I=e(C,A);n(f,d,c,h,p,m,f=I[0],d=I[1],c=C,h=D[0],p=D[1],m=D[2],ate,r),r.point(f,d)}function E(){g.point=y,r.lineEnd()}function _(){v(),g.point=x,g.lineEnd=S}function x(C,A){b(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,ate,r),g.lineEnd=E,E()}return g}}var Det=JP({point:function(e,t){this.stream.point(e*xn,t*xn)}});function Iet(e){return JP({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Net(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function lte(e,t,n,r,i,s){if(!s)return Net(e,t,n,r,i);var o=Yt(s),a=jt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Qf(e){return nye(function(){return e})()}function nye(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Jee,g=null,y,v,b,E=DS,_=.5,x,S,C,A,D;function I(F){return C(F[0]*xn,F[1]*xn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*Pi,F[1]*Pi]}I.stream=function(F){return A&&D===F?A:A=Det(Iet(c)(m(x(E(D=F)))))},I.preclip=function(F){return arguments.length?(m=F,p=void 0,M()):m},I.postclip=function(F){return arguments.length?(E=F,g=y=v=b=null,M()):E},I.clipAngle=function(F){return arguments.length?(m=+F?cet(p=F*xn):(p=null,Jee),M()):p*Pi},I.clipExtent=function(F){return arguments.length?(E=F==null?(g=y=v=b=null,DS):V0e(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),M()):g==null?null:[[g,y],[v,b]]},I.scale=function(F){return arguments.length?(n=+F,R()):n},I.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],R()):[r,i]},I.center=function(F){return arguments.length?(s=F[0]%360*xn,o=F[1]%360*xn,R()):[s*Pi,o*Pi]},I.rotate=function(F){return arguments.length?(a=F[0]%360*xn,u=F[1]%360*xn,l=F.length>2?F[2]%360*xn:0,R()):[a*Pi,u*Pi,l*Pi]},I.angle=function(F){return arguments.length?(f=F%360*xn,R()):f*Pi},I.reflectX=function(F){return arguments.length?(d=F?-1:1,R()):d<0},I.reflectY=function(F){return arguments.length?(h=F?-1:1,R()):h<0},I.precision=function(F){return arguments.length?(x=ute(S,_=F*F),M()):da(_)},I.fitExtent=function(F,P){return ZP(I,F,P)},I.fitSize=function(F,P){return yU(I,F,P)},I.fitWidth=function(F,P){return vU(I,F,P)},I.fitHeight=function(F,P){return bU(I,F,P)};function R(){var F=lte(n,0,0,d,h,f).apply(null,t(s,o)),P=lte(n,r-F[0],i-F[1],d,h,f);return c=B0e(a,u,l),S=N5(t,P),C=N5(c,S),x=ute(S,_),M()}function M(){return A=D=null,I}return function(){return t=e.apply(this,arguments),I.invert=t.invert&&O,R()}}function _U(e){var t=0,n=Cn/3,r=nye(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*xn,n=s[1]*xn):[t*Pi,n*Pi]},i}function ket(e){var t=Yt(e);function n(r,i){return[r*t,jt(i)/t]}return n.invert=function(r,i){return[r/t,Za(i*t)]},n}function Ret(e,t){var n=jt(e),r=(n+jt(t))/2;if(jn(r)<qt)return ket(e);var i=1+n*(2*r-n),s=da(i)/r;function o(a,u){var l=da(i-2*r*jt(u))/r;return[l*jt(a*=r),s-l*Yt(a)]}return o.invert=function(a,u){var l=s-u,c=El(a,jn(l))*cl(l);return l*r<0&&(c-=Cn*cl(a)*cl(l)),[c/r,Za((i-(a*a+l*l)*r*r)/(2*r))]},o}function BN(){return _U(Ret).scale(155.424).center([0,33.6442])}function rye(){return BN().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Pet(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Oet(){var e,t,n=rye(),r,i=BN().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=BN().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Pet([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+qt,m+.12*h+qt],[p-.214*h-qt,m+.234*h-qt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+qt,m+.166*h+qt],[p-.115*h-qt,m+.234*h-qt]]).stream(l),f()},c.fitExtent=function(d,h){return ZP(c,d,h)},c.fitSize=function(d,h){return yU(c,d,h)},c.fitWidth=function(d,h){return vU(c,d,h)},c.fitHeight=function(d,h){return bU(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function iye(e){return function(t,n){var r=Yt(t),i=Yt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*jt(t),s*jt(n)]}}function XT(e){return function(t,n){var r=da(t*t+n*n),i=e(r),s=jt(i),o=Yt(i);return[El(t*s,r*o),Za(r&&n*s/r)]}}var sye=iye(function(e){return da(2/(1+e))});sye.invert=XT(function(e){return 2*Za(e/2)});function Met(){return Qf(sye).scale(124.75).clipAngle(180-.001)}var oye=iye(function(e){return(e=D0e(e))&&e/jt(e)});oye.invert=XT(function(e){return e});function $et(){return Qf(oye).scale(79.4188).clipAngle(180-.001)}function e3(e,t){return[e,_N(pU((Si+t)/2))]}e3.invert=function(e,t){return[e,2*A_(A0e(t))-Si]};function Fet(){return aye(e3).scale(961/fa)}function aye(e){var t=Qf(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Cn*r(),d=t(tet(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===e3?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function rA(e){return pU((Si+e)/2)}function Let(e,t){var n=Yt(e),r=e===t?jt(e):_N(n/Yt(t))/_N(rA(t)/rA(e)),i=n*CF(rA(e),r)/r;if(!r)return e3;function s(o,a){i>0?a<-Si+qt&&(a=-Si+qt):a>Si-qt&&(a=Si-qt);var u=i/CF(rA(a),r);return[u*jt(r*o),i-u*Yt(r*o)]}return s.invert=function(o,a){var u=i-a,l=cl(r)*da(o*o+u*u),c=El(o,jn(u))*cl(u);return u*r<0&&(c-=Cn*cl(o)*cl(u)),[c/r,2*A_(CF(i/l,1/r))-Si]},s}function Bet(){return _U(Let).scale(109.5).parallels([30,30])}function jN(e,t){return[e,t]}jN.invert=jN;function jet(){return Qf(jN).scale(152.63)}function zet(e,t){var n=Yt(e),r=e===t?jt(e):(n-Yt(t))/(t-e),i=n/r+e;if(jn(r)<qt)return jN;function s(o,a){var u=i-a,l=r*o;return[u*jt(l),i-u*Yt(l)]}return s.invert=function(o,a){var u=i-a,l=El(o,jn(u))*cl(u);return u*r<0&&(l-=Cn*cl(o)*cl(u)),[l/r,i-cl(r)*da(o*o+u*u)]},s}function Uet(){return _U(zet).scale(131.154).center([0,13.9389])}var px=1.340264,mx=-.081106,gx=893e-6,yx=.003796,zN=da(3)/2,Vet=12;function uye(e,t){var n=Za(zN*jt(t)),r=n*n,i=r*r*r;return[e*Yt(n)/(zN*(px+3*mx*r+i*(7*gx+9*yx*r))),n*(px+mx*r+i*(gx+yx*r))]}uye.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Vet&&(a=n*(px+mx*r+i*(gx+yx*r))-t,u=px+3*mx*r+i*(7*gx+9*yx*r),n-=o=a/u,r=n*n,i=r*r*r,!(jn(o)<vN));++s);return[zN*e*(px+3*mx*r+i*(7*gx+9*yx*r))/Yt(n),Za(jt(n)/zN)]};function Het(){return Qf(uye).scale(177.158)}function lye(e,t){var n=Yt(t),r=Yt(e)*n;return[n*jt(e)/r,jt(t)/r]}lye.invert=XT(A_);function qet(){return Qf(lye).scale(144.049).clipAngle(60)}function Wet(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=JP({point:function(E,_){var x=b([E,_]);this.stream.point(x[0],x[1])}}),m=DS,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(E){var _=E[0]*d,x=E[1]*h;if(s){var S=x*o-_*a;_=_*o+x*a,x=S}return[_+t,x+n]}return b.invert=function(E){var _=E[0]-t,x=E[1]-n;if(s){var S=x*o+_*a;_=_*o-x*a,x=S}return[_/d,x/h]},b.stream=function(E){return g&&y===E?g:g=p(m(y=E))},b.postclip=function(E){return arguments.length?(m=E,u=l=c=f=null,v()):m},b.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=f=null,DS):V0e(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(E){return arguments.length?(e=+E,v()):e},b.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],v()):[t,n]},b.angle=function(E){return arguments.length?(s=E%360*xn,a=jt(s),o=Yt(s),v()):s*Pi},b.reflectX=function(E){return arguments.length?(r=E?-1:1,v()):r<0},b.reflectY=function(E){return arguments.length?(i=E?-1:1,v()):i<0},b.fitExtent=function(E,_){return ZP(b,E,_)},b.fitSize=function(E,_){return yU(b,E,_)},b.fitWidth=function(E,_){return vU(b,E,_)},b.fitHeight=function(E,_){return bU(b,E,_)},b}function cye(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}cye.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(jn(i)>qt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Get(){return Qf(cye).scale(175.295)}function fye(e,t){return[Yt(t)*jt(e),jt(t)]}fye.invert=XT(Za);function Yet(){return Qf(fye).scale(249.5).clipAngle(90+qt)}function dye(e,t){var n=Yt(t),r=1+Yt(e)*n;return[n*jt(e)/r,jt(t)/r]}dye.invert=XT(function(e){return 2*A_(e)});function Ket(){return Qf(dye).scale(250).clipAngle(142)}function hye(e,t){return[_N(pU((Si+t)/2)),-e]}hye.invert=function(e,t){return[-t,2*A_(A0e(e))-Si]};function Xet(){var e=aye(hye),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Qet(e,t){return e.parent===t.parent?1:2}function Jet(e){return e.reduce(Zet,0)/e.length}function Zet(e,t){return e+t.x}function ett(e){return 1+e.reduce(ttt,0)}function ttt(e,t){return Math.max(e,t.y)}function ntt(e){for(var t;t=e.children;)e=t[0];return e}function rtt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function itt(){var e=Qet,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Jet(h),d.y=ett(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=ntt(s),l=rtt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function stt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function ott(){return this.eachAfter(stt)}function att(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function utt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function ltt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function ctt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function ftt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function dtt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function htt(e){for(var t=this,n=ptt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function ptt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function mtt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function gtt(){return Array.from(this)}function ytt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function vtt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*btt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function EU(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=wtt)):t===void 0&&(t=Ett);for(var n=new gb(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new gb(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(pye)}function _tt(){return EU(this).eachBefore(xtt)}function Ett(e){return e.children}function wtt(e){return Array.isArray(e)?e[1]:null}function xtt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function pye(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function gb(e){this.data=e,this.depth=this.height=0,this.parent=null}gb.prototype=EU.prototype={constructor:gb,count:ott,each:att,eachAfter:ltt,eachBefore:utt,find:ctt,sum:ftt,sort:dtt,path:htt,ancestors:mtt,descendants:gtt,leaves:ytt,links:vtt,copy:_tt,[Symbol.iterator]:btt};function CD(e){return e==null?null:mye(e)}function mye(e){if(typeof e!="function")throw new Error;return e}function Vg(){return 0}function O1(e){return function(){return e}}const Stt=1664525,Ttt=1013904223,cte=4294967296;function Ctt(){let e=1;return()=>(e=(Stt*e+Ttt)%cte)/cte}function Att(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Dtt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Itt(e,t){for(var n=0,r=(e=Dtt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&gye(o,s)?++n:(o=ktt(i=Ntt(i,s)),n=0);return o}function Ntt(e,t){var n,r;if(kF(t,e))return[t];for(n=0;n<e.length;++n)if(iA(t,e[n])&&kF(xw(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(iA(xw(e[n],e[r]),t)&&iA(xw(e[n],t),e[r])&&iA(xw(e[r],t),e[n])&&kF(yye(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function iA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function gye(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function kF(e,t){for(var n=0;n<t.length;++n)if(!gye(e,t[n]))return!1;return!0}function ktt(e){switch(e.length){case 1:return Rtt(e[0]);case 2:return xw(e[0],e[1]);case 3:return yye(e[0],e[1],e[2])}}function Rtt(e){return{x:e.x,y:e.y,r:e.r}}function xw(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function yye(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,E=v-l*l-c*c+f*f,_=h*p-d*m,x=(p*E-m*b)/(_*2)-r,S=(m*g-p*y)/_,C=(h*b-d*E)/(_*2)-i,A=(d*y-h*g)/_,D=S*S+A*A-1,I=2*(s+x*S+C*A),O=x*x+C*C-s*s,R=-(Math.abs(D)>1e-6?(I+Math.sqrt(I*I-4*D*O))/(2*D):O/I);return{x:r+x+S*R,y:i+C+A*R,r:R}}function fte(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function dte(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function hte(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function sA(e){this._=e,this.next=null,this.previous=null}function Ptt(e,t){if(!(s=(e=Att(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;fte(r,n,i=e[2]),n=new sA(n),r=new sA(r),i=new sA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){fte(n._,r._,i=e[u]),i=new sA(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(dte(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(dte(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=hte(n);(i=i.next)!==r;)(a=hte(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Itt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Ott(e){return Math.sqrt(e.value)}function Mtt(){var e=null,t=1,n=1,r=Vg;function i(s){const o=Ctt();return s.x=t/2,s.y=n/2,e?s.eachBefore(pte(e)).eachAfter(RF(r,.5,o)).eachBefore(mte(1)):s.eachBefore(pte(Ott)).eachAfter(RF(Vg,1,o)).eachAfter(RF(r,s.r/Math.min(t,n),o)).eachBefore(mte(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=CD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:O1(+s),i):r},i}function pte(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function RF(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Ptt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function mte(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function vye(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function QT(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function $tt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(vye),o}function s(o,a){return function(u){u.children&&QT(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Ftt={depth:-1},gte={},PF={};function Ltt(e){return e.id}function Btt(e){return e.parentId}function yte(){var e=Ltt,t=Btt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((E,_)=>jtt(n(E,_,i))),v=y.map(vte),b=new Set(y).add("");for(const E of v)b.has(E)||(b.add(E),y.push(E),v.push(vte(E)),s.push(PF));o=(E,_)=>y[_],a=(E,_)=>v[_]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new gb(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?gte:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===gte)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===PF&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===PF);--y)h.data=null}if(f.parent=Ftt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(pye),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=CD(i),r):e},r.parentId=function(i){return arguments.length?(t=CD(i),r):t},r.path=function(i){return arguments.length?(n=CD(i),r):n},r}function jtt(e){e=`${e}`;let t=e.length;return z5(e,t-1)&&!z5(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function vte(e){let t=e.length;if(t<2)return"";for(;--t>1&&!z5(e,t););return e.slice(0,t)}function z5(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function ztt(e,t){return e.parent===t.parent?1:2}function OF(e){var t=e.children;return t?t[0]:e.t}function MF(e){var t=e.children;return t?t[t.length-1]:e.t}function Utt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Vtt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Htt(e,t,n){return e.a.parent===t.parent?e.a:n}function AD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}AD.prototype=Object.create(gb.prototype);function qtt(e){for(var t=new AD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new AD(s[o],o)),i.parent=n;return(t.parent=new AD(null,0)).children=[t],t}function Wtt(){var e=ztt,t=1,n=1,r=null;function i(l){var c=qtt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Vtt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,E;p=MF(p),d=OF(d),p&&d;)m=OF(m),h=MF(h),h.a=l,E=p.z+v-d.z-g+e(p._,d._),E>0&&(Utt(Htt(p,l,f),l,E),g+=E,y+=E),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!MF(h)&&(h.t=p,h.m+=v-y),d&&!OF(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function t3(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var bye=(1+Math.sqrt(5))/2;function _ye(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,E,_,x;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,_=Math.max(p/h,h/p)/(m*e),x=g*g*_,E=Math.max(v/x,x/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),x=g*g*_,b=Math.max(v/x,x/y),b>E){g-=l;break}E=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?QT(u,n,r,i,m?r+=p*g/m:s):t3(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const Eye=function e(t){function n(r,i,s,o,a){_ye(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(bye);function Gtt(){var e=Eye,t=!1,n=1,r=1,i=[0],s=Vg,o=Vg,a=Vg,u=Vg,l=Vg;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(vye),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=mye(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:O1(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:O1(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:O1(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:O1(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:O1(+d),c):l},c}function Ytt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],E=h/2+b,_=f+1,x=d-1;_<x;){var S=_+x>>>1;l[S]<E?_=S+1:x=S}E-l[_-1]<l[_]-E&&f+1<_&&--_;var C=l[_]-b,A=h-C;if(g-p>y-m){var D=h?(p*A+g*C)/h:g;c(f,_,C,p,m,D,y),c(_,d,A,D,m,g,y)}else{var I=h?(m*A+y*C)/h:y;c(f,_,C,p,m,g,I),c(_,d,A,p,I,g,y)}}}function Ktt(e,t,n,r,i){(e.depth&1?t3:QT)(e,t,n,r,i)}const Xtt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?QT(l,i,s,o,m?s+=(a-s)*l.value/m:a):t3(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=_ye(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(bye);function Oc(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Qtt=Oc("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Jtt=Oc("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ztt=Oc("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ent=Oc("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),tnt=Oc("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),nnt=Oc("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),rnt=Oc("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),int=Oc("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),snt=Oc("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ont=Oc("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),ant=e=>vge(e[e.length-1]);var unt=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Oc);const lnt=ant(unt);function ar(e){return function(){return e}}const bte=Math.abs,vo=Math.atan2,_g=Math.cos,cnt=Math.max,$F=Math.min,Wc=Math.sin,s0=Math.sqrt,Eo=1e-12,yb=Math.PI,UN=yb/2,wye=2*yb;function fnt(e){return e>1?0:e<-1?yb:Math.acos(e)}function _te(e){return e>=1?UN:e<=-1?-UN:Math.asin(e)}function n3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new cU(t)}function dnt(e){return e.innerRadius}function hnt(e){return e.outerRadius}function pnt(e){return e.startAngle}function mnt(e){return e.endAngle}function gnt(e){return e&&e.padAngle}function ynt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Eo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function oA(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/s0(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,E=v*v+b*b,_=i-s,x=d*m-p*h,S=(b<0?-1:1)*s0(cnt(0,_*_*E-x*x)),C=(x*b-v*S)/E,A=(-x*v-b*S)/E,D=(x*b+v*S)/E,I=(-x*v+b*S)/E,O=C-g,R=A-y,M=D-g,F=I-y;return O*O+R*R>M*M+F*F&&(C=D,A=I),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/_-1),y11:A*(i/_-1)}}function vnt(){var e=dnt,t=hnt,n=ar(0),r=null,i=pnt,s=mnt,o=gnt,a=null,u=n3(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-UN,m=s.apply(this,arguments)-UN,g=bte(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Eo))a.moveTo(0,0);else if(g>wye-Eo)a.moveTo(h*_g(p),h*Wc(p)),a.arc(0,0,h,p,m,!y),d>Eo&&(a.moveTo(d*_g(m),d*Wc(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,E=p,_=m,x=g,S=g,C=o.apply(this,arguments)/2,A=C>Eo&&(r?+r.apply(this,arguments):s0(d*d+h*h)),D=$F(bte(h-d)/2,+n.apply(this,arguments)),I=D,O=D,R,M;if(A>Eo){var F=_te(A/d*Wc(C)),P=_te(A/h*Wc(C));(x-=F*2)>Eo?(F*=y?1:-1,E+=F,_-=F):(x=0,E=_=(p+m)/2),(S-=P*2)>Eo?(P*=y?1:-1,v+=P,b-=P):(S=0,v=b=(p+m)/2)}var j=h*_g(v),z=h*Wc(v),V=d*_g(_),$=d*Wc(_);if(D>Eo){var U=h*_g(b),W=h*Wc(b),B=d*_g(E),q=d*Wc(E),Y;if(g<yb)if(Y=ynt(j,z,B,q,U,W,V,$)){var re=j-Y[0],pe=z-Y[1],_e=U-Y[0],de=W-Y[1],ye=1/Wc(fnt((re*_e+pe*de)/(s0(re*re+pe*pe)*s0(_e*_e+de*de)))/2),Ce=s0(Y[0]*Y[0]+Y[1]*Y[1]);I=$F(D,(d-Ce)/(ye-1)),O=$F(D,(h-Ce)/(ye+1))}else I=O=0}S>Eo?O>Eo?(R=oA(B,q,j,z,h,O,y),M=oA(U,W,V,$,h,O,y),a.moveTo(R.cx+R.x01,R.cy+R.y01),O<D?a.arc(R.cx,R.cy,O,vo(R.y01,R.x01),vo(M.y01,M.x01),!y):(a.arc(R.cx,R.cy,O,vo(R.y01,R.x01),vo(R.y11,R.x11),!y),a.arc(0,0,h,vo(R.cy+R.y11,R.cx+R.x11),vo(M.cy+M.y11,M.cx+M.x11),!y),a.arc(M.cx,M.cy,O,vo(M.y11,M.x11),vo(M.y01,M.x01),!y))):(a.moveTo(j,z),a.arc(0,0,h,v,b,!y)):a.moveTo(j,z),!(d>Eo)||!(x>Eo)?a.lineTo(V,$):I>Eo?(R=oA(V,$,U,W,d,-I,y),M=oA(j,z,B,q,d,-I,y),a.lineTo(R.cx+R.x01,R.cy+R.y01),I<D?a.arc(R.cx,R.cy,I,vo(R.y01,R.x01),vo(M.y01,M.x01),!y):(a.arc(R.cx,R.cy,I,vo(R.y01,R.x01),vo(R.y11,R.x11),!y),a.arc(0,0,d,vo(R.cy+R.y11,R.cx+R.x11),vo(M.cy+M.y11,M.cx+M.x11),y),a.arc(M.cx,M.cy,I,vo(M.y11,M.x11),vo(M.y01,M.x01),!y))):a.arc(0,0,d,_,E,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-yb/2;return[_g(f)*c,Wc(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:ar(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:ar(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:ar(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ar(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ar(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ar(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:ar(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function xye(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sye(e){this._context=e}Sye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wU(e){return new Sye(e)}function Tye(e){return e[0]}function Cye(e){return e[1]}function xU(e,t){var n=ar(!0),r=null,i=wU,s=null,o=n3(a);e=typeof e=="function"?e:e===void 0?Tye:ar(e),t=typeof t=="function"?t:t===void 0?Cye:ar(t);function a(u){var l,c=(u=xye(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:ar(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:ar(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ar(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function Aye(e,t,n){var r=null,i=ar(!0),s=null,o=wU,a=null,u=n3(l);e=typeof e=="function"?e:e===void 0?Tye:ar(+e),t=typeof t=="function"?t:ar(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Cye:ar(+n);function l(f){var d,h,p,m=(f=xye(f)).length,g,y=!1,v,b=new Array(m),E=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],E[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):E[d]))}if(v)return a=null,v+""||null}function c(){return xU().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:ar(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ar(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ar(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:ar(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ar(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ar(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ar(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const bnt={draw(e,t){const n=s0(t/yb);e.moveTo(n,0),e.arc(0,0,n,0,wye)}};function _nt(e,t){let n=null,r=n3(i);e=typeof e=="function"?e:ar(e||bnt),t=typeof t=="function"?t:ar(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ar(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ar(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function _m(){}function VN(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function r3(e){this._context=e}r3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ent(e){return new r3(e)}function Dye(e){this._context=e}Dye.prototype={areaStart:_m,areaEnd:_m,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:VN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wnt(e){return new Dye(e)}function Iye(e){this._context=e}Iye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:VN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xnt(e){return new Iye(e)}function Nye(e,t){this._basis=new r3(e),this._beta=t}Nye.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Snt=function e(t){function n(r){return t===1?new r3(r):new Nye(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function HN(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function SU(e,t){this._context=e,this._k=(1-t)/6}SU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:HN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:HN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Tnt=function e(t){function n(r){return new SU(r,t)}return n.tension=function(r){return e(+r)},n}(0);function TU(e,t){this._context=e,this._k=(1-t)/6}TU.prototype={areaStart:_m,areaEnd:_m,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:HN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Cnt=function e(t){function n(r){return new TU(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CU(e,t){this._context=e,this._k=(1-t)/6}CU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:HN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ant=function e(t){function n(r){return new CU(r,t)}return n.tension=function(r){return e(+r)},n}(0);function AU(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Eo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Eo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function kye(e,t){this._context=e,this._alpha=t}kye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:AU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dnt=function e(t){function n(r){return t?new kye(r,t):new SU(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Rye(e,t){this._context=e,this._alpha=t}Rye.prototype={areaStart:_m,areaEnd:_m,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:AU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Int=function e(t){function n(r){return t?new Rye(r,t):new TU(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Pye(e,t){this._context=e,this._alpha=t}Pye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:AU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Nnt=function e(t){function n(r){return t?new Pye(r,t):new CU(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Oye(e){this._context=e}Oye.prototype={areaStart:_m,areaEnd:_m,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function knt(e){return new Oye(e)}function Ete(e){return e<0?-1:1}function wte(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Ete(s)+Ete(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function xte(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function FF(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function qN(e){this._context=e}qN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FF(this,this._t0,xte(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,FF(this,xte(this,n=wte(this,e,t)),n);break;default:FF(this,this._t0,n=wte(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Mye(e){this._context=new $ye(e)}(Mye.prototype=Object.create(qN.prototype)).point=function(e,t){qN.prototype.point.call(this,t,e)};function $ye(e){this._context=e}$ye.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Rnt(e){return new qN(e)}function Pnt(e){return new Mye(e)}function Fye(e){this._context=e}Fye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ste(e),i=Ste(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ste(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Ont(e){return new Fye(e)}function i3(e,t){this._context=e,this._t=t}i3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Mnt(e){return new i3(e,.5)}function $nt(e){return new i3(e,0)}function Fnt(e){return new i3(e,1)}function Sw(e,t,n){this.k=e,this.x=t,this.y=n}Sw.prototype={constructor:Sw,scale:function(e){return e===1?this:new Sw(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Sw(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Sw.prototype;var M1=Math.PI/3,Lnt=[0,M1,2*M1,3*M1,4*M1,5*M1];function Bnt(e){return e[0]}function jnt(e){return e[1]}function znt(){var e=0,t=0,n=1,r=1,i=Bnt,s=jnt,o,a,u;function l(f){var d={},h=[],p,m=f.length;for(p=0;p<m;++p)if(!(isNaN(y=+i.call(null,g=f[p],p,f))||isNaN(v=+s.call(null,g,p,f)))){var g,y,v,b=Math.round(v=v/u),E=Math.round(y=y/a-(b&1)/2),_=v-b;if(Math.abs(_)*3>1){var x=y-E,S=E+(y<E?-1:1)/2,C=b+(v<b?-1:1),A=y-S,D=v-C;x*x+_*_>A*A+D*D&&(E=S+(b&1?1:-1)/2,b=C)}var I=E+"-"+b,O=d[I];O?O.push(g):(h.push(O=d[I]=[g]),O.x=(E+(b&1)/2)*a,O.y=b*u)}return h}function c(f){var d=0,h=0;return Lnt.map(function(p){var m=Math.sin(p)*f,g=-Math.cos(p)*f,y=m-d,v=g-h;return d=m,h=g,[y,v]})}return l.hexagon=function(f){return"m"+c(f==null?o:+f).join("l")+"z"},l.centers=function(){for(var f=[],d=Math.round(t/u),h=Math.round(e/a),p=d*u;p<r+o;p+=u,++d)for(var m=h*a+(d&1)*a/2;m<n+a/2;m+=a)f.push([m,p]);return f},l.mesh=function(){var f=c(o).slice(0,4).join("l");return l.centers().map(function(d){return"M"+d+"m"+f}).join("")},l.x=function(f){return arguments.length?(i=f,l):i},l.y=function(f){return arguments.length?(s=f,l):s},l.radius=function(f){return arguments.length?(o=+f,a=o*2*Math.sin(M1),u=o*1.5,l):o},l.size=function(f){return arguments.length?(e=t=0,n=+f[0],r=+f[1],l):[n-e,r-t]},l.extent=function(f){return arguments.length?(e=+f[0][0],t=+f[0][1],n=+f[1][0],r=+f[1][1],l):[[e,t],[n,r]]},l.radius(1)}var DU={exports:{}};DU.exports;(function(e){(function(t,n,r){function i(u){var l=this,c=a();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function s(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function a(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:this.alea=o})(Hr,e)})(DU);var Unt=DU.exports,IU={exports:{}};IU.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(Hr,e)})(IU);var Vnt=IU.exports,NU={exports:{}};NU.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(Hr,e)})(NU);var Hnt=NU.exports,kU={exports:{}};kU.exports;(function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,a)}function s(a,u){return u.x=a.x.slice(),u.i=a.i,u}function o(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.x&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(Hr,e)})(kU);var qnt=kU.exports,RU={exports:{}};RU.exports;(function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,p;return u.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,u.i=d,p+(c^c>>>16)|0};function l(c,f){var d,h,p,m,g,y=[],v=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,v=Math.max(v,f.length)),p=0,m=-32;m<v;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=h+g,p=d==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],d=y[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,y[p]=h^d;c.w=g,c.X=y,c.i=p}l(u,a)}function s(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function o(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.X&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(Hr,e)})(RU);var Wnt=RU.exports,PU={exports:{}};PU.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(Hr,e)})(PU);var Gnt=PU.exports,Lye={exports:{}};const Ynt={},Knt=Object.freeze(Object.defineProperty({__proto__:null,default:Ynt},Symbol.toStringTag,{value:"Module"})),Bye=kNe(Knt);(function(e){(function(t,n,r){var i=256,s=6,o=52,a="random",u=r.pow(i,s),l=r.pow(2,o),c=l*2,f=i-1,d;function h(E,_,x){var S=[];_=_==!0?{entropy:!0}:_||{};var C=y(g(_.entropy?[E,b(n)]:E??v(),3),S),A=new p(S),D=function(){for(var I=A.g(s),O=u,R=0;I<l;)I=(I+R)*i,O*=i,R=A.g(1);for(;I>=c;)I/=2,O/=2,R>>>=1;return(I+R)/O};return D.int32=function(){return A.g(4)|0},D.quick=function(){return A.g(4)/4294967296},D.double=D,y(b(A.S),n),(_.pass||x||function(I,O,R,M){return M&&(M.S&&m(M,A),I.state=function(){return m(A,{})}),R?(r[a]=I,O):I})(D,C,"global"in _?_.global:this==r,_.state)}function p(E){var _,x=E.length,S=this,C=0,A=S.i=S.j=0,D=S.S=[];for(x||(E=[x++]);C<i;)D[C]=C++;for(C=0;C<i;C++)D[C]=D[A=f&A+E[C%x]+(_=D[C])],D[A]=_;(S.g=function(I){for(var O,R=0,M=S.i,F=S.j,P=S.S;I--;)O=P[M=f&M+1],R=R*i+P[f&(P[M]=P[F=f&F+O])+(P[F]=O)];return S.i=M,S.j=F,R})(i)}function m(E,_){return _.i=E.i,_.j=E.j,_.S=E.S.slice(),_}function g(E,_){var x=[],S=typeof E,C;if(_&&S=="object")for(C in E)try{x.push(g(E[C],_-1))}catch{}return x.length?x:S=="string"?E:E+"\0"}function y(E,_){for(var x=E+"",S,C=0;C<x.length;)_[f&C]=f&(S^=_[f&C]*19)+x.charCodeAt(C++);return b(_)}function v(){try{var E;return d&&(E=d.randomBytes)?E=E(i):(E=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(E)),b(E)}catch{var _=t.navigator,x=_&&_.plugins;return[+new Date,t,x,t.screen,b(n)]}}function b(E){return String.fromCharCode.apply(0,E)}if(y(r.random(),n),e.exports){e.exports=h;try{d=Bye}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Hr,[],Math)})(Lye);var Xnt=Lye.exports,Qnt=Unt,Jnt=Vnt,Znt=Hnt,ert=qnt,trt=Wnt,nrt=Gnt,Py=Xnt;Py.alea=Qnt;Py.xor128=Jnt;Py.xorwow=Znt;Py.xorshift7=ert;Py.xor4096=trt;Py.tychei=nrt;var rrt=Py;const jye=pa(rrt);var zye={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function kr(e){return typeof e=="number"}function Ti(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function irt(e){return typeof e=="bigint"}function Uye(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Vye(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Hye(e){return e&&e.constructor.prototype.isUnit===!0||!1}function tf(e){return typeof e=="string"}var ai=Array.isArray;function fi(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function vb(e){return Array.isArray(e)||fi(e)}function srt(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function ort(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function art(e){return e&&e.constructor.prototype.isRange===!0||!1}function OU(e){return e&&e.constructor.prototype.isIndex===!0||!1}function urt(e){return typeof e=="boolean"}function lrt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function crt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function frt(e){return typeof e=="function"}function drt(e){return e instanceof Date}function hrt(e){return e instanceof RegExp}function MU(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Uye(e)&&!Vye(e))}function prt(e){return e===null}function mrt(e){return e===void 0}function grt(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function yrt(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function vrt(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function brt(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function _rt(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ert(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function wrt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function xrt(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Srt(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Trt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Crt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function Art(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Drt(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Irt(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Nrt(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function krt(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Rrt(e){return e&&e.constructor.prototype.isChain===!0||!1}function gc(e){var t=typeof e;return t==="object"?e===null?"null":Ti(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Ei(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return Ei(n)});if(e instanceof Date)return new Date(e.valueOf());if(Ti(e))return e;if(MU(e))return Prt(e,Ei);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function Prt(e,t){var n={};for(var r in e)kS(e,r)&&(n[r]=t(e[r]));return n}function qye(e,t){for(var n in t)kS(t,n)&&(e[n]=t[n]);return e}function bb(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!bb(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!bb(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function kS(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Ort(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];s!==void 0&&(n[i]=s)}return n}var Mrt=["Matrix","Array"],$rt=["number","BigNumber","Fraction"],Oy=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(zye)};cS(Oy,zye,{MATRIX_OPTIONS:Mrt,NUMBER_OPTIONS:$rt});function Tte(){return!0}function Ku(){return!1}function g1(){}const Cte="Argument is not a typed-function.";function Wye(){function e(G){return typeof G=="object"&&G!==null&&G.constructor===Object}const t=[{name:"number",test:function(G){return typeof G=="number"}},{name:"string",test:function(G){return typeof G=="string"}},{name:"boolean",test:function(G){return typeof G=="boolean"}},{name:"Function",test:function(G){return typeof G=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(G){return G instanceof Date}},{name:"RegExp",test:function(G){return G instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(G){return G===null}},{name:"undefined",test:function(G){return G===void 0}}],n={name:"any",test:Tte,isAny:!0};let r,i,s=0,o={createCount:0};function a(G){const ie=r.get(G);if(ie)return ie;let me='Unknown type "'+G+'"';const J=G.toLowerCase();let se;for(se of i)if(se.toLowerCase()===J){me+='. Did you mean "'+se+'" ?';break}throw new TypeError(me)}function u(G){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const me=ie?a(ie).index:i.length,J=[];for(let ce=0;ce<G.length;++ce){if(!G[ce]||typeof G[ce].name!="string"||typeof G[ce].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Se=G[ce].name;if(r.has(Se))throw new TypeError('Duplicate type name "'+Se+'"');J.push(Se),r.set(Se,{name:Se,test:G[ce].test,isAny:G[ce].isAny,index:me+ce,conversionsTo:[]})}const se=i.slice(me);i=i.slice(0,me).concat(J).concat(se);for(let ce=me+J.length;ce<i.length;++ce)r.get(i[ce]).index=ce}function l(){r=new Map,i=[],s=0,u([n],!1)}l(),u(t);function c(){let G;for(G of i)r.get(G).conversionsTo=[];s=0}function f(G){const ie=i.filter(me=>{const J=r.get(me);return!J.isAny&&J.test(G)});return ie.length?ie:["any"]}function d(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function h(G,ie,me){if(!d(G))throw new TypeError(Cte);const J=me&&me.exact,se=Array.isArray(ie)?ie.join(","):ie,ce=E(se),Se=g(ce);if(!J||Se in G.signatures){const Ct=G._typedFunctionData.signatureMap.get(Se);if(Ct)return Ct}const Te=ce.length;let Ge;if(J){Ge=[];let Ct;for(Ct in G.signatures)Ge.push(G._typedFunctionData.signatureMap.get(Ct))}else Ge=G._typedFunctionData.signatures;for(let Ct=0;Ct<Te;++Ct){const Ot=ce[Ct],Dt=[];let Vt;for(Vt of Ge){const Zt=C(Vt.params,Ct);if(!(!Zt||Ot.restParam&&!Zt.restParam)){if(!Zt.hasAny){const an=b(Zt);if(Ot.types.some(gr=>!an.has(gr.name)))continue}Dt.push(Vt)}}if(Ge=Dt,Ge.length===0)break}let je;for(je of Ge)if(je.params.length<=Te)return je;throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+g(ce,", ")+"))")}function p(G,ie,me){return h(G,ie,me).implementation}function m(G,ie){const me=a(ie);if(me.test(G))return G;const J=me.conversionsTo;if(J.length===0)throw new Error("There are no conversions to "+ie+" defined.");for(let se=0;se<J.length;se++)if(a(J[se].from).test(G))return J[se].convert(G);throw new Error("Cannot convert "+G+" to "+ie)}function g(G){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(me=>me.name).join(ie)}function y(G){const ie=G.indexOf("...")===0,J=(ie?G.length>3?G.slice(3):"any":G).split("|").map(Te=>a(Te.trim()));let se=!1,ce=ie?"...":"";return{types:J.map(function(Te){return se=Te.isAny||se,ce+=Te.name+"|",{name:Te.name,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:null,conversionIndex:-1}}),name:ce.slice(0,-1),hasAny:se,hasConversion:!1,restParam:ie}}function v(G){const ie=G.types.map(Se=>Se.name),me=j(ie);let J=G.hasAny,se=G.name;const ce=me.map(function(Se){const Te=a(Se.from);return J=Te.isAny||J,se+="|"+Se.from,{name:Se.from,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:Se,conversionIndex:Se.index}});return{types:G.types.concat(ce),name:se,hasAny:J,hasConversion:ce.length>0,restParam:G.restParam}}function b(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(ie=>G.typeSet.add(ie.name))),G.typeSet}function E(G){const ie=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");const me=G.trim();if(me==="")return ie;const J=me.split(",");for(let se=0;se<J.length;++se){const ce=y(J[se].trim());if(ce.restParam&&se!==J.length-1)throw new SyntaxError('Unexpected rest parameter "'+J[se]+'": only allowed for the last parameter');if(ce.types.length===0)return null;ie.push(ce)}return ie}function _(G){const ie=de(G);return ie?ie.restParam:!1}function x(G){if(!G||G.types.length===0)return Tte;if(G.types.length===1)return a(G.types[0].name).test;if(G.types.length===2){const ie=a(G.types[0].name).test,me=a(G.types[1].name).test;return function(se){return ie(se)||me(se)}}else{const ie=G.types.map(function(me){return a(me.name).test});return function(J){for(let se=0;se<ie.length;se++)if(ie[se](J))return!0;return!1}}}function S(G){let ie,me,J;if(_(G)){ie=_e(G).map(x);const se=ie.length,ce=x(de(G)),Se=function(Te){for(let Ge=se;Ge<Te.length;Ge++)if(!ce(Te[Ge]))return!1;return!0};return function(Ge){for(let je=0;je<ie.length;je++)if(!ie[je](Ge[je]))return!1;return Se(Ge)&&Ge.length>=se+1}}else return G.length===0?function(ce){return ce.length===0}:G.length===1?(me=x(G[0]),function(ce){return me(ce[0])&&ce.length===1}):G.length===2?(me=x(G[0]),J=x(G[1]),function(ce){return me(ce[0])&&J(ce[1])&&ce.length===2}):(ie=G.map(x),function(ce){for(let Se=0;Se<ie.length;Se++)if(!ie[Se](ce[Se]))return!1;return ce.length===ie.length})}function C(G,ie){return ie<G.length?G[ie]:_(G)?de(G):null}function A(G,ie){const me=C(G,ie);return me?b(me):new Set}function D(G){return G.conversion===null||G.conversion===void 0}function I(G,ie){const me=new Set;return G.forEach(J=>{const se=A(J.params,ie);let ce;for(ce of se)me.add(ce)}),me.has("any")?["any"]:Array.from(me)}function O(G,ie,me){let J,se;const ce=G||"unnamed";let Se=me,Te;for(Te=0;Te<ie.length;Te++){const Ot=[];if(Se.forEach(Dt=>{const Vt=C(Dt.params,Te),Zt=x(Vt);(Te<Dt.params.length||_(Dt.params))&&Zt(ie[Te])&&Ot.push(Dt)}),Ot.length===0){if(se=I(Se,Te),se.length>0){const Dt=f(ie[Te]);return J=new TypeError("Unexpected type of argument in function "+ce+" (expected: "+se.join(" or ")+", actual: "+Dt.join(" | ")+", index: "+Te+")"),J.data={category:"wrongType",fn:ce,index:Te,actual:Dt,expected:se},J}}else Se=Ot}const Ge=Se.map(function(Ot){return _(Ot.params)?1/0:Ot.params.length});if(ie.length<Math.min.apply(null,Ge))return se=I(Se,Te),J=new TypeError("Too few arguments in function "+ce+" (expected: "+se.join(" or ")+", index: "+ie.length+")"),J.data={category:"tooFewArgs",fn:ce,index:ie.length,expected:se},J;const je=Math.max.apply(null,Ge);if(ie.length>je)return J=new TypeError("Too many arguments in function "+ce+" (expected: "+je+", actual: "+ie.length+")"),J.data={category:"tooManyArgs",fn:ce,index:ie.length,expectedLength:je},J;const Ct=[];for(let Ot=0;Ot<ie.length;++Ot)Ct.push(f(ie[Ot]).join("|"));return J=new TypeError('Arguments of type "'+Ct.join(", ")+'" do not match any of the defined signatures of function '+ce+"."),J.data={category:"mismatch",actual:Ct},J}function R(G){let ie=i.length+1;for(let me=0;me<G.types.length;me++)D(G.types[me])&&(ie=Math.min(ie,G.types[me].typeIndex));return ie}function M(G){let ie=s+1;for(let me=0;me<G.types.length;me++)D(G.types[me])||(ie=Math.min(ie,G.types[me].conversionIndex));return ie}function F(G,ie){if(G.hasAny){if(!ie.hasAny)return 1}else if(ie.hasAny)return-1;if(G.restParam){if(!ie.restParam)return 1}else if(ie.restParam)return-1;if(G.hasConversion){if(!ie.hasConversion)return 1}else if(ie.hasConversion)return-1;const me=R(G)-R(ie);if(me<0)return-1;if(me>0)return 1;const J=M(G)-M(ie);return J<0?-1:J>0?1:0}function P(G,ie){const me=G.params,J=ie.params,se=de(me),ce=de(J),Se=_(me),Te=_(J);if(Se&&se.hasAny){if(!Te||!ce.hasAny)return 1}else if(Te&&ce.hasAny)return-1;let Ge=0,je=0,Ct;for(Ct of me)Ct.hasAny&&++Ge,Ct.hasConversion&&++je;let Ot=0,Dt=0;for(Ct of J)Ct.hasAny&&++Ot,Ct.hasConversion&&++Dt;if(Ge!==Ot)return Ge-Ot;if(Se&&se.hasConversion){if(!Te||!ce.hasConversion)return 1}else if(Te&&ce.hasConversion)return-1;if(je!==Dt)return je-Dt;if(Se){if(!Te)return 1}else if(Te)return-1;const Vt=(me.length-J.length)*(Se?-1:1);if(Vt!==0)return Vt;const Zt=[];let an=0;for(let lr=0;lr<me.length;++lr){const fn=F(me[lr],J[lr]);Zt.push(fn),an+=fn}if(an!==0)return an;let gr;for(gr of Zt)if(gr!==0)return gr;return 0}function j(G){if(G.length===0)return[];const ie=G.map(a);G.length>1&&ie.sort((se,ce)=>se.index-ce.index);let me=ie[0].conversionsTo;if(G.length===1)return me;me=me.concat([]);const J=new Set(G);for(let se=1;se<ie.length;++se){let ce;for(ce of ie[se].conversionsTo)J.has(ce.from)||(me.push(ce),J.add(ce.from))}return me}function z(G,ie){let me=ie;if(G.some(se=>se.hasConversion)){const se=_(G),ce=G.map(V);me=function(){const Te=[],Ge=se?arguments.length-1:arguments.length;for(let je=0;je<Ge;je++)Te[je]=ce[je](arguments[je]);return se&&(Te[Ge]=arguments[Ge].map(ce[Ge])),ie.apply(this,Te)}}let J=me;if(_(G)){const se=G.length-1;J=function(){return me.apply(this,ye(arguments,0,se).concat([ye(arguments,se)]))}}return J}function V(G){let ie,me,J,se;const ce=[],Se=[];switch(G.types.forEach(function(Te){Te.conversion&&(ce.push(a(Te.conversion.from).test),Se.push(Te.conversion.convert))}),Se.length){case 0:return function(Ge){return Ge};case 1:return ie=ce[0],J=Se[0],function(Ge){return ie(Ge)?J(Ge):Ge};case 2:return ie=ce[0],me=ce[1],J=Se[0],se=Se[1],function(Ge){return ie(Ge)?J(Ge):me(Ge)?se(Ge):Ge};default:return function(Ge){for(let je=0;je<Se.length;je++)if(ce[je](Ge))return Se[je](Ge);return Ge}}}function $(G){function ie(me,J,se){if(J<me.length){const ce=me[J];let Se=[];if(ce.restParam){const Te=ce.types.filter(D);Te.length<ce.types.length&&Se.push({types:Te,name:"..."+Te.map(Ge=>Ge.name).join("|"),hasAny:Te.some(Ge=>Ge.isAny),hasConversion:!1,restParam:!0}),Se.push(ce)}else Se=ce.types.map(function(Te){return{types:[Te],name:Te.name,hasAny:Te.isAny,hasConversion:Te.conversion,restParam:!1}});return ve(Se,function(Te){return ie(me,J+1,se.concat([Te]))})}else return[se]}return ie(G,0,[])}function U(G,ie){const me=Math.max(G.length,ie.length);for(let Te=0;Te<me;Te++){const Ge=A(G,Te),je=A(ie,Te);let Ct=!1,Ot;for(Ot of je)if(Ge.has(Ot)){Ct=!0;break}if(!Ct)return!1}const J=G.length,se=ie.length,ce=_(G),Se=_(ie);return ce?Se?J===se:se>=J:Se?J>=se:J===se}function W(G){return G.map(ie=>Pe(ie)?ht(ie.referToSelf.callback):rt(ie)?He(ie.referTo.references,ie.referTo.callback):ie)}function B(G,ie,me){const J=[];let se;for(se of G){let ce=me[se];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+se+'"');if(ce=ie[ce],typeof ce!="function")return!1;J.push(ce)}return J}function q(G,ie,me){const J=W(G),se=new Array(J.length).fill(!1);let ce=!0;for(;ce;){ce=!1;let Se=!0;for(let Te=0;Te<J.length;++Te){if(se[Te])continue;const Ge=J[Te];if(Pe(Ge))J[Te]=Ge.referToSelf.callback(me),J[Te].referToSelf=Ge.referToSelf,se[Te]=!0,Se=!1;else if(rt(Ge)){const je=B(Ge.referTo.references,J,ie);je?(J[Te]=Ge.referTo.callback.apply(this,je),J[Te].referTo=Ge.referTo,se[Te]=!0,Se=!1):ce=!0}}if(Se&&ce)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return J}function Y(G){const ie=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(me=>{const J=G[me];if(ie.test(J.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function re(G,ie){if(o.createCount++,Object.keys(ie).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Y(ie);const me=[],J=[],se={},ce=[];let Se;for(Se in ie){if(!Object.prototype.hasOwnProperty.call(ie,Se))continue;const Gt=E(Se);if(!Gt)continue;me.forEach(function(br){if(U(br,Gt))throw new TypeError('Conflicting signatures "'+g(br)+'" and "'+g(Gt)+'".')}),me.push(Gt);const Hn=J.length;J.push(ie[Se]);const vr=Gt.map(v);let yi;for(yi of $(vr)){const br=g(yi);ce.push({params:yi,name:br,fn:Hn}),yi.every(Qr=>!Qr.hasConversion)&&(se[br]=Hn)}}ce.sort(P);const Te=q(J,se,bn);let Ge;for(Ge in se)Object.prototype.hasOwnProperty.call(se,Ge)&&(se[Ge]=Te[se[Ge]]);const je=[],Ct=new Map;for(Ge of ce)Ct.has(Ge.name)||(Ge.fn=Te[Ge.fn],je.push(Ge),Ct.set(Ge.name,Ge));const Ot=je[0]&&je[0].params.length<=2&&!_(je[0].params),Dt=je[1]&&je[1].params.length<=2&&!_(je[1].params),Vt=je[2]&&je[2].params.length<=2&&!_(je[2].params),Zt=je[3]&&je[3].params.length<=2&&!_(je[3].params),an=je[4]&&je[4].params.length<=2&&!_(je[4].params),gr=je[5]&&je[5].params.length<=2&&!_(je[5].params),lr=Ot&&Dt&&Vt&&Zt&&an&&gr;for(let Gt=0;Gt<je.length;++Gt)je[Gt].test=S(je[Gt].params);const fn=Ot?x(je[0].params[0]):Ku,Xr=Dt?x(je[1].params[0]):Ku,er=Vt?x(je[2].params[0]):Ku,gi=Zt?x(je[3].params[0]):Ku,Ll=an?x(je[4].params[0]):Ku,Ho=gr?x(je[5].params[0]):Ku,Wu=Ot?x(je[0].params[1]):Ku,Yn=Dt?x(je[1].params[1]):Ku,Lr=Vt?x(je[2].params[1]):Ku,yr=Zt?x(je[3].params[1]):Ku,uo=an?x(je[4].params[1]):Ku,Fs=gr?x(je[5].params[1]):Ku;for(let Gt=0;Gt<je.length;++Gt)je[Gt].implementation=z(je[Gt].params,je[Gt].fn);const Ls=Ot?je[0].implementation:g1,ue=Dt?je[1].implementation:g1,te=Vt?je[2].implementation:g1,le=Zt?je[3].implementation:g1,De=an?je[4].implementation:g1,Ae=gr?je[5].implementation:g1,at=Ot?je[0].params.length:-1,St=Dt?je[1].params.length:-1,Xt=Vt?je[2].params.length:-1,_n=Zt?je[3].params.length:-1,Sn=an?je[4].params.length:-1,un=gr?je[5].params.length:-1,$n=lr?6:0,tr=je.length,Ht=je.map(Gt=>Gt.test),Fn=je.map(Gt=>Gt.implementation),cr=function(){for(let Hn=$n;Hn<tr;Hn++)if(Ht[Hn](arguments))return Fn[Hn].apply(this,arguments);return o.onMismatch(G,arguments,je)};function bn(Gt,Hn){return arguments.length===at&&fn(Gt)&&Wu(Hn)?Ls.apply(this,arguments):arguments.length===St&&Xr(Gt)&&Yn(Hn)?ue.apply(this,arguments):arguments.length===Xt&&er(Gt)&&Lr(Hn)?te.apply(this,arguments):arguments.length===_n&&gi(Gt)&&yr(Hn)?le.apply(this,arguments):arguments.length===Sn&&Ll(Gt)&&uo(Hn)?De.apply(this,arguments):arguments.length===un&&Ho(Gt)&&Fs(Hn)?Ae.apply(this,arguments):cr.apply(this,arguments)}try{Object.defineProperty(bn,"name",{value:G})}catch{}return bn.signatures=se,bn._typedFunctionData={signatures:je,signatureMap:Ct},bn}function pe(G,ie,me){throw O(G,ie,me)}function _e(G){return ye(G,0,G.length-1)}function de(G){return G[G.length-1]}function ye(G,ie,me){return Array.prototype.slice.call(G,ie,me)}function Ce(G,ie){for(let me=0;me<G.length;me++)if(ie(G[me]))return G[me]}function ve(G,ie){return Array.prototype.concat.apply([],G.map(ie))}function qe(){const G=_e(arguments).map(me=>g(E(me))),ie=de(arguments);if(typeof ie!="function")throw new TypeError("Callback function expected as last argument");return He(G,ie)}function He(G,ie){return{referTo:{references:G,callback:ie}}}function ht(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function rt(G){return G&&typeof G.referTo=="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function Pe(G){return G&&typeof G.referToSelf=="object"&&typeof G.referToSelf.callback=="function"}function Be(G,ie){if(!G)return ie;if(ie&&ie!==G){const me=new Error("Function names do not match (expected: "+G+", actual: "+ie+")");throw me.data={actual:ie,expected:G},me}return G}function Xe(G){let ie;for(const me in G)Object.prototype.hasOwnProperty.call(G,me)&&(d(G[me])||typeof G[me].signature=="string")&&(ie=Be(ie,G[me].name));return ie}function mt(G,ie){let me;for(me in ie)if(Object.prototype.hasOwnProperty.call(ie,me)){if(me in G&&ie[me]!==G[me]){const J=new Error('Signature "'+me+'" is defined twice');throw J.data={signature:me,sourceFunction:ie[me],destFunction:G[me]},J}G[me]=ie[me]}}const Ft=o;o=function(G){const ie=typeof G=="string",me=ie?1:0;let J=ie?G:"";const se={};for(let ce=me;ce<arguments.length;++ce){const Se=arguments[ce];let Te={},Ge;if(typeof Se=="function"?(Ge=Se.name,typeof Se.signature=="string"?Te[Se.signature]=Se:d(Se)&&(Te=Se.signatures)):e(Se)&&(Te=Se,ie||(Ge=Xe(Se))),Object.keys(Te).length===0){const je=new TypeError("Argument to 'typed' at index "+ce+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw je.data={index:ce,argument:Se},je}ie||(J=Be(J,Ge)),mt(se,Te)}return re(J||"",se)},o.create=Wye,o.createCount=Ft.createCount,o.onMismatch=pe,o.throwMismatchError=pe,o.createError=O,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=a,o.referTo=qe,o.referToSelf=ht,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(G,ie){let me="any";ie!==!1&&r.has("Object")&&(me="Object"),o.addTypes([G],me)};function bt(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return o.addConversion=function(G){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};bt(G);const me=a(G.to),J=me.conversionsTo.find(se=>se.from===G.from);if(J)if(ie&&ie.override)o.removeConversion({from:J.from,to:G.to,convert:J.convert});else throw new Error('There is already a conversion from "'+G.from+'" to "'+me.name+'"');me.conversionsTo.push({from:G.from,convert:G.convert,index:s++})},o.addConversions=function(G,ie){G.forEach(me=>o.addConversion(me,ie))},o.removeConversion=function(G){bt(G);const ie=a(G.to),me=Ce(ie.conversionsTo,se=>se.from===G.from);if(!me)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(me.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");const J=ie.conversionsTo.indexOf(me);ie.conversionsTo.splice(J,1)},o.resolve=function(G,ie){if(!d(G))throw new TypeError(Cte);const me=G._typedFunctionData.signatures;for(let J=0;J<me.length;++J)if(me[J].test(ie))return me[J];return null},o}const iv=Wye();function Hi(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function LF(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Hi(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Hi(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),s="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(s)}function U5(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=Gye(t);switch(n){case"fixed":return Lrt(e,r);case"exponential":return Yye(e,r);case"engineering":return Frt(e,r);case"bin":return LF(e,2,i);case"oct":return LF(e,8,i);case"hex":return LF(e,16,i);case"auto":return Brt(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Gye(e){var t="auto",n,r;if(e!==void 0)if(kr(e))n=e;else if(Ti(e))n=e.toNumber();else if(MU(e))e.precision!==void 0&&(n=Ate(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=Ate(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function s3(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function Frt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=s3(e),r=o3(n,t),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(kr(t))for(;t>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),u=0;u<a;u++)s.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),d=kr(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function Lrt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=s3(e),r=typeof t=="number"?o3(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(Iv(o-i.length))),s<0&&(i=Iv(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function Yye(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=s3(e),r=t?o3(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(Iv(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Brt(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=Dte(n==null?void 0:n.lowerExp,-3),i=Dte(n==null?void 0:n.upperExp,5),s=s3(e),o=t?o3(s,t):s;if(o.exponent<r||o.exponent>=i)return Yye(e,t);var a=o.coefficients,u=o.exponent;a.length<t&&(a=a.concat(Iv(t-a.length))),a=a.concat(Iv(u-a.length+1+(a.length<t?t-a.length:0))),a=Iv(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}function o3(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var s=t-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function Iv(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function jrt(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function WN(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function Ate(e,t){if(kr(e))return e;if(Ti(e))return e.toNumber();t()}function Dte(e,t){return kr(e)?e:Ti(e)?e.toNumber():t}function Kt(e,t,n,r){function i(s){var o=Ort(s,t.map(Vrt));return zrt(e,t,s),n(o)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function zrt(e,t,n){var r=t.filter(s=>!Urt(s)).every(s=>n[s]!==void 0);if(!r){var i=t.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Urt(e){return e&&e[0]==="?"}function Vrt(e){return e&&e[0]==="?"?e.slice(1):e}function Hrt(e,t){if(Xye(e)&&Kye(e,t))return e[t];throw typeof e[t]=="function"&&Grt(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function qrt(e,t,n){if(Xye(e)&&Kye(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function Wrt(e,t){return t in e}function Kye(e,t){return!e||typeof e!="object"?!1:kS(Yrt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Grt(e,t){return e==null||typeof e[t]!="function"||kS(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:kS(Krt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Xye(e){return typeof e=="object"&&e&&e.constructor===Object}var Yrt={length:!0,name:!0},Krt={toString:!0,valueOf:!0,toLocaleString:!0};class Xrt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(t){return Hrt(this.wrappedObject,t)}set(t,n){return qrt(this.wrappedObject,t,n),this}has(t){return Wrt(this.wrappedObject,t)}entries(){return Qrt(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function Qrt(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function Jrt(e){return e?e instanceof Map||e instanceof Xrt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var Qye=function(){return Qye=iv.create,iv},Zrt=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],eit=Kt("typed",Zrt,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=t,o=Qye();return o.clear(),o.addTypes([{name:"number",test:kr},{name:"Complex",test:Uye},{name:"BigNumber",test:Ti},{name:"bigint",test:irt},{name:"Fraction",test:Vye},{name:"Unit",test:Hye},{name:"identifier",test:a=>tf&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:tf},{name:"Chain",test:Rrt},{name:"Array",test:ai},{name:"Matrix",test:fi},{name:"DenseMatrix",test:srt},{name:"SparseMatrix",test:ort},{name:"Range",test:art},{name:"Index",test:OU},{name:"boolean",test:urt},{name:"ResultSet",test:lrt},{name:"Help",test:crt},{name:"function",test:frt},{name:"Date",test:drt},{name:"RegExp",test:hrt},{name:"null",test:prt},{name:"undefined",test:mrt},{name:"AccessorNode",test:grt},{name:"ArrayNode",test:yrt},{name:"AssignmentNode",test:vrt},{name:"BlockNode",test:brt},{name:"ConditionalNode",test:_rt},{name:"ConstantNode",test:Ert},{name:"FunctionNode",test:xrt},{name:"FunctionAssignmentNode",test:wrt},{name:"IndexNode",test:Srt},{name:"Node",test:Trt},{name:"ObjectNode",test:Crt},{name:"OperatorNode",test:Art},{name:"ParenthesisNode",test:Drt},{name:"RangeNode",test:Irt},{name:"RelationalNode",test:Nrt},{name:"SymbolNode",test:krt},{name:"Map",test:Jrt},{name:"Object",test:MU}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||aA(u),jrt(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||uA(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||uA(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||aA(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||lA(u),new s(u.toString())}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||uA(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||lA(u);var l=new s(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||aA(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||lA(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||uA(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||aA(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||lA(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||tit(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&vb(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&vb(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function aA(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function uA(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function tit(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function lA(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var sv=9e15,Zm=1e9,V5="0123456789abcdef",GN="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",YN="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",H5={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-sv,maxE:sv,crypto:!1},Jye,zd,on=!0,a3="[DecimalError] ",Em=a3+"Invalid argument: ",Zye=a3+"Precision limit exceeded",e1e=a3+"crypto unavailable",t1e="[object Decimal]",Lo=Math.floor,es=Math.pow,nit=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rit=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,iit=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,n1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yc=1e7,Qt=7,sit=9007199254740991,oit=GN.length-1,q5=YN.length-1,Ye={toStringTag:t1e};Ye.absoluteValue=Ye.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),zt(e)};Ye.ceil=function(){return zt(new this.constructor(this),this.e+1,2)};Ye.clampedTo=Ye.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(Em+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};Ye.comparedTo=Ye.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,u=s.s,l=e.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(r=o.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};Ye.cosine=Ye.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Qt,r.rounding=1,n=ait(r,a1e(r,n)),r.precision=e,r.rounding=t,zt(zd==2||zd==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};Ye.cubeRoot=Ye.cbrt=function(){var e,t,n,r,i,s,o,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(on=!1,s=c.s*es(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=Qs(c.d),e=c.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=es(n,1/3),e=Lo((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(s.toString()),o=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=Ar(l.plus(c).times(a),l.plus(u),o+2,1),Qs(a.d).slice(0,o)===(n=Qs(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(zt(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(zt(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return on=!0,zt(r,e,f.rounding,t)};Ye.decimalPlaces=Ye.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-Lo(this.e/Qt))*Qt,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};Ye.dividedBy=Ye.div=function(e){return Ar(this,new this.constructor(e))};Ye.dividedToIntegerBy=Ye.divToInt=function(e){var t=this,n=t.constructor;return zt(Ar(t,new n(e),0,1,1),n.precision,n.rounding)};Ye.equals=Ye.eq=function(e){return this.cmp(e)===0};Ye.floor=function(){return zt(new this.constructor(this),this.e+1,3)};Ye.greaterThan=Ye.gt=function(e){return this.cmp(e)>0};Ye.greaterThanOrEqualTo=Ye.gte=function(e){var t=this.cmp(e);return t==1||t===0};Ye.hyperbolicCosine=Ye.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),t=(1/l3(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=_b(o,1,s.times(t),new o(1),!0);for(var u,l=e,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return zt(s,o.precision=n,o.rounding=r,!0)};Ye.hyperbolicSine=Ye.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=_b(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/l3(5,e)),i=_b(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=t,s.rounding=n,zt(i,t,n,!0)};Ye.hyperbolicTangent=Ye.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,Ar(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};Ye.inverseCosine=Ye.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?t.isNeg()?uc(n,i,s):new n(0):new n(NaN):t.isZero()?uc(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=uc(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))};Ye.inverseHyperbolicCosine=Ye.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,on=!1,n=n.times(n).minus(1).sqrt().plus(n),on=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};Ye.inverseHyperbolicSine=Ye.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,on=!1,n=n.times(n).plus(1).sqrt().plus(n),on=!0,r.precision=e,r.rounding=t,n.ln())};Ye.inverseHyperbolicTangent=Ye.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?zt(new s(i),e,t,!0):(s.precision=n=r-i.e,i=Ar(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)};Ye.inverseSine=Ye.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,t!==-1?t===0?(e=uc(s,n+4,r).times(.5),e.s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};Ye.inverseTangent=Ye.atan=function(){var e,t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=q5)return o=uc(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=q5)return o=uc(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/Qt+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(on=!1,t=Math.ceil(a/Qt),r=1,u=l.times(l),o=new c(l),i=l;e!==-1;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),o=s.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),on=!0,zt(o,c.precision=f,c.rounding=d,!0)};Ye.isFinite=function(){return!!this.d};Ye.isInteger=Ye.isInt=function(){return!!this.d&&Lo(this.e/Qt)>this.d.length-2};Ye.isNaN=function(){return!this.s};Ye.isNegative=Ye.isNeg=function(){return this.s<0};Ye.isPositive=Ye.isPos=function(){return this.s>0};Ye.isZero=function(){return!!this.d&&this.d[0]===0};Ye.lessThan=Ye.lt=function(e){return this.cmp(e)<0};Ye.lessThanOrEqualTo=Ye.lte=function(e){return this.cmp(e)<1};Ye.logarithm=Ye.log=function(e){var t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(on=!1,a=f+h,o=Np(l,a),r=t?KN(c,a+10):Np(e,a),u=Ar(o,r,a,1),RS(u.d,i=f,d))do if(a+=10,o=Np(l,a),r=t?KN(c,a+10):Np(e,a),u=Ar(o,r,a,1),!s){+Qs(u.d).slice(i+1,i+15)+1==1e14&&(u=zt(u,f+1,0));break}while(RS(u.d,i+=10,d));return on=!0,zt(u,f,d)};Ye.minus=Ye.sub=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d?e.s=-e.s:e=new p(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new p(h);else return new p(u===3?-0:0);return on?zt(e,a,u):e}if(n=Lo(e.e/Qt),c=Lo(h.e/Qt),l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=d.length):(t=d,n=c,o=l.length),r=Math.max(Math.ceil(a/Qt),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}s=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=yc-1;--l[i],l[r]+=yc}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=u3(l,n),on?zt(e,a,u):e):new p(u===3?-0:0)};Ye.modulo=Ye.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?zt(new r(n),r.precision,r.rounding):(on=!1,r.modulo==9?(t=Ar(n,e.abs(),0,3,1),t.s*=e.s):t=Ar(n,e,0,r.modulo,1),t=t.times(e),on=!0,n.minus(t))};Ye.naturalExponential=Ye.exp=function(){return W5(this)};Ye.naturalLogarithm=Ye.ln=function(){return Np(this)};Ye.negated=Ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s,zt(e)};Ye.plus=Ye.add=function(e){var t,n,r,i,s,o,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),on?zt(e,a,u):e;if(s=Lo(f.e/Qt),r=Lo(e.e/Qt),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=s,o=l.length),s=Math.ceil(a/Qt),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/yc|0,l[i]%=yc;for(t&&(l.unshift(t),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=u3(l,r),on?zt(e,a,u):e};Ye.precision=Ye.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Em+e);return n.d?(t=r1e(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};Ye.round=function(){var e=this,t=e.constructor;return zt(new t(e),e.e+1,t.rounding)};Ye.sine=Ye.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Qt,r.rounding=1,n=lit(r,a1e(r,n)),r.precision=e,r.rounding=t,zt(zd>2?n.neg():n,e,t,!0)):new r(NaN)};Ye.squareRoot=Ye.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(on=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=Qs(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=Lo((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(s=r,r=s.plus(Ar(o,s,n+2,1)).times(.5),Qs(s.d).slice(0,n)===(t=Qs(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(zt(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(zt(r,u+1,1),e=!r.times(r).eq(o));break}return on=!0,zt(r,u,c.rounding,e)};Ye.tangent=Ye.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=Ar(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,zt(zd==2||zd==4?n.neg():n,e,t,!0)):new r(NaN)};Ye.times=Ye.mul=function(e){var t,n,r,i,s,o,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=Lo(c.e/Qt)+Lo(e.e/Qt),u=d.length,l=h.length,u<l&&(s=d,d=h,h=s,o=u,u=l,l=o),s=[],o=u+l,r=o;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=s[i]+h[r]*d[i-r-1]+t,s[i--]=a%yc|0,t=a/yc|0;s[i]=(s[i]+t)%yc|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=u3(s,n),on?zt(e,f.precision,f.rounding):e};Ye.toBinary=function(e,t){return $U(this,2,e,t)};Ye.toDecimalPlaces=Ye.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(eu(e,0,Zm),t===void 0?t=r.rounding:eu(t,0,8),zt(n,e+n.e+1,t))};Ye.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Rf(r,!0):(eu(e,0,Zm),t===void 0?t=i.rounding:eu(t,0,8),r=zt(new i(r),e+1,t),n=Rf(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ye.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?n=Rf(i):(eu(e,0,Zm),t===void 0?t=s.rounding:eu(t,0,8),r=zt(new s(i),e+i.e+1,t),n=Rf(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ye.toFraction=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),t=new m(r),s=t.e=r1e(p)-h.e-1,o=s%Qt,t.d[0]=es(10,o<0?Qt+o:o),e==null)e=s>0?t:l;else{if(a=new m(e),!a.isInt()||a.lt(l))throw Error(Em+a);e=a.gt(t)?s>0?t:l:a}for(on=!1,a=new m(Qs(p)),c=m.precision,m.precision=s=p.length*Qt*2;f=Ar(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=Ar(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=Ar(l,r,s,1).minus(h).abs().cmp(Ar(u,n,s,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,on=!0,d};Ye.toHexadecimal=Ye.toHex=function(e,t){return $U(this,16,e,t)};Ye.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:eu(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(on=!1,n=Ar(n,e,0,t,1).times(e),on=!0,zt(n)):(e.s=n.s,n=e),n};Ye.toNumber=function(){return+this};Ye.toOctal=function(e,t){return $U(this,8,e,t)};Ye.toPower=Ye.pow=function(e){var t,n,r,i,s,o,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(es(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return zt(a,r,s);if(t=Lo(e.e/Qt),t>=e.d.length-1&&(n=l<0?-l:l)<=sit)return i=i1e(u,a,n,r),e.s<0?new u(1).div(i):zt(i,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=es(+a,l),t=n==0||!isFinite(n)?Lo(l*(Math.log("0."+Qs(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(on=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=W5(e.times(Np(a,r+n)),r),i.d&&(i=zt(i,r+5,1),RS(i.d,r,s)&&(t=r+10,i=zt(W5(e.times(Np(a,t+n)),t),t+5,1),+Qs(i.d).slice(r+1,r+15)+1==1e14&&(i=zt(i,r+1,0)))),i.s=o,on=!0,u.rounding=s,zt(i,r,s))};Ye.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Rf(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(eu(e,1,Zm),t===void 0?t=i.rounding:eu(t,0,8),r=zt(new i(r),e,t),n=Rf(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};Ye.toSignificantDigits=Ye.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(eu(e,1,Zm),t===void 0?t=r.rounding:eu(t,0,8)),zt(new r(n),e,t)};Ye.toString=function(){var e=this,t=e.constructor,n=Rf(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};Ye.truncated=Ye.trunc=function(){return zt(new this.constructor(this),this.e+1,1)};Ye.valueOf=Ye.toJSON=function(){var e=this,t=e.constructor,n=Rf(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Qs(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)r=e[t]+"",n=Qt-r.length,n&&(s+=dp(n)),s+=r;o=e[t],r=o+"",n=Qt-r.length,n&&(s+=dp(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function eu(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Em+e)}function RS(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Qt,i=0):(i=Math.ceil((t+1)/Qt),t%=Qt),s=es(10,Qt-t),a=e[i]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==es(10,t-2)-1||(a==s/2||a==0)&&(e[i+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==es(10,t-3)-1,o}function DD(e,t,n){for(var r,i=[0],s,o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=V5.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function ait(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/l3(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=_b(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var Ar=function(){function e(r,i,s){var o,a=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+a,r[u]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,u){var l,c,f,d,h,p,m,g,y,v,b,E,_,x,S,C,A,D,I,O,R=r.constructor,M=r.s==i.s?1:-1,F=r.d,P=i.d;if(!F||!F[0]||!P||!P[0])return new R(!r.s||!i.s||(F?P&&F[0]==P[0]:!P)?NaN:F&&F[0]==0||!P?M*0:M/0);for(u?(h=1,c=r.e-i.e):(u=yc,h=Qt,c=Lo(r.e/h)-Lo(i.e/h)),I=P.length,A=F.length,y=new R(M),v=y.d=[],f=0;P[f]==(F[f]||0);f++);if(P[f]>(F[f]||0)&&c--,s==null?(x=s=R.precision,o=R.rounding):a?x=s+(r.e-i.e)+1:x=s,x<0)v.push(1),p=!0;else{if(x=x/h+2|0,f=0,I==1){for(d=0,P=P[0],x++;(f<A||d)&&x--;f++)S=d*u+(F[f]||0),v[f]=S/P|0,d=S%P|0;p=d||f<A}else{for(d=u/(P[0]+1)|0,d>1&&(P=e(P,d,u),F=e(F,d,u),I=P.length,A=F.length),C=I,b=F.slice(0,I),E=b.length;E<I;)b[E++]=0;O=P.slice(),O.unshift(0),D=P[0],P[1]>=u/2&&++D;do d=0,l=t(P,b,I,E),l<0?(_=b[0],I!=E&&(_=_*u+(b[1]||0)),d=_/D|0,d>1?(d>=u&&(d=u-1),m=e(P,d,u),g=m.length,E=b.length,l=t(m,b,g,E),l==1&&(d--,n(m,I<g?O:P,g,u))):(d==0&&(l=d=1),m=P.slice()),g=m.length,g<E&&m.unshift(0),n(b,m,E,u),l==-1&&(E=b.length,l=t(P,b,I,E),l<1&&(d++,n(b,I<E?O:P,E,u))),E=b.length):l===0&&(d++,b=[0]),v[f++]=d,l&&b[0]?b[E++]=F[C]||0:(b=[F[C]],E=1);while((C++<A||b[0]!==void 0)&&x--);p=b[0]!==void 0}v[0]||v.shift()}if(h==1)y.e=c,Jye=p;else{for(f=1,d=v[0];d>=10;d/=10)f++;y.e=f+c*h-1,zt(y,a?s+y.e+1:s,o,p)}return y}}();function zt(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=t-i,s<0)s+=Qt,o=t,c=f[d=0],u=c/es(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Qt),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,s%=Qt,o=s-Qt+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;s%=Qt,o=s-Qt+i,u=o<0?0:c/es(10,i-o-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(o<0?c:c%es(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(s>0?o>0?c/es(10,i-o):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=es(10,(Qt-t%Qt)%Qt),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=d,a=1,d--):(f.length=d+1,a=es(10,Qt-s),f[d]=o>0?(c/es(10,i-o)%es(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,f[0]==yc&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=yc)break;f[d--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return on&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function Rf(e,t,n){if(!e.isFinite())return o1e(e);var r,i=e.e,s=Qs(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+dp(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+dp(-i-1)+s,n&&(r=n-o)>0&&(s+=dp(r))):i>=o?(s+=dp(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+dp(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=dp(r))),s}function u3(e,t){var n=e[0];for(t*=Qt;n>=10;n/=10)t++;return t}function KN(e,t,n){if(t>oit)throw on=!0,n&&(e.precision=n),Error(Zye);return zt(new e(GN),t,1,!0)}function uc(e,t,n){if(t>q5)throw Error(Zye);return zt(new e(YN),t,n,!0)}function r1e(e){var t=e.length-1,n=t*Qt+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function dp(e){for(var t="";e--;)t+="0";return t}function i1e(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/Qt+4);for(on=!1;;){if(n%2&&(s=s.times(t),Nte(s.d,o)&&(i=!0)),n=Lo(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}t=t.times(t),Nte(t.d,o)}return on=!0,s}function Ite(e){return e.d[e.d.length-1]&1}function s1e(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;)if(r=new e(t[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function W5(e,t){var n,r,i,s,o,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(on=!1,u=p):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(es(2,f))/Math.LN10*2+5|0,u+=r,n=s=o=new d(1),d.precision=u;;){if(s=zt(s.times(e),u,1),n=n.times(++c),a=o.plus(Ar(s,n,u,1)),Qs(a.d).slice(0,u)===Qs(o.d).slice(0,u)){for(i=f;i--;)o=zt(o.times(o),u,1);if(t==null)if(l<3&&RS(o.d,u-r,h,l))d.precision=u+=10,n=s=a=new d(1),c=0,l++;else return zt(o,d.precision=p,h,on=!0);else return d.precision=p,o}o=a}}function Np(e,t){var n,r,i,s,o,a,u,l,c,f,d,h=1,p=10,m=e,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(t==null?(on=!1,c=b):c=t,y.precision=c+=p,n=Qs(g),r=n.charAt(0),Math.abs(s=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=Qs(m.d),r=n.charAt(0),h++;s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1))}else return l=KN(y,c+2,b).times(s+""),m=Np(new y(r+"."+n.slice(1)),c-p).plus(l),y.precision=b,t==null?zt(m,b,v,on=!0):m;for(f=m,u=o=m=Ar(m.minus(1),m.plus(1),c,1),d=zt(m.times(m),c,1),i=3;;){if(o=zt(o.times(d),c,1),l=u.plus(Ar(o,new y(i),c,1)),Qs(l.d).slice(0,c)===Qs(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(KN(y,c+2,b).times(s+""))),u=Ar(u,new y(h),c,1),t==null)if(RS(u.d,c-p,v,a))y.precision=c+=p,l=o=m=Ar(f.minus(1),f.plus(1),c,1),d=zt(m.times(m),c,1),i=a=1;else return zt(u,y.precision=b,v,on=!0);else return y.precision=b,u;u=l,i+=2}}function o1e(e){return String(e.s*e.s/0)}function G5(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Qt,n<0&&(r+=Qt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Qt;r<i;)e.d.push(+t.slice(r,r+=Qt));t=t.slice(r),r=Qt-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),on&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function uit(e,t){var n,r,i,s,o,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),n1e.test(t))return G5(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(rit.test(t))n=16,t=t.toLowerCase();else if(nit.test(t))n=2;else if(iit.test(t))n=8;else throw Error(Em+t);for(s=t.search(/p/i),s>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,i=i1e(r,new r(n),s,s*2)),l=DD(t,n,yc),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(e.s*0):(e.e=u3(l,c),e.d=l,on=!1,o&&(e=Ar(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?es(2,u):Eb.pow(2,u))),on=!0,e)}function lit(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:_b(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/l3(5,n)),t=_b(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}function _b(e,t,n,r,i){var s,o,a,u,l=e.precision,c=Math.ceil(l/Qt);for(on=!1,u=n.times(n),a=new e(r);;){if(o=Ar(a.times(u),new e(t++*t++),l,1),a=i?r.plus(o):r.minus(o),r=Ar(o.times(u),new e(t++*t++),l,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return on=!0,o.d.length=c+1,o}function l3(e,t){for(var n=e;--t;)n*=e;return n}function a1e(e,t){var n,r=t.s<0,i=uc(e,e.precision,1),s=i.times(.5);if(t=t.abs(),t.lte(s))return zd=r?4:1,t;if(n=t.divToInt(i),n.isZero())zd=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(s))return zd=Ite(n)?r?2:3:r?4:1,t;zd=Ite(n)?r?1:4:r?3:2}return t.minus(i).abs()}function $U(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor,p=n!==void 0;if(p?(eu(n,1,Zm),r===void 0?r=h.rounding:eu(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=o1e(e);else{for(c=Rf(e),o=c.indexOf("."),p?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=DD(Rf(d),10,i),d.e=d.d.length),f=DD(c,10,i),s=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=Ar(e,d,n,r,0,i),f=e.d,s=e.e,l=Jye),o=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=V5.charAt(f[o]);if(p){if(u>1)if(t==16||t==8){for(o=t==16?4:3,--u;u%o;u++)c+="0";for(f=DD(c,i,t),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=V5.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Nte(e,t){if(e.length>t)return e.length=t,!0}function cit(e){return new this(e).abs()}function fit(e){return new this(e).acos()}function dit(e){return new this(e).acosh()}function hit(e,t){return new this(e).plus(t)}function pit(e){return new this(e).asin()}function mit(e){return new this(e).asinh()}function git(e){return new this(e).atan()}function yit(e){return new this(e).atanh()}function vit(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=uc(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?uc(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=uc(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(Ar(e,t,s,1)),t=uc(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Ar(e,t,s,1)),n}function bit(e){return new this(e).cbrt()}function _it(e){return zt(e=new this(e),e.e+1,2)}function Eit(e,t,n){return new this(e).clamp(t,n)}function wit(e){if(!e||typeof e!="object")throw Error(a3+"Object expected");var t,n,r,i=e.defaults===!0,s=["precision",1,Zm,"rounding",0,8,"toExpNeg",-sv,0,"toExpPos",0,sv,"maxE",0,sv,"minE",-sv,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=H5[n]),(r=e[n])!==void 0)if(Lo(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(Em+n+": "+r);if(n="crypto",i&&(this[n]=H5[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(e1e);else this[n]=!1;else throw Error(Em+n+": "+r);return this}function xit(e){return new this(e).cos()}function Sit(e){return new this(e).cosh()}function u1e(e){var t,n,r;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,kte(s)){l.s=s.s,on?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;on?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return G5(l,s.toString())}else if(u!=="string")throw Error(Em+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),n1e.test(s)?G5(l,s):uit(l,s)}if(i.prototype=Ye,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=wit,i.clone=u1e,i.isDecimal=kte,i.abs=cit,i.acos=fit,i.acosh=dit,i.add=hit,i.asin=pit,i.asinh=mit,i.atan=git,i.atanh=yit,i.atan2=vit,i.cbrt=bit,i.ceil=_it,i.clamp=Eit,i.cos=xit,i.cosh=Sit,i.div=Tit,i.exp=Cit,i.floor=Ait,i.hypot=Dit,i.ln=Iit,i.log=Nit,i.log10=Rit,i.log2=kit,i.max=Pit,i.min=Oit,i.mod=Mit,i.mul=$it,i.pow=Fit,i.random=Lit,i.round=Bit,i.sign=jit,i.sin=zit,i.sinh=Uit,i.sqrt=Vit,i.sub=Hit,i.sum=qit,i.tan=Wit,i.tanh=Git,i.trunc=Yit,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Tit(e,t){return new this(e).div(t)}function Cit(e){return new this(e).exp()}function Ait(e){return zt(e=new this(e),e.e+1,3)}function Dit(){var e,t,n=new this(0);for(on=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return on=!0,new this(1/0);n=t}return on=!0,n.sqrt()}function kte(e){return e instanceof Eb||e&&e.toStringTag===t1e||!1}function Iit(e){return new this(e).ln()}function Nit(e,t){return new this(e).log(t)}function kit(e){return new this(e).log(2)}function Rit(e){return new this(e).log(10)}function Pit(){return s1e(this,arguments,"lt")}function Oit(){return s1e(this,arguments,"gt")}function Mit(e,t){return new this(e).mod(t)}function $it(e,t){return new this(e).mul(t)}function Fit(e,t){return new this(e).pow(t)}function Lit(e){var t,n,r,i,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:eu(e,1,Zm),r=Math.ceil(e/Qt),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)i=t[s],i>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(e1e);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=Qt,r&&e&&(i=es(10,Qt-e),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=Qt)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Qt&&(n-=Qt-r)}return o.e=n,o.d=a,o}function Bit(e){return zt(e=new this(e),e.e+1,this.rounding)}function jit(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function zit(e){return new this(e).sin()}function Uit(e){return new this(e).sinh()}function Vit(e){return new this(e).sqrt()}function Hit(e,t){return new this(e).sub(t)}function qit(){var e=0,t=arguments,n=new this(t[e]);for(on=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return on=!0,zt(n,this.precision,this.rounding)}function Wit(e){return new this(e).tan()}function Git(e){return new this(e).tanh()}function Yit(e){return zt(e=new this(e),e.e+1,1)}Ye[Symbol.for("nodejs.util.inspect.custom")]=Ye.toString;Ye[Symbol.toStringTag]="Decimal";var Eb=Ye.constructor=u1e(H5);GN=new Eb(GN);YN=new Eb(YN);var Kit="BigNumber",Xit=["?on","config"],Qit=Kt(Kit,Xit,e=>{var{on:t,config:n}=e,r=Eb.clone({precision:n.precision,modulo:Eb.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),l1e={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},s=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var h=f*f;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,d){var h=Math.abs(f),p=Math.abs(d);return h<3e3&&p<3e3?Math.sqrt(h*h+p*p):(h<p?(h=p,p=f/d):p=d/f,h*Math.sqrt(1+p*p))},a=function(){throw SyntaxError("Invalid Param")};function u(f,d){var h=Math.abs(f),p=Math.abs(d);return f===0?Math.log(p):d===0?Math.log(h):h<3e3&&p<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var l=function(f,d){var h={re:0,im:0};if(f==null)h.re=h.im=0;else if(d!==void 0)h.re=f,h.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)h.re=f.re,h.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;h.re=f.abs*Math.cos(f.arg),h.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;h.re=f.r*Math.cos(f.phi),h.im=f.r*Math.sin(f.phi)}else f.length===2?(h.re=f[0],h.im=f[1]):a();break;case"string":h.im=h.re=0;var p=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,g=0;p===null&&a();for(var y=0;y<p.length;y++){var v=p[y];v===" "||v==="	"||v===`
`||(v==="+"?m++:v==="-"?g++:v==="i"||v==="I"?(m+g===0&&a(),p[y+1]!==" "&&!isNaN(p[y+1])?(h.im+=parseFloat((g%2?"-":"")+p[y+1]),y++):h.im+=parseFloat((g%2?"-":"")+"1"),m=g=0):((m+g===0||isNaN(v))&&a(),p[y+1]==="i"||p[y+1]==="I"?(h.im+=parseFloat((g%2?"-":"")+v),y++):h.re+=parseFloat((g%2?"-":"")+v),m=g=0))}m+g>0&&a();break;case"number":h.im=0,h.re=f;break;default:a()}return isNaN(h.re)||isNaN(h.im),h};function c(f,d){if(!(this instanceof c))return new c(f,d);var h=l(f,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(f,d){var h=new c(f,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;f=this.re,d=this.im;var p=h.re,m=h.im,g,y;return m===0?new c(f/p,d/p):Math.abs(p)<Math.abs(m)?(y=p/m,g=p*y+m,new c((f*y+d)/g,(d*y-f)/g)):(y=m/p,g=m*y+p,new c((f+d*y)/g,(d-f*y)/g))},pow:function(f,d){var h=new c(f,d);if(f=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&f>0)return new c(Math.pow(f,h.re),0);if(f===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(f===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var p=Math.atan2(d,f),m=u(f,d);return f=Math.exp(h.re*m-h.im*p),d=h.im*m+h.re*p,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,h=this.abs(),p,m;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);p=.5*Math.sqrt(2*(h+f))}else p=Math.abs(d)/Math.sqrt(2*(h-f));return f<=0?m=.5*Math.sqrt(2*(h-f)):m=Math.abs(d)/Math.sqrt(2*(h+f)),new c(p,d<0?-m:m)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+s(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(u(f,d),Math.atan2(d,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*r(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*r(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)+r(d);return new c(Math.sin(f)/h,i(d)/h)},cot:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)-r(d);return new c(-Math.sin(f)/h,i(d)/h)},sec:function(){var f=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(d)/h,Math.sin(f)*i(d)/h)},csc:function(){var f=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(d)/h,-Math.cos(f)*i(d)/h)},asin:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),p=new c(h.re-d,h.im+f).log();return new c(p.im,-p.re)},acos:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),p=new c(h.re-d,h.im+f).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=f*f+(1-d)*(1-d),p=new c((1-d*d-f*f)/h,-2*f/h).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),r(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(r(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,h=r(f)+Math.cos(d);return new c(i(f)/h,Math.sin(d)/h)},coth:function(){var f=2*this.re,d=2*this.im,h=r(f)-Math.cos(d);return new c(i(f)/h,-Math.sin(d)/h)},csch:function(){var f=this.re,d=this.im,h=Math.cos(2*d)-r(2*f);return new c(-2*i(f)*Math.cos(d)/h,2*r(f)*Math.sin(d)/h)},sech:function(){var f=this.re,d=this.im,h=Math.cos(2*d)+r(2*f);return new c(2*r(f)*Math.cos(d)/h,-2*i(f)*Math.sin(d)/h)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,h=f>1&&d===0,p=1-f,m=1+f,g=p*p+d*d,y=g!==0?new c((m*p-d*d)/g,(d*p+m*d)/g):new c(f!==-1?f/0:0,d!==0?d/0:0),v=y.re;return y.re=u(y.re,y.im)/2,y.im=Math.atan2(y.im,v)/2,h&&(y.im=-y.im),y},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,h=f*f+d*d;return new c(f/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var h=new c(f,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+f:(f!==0?(h+=f,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,e.exports=c})()})(l1e);var Jit=l1e.exports;const zs=pa(Jit);var Zit="Complex",est=[],tst=Kt(Zit,est,()=>(Object.defineProperty(zs,"name",{value:"Complex"}),zs.prototype.constructor=zs,zs.prototype.type="Complex",zs.prototype.isComplex=!0,zs.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},zs.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},zs.prototype.format=function(e){var t="",n=this.im,r=this.re,i=U5(this.re,e),s=U5(this.im,e),o=kr(e)?e:e?e.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=s+"i":n<0?n===-1?t=i+" - i":t=i+" - "+s.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+s+"i",t},zs.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return zs(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(kr(n)){if(Hye(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),kr(r))return new zs({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},zs.prototype.valueOf=zs.prototype.toString,zs.fromJSON=function(e){return new zs(e)},zs.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},zs),{isClass:!0});/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var nst=2e3,Nt={s:1,n:0,d:1};function yd(e,t){if(isNaN(e=parseInt(e,10)))throw ID();return e*t}function si(e,t){if(t===0)throw FU();var n=Object.create(xo.prototype);n.s=e<0?-1:1,e=e<0?-e:e;var r=ov(e,t);return n.n=e/r,n.d=t/r,n}function Rte(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r===0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var fu=function(e,t){var n=0,r=1,i=1,s=0,o=0,a=0,u=1,l=1,c=0,f=1,d=1,h=1,p=1e7,m;if(e!=null)if(t!==void 0){if(n=e,r=t,i=n*r,n%1!==0||r%1!==0)throw ost()}else switch(typeof e){case"object":{if("d"in e&&"n"in e)n=e.n,r=e.d,"s"in e&&(n*=e.s);else if(0 in e)n=e[0],1 in e&&(r=e[1]);else throw ID();i=n*r;break}case"number":{if(e<0&&(i=e,e=-e),e%1===0)n=e;else if(e>0){for(e>=1&&(l=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)),e/=l);f<=p&&h<=p;)if(m=(c+d)/(f+h),e===m){f+h<=p?(n=c+d,r=f+h):h>f?(n=d,r=h):(n=c,r=f);break}else e>m?(c+=d,f+=h):(d+=c,h+=f),f>p?(n=d,r=h):(n=c,r=f);n*=l}else(isNaN(e)||isNaN(t))&&(r=n=NaN);break}case"string":{if(f=e.match(/\d+|./g),f===null)throw ID();if(f[c]==="-"?(i=-1,c++):f[c]==="+"&&c++,f.length===c+1?o=yd(f[c++],i):f[c+1]==="."||f[c]==="."?(f[c]!=="."&&(s=yd(f[c++],i)),c++,(c+1===f.length||f[c+1]==="("&&f[c+3]===")"||f[c+1]==="'"&&f[c+3]==="'")&&(o=yd(f[c],i),u=Math.pow(10,f[c].length),c++),(f[c]==="("&&f[c+2]===")"||f[c]==="'"&&f[c+2]==="'")&&(a=yd(f[c+1],i),l=Math.pow(10,f[c+1].length)-1,c+=3)):f[c+1]==="/"||f[c+1]===":"?(o=yd(f[c],i),u=yd(f[c+2],1),c+=3):f[c+3]==="/"&&f[c+1]===" "&&(s=yd(f[c],i),o=yd(f[c+2],i),u=yd(f[c+4],1),c+=5),f.length<=c){r=u*l,i=n=a+r*s+l*o;break}}default:throw ID()}if(r===0)throw FU();Nt.s=i<0?-1:1,Nt.n=Math.abs(n),Nt.d=Math.abs(r)};function rst(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)t&1&&(r=r*e%n);return r}function ist(e,t){for(;t%2===0;t/=2);for(;t%5===0;t/=5);if(t===1)return 0;for(var n=10%t,r=1;n!==1;r++)if(n=n*10%t,r>nst)return 0;return r}function sst(e,t,n){for(var r=1,i=rst(10,n,t),s=0;s<300;s++){if(r===i)return s;r=r*10%t,i=i*10%t}return 0}function ov(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function xo(e,t){if(fu(e,t),this instanceof xo)e=ov(Nt.d,Nt.n),this.s=Nt.s,this.n=Nt.n/e,this.d=Nt.d/e;else return si(Nt.s*Nt.n,Nt.d)}var FU=function(){return new Error("Division by Zero")},ID=function(){return new Error("Invalid argument")},ost=function(){return new Error("Parameters must be integer")};xo.prototype={s:1,n:0,d:1,abs:function(){return si(this.n,this.d)},neg:function(){return si(-this.s*this.n,this.d)},add:function(e,t){return fu(e,t),si(this.s*this.n*Nt.d+Nt.s*this.d*Nt.n,this.d*Nt.d)},sub:function(e,t){return fu(e,t),si(this.s*this.n*Nt.d-Nt.s*this.d*Nt.n,this.d*Nt.d)},mul:function(e,t){return fu(e,t),si(this.s*Nt.s*this.n*Nt.n,this.d*Nt.d)},div:function(e,t){return fu(e,t),si(this.s*Nt.s*this.n*Nt.d,this.d*Nt.n)},clone:function(){return si(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new xo(NaN);if(e===void 0)return si(this.s*this.n%this.d,1);if(fu(e,t),Nt.n===0&&this.d===0)throw FU();return si(this.s*(Nt.d*this.n)%(Nt.n*this.d),Nt.d*this.d)},gcd:function(e,t){return fu(e,t),si(ov(Nt.n,this.n)*ov(Nt.d,this.d),Nt.d*this.d)},lcm:function(e,t){return fu(e,t),Nt.n===0&&this.n===0?si(0,1):si(Nt.n*this.n,ov(Nt.n,this.n)*ov(Nt.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new xo(NaN):si(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new xo(NaN):si(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new xo(NaN):si(Math.round(e*this.s*this.n/this.d),e)},roundTo:function(e,t){return fu(e,t),si(this.s*Math.round(this.n*Nt.d/(this.d*Nt.n))*Nt.n,Nt.d)},inverse:function(){return si(this.s*this.d,this.n)},pow:function(e,t){if(fu(e,t),Nt.d===1)return Nt.s<0?si(Math.pow(this.s*this.d,Nt.n),Math.pow(this.n,Nt.n)):si(Math.pow(this.s*this.n,Nt.n),Math.pow(this.d,Nt.n));if(this.s<0)return null;var n=Rte(this.n),r=Rte(this.d),i=1,s=1;for(var o in n)if(o!=="1"){if(o==="0"){i=0;break}if(n[o]*=Nt.n,n[o]%Nt.d===0)n[o]/=Nt.d;else return null;i*=Math.pow(o,n[o])}for(var o in r)if(o!=="1"){if(r[o]*=Nt.n,r[o]%Nt.d===0)r[o]/=Nt.d;else return null;s*=Math.pow(o,r[o])}return Nt.s<0?si(s,i):si(i,s)},equals:function(e,t){return fu(e,t),this.s*this.n*Nt.d===Nt.s*Nt.n*this.d},compare:function(e,t){fu(e,t);var n=this.s*this.n*Nt.d-Nt.s*Nt.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var i=si(n[r-1],1),s=r-2;s>=0;s--)i=i.inverse().add(n[s]);if(Math.abs(i.sub(t).valueOf())<e)return i.mul(this.s)}return this},divisible:function(e,t){return fu(e,t),!(!(Nt.n*this.d)||this.n*Nt.d%(Nt.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do r.push(Math.floor(t/n)),e=t%n,t=n,n=e;while(t!==1);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=ist(t,n),i=sst(t,n,r),s=this.s<0?"-":"";if(s+=t/n|0,t%=n,t*=10,t&&(s+="."),r){for(var o=i;o--;)s+=t/n|0,t%=n,t*=10;s+="(";for(var o=r;o--;)s+=t/n|0,t%=n,t*=10;s+=")"}else for(var o=e;t&&o--;)s+=t/n|0,t%=n,t*=10;return s}};var ast="Fraction",ust=[],lst=Kt(ast,ust,()=>(Object.defineProperty(xo,"name",{value:"Fraction"}),xo.prototype.constructor=xo,xo.prototype.type="Fraction",xo.prototype.isFraction=!0,xo.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},xo.fromJSON=function(e){return new xo(e)},xo),{isClass:!0}),cst="Matrix",fst=[],dst=Kt(cst,fst,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function BF(e,t,n){var r=e.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Hi(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),s="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(s);case 8:return"".concat(e.toOctal()).concat(s);case 16:return"".concat(e.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(t," not supported "))}}function hst(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=Gye(t);switch(n){case"fixed":return mst(e,r);case"exponential":return Pte(e,r);case"engineering":return pst(e,r);case"bin":return BF(e,2,i);case"oct":return BF(e,8,i);case"hex":return BF(e,16,i);case"auto":{var s=Ote(t==null?void 0:t.lowerExp,-3),o=Ote(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=s&&l<o?a=u.toFixed():a=Pte(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function pst(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);if(s.includes("e")){var o=e.constructor;s=new o(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function Pte(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function mst(e,t){return e.toFixed(t)}function Ote(e,t){return kr(e)?e:Ti(e)?e.toNumber():t}function Ui(e,t){var n=gst(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function gst(e,t){if(typeof e=="number")return U5(e,t);if(Ti(e))return hst(e,t);if(yst(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return c1e(e,t);if(tf(e))return Mte(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>Mte(r)+": "+Ui(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function Mte(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in $te?$te[i]:i,r++}return'"'+n+'"'}var $te={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function c1e(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=c1e(e[i],t);return n+="]",n}else return Ui(e,t)}function yst(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function ur(e,t,n){if(!(this instanceof ur))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}ur.prototype=new RangeError;ur.prototype.constructor=RangeError;ur.prototype.name="DimensionError";ur.prototype.isDimensionError=!0;function jh(e,t,n){if(!(this instanceof jh))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}jh.prototype=new RangeError;jh.prototype.constructor=RangeError;jh.prototype.name="IndexError";jh.prototype.isIndexError=!0;function Ro(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function f1e(e,t,n){var r,i=e.length;if(i!==t[n])throw new ur(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new ur(t.length-1,t.length,"<");f1e(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new ur(t.length+1,t.length,">")}function Fte(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new ur(e.length,0)}else f1e(e,t,0)}function ui(e,t){if(e!==void 0){if(!kr(e)||!Hi(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new jh(e,t)}}function Y5(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!kr(i)||!Hi(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ui(t)+")")}),(kr(e)||Ti(e))&&(e=[e]);var r=n!==void 0?n:0;return K5(e,t,0,r),e}function K5(e,t,n,r){var i,s,o=e.length,a=t[n],u=Math.min(o,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),K5(s,t,l,r);for(i=u;i<a;i++)s=[],e[i]=s,K5(s,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function d1e(e,t){var n=bst(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new ur(0,r,"!=");t=LU(t,r);var i=h1e(t);if(r!==i)throw new ur(i,r,"!=");try{return vst(n,t)}catch(s){throw s instanceof ur?new ur(i,r,"!="):s}}function LU(e,t){var n=h1e(e),r=e.slice(),i=-1,s=e.indexOf(i),o=e.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,u=t%n===0;if(a)if(u)r[s]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function h1e(e){return e.reduce((t,n)=>t*n,1)}function vst(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var s=t[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}function p1e(e,t,n,r){var i=r||Ro(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=m1e(e,t,0);i.length<t;)i.push(1);return e}function m1e(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=m1e(e[r],t,s)}else for(var o=n;o<t;o++)e=[e];return e}function bst(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function XN(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?XN(s,t):t(s);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function g1e(e,t,n,r){if(r<n){if(e.length!==t.length)throw new ur(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=g1e(e[s],t[s],n,r+1);return i}else return e.concat(t)}function y1e(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return g1e(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function _st(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),o=0;o<t.length;o++)for(var a=t[o],u=r[o],l=0;l<u;l++){var c=i-u+l;a[l]>s[c]&&(s[c]=a[l])}for(var f=0;f<t.length;f++)QN(t[f],s);return s}function QN(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var s=n-r+i;if(e[i]<t[s]&&e[i]>1||e[i]>t[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[s]))}}function Lte(e,t){var n=Ro(e);if(bb(n,t))return e;QN(n,t);var r=_st(n,t),i=r.length,s=[...Array(i-n.length).fill(1),...n],o=wst(e);n.length<i&&(o=d1e(o,s),n=Ro(o));for(var a=0;a<i;a++)n[a]<r[a]&&(o=Est(o,r[a],a),n=Ro(o));return o}function Est(e,t,n){return y1e(...Array(t).fill(e),n)}function wst(e){return cS([],e)}function v1e(e){return Object.keys(e.signatures||{}).reduce(function(t,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)}var xst="DenseMatrix",Sst=["Matrix"],Tst=Kt(xst,Sst,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!tf(f))throw new Error("Invalid datatype: "+f);if(fi(c))c.type==="DenseMatrix"?(this._data=Ei(c._data),this._size=Ei(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&ai(c.data)&&ai(c.size))this._data=c.data,this._size=c.size,Fte(this._data,this._size),this._datatype=f||c.datatype;else if(ai(c))this._data=l(c),this._size=Ro(this._data),Fte(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+gc(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return XN(this._data,gc)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!ai(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new ur(c.length,this._size.length);for(var f=0;f<c.length;f++)ui(c[f],this._size[f]);for(var d=this._data,h=0,p=c.length;h<p;h++){var m=c[h];ui(m,d.length),d=d[m]}return d},n.prototype.set=function(c,f,d){if(!ai(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new ur(c.length,this._size.length,"<");var h,p,m,g=c.map(function(v){return v+1});u(this,g,d);var y=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],ui(m,y.length),y=y[m];return m=c[c.length-1],ui(m,y.length),y[m]=f,this};function r(c,f){if(!OU(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new ur(h.length,c._size.length);for(var p=f.min(),m=f.max(),g=0,y=c._size.length;g<y;g++)ui(p[g],c._size[g]),ui(m[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(g){return ui(g,c.length),c[g]}).valueOf():m.map(function(g){ui(g,c.length);var y=c[g];return i(y,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),g;if(fi(d)?(g=d.size(),d=d.valueOf()):g=Ro(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!bb(g,p))try{g.length===0?d=Lte([d],p):d=Lte(d,p),g=Ro(d)}catch{}if(p.length<c._size.length)throw new ur(p.length,c._size.length,"<");if(g.length<p.length){for(var y=0,v=0;p[y]===1&&g[y]===1;)y++;for(;p[y]===1;)v++,y++;d=p1e(d,p.length,v,g)}if(!bb(p,g))throw new ur(p,g,">");var b=f.max().map(function(x){return x+1});u(c,b,h);var E=p.length,_=0;o(c._data,f,d,E,_)}return c}function o(c,f,d,h,p){var m=p===h-1,g=f.dimension(p);m?g.forEach(function(y,v){ui(y),c[y]=d[v[0]]}):g.forEach(function(y,v){ui(y),o(c[y],f,d[v[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!vb(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return a(p,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;ai(h);)h=h[0];return h}return c._size=f.slice(0),c._data=Y5(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=d1e(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=LU(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,g=f.length;m<g;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:Ei(this._data),size:Ei(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,d=v1e(c),h=function g(y,v){return ai(y)?y.map(function(b,E){return g(b,v.concat(E))}):d===1?c(y):d===2?c(y,v):c(y,v,f)},p=h(this._data,[]),m=this._datatype!==void 0?XN(p,gc):void 0;return new n(p,m)},n.prototype.forEach=function(c){var f=this,d=function h(p,m){ai(p)?p.forEach(function(g,y){h(g,m.concat(y))}):c(p,m,f)};d(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(ai(d))for(var p=0;p<d.length;p++)yield*f(d[p],h.concat(p));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(y){var v=h.map(b=>[b[y]]);f.push(new n(v,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return Ei(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Ui(this._data,c)},n.prototype.toString=function(){return Ui(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Ti(c)&&(c=c.toNumber()),!kr(c)||!Hi(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),g=[],y=0;y<m;y++)g[y]=this._data[y+d][y+f];return new n({data:g,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!ai(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(S){if(Ti(S)&&(S=S.toNumber()),!kr(S)||!Hi(S)||S<1)throw new Error("Size values must be positive integers");return S}),d){if(Ti(d)&&(d=d.toNumber()),!kr(d)||!Hi(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,g=c[0],y=c[1],v=Math.min(g-m,y-p),b;if(ai(f)){if(f.length!==v)throw new Error("Invalid value array length");b=function(C){return f[C]}}else if(fi(f)){var E=f.size();if(E.length!==1||E[0]!==v)throw new Error("Invalid matrix length");b=function(C){return f.get([C])}}else b=function(){return f};h||(h=Ti(b(0))?b(0).mul(0):0);var _=[];if(c.length>0){_=Y5(_,c,h);for(var x=0;x<v;x++)_[x+m][x+p]=b(x)}return new n({data:_,size:[g,y]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!kr(c)||!Hi(c)||!kr(f)||!Hi(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ui(c,this._size[0]),ui(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return fi(c)?l(c.valueOf()):ai(c)?c.map(l):c}return n},{isClass:!0});function Cst(e){var t=e.length,n=e[0].length,r,i,s=[];for(i=0;i<n;i++){var o=[];for(r=0;r<t;r++)o.push(e[r][i]);s.push(o)}return s}function Ast(e){for(var t=0;t<e.length;t++)if(vb(e[t]))return!0;return!1}function JN(e,t){fi(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?JN(i,t):t(i)}}function Jf(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return Jf(r,t)}):t(e)}function Dst(e,t,n){var r=Array.isArray(e)?Ro(e):e.size();if(t<0||t>=r.length)throw new jh(t,r.length);return fi(e)?e.create(ZN(e.valueOf(),t,n)):ZN(e,t,n)}function ZN(e,t,n){var r,i,s,o;if(t<=0)if(Array.isArray(e[0])){for(o=Cst(e),i=[],r=0;r<o.length;r++)i[r]=ZN(o[r],t-1,n);return i}else{for(s=e[0],r=1;r<e.length;r++)s=n(s,e[r]);return s}else{for(i=[],r=0;r<e.length;r++)i[r]=ZN(e[r],t-1,n);return i}}var Bte="isInteger",Ist=["typed"],Nst=Kt(Bte,Ist,e=>{var{typed:t}=e;return t(Bte,{number:Hi,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),b1e="number",BU="number, number";function _1e(e){return Math.abs(e)}_1e.signature=b1e;function E1e(e,t){return e+t}E1e.signature=BU;function w1e(e,t){return e-t}w1e.signature=BU;function x1e(e,t){return e*t}x1e.signature=BU;function S1e(e){return-e}S1e.signature=b1e;function kst(e,t){return Math.log(e)}var Rst="number";function T1e(e){return Number.isNaN(e)}T1e.signature=Rst;function Pst(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var jte="isZero",Ost=["typed","equalScalar"],Mst=Kt(jte,Ost,e=>{var{typed:t,equalScalar:n}=e;return t(jte,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))})}),zte="isNaN",$st=["typed"],Fst=Kt(zte,$st,e=>{var{typed:t}=e;return t(zte,{number:T1e,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})});function Lst(e,t,n,r){return WN(e.re,t.re,n,r)&&WN(e.im,t.im,n,r)}var Bst=Kt("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),ek="equalScalar",jst=["typed","config"],zst=Kt(ek,jst,e=>{var{typed:t,config:n}=e,r=Bst({typed:t});return t(ek,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return WN(s,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||Pst(s,o,n.relTol,n.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return Lst(s,o,n.relTol,n.absTol)}},r)});Kt(ek,["typed","config"],e=>{var{typed:t,config:n}=e;return t(ek,{"number, number":function(i,s){return WN(i,s,n.relTol,n.absTol)}})});var Ust="SparseMatrix",Vst=["typed","equalScalar","Matrix"],Hst=Kt(Ust,Vst,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!tf(g))throw new Error("Invalid datatype: "+g);if(fi(m))s(this,m,g);else if(m&&ai(m.index)&&ai(m.ptr)&&ai(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(ai(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+gc(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(m,g,y){g.type==="SparseMatrix"?(m._values=g._values?Ei(g._values):void 0,m._index=Ei(g._index),m._ptr=Ei(g._ptr),m._size=Ei(g._size),m._datatype=y||g._datatype):o(m,g.valueOf(),y||g._datatype)}function o(m,g,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var v=g.length,b=0,E=n,_=0;if(tf(y)&&(E=t.find(n,[y,y])||n,_=t.convert(0,y)),v>0){var x=0;do{m._ptr.push(m._index.length);for(var S=0;S<v;S++){var C=g[S];if(ai(C)){if(x===0&&b<C.length&&(b=C.length),x<C.length){var A=C[x];E(A,_)||(m._values.push(A),m._index.push(S))}}else x===0&&b<1&&(b=1),E(C,_)||(m._values.push(C),m._index.push(S))}x++}while(x<b)}m._ptr.push(m._index.length),m._size=[v,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return XN(this._values,gc)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,m);case 2:case 3:return u(this,m,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function a(m,g){if(!OU(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return m.get(g.min());var v=g.size();if(v.length!==m._size.length)throw new ur(v.length,m._size.length);var b,E,_,x,S=g.min(),C=g.max();for(b=0,E=m._size.length;b<E;b++)ui(S[b],m._size[b]),ui(C[b],m._size[b]);var A=m._values,D=m._index,I=m._ptr,O=g.dimension(0),R=g.dimension(1),M=[],F=[];O.forEach(function(V,$){F[V]=$[0],M[V]=!0});var P=A?[]:void 0,j=[],z=[];return R.forEach(function(V){for(z.push(j.length),_=I[V],x=I[V+1];_<x;_++)b=D[_],M[b]===!0&&(j.push(F[b]),P&&P.push(A[_]))}),z.push(j.length),new i({values:P,index:j,ptr:z,size:v,datatype:m._datatype})}function u(m,g,y,v){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var b=g.size(),E=g.isScalar(),_;if(fi(y)?(_=y.size(),y=y.toArray()):_=Ro(y),E){if(_.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),y,v)}else{if(b.length!==1&&b.length!==2)throw new ur(b.length,m._size.length,"<");if(_.length<b.length){for(var x=0,S=0;b[x]===1&&_[x]===1;)x++;for(;b[x]===1;)S++,x++;y=p1e(y,b.length,S,_)}if(!bb(b,_))throw new ur(b,_,">");if(b.length===1){var C=g.dimension(0);C.forEach(function(I,O){ui(I),m.set([I,0],y[O[0]],v)})}else{var A=g.dimension(0),D=g.dimension(1);A.forEach(function(I,O){ui(I),D.forEach(function(R,M){ui(R),m.set([I,R],y[O[0]][M[0]],v)})})}}return m}i.prototype.get=function(m){if(!ai(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new ur(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],y=m[1];ui(g,this._size[0]),ui(y,this._size[1]);var v=l(g,this._ptr[y],this._ptr[y+1],this._index);return v<this._ptr[y+1]&&this._index[v]===g?this._values[v]:0},i.prototype.set=function(m,g,y){if(!ai(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new ur(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var v=m[0],b=m[1],E=this._size[0],_=this._size[1],x=n,S=0;tf(this._datatype)&&(x=t.find(n,[this._datatype,this._datatype])||n,S=t.convert(0,this._datatype)),(v>E-1||b>_-1)&&(d(this,Math.max(v+1,E),Math.max(b+1,_),y),E=this._size[0],_=this._size[1]),ui(v,E),ui(b,_);var C=l(v,this._ptr[b],this._ptr[b+1],this._index);return C<this._ptr[b+1]&&this._index[C]===v?x(g,S)?c(C,b,this._values,this._index,this._ptr):this._values[C]=g:x(g,S)||f(C,v,b,g,this._values,this._index,this._ptr),this};function l(m,g,y,v){if(y-g===0)return y;for(var b=g;b<y;b++)if(v[b]===m)return b;return g}function c(m,g,y,v,b){y.splice(m,1),v.splice(m,1);for(var E=g+1;E<b.length;E++)b[E]--}function f(m,g,y,v,b,E,_){b.splice(m,0,v),E.splice(m,0,g);for(var x=y+1;x<_.length;x++)_[x]++}i.prototype.resize=function(m,g,y){if(!vb(m))throw new TypeError("Array or Matrix expected");var v=m.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(v.length!==2)throw new Error("Only two dimensions matrix are supported");v.forEach(function(E){if(!kr(E)||!Hi(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ui(v)+")")});var b=y?this.clone():this;return d(b,v[0],v[1],g)};function d(m,g,y,v){var b=v||0,E=n,_=0;tf(m._datatype)&&(E=t.find(n,[m._datatype,m._datatype])||n,_=t.convert(0,m._datatype),b=t.convert(b,m._datatype));var x=!E(b,_),S=m._size[0],C=m._size[1],A,D,I;if(y>C){for(D=C;D<y;D++)if(m._ptr[D]=m._values.length,x)for(A=0;A<S;A++)m._values.push(b),m._index.push(A);m._ptr[y]=m._values.length}else y<C&&(m._ptr.splice(y+1,C-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(C=y,g>S){if(x){var O=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]+O,I=m._ptr[D+1]+O;var R=0;for(A=S;A<g;A++,R++)m._values.splice(I+R,0,b),m._index.splice(I+R,0,A),O++}m._ptr[C]=m._values.length}}else if(g<S){var M=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]-M;var F=m._ptr[D],P=m._ptr[D+1]-M;for(I=F;I<P;I++)A=m._index[I],A>g-1&&(m._values.splice(I,1),m._index.splice(I,1),M++)}m._ptr[D]=m._values.length}return m._size[0]=g,m._size[1]=y,m}i.prototype.reshape=function(m,g){if(!ai(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(V){if(!kr(V)||!Hi(V)||V<=-2||V===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ui(m)+")")});var y=this._size[0]*this._size[1];m=LU(m,y);var v=m[0]*m[1];if(y!==v)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return b;for(var E=[],_=0;_<b._ptr.length;_++)for(var x=0;x<b._ptr[_+1]-b._ptr[_];x++)E.push(_);for(var S=b._values.slice(),C=b._index.slice(),A=0;A<b._index.length;A++){var D=C[A],I=E[A],O=D*b._size[1]+I;E[A]=O%m[1],C[A]=Math.floor(O/m[1])}b._values.length=0,b._index.length=0,b._ptr.length=m[1]+1,b._size=m.slice();for(var R=0;R<b._ptr.length;R++)b._ptr[R]=0;for(var M=0;M<S.length;M++){var F=C[M],P=E[M],j=S[M],z=l(F,b._ptr[P],b._ptr[P+1],b._index);f(z,F,P,j,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var m=new i({values:this._values?Ei(this._values):void 0,index:Ei(this._index),ptr:Ei(this._ptr),size:Ei(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,v=this._size[0],b=this._size[1],E=v1e(m),_=function(S,C,A){return E===1?m(S):E===2?m(S,[C,A]):m(S,[C,A],y)};return h(this,0,v-1,0,b-1,_,g)};function h(m,g,y,v,b,E,_){var x=[],S=[],C=[],A=n,D=0;tf(m._datatype)&&(A=t.find(n,[m._datatype,m._datatype])||n,D=t.convert(0,m._datatype));for(var I=function(B,q,Y){B=E(B,q,Y),A(B,D)||(x.push(B),S.push(q))},O=v;O<=b;O++){C.push(x.length);var R=m._ptr[O],M=m._ptr[O+1];if(_)for(var F=R;F<M;F++){var P=m._index[F];P>=g&&P<=y&&I(m._values[F],P-g,O-v)}else{for(var j={},z=R;z<M;z++){var V=m._index[z];j[V]=m._values[z]}for(var $=g;$<=y;$++){var U=$ in j?j[$]:0;I(U,$-g,O-v)}}}return C.push(x.length),new i({values:x,index:S,ptr:C,size:[y-g+1,b-v+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,v=this._size[0],b=this._size[1],E=0;E<b;E++){var _=this._ptr[E],x=this._ptr[E+1];if(g)for(var S=_;S<x;S++){var C=this._index[S];m(this._values[S],[C,E],y)}else{for(var A={},D=_;D<x;D++){var I=this._index[D];A[I]=this._values[D]}for(var O=0;O<v;O++){var R=O in A?A[O]:0;m(R,[O,E],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var y=this._ptr[g],v=this._ptr[g+1],b=y;b<v;b++){var E=this._index[b];yield{value:this._values[b],index:[E,g]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,g,y,v,b){var E=v[0],_=v[1],x=[],S,C;for(S=0;S<E;S++)for(x[S]=[],C=0;C<_;C++)x[S][C]=0;for(C=0;C<_;C++)for(var A=y[C],D=y[C+1],I=A;I<D;I++)S=g[I],x[S][C]=m?b?Ei(m[I]):m[I]:1;return x}return i.prototype.format=function(m){for(var g=this._size[0],y=this._size[1],v=this.density(),b="Sparse Matrix ["+Ui(g,m)+" x "+Ui(y,m)+"] density: "+Ui(v,m)+`
`,E=0;E<y;E++)for(var _=this._ptr[E],x=this._ptr[E+1],S=_;S<x;S++){var C=this._index[S];b+=`
    (`+Ui(C,m)+", "+Ui(E,m)+") ==> "+(this._values?Ui(this._values[S],m):"X")}return b},i.prototype.toString=function(){return Ui(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(Ti(m)&&(m=m.toNumber()),!kr(m)||!Hi(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,y=m<0?-m:0,v=this._size[0],b=this._size[1],E=Math.min(v-y,b-g),_=[],x=[],S=[];S[0]=0;for(var C=g;C<b&&_.length<E;C++)for(var A=this._ptr[C],D=this._ptr[C+1],I=A;I<D;I++){var O=this._index[I];if(O===C-g+y){_.push(this._values[I]),x[_.length-1]=O-y;break}}return S.push(_.length),new i({values:_,index:x,ptr:S,size:[E,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,y,v,b){if(!ai(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(V){if(Ti(V)&&(V=V.toNumber()),!kr(V)||!Hi(V)||V<1)throw new Error("Size values must be positive integers");return V}),y){if(Ti(y)&&(y=y.toNumber()),!kr(y)||!Hi(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var E=n,_=0;tf(b)&&(E=t.find(n,[b,b])||n,_=t.convert(0,b));var x=y>0?y:0,S=y<0?-y:0,C=m[0],A=m[1],D=Math.min(C-S,A-x),I;if(ai(g)){if(g.length!==D)throw new Error("Invalid value array length");I=function($){return g[$]}}else if(fi(g)){var O=g.size();if(O.length!==1||O[0]!==D)throw new Error("Invalid matrix length");I=function($){return g.get([$])}}else I=function(){return g};for(var R=[],M=[],F=[],P=0;P<A;P++){F.push(R.length);var j=P-x;if(j>=0&&j<D){var z=I(j);E(z,_)||(M.push(j+S),R.push(z))}}return F.push(R.length),new i({values:R,index:M,ptr:F,size:[C,A]})},i.prototype.swapRows=function(m,g){if(!kr(m)||!Hi(m)||!kr(g)||!Hi(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ui(m,this._size[0]),ui(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,y,v,b){for(var E=v[m],_=v[m+1],x=E;x<_;x++)b(y[x],g[x])},i._swapRows=function(m,g,y,v,b,E){for(var _=0;_<y;_++){var x=E[_],S=E[_+1],C=l(m,x,S,b),A=l(g,x,S,b);if(C<S&&A<S&&b[C]===m&&b[A]===g){if(v){var D=v[C];v[C]=v[A],v[A]=D}continue}if(C<S&&b[C]===m&&(A>=S||b[A]!==g)){var I=v?v[C]:void 0;b.splice(A,0,g),v&&v.splice(A,0,I),b.splice(A<=C?C+1:C,1),v&&v.splice(A<=C?C+1:C,1);continue}if(A<S&&b[A]===g&&(C>=S||b[C]!==m)){var O=v?v[A]:void 0;b.splice(C,0,m),v&&v.splice(C,0,O),b.splice(C<=A?A+1:A,1),v&&v.splice(C<=A?A+1:A,1)}}},i},{isClass:!0}),qst="number",Wst=["typed"];function Gst(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function Yst(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var s=t+n;if(isNaN(s))throw new SyntaxError('String "'+e.input+'" is not a valid number');return s}var Kst=Kt(qst,Wst,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=Gst(i);if(s)return Yst(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),Xst="bignumber",Qst=["typed","BigNumber"],Jst=Kt(Xst,Qst,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=n(s[1]),u=new n(2).pow(Number(o));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))})}),Zst="fraction",eot=["typed","Fraction"],tot=Kt(Zst,eot,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>Jf(i,r))})}),Ute="matrix",not=["typed","Matrix","DenseMatrix","SparseMatrix"],rot=Kt(Ute,not,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(Ute,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,u){return s([],a,u)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(o,u);if(a==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),Vte="unaryMinus",iot=["typed"],sot=Kt(Vte,iot,e=>{var{typed:t}=e;return t(Vte,{number:S1e,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),Hte="abs",oot=["typed"],aot=Kt(Hte,oot,e=>{var{typed:t}=e;return t(Hte,{number:_1e,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),qte="apply",uot=["typed","isInteger"],lot=Kt(qte,uot,e=>{var{typed:t,isInteger:n}=e;return t(qte,{"Array | Matrix, number | BigNumber, function":function(i,s,o){if(!n(s))throw new TypeError("Integer number expected for dimension");var a=Array.isArray(i)?Ro(i):i.size();if(s<0||s>=a.length)throw new jh(s,a.length);return fi(i)?i.create(tk(i.valueOf(),s,o)):tk(i,s,o)}})});function tk(e,t,n){var r,i,s;if(t<=0)if(Array.isArray(e[0])){for(s=cot(e),i=[],r=0;r<s.length;r++)i[r]=tk(s[r],t-1,n);return i}else return n(e);else{for(i=[],r=0;r<e.length;r++)i[r]=tk(e[r],t-1,n);return i}}function cot(e){var t=e.length,n=e[0].length,r,i,s=[];for(i=0;i<n;i++){var o=[];for(r=0;r<t;r++)o.push(e[r][i]);s.push(o)}return s}var Wte="addScalar",fot=["typed"],dot=Kt(Wte,fot,e=>{var{typed:t}=e;return t(Wte,{"number, number":E1e,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),Gte="subtractScalar",hot=["typed"],pot=Kt(Gte,hot,e=>{var{typed:t}=e;return t(Gte,{"number, number":w1e,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),mot="matAlgo11xS0s",got=["typed","equalScalar"],C1e=Kt(mot,got,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=n,y=0,v=o;typeof d=="string"&&(m=d,g=t.find(n,[m,m]),y=t.convert(0,m),s=t.convert(s,m),v=t.find(o,[m,m]));for(var b=[],E=[],_=[],x=0;x<p;x++){_[x]=E.length;for(var S=c[x],C=c[x+1],A=S;A<C;A++){var D=l[A],I=a?v(s,u[A]):v(u[A],s);g(I,y)||(E.push(D),b.push(I))}}return _[p]=E.length,i.createSparseMatrix({values:b,index:E,ptr:_,size:[h,p],datatype:m})}}),yot="matAlgo12xSfs",vot=["typed","DenseMatrix"],bot=Kt(yot,vot,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=o;typeof d=="string"&&(m=d,s=t.convert(s,m),g=t.find(o,[m,m]));for(var y=[],v=[],b=[],E=0;E<p;E++){for(var _=E+1,x=c[E],S=c[E+1],C=x;C<S;C++){var A=l[C];v[A]=u[C],b[A]=_}for(var D=0;D<h;D++)E===0&&(y[D]=[]),b[D]===_?y[D][E]=a?g(s,v[D]):g(v[D],s):y[D][E]=a?g(s,0):g(0,s)}return new n({data:y,size:[h,p],datatype:m})}}),_ot="matAlgo14xDs",Eot=["typed"],jU=Kt(_ot,Eot,e=>{var{typed:t}=e;return function(i,s,o,a){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,s=t.convert(s,f),d=t.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,s,a):[];return i.createDenseMatrix({data:h,size:Ei(l),datatype:f})};function n(r,i,s,o,a,u,l){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,s,s[i+1],a[d],u,l);return c}}),wot="matAlgo03xDSf",xot=["typed"],Sot=Kt(wot,xot,e=>{var{typed:t}=e;return function(r,i,s,o){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new ur(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],y,v=0,b=s;typeof l=="string"&&l===p&&l!=="mixed"&&(y=l,v=t.convert(0,y),b=t.find(s,[y,y]));for(var E=[],_=0;_<m;_++)E[_]=[];for(var x=[],S=[],C=0;C<g;C++){for(var A=C+1,D=d[C],I=d[C+1],O=D;O<I;O++){var R=f[O];x[R]=o?b(c[O],a[R][C]):b(a[R][C],c[O]),S[R]=A}for(var M=0;M<m;M++)S[M]===A?E[M][C]=x[M]:E[M][C]=o?b(v,a[M][C]):b(a[M][C],v)}return r.createDenseMatrix({data:E,size:[m,g],datatype:l===r._datatype&&p===i._datatype?y:void 0})}}),Tot="matAlgo05xSfSf",Cot=["typed","equalScalar"],Aot=Kt(Tot,Cot,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,m=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==m.length)throw new ur(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],v=c[1],b,E=n,_=0,x=o;typeof f=="string"&&f===g&&f!=="mixed"&&(b=f,E=t.find(n,[b,b]),_=t.convert(0,b),x=t.find(o,[b,b]));var S=a&&d?[]:void 0,C=[],A=[],D=S?[]:void 0,I=S?[]:void 0,O=[],R=[],M,F,P,j;for(F=0;F<v;F++){A[F]=C.length;var z=F+1;for(P=l[F],j=l[F+1];P<j;P++)M=u[P],C.push(M),O[M]=z,D&&(D[M]=a[P]);for(P=p[F],j=p[F+1];P<j;P++)M=h[P],O[M]!==z&&C.push(M),R[M]=z,I&&(I[M]=d[P]);if(S)for(P=A[F];P<C.length;){M=C[P];var V=O[M],$=R[M];if(V===z||$===z){var U=V===z?D[M]:_,W=$===z?I[M]:_,B=x(U,W);E(B,_)?C.splice(P,1):(S.push(B),P++)}}}return A[v]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,v],datatype:f===i._datatype&&g===s._datatype?b:void 0})}}),Dot="matAlgo13xDD",Iot=["typed"],Not=Kt(Dot,Iot,e=>{var{typed:t}=e;return function(i,s,o){var a=i._data,u=i._size,l=i._datatype,c=s._data,f=s._size,d=s._datatype,h=[];if(u.length!==f.length)throw new ur(u.length,f.length);for(var p=0;p<u.length;p++){if(u[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[p]=u[p]}var m,g=o;typeof l=="string"&&l===d&&(m=l,g=t.find(o,[m,m]));var y=h.length>0?n(g,0,h,h[0],a,c):[];return i.createDenseMatrix({data:y,size:h,datatype:m})};function n(r,i,s,o,a,u){var l=[];if(i===s.length-1)for(var c=0;c<o;c++)l[c]=r(a[c],u[c]);else for(var f=0;f<o;f++)l[f]=n(r,i+1,s,s[i+1],a[f],u[f]);return l}}),kot="broadcast",Rot=["concat"],Pot=Kt(kot,Rot,e=>{var{concat:t}=e;return function(i,s){var o=Math.max(i._size.length,s._size.length);if(i._size.length===s._size.length&&i._size.every((p,m)=>p===s._size[m]))return[i,s];for(var a=n(i._size,o,0),u=n(s._size,o,0),l=[],c=0;c<o;c++)l[c]=Math.max(a[c],u[c]);QN(a,l),QN(u,l);var f=i.clone(),d=s.clone();f._size.length<o?f.reshape(n(f._size,o,1)):d._size.length<o&&d.reshape(n(d._size,o,1));for(var h=0;h<o;h++)f._size[h]<l[h]&&(f=r(f,l[h],h)),d._size[h]<l[h]&&(d=r(d,l[h],h));return[f,d]};function n(i,s,o){return[...Array(s-i.length).fill(o),...i]}function r(i,s,o){return t(...Array(s).fill(i),o)}}),Oot="matrixAlgorithmSuite",Mot=["typed","matrix","concat"],A1e=Kt(Oot,Mot,e=>{var{typed:t,matrix:n,concat:r}=e,i=Not({typed:t}),s=jU({typed:t}),o=Pot({concat:r});return function(u){var l=u.elop,c=u.SD||u.DS,f;l?(f={"DenseMatrix, DenseMatrix":(m,g)=>i(...o(m,g),l),"Array, Array":(m,g)=>i(...o(n(m),n(g)),l).valueOf(),"Array, DenseMatrix":(m,g)=>i(...o(n(m),g),l),"DenseMatrix, Array":(m,g)=>i(...o(m,n(g)),l)},u.SS&&(f["SparseMatrix, SparseMatrix"]=(m,g)=>u.SS(...o(m,g),l,!1)),u.DS&&(f["DenseMatrix, SparseMatrix"]=(m,g)=>u.DS(...o(m,g),l,!1),f["Array, SparseMatrix"]=(m,g)=>u.DS(...o(n(m),g),l,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(m,g)=>c(...o(g,m),l,!0),f["SparseMatrix, Array"]=(m,g)=>c(...o(n(g),m),l,!0))):(f={"DenseMatrix, DenseMatrix":t.referToSelf(m=>(g,y)=>i(...o(g,y),m)),"Array, Array":t.referToSelf(m=>(g,y)=>i(...o(n(g),n(y)),m).valueOf()),"Array, DenseMatrix":t.referToSelf(m=>(g,y)=>i(...o(n(g),y),m)),"DenseMatrix, Array":t.referToSelf(m=>(g,y)=>i(...o(g,n(y)),m))},u.SS&&(f["SparseMatrix, SparseMatrix"]=t.referToSelf(m=>(g,y)=>u.SS(...o(g,y),m,!1))),u.DS&&(f["DenseMatrix, SparseMatrix"]=t.referToSelf(m=>(g,y)=>u.DS(...o(g,y),m,!1)),f["Array, SparseMatrix"]=t.referToSelf(m=>(g,y)=>u.DS(...o(n(g),y),m,!1))),c&&(f["SparseMatrix, DenseMatrix"]=t.referToSelf(m=>(g,y)=>c(...o(y,g),m,!0)),f["SparseMatrix, Array"]=t.referToSelf(m=>(g,y)=>c(...o(n(y),g),m,!0))));var d=u.scalar||"any",h=u.Ds||u.Ss;h&&(l?(f["DenseMatrix,"+d]=(m,g)=>s(m,g,l,!1),f[d+", DenseMatrix"]=(m,g)=>s(g,m,l,!0),f["Array,"+d]=(m,g)=>s(n(m),g,l,!1).valueOf(),f[d+", Array"]=(m,g)=>s(n(g),m,l,!0).valueOf()):(f["DenseMatrix,"+d]=t.referToSelf(m=>(g,y)=>s(g,y,m,!1)),f[d+", DenseMatrix"]=t.referToSelf(m=>(g,y)=>s(y,g,m,!0)),f["Array,"+d]=t.referToSelf(m=>(g,y)=>s(n(g),y,m,!1).valueOf()),f[d+", Array"]=t.referToSelf(m=>(g,y)=>s(n(y),g,m,!0).valueOf())));var p=u.sS!==void 0?u.sS:u.Ss;return l?(u.Ss&&(f["SparseMatrix,"+d]=(m,g)=>u.Ss(m,g,l,!1)),p&&(f[d+", SparseMatrix"]=(m,g)=>p(g,m,l,!0))):(u.Ss&&(f["SparseMatrix,"+d]=t.referToSelf(m=>(g,y)=>u.Ss(g,y,m,!1))),p&&(f[d+", SparseMatrix"]=t.referToSelf(m=>(g,y)=>p(y,g,m,!0)))),l&&l.signatures&&qye(f,l.signatures),f}}),$ot="matAlgo01xDSid",Fot=["typed"],D1e=Kt($ot,Fot,e=>{var{typed:t}=e;return function(r,i,s,o){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new ur(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],y=typeof l=="string"&&l!=="mixed"&&l===p?l:void 0,v=y?t.find(s,[y,y]):s,b,E,_=[];for(b=0;b<m;b++)_[b]=[];var x=[],S=[];for(E=0;E<g;E++){for(var C=E+1,A=d[E],D=d[E+1],I=A;I<D;I++)b=f[I],x[b]=o?v(c[I],a[b][E]):v(a[b][E],c[I]),S[b]=C;for(b=0;b<m;b++)S[b]===C?_[b][E]=x[b]:_[b][E]=a[b][E]}return r.createDenseMatrix({data:_,size:[m,g],datatype:l===r._datatype&&p===i._datatype?y:void 0})}}),Lot="matAlgo04xSidSid",Bot=["typed","equalScalar"],jot=Kt(Lot,Bot,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,m=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==m.length)throw new ur(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],v=c[1],b,E=n,_=0,x=o;typeof f=="string"&&f===g&&f!=="mixed"&&(b=f,E=t.find(n,[b,b]),_=t.convert(0,b),x=t.find(o,[b,b]));var S=a&&d?[]:void 0,C=[],A=[],D=a&&d?[]:void 0,I=a&&d?[]:void 0,O=[],R=[],M,F,P,j,z;for(F=0;F<v;F++){A[F]=C.length;var V=F+1;for(j=l[F],z=l[F+1],P=j;P<z;P++)M=u[P],C.push(M),O[M]=V,D&&(D[M]=a[P]);for(j=p[F],z=p[F+1],P=j;P<z;P++)if(M=h[P],O[M]===V){if(D){var $=x(D[M],d[P]);E($,_)?O[M]=null:D[M]=$}}else C.push(M),R[M]=V,I&&(I[M]=d[P]);if(D&&I)for(P=A[F];P<C.length;)M=C[P],O[M]===V?(S[P]=D[M],P++):R[M]===V?(S[P]=I[M],P++):C.splice(P,1)}return A[v]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,v],datatype:f===i._datatype&&g===s._datatype?b:void 0})}}),zot="matAlgo10xSids",Uot=["typed","DenseMatrix"],I1e=Kt(zot,Uot,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=o;typeof d=="string"&&(m=d,s=t.convert(s,m),g=t.find(o,[m,m]));for(var y=[],v=[],b=[],E=0;E<p;E++){for(var _=E+1,x=c[E],S=c[E+1],C=x;C<S;C++){var A=l[C];v[A]=u[C],b[A]=_}for(var D=0;D<h;D++)E===0&&(y[D]=[]),b[D]===_?y[D][E]=a?g(s,v[D]):g(v[D],s):y[D][E]=s}return new n({data:y,size:[h,p],datatype:m})}}),Vot="multiplyScalar",Hot=["typed"],qot=Kt(Vot,Hot,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":x1e,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),Yte="multiply",Wot=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Got=Kt(Yte,Wot,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=e,a=C1e({typed:t,equalScalar:s}),u=jU({typed:t});function l(_,x){switch(_.length){case 1:switch(x.length){case 1:if(_[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(_[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+x[0]+")");break;case 2:if(_[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function c(_,x,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return o(_,x)}function f(_,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(_,x)}function d(_,x){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=x._data,I=x._size,O=x._datatype||x.getDataType(),R=C[0],M=I[1],F,P=r,j=i;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&(F=A,P=t.find(r,[F,F]),j=t.find(i,[F,F]));for(var z=[],V=0;V<M;V++){for(var $=j(S[0],D[0][V]),U=1;U<R;U++)$=P($,j(S[U],D[U][V]));z[V]=$}return _.createDenseMatrix({data:z,size:[M],datatype:A===_._datatype&&O===x._datatype?F:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":v}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":E});function m(_,x){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=x._data,I=x._datatype||x.getDataType(),O=C[0],R=C[1],M,F=r,P=i;A&&I&&A===I&&typeof A=="string"&&A!=="mixed"&&(M=A,F=t.find(r,[M,M]),P=t.find(i,[M,M]));for(var j=[],z=0;z<O;z++){for(var V=S[z],$=P(V[0],D[0]),U=1;U<R;U++)$=F($,P(V[U],D[U]));j[z]=$}return _.createDenseMatrix({data:j,size:[O],datatype:A===_._datatype&&I===x._datatype?M:void 0})}function g(_,x){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=x._data,I=x._size,O=x._datatype||x.getDataType(),R=C[0],M=C[1],F=I[1],P,j=r,z=i;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&A!=="mixed"&&(P=A,j=t.find(r,[P,P]),z=t.find(i,[P,P]));for(var V=[],$=0;$<R;$++){var U=S[$];V[$]=[];for(var W=0;W<F;W++){for(var B=z(U[0],D[0][W]),q=1;q<M;q++)B=j(B,z(U[q],D[q][W]));V[$][W]=B}}return _.createDenseMatrix({data:V,size:[R,F],datatype:A===_._datatype&&O===x._datatype?P:void 0})}function y(_,x){var S=_._data,C=_._size,A=_._datatype||_.getDataType(),D=x._values,I=x._index,O=x._ptr,R=x._size,M=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var F=C[0],P=R[1],j,z=r,V=i,$=s,U=0;A&&M&&A===M&&typeof A=="string"&&A!=="mixed"&&(j=A,z=t.find(r,[j,j]),V=t.find(i,[j,j]),$=t.find(s,[j,j]),U=t.convert(0,j));for(var W=[],B=[],q=[],Y=x.createSparseMatrix({values:W,index:B,ptr:q,size:[F,P],datatype:A===_._datatype&&M===x._datatype?j:void 0}),re=0;re<P;re++){q[re]=B.length;var pe=O[re],_e=O[re+1];if(_e>pe)for(var de=0,ye=0;ye<F;ye++){for(var Ce=ye+1,ve=void 0,qe=pe;qe<_e;qe++){var He=I[qe];de!==Ce?(ve=V(S[ye][He],D[qe]),de=Ce):ve=z(ve,V(S[ye][He],D[qe]))}de===Ce&&!$(ve,U)&&(B.push(ye),W.push(ve))}}return q[P]=B.length,Y}function v(_,x){var S=_._values,C=_._index,A=_._ptr,D=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=x._data,O=x._datatype||x.getDataType(),R=_._size[0],M=x._size[0],F=[],P=[],j=[],z,V=r,$=i,U=s,W=0;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&(z=D,V=t.find(r,[z,z]),$=t.find(i,[z,z]),U=t.find(s,[z,z]),W=t.convert(0,z));var B=[],q=[];j[0]=0;for(var Y=0;Y<M;Y++){var re=I[Y];if(!U(re,W))for(var pe=A[Y],_e=A[Y+1],de=pe;de<_e;de++){var ye=C[de];q[ye]?B[ye]=V(B[ye],$(re,S[de])):(q[ye]=!0,P.push(ye),B[ye]=$(re,S[de]))}}for(var Ce=P.length,ve=0;ve<Ce;ve++){var qe=P[ve];F[ve]=B[qe]}return j[1]=P.length,_.createSparseMatrix({values:F,index:P,ptr:j,size:[R,1],datatype:D===_._datatype&&O===x._datatype?z:void 0})}function b(_,x){var S=_._values,C=_._index,A=_._ptr,D=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=x._data,O=x._datatype||x.getDataType(),R=_._size[0],M=x._size[0],F=x._size[1],P,j=r,z=i,V=s,$=0;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&(P=D,j=t.find(r,[P,P]),z=t.find(i,[P,P]),V=t.find(s,[P,P]),$=t.convert(0,P));for(var U=[],W=[],B=[],q=_.createSparseMatrix({values:U,index:W,ptr:B,size:[R,F],datatype:D===_._datatype&&O===x._datatype?P:void 0}),Y=[],re=[],pe=0;pe<F;pe++){B[pe]=W.length;for(var _e=pe+1,de=0;de<M;de++){var ye=I[de][pe];if(!V(ye,$))for(var Ce=A[de],ve=A[de+1],qe=Ce;qe<ve;qe++){var He=C[qe];re[He]!==_e?(re[He]=_e,W.push(He),Y[He]=z(ye,S[qe])):Y[He]=j(Y[He],z(ye,S[qe]))}}for(var ht=B[pe],rt=W.length,Pe=ht;Pe<rt;Pe++){var Be=W[Pe];U[Pe]=Y[Be]}}return B[F]=W.length,q}function E(_,x){var S=_._values,C=_._index,A=_._ptr,D=_._datatype||_._data===void 0?_._datatype:_.getDataType(),I=x._values,O=x._index,R=x._ptr,M=x._datatype||x._data===void 0?x._datatype:x.getDataType(),F=_._size[0],P=x._size[1],j=S&&I,z,V=r,$=i;D&&M&&D===M&&typeof D=="string"&&D!=="mixed"&&(z=D,V=t.find(r,[z,z]),$=t.find(i,[z,z]));for(var U=j?[]:void 0,W=[],B=[],q=_.createSparseMatrix({values:U,index:W,ptr:B,size:[F,P],datatype:D===_._datatype&&M===x._datatype?z:void 0}),Y=j?[]:void 0,re=[],pe,_e,de,ye,Ce,ve,qe,He,ht=0;ht<P;ht++){B[ht]=W.length;var rt=ht+1;for(Ce=R[ht],ve=R[ht+1],ye=Ce;ye<ve;ye++)if(He=O[ye],j)for(_e=A[He],de=A[He+1],pe=_e;pe<de;pe++)qe=C[pe],re[qe]!==rt?(re[qe]=rt,W.push(qe),Y[qe]=$(I[ye],S[pe])):Y[qe]=V(Y[qe],$(I[ye],S[pe]));else for(_e=A[He],de=A[He+1],pe=_e;pe<de;pe++)qe=C[pe],re[qe]!==rt&&(re[qe]=rt,W.push(qe));if(j)for(var Pe=B[ht],Be=W.length,Xe=Pe;Xe<Be;Xe++){var mt=W[Xe];U[Xe]=Y[mt]}}return B[P]=W.length,q}return t(Yte,i,{"Array, Array":t.referTo("Matrix, Matrix",_=>(x,S)=>{l(Ro(x),Ro(S));var C=_(n(x),n(S));return fi(C)?C.valueOf():C}),"Matrix, Matrix":function(x,S){var C=x.size(),A=S.size();return l(C,A),C.length===1?A.length===1?c(x,S,C[0]):f(x,S):A.length===1?h(x,S):p(x,S)},"Matrix, Array":t.referTo("Matrix,Matrix",_=>(x,S)=>_(x,n(S))),"Array, Matrix":t.referToSelf(_=>(x,S)=>_(n(x,S.storage()),S)),"SparseMatrix, any":function(x,S){return a(x,S,i,!1)},"DenseMatrix, any":function(x,S){return u(x,S,i,!1)},"any, SparseMatrix":function(x,S){return a(S,x,i,!0)},"any, DenseMatrix":function(x,S){return u(S,x,i,!0)},"Array, any":function(x,S){return u(n(x),S,i,!1).valueOf()},"any, Array":function(x,S){return u(n(S),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(_=>(x,S,C)=>{for(var A=_(x,S),D=0;D<C.length;D++)A=_(A,C[D]);return A})})}),Yot="sqrt",Kot=["config","typed","Complex"],Xot=Kt(Yot,Kot,e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||t.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||t.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),Kte="subtract",Qot=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Jot=Kt(Kte,Qot,e=>{var{typed:t,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:s,DenseMatrix:o,concat:a}=e,u=D1e({typed:t}),l=Sot({typed:t}),c=Aot({typed:t,equalScalar:r}),f=I1e({typed:t,DenseMatrix:o}),d=bot({typed:t,DenseMatrix:o}),h=A1e({typed:t,matrix:n,concat:a});return t(Kte,{"any, any":i},h({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),Xte="conj",Zot=["typed"],eat=Kt(Xte,Zot,e=>{var{typed:t}=e;return t(Xte,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>Jf(r,n))})}),Qte="concat",tat=["typed","matrix","isInteger"],nat=Kt(Qte,tat,e=>{var{typed:t,matrix:n,isInteger:r}=e;return t(Qte,{"...Array | Matrix | number | BigNumber":function(s){var o,a=s.length,u=-1,l,c=!1,f=[];for(o=0;o<a;o++){var d=s[o];if(fi(d)&&(c=!0),kr(d)||Ti(d)){if(o!==a-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||o>0&&u>l)throw new jh(u,l+1)}else{var h=Ei(d).valueOf(),p=Ro(h);if(f[o]=h,l=u,u=p.length-1,o>0&&u!==l)throw new ur(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var m=f.shift();f.length;)m=y1e(m,f.shift(),u);return c?n(m):m},"...string":function(s){return s.join("")}})});function rat(e,t,n,r,i){if(iv.isTypedFunction(e)){var s=[t,n,r],o=iv.resolve(e,s);if(o)return f(o.implementation,s);var a=[t,n],u=iv.resolve(e,a);if(u)return f(u.implementation,a);var l=[t],c=iv.resolve(e,l);return c?f(c.implementation,l):f(e,s)}else return e(t,n,r);function f(d,h){try{return d.apply(d,h)}catch(g){var p;if(g instanceof TypeError&&((p=g.data)===null||p===void 0?void 0:p.category)==="wrongType"){var m=[];throw m.push("value: ".concat(gc(t))),h.length>=2&&m.push("index: ".concat(gc(n))),h.length>=3&&m.push("array: ".concat(gc(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(e.name,"(").concat(m.join(", "),") at index ").concat(JSON.stringify(n)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(e.name,": ").concat(g.message))}}}var Jte="identity",iat=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],sat=Kt(Jte,iat,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t(Jte,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Ti(l)||Ti(c)?i:null;if(Ti(l)&&(l=l.toNumber()),Ti(c)&&(c=c.toNumber()),!Hi(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Hi(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return s.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=Y5([],m,p),y=l<c?l:c,v=0;v<y;v++)g[v][v]=h;return g}}),Zte="map",oat=["typed"],aat=Kt(Zte,oat,e=>{var{typed:t}=e;return t(Zte,{"Array, function":uat,"Matrix, function":function(r,i){return r.map(i)}})});function uat(e,t){var n=function r(i,s){return Array.isArray(i)?i.map(function(o,a){return r(o,s.concat(a))}):rat(t,i,s,e,"map")};return n(e,[])}function lat(){throw new Error('No "bignumber" implementation available')}function cat(){throw new Error('No "fraction" implementation available')}function fat(){throw new Error('No "matrix" implementation available')}var ene="size",dat=["typed","config","?matrix"],hat=Kt(ene,dat,e=>{var{typed:t,config:n,matrix:r}=e;return t(ene,{Matrix:function(s){return s.create(s.size())},Array:Ro,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([]):fat()}})});function nk(e,t,n){var r;return String(e).includes("Unexpected type")?(r=arguments.length>2?" (type: "+gc(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):String(e).includes("complex numbers")?(r=arguments.length>2?" (type: "+gc(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}var pat="numeric",mat=["number","?bignumber","?fraction"],gat=Kt(pat,mat,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>t(o),BigNumber:n?o=>n(o):lat,bigint:o=>BigInt(o),Fraction:r?o=>r(o):cat};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=gc(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===c?a:s[u](a)}}),tne="divideScalar",yat=["typed","numeric"],vat=Kt(tne,yat,e=>{var{typed:t,numeric:n}=e;return t(tne,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),nne="log",bat=["config","typed","divideScalar","Complex"],_at=Kt(nne,bat,e=>{var{typed:t,config:n,divideScalar:r,Complex:i}=e;return t(nne,{number:function(o){return o>=0||n.predictable?kst(o):new i(o,0).log()},Complex:function(o){return o.log()},BigNumber:function(o){return!o.isNegative()||n.predictable?o.ln():new i(o.toNumber(),0).log()},"any, any":t.referToSelf(s=>(o,a)=>r(s(o),s(a)))})}),rne="add",Eat=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],wat=Kt(rne,Eat,e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:s,SparseMatrix:o,concat:a}=e,u=D1e({typed:t}),l=jot({typed:t,equalScalar:i}),c=I1e({typed:t,DenseMatrix:s}),f=A1e({typed:t,matrix:n,concat:a});return t(rne,{"any, any":r,"any, any, ...any":t.referToSelf(d=>(h,p,m)=>{for(var g=d(h,p),y=0;y<m.length;y++)g=d(g,m[y]);return g})},f({elop:r,DS:u,SS:l,Ss:c}))}),ine="dot",xat=["typed","addScalar","multiplyScalar","conj","size"],Sat=Kt(ine,xat,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t(ine,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function a(c,f){var d=o(c,f),h=fi(c)?c._data:c,p=fi(c)?c._datatype||c.getDataType():void 0,m=fi(f)?f._data:f,g=fi(f)?f._datatype||f.getDataType():void 0,y=l(c).length===2,v=l(f).length===2,b=n,E=r;if(p&&g&&p===g&&typeof p=="string"&&p!=="mixed"){var _=p;b=t.find(n,[_,_]),E=t.find(r,[_,_])}if(!y&&!v){for(var x=E(i(h[0]),m[0]),S=1;S<d;S++)x=b(x,E(i(h[S]),m[S]));return x}if(!y&&v){for(var C=E(i(h[0]),m[0][0]),A=1;A<d;A++)C=b(C,E(i(h[A]),m[A][0]));return C}if(y&&!v){for(var D=E(i(h[0][0]),m[0]),I=1;I<d;I++)D=b(D,E(i(h[I][0]),m[I]));return D}if(y&&v){for(var O=E(i(h[0][0]),m[0][0]),R=1;R<d;R++)O=b(O,E(i(h[R][0]),m[R][0]));return O}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,g=0,y=n,v=r,b=0,E=0;b<d.length&&E<p.length;){var _=d[b],x=p[E];if(_<x){b++;continue}if(_>x){E++;continue}_===x&&(g=y(g,v(h[b],m[E])),b++,E++)}return g}function l(c){return fi(c)?c.size():s(c)}}),sne="det",Tat=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Cat=Kt(sne,Tat,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:s,isZero:o,unaryMinus:a}=e;return t(sne,{any:function(c){return Ei(c)},"Array | Matrix":function(c){var f;switch(fi(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Ei(c);case 1:if(f[0]===1)return Ei(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Ui(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Ui(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ui(f)+")")}}});function u(l,c,f){if(c===1)return Ei(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((S,C)=>C),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var g=void 0;for(g=p+1;g<c;g++)if(!o(l[h[g]][p])){m=h[g],h[g]=h[p],h[p]=m,d=!d;break}if(g===c)return l[m][p]}for(var y=l[m][p],v=p===0?1:l[h[p-1]][p-1],b=p+1;b<c;b++)for(var E=h[b],_=p+1;_<c;_++)l[E][_]=s(r(i(l[E][_],y),i(l[E][p],l[m][_])),v)}var x=l[h[c-1]][c-1];return d?a(x):x}}),one="inv",Aat=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Dat=Kt(one,Aat,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:l}=e;return t(one,{"Array | Matrix":function(d){var h=fi(d)?d.size():Ro(d);switch(h.length){case 1:if(h[0]===1)return fi(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Ui(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return fi(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+Ui(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ui(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,g,y,v;if(d===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,y)]]}else if(d===2){var b=a(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(o(f[0][1]),b)],[r(o(f[1][0]),b),r(f[0][0],b)]]}else{var E=f.concat();for(p=0;p<d;p++)E[p]=E[p].concat();for(var _=u(d).valueOf(),x=0;x<h;x++){var S=l(E[x][x]),C=x;for(p=x+1;p<d;)l(E[p][x])>S&&(S=l(E[p][x]),C=p),p++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");p=C,p!==x&&(v=E[x],E[x]=E[p],E[p]=v,v=_[x],_[x]=_[p],_[p]=v);var A=E[x],D=_[x];for(p=0;p<d;p++){var I=E[p],O=_[p];if(p!==x){if(I[x]!==0){for(g=r(o(I[x]),A[x]),m=x;m<h;m++)I[m]=i(I[m],s(g,A[m]));for(m=0;m<h;m++)O[m]=i(O[m],s(g,D[m]))}}else{for(g=A[x],m=x;m<h;m++)I[m]=r(I[m],g);for(m=0;m<h;m++)O[m]=r(O[m],g)}}}return _}}}),Iat="divide",Nat=["typed","matrix","multiply","equalScalar","divideScalar","inv"],kat=Kt(Iat,Nat,e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:s,inv:o}=e,a=C1e({typed:t,equalScalar:i}),u=jU({typed:t});return t("divide",qye({"Array | Matrix, Array | Matrix":function(c,f){return r(c,o(f))},"DenseMatrix, any":function(c,f){return u(c,f,s,!1)},"SparseMatrix, any":function(c,f){return a(c,f,s,!1)},"Array, any":function(c,f){return u(n(c),f,s,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,o(f))}},s.signatures))}),ane="mean",Rat=["typed","add","divide"],Pat=Kt(ane,Rat,e=>{var{typed:t,add:n,divide:r}=e;return t(ane,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(a){if(Ast(a))throw new TypeError("Scalar values expected in function mean");return s(a)}});function i(o,a){try{var u=Dst(o,a,n),l=Array.isArray(o)?Ro(o):o.size();return r(u,l[a])}catch(c){throw nk(c,"mean")}}function s(o){var a,u=0;if(JN(o,function(l){try{a=a===void 0?l:n(a,l),u++}catch(c){throw nk(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(a,u)}}),jF="unbiased",une="variance",Oat=["typed","add","subtract","multiply","divide","apply","isNaN"],Mat=Kt(une,Oat,e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:s,apply:o,isNaN:a}=e;return t(une,{"Array | Matrix":function(f){return u(f,jF)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,jF)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,jF)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(JN(c,function(g){try{d=d===void 0?g:n(d,g),h++}catch(y){throw nk(y,"variance",g)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var p=s(d,h);if(d=void 0,JN(c,function(g){var y=r(g,p);d=d===void 0?i(y,y):n(d,i(y,y))}),a(d))return d;switch(f){case"uncorrected":return s(d,h);case"biased":return s(d,h+1);case"unbiased":{var m=Ti(d)?d.mul(0):0;return h===1?m:s(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,h=>u(h,d))}catch(h){throw nk(h,"variance")}}}),lne="std",$at=["typed","map","sqrt","variance"],Fat=Kt(lne,$at,e=>{var{typed:t,map:n,sqrt:r,variance:i}=e;return t(lne,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(a){return s(a)}});function s(o,a){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return vb(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),zU=Qit({config:Oy}),UU=tst({}),N1e=lst({}),VU=dst({}),JT=Tst({Matrix:VU}),Gn=eit({BigNumber:zU,Complex:UU,DenseMatrix:JT,Fraction:N1e}),Lat=aot({typed:Gn}),c3=dot({typed:Gn}),Bat=eat({typed:Gn}),D_=zst({config:Oy,typed:Gn}),k1e=Nst({typed:Gn}),jat=Mst({equalScalar:D_,typed:Gn}),zat=aat({typed:Gn}),R1e=qot({typed:Gn}),Uat=Kst({typed:Gn}),HU=Hst({Matrix:VU,equalScalar:D_,typed:Gn}),P1e=pot({typed:Gn}),Vat=lot({isInteger:k1e,typed:Gn}),Hat=Jst({BigNumber:zU,typed:Gn}),qat=Fst({typed:Gn}),Wat=Xot({Complex:UU,config:Oy,typed:Gn}),qU=sot({typed:Gn}),Gat=tot({Fraction:N1e,typed:Gn}),zh=rot({DenseMatrix:JT,Matrix:VU,SparseMatrix:HU,typed:Gn}),Yat=gat({bignumber:Hat,fraction:Gat,number:Uat}),Kat=hat({matrix:zh,config:Oy,typed:Gn}),O1e=nat({isInteger:k1e,matrix:zh,typed:Gn}),f3=vat({numeric:Yat,typed:Gn}),Xat=sat({BigNumber:zU,DenseMatrix:JT,SparseMatrix:HU,config:Oy,matrix:zh,typed:Gn}),Qat=Jot({DenseMatrix:JT,concat:O1e,equalScalar:D_,matrix:zh,subtractScalar:P1e,typed:Gn,unaryMinus:qU}),M1e=wat({DenseMatrix:JT,SparseMatrix:HU,addScalar:c3,concat:O1e,equalScalar:D_,matrix:zh,typed:Gn}),Jat=Sat({addScalar:c3,conj:Bat,multiplyScalar:R1e,size:Kat,typed:Gn}),$1e=_at({Complex:UU,config:Oy,divideScalar:f3,typed:Gn}),d3=Got({addScalar:c3,dot:Jat,equalScalar:D_,matrix:zh,multiplyScalar:R1e,typed:Gn}),Zat=Cat({divideScalar:f3,isZero:jat,matrix:zh,multiply:d3,subtractScalar:P1e,typed:Gn,unaryMinus:qU}),eut=Dat({abs:Lat,addScalar:c3,det:Zat,divideScalar:f3,identity:Xat,matrix:zh,multiply:d3,typed:Gn,unaryMinus:qU}),F1e=kat({divideScalar:f3,equalScalar:D_,inv:eut,matrix:zh,multiply:d3,typed:Gn}),cne=Pat({add:M1e,divide:F1e,typed:Gn}),tut=Mat({add:M1e,apply:Vat,divide:F1e,isNaN:qat,multiply:d3,subtract:Qat,typed:Gn}),fne=Fat({map:zat,sqrt:Wat,typed:Gn,variance:tut});const L1e=0,wb=1,dne=jye("thisisjndexperimentseed"),B1e=2*3.141592653589793,j1e=100;function nut(e){let t=e.length,n;for(;t>0;)n=Math.floor(Math.random()*t),t-=1,[e[t],e[n]]=[e[n],e[t]];return e}function rut(e){const t=e(),n=e();return Math.sqrt(-2*Number($1e(Number(t))))*Math.cos(B1e*n)*wb+L1e}function iut(){const e=dne(),t=dne();return Math.sqrt(-2*Number($1e(Number(e))))*Math.cos(B1e*t)*wb+L1e}function z1e(e,t){if(e.length===t.length){const n=cne(e),r=cne(t),i=Number(fne(e)),s=Number(fne(t));let o=0;for(let u=0;u<e.length;u++)o+=e[u]-n+(t[u]-r);return o/(e.length-1)/(i*s)}return NaN}function U1e(e,t){const n=e**2,r=t**2;return((t-1)*(n+t)+Math.sqrt(n*(r-1)*(n-1)))/((t-1)*(2*n+t-1))}function V1e(e,t,n){const r=n**2;return t.map((i,s)=>(n*e[s]+(1-n)*i)/Math.sqrt(r+(1-n)**2))}function hne(){const e=[];for(;e.length<j1e;){const t=iut();t>=-2*wb&&t<=wb*2&&e.push(t)}return e}function pne(e){const t=[];for(;t.length<j1e;){const n=rut(e);n>=-2*wb&&n<=wb*2&&t.push(n)}return t}function h3(e,t){const n=jye(t),r=pne(n);let i=pne(n);const s=z1e(r,i),o=U1e(e,s);return i=V1e(r,i,o),r.map((a,u)=>e<0?[a,-i[u]]:[a,i[u]])}function sut(e){const t=hne();let n=hne();const r=z1e(t,n),i=U1e(e,r);return n=V1e(t,n,i),t.map((s,o)=>[s,n[o]])}const out=Object.freeze(Object.defineProperty({__proto__:null,generateDataSet:sut,generateDataSetFixed:h3,shuffle:nut},Symbol.toStringTag,{value:"Module"})),cA=300,RE=300;function Tw({r:e,onClick:t}){const n=k.useRef(null),[r,i]=k.useState(!1),s=k.useCallback(()=>{const o=h3(e,Date.now().toString()),a={left:0,top:20,right:20,bottom:0},u=RE-a.bottom,l=cA-a.left-a.right,c=bm().domain([bh(o,y=>y[0]),Ga(o,y=>y[0])]).range([0,l]),f=bm().domain([bh(o,y=>y[1]),Ga(o,y=>y[1])]).range([u,0]),d=znt().x(y=>c(y[0])).y(y=>f(y[1])).radius(10).extent([[0,0],[l,u]]),h=d(o),p=GP(n.current).attr("width",cA).attr("height",RE);p.selectAll("*").remove(),p.append("g").attr("transform",`translate(${a.left}, ${a.top})`),p.append("g").selectAll(".hexagon").data(h).enter().append("path").attr("class","hexagon").attr("d",d.hexagon()).attr("transform",y=>`translate(${y.x}, ${y.y})`).style("fill",y=>lnt(y.length/Ga(h,v=>v.length))).style("stroke","white").style("stroke-width","0.5px");const m=s0e(c).ticks(5),g=hN(f).ticks(5);p.append("g").attr("transform",`translate(${a.left}, ${RE-a.bottom})`).call(m),p.append("g").attr("transform",`translate(${a.left}, ${a.top})`).call(g)},[e]);return k.useEffect(()=>{s()},[s]),w.jsxs("svg",{className:"d3-component",width:cA,height:RE,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[w.jsx("g",{id:"d3Stuff",ref:n}),w.jsx("rect",{onClick:t,x:0,y:0,width:cA,height:RE,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const aut=Object.freeze(Object.defineProperty({__proto__:null,default:Tw},Symbol.toStringTag,{value:"Module"}));function WU({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=k.useMemo(()=>Math.random()>.5,[e,t]),[s,o]=k.useState(0),a=()=>{n&&o(l=>l+1)},u=l=>{r(l),a()};return i?w.jsxs(cs,{children:[w.jsx(Tw,{onClick:()=>u(1),r:e},s),w.jsx(Tw,{onClick:()=>u(2),r:t},s+1)]}):w.jsxs(cs,{children:[w.jsx(Tw,{onClick:()=>u(2),r:t},s),w.jsx(Tw,{onClick:()=>u(1),r:e},s+1)]})}const uut=Object.freeze(Object.defineProperty({__proto__:null,default:WU},Symbol.toStringTag,{value:"Module"}));function lut({setAnswer:e,parameters:t}){const[n,r]=k.useState(0),[i,s]=k.useState(t.above),[o,a]=k.useState([]),[u,l]=k.useState(t.r1),[c,f]=k.useState(t.r2),d=k.useCallback(h=>{a([...o,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,o,u,c]);return k.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:o}})},[n,o]),n===50?w.jsx(Ze,{children:"Completed! Great job, please continue."}):w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(WU,{onClick:d,r1:u,r2:c})}),w.jsx(fs,{style:{marginTop:20},children:w.jsx("progress",{value:n,max:50})})]})}const cut=Object.freeze(Object.defineProperty({__proto__:null,default:lut},Symbol.toStringTag,{value:"Module"})),zF=300,UF=300;function Cw({v:e,onClick:t}){const n=k.useRef(null),[r,i]=k.useState(!1),s=k.useCallback(()=>{const o=h3(e,Date.now().toString()),a={left:40,top:20,right:20,bottom:20},u=UF-a.bottom,l=zF-a.left-a.right,c=o.map(E=>E[0]),f=o.map(E=>E[1]),d=GP(n.current);d.selectAll("*").remove();const h=bm().range([0,u]),p=bm().range([0,u]);h.domain([bh(c),Ga(c)]).range([0,u]),p.domain([bh(f),Ga(f)]).range([0,u]);const m=hN(h).tickSize(0).tickValues([]),g=hN(p).tickSize(0).tickValues([]),y=`translate(${a.left},${a.top})`,v=`translate(${a.left+l},${a.top})`,b=(E,_,x,S,C)=>{E.selectAll(_).data([0]).enter().append("g").attr("class",S),E.selectAll(_).data([0]).exit().remove(),E.selectAll(_).attr("transform",C).call(x)};b(d,".x.axis",m,"x axis",y),b(d,".y.axis",g,"y axis",v),d.selectAll(".line").data(o).enter().append("line").style("stroke","grey").style("stroke-width",.5).attr("x1",a.left).attr("y1",E=>h(E[0])+a.top).attr("x2",a.left+l).attr("y2",E=>p(E[1])+a.top)},[e]);return k.useEffect(()=>{s()},[s]),w.jsxs("svg",{className:"d3-component",width:zF,height:UF,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[w.jsx("g",{id:"d3Stuff",ref:n}),w.jsx("rect",{onClick:t,x:0,y:0,width:zF,height:UF,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const fut=Object.freeze(Object.defineProperty({__proto__:null,default:Cw},Symbol.toStringTag,{value:"Module"}));function p3({r1:e,r2:t,onClick:n}){const r=k.useMemo(()=>Math.random()>.5,[e,t]),[i,s]=k.useState(0),o=()=>{s(u=>u+1)},a=u=>{n(u),o()};return r?w.jsxs(cs,{children:[w.jsx(Cw,{onClick:()=>a(1),v:e},i),w.jsx(Cw,{onClick:()=>a(2),v:t},i+1)]}):w.jsxs(cs,{children:[w.jsx(Cw,{onClick:()=>a(2),v:t},i),w.jsx(Cw,{onClick:()=>a(1),v:e},i+1)]})}const dut=Object.freeze(Object.defineProperty({__proto__:null,default:p3},Symbol.toStringTag,{value:"Module"})),mne=[.6,.7,.8],gne=[.3,.4,.5];function hut({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(mne[Math.floor(Math.random()*mne.length)]),[s,o]=k.useState(gne[Math.floor(Math.random()*gne.length)]),[a,u]=k.useState([]),l=k.useCallback(c=>{u([...a,{r1:r,r2:s,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?o(Math.min(s+.01,1)):i(Math.min(r-.01,1)):f?o(Math.max(s-.03,0)):i(Math.max(r+.03,0))},[t,a,r,s]);return k.useEffect(()=>{if(t===50){const c=Math.abs(r-s);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:s,observedJnd:c}})}},[t,a,r,s,e]),w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsxs(Ze,{children:[t,"/50"]}),w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(p3,{onClick:l,r1:r,r2:s})})]})}const put=Object.freeze(Object.defineProperty({__proto__:null,default:hut},Symbol.toStringTag,{value:"Module"}));function mut({setAnswer:e,parameters:t}){const[n,r]=k.useState(0),[i,s]=k.useState(t.above),[o,a]=k.useState([]),[u,l]=k.useState(t.r1),[c,f]=k.useState(t.r2),d=k.useCallback(h=>{a([...o,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,o,u,c]);return k.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{parallelSelections:o}})},[n,o]),n===50?w.jsx(Ze,{children:"Completed! Great job, please continue."}):w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(p3,{onClick:d,r1:u,r2:c})}),w.jsx(fs,{style:{marginTop:20},children:w.jsx("progress",{value:n,max:50})})]})}const gut=Object.freeze(Object.defineProperty({__proto__:null,default:mut},Symbol.toStringTag,{value:"Module"})),fA=300,PE=300;function Aw({r:e,onClick:t}){const n=k.useRef(null),[r,i]=k.useState(!1),s=k.useCallback(()=>{const o=h3(e,Date.now().toString()),a={left:40,top:20,right:20,bottom:20},u=PE-a.bottom,l=fA-a.left-a.right,c=o.map(y=>y[0]),f=o.map(y=>y[1]),d=bm().range([0,l]),h=bm().range([u,0]),p=s0e(d).tickSize(0).tickFormat(()=>""),m=hN(h).tickSize(0),g=GP(n.current).attr("width",fA).attr("height",PE);g.selectAll("*").remove(),g.append("g").attr("transform",`translate(0, ${PE-a.bottom})`).attr("class","main axis date").call(p),g.append("g").attr("class","main axis date").call(m),d.domain([bh(c),Ga(c)]).range([10,l-10]),h.domain([bh(f),Ga(f)]).range([u-10,10]),g.selectAll(".dot").data(o).enter().append("circle").attr("class","dot").attr("r",2).attr("cx",y=>d(y[0])).attr("cy",y=>h(y[1])).style("fill","black")},[e]);return k.useEffect(()=>{s()},[s]),w.jsxs("svg",{className:"d3-component",width:fA,height:PE,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[w.jsx("g",{id:"d3Stuff",ref:n}),w.jsx("rect",{onClick:t,x:0,y:0,width:fA,height:PE,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const yut=Object.freeze(Object.defineProperty({__proto__:null,default:Aw},Symbol.toStringTag,{value:"Module"}));function m3({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=k.useMemo(()=>Math.random()>.5,[e,t]),[s,o]=k.useState(0),a=()=>{n&&o(l=>l+1)},u=l=>{r(l),a()};return i?w.jsxs(cs,{children:[w.jsx(Aw,{onClick:()=>u(1),r:e},s),w.jsx(Aw,{onClick:()=>u(2),r:t},s+1)]}):w.jsxs(cs,{children:[w.jsx(Aw,{onClick:()=>u(2),r:t},s),w.jsx(Aw,{onClick:()=>u(1),r:e},s+1)]})}const vut=Object.freeze(Object.defineProperty({__proto__:null,default:m3},Symbol.toStringTag,{value:"Module"})),yne=[.6,.7,.8],vne=[.3,.4,.5];function but({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(yne[Math.floor(Math.random()*yne.length)]),[s,o]=k.useState(vne[Math.floor(Math.random()*vne.length)]),[a,u]=k.useState([]),l=k.useCallback(c=>{u([...a,{r1:r,r2:s,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?o(Math.min(s+.01,1)):i(Math.min(r-.01,1)):f?o(Math.max(s-.03,0)):i(Math.max(r+.03,0))},[t,a,r,s]);return k.useEffect(()=>{if(t===50){const c=Math.abs(r-s);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:s,observedJnd:c}})}},[t,a,r,s,e]),w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsxs(Ze,{children:[t,"/50"]}),w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(m3,{onClick:l,r1:r,r2:s})})]})}const _ut=Object.freeze(Object.defineProperty({__proto__:null,default:but},Symbol.toStringTag,{value:"Module"}));function Eut({setAnswer:e,parameters:t}){const[n,r]=k.useState(0),[i,s]=k.useState(t.above),[o,a]=k.useState([]),[u,l]=k.useState(t.r1),[c,f]=k.useState(t.r2),d=k.useCallback(h=>{a([...o,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,o,u,c]);return k.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:o}})},[n,o]),n===50?w.jsx(Ze,{children:"Completed! Great job, please continue."}):w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(m3,{onClick:d,r1:u,r2:c})}),w.jsx(fs,{style:{marginTop:20},children:w.jsx("progress",{value:n,max:50})})]})}const wut=Object.freeze(Object.defineProperty({__proto__:null,default:Eut},Symbol.toStringTag,{value:"Module"})),xut=[.1,.2,.3,.4,.5],bne=[.6,.7,.8,.9,1],VF=e=>{const t=e[Math.floor(Math.random()*e.length)];let n=e[Math.floor(Math.random()*e.length)];for(;t===n;)n=e[Math.floor(Math.random()*e.length)];return[t,n]};function Sut({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(()=>VF(bne)),[s,o]=k.useState(null),[a,u]=k.useState(!1),l=k.useCallback(f=>{const[d,h]=r;s===null&&(f===1&&d>h||f===2&&h>d?o("Correct"):o("Incorrect"),u(!0))},[r,s]),c=()=>{o(null),u(!1),n(f=>f+1),t+1<10?i(VF(bne)):t+1<20?i(VF(xut)):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),o("Practice Completed, please continue."))};return w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsxs(Ze,{children:[t,"/20"]}),w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(WU,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),s&&w.jsx(Ze,{style:{textAlign:"center",marginTop:"1rem"},children:s}),a&&w.jsx(fs,{children:w.jsx(In,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const Tut=Object.freeze(Object.defineProperty({__proto__:null,default:Sut},Symbol.toStringTag,{value:"Module"})),_ne=[.1,.2,.3,.4,.5],y1=[.6,.7,.8,.9,1];function Cut({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(y1[Math.floor(Math.random()*y1.length)]),[s,o]=k.useState(y1[Math.floor(Math.random()*y1.length)]),[a,u]=k.useState(""),l=f=>{i(f[Math.floor(Math.random()*f.length)]),o(f[Math.floor(Math.random()*f.length)])},c=k.useCallback(f=>{n(t+1),f===1&&r>s||f===2&&s>r?u("Correct"):u("Incorrect"),t<10?l(y1):l(_ne)},[t,r,s]);return k.useEffect(()=>{r===s&&(t<10?l(y1):l(_ne)),t===20&&(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),u("Practice Completed, please continue."))},[t]),w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsxs(Ze,{children:[t,"/20"]}),w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(p3,{onClick:c,r1:r,r2:s})}),w.jsx(Ze,{style:{textAlign:"center"},children:a})]})}const Aut=Object.freeze(Object.defineProperty({__proto__:null,default:Cut},Symbol.toStringTag,{value:"Module"})),Dut=[.1,.2,.3,.4,.5],Ene=[.6,.7,.8,.9,1],HF=e=>{const t=e[Math.floor(Math.random()*e.length)];let n=e[Math.floor(Math.random()*e.length)];for(;t===n;)n=e[Math.floor(Math.random()*e.length)];return[t,n]};function Iut({setAnswer:e}){const[t,n]=k.useState(0),[r,i]=k.useState(()=>HF(Ene)),[s,o]=k.useState(null),[a,u]=k.useState(!1),l=k.useCallback(f=>{const[d,h]=r;s===null&&(f===1&&d>h||f===2&&h>d?o("Correct"):o("Incorrect"),u(!0))},[r,s]),c=()=>{o(null),u(!1),n(f=>f+1),t+1<10?i(HF(Ene)):t+1<20?i(HF(Dut)):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),o("Practice Completed, please continue."))};return w.jsxs(Hu,{style:{width:"100%",height:"100%"},children:[w.jsxs(Ze,{children:[t,"/20"]}),w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(fs,{children:w.jsx(m3,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),s&&w.jsx(Ze,{style:{textAlign:"center",marginTop:"1rem"},children:s}),a&&w.jsx(fs,{children:w.jsx(In,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const Nut=Object.freeze(Object.defineProperty({__proto__:null,default:Iut},Symbol.toStringTag,{value:"Module"}));function kut(){const[e,t]=k.useState("");return w.jsxs(fs,{style:{flexDirection:"column"},children:[w.jsx(Ze,{style:{textAlign:"center"},children:"Select an option"}),w.jsx(gP,{value:e,onChange:t,children:w.jsxs(Jt,{gap:"md",justify:"justify-content",direction:"row",children:[w.jsx(ph,{value:"Option 1",label:"Option 1"}),w.jsx(ph,{value:"Option 2",label:"Option 2"})]})})]})}const Rut=Object.freeze(Object.defineProperty({__proto__:null,RadioOptions:kut},Symbol.toStringTag,{value:"Module"}));function Put({v:e}){const t=k.useRef(null),n=(i,s,o)=>{const a=[];for(let u=0;u<i;u++){let l="";for(let c=0;u<5+Math.random()*5;c++)l+=s*i,l+=" ",l+=o+(150-Math.random()*i),l+=" ";a.push(l)}return a},r=()=>{const o=e>0?e:0,a=50,c=n(o,.2,10),f=o,d=.1+o/200,h=-100,p=a/f,m=10+Math.random()*140,g=1e3*(Math.abs(h)/o),y=GP(t.current);y.selectAll("*").remove(),y.attr("width",300).attr("height",300).style("background-color","grey");for(let v=0;v<f;v++){const b=[],E=m+p*v,_=xU()([[0,E],[300,E]]),x=y.append("path").attr("stroke","white").attr("fill","none").attr("stroke-width",2).attr("d",_).attr("class","flowline").attr("stroke-linecap","round").attr("stroke-dasharray",c[v]).attr("stroke-dashoffset",(C,A)=>{const D=Math.random()*100;return b[A]=D,D}).attr("opacity",d),S=C=>{const A=b;C.transition().duration(g).ease(kJe).attr("stroke-dasharray",c[v]).attr("stroke-dashoffset",(D,I)=>(A[I]+=h,A[I])).attr("opacity",()=>Math.floor(Math.random()*100)%4===0?0:d).on("end",()=>{S(C)})};x.call(S)}};return k.useEffect(()=>{r()},[e]),w.jsx("svg",{className:"d3-component",width:300,height:300,ref:t})}const Out=Object.freeze(Object.defineProperty({__proto__:null,default:Put},Symbol.toStringTag,{value:"Module"})),wne=Object.assign({"../public/emma-jnd/vistaJND/src/components/vis/HexbinPlots.tsx":aut,"../public/emma-jnd/vistaJND/src/components/vis/HexbinWrapper.tsx":uut,"../public/emma-jnd/vistaJND/src/components/vis/JNDHexbin.tsx":cut,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallel.tsx":put,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallelRevised.tsx":gut,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatter.tsx":_ut,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatterRevised.tsx":wut,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinates.tsx":fut,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinatesWrapper.tsx":dut,"../public/emma-jnd/vistaJND/src/components/vis/PracticeHexbin.tsx":Tut,"../public/emma-jnd/vistaJND/src/components/vis/PracticeParallel.tsx":Aut,"../public/emma-jnd/vistaJND/src/components/vis/PracticeScatter.tsx":Nut,"../public/emma-jnd/vistaJND/src/components/vis/RadioOptions.tsx":Rut,"../public/emma-jnd/vistaJND/src/components/vis/ScatterPlots.tsx":yut,"../public/emma-jnd/vistaJND/src/components/vis/ScatterWrapper.tsx":vut,"../public/emma-jnd/vistaJND/src/components/vis/Windflow.tsx":Out,"../public/emma-jnd/vistaJND/src/utils/dataGeneration.ts":out});function Mut({currentConfig:e}){const t=Bh(),n=Dy(),r=`../public/${e.path}`,i=r in wne?wne[r].default:null,s=Yf(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Gf();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return w.jsx(k.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:i?w.jsx(i,{parameters:e.parameters,setAnswer:u}):w.jsx(O0,{path:e.path})})}function $ut({currentConfig:e}){const[t,n]=k.useState(""),[r,i]=k.useState(!0);return k.useEffect(()=>{async function s(){const o=await Fz(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?w.jsx(ca,{text:t}):w.jsx(O0,{path:e.path})}var Fut=Bye;function Lut(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function But(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function jut(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function zut(e){return e.__COMMENTS__}function Uut(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var g3={EOL:Fut.EOL||`
`,tryParseNumber:Lut,createComment:But,removeComment:jut,getComment:zut,forceComment:Uut},Vut="3.2.1";function Hut(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return xne}else if(e.length===0)return xne;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Wut(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),qut.bind(null,n)}function qut(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function xne(){}function Wut(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function H1e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}H1e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function q1e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}q1e.description="parse hexadecimal numbers prefixed with 0x";function W1e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}W1e.description="support ISO dates";var GU={loadDsf:Hut,std:{math:H1e,hex:q1e,date:W1e}},Gut=function(e,t){var n=g3,r=GU,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(M){return M==="{"||M==="}"||M==="["||M==="]"||M===","||M===":"}function d(M){var F,P=0,j=1;for(F=s-1;F>0&&i[F]!==`
`;F--,P++);for(;F>0;F--)i[F]===`
`&&j++;throw new Error(M+" at line "+j+","+P+" >>>"+i.substr(s-P,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(M){return i.charAt(s+M)}function m(M){for(var F="",P=o;h();){if(o===P)return h(),M&&P==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var j=0,z=0;z<4;z++){h();var V=o.charCodeAt(0),$;o>="0"&&o<="9"?$=V-48:o>="a"&&o<="f"?$=V-97+10:o>="A"&&o<="F"?$=V-65+10:d("Bad \\u char "+o),j=j*16+$}F+=String.fromCharCode(j)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var M="",F=0,P=0;;){var j=p(-P-5);if(!j||j===`
`)break;P++}function z(){for(var V=P;o&&o<=" "&&o!==`
`&&V-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return M.slice(-1)===`
`&&(M=M.slice(0,-1)),M;continue}else for(;F>0;)M+="'",F--;o===`
`?(M+=`
`,h(),z()):(o!=="\r"&&(M+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var M="",F=s,P=-1;;){if(o===":")return M?P>=0&&P!==M.length&&(s=F+P,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),M;o<=" "?o?P<0&&(P=M.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):M+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var M=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var P=M[0];switch(P){case"f":if(M.trim()==="false")return!1;break;case"n":if(M.trim()==="null")return null;break;case"t":if(M.trim()==="true")return!0;break;default:if(P==="-"||P>="0"&&P<="9"){var j=n.tryParseNumber(M);if(j!==void 0)return j}}if(F){M=M.trim();var z=l(M);return z!==void 0?z:M}}M+=o}}function E(M,F){var P;for(M--,P=s-2;P>M&&i[P]<=" "&&i[P]!==`
`;P--);i[P]===`
`&&P--,i[P]==="\r"&&P--;var j=i.substr(M,P-M+1);for(P=0;P<j.length;P++)if(j[P]>" "){var z=j.indexOf(`
`);if(z>=0){var V=[j.substr(0,z),j.substr(z+1)];return F&&V[0].trim().length===0&&V.shift(),V}else return[j]}return[]}function _(M){function F(j,z){var V,$,U,W;switch(typeof j){case"string":j.indexOf(z)>=0&&(W=j);break;case"object":if(Object.prototype.toString.apply(j)==="[object Array]")for(V=0,U=j.length;V<U;V++)W=F(j[V],z)||W;else for($ in j)Object.prototype.hasOwnProperty.call(j,$)&&(W=F(j[$],z)||W)}return W}function P(j){var z=F(M,j);return z?"found '"+j+`' in a string value, your mistake could be with:
  > `+z+`
  (unquoted strings contain everything up to the next line!)`:""}return P("}")||P("]")}function x(){var M=[],F,P,j;try{if(u&&(F=n.createComment(M,{a:[]})),h(),P=s,v(),F&&(j=E(P,!0).join(`
`)),o==="]")return h(),F&&(F.e=[j]),M;for(;o;){if(M.push(C()),P=s,v(),o===","&&(h(),P=s,v()),F){var z=E(P);F.a.push([j||"",z[0]||""]),j=z[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=j||""),M;v()}d("End of input while parsing an array (missing ']')")}catch(V){throw V.hint=V.hint||_(M),V}}function S(M){var F="",P={},j,z,V;try{if(u&&(j=n.createComment(P,{c:{},o:[]})),M?z=1:(h(),z=s),v(),j&&(V=E(z,!0).join(`
`)),o==="}"&&!M)return j&&(j.e=[V]),h(),P;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),P[F]=C(),z=s,v(),o===","&&(h(),z=s,v()),j){var $=E(z);j.c[F]=[V||"",$[0]||""],V=$[1],j.o.push(F)}if(o==="}"&&!M)return h(),j&&(j.c[F][1]+=V||""),P;v()}if(M)return P;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||_(P),U}}function C(){switch(v(),o){case"{":return S();case"[":return x();case"'":case'"':return m(!0);default:return b()}}function A(M,F){var P=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var j=F.join(`
`),z=E(P).join(`
`);if(z||j){var V=n.createComment(M,n.getComment(M));V.r=[j,z]}}return M}function D(){v();var M=u?E(1):null;switch(o){case"{":return A(S(),M);case"[":return A(x(),M);default:return A(C(),M)}}function I(){v();var M=u?E(1):null;switch(o){case"{":return A(S(),M);case"[":return A(x(),M)}try{return A(S(!0),M)}catch(F){c();try{return A(C(),M)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,R=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,R=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),R?I():D()},Yut=function(e,t){var n=g3,r=GU,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var E,_="---\u2028--\uFEFF-",x=new RegExp('[\\\\\\"\0-'+_+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+_+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+_+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),D={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},I=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",R=0;function M(W,B){return R+=W[0].length+W[1].length-W[2]-W[3],W[0]+B+W[1]}function F(W){return W.replace(x,function(B){var q=D[B];return typeof q=="string"?M(g.esc,q):M(g.uni,("0000"+B.charCodeAt(0).toString(16)).slice(-4))})}function P(W,B,q,Y){return W?(S.lastIndex=0,A.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(x.lastIndex=0,C.lastIndex=0,x.test(W)?!C.test(W)&&!Y&&d?j(W,B):M(g.qstr,F(W)):M(g.qstr,W)):M(g.str,W)):M(g.qstr,"")}function j(W,B){var q,Y=W.replace(/\r/g,"").split(`
`);if(B+=o,Y.length===1)return M(g.mstr,Y[0]);var re=s+B+g.mstr[0];for(q=0;q<Y.length;q++)re+=s,Y[q]&&(re+=B+Y[q]);return re+s+B+g.mstr[1]}function z(W){return W?l||I.test(W)?(x.lastIndex=0,M(g.qkey,x.test(W)?F(W):W)):M(g.key,W):'""'}function V(W,B,q,Y){function re(Dt){return Dt&&Dt[Dt[0]==="\r"?1:0]===`
`}function pe(Dt){return Dt&&!re(Dt)}function _e(Dt,Vt,Zt){if(!Dt)return"";Dt=n.forceComment(Dt);var an,gr=Dt.length;for(an=0;an<gr&&Dt[an]<=" ";an++);return Zt&&an>0&&(Dt=Dt.substr(an)),an<gr?Vt+M(g.rem,Dt):Dt}var de=E(W);if(de!==void 0)return M(g.dsf,de);switch(typeof W){case"string":return P(W,O,B,Y);case"number":return isFinite(W)?M(g.num,String(W)):M(g.lit,"null");case"boolean":return M(g.lit,String(W));case"object":if(!W)return M(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ce=Object.prototype.toString.apply(W)==="[object Array]",ve=O;O+=o;var qe=s+ve,He=s+O,ht=q||u?"":qe,rt=[],Pe,Be=f?[]:null,Xe=c,mt=d,Ft=h?"":g.com[0],bt=0,G,ie,me,J,se,ce,Se,Te,Ge;if(Ce){for(G=0,ie=W.length;G<ie;G++){if(Pe=G<ie-1,ye?(ce=ye.a[G]||[],Se=pe(ce[1]),rt.push(_e(ce[0],`
`)+He),Be&&(ce[0]||ce[1]||Se)&&(Be=null)):rt.push(He),R=0,J=W[G],rt.push(V(J,ye?Se:!1,!0)+(Pe?h:"")),Be){switch(typeof J){case"string":R=0,c=!0,d=0,Be.push(V(J,!1,!0)+(Pe?g.com[0]:"")),c=Xe,d=mt;break;case"object":if(J){Be=null;break}default:Be.push(rt[rt.length-1]+(Pe?Ft:""));break}Pe&&(R+=g.com[0].length-g.com[2]),bt+=R}ye&&ce[1]&&rt.push(_e(ce[1],Se?" ":`
`,Se))}ie===0?ye&&ye.e&&rt.push(_e(ye.e[0],`
`)+qe):rt.push(qe),rt.length===0?Te=M(g.arr,""):(Te=ht+M(g.arr,rt.join("")),Be&&(Ge=Be.join(" "),Ge.length-bt<=f&&(Te=M(g.arr,Ge))))}else{var je=ye?ye.o.slice():[],Ct=[];for(me in W)Object.prototype.hasOwnProperty.call(W,me)&&je.indexOf(me)<0&&Ct.push(me);m&&Ct.sort();var Ot=je.concat(Ct);for(G=0,ie=Ot.length;G<ie;G++)if(Pe=G<ie-1,me=Ot[G],ye?(ce=ye.c[me]||[],Se=pe(ce[1]),rt.push(_e(ce[0],`
`)+He),Be&&(ce[0]||ce[1]||Se)&&(Be=null)):rt.push(He),R=0,J=W[me],se=V(J,ye&&Se),rt.push(z(me)+g.col[0]+(re(se)?"":" ")+se+(Pe?h:"")),ye&&ce[1]&&rt.push(_e(ce[1],Se?" ":`
`,Se)),Be){switch(typeof J){case"string":R=0,c=!0,d=0,se=V(J,!1),c=Xe,d=mt,Be.push(z(me)+g.col[0]+" "+se+(Pe?g.com[0]:""));break;case"object":if(J){Be=null;break}default:Be.push(rt[rt.length-1]+(Pe?Ft:""));break}R+=g.col[0].length-g.col[2],Pe&&(R+=g.com[0].length-g.com[2]),bt+=R}ie===0?ye&&ye.e&&rt.push(_e(ye.e[0],`
`)+qe):rt.push(qe),rt.length===0?Te=M(g.obj,""):(Te=ht+M(g.obj,rt.join("")),Be&&(Ge=Be.join(" "),Ge.length-bt<=f&&(Te=M(g.obj,Ge))))}return O=ve,Te}}E=r.loadDsf(p,"stringify");var $="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&($=U[0]+`
`),$+=V(e,null,!0,!0),U&&($+=U[1]||""),$},Nv=g3;function vx(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function X5(e,t){if(!(e===null||typeof e!="object")){var n=Nv.getComment(e);n&&Nv.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Sne(o.a,r,n.a[r],X5(e[r]))&&(s=!0);!s&&n.e&&(o.e=vx(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Sne(o.s,l,n.c[l],X5(e[l]))&&(s=!0)}!s&&n.e&&(o.e=vx(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=vx(n.r[0],n.r[1])),s?o:void 0}}function Kut(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Xut(e,t){var n=[];if(Q5(e,t,n,[]),n.length>0){var r=rk(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Kut(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),rk(t,r,1)}}function Sne(e,t,n,r){var i=vx(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function bx(e,t){var n=vx(t.b,t.a);return n.path=e,n}function _x(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(bx(s,o)),_x(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(bx(u,l)),_x(l.x,t,u))});e.e&&t.push(bx(n,e.e))}}function Q5(e,t,n,r){if(e){if(t===null||typeof t!="object"){_x(e,n,r);return}var i,s=Nv.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],Q5(u.x,t[i],n,l)):(n.push(bx(l,u)),_x(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],Q5(d.x,t[c],n,f))):d&&(n.push(bx(f,d)),_x(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function rk(e,t,n){var r=Nv.createComment(e,Nv.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Nv.forceComment(t)),r.r[n]||""}var Qut={extract:function(e){return X5(e,!0)},merge:Xut,header:function(e,t){return rk(e,t,0)},footer:function(e,t){return rk(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Tne=g3,Jut=Vut,Cne=Gut,Ane=Yut,Zut=Qut,elt=GU,YU={parse:Cne,stringify:Ane,endOfLine:function(){return Tne.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Tne.EOL=e)},version:Jut,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Cne(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Ane(e,t)}},comments:Zut,dsf:elt.std},J5={exports:{}},G1e={},vc={},xb={},ZT={},An={},PS={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,E)=>`${b}${E}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,E)=>(E instanceof n&&(b[E.str]=(b[E.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let E=0;for(;E<v.length;)a(b,v[E]),b.push(y[++E]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let E=0;for(;E<v.length;)b.push(s),a(b,v[E]),b.push(s,h(y[++E]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(PS);var Z5={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=PS;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Z5);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=PS,n=Z5;var r=PS;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Z5;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,Y){return this}}class o extends s{constructor(q,Y,re){super(),this.varKind=q,this.name=Y,this.rhs=re}render({es5:q,_n:Y}){const re=q?n.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${re} ${this.name}${pe};`+Y}optimizeNames(q,Y){if(q[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,q,Y)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,Y,re){super(),this.lhs=q,this.rhs=Y,this.sideEffects=re}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,Y){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=M(this.rhs,q,Y),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return R(q,this.rhs)}}class u extends a{constructor(q,Y,re,pe){super(q,re,pe),this.op=Y}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,Y){return this.code=M(this.code,q,Y),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((Y,re)=>Y+re.render(q),"")}optimizeNodes(){const{nodes:q}=this;let Y=q.length;for(;Y--;){const re=q[Y].optimizeNodes();Array.isArray(re)?q.splice(Y,1,...re):re?q[Y]=re:q.splice(Y,1)}return q.length>0?this:void 0}optimizeNames(q,Y){const{nodes:re}=this;let pe=re.length;for(;pe--;){const _e=re[pe];_e.optimizeNames(q,Y)||(F(q,_e.names),re.splice(pe,1))}return re.length>0?this:void 0}get names(){return this.nodes.reduce((q,Y)=>O(q,Y.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,Y){super(Y),this.condition=q}render(q){let Y=`if(${this.condition})`+super.render(q);return this.else&&(Y+="else "+this.else.render(q)),Y}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let Y=this.else;if(Y){const re=Y.optimizeNodes();Y=this.else=Array.isArray(re)?new g(re):re}if(Y)return q===!1?Y instanceof y?Y:Y.nodes:this.nodes.length?this:new y(P(q),Y instanceof y?[Y]:Y.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,Y){var re;if(this.else=(re=this.else)===null||re===void 0?void 0:re.optimizeNames(q,Y),!!(super.optimizeNames(q,Y)||this.else))return this.condition=M(this.condition,q,Y),this}get names(){const q=super.names;return R(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,Y){if(super.optimizeNames(q,Y))return this.iteration=M(this.iteration,q,Y),this}get names(){return O(super.names,this.iteration.names)}}class E extends v{constructor(q,Y,re,pe){super(),this.varKind=q,this.name=Y,this.from=re,this.to=pe}render(q){const Y=q.es5?n.varKinds.var:this.varKind,{name:re,from:pe,to:_e}=this;return`for(${Y} ${re}=${pe}; ${re}<${_e}; ${re}++)`+super.render(q)}get names(){const q=R(super.names,this.from);return R(q,this.to)}}class _ extends v{constructor(q,Y,re,pe){super(),this.loop=q,this.varKind=Y,this.name=re,this.iterable=pe}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,Y){if(super.optimizeNames(q,Y))return this.iterable=M(this.iterable,q,Y),this}get names(){return O(super.names,this.iterable.names)}}class x extends p{constructor(q,Y,re){super(),this.name=q,this.args=Y,this.async=re}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}x.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class C extends p{render(q){let Y="try"+super.render(q);return this.catch&&(Y+=this.catch.render(q)),this.finally&&(Y+=this.finally.render(q)),Y}optimizeNodes(){var q,Y;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(Y=this.finally)===null||Y===void 0||Y.optimizeNodes(),this}optimizeNames(q,Y){var re,pe;return super.optimizeNames(q,Y),(re=this.catch)===null||re===void 0||re.optimizeNames(q,Y),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(q,Y),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class D extends p{render(q){return"finally"+super.render(q)}}D.kind="finally";class I{constructor(q,Y={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Y,_n:Y.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,Y){const re=this._extScope.value(q,Y);return(this._values[re.prefix]||(this._values[re.prefix]=new Set)).add(re),re}getScopeValue(q,Y){return this._extScope.getValue(q,Y)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,Y,re,pe){const _e=this._scope.toName(Y);return re!==void 0&&pe&&(this._constants[_e.str]=re),this._leafNode(new o(q,_e,re)),_e}const(q,Y,re){return this._def(n.varKinds.const,q,Y,re)}let(q,Y,re){return this._def(n.varKinds.let,q,Y,re)}var(q,Y,re){return this._def(n.varKinds.var,q,Y,re)}assign(q,Y,re){return this._leafNode(new a(q,Y,re))}add(q,Y){return this._leafNode(new u(q,e.operators.ADD,Y))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const Y=["{"];for(const[re,pe]of q)Y.length>1&&Y.push(","),Y.push(re),(re!==pe||this.opts.es5)&&(Y.push(":"),(0,t.addCodeArg)(Y,pe));return Y.push("}"),new t._Code(Y)}if(q,Y,re){if(this._blockNode(new y(q)),Y&&re)this.code(Y).else().code(re).endIf();else if(Y)this.code(Y).endIf();else if(re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,Y){return this._blockNode(q),Y&&this.code(Y).endFor(),this}for(q,Y){return this._for(new b(q),Y)}forRange(q,Y,re,pe,_e=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(q);return this._for(new E(_e,de,Y,re),()=>pe(de))}forOf(q,Y,re,pe=n.varKinds.const){const _e=this._scope.toName(q);if(this.opts.es5){const de=Y instanceof t.Name?Y:this.var("_arr",Y);return this.forRange("_i",0,(0,t._)`${de}.length`,ye=>{this.var(_e,(0,t._)`${de}[${ye}]`),re(_e)})}return this._for(new _("of",pe,_e,Y),()=>re(_e))}forIn(q,Y,re,pe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${Y})`,re);const _e=this._scope.toName(q);return this._for(new _("in",pe,_e,Y),()=>re(_e))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const Y=new S;if(this._blockNode(Y),this.code(q),Y.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,Y,re){if(!Y&&!re)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new C;if(this._blockNode(pe),this.code(q),Y){const _e=this.name("e");this._currNode=pe.catch=new A(_e),Y(_e)}return re&&(this._currNode=pe.finally=new D,this.code(re)),this._endBlockNode(A,D)}throw(q){return this._leafNode(new f(q))}block(q,Y){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(Y),this}endBlock(q){const Y=this._blockStarts.pop();if(Y===void 0)throw new Error("CodeGen: not in self-balancing block");const re=this._nodes.length-Y;if(re<0||q!==void 0&&re!==q)throw new Error(`CodeGen: wrong number of nodes: ${re} vs ${q} expected`);return this._nodes.length=Y,this}func(q,Y=t.nil,re,pe){return this._blockNode(new x(q,Y,re)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,Y){const re=this._currNode;if(re instanceof q||Y&&re instanceof Y)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Y?`${q.kind}/${Y.kind}`:q.kind}"`)}_elseNode(q){const Y=this._currNode;if(!(Y instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Y.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const Y=this._nodes;Y[Y.length-1]=q}}e.CodeGen=I;function O(B,q){for(const Y in q)B[Y]=(B[Y]||0)+(q[Y]||0);return B}function R(B,q){return q instanceof t._CodeOrName?O(B,q.names):B}function M(B,q,Y){if(B instanceof t.Name)return re(B);if(!pe(B))return B;return new t._Code(B._items.reduce((_e,de)=>(de instanceof t.Name&&(de=re(de)),de instanceof t._Code?_e.push(...de._items):_e.push(de),_e),[]));function re(_e){const de=Y[_e.str];return de===void 0||q[_e.str]!==1?_e:(delete q[_e.str],de)}function pe(_e){return _e instanceof t._Code&&_e._items.some(de=>de instanceof t.Name&&q[de.str]===1&&Y[de.str]!==void 0)}}function F(B,q){for(const Y in q)B[Y]=(B[Y]||0)-(q[Y]||0)}function P(B){return typeof B=="boolean"||typeof B=="number"||B===null?!B:(0,t._)`!${W(B)}`}e.not=P;const j=U(e.operators.AND);function z(...B){return B.reduce(j)}e.and=z;const V=U(e.operators.OR);function $(...B){return B.reduce(V)}e.or=$;function U(B){return(q,Y)=>q===t.nil?Y:Y===t.nil?q:(0,t._)`${W(q)} ${B} ${W(Y)}`}function W(B){return B instanceof t.Name?B:(0,t._)`(${B})`}})(An);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Cr=An,tlt=PS;function nlt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=nlt;function rlt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Y1e(e,t),!K1e(t,e.self.RULES.all))}wt.alwaysValidSchema=rlt;function Y1e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||J1e(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=Y1e;function K1e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=K1e;function ilt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=ilt;function slt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Cr._)`${n}`}return(0,Cr._)`${e}${t}${(0,Cr.getProperty)(r)}`}wt.schemaRefOrVal=slt;function olt(e){return X1e(decodeURIComponent(e))}wt.unescapeFragment=olt;function alt(e){return encodeURIComponent(KU(e))}wt.escapeFragment=alt;function KU(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=KU;function X1e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=X1e;function ult(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=ult;function Dne({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Cr.Name?(s instanceof Cr.Name?e(i,s,o):t(i,s,o),o):s instanceof Cr.Name?(t(i,o,s),s):n(s,o);return a===Cr.Name&&!(u instanceof Cr.Name)?r(i,u):u}}wt.mergeEvaluated={props:Dne({mergeNames:(e,t,n)=>e.if((0,Cr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Cr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Cr._)`${n} || {}`).code((0,Cr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Cr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Cr._)`${n} || {}`),XU(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Q1e}),items:Dne({mergeNames:(e,t,n)=>e.if((0,Cr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Cr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Cr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Cr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Q1e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Cr._)`{}`);return t!==void 0&&XU(e,n,t),n}wt.evaluatedPropsToName=Q1e;function XU(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Cr._)`${t}${(0,Cr.getProperty)(r)}`,!0))}wt.setEvaluated=XU;const Ine={};function llt(e,t){return e.scopeValue("func",{ref:t,code:Ine[t.code]||(Ine[t.code]=new tlt._Code(t.code))})}wt.useFunc=llt;var e8;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(e8||(wt.Type=e8={}));function clt(e,t,n){if(e instanceof Cr.Name){const r=t===e8.Num;return n?r?(0,Cr._)`"[" + ${e} + "]"`:(0,Cr._)`"['" + ${e} + "']"`:r?(0,Cr._)`"/" + ${e}`:(0,Cr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Cr.getProperty)(e).toString():"/"+KU(e)}wt.getErrorPath=clt;function J1e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=J1e;var Zf={};Object.defineProperty(Zf,"__esModule",{value:!0});const bo=An,flt={data:new bo.Name("data"),valCxt:new bo.Name("valCxt"),instancePath:new bo.Name("instancePath"),parentData:new bo.Name("parentData"),parentDataProperty:new bo.Name("parentDataProperty"),rootData:new bo.Name("rootData"),dynamicAnchors:new bo.Name("dynamicAnchors"),vErrors:new bo.Name("vErrors"),errors:new bo.Name("errors"),this:new bo.Name("this"),self:new bo.Name("self"),scope:new bo.Name("scope"),json:new bo.Name("json"),jsonPos:new bo.Name("jsonPos"),jsonLen:new bo.Name("jsonLen"),jsonPart:new bo.Name("jsonPart")};Zf.default=flt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=An,n=wt,r=Zf;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:E}=g,{gen:_,compositeRule:x,allErrors:S}=E,C=f(g,y,v);b??(x||S)?u(_,C):l(E,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:E,compositeRule:_,allErrors:x}=b,S=f(g,y,v);u(E,S),_||x||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:E,it:_}){if(E===void 0)throw new Error("ajv implementation error");const x=g.name("err");g.forRange("i",E,r.default.errors,S=>{g.const(x,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${x}.instancePath === undefined`,()=>g.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(r.default.instancePath,_.errorPath))),g.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${_.errSchemaPath}/${y}`),_.opts.verbose&&(g.assign((0,t._)`${x}.schema`,v),g.assign((0,t._)`${x}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:E}=g;E.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:E}=g,_=[h(E,v),p(g,v)];return m(g,y,_),b.object(..._)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let E=b?y:(0,t.str)`${y}/${g}`;return v&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,E]}function m(g,{params:y,message:v},b){const{keyword:E,data:_,schemaValue:x,it:S}=g,{opts:C,propertyName:A,topSchemaRef:D,schemaPath:I}=S;b.push([c.keyword,E],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,x],[c.parentSchema,(0,t._)`${D}${I}`],[r.default.data,_]),A&&b.push([c.propertyName,A])}})(ZT);Object.defineProperty(xb,"__esModule",{value:!0});xb.boolOrEmptySchema=xb.topBoolOrEmptySchema=void 0;const dlt=ZT,hlt=An,plt=Zf,mlt={message:"boolean schema is false"};function glt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?Z1e(e,!1):typeof n=="object"&&n.$async===!0?t.return(plt.default.data):(t.assign((0,hlt._)`${r}.errors`,null),t.return(!0))}xb.topBoolOrEmptySchema=glt;function ylt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),Z1e(e)):n.var(t,!0)}xb.boolOrEmptySchema=ylt;function Z1e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,dlt.reportError)(i,mlt,void 0,t)}var ts={},z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.getRules=z0.isJSONType=void 0;const vlt=["string","number","integer","boolean","null","object","array"],blt=new Set(vlt);function _lt(e){return typeof e=="string"&&blt.has(e)}z0.isJSONType=_lt;function Elt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}z0.getRules=Elt;var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.shouldUseRule=Zd.shouldUseGroup=Zd.schemaHasRulesForType=void 0;function wlt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&eve(e,r)}Zd.schemaHasRulesForType=wlt;function eve(e,t){return t.rules.some(n=>tve(e,n))}Zd.shouldUseGroup=eve;function tve(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Zd.shouldUseRule=tve;Object.defineProperty(ts,"__esModule",{value:!0});ts.reportTypeError=ts.checkDataTypes=ts.checkDataType=ts.coerceAndCheckDataType=ts.getJSONTypes=ts.getSchemaTypes=ts.DataType=void 0;const xlt=z0,Slt=Zd,Tlt=ZT,vn=An,nve=wt;var kv;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(kv||(ts.DataType=kv={}));function Clt(e){const t=rve(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ts.getSchemaTypes=Clt;function rve(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(xlt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ts.getJSONTypes=rve;function Alt(e,t){const{gen:n,data:r,opts:i}=e,s=Dlt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,Slt.schemaHasRulesForType)(e,t[0]));if(o){const a=QU(t,r,i.strictNumbers,kv.Wrong);n.if(a,()=>{s.length?Ilt(e,t,s):JU(e)})}return o}ts.coerceAndCheckDataType=Alt;const ive=new Set(["string","number","integer","boolean","null"]);function Dlt(e,t){return t?e.filter(n=>ive.has(n)||t==="array"&&n==="array"):[]}function Ilt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,vn._)`typeof ${i}`),a=r.let("coerced",(0,vn._)`undefined`);s.coerceTypes==="array"&&r.if((0,vn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,vn._)`${i}[0]`).assign(o,(0,vn._)`typeof ${i}`).if(QU(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,vn._)`${a} !== undefined`);for(const l of n)(ive.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),JU(e),r.endIf(),r.if((0,vn._)`${a} !== undefined`,()=>{r.assign(i,a),Nlt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,vn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,vn._)`"" + ${i}`).elseIf((0,vn._)`${i} === null`).assign(a,(0,vn._)`""`);return;case"number":r.elseIf((0,vn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,vn._)`+${i}`);return;case"integer":r.elseIf((0,vn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,vn._)`+${i}`);return;case"boolean":r.elseIf((0,vn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,vn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,vn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,vn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,vn._)`[${i}]`)}}}function Nlt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,vn._)`${t} !== undefined`,()=>e.assign((0,vn._)`${t}[${n}]`,r))}function t8(e,t,n,r=kv.Correct){const i=r===kv.Correct?vn.operators.EQ:vn.operators.NEQ;let s;switch(e){case"null":return(0,vn._)`${t} ${i} null`;case"array":s=(0,vn._)`Array.isArray(${t})`;break;case"object":s=(0,vn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,vn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,vn._)`typeof ${t} ${i} ${e}`}return r===kv.Correct?s:(0,vn.not)(s);function o(a=vn.nil){return(0,vn.and)((0,vn._)`typeof ${t} == "number"`,a,n?(0,vn._)`isFinite(${t})`:vn.nil)}}ts.checkDataType=t8;function QU(e,t,n,r){if(e.length===1)return t8(e[0],t,n,r);let i;const s=(0,nve.toHash)(e);if(s.array&&s.object){const o=(0,vn._)`typeof ${t} != "object"`;i=s.null?o:(0,vn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=vn.nil;s.number&&delete s.integer;for(const o in s)i=(0,vn.and)(i,t8(o,t,n,r));return i}ts.checkDataTypes=QU;const klt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,vn._)`{type: ${e}}`:(0,vn._)`{type: ${t}}`};function JU(e){const t=Rlt(e);(0,Tlt.reportError)(t,klt)}ts.reportTypeError=JU;function Rlt(e){const{gen:t,data:n,schema:r}=e,i=(0,nve.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var y3={};Object.defineProperty(y3,"__esModule",{value:!0});y3.assignDefaults=void 0;const v1=An,Plt=wt;function Olt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Nne(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Nne(e,s,i.default))}y3.assignDefaults=Olt;function Nne(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,v1._)`${s}${(0,v1.getProperty)(t)}`;if(i){(0,Plt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,v1._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,v1._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,v1._)`${a} = ${(0,v1.stringify)(n)}`)}var hf={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const jr=An,ZU=wt,ep=Zf,Mlt=wt;function $lt(e,t){const{gen:n,data:r,it:i}=e;n.if(tV(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,jr._)`${t}`},!0),e.error()})}Tn.checkReportMissingProp=$lt;function Flt({gen:e,data:t,it:{opts:n}},r,i){return(0,jr.or)(...r.map(s=>(0,jr.and)(tV(e,t,s,n.ownProperties),(0,jr._)`${i} = ${s}`)))}Tn.checkMissingProp=Flt;function Llt(e,t){e.setParams({missingProperty:t},!0),e.error()}Tn.reportMissingProp=Llt;function sve(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,jr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=sve;function eV(e,t,n){return(0,jr._)`${sve(e)}.call(${t}, ${n})`}Tn.isOwnProperty=eV;function Blt(e,t,n,r){const i=(0,jr._)`${t}${(0,jr.getProperty)(n)} !== undefined`;return r?(0,jr._)`${i} && ${eV(e,t,n)}`:i}Tn.propertyInData=Blt;function tV(e,t,n,r){const i=(0,jr._)`${t}${(0,jr.getProperty)(n)} === undefined`;return r?(0,jr.or)(i,(0,jr.not)(eV(e,t,n))):i}Tn.noPropertyInData=tV;function ove(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tn.allSchemaProperties=ove;function jlt(e,t){return ove(t).filter(n=>!(0,ZU.alwaysValidSchema)(e,t[n]))}Tn.schemaProperties=jlt;function zlt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,jr._)`${e}, ${t}, ${r}${i}`:t,f=[[ep.default.instancePath,(0,jr.strConcat)(ep.default.instancePath,s)],[ep.default.parentData,o.parentData],[ep.default.parentDataProperty,o.parentDataProperty],[ep.default.rootData,ep.default.rootData]];o.opts.dynamicRef&&f.push([ep.default.dynamicAnchors,ep.default.dynamicAnchors]);const d=(0,jr._)`${c}, ${n.object(...f)}`;return u!==jr.nil?(0,jr._)`${a}.call(${u}, ${d})`:(0,jr._)`${a}(${d})`}Tn.callValidateCode=zlt;const Ult=(0,jr._)`new RegExp`;function Vlt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,jr._)`${i.code==="new RegExp"?Ult:(0,Mlt.useFunc)(e,i)}(${n}, ${r})`})}Tn.usePattern=Vlt;function Hlt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,jr._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:ZU.Type.Num},s),t.if((0,jr.not)(s),a)})}}Tn.validateArray=Hlt;function qlt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,ZU.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,jr._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,jr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tn.validateUnion=qlt;Object.defineProperty(hf,"__esModule",{value:!0});hf.validateKeywordUsage=hf.validSchemaType=hf.funcKeywordCode=hf.macroKeywordCode=void 0;const Jo=An,Hg=Zf,Wlt=Tn,Glt=ZT;function Ylt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=ave(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Jo.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}hf.macroKeywordCode=Ylt;function Klt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;Qlt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=ave(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&kne(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&kne(e),g(()=>Xlt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Jo._)`await `),v=>r.assign(f,!1).if((0,Jo._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Jo._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Jo._)`${c}.errors`;return r.assign(y,null),m(Jo.nil),y}function m(y=t.async?(0,Jo._)`await `:Jo.nil){const v=u.opts.passContext?Hg.default.this:Hg.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Jo._)`${y}${(0,Wlt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Jo.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}hf.funcKeywordCode=Klt;function kne(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Jo._)`${r.parentData}[${r.parentDataProperty}]`))}function Xlt(e,t){const{gen:n}=e;n.if((0,Jo._)`Array.isArray(${t})`,()=>{n.assign(Hg.default.vErrors,(0,Jo._)`${Hg.default.vErrors} === null ? ${t} : ${Hg.default.vErrors}.concat(${t})`).assign(Hg.default.errors,(0,Jo._)`${Hg.default.vErrors}.length`),(0,Glt.extendErrors)(e)},()=>e.error())}function Qlt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function ave(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Jo.stringify)(n)})}function Jlt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}hf.validSchemaType=Jlt;function Zlt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}hf.validateKeywordUsage=Zlt;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.extendSubschemaMode=Jp.extendSubschemaData=Jp.getSubschema=void 0;const lf=An,uve=wt;function ect(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,lf._)`${e.schemaPath}${(0,lf.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,lf._)`${e.schemaPath}${(0,lf.getProperty)(t)}${(0,lf.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,uve.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Jp.getSubschema=ect;function tct(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,lf._)`${t.data}${(0,lf.getProperty)(n)}`,!0);u(d),e.errorPath=(0,lf.str)`${l}${(0,uve.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,lf._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof lf.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Jp.extendSubschemaData=tct;function nct(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Jp.extendSubschemaMode=nct;var Ys={},lve={exports:{}},kp=lve.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};ND(t,r,i,e,"",e)};kp.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};kp.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};kp.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};kp.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ND(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in kp.arrayKeywords)for(var d=0;d<f.length;d++)ND(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in kp.propsKeywords){if(f&&typeof f=="object")for(var h in f)ND(e,t,n,f[h],i+"/"+c+"/"+rct(h),s,i,c,r,h)}else(c in kp.keywords||e.allKeys&&!(c in kp.skipKeywords))&&ND(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function rct(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var ict=lve.exports;Object.defineProperty(Ys,"__esModule",{value:!0});Ys.getSchemaRefs=Ys.resolveUrl=Ys.normalizeId=Ys._getFullPath=Ys.getFullPath=Ys.inlineRef=void 0;const sct=wt,oct=$z,act=ict,uct=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function lct(e,t=!0){return typeof e=="boolean"?!0:t===!0?!n8(e):t?cve(e)<=t:!1}Ys.inlineRef=lct;const cct=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function n8(e){for(const t in e){if(cct.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(n8)||typeof n=="object"&&n8(n))return!0}return!1}function cve(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!uct.has(n)&&(typeof e[n]=="object"&&(0,sct.eachItem)(e[n],r=>t+=cve(r)),t===1/0))return 1/0}return t}function fve(e,t="",n){n!==!1&&(t=Rv(t));const r=e.parse(t);return dve(e,r)}Ys.getFullPath=fve;function dve(e,t){return e.serialize(t).split("#")[0]+"#"}Ys._getFullPath=dve;const fct=/#\/?$/;function Rv(e){return e?e.replace(fct,""):""}Ys.normalizeId=Rv;function dct(e,t,n){return n=Rv(n),e.resolve(t,n)}Ys.resolveUrl=dct;const hct=/^[a-z_][-a-z0-9._]*$/i;function pct(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Rv(e[n]||t),s={"":i},o=fve(r,i,!1),a={},u=new Set;return act(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const E=this.opts.uriResolver.resolve;if(b=Rv(g?E(g,b):b),u.has(b))throw c(b);u.add(b);let _=this.refs[b];return typeof _=="string"&&(_=this.refs[_]),typeof _=="object"?l(f,_.schema,b):b!==Rv(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!hct.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!oct(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ys.getSchemaRefs=pct;Object.defineProperty(vc,"__esModule",{value:!0});vc.getData=vc.KeywordCxt=vc.validateFunctionCode=void 0;const hve=xb,Rne=ts,nV=Zd,ik=ts,mct=y3,Ex=hf,qF=Jp,$t=An,nn=Zf,gct=Ys,eh=wt,OE=ZT;function yct(e){if(gve(e)&&(yve(e),mve(e))){_ct(e);return}pve(e,()=>(0,hve.topBoolOrEmptySchema)(e))}vc.validateFunctionCode=yct;function pve({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,$t._)`${nn.default.data}, ${nn.default.valCxt}`,r.$async,()=>{e.code((0,$t._)`"use strict"; ${Pne(n,i)}`),bct(e,i),e.code(s)}):e.func(t,(0,$t._)`${nn.default.data}, ${vct(i)}`,r.$async,()=>e.code(Pne(n,i)).code(s))}function vct(e){return(0,$t._)`{${nn.default.instancePath}="", ${nn.default.parentData}, ${nn.default.parentDataProperty}, ${nn.default.rootData}=${nn.default.data}${e.dynamicRef?(0,$t._)`, ${nn.default.dynamicAnchors}={}`:$t.nil}}={}`}function bct(e,t){e.if(nn.default.valCxt,()=>{e.var(nn.default.instancePath,(0,$t._)`${nn.default.valCxt}.${nn.default.instancePath}`),e.var(nn.default.parentData,(0,$t._)`${nn.default.valCxt}.${nn.default.parentData}`),e.var(nn.default.parentDataProperty,(0,$t._)`${nn.default.valCxt}.${nn.default.parentDataProperty}`),e.var(nn.default.rootData,(0,$t._)`${nn.default.valCxt}.${nn.default.rootData}`),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,$t._)`${nn.default.valCxt}.${nn.default.dynamicAnchors}`)},()=>{e.var(nn.default.instancePath,(0,$t._)`""`),e.var(nn.default.parentData,(0,$t._)`undefined`),e.var(nn.default.parentDataProperty,(0,$t._)`undefined`),e.var(nn.default.rootData,nn.default.data),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,$t._)`{}`)})}function _ct(e){const{schema:t,opts:n,gen:r}=e;pve(e,()=>{n.$comment&&t.$comment&&bve(e),Tct(e),r.let(nn.default.vErrors,null),r.let(nn.default.errors,0),n.unevaluated&&Ect(e),vve(e),Dct(e)})}function Ect(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,$t._)`${n}.evaluated`),t.if((0,$t._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,$t._)`${e.evaluated}.props`,(0,$t._)`undefined`)),t.if((0,$t._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,$t._)`${e.evaluated}.items`,(0,$t._)`undefined`))}function Pne(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,$t._)`/*# sourceURL=${n} */`:$t.nil}function wct(e,t){if(gve(e)&&(yve(e),mve(e))){xct(e,t);return}(0,hve.boolOrEmptySchema)(e,t)}function mve({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function gve(e){return typeof e.schema!="boolean"}function xct(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&bve(e),Cct(e),Act(e);const s=r.const("_errs",nn.default.errors);vve(e,s),r.var(t,(0,$t._)`${s} === ${nn.default.errors}`)}function yve(e){(0,eh.checkUnknownRules)(e),Sct(e)}function vve(e,t){if(e.opts.jtd)return One(e,[],!1,t);const n=(0,Rne.getSchemaTypes)(e.schema),r=(0,Rne.coerceAndCheckDataType)(e,n);One(e,n,!r,t)}function Sct(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,eh.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Tct(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,eh.checkStrictMode)(e,"default is ignored in the schema root")}function Cct(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,gct.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Act(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function bve({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,$t._)`${nn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,$t.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,$t._)`${nn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function Dct(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,$t._)`${nn.default.errors} === 0`,()=>t.return(nn.default.data),()=>t.throw((0,$t._)`new ${i}(${nn.default.vErrors})`)):(t.assign((0,$t._)`${r}.errors`,nn.default.vErrors),s.unevaluated&&Ict(e),t.return((0,$t._)`${nn.default.errors} === 0`))}function Ict({gen:e,evaluated:t,props:n,items:r}){n instanceof $t.Name&&e.assign((0,$t._)`${t}.props`,n),r instanceof $t.Name&&e.assign((0,$t._)`${t}.items`,r)}function One(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,eh.schemaHasRulesButRef)(s,c))){i.block(()=>wve(e,"$ref",c.all.$ref.definition));return}u.jtd||Nct(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,nV.shouldUseGroup)(s,d)&&(d.type?(i.if((0,ik.checkDataType)(d.type,o,u.strictNumbers)),Mne(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,ik.reportTypeError)(e)),i.endIf()):Mne(e,d),a||i.if((0,$t._)`${nn.default.errors} === ${r||0}`))}}function Mne(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,mct.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,nV.shouldUseRule)(r,s)&&wve(e,s.keyword,s.definition,t.type)})}function Nct(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(kct(e,t),e.opts.allowUnionTypes||Rct(e,t),Pct(e,e.dataTypes))}function kct(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{_ve(e.dataTypes,n)||rV(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Mct(e,t)}}function Rct(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&rV(e,"use allowUnionTypes to allow union type keyword")}function Pct(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,nV.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Oct(t,o))&&rV(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Oct(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function _ve(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Mct(e,t){const n=[];for(const r of e.dataTypes)_ve(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function rV(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,eh.checkStrictMode)(e,t,e.opts.strictTypes)}class Eve{constructor(t,n,r){if((0,Ex.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,eh.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",xve(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Ex.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",nn.default.errors))}result(t,n,r){this.failResult((0,$t.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,$t.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,$t._)`${n} !== undefined && (${(0,$t.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?OE.reportExtraError:OE.reportError)(this,this.def.error,n)}$dataError(){(0,OE.reportError)(this,this.def.$dataError||OE.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,OE.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=$t.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=$t.nil,n=$t.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,$t.or)((0,$t._)`${i} === undefined`,n)),t!==$t.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==$t.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,$t.or)(o(),a());function o(){if(r.length){if(!(n instanceof $t.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,$t._)`${(0,ik.checkDataTypes)(u,n,s.opts.strictNumbers,ik.DataType.Wrong)}`}return $t.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,$t._)`!${u}(${n})`}return $t.nil}}subschema(t,n){const r=(0,qF.getSubschema)(this.it,t);(0,qF.extendSubschemaData)(r,this.it,t),(0,qF.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return wct(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=eh.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=eh.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,$t.Name)),!0}}vc.KeywordCxt=Eve;function wve(e,t,n,r){const i=new Eve(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Ex.funcKeywordCode)(i,n):"macro"in n?(0,Ex.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Ex.funcKeywordCode)(i,n)}const $ct=/^\/(?:[^~]|~0|~1)*$/,Fct=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function xve(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return nn.default.rootData;if(e[0]==="/"){if(!$ct.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=nn.default.rootData}else{const l=Fct.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,$t._)`${s}${(0,$t.getProperty)((0,eh.unescapeJsonPointer)(l))}`,o=(0,$t._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}vc.getData=xve;var e2={};Object.defineProperty(e2,"__esModule",{value:!0});class Lct extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}e2.default=Lct;var I_={};Object.defineProperty(I_,"__esModule",{value:!0});const WF=Ys;class Bct extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,WF.resolveUrl)(t,n,r),this.missingSchema=(0,WF.normalizeId)((0,WF.getFullPath)(t,this.missingRef))}}I_.default=Bct;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.resolveSchema=Oa.getCompilingSchema=Oa.resolveRef=Oa.compileSchema=Oa.SchemaEnv=void 0;const zl=An,jct=e2,Eg=Zf,ic=Ys,$ne=wt,zct=vc;class v3{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,ic.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Oa.SchemaEnv=v3;function iV(e){const t=Sve.call(this,e);if(t)return t;const n=(0,ic.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new zl.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:jct.default,code:(0,zl._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Eg.default.data,parentData:Eg.default.parentData,parentDataProperty:Eg.default.parentDataProperty,dataNames:[Eg.default.data],dataPathArr:[zl.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,zl.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:zl.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,zl._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,zct.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Eg.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Eg.default.self}`,`${Eg.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof zl.Name?void 0:p,items:m instanceof zl.Name?void 0:m,dynamicProps:p instanceof zl.Name,dynamicItems:m instanceof zl.Name},h.source&&(h.source.evaluated=(0,zl.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Oa.compileSchema=iV;function Uct(e,t,n){var r;n=(0,ic.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=qct.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new v3({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Vct.call(this,s)}Oa.resolveRef=Uct;function Vct(e){return(0,ic.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:iV.call(this,e)}function Sve(e){for(const t of this._compilations)if(Hct(t,e))return t}Oa.getCompilingSchema=Sve;function Hct(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function qct(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||b3.call(this,e,t)}function b3(e,t){const n=this.opts.uriResolver.parse(t),r=(0,ic._getFullPath)(this.opts.uriResolver,n);let i=(0,ic.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return GF.call(this,n,e);const s=(0,ic.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=b3.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:GF.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||iV.call(this,o),s===(0,ic.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,ic.resolveUrl)(this.opts.uriResolver,i,l)),new v3({schema:a,schemaId:u,root:e,baseId:i})}return GF.call(this,n,o)}}Oa.resolveSchema=b3;const Wct=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function GF(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,$ne.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!Wct.has(a)&&l&&(t=(0,ic.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,$ne.schemaHasRulesButRef)(n,this.RULES)){const a=(0,ic.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=b3.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new v3({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Gct="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Yct="Meta-schema for $data reference (JSON AnySchema extension proposal)",Kct="object",Xct=["$data"],Qct={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Jct=!1,Zct={$id:Gct,description:Yct,type:Kct,required:Xct,properties:Qct,additionalProperties:Jct};var sV={},r8={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Hr,function(n){function r(){for(var ue=arguments.length,te=Array(ue),le=0;le<ue;le++)te[le]=arguments[le];if(te.length>1){te[0]=te[0].slice(0,-1);for(var De=te.length-1,Ae=1;Ae<De;++Ae)te[Ae]=te[Ae].slice(1,-1);return te[De]=te[De].slice(1),te.join("")}else return te[0]}function i(ue){return"(?:"+ue+")"}function s(ue){return ue===void 0?"undefined":ue===null?"null":Object.prototype.toString.call(ue).split(" ").pop().split("]").shift().toLowerCase()}function o(ue){return ue.toUpperCase()}function a(ue){return ue!=null?ue instanceof Array?ue:typeof ue.length!="number"||ue.split||ue.setInterval||ue.call?[ue]:Array.prototype.slice.call(ue):[]}function u(ue,te){var le=ue;if(te)for(var De in te)le[De]=te[De];return le}function l(ue){var te="[A-Za-z]",le="[0-9]",De=r(le,"[A-Fa-f]"),Ae=i(i("%[EFef]"+De+"%"+De+De+"%"+De+De)+"|"+i("%[89A-Fa-f]"+De+"%"+De+De)+"|"+i("%"+De+De)),at="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Xt=r(at,St),_n=ue?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Sn=ue?"[\\uE000-\\uF8FF]":"[]",un=r(te,le,"[\\-\\.\\_\\~]",_n);i(te+r(te,le,"[\\+\\-\\.]")+"*"),i(i(Ae+"|"+r(un,St,"[\\:]"))+"*");var $n=i(i("25[0-5]")+"|"+i("2[0-4]"+le)+"|"+i("1"+le+le)+"|"+i("0?[1-9]"+le)+"|0?0?"+le),tr=i($n+"\\."+$n+"\\."+$n+"\\."+$n),Ht=i(De+"{1,4}"),Fn=i(i(Ht+"\\:"+Ht)+"|"+tr),cr=i(i(Ht+"\\:")+"{6}"+Fn),bn=i("\\:\\:"+i(Ht+"\\:")+"{5}"+Fn),Gt=i(i(Ht)+"?\\:\\:"+i(Ht+"\\:")+"{4}"+Fn),Hn=i(i(i(Ht+"\\:")+"{0,1}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{3}"+Fn),vr=i(i(i(Ht+"\\:")+"{0,2}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{2}"+Fn),yi=i(i(i(Ht+"\\:")+"{0,3}"+Ht)+"?\\:\\:"+Ht+"\\:"+Fn),br=i(i(i(Ht+"\\:")+"{0,4}"+Ht)+"?\\:\\:"+Fn),Qr=i(i(i(Ht+"\\:")+"{0,5}"+Ht)+"?\\:\\:"+Ht),lo=i(i(i(Ht+"\\:")+"{0,6}"+Ht)+"?\\:\\:"),qo=i([cr,bn,Gt,Hn,vr,yi,br,Qr,lo].join("|")),gs=i(i(un+"|"+Ae)+"+");i("[vV]"+De+"+\\."+r(un,St,"[\\:]")+"+"),i(i(Ae+"|"+r(un,St))+"*");var Gu=i(Ae+"|"+r(un,St,"[\\:\\@]"));return i(i(Ae+"|"+r(un,St,"[\\@]"))+"+"),i(i(Gu+"|"+r("[\\/\\?]",Sn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",te,le,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",un,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",un,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",un,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",un,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",un,St,"[\\:\\@\\/\\?]",Sn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",un,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",un,St),"g"),UNRESERVED:new RegExp(un,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",un,Xt),"g"),PCT_ENCODED:new RegExp(Ae,"g"),IPV4ADDRESS:new RegExp("^("+tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+qo+")"+i(i("\\%25|\\%(?!"+De+"{2})")+"("+gs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ue(te,le){var De=[],Ae=!0,at=!1,St=void 0;try{for(var Xt=te[Symbol.iterator](),_n;!(Ae=(_n=Xt.next()).done)&&(De.push(_n.value),!(le&&De.length===le));Ae=!0);}catch(Sn){at=!0,St=Sn}finally{try{!Ae&&Xt.return&&Xt.return()}finally{if(at)throw St}}return De}return function(te,le){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return ue(te,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ue){if(Array.isArray(ue)){for(var te=0,le=Array(ue.length);te<ue.length;te++)le[te]=ue[te];return le}else return Array.from(ue)},p=2147483647,m=36,g=1,y=26,v=38,b=700,E=72,_=128,x="-",S=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=m-g,O=Math.floor,R=String.fromCharCode;function M(ue){throw new RangeError(D[ue])}function F(ue,te){for(var le=[],De=ue.length;De--;)le[De]=te(ue[De]);return le}function P(ue,te){var le=ue.split("@"),De="";le.length>1&&(De=le[0]+"@",ue=le[1]),ue=ue.replace(A,".");var Ae=ue.split("."),at=F(Ae,te).join(".");return De+at}function j(ue){for(var te=[],le=0,De=ue.length;le<De;){var Ae=ue.charCodeAt(le++);if(Ae>=55296&&Ae<=56319&&le<De){var at=ue.charCodeAt(le++);(at&64512)==56320?te.push(((Ae&1023)<<10)+(at&1023)+65536):(te.push(Ae),le--)}else te.push(Ae)}return te}var z=function(te){return String.fromCodePoint.apply(String,h(te))},V=function(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:m},$=function(te,le){return te+22+75*(te<26)-((le!=0)<<5)},U=function(te,le,De){var Ae=0;for(te=De?O(te/b):te>>1,te+=O(te/le);te>I*y>>1;Ae+=m)te=O(te/I);return O(Ae+(I+1)*te/(te+v))},W=function(te){var le=[],De=te.length,Ae=0,at=_,St=E,Xt=te.lastIndexOf(x);Xt<0&&(Xt=0);for(var _n=0;_n<Xt;++_n)te.charCodeAt(_n)>=128&&M("not-basic"),le.push(te.charCodeAt(_n));for(var Sn=Xt>0?Xt+1:0;Sn<De;){for(var un=Ae,$n=1,tr=m;;tr+=m){Sn>=De&&M("invalid-input");var Ht=V(te.charCodeAt(Sn++));(Ht>=m||Ht>O((p-Ae)/$n))&&M("overflow"),Ae+=Ht*$n;var Fn=tr<=St?g:tr>=St+y?y:tr-St;if(Ht<Fn)break;var cr=m-Fn;$n>O(p/cr)&&M("overflow"),$n*=cr}var bn=le.length+1;St=U(Ae-un,bn,un==0),O(Ae/bn)>p-at&&M("overflow"),at+=O(Ae/bn),Ae%=bn,le.splice(Ae++,0,at)}return String.fromCodePoint.apply(String,le)},B=function(te){var le=[];te=j(te);var De=te.length,Ae=_,at=0,St=E,Xt=!0,_n=!1,Sn=void 0;try{for(var un=te[Symbol.iterator](),$n;!(Xt=($n=un.next()).done);Xt=!0){var tr=$n.value;tr<128&&le.push(R(tr))}}catch($e){_n=!0,Sn=$e}finally{try{!Xt&&un.return&&un.return()}finally{if(_n)throw Sn}}var Ht=le.length,Fn=Ht;for(Ht&&le.push(x);Fn<De;){var cr=p,bn=!0,Gt=!1,Hn=void 0;try{for(var vr=te[Symbol.iterator](),yi;!(bn=(yi=vr.next()).done);bn=!0){var br=yi.value;br>=Ae&&br<cr&&(cr=br)}}catch($e){Gt=!0,Hn=$e}finally{try{!bn&&vr.return&&vr.return()}finally{if(Gt)throw Hn}}var Qr=Fn+1;cr-Ae>O((p-at)/Qr)&&M("overflow"),at+=(cr-Ae)*Qr,Ae=cr;var lo=!0,qo=!1,gs=void 0;try{for(var Gu=te[Symbol.iterator](),Vc;!(lo=(Vc=Gu.next()).done);lo=!0){var K=Vc.value;if(K<Ae&&++at>p&&M("overflow"),K==Ae){for(var ae=at,ee=m;;ee+=m){var ge=ee<=St?g:ee>=St+y?y:ee-St;if(ae<ge)break;var be=ae-ge,he=m-ge;le.push(R($(ge+be%he,0))),ae=O(be/he)}le.push(R($(ae,0))),St=U(at,Qr,Fn==Ht),at=0,++Fn}}}catch($e){qo=!0,gs=$e}finally{try{!lo&&Gu.return&&Gu.return()}finally{if(qo)throw gs}}++at,++Ae}return le.join("")},q=function(te){return P(te,function(le){return S.test(le)?W(le.slice(4).toLowerCase()):le})},Y=function(te){return P(te,function(le){return C.test(le)?"xn--"+B(le):le})},re={version:"2.1.0",ucs2:{decode:j,encode:z},decode:W,encode:B,toASCII:Y,toUnicode:q},pe={};function _e(ue){var te=ue.charCodeAt(0),le=void 0;return te<16?le="%0"+te.toString(16).toUpperCase():te<128?le="%"+te.toString(16).toUpperCase():te<2048?le="%"+(te>>6|192).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase():le="%"+(te>>12|224).toString(16).toUpperCase()+"%"+(te>>6&63|128).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase(),le}function de(ue){for(var te="",le=0,De=ue.length;le<De;){var Ae=parseInt(ue.substr(le+1,2),16);if(Ae<128)te+=String.fromCharCode(Ae),le+=3;else if(Ae>=194&&Ae<224){if(De-le>=6){var at=parseInt(ue.substr(le+4,2),16);te+=String.fromCharCode((Ae&31)<<6|at&63)}else te+=ue.substr(le,6);le+=6}else if(Ae>=224){if(De-le>=9){var St=parseInt(ue.substr(le+4,2),16),Xt=parseInt(ue.substr(le+7,2),16);te+=String.fromCharCode((Ae&15)<<12|(St&63)<<6|Xt&63)}else te+=ue.substr(le,9);le+=9}else te+=ue.substr(le,3),le+=3}return te}function ye(ue,te){function le(De){var Ae=de(De);return Ae.match(te.UNRESERVED)?Ae:De}return ue.scheme&&(ue.scheme=String(ue.scheme).replace(te.PCT_ENCODED,le).toLowerCase().replace(te.NOT_SCHEME,"")),ue.userinfo!==void 0&&(ue.userinfo=String(ue.userinfo).replace(te.PCT_ENCODED,le).replace(te.NOT_USERINFO,_e).replace(te.PCT_ENCODED,o)),ue.host!==void 0&&(ue.host=String(ue.host).replace(te.PCT_ENCODED,le).toLowerCase().replace(te.NOT_HOST,_e).replace(te.PCT_ENCODED,o)),ue.path!==void 0&&(ue.path=String(ue.path).replace(te.PCT_ENCODED,le).replace(ue.scheme?te.NOT_PATH:te.NOT_PATH_NOSCHEME,_e).replace(te.PCT_ENCODED,o)),ue.query!==void 0&&(ue.query=String(ue.query).replace(te.PCT_ENCODED,le).replace(te.NOT_QUERY,_e).replace(te.PCT_ENCODED,o)),ue.fragment!==void 0&&(ue.fragment=String(ue.fragment).replace(te.PCT_ENCODED,le).replace(te.NOT_FRAGMENT,_e).replace(te.PCT_ENCODED,o)),ue}function Ce(ue){return ue.replace(/^0*(.*)/,"$1")||"0"}function ve(ue,te){var le=ue.match(te.IPV4ADDRESS)||[],De=d(le,2),Ae=De[1];return Ae?Ae.split(".").map(Ce).join("."):ue}function qe(ue,te){var le=ue.match(te.IPV6ADDRESS)||[],De=d(le,3),Ae=De[1],at=De[2];if(Ae){for(var St=Ae.toLowerCase().split("::").reverse(),Xt=d(St,2),_n=Xt[0],Sn=Xt[1],un=Sn?Sn.split(":").map(Ce):[],$n=_n.split(":").map(Ce),tr=te.IPV4ADDRESS.test($n[$n.length-1]),Ht=tr?7:8,Fn=$n.length-Ht,cr=Array(Ht),bn=0;bn<Ht;++bn)cr[bn]=un[bn]||$n[Fn+bn]||"";tr&&(cr[Ht-1]=ve(cr[Ht-1],te));var Gt=cr.reduce(function(Qr,lo,qo){if(!lo||lo==="0"){var gs=Qr[Qr.length-1];gs&&gs.index+gs.length===qo?gs.length++:Qr.push({index:qo,length:1})}return Qr},[]),Hn=Gt.sort(function(Qr,lo){return lo.length-Qr.length})[0],vr=void 0;if(Hn&&Hn.length>1){var yi=cr.slice(0,Hn.index),br=cr.slice(Hn.index+Hn.length);vr=yi.join(":")+"::"+br.join(":")}else vr=cr.join(":");return at&&(vr+="%"+at),vr}else return ue}var He=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ht="".match(/(){0}/)[1]===void 0;function rt(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le={},De=te.iri!==!1?f:c;te.reference==="suffix"&&(ue=(te.scheme?te.scheme+":":"")+"//"+ue);var Ae=ue.match(He);if(Ae){ht?(le.scheme=Ae[1],le.userinfo=Ae[3],le.host=Ae[4],le.port=parseInt(Ae[5],10),le.path=Ae[6]||"",le.query=Ae[7],le.fragment=Ae[8],isNaN(le.port)&&(le.port=Ae[5])):(le.scheme=Ae[1]||void 0,le.userinfo=ue.indexOf("@")!==-1?Ae[3]:void 0,le.host=ue.indexOf("//")!==-1?Ae[4]:void 0,le.port=parseInt(Ae[5],10),le.path=Ae[6]||"",le.query=ue.indexOf("?")!==-1?Ae[7]:void 0,le.fragment=ue.indexOf("#")!==-1?Ae[8]:void 0,isNaN(le.port)&&(le.port=ue.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ae[4]:void 0)),le.host&&(le.host=qe(ve(le.host,De),De)),le.scheme===void 0&&le.userinfo===void 0&&le.host===void 0&&le.port===void 0&&!le.path&&le.query===void 0?le.reference="same-document":le.scheme===void 0?le.reference="relative":le.fragment===void 0?le.reference="absolute":le.reference="uri",te.reference&&te.reference!=="suffix"&&te.reference!==le.reference&&(le.error=le.error||"URI is not a "+te.reference+" reference.");var at=pe[(te.scheme||le.scheme||"").toLowerCase()];if(!te.unicodeSupport&&(!at||!at.unicodeSupport)){if(le.host&&(te.domainHost||at&&at.domainHost))try{le.host=re.toASCII(le.host.replace(De.PCT_ENCODED,de).toLowerCase())}catch(St){le.error=le.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(le,c)}else ye(le,De);at&&at.parse&&at.parse(le,te)}else le.error=le.error||"URI can not be parsed.";return le}function Pe(ue,te){var le=te.iri!==!1?f:c,De=[];return ue.userinfo!==void 0&&(De.push(ue.userinfo),De.push("@")),ue.host!==void 0&&De.push(qe(ve(String(ue.host),le),le).replace(le.IPV6ADDRESS,function(Ae,at,St){return"["+at+(St?"%25"+St:"")+"]"})),(typeof ue.port=="number"||typeof ue.port=="string")&&(De.push(":"),De.push(String(ue.port))),De.length?De.join(""):void 0}var Be=/^\.\.?\//,Xe=/^\/\.(\/|$)/,mt=/^\/\.\.(\/|$)/,Ft=/^\/?(?:.|\n)*?(?=\/|$)/;function bt(ue){for(var te=[];ue.length;)if(ue.match(Be))ue=ue.replace(Be,"");else if(ue.match(Xe))ue=ue.replace(Xe,"/");else if(ue.match(mt))ue=ue.replace(mt,"/"),te.pop();else if(ue==="."||ue==="..")ue="";else{var le=ue.match(Ft);if(le){var De=le[0];ue=ue.slice(De.length),te.push(De)}else throw new Error("Unexpected dot segment condition")}return te.join("")}function G(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=te.iri?f:c,De=[],Ae=pe[(te.scheme||ue.scheme||"").toLowerCase()];if(Ae&&Ae.serialize&&Ae.serialize(ue,te),ue.host&&!le.IPV6ADDRESS.test(ue.host)){if(te.domainHost||Ae&&Ae.domainHost)try{ue.host=te.iri?re.toUnicode(ue.host):re.toASCII(ue.host.replace(le.PCT_ENCODED,de).toLowerCase())}catch(Xt){ue.error=ue.error||"Host's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+Xt}}ye(ue,le),te.reference!=="suffix"&&ue.scheme&&(De.push(ue.scheme),De.push(":"));var at=Pe(ue,te);if(at!==void 0&&(te.reference!=="suffix"&&De.push("//"),De.push(at),ue.path&&ue.path.charAt(0)!=="/"&&De.push("/")),ue.path!==void 0){var St=ue.path;!te.absolutePath&&(!Ae||!Ae.absolutePath)&&(St=bt(St)),at===void 0&&(St=St.replace(/^\/\//,"/%2F")),De.push(St)}return ue.query!==void 0&&(De.push("?"),De.push(ue.query)),ue.fragment!==void 0&&(De.push("#"),De.push(ue.fragment)),De.join("")}function ie(ue,te){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},De=arguments[3],Ae={};return De||(ue=rt(G(ue,le),le),te=rt(G(te,le),le)),le=le||{},!le.tolerant&&te.scheme?(Ae.scheme=te.scheme,Ae.userinfo=te.userinfo,Ae.host=te.host,Ae.port=te.port,Ae.path=bt(te.path||""),Ae.query=te.query):(te.userinfo!==void 0||te.host!==void 0||te.port!==void 0?(Ae.userinfo=te.userinfo,Ae.host=te.host,Ae.port=te.port,Ae.path=bt(te.path||""),Ae.query=te.query):(te.path?(te.path.charAt(0)==="/"?Ae.path=bt(te.path):((ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0)&&!ue.path?Ae.path="/"+te.path:ue.path?Ae.path=ue.path.slice(0,ue.path.lastIndexOf("/")+1)+te.path:Ae.path=te.path,Ae.path=bt(Ae.path)),Ae.query=te.query):(Ae.path=ue.path,te.query!==void 0?Ae.query=te.query:Ae.query=ue.query),Ae.userinfo=ue.userinfo,Ae.host=ue.host,Ae.port=ue.port),Ae.scheme=ue.scheme),Ae.fragment=te.fragment,Ae}function me(ue,te,le){var De=u({scheme:"null"},le);return G(ie(rt(ue,De),rt(te,De),De,!0),De)}function J(ue,te){return typeof ue=="string"?ue=G(rt(ue,te),te):s(ue)==="object"&&(ue=rt(G(ue,te),te)),ue}function se(ue,te,le){return typeof ue=="string"?ue=G(rt(ue,le),le):s(ue)==="object"&&(ue=G(ue,le)),typeof te=="string"?te=G(rt(te,le),le):s(te)==="object"&&(te=G(te,le)),ue===te}function ce(ue,te){return ue&&ue.toString().replace(!te||!te.iri?c.ESCAPE:f.ESCAPE,_e)}function Se(ue,te){return ue&&ue.toString().replace(!te||!te.iri?c.PCT_ENCODED:f.PCT_ENCODED,de)}var Te={scheme:"http",domainHost:!0,parse:function(te,le){return te.host||(te.error=te.error||"HTTP URIs must have a host."),te},serialize:function(te,le){var De=String(te.scheme).toLowerCase()==="https";return(te.port===(De?443:80)||te.port==="")&&(te.port=void 0),te.path||(te.path="/"),te}},Ge={scheme:"https",domainHost:Te.domainHost,parse:Te.parse,serialize:Te.serialize};function je(ue){return typeof ue.secure=="boolean"?ue.secure:String(ue.scheme).toLowerCase()==="wss"}var Ct={scheme:"ws",domainHost:!0,parse:function(te,le){var De=te;return De.secure=je(De),De.resourceName=(De.path||"/")+(De.query?"?"+De.query:""),De.path=void 0,De.query=void 0,De},serialize:function(te,le){if((te.port===(je(te)?443:80)||te.port==="")&&(te.port=void 0),typeof te.secure=="boolean"&&(te.scheme=te.secure?"wss":"ws",te.secure=void 0),te.resourceName){var De=te.resourceName.split("?"),Ae=d(De,2),at=Ae[0],St=Ae[1];te.path=at&&at!=="/"?at:void 0,te.query=St,te.resourceName=void 0}return te.fragment=void 0,te}},Ot={scheme:"wss",domainHost:Ct.domainHost,parse:Ct.parse,serialize:Ct.serialize},Dt={},Vt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Zt="[0-9A-Fa-f]",an=i(i("%[EFef]"+Zt+"%"+Zt+Zt+"%"+Zt+Zt)+"|"+i("%[89A-Fa-f]"+Zt+"%"+Zt+Zt)+"|"+i("%"+Zt+Zt)),gr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",lr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",fn=r(lr,'[\\"\\\\]'),Xr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",er=new RegExp(Vt,"g"),gi=new RegExp(an,"g"),Ll=new RegExp(r("[^]",gr,"[\\.]",'[\\"]',fn),"g"),Ho=new RegExp(r("[^]",Vt,Xr),"g"),Wu=Ho;function Yn(ue){var te=de(ue);return te.match(er)?te:ue}var Lr={scheme:"mailto",parse:function(te,le){var De=te,Ae=De.to=De.path?De.path.split(","):[];if(De.path=void 0,De.query){for(var at=!1,St={},Xt=De.query.split("&"),_n=0,Sn=Xt.length;_n<Sn;++_n){var un=Xt[_n].split("=");switch(un[0]){case"to":for(var $n=un[1].split(","),tr=0,Ht=$n.length;tr<Ht;++tr)Ae.push($n[tr]);break;case"subject":De.subject=Se(un[1],le);break;case"body":De.body=Se(un[1],le);break;default:at=!0,St[Se(un[0],le)]=Se(un[1],le);break}}at&&(De.headers=St)}De.query=void 0;for(var Fn=0,cr=Ae.length;Fn<cr;++Fn){var bn=Ae[Fn].split("@");if(bn[0]=Se(bn[0]),le.unicodeSupport)bn[1]=Se(bn[1],le).toLowerCase();else try{bn[1]=re.toASCII(Se(bn[1],le).toLowerCase())}catch(Gt){De.error=De.error||"Email address's domain name can not be converted to ASCII via punycode: "+Gt}Ae[Fn]=bn.join("@")}return De},serialize:function(te,le){var De=te,Ae=a(te.to);if(Ae){for(var at=0,St=Ae.length;at<St;++at){var Xt=String(Ae[at]),_n=Xt.lastIndexOf("@"),Sn=Xt.slice(0,_n).replace(gi,Yn).replace(gi,o).replace(Ll,_e),un=Xt.slice(_n+1);try{un=le.iri?re.toUnicode(un):re.toASCII(Se(un,le).toLowerCase())}catch(Fn){De.error=De.error||"Email address's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+Fn}Ae[at]=Sn+"@"+un}De.path=Ae.join(",")}var $n=te.headers=te.headers||{};te.subject&&($n.subject=te.subject),te.body&&($n.body=te.body);var tr=[];for(var Ht in $n)$n[Ht]!==Dt[Ht]&&tr.push(Ht.replace(gi,Yn).replace(gi,o).replace(Ho,_e)+"="+$n[Ht].replace(gi,Yn).replace(gi,o).replace(Wu,_e));return tr.length&&(De.query=tr.join("&")),De}},yr=/^([^\:]+)\:(.*)/,uo={scheme:"urn",parse:function(te,le){var De=te.path&&te.path.match(yr),Ae=te;if(De){var at=le.scheme||Ae.scheme||"urn",St=De[1].toLowerCase(),Xt=De[2],_n=at+":"+(le.nid||St),Sn=pe[_n];Ae.nid=St,Ae.nss=Xt,Ae.path=void 0,Sn&&(Ae=Sn.parse(Ae,le))}else Ae.error=Ae.error||"URN can not be parsed.";return Ae},serialize:function(te,le){var De=le.scheme||te.scheme||"urn",Ae=te.nid,at=De+":"+(le.nid||Ae),St=pe[at];St&&(te=St.serialize(te,le));var Xt=te,_n=te.nss;return Xt.path=(Ae||le.nid)+":"+_n,Xt}},Fs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ls={scheme:"urn:uuid",parse:function(te,le){var De=te;return De.uuid=De.nss,De.nss=void 0,!le.tolerant&&(!De.uuid||!De.uuid.match(Fs))&&(De.error=De.error||"UUID is not valid."),De},serialize:function(te,le){var De=te;return De.nss=(te.uuid||"").toLowerCase(),De}};pe[Te.scheme]=Te,pe[Ge.scheme]=Ge,pe[Ct.scheme]=Ct,pe[Ot.scheme]=Ot,pe[Lr.scheme]=Lr,pe[uo.scheme]=uo,pe[Ls.scheme]=Ls,n.SCHEMES=pe,n.pctEncChar=_e,n.pctDecChars=de,n.parse=rt,n.removeDotSegments=bt,n.serialize=G,n.resolveComponents=ie,n.resolve=me,n.normalize=J,n.equal=se,n.escapeComponent=ce,n.unescapeComponent=Se,Object.defineProperty(n,"__esModule",{value:!0})})})(r8,r8.exports);var eft=r8.exports;Object.defineProperty(sV,"__esModule",{value:!0});const Tve=eft;Tve.code='require("ajv/dist/runtime/uri").default';sV.default=Tve;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=vc;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=An;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=e2,i=I_,s=z0,o=Oa,a=An,u=Ys,l=ts,c=wt,f=Zct,d=sV,h=($,U)=>new RegExp($,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b($){var U,W,B,q,Y,re,pe,_e,de,ye,Ce,ve,qe,He,ht,rt,Pe,Be,Xe,mt,Ft,bt,G,ie,me;const J=$.strict,se=(U=$.code)===null||U===void 0?void 0:U.optimize,ce=se===!0||se===void 0?1:se||0,Se=(B=(W=$.code)===null||W===void 0?void 0:W.regExp)!==null&&B!==void 0?B:h,Te=(q=$.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(re=(Y=$.strictSchema)!==null&&Y!==void 0?Y:J)!==null&&re!==void 0?re:!0,strictNumbers:(_e=(pe=$.strictNumbers)!==null&&pe!==void 0?pe:J)!==null&&_e!==void 0?_e:!0,strictTypes:(ye=(de=$.strictTypes)!==null&&de!==void 0?de:J)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ce=$.strictTuples)!==null&&Ce!==void 0?Ce:J)!==null&&ve!==void 0?ve:"log",strictRequired:(He=(qe=$.strictRequired)!==null&&qe!==void 0?qe:J)!==null&&He!==void 0?He:!1,code:$.code?{...$.code,optimize:ce,regExp:Se}:{optimize:ce,regExp:Se},loopRequired:(ht=$.loopRequired)!==null&&ht!==void 0?ht:v,loopEnum:(rt=$.loopEnum)!==null&&rt!==void 0?rt:v,meta:(Pe=$.meta)!==null&&Pe!==void 0?Pe:!0,messages:(Be=$.messages)!==null&&Be!==void 0?Be:!0,inlineRefs:(Xe=$.inlineRefs)!==null&&Xe!==void 0?Xe:!0,schemaId:(mt=$.schemaId)!==null&&mt!==void 0?mt:"$id",addUsedSchema:(Ft=$.addUsedSchema)!==null&&Ft!==void 0?Ft:!0,validateSchema:(bt=$.validateSchema)!==null&&bt!==void 0?bt:!0,validateFormats:(G=$.validateFormats)!==null&&G!==void 0?G:!0,unicodeRegExp:(ie=$.unicodeRegExp)!==null&&ie!==void 0?ie:!0,int32range:(me=$.int32range)!==null&&me!==void 0?me:!0,uriResolver:Te}}class E{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...b(U)};const{es5:W,lines:B}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:B}),this.logger=O(U.logger);const q=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),_.call(this,g,U,"NOT SUPPORTED"),_.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=D.call(this),U.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&A.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),S.call(this),U.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:B}=this.opts;let q=f;B==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&U&&this.addMetaSchema(q,q[B],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let B;if(typeof U=="string"){if(B=this.getSchema(U),!B)throw new Error(`no schema with key or ref "${U}"`)}else B=this.compile(U);const q=B(W);return"$async"in B||(this.errors=B.errors),q}compile(U,W){const B=this._addSchema(U,W);return B.validate||this._compileSchemaEnv(B)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:B}=this.opts;return q.call(this,U,W);async function q(ye,Ce){await Y.call(this,ye.$schema);const ve=this._addSchema(ye,Ce);return ve.validate||re.call(this,ve)}async function Y(ye){ye&&!this.getSchema(ye)&&await q.call(this,{$ref:ye},!0)}async function re(ye){try{return this._compileSchemaEnv(ye)}catch(Ce){if(!(Ce instanceof i.default))throw Ce;return pe.call(this,Ce),await _e.call(this,Ce.missingSchema),re.call(this,ye)}}function pe({missingSchema:ye,missingRef:Ce}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ce} cannot be resolved`)}async function _e(ye){const Ce=await de.call(this,ye);this.refs[ye]||await Y.call(this,Ce.$schema),this.refs[ye]||this.addSchema(Ce,ye,W)}async function de(ye){const Ce=this._loading[ye];if(Ce)return Ce;try{return await(this._loading[ye]=B(ye))}finally{delete this._loading[ye]}}}addSchema(U,W,B,q=this.opts.validateSchema){if(Array.isArray(U)){for(const re of U)this.addSchema(re,void 0,B,q);return this}let Y;if(typeof U=="object"){const{schemaId:re}=this.opts;if(Y=U[re],Y!==void 0&&typeof Y!="string")throw new Error(`schema ${re} must be string`)}return W=(0,u.normalizeId)(W||Y),this._checkUnique(W),this.schemas[W]=this._addSchema(U,B,W,q,!0),this}addMetaSchema(U,W,B=this.opts.validateSchema){return this.addSchema(U,W,!0,B),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let B;if(B=U.$schema,B!==void 0&&typeof B!="string")throw new Error("$schema must be a string");if(B=B||this.opts.defaultMeta||this.defaultMeta(),!B)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(B,U);if(!q&&W){const Y="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Y);else throw new Error(Y)}return q}getSchema(U){let W;for(;typeof(W=x.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:B}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:B});if(W=o.resolveSchema.call(this,q,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=x.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let B=U[this.opts.schemaId];return B&&(B=(0,u.normalizeId)(B),delete this.schemas[B],delete this.refs[B]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let B;if(typeof U=="string")B=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=B);else if(typeof U=="object"&&W===void 0){if(W=U,B=W.keyword,Array.isArray(B)&&!B.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(M.call(this,B,W),!W)return(0,c.eachItem)(B,Y=>F.call(this,Y)),this;j.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(B,q.type.length===0?Y=>F.call(this,Y,q):Y=>q.type.forEach(re=>F.call(this,Y,q,re))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const B of W.rules){const q=B.rules.findIndex(Y=>Y.keyword===U);q>=0&&B.rules.splice(q,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:B="data"}={}){return!U||U.length===0?"No errors":U.map(q=>`${B}${q.instancePath} ${q.message}`).reduce((q,Y)=>q+W+Y)}$dataMetaSchema(U,W){const B=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const q of W){const Y=q.split("/").slice(1);let re=U;for(const pe of Y)re=re[pe];for(const pe in B){const _e=B[pe];if(typeof _e!="object")continue;const{$data:de}=_e.definition,ye=re[pe];de&&ye&&(re[pe]=V(ye))}}return U}_removeAllSchemas(U,W){for(const B in U){const q=U[B];(!W||W.test(B))&&(typeof q=="string"?delete U[B]:q&&!q.meta&&(this._cache.delete(q.schema),delete U[B]))}}_addSchema(U,W,B,q=this.opts.validateSchema,Y=this.opts.addUsedSchema){let re;const{schemaId:pe}=this.opts;if(typeof U=="object")re=U[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let _e=this._cache.get(U);if(_e!==void 0)return _e;B=(0,u.normalizeId)(re||B);const de=u.getSchemaRefs.call(this,U,B);return _e=new o.SchemaEnv({schema:U,schemaId:pe,meta:W,baseId:B,localRefs:de}),this._cache.set(_e.schema,_e),Y&&!B.startsWith("#")&&(B&&this._checkUnique(B),this.refs[B]=_e),q&&this.validateSchema(U,!0),_e}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function _($,U,W,B="error"){for(const q in $){const Y=q;Y in U&&this.logger[B](`${W}: option ${q}. ${$[Y]}`)}}function x($){return $=(0,u.normalizeId)($),this.schemas[$]||this.refs[$]}function S(){const $=this.opts.schemas;if($)if(Array.isArray($))this.addSchema($);else for(const U in $)this.addSchema($[U],U)}function C(){for(const $ in this.opts.formats){const U=this.opts.formats[$];U&&this.addFormat($,U)}}function A($){if(Array.isArray($)){this.addVocabulary($);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in $){const W=$[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function D(){const $={...this.opts};for(const U of p)delete $[U];return $}const I={log(){},warn(){},error(){}};function O($){if($===!1)return I;if($===void 0)return console;if($.log&&$.warn&&$.error)return $;throw new Error("logger must implement log, warn and error methods")}const R=/^[a-z_$][a-z0-9_$:-]*$/i;function M($,U){const{RULES:W}=this;if((0,c.eachItem)($,B=>{if(W.keywords[B])throw new Error(`Keyword ${B} is already defined`);if(!R.test(B))throw new Error(`Keyword ${B} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function F($,U,W){var B;const q=U==null?void 0:U.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Y}=this;let re=q?Y.post:Y.rules.find(({type:_e})=>_e===W);if(re||(re={type:W,rules:[]},Y.rules.push(re)),Y.keywords[$]=!0,!U)return;const pe={keyword:$,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?P.call(this,re,pe,U.before):re.rules.push(pe),Y.all[$]=pe,(B=U.implements)===null||B===void 0||B.forEach(_e=>this.addKeyword(_e))}function P($,U,W){const B=$.rules.findIndex(q=>q.keyword===W);B>=0?$.rules.splice(B,0,U):($.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function j($){let{metaSchema:U}=$;U!==void 0&&($.$data&&this.opts.$data&&(U=V(U)),$.validateSchema=this.compile(U,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V($){return{anyOf:[$,z]}}})(G1e);var oV={},aV={},uV={};Object.defineProperty(uV,"__esModule",{value:!0});const tft={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};uV.default=tft;var U0={};Object.defineProperty(U0,"__esModule",{value:!0});U0.callRef=U0.getValidate=void 0;const nft=I_,Fne=Tn,Ca=An,b1=Zf,Lne=Oa,dA=wt,rft={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Lne.resolveRef.call(u,l,i,n);if(c===void 0)throw new nft.default(r.opts.uriResolver,i,n);if(c instanceof Lne.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return kD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return kD(e,(0,Ca._)`${p}.validate`,l,l.$async)}function d(p){const m=Cve(e,p);kD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ca.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ca.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function Cve(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ca._)`${n.scopeValue("wrapper",{ref:t})}.validate`}U0.getValidate=Cve;function kD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?b1.default.this:Ca.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ca._)`await ${(0,Fne.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ca._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Fne.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Ca._)`${p}.errors`;i.assign(b1.default.vErrors,(0,Ca._)`${b1.default.vErrors} === null ? ${m} : ${b1.default.vErrors}.concat(${m})`),i.assign(b1.default.errors,(0,Ca._)`${b1.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=dA.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ca._)`${p}.evaluated.props`);s.props=dA.mergeEvaluated.props(i,y,s.props,Ca.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=dA.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ca._)`${p}.evaluated.items`);s.items=dA.mergeEvaluated.items(i,y,s.items,Ca.Name)}}}U0.callRef=kD;U0.default=rft;Object.defineProperty(aV,"__esModule",{value:!0});const ift=uV,sft=U0,oft=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",ift.default,sft.default];aV.default=oft;var lV={},cV={};Object.defineProperty(cV,"__esModule",{value:!0});const sk=An,tp=sk.operators,ok={maximum:{okStr:"<=",ok:tp.LTE,fail:tp.GT},minimum:{okStr:">=",ok:tp.GTE,fail:tp.LT},exclusiveMaximum:{okStr:"<",ok:tp.LT,fail:tp.GTE},exclusiveMinimum:{okStr:">",ok:tp.GT,fail:tp.LTE}},aft={message:({keyword:e,schemaCode:t})=>(0,sk.str)`must be ${ok[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,sk._)`{comparison: ${ok[e].okStr}, limit: ${t}}`},uft={keyword:Object.keys(ok),type:"number",schemaType:"number",$data:!0,error:aft,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,sk._)`${n} ${ok[t].fail} ${r} || isNaN(${n})`)}};cV.default=uft;var fV={};Object.defineProperty(fV,"__esModule",{value:!0});const wx=An,lft={message:({schemaCode:e})=>(0,wx.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,wx._)`{multipleOf: ${e}}`},cft={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:lft,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,wx._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,wx._)`${o} !== parseInt(${o})`;e.fail$data((0,wx._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};fV.default=cft;var dV={},hV={};Object.defineProperty(hV,"__esModule",{value:!0});function Ave(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}hV.default=Ave;Ave.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(dV,"__esModule",{value:!0});const qg=An,fft=wt,dft=hV,hft={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,qg.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,qg._)`{limit: ${e}}`},pft={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:hft,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?qg.operators.GT:qg.operators.LT,o=i.opts.unicode===!1?(0,qg._)`${n}.length`:(0,qg._)`${(0,fft.useFunc)(e.gen,dft.default)}(${n})`;e.fail$data((0,qg._)`${o} ${s} ${r}`)}};dV.default=pft;var pV={};Object.defineProperty(pV,"__esModule",{value:!0});const mft=Tn,ak=An,gft={message:({schemaCode:e})=>(0,ak.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,ak._)`{pattern: ${e}}`},yft={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:gft,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,ak._)`(new RegExp(${i}, ${o}))`:(0,mft.usePattern)(e,r);e.fail$data((0,ak._)`!${a}.test(${t})`)}};pV.default=yft;var mV={};Object.defineProperty(mV,"__esModule",{value:!0});const xx=An,vft={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,xx.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,xx._)`{limit: ${e}}`},bft={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:vft,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?xx.operators.GT:xx.operators.LT;e.fail$data((0,xx._)`Object.keys(${n}).length ${i} ${r}`)}};mV.default=bft;var gV={};Object.defineProperty(gV,"__esModule",{value:!0});const ME=Tn,Sx=An,_ft=wt,Eft={message:({params:{missingProperty:e}})=>(0,Sx.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Sx._)`{missingProperty: ${e}}`},wft={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Eft,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,_ft.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Sx.nil,f);else for(const h of n)(0,ME.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,ME.checkMissingProp)(e,n,h)),(0,ME.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,ME.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,ME.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Sx.not)(p),()=>{e.error(),t.break()})},Sx.nil)}}};gV.default=wft;var yV={};Object.defineProperty(yV,"__esModule",{value:!0});const Tx=An,xft={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Tx.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Tx._)`{limit: ${e}}`},Sft={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:xft,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Tx.operators.GT:Tx.operators.LT;e.fail$data((0,Tx._)`${n}.length ${i} ${r}`)}};yV.default=Sft;var vV={},t2={};Object.defineProperty(t2,"__esModule",{value:!0});const Dve=$z;Dve.code='require("ajv/dist/runtime/equal").default';t2.default=Dve;Object.defineProperty(vV,"__esModule",{value:!0});const YF=ts,Vs=An,Tft=wt,Cft=t2,Aft={message:({params:{i:e,j:t}})=>(0,Vs.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Vs._)`{i: ${e}, j: ${t}}`},Dft={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Aft,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,YF.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Vs._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Vs._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Vs._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,YF.checkDataTypes)(l,g,a.opts.strictNumbers,YF.DataType.Wrong),v=t.const("indices",(0,Vs._)`{}`);t.for((0,Vs._)`;${p}--;`,()=>{t.let(g,(0,Vs._)`${n}[${p}]`),t.if(y,(0,Vs._)`continue`),l.length>1&&t.if((0,Vs._)`typeof ${g} == "string"`,(0,Vs._)`${g} += "_"`),t.if((0,Vs._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Vs._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Vs._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Tft.useFunc)(t,Cft.default),y=t.name("outer");t.label(y).for((0,Vs._)`;${p}--;`,()=>t.for((0,Vs._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Vs._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};vV.default=Dft;var bV={};Object.defineProperty(bV,"__esModule",{value:!0});const i8=An,Ift=wt,Nft=t2,kft={message:"must be equal to constant",params:({schemaCode:e})=>(0,i8._)`{allowedValue: ${e}}`},Rft={keyword:"const",$data:!0,error:kft,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,i8._)`!${(0,Ift.useFunc)(t,Nft.default)}(${n}, ${i})`):e.fail((0,i8._)`${s} !== ${n}`)}};bV.default=Rft;var _V={};Object.defineProperty(_V,"__esModule",{value:!0});const Dw=An,Pft=wt,Oft=t2,Mft={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Dw._)`{allowedValues: ${e}}`},$ft={keyword:"enum",schemaType:"array",$data:!0,error:Mft,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,Pft.useFunc)(t,Oft.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,Dw.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,Dw._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,Dw._)`${l()}(${n}, ${h}[${p}])`:(0,Dw._)`${n} === ${m}`}}};_V.default=$ft;Object.defineProperty(lV,"__esModule",{value:!0});const Fft=cV,Lft=fV,Bft=dV,jft=pV,zft=mV,Uft=gV,Vft=yV,Hft=vV,qft=bV,Wft=_V,Gft=[Fft.default,Lft.default,Bft.default,jft.default,zft.default,Uft.default,Vft.default,Hft.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},qft.default,Wft.default];lV.default=Gft;var EV={},N_={};Object.defineProperty(N_,"__esModule",{value:!0});N_.validateAdditionalItems=void 0;const Wg=An,s8=wt,Yft={message:({params:{len:e}})=>(0,Wg.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Wg._)`{limit: ${e}}`},Kft={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Yft,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,s8.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ive(e,r)}};function Ive(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Wg._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Wg._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,s8.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Wg._)`${a} <= ${t.length}`);n.if((0,Wg.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:s8.Type.Num},l),o.allErrors||n.if((0,Wg.not)(l),()=>n.break())})}}N_.validateAdditionalItems=Ive;N_.default=Kft;var wV={},k_={};Object.defineProperty(k_,"__esModule",{value:!0});k_.validateTuple=void 0;const Bne=An,RD=wt,Xft=Tn,Qft={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Nve(e,"additionalItems",t);n.items=!0,!(0,RD.alwaysValidSchema)(n,t)&&e.ok((0,Xft.validateArray)(e))}};function Nve(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=RD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Bne._)`${s}.length`);n.forEach((f,d)=>{(0,RD.alwaysValidSchema)(a,f)||(r.if((0,Bne._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,RD.checkStrictMode)(a,g,d.strictTuples)}}}k_.validateTuple=Nve;k_.default=Qft;Object.defineProperty(wV,"__esModule",{value:!0});const Jft=k_,Zft={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Jft.validateTuple)(e,"items")};wV.default=Zft;var xV={};Object.defineProperty(xV,"__esModule",{value:!0});const jne=An,edt=wt,tdt=Tn,ndt=N_,rdt={message:({params:{len:e}})=>(0,jne.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,jne._)`{limit: ${e}}`},idt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:rdt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,edt.alwaysValidSchema)(r,t)&&(i?(0,ndt.validateAdditionalItems)(e,i):e.ok((0,tdt.validateArray)(e)))}};xV.default=idt;var SV={};Object.defineProperty(SV,"__esModule",{value:!0});const Zu=An,hA=wt,sdt={message:({params:{min:e,max:t}})=>t===void 0?(0,Zu.str)`must contain at least ${e} valid item(s)`:(0,Zu.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Zu._)`{minContains: ${e}}`:(0,Zu._)`{minContains: ${e}, maxContains: ${t}}`},odt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:sdt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Zu._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,hA.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,hA.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,hA.alwaysValidSchema)(s,n)){let m=(0,Zu._)`${c} >= ${o}`;a!==void 0&&(m=(0,Zu._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Zu._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:hA.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Zu._)`${m}++`),a===void 0?t.if((0,Zu._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Zu._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Zu._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};SV.default=odt;var kve={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=An,n=wt,r=Tn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(kve);var TV={};Object.defineProperty(TV,"__esModule",{value:!0});const Rve=An,adt=wt,udt={message:"property name must be valid",params:({params:e})=>(0,Rve._)`{propertyName: ${e.propertyName}}`},ldt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:udt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,adt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,Rve.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};TV.default=ldt;var _3={};Object.defineProperty(_3,"__esModule",{value:!0});const pA=Tn,Hl=An,cdt=Zf,mA=wt,fdt={message:"must NOT have additional properties",params:({params:e})=>(0,Hl._)`{additionalProperty: ${e.additionalProperty}}`},ddt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:fdt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,mA.alwaysValidSchema)(o,n))return;const l=(0,pA.allSchemaProperties)(r.properties),c=(0,pA.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Hl._)`${s} === ${cdt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,mA.schemaRefOrVal)(o,r.properties,"properties");y=(0,pA.isOwnProperty)(t,v,g)}else l.length?y=(0,Hl.or)(...l.map(v=>(0,Hl._)`${g} === ${v}`)):y=Hl.nil;return c.length&&(y=(0,Hl.or)(y,...c.map(v=>(0,Hl._)`${(0,pA.usePattern)(e,v)}.test(${g})`))),(0,Hl.not)(y)}function h(g){t.code((0,Hl._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,mA.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Hl.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Hl.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:mA.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};_3.default=ddt;var CV={};Object.defineProperty(CV,"__esModule",{value:!0});const hdt=vc,zne=Tn,KF=wt,Une=_3,pdt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Une.default.code(new hdt.KeywordCxt(s,Une.default,"additionalProperties"));const o=(0,zne.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=KF.mergeEvaluated.props(t,(0,KF.toHash)(o),s.props));const a=o.filter(f=>!(0,KF.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,zne.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};CV.default=pdt;var AV={};Object.defineProperty(AV,"__esModule",{value:!0});const Vne=Tn,gA=An,Hne=wt,qne=wt,mdt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Vne.allSchemaProperties)(n),u=a.filter(m=>(0,Hne.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof gA.Name)&&(s.props=(0,qne.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Hne.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,gA._)`${(0,Vne.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:qne.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,gA._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,gA.not)(c),()=>t.break())})})}}};AV.default=mdt;var DV={};Object.defineProperty(DV,"__esModule",{value:!0});const gdt=wt,ydt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,gdt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};DV.default=ydt;var IV={};Object.defineProperty(IV,"__esModule",{value:!0});const vdt=Tn,bdt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:vdt.validateUnion,error:{message:"must match a schema in anyOf"}};IV.default=bdt;var NV={};Object.defineProperty(NV,"__esModule",{value:!0});const PD=An,_dt=wt,Edt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,PD._)`{passingSchemas: ${e.passing}}`},wdt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Edt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,_dt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,PD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,PD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,PD.Name)})})}}};NV.default=wdt;var kV={};Object.defineProperty(kV,"__esModule",{value:!0});const xdt=wt,Sdt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,xdt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};kV.default=Sdt;var RV={};Object.defineProperty(RV,"__esModule",{value:!0});const uk=An,Pve=wt,Tdt={message:({params:e})=>(0,uk.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,uk._)`{failingKeyword: ${e.ifClause}}`},Cdt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Tdt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Pve.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Wne(r,"then"),s=Wne(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,uk.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,uk._)`${c}`):e.setParams({ifClause:c})}}}};function Wne(e,t){const n=e.schema[t];return n!==void 0&&!(0,Pve.alwaysValidSchema)(e,n)}RV.default=Cdt;var PV={};Object.defineProperty(PV,"__esModule",{value:!0});const Adt=wt,Ddt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Adt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};PV.default=Ddt;Object.defineProperty(EV,"__esModule",{value:!0});const Idt=N_,Ndt=wV,kdt=k_,Rdt=xV,Pdt=SV,Odt=kve,Mdt=TV,$dt=_3,Fdt=CV,Ldt=AV,Bdt=DV,jdt=IV,zdt=NV,Udt=kV,Vdt=RV,Hdt=PV;function qdt(e=!1){const t=[Bdt.default,jdt.default,zdt.default,Udt.default,Vdt.default,Hdt.default,Mdt.default,$dt.default,Odt.default,Fdt.default,Ldt.default];return e?t.push(Ndt.default,Rdt.default):t.push(Idt.default,kdt.default),t.push(Pdt.default),t}EV.default=qdt;var OV={},MV={};Object.defineProperty(MV,"__esModule",{value:!0});const ki=An,Wdt={message:({schemaCode:e})=>(0,ki.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ki._)`{format: ${e}}`},Gdt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Wdt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ki._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ki._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ki._)`${m}.type || "string"`).assign(y,(0,ki._)`${m}.validate`),()=>n.assign(g,(0,ki._)`"string"`).assign(y,m)),e.fail$data((0,ki.or)(v(),b()));function v(){return u.strictSchema===!1?ki.nil:(0,ki._)`${o} && !${y}`}function b(){const E=c.$async?(0,ki._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ki._)`${y}(${r})`,_=(0,ki._)`(typeof ${y} == "function" ? ${E} : ${y}.test(${r}))`;return(0,ki._)`${y} && ${y} !== true && ${g} === ${t} && !${_}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(E());function v(){if(u.strictSchema===!1){f.logger.warn(_());return}throw new Error(_());function _(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(_){const x=_ instanceof RegExp?(0,ki.regexpCode)(_):u.code.formats?(0,ki._)`${u.code.formats}${(0,ki.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:_,code:x});return typeof _=="object"&&!(_ instanceof RegExp)?[_.type||"string",_.validate,(0,ki._)`${S}.validate`]:["string",_,S]}function E(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ki._)`await ${y}(${r})`}return typeof g=="function"?(0,ki._)`${y}(${r})`:(0,ki._)`${y}.test(${r})`}}}};MV.default=Gdt;Object.defineProperty(OV,"__esModule",{value:!0});const Ydt=MV,Kdt=[Ydt.default];OV.default=Kdt;var Sb={};Object.defineProperty(Sb,"__esModule",{value:!0});Sb.contentVocabulary=Sb.metadataVocabulary=void 0;Sb.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Sb.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(oV,"__esModule",{value:!0});const Xdt=aV,Qdt=lV,Jdt=EV,Zdt=OV,Gne=Sb,eht=[Xdt.default,Qdt.default,(0,Jdt.default)(),Zdt.default,Gne.metadataVocabulary,Gne.contentVocabulary];oV.default=eht;var $V={},E3={};Object.defineProperty(E3,"__esModule",{value:!0});E3.DiscrError=void 0;var Yne;(function(e){e.Tag="tag",e.Mapping="mapping"})(Yne||(E3.DiscrError=Yne={}));Object.defineProperty($V,"__esModule",{value:!0});const $1=An,o8=E3,Kne=Oa,tht=I_,nht=wt,rht={message:({params:{discrError:e,tagName:t}})=>e===o8.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,$1._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},iht={keyword:"discriminator",type:"object",schemaType:"object",error:rht,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,$1._)`${n}${(0,$1.getProperty)(a)}`);t.if((0,$1._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:o8.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,$1._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:o8.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,$1.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let E=0;E<o.length;E++){let _=o[E];if(_!=null&&_.$ref&&!(0,nht.schemaHasRulesButRef)(_,s.self.RULES)){const S=_.$ref;if(_=Kne.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),_ instanceof Kne.SchemaEnv&&(_=_.schema),_===void 0)throw new tht.default(s.opts.uriResolver,s.baseId,S)}const x=(h=_==null?void 0:_.properties)===null||h===void 0?void 0:h[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(_)),v(x,E)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:E}){return Array.isArray(E)&&E.includes(a)}function v(E,_){if(E.const)b(E.const,_);else if(E.enum)for(const x of E.enum)b(x,_);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(E,_){if(typeof E!="string"||E in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[E]=_}}}};$V.default=iht;const sht="http://json-schema.org/draft-07/schema#",oht="http://json-schema.org/draft-07/schema#",aht="Core schema meta-schema",uht={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},lht=["object","boolean"],cht={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},fht={$schema:sht,$id:oht,title:aht,definitions:uht,type:lht,properties:cht,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=G1e,r=oV,i=$V,s=fht,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=vc;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=An;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=e2;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=I_;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(J5,J5.exports);var dht=J5.exports;const Ove=pa(dht),hht="#/definitions/StudyConfig",pht="http://json-schema.org/draft-07/schema#",mht={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},ght={$ref:hht,$schema:pht,definitions:mht},yht="#/definitions/GlobalConfig",vht="http://json-schema.org/draft-07/schema#",bht={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},_ht={$ref:yht,$schema:vht,definitions:bht},Mve=new Ove;Mve.addSchema(_ht);const Xne=Mve.getSchema("#/definitions/GlobalConfig"),$ve=new Ove;$ve.addSchema(ght);const XF=$ve.getSchema("#/definitions/StudyConfig");function Eht(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function w3(e){return e.baseComponent!==void 0}function wht(e){const t=YU.parse(e),n=Xne(t),r=Eht(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Xne.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Fve(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):Fve(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function xht(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;w3(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=Ome(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return Fve(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function Sht(e){let t=!1,n;try{n=YU.parse(e),t=XF(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=xht(n);r=[...XF.errors||[],...s],i=o}else r=XF.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function Lve(){const e=Bh(),{setAlertModal:t}=Gf(),n=Yf();k.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Qne=Object.prototype.hasOwnProperty;function Jne(e,t,n){for(n of e.keys())if(Cx(n,t))return n}function Cx(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Cx(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Jne(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Jne(t,i),!i)||!Cx(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Qne.call(e,n)&&++r&&!Qne.call(t,n)||!(n in t)||!Cx(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Tht(e){var t=k.useRef(e),n=k.useRef(0);return Cx(e,t.current)||(t.current=e,n.current+=1),k.useMemo(function(){return t.current},[n.current])}function Cht(e,t){return k.useEffect(e,Tht(t))}const Aht=(e,t=null)=>{const[n,r]=k.useState("idle"),[i,s]=k.useState(null),[o,a]=k.useState(null),u=k.useRef(),l=k.useRef(!1);k.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=k.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return Cht(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Zne=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],Bve=["participantId","trialId","trialOrder","responseId"];function FV(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Dht(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(yh(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=w3(u)&&u.baseComponent&&n.baseComponents?Oz({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function Iht(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...Bve,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await Dht(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Nht({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=k.useState([...Zne].filter(h=>h!=="meta")),a=Qi(),{value:u,status:l,error:c}=Aht(Iht,[s,r,a.storageEngine,i]),f=k.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>p[m]).join(","))].join(`
`);FV(h,n)},[n,u]),d=k.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return w.jsxs(Ki,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[w.jsx(Lj,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Zne],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:w.jsx(X8e,{}),variant:"filled"}),w.jsx(pl,{h:"md"}),w.jsxs(we,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?w.jsxs(En,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[w.jsx(En.Thead,{children:w.jsx(En.Tr,{children:u.header.map(h=>w.jsx(En.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:w.jsxs(Jt,{direction:"row",justify:"space-between",align:"center",children:[h,!Bve.includes(h)&&w.jsx(hm,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:w.jsx(az,{size:16})})]})},h))})}),w.jsx(En.Tbody,{children:u.rows.slice(0,5).map((h,p)=>w.jsx(En.Tr,{children:u.header.map(m=>w.jsx(En.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?w.jsx(IT,{variant:"light",children:c.message}):null,w.jsx(Pu,{visible:l==="pending"||l==="idle"})]}),w.jsx(pl,{h:"sm"}),w.jsx(Jt,{justify:"center",fz:"sm",c:"dimmed",children:w.jsx(Ze,{children:d})}),w.jsx(pl,{h:"md"}),w.jsxs(cs,{justify:"right",children:[w.jsx(In,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),w.jsx(In,{leftSection:w.jsx(jhe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function kht(){const e=vh(),{storageEngine:t}=Qi(),{answers:n}=Ol(v=>v),[r,i]=k.useState(!1);k.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),Lve();const[s,o]=k.useState(),[a,u]=k.useState(""),l=e.studyMetadata.title.replace(" ","_");k.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),E=await t.getParticipantData();u(b),o(E)}}v()},[t]);const c=k.useCallback(async()=>{FV(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=k.useState(Math.floor(d/1e3));k.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Ay(),[g,y]=k.useState(!1);return k.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),w.jsx(fs,{style:{height:"100%"},children:w.jsx(Jt,{direction:"column",children:r||!g?w.jsx(Ze,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?w.jsx(ca,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):w.jsxs(w.Fragment,{children:[w.jsx(Ze,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),w.jsx(pl,{h:"lg"}),w.jsx(fs,{children:w.jsx(_y,{color:"blue"})})]})})})}function Rht(){var d;const e=vh(),t=Bh(),n=Dy()||"Notfound",r=e.components[n],i=Mz();Lve();const{storageEngine:s}=Qi(),o=Yf(),{setAlertModal:a}=Gf();if(k.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return w.jsx(kht,{});if(n==="Notfound")return w.jsx(O0,{email:e.uiConfig.contactEmail});const u=w3(r)&&e.baseComponents?Oz({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return w.jsxs(w.Fragment,{children:[c==="aboveStimulus"&&w.jsx(ca,{text:l}),w.jsx(nN,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),w.jsxs(k.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&w.jsx($ut,{currentConfig:u}),u.type==="website"&&w.jsx(QWe,{currentConfig:u}),u.type==="image"&&w.jsx(ZWe,{currentConfig:u}),u.type==="react-component"&&w.jsx(Mut,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&w.jsx(ca,{text:l}),w.jsx(nN,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function a8(e){const[t]=iz();return w.jsx(rz,{...e,to:{pathname:e.to,search:t.toString()}})}var Pht="Expected a function",ere=NaN,Oht="[object Symbol]",Mht=/^\s+|\s+$/g,$ht=/^[-+]0x[0-9a-f]+$/i,Fht=/^0b[01]+$/i,Lht=/^0o[0-7]+$/i,Bht=parseInt,jht=typeof Hr=="object"&&Hr&&Hr.Object===Object&&Hr,zht=typeof self=="object"&&self&&self.Object===Object&&self,Uht=jht||zht||Function("return this")(),Vht=Object.prototype,Hht=Vht.toString,qht=Math.max,Wht=Math.min,QF=function(){return Uht.Date.now()};function Ght(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Pht);t=tre(t)||0,u8(n)&&(c=!!n.leading,f="maxWait"in n,s=f?qht(tre(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(x){var S=r,C=i;return r=i=void 0,l=x,o=e.apply(C,S),o}function p(x){return l=x,a=setTimeout(y,t),c?h(x):o}function m(x){var S=x-u,C=x-l,A=t-S;return f?Wht(A,s-C):A}function g(x){var S=x-u,C=x-l;return u===void 0||S>=t||S<0||f&&C>=s}function y(){var x=QF();if(g(x))return v(x);a=setTimeout(y,m(x))}function v(x){return a=void 0,d&&r?h(x):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function E(){return a===void 0?o:v(QF())}function _(){var x=QF(),S=g(x);if(r=arguments,i=this,u=x,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return _.cancel=b,_.flush=E,_}function u8(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Yht(e){return!!e&&typeof e=="object"}function Kht(e){return typeof e=="symbol"||Yht(e)&&Hht.call(e)==Oht}function tre(e){if(typeof e=="number")return e;if(Kht(e))return ere;if(u8(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=u8(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Mht,"");var n=Fht.test(e);return n||Lht.test(e)?Bht(e.slice(2),n?2:8):$ht.test(e)?ere:+e}var Xht=Ght;const vd=pa(Xht);function jve(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=jve(o,t,n,r),r.includes(o.orderPath))break}return i}function zve(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=zve(s,r)}}),n}function Qht(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Jht({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=Ay(),u=Lh(),l=Bh(),c=vh(),[f,{close:d,open:h}]=_v(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?jve(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return w.jsxs(Rr,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[w.jsx(Rr.Target,{children:w.jsx(we,{onMouseEnter:h,onMouseLeave:d,children:w.jsx(dP,{active:g,style:{lineHeight:"32px",height:"32px"},label:w.jsxs(we,{children:[i&&w.jsx(V8e,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?w.jsx(Ze,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):w.jsx(Ze,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&w.jsx(Rr.Dropdown,{onMouseLeave:d,children:w.jsx(Ze,{size:"sm",children:w.jsxs(we,{children:[p.description&&w.jsxs(we,{children:[w.jsx(Ze,{fw:900,display:"inline-block",mr:2,children:"Description:"}),w.jsx(Ze,{fw:400,component:"span",children:p.description})]}),p.meta&&w.jsxs(Ze,{children:[w.jsx(Ze,{fw:"900",component:"span",children:"Task Meta: "}),w.jsx(Ze,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function l8({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=p0(e.components);return n&&r&&(i=Qht(p0(e.components),p0(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),w.jsx(w.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return w.jsx(Jht,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?yh(u).length-zve(o,u):0,c=yh(o);return w.jsx(dP,{label:w.jsxs(we,{style:{opacity:l>0?1:.5},children:[w.jsx(Ze,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?w.jsx(z8e,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&w.jsxs(Kd,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&w.jsx(Kd,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:w.jsx(we,{style:{borderLeft:"1px solid #e9ecef"},children:w.jsx(l8,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function Uve(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Vve(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Vve(n,`${t}-${r}`))}}function nre({text:e}){return w.jsx(Wi,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:w.jsx(Fhe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function Zht(){const{sequence:e,metadata:t}=Ol(f=>f),{toggleStudyBrowser:n}=Gf(),r=vh(),i=Yf(),s=Ay(),o=khe(`/${s}`),{storageEngine:a}=Qi(),u=k.useMemo(()=>{let f=p0(r.sequence);return f=Vve(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=k.useState("participant");return w.jsxs(Wr.Aside,{p:"0",children:[w.jsx(Wr.Section,{children:w.jsxs(Jt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[w.jsx(Ze,{size:"md",fw:700,pt:3,children:"Study Browser"}),w.jsx(In,{variant:"light",leftSection:w.jsx(oz,{size:14}),onClick:()=>Uve(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),w.jsx(Hm,{onClick:()=>i(n()),mt:1})]})}),w.jsx(Wr.Section,{grow:!0,component:vy,p:"xs",pt:0,children:w.jsxs(Ri,{value:l,onChange:c,children:[w.jsx(we,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:w.jsxs(Ri.List,{grow:!0,children:[w.jsxs(Ri.Tab,{value:"participant",children:["Participant View",w.jsx(nre,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),w.jsxs(Ri.Tab,{value:"allTrials",children:["All Trials View",w.jsx(nre,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),w.jsx(Ri.Panel,{value:"participant",children:w.jsx(l8,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0})}),w.jsx(Ri.Panel,{value:"allTrials",children:w.jsx(l8,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1})})]})})]})}function ept({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Ol(_=>_),i=Pz(),s=Yf(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Gf(),{storageEngine:u}=Qi(),l=Bh(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=k.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Ay(),y=khe(`/${g}`),v=k.useRef(null),[b,E]=k.useState(!1);return k.useEffect(()=>{const _=v.current;_&&E(_.scrollWidth>_.offsetWidth)},[n]),w.jsx(Wr.Header,{p:"md",children:w.jsxs(ul,{mt:-7,align:"center",children:[w.jsx(ul.Col,{span:4,children:w.jsxs(Jt,{align:"center",children:[w.jsx(Wm,{w:40,src:`${qf}${p}`,alt:"Study Logo"}),w.jsx(pl,{w:"md"}),w.jsx(ci,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),w.jsx(ul.Col,{span:4,children:m&&w.jsx(m_,{radius:"md",size:"lg",value:f})}),w.jsx(ul.Col,{span:4,children:w.jsxs(cs,{wrap:"nowrap",justify:"right",children:[!t&&w.jsx(Wi,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:w.jsx(Kd,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&w.jsx(In,{variant:"outline",onClick:()=>s(o()),children:"Help"}),w.jsxs(ka,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[w.jsx(ka.Target,{children:w.jsx(hm,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:w.jsx(Y8e,{})})}),w.jsxs(ka.Dropdown,{children:[e&&w.jsx(ka.Item,{leftSection:w.jsx(e9e,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),w.jsx(ka.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:w.jsx(Q8e,{size:14}),children:"Contact"}),e&&w.jsx(ka.Item,{leftSection:w.jsx(oz,{size:14}),onClick:()=>Uve(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function tpt(){var u;const e=(u=vh())==null?void 0:u.uiConfig.sidebar,t=vh(),n=Dy(),r=t.components[n],i=k.useMemo(()=>{var l;return r?w3(r)&&t.baseComponents?Oz({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=Mz(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?w.jsxs(Wr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&w.jsx(Wr.Section,{bg:"gray.3",p:"md",children:w.jsxs(Ze,{c:"gray.9",children:[w.jsx(Ze,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),w.jsx(ca,{text:o})]})}),w.jsx(Wr.Section,{p:"md",children:w.jsx(nN,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):w.jsx(Wr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:w.jsx(nN,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function npt(){const{showHelpText:e,config:t}=Ol(u=>u),n=Yf(),{toggleShowHelpText:r}=Gf(),[i,s]=k.useState(""),[o,a]=k.useState(!0);return k.useEffect(()=>{async function u(){const l=await Fz(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),w.jsx(Ki,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?w.jsx(ca,{text:i}):w.jsx(O0,{path:t.uiConfig.helpTextPath})})}function rpt(){const{alertModal:e}=Ol(o=>o),{setAlertModal:t}=Gf(),n=Yf(),[r,i]=k.useState(e.show),s=k.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return k.useEffect(()=>i(e.show),[e.show]),w.jsx(Ki,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:w.jsxs(IT,{color:"red",radius:"xs",title:"Alert",icon:w.jsx(j8e,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[w.jsx(Ze,{my:"md",children:e.message}),w.jsx(cs,{w:"100%",justify:"end",children:w.jsx(In,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function ipt(){const e=k.useRef([]),t=vh(),n=t.uiConfig.windowEventDebounceTime??100,r=Ol(d=>d.showStudyBrowser);k.useEffect(()=>{const d=vd(_=>{e.current.push([Date.now(),"focus",_.target instanceof HTMLElement?_.target.tagName:""])},n,{maxWait:n}),h=vd(_=>{e.current.push([Date.now(),"input",_.data??""])},n,{maxWait:n}),p=vd(_=>{e.current.push([Date.now(),"keypress",_.key])},n,{maxWait:n}),m=vd(_=>{e.current.push([Date.now(),"mousedown",[_.clientX,_.clientY]])},n,{maxWait:n}),g=vd(_=>{e.current.push([Date.now(),"mouseup",[_.clientX,_.clientY]])},n,{maxWait:n}),y=vd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=vd(_=>{e.current.push([Date.now(),"mousemove",[_.clientX,_.clientY]])},n,{maxWait:n}),b=vd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=vd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",E)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Qi(),o=Ay(),[a,u]=k.useState(!1),[l,c]=k.useState(!1);k.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=k.useMemo(()=>a&&r,[a,r]);return w.jsx(jme.Provider,{value:e,children:w.jsxs(Wr,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[w.jsx(tpt,{}),w.jsx(Zht,{}),w.jsx(ept,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),w.jsx(npt,{}),w.jsx(rpt,{}),w.jsx(Wr.Main,{children:w.jsx(C8e,{})})]})})}function spt(e,t=!1){return typeof e=="number"?rre(e,t):rre(e.length,t).map(r=>r.map(i=>e[i]))}function rre(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function Hve(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=Hve(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function opt(e,t){const n=p0(e);return Hve(n,t,"root")}function qve(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&qve(s,t,i,o)})}function apt(e){const t=[];return qve(e,t,"",0),t}function ire(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return spt(i.sort(()=>.5-Math.random()),!0)}function upt(e){const n=apt(e.sequence).map(s=>({[s]:ire(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=opt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=ire(e,o))})}),i}var lpt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyBNW230jLUCwld9aUjZRzIunyGMdaMXv6I",
  authDomain: "abrar-test-study.firebaseapp.com",
  projectId: "abrar-test-study",
  storageBucket: "abrar-test-study.appspot.com",
  messagingSenderId: "304916533445",
  appId: "1:304916533445:web:22d7fea7e8e3faea4ca0ac"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6Ld7v0cqAAAAACbRoSHv-PfJiq9wfYgjhXC4_e7Z",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function cpt(e){const t=await(await fetch(`${qf}${e}`)).text();return Sht(t)}async function x3(e,t){const n=t.configsList.find(r=>Uhe(r)===e);if(n){const r=t.configs[n];return await cpt(`${r.path}`)}return null}async function fpt(e){const t={},n=e.configsList.filter(i=>lpt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>x3(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function dpt({globalConfig:e}){const t=Ay(),[n,r]=k.useState(null),i=e.configsList.includes(t);k.useEffect(()=>{x3(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=k.useState([]),[a,u]=k.useState(null),{storageEngine:l}=Qi(),[c]=iz();k.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await upt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(x=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},E=await l.initializeParticipantSession(t,g,n,b,m),_=await mWe(t,n,E.sequence,b,E.answers);u(_),o([{element:w.jsx(ipt,{}),children:[{path:"/",element:w.jsx(a8,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(ci,{order:2,mb:8,children:"Error loading config"}),w.jsx(G4,{issues:n.errors,type:"error"})]}):w.jsx(Rht,{})}]}])}h()},[l,n,t,c]);const f=Phe(s);let d=null;return i?s.length===0?d=w.jsx(Pu,{visible:!0}):d=f&&a?w.jsx(Bme.Provider,{value:a,children:w.jsx(lqe,{store:a.store,children:f})}):w.jsx(O0,{}):d=w.jsx(O0,{}),d}var sre={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wve=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},hpt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},LV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Wve(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):hpt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new ppt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ppt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mpt=function(e){const t=Wve(e);return LV.encodeByteArray(t,!0)},lk=function(e){return mpt(e).replace(/\./g,"")},Gve=function(e){try{return LV.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gpt=()=>Yve().__FIREBASE_DEFAULTS__,ypt=()=>{if(typeof process>"u"||typeof sre>"u")return;const e=sre.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},vpt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Gve(e[1]);return t&&JSON.parse(t)},S3=()=>{try{return gpt()||ypt()||vpt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Kve=e=>{var t,n;return(n=(t=S3())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},bpt=e=>{const t=Kve(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Xve=()=>{var e;return(e=S3())===null||e===void 0?void 0:e.config},Qve=e=>{var t;return(t=S3())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _pt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[lk(JSON.stringify(n)),lk(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ept(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(so())}function wpt(){var e;const t=(e=S3())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xpt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Spt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tpt(){const e=so();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Cpt(){return!wpt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BV(){try{return typeof indexedDB=="object"}catch{return!1}}function Apt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dpt="FirebaseError";class ed extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Dpt,Object.setPrototypeOf(this,ed.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R_.prototype.create)}}class R_{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Ipt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ed(i,a,r)}}function Ipt(e,t){return e.replace(Npt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Npt=/\{\$([^}]+)}/g;function kpt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function MS(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(ore(s)&&ore(o)){if(!MS(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ore(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Rpt(e,t){const n=new Ppt(e,t);return n.subscribe.bind(n)}class Ppt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Opt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=JF),i.error===void 0&&(i.error=JF),i.complete===void 0&&(i.complete=JF);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Opt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function JF(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mpt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pt=1e3,Fpt=2,Lpt=4*60*60*1e3,Bpt=.5;function jpt(e,t=$pt,n=Fpt){const r=t*Math.pow(n,e),i=Math.round(Bpt*r*(Math.random()-.5)*2);return Math.min(Lpt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(e){return e&&e._delegate?e._delegate:e}class Pf{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new OS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Vpt(t))try{this.getOrInitializeService({instanceIdentifier:Fg})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Fg){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fg){return this.instances.has(t)}getOptions(t=Fg){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Upt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Fg){return this.component?this.component.multipleInstances?t:Fg:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Upt(e){return e===Fg?void 0:e}function Vpt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hpt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new zpt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ln||(Ln={}));const qpt={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},Wpt=Ln.INFO,Gpt={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},Ypt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Gpt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class T3{constructor(t){this.name=t,this._logLevel=Wpt,this._logHandler=Ypt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ln))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qpt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...t),this._logHandler(this,Ln.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...t),this._logHandler(this,Ln.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...t),this._logHandler(this,Ln.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...t),this._logHandler(this,Ln.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...t),this._logHandler(this,Ln.ERROR,...t)}}const Kpt=(e,t)=>t.some(n=>e instanceof n);let are,ure;function Xpt(){return are||(are=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qpt(){return ure||(ure=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jve=new WeakMap,c8=new WeakMap,Zve=new WeakMap,ZF=new WeakMap,jV=new WeakMap;function Jpt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Zp(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Jve.set(n,e)}).catch(()=>{}),jV.set(t,e),t}function Zpt(e){if(c8.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});c8.set(e,t)}let f8={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return c8.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Zve.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zp(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function emt(e){f8=e(f8)}function tmt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(e6(this),t,...n);return Zve.set(r,t.sort?t.sort():[t]),Zp(r)}:Qpt().includes(e)?function(...t){return e.apply(e6(this),t),Zp(Jve.get(this))}:function(...t){return Zp(e.apply(e6(this),t))}}function nmt(e){return typeof e=="function"?tmt(e):(e instanceof IDBTransaction&&Zpt(e),Kpt(e,Xpt())?new Proxy(e,f8):e)}function Zp(e){if(e instanceof IDBRequest)return Jpt(e);if(ZF.has(e))return ZF.get(e);const t=nmt(e);return t!==e&&(ZF.set(e,t),jV.set(t,e)),t}const e6=e=>jV.get(e);function rmt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Zp(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zp(o.result),u.oldVersion,u.newVersion,Zp(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const imt=["get","getKey","getAll","getAllKeys","count"],smt=["put","add","delete","clear"],t6=new Map;function lre(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(t6.get(t))return t6.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=smt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||imt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return t6.set(t,s),s}emt(e=>({...e,get:(t,n,r)=>lre(t,n)||e.get(t,n,r),has:(t,n)=>!!lre(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class omt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(amt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function amt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const d8="@firebase/app",cre="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new T3("@firebase/app"),umt="@firebase/app-compat",lmt="@firebase/analytics-compat",cmt="@firebase/analytics",fmt="@firebase/app-check-compat",dmt="@firebase/app-check",hmt="@firebase/auth",pmt="@firebase/auth-compat",mmt="@firebase/database",gmt="@firebase/database-compat",ymt="@firebase/functions",vmt="@firebase/functions-compat",bmt="@firebase/installations",_mt="@firebase/installations-compat",Emt="@firebase/messaging",wmt="@firebase/messaging-compat",xmt="@firebase/performance",Smt="@firebase/performance-compat",Tmt="@firebase/remote-config",Cmt="@firebase/remote-config-compat",Amt="@firebase/storage",Dmt="@firebase/storage-compat",Imt="@firebase/firestore",Nmt="@firebase/vertexai-preview",kmt="@firebase/firestore-compat",Rmt="firebase",Pmt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8="[DEFAULT]",Omt={[d8]:"fire-core",[umt]:"fire-core-compat",[cmt]:"fire-analytics",[lmt]:"fire-analytics-compat",[dmt]:"fire-app-check",[fmt]:"fire-app-check-compat",[hmt]:"fire-auth",[pmt]:"fire-auth-compat",[mmt]:"fire-rtdb",[gmt]:"fire-rtdb-compat",[ymt]:"fire-fn",[vmt]:"fire-fn-compat",[bmt]:"fire-iid",[_mt]:"fire-iid-compat",[Emt]:"fire-fcm",[wmt]:"fire-fcm-compat",[xmt]:"fire-perf",[Smt]:"fire-perf-compat",[Tmt]:"fire-rc",[Cmt]:"fire-rc-compat",[Amt]:"fire-gcs",[Dmt]:"fire-gcs-compat",[Imt]:"fire-fst",[kmt]:"fire-fst-compat",[Nmt]:"fire-vertex","fire-js":"fire-js",[Rmt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new Map,Mmt=new Map,p8=new Map;function fre(e,t){try{e.container.addComponent(t)}catch(n){V0.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function xh(e){const t=e.name;if(p8.has(t))return V0.debug(`There were multiple attempts to register component ${t}.`),!1;p8.set(t,e);for(const n of ck.values())fre(n,e);for(const n of Mmt.values())fre(n,e);return!0}function P_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pf(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $mt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},em=new R_("app","Firebase",$mt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fmt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw em.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=Pmt;function ebe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:h8,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw em.create("bad-app-name",{appName:String(i)});if(n||(n=Xve()),!n)throw em.create("no-options");const s=ck.get(i);if(s){if(MS(n,s.options)&&MS(r,s.config))return s;throw em.create("duplicate-app",{appName:i})}const o=new Hpt(i);for(const u of p8.values())o.addComponent(u);const a=new Fmt(n,r,o);return ck.set(i,a),a}function zV(e=h8){const t=ck.get(e);if(!t&&e===h8&&Xve())return ebe();if(!t)throw em.create("no-app",{appName:e});return t}function bc(e,t,n){var r;let i=(r=Omt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),V0.warn(a.join(" "));return}xh(new Pf(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lmt="firebase-heartbeat-database",Bmt=1,$S="firebase-heartbeat-store";let n6=null;function tbe(){return n6||(n6=rmt(Lmt,Bmt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($S)}catch(n){console.warn(n)}}}}).catch(e=>{throw em.create("idb-open",{originalErrorMessage:e.message})})),n6}async function jmt(e){try{const n=(await tbe()).transaction($S),r=await n.objectStore($S).get(nbe(e));return await n.done,r}catch(t){if(t instanceof ed)V0.warn(t.message);else{const n=em.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});V0.warn(n.message)}}}async function dre(e,t){try{const r=(await tbe()).transaction($S,"readwrite");await r.objectStore($S).put(t,nbe(e)),await r.done}catch(n){if(n instanceof ed)V0.warn(n.message);else{const r=em.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});V0.warn(r.message)}}}function nbe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zmt=1024,Umt=30*24*60*60*1e3;class Vmt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qmt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hre();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Umt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hre(),{heartbeatsToSend:r,unsentEntries:i}=Hmt(this._heartbeatsCache.heartbeats),s=lk(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function hre(){return new Date().toISOString().substring(0,10)}function Hmt(e,t=zmt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),pre(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pre(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qmt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BV()?Apt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jmt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dre(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dre(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function pre(e){return lk(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wmt(e){xh(new Pf("platform-logger",t=>new omt(t),"PRIVATE")),xh(new Pf("heartbeat",t=>new Vmt(t),"PRIVATE")),bc(d8,cre,e),bc(d8,cre,"esm2017"),bc("fire-js","")}Wmt("");function rbe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gmt=rbe,ibe=new R_("auth","Firebase",rbe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new T3("@firebase/auth");function Ymt(e,...t){fk.logLevel<=Ln.WARN&&fk.warn(`Auth (${My}): ${e}`,...t)}function OD(e,...t){fk.logLevel<=Ln.ERROR&&fk.error(`Auth (${My}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(e,...t){throw VV(e,...t)}function _c(e,...t){return VV(e,...t)}function UV(e,t,n){const r=Object.assign(Object.assign({},Gmt()),{[t]:n});return new R_("auth","Firebase",r).create(t,{appName:e.name})}function tm(e){return UV(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kmt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Of(e,"argument-error"),UV(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function VV(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return ibe.create(e,...t)}function rn(e,t,...n){if(!e)throw VV(t,...n)}function Ud(e){const t="INTERNAL ASSERTION FAILED: "+e;throw OD(t),new Error(t)}function Sh(e,t){e||Ud(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Xmt(){return mre()==="http:"||mre()==="https:"}function mre(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qmt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xmt()||xpt()||"connection"in navigator)?navigator.onLine:!0}function Jmt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,n){this.shortDelay=t,this.longDelay=n,Sh(n>t,"Short delay should be less than long delay!"),this.isMobile=Ept()||Spt()}get(){return Qmt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(e,t){Sh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sbe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ud("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ud("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ud("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zmt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const egt=new r2(3e4,6e4);function C3(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function O_(e,t,n,r,i={}){return obe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=n2(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),sbe.fetch()(ube(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function obe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zmt),t);try{const i=new tgt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw yA(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw yA(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw yA(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw yA(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw UV(e,c,l);Of(e,c)}}catch(i){if(i instanceof ed)throw i;Of(e,"network-request-failed",{message:String(i)})}}async function abe(e,t,n,r,i={}){const s=await O_(e,t,n,r,i);return"mfaPendingCredential"in s&&Of(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ube(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?HV(e.config,i):`${e.config.apiScheme}://${i}`}class tgt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_c(this.auth,"network-request-failed")),egt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yA(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_c(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ngt(e,t){return O_(e,"POST","/v1/accounts:delete",t)}async function lbe(e,t){return O_(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rgt(e,t=!1){const n=$r(e),r=await n.getIdToken(t),i=qV(r);rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ax(r6(i.auth_time)),issuedAtTime:Ax(r6(i.iat)),expirationTime:Ax(r6(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function r6(e){return Number(e)*1e3}function qV(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return OD("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gve(n);return i?JSON.parse(i):(OD("Failed to decode base64 JWT payload"),null)}catch(i){return OD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gre(e){const t=qV(e);return rn(t,"internal-error"),rn(typeof t.exp<"u","internal-error"),rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ed&&igt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function igt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sgt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ax(this.lastLoginAt),this.creationTime=Ax(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(e){var t;const n=e.auth,r=await e.getIdToken(),i=await FS(e,lbe(n,{idToken:r}));rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?cbe(s.providerUserInfo):[],a=agt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new g8(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function ogt(e){const t=$r(e);await dk(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function agt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function cbe(e){return e.map(t=>{var{providerId:n}=t,r=ST(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ugt(e,t){const n=await obe(e,{},async()=>{const r=n2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=ube(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sbe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lgt(e,t){return O_(e,"POST","/v2/accounts:revokeToken",C3(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){rn(t.idToken,"internal-error"),rn(typeof t.idToken<"u","internal-error"),rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):gre(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){rn(t.length!==0,"internal-error");const n=gre(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ugt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Pv;return r&&(rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Pv,this.toJSON())}_performRefresh(){return Ud("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(e,t){rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Vd{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=ST(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sgt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new g8(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await FS(this,this.stsTokenManager.getToken(this.auth,t));return rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return rgt(this,t)}reload(){return ogt(this)}_assign(t){this!==t&&(rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Vd(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await dk(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pf(this.auth.app))return Promise.reject(tm(this.auth));const t=await this.getIdToken();return await FS(this,ngt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:E,isAnonymous:_,providerData:x,stsTokenManager:S}=n;rn(b&&S,t,"internal-error");const C=Pv.fromJSON(this.name,S);rn(typeof b=="string",t,"internal-error"),np(f,t.name),np(d,t.name),rn(typeof E=="boolean",t,"internal-error"),rn(typeof _=="boolean",t,"internal-error"),np(h,t.name),np(p,t.name),np(m,t.name),np(g,t.name),np(y,t.name),np(v,t.name);const A=new Vd({uid:b,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:_,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(A.providerData=x.map(D=>Object.assign({},D))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new Pv;i.updateFromServerResponse(n);const s=new Vd({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await dk(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?cbe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Pv;a.updateFromIdToken(r);const u=new Vd({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new g8(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yre=new Map;function Hd(e){Sh(e instanceof Function,"Expected a class definition");let t=yre.get(e);return t?(Sh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yre.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fbe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}fbe.type="NONE";const vre=fbe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(e,t,n){return`firebase:${e}:${t}:${n}`}class Ov{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=MD(this.userKey,i.apiKey,s),this.fullPersistenceKey=MD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Vd._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Ov(Hd(vre),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Hd(vre);const o=MD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Vd._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ov(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Ov(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bre(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pbe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dbe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gbe(t))return"Blackberry";if(ybe(t))return"Webos";if(WV(t))return"Safari";if((t.includes("chrome/")||hbe(t))&&!t.includes("edge/"))return"Chrome";if(mbe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dbe(e=so()){return/firefox\//i.test(e)}function WV(e=so()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hbe(e=so()){return/crios\//i.test(e)}function pbe(e=so()){return/iemobile/i.test(e)}function mbe(e=so()){return/android/i.test(e)}function gbe(e=so()){return/blackberry/i.test(e)}function ybe(e=so()){return/webos/i.test(e)}function A3(e=so()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function cgt(e=so()){var t;return A3(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function fgt(){return Tpt()&&document.documentMode===10}function vbe(e=so()){return A3(e)||mbe(e)||ybe(e)||gbe(e)||/windows phone/i.test(e)||pbe(e)}function dgt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bbe(e,t=[]){let n;switch(e){case"Browser":n=bre(so());break;case"Worker":n=`${bre(so())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${My}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hgt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pgt(e,t={}){return O_(e,"GET","/v2/passwordPolicy",C3(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mgt=6;class ggt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:mgt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ygt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _re(this),this.idTokenSubscription=new _re(this),this.beforeStateQueue=new hgt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ibe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hd(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ov.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await lbe(this,{idToken:t}),r=await Vd._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(pf(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await dk(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Jmt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(pf(this.app))return Promise.reject(tm(this));const n=t?$r(t):null;return n&&rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return pf(this.app)?Promise.reject(tm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return pf(this.app)?Promise.reject(tm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hd(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await pgt(this),n=new ggt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new R_("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lgt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hd(t)||this._popupRedirectResolver;rn(n,this,"argument-error"),this.redirectPersistenceManager=await Ov.create(this,[Hd(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=bbe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Ymt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function i2(e){return $r(e)}class _re{constructor(t){this.auth=t,this.observer=null,this.addObserver=Rpt(n=>this.observer=n)}get next(){return rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GV={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vgt(e){GV=e}function bgt(e){return GV.loadJS(e)}function _gt(){return GV.gapiScript}function Egt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wgt(e,t){const n=P_(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(MS(s,t??{}))return i;Of(i,"already-initialized")}return n.initialize({options:t})}function xgt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hd);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Sgt(e,t,n){const r=i2(e);rn(r._canInitEmulator,r,"emulator-config-failed"),rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=_be(t),{host:o,port:a}=Tgt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Cgt()}function _be(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Tgt(e){const t=_be(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ere(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ere(o)}}}function Ere(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Cgt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ebe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ud("not implemented")}_getIdTokenResponse(t){return Ud("not implemented")}_linkToIdToken(t,n){return Ud("not implemented")}_getReauthenticationResolver(t){return Ud("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mv(e,t){return abe(e,"POST","/v1/accounts:signInWithIdp",C3(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Agt="http://localhost";class H0 extends Ebe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new H0(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Of("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=ST(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new H0(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Mv(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Mv(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Mv(t,n)}buildRequest(){const t={requestUri:Agt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=n2(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends YV{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends s2{constructor(){super("facebook.com")}static credential(t){return H0._fromParams({providerId:Ep.PROVIDER_ID,signInMethod:Ep.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ep.credentialFromTaggedObject(t)}static credentialFromError(t){return Ep.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ep.credential(t.oauthAccessToken)}catch{return null}}}Ep.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ep.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends s2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return H0._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pd.credentialFromTaggedObject(t)}static credentialFromError(t){return Pd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Pd.credential(n,r)}catch{return null}}}Pd.GOOGLE_SIGN_IN_METHOD="google.com";Pd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends s2{constructor(){super("github.com")}static credential(t){return H0._fromParams({providerId:wp.PROVIDER_ID,signInMethod:wp.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wp.credentialFromTaggedObject(t)}static credentialFromError(t){return wp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return wp.credential(t.oauthAccessToken)}catch{return null}}}wp.GITHUB_SIGN_IN_METHOD="github.com";wp.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends s2{constructor(){super("twitter.com")}static credential(t,n){return H0._fromParams({providerId:xp.PROVIDER_ID,signInMethod:xp.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return xp.credentialFromTaggedObject(t)}static credentialFromError(t){return xp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xp.credential(n,r)}catch{return null}}}xp.TWITTER_SIGN_IN_METHOD="twitter.com";xp.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dgt(e,t){return abe(e,"POST","/v1/accounts:signUp",C3(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Vd._fromIdTokenResponse(t,r,i),o=wre(r);return new wm({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=wre(r);return new wm({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function wre(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Igt(e){var t;if(pf(e.app))return Promise.reject(tm(e));const n=i2(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new wm({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Dgt(n,{returnSecureToken:!0}),i=await wm._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk extends ed{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,hk.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new hk(t,n,r,i)}}function wbe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hk._fromErrorAndOperation(e,s,t,r):s})}async function Ngt(e,t,n=!1){const r=await FS(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wm._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kgt(e,t,n=!1){const{auth:r}=e;if(pf(r.app))return Promise.reject(tm(r));const i="reauthenticate";try{const s=await FS(e,wbe(r,i,t,e),n);rn(s.idToken,r,"internal-error");const o=qV(s.idToken);rn(o,r,"internal-error");const{sub:a}=o;return rn(e.uid===a,r,"user-mismatch"),wm._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Of(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rgt(e,t,n=!1){if(pf(e.app))return Promise.reject(tm(e));const r="signIn",i=await wbe(e,r,t),s=await wm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Pgt(e,t,n,r){return $r(e).onIdTokenChanged(t,n,r)}function Ogt(e,t,n){return $r(e).beforeAuthStateChanged(t,n)}function Mgt(e,t,n,r){return $r(e).onAuthStateChanged(t,n,r)}function $gt(e){return $r(e).signOut()}const pk="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xbe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pk,"1"),this.storage.removeItem(pk),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fgt(){const e=so();return WV(e)||A3(e)}const Lgt=1e3,Bgt=10;class Sbe extends xbe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Fgt()&&dgt(),this.fallbackToPolling=vbe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);fgt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Bgt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Lgt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Sbe.type="LOCAL";const jgt=Sbe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tbe extends xbe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Tbe.type="SESSION";const Cbe=Tbe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zgt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new D3(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await zgt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}D3.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ugt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=KV("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){return window}function Vgt(e){wf().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Abe(){return typeof wf().WorkerGlobalScope<"u"&&typeof wf().importScripts=="function"}async function Hgt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qgt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Wgt(){return Abe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dbe="firebaseLocalStorageDb",Ggt=1,mk="firebaseLocalStorage",Ibe="fbase_key";class o2{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function I3(e,t){return e.transaction([mk],t?"readwrite":"readonly").objectStore(mk)}function Ygt(){const e=indexedDB.deleteDatabase(Dbe);return new o2(e).toPromise()}function y8(){const e=indexedDB.open(Dbe,Ggt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(mk,{keyPath:Ibe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(mk)?t(r):(r.close(),await Ygt(),t(await y8()))})})}async function xre(e,t,n){const r=I3(e,!0).put({[Ibe]:t,value:n});return new o2(r).toPromise()}async function Kgt(e,t){const n=I3(e,!1).get(t),r=await new o2(n).toPromise();return r===void 0?null:r.value}function Sre(e,t){const n=I3(e,!0).delete(t);return new o2(n).toPromise()}const Xgt=800,Qgt=3;class Nbe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y8(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Qgt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Abe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=D3._getInstance(Wgt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Hgt(),!this.activeServiceWorker)return;this.sender=new Ugt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||qgt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await y8();return await xre(t,pk,"1"),await Sre(t,pk),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xre(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Kgt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sre(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=I3(i,!1).getAll();return new o2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xgt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nbe.type="LOCAL";const Jgt=Nbe;new r2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kbe(e,t){return t?Hd(t):(rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV extends Ebe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Mv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Mv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Mv(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Zgt(e){return Rgt(e.auth,new XV(e),e.bypassAuthState)}function e0t(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),kgt(n,new XV(e),e.bypassAuthState)}async function t0t(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),Ngt(n,new XV(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rbe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Zgt;case"linkViaPopup":case"linkViaRedirect":return t0t;case"reauthViaPopup":case"reauthViaRedirect":return e0t;default:Of(this.auth,"internal-error")}}resolve(t){Sh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Sh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0t=new r2(2e3,1e4);async function r0t(e,t,n){if(pf(e.app))return Promise.reject(_c(e,"operation-not-supported-in-this-environment"));const r=i2(e);Kmt(e,t,YV);const i=kbe(r,n);return new o0(r,"signInViaPopup",t,i).executeNotNull()}class o0 extends Rbe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,o0.currentPopupAction&&o0.currentPopupAction.cancel(),o0.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return rn(t,this.auth,"internal-error"),t}async onExecution(){Sh(this.filter.length===1,"Popup operations only handle one event");const t=KV();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_c(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(_c(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,o0.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_c(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,n0t.get())};t()}}o0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0t="pendingRedirect",$D=new Map;class s0t extends Rbe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=$D.get(this.auth._key());if(!t){try{const r=await o0t(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}$D.set(this.auth._key(),t)}return this.bypassAuthState||$D.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o0t(e,t){const n=l0t(t),r=u0t(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function a0t(e,t){$D.set(e._key(),t)}function u0t(e){return Hd(e._redirectPersistence)}function l0t(e){return MD(i0t,e.config.apiKey,e.name)}async function c0t(e,t,n=!1){if(pf(e.app))return Promise.reject(tm(e));const r=i2(e),i=kbe(r,t),o=await new s0t(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0t=10*60*1e3;class d0t{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!h0t(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Pbe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_c(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=f0t&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tre(t))}saveEventToCache(t){this.cachedEventUids.add(Tre(t)),this.lastProcessedEventTime=Date.now()}}function Tre(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Pbe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function h0t(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pbe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p0t(e,t={}){return O_(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g0t=/^https?/;async function y0t(e){if(e.config.emulator)return;const{authorizedDomains:t}=await p0t(e);for(const n of t)try{if(v0t(n))return}catch{}Of(e,"unauthorized-domain")}function v0t(e){const t=m8(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!g0t.test(n))return!1;if(m0t.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0t=new r2(3e4,6e4);function Cre(){const e=wf().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function _0t(e){return new Promise((t,n)=>{var r,i,s;function o(){Cre(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Cre(),n(_c(e,"network-request-failed"))},timeout:b0t.get()})}if(!((i=(r=wf().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=wf().gapi)===null||s===void 0)&&s.load)o();else{const a=Egt("iframefcb");return wf()[a]=()=>{gapi.load?o():n(_c(e,"network-request-failed"))},bgt(`${_gt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw FD=null,t})}let FD=null;function E0t(e){return FD=FD||_0t(e),FD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0t=new r2(5e3,15e3),x0t="__/auth/iframe",S0t="emulator/auth/iframe",T0t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C0t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A0t(e){const t=e.config;rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?HV(t,S0t):`https://${e.config.authDomain}/${x0t}`,r={apiKey:t.apiKey,appName:e.name,v:My},i=C0t.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${n2(r).slice(1)}`}async function D0t(e){const t=await E0t(e),n=wf().gapi;return rn(n,e,"internal-error"),t.open({where:document.body,url:A0t(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T0t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=_c(e,"network-request-failed"),a=wf().setTimeout(()=>{s(o)},w0t.get());function u(){wf().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N0t=500,k0t=600,R0t="_blank",P0t="http://localhost";class Are{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O0t(e,t,n,r=N0t,i=k0t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},I0t),{width:r.toString(),height:i.toString(),top:s,left:o}),l=so().toLowerCase();n&&(a=hbe(l)?R0t:n),dbe(l)&&(t=t||P0t,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(cgt(l)&&a!=="_self")return M0t(t||"",a),new Are(null);const f=window.open(t||"",a,c);rn(f,e,"popup-blocked");try{f.focus()}catch{}return new Are(f)}function M0t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0t="__/auth/handler",F0t="emulator/auth/handler",L0t=encodeURIComponent("fac");async function Dre(e,t,n,r,i,s){rn(e.config.authDomain,e,"auth-domain-config-required"),rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:My,eventId:i};if(t instanceof YV){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",kpt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof s2){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${L0t}=${encodeURIComponent(u)}`:"";return`${B0t(e)}?${n2(a).slice(1)}${l}`}function B0t({config:e}){return e.emulator?HV(e,F0t):`https://${e.authDomain}/${$0t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6="webStorageSupport";class j0t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cbe,this._completeRedirectFn=c0t,this._overrideRedirectResult=a0t}async _openPopup(t,n,r,i){var s;Sh((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Dre(t,n,r,m8(),i);return O0t(t,o,KV())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Dre(t,n,r,m8(),i);return Vgt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sh(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await D0t(t),r=new d0t(t);return n.register("authEvent",i=>(rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(i6,{type:i6},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[i6];o!==void 0&&n(!!o),Of(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=y0t(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return vbe()||WV()||A3()}}const Obe=j0t;var Ire="@firebase/auth",Nre="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V0t(e){xh(new Pf("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bbe(e)},l=new ygt(r,i,s,u);return xgt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),xh(new Pf("auth-internal",t=>{const n=i2(t.getProvider("auth").getImmediate());return(r=>new z0t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bc(Ire,Nre,U0t(e)),bc(Ire,Nre,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0t=5*60,q0t=Qve("authIdTokenMaxAge")||H0t;let kre=null;const W0t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>q0t)return;const i=n==null?void 0:n.token;kre!==i&&(kre=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gk(e=zV()){const t=P_(e,"auth");if(t.isInitialized())return t.getImmediate();const n=wgt(e,{popupRedirectResolver:Obe,persistence:[Jgt,jgt,Cbe]}),r=Qve("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=W0t(s.toString());Ogt(n,o,()=>o(n.currentUser)),Pgt(n,a=>o(a))}}const i=Kve("auth");return i&&Sgt(n,`http://${i}`),n}function G0t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}vgt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=_c("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",G0t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V0t("Browser");var Y0t="firebase",K0t="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bc(Y0t,K0t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mbe="firebasestorage.googleapis.com",$be="storageBucket",X0t=2*60*1e3,Q0t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends ed{constructor(t,n,r=0){super(s6(t),`Firebase Storage: ${n} (${s6(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ii.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return s6(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Di;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Di||(Di={}));function s6(e){return"storage/"+e}function QV(){const e="An unknown error occurred, please check the error payload for server response.";return new Ii(Di.UNKNOWN,e)}function J0t(e){return new Ii(Di.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Z0t(e){return new Ii(Di.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eyt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ii(Di.UNAUTHENTICATED,e)}function tyt(){return new Ii(Di.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nyt(e){return new Ii(Di.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function ryt(){return new Ii(Di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iyt(){return new Ii(Di.CANCELED,"User canceled the upload/download.")}function syt(e){return new Ii(Di.INVALID_URL,"Invalid URL '"+e+"'.")}function oyt(e){return new Ii(Di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function ayt(){return new Ii(Di.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$be+"' property when initializing the app?")}function uyt(){return new Ii(Di.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lyt(){return new Ii(Di.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function cyt(e){return new Ii(Di.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function v8(e){return new Ii(Di.INVALID_ARGUMENT,e)}function Fbe(){return new Ii(Di.APP_DELETED,"The Firebase app was deleted.")}function fyt(e){return new Ii(Di.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dx(e,t){return new Ii(Di.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function $E(e){throw new Ii(Di.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=sa.makeFromUrl(t,n)}catch{return new sa(t,"")}if(r.path==="")return r;throw oyt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===Mbe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<b.length;E++){const _=b[E],x=_.regex.exec(t);if(x){const S=x[_.indices.bucket];let C=x[_.indices.path];C||(C=""),r=new sa(S,C),_.postModify(r);break}}if(r==null)throw syt(t);return r}}class dyt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hyt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function pyt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function myt(e){return e!==void 0}function gyt(e){return typeof e=="object"&&!Array.isArray(e)}function JV(e){return typeof e=="string"||e instanceof String}function Rre(e){return ZV()&&e instanceof Blob}function ZV(){return typeof Blob<"u"}function b8(e,t,n,r){if(r<t)throw v8(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw v8(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Lbe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y0;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(y0||(y0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yyt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vyt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new vA(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===y0.NO_ERROR,u=s.getStatus();if(!a||yyt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===y0.ABORT;r(!1,new vA(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new vA(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());myt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=QV();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Fbe():iyt();o(u)}else{const u=ryt();o(u)}};this.canceled_?n(!1,new vA(!1,null,!0)):this.backoffId_=hyt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&pyt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vA{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function byt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function _yt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Eyt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function wyt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function xyt(e,t,n,r,i,s,o=!0){const a=Lbe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return Eyt(l,t),byt(l,n),_yt(l,s),wyt(l,r),new vyt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Syt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Tyt(...e){const t=Syt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(ZV())return new Blob(e);throw new Ii(Di.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Cyt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ayt(e){if(typeof atob>"u")throw cyt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class o6{constructor(t,n){this.data=t,this.contentType=n||null}}function Dyt(e,t){switch(e){case mf.RAW:return new o6(Bbe(t));case mf.BASE64:case mf.BASE64URL:return new o6(jbe(e,t));case mf.DATA_URL:return new o6(Nyt(t),kyt(t))}throw QV()}function Bbe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Iyt(e){let t;try{t=decodeURIComponent(e)}catch{throw Dx(mf.DATA_URL,"Malformed data URL.")}return Bbe(t)}function jbe(e,t){switch(e){case mf.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Dx(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case mf.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Dx(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ayt(t)}catch(i){throw i.message.includes("polyfill")?i:Dx(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class zbe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Dx(mf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Ryt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Nyt(e){const t=new zbe(e);return t.base64?jbe(mf.BASE64,t.rest):Iyt(t.rest)}function kyt(e){return new zbe(e).contentType}function Ryt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,n){let r=0,i="";Rre(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Rre(this.data_)){const r=this.data_,i=Cyt(r,t,n);return i===null?null:new Sp(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Sp(r,!0)}}static getBlob(...t){if(ZV()){const n=t.map(r=>r instanceof Sp?r.data_:r);return new Sp(Tyt.apply(null,n))}else{const n=t.map(o=>JV(o)?Dyt(mf.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Sp(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(e){let t;try{t=JSON.parse(e)}catch{return null}return gyt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pyt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Oyt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Ube(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Myt(e,t){return t}class Yo{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Myt}}let bA=null;function $yt(e){return!JV(e)||e.length<2?e:Ube(e)}function Vbe(){if(bA)return bA;const e=[];e.push(new Yo("bucket")),e.push(new Yo("generation")),e.push(new Yo("metageneration")),e.push(new Yo("name","fullPath",!0));function t(s,o){return $yt(o)}const n=new Yo("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Yo("size");return i.xform=r,e.push(i),e.push(new Yo("timeCreated")),e.push(new Yo("updated")),e.push(new Yo("md5Hash",null,!0)),e.push(new Yo("cacheControl",null,!0)),e.push(new Yo("contentDisposition",null,!0)),e.push(new Yo("contentEncoding",null,!0)),e.push(new Yo("contentLanguage",null,!0)),e.push(new Yo("contentType",null,!0)),e.push(new Yo("metadata","customMetadata",!0)),bA=e,bA}function Fyt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new sa(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Lyt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return Fyt(r,e),r}function Hbe(e,t,n){const r=eH(t);return r===null?null:Lyt(e,r,n)}function Byt(e,t,n,r){const i=eH(t);if(i===null||!JV(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=a2(d,n,r),p=Lbe({alt:"media",token:l});return h+p})[0]}function jyt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pre="prefixes",Ore="items";function zyt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Pre])for(const i of n[Pre]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new sa(t,s));r.prefixes.push(o)}if(n[Ore])for(const i of n[Ore]){const s=e._makeStorageReference(new sa(t,i.name));r.items.push(s)}return r}function Uyt(e,t,n){const r=eH(n);return r===null?null:zyt(e,t,r)}class N3{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(e){if(!e)throw QV()}function Vyt(e,t){function n(r,i){const s=Hbe(e,i,t);return tH(s!==null),s}return n}function Hyt(e,t){function n(r,i){const s=Uyt(e,t,i);return tH(s!==null),s}return n}function qyt(e,t){function n(r,i){const s=Hbe(e,i,t);return tH(s!==null),Byt(s,i,e.host,e._protocol)}return n}function nH(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=tyt():i=eyt():n.getStatus()===402?i=Z0t(e.bucket):n.getStatus()===403?i=nyt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function qbe(e){const t=nH(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=J0t(e.path)),s.serverResponse=i.serverResponse,s}return n}function Wyt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=a2(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new N3(a,u,Hyt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=nH(t),c}function Gyt(e,t,n){const r=t.fullServerUrl(),i=a2(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new N3(i,s,qyt(e,n),o);return a.errorHandler=qbe(t),a}function Yyt(e,t){const n=t.fullServerUrl(),r=a2(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new N3(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=qbe(t),a}function Kyt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Xyt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Kyt(null,t)),r}function Qyt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let E=0;E<2;E++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=Xyt(t,r,i),c=jyt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Sp.getBlob(f,r,d);if(h===null)throw uyt();const p={name:l.fullPath},m=a2(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new N3(m,g,Vyt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=nH(t),v}class Jyt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=y0.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=y0.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=y0.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw $E("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $E("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $E("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $E("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $E("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Zyt extends Jyt{initXhr(){this.xhr_.responseType="text"}}function k3(){return new Zyt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n){this._service=t,n instanceof sa?this._location=n:this._location=sa.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new q0(t,n)}get root(){const t=new sa(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ube(this._location.path)}get storage(){return this._service}get parent(){const t=Pyt(this._location.path);if(t===null)return null;const n=new sa(this._location.bucket,t);return new q0(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw fyt(t)}}function e1t(e,t,n){e._throwIfRoot("uploadBytes");const r=Qyt(e.storage,e._location,Vbe(),new Sp(t,!0),n);return e.storage.makeRequestWithTokens(r,k3).then(i=>({metadata:i,ref:e}))}function t1t(e){const t={prefixes:[],items:[]};return Wbe(e,t).then(()=>t)}async function Wbe(e,t,n){const i=await n1t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Wbe(e,t,i.nextPageToken)}function n1t(e,t){t!=null&&typeof t.maxResults=="number"&&b8("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Wyt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,k3)}function r1t(e){e._throwIfRoot("getDownloadURL");const t=Gyt(e.storage,e._location,Vbe());return e.storage.makeRequestWithTokens(t,k3).then(n=>{if(n===null)throw lyt();return n})}function i1t(e){e._throwIfRoot("deleteObject");const t=Yyt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,k3)}function s1t(e,t){const n=Oyt(e._location.path,t),r=new sa(e._location.bucket,n);return new q0(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1t(e){return/^[A-Za-z]+:\/\//.test(e)}function a1t(e,t){return new q0(e,t)}function Gbe(e,t){if(e instanceof rH){const n=e;if(n._bucket==null)throw ayt();const r=new q0(n,n._bucket);return t!=null?Gbe(r,t):r}else return t!==void 0?s1t(e,t):e}function u1t(e,t){if(t&&o1t(t)){if(e instanceof rH)return a1t(e,t);throw v8("To use ref(service, url), the first argument must be a Storage instance.")}else return Gbe(e,t)}function Mre(e,t){const n=t==null?void 0:t[$be];return n==null?null:sa.makeFromBucketSpec(n,e)}function l1t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:_pt(i,e.app.options.projectId))}class rH{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Mbe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X0t,this._maxUploadRetryTime=Q0t,this._requests=new Set,i!=null?this._bucket=sa.makeFromBucketSpec(i,this._host):this._bucket=Mre(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=sa.makeFromBucketSpec(this._url,t):this._bucket=Mre(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){b8("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){b8("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new q0(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new dyt(Fbe());{const o=xyt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const $re="@firebase/storage",Fre="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ybe="storage";function a6(e,t,n){return e=$r(e),e1t(e,t,n)}function FE(e){return e=$r(e),t1t(e)}function u6(e){return e=$r(e),r1t(e)}function Lre(e){return e=$r(e),i1t(e)}function Xu(e,t){return e=$r(e),u1t(e,t)}function c1t(e=zV(),t){e=$r(e);const r=P_(e,Ybe).getImmediate({identifier:t}),i=bpt("storage");return i&&f1t(r,...i),r}function f1t(e,t,n,r={}){l1t(e,t,n,r)}function d1t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new rH(n,r,i,t,My)}function h1t(){xh(new Pf(Ybe,d1t,"PUBLIC").setMultipleInstances(!0)),bc($re,Fre,""),bc($re,Fre,"esm2017")}h1t();var Bre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v0,Kbe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(D,I,O){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return C.prototype[I].apply(D,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,A){A||(A=0);var D=Array(16);if(typeof C=="string")for(var I=0;16>I;++I)D[I]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(I=0;16>I;++I)D[I]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],I=S.g[2];var O=S.g[3],R=C+(O^A&(I^O))+D[0]+3614090360&4294967295;C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[1]+3905402710&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[2]+606105819&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[3]+3250441966&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(O^A&(I^O))+D[4]+4118548399&4294967295,C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[5]+1200080426&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[6]+2821735955&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[7]+4249261313&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(O^A&(I^O))+D[8]+1770035416&4294967295,C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[9]+2336552879&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[10]+4294925233&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[11]+2304563134&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(O^A&(I^O))+D[12]+1804603682&4294967295,C=A+(R<<7&4294967295|R>>>25),R=O+(I^C&(A^I))+D[13]+4254626195&4294967295,O=C+(R<<12&4294967295|R>>>20),R=I+(A^O&(C^A))+D[14]+2792965006&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(C^I&(O^C))+D[15]+1236535329&4294967295,A=I+(R<<22&4294967295|R>>>10),R=C+(I^O&(A^I))+D[1]+4129170786&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[6]+3225465664&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[11]+643717713&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[0]+3921069994&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(I^O&(A^I))+D[5]+3593408605&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[10]+38016083&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[15]+3634488961&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[4]+3889429448&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(I^O&(A^I))+D[9]+568446438&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[14]+3275163606&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[3]+4107603335&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[8]+1163531501&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(I^O&(A^I))+D[13]+2850285829&4294967295,C=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(C^A))+D[2]+4243563512&4294967295,O=C+(R<<9&4294967295|R>>>23),R=I+(C^A&(O^C))+D[7]+1735328473&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^C&(I^O))+D[12]+2368359562&4294967295,A=I+(R<<20&4294967295|R>>>12),R=C+(A^I^O)+D[5]+4294588738&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[8]+2272392833&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[11]+1839030562&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[14]+4259657740&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(A^I^O)+D[1]+2763975236&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[4]+1272893353&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[7]+4139469664&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[10]+3200236656&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(A^I^O)+D[13]+681279174&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[0]+3936430074&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[3]+3572445317&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[6]+76029189&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(A^I^O)+D[9]+3654602809&4294967295,C=A+(R<<4&4294967295|R>>>28),R=O+(C^A^I)+D[12]+3873151461&4294967295,O=C+(R<<11&4294967295|R>>>21),R=I+(O^C^A)+D[15]+530742520&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^C)+D[2]+3299628645&4294967295,A=I+(R<<23&4294967295|R>>>9),R=C+(I^(A|~O))+D[0]+4096336452&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[7]+1126891415&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[14]+2878612391&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[5]+4237533241&4294967295,A=I+(R<<21&4294967295|R>>>11),R=C+(I^(A|~O))+D[12]+1700485571&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[3]+2399980690&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[10]+4293915773&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[1]+2240044497&4294967295,A=I+(R<<21&4294967295|R>>>11),R=C+(I^(A|~O))+D[8]+1873313359&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[15]+4264355552&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[6]+2734768916&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[13]+1309151649&4294967295,A=I+(R<<21&4294967295|R>>>11),R=C+(I^(A|~O))+D[4]+4149444226&4294967295,C=A+(R<<6&4294967295|R>>>26),R=O+(A^(C|~I))+D[11]+3174756917&4294967295,O=C+(R<<10&4294967295|R>>>22),R=I+(C^(O|~A))+D[2]+718787259&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~C))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,D=this.B,I=this.h,O=0;O<C;){if(I==0)for(;O<=A;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<C;)if(D[I++]=S.charCodeAt(O++),I==this.blockSize){i(this,D),I=0;break}}else for(;O<C;)if(D[I++]=S[O++],I==this.blockSize){i(this,D),I=0;break}}this.h=I,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var D=0;32>D;D+=8)S[A++]=this.g[C]>>>D&255;return S};function s(S,C){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function o(S,C){this.h=C;for(var A=[],D=!0,I=S.length-1;0<=I;I--){var O=S[I]|0;D&&O==C||(A[I]=O,D=!1)}this.g=A}var a={};function u(S){return-128<=S&&128>S?s(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var C=[],A=1,D=0;S>=A;D++)C[D]=S/A|0,A*=4294967296;return new o(C,0)}function c(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return g(c(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),D=f,I=0;I<S.length;I+=8){var O=Math.min(8,S.length-I),R=parseInt(S.substring(I,I+O),C);8>O?(O=l(Math.pow(C,O)),D=D.j(O).add(l(R))):(D=D.j(A),D=D.add(l(R)))}return D}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var D=this.i(A);S+=(0<=D?D:4294967296+D)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var C=l(Math.pow(S,6)),A=this,D="";;){var I=E(A,C).g;A=y(A,I.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=I,p(A))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var C=S.g.length,A=[],D=0;D<C;D++)A[D]=~S.g[D];return new o(A,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0,I=0;I<=C;I++){var O=D+(this.i(I)&65535)+(S.i(I)&65535),R=(O>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);D=R>>>16,O&=65535,R&=65535,A[I]=R<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,C){return S.add(g(C))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],D=0;D<2*C;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var I=0;I<S.g.length;I++){var O=this.i(D)>>>16,R=this.i(D)&65535,M=S.i(I)>>>16,F=S.i(I)&65535;A[2*D+2*I]+=R*F,v(A,2*D+2*I),A[2*D+2*I+1]+=O*F,v(A,2*D+2*I+1),A[2*D+2*I+1]+=R*M,v(A,2*D+2*I+1),A[2*D+2*I+2]+=O*M,v(A,2*D+2*I+2)}for(D=0;D<C;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=C;D<2*C;D++)A[D]=0;return new o(A,0)};function v(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function b(S,C){this.g=S,this.h=C}function E(S,C){if(p(C))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return C=E(g(S),C),new b(g(C.g),g(C.h));if(m(C))return C=E(S,g(C)),new b(g(C.g),C.h);if(30<S.g.length){if(m(S)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,D=C;0>=D.l(S);)A=_(A),D=_(D);var I=x(A,1),O=x(D,1);for(D=x(D,2),A=x(A,2);!p(D);){var R=O.add(D);0>=R.l(S)&&(I=I.add(A),O=R),D=x(D,1),A=x(A,1)}return C=y(S,I.j(C)),new b(I,C)}for(I=f;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=l(A),R=O.j(C);m(R)||0<R.l(S);)A-=D,O=l(A),R=O.j(C);p(O)&&(O=d),I=I.add(O),S=y(S,R)}return new b(I,S)}e.A=function(S){return E(this,S).h},e.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)&S.i(D);return new o(A,this.h&S.h)},e.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)|S.i(D);return new o(A,this.h|S.h)},e.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)^S.i(D);return new o(A,this.h^S.h)};function _(S){for(var C=S.g.length+1,A=[],D=0;D<C;D++)A[D]=S.i(D)<<1|S.i(D-1)>>>31;return new o(A,S.h)}function x(S,C){var A=C>>5;C%=32;for(var D=S.g.length-A,I=[],O=0;O<D;O++)I[O]=0<C?S.i(O+A)>>>C|S.i(O+A+1)<<32-C:S.i(O+A);return new o(I,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kbe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,v0=o}).apply(typeof Bre<"u"?Bre:typeof self<"u"?self:typeof window<"u"?window:{});var _A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xbe,Qbe,Iw,Jbe,LD,_8,Zbe,e_e,t_e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,L,H){return T==Array.prototype||T==Object.prototype||(T[L]=H.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof _A=="object"&&_A];for(var L=0;L<T.length;++L){var H=T[L];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=n(this);function i(T,L){if(L)e:{var H=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var Ee=T[Q];if(!(Ee in H))break e;H=H[Ee]}T=T[T.length-1],Q=H[T],L=L(Q),L!=Q&&L!=null&&t(H,T,{configurable:!0,writable:!0,value:L})}}function s(T,L){T instanceof String&&(T+="");var H=0,Q=!1,Ee={next:function(){if(!Q&&H<T.length){var Me=H++;return{value:L(Me,T[Me]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return Ee[Symbol.iterator]=function(){return Ee},Ee}i("Array.prototype.values",function(T){return T||function(){return s(this,function(L,H){return H})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(T){var L=typeof T;return L=L!="object"?L:T?Array.isArray(T)?"array":L:"null",L=="array"||L=="object"&&typeof T.length=="number"}function l(T){var L=typeof T;return L=="object"&&T!=null||L=="function"}function c(T,L,H){return T.call.apply(T.bind,arguments)}function f(T,L,H){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var Ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ee,Q),T.apply(L,Ee)}}return function(){return T.apply(L,arguments)}}function d(T,L,H){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(T,L){var H=Array.prototype.slice.call(arguments,1);return function(){var Q=H.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,L){function H(){}H.prototype=L.prototype,T.aa=L.prototype,T.prototype=new H,T.prototype.constructor=T,T.Qb=function(Q,Ee,Me){for(var pt=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)pt[Tr-2]=arguments[Tr];return L.prototype[Ee].apply(Q,pt)}}function m(T){const L=T.length;if(0<L){const H=Array(L);for(let Q=0;Q<L;Q++)H[Q]=T[Q];return H}return[]}function g(T,L){for(let H=1;H<arguments.length;H++){const Q=arguments[H];if(u(Q)){const Ee=T.length||0,Me=Q.length||0;T.length=Ee+Me;for(let pt=0;pt<Me;pt++)T[Ee+pt]=Q[pt]}else T.push(Q)}}class y{constructor(L,H){this.i=L,this.j=H,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(T){return/^[\s\xa0]*$/.test(T)}function b(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function E(T){return E[" "](T),T}E[" "]=function(){};var _=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function x(T,L,H){for(const Q in T)L.call(H,T[Q],Q,T)}function S(T,L){for(const H in T)L.call(void 0,T[H],H,T)}function C(T){const L={};for(const H in T)L[H]=T[H];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(T,L){let H,Q;for(let Ee=1;Ee<arguments.length;Ee++){Q=arguments[Ee];for(H in Q)T[H]=Q[H];for(let Me=0;Me<A.length;Me++)H=A[Me],Object.prototype.hasOwnProperty.call(Q,H)&&(T[H]=Q[H])}}function I(T){var L=1;T=T.split(":");const H=[];for(;0<L&&T.length;)H.push(T.shift()),L--;return T.length&&H.push(T.join(":")),H}function O(T){a.setTimeout(()=>{throw T},0)}function R(){var T=V;let L=null;return T.g&&(L=T.g,T.g=T.g.next,T.g||(T.h=null),L.next=null),L}class M{constructor(){this.h=this.g=null}add(L,H){const Q=F.get();Q.set(L,H),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new P,T=>T.reset());class P{constructor(){this.next=this.g=this.h=null}set(L,H){this.h=L,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let j,z=!1,V=new M,$=()=>{const T=a.Promise.resolve(void 0);j=()=>{T.then(U)}};var U=()=>{for(var T;T=R();){try{T.h.call(T.g)}catch(H){O(H)}var L=F;L.j(T),100>L.h&&(L.h++,T.next=L.g,L.g=T)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(T,L){this.type=T,this.g=this.target=L,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,L=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const H=()=>{};a.addEventListener("test",H,L),a.removeEventListener("test",H,L)}catch{}return T}();function Y(T,L){if(B.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var H=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=L,L=T.relatedTarget){if(_){e:{try{E(L.nodeName);var Ee=!0;break e}catch{}Ee=!1}Ee||(L=null)}}else H=="mouseover"?L=T.fromElement:H=="mouseout"&&(L=T.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:re[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&Y.aa.h.call(this)}}p(Y,B);var re={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),_e=0;function de(T,L,H,Q,Ee){this.listener=T,this.proxy=null,this.src=L,this.type=H,this.capture=!!Q,this.ha=Ee,this.key=++_e,this.da=this.fa=!1}function ye(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Ce(T){this.src=T,this.g={},this.h=0}Ce.prototype.add=function(T,L,H,Q,Ee){var Me=T.toString();T=this.g[Me],T||(T=this.g[Me]=[],this.h++);var pt=qe(T,L,Q,Ee);return-1<pt?(L=T[pt],H||(L.fa=!1)):(L=new de(L,this.src,Me,!!Q,Ee),L.fa=H,T.push(L)),L};function ve(T,L){var H=L.type;if(H in T.g){var Q=T.g[H],Ee=Array.prototype.indexOf.call(Q,L,void 0),Me;(Me=0<=Ee)&&Array.prototype.splice.call(Q,Ee,1),Me&&(ye(L),T.g[H].length==0&&(delete T.g[H],T.h--))}}function qe(T,L,H,Q){for(var Ee=0;Ee<T.length;++Ee){var Me=T[Ee];if(!Me.da&&Me.listener==L&&Me.capture==!!H&&Me.ha==Q)return Ee}return-1}var He="closure_lm_"+(1e6*Math.random()|0),ht={};function rt(T,L,H,Q,Ee){if(Array.isArray(L)){for(var Me=0;Me<L.length;Me++)rt(T,L[Me],H,Q,Ee);return null}return H=me(H),T&&T[pe]?T.K(L,H,l(Q)?!!Q.capture:!!Q,Ee):Pe(T,L,H,!1,Q,Ee)}function Pe(T,L,H,Q,Ee,Me){if(!L)throw Error("Invalid event type");var pt=l(Ee)?!!Ee.capture:!!Ee,Tr=G(T);if(Tr||(T[He]=Tr=new Ce(T)),H=Tr.add(L,H,Q,pt,Me),H.proxy)return H;if(Q=Be(),H.proxy=Q,Q.src=T,Q.listener=H,T.addEventListener)q||(Ee=pt),Ee===void 0&&(Ee=!1),T.addEventListener(L.toString(),Q,Ee);else if(T.attachEvent)T.attachEvent(Ft(L.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return H}function Be(){function T(H){return L.call(T.src,T.listener,H)}const L=bt;return T}function Xe(T,L,H,Q,Ee){if(Array.isArray(L))for(var Me=0;Me<L.length;Me++)Xe(T,L[Me],H,Q,Ee);else Q=l(Q)?!!Q.capture:!!Q,H=me(H),T&&T[pe]?(T=T.i,L=String(L).toString(),L in T.g&&(Me=T.g[L],H=qe(Me,H,Q,Ee),-1<H&&(ye(Me[H]),Array.prototype.splice.call(Me,H,1),Me.length==0&&(delete T.g[L],T.h--)))):T&&(T=G(T))&&(L=T.g[L.toString()],T=-1,L&&(T=qe(L,H,Q,Ee)),(H=-1<T?L[T]:null)&&mt(H))}function mt(T){if(typeof T!="number"&&T&&!T.da){var L=T.src;if(L&&L[pe])ve(L.i,T);else{var H=T.type,Q=T.proxy;L.removeEventListener?L.removeEventListener(H,Q,T.capture):L.detachEvent?L.detachEvent(Ft(H),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(H=G(L))?(ve(H,T),H.h==0&&(H.src=null,L[He]=null)):ye(T)}}}function Ft(T){return T in ht?ht[T]:ht[T]="on"+T}function bt(T,L){if(T.da)T=!0;else{L=new Y(L,this);var H=T.listener,Q=T.ha||T.src;T.fa&&mt(T),T=H.call(Q,L)}return T}function G(T){return T=T[He],T instanceof Ce?T:null}var ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(T){return typeof T=="function"?T:(T[ie]||(T[ie]=function(L){return T.handleEvent(L)}),T[ie])}function J(){W.call(this),this.i=new Ce(this),this.M=this,this.F=null}p(J,W),J.prototype[pe]=!0,J.prototype.removeEventListener=function(T,L,H,Q){Xe(this,T,L,H,Q)};function se(T,L){var H,Q=T.F;if(Q)for(H=[];Q;Q=Q.F)H.push(Q);if(T=T.M,Q=L.type||L,typeof L=="string")L=new B(L,T);else if(L instanceof B)L.target=L.target||T;else{var Ee=L;L=new B(Q,T),D(L,Ee)}if(Ee=!0,H)for(var Me=H.length-1;0<=Me;Me--){var pt=L.g=H[Me];Ee=ce(pt,Q,!0,L)&&Ee}if(pt=L.g=T,Ee=ce(pt,Q,!0,L)&&Ee,Ee=ce(pt,Q,!1,L)&&Ee,H)for(Me=0;Me<H.length;Me++)pt=L.g=H[Me],Ee=ce(pt,Q,!1,L)&&Ee}J.prototype.N=function(){if(J.aa.N.call(this),this.i){var T=this.i,L;for(L in T.g){for(var H=T.g[L],Q=0;Q<H.length;Q++)ye(H[Q]);delete T.g[L],T.h--}}this.F=null},J.prototype.K=function(T,L,H,Q){return this.i.add(String(T),L,!1,H,Q)},J.prototype.L=function(T,L,H,Q){return this.i.add(String(T),L,!0,H,Q)};function ce(T,L,H,Q){if(L=T.i.g[String(L)],!L)return!0;L=L.concat();for(var Ee=!0,Me=0;Me<L.length;++Me){var pt=L[Me];if(pt&&!pt.da&&pt.capture==H){var Tr=pt.listener,Bs=pt.ha||pt.src;pt.fa&&ve(T.i,pt),Ee=Tr.call(Bs,Q)!==!1&&Ee}}return Ee&&!Q.defaultPrevented}function Se(T,L,H){if(typeof T=="function")H&&(T=d(T,H));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(T,L||0)}function Te(T){T.g=Se(()=>{T.g=null,T.i&&(T.i=!1,Te(T))},T.l);const L=T.h;T.h=null,T.m.apply(null,L)}class Ge extends W{constructor(L,H){super(),this.m=L,this.l=H,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(T){W.call(this),this.h=T,this.g={}}p(je,W);var Ct=[];function Ot(T){x(T.g,function(L,H){this.g.hasOwnProperty(H)&&mt(L)},T),T.g={}}je.prototype.N=function(){je.aa.N.call(this),Ot(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dt=a.JSON.stringify,Vt=a.JSON.parse,Zt=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function an(){}an.prototype.h=null;function gr(T){return T.h||(T.h=T.i())}function lr(){}var fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xr(){B.call(this,"d")}p(Xr,B);function er(){B.call(this,"c")}p(er,B);var gi={},Ll=null;function Ho(){return Ll=Ll||new J}gi.La="serverreachability";function Wu(T){B.call(this,gi.La,T)}p(Wu,B);function Yn(T){const L=Ho();se(L,new Wu(L))}gi.STAT_EVENT="statevent";function Lr(T,L){B.call(this,gi.STAT_EVENT,T),this.stat=L}p(Lr,B);function yr(T){const L=Ho();se(L,new Lr(L,T))}gi.Ma="timingevent";function uo(T,L){B.call(this,gi.Ma,T),this.size=L}p(uo,B);function Fs(T,L){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},L)}function Ls(){this.g=!0}Ls.prototype.xa=function(){this.g=!1};function ue(T,L,H,Q,Ee,Me){T.info(function(){if(T.g)if(Me)for(var pt="",Tr=Me.split("&"),Bs=0;Bs<Tr.length;Bs++){var Kn=Tr[Bs].split("=");if(1<Kn.length){var ho=Kn[0];Kn=Kn[1];var po=ho.split("_");pt=2<=po.length&&po[1]=="type"?pt+(ho+"="+Kn+"&"):pt+(ho+"=redacted&")}}else pt=null;else pt=Me;return"XMLHTTP REQ ("+Q+") [attempt "+Ee+"]: "+L+`
`+H+`
`+pt})}function te(T,L,H,Q,Ee,Me,pt){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+Ee+"]: "+L+`
`+H+`
`+Me+" "+pt})}function le(T,L,H,Q){T.info(function(){return"XMLHTTP TEXT ("+L+"): "+Ae(T,H)+(Q?" "+Q:"")})}function De(T,L){T.info(function(){return"TIMEOUT: "+L})}Ls.prototype.info=function(){};function Ae(T,L){if(!T.g)return L;if(!L)return null;try{var H=JSON.parse(L);if(H){for(T=0;T<H.length;T++)if(Array.isArray(H[T])){var Q=H[T];if(!(2>Q.length)){var Ee=Q[1];if(Array.isArray(Ee)&&!(1>Ee.length)){var Me=Ee[0];if(Me!="noop"&&Me!="stop"&&Me!="close")for(var pt=1;pt<Ee.length;pt++)Ee[pt]=""}}}}return Dt(H)}catch{return L}}var at={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xt;function _n(){}p(_n,an),_n.prototype.g=function(){return new XMLHttpRequest},_n.prototype.i=function(){return{}},Xt=new _n;function Sn(T,L,H,Q){this.j=T,this.i=L,this.l=H,this.R=Q||1,this.U=new je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var $n={},tr={};function Ht(T,L,H){T.L=1,T.v=kn(Je(L)),T.m=H,T.P=!0,Fn(T,null)}function Fn(T,L){T.F=Date.now(),Gt(T),T.A=Je(T.v);var H=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),rC(H.i,"t",Q),T.C=0,H=T.j.J,T.h=new un,T.g=jK(T.j,H?L:null,!T.m),0<T.O&&(T.M=new Ge(d(T.Y,T,T.g),T.O)),L=T.U,H=T.g,Q=T.ca;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(Ct[0]=Ee.toString()),Ee=Ct);for(var Me=0;Me<Ee.length;Me++){var pt=rt(H,Ee[Me],Q||L.handleEvent,!1,L.h||L);if(!pt)break;L.g[pt.key]=pt}L=T.H?C(T.H):{},T.m?(T.u||(T.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,L)):(T.u="GET",T.g.ea(T.A,T.u,null,L)),Yn(),ue(T.i,T.u,T.A,T.l,T.R,T.m)}Sn.prototype.ca=function(T){T=T.target;const L=this.M;L&&Ni(T)==3?L.j():this.Y(T)},Sn.prototype.Y=function(T){try{if(T==this.g)e:{const po=Ni(this.g);var L=this.g.Ba();const s1=this.g.Z();if(!(3>po)&&(po!=3||this.g&&(this.h.h||this.g.oa()||fo(this.g)))){this.J||po!=4||L==7||(L==8||0>=s1?Yn(3):Yn(2)),vr(this);var H=this.g.Z();this.X=H;t:if(cr(this)){var Q=fo(this.g);T="";var Ee=Q.length,Me=Ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),yi(this);var pt="";break t}this.h.i=new a.TextDecoder}for(L=0;L<Ee;L++)this.h.h=!0,T+=this.h.i.decode(Q[L],{stream:!(Me&&L==Ee-1)});Q.length=0,this.h.g+=T,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=H==200,te(this.i,this.u,this.A,this.l,this.R,po,H),this.o){if(this.T&&!this.K){t:{if(this.g){var Tr,Bs=this.g;if((Tr=Bs.g?Bs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Tr)){var Kn=Tr;break t}}Kn=null}if(H=Kn)le(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qr(this,H);else{this.o=!1,this.s=3,yr(12),br(this),yi(this);break e}}if(this.P){H=!0;let Bl;for(;!this.J&&this.C<pt.length;)if(Bl=bn(this,pt),Bl==tr){po==4&&(this.s=4,yr(14),H=!1),le(this.i,this.l,null,"[Incomplete Response]");break}else if(Bl==$n){this.s=4,yr(15),le(this.i,this.l,pt,"[Invalid Chunk]"),H=!1;break}else le(this.i,this.l,Bl,null),Qr(this,Bl);if(cr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),po!=4||pt.length!=0||this.h.h||(this.s=1,yr(16),H=!1),this.o=this.o&&H,!H)le(this.i,this.l,pt,"[Invalid Chunked Response]"),br(this),yi(this);else if(0<pt.length&&!this.W){this.W=!0;var ho=this.j;ho.g==this&&ho.ba&&!ho.M&&(ho.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),XM(ho),ho.M=!0,yr(11))}}else le(this.i,this.l,pt,null),Qr(this,pt);po==4&&br(this),this.o&&!this.J&&(po==4?$K(this.j,this):(this.o=!1,Gt(this)))}else vg(this.g),H==400&&0<pt.indexOf("Unknown SID")?(this.s=3,yr(12)):(this.s=0,yr(13)),br(this),yi(this)}}}catch{}finally{}};function cr(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function bn(T,L){var H=T.C,Q=L.indexOf(`
`,H);return Q==-1?tr:(H=Number(L.substring(H,Q)),isNaN(H)?$n:(Q+=1,Q+H>L.length?tr:(L=L.slice(Q,Q+H),T.C=Q+H,L)))}Sn.prototype.cancel=function(){this.J=!0,br(this)};function Gt(T){T.S=Date.now()+T.I,Hn(T,T.I)}function Hn(T,L){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Fs(d(T.ba,T),L)}function vr(T){T.B&&(a.clearTimeout(T.B),T.B=null)}Sn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(De(this.i,this.A),this.L!=2&&(Yn(),yr(17)),br(this),this.s=2,yi(this)):Hn(this,this.S-T)};function yi(T){T.j.G==0||T.J||$K(T.j,T)}function br(T){vr(T);var L=T.M;L&&typeof L.ma=="function"&&L.ma(),T.M=null,Ot(T.U),T.g&&(L=T.g,T.g=null,L.abort(),L.ma())}function Qr(T,L){try{var H=T.j;if(H.G!=0&&(H.g==T||Vc(H.h,T))){if(!T.K&&Vc(H.h,T)&&H.G==3){try{var Q=H.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var Ee=Q;if(Ee[0]==0){e:if(!H.u){if(H.g)if(H.g.F+3e3<T.F)cC(H),uC(H);else break e;KM(H),yr(18)}}else H.za=Ee[1],0<H.za-H.T&&37500>Ee[2]&&H.F&&H.v==0&&!H.C&&(H.C=Fs(d(H.Za,H),6e3));if(1>=Gu(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else bg(H,11)}else if((T.K||H.g==T)&&cC(H),!v(L))for(Ee=H.Da.g.parse(L),L=0;L<Ee.length;L++){let Kn=Ee[L];if(H.T=Kn[0],Kn=Kn[1],H.G==2)if(Kn[0]=="c"){H.K=Kn[1],H.ia=Kn[2];const ho=Kn[3];ho!=null&&(H.la=ho,H.j.info("VER="+H.la));const po=Kn[4];po!=null&&(H.Aa=po,H.j.info("SVER="+H.Aa));const s1=Kn[5];s1!=null&&typeof s1=="number"&&0<s1&&(Q=1.5*s1,H.L=Q,H.j.info("backChannelRequestTimeoutMs_="+Q)),Q=H;const Bl=T.g;if(Bl){const dC=Bl.g?Bl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dC){var Me=Q.h;Me.g||dC.indexOf("spdy")==-1&&dC.indexOf("quic")==-1&&dC.indexOf("h2")==-1||(Me.j=Me.l,Me.g=new Set,Me.h&&(K(Me,Me.h),Me.h=null))}if(Q.D){const QM=Bl.g?Bl.g.getResponseHeader("X-HTTP-Session-Id"):null;QM&&(Q.ya=QM,Mt(Q.I,Q.D,QM))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-T.F,H.j.info("Handshake RTT: "+H.R+"ms")),Q=H;var pt=T;if(Q.qa=BK(Q,Q.J?Q.ia:null,Q.W),pt.K){ae(Q.h,pt);var Tr=pt,Bs=Q.L;Bs&&(Tr.I=Bs),Tr.B&&(vr(Tr),Gt(Tr)),Q.g=pt}else OK(Q);0<H.i.length&&lC(H)}else Kn[0]!="stop"&&Kn[0]!="close"||bg(H,7);else H.G==3&&(Kn[0]=="stop"||Kn[0]=="close"?Kn[0]=="stop"?bg(H,7):r1(H):Kn[0]!="noop"&&H.l&&H.l.ta(Kn),H.v=0)}}Yn(4)}catch{}}var lo=class{constructor(T,L){this.g=T,this.map=L}};function qo(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gs(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Gu(T){return T.h?1:T.g?T.g.size:0}function Vc(T,L){return T.h?T.h==L:T.g?T.g.has(L):!1}function K(T,L){T.g?T.g.add(L):T.h=L}function ae(T,L){T.h&&T.h==L?T.h=null:T.g&&T.g.has(L)&&T.g.delete(L)}qo.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function ee(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let L=T.i;for(const H of T.g.values())L=L.concat(H.D);return L}return m(T.i)}function ge(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(u(T)){for(var L=[],H=T.length,Q=0;Q<H;Q++)L.push(T[Q]);return L}L=[],H=0;for(Q in T)L[H++]=T[Q];return L}function be(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(u(T)||typeof T=="string"){var L=[];T=T.length;for(var H=0;H<T;H++)L.push(H);return L}L=[],H=0;for(const Q in T)L[H++]=Q;return L}}}function he(T,L){if(T.forEach&&typeof T.forEach=="function")T.forEach(L,void 0);else if(u(T)||typeof T=="string")Array.prototype.forEach.call(T,L,void 0);else for(var H=be(T),Q=ge(T),Ee=Q.length,Me=0;Me<Ee;Me++)L.call(void 0,Q[Me],H&&H[Me],T)}var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ke(T,L){if(T){T=T.split("&");for(var H=0;H<T.length;H++){var Q=T[H].indexOf("="),Ee=null;if(0<=Q){var Me=T[H].substring(0,Q);Ee=T[H].substring(Q+1)}else Me=T[H];L(Me,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function Qe(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof Qe){this.h=T.h,ct(this,T.j),this.o=T.o,this.g=T.g,xt(this,T.s),this.l=T.l;var L=T.i,H=new Yu;H.i=L.i,L.g&&(H.g=new Map(L.g),H.h=L.h),pn(this,H),this.m=T.m}else T&&(L=String(T).match($e))?(this.h=!1,ct(this,L[1]||"",!0),this.o=fr(L[2]||""),this.g=fr(L[3]||"",!0),xt(this,L[4]),this.l=fr(L[5]||"",!0),pn(this,L[6]||"",!0),this.m=fr(L[7]||"")):(this.h=!1,this.i=new Yu(null,this.h))}Qe.prototype.toString=function(){var T=[],L=this.j;L&&T.push(dr(L,Hc,!0),":");var H=this.g;return(H||L=="file")&&(T.push("//"),(L=this.o)&&T.push(dr(L,Hc,!0),"@"),T.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.s,H!=null&&T.push(":",String(H))),(H=this.l)&&(this.g&&H.charAt(0)!="/"&&T.push("/"),T.push(dr(H,H.charAt(0)=="/"?oE:fd,!0))),(H=this.i.toString())&&T.push("?",H),(H=this.m)&&T.push("#",dr(H,nC)),T.join("")};function Je(T){return new Qe(T)}function ct(T,L,H){T.j=H?fr(L,!0):L,T.j&&(T.j=T.j.replace(/:$/,""))}function xt(T,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);T.s=L}else T.s=null}function pn(T,L,H){L instanceof Yu?(T.i=L,aE(T.i,T.h)):(H||(L=dr(L,pg)),T.i=new Yu(L,T.h))}function Mt(T,L,H){T.i.set(L,H)}function kn(T){return Mt(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function fr(T,L){return T?L?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function dr(T,L,H){return typeof T=="string"?(T=encodeURI(T).replace(L,co),H&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function co(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Hc=/[#\/\?@]/g,fd=/[#\?:]/g,oE=/[#\?]/g,pg=/[#\?@]/g,nC=/#/g;function Yu(T,L){this.h=this.g=null,this.i=T||null,this.j=!!L}function _a(T){T.g||(T.g=new Map,T.h=0,T.i&&Ke(T.i,function(L,H){T.add(decodeURIComponent(L.replace(/\+/g," ")),H)}))}e=Yu.prototype,e.add=function(T,L){_a(this),this.i=null,T=hd(this,T);var H=this.g.get(T);return H||this.g.set(T,H=[]),H.push(L),this.h+=1,this};function dd(T,L){_a(T),L=hd(T,L),T.g.has(L)&&(T.i=null,T.h-=T.g.get(L).length,T.g.delete(L))}function t1(T,L){return _a(T),L=hd(T,L),T.g.has(L)}e.forEach=function(T,L){_a(this),this.g.forEach(function(H,Q){H.forEach(function(Ee){T.call(L,Ee,Q,this)},this)},this)},e.na=function(){_a(this);const T=Array.from(this.g.values()),L=Array.from(this.g.keys()),H=[];for(let Q=0;Q<L.length;Q++){const Ee=T[Q];for(let Me=0;Me<Ee.length;Me++)H.push(L[Q])}return H},e.V=function(T){_a(this);let L=[];if(typeof T=="string")t1(this,T)&&(L=L.concat(this.g.get(hd(this,T))));else{T=Array.from(this.g.values());for(let H=0;H<T.length;H++)L=L.concat(T[H])}return L},e.set=function(T,L){return _a(this),this.i=null,T=hd(this,T),t1(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[L]),this.h+=1,this},e.get=function(T,L){return T?(T=this.V(T),0<T.length?String(T[0]):L):L};function rC(T,L,H){dd(T,L),0<H.length&&(T.i=null,T.g.set(hd(T,L),m(H)),T.h+=H.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],L=Array.from(this.g.keys());for(var H=0;H<L.length;H++){var Q=L[H];const Me=encodeURIComponent(String(Q)),pt=this.V(Q);for(Q=0;Q<pt.length;Q++){var Ee=Me;pt[Q]!==""&&(Ee+="="+encodeURIComponent(String(pt[Q]))),T.push(Ee)}}return this.i=T.join("&")};function hd(T,L){return L=String(L),T.j&&(L=L.toLowerCase()),L}function aE(T,L){L&&!T.j&&(_a(T),T.i=null,T.g.forEach(function(H,Q){var Ee=Q.toLowerCase();Q!=Ee&&(dd(this,Q),rC(this,Ee,H))},T)),T.j=L}function iC(T,L){const H=new Ls;if(a.Image){const Q=new Image;Q.onload=h(Ea,H,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(Ea,H,"TestLoadImage: error",!1,L,Q),Q.onabort=h(Ea,H,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(Ea,H,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else L(!1)}function pd(T,L){const H=new Ls,Q=new AbortController,Ee=setTimeout(()=>{Q.abort(),Ea(H,"TestPingServer: timeout",!1,L)},1e4);fetch(T,{signal:Q.signal}).then(Me=>{clearTimeout(Ee),Me.ok?Ea(H,"TestPingServer: ok",!0,L):Ea(H,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(Ee),Ea(H,"TestPingServer: error",!1,L)})}function Ea(T,L,H,Q,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),Q(H)}catch{}}function YM(){this.g=new Zt}function sC(T,L,H){const Q=H||"";try{he(T,function(Ee,Me){let pt=Ee;l(Ee)&&(pt=Dt(Ee)),L.push(Q+Me+"="+encodeURIComponent(pt))})}catch(Ee){throw L.push(Q+"type="+encodeURIComponent("_badmap")),Ee}}function mg(T){this.l=T.Ub||null,this.j=T.eb||!1}p(mg,an),mg.prototype.g=function(){return new gg(this.l,this.j)},mg.prototype.i=function(T){return function(){return T}}({});function gg(T,L){J.call(this),this.D=T,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(gg,J),e=gg.prototype,e.open=function(T,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=L,this.readyState=1,Qh(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(L.body=T),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yg(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Qh(this)),this.g&&(this.readyState=3,Qh(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oC(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function oC(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var L=T.value?T.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!T.done}))&&(this.response=this.responseText+=L)}T.done?yg(this):Qh(this),this.readyState==3&&oC(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,yg(this))},e.Qa=function(T){this.g&&(this.response=T,yg(this))},e.ga=function(){this.g&&yg(this)};function yg(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Qh(T)}e.setRequestHeader=function(T,L){this.u.append(T,L)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],L=this.h.entries();for(var H=L.next();!H.done;)H=H.value,T.push(H[0]+": "+H[1]),H=L.next();return T.join(`\r
`)};function Qh(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(gg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function aC(T){let L="";return x(T,function(H,Q){L+=Q,L+=":",L+=H,L+=`\r
`}),L}function ne(T,L,H){e:{for(Q in H){var Q=!1;break e}Q=!0}Q||(H=aC(H),typeof T=="string"?H!=null&&encodeURIComponent(String(H)):Mt(T,L,H))}function fe(T){J.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(fe,J);var ke=/^https?$/i,It=["POST","PUT"];e=fe.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,L,H,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);L=L?L.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xt.g(),this.v=this.o?gr(this.o):gr(Xt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(T),!0),this.B=!1}catch(Me){Dn(this,Me);return}if(T=H||"",H=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var Ee in Q)H.set(Ee,Q[Ee]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Me of Q.keys())H.set(Me,Q.get(Me));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(H.keys()).find(Me=>Me.toLowerCase()=="content-type"),Ee=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,L,void 0))||Q||Ee||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Me,pt]of H)this.g.setRequestHeader(Me,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sr(this),this.u=!0,this.g.send(T),this.u=!1}catch(Me){Dn(this,Me)}};function Dn(T,L){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=L,T.m=5,or(T),Rn(T)}function or(T){T.A||(T.A=!0,se(T,"complete"),se(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,se(this,"complete"),se(this,"abort"),Rn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rn(this,!0)),fe.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?xr(this):this.bb())},e.bb=function(){xr(this)};function xr(T){if(T.h&&typeof o<"u"&&(!T.v[1]||Ni(T)!=4||T.Z()!=2)){if(T.u&&Ni(T)==4)Se(T.Ea,0,T);else if(se(T,"readystatechange"),Ni(T)==4){T.h=!1;try{const pt=T.Z();e:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var H;if(!(H=L)){var Q;if(Q=pt===0){var Ee=String(T.D).match($e)[1]||null;!Ee&&a.self&&a.self.location&&(Ee=a.self.location.protocol.slice(0,-1)),Q=!ke.test(Ee?Ee.toLowerCase():"")}H=Q}if(H)se(T,"complete"),se(T,"success");else{T.m=6;try{var Me=2<Ni(T)?T.g.statusText:""}catch{Me=""}T.l=Me+" ["+T.Z()+"]",or(T)}}finally{Rn(T)}}}}function Rn(T,L){if(T.g){Sr(T);const H=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,L||se(T,"ready");try{H.onreadystatechange=Q}catch{}}}function Sr(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function Ni(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<Ni(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var L=this.g.responseText;return T&&L.indexOf(T)==0&&(L=L.substring(T.length)),Vt(L)}};function fo(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function vg(T){const L={};T=(T.g&&2<=Ni(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(v(T[Q]))continue;var H=I(T[Q]);const Ee=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Me=L[Ee]||[];L[Ee]=Me,Me.push(H)}S(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function md(T,L,H){return H&&H.internalChannelParams&&H.internalChannelParams[T]||L}function n1(T){this.Aa=0,this.i=[],this.j=new Ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=md("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=md("baseRetryDelayMs",5e3,T),this.cb=md("retryDelaySeedMs",1e4,T),this.Wa=md("forwardChannelMaxRetries",2,T),this.wa=md("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new qo(T&&T.concurrentRequestLimit),this.Da=new YM,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=n1.prototype,e.la=8,e.G=1,e.connect=function(T,L,H,Q){yr(0),this.W=T,this.H=L||{},H&&Q!==void 0&&(this.H.OSID=H,this.H.OAID=Q),this.F=this.X,this.I=BK(this,null,this.W),lC(this)};function r1(T){if(kK(T),T.G==3){var L=T.U++,H=Je(T.I);if(Mt(H,"SID",T.K),Mt(H,"RID",L),Mt(H,"TYPE","terminate"),uE(T,H),L=new Sn(T,T.j,L),L.L=2,L.v=kn(Je(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!H&&a.Image&&(new Image().src=L.v,H=!0),H||(L.g=jK(L.j,null),L.g.ea(L.v)),L.F=Date.now(),Gt(L)}LK(T)}function uC(T){T.g&&(XM(T),T.g.cancel(),T.g=null)}function kK(T){uC(T),T.u&&(a.clearTimeout(T.u),T.u=null),cC(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function lC(T){if(!gs(T.h)&&!T.s){T.s=!0;var L=T.Ga;j||$(),z||(j(),z=!0),V.add(L,T),T.B=0}}function CNe(T,L){return Gu(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=L.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Fs(d(T.Ga,T,L),FK(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Ee=new Sn(this,this.j,T);let Me=this.o;if(this.S&&(Me?(Me=C(Me),D(Me,this.S)):Me=this.S),this.m!==null||this.O||(Ee.H=Me,Me=null),this.P)e:{for(var L=0,H=0;H<this.i.length;H++){t:{var Q=this.i[H];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=H;break e}if(L===4096||H===this.i.length-1){L=H+1;break e}}L=1e3}else L=1e3;L=PK(this,Ee,L),H=Je(this.I),Mt(H,"RID",T),Mt(H,"CVER",22),this.D&&Mt(H,"X-HTTP-Session-Id",this.D),uE(this,H),Me&&(this.O?L="headers="+encodeURIComponent(String(aC(Me)))+"&"+L:this.m&&ne(H,this.m,Me)),K(this.h,Ee),this.Ua&&Mt(H,"TYPE","init"),this.P?(Mt(H,"$req",L),Mt(H,"SID","null"),Ee.T=!0,Ht(Ee,H,null)):Ht(Ee,H,L),this.G=2}}else this.G==3&&(T?RK(this,T):this.i.length==0||gs(this.h)||RK(this))};function RK(T,L){var H;L?H=L.l:H=T.U++;const Q=Je(T.I);Mt(Q,"SID",T.K),Mt(Q,"RID",H),Mt(Q,"AID",T.T),uE(T,Q),T.m&&T.o&&ne(Q,T.m,T.o),H=new Sn(T,T.j,H,T.B+1),T.m===null&&(H.H=T.o),L&&(T.i=L.D.concat(T.i)),L=PK(T,H,1e3),H.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),K(T.h,H),Ht(H,Q,L)}function uE(T,L){T.H&&x(T.H,function(H,Q){Mt(L,Q,H)}),T.l&&he({},function(H,Q){Mt(L,Q,H)})}function PK(T,L,H){H=Math.min(T.i.length,H);var Q=T.l?d(T.l.Na,T.l,T):null;e:{var Ee=T.i;let Me=-1;for(;;){const pt=["count="+H];Me==-1?0<H?(Me=Ee[0].g,pt.push("ofs="+Me)):Me=0:pt.push("ofs="+Me);let Tr=!0;for(let Bs=0;Bs<H;Bs++){let Kn=Ee[Bs].g;const ho=Ee[Bs].map;if(Kn-=Me,0>Kn)Me=Math.max(0,Ee[Bs].g-100),Tr=!1;else try{sC(ho,pt,"req"+Kn+"_")}catch{Q&&Q(ho)}}if(Tr){Q=pt.join("&");break e}}}return T=T.i.splice(0,H),L.D=T,Q}function OK(T){if(!T.g&&!T.u){T.Y=1;var L=T.Fa;j||$(),z||(j(),z=!0),V.add(L,T),T.v=0}}function KM(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Fs(d(T.Fa,T),FK(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,MK(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Fs(d(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yr(10),uC(this),MK(this))};function XM(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function MK(T){T.g=new Sn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var L=Je(T.qa);Mt(L,"RID","rpc"),Mt(L,"SID",T.K),Mt(L,"AID",T.T),Mt(L,"CI",T.F?"0":"1"),!T.F&&T.ja&&Mt(L,"TO",T.ja),Mt(L,"TYPE","xmlhttp"),uE(T,L),T.m&&T.o&&ne(L,T.m,T.o),T.L&&(T.g.I=T.L);var H=T.g;T=T.ia,H.L=1,H.v=kn(Je(L)),H.m=null,H.P=!0,Fn(H,T)}e.Za=function(){this.C!=null&&(this.C=null,uC(this),KM(this),yr(19))};function cC(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function $K(T,L){var H=null;if(T.g==L){cC(T),XM(T),T.g=null;var Q=2}else if(Vc(T.h,L))H=L.D,ae(T.h,L),Q=1;else return;if(T.G!=0){if(L.o)if(Q==1){H=L.m?L.m.length:0,L=Date.now()-L.F;var Ee=T.B;Q=Ho(),se(Q,new uo(Q,H)),lC(T)}else OK(T);else if(Ee=L.s,Ee==3||Ee==0&&0<L.X||!(Q==1&&CNe(T,L)||Q==2&&KM(T)))switch(H&&0<H.length&&(L=T.h,L.i=L.i.concat(H)),Ee){case 1:bg(T,5);break;case 4:bg(T,10);break;case 3:bg(T,6);break;default:bg(T,2)}}}function FK(T,L){let H=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(H*=2),H*L}function bg(T,L){if(T.j.info("Error code "+L),L==2){var H=d(T.fb,T),Q=T.Xa;const Ee=!Q;Q=new Qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ct(Q,"https"),kn(Q),Ee?iC(Q.toString(),H):pd(Q.toString(),H)}else yr(2);T.G=0,T.l&&T.l.sa(L),LK(T),kK(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),yr(2)):(this.j.info("Failed to ping google.com"),yr(1))};function LK(T){if(T.G=0,T.ka=[],T.l){const L=ee(T.h);(L.length!=0||T.i.length!=0)&&(g(T.ka,L),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function BK(T,L,H){var Q=H instanceof Qe?Je(H):new Qe(H);if(Q.g!="")L&&(Q.g=L+"."+Q.g),xt(Q,Q.s);else{var Ee=a.location;Q=Ee.protocol,L=L?L+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;var Me=new Qe(null);Q&&ct(Me,Q),L&&(Me.g=L),Ee&&xt(Me,Ee),H&&(Me.l=H),Q=Me}return H=T.D,L=T.ya,H&&L&&Mt(Q,H,L),Mt(Q,"VER",T.la),uE(T,Q),Q}function jK(T,L,H){if(L&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=T.Ca&&!T.pa?new fe(new mg({eb:H})):new fe(T.pa),L.Ha(T.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function zK(){}e=zK.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function fC(){}fC.prototype.g=function(T,L){return new uu(T,L)};function uu(T,L){J.call(this),this.g=new n1(L),this.l=T,this.h=L&&L.messageUrlParams||null,T=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(T?T["X-WebChannel-Content-Type"]=L.messageContentType:T={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(T?T["X-WebChannel-Client-Profile"]=L.va:T={"X-WebChannel-Client-Profile":L.va}),this.g.S=T,(T=L&&L.Sb)&&!v(T)&&(this.g.m=T),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,T=this.h,T!==null&&L in T&&(T=this.h,L in T&&delete T[L])),this.j=new i1(this)}p(uu,J),uu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},uu.prototype.close=function(){r1(this.g)},uu.prototype.o=function(T){var L=this.g;if(typeof T=="string"){var H={};H.__data__=T,T=H}else this.u&&(H={},H.__data__=Dt(T),T=H);L.i.push(new lo(L.Ya++,T)),L.G==3&&lC(L)},uu.prototype.N=function(){this.g.l=null,delete this.j,r1(this.g),delete this.g,uu.aa.N.call(this)};function UK(T){Xr.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var L=T.__sm__;if(L){e:{for(const H in L){T=H;break e}T=void 0}(this.i=T)&&(T=this.i,L=L!==null&&T in L?L[T]:void 0),this.data=L}else this.data=T}p(UK,Xr);function VK(){er.call(this),this.status=1}p(VK,er);function i1(T){this.g=T}p(i1,zK),i1.prototype.ua=function(){se(this.g,"a")},i1.prototype.ta=function(T){se(this.g,new UK(T))},i1.prototype.sa=function(T){se(this.g,new VK)},i1.prototype.ra=function(){se(this.g,"b")},fC.prototype.createWebChannel=fC.prototype.g,uu.prototype.send=uu.prototype.o,uu.prototype.open=uu.prototype.m,uu.prototype.close=uu.prototype.close,t_e=function(){return new fC},e_e=function(){return Ho()},Zbe=gi,_8={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,LD=at,St.COMPLETE="complete",Jbe=St,lr.EventType=fn,fn.OPEN="a",fn.CLOSE="b",fn.ERROR="c",fn.MESSAGE="d",J.prototype.listen=J.prototype.K,Iw=lr,Qbe=mg,fe.prototype.listenOnce=fe.prototype.L,fe.prototype.getLastError=fe.prototype.Ka,fe.prototype.getLastErrorCode=fe.prototype.Ba,fe.prototype.getStatus=fe.prototype.Z,fe.prototype.getResponseJson=fe.prototype.Oa,fe.prototype.getResponseText=fe.prototype.oa,fe.prototype.send=fe.prototype.ea,fe.prototype.setWithCredentials=fe.prototype.Ha,Xbe=fe}).apply(typeof _A<"u"?_A:typeof self<"u"?self:typeof window<"u"?window:{});const jre="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Aa.UNAUTHENTICATED=new Aa(null),Aa.GOOGLE_CREDENTIALS=new Aa("google-credentials-uid"),Aa.FIRST_PARTY=new Aa("first-party-uid"),Aa.MOCK_USER=new Aa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M_="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new T3("@firebase/firestore");function LE(){return W0.logLevel}function kt(e,...t){if(W0.logLevel<=Ln.DEBUG){const n=t.map(iH);W0.debug(`Firestore (${M_}): ${e}`,...n)}}function Th(e,...t){if(W0.logLevel<=Ln.ERROR){const n=t.map(iH);W0.error(`Firestore (${M_}): ${e}`,...n)}}function LS(e,...t){if(W0.logLevel<=Ln.WARN){const n=t.map(iH);W0.warn(`Firestore (${M_}): ${e}`,...n)}}function iH(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e="Unexpected state"){const t=`FIRESTORE (${M_}) INTERNAL ASSERTION FAILED: `+e;throw Th(t),new Error(t)}function Mr(e,t){e||sn()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends ed{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class m1t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Aa.UNAUTHENTICATED))}shutdown(){}}class g1t{constructor(t){this.t=t,this.currentUser=Aa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new th;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new th,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new th)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mr(typeof r.accessToken=="string"),new p1t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Mr(t===null||typeof t=="string"),new Aa(t)}}class y1t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Aa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class v1t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new y1t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Aa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b1t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _1t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Mr(typeof n.token=="string"),this.R=n.token,new b1t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=E1t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function nr(e,t){return e<t?-1:e>t?1:0}function Tb(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _t(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return as.fromMillis(Date.now())}static fromDate(t){return as.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new as(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?nr(this.nanoseconds,t.nanoseconds):nr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new as(0,0))}static max(){return new dn(new as(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t,n,r){n===void 0?n=0:n>t.length&&sn(),r===void 0?r=t.length-n:r>t.length-n&&sn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return BS.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof BS?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class zr extends BS{construct(t,n,r){return new zr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new zr(n)}static emptyPath(){return new zr([])}}const w1t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ks extends BS{construct(t,n,r){return new Ks(t,n,r)}static isValidIdentifier(t){return w1t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ks.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ks(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(We.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(We.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _t(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _t(We.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ks(n)}static emptyPath(){return new Ks([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.path=t}static fromPath(t){return new Wt(zr.fromString(t))}static fromName(t){return new Wt(zr.fromString(t).popFirst(5))}static empty(){return new Wt(zr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&zr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return zr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Wt(new zr(t.slice()))}}function x1t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new as(n+1,0):new as(n,r));return new xm(i,Wt.empty(),t)}function S1t(e){return new xm(e.readTime,e.key,-1)}class xm{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new xm(dn.min(),Wt.empty(),-1)}static max(){return new xm(dn.max(),Wt.empty(),-1)}}function T1t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Wt.comparator(e.documentKey,t.documentKey),n!==0?n:nr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A1t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(e){if(e.code!==We.FAILED_PRECONDITION||e.message!==C1t)throw e;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new tt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof tt?n:tt.resolve(n)}catch(n){return tt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):tt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):tt.reject(n)}static resolve(t){return new tt((n,r)=>{n(t)})}static reject(t){return new tt((n,r)=>{r(t)})}static waitFor(t){return new tt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=tt.resolve(!1);for(const r of t)n=n.next(i=>i?tt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new tt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new tt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function D1t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function l2(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}sH.oe=-1;function R3(e){return e==null}function yk(e){return e===0&&1/e==-1/0}function I1t(e){return typeof e=="number"&&Number.isInteger(e)&&!yk(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zre(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $y(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function r_e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){this.comparator=t,this.root=n||Ws.EMPTY}insert(t,n){return new mi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ws.BLACK,null,null))}remove(t){return new mi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ws.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new EA(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new EA(this.root,t,this.comparator,!1)}getReverseIterator(){return new EA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new EA(this.root,t,this.comparator,!0)}}class EA{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ws{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Ws.RED,this.left=i??Ws.EMPTY,this.right=s??Ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Ws(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ws.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ws.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const t=this.left.check();if(t!==this.right.check())throw sn();return t+(this.isRed()?0:1)}}Ws.EMPTY=null,Ws.RED=!0,Ws.BLACK=!1;Ws.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Ws(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t){this.comparator=t,this.data=new mi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ure(this.data.getIterator())}getIteratorFrom(t){return new Ure(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof to)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new to(this.comparator);return n.data=t,n}}class Ure{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this.fields=t,t.sort(Ks.comparator)}static empty(){return new xu([])}unionWith(t){let n=new to(Ks.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new xu(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Tb(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new i_e("Invalid base64 string: "+s):s}}(t);return new Bo(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Bo(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return nr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bo.EMPTY_BYTE_STRING=new Bo("");const N1t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sm(e){if(Mr(!!e),typeof e=="string"){let t=0;const n=N1t.exec(e);if(Mr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vi(e.seconds),nanos:Vi(e.nanos)}}function Vi(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function G0(e){return typeof e=="string"?Bo.fromBase64String(e):Bo.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function aH(e){const t=e.mapValue.fields.__previous_value__;return oH(t)?aH(t):t}function jS(e){const t=Sm(e.mapValue.fields.__local_write_time__.timestampValue);return new as(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class zS{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new zS("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof zS&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Y0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oH(e)?4:R1t(e)?9007199254740991:10:sn()}function Mf(e,t){if(e===t)return!0;const n=Y0(e);if(n!==Y0(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jS(e).isEqual(jS(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sm(i.timestampValue),a=Sm(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return G0(i.bytesValue).isEqual(G0(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Vi(i.geoPointValue.latitude)===Vi(s.geoPointValue.latitude)&&Vi(i.geoPointValue.longitude)===Vi(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Vi(i.integerValue)===Vi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Vi(i.doubleValue),a=Vi(s.doubleValue);return o===a?yk(o)===yk(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Tb(e.arrayValue.values||[],t.arrayValue.values||[],Mf);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zre(o)!==zre(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Mf(o[u],a[u])))return!1;return!0}(e,t);default:return sn()}}function US(e,t){return(e.values||[]).find(n=>Mf(n,t))!==void 0}function Cb(e,t){if(e===t)return 0;const n=Y0(e),r=Y0(t);if(n!==r)return nr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Vi(s.integerValue||s.doubleValue),u=Vi(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Vre(e.timestampValue,t.timestampValue);case 4:return Vre(jS(e),jS(t));case 5:return nr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=G0(s),u=G0(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=nr(a[l],u[l]);if(c!==0)return c}return nr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=nr(Vi(s.latitude),Vi(o.latitude));return a!==0?a:nr(Vi(s.longitude),Vi(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Cb(a[l],u[l]);if(c)return c}return nr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===wA.mapValue&&o===wA.mapValue)return 0;if(s===wA.mapValue)return 1;if(o===wA.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=nr(u[f],c[f]);if(d!==0)return d;const h=Cb(a[u[f]],l[c[f]]);if(h!==0)return h}return nr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw sn()}}function Vre(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return nr(e,t);const n=Sm(e),r=Sm(t),i=nr(n.seconds,r.seconds);return i!==0?i:nr(n.nanos,r.nanos)}function Ab(e){return E8(e)}function E8(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Sm(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return G0(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Wt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=E8(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${E8(n.fields[o])}`;return i+"}"}(e.mapValue):sn()}function Hre(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function w8(e){return!!e&&"integerValue"in e}function uH(e){return!!e&&"arrayValue"in e}function qre(e){return!!e&&"nullValue"in e}function Wre(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function BD(e){return!!e&&"mapValue"in e}function Ix(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $y(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ix(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ix(e.arrayValue.values[n]);return t}return Object.assign({},e)}function R1t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(t){this.value=t}static empty(){return new Ma({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!BD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ix(n)}setAll(t){let n=Ks.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ix(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());BD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Mf(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];BD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){$y(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Ma(Ix(this.value))}}function s_e(e){const t=[];return $y(e.fields,(n,r)=>{const i=new Ks([n]);if(BD(r)){const s=s_e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new xu(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ao(t,0,dn.min(),dn.min(),dn.min(),Ma.empty(),0)}static newFoundDocument(t,n,r,i){return new Ao(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new Ao(t,2,n,dn.min(),dn.min(),Ma.empty(),0)}static newUnknownDocument(t,n){return new Ao(t,3,n,dn.min(),dn.min(),Ma.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ma.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ma.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ao&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ao(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vk=class{constructor(t,n){this.position=t,this.inclusive=n}};function Gre(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Wt.comparator(Wt.fromName(o.referenceValue),n.key):r=Cb(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yre(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mf(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n="asc"){this.field=t,this.dir=n}}function P1t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o_e=class{};class Gi extends o_e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new M1t(t,n,r):n==="array-contains"?new L1t(t,r):n==="in"?new B1t(t,r):n==="not-in"?new j1t(t,r):n==="array-contains-any"?new z1t(t,r):new Gi(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new $1t(t,r):new F1t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cb(n,this.value)):n!==null&&Y0(this.value)===Y0(n)&&this.matchesComparison(Cb(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tc extends o_e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Tc(t,n)}matches(t){return a_e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function a_e(e){return e.op==="and"}function u_e(e){return O1t(e)&&a_e(e)}function O1t(e){for(const t of e.filters)if(t instanceof Tc)return!1;return!0}function x8(e){if(e instanceof Gi)return e.field.canonicalString()+e.op.toString()+Ab(e.value);if(u_e(e))return e.filters.map(t=>x8(t)).join(",");{const t=e.filters.map(n=>x8(n)).join(",");return`${e.op}(${t})`}}function l_e(e,t){return e instanceof Gi?function(r,i){return i instanceof Gi&&r.op===i.op&&r.field.isEqual(i.field)&&Mf(r.value,i.value)}(e,t):e instanceof Tc?function(r,i){return i instanceof Tc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&l_e(o,i.filters[a]),!0):!1}(e,t):void sn()}function c_e(e){return e instanceof Gi?function(n){return`${n.field.canonicalString()} ${n.op} ${Ab(n.value)}`}(e):e instanceof Tc?function(n){return n.op.toString()+" {"+n.getFilters().map(c_e).join(" ,")+"}"}(e):"Filter"}class M1t extends Gi{constructor(t,n,r){super(t,n,r),this.key=Wt.fromName(r.referenceValue)}matches(t){const n=Wt.comparator(t.key,this.key);return this.matchesComparison(n)}}class $1t extends Gi{constructor(t,n){super(t,"in",n),this.keys=f_e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class F1t extends Gi{constructor(t,n){super(t,"not-in",n),this.keys=f_e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function f_e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Wt.fromName(r.referenceValue))}class L1t extends Gi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return uH(n)&&US(n.arrayValue,this.value)}}class B1t extends Gi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&US(this.value.arrayValue,n)}}class j1t extends Gi{constructor(t,n){super(t,"not-in",n)}matches(t){if(US(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!US(this.value.arrayValue,n)}}class z1t extends Gi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!uH(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>US(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Kre(e,t=null,n=[],r=[],i=null,s=null,o=null){return new U1t(e,t,n,r,i,s,o)}function lH(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>x8(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),R3(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Ab(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Ab(r)).join(",")),t.ue=n}return t.ue}function cH(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!P1t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!l_e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yre(e.startAt,t.startAt)&&Yre(e.endAt,t.endAt)}function S8(e){return Wt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function V1t(e,t,n,r,i,s,o,a){return new $_(e,t,n,r,i,s,o,a)}function fH(e){return new $_(e)}function Xre(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function d_e(e){return e.collectionGroup!==null}function Nx(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new to(Ks.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new VS(s,r))}),n.has(Ks.keyField().canonicalString())||t.ce.push(new VS(Ks.keyField(),r))}return t.ce}function xf(e){const t=hn(e);return t.le||(t.le=H1t(t,Nx(e))),t.le}function H1t(e,t){if(e.limitType==="F")return Kre(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new VS(i.field,s)});const n=e.endAt?new vk(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new vk(e.startAt.position,e.startAt.inclusive):null;return Kre(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function T8(e,t){const n=e.filters.concat([t]);return new $_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function C8(e,t,n){return new $_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function P3(e,t){return cH(xf(e),xf(t))&&e.limitType===t.limitType}function h_e(e){return`${lH(xf(e))}|lt:${e.limitType}`}function F1(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>c_e(i)).join(", ")}]`),R3(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ab(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ab(i)).join(",")),`Target(${r})`}(xf(e))}; limitType=${e.limitType})`}function O3(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Wt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Nx(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Gre(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Nx(r),i)||r.endAt&&!function(o,a,u){const l=Gre(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Nx(r),i))}(e,t)}function q1t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function p_e(e){return(t,n)=>{let r=!1;for(const i of Nx(e)){const s=W1t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function W1t(e,t,n){const r=e.field.isKeyField()?Wt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Cb(u,l):sn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){$y(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return r_e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1t=new mi(Wt.comparator);function Ch(){return G1t}const m_e=new mi(Wt.comparator);function Nw(...e){let t=m_e;for(const n of e)t=t.insert(n.key,n);return t}function g_e(e){let t=m_e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function a0(){return kx()}function y_e(){return kx()}function kx(){return new F_(e=>e.toString(),(e,t)=>e.isEqual(t))}const Y1t=new mi(Wt.comparator),K1t=new to(Wt.comparator);function Pn(...e){let t=K1t;for(const n of e)t=t.add(n);return t}const X1t=new to(nr);function Q1t(){return X1t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yk(t)?"-0":t}}function b_e(e){return{integerValue:""+e}}function J1t(e,t){return I1t(t)?b_e(t):v_e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this._=void 0}}function Z1t(e,t,n){return e instanceof HS?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&oH(s)&&(s=aH(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof qS?E_e(e,t):e instanceof WS?w_e(e,t):function(i,s){const o=__e(i,s),a=Qre(o)+Qre(i.Pe);return w8(o)&&w8(i.Pe)?b_e(a):v_e(i.serializer,a)}(e,t)}function evt(e,t,n){return e instanceof qS?E_e(e,t):e instanceof WS?w_e(e,t):n}function __e(e,t){return e instanceof bk?function(r){return w8(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class HS extends M3{}class qS extends M3{constructor(t){super(),this.elements=t}}function E_e(e,t){const n=x_e(t);for(const r of e.elements)n.some(i=>Mf(i,r))||n.push(r);return{arrayValue:{values:n}}}class WS extends M3{constructor(t){super(),this.elements=t}}function w_e(e,t){let n=x_e(t);for(const r of e.elements)n=n.filter(i=>!Mf(i,r));return{arrayValue:{values:n}}}class bk extends M3{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Qre(e){return Vi(e.integerValue||e.doubleValue)}function x_e(e){return uH(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tvt{constructor(t,n){this.field=t,this.transform=n}}function nvt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof qS&&i instanceof qS||r instanceof WS&&i instanceof WS?Tb(r.elements,i.elements,Mf):r instanceof bk&&i instanceof bk?Mf(r.Pe,i.Pe):r instanceof HS&&i instanceof HS}(e.transform,t.transform)}class rvt{constructor(t,n){this.version=t,this.transformResults=n}}class Ya{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ya}static exists(t){return new Ya(void 0,t)}static updateTime(t){return new Ya(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class $3{}function S_e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new F3(e.key,Ya.none()):new c2(e.key,e.data,Ya.none());{const n=e.data,r=Ma.empty();let i=new to(Ks.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new eg(e.key,r,new xu(i.toArray()),Ya.none())}}function ivt(e,t,n){e instanceof c2?function(i,s,o){const a=i.value.clone(),u=Zre(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof eg?function(i,s,o){if(!jD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Zre(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(T_e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Rx(e,t,n,r){return e instanceof c2?function(s,o,a,u){if(!jD(s.precondition,o))return a;const l=s.value.clone(),c=eie(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof eg?function(s,o,a,u){if(!jD(s.precondition,o))return a;const l=eie(s.fieldTransforms,u,o),c=o.data;return c.setAll(T_e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return jD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function svt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=__e(r.transform,i||null);s!=null&&(n===null&&(n=Ma.empty()),n.set(r.field,s))}return n||null}function Jre(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tb(r,i,(s,o)=>nvt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class c2 extends $3{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eg extends $3{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function T_e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Zre(e,t,n){const r=new Map;Mr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,evt(o,a,n[i]))}return r}function eie(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Z1t(s,o,t))}return r}class F3 extends $3{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ovt extends $3{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class avt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&ivt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Rx(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Rx(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=y_e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=S_e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Pn())}isEqual(t){return this.batchId===t.batchId&&Tb(this.mutations,t.mutations,(n,r)=>Jre(n,r))&&Tb(this.baseMutations,t.baseMutations,(n,r)=>Jre(n,r))}}class dH{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Mr(t.mutations.length===r.length);let i=function(){return Y1t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new dH(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uvt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lvt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji,Un;function cvt(e){switch(e){default:return sn();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function C_e(e){if(e===void 0)return Th("GRPC error has no .code"),We.UNKNOWN;switch(e){case ji.OK:return We.OK;case ji.CANCELLED:return We.CANCELLED;case ji.UNKNOWN:return We.UNKNOWN;case ji.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case ji.INTERNAL:return We.INTERNAL;case ji.UNAVAILABLE:return We.UNAVAILABLE;case ji.UNAUTHENTICATED:return We.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case ji.NOT_FOUND:return We.NOT_FOUND;case ji.ALREADY_EXISTS:return We.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return We.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case ji.ABORTED:return We.ABORTED;case ji.OUT_OF_RANGE:return We.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return We.UNIMPLEMENTED;case ji.DATA_LOSS:return We.DATA_LOSS;default:return sn()}}(Un=ji||(ji={}))[Un.OK=0]="OK",Un[Un.CANCELLED=1]="CANCELLED",Un[Un.UNKNOWN=2]="UNKNOWN",Un[Un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Un[Un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Un[Un.NOT_FOUND=5]="NOT_FOUND",Un[Un.ALREADY_EXISTS=6]="ALREADY_EXISTS",Un[Un.PERMISSION_DENIED=7]="PERMISSION_DENIED",Un[Un.UNAUTHENTICATED=16]="UNAUTHENTICATED",Un[Un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Un[Un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Un[Un.ABORTED=10]="ABORTED",Un[Un.OUT_OF_RANGE=11]="OUT_OF_RANGE",Un[Un.UNIMPLEMENTED=12]="UNIMPLEMENTED",Un[Un.INTERNAL=13]="INTERNAL",Un[Un.UNAVAILABLE=14]="UNAVAILABLE",Un[Un.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fvt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dvt=new v0([4294967295,4294967295],0);function tie(e){const t=fvt().encode(e),n=new Kbe;return n.update(t),new Uint8Array(n.digest())}function nie(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new v0([n,r],0),new v0([i,s],0)]}class hH{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new kw(`Invalid padding: ${n}`);if(r<0)throw new kw(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new kw(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new kw(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=v0.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(v0.fromNumber(r)));return i.compare(dvt)===1&&(i=new v0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=tie(t),[r,i]=nie(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new hH(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=tie(t),[r,i]=nie(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class kw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,f2.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new L3(dn.min(),i,new mi(nr),Ch(),Pn())}}class f2{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new f2(r,n,Pn(),Pn(),Pn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class A_e{constructor(t,n){this.targetId=t,this.me=n}}class D_e{constructor(t,n,r=Bo.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class rie{constructor(){this.fe=0,this.ge=sie(),this.pe=Bo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Pn(),n=Pn(),r=Pn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:sn()}}),new f2(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=sie()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Mr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hvt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Ch(),this.qe=iie(),this.Qe=new mi(nr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:sn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(S8(s))if(r===0){const o=new Wt(s.path);this.Ue(n,o,Ao.newNoDocument(o,dn.min()))}else Mr(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=G0(r).toUint8Array()}catch(u){if(u instanceof i_e)return LS("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new hH(o,i,s)}catch(u){return LS(u instanceof kw?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&S8(a.target)){const u=new Wt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ao.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Pn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new L3(t,n,this.Qe,this.ke,r);return this.ke=Ch(),this.qe=iie(),this.Qe=new mi(nr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new rie,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new to(nr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new rie),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function iie(){return new mi(Wt.comparator)}function sie(){return new mi(Wt.comparator)}const pvt={asc:"ASCENDING",desc:"DESCENDING"},mvt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gvt={and:"AND",or:"OR"};class yvt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function A8(e,t){return e.useProto3Json||R3(t)?t:{value:t}}function _k(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function I_e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vvt(e,t){return _k(e,t.toTimestamp())}function Sf(e){return Mr(!!e),dn.fromTimestamp(function(n){const r=Sm(n);return new as(r.seconds,r.nanos)}(e))}function pH(e,t){return D8(e,t).canonicalString()}function D8(e,t){const n=function(i){return new zr(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function N_e(e){const t=zr.fromString(e);return Mr(M_e(t)),t}function I8(e,t){return pH(e.databaseId,t.path)}function l6(e,t){const n=N_e(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wt(R_e(n))}function k_e(e,t){return pH(e.databaseId,t)}function bvt(e){const t=N_e(e);return t.length===4?zr.emptyPath():R_e(t)}function N8(e){return new zr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function R_e(e){return Mr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function oie(e,t,n){return{name:I8(e,t),fields:n.value.mapValue.fields}}function _vt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:sn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Mr(c===void 0||typeof c=="string"),Bo.fromBase64String(c||"")):(Mr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Bo.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?We.UNKNOWN:C_e(l.code);return new _t(c,l.message||"")}(o);n=new D_e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=l6(e,r.document.name),s=Sf(r.document.updateTime),o=r.document.createTime?Sf(r.document.createTime):dn.min(),a=new Ma({mapValue:{fields:r.document.fields}}),u=Ao.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new zD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=l6(e,r.document),s=r.readTime?Sf(r.readTime):dn.min(),o=Ao.newNoDocument(i,s),a=r.removedTargetIds||[];n=new zD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=l6(e,r.document),s=r.removedTargetIds||[];n=new zD([],s,i,null)}else{if(!("filter"in t))return sn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new lvt(i,s),a=r.targetId;n=new A_e(a,o)}}return n}function Evt(e,t){let n;if(t instanceof c2)n={update:oie(e,t.key,t.value)};else if(t instanceof F3)n={delete:I8(e,t.key)};else if(t instanceof eg)n={update:oie(e,t.key,t.data),updateMask:Nvt(t.fieldMask)};else{if(!(t instanceof ovt))return sn();n={verify:I8(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof HS)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qS)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof WS)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bk)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw sn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vvt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:sn()}(e,t.precondition)),n}function wvt(e,t){return e&&e.length>0?(Mr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Sf(i.updateTime):Sf(s);return o.isEqual(dn.min())&&(o=Sf(s)),new rvt(o,i.transformResults||[])}(n,t))):[]}function xvt(e,t){return{documents:[k_e(e,t.path)]}}function Svt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=k_e(e,i);const s=function(l){if(l.length!==0)return O_e(Tc.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:L1(d.field),direction:Avt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=A8(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function Tvt(e){let t=bvt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=P_e(f);return d instanceof Tc&&u_e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new VS(B1(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,R3(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new vk(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new vk(h,d)}(n.endAt)),V1t(t,i,o,s,a,"F",u,l)}function Cvt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function P_e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=B1(n.unaryFilter.field);return Gi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=B1(n.unaryFilter.field);return Gi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=B1(n.unaryFilter.field);return Gi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=B1(n.unaryFilter.field);return Gi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(e):e.fieldFilter!==void 0?function(n){return Gi.create(B1(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Tc.create(n.compositeFilter.filters.map(r=>P_e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return sn()}}(n.compositeFilter.op))}(e):sn()}function Avt(e){return pvt[e]}function Dvt(e){return mvt[e]}function Ivt(e){return gvt[e]}function L1(e){return{fieldPath:e.canonicalString()}}function B1(e){return Ks.fromServerFormat(e.fieldPath)}function O_e(e){return e instanceof Gi?function(n){if(n.op==="=="){if(Wre(n.value))return{unaryFilter:{field:L1(n.field),op:"IS_NAN"}};if(qre(n.value))return{unaryFilter:{field:L1(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wre(n.value))return{unaryFilter:{field:L1(n.field),op:"IS_NOT_NAN"}};if(qre(n.value))return{unaryFilter:{field:L1(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:L1(n.field),op:Dvt(n.op),value:n.value}}}(e):e instanceof Tc?function(n){const r=n.getFilters().map(i=>O_e(i));return r.length===1?r[0]:{compositeFilter:{op:Ivt(n.op),filters:r}}}(e):sn()}function Nvt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function M_e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Bo.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Rp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Rp(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Rp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Rp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kvt{constructor(t){this.ct=t}}function Rvt(e){const t=Tvt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?C8(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pvt{constructor(){this._n=new Ovt}addToCollectionParentIndex(t,n){return this._n.add(n),tt.resolve()}getCollectionParents(t,n){return tt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return tt.resolve()}deleteFieldIndex(t,n){return tt.resolve()}deleteAllFieldIndexes(t){return tt.resolve()}createTargetIndexes(t,n){return tt.resolve()}getDocumentsMatchingTarget(t,n){return tt.resolve(null)}getIndexType(t,n){return tt.resolve(0)}getFieldIndexes(t,n){return tt.resolve([])}getNextCollectionGroupToUpdate(t){return tt.resolve(null)}getMinOffset(t,n){return tt.resolve(xm.min())}getMinOffsetFromCollectionGroup(t,n){return tt.resolve(xm.min())}updateCollectionGroup(t,n,r){return tt.resolve()}updateIndexEntries(t,n){return tt.resolve()}}class Ovt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new to(zr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new to(zr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Db(0)}static Ln(){return new Db(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mvt{constructor(){this.changes=new F_(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ao.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?tt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $vt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fvt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Rx(r.mutation,i,xu.empty(),as.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Pn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Pn()){const i=a0();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=Nw();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=a0();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Pn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Ch();const o=kx(),a=function(){return kx()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof eg)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),Rx(c.mutation,l,c.mutation.getFieldMask(),as.now())):o.set(l.key,xu.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new $vt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=kx();let i=new mi((o,a)=>o-a),s=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||xu.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Pn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=y_e();c.forEach(d=>{if(!s.has(d)){const h=S_e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return tt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):d_e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):tt.resolve(a0());let a=-1,u=s;return o.next(l=>tt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?tt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Pn())).next(c=>({batchId:a,changes:g_e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Wt(n)).next(r=>{let i=Nw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=Nw();return this.indexManager.getCollectionParents(t,s).next(a=>tt.forEach(a,u=>{const l=function(f,d){return new $_(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Ao.newInvalidDocument(c)))});let a=Nw();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&Rx(c.mutation,l,xu.empty(),as.now()),O3(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lvt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return tt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Sf(i.createTime)}}(n)),tt.resolve()}getNamedQuery(t,n){return tt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Rvt(i.bundledQuery),readTime:Sf(i.readTime)}}(n)),tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bvt{constructor(){this.overlays=new mi(Wt.comparator),this.hr=new Map}getOverlay(t,n){return tt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=a0();return tt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),tt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),tt.resolve()}getOverlaysForCollection(t,n,r){const i=a0(),s=n.length+1,o=new Wt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return tt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new mi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=a0(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=a0(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return tt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uvt(n,r));let s=this.hr.get(n);s===void 0&&(s=Pn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(){this.Pr=new to(bs.Ir),this.Tr=new to(bs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new bs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new bs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Wt(new zr([])),r=new bs(n,t),i=new bs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Wt(new zr([])),r=new bs(n,t),i=new bs(n,t+1);let s=Pn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new bs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class bs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Wt.comparator(t.key,n.key)||nr(t.pr,n.pr)}static Er(t,n){return nr(t.pr,n.pr)||Wt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jvt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new to(bs.Ir)}checkEmpty(t){return tt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new avt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new bs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return tt.resolve(o)}lookupMutationBatch(t,n){return tt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return tt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new bs(n,0),i=new bs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),tt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new to(nr);return n.forEach(i=>{const s=new bs(i,0),o=new bs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),tt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Wt.isDocumentKey(s)||(s=s.child(""));const o=new bs(new Wt(s),0);let a=new to(nr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),tt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Mr(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return tt.forEach(n.mutations,i=>{const s=new bs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new bs(n,0),i=this.wr.firstAfterOrEqual(r);return tt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,tt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zvt{constructor(t){this.vr=t,this.docs=function(){return new mi(Wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return tt.resolve(r?r.document.mutableCopy():Ao.newInvalidDocument(n))}getEntries(t,n){let r=Ch();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ao.newInvalidDocument(i))}),tt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Ch();const o=n.path,a=new Wt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||T1t(S1t(c),r)<=0||(i.has(c.key)||O3(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return tt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){sn()}Fr(t,n){return tt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Uvt(this)}getSize(t){return tt.resolve(this.size)}}class Uvt extends Mvt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),tt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vvt{constructor(t){this.persistence=t,this.Mr=new F_(n=>lH(n),cH),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new mH,this.targetCount=0,this.Lr=Db.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),tt.resolve()}getLastRemoteSnapshotVersion(t){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return tt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),tt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Db(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,tt.resolve()}updateTargetData(t,n){return this.qn(n),tt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,tt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),tt.waitFor(s).next(()=>i)}getTargetCount(t){return tt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return tt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),tt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),tt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),tt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return tt.resolve(r)}containsKey(t,n){return tt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hvt{constructor(t,n){this.Br={},this.overlays={},this.kr=new sH(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Vvt(this),this.indexManager=new Pvt,this.remoteDocumentCache=function(i){return new zvt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new kvt(n),this.$r=new Lvt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Bvt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new jvt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new qvt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return tt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class qvt extends A1t{constructor(t){super(),this.currentSequenceNumber=t}}class gH{constructor(t){this.persistence=t,this.zr=new mH,this.jr=null}static Hr(t){return new gH(t)}get Jr(){if(this.jr)return this.jr;throw sn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),tt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),tt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),tt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.Jr,r=>{const i=Wt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return tt.or([()=>tt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Pn(),i=Pn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yH(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wvt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gvt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Cpt()?8:D1t(so())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Wvt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(LE()<=Ln.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",F1(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),tt.resolve()):(LE()<=Ln.DEBUG&&kt("QueryEngine","Query:",F1(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(LE()<=Ln.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",F1(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xf(n))):tt.resolve())}ji(t,n){if(Xre(n))return tt.resolve(null);let r=xf(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=C8(n,null,"F"),r=xf(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Pn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,C8(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Xre(n)||i.isEqual(dn.min())?tt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?tt.resolve(null):(LE()<=Ln.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),F1(n)),this.es(t,o,n,x1t(i,-1)).next(a=>a))})}Zi(t,n){let r=new to(p_e(t));return n.forEach((i,s)=>{O3(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return LE()<=Ln.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",F1(n)),this.zi.getDocumentsMatchingQuery(t,n,xm.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yvt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new mi(nr),this.rs=new F_(s=>lH(s),cH),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fvt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function Kvt(e,t,n,r){return new Yvt(e,t,n,r)}async function $_e(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Pn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function Xvt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=tt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Mr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Pn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function F_e(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function Qvt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Bo.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Ch(),l=Pn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Jvt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return tt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function Jvt(e,t,n){let r=Pn(),i=Pn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Ch();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):kt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function Zvt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function ebt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,tt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Rp(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function k8(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!l2(o))throw o;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function aie(e,t,n){const r=hn(e);let i=dn.min(),s=Pn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?tt.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,xf(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:Pn())).next(a=>(tbt(r,q1t(t),a),{documents:a,hs:s})))}function tbt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class uie{constructor(){this.activeTargetIds=Q1t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nbt{constructor(){this.no=new uie,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new uie,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rbt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lie{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xA=null;function c6(){return xA===null?xA=function(){return 268435456+Math.round(2147483648*Math.random())}():xA++,"0x"+xA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ibt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sbt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="WebChannelConnection";class obt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=c6(),u=this.vo(n,r.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(kt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw LS("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+M_}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=ibt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=c6();return new Promise((o,a)=>{const u=new Xbe;u.setWithCredentials(!0),u.listenOnce(Jbe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case LD.NO_ERROR:const c=u.getResponseJson();kt(_o,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case LD.TIMEOUT:kt(_o,`RPC '${t}' ${s} timed out`),a(new _t(We.DEADLINE_EXCEEDED,"Request time out"));break;case LD.HTTP_ERROR:const f=u.getStatus();if(kt(_o,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(y)>=0?y:We.UNKNOWN}(h.status);a(new _t(p,h.message))}else a(new _t(We.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _t(We.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{kt(_o,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);kt(_o,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=c6(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=t_e(),a=e_e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Qbe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");kt(_o,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new sbt({lo:g=>{h?kt(_o,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(kt(_o,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),kt(_o,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(E){setTimeout(()=>{throw E},0)}})};return m(f,Iw.EventType.OPEN,()=>{h||(kt(_o,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,Iw.EventType.CLOSE,()=>{h||(h=!0,kt(_o,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,Iw.EventType.ERROR,g=>{h||(h=!0,LS(_o,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new _t(We.UNAVAILABLE,"The operation could not be completed")))}),m(f,Iw.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Mr(!!v);const b=v,E=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(E){kt(_o,`RPC '${t}' stream ${i} received error:`,E);const _=E.status;let x=function(A){const D=ji[A];if(D!==void 0)return C_e(D)}(_),S=E.message;x===void 0&&(x=We.INTERNAL,S="Unknown error status: "+_+" with message "+E.message),h=!0,p.po(new _t(x,S)),f.close()}else kt(_o,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,Zbe.STAT_EVENT,g=>{g.stat===_8.PROXY?kt(_o,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===_8.NOPROXY&&kt(_o,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function f6(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(e){return new yvt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_e{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new L_e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===We.RESOURCE_EXHAUSTED?(Th(n.toString()),Th("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new _t(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return kt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class abt extends B_e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=_vt(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?Sf(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=N8(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=S8(u)?{documents:xvt(s,u)}:{query:Svt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=I_e(s,o.resumeToken);const l=A8(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=_k(s,o.snapshotVersion.toTimestamp());const l=A8(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Cvt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=N8(this.serializer),n.removeTarget=t,this.i_(n)}}class ubt extends B_e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Mr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=wvt(t.writeResults,t.commitTime),r=Sf(t.commitTime);return this.listener.A_(r,n)}return Mr(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=N8(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Evt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lbt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _t(We.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,D8(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(We.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,D8(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(We.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class cbt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Th(n),this.y_=!1):kt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fbt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Fy(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await h2(l),l.N_.set("Unknown"),l.M_.delete(4),await d2(l)}(this))})}),this.N_=new cbt(r,i)}}async function d2(e){if(Fy(e))for(const t of e.x_)await t(!0)}async function h2(e){for(const t of e.x_)await t(!1)}function j_e(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),EH(n)?_H(n):L_(n).Xo()&&bH(n,t))}function vH(e,t){const n=hn(e),r=L_(n);n.F_.delete(t),r.Xo()&&z_e(n,t),n.F_.size===0&&(r.Xo()?r.n_():Fy(n)&&n.N_.set("Unknown"))}function bH(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}L_(e).P_(t)}function z_e(e,t){e.L_.xe(t),L_(e).I_(t)}function _H(e){e.L_=new hvt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),L_(e).start(),e.N_.w_()}function EH(e){return Fy(e)&&!L_(e).Zo()&&e.F_.size>0}function Fy(e){return hn(e).M_.size===0}function U_e(e){e.L_=void 0}async function dbt(e){e.N_.set("Online")}async function hbt(e){e.F_.forEach((t,n)=>{bH(e,t)})}async function pbt(e,t){U_e(e),EH(e)?(e.N_.D_(t),_H(e)):e.N_.set("Unknown")}async function mbt(e,t,n){if(e.N_.set("Online"),t instanceof D_e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ek(e,r)}else if(t instanceof zD?e.L_.Ke(t):t instanceof A_e?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await F_e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Bo.EMPTY_BYTE_STRING,c.snapshotVersion)),z_e(s,u);const f=new Rp(c.target,u,l,c.sequenceNumber);bH(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){kt("RemoteStore","Failed to raise snapshot:",r),await Ek(e,r)}}async function Ek(e,t,n){if(!l2(t))throw t;e.M_.add(1),await h2(e),e.N_.set("Offline"),n||(n=()=>F_e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await d2(e)})}function V_e(e,t){return t().catch(n=>Ek(e,n,t))}async function j3(e){const t=hn(e),n=Tm(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;gbt(t);)try{const i=await Zvt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,ybt(t,i)}catch(i){await Ek(t,i)}H_e(t)&&q_e(t)}function gbt(e){return Fy(e)&&e.v_.length<10}function ybt(e,t){e.v_.push(t);const n=Tm(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function H_e(e){return Fy(e)&&!Tm(e).Zo()&&e.v_.length>0}function q_e(e){Tm(e).start()}async function vbt(e){Tm(e).V_()}async function bbt(e){const t=Tm(e);for(const n of e.v_)t.d_(n.mutations)}async function _bt(e,t,n){const r=e.v_.shift(),i=dH.from(r,t,n);await V_e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await j3(e)}async function Ebt(e,t){t&&Tm(e).E_&&await async function(r,i){if(function(o){return cvt(o)&&o!==We.ABORTED}(i.code)){const s=r.v_.shift();Tm(r).t_(),await V_e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await j3(r)}}(e,t),H_e(e)&&q_e(e)}async function cie(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=Fy(n);n.M_.add(3),await h2(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await d2(n)}async function wbt(e,t){const n=hn(e);t?(n.M_.delete(2),await d2(n)):t||(n.M_.add(2),await h2(n),n.N_.set("Unknown"))}function L_(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new abt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:dbt.bind(null,e),To:hbt.bind(null,e),Ao:pbt.bind(null,e),h_:mbt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),EH(e)?_H(e):e.N_.set("Unknown")):(await e.B_.stop(),U_e(e))})),e.B_}function Tm(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new ubt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:vbt.bind(null,e),Ao:Ebt.bind(null,e),R_:bbt.bind(null,e),A_:_bt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await j3(e)):(await e.k_.stop(),e.v_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new th,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new wH(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(We.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xH(e,t){if(Th("AsyncQueue",`${t}: ${e}`),l2(e))return new _t(We.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Wt.comparator(n.key,r.key):(n,r)=>Wt.comparator(n.key,r.key),this.keyedMap=Nw(),this.sortedSet=new mi(this.comparator)}static emptySet(t){return new $v(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof $v)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new $v;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fie{constructor(){this.q_=new mi(Wt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):sn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ib{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ib(t,n,$v.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&P3(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xbt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Sbt{constructor(){this.queries=new F_(t=>h_e(t),P3),this.onlineState="Unknown",this.z_=new Set}}async function W_e(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new xbt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=xH(o,`Initialization of query '${F1(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&SH(n)}async function G_e(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Tbt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&SH(n)}function Cbt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function SH(e){e.z_.forEach(t=>{t.next()})}var R8,die;(die=R8||(R8={})).J_="default",die.Cache="cache";class Y_e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Ib(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Ib.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==R8.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_e{constructor(t){this.key=t}}class X_e{constructor(t){this.key=t}}class Abt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Pn(),this.mutatedKeys=Pn(),this.Ia=p_e(t),this.Ta=new $v(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new fie,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=O3(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new Ib(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new fie,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Pn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new X_e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new K_e(r))}),n}pa(t){this.la=t.hs,this.Pa=Pn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Ib.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Dbt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Ibt{constructor(t){this.key=t,this.wa=!1}}class Nbt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new F_(a=>h_e(a),P3),this.Da=new Map,this.Ca=new Set,this.va=new mi(Wt.comparator),this.Fa=new Map,this.Ma=new mH,this.xa={},this.Oa=new Map,this.Na=Db.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function kbt(e,t,n=!0){const r=nEe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Q_e(r,t,n,!0),i}async function Rbt(e,t){const n=nEe(e);await Q_e(n,t,!0,!1)}async function Q_e(e,t,n,r){const i=await ebt(e.localStore,xf(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Pbt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&j_e(e.remoteStore,i),a}async function Pbt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await aie(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const E=v&&v.targetChanges.get(g.targetId),_=v&&v.targetMismatches.get(g.targetId)!=null,x=g.view.applyChanges(b,m.isPrimaryClient,E,_);return pie(m,g.targetId,x.fa),x.snapshot}(e,f,d,h);const s=await aie(e.localStore,t,!0),o=new Abt(t,s.hs),a=o.da(s.documents),u=f2.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);pie(e,n,l.fa);const c=new Dbt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function Obt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!P3(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await k8(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vH(r.remoteStore,i.targetId),P8(r,i.targetId)}).catch(u2)):(P8(r,i.targetId),await k8(r.localStore,i.targetId,!0))}async function Mbt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vH(n.remoteStore,r.targetId))}async function $bt(e,t,n){const r=Vbt(e);try{const i=await function(o,a){const u=hn(o),l=as.now(),c=a.reduce((h,p)=>h.add(p.key),Pn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Ch(),m=Pn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=svt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new eg(v.key,b,s_e(b.value.mapValue),Ya.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:g_e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new mi(nr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await p2(r,i.changes),await j3(r.remoteStore)}catch(i){const s=xH(i,"Failed to persist write");n.reject(s)}}async function J_e(e,t){const n=hn(e);try{const r=await Qvt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Mr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Mr(o.wa):i.removedDocuments.size>0&&(Mr(o.wa),o.wa=!1))}),await p2(n,r,t)}catch(r){await u2(r)}}function hie(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&SH(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Fbt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new mi(Wt.comparator);o=o.insert(s,Ao.newNoDocument(s,dn.min()));const a=Pn().add(s),u=new L3(dn.min(),new Map,new mi(nr),o,a);await J_e(r,u),r.va=r.va.remove(s),r.Fa.delete(t),TH(r)}else await k8(r.localStore,t,!1).then(()=>P8(r,t,n)).catch(u2)}async function Lbt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await Xvt(n.localStore,t);eEe(n,r,null),Z_e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await p2(n,i)}catch(i){await u2(i)}}async function Bbt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Mr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);eEe(r,t,n),Z_e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await p2(r,i)}catch(i){await u2(i)}}function Z_e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function eEe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function P8(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||tEe(e,r)})}function tEe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(vH(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),TH(e))}function pie(e,t,n){for(const r of n)r instanceof K_e?(e.Ma.addReference(r.key,t),jbt(e,r)):r instanceof X_e?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||tEe(e,r.key)):sn()}function jbt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),TH(e))}function TH(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Wt(zr.fromString(t)),r=e.Na.next();e.Fa.set(r,new Ibt(n)),e.va=e.va.insert(n,r),j_e(e.remoteStore,new Rp(xf(fH(n.path)),r,"TargetPurposeLimboResolution",sH.oe))}}async function p2(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=yH.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>tt.forEach(l,d=>tt.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>tt.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!l2(f))throw f;kt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function zbt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const r=await $_e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _t(We.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await p2(n,r.us)}}function Ubt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return Pn().add(r.key);{let i=Pn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function nEe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=J_e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ubt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Fbt.bind(null,t),t.Sa.h_=Tbt.bind(null,t.eventManager),t.Sa.ka=Cbt.bind(null,t.eventManager),t}function Vbt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lbt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bbt.bind(null,t),t}class mie{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=B3(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return Kvt(this.persistence,new Gvt,t.initialUser,this.serializer)}createPersistence(t){return new Hvt(gH.Hr,this.serializer)}createSharedClientState(t){return new nbt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Hbt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hie(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zbt.bind(null,this.syncEngine),await wbt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Sbt}()}createDatastore(t){const n=B3(t.databaseInfo.databaseId),r=function(s){return new obt(s)}(t.databaseInfo);return function(s,o,a,u){return new lbt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new fbt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>hie(this.syncEngine,n,0),function(){return lie.D()?new lie:new rbt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Nbt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);kt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await h2(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rEe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Th("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qbt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Aa.UNAUTHENTICATED,this.clientId=n_e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{kt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(kt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new th;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=xH(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function d6(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $_e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gie(e,t){e.asyncQueue.verifyOperationInProgress();const n=await iEe(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>cie(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>cie(t.remoteStore,i)),e._onlineComponents=t}function Wbt(e){return e.name==="FirebaseError"?e.code===We.FAILED_PRECONDITION||e.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function iEe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await d6(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Wbt(n))throw n;LS("Error using user provided cache. Falling back to memory cache: "+n),await d6(e,new mie)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await d6(e,new mie);return e._offlineComponents}async function CH(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await gie(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await gie(e,new Hbt))),e._onlineComponents}function Gbt(e){return iEe(e).then(t=>t.persistence)}function Ybt(e){return CH(e).then(t=>t.remoteStore)}function Kbt(e){return CH(e).then(t=>t.syncEngine)}async function sEe(e){const t=await CH(e),n=t.eventManager;return n.onListen=kbt.bind(null,t.syncEngine),n.onUnlisten=Obt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Rbt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Mbt.bind(null,t.syncEngine),n}function Xbt(e){return e.asyncQueue.enqueue(async()=>{const t=await Gbt(e),n=await Ybt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),d2(s)}(n)})}function Qbt(e,t,n={}){const r=new th;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new rEe({next:d=>{o.enqueueAndForget(()=>G_e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new _t(We.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new _t(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Y_e(fH(a.path),c,{includeMetadataChanges:!0,ra:!0});return W_e(s,f)}(await sEe(e),e.asyncQueue,t,n,r)),r.promise}function Jbt(e,t,n={}){const r=new th;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new rEe({next:d=>{o.enqueueAndForget(()=>G_e(s,f)),d.fromCache&&u.source==="server"?l.reject(new _t(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Y_e(a,c,{includeMetadataChanges:!0,ra:!0});return W_e(s,f)}(await sEe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oEe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yie=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aEe(e,t,n){if(!n)throw new _t(We.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Zbt(e,t,n,r){if(t===!0&&r===!0)throw new _t(We.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function vie(e){if(!Wt.isDocumentKey(e))throw new _t(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function bie(e){if(Wt.isDocumentKey(e))throw new _t(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function z3(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":sn()}function Cc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=z3(e);throw new _t(We.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Zbt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oEe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _t(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _t(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _t(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class AH{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _ie({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new _t(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _ie(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new m1t;switch(r.type){case"firstParty":return new v1t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yie.get(n);r&&(kt("ComponentProvider","Removing Datastore"),yie.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ly(this.firestore,t,this._query)}}class ua{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ua(this.firestore,t,this._key)}}class nm extends Ly{constructor(t,n,r){super(t,n,fH(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ua(this.firestore,null,new Wt(t))}withConverter(t){return new nm(this.firestore,t,this._path)}}function Ul(e,t,...n){if(e=$r(e),aEe("collection","path",t),e instanceof AH){const r=zr.fromString(t,...n);return bie(r),new nm(e,null,r)}{if(!(e instanceof ua||e instanceof nm))throw new _t(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(zr.fromString(t,...n));return bie(r),new nm(e.firestore,null,r)}}function Ji(e,t,...n){if(e=$r(e),arguments.length===1&&(t=n_e.newId()),aEe("doc","path",t),e instanceof AH){const r=zr.fromString(t,...n);return vie(r),new ua(e,null,new Wt(r))}{if(!(e instanceof ua||e instanceof nm))throw new _t(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(zr.fromString(t,...n));return vie(r),new ua(e.firestore,e instanceof nm?e.converter:null,new Wt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new L_e(this,"async_queue_retry"),this.hu=()=>{const n=f6();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=f6();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=f6();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new th;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!l2(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Th("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=wH.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&sn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class tg extends AH{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new e_t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uEe(this),this._firestoreClient.terminate()}}function t_t(e,t,n){n||(n="(default)");const r=P_(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(MS(s,t))return i;throw new _t(We.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(We.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function m2(e){return e._firestoreClient||uEe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function uEe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new k1t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,oEe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new qbt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function n_t(e){return Xbt(m2(e=Cc(e,tg)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Nb(Bo.fromBase64String(t))}catch(n){throw new _t(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Nb(Bo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ks(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DH=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return nr(this._lat,t._lat)||nr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_t=/^__.*__$/;class i_t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new eg(t,this.data,this.fieldMask,n,this.fieldTransforms):new c2(t,this.data,n,this.fieldTransforms)}}class lEe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new eg(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function cEe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class IH{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new IH(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return wk(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(cEe(this.fu)&&r_t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class s_t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||B3(t)}Fu(t,n,r,i=!1){return new IH({fu:t,methodName:n,vu:r,path:Ks.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V3(e){const t=e._freezeSettings(),n=B3(e._databaseId);return new s_t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fEe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);kH("Data must be an object, but it was:",o,r);const a=pEe(r,o);let u,l;if(s.merge)u=new xu(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=O8(t,f,n);if(!o.contains(d))throw new _t(We.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);gEe(c,d)||c.push(d)}u=new xu(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new i_t(new Ma(a),u,l)}class H3 extends U3{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof H3}}class NH extends U3{_toFieldTransform(t){return new tvt(t.path,new HS)}isEqual(t){return t instanceof NH}}function dEe(e,t,n,r){const i=e.Fu(1,t,n);kH("Data must be an object, but it was:",i,r);const s=[],o=Ma.empty();$y(r,(u,l)=>{const c=RH(t,u,n);l=$r(l);const f=i.Su(c);if(l instanceof H3)s.push(c);else{const d=y2(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new xu(s);return new lEe(o,a,i.fieldTransforms)}function hEe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[O8(t,r,n)],u=[i];if(s.length%2!=0)throw new _t(We.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(O8(t,s[d])),u.push(s[d+1]);const l=[],c=Ma.empty();for(let d=a.length-1;d>=0;--d)if(!gEe(l,a[d])){const h=a[d];let p=u[d];p=$r(p);const m=o.Su(h);if(p instanceof H3)l.push(h);else{const g=y2(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new xu(l);return new lEe(c,f,o.fieldTransforms)}function o_t(e,t,n,r=!1){return y2(n,e.Fu(r?4:3,t))}function y2(e,t){if(mEe(e=$r(e)))return kH("Unsupported field value:",t,e),pEe(e,t);if(e instanceof U3)return function(r,i){if(!cEe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=y2(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=$r(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J1t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=as.fromDate(r);return{timestampValue:_k(i.serializer,s)}}if(r instanceof as){const s=new as(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_k(i.serializer,s)}}if(r instanceof DH)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nb)return{bytesValue:I_e(i.serializer,r._byteString)};if(r instanceof ua){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pH(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${z3(r)}`)}(e,t)}function pEe(e,t){const n={};return r_e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$y(e,(r,i)=>{const s=y2(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function mEe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof as||e instanceof DH||e instanceof Nb||e instanceof ua||e instanceof U3)}function kH(e,t,n){if(!mEe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=z3(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function O8(e,t,n){if((t=$r(t))instanceof g2)return t._internalPath;if(typeof t=="string")return RH(e,t);throw wk("Field path arguments must be of type string or ",e,!1,void 0,n)}const a_t=new RegExp("[~\\*/\\[\\]]");function RH(e,t,n){if(t.search(a_t)>=0)throw wk(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new g2(...t.split("."))._internalPath}catch{throw wk(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function wk(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _t(We.INVALID_ARGUMENT,a+e+u)}function gEe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yEe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ua(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new u_t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(q3("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class u_t extends yEe{data(){return super.data()}}function q3(e,t){return typeof t=="string"?RH(e,t):t instanceof g2?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new _t(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PH{}class vEe extends PH{}function Eie(e,t,...n){let r=[];t instanceof PH&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof OH).length,a=s.filter(u=>u instanceof W3).length;if(o>1||o>0&&a>0)throw new _t(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class W3 extends vEe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new W3(t,n,r)}_apply(t){const n=this._parse(t);return bEe(t._query,n),new Ly(t.firestore,t.converter,T8(t._query,n))}_parse(t){const n=V3(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new _t(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){xie(f,c);const h=[];for(const p of f)h.push(wie(u,s,p));d={arrayValue:{values:h}}}else d=wie(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||xie(f,c),d=o_t(a,o,f,c==="in"||c==="not-in");return Gi.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function c_t(e,t,n){const r=t,i=q3("where",e);return W3._create(i,r,n)}class OH extends PH{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new OH(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tc.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)bEe(o,u),o=T8(o,u)}(t._query,n),new Ly(t.firestore,t.converter,T8(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class MH extends vEe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new MH(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new _t(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _t(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new VS(s,o)}(t._query,this._field,this._direction);return new Ly(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $_(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function f_t(e,t="asc"){const n=t,r=q3("orderBy",e);return MH._create(r,n)}function wie(e,t,n){if(typeof(n=$r(n))=="string"){if(n==="")throw new _t(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d_e(t)&&n.indexOf("/")!==-1)throw new _t(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(zr.fromString(n));if(!Wt.isDocumentKey(r))throw new _t(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hre(e,new Wt(r))}if(n instanceof ua)return Hre(e,n._key);throw new _t(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z3(n)}.`)}function xie(e,t){if(!Array.isArray(e)||e.length===0)throw new _t(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bEe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new _t(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _t(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class d_t{convertValue(t,n="none"){switch(Y0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(G0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw sn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return $y(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new DH(Vi(t.latitude),Vi(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=aH(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jS(t));default:return null}}convertTimestamp(t){const n=Sm(t);return new as(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=zr.fromString(t);Mr(M_e(r));const i=new zS(r.get(1),r.get(3)),s=new Wt(r.popFirst(5));return i.isEqual(n)||Th(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Ee(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class EEe extends yEe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new UD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(q3("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class UD extends EEe{data(t={}){return super.data(t)}}class h_t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Rw(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new UD(this._firestore,this._userDataWriter,r.key,r,new Rw(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new UD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rw(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new UD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rw(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:p_t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function p_t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(e){e=Cc(e,ua);const t=Cc(e.firestore,tg);return Qbt(m2(t),e._key).then(n=>y_t(t,e,n))}class wEe extends d_t{constructor(t){super(),this.firestore=t}convertBytes(t){return new Nb(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ua(this.firestore,null,n)}}function BE(e){e=Cc(e,Ly);const t=Cc(e.firestore,tg),n=m2(t),r=new wEe(t);return l_t(e._query),Jbt(n,e._query).then(i=>new h_t(t,r,e,i))}function lu(e,t,n){e=Cc(e,ua);const r=Cc(e.firestore,tg),i=_Ee(e.converter,t,n);return G3(r,[fEe(V3(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Ya.none())])}function m_t(e,t,n,...r){e=Cc(e,ua);const i=Cc(e.firestore,tg),s=V3(i);let o;return o=typeof(t=$r(t))=="string"||t instanceof g2?hEe(s,"updateDoc",e._key,t,n,r):dEe(s,"updateDoc",e._key,t),G3(i,[o.toMutation(e._key,Ya.exists(!0))])}function g_t(e){return G3(Cc(e.firestore,tg),[new F3(e._key,Ya.none())])}function G3(e,t){return function(r,i){const s=new th;return r.asyncQueue.enqueueAndForget(async()=>$bt(await Kbt(r),i,s)),s.promise}(m2(e),t)}function y_t(e,t,n){const r=n.docs.get(t._key),i=new wEe(e);return new EEe(e,i,t._key,r,new Rw(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=V3(t)}set(t,n,r){this._verifyNotCommitted();const i=p6(t,this._firestore),s=_Ee(i.converter,n,r),o=fEe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ya.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=p6(t,this._firestore);let o;return o=typeof(n=$r(n))=="string"||n instanceof g2?hEe(this._dataReader,"WriteBatch.update",s._key,n,r,i):dEe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ya.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=p6(t,this._firestore);return this._mutations=this._mutations.concat(new F3(n._key,Ya.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function p6(e,t){if((e=$r(e)).firestore!==t)throw new _t(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function b_t(){return new NH("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(e){return m2(e=Cc(e,tg)),new v_t(e,t=>G3(e,t))}(function(t,n=!0){(function(i){M_=i})(My),xh(new Pf("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new tg(new g1t(r.getProvider("auth-internal")),new _1t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _t(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zS(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bc(jre,"4.6.3",t),bc(jre,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=new Map,xEe={activated:!1,tokenObservers:[]},__t={initialized:!1,enabled:!1};function us(e){return M8.get(e)||Object.assign({},xEe)}function E_t(e,t){return M8.set(e,t),M8.get(e)}function Y3(){return __t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SEe="https://content-firebaseappcheck.googleapis.com/v1",w_t="exchangeRecaptchaV3Token",x_t="exchangeDebugToken",Tie={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},S_t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new OS,this.pending.promise.catch(n=>{}),await C_t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new OS,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function C_t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ja=new R_("appCheck","AppCheck",A_t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cie(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function $H(e){if(!us(e).activated)throw ja.create("use-before-activation",{appName:e.name})}function TEe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=SA(n)+"d:"),r&&(o+=SA(r)+"h:"),o+=SA(i)+"m:"+SA(s)+"s",o}function SA(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FH({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ja.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ja.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ja.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ja.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function D_t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${SEe}/projects/${n}/apps/${r}:${w_t}?key=${i}`,body:{recaptcha_v3_token:t}}}function CEe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${SEe}/projects/${n}/apps/${r}:${x_t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_t="firebase-app-check-database",N_t=1,GS="firebase-app-check-store",AEe="debug-token";let TA=null;function DEe(){return TA||(TA=new Promise((e,t)=>{try{const n=indexedDB.open(I_t,N_t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ja.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(GS,{keyPath:"compositeKey"})}}}catch(n){t(ja.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),TA)}function k_t(e){return NEe(kEe(e))}function R_t(e,t){return IEe(kEe(e),t)}function P_t(e){return IEe(AEe,e)}function O_t(){return NEe(AEe)}async function IEe(e,t){const r=(await DEe()).transaction(GS,"readwrite"),s=r.objectStore(GS).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ja.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function NEe(e){const n=(await DEe()).transaction(GS,"readonly"),i=n.objectStore(GS).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ja.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function kEe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new T3("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_t(e){if(BV()){let t;try{t=await k_t(e)}catch(n){YS.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function m6(e,t){return BV()?R_t(e,t).catch(n=>{YS.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function $_t(){let e;try{e=await O_t()}catch{}if(e)return e;{const t=Mpt();return P_t(t).catch(n=>YS.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(){return Y3().enabled}async function BH(){const e=Y3();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function F_t(){const e=Yve(),t=Y3();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new OS;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve($_t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_t={error:"UNKNOWN_ERROR"};function B_t(e){return LV.encodeString(JSON.stringify(e),!1)}async function $8(e,t=!1){const n=e.app;$H(n);const r=us(n);let i=r.token,s;if(i&&!av(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(av(u)?i=u:await m6(n,void 0))}if(!t&&i&&av(i))return{token:i.token};let o=!1;if(LH()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FH(CEe(n,await BH()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await m6(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await us(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?YS.warn(u.message):YS.error(u),s=u}let a;return i?s?av(i)?a={token:i.token,internalError:s}:a=Die(s):(a={token:i.token},r.token=i,await m6(n,i)):a=Die(s),o&&OEe(n,a),a}async function j_t(e){const t=e.app;$H(t);const{provider:n}=us(t);if(LH()){const r=await BH(),{token:i}=await FH(CEe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function REe(e,t,n,r){const{app:i}=e,s=us(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&av(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Aie(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Aie(e))}function PEe(e,t){const n=us(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Aie(e){const{app:t}=e,n=us(t);let r=n.tokenRefresher;r||(r=z_t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function z_t(e){const{app:t}=e;return new T_t(async()=>{const n=us(t);let r;if(n.token?r=await $8(e,!0):r=await $8(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=us(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Tie.RETRIAL_MIN_WAIT,Tie.RETRIAL_MAX_WAIT)}function OEe(e,t){const n=us(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function av(e){return e.expireTimeMillis-Date.now()>0}function Die(e){return{token:B_t(L_t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=us(this.app);for(const n of t)PEe(this.app,n.next);return Promise.resolve()}}function V_t(e,t){return new U_t(e,t)}function H_t(e){return{getToken:t=>$8(e,t),getLimitedUseToken:()=>j_t(e),addTokenListener:t=>REe(e,"INTERNAL",t),removeTokenListener:t=>PEe(e.app,t)}}const q_t="@firebase/app-check",W_t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_t="https://www.google.com/recaptcha/api.js";function Y_t(e,t){const n=new OS,r=us(e);r.reCAPTCHAState={initialized:n};const i=K_t(e),s=Cie(!1);return s?Iie(e,t,s,i,n):J_t(()=>{const o=Cie(!1);if(!o)throw new Error("no recaptcha");Iie(e,t,o,i,n)}),n.promise}function Iie(e,t,n,r,i){n.ready(()=>{Q_t(e,t,n,r),i.resolve(n)})}function K_t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function X_t(e){$H(e);const n=await us(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=us(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function Q_t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{us(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{us(e).reCAPTCHAState.succeeded=!1}}),s=us(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function J_t(e){const t=document.createElement("script");t.src=G_t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;eEt(this._throttleData);const i=await X_t(this._app).catch(o=>{throw ja.create("recaptcha-error")});if(!(!((t=us(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ja.create("recaptcha-error");let s;try{s=await FH(D_t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=Z_t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ja.create("throttled",{time:TEe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=P_(t,"heartbeat"),Y_t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof jH?this._siteKey===t._siteKey:!1}}function Z_t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+S_t,httpStatus:e};{const n=t?t.backoffCount:0,r=jpt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function eEt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ja.create("throttled",{time:TEe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tEt(e=zV(),t){e=$r(e);const n=P_(e,"app-check");if(Y3().initialized||F_t(),LH()&&BH().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ja.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return nEt(e,t.provider,t.isTokenAutoRefreshEnabled),us(e).isTokenAutoRefreshEnabled&&REe(r,"INTERNAL",()=>{}),r}function nEt(e,t,n){const r=E_t(e,Object.assign({},xEe));r.activated=!0,r.provider=t,r.cachedTokenPromise=M_t(e).then(i=>(i&&av(i)&&(r.token=i,OEe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const rEt="app-check",Nie="app-check-internal";function iEt(){xh(new Pf(rEt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return V_t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Nie).initialize()})),xh(new Pf(Nie,e=>{const t=e.getProvider("app-check").getImmediate();return H_t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),bc(q_t,W_t)}iEt();function CA(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var MEe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof CA=="function"&&CA;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof CA=="function"&&CA,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,_!==o&&m(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,x){if(typeof _!="function"&&this.state===l||typeof x!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var C=this.state===l?_:x;h(S,C,this.outcome)}else this.queue.push(new d(S,_,x));return S};function d(_,x,S){this.promise=_,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},d.prototype.otherCallFulfilled=function(_){h(this.promise,this.onFulfilled,_)},d.prototype.callRejected=function(_){a.reject(this.promise,_)},d.prototype.otherCallRejected=function(_){h(this.promise,this.onRejected,_)};function h(_,x,S){s(function(){var C;try{C=x(S)}catch(A){return a.reject(_,A)}C===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,C)})}a.resolve=function(_,x){var S=g(p,x);if(S.status==="error")return a.reject(_,S.value);var C=S.value;if(C)m(_,C);else{_.state=l,_.outcome=x;for(var A=-1,D=_.queue.length;++A<D;)_.queue[A].callFulfilled(x)}return _},a.reject=function(_,x){_.state=u,_.outcome=x;for(var S=-1,C=_.queue.length;++S<C;)_.queue[S].callRejected(x);return _};function p(_){var x=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof x=="function")return function(){x.apply(_,arguments)}}function m(_,x){var S=!1;function C(O){S||(S=!0,a.reject(_,O))}function A(O){S||(S=!0,a.resolve(_,O))}function D(){x(A,C)}var I=g(D);I.status==="error"&&C(I.value)}function g(_,x){var S={};try{S.value=_(x),S.status="success"}catch(C){S.status="error",S.value=C}return S}f.resolve=y;function y(_){return _ instanceof this?_:a.resolve(new this(o),_)}f.reject=v;function v(_){var x=new this(o);return a.reject(x,_)}f.all=b;function b(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,C=!1;if(!S)return this.resolve([]);for(var A=new Array(S),D=0,I=-1,O=new this(o);++I<S;)R(_[I],I);return O;function R(M,F){x.resolve(M).then(P,function(j){C||(C=!0,a.reject(O,j))});function P(j){A[F]=j,++D===S&&!C&&(C=!0,a.resolve(O,A))}}}f.race=E;function E(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,C=!1;if(!S)return this.resolve([]);for(var A=-1,D=new this(o);++A<S;)I(_[A]);return D;function I(O){x.resolve(O).then(function(R){C||(C=!0,a.resolve(D,R))},function(R){C||(C=!0,a.reject(D,R))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function o(K,ae){if(!(K instanceof ae))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ae=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||ae)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(K,ae){K=K||[],ae=ae||{};try{return new Blob(K,ae)}catch(he){if(he.name!=="TypeError")throw he;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ge=new ee,be=0;be<K.length;be+=1)ge.append(K[be]);return ge.getBlob(ae.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(K,ae){ae&&K.then(function(ee){ae(null,ee)},function(ee){ae(ee)})}function h(K,ae,ee){typeof ae=="function"&&K.then(ae),typeof ee=="function"&&K.catch(ee)}function p(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,E="readonly",_="readwrite";function x(K){for(var ae=K.length,ee=new ArrayBuffer(ae),ge=new Uint8Array(ee),be=0;be<ae;be++)ge[be]=K.charCodeAt(be);return ee}function S(K){return new f(function(ae){var ee=K.transaction(g,_),ge=c([""]);ee.objectStore(g).put(ge,"key"),ee.onabort=function(be){be.preventDefault(),be.stopPropagation(),ae(!1)},ee.oncomplete=function(){var be=navigator.userAgent.match(/Chrome\/(\d+)/),he=navigator.userAgent.match(/Edge\//);ae(he||!be||parseInt(be[1],10)>=43)}}).catch(function(){return!1})}function C(K){return typeof y=="boolean"?f.resolve(y):S(K).then(function(ae){return y=ae,y})}function A(K){var ae=v[K.name],ee={};ee.promise=new f(function(ge,be){ee.resolve=ge,ee.reject=be}),ae.deferredOperations.push(ee),ae.dbReady?ae.dbReady=ae.dbReady.then(function(){return ee.promise}):ae.dbReady=ee.promise}function D(K){var ae=v[K.name],ee=ae.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function I(K,ae){var ee=v[K.name],ge=ee.deferredOperations.pop();if(ge)return ge.reject(ae),ge.promise}function O(K,ae){return new f(function(ee,ge){if(v[K.name]=v[K.name]||W(),K.db)if(ae)A(K),K.db.close();else return ee(K.db);var be=[K.name];ae&&be.push(K.version);var he=u.open.apply(u,be);ae&&(he.onupgradeneeded=function($e){var Ke=he.result;try{Ke.createObjectStore(K.storeName),$e.oldVersion<=1&&Ke.createObjectStore(g)}catch(Qe){if(Qe.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+$e.oldVersion+" to version "+$e.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw Qe}}),he.onerror=function($e){$e.preventDefault(),ge(he.error)},he.onsuccess=function(){var $e=he.result;$e.onversionchange=function(Ke){Ke.target.close()},ee($e),D(K)}})}function R(K){return O(K,!1)}function M(K){return O(K,!0)}function F(K,ae){if(!K.db)return!0;var ee=!K.db.objectStoreNames.contains(K.storeName),ge=K.version<K.db.version,be=K.version>K.db.version;if(ge&&(K.version!==ae&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),be||ee){if(ee){var he=K.db.version+1;he>K.version&&(K.version=he)}return!0}return!1}function P(K){return new f(function(ae,ee){var ge=new FileReader;ge.onerror=ee,ge.onloadend=function(be){var he=btoa(be.target.result||"");ae({__local_forage_encoded_blob:!0,data:he,type:K.type})},ge.readAsBinaryString(K)})}function j(K){var ae=x(atob(K.data));return c([ae],{type:K.type})}function z(K){return K&&K.__local_forage_encoded_blob}function V(K){var ae=this,ee=ae._initReady().then(function(){var ge=v[ae._dbInfo.name];if(ge&&ge.dbReady)return ge.dbReady});return h(ee,K,K),ee}function $(K){A(K);for(var ae=v[K.name],ee=ae.forages,ge=0;ge<ee.length;ge++){var be=ee[ge];be._dbInfo.db&&(be._dbInfo.db.close(),be._dbInfo.db=null)}return K.db=null,R(K).then(function(he){return K.db=he,F(K)?M(K):he}).then(function(he){K.db=ae.db=he;for(var $e=0;$e<ee.length;$e++)ee[$e]._dbInfo.db=he}).catch(function(he){throw I(K,he),he})}function U(K,ae,ee,ge){ge===void 0&&(ge=1);try{var be=K.db.transaction(K.storeName,ae);ee(null,be)}catch(he){if(ge>0&&(!K.db||he.name==="InvalidStateError"||he.name==="NotFoundError"))return f.resolve().then(function(){if(!K.db||he.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),M(K)}).then(function(){return $(K).then(function(){U(K,ae,ee,ge-1)})}).catch(ee);ee(he)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(K){var ae=this,ee={db:null};if(K)for(var ge in K)ee[ge]=K[ge];var be=v[ee.name];be||(be=W(),v[ee.name]=be),be.forages.push(ae),ae._initReady||(ae._initReady=ae.ready,ae.ready=V);var he=[];function $e(){return f.resolve()}for(var Ke=0;Ke<be.forages.length;Ke++){var Qe=be.forages[Ke];Qe!==ae&&he.push(Qe._initReady().catch($e))}var Je=be.forages.slice(0);return f.all(he).then(function(){return ee.db=be.db,R(ee)}).then(function(ct){return ee.db=ct,F(ee,ae._defaultConfig.version)?M(ee):ct}).then(function(ct){ee.db=be.db=ct,ae._dbInfo=ee;for(var xt=0;xt<Je.length;xt++){var pn=Je[xt];pn!==ae&&(pn._dbInfo.db=ee.db,pn._dbInfo.version=ee.version)}})}function q(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){U(ee._dbInfo,E,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=Qe.get(K);Je.onsuccess=function(){var ct=Je.result;ct===void 0&&(ct=null),z(ct)&&(ct=j(ct)),be(ct)},Je.onerror=function(){he(Je.error)}}catch(ct){he(ct)}})}).catch(he)});return d(ge,ae),ge}function Y(K,ae){var ee=this,ge=new f(function(be,he){ee.ready().then(function(){U(ee._dbInfo,E,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=Qe.openCursor(),ct=1;Je.onsuccess=function(){var xt=Je.result;if(xt){var pn=xt.value;z(pn)&&(pn=j(pn));var Mt=K(pn,xt.key,ct++);Mt!==void 0?be(Mt):xt.continue()}else be()},Je.onerror=function(){he(Je.error)}}catch(xt){he(xt)}})}).catch(he)});return d(ge,ae),ge}function re(K,ae,ee){var ge=this;K=p(K);var be=new f(function(he,$e){var Ke;ge.ready().then(function(){return Ke=ge._dbInfo,b.call(ae)==="[object Blob]"?C(Ke.db).then(function(Qe){return Qe?ae:P(ae)}):ae}).then(function(Qe){U(ge._dbInfo,_,function(Je,ct){if(Je)return $e(Je);try{var xt=ct.objectStore(ge._dbInfo.storeName);Qe===null&&(Qe=void 0);var pn=xt.put(Qe,K);ct.oncomplete=function(){Qe===void 0&&(Qe=null),he(Qe)},ct.onabort=ct.onerror=function(){var Mt=pn.error?pn.error:pn.transaction.error;$e(Mt)}}catch(Mt){$e(Mt)}})}).catch($e)});return d(be,ee),be}function pe(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){U(ee._dbInfo,_,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=Qe.delete(K);Ke.oncomplete=function(){be()},Ke.onerror=function(){he(Je.error)},Ke.onabort=function(){var ct=Je.error?Je.error:Je.transaction.error;he(ct)}}catch(ct){he(ct)}})}).catch(he)});return d(ge,ae),ge}function _e(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){U(ae._dbInfo,_,function(he,$e){if(he)return be(he);try{var Ke=$e.objectStore(ae._dbInfo.storeName),Qe=Ke.clear();$e.oncomplete=function(){ge()},$e.onabort=$e.onerror=function(){var Je=Qe.error?Qe.error:Qe.transaction.error;be(Je)}}catch(Je){be(Je)}})}).catch(be)});return d(ee,K),ee}function de(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){U(ae._dbInfo,E,function(he,$e){if(he)return be(he);try{var Ke=$e.objectStore(ae._dbInfo.storeName),Qe=Ke.count();Qe.onsuccess=function(){ge(Qe.result)},Qe.onerror=function(){be(Qe.error)}}catch(Je){be(Je)}})}).catch(be)});return d(ee,K),ee}function ye(K,ae){var ee=this,ge=new f(function(be,he){if(K<0){be(null);return}ee.ready().then(function(){U(ee._dbInfo,E,function($e,Ke){if($e)return he($e);try{var Qe=Ke.objectStore(ee._dbInfo.storeName),Je=!1,ct=Qe.openKeyCursor();ct.onsuccess=function(){var xt=ct.result;if(!xt){be(null);return}K===0||Je?be(xt.key):(Je=!0,xt.advance(K))},ct.onerror=function(){he(ct.error)}}catch(xt){he(xt)}})}).catch(he)});return d(ge,ae),ge}function Ce(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){U(ae._dbInfo,E,function(he,$e){if(he)return be(he);try{var Ke=$e.objectStore(ae._dbInfo.storeName),Qe=Ke.openKeyCursor(),Je=[];Qe.onsuccess=function(){var ct=Qe.result;if(!ct){ge(Je);return}Je.push(ct.key),ct.continue()},Qe.onerror=function(){be(Qe.error)}}catch(ct){be(ct)}})}).catch(be)});return d(ee,K),ee}function ve(K,ae){ae=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var ge=this,be;if(!K.name)be=f.reject("Invalid arguments");else{var he=K.name===ee.name&&ge._dbInfo.db,$e=he?f.resolve(ge._dbInfo.db):R(K).then(function(Ke){var Qe=v[K.name],Je=Qe.forages;Qe.db=Ke;for(var ct=0;ct<Je.length;ct++)Je[ct]._dbInfo.db=Ke;return Ke});K.storeName?be=$e.then(function(Ke){if(Ke.objectStoreNames.contains(K.storeName)){var Qe=Ke.version+1;A(K);var Je=v[K.name],ct=Je.forages;Ke.close();for(var xt=0;xt<ct.length;xt++){var pn=ct[xt];pn._dbInfo.db=null,pn._dbInfo.version=Qe}var Mt=new f(function(kn,fr){var dr=u.open(K.name,Qe);dr.onerror=function(co){var Hc=dr.result;Hc.close(),fr(co)},dr.onupgradeneeded=function(){var co=dr.result;co.deleteObjectStore(K.storeName)},dr.onsuccess=function(){var co=dr.result;co.close(),kn(co)}});return Mt.then(function(kn){Je.db=kn;for(var fr=0;fr<ct.length;fr++){var dr=ct[fr];dr._dbInfo.db=kn,D(dr._dbInfo)}}).catch(function(kn){throw(I(K,kn)||f.resolve()).catch(function(){}),kn})}}):be=$e.then(function(Ke){A(K);var Qe=v[K.name],Je=Qe.forages;Ke.close();for(var ct=0;ct<Je.length;ct++){var xt=Je[ct];xt._dbInfo.db=null}var pn=new f(function(Mt,kn){var fr=u.deleteDatabase(K.name);fr.onerror=function(){var dr=fr.result;dr&&dr.close(),kn(fr.error)},fr.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},fr.onsuccess=function(){var dr=fr.result;dr&&dr.close(),Mt(dr)}});return pn.then(function(Mt){Qe.db=Mt;for(var kn=0;kn<Je.length;kn++){var fr=Je[kn];D(fr._dbInfo)}}).catch(function(Mt){throw(I(K,Mt)||f.resolve()).catch(function(){}),Mt})})}return d(be,ae),be}var qe={_driver:"asyncStorage",_initStorage:B,_support:l(),iterate:Y,getItem:q,setItem:re,removeItem:pe,clear:_e,length:de,key:ye,keys:Ce,dropInstance:ve};function He(){return typeof openDatabase=="function"}var ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt="~~local_forage_type~",Pe=/^~~local_forage_type~([^~]+)~/,Be="__lfsc__:",Xe=Be.length,mt="arbf",Ft="blob",bt="si08",G="ui08",ie="uic8",me="si16",J="si32",se="ur16",ce="ui32",Se="fl32",Te="fl64",Ge=Xe+mt.length,je=Object.prototype.toString;function Ct(K){var ae=K.length*.75,ee=K.length,ge,be=0,he,$e,Ke,Qe;K[K.length-1]==="="&&(ae--,K[K.length-2]==="="&&ae--);var Je=new ArrayBuffer(ae),ct=new Uint8Array(Je);for(ge=0;ge<ee;ge+=4)he=ht.indexOf(K[ge]),$e=ht.indexOf(K[ge+1]),Ke=ht.indexOf(K[ge+2]),Qe=ht.indexOf(K[ge+3]),ct[be++]=he<<2|$e>>4,ct[be++]=($e&15)<<4|Ke>>2,ct[be++]=(Ke&3)<<6|Qe&63;return Je}function Ot(K){var ae=new Uint8Array(K),ee="",ge;for(ge=0;ge<ae.length;ge+=3)ee+=ht[ae[ge]>>2],ee+=ht[(ae[ge]&3)<<4|ae[ge+1]>>4],ee+=ht[(ae[ge+1]&15)<<2|ae[ge+2]>>6],ee+=ht[ae[ge+2]&63];return ae.length%3===2?ee=ee.substring(0,ee.length-1)+"=":ae.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function Dt(K,ae){var ee="";if(K&&(ee=je.call(K)),K&&(ee==="[object ArrayBuffer]"||K.buffer&&je.call(K.buffer)==="[object ArrayBuffer]")){var ge,be=Be;K instanceof ArrayBuffer?(ge=K,be+=mt):(ge=K.buffer,ee==="[object Int8Array]"?be+=bt:ee==="[object Uint8Array]"?be+=G:ee==="[object Uint8ClampedArray]"?be+=ie:ee==="[object Int16Array]"?be+=me:ee==="[object Uint16Array]"?be+=se:ee==="[object Int32Array]"?be+=J:ee==="[object Uint32Array]"?be+=ce:ee==="[object Float32Array]"?be+=Se:ee==="[object Float64Array]"?be+=Te:ae(new Error("Failed to get type for BinaryArray"))),ae(be+Ot(ge))}else if(ee==="[object Blob]"){var he=new FileReader;he.onload=function(){var $e=rt+K.type+"~"+Ot(this.result);ae(Be+Ft+$e)},he.readAsArrayBuffer(K)}else try{ae(JSON.stringify(K))}catch($e){console.error("Couldn't convert value into a JSON string: ",K),ae(null,$e)}}function Vt(K){if(K.substring(0,Xe)!==Be)return JSON.parse(K);var ae=K.substring(Ge),ee=K.substring(Xe,Ge),ge;if(ee===Ft&&Pe.test(ae)){var be=ae.match(Pe);ge=be[1],ae=ae.substring(be[0].length)}var he=Ct(ae);switch(ee){case mt:return he;case Ft:return c([he],{type:ge});case bt:return new Int8Array(he);case G:return new Uint8Array(he);case ie:return new Uint8ClampedArray(he);case me:return new Int16Array(he);case se:return new Uint16Array(he);case J:return new Int32Array(he);case ce:return new Uint32Array(he);case Se:return new Float32Array(he);case Te:return new Float64Array(he);default:throw new Error("Unkown type: "+ee)}}var Zt={serialize:Dt,deserialize:Vt,stringToBuffer:Ct,bufferToString:Ot};function an(K,ae,ee,ge){K.executeSql("CREATE TABLE IF NOT EXISTS "+ae.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,ge)}function gr(K){var ae=this,ee={db:null};if(K)for(var ge in K)ee[ge]=typeof K[ge]!="string"?K[ge].toString():K[ge];var be=new f(function(he,$e){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(Ke){return $e(Ke)}ee.db.transaction(function(Ke){an(Ke,ee,function(){ae._dbInfo=ee,he()},function(Qe,Je){$e(Je)})},$e)});return ee.serializer=Zt,be}function lr(K,ae,ee,ge,be,he){K.executeSql(ee,ge,be,function($e,Ke){Ke.code===Ke.SYNTAX_ERR?$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ae.storeName],function(Qe,Je){Je.rows.length?he(Qe,Ke):an(Qe,ae,function(){Qe.executeSql(ee,ge,be,he)},he)},he):he($e,Ke)},he)}function fn(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"SELECT * FROM "+$e.storeName+" WHERE key = ? LIMIT 1",[K],function(Qe,Je){var ct=Je.rows.length?Je.rows.item(0).value:null;ct&&(ct=$e.serializer.deserialize(ct)),be(ct)},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function Xr(K,ae){var ee=this,ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"SELECT * FROM "+$e.storeName,[],function(Qe,Je){for(var ct=Je.rows,xt=ct.length,pn=0;pn<xt;pn++){var Mt=ct.item(pn),kn=Mt.value;if(kn&&(kn=$e.serializer.deserialize(kn)),kn=K(kn,Mt.key,pn+1),kn!==void 0){be(kn);return}}be()},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function er(K,ae,ee,ge){var be=this;K=p(K);var he=new f(function($e,Ke){be.ready().then(function(){ae===void 0&&(ae=null);var Qe=ae,Je=be._dbInfo;Je.serializer.serialize(ae,function(ct,xt){xt?Ke(xt):Je.db.transaction(function(pn){lr(pn,Je,"INSERT OR REPLACE INTO "+Je.storeName+" (key, value) VALUES (?, ?)",[K,ct],function(){$e(Qe)},function(Mt,kn){Ke(kn)})},function(pn){if(pn.code===pn.QUOTA_ERR){if(ge>0){$e(er.apply(be,[K,Qe,ee,ge-1]));return}Ke(pn)}})})}).catch(Ke)});return d(he,ee),he}function gi(K,ae,ee){return er.apply(this,[K,ae,ee,1])}function Ll(K,ae){var ee=this;K=p(K);var ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"DELETE FROM "+$e.storeName+" WHERE key = ?",[K],function(){be()},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function Ho(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function($e){lr($e,he,"DELETE FROM "+he.storeName,[],function(){ge()},function(Ke,Qe){be(Qe)})})}).catch(be)});return d(ee,K),ee}function Wu(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function($e){lr($e,he,"SELECT COUNT(key) as c FROM "+he.storeName,[],function(Ke,Qe){var Je=Qe.rows.item(0).c;ge(Je)},function(Ke,Qe){be(Qe)})})}).catch(be)});return d(ee,K),ee}function Yn(K,ae){var ee=this,ge=new f(function(be,he){ee.ready().then(function(){var $e=ee._dbInfo;$e.db.transaction(function(Ke){lr(Ke,$e,"SELECT key FROM "+$e.storeName+" WHERE id = ? LIMIT 1",[K+1],function(Qe,Je){var ct=Je.rows.length?Je.rows.item(0).key:null;be(ct)},function(Qe,Je){he(Je)})})}).catch(he)});return d(ge,ae),ge}function Lr(K){var ae=this,ee=new f(function(ge,be){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function($e){lr($e,he,"SELECT key FROM "+he.storeName,[],function(Ke,Qe){for(var Je=[],ct=0;ct<Qe.rows.length;ct++)Je.push(Qe.rows.item(ct).key);ge(Je)},function(Ke,Qe){be(Qe)})})}).catch(be)});return d(ee,K),ee}function yr(K){return new f(function(ae,ee){K.transaction(function(ge){ge.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(be,he){for(var $e=[],Ke=0;Ke<he.rows.length;Ke++)$e.push(he.rows.item(Ke).name);ae({db:K,storeNames:$e})},function(be,he){ee(he)})},function(ge){ee(ge)})})}function uo(K,ae){ae=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var ge=this,be;return K.name?be=new f(function(he){var $e;K.name===ee.name?$e=ge._dbInfo.db:$e=openDatabase(K.name,"","",0),K.storeName?he({db:$e,storeNames:[K.storeName]}):he(yr($e))}).then(function(he){return new f(function($e,Ke){he.db.transaction(function(Qe){function Je(Mt){return new f(function(kn,fr){Qe.executeSql("DROP TABLE IF EXISTS "+Mt,[],function(){kn()},function(dr,co){fr(co)})})}for(var ct=[],xt=0,pn=he.storeNames.length;xt<pn;xt++)ct.push(Je(he.storeNames[xt]));f.all(ct).then(function(){$e()}).catch(function(Mt){Ke(Mt)})},function(Qe){Ke(Qe)})})}):be=f.reject("Invalid arguments"),d(be,ae),be}var Fs={_driver:"webSQLStorage",_initStorage:gr,_support:He(),iterate:Xr,getItem:fn,setItem:gi,removeItem:Ll,clear:Ho,length:Wu,key:Yn,keys:Lr,dropInstance:uo};function Ls(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ue(K,ae){var ee=K.name+"/";return K.storeName!==ae.storeName&&(ee+=K.storeName+"/"),ee}function te(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function le(){return!te()||localStorage.length>0}function De(K){var ae=this,ee={};if(K)for(var ge in K)ee[ge]=K[ge];return ee.keyPrefix=ue(K,ae._defaultConfig),le()?(ae._dbInfo=ee,ee.serializer=Zt,f.resolve()):f.reject()}function Ae(K){var ae=this,ee=ae.ready().then(function(){for(var ge=ae._dbInfo.keyPrefix,be=localStorage.length-1;be>=0;be--){var he=localStorage.key(be);he.indexOf(ge)===0&&localStorage.removeItem(he)}});return d(ee,K),ee}function at(K,ae){var ee=this;K=p(K);var ge=ee.ready().then(function(){var be=ee._dbInfo,he=localStorage.getItem(be.keyPrefix+K);return he&&(he=be.serializer.deserialize(he)),he});return d(ge,ae),ge}function St(K,ae){var ee=this,ge=ee.ready().then(function(){for(var be=ee._dbInfo,he=be.keyPrefix,$e=he.length,Ke=localStorage.length,Qe=1,Je=0;Je<Ke;Je++){var ct=localStorage.key(Je);if(ct.indexOf(he)===0){var xt=localStorage.getItem(ct);if(xt&&(xt=be.serializer.deserialize(xt)),xt=K(xt,ct.substring($e),Qe++),xt!==void 0)return xt}}});return d(ge,ae),ge}function Xt(K,ae){var ee=this,ge=ee.ready().then(function(){var be=ee._dbInfo,he;try{he=localStorage.key(K)}catch{he=null}return he&&(he=he.substring(be.keyPrefix.length)),he});return d(ge,ae),ge}function _n(K){var ae=this,ee=ae.ready().then(function(){for(var ge=ae._dbInfo,be=localStorage.length,he=[],$e=0;$e<be;$e++){var Ke=localStorage.key($e);Ke.indexOf(ge.keyPrefix)===0&&he.push(Ke.substring(ge.keyPrefix.length))}return he});return d(ee,K),ee}function Sn(K){var ae=this,ee=ae.keys().then(function(ge){return ge.length});return d(ee,K),ee}function un(K,ae){var ee=this;K=p(K);var ge=ee.ready().then(function(){var be=ee._dbInfo;localStorage.removeItem(be.keyPrefix+K)});return d(ge,ae),ge}function $n(K,ae,ee){var ge=this;K=p(K);var be=ge.ready().then(function(){ae===void 0&&(ae=null);var he=ae;return new f(function($e,Ke){var Qe=ge._dbInfo;Qe.serializer.serialize(ae,function(Je,ct){if(ct)Ke(ct);else try{localStorage.setItem(Qe.keyPrefix+K,Je),$e(he)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ke(xt),Ke(xt)}})})});return d(be,ee),be}function tr(K,ae){if(ae=m.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var ee=this.config();K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName}var ge=this,be;return K.name?be=new f(function(he){K.storeName?he(ue(K,ge._defaultConfig)):he(K.name+"/")}).then(function(he){for(var $e=localStorage.length-1;$e>=0;$e--){var Ke=localStorage.key($e);Ke.indexOf(he)===0&&localStorage.removeItem(Ke)}}):be=f.reject("Invalid arguments"),d(be,ae),be}var Ht={_driver:"localStorageWrapper",_initStorage:De,_support:Ls(),iterate:St,getItem:at,setItem:$n,removeItem:un,clear:Ae,length:Sn,key:Xt,keys:_n,dropInstance:tr},Fn=function(ae,ee){return ae===ee||typeof ae=="number"&&typeof ee=="number"&&isNaN(ae)&&isNaN(ee)},cr=function(ae,ee){for(var ge=ae.length,be=0;be<ge;){if(Fn(ae[be],ee))return!0;be++}return!1},bn=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},Gt={},Hn={},vr={INDEXEDDB:qe,WEBSQL:Fs,LOCALSTORAGE:Ht},yi=[vr.INDEXEDDB._driver,vr.WEBSQL._driver,vr.LOCALSTORAGE._driver],br=["dropInstance"],Qr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(br),lo={description:"",driver:yi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qo(K,ae){K[ae]=function(){var ee=arguments;return K.ready().then(function(){return K[ae].apply(K,ee)})}}function gs(){for(var K=1;K<arguments.length;K++){var ae=arguments[K];if(ae)for(var ee in ae)ae.hasOwnProperty(ee)&&(bn(ae[ee])?arguments[0][ee]=ae[ee].slice():arguments[0][ee]=ae[ee])}return arguments[0]}var Gu=function(){function K(ae){o(this,K);for(var ee in vr)if(vr.hasOwnProperty(ee)){var ge=vr[ee],be=ge._driver;this[ee]=be,Gt[be]||this.defineDriver(ge)}this._defaultConfig=gs({},lo),this._config=gs({},this._defaultConfig,ae),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ge in ee){if(ge==="storeName"&&(ee[ge]=ee[ge].replace(/\W/g,"_")),ge==="version"&&typeof ee[ge]!="number")return new Error("Database version must be a number.");this._config[ge]=ee[ge]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},K.prototype.defineDriver=function(ee,ge,be){var he=new f(function($e,Ke){try{var Qe=ee._driver,Je=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){Ke(Je);return}for(var ct=Qr.concat("_initStorage"),xt=0,pn=ct.length;xt<pn;xt++){var Mt=ct[xt],kn=!cr(br,Mt);if((kn||ee[Mt])&&typeof ee[Mt]!="function"){Ke(Je);return}}var fr=function(){for(var Hc=function(Yu){return function(){var _a=new Error("Method "+Yu+" is not implemented by the current driver"),dd=f.reject(_a);return d(dd,arguments[arguments.length-1]),dd}},fd=0,oE=br.length;fd<oE;fd++){var pg=br[fd];ee[pg]||(ee[pg]=Hc(pg))}};fr();var dr=function(Hc){Gt[Qe]&&console.info("Redefining LocalForage driver: "+Qe),Gt[Qe]=ee,Hn[Qe]=Hc,$e()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(dr,Ke):dr(!!ee._support):dr(!0)}catch(co){Ke(co)}});return h(he,ge,be),he},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(ee,ge,be){var he=Gt[ee]?f.resolve(Gt[ee]):f.reject(new Error("Driver not found."));return h(he,ge,be),he},K.prototype.getSerializer=function(ee){var ge=f.resolve(Zt);return h(ge,ee),ge},K.prototype.ready=function(ee){var ge=this,be=ge._driverSet.then(function(){return ge._ready===null&&(ge._ready=ge._initDriver()),ge._ready});return h(be,ee,ee),be},K.prototype.setDriver=function(ee,ge,be){var he=this;bn(ee)||(ee=[ee]);var $e=this._getSupportedDrivers(ee);function Ke(){he._config.driver=he.driver()}function Qe(xt){return he._extend(xt),Ke(),he._ready=he._initStorage(he._config),he._ready}function Je(xt){return function(){var pn=0;function Mt(){for(;pn<xt.length;){var kn=xt[pn];return pn++,he._dbInfo=null,he._ready=null,he.getDriver(kn).then(Qe).catch(Mt)}Ke();var fr=new Error("No available storage method found.");return he._driverSet=f.reject(fr),he._driverSet}return Mt()}}var ct=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ct.then(function(){var xt=$e[0];return he._dbInfo=null,he._ready=null,he.getDriver(xt).then(function(pn){he._driver=pn._driver,Ke(),he._wrapLibraryMethodsWithReady(),he._initDriver=Je($e)})}).catch(function(){Ke();var xt=new Error("No available storage method found.");return he._driverSet=f.reject(xt),he._driverSet}),h(this._driverSet,ge,be),this._driverSet},K.prototype.supports=function(ee){return!!Hn[ee]},K.prototype._extend=function(ee){gs(this,ee)},K.prototype._getSupportedDrivers=function(ee){for(var ge=[],be=0,he=ee.length;be<he;be++){var $e=ee[be];this.supports($e)&&ge.push($e)}return ge},K.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,ge=Qr.length;ee<ge;ee++)qo(this,Qr[ee])},K.prototype.createInstance=function(ee){return new K(ee)},K}(),Vc=new Gu;r.exports=Vc},{3:3}]},{},[4])(4)})})(MEe);var sEt=MEe.exports;const j1=pa(sEt);var Us=[];for(var g6=0;g6<256;++g6)Us.push((g6+256).toString(16).slice(1));function oEt(e,t=0){return(Us[e[t+0]]+Us[e[t+1]]+Us[e[t+2]]+Us[e[t+3]]+"-"+Us[e[t+4]]+Us[e[t+5]]+"-"+Us[e[t+6]]+Us[e[t+7]]+"-"+Us[e[t+8]]+Us[e[t+9]]+"-"+Us[e[t+10]]+Us[e[t+11]]+Us[e[t+12]]+Us[e[t+13]]+Us[e[t+14]]+Us[e[t+15]]).toLowerCase()}var AA,aEt=new Uint8Array(16);function uEt(){if(!AA&&(AA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!AA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return AA(aEt)}var lEt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const kie={randomUUID:lEt};function xk(e,t,n){if(kie.randomUUID&&!t&&!e)return kie.randomUUID();e=e||{};var r=e.random||(e.rng||uEt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,oEt(r)}class $Ee{constructor(t){wa(this,"engine");wa(this,"connected",!1);wa(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Sk(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function jE(e){return e.participantId!==void 0}class il extends $Ee{constructor(){super("firebase");wa(this,"RECAPTCHAV3TOKEN","6Ld7v0cqAAAAACbRoSHv-PfJiq9wfYgjhXC4_e7Z");wa(this,"firestore");wa(this,"collectionPrefix","prod-");wa(this,"studyCollection");wa(this,"storage");wa(this,"studyId","");wa(this,"localForage",j1.createInstance({name:"currentParticipantId"}));wa(this,"participantData",null);const n=YU.parse(`
{
  apiKey: "AIzaSyBNW230jLUCwld9aUjZRzIunyGMdaMXv6I",
  authDomain: "abrar-test-study.firebaseapp.com",
  projectId: "abrar-test-study",
  storageBucket: "abrar-test-study.appspot.com",
  messagingSenderId: "304916533445",
  appId: "1:304916533445:web:22d7fea7e8e3faea4ca0ac"
}
`),r=ebe(n);this.firestore=t_t(r,{}),this.storage=c1t();try{tEt(r,{provider:new jH(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await n_t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=gk();if(!i.currentUser&&(await Igt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Sk(JSON.stringify(r));if(this.studyCollection=Ul(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(jE(a))return this.participantData=a,a;const l=await Sk(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Xu(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=xk(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Ji(this.studyCollection,"sequenceAssignment");await lu(i,{});const s=Ul(i,"sequenceAssignment"),o=Ji(s,this.currentParticipantId),a=Eie(s,c_t("participantId","==","")),u=await BE(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await g_t(m.ref),await lu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await lu(o,{participantId:this.currentParticipantId,timestamp:b_t()});const l=Eie(s,f_t("timestamp","asc")),d=(await BE(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Xu(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await FE(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");jE(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return jE(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=xk();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Ul(this.firestore,"user-management"),i=await BE(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await lu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await lu(Ji(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await lu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await lu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await lu(Ji(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Xu(this.storage,`${this.collectionPrefix}${n}/participants`),i=await FE(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");jE(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Ul(this.firestore,`${this.collectionPrefix}${n}`),s=Xu(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!jE(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Ji(i,"sequenceAssignment"),u=Ul(a,"sequenceAssignment"),l=Ji(u,r);await m_t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=Ji(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await lu(s,{[r]:i},{merge:!0})}async getModes(n){const r=Ji(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await h6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await lu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Ji(this.firestore,"metadata","collections"),i=await h6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Ji(this.firestore,"metadata","collections");await lu(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Ji(this.firestore,"metadata","collections"),i=await h6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await lu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Xu(this.storage,n),s=(await FE(r)).items.map(o=>Lre(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Xu(this.storage,n),o=(await FE(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Xu(this.storage,n),s=Xu(this.storage,r),o=await u6(i),u=await(await fetch(o)).blob();await a6(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Ul(this.firestore,n),s=Ji(i,"sequenceAssignment"),o=Ul(s,"sequenceAssignment"),a=Ul(this.firestore,r),u=Ji(a,"sequenceAssignment");await lu(u,{});const l=Ul(u,"sequenceAssignment"),c=await BE(o),f=Sie(this.firestore);c.docs.forEach(d=>{const h=Ji(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Ul(this.firestore,n),i=Ji(r,"sequenceAssignment"),s=Ul(i,"sequenceAssignment"),o=await BE(s),a=Sie(this.firestore);o.forEach(u=>{const l=Ji(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Xu(this.storage,n);return(await FE(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Xu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await u6(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await u6(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Xu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await a6(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await a6(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Xu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Lre(i)}}const FEe=k.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),By=()=>k.useContext(FEe);function cEt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=k.useState(t),[o,a]=k.useState(!1),{storageEngine:u}=Qi(),l=async()=>{const h=gk();try{await $gt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;k.useEffect(()=>{s(t);let h;if(u instanceof il)try{h=gk()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof il){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=Mgt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=k.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return w.jsx(FEe.Provider,{value:d,children:i.determiningStatus?w.jsx(Pu,{visible:!0}):e})}function Px({studyIds:e}){const t=Lh(),{studyId:n}=R0(),r=Sy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Qi(),{user:o,logout:a}=By(),[u,l]=k.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:w.jsx(K8e,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:w.jsx(H8e,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:w.jsx(Bhe,{}),href:"/settings",needAdmin:!0}];return w.jsx(Wr.Header,{p:"md",children:w.jsxs(ul,{mt:-7,align:"center",children:[w.jsx(ul.Col,{span:6,children:w.jsxs(Jt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[w.jsx(Wm,{w:40,src:`${qf}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsx(pl,{w:"md"}),w.jsx(ci,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),w.jsx(ul.Col,{span:6,children:w.jsxs(Jt,{justify:"flex-end",direction:"row",children:[c&&w.jsx(MT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),w.jsx(wj,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),w.jsx(Vf,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:w.jsxs(Jt,{direction:"column",mt:20,children:[w.jsx(Ze,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?w.jsx(In,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:w.jsx(In,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),w.jsxs(we,{ml:10,children:[w.jsx(Tj,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?w.jsx(Ze,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):w.jsx(Ze,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function LEe({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=_v(!1),[s,{close:o,open:a}]=_v(!1),[u,{open:l,close:c}]=_v(!1);return w.jsxs(w.Fragment,{children:[w.jsxs(cs,{children:[w.jsxs(Rr,{opened:n,children:[w.jsx(Rr.Target,{children:w.jsx(In,{variant:"light",disabled:e.length===0,onClick:()=>{FV(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:w.jsx(G8e,{})})}),w.jsx(Rr.Dropdown,{children:w.jsx(Ze,{children:"Download all participants data as JSON"})})]}),w.jsxs(Rr,{opened:s,children:[w.jsx(Rr.Target,{children:w.jsx(In,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:w.jsx(jhe,{})})}),w.jsx(Rr.Dropdown,{children:w.jsx(Ze,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&w.jsx(Nht,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function fEt({cellData:e}){return w.jsx(En.Td,{children:w.jsx(Hu,{miw:100,children:Object.entries(e.answer).map(([t,n])=>w.jsxs(we,{children:[w.jsxs(Ze,{fw:700,span:!0,children:[" ",`${t}: `]}),w.jsx(Ze,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Rie({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return w.jsxs(En.Td,{children:[t.toFixed(1)," ","s"]})}function dEt(e){const{metaData:t}=e;return w.jsx(En.Td,{children:w.jsx(Wj,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:w.jsxs(Hu,{gap:"xs",children:[w.jsxs(we,{children:["IP:"," ",t.ip]}),w.jsxs(we,{children:["Language:"," ",t.language]}),w.jsxs(we,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),w.jsxs(we,{children:["User Agent:"," ",t.userAgent]})]})})})}function hEt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=Qi(),{studyId:s}=R0(),{user:o}=By(),a=async y=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,y),await r()):console.warn("You are not authorized to perform this action."))},[u,l]=k.useState([]),[c,f]=k.useState(!1),d=()=>R4({title:"Confirm rejecting participants",children:w.jsxs(Ze,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",w.jsx(Ze,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{f(!0);const y=u.map(async v=>await a(v));await Promise.all(y),l([]),await r(),f(!1)}});function h(y){y==="all"?u.length===[...e,...t].length?l([]):l([...e,...t].map(v=>v.participantId)):u.includes(y)?l(u.filter(v=>v!==y)):l([...u,y])}const p=Lme(n.sequence),m=[w.jsx(En.Th,{children:w.jsx(Jt,{justify:"center",children:w.jsx(hh,{mb:-4,checked:u.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),w.jsx(En.Th,{children:"ID"},"ID"),w.jsx(En.Th,{children:"Status"},"status"),w.jsx(En.Th,{children:"Meta"},"meta"),...p.flatMap(y=>[w.jsx(En.Th,{children:y.componentName},`header-${y.componentName}-${y.timesSeenInBlock}`),w.jsxs(En.Th,{children:[y.componentName," ","Duration"]},`header-${y.componentName}-${y.timesSeenInBlock}-duration`)]),w.jsx(En.Th,{children:"Total Duration"},"total-duration")],g=[...e,...t].map(y=>w.jsxs(En.Tr,{children:[w.jsx(En.Td,{children:w.jsx(Jt,{justify:"center",children:w.jsx(hh,{mb:-4,checked:u.includes(y.participantId),onChange:()=>h(y.participantId)})})}),w.jsx(En.Td,{style:{whiteSpace:"nowrap"},children:y.participantId}),w.jsx(En.Td,{children:w.jsxs(Jt,{direction:"row",align:"center",children:[y.rejected?w.jsx(Wi,{label:"Rejected",children:w.jsx(az,{size:16,color:"red",style:{marginBottom:-3}})}):y.completed?w.jsx(Wi,{label:"Completed",children:w.jsx($he,{size:16,color:"teal",style:{marginBottom:-3}})}):w.jsx(Wi,{label:"In Progress",children:w.jsx(Lhe,{size:16,color:"orange",style:{marginBottom:-3}})}),!y.completed&&w.jsxs(Ze,{size:"sm",mb:-1,ml:4,children:[(Object.entries(y.answers).filter(([v,b])=>b.endTime!==void 0).length/(yh(y.sequence).length-1)*100).toFixed(2),"%"]})]})}),y.metadata?w.jsx(dEt,{metaData:y.metadata}):w.jsx(En.Td,{children:"N/A"}),p.map(v=>{const b=$me(y.sequence,v.orderPath),E=b&&Object.entries(y.answers).sort((_,x)=>{const S=parseInt(_[0].slice(_[0].lastIndexOf("_")+1),10),C=parseInt(x[0].slice(x[0].lastIndexOf("_")+1),10);return S-C}).filter(([_])=>{const x=_.slice(0,_.lastIndexOf("_")),S=parseInt(_.slice(_.lastIndexOf("_")+1),10);return x===v.componentName&&S<=b[0].lastIndex&&S>=b[0].firstIndex});return E!==null&&E.length>=v.timesSeenInBlock+1?w.jsxs(xi.Fragment,{children:[w.jsx(fEt,{cellData:E[v.timesSeenInBlock][1]}),w.jsx(Rie,{cellData:E[v.timesSeenInBlock][1]})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`):w.jsxs(xi.Fragment,{children:[w.jsx(En.Td,{children:"N/A"}),w.jsx(En.Td,{children:"N/A"})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`)}),w.jsx(Rie,{cellData:{startTime:Math.min(...Object.values(y.answers).map(v=>v.startTime)),endTime:Math.max(...Object.values(y.answers).map(v=>v.endTime)),answer:{},windowEvents:[]}},`cell-${y.participantId}-total-duration`)]},y.participantId));return[...e,...t].length>0?w.jsxs(w.Fragment,{children:[w.jsx(Pu,{visible:c,overlayProps:{blur:2}}),w.jsxs(Jt,{justify:"space-between",mb:8,p:8,children:[w.jsx(cs,{children:w.jsx(MT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(y=>({value:y.participantId,label:y.participantId})),searchable:!0,value:null,leftSection:w.jsx(t9e,{size:14}),onChange:y=>y&&h(y)})}),w.jsxs(cs,{children:[w.jsx(LEe,{allParticipants:[...e,...t],studyId:s||""}),w.jsx(In,{disabled:u.length===0||!o.isAdmin,onClick:d,color:"red",children:"Reject Participants"})]})]}),w.jsx(Jt,{direction:"column",style:{width:"100%",overflow:"auto"},children:w.jsxs(En,{striped:!0,withTableBorder:!0,children:[w.jsx(En.Thead,{children:w.jsx(En.Tr,{children:m})}),w.jsx(En.Tbody,{children:g})]})})]}):w.jsx(Jt,{justify:"center",align:"center",style:{height:"100%"},children:w.jsx(Ze,{children:"No data available"})})}const _1=14;function BEe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return w.jsxs(Jt,{ml:4,gap:4,children:[w.jsx(Wi,{label:"Completed",children:w.jsx(Kd,{variant:"light",color:"green",leftSection:w.jsx($he,{width:_1,height:_1,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),w.jsx(Wi,{label:"In Progress",children:w.jsx(Kd,{variant:"light",color:"orange",leftSection:w.jsx(Lhe,{width:_1,height:_1,style:{paddingTop:1}}),pb:1,children:t})}),w.jsx(Wi,{label:"Rejected",children:w.jsx(Kd,{variant:"light",color:"red",leftSection:w.jsx(az,{width:_1,height:_1,style:{paddingTop:1}}),pb:1,children:n})})]})}function pEt({studyId:e,refresh:t}){const[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[u,l]=k.useState(""),[c,f]=k.useState([]),[d,h]=k.useState(""),[p,m]=k.useState(!1),[g,y]=k.useState(!1),{storageEngine:v}=Qi(),b=v,E=k.useCallback(async()=>{y(!0);const O=await b.getSnapshots(e);f(O),y(!1)},[b,e]);k.useEffect(()=>{E()},[E]);const _=async()=>{m(!0),await b.createSnapshot(e,!1),E(),m(!1),await t()},x=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),E(),m(!1),await t()},S=async O=>{m(!0),await b.restoreSnapshot(e,O),E(),m(!1),await t()},C=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),E(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),E(),m(!1),await t()},D=()=>R4({title:"Create a Snapshot",children:w.jsx(Ze,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>_()}),I=O=>R4({title:"Restore Snapshot",children:w.jsx(Ze,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>S(O)});return w.jsxs(w.Fragment,{children:[w.jsx(Pu,{visible:p}),w.jsxs(Jt,{justify:"space-between",align:"center",children:[w.jsxs(we,{style:{width:"70%"},children:[w.jsx(ci,{order:5,children:"Create a Snapshot"}),w.jsxs(Ze,{children:["This will create a snapshot of the live"," ",w.jsx(Ze,{span:!0,fw:700,children:e})," ","database. It will"," ",w.jsx(Ze,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(Wi,{label:"Create a snapshot",children:w.jsx(In,{onClick:D,children:"Snapshot"})})]}),w.jsx(pl,{h:"lg"}),w.jsxs(Jt,{justify:"space-between",align:"center",children:[w.jsxs(we,{style:{width:"70%"},children:[w.jsx(ci,{order:5,children:"Archive Data"}),w.jsxs(Ze,{children:["This will create a snapshot of the live"," ",w.jsx(Ze,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(Wi,{label:"Snapshot and Delete Data",children:w.jsx(In,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),w.jsx(pl,{h:"lg"}),w.jsxs(Jt,{justify:"space-between",align:"center",children:[w.jsxs(we,{style:{width:"70%"},children:[w.jsx(ci,{order:5,children:"Delete Data"}),w.jsxs(Ze,{children:["This will delete the live"," ",w.jsx(Ze,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),w.jsx(Wi,{label:"Delete Data",children:w.jsx(In,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),w.jsx(pl,{h:"xl"}),w.jsxs(Jt,{direction:"column",children:[w.jsx(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:w.jsx(ci,{order:5,children:"Snapshots"})}),w.jsxs(we,{style:{position:"relative"},children:[w.jsx(Pu,{visible:g}),c.length>0?c.map(O=>w.jsxs(Jt,{justify:"space-between",mb:"xs",children:[w.jsx(Ze,{children:O}),w.jsxs(Jt,{direction:"row",gap:"xs",children:[w.jsx(Wi,{label:"Restore Snapshot",children:w.jsx(hm,{color:"blue",variant:"subtle",onClick:()=>{I(O)},children:w.jsx(Z8e,{})})}),w.jsx(Wi,{label:"Delete Snapshot",children:w.jsx(hm,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(O)},children:w.jsx(zhe,{})})})]})]},O)):w.jsx(Ze,{children:"No snapshots."})]})]}),w.jsxs(Ki,{opened:n,onClose:()=>{r(!1),h("")},title:w.jsx(Ze,{children:"Archive Data"}),children:[w.jsx(Ze,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),w.jsx(h0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),w.jsxs(Jt,{mt:"sm",justify:"right",children:[w.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),w.jsx(In,{color:"red",onClick:x,disabled:d!==e,children:"Archive"})]})]}),w.jsxs(Ki,{opened:i,onClose:()=>{s(!1),h("")},title:w.jsx(Ze,{children:"Delete Snapshot"}),children:[w.jsxs(Ze,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",w.jsx(Ze,{span:!0,fw:700,children:"irreversible"}),"."]}),w.jsx(h0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),w.jsxs(Jt,{mt:"sm",justify:"right",children:[w.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),w.jsx(In,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]}),w.jsxs(Ki,{opened:o,onClose:()=>{a(!1),h("")},title:w.jsx(Ze,{children:"Delete Live Data"}),children:[w.jsxs(Ze,{mb:"sm",children:["This will permanently delete the live"," ",w.jsx(Ze,{span:!0,fw:700,children:e})," ","data. This action is"," ",w.jsx(Ze,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),w.jsx(h0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),w.jsxs(Jt,{mt:"sm",justify:"right",children:[w.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),w.jsx(In,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function mEt({studyId:e}){const{storageEngine:t}=Qi(),[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[u,l]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&w.jsxs(Hu,{children:[w.jsx(xv,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),w.jsx(xv,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),w.jsx(xv,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function gEt({studyId:e,refresh:t}){const{storageEngine:n}=Qi();return w.jsx(_l,{children:w.jsxs(Da,{multiple:!0,variant:"contained",children:[w.jsxs(Da.Item,{value:"ReVISit Modes",children:[w.jsx(Da.Control,{children:w.jsx(ci,{order:5,children:"ReVISit Modes"})}),w.jsx(Da.Panel,{children:w.jsx(mEt,{studyId:e})})]},"modes"),w.jsxs(Da.Item,{value:"Data Management",children:[w.jsx(Da.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:w.jsx(ci,{order:5,children:"Data Management"})}),w.jsx(Da.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&w.jsx(pEt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function yEt(e){const{globalConfig:t}=e,{studyId:n}=R0(),[r,i]=k.useState([]),[s,o]=k.useState(void 0),[a,u]=k.useState(!1),{storageEngine:l}=Qi(),c=Lh(),{tab:f}=R0(),{user:d}=By(),h=k.useCallback(async()=>{if(u(!0),n){const y=await x3(n,t);if(!y||!l)return;await l.initializeStudyDb(n,y);const v=await l.getAllParticipantsData();i(v),o(y),u(!1)}},[t,l,n]);k.useEffect(()=>{h()},[t,l,n,h]);const[p,m,g]=k.useMemo(()=>{const y=r.filter(E=>!E.rejected&&E.completed),v=r.filter(E=>!E.rejected&&!E.completed),b=r.filter(E=>E.rejected);return[y,v,b]},[r]);return w.jsxs(w.Fragment,{children:[w.jsx(Px,{studyIds:e.globalConfig.configsList}),w.jsx(Wr.Main,{children:w.jsxs(_l,{fluid:!0,style:{height:"100%"},children:[w.jsx(Pu,{visible:a}),w.jsxs(Jt,{direction:"row",align:"center",children:[w.jsx(ci,{order:5,children:n}),w.jsx(BEe,{completed:p.length,inProgress:m.length,rejected:g.length})]}),w.jsx(pl,{h:"xs"}),w.jsxs(Ri,{variant:"outline",value:f,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[w.jsxs(Ri.List,{children:[w.jsx(Ri.Tab,{value:"table",leftSection:w.jsx(n9e,{size:16}),children:"Table View"}),w.jsx(Wi,{label:"Coming soon",position:"bottom",children:w.jsx(Ri.Tab,{value:"stats",leftSection:w.jsx(q8e,{size:16}),disabled:!0,children:"Trial Stats"})}),w.jsx(Wi,{label:"Coming soon",position:"bottom",children:w.jsx(Ri.Tab,{value:"replay",leftSection:w.jsx(J8e,{size:16}),disabled:!0,children:"Participant Replay"})}),w.jsx(Ri.Tab,{value:"manage",leftSection:w.jsx(Bhe,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),w.jsx(Ri.Panel,{value:"table",pt:"xs",children:s&&w.jsx(hEt,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),w.jsx(Ri.Panel,{value:"stats",pt:"xs",children:"statsboard"}),w.jsx(Ri.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),w.jsx(Ri.Panel,{value:"manage",pt:"xs",children:n&&d.isAdmin?w.jsx(gEt,{studyId:n,refresh:h}):w.jsx(_l,{mt:20,children:w.jsx(IT,{title:"Unauthorized Access",variant:"light",color:"red",icon:w.jsx(Fhe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Pie({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=By(),{storageEngine:o}=Qi(),[a,u]=k.useState(!1),l=R0();return k.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?w.jsx(Pu,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?w.jsx(rz,{to:"/login"}):w.jsx(w.Fragment,{children:e})}async function jEe(e,t,n){if(e instanceof il){t(!0);const r=new Pd,i=gk();try{await r0t(i,r,Obe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function vEt(){const{user:e}=By(),[t,n]=k.useState(null),[r,i]=k.useState(!1),{storageEngine:s}=Qi();return k.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?w.jsx(rz,{to:"/"}):w.jsx(_l,{children:w.jsx(Ey,{padding:"lg",children:w.jsxs(Jt,{align:"center",direction:"column",justify:"center",children:[w.jsx(Wm,{maw:200,mt:50,mb:100,src:`${qf}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsxs(w.Fragment,{children:[w.jsx(Ze,{mb:20,children:"To access admin settings, please sign in using your Google account."}),w.jsx(In,{onClick:()=>jEe(s,i,n),leftSection:w.jsx(r9e,{}),variant:"filled",children:"Sign In With Google"})]}),t?w.jsx(Kd,{size:"lg",color:"red",mt:30,children:t}):null,w.jsx(Pu,{visible:r})]})})})}var zEe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hr,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var F=["th","st","nd","rd"],P=M%100;return"["+M+(F[(P-20)%10]||F[P]||F[0])+"]"}},b=function(M,F,P){var j=String(M);return!j||j.length>=F?M:""+Array(F+1-j.length).join(P)+M},E={s:b,z:function(M){var F=-M.utcOffset(),P=Math.abs(F),j=Math.floor(P/60),z=P%60;return(F<=0?"+":"-")+b(j,2,"0")+":"+b(z,2,"0")},m:function M(F,P){if(F.date()<P.date())return-M(P,F);var j=12*(P.year()-F.year())+(P.month()-F.month()),z=F.clone().add(j,f),V=P-z<0,$=F.clone().add(j+(V?-1:1),f);return+(-(j+(P-z)/(V?z-$:$-z))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},_="en",x={};x[_]=v;var S="$isDayjsObject",C=function(M){return M instanceof O||!(!M||!M[S])},A=function M(F,P,j){var z;if(!F)return _;if(typeof F=="string"){var V=F.toLowerCase();x[V]&&(z=V),P&&(x[V]=P,z=V);var $=F.split("-");if(!z&&$.length>1)return M($[0])}else{var U=F.name;x[U]=F,z=U}return!j&&z&&(_=z),z||!j&&_},D=function(M,F){if(C(M))return M.clone();var P=typeof F=="object"?F:{};return P.date=M,P.args=arguments,new O(P)},I=E;I.l=A,I.i=C,I.w=function(M,F){return D(M,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function M(P){this.$L=A(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[S]=!0}var F=M.prototype;return F.parse=function(P){this.$d=function(j){var z=j.date,V=j.utc;if(z===null)return new Date(NaN);if(I.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var $=z.match(g);if($){var U=$[2]-1||0,W=($[7]||"0").substring(0,3);return V?new Date(Date.UTC($[1],U,$[3]||1,$[4]||0,$[5]||0,$[6]||0,W)):new Date($[1],U,$[3]||1,$[4]||0,$[5]||0,$[6]||0,W)}}return new Date(z)}(P),this.init()},F.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},F.$utils=function(){return I},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(P,j){var z=D(P);return this.startOf(j)<=z&&z<=this.endOf(j)},F.isAfter=function(P,j){return D(P)<this.startOf(j)},F.isBefore=function(P,j){return this.endOf(j)<D(P)},F.$g=function(P,j,z){return I.u(P)?this[j]:this.set(z,P)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(P,j){var z=this,V=!!I.u(j)||j,$=I.p(P),U=function(de,ye){var Ce=I.w(z.$u?Date.UTC(z.$y,ye,de):new Date(z.$y,ye,de),z);return V?Ce:Ce.endOf(l)},W=function(de,ye){return I.w(z.toDate()[de].apply(z.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(ye)),z)},B=this.$W,q=this.$M,Y=this.$D,re="set"+(this.$u?"UTC":"");switch($){case h:return V?U(1,0):U(31,11);case f:return V?U(1,q):U(0,q+1);case c:var pe=this.$locale().weekStart||0,_e=(B<pe?B+7:B)-pe;return U(V?Y-_e:Y+(6-_e),q);case l:case p:return W(re+"Hours",0);case u:return W(re+"Minutes",1);case a:return W(re+"Seconds",2);case o:return W(re+"Milliseconds",3);default:return this.clone()}},F.endOf=function(P){return this.startOf(P,!1)},F.$set=function(P,j){var z,V=I.p(P),$="set"+(this.$u?"UTC":""),U=(z={},z[l]=$+"Date",z[p]=$+"Date",z[f]=$+"Month",z[h]=$+"FullYear",z[u]=$+"Hours",z[a]=$+"Minutes",z[o]=$+"Seconds",z[s]=$+"Milliseconds",z)[V],W=V===l?this.$D+(j-this.$W):j;if(V===f||V===h){var B=this.clone().set(p,1);B.$d[U](W),B.init(),this.$d=B.set(p,Math.min(this.$D,B.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function(P,j){return this.clone().$set(P,j)},F.get=function(P){return this[I.p(P)]()},F.add=function(P,j){var z,V=this;P=Number(P);var $=I.p(j),U=function(q){var Y=D(V);return I.w(Y.date(Y.date()+Math.round(q*P)),V)};if($===f)return this.set(f,this.$M+P);if($===h)return this.set(h,this.$y+P);if($===l)return U(1);if($===c)return U(7);var W=(z={},z[a]=r,z[u]=i,z[o]=n,z)[$]||1,B=this.$d.getTime()+P*W;return I.w(B,this)},F.subtract=function(P,j){return this.add(-1*P,j)},F.format=function(P){var j=this,z=this.$locale();if(!this.isValid())return z.invalidDate||m;var V=P||"YYYY-MM-DDTHH:mm:ssZ",$=I.z(this),U=this.$H,W=this.$m,B=this.$M,q=z.weekdays,Y=z.months,re=z.meridiem,pe=function(ye,Ce,ve,qe){return ye&&(ye[Ce]||ye(j,V))||ve[Ce].slice(0,qe)},_e=function(ye){return I.s(U%12||12,ye,"0")},de=re||function(ye,Ce,ve){var qe=ye<12?"AM":"PM";return ve?qe.toLowerCase():qe};return V.replace(y,function(ye,Ce){return Ce||function(ve){switch(ve){case"YY":return String(j.$y).slice(-2);case"YYYY":return I.s(j.$y,4,"0");case"M":return B+1;case"MM":return I.s(B+1,2,"0");case"MMM":return pe(z.monthsShort,B,Y,3);case"MMMM":return pe(Y,B);case"D":return j.$D;case"DD":return I.s(j.$D,2,"0");case"d":return String(j.$W);case"dd":return pe(z.weekdaysMin,j.$W,q,2);case"ddd":return pe(z.weekdaysShort,j.$W,q,3);case"dddd":return q[j.$W];case"H":return String(U);case"HH":return I.s(U,2,"0");case"h":return _e(1);case"hh":return _e(2);case"a":return de(U,W,!0);case"A":return de(U,W,!1);case"m":return String(W);case"mm":return I.s(W,2,"0");case"s":return String(j.$s);case"ss":return I.s(j.$s,2,"0");case"SSS":return I.s(j.$ms,3,"0");case"Z":return $}return null}(ye)||$.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(P,j,z){var V,$=this,U=I.p(j),W=D(P),B=(W.utcOffset()-this.utcOffset())*r,q=this-W,Y=function(){return I.m($,W)};switch(U){case h:V=Y()/12;break;case f:V=Y();break;case d:V=Y()/3;break;case c:V=(q-B)/6048e5;break;case l:V=(q-B)/864e5;break;case u:V=q/i;break;case a:V=q/r;break;case o:V=q/n;break;default:V=q}return z?V:I.a(V)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return x[this.$L]},F.locale=function(P,j){if(!P)return this.$L;var z=this.clone(),V=A(P,j,!0);return V&&(z.$L=V),z},F.clone=function(){return I.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},M}(),R=O.prototype;return D.prototype=R,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(M){R[M[1]]=function(F){return this.$g(F,M[0],M[1])}}),D.extend=function(M,F){return M.$i||(M(F,O,D),M.$i=!0),D},D.locale=A,D.isDayjs=C,D.unix=function(M){return D(1e3*M)},D.en=x[_],D.Ls=x,D.p={},D})})(zEe);var bEt=zEe.exports;const At=pa(bEt);function _Et({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>At(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function EEt({formatter:e,...t}){return(e||_Et)(t)}function wEt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function UEe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=wEt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?UEe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function xEt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function SEt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function zH({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=xEt(i.key);if(s){i.preventDefault();const o=SEt(e);UEe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var VEe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hr,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",E=y+"|"+b,_=r[E];return _||(_=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[E]=_),_}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,E=n[v];E>=0&&(m[E]=parseInt(b,10))}var _=m[3],x=_===24?0:_,S=m[0]+"-"+m[1]+"-"+m[2]+" "+x+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(S).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(x,S,C){var A=x-60*S*1e3,D=l(A,C);if(S===D)return[A,S];var I=l(A-=60*(D-S)*1e3,C);return D===I?[A,D]:[x-60*Math.min(D,I)*1e3,Math.max(D,I)]}(o.utc(d,m).valueOf(),y,g),b=v[0],E=v[1],_=o(b).utcOffset(E);return _.$x.$timezone=g,_},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(VEe);var TEt=VEe.exports;const CEt=pa(TEt);var HEe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hr,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(_){_===void 0&&(_="");var x=_.match(r);if(!x)return null;var S=(""+x[0]).match(i)||["-",0,0],C=S[0],A=60*+S[1]+ +S[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+E,n)).$offset=v,b.$x.$localOffset=E}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(HEe);var AEt=HEe.exports;const DEt=pa(AEt);At.extend(DEt);At.extend(CEt);function IEt(e,t){return t?At(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Oie=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=IEt(e,t);return n==="remove"&&(r*=-1),At(e).add(r,"minutes").toDate()};function rm(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Oie(i,n,e)):Oie(t,n,e)}function NEt({minDate:e,maxDate:t,timezone:n}){const r=rm("add",new Date,n);return!e&&!t?r:e&&At(r).isBefore(e)?e:t&&At(r).isAfter(t)?t:r}const kEt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},REt=k.createContext(kEt);function qu(){const e=k.useContext(REt),t=k.useCallback(o=>o||e.locale,[e.locale]),n=k.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=k.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=k.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=k.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function PEt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function qEe({value:e,type:t,name:n,form:r}){return w.jsx("input",{type:"hidden",value:PEt(e,t),name:n,form:r})}qEe.displayName="@mantine/dates/HiddenDatesInput";var WEe={day:"m_396ce5cb"};const OEt={},MEt=(e,{size:t})=>({day:{"--day-size":cn(t,"day-size")}}),UH=Ve((e,t)=>{const n=Ie("Day",OEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:E,..._}=n,x=Et({name:f||"Day",classes:WEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MEt,rootSelector:"day"}),S=qu();return w.jsx(Yi,{...x("day",{style:b?{display:"none"}:void 0}),component:E?"div":"button",ref:t,disabled:c,"data-today":At(l).isSame(rm("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":E||void 0,unstyled:a,..._,children:(m==null?void 0:m(l))||l.getDate()})});UH.classes=WEe;UH.displayName="@mantine/dates/Day";function $Et({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=At().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(At(r).add(s,"days").locale(e).format(t)):i.push(t(At(r).add(s,"days").toDate()));return i}var GEe={weekday:"m_18a3eca"};const FEt={},LEt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":eo(t),"--wr-spacing":ku(t)}}),VH=Ve((e,t)=>{const n=Ie("WeekdaysRow",FEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=Et({name:h||"WeekdaysRow",classes:GEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LEt,rootSelector:"weekdaysRow"}),g=qu(),y=$Et({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>w.jsx(d,{...m("weekday"),children:v},b));return w.jsx(we,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});VH.classes=GEe;VH.displayName="@mantine/dates/WeekdaysRow";function BEt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function jEt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function zEt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=BEt(s,t),a=jEt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function YEe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function KEe(e,t){return t instanceof Date?At(e).isAfter(At(t).subtract(1,"day"),"day"):!0}function XEe(e,t){return t instanceof Date?At(e).isBefore(At(t).add(1,"day"),"day"):!0}function UEt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return XEe(c,n)&&KEe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||YEe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>At().isSame(c,"date"));return l||a[0]}var QEe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const VEt={withCellSpacing:!0},K3=Ve((e,t)=>{const n=Ie("Month",VEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:E,hideWeekdays:_,getDayAriaLabel:x,static:S,__getDayRef:C,__onDayKeyDown:A,__onDayClick:D,__onDayMouseEnter:I,__preventFocus:O,__stopPropagation:R,withCellSpacing:M,size:F,...P}=n,j=Et({name:l||"Month",classes:QEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),z=qu(),V=zEt({month:h,firstDayOfWeek:z.getFirstDayOfWeek(f),consistentWeeks:z.consistentWeeks}),$=UEt(V,y,v,m,g,E,h),{resolvedClassNames:U,resolvedStyles:W}=kh({classNames:r,styles:o,props:n}),B=V.map((q,Y)=>{const re=q.map((pe,_e)=>{const de=!YEe(pe,h),ye=(x==null?void 0:x(pe))||At(pe).locale(c||z.locale).format("D MMMM YYYY"),Ce=m==null?void 0:m(pe),ve=At(pe).isSame($,"date");return w.jsx("td",{...j("monthCell"),"data-with-spacing":M||void 0,children:w.jsx(UH,{__staticSelector:l||"Month",classNames:U,styles:W,unstyled:a,"data-mantine-stop-propagation":R||void 0,renderDay:b,date:pe,size:F,weekend:z.getWeekendDays(p).includes(pe.getDay()),outside:de,hidden:E?de:!1,"aria-label":ye,static:S,disabled:(g==null?void 0:g(pe))||!XEe(pe,v)||!KEe(pe,y),ref:qe=>C==null?void 0:C(Y,_e,qe),...Ce,onKeyDown:qe=>{var He;(He=Ce==null?void 0:Ce.onKeyDown)==null||He.call(Ce,qe),A==null||A(qe,{rowIndex:Y,cellIndex:_e,date:pe})},onMouseEnter:qe=>{var He;(He=Ce==null?void 0:Ce.onMouseEnter)==null||He.call(Ce,qe),I==null||I(qe,pe)},onClick:qe=>{var He;(He=Ce==null?void 0:Ce.onClick)==null||He.call(Ce,qe),D==null||D(qe,pe)},onMouseDown:qe=>{var He;(He=Ce==null?void 0:Ce.onMouseDown)==null||He.call(Ce,qe),O&&qe.preventDefault()},tabIndex:O||!ve?-1:0})},pe.toString())});return w.jsx("tr",{...j("monthRow"),children:re},Y)});return w.jsxs(we,{component:"table",...j("month"),size:F,ref:t,...P,children:[!_&&w.jsx("thead",{...j("monthThead"),children:w.jsx(VH,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:U,styles:W,unstyled:a})}),w.jsx("tbody",{...j("monthTbody"),children:B})]})});K3.classes=QEe;K3.displayName="@mantine/dates/Month";var JEe={pickerControl:"m_dc6a3c71"};const HEt={},qEt=(e,{size:t})=>({pickerControl:{"--dpc-fz":eo(t),"--dpc-size":cn(t,"dpc-size")}}),X3=Ve((e,t)=>{const n=Ie("PickerControl",HEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=Et({name:d||"PickerControl",classes:JEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qEt,rootSelector:"pickerControl"});return w.jsx(Yi,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});X3.classes=JEe;X3.displayName="@mantine/dates/PickerControl";function ZEe(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"year")||n&&At(e).isAfter(n,"year"))}function WEt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!ZEe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"year"));return o||i[0]}function ewe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var twe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const GEt={yearsListFormat:"YYYY",withCellSpacing:!0},Q3=Ve((e,t)=>{const n=Ie("YearsList",GEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:E,__stopPropagation:_,withCellSpacing:x,size:S,...C}=n,A=Et({name:m||"YearsList",classes:twe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),D=qu(),I=ewe(l),O=WEt(I,d,h,p),R=I.map((M,F)=>{const P=M.map((j,z)=>{const V=p==null?void 0:p(j),$=At(j).isSame(O,"year");return w.jsx("td",{...A("yearsListCell"),"data-with-spacing":x||void 0,children:w.jsx(X3,{...A("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":_||void 0,disabled:ZEe(j,d,h),ref:U=>g==null?void 0:g(F,z,U),...V,onKeyDown:U=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:j})},onClick:U=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,U),v==null||v(U,j)},onMouseEnter:U=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,U),b==null||b(U,j)},onMouseDown:U=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,U),E&&U.preventDefault()},tabIndex:E||!$?-1:0,children:At(j).locale(D.getLocale(f)).format(c)})},z)});return w.jsx("tr",{...A("yearsListRow"),children:P},F)});return w.jsx(we,{component:"table",ref:t,size:S,...A("yearsList"),...C,children:w.jsx("tbody",{children:R})})});Q3.classes=twe;Q3.displayName="@mantine/dates/YearsList";function nwe(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"month")||n&&At(e).isAfter(n,"month"))}function YEt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!nwe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"month"));return o||i[0]}function KEt(e){const t=At(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(At(t).add(r,"months").toDate()),r+=1;return n}var rwe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const XEt={monthsListFormat:"MMM",withCellSpacing:!0},J3=Ve((e,t)=>{const n=Ie("MonthsList",XEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:E,__stopPropagation:_,withCellSpacing:x,size:S,...C}=n,A=Et({name:l||"MonthsList",classes:rwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),D=qu(),I=KEt(c),O=YEt(I,h,p,m),R=I.map((M,F)=>{const P=M.map((j,z)=>{const V=m==null?void 0:m(j),$=At(j).isSame(O,"month");return w.jsx("td",{...A("monthsListCell"),"data-with-spacing":x||void 0,children:w.jsx(X3,{...A("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":_||void 0,disabled:nwe(j,h,p),ref:U=>g==null?void 0:g(F,z,U),...V,onKeyDown:U=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:j})},onClick:U=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,U),v==null||v(U,j)},onMouseEnter:U=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,U),b==null||b(U,j)},onMouseDown:U=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,U),E&&U.preventDefault()},tabIndex:E||!$?-1:0,children:At(j).locale(D.getLocale(d)).format(f)})},z)});return w.jsx("tr",{...A("monthsListRow"),children:P},F)});return w.jsx(we,{component:"table",ref:t,size:S,...A("monthsList"),...C,children:w.jsx("tbody",{children:R})})});J3.classes=rwe;J3.displayName="@mantine/dates/MonthsList";var iwe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const QEt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},JEt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":cn(t,"dch-control-size"),"--dch-fz":eo(t)}}),ng=Ve((e,t)=>{const n=Ie("CalendarHeader",QEt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:E,withNext:_,withPrevious:x,__staticSelector:S,__preventFocus:C,__stopPropagation:A,...D}=n,I=Et({name:S||"CalendarHeader",classes:iwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JEt,rootSelector:"calendarHeader"}),O=C?R=>R.preventDefault():void 0;return w.jsxs(we,{...I("calendarHeader"),ref:t,...D,children:[x&&w.jsx(Yi,{...I("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||w.jsx(tb,{...I("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),w.jsx(Yi,{component:b?"button":"div",...I("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":E,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),_&&w.jsx(Yi,{...I("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||w.jsx(tb,{...I("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});ng.classes=iwe;ng.displayName="@mantine/dates/CalendarHeader";function ZEt(e){const t=ewe(e);return[t[0][0],t[3][0]]}const ewt={decadeLabelFormat:"YYYY"},Z3=Ve((e,t)=>{const n=Ie("DecadeLevel",ewt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,nextDisabled:_,previousDisabled:x,levelControlAriaLabel:S,withNext:C,withPrevious:A,decadeLabelFormat:D,classNames:I,styles:O,unstyled:R,__staticSelector:M,__stopPropagation:F,size:P,...j}=n,z=qu(),[V,$]=ZEt(r),U={__staticSelector:M||"DecadeLevel",classNames:I,styles:O,unstyled:R,size:P},W=typeof _=="boolean"?_:o?!At($).endOf("year").isBefore(o):!1,B=typeof x=="boolean"?x:s?!At(V).startOf("year").isAfter(s):!1,q=(Y,re)=>At(Y).locale(i||z.locale).format(re);return w.jsxs(we,{"data-decade-level":!0,size:P,ref:t,...j,children:[w.jsx(ng,{label:typeof D=="function"?D(V,$):`${q(V,D)}  ${q($,D)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,nextDisabled:W,previousDisabled:B,hasNextLevel:!1,levelControlAriaLabel:S,withNext:C,withPrevious:A,...U}),w.jsx(Q3,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...U})]})});Z3.classes={...Q3.classes,...ng.classes};Z3.displayName="@mantine/dates/DecadeLevel";const twt={yearLabelFormat:"YYYY"},eO=Ve((e,t)=>{const n=Ie("YearLevel",twt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,onLevelClick:_,nextDisabled:x,previousDisabled:S,hasNextLevel:C,levelControlAriaLabel:A,withNext:D,withPrevious:I,yearLabelFormat:O,__staticSelector:R,__stopPropagation:M,size:F,classNames:P,styles:j,unstyled:z,...V}=n,$=qu(),U={__staticSelector:R||"YearLevel",classNames:P,styles:j,unstyled:z,size:F},W=typeof x=="boolean"?x:o?!At(r).endOf("year").isBefore(o):!1,B=typeof S=="boolean"?S:s?!At(r).startOf("year").isAfter(s):!1;return w.jsxs(we,{"data-year-level":!0,size:F,ref:t,...V,children:[w.jsx(ng,{label:typeof O=="function"?O(r):At(r).locale(i||$.locale).format(O),__preventFocus:p,__stopPropagation:M,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:E,onLevelClick:_,nextDisabled:W,previousDisabled:B,hasNextLevel:C,levelControlAriaLabel:A,withNext:D,withPrevious:I,...U}),w.jsx(J3,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:M,withCellSpacing:h,...U})]})});eO.classes={...ng.classes,...J3.classes};eO.displayName="@mantine/dates/YearLevel";const nwt={monthLabelFormat:"MMMM YYYY"},tO=Ve((e,t)=>{const n=Ie("MonthLevel",nwt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:E,__preventFocus:_,__stopPropagation:x,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:D,onNext:I,onPrevious:O,onLevelClick:R,nextDisabled:M,previousDisabled:F,hasNextLevel:P,levelControlAriaLabel:j,withNext:z,withPrevious:V,monthLabelFormat:$,classNames:U,styles:W,unstyled:B,__staticSelector:q,size:Y,static:re,...pe}=n,_e=qu(),de={__staticSelector:q||"MonthLevel",classNames:U,styles:W,unstyled:B,size:Y},ye=typeof M=="boolean"?M:f?!At(r).endOf("month").isBefore(f):!1,Ce=typeof F=="boolean"?F:c?!At(r).startOf("month").isAfter(c):!1;return w.jsxs(we,{"data-month-level":!0,size:Y,ref:t,...pe,children:[w.jsx(ng,{label:typeof $=="function"?$(r):At(r).locale(i||_e.locale).format($),__preventFocus:_,__stopPropagation:x,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:D,onNext:I,onPrevious:O,onLevelClick:R,nextDisabled:ye,previousDisabled:Ce,hasNextLevel:P,levelControlAriaLabel:j,withNext:z,withPrevious:V,...de}),w.jsx(K3,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:_,__stopPropagation:x,static:re,withCellSpacing:E,...de})]})});tO.classes={...K3.classes,...ng.classes};tO.displayName="@mantine/dates/MonthLevel";var swe={levelsGroup:"m_30b26e33"};const rwt={},rg=Ve((e,t)=>{const n=Ie("LevelsGroup",rwt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=Et({name:l||"LevelsGroup",classes:swe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return w.jsx(we,{ref:t,...f("levelsGroup"),...c})});rg.classes=swe;rg.displayName="@mantine/dates/LevelsGroup";const iwt={numberOfColumns:1},nO=Ve((e,t)=>{const n=Ie("DecadeLevelGroup",iwt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:E,classNames:_,styles:x,unstyled:S,__staticSelector:C,__stopPropagation:A,numberOfColumns:D,levelControlAriaLabel:I,decadeLabelFormat:O,size:R,vars:M,...F}=n,P=k.useRef([]),j=Array(D).fill(0).map((z,V)=>{const $=At(r).add(V*10,"years").toDate();return w.jsx(Z3,{size:R,yearsListFormat:a,decade:$,withNext:V===D-1,withPrevious:V===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(U,W)=>zH({levelIndex:V,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:U,controlsRef:P}),__getControlRef:(U,W,B)=>{Array.isArray(P.current[V])||(P.current[V]=[]),Array.isArray(P.current[V][U])||(P.current[V][U]=[]),P.current[V][U][W]=B},levelControlAriaLabel:typeof I=="function"?I($):I,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:E,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:_,styles:x,unstyled:S,withCellSpacing:f},V)});return w.jsx(rg,{classNames:_,styles:x,__staticSelector:C||"DecadeLevelGroup",ref:t,size:R,unstyled:S,...F,children:j})});nO.classes={...rg.classes,...Z3.classes};nO.displayName="@mantine/dates/DecadeLevelGroup";const swt={numberOfColumns:1},rO=Ve((e,t)=>{const n=Ie("YearLevelGroup",swt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:E,previousDisabled:_,hasNextLevel:x,classNames:S,styles:C,unstyled:A,__staticSelector:D,__stopPropagation:I,numberOfColumns:O,levelControlAriaLabel:R,yearLabelFormat:M,size:F,vars:P,...j}=n,z=k.useRef([]),V=Array(O).fill(0).map(($,U)=>{const W=At(r).add(U,"years").toDate();return w.jsx(eO,{size:F,monthsListFormat:a,year:W,withNext:U===O-1,withPrevious:U===0,yearLabelFormat:M,__stopPropagation:I,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(B,q)=>zH({levelIndex:U,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:B,controlsRef:z}),__getControlRef:(B,q,Y)=>{Array.isArray(z.current[U])||(z.current[U]=[]),Array.isArray(z.current[U][B])||(z.current[U][B]=[]),z.current[U][B][q]=Y},levelControlAriaLabel:typeof R=="function"?R(W):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:E,previousDisabled:_,hasNextLevel:x,getMonthControlProps:u,classNames:S,styles:C,unstyled:A,__staticSelector:D||"YearLevelGroup",withCellSpacing:f},U)});return w.jsx(rg,{classNames:S,styles:C,__staticSelector:D||"YearLevelGroup",ref:t,size:F,unstyled:A,...j,children:V})});rO.classes={...eO.classes,...rg.classes};rO.displayName="@mantine/dates/YearLevelGroup";const owt={numberOfColumns:1},iO=Ve((e,t)=>{const n=Ie("MonthLevelGroup",owt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:E,previousIcon:_,nextLabel:x,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:D,nextDisabled:I,previousDisabled:O,hasNextLevel:R,classNames:M,styles:F,unstyled:P,numberOfColumns:j,levelControlAriaLabel:z,monthLabelFormat:V,__staticSelector:$,__stopPropagation:U,size:W,static:B,vars:q,...Y}=n,re=k.useRef([]),pe=Array(j).fill(0).map((_e,de)=>{const ye=At(r).add(de,"months").toDate();return w.jsx(tO,{month:ye,withNext:de===j-1,withPrevious:de===0,monthLabelFormat:V,__stopPropagation:U,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ce,ve)=>zH({levelIndex:de,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ce,controlsRef:re}),__getDayRef:(Ce,ve,qe)=>{Array.isArray(re.current[de])||(re.current[de]=[]),Array.isArray(re.current[de][Ce])||(re.current[de][Ce]=[]),re.current[de][Ce][ve]=qe},levelControlAriaLabel:typeof z=="function"?z(ye):z,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:E,previousIcon:_,nextLabel:x,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:D,nextDisabled:I,previousDisabled:O,hasNextLevel:R,classNames:M,styles:F,unstyled:P,__staticSelector:$||"MonthLevelGroup",size:W,static:B,withCellSpacing:v},de)});return w.jsx(rg,{classNames:M,styles:F,__staticSelector:$||"MonthLevelGroup",ref:t,size:W,...Y,children:pe})});iO.classes={...rg.classes,...tO.classes};iO.displayName="@mantine/dates/MonthLevelGroup";var owe={input:"m_6fa5e2aa"};const awt={},sO=Ve((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:E,readOnly:_,disabled:x,value:S,name:C,form:A,type:D,...I}=ude("PickerInputBase",awt,e),O=b||(g&&E&&!_&&!x?w.jsx(Hm,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),R=()=>{D==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return w.jsxs(w.Fragment,{children:[c==="modal"&&!_&&w.jsx(Ki,{opened:p,onClose:R,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),w.jsx(Yr.Wrapper,{...r,children:w.jsxs(Rr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||_,onClose:()=>{var M;(M=u==null?void 0:u.onClose)==null||M.call(u),R()},children:[w.jsx(Rr.Target,{children:w.jsx(Yr,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":_||void 0,disabled:x,component:"button",type:"button",multiline:!0,onClick:M=>{m==null||m(M),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Ai(owe.input,s==null?void 0:s.input)},...I,children:d||w.jsx(Yr.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),w.jsx(Rr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),w.jsx(qEe,{value:S,name:C,form:A,type:D})]})});sO.classes=owe;sO.displayName="@mantine/dates/PickerInputBase";const Mie=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function HH({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=k.useRef(e),o=qu(),[a,u,l]=ks({value:rm("add",t,o.getTimezone(),!i),defaultValue:rm("add",n,o.getTimezone(),!i),finalValue:Mie(e),onChange:f=>{r==null||r(rm("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Mie(e),u(c))),[c,u,l]}function y6(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function uwt(e){return e===0?"month":e===1?"year":"decade"}function zE(e,t,n){return uwt(ff(y6(e,0),y6(t,0),y6(n,2)))}const lwt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},oO=Ve((e,t)=>{const n=Ie("Calendar",lwt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:E,firstDayOfWeek:_,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:D,hideOutsideDates:I,hideWeekdays:O,getDayAriaLabel:R,monthLabelFormat:M,nextIcon:F,previousIcon:P,__onDayClick:j,__onDayMouseEnter:z,withCellSpacing:V,monthsListFormat:$,getMonthControlProps:U,yearLabelFormat:W,yearsListFormat:B,getYearControlProps:q,decadeLabelFormat:Y,classNames:re,styles:pe,unstyled:_e,minDate:de,maxDate:ye,locale:Ce,__staticSelector:ve,size:qe,__preventFocus:He,__stopPropagation:ht,onNextDecade:rt,onPreviousDecade:Pe,onNextYear:Be,onPreviousYear:Xe,onNextMonth:mt,onPreviousMonth:Ft,static:bt,__timezoneApplied:G,...ie}=n,{resolvedClassNames:me,resolvedStyles:J}=kh({classNames:re,styles:pe,props:n}),[se,ce]=ks({value:a?zE(a,s,i):void 0,defaultValue:o?zE(o,s,i):void 0,finalValue:zE(void 0,s,i),onChange:u}),[Se,Te]=HH({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!G}),Ge={__staticSelector:ve||"Calendar",styles:J,classNames:me,unstyled:_e,size:qe},je=qu(),Ct=h||d||1,Ot=Se||rm("add",new Date,je.getTimezone()),Dt=()=>{const fn=At(Ot).add(Ct,"month").toDate();mt==null||mt(fn),Te(fn)},Vt=()=>{const fn=At(Ot).subtract(Ct,"month").toDate();Ft==null||Ft(fn),Te(fn)},Zt=()=>{const fn=At(Ot).add(Ct,"year").toDate();Be==null||Be(fn),Te(fn)},an=()=>{const fn=At(Ot).subtract(Ct,"year").toDate();Xe==null||Xe(fn),Te(fn)},gr=()=>{const fn=At(Ot).add(10*Ct,"year").toDate();rt==null||rt(fn),Te(fn)},lr=()=>{const fn=At(Ot).subtract(10*Ct,"year").toDate();Pe==null||Pe(fn),Te(fn)};return w.jsxs(we,{ref:t,size:qe,"data-calendar":!0,...ie,children:[se==="month"&&w.jsx(iO,{month:Ot,minDate:de,maxDate:ye,firstDayOfWeek:_,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:D,hideOutsideDates:I,hideWeekdays:O,getDayAriaLabel:R,onNext:Dt,onPrevious:Vt,hasNextLevel:i!=="month",onLevelClick:()=>ce("year"),numberOfColumns:d,locale:Ce,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:P,monthLabelFormat:M,__onDayClick:j,__onDayMouseEnter:z,__preventFocus:He,__stopPropagation:ht,static:bt,withCellSpacing:V,...Ge}),se==="year"&&w.jsx(rO,{year:Ot,numberOfColumns:d,minDate:de,maxDate:ye,monthsListFormat:$,getMonthControlProps:U,locale:Ce,onNext:Zt,onPrevious:an,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>ce("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:P,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(fn,Xr)=>{E&&Te(Xr),ce(zE("month",s,i)),g==null||g(Xr)},__preventFocus:He,__stopPropagation:ht,withCellSpacing:V,...Ge}),se==="decade"&&w.jsx(nO,{decade:Ot,minDate:de,maxDate:ye,yearsListFormat:B,getYearControlProps:q,locale:Ce,onNext:gr,onPrevious:lr,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:P,decadeLabelFormat:Y,__onControlMouseEnter:y,__onControlClick:(fn,Xr)=>{b&&Te(Xr),ce(zE("year",s,i)),m==null||m(Xr)},__preventFocus:He,__stopPropagation:ht,withCellSpacing:V,...Ge})]})});oO.classes={...nO.classes,...rO.classes,...iO.classes};oO.displayName="@mantine/dates/Calendar";function cwt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:E,onPreviousYear:_,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:D,firstDayOfWeek:I,weekdayFormat:O,weekendDays:R,getDayProps:M,excludeDate:F,renderDay:P,hideOutsideDates:j,hideWeekdays:z,getDayAriaLabel:V,monthLabelFormat:$,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:B,yearsListFormat:q,getYearControlProps:Y,decadeLabelFormat:re,allowSingleDateInRange:pe,allowDeselect:_e,minDate:de,maxDate:ye,locale:Ce,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:E,onPreviousYear:_,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:D,firstDayOfWeek:I,weekdayFormat:O,weekendDays:R,getDayProps:M,excludeDate:F,renderDay:P,hideOutsideDates:j,hideWeekdays:z,getDayAriaLabel:V,monthLabelFormat:$,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:B,yearsListFormat:q,getYearControlProps:Y,decadeLabelFormat:re,allowSingleDateInRange:pe,allowDeselect:_e,minDate:de,maxDate:ye,locale:Ce},others:ve}}function $ie(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return At(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&At(n[1]).endOf("day").add(1,"ms").isAfter(e)}function fwt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=HH({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=k.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=k.useState(null),m=x=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(At(x).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[x,f];S.sort((C,A)=>C.getTime()-A.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&At(x).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([x,null]),p(null),d(x);return}if(e==="multiple"){l.some(S=>At(S).isSame(x,t))?c(l.filter(S=>!At(S).isSame(x,t))):c([...l,x]);return}l&&o&&At(x).isSame(l,t)?c(null):c(x)},g=x=>f instanceof Date&&h instanceof Date?$ie(x,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?$ie(x,l):!1,y=e==="range"?x=>{a==null||a(x),p(null)}:a,v=x=>l[0]instanceof Date&&At(x).isSame(l[0],t)?!(h&&At(h).isBefore(l[0])):!1,b=x=>l[1]instanceof Date?At(x).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:At(h).isBefore(l[0])&&At(x).isSame(l[0],t),E=x=>{if(e==="range")return{selected:l.some(C=>C&&At(C).isSame(x,t)),inRange:g(x),firstInRange:v(x),lastInRange:b(x),"data-autofocus":!!l[0]&&At(l[0]).isSame(x,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&At(C).isSame(x,t)),"data-autofocus":!!l[0]&&At(l[0]).isSame(x,t)||void 0};const S=At(l).isSame(x,t);return{selected:S,"data-autofocus":S||void 0}},_=e==="range"&&f?p:()=>{};return k.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:_,getControlProps:E,_value:l,setValue:c}}const dwt={type:"default",defaultLevel:"month",numberOfColumns:1},aO=Ve((e,t)=>{const n=Ie("DatePicker",dwt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...E}=n,{onDateChange:_,onRootMouseLeave:x,onHoveredDateChange:S,getControlProps:C}=fwt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:D}=kh({classNames:r,styles:i,props:n}),I=qu();return w.jsx(oO,{ref:t,minLevel:"month",classNames:A,styles:D,__staticSelector:c||"DatePicker",onMouseLeave:x,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,R)=>{S(R),y==null||y(O,R)},__onDayClick:(O,R)=>{_(R),v==null||v(O,R)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...E,date:rm("add",E.date,I.getTimezone(),b),__timezoneApplied:!0})});aO.classes=oO.classes;aO.displayName="@mantine/dates/DatePicker";function hwt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=qu(),[f,d]=_v(!1),[h,p]=HH({type:e,value:t,defaultValue:n,onChange:r}),m=EEt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((E,_)=>E.getTime()-_.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const pwt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},qH=Ve((e,t)=>{const n=Ie("DatePickerInput",pwt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:E,defaultDate:_,valueFormatter:x,...S}=n,{resolvedClassNames:C,resolvedStyles:A}=kh({classNames:c,styles:f,props:n}),{calendarProps:D,others:I}=cwt(S),{_value:O,setValue:R,formattedValue:M,dropdownHandlers:F,dropdownOpened:P,onClear:j,shouldClear:z}=hwt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:x}),V=Array.isArray(O)?O[0]||_:O||_,$=qu();return w.jsx(sO,{formattedValue:M,dropdownOpened:P,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:j,shouldClear:z,value:O,size:p,variant:m,dropdownType:g,...I,type:r,__staticSelector:"DatePickerInput",children:w.jsx(aO,{...D,size:p,variant:m,type:r,value:O,defaultDate:V||NEt({maxDate:b,minDate:v,timezone:$.getTimezone()}),onChange:R,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:rm("add",D.date,$.getTimezone()),__timezoneApplied:!0})})});qH.classes={...sO.classes,...aO.classes};qH.displayName="@mantine/dates/DatePickerInput";var awe={exports:{}},mwt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gwt=mwt,ywt=gwt;function uwe(){}function lwe(){}lwe.resetWarningCache=uwe;var vwt=function(){function e(r,i,s,o,a,u){if(u!==ywt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:lwe,resetWarningCache:uwe};return n.PropTypes=n,n};awe.exports=vwt();var bwt=awe.exports;const Fie=pa(bwt),Lie={};function F8(e,t){e===void 0&&(e=Lie),t===void 0&&(t=Lie);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var _wt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ewt=Object.prototype.hasOwnProperty;function L8(e,t){return Ewt.call(e,t)}function B8(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)L8(e,i)&&r.push(i);return r}function Su(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function j8(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Lg(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function cwe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function z8(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(z8(e[t]))return!0}else if(typeof e=="object"){for(var r=B8(e),i=r.length,s=0;s<i;s++)if(z8(e[r[s]]))return!0}}return!1}function Bie(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var fwe=function(e){_wt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Bie(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Bie(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),bi=fwe,wwt=Su,uv={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Tk(n,this.path);r&&(r=Su(r));var i=b0(n,{op:"remove",path:this.from}).removed;return b0(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Tk(n,this.from);return b0(n,{op:"add",path:this.path,value:Su(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:KS(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},xwt={add:function(e,t,n){return j8(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:uv.move,copy:uv.copy,test:uv.test,_get:uv._get};function Tk(e,t){if(t=="")return e;var n={op:"_get",path:t};return b0(e,n),n.value}function b0(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Ck(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Tk(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=KS(e,t.value),o.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Su(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Ck;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=cwe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!j8(h))throw new bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);j8(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=xwt[t.op].call(t,l,h,e);if(o.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=uv[t.op].call(t,l,h,e);if(o.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function uO(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Su(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=b0(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Swt(e,t,n){var r=b0(e,t);if(r.test===!1)throw new bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Ck(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(uv[e.op]){if(typeof e.path!="string")throw new bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&z8(e.value))throw new bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=dwe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function dwe(e,t,n){try{if(!Array.isArray(e))throw new bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)uO(Su(t),Su(e),n||!0);else{n=n||Ck;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof bi)return i;throw i}}function KS(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!KS(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!KS(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Twt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:bi,_areEquals:KS,applyOperation:b0,applyPatch:uO,applyReducer:Swt,deepClone:wwt,getValueByPointer:Tk,validate:dwe,validator:Ck},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var WH=new WeakMap,Cwt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Awt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Dwt(e){return WH.get(e)}function Iwt(e,t){return e.observers.get(t)}function Nwt(e,t){e.observers.delete(t.callback)}function kwt(e,t){t.unobserve()}function Rwt(e,t){var n=[],r,i=Dwt(e);if(!i)i=new Cwt(e),WH.set(e,i);else{var s=Iwt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Su(e),t){r.callback=t,r.next=null;var o=function(){U8(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){U8(r),clearTimeout(r.next),Nwt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Awt(t,r)),r}function U8(e,t){t===void 0&&(t=!1);var n=WH.get(e.object);GH(n.value,e.object,e.patches,"",t),e.patches.length&&uO(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function GH(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=B8(t),o=B8(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(L8(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?GH(c,f,n,r+"/"+Lg(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Lg(l),value:Su(c)}),n.push({op:"replace",path:r+"/"+Lg(l),value:Su(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Lg(l),value:Su(c)}),n.push({op:"remove",path:r+"/"+Lg(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!L8(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Lg(l),value:Su(t[l])})}}}function Pwt(e,t,n){n===void 0&&(n=!1);var r=[];return GH(e,t,r,"",n),r}const Owt=Object.freeze(Object.defineProperty({__proto__:null,compare:Pwt,generate:U8,observe:Rwt,unobserve:kwt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Twt,Owt,{JsonPatchError:fwe,deepClone:Su,escapePathComponent:Lg,unescapePathComponent:cwe});var Mwt=/("(?:[^\\"]|\\.)*")|[:,]/g,$wt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,E,_;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),E=JSON.stringify(a,s),E===void 0)return E;if(g=i-u.length-l,E.length<=g&&(v=E.replace(Mwt,function(x,S){return S||x+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(E),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",_=o(a[h],y,p.length+(f===g-1?0:1)),_!==void 0&&d.push(p+_);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return E}(t,"",0)};const v6=pa($wt);function ou(e,t,n){return e.fields=t||[],e.fname=n,e}function Ci(e){return e==null?null:e.fname}function Po(e){return e==null?null:e.fields}function hwe(e){return e.length===1?Fwt(e[0]):Lwt(e)}const Fwt=e=>function(t){return t[e]},Lwt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function td(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function wl(e,t,n){const r=td(e);return e=r.length===1?r[0]:e,ou((n&&n.get||hwe)(r),[e],t||e)}const v2=wl("id"),jo=ou(e=>e,[],"identity"),Tp=ou(()=>0,[],"zero"),B_=ou(()=>1,[],"one"),xl=ou(()=>!0,[],"true"),op=ou(()=>!1,[],"false");function Bwt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const pwe=0,YH=1,KH=2,mwe=3,gwe=4;function XH(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bwt,r=e||pwe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=YH&&n(t||"error","ERROR",arguments),this},warn(){return r>=KH&&n(t||"warn","WARN",arguments),this},info(){return r>=mwe&&n(t||"log","INFO",arguments),this},debug(){return r>=gwe&&n(t||"log","DEBUG",arguments),this}}}var Ue=Array.isArray;function vt(e){return e===Object(e)}const jie=e=>e!=="__proto__";function j_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=jwt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;z_(r,s,i[s],o)}return r},{})}function z_(e,t,n,r){if(!jie(t))return;let i,s;if(vt(n)&&!Ue(n)){s=vt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?z_(s,i,n[i]):jie(i)&&(s[i]=n[i])}else e[t]=n}function jwt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function zn(e){return e[e.length-1]}function Io(e){return e==null||e===""?null:+e}const ywe=e=>t=>e*Math.exp(t),vwe=e=>t=>Math.log(e*t),bwe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),_we=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Ak=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function lO(e,t,n,r){const i=n(e[0]),s=n(zn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function Ewe(e,t){return lO(e,t,Io,jo)}function wwe(e,t){var n=Math.sign(e[0]);return lO(e,t,vwe(n),ywe(n))}function xwe(e,t,n){return lO(e,t,Ak(n),Ak(1/n))}function Swe(e,t,n){return lO(e,t,bwe(n),_we(n))}function cO(e,t,n,r,i){const s=r(e[0]),o=r(zn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function QH(e,t,n){return cO(e,t,n,Io,jo)}function JH(e,t,n){const r=Math.sign(e[0]);return cO(e,t,n,vwe(r),ywe(r))}function Dk(e,t,n,r){return cO(e,t,n,Ak(r),Ak(1/r))}function ZH(e,t,n,r){return cO(e,t,n,bwe(r),_we(r))}function Twe(e){return 1+~~(new Date(e).getMonth()/3)}function Cwe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function gt(e){return e!=null?Ue(e)?e:[e]:[]}function Awe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function yn(e){return typeof e=="function"}const zwt="descending";function eq(e,t,n){n=n||{},t=gt(t)||[];const r=[],i=[],s={},o=n.comparator||Uwt;return gt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===zwt?-1:1),i.push(a=yn(a)?a:wl(a,null,n)),(Po(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ou(o(i,r),Object.keys(s))}const fO=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Uwt=(e,t)=>e.length===1?Vwt(e[0],t[0]):Hwt(e,t,e.length),Vwt=(e,t)=>function(n,r){return fO(e(n),e(r))*t},Hwt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=fO(s(r),s(i));return o*t[a]});function zo(e){return yn(e)?e:()=>e}function tq(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function $f(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function Dwe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const qwt=Object.prototype.hasOwnProperty;function Ut(e,t){return qwt.call(e,t)}const DA={};function U_(e){let t={},n;function r(s){return Ut(t,s)&&t[s]!==DA}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===DA&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=DA),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==DA&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function Iwe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=zn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function dt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),gn(r,n)}function lv(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function ig(e){return typeof e=="boolean"}function im(e){return Object.prototype.toString.call(e)==="[object Date]"}function Nwe(e){return e&&yn(e[Symbol.iterator])}function Wn(e){return typeof e=="number"}function kwe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function yt(e){return typeof e=="string"}function nq(e,t,n){e&&(e=t?gt(e).map(a=>a.replace(/\\(.)/g,"$1")):gt(e));const r=e&&e.length,i=n&&n.get||hwe,s=a=>i(t?[a]:td(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ou(o,e,"key")}function Rwe(e,t){const n=e[0],r=zn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Wwt=1e4;function Pwe(e){e=+e||Wwt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ut(t,o)||Ut(n,o),get:o=>Ut(t,o)?t[o]:Ut(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ut(t,o)?t[o]=a:s(o,a)}}function Owe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function Pw(e,t){let n="";for(;--t>=0;)n+=e;return n}function Mwe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?Pw(i,o)+s:r==="center"?Pw(i,~~(o/2))+s+Pw(i,Math.ceil(o/2)):s+Pw(i,o)}function b2(e){return e&&zn(e)-e[0]||0}function lt(e){return Ue(e)?"["+e.map(lt)+"]":vt(e)||yt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function rq(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Gwt=e=>Wn(e)||im(e)?e:Date.parse(e);function iq(e,t){return t=t||Gwt,e==null||e===""?null:t(e)}function sq(e){return e==null||e===""?null:e+""}function Ac(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function $we(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function hp(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Ywt(e){return e}function Kwt(e){if(e==null)return Ywt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Xwt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Qwt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return zie(e,n)})}:zie(e,t)}function zie(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Fwe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Fwe(e,t){var n=Kwt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Xwt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Jwt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Zwt(e){return Fwe(e,ext.apply(this,arguments))}function ext(e,t,n){var r,i,s;if(arguments.length>1)r=txt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Jwt(e,r)}}function txt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const no="year",tu="quarter",Oo="month",ss="week",nu="date",Do="day",Ff="dayofyear",Fu="hours",Lu="minutes",Sl="seconds",Dc="milliseconds",oq=[no,tu,Oo,ss,nu,Do,Ff,Fu,Lu,Sl,Dc],b6=oq.reduce((e,t,n)=>(e[t]=1+n,e),{});function aq(e){const t=gt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{Ut(b6,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[ss]||n[Do]?1:0)+(n[tu]||n[Oo]||n[nu]?1:0)+(n[Ff]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>b6[i]-b6[s]),t}const nxt={[no]:"%Y ",[tu]:"Q%q ",[Oo]:"%b ",[nu]:"%d ",[ss]:"W%U ",[Do]:"%a ",[Ff]:"%j ",[Fu]:"%H:00",[Lu]:"00:%M",[Sl]:":%S",[Dc]:".%L",[`${no}-${Oo}`]:"%Y-%m ",[`${no}-${Oo}-${nu}`]:"%Y-%m-%d ",[`${Fu}-${Lu}`]:"%H:%M"};function Lwe(e,t){const n=gn({},nxt,t),r=aq(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Gg=new Date;function uq(e){return Gg.setFullYear(e),Gg.setMonth(0),Gg.setDate(1),Gg.setHours(0,0,0,0),Gg}function Bwe(e){return zwe(new Date(e))}function jwe(e){return V8(new Date(e))}function zwe(e){return Qd.count(uq(e.getFullYear())-1,e)}function V8(e){return T_.count(uq(e.getFullYear())-1,e)}function H8(e){return uq(e).getDay()}function rxt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function Uwe(e){return Hwe(new Date(e))}function Vwe(e){return q8(new Date(e))}function Hwe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Qp.count(t-1,e)}function q8(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return C_.count(t-1,e)}function W8(e){return Gg.setTime(Date.UTC(e,0,1)),Gg.getUTCDay()}function ixt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function qwe(e,t,n,r,i){const s=t||1,o=zn(e),a=(y,v,b)=>(b=b||y,sxt(n[b],r[b],y===o&&s,v)),u=new Date,l=Ac(e),c=l[no]?a(no):zo(2012),f=l[Oo]?a(Oo):l[tu]?a(tu):Tp,d=l[ss]&&l[Do]?a(Do,1,ss+Do):l[ss]?a(ss,1):l[Do]?a(Do,1):l[nu]?a(nu,1):l[Ff]?a(Ff,1):B_,h=l[Fu]?a(Fu):Tp,p=l[Lu]?a(Lu):Tp,m=l[Sl]?a(Sl):Tp,g=l[Dc]?a(Dc):Tp;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function sxt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function kb(e,t,n){return t+e*7-(n+6)%7}const oxt={[no]:e=>e.getFullYear(),[tu]:e=>Math.floor(e.getMonth()/3),[Oo]:e=>e.getMonth(),[nu]:e=>e.getDate(),[Fu]:e=>e.getHours(),[Lu]:e=>e.getMinutes(),[Sl]:e=>e.getSeconds(),[Dc]:e=>e.getMilliseconds(),[Ff]:e=>zwe(e),[ss]:e=>V8(e),[ss+Do]:(e,t)=>kb(V8(e),e.getDay(),H8(t)),[Do]:(e,t)=>kb(1,e.getDay(),H8(t))},axt={[tu]:e=>3*e,[ss]:(e,t)=>kb(e,0,H8(t))};function Wwe(e,t){return qwe(e,t||1,oxt,axt,rxt)}const uxt={[no]:e=>e.getUTCFullYear(),[tu]:e=>Math.floor(e.getUTCMonth()/3),[Oo]:e=>e.getUTCMonth(),[nu]:e=>e.getUTCDate(),[Fu]:e=>e.getUTCHours(),[Lu]:e=>e.getUTCMinutes(),[Sl]:e=>e.getUTCSeconds(),[Dc]:e=>e.getUTCMilliseconds(),[Ff]:e=>Hwe(e),[ss]:e=>q8(e),[Do]:(e,t)=>kb(1,e.getUTCDay(),W8(t)),[ss+Do]:(e,t)=>kb(q8(e),e.getUTCDay(),W8(t))},lxt={[tu]:e=>3*e,[ss]:(e,t)=>kb(e,0,W8(t))};function Gwe(e,t){return qwe(e,t||1,uxt,lxt,ixt)}const cxt={[no]:If,[tu]:SS.every(3),[Oo]:SS,[ss]:T_,[nu]:Qd,[Do]:Qd,[Ff]:Qd,[Fu]:UP,[Lu]:jP,[Sl]:jd,[Dc]:lb},fxt={[no]:Nf,[tu]:TS.every(3),[Oo]:TS,[ss]:C_,[nu]:Qp,[Do]:Qp,[Ff]:Qp,[Fu]:VP,[Lu]:zP,[Sl]:jd,[Dc]:lb};function V_(e){return cxt[e]}function H_(e){return fxt[e]}function Ywe(e,t,n){return e?e.offset(t,n):void 0}function Kwe(e,t,n){return Ywe(V_(e),t,n)}function Xwe(e,t,n){return Ywe(H_(e),t,n)}function Qwe(e,t,n,r){return e?e.range(t,n,r):void 0}function Jwe(e,t,n,r){return Qwe(V_(e),t,n,r)}function Zwe(e,t,n,r){return Qwe(H_(e),t,n,r)}const Ow=1e3,Mw=Ow*60,$w=Mw*60,dO=$w*24,dxt=dO*7,Uie=dO*30,G8=dO*365,exe=[no,Oo,nu,Fu,Lu,Sl,Dc],Fw=exe.slice(0,-1),Lw=Fw.slice(0,-1),Bw=Lw.slice(0,-1),hxt=Bw.slice(0,-1),pxt=[no,ss],Vie=[no,Oo],txe=[no],UE=[[Fw,1,Ow],[Fw,5,5*Ow],[Fw,15,15*Ow],[Fw,30,30*Ow],[Lw,1,Mw],[Lw,5,5*Mw],[Lw,15,15*Mw],[Lw,30,30*Mw],[Bw,1,$w],[Bw,3,3*$w],[Bw,6,6*$w],[Bw,12,12*$w],[hxt,1,dO],[pxt,1,dxt],[Vie,1,Uie],[Vie,3,3*Uie],[txe,1,G8]];function nxe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(b2(t))/n;let i=x_(a=>a[2]).right(UE,r),s,o;return i===UE.length?(s=txe,o=ym(t[0]/G8,t[1]/G8,n)):i?(i=UE[r/UE[i-1][2]<UE[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=exe,o=Math.max(ym(t[0],t[1],n),1)),{units:s,step:o}}function jw(e){const t={};return n=>t[n]||(t[n]=e(n))}function mxt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=gxt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function gxt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function rxe(e){const t=jw(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=F0(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return mxt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=F0(o??",f");const a=ym(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Oge(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Mge(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Pge(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let Y8;ixe();function ixe(){return Y8=rxe({format:BP,formatPrefix:Wz})}function sxe(e){return rxe(Rge(e))}function Ik(e){return arguments.length?Y8=sxe(e):Y8}function Hie(e,t,n){n=n||{},vt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(Sl),i=t(Lu),s=t(Fu),o=t(nu),a=t(ss),u=t(Oo),l=t(tu),c=t(no),f=e(n[Dc]||".%L"),d=e(n[Sl]||":%S"),h=e(n[Lu]||"%I:%M"),p=e(n[Fu]||"%I %p"),m=e(n[nu]||n[Do]||"%a %d"),g=e(n[ss]||"%b %d"),y=e(n[Oo]||"%B"),v=e(n[tu]||"%B"),b=e(n[no]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:g:c(E)<E?l(E)<E?y:v:b)(E)}function oxe(e){const t=jw(e.format),n=jw(e.utcFormat);return{timeFormat:r=>yt(r)?t(r):Hie(t,V_,r),utcFormat:r=>yt(r)?n(r):Hie(n,H_,r),timeParse:jw(e.parse),utcParse:jw(e.utcParse)}}let K8;axe();function axe(){return K8=oxe({format:Jz,parse:Qge,utcFormat:Zz,utcParse:Jge})}function uxe(e){return oxe(Wge(e))}function XS(e){return arguments.length?K8=uxe(e):K8}const X8=(e,t)=>gn({},e,t);function lxe(e,t){const n=e?sxe(e):Ik(),r=t?uxe(t):XS();return X8(n,r)}function lq(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?X8(Ik(e),XS(t)):X8(Ik(),XS())}function yxt(){return ixe(),axe(),lq()}const vxt=/^(data:|([A-Za-z]+:)?\/\/)/,bxt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,_xt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,qie="file://";function Ext(e,t){return n=>({options:n||{},sanitize:xxt,load:wxt,fileAccess:!!t,file:Sxt(t),http:Cxt(e)})}async function wxt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function xxt(e,t){t=gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=bxt.test(e.replace(_xt,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+lt(e));const u=vxt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(qie))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(qie.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Sxt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):Txt}async function Txt(){Le("No file system access.")}function Cxt(e){return e?async function(t,n){const r=gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?yn(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:Axt}async function Axt(){Le("No HTTP fetch method available.")}const Dxt=e=>e!=null&&e===e,Ixt=e=>e==="true"||e==="false"||e===!0||e===!1,Nxt=e=>!Number.isNaN(Date.parse(e)),cxe=e=>!Number.isNaN(+e)&&!(e instanceof Date),kxt=e=>cxe(e)&&Number.isInteger(+e),Q8={boolean:rq,integer:Io,number:Io,date:iq,string:sq,unknown:jo},IA=[Ixt,kxt,cxe,Nxt],Rxt=["boolean","integer","number","date"];function fxe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=IA.length,i=IA.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Dxt(u)&&!IA[a](u)&&(i[a]=0,++o,o===IA.length))return"string";return Rxt[i.reduce((s,o)=>s===0?o:s,0)-1]}function dxe(e,t){return t.reduce((n,r)=>(n[r]=fxe(e,r),n),{})}function Wie(e){const t=function(n,r){const i={delimiter:e};return cq(n,r?gn(r,i):i)};return t.responseType="text",t}function cq(e,t){return t.header&&(e=t.header.map(lt).join(t.delimiter)+`
`+e),aZe(t.delimiter).parse(e+"")}cq.responseType="text";function Pxt(e){return typeof Buffer=="function"&&yn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function fq(e,t){const n=t&&t.property?wl(t.property):jo;return vt(e)&&!Pxt(e)?Oxt(n(e),t):n(JSON.parse(e))}fq.responseType="json";function Oxt(e,t){return!Ue(e)&&Nwe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Mxt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function hxe(e,t){let n,r,i,s;return e=fq(e,t),t&&t.feature?(n=Qwt,i=t.feature):t&&t.mesh?(n=Zwt,i=t.mesh,s=Mxt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}hxe.responseType="json";const VD={dsv:cq,csv:Wie(","),tsv:Wie("	"),json:fq,topojson:hxe};function dq(e,t){return arguments.length>1?(VD[e]=t,this):Ut(VD,e)?VD[e]:null}function pxe(e){const t=dq(e);return t&&t.responseType||"text"}function mxe(e,t,n,r){t=t||{};const i=dq(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&$xt(e,t.parse,n,r),Ut(e,"columns")&&delete e.columns,e}function $xt(e,t,n,r){if(!e.length)return;const i=XS();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=dxe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Q8[p])throw Error("Illegal format pattern: "+h+":"+p);return Q8[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const hO=Ext(typeof fetch<"u"&&fetch,null);function pO(e){const t=e||jo,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function HD(e,t){try{await t(e)}catch(n){e.error(n)}}const gxe=Symbol("vega_id");let Fxt=1;function mO(e){return!!(e&&Bt(e))}function Bt(e){return e[gxe]}function yxe(e,t){return e[gxe]=t,e}function sr(e){const t=e===Object(e)?e:{data:e};return Bt(t)?t:yxe(t,Fxt++)}function hq(e){return gO(e,sr({}))}function gO(e,t){for(const n in e)t[n]=e[n];return t}function vxe(e,t){return yxe(t,Bt(e))}function jy(e,t){return e?t?(n,r)=>e(n,r)||Bt(t(n))-Bt(t(r)):(n,r)=>e(n,r)||Bt(n)-Bt(r):null}function bxe(e){return e&&e.constructor===zy}function zy(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:zy,insert(a){const u=gt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=yn(a)?r:t,l=gt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:zo(l)};return yn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return yn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Bt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Bt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Bt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Bt(m),l[g]?l[g]=1:a.add.push(sr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Bt(m)]<0&&a.rem.push(m);function y(v,b,E){E?v[b]=E(v):a.encode=b,o||(c[Bt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Bt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Bt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Bt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const qD="_:mod:_";function yO(){Object.defineProperty(this,qD,{writable:!0,value:{}})}yO.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[qD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ue(n)?1+n.length:-1),i},modified(e,t){const n=this[qD];if(arguments.length){if(Ue(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[qD]={},this}};let Lxt=0;const Bxt="pulse",jxt=new yO,zxt=1,Uxt=2;function Dr(e,t,n,r){this.id=++Lxt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Gie(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Dr.prototype={targets(){return this._targets||(this._targets=pO(v2))},set(e){return this.value!==e?(this.value=e,1):0},skip:Gie(zxt),modified:Gie(Uxt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new yO,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Dr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Bxt)gt(a).forEach(f=>{f instanceof Dr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(Ue(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||jxt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Vxt(e,t,n,r){let i=1,s;return e instanceof Dr?s=e:e&&e.prototype instanceof Dr?s=new e:yn(e)?s=new Dr(null,e):(i=0,s=new Dr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Hxt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let qxt=0;function vO(e,t,n){this.id=++qxt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function ap(e,t,n){return new vO(e,t,n)}vO.prototype={_filter:xl,_apply:jo,targets(){return this._targets||(this._targets=pO(v2))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=ap(e);return this.targets().add(t),t},apply(e){const t=ap(null,e);return this.targets().add(t),t},merge(){const e=ap();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=ap();return this.targets().add(ap(null,null,tq(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(ap(null,null,()=>n=!0)),t.targets().add(ap(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=xl,this._targets=null}};function Wxt(e,t,n,r){const i=this,s=ap(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=gt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Gxt(e,t){const n=this.locale();return mxe(e,t,n.timeParse,n.utcParse)}function Yxt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Kxt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:pxe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Xxt(e,t,n){const r=this,i=r._pending||Qxt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(xl).insert(s.data||[])),i.done(),s}function Qxt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Jxt={skip:!0};function Zxt(e,t,n,r,i){return(e instanceof Dr?tSt:eSt)(this,e,t,n,r,i),this}function eSt(e,t,n,r,i,s){const o=gn({},s,Jxt);let a,u;yn(n)||(n=zo(n)),r===void 0?a=l=>e.touch(n(l)):yn(r)?(u=new Dr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;bxe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function tSt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Dr(null,nSt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function nSt(e,t){return t=yn(t)?t:zo(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function rSt(e){e.rank=++this._rank}function iSt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const Nk={},Zc=1,pp=2,Td=4,sSt=Zc|pp,Yie=Zc|Td,E1=Zc|pp|Td,Kie=8,VE=16,Xie=32,Qie=64;function sm(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function _6(e,t){const n=[];return hp(e,t,r=>n.push(r)),n}function Jie(e,t){const n={};return e.visit(t,r=>{n[Bt(r)]=1}),r=>n[Bt(r)]?null:r}function NA(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}sm.prototype={StopPropagation:Nk,ADD:Zc,REM:pp,MOD:Td,ADD_REM:sSt,ADD_MOD:Yie,ALL:E1,REFLOW:Kie,SOURCE:VE,NO_SOURCE:Xie,NO_FIELDS:Qie,fork(e){return new sm(this.dataflow).init(this,e)},clone(){const e=this.fork(E1);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(E1|VE)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new sm(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Qie)&&(n.fields=e.fields),t&Zc?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&pp?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Td?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Xie?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||E1;return t&Zc&&this.add.length||t&pp&&this.rem.length||t&Td&&this.mod.length},reflow(e){if(e)return this.fork(E1).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Td,Jie(this,Zc))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ue(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ue(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Zc&&(n.addF=NA(n.addF,t)),e&pp&&(n.remF=NA(n.remF,t)),e&Td&&(n.modF=NA(n.modF,t)),e&VE&&(n.srcF=NA(n.srcF,t)),n},materialize(e){e=e||E1;const t=this;return e&Zc&&t.addF&&(t.add=_6(t.add,t.addF),t.addF=null),e&pp&&t.remF&&(t.rem=_6(t.rem,t.remF),t.remF=null),e&Td&&t.modF&&(t.mod=_6(t.mod,t.modF),t.modF=null),e&VE&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&VE)return hp(n.source,n.srcF,r),n;e&Zc&&hp(n.add,n.addF,r),e&pp&&hp(n.rem,n.remF,r),e&Td&&hp(n.mod,n.modF,r);const i=n.source;if(e&Kie&&i){const s=n.add.length+n.mod.length;s===i.length||(s?hp(i,Jie(n,Yie),r):hp(i,n.srcF,r))}return n}};function pq(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}dt(pq,sm,{fork(e){const t=new sm(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ue(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function oSt(e,t,n){const r=this,i=[];if(r._pulse)return _xe(r);if(r._pending&&await r._pending,t&&await HD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new sm(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=pO(v2);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=Nk),u!==Nk&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await HD(r,c[f].callback)}return n&&await HD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function aSt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function uSt(e,t,n){return this._pulse?_xe(this):(this.evaluate(e,t,n),this)}function lSt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function _xe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function cSt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function fSt(e,t){const n=e.source,r=this._clock;return n&&Ue(n)?new pq(this,r,n.map(i=>i.pulse),t):this._input[e.id]||dSt(this._pulse,n&&n.pulse)}function dSt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Nk&&(e.source=t.source),e)}const mq={skip:!1,force:!1};function hSt(e,t){const n=t||mq;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function pSt(e,t,n){const r=n||mq;return(e.set(t)||r.force)&&this.touch(e,r),this}function mSt(e,t,n){this.touch(e,n||mq);const r=new sm(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function gSt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Exe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,ySt(t,0,e)):r=n,r}}}function Exe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function ySt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,Exe(e,r,t,n)}function Fv(){this.logger(XH()),this.logLevel(YH),this._clock=0,this._rank=0,this._locale=lq();try{this._loader=hO()}catch{}this._touched=pO(v2),this._input={},this._pulse=null,this._heap=gSt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function HE(e){return function(){return this._log[e].apply(this,arguments)}}Fv.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:HE("error"),warn:HE("warn"),info:HE("info"),debug:HE("debug"),logLevel:HE("level"),cleanThreshold:1e4,add:Vxt,connect:Hxt,rank:rSt,rerank:iSt,pulse:mSt,touch:hSt,update:pSt,changeset:zy,ingest:Yxt,parse:Gxt,preload:Xxt,request:Kxt,events:Wxt,on:Zxt,evaluate:oSt,run:uSt,runAsync:aSt,runAfter:lSt,_enqueue:cSt,_getPulse:fSt};function Oe(e,t){Dr.call(this,e,null,t)}dt(Oe,Dr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Rb={};function wxe(e){const t=xxe(e);return t&&t.Definition||null}function xxe(e){return e=e&&e.toLowerCase(),Ut(Rb,e)?Rb[e]:null}function*Sxe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function gq(e,t,n){const r=Float64Array.from(Sxe(e,n));return r.sort(Xd),t.map(i=>Jme(r,i))}function yq(e,t){return gq(e,[.25,.5,.75],t)}function vq(e,t){const n=e.length,r=sGe(e,t),i=yq(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Txe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Tl=Math.random;function vSt(e){Tl=e}function Cxe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Sxe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Tl()*s)];c[l]=a/s}return c.sort(Xd),[o5(c,n/2),o5(c,1-n/2)]}function Axe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?bSt(s,t+t/4):s}function bSt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function _St(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function ESt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Tl())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const Dxe=Math.sqrt(2*Math.PI),wSt=Math.SQRT2;let qE=NaN;function bO(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(qE===qE)n=qE,qE=NaN;else{do n=Tl()*2-1,r=Tl()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,qE=r*s}return e+n*t}function bq(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*Dxe)}function _O(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function EO(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*wSt*xSt(2*e-1)}function xSt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function _q(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>bO(n,r),pdf:s=>bq(s,n,r),cdf:s=>_O(s,n,r),icdf:s=>EO(s,n,r)};return i.mean(e).stdev(t)}function Eq(e,t){const n=_q();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=vq(e)),i):t},sample(){return e[~~(Tl()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function wq(e,t){return e=e||0,t=t??1,Math.exp(e+bO()*t)}function xq(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Dxe*e)}function Sq(e,t,n){return _O(Math.log(e),t,n)}function Tq(e,t,n){return Math.exp(EO(e,t,n))}function Ixe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>wq(n,r),pdf:s=>xq(s,n,r),cdf:s=>Sq(s,n,r),icdf:s=>Tq(s,n,r)};return i.mean(e).stdev(t)}function Nxe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Tl();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Cq(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Tl()}function Aq(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Dq(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Iq(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function kxe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Cq(n,r),pdf:s=>Aq(s,n,r),cdf:s=>Dq(s,n,r),icdf:s=>Iq(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Nq(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function _2(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function wO(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function E2(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function q_(e,t,n,r,i){let s=0,o=0;return E2(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function kq(e,t,n){let r=0,i=0,s=0,o=0,a=0;E2(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=_2(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:q_(e,t,n,i,l)}}function Rxe(e,t,n){let r=0,i=0,s=0,o=0,a=0;E2(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=_2(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:q_(e,t,n,i,l)}}function Pxe(e,t,n){const[r,i,s,o]=wO(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;E2(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=_2(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:q_(e,t,n,o,y)}}function Oxe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;E2(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=_2(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:q_(e,t,n,a,c)}}function Rq(e,t,n){const[r,i,s,o]=wO(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,E=(f*y-d*l)/v,_=-b*u,x=S=>(S=S-s,b*S*S+E*S+_+o);return{coef:[_-E*s+b*s*s+o,E-2*b*s,b],predict:x,rSquared:q_(e,t,n,o,x)}}function Mxe(e,t,n,r){if(r===0)return Nq(e,t,n);if(r===1)return kq(e,t,n);if(r===2)return Rq(e,t,n);const[i,s,o,a]=wO(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=TSt(c),v=b=>{b-=o;let E=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)E+=y[d]*Math.pow(b,d);return E};return{coef:SSt(f,y,-o,a),predict:v,rSquared:q_(e,t,n,a,v)}}function SSt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function TSt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Zie=2,ese=1e-12;function $xe(e,t,n,r){const[i,s,o,a]=wO(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Zie;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],E=y-i[v]>i[b]-y?v:b;let _=0,x=0,S=0,C=0,A=0;const D=1/Math.abs(i[E]-y||1);for(let R=v;R<=b;++R){const M=i[R],F=s[R],P=CSt(Math.abs(y-M)*D)*d[R],j=M*P;_+=P,x+=j,S+=F*P,C+=F*j,A+=M*j}const[I,O]=_2(x/_,S/_,C/_,A/_);c[g]=I+O*y,f[g]=Math.abs(s[g]-c[g]),ASt(i,g+1,p)}if(h===Zie)break;const m=Zme(f);if(Math.abs(m)<ese)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?ese:(v=1-y*y)*v}return DSt(i,c,o,a)}function CSt(e){return(e=1-e*e*e)*e*e}function ASt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function DSt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const ISt=.5*Math.PI/180;function xO(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=NSt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&kSt(f,m,d,h,p)>ISt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function NSt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function kSt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function RSt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function J8(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:RSt(e)}function Fxe(e,t,n){return n||e+(t?"_"+t:"")}const E6=()=>{},PSt={init:E6,add:E6,rem:E6,idx:0},QS={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},w2=Object.keys(QS).filter(e=>e!=="__count__");function OSt(e,t){return(n,r)=>gn({name:e,aggregate_param:r,out:n||e},PSt,t)}[...w2,"__count__"].forEach(e=>{QS[e]=OSt(e,QS[e])});function Lxe(e,t,n){return QS[e](n,t)}function Bxe(e,t){return e.idx-t.idx}function MSt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=QS[i]())})};return e.forEach(n),Object.values(t).sort(Bxe)}function $St(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function FSt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function LSt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function BSt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function jxe(e,t){const n=t||jo,r=MSt(e),i=e.slice().sort(Bxe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=$St,s.prototype.add=FSt,s.prototype.rem=LSt,s.prototype.set=BSt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Pq(e){this._key=e?wl(e):Bt,this.reset()}const ao=Pq.prototype;ao.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ao.add=function(e){this._add.push(e)};ao.rem=function(e){this._rem.push(e)};ao.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};ao.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ut(n,s)||(n[s]=1,++i);return i};ao.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Dwe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ao.argmin=function(e){return this.extent(e)[0]||{}};ao.argmax=function(e){return this.extent(e)[1]||{}};ao.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ao.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ao.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=yq(this.values(),e),this._get=e),this._q};ao.q1=function(e){return this.quartile(e)[0]};ao.q2=function(e){return this.quartile(e)[1]};ao.q3=function(e){return this.quartile(e)[2]};ao.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Cxe(this.values(),1e3,.05,e),this._get=e),this._ci};ao.ci0=function(e){return this.ci(e)[0]};ao.ci1=function(e){return this.ci(e)[1]};function Cm(e){Oe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Cm.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:w2},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};dt(Cm,Oe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=gt(Po(v)),E=b.length;let _=0,x;for(;_<E;++_)r[x=b[_]]||(r[x]=1,t.push(x))}this._dims=gt(e.groupby),this._dnames=this._dims.map(v=>{const b=Ci(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:J8(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Ci(f),g=Fxe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(Lxe(d,h,g))}return this._measures=this._measures.map(v=>jxe(v,v.field)),Object.create(null)},cellkey:J8(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Pq),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?vxe(t.tuple,s):sr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const jSt=1e-14;function Oq(e){Oe.call(this,null,e)}Oq.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};dt(Oq,Oe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Po(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Txe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Io(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(jSt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ou(u,Po(t),e.name||"bin_"+Ci(t))}});function zxe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?Owe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Mq(e){Oe.call(this,[],e)}Mq.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};dt(Mq,Oe,{transform(e,t){const n=t.fork(t.ALL),r=zxe(Bt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(jy(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Uxe(e){Dr.call(this,null,zSt,e)}dt(Uxe,Dr);function zSt(e){return this.value&&!e.modified()?this.value:eq(e.fields,e.orders)}function $q(e){Oe.call(this,null,e)}$q.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function USt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}dt($q,Oe,{transform(e,t){const n=f=>d=>{for(var h=USt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=sr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Fq(e){Oe.call(this,null,e)}Fq.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};dt(Fq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=VSt(a,i,s,e.filter||xl)):n.mod=a,n.source=this.value,n.modifies(r)}});function VSt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(sr(s)),s={},s[t]=l);return i}const tse={kde:Eq,mixture:Nxe,normal:_q,lognormal:Ixe,uniform:kxe},HSt="distributions",nse="function",qSt="field";function Vxe(e,t){const n=e[nse];Ut(tse,n)||Le("Unknown distribution function: "+n);const r=tse[n]();for(const i in e)i===qSt?r.data((e.from||t()).map(e[i])):i===HSt?r[i](e[i].map(s=>Vxe(s,t))):typeof r[i]===nse&&r[i](e[i]);return r}function Lq(e){Oe.call(this,null,e)}const Hxe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],WSt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Hxe},{name:"weights",type:"number",array:!0}]};Lq.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Hxe.concat(WSt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};dt(Lq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Vxe(e.distribution,GSt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||$f(r.data()),l=xO(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],sr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function GSt(e){return()=>e.materialize(e.SOURCE).source}function qxe(e,t){return e?e.map((n,r)=>t[r]||Ci(n)):null}function Bq(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const Wxe="bin";function jq(e){Oe.call(this,null,e)}jq.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Wxe}]};const YSt=(e,t)=>b2($f(e,t))/30;dt(jq,Oe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Bq(t.source,e.groupby,jo),i=e.smooth||!1,s=e.field,o=e.step||YSt(n,s),a=jy((p,m)=>s(p)-s(m)),u=e.as||Wxe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of Axe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function Gxe(e){Dr.call(this,null,KSt,e),this.modified(!0)}dt(Gxe,Dr);function KSt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ou(n=>t(n,e),Po(t),Ci(t))}function zq(e){Oe.call(this,[void 0,void 0],e)}zq.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};dt(zq,Oe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Io(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ci(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Uq(e,t){Dr.call(this,e),this.parent=t,this.count=0}dt(Uq,Dr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function SO(e){Oe.call(this,{},e),this._keys=U_();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}dt(SO,Oe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ut(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Uq(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Bt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Bt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Bt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Bt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Bt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function Yxe(e){Dr.call(this,null,XSt,e)}dt(Yxe,Dr);function XSt(e){return this.value&&!e.modified()?this.value:Ue(e.name)?gt(e.name).map(t=>wl(t)):wl(e.name,e.as)}function Vq(e){Oe.call(this,U_(),e)}Vq.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};dt(Vq,Oe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Bt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Bt(f),1)});function c(f){const d=Bt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Hq(e){Oe.call(this,[],e)}Hq.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};dt(Hq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=qxe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=hq(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function qq(e){Oe.call(this,[],e)}qq.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};dt(qq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ci),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=hq(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Wq(e){Oe.call(this,null,e)}Wq.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};dt(Wq,Oe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function Kxe(e){Oe.call(this,[],e)}dt(Kxe,Oe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=sr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const kA={value:"value",median:Zme,mean:fGe,min:bh,max:Ga},QSt=[];function Gq(e){Oe.call(this,[],e)}Gq.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function JSt(e){var t=e.method||kA.value,n;if(kA[t]==null)Le("Unrecognized imputation method: "+t);else return t===kA.value?(n=e.value!==void 0?e.value:0,()=>n):kA[t]}function ZSt(e){const t=e.field;return n=>n?t(n):NaN}dt(Gq,Oe,{transform(e,t){var n=t.fork(t.ALL),r=JSt(e),i=ZSt(e),s=Ci(e.field),o=Ci(e.key),a=(e.groupby||[]).map(Ci),u=eTt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,E,_;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],_={_impute:!0},y=0,E=p.length;y<E;++y)_[a[y]]=p[y];_[o]=m,_[s]=Number.isNaN(h)?h=r(d,i):h,l.push(sr(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function eTt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):QSt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Yq(e){Cm.call(this,e)}Yq.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:w2},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};dt(Yq,Cm,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Kq(e){Oe.call(this,null,e)}Kq.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};dt(Kq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Bq(r,e.groupby,e.field),s=(e.groupby||[]).map(Ci),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=$f(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Eq(h,o)[a],m=e.counts?h.length:1,g=c||$f(h);xO(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(sr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Xxe(e){Dr.call(this,null,tTt,e)}dt(Xxe,Dr);function tTt(e){return this.value&&!e.modified()?this.value:nq(e.fields,e.flat)}function Qxe(e){Oe.call(this,[],e),this._pending=null}dt(Qxe,Oe,{transform(e,t){const n=t.dataflow;return this._pending?w6(this,t,this._pending):nTt(e)?t.StopPropagation:e.values?w6(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=gt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>w6(this,t,gt(r.data)))}});function nTt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function w6(e,t,n){n.forEach(sr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Xq(e){Oe.call(this,{},e)}Xq.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};dt(Xq,Oe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Ci),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function Jxe(e){Dr.call(this,null,rTt,e)}dt(Jxe,Dr);function rTt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function Zxe(e){Dr.call(this,null,iTt,e)}dt(Zxe,Dr);function iTt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function eSe(e){Oe.call(this,null,e)}dt(eSe,Oe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Qq(e){Cm.call(this,e)}Qq.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:w2,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};dt(Qq,Cm,{_transform:Cm.prototype.transform,transform(e,t){return this._transform(sTt(e,t),t)}});function sTt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Po(n).concat(Po(r)),o=aTt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>oTt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function oTt(e,t,n,r){return ou(i=>t(i)===e?n(i):NaN,r,e+"")}function aTt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(fO),t?i.slice(0,t):i}function tSe(e){SO.call(this,e)}dt(tSe,SO,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Bt(s),n,t,s);return(e.modified("field")||r&&t.modified(Po(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(sr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Jq(e){Oe.call(this,null,e)}Jq.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};dt(Jq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=qxe(e.fields,e.as||[]),s=r?(a,u)=>uTt(a,u,r,i):gO;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Bt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,sr({}));o[Bt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Bt(a)]))}),n}});function uTt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function nSe(e){Oe.call(this,null,e)}dt(nSe,Oe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Zq(e){Oe.call(this,null,e)}Zq.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const lTt=1e-14;dt(Zq,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Bq(i,e.groupby,e.field),o=(e.groupby||[]).map(Ci),a=[],u=e.step||.01,l=e.probs||wu(u/2,1-lTt,u),c=l.length;return s.forEach(f=>{const d=gq(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(sr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function rSe(e){Oe.call(this,null,e)}dt(rSe,Oe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Bt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=hq(i);r[Bt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Bt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function eW(e){Oe.call(this,[],e),this.count=0}eW.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};dt(eW,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Bt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Tl()),d<o.length&&d>=u&&(f=o[d],s[Bt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Bt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Bt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Bt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Bt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Bt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Bt(c)])),this.count=a,this.value=n.source=o,n}});function tW(e){Oe.call(this,null,e)}tW.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};dt(tW,Oe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=wu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,sr(s)}),n.add=t.add.concat(this.value),n}});function iSe(e){Oe.call(this,null,e),this.modified(!0)}dt(iSe,Oe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function nW(e){Oe.call(this,null,e)}const sSe=["unit0","unit1"];nW.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:oq,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:sSe}]};dt(nW,Oe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?H_:V_)(s.unit).offset,a=e.as||sSe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Po(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:nxe({extent:e.extent||$f(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=aq(r),o=this.value||{},a=(n?Gwe:Wwe)(s,i);return a.unit=zn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function oSe(e){Oe.call(this,U_(),e)}dt(oSe,Oe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function aSe(e){Oe.call(this,null,e)}dt(aSe,Oe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(jy(e.sort)):t.source).map(e.field))}});function cTt(e,t,n,r){const i=JS[e](t,n);return{init:i.init||Tp,update:function(s,o){o[r]=i.next(s)}}}const JS={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=JS.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=JS.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=fTt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function fTt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const dTt=Object.keys(JS);function uSe(e){const t=gt(e.ops),n=gt(e.fields),r=gt(e.params),i=gt(e.aggregate_params),s=gt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){gt(Po(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Ci(g),E=Fxe(p,b,s[m]);if(h(g),o.push(E),Ut(JS,p))a.push(cTt(p,g,y,E));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let _=l[b];_||(_=l[b]=[],_.field=g,f.push(_)),_.push(Lxe(p,v,E))}}),(c.length||f.length)&&(this.cell=hTt(f,c,d)),this.inputs=Object.keys(u)}const lSe=uSe.prototype;lSe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};lSe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function hTt(e,t,n){e=e.map(u=>jxe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Pq;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function rW(e){Oe.call(this,{},e),this._mlen=0,this._mods=[]}rW.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:dTt.concat(w2)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};dt(rW,Oe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=jy(e.sort),i=J8(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new uSe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)pTt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=zxe(Bt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function pTt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?x_(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||zo(-1)};t.init();for(let f=0;f<u;++f)mTt(c,o,f,u),s&&gTt(c,l),t.update(c,a[f])}function mTt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function gTt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const yTt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Cm,bin:Oq,collect:Mq,compare:Uxe,countpattern:$q,cross:Fq,density:Lq,dotbin:jq,expression:Gxe,extent:zq,facet:SO,field:Yxe,filter:Vq,flatten:Hq,fold:qq,formula:Wq,generate:Kxe,impute:Gq,joinaggregate:Yq,kde:Kq,key:Xxe,load:Qxe,lookup:Xq,multiextent:Jxe,multivalues:Zxe,params:eSe,pivot:Qq,prefacet:tSe,project:Jq,proxy:nSe,quantile:Zq,relay:rSe,sample:eW,sequence:tW,sieve:iSe,subflow:Uq,timeunit:nW,tupleindex:oSe,values:aSe,window:rW},Symbol.toStringTag,{value:"Module"}));function om(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const vTt=()=>typeof Image<"u"?Image:null;function iW(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const bTt="identity",Pb="linear",Ah="log",x2="pow",S2="sqrt",TO="symlog",K0="time",X0="utc",Tf="sequential",W_="diverging",Ob="quantile",CO="quantize",AO="threshold",sW="ordinal",Z8="point",cSe="band",oW="bin-ordinal",ms="continuous",T2="discrete",C2="discretizing",Ml="interpolating",aW="temporal";function _Tt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function ETt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function uW(){const e=Lz().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=iW(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=wu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,gm(h,m)-1),v=m===g?y:gm(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return uW().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function fSe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return fSe(t())},e}function wTt(){return fSe(uW().paddingInner(1))}var xTt=Array.prototype.map;function STt(e){return xTt.call(e,Io)}const TTt=Array.prototype.slice;function dSe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(gm(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=STt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=TTt.call(r),n):t.slice()},n.tickFormat=function(r,i){return $ge(e[0],zn(e),r??10,i)},n.copy=function(){return dSe().domain(n.domain()).range(n.range())},n}const kk=new Map,hSe=Symbol("vega_scale");function pSe(e){return e[hSe]=!0,e}function CTt(e){return e&&e[hSe]===!0}function ATt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?_Tt(s):s.invertExtent?ETt(s):void 0),s.type=e,pSe(s)};return r.metadata=Ac(gt(n)),r}function Jn(e,t,n){return arguments.length>1?(kk.set(e,ATt(e,t,n)),this):mSe(e)?kk.get(e):void 0}Jn(bTt,Fge);Jn(Pb,bm,ms);Jn(Ah,Bge,[ms,Ah]);Jn(x2,Xz,ms);Jn(S2,gYe,ms);Jn(TO,jge,ms);Jn(K0,kKe,[ms,aW]);Jn(X0,RKe,[ms,aW]);Jn(Tf,tU,[ms,Ml]);Jn(`${Tf}-${Pb}`,tU,[ms,Ml]);Jn(`${Tf}-${Ah}`,Zge,[ms,Ml,Ah]);Jn(`${Tf}-${x2}`,nU,[ms,Ml]);Jn(`${Tf}-${S2}`,PKe,[ms,Ml]);Jn(`${Tf}-${TO}`,e0e,[ms,Ml]);Jn(`${W_}-${Pb}`,t0e,[ms,Ml]);Jn(`${W_}-${Ah}`,n0e,[ms,Ml,Ah]);Jn(`${W_}-${x2}`,rU,[ms,Ml]);Jn(`${W_}-${S2}`,OKe,[ms,Ml]);Jn(`${W_}-${TO}`,r0e,[ms,Ml]);Jn(Ob,zge,[C2,Ob]);Jn(CO,Uge,C2);Jn(AO,Vge,C2);Jn(oW,dSe,[T2,C2]);Jn(sW,Lz,T2);Jn(cSe,uW,T2);Jn(Z8,wTt,T2);function mSe(e){return kk.has(e)}function Uy(e,t){const n=kk.get(e);return n&&n.metadata[t]}function lW(e){return Uy(e,ms)}function Mb(e){return Uy(e,T2)}function e9(e){return Uy(e,C2)}function gSe(e){return Uy(e,Ah)}function DTt(e){return Uy(e,aW)}function ySe(e){return Uy(e,Ml)}function vSe(e){return Uy(e,Ob)}const ITt=["clamp","base","constant","exponent"];function bSe(e,t){const n=t[0],r=zn(t)-n;return function(i){return e(n+i*r)}}function DO(e,t,n){return Hz(cW(t||"rgb",n),e)}function _Se(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function ESe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?zo(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Jn(s)().domain([t,n]).range([0,1]),ITt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function cW(e,t){const n=QGe[NTt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function NTt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const kTt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},RTt={accent:Jtt,category10:Qtt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Ztt,observable10:ent,paired:tnt,pastel1:nnt,pastel2:rnt,set1:int,set2:snt,set3:ont,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function wSe(e){if(Ue(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function xSe(e,t){for(const n in e)fW(n,t(e[n]))}const rse={};xSe(RTt,wSe);xSe(kTt,e=>DO(wSe(e)));function fW(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(rse[e]=t,this):rse[e]}const WD="symbol",PTt="discrete",OTt="gradient",MTt=e=>Ue(e)?e.map(t=>String(t)):String(e),$Tt=(e,t)=>e[1]-t[1],FTt=(e,t)=>t[1]-e[1];function dW(e,t,n){let r;return Wn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(b2(e.domain())/n||1)+1))),vt(t)&&(r=t.step,t=t.interval),yt(t)&&(t=e.type===K0?V_(t):e.type==X0?H_(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function SSe(e,t,n){let r=e.range(),i=r[0],s=zn(r),o=$Tt;if(i>s&&(r=s,s=i,i=r,o=FTt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],zn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function hW(e,t){return e.bins?SSe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function TSe(e,t,n,r,i,s){const o=t.type;let a=MTt;if(o===K0||i===K0)a=e.timeFormat(r);else if(o===X0||i===X0)a=e.utcFormat(r);else if(gSe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=CSe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function CSe(e,t,n){const r=hW(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const t9={[Ob]:"quantiles",[CO]:"thresholds",[AO]:"domain"},ASe={[Ob]:"quantiles",[CO]:"domain"};function DSe(e,t){return e.bins?jTt(e.bins):e.type===Ah?CSe(e,t,!0):t9[e.type]?BTt(e[t9[e.type]]()):hW(e,t)}function LTt(e,t,n){const r=t[ASe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function BTt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function jTt(e){const t=e.slice(0,-1);return t.max=zn(e),t}const zTt=e=>t9[e.type]||e.bins;function ISe(e,t,n,r,i,s,o){const a=ASe[t.type]&&s!==K0&&s!==X0?LTt(e,t,i):TSe(e,t,n,i,s,o);return r===WD&&zTt(t)?UTt(a):r===PTt?VTt(a):HTt(a)}const UTt=e=>(t,n,r)=>{const i=ise(r[n+1],ise(r.max,1/0)),s=sse(t,e),o=sse(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},ise=(e,t)=>e??t,VTt=e=>(t,n)=>n?e(t):null,HTt=e=>t=>e(t),sse=(e,t)=>Number.isFinite(e)?t(e):null;function qTt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+zn(t),s=i-r;if(e.type===AO){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function WTt(e,t,n,r){const i=r||t.type;return yt(n)&&DTt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===K0?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===X0?e.utcFormat("%A, %d %B %Y, %X UTC"):ISe(e,t,5,null,n,r,!0)}function NSe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=WTt(e,t,n.format,n.formatType);if(e9(t.type)){const s=DSe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Mb(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(zn(s))}`}}let kSe=0;function GTt(){kSe=0}const Rk="p_";function pW(e){return e&&e.gradient}function RSe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?Rk:"";return i||(i=e.id="gradient_"+kSe++,r==="radial"?(e.x1=Gc(e.x1,.5),e.y1=Gc(e.y1,.5),e.r1=Gc(e.r1,0),e.x2=Gc(e.x2,.5),e.y2=Gc(e.y2,.5),e.r2=Gc(e.r2,.5),s=Rk):(e.x1=Gc(e.x1,0),e.y1=Gc(e.y1,0),e.x2=Gc(e.x2,1),e.y2=Gc(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Gc(e,t){return e??t}function PSe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const ose={basis:{curve:Ent},"basis-closed":{curve:wnt},"basis-open":{curve:xnt},bundle:{curve:Snt,tension:"beta",value:.85},cardinal:{curve:Tnt,tension:"tension",value:0},"cardinal-open":{curve:Ant,tension:"tension",value:0},"cardinal-closed":{curve:Cnt,tension:"tension",value:0},"catmull-rom":{curve:Dnt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Int,tension:"alpha",value:.5},"catmull-rom-open":{curve:Nnt,tension:"alpha",value:.5},linear:{curve:wU},"linear-closed":{curve:knt},monotone:{horizontal:Pnt,vertical:Rnt},natural:{curve:Ont},step:{curve:Mnt},"step-after":{curve:Fnt},"step-before":{curve:$nt}};function mW(e,t,n){var r=Ut(ose,e)&&ose[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const YTt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},KTt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,XTt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,QTt=/^((\s+,?\s*)|(,\s*))/,JTt=/^[01]/;function $b(e){const t=[];return(e.match(KTt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=YTt[s],a=ZTt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function ZTt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?JTt:XTt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(QTt);u!==null&&(i+=u[0].length)}return r}const Am=Math.PI/180,e2t=1e-14,Yg=Math.PI/2,cf=Math.PI*2,w1=Math.sqrt(3)/2;var x6={},S6={},OSe=[].join;function t2t(e,t,n,r,i,s,o,a,u){const l=OSe.call(arguments);if(x6[l])return x6[l];const c=o*Am,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,E=g*a+y*u,_=v*a+b*u,x=g*e+y*t,S=v*e+b*t;let A=1/((x-E)*(x-E)+(S-_)*(S-_))-.25;A<0&&(A=0);let D=Math.sqrt(A);s==i&&(D=-D);const I=.5*(E+x)-D*(S-_),O=.5*(_+S)+D*(x-E),R=Math.atan2(_-O,E-I);let F=Math.atan2(S-O,x-I)-R;F<0&&s===1?F+=cf:F>0&&s===0&&(F-=cf);const P=Math.ceil(Math.abs(F/(Yg+.001))),j=[];for(let z=0;z<P;++z){const V=R+z*F/P,$=R+(z+1)*F/P;j[z]=[I,O,V,$,n,r,f,d]}return x6[l]=j}function n2t(e){const t=OSe.call(e);if(S6[t])return S6[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),E=8/3*b*b/Math.sin(v),_=n+p-E*m,x=r+m+E*p,S=n+g,C=r+y,A=S+E*y,D=C-E*g;return S6[t]=[c*_+f*x,d*_+h*x,c*A+f*D,d*A+h*D,c*S+f*C,d*S+h*C]}const Qu=["l",0,0,0,0,0,0,0];function r2t(e,t,n){const r=Qu[0]=e[0];if(r==="a"||r==="A")Qu[1]=t*e[1],Qu[2]=n*e[2],Qu[3]=e[3],Qu[4]=e[4],Qu[5]=e[5],Qu[6]=t*e[6],Qu[7]=n*e[7];else if(r==="h"||r==="H")Qu[1]=t*e[1];else if(r==="v"||r==="V")Qu[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Qu[i]=(i%2==1?t:n)*e[i];return Qu}function ZS(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=r2t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":ase(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":ase(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function ase(e,t,n,r){const i=t2t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=n2t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const use=.5773502691896257,lse={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,cf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n,i=r-n*use,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n,i=r-n*use;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w1*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function MSe(e){return Ut(lse,e)?lse[e]:i2t(e)}var T6={};function i2t(e){if(!Ut(T6,e)){const t=$b(e);T6[e]={draw:function(n,r){ZS(n,t,0,0,Math.sqrt(r)/2)}}}return T6[e]}const rp=.448084975506;function s2t(e){return e.x}function o2t(e){return e.y}function a2t(e){return e.width}function u2t(e){return e.height}function bd(e){return typeof e=="function"?e:()=>+e}function RA(e,t,n){return Math.max(t,Math.min(e,n))}function $Se(){var e=s2t,t=o2t,n=a2t,r=u2t,i=bd(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=RA(+i.call(this,c),0,v),E=RA(+s.call(this,c),0,v),_=RA(+o.call(this,c),0,v),x=RA(+a.call(this,c),0,v);if(u||(u=h=QP()),b<=0&&E<=0&&_<=0&&x<=0)u.rect(p,m,g,y);else{var S=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(S-E,m),u.bezierCurveTo(S-rp*E,m,S,m+rp*E,S,m+E),u.lineTo(S,C-x),u.bezierCurveTo(S,C-rp*x,S-rp*x,C,S-x,C),u.lineTo(p+_,C),u.bezierCurveTo(p+rp*_,C,p,C-rp*_,p,C-_),u.lineTo(p,m+b),u.bezierCurveTo(p,m+rp*b,p+rp*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=bd(c),l):e},l.y=function(c){return arguments.length?(t=bd(c),l):t},l.width=function(c){return arguments.length?(n=bd(c),l):n},l.height=function(c){return arguments.length?(r=bd(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=bd(c),s=f!=null?bd(f):i,a=d!=null?bd(d):i,o=h!=null?bd(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function FSe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,E=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+v,a+b),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,cf);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=QP()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function A2(e,t){return e??t}const D2=e=>e.x||0,I2=e=>e.y||0,l2t=e=>e.width||0,c2t=e=>e.height||0,f2t=e=>(e.x||0)+(e.width||0),d2t=e=>(e.y||0)+(e.height||0),h2t=e=>e.startAngle||0,p2t=e=>e.endAngle||0,m2t=e=>e.padAngle||0,g2t=e=>e.innerRadius||0,y2t=e=>e.outerRadius||0,v2t=e=>e.cornerRadius||0,b2t=e=>A2(e.cornerRadiusTopLeft,e.cornerRadius)||0,_2t=e=>A2(e.cornerRadiusTopRight,e.cornerRadius)||0,E2t=e=>A2(e.cornerRadiusBottomRight,e.cornerRadius)||0,w2t=e=>A2(e.cornerRadiusBottomLeft,e.cornerRadius)||0,x2t=e=>A2(e.size,64),S2t=e=>e.size||1,IO=e=>e.defined!==!1,T2t=e=>MSe(e.shape||"circle"),C2t=vnt().startAngle(h2t).endAngle(p2t).padAngle(m2t).innerRadius(g2t).outerRadius(y2t).cornerRadius(v2t),A2t=Aye().x(D2).y1(I2).y0(d2t).defined(IO),D2t=Aye().y(I2).x1(D2).x0(f2t).defined(IO),I2t=xU().x(D2).y(I2).defined(IO),N2t=$Se().x(D2).y(I2).width(l2t).height(c2t).cornerRadius(b2t,_2t,E2t,w2t),k2t=_nt().type(T2t).size(x2t),R2t=FSe().x(D2).y(I2).defined(IO).size(S2t);function gW(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function P2t(e,t){return C2t.context(e)(t)}function O2t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?D2t:A2t).curve(mW(r,n.orient,n.tension)).context(e)(t)}function M2t(e,t){const n=t[0],r=n.interpolate||"linear";return I2t.curve(mW(r,n.orient,n.tension)).context(e)(t)}function G_(e,t,n,r){return N2t.context(e)(t,n,r)}function $2t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function F2t(e,t){return k2t.context(e)(t)}function L2t(e,t){return R2t.context(e)(t)}var LSe=1;function BSe(){LSe=1}function yW(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+LSe++),o=i.clipping[s]||(i.clipping[s]={id:s});return yn(r)?o.path=r(null):gW(n)?o.path=G_(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Xi(e){this.clear(),e&&this.union(e)}Xi.prototype={clone(){return new Xi(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function NO(e){this.mark=e,this.bounds=this.bounds||new Xi}function kO(e){NO.call(this,e),this.items=this.items||[]}dt(kO,NO);class jSe{constructor(t){this._pending=0,this._loader=t||hO()}pending(){return this._pending}sanitizeURL(t){const n=this;return cse(n),n._loader.sanitize(t,{context:"href"}).then(r=>(WE(n),r)).catch(()=>(WE(n),null))}loadImage(t){const n=this,r=vTt();return cse(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ut(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>WE(n),o.onerror=()=>WE(n),o.src=s,o}).catch(i=>(WE(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function cse(e){e._pending+=1}function WE(e){e._pending-=1}function Uh(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?B2t(t,r):0))}return e}function B2t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const j2t=cf-1e-8;let RO,GD,YD,u0,n9,KD,r9,i9;const Pp=(e,t)=>RO.add(e,t),XD=(e,t)=>Pp(GD=e,YD=t),fse=e=>Pp(e,RO.y1),dse=e=>Pp(RO.x1,e),Kg=(e,t)=>n9*e+r9*t,Xg=(e,t)=>KD*e+i9*t,C6=(e,t)=>Pp(Kg(e,t),Xg(e,t)),A6=(e,t)=>XD(Kg(e,t),Xg(e,t));function N2(e,t){return RO=e,t?(u0=t*Am,n9=i9=Math.cos(u0),KD=Math.sin(u0),r9=-KD):(n9=i9=1,u0=KD=r9=0),z2t}const z2t={beginPath(){},closePath(){},moveTo:A6,lineTo:A6,rect(e,t,n,r){u0?(C6(e+n,t),C6(e+n,t+r),C6(e,t+r),A6(e,t)):(Pp(e+n,t+r),XD(e,t))},quadraticCurveTo(e,t,n,r){const i=Kg(e,t),s=Xg(e,t),o=Kg(n,r),a=Xg(n,r);hse(GD,i,o,fse),hse(YD,s,a,dse),XD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Kg(e,t),a=Xg(e,t),u=Kg(n,r),l=Xg(n,r),c=Kg(i,s),f=Xg(i,s);pse(GD,o,u,c,fse),pse(YD,a,l,f,dse),XD(c,f)},arc(e,t,n,r,i,s){if(r+=u0,i+=u0,GD=n*Math.cos(i)+e,YD=n*Math.sin(i)+t,Math.abs(i-r)>j2t)Pp(e-n,t-n),Pp(e+n,t+n);else{const o=l=>Pp(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%cf,r<0&&(r+=cf),i=i%cf,i<0&&(i+=cf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=cf,a=r-r%Yg,u=0;u<4&&a>i;++u,a-=Yg)o(a);else for(a=r-r%Yg+Yg,u=0;u<4&&a<i;++u,a=a+Yg)o(a)}}};function hse(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function pse(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>e2t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(mse(u,e,t,n,r)),0<l&&l<1&&i(mse(l,e,t,n,r))}function mse(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var am=(am=om(1,1))?am.getContext("2d"):null;const s9=new Xi;function vW(e){return function(t,n){if(!am)return!0;e(am,t),s9.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=s9;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(am.isPointInPath(u,a))return!0;return!1}}function bW(e,t){return t.contains(e.x||0,e.y||0)}function zSe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(s9.set(n,r,n+i,r+s))}function USe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return cv(t,n,r,i,s)}function cv(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Fb(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ql(e,t){return e??t}function gse(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function U2t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+ql(t.x1,.5)*r,n.y1+ql(t.y1,.5)*i,Math.max(r,i)*ql(t.r1,0),n.x1+ql(t.x2,.5)*r,n.y1+ql(t.y2,.5)*i,Math.max(r,i)*ql(t.r2,.5));else{const o=ql(t.x1,0),a=ql(t.y1,0),u=ql(t.x2,1),l=ql(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=om(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=gse(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return gse(s,t.stops)}function VSe(e,t,n){return pW(n)?U2t(e,n,t.bounds):n}function Pk(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=VSe(e,t,t.fill),!0):!1}var V2t=[];function Lb(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=VSe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||V2t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function H2t(e,t){return e.zindex-t.zindex||e.index-t.index}function _W(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(H2t)}function Ic(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=_W(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function Ok(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=_W(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function EW(e){return function(t,n,r){Ic(n,i=>{(!r||r.intersects(i.bounds))&&HSe(e,t,i,i)})}}function q2t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&HSe(e,t,n.items[0],n.items)}}function HSe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Fb(t,n),n.fill&&Pk(t,n,i)&&t.fill(),n.stroke&&Lb(t,n,i)&&t.stroke()))}function PO(e){return e=e||xl,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,Ok(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function k2(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function wW(e){return PO(k2(e))}function _0(e,t){return"translate("+e+","+t+")"}function xW(e){return"rotate("+e+")"}function W2t(e,t){return"scale("+e+","+t+")"}function qSe(e){return _0(e.x||0,e.y||0)}function G2t(e){return _0(e.x||0,e.y||0)+(e.angle?" "+xW(e.angle):"")}function Y2t(e){return _0(e.x||0,e.y||0)+(e.angle?" "+xW(e.angle):"")+(e.scaleX||e.scaleY?" "+W2t(e.scaleX||1,e.scaleY||1):"")}function SW(e,t,n){function r(o,a){o("transform",G2t(a)),o("d",t(null,a))}function i(o,a){return t(N2(o,a.angle),a),Uh(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Am),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:EW(s),pick:wW(s),isect:n||vW(s)}}var K2t=SW("arc",P2t);function X2t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Q2t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function J2t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function TW(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(N2(u),c),Uh(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=k2(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:q2t(s),pick:a,isect:bW,tip:n}}var Z2t=TW("area",O2t,X2t);function eCt(e,t){var n=t.clip;e.save(),yn(n)?(e.beginPath(),n(e),e.clip()):WSe(e,t.group)}function WSe(e,t){e.beginPath(),gW(t)?G_(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function GSe(e){const t=ql(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function tCt(e,t){e("transform",qSe(t))}function YSe(e,t){const n=GSe(t);e("d",G_(null,t,n,n))}function nCt(e,t){e("class","background"),e("aria-hidden",!0),YSe(e,t)}function rCt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?YSe(e,t):e("d","")}function iCt(e,t,n){const r=t.clip?yW(n,t,t):null;e("clip-path",r)}function sCt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Uh(e,t),e.translate(t.x||0,t.y||0)}function eT(e,t,n,r){const i=GSe(t);e.beginPath(),G_(e,t,(n||0)+i,(r||0)+i)}const oCt=k2(eT),aCt=k2(eT,!1),uCt=k2(eT,!0);function lCt(e,t,n,r){Ic(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(eT(e,i,s,o),Fb(e,i),i.fill&&Pk(e,i,u)&&e.fill(),i.stroke&&!a&&Lb(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&WSe(e,i),n&&n.translate(-s,-o),Ic(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(eT(e,i,s,o),Fb(e,i),Lb(e,i,u)&&e.stroke())})}function cCt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return Ok(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&gW(u)&&!uCt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&aCt(e,u,o,a)?(e.restore(),u):(l=Ok(u,v=>fCt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&oCt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function fCt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var dCt={type:"group",tag:"g",nested:!1,attr:tCt,bound:sCt,draw:lCt,pick:cCt,isect:zSe,content:iCt,background:nCt,foreground:rCt},tT={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function CW(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function AW(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function DW(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function OO(e,t){return e==="center"?t/2:e==="right"?t:0}function MO(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function hCt(e,t,n){const r=CW(t,n),i=AW(t,r),s=DW(t,r),o=(t.x||0)-OO(t.align,i),a=(t.y||0)-MO(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,tT["xmlns:xlink"],"xlink:href"),e("transform",_0(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function pCt(e,t){const n=t.image,r=AW(t,n),i=DW(t,n),s=(t.x||0)-OO(t.align,r),o=(t.y||0)-MO(t.baseline,i);return e.set(s,o,s+r,o+i)}function mCt(e,t,n){Ic(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=CW(r,this);let s=AW(r,i),o=DW(r,i);if(s===0||o===0)return;let a=(r.x||0)-OO(r.align,s),u=(r.y||0)-MO(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Fb(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var gCt={type:"image",tag:"image",nested:!1,attr:hCt,bound:pCt,draw:mCt,pick:PO(),isect:xl,get:CW,xOffset:OO,yOffset:MO},yCt=TW("line",M2t,Q2t);function vCt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Y2t(t)),e("d",t.path)}function QD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Am,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=$b(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),ZS(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):ZS(e,u,r,i,s,o)}function bCt(e,t){return QD(N2(e,t.angle),t)?e.set(0,0,0,0):Uh(e,t,!0)}var _Ct={type:"path",tag:"path",nested:!1,attr:vCt,bound:bCt,draw:EW(QD),pick:wW(QD),isect:vW(QD)};function ECt(e,t){e("d",G_(null,t))}function wCt(e,t){var n,r;return Uh(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function yse(e,t){e.beginPath(),G_(e,t)}var xCt={type:"rect",tag:"path",nested:!1,attr:ECt,bound:wCt,draw:EW(yse),pick:wW(yse),isect:zSe};function SCt(e,t){e("transform",qSe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function TCt(e,t){var n,r;return Uh(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function KSe(e,t,n){var r,i,s,o;return t.stroke&&Lb(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function CCt(e,t,n){Ic(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&KSe(e,r,i)&&(Fb(e,r),e.stroke())}})}function ACt(e,t,n,r){return e.isPointInStroke?KSe(e,t,1)&&e.isPointInStroke(n,r):!1}var DCt={type:"rule",tag:"line",nested:!1,attr:SCt,bound:TCt,draw:CCt,pick:PO(ACt),isect:USe},ICt=SW("shape",$2t),NCt=SW("symbol",F2t,bW);const vse=Pwe();var Au={height:nd,measureWidth:IW,estimateWidth:Mk,width:Mk,canvas:XSe};XSe(!0);function XSe(e){Au.width=e&&am?IW:Mk}function Mk(e,t){return QSe(Im(e,t),nd(e))}function QSe(e,t){return~~(.8*e.length*t)}function IW(e,t){return nd(e)<=0||!(t=Im(e,t))?0:JSe(t,$O(e))}function JSe(e,t){const n=`(${t}) ${e}`;let r=vse.get(n);return r===void 0&&(am.font=t,r=am.measureText(e).width,vse.set(n,r)),r}function nd(e){return e.fontSize!=null?+e.fontSize||0:11}function Dm(e){return e.lineHeight!=null?e.lineHeight:nd(e)+2}function kCt(e){return Ue(e)?e.length>1?e:e[0]:e}function R2(e){return kCt(e.lineBreak&&e.text&&!Ue(e.text)?e.text.split(e.lineBreak):e.text)}function NW(e){const t=R2(e);return(Ue(t)?t.length-1:0)*Dm(e)}function Im(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?PCt(e,n):n}function RCt(e){if(Au.width===IW){const t=$O(e);return n=>JSe(n,t)}else if(Au.width===Mk){const t=nd(e);return n=>QSe(n,t)}else return t=>Au.width(e,t)}function PCt(e,t){var n=+e.limit,r=RCt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function P2(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function $O(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+nd(e)+"px "+P2(e,t)}function kW(e){var t=e.baseline,n=nd(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Dm(e):t==="line-bottom"?.29*n-.5*Dm(e):0)}const OCt={left:"start",center:"middle",right:"end"},Ox=new Xi;function FO(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Yg,t+=r*Math.cos(i),n+=r*Math.sin(i)),Ox.x1=t,Ox.y1=n,Ox}function MCt(e,t){var n=t.dx||0,r=(t.dy||0)+kW(t),i=FO(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",OCt[t.align]||"start"),a?(u=_0(s,o)+" "+xW(a),(n||r)&&(u+=" "+_0(n,r))):u=_0(s+n,o+r),e("transform",u)}function RW(e,t,n){var r=Au.height(t),i=t.align,s=FO(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+kW(t)-Math.round(.8*r),c=R2(t),f;if(Ue(c)?(r+=Dm(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Au.width(t,h)),0)):f=Au.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Am,o,a);else if(n===2)return e.rotatedPoints(t.angle*Am,o,a);return e}function $Ct(e,t,n){Ic(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=$O(r),e.textAlign=r.align||"left",s=FO(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Am),o=a=0),o+=r.dx||0,a+=(r.dy||0)+kW(r),c=R2(r),Fb(e,r),Ue(c))for(l=Dm(r),u=0;u<c.length;++u)f=Im(r,c[u]),r.fill&&Pk(e,r,i)&&e.fillText(f,o,a),r.stroke&&Lb(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Im(r,c),r.fill&&Pk(e,r,i)&&e.fillText(f,o,a),r.stroke&&Lb(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function FCt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=FO(t),a=o.x1,u=o.y1,l=RW(Ox,t,1),c=-t.angle*Am,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function LCt(e,t){const n=RW(Ox,e,2);return cv(t,n[0],n[1],n[2],n[3])||cv(t,n[0],n[1],n[4],n[5])||cv(t,n[4],n[5],n[6],n[7])||cv(t,n[2],n[3],n[6],n[7])}var BCt={type:"text",tag:"text",nested:!1,attr:MCt,bound:RW,draw:$Ct,pick:PO(FCt),isect:LCt},jCt=TW("trail",L2t,J2t),Bu={arc:K2t,area:Z2t,group:dCt,image:gCt,line:yCt,path:_Ct,rect:xCt,rule:DCt,shape:ICt,symbol:NCt,text:BCt,trail:jCt};function o9(e,t,n){var r=Bu[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Xi),e,n)}var bse={mark:null};function ZSe(e,t,n){var r=Bu[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(bse.mark=e,l=bse),c=o9(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Xi,o)for(a=0,u=s.length;a<u;++a)t.union(o9(s[a],i,n));return e.bounds=t}const zCt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function eTe(e,t){return JSON.stringify(e,zCt,t)}function tTe(e){const t=typeof e=="string"?JSON.parse(e):e;return nTe(t)}function nTe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&nTe(n[i]);return t&&ZSe(e),e}class rTe{constructor(t){arguments.length?this.root=tTe(t):(this.root=_se({marktype:"group",name:"root",role:"frame"}),this.root.items=[new kO(this.root)])}toJSON(t){return eTe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=_se(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function _se(e,t){const n={bounds:new Xi,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Op(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function PW(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function rs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Op(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function sl(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function iTe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function LO(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function UCt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Bu[i.marktype]).tip){for(o=LO(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let OW=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||hO(),this._tooltip=n||VCt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Op(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=UCt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function VCt(e,t,n,r){e.element().setAttribute("title",r||"")}class O2{constructor(t){this._el=null,this._bgcolor=null,this._loader=new jSe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const HCt="keydown",qCt="keypress",WCt="keyup",sTe="dragenter",JD="dragleave",oTe="dragover",a9="pointerdown",GCt="pointerup",$k="pointermove",ZD="pointerout",aTe="pointerover",u9="mousedown",YCt="mouseup",uTe="mousemove",Fk="mouseout",lTe="mouseover",Lk="click",KCt="dblclick",XCt="wheel",cTe="mousewheel",Bk="touchstart",jk="touchmove",zk="touchend",QCt=[HCt,qCt,WCt,sTe,JD,oTe,a9,GCt,$k,ZD,aTe,u9,YCt,uTe,Fk,lTe,Lk,KCt,XCt,cTe,Bk,jk,zk],l9=$k,Mx=Fk,c9=Lk;class M2 extends OW{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=QCt,this.pointermove=wse([$k,uTe],[aTe,lTe],[ZD,Fk]),this.dragover=wse([oTe],[sTe],[JD]),this.pointerout=xse([ZD,Fk]),this.dragleave=xse([JD])}initialize(t,n,r){return this._canvas=t&&PW(t,"canvas"),[Lk,u9,a9,$k,ZD,JD].forEach(i=>Ese(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(cTe,t)}pointerdown(t){this._down=this._active,this.fire(a9,t)}mousedown(t){this._down=this._active,this.fire(u9,t)}click(t){this._down===this._active&&(this.fire(Lk,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Bk,t,!0)}touchmove(t){this.fire(jk,t,!0)}touchend(t){this.fire(zk,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===c9&&i&&i.href?this.handleHref(n,i,i.href):(t===l9||t===Mx)&&this.handleTooltip(n,i,t!==Mx),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Ese(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=LO(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Bu[t.marktype].pick.call(this,o,t,n,r,i,s)}}const JCt=e=>e===Bk||e===jk||e===zk?[Bk,jk,zk]:[e];function Ese(e,t){JCt(t).forEach(n=>ZCt(e,n))}function ZCt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function zw(e,t,n){t.forEach(r=>e.fire(r,n))}function wse(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?zw(this,e,r):((!i||!i.exit)&&zw(this,n,r),this._active=s,zw(this,t,r),zw(this,e,r))}}function xse(e){return function(t){zw(this,e,t),this._active=null}}function eAt(){return typeof window<"u"&&window.devicePixelRatio||1}function tAt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?eAt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class Uk extends O2{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Xi,this._tempb=new Xi}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:om(1,1,this._options.type),t&&this._canvas&&(sl(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)tAt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=nAt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):rAt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Bu[n.marktype];n.clip&&eCt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const nAt=(e,t,n)=>new Xi().set(0,0,t,n).translate(-e[0],-e[1]);function rAt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class fTe extends OW{constructor(t,n){super(t,n);const r=this;r._hrefHandler=D6(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=D6(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Mx)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(c9,this._hrefHandler),i.removeEventListener(l9,this._tooltipHandler),i.removeEventListener(Mx,this._tooltipHandler)),this._svg=i=t&&PW(t,"svg"),i&&(i.addEventListener(c9,this._hrefHandler),i.addEventListener(l9,this._tooltipHandler),i.addEventListener(Mx,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:D6(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const D6=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},dTe="aria-hidden",MW="aria-label",$W="role",FW="aria-roledescription",hTe="graphics-object",LW="graphics-symbol",pTe=(e,t,n)=>({[$W]:e,[FW]:t,[MW]:n||void 0}),iAt=Ac(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Sse={axis:{desc:"axis",caption:aAt},legend:{desc:"legend",caption:uAt},"title-text":{desc:"title",caption:e=>`Title text '${Cse(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Cse(e)}'`}},Tse={ariaRole:$W,ariaRoleDescription:FW,description:MW};function mTe(e,t){const n=t.aria===!1;if(e(dTe,n||void 0),n||t.description==null)for(const r in Tse)e(Tse[r],void 0);else{const r=t.mark.marktype;e(MW,t.description),e($W,t.ariaRole||(r==="group"?hTe:LW)),e(FW,t.ariaRoleDescription||`${r} mark`)}}function gTe(e){return e.aria===!1?{[dTe]:!0}:iAt[e.role]?null:Sse[e.role]?oAt(e,Sse[e.role]):sAt(e)}function sAt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return pTe(n?hTe:LW,`${t} mark container`,e.description)}function oAt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return pTe(t.role||LW,t.desc,n.description||r(n))}catch{return null}}function Cse(e){return gt(e.text).join(" ")}function aAt(e){const t=e.datum,n=e.orient,r=t.title?yTe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Mb(a)?"discrete":a} scale with ${NSe(o,s,e)}`}function uAt(e){const t=e.datum,n=t.title?yTe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return cAt(r)+(n?` titled '${n}'`:"")+` for ${lAt(s)} with ${NSe(u,a,e)}`}function yTe(e){try{return gt(zn(e.items).items[0].text).join(" ")}catch{return null}}function lAt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+zn(e)}function cAt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const vTe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),fAt=e=>vTe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function BW(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${fAt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=vTe(u),a),toString:()=>e};return a}const bTe=e=>_Te(BW(),e)+"";function _Te(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):_Te(e,r)}return e.close()}const Vk={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Hk={blend:"mix-blend-mode"},ETe={fill:"none","stroke-miterlimit":10},GE=0,Ase="http://www.w3.org/2000/xmlns/",ns=tT.xmlns;class jW extends O2{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=rs(t,0,"svg",ns),this._svg.setAttributeNS(Ase,"xmlns",ns),this._svg.setAttributeNS(Ase,"xmlns:xlink",tT["xmlns:xlink"]),this._svg.setAttribute("version",tT.version),this._svg.setAttribute("class","marks"),sl(t,1),this._root=rs(this._svg,GE,"g",ns),Mp(this._root,ETe),sl(this._svg,GE+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Mp(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=rs(t,GE,"rect",ns),Mp(r,{width:this._width,height:this._height,fill:n}));const i=bTe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),sl(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Bu[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Dse(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Dse(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Bu[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Ise(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return sl(c,0),n._svg;c.setAttribute("class",iTe(n));const f=gTe(n);for(const m in f)Xo(c,m,f[m]);l||Xo(c,"pointer-events",u),Xo(c,"clip-path",n.clip?yW(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Ise(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&pAt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Ic(n,p),sl(c,h),c}_update(t,n,r){qd=n,So=n.__values__,mTe($x,r),t.attr($x,r,this);const i=gAt[t.type];i&&i.call(this,t,n,r),qd&&this.style(qd,r)}style(t,n){if(n!=null){for(const r in Vk){let i=r==="font"?P2(n):n[r];if(i===So[r])continue;const s=Vk[r];i==null?t.removeAttribute(s):(pW(i)&&(i=RSe(i,this._defs.gradient,wTe())),t.setAttribute(s,i+"")),So[r]=i}for(const r in Hk)eI(t,Hk[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=rs(t,GE+1,"defs",ns)),i=dAt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=rs(t,GE+1,"defs",ns)),i=hAt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):sl(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Dse(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function dAt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=rs(e,n++,"pattern",ns);Mp(o,{id:Rk+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=rs(o,0,"rect",ns),Mp(o,{width:1,height:1,fill:`url(${wTe()}#${t.id})`}),e=rs(e,n++,"radialGradient",ns),Mp(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=rs(e,n++,"linearGradient",ns),Mp(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=rs(e,r,"stop",ns),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return sl(e,r),n}function hAt(e,t,n){let r;return e=rs(e,n,"clipPath",ns),e.setAttribute("id",t.id),t.path?(r=rs(e,0,"path",ns),r.setAttribute("d",t.path)):(r=rs(e,0,"rect",ns),Mp(r,{x:0,y:0,width:t.width,height:t.height})),sl(e,1),n+1}function pAt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Ic(n,o=>{i=e.mark(t,o,i,r),++s}),sl(t,1+s)}function Ise(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Op(o,r,ns),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Op(o,"path",ns);s.appendChild(a),a.__data__=e;const u=Op(o,"g",ns);s.appendChild(u),u.__data__=e;const l=Op(o,"path",ns);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||mAt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function mAt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let qd=null,So=null;const gAt={group(e,t,n){const r=qd=t.childNodes[2];So=r.__values__,e.foreground($x,n,this),So=t.__values__,qd=t.childNodes[1],e.content($x,n,this);const i=qd=t.childNodes[0];e.background($x,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==So.events&&(Xo(r,"pointer-events",s),Xo(i,"pointer-events",s),So.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Xo(r,"display",null),this.style(i,n),Xo(i,"stroke",null),o&&(n.fill=null),So=r.__values__,this.style(r,n),o&&(n.fill=o),qd=null}else Xo(r,"display","none")},image(e,t,n){n.smooth===!1?(eI(t,"image-rendering","optimizeSpeed"),eI(t,"image-rendering","pixelated")):eI(t,"image-rendering",null)},text(e,t,n){const r=R2(n);let i,s,o,a;Ue(r)?(s=r.map(u=>Im(n,u)),i=s.join(`
`),i!==So.text&&(sl(t,0),o=t.ownerDocument,a=Dm(n),s.forEach((u,l)=>{const c=Op(o,"tspan",ns);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),So.text=i)):(s=Im(n,r),s!==So.text&&(t.textContent=s,So.text=s)),Xo(t,"font-family",P2(n)),Xo(t,"font-size",nd(n)+"px"),Xo(t,"font-style",n.fontStyle),Xo(t,"font-variant",n.fontVariant),Xo(t,"font-weight",n.fontWeight)}};function $x(e,t,n){t!==So[e]&&(n?yAt(qd,e,t,n):Xo(qd,e,t),So[e]=t)}function eI(e,t,n){n!==So[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),So[t]=n)}function Mp(e,t){for(const n in t)Xo(e,n,t[n])}function Xo(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function yAt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function wTe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class xTe extends O2{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=BW();n.open("svg",gn({},tT,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",ETe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Bu[n.marktype],i=r.tag,s=[mTe,r.attr];t.open("g",{class:iTe(n),"clip-path":n.clip?yW(this,n,n.group):null},gTe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=R2(a);if(Ue(l)){const c={x:0,dy:Dm(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Im(a,l[f])).close()}else t.text(Im(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Ic(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Ic(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&vAt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:Rk+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function vAt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=P2(t),e["font-size"]=nd(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Vk){let a=t[o];const u=Vk[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(pW(a)&&(a=RSe(a,i.gradient,"")),e[u]=a)}for(const o in Hk){const a=t[o];a!=null&&(s=s||[],s.push(`${Hk[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Ql={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function bAt(e){Ql.svgMarkTypes=e.svgMarkTypes??["text"],Ql.svgOnTop=e.svgOnTop??!0,Ql.debug=e.debug??!1}class f9 extends O2{constructor(t){super(t),this._svgRenderer=new jW(t),this._canvasRenderer=new Uk(t)}initialize(t,n,r,i,s){this._root_el=rs(t,0,"div");const o=rs(this._root_el,0,"div"),a=rs(this._root_el,1,"div");return this._root_el.style.position="relative",Ql.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Ql.svgOnTop?a:o,this._canvasEl=Ql.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Ql.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Ql.svgMarkTypes.includes(s));this._svgRenderer.render(t,Ql.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Ql.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class STe extends M2{constructor(t,n){super(t,n)}initialize(t,n,r){const i=rs(rs(t,0,"div"),Ql.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const TTe="canvas",CTe="hybrid",ATe="png",DTe="svg",ITe="none",$p={Canvas:TTe,PNG:ATe,SVG:DTe,Hybrid:CTe,None:ITe},Q0={};Q0[TTe]=Q0[ATe]={renderer:Uk,headless:Uk,handler:M2};Q0[DTe]={renderer:jW,headless:xTe,handler:fTe};Q0[CTe]={renderer:f9,headless:f9,handler:STe};Q0[ITe]={};function BO(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Q0[e]=t,this):Q0[e]}function NTe(e,t,n){const r=[],i=new Xi().union(t),s=e.marktype;return s?kTe(e,i,n,r):s==="group"?RTe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function kTe(e,t,n,r){if(_At(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)RTe(i[a],t,n,r);else for(const u=Bu[s].isect;a<o;++a){const l=i[a];PTe(l,t,u)&&r.push(l)}}return r}function _At(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function RTe(e,t,n,r){n&&n(e.mark)&&PTe(e,t,Bu.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)kTe(i[u],t,n,r);t.translate(o,a)}return r}function PTe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const I6=new Xi;function OTe(e){const t=e.clip;if(yn(t))t(N2(I6.clear()));else if(t)I6.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(I6)}const EAt=1e-9;function zW(e,t,n){return e===t?!0:n==="path"?MTe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Wn(e)&&Wn(t)?Math.abs(e-t)<=EAt:!e||!t||!vt(e)&&!vt(t)?e==t:wAt(e,t)}function MTe(e,t){return zW($b(e),$b(t))}function wAt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!zW(e[i],t[i],i))return!1;return typeof e==typeof t}function xAt(){BSe(),GTt()}const Bb="top",sc="left",lc="right",Nm="bottom",SAt="top-left",TAt="top-right",CAt="bottom-left",AAt="bottom-right",UW="start",d9="middle",Zo="end",DAt="x",IAt="y",jO="group",VW="axis",HW="title",NAt="frame",kAt="scope",qW="legend",$Te="row-header",FTe="row-footer",LTe="row-title",BTe="column-header",jTe="column-footer",zTe="column-title",RAt="padding",PAt="symbol",UTe="fit",VTe="fit-x",HTe="fit-y",OAt="pad",WW="none",PA="all",h9="each",GW="flush",Fp="column",Lp="row";function qTe(e){Oe.call(this,null,e)}dt(qTe,Oe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Bu[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=OA(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===jO||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(OA(l,o))),r.role){case VW:case qW:case HW:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(OA(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(OA(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return OTe(r),t.modifies("bounds")}});function OA(e,t,n){return t(e.bounds.clear(),e,n)}const Nse=":vega_identifier:";function YW(e){Oe.call(this,0,e)}YW.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};dt(YW,Oe,{transform(e,t){const n=MAt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function MAt(e){return e._signals[Nse]||(e._signals[Nse]=e.add(0))}function WTe(e){Oe.call(this,null,e)}dt(WTe,Oe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,$At(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===jO?kO:NO;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function $At(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function GTe(e){Oe.call(this,null,e)}const kse={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!YTe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},YTe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Rse=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(YTe(i,s=e[n].bounds,t))return!0},FAt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},LAt=(e,t,n)=>{var r=e.range(),i=new Xi;return t===Bb||t===Nm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Pse=e=>(e.forEach(t=>t.opacity=1),e),Ose=(e,t)=>e.reflow(t.modified()).modifies("opacity");dt(GTe,Oe,{transform(e,t){const n=kse[e.method]||kse.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Pse(i),t=Ose(t,e)),t;if(i=i.filter(FAt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Pse(i),t=Ose(t,e),s.length>=3&&Rse(s,r)){do s=n(s,r);while(s.length>=3&&Rse(s,r));s.length<3&&!zn(i).opacity&&(s.length>1&&(zn(s).opacity=0),zn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=LAt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function KTe(e){Oe.call(this,null,e)}dt(KTe,Oe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const wo=new Xi;function fv(e,t,n){return e[t]===n?0:(e[t]=n,1)}function BAt(e){var t=e.items[0].orient;return t===sc||t===lc}function jAt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function zAt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=jAt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&NW(p),v=0,b=0,E,_;switch(wo.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case Bb:v=f||0,b=-c,_=Math.max(d,Math.min(h,-g.y1)),g.add(0,-_).add(l,0),p&&MA(e,p,_,m,y,0,-1,g);break;case sc:v=-c,b=f||0,_=Math.max(d,Math.min(h,-g.x1)),g.add(-_,0).add(0,l),p&&MA(e,p,_,m,y,1,-1,g);break;case lc:v=n+c,b=f||0,_=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(_,l),p&&MA(e,p,_,m,y,1,1,g);break;case Nm:v=f||0,b=r+c,_=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,_),p&&MA(e,p,_,m,0,0,1,g);break;default:v=i.x,b=i.y}return Uh(g.translate(v,b),i),fv(i,"x",v+o)|fv(i,"y",b+o)&&(i.bounds=wo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function MA(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Mse=(e,t)=>Math.floor(Math.min(e,t)),$se=(e,t)=>Math.ceil(Math.max(e,t));function UAt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===jO)switch(i.role){case VW:case qW:case HW:break;case $Te:o.rowheaders.push(...s);break;case FTe:o.rowfooters.push(...s);break;case BTe:o.colheaders.push(...s);break;case jTe:o.colfooters.push(...s);break;case LTe:o.rowtitle=s[0];break;case zTe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function VAt(e){return new Xi().set(0,0,e.width||0,e.height||0)}function HAt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Zr(e,t,n){const r=vt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Fse(e){return e<0?Math.ceil(-e):0}function XTe(e,t,n){var r=!n.nodirty,i=n.bounds===GW?VAt:HAt,s=wo.set(0,0,0,0),o=Zr(n.align,Fp),a=Zr(n.align,Lp),u=Zr(n.padding,Fp),l=Zr(n.padding,Lp),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),E=Array(d),_=Array(d),x,S,C,A,D,I,O,R,M,F,P;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)I=t[S],D=_[S]=i(I),I.x=I.x||0,b[S]=0,I.y=I.y||0,E[S]=0,C=S%c,A=~~(S/c),m=Math.max(m,O=Math.ceil(D.x2)),v=Math.max(v,R=Math.ceil(D.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],R),h[S]=u+Fse(D.x1),g[S]=l+Fse(D.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===h9)for(C=1;C<c;++C){for(P=0,S=C;S<d;S+=c)P<h[S]&&(P=h[S]);for(S=C;S<d;S+=c)h[S]=P+p[C-1]}else if(o===PA){for(P=0,S=0;S<d;++S)S%c&&P<h[S]&&(P=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=P+m)}else for(o=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===h9)for(A=1;A<f;++A){for(P=0,S=A*c,x=S+c;S<x;++S)P<g[S]&&(P=g[S]);for(S=A*c;S<x;++S)g[S]=P+y[A-1]}else if(a===PA){for(P=0,S=c;S<d;++S)P<g[S]&&(P=g[S]);for(S=c;S<d;++S)g[S]=P+v}else for(a=!1,A=1;A<f;++A)for(S=A*c,x=S+c;S<x;++S)g[S]+=y[A-1];for(M=0,S=0;S<d;++S)M=h[S]+(S%c?M:0),b[S]+=M-t[S].x;for(C=0;C<c;++C)for(F=0,S=C;S<d;S+=c)F+=g[S],E[S]+=F-t[S].y;if(o&&Zr(n.center,Fp)&&f>1)for(S=0;S<d;++S)D=o===PA?m:p[S%c],M=D-_[S].x2-t[S].x-b[S],M>0&&(b[S]+=M/2);if(a&&Zr(n.center,Lp)&&c!==1)for(S=0;S<d;++S)D=a===PA?v:y[~~(S/c)],F=D-_[S].y2-t[S].y-E[S],F>0&&(E[S]+=F/2);for(S=0;S<d;++S)s.union(_[S].translate(b[S],E[S]));switch(M=Zr(n.anchor,DAt),F=Zr(n.anchor,IAt),Zr(n.anchor,Fp)){case Zo:M-=s.width();break;case d9:M-=s.width()/2}switch(Zr(n.anchor,Lp)){case Zo:F-=s.height();break;case d9:F-=s.height()/2}for(M=Math.round(M),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)I=t[S],I.x+=b[S]+=M,I.y+=E[S]+=F,s.union(I.mark.bounds.union(I.bounds.translate(b[S],E[S]))),r&&e.dirty(I);return s}function qAt(e,t,n){var r=UAt(t),i=r.marks,s=n.bounds===GW?WAt:GAt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=XTe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Zr(n.headerBand,Lp,null),c=$A(e,r.rowheaders,i,a,u,-Zr(o,"rowHeader"),Mse,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Zr(n.headerBand,Fp,null),f=$A(e,r.colheaders,i,a,a,-Zr(o,"columnHeader"),Mse,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Zr(n.footerBand,Lp,null),d=$A(e,r.rowfooters,i,a,u,Zr(o,"rowFooter"),$se,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Zr(n.footerBand,Fp,null),h=$A(e,r.colfooters,i,a,a,Zr(o,"columnFooter"),$se,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Zr(n.titleAnchor,Lp),g=Zr(o,"rowTitle"),g=p===Zo?d+g:c-g,m=Zr(n.titleBand,Lp,.5),Lse(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Zr(n.titleAnchor,Fp),g=Zr(o,"columnTitle"),g=p===Zo?h+g:f-g,m=Zr(n.titleBand,Fp,.5),Lse(e,r.coltitle,g,1,y,m))}function WAt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function GAt(e,t){return e.bounds[t]}function $A(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,E,_,x,S,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,E=t.length;v<E;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,E=t.length;v<E;++v,y+=f){for(x=t[v],_=x.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),A=m):(C=m,A=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),_.union(x.bounds.translate(C-(x.x||0),A-(x.y||0))),x.x=C,x.y=A,e.dirty(x),g=o(g,_[l])}return g}function Lse(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function YAt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function KAt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function XAt(e,t,n,r,i,s,o){const a=YAt(n,t),u=KAt(e,a("offset",0)),l=a("anchor",UW),c=l===Zo?1:l===d9?.5:0,f={align:h9,bounds:a("bounds",GW),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case sc:f.anchor={x:Math.floor(r.x1)-u,column:Zo,y:c*(o||r.height()+2*r.y1),row:l};break;case lc:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Bb:f.anchor={y:Math.floor(i.y1)-u,row:Zo,x:c*(s||i.width()+2*i.x1),column:l};break;case Nm:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case SAt:f.anchor={x:u,y:u};break;case TAt:f.anchor={x:s-u,y:u,column:Zo};break;case CAt:f.anchor={x:u,y:o-u,row:Zo};break;case AAt:f.anchor={x:s-u,y:o-u,column:Zo,row:Zo};break}return f}function QAt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),ZAt(e,n,n.items[0].items[0]),s=JAt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===PAt&&eDt(n.items[0].items[0].items[0].items),i!==WW&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Uh(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function JAt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function ZAt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&YE(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case sc:i+=Math.ceil(o.bounds.width())+u;break;case lc:case Nm:break;default:s+=o.bounds.height()+u}switch((i||s)&&YE(e,n,i,s),o.orient){case sc:c+=x1(t,n,o,a,1,1);break;case lc:l+=x1(t,n,o,Zo,0,0)+u,c+=x1(t,n,o,a,1,1);break;case Nm:l+=x1(t,n,o,a,0,0),c+=x1(t,n,o,Zo,-1,0,1)+u;break;default:l+=x1(t,n,o,a,0,0)}(l||c)&&YE(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(YE(e,n,-l,0),YE(e,o,-l,0))}}function x1(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:NW(n);return Math.round(r===UW?f:r===Zo?d-h:.5*(c-h))}function YE(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function eDt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function tDt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===sc||a===lc?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==jO?a===sc?(p=i.y2,h=i.y1):a===lc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===sc&&(p=r,h=0),b=u===UW?p:u===Zo?h:(p+h)/2,d&&d.text){switch(a){case Bb:case Nm:v=f.bounds.height()+c;break;case sc:y=f.bounds.width()+c;break;case lc:y=-f.bounds.width()-c;break}wo.clear().union(d.bounds),wo.translate(y-(d.x||0),v-(d.y||0)),fv(d,"x",y)|fv(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(wo),d.mark.bounds.clear().union(wo),e.dirty(d)),wo.clear().union(d.bounds)}else wo.clear();switch(wo.union(f.bounds),a){case Bb:m=b,g=i.y1-wo.height()-l;break;case sc:m=i.x1-wo.width()-l,g=b;break;case lc:m=i.x2+wo.width()+l,g=b;break;case Nm:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return fv(s,"x",m)|fv(s,"y",g)&&(wo.translate(m,g),e.dirty(s),s.bounds.clear().union(wo),t.bounds.clear().union(wo),e.dirty(s)),s.bounds}function QTe(e){Oe.call(this,null,e)}dt(QTe,Oe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&qAt(n,r,e.layout),rDt(n,r,e)}),nDt(e.mark.group)?t.reflow():t}});function nDt(e){return e&&e.mark.role!=="legend-entry"}function rDt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Xi().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case VW:h=BAt(f)?a:u,h.union(zAt(e,f,i,s));break;case HW:c=f;break;case qW:l.push(QAt(e,f));break;case NAt:case kAt:case $Te:case FTe:case LTe:case BTe:case jTe:case zTe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||lc,d!==WW&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];XTe(e,v,XAt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===UTe||n.autosize.type===VTe||n.autosize.type===HTe))switch(y.orient){case sc:case lc:o.add(v.x1,0).add(v.x2,0);break;case Bb:case Nm:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(tDt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),iDt(e,t,o,n)}function iDt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===RAt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===WW?(l=0,f=0,u=o,c=a):s===UTe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===VTe?(u=Math.max(0,o-l-d),a=c+f+h):s===HTe?(o=u+l+d,c=Math.max(0,a-f-h)):s===OAt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const sDt=Object.freeze(Object.defineProperty({__proto__:null,bound:qTe,identifier:YW,mark:WTe,overlap:GTe,render:KTe,viewlayout:QTe},Symbol.toStringTag,{value:"Module"}));function JTe(e){Oe.call(this,null,e)}dt(JTe,Oe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=dW(s,o,e.minstep),u=e.format||TSe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?SSe(s,e.values,a):hW(s,a);return i&&(r.rem=i),i=l.map((c,f)=>sr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(sr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function ZTe(e){Oe.call(this,null,e)}function oDt(){return sr({})}function aDt(e){const t=U_().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}dt(ZTe,Oe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||oDt,s=e.key||Bt,o=this.value;return Ue(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=aDt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function e2e(e){Oe.call(this,null,e)}dt(e2e,Oe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ue(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||op,u=i.enter||op,l=i.exit||op,c=(s&&!o?i[s]:a)||op;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==op&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==op&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==op){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function t2e(e){Oe.call(this,[],e)}dt(t2e,Oe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||WD,o=e.scale,a=+e.limit,u=dW(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===WD,c=e.format||ISe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||DSe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===WD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,yn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=zo(m=p||8),i=i.map((y,v)=>sr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(sr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===OTt?(d=o.domain(),h=ESe(o,d[0],zn(d)),f.length<3&&!e.values&&d[0]!==zn(d)&&(f=[d[0],zn(d)]),i=f.map((y,v)=>sr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=qTt(o),i=f.map((y,v)=>sr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const uDt=e=>e.source.x,lDt=e=>e.source.y,cDt=e=>e.target.x,fDt=e=>e.target.y;function KW(e){Oe.call(this,{},e)}KW.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};dt(KW,Oe,{transform(e,t){var n=e.sourceX||uDt,r=e.sourceY||lDt,i=e.targetX||cDt,s=e.targetY||fDt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Bse.get(u+"-"+a)||Bse.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const n2e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,dDt=(e,t,n,r)=>n2e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),r2e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},hDt=(e,t,n,r)=>r2e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),i2e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},pDt=(e,t,n,r)=>i2e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),mDt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,gDt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,yDt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},vDt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},bDt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},_Dt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Bse=U_({line:n2e,"line-radial":dDt,arc:r2e,"arc-radial":hDt,curve:i2e,"curve-radial":pDt,"orthogonal-horizontal":mDt,"orthogonal-vertical":gDt,"orthogonal-radial":yDt,"diagonal-horizontal":vDt,"diagonal-vertical":bDt,"diagonal-radial":_Dt});function XW(e){Oe.call(this,null,e)}XW.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};dt(XW,Oe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||B_,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/tge(l),h=wu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const EDt=5;function wDt(e){const t=e.type;return!e.bins&&(t===Pb||t===x2||t===S2)}function s2e(e){return lW(e)&&e!==Tf}const xDt=Ac(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function o2e(e){Oe.call(this,null,e),this.modified(!0)}dt(o2e,Oe,{transform(e,t){var n=t.dataflow,r=this.value,i=SDt(e);(!r||i!==r.type)&&(this.value=r=Jn(i)());for(i in e)if(!xDt[i]){if(i==="padding"&&s2e(r.type))continue;yn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return NDt(r,e,IDt(r,e,CDt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function SDt(e){var t=e.type,n="",r;return t===Tf?Tf+"-"+Pb:(TDt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Tf+"-":r===3?W_+"-":""),(n+t||Pb).toLowerCase())}function TDt(e){const t=e.type;return lW(t)&&t!==K0&&t!==X0&&(e.scheme||e.range&&e.range.length&&e.range.every(yt))}function CDt(e,t,n){const r=ADt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&wDt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return s2e(s)&&t.padding&&i[0]!==zn(i)&&(i=DDt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(a2e(s,i,n)),s===sW&&e.unknown(t.domainImplicit?a5:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&dW(e,t.nice)||null),i.length}function ADt(e,t,n){return t?(e.domain(a2e(e.type,t,n)),t.length):-1}function DDt(e,t,n,r,i,s){var o=Math.abs(zn(n)-n[0]),a=o/(o-2*r),u=e===Ah?JH(t,null,a):e===S2?Dk(t,null,a,.5):e===x2?Dk(t,null,a,i||1):e===TO?ZH(t,null,a,s||1):QH(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function a2e(e,t,n){if(gSe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+lt(t))}return t}function IDt(e,t,n){let r=t.bins;if(r&&!Ue(r)){const i=e.domain(),s=i[0],o=zn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=wu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===oW&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function NDt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=kDt(r,t,n);else if(t.scheme&&(s=RDt(r,t,n),yn(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&ySe(r))return e.interpolator(DO(p9(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(cW(t.interpolate,t.interpolateGamma)):yn(e.round)?e.round(i):yn(e.rangeRound)&&e.interpolate(i?qT:Qm),s&&e.range(p9(s,t.reverse))}function kDt(e,t,n){e!==cSe&&e!==Z8&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Z8?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*iW(n,i,r)]}function RDt(e,t,n){var r=t.schemeExtent,i,s;return Ue(t.scheme)?s=DO(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=fW(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===AO?n+1:e===oW?n-1:e===Ob||e===CO?+t.schemeCount||EDt:n,ySe(e)?jse(s,r,t.reverse):yn(s)?_Se(jse(s,r),n):e===sW?s:s.slice(0,n)}function jse(e,t,n){return yn(e)&&(t||n)?bSe(e,p9(t||[0,1],n)):e}function p9(e,t){return t?e.slice().reverse():e}function u2e(e){Oe.call(this,null,e)}dt(u2e,Oe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(jy(e.sort)),this.modified(n),t}});const zse="zero",l2e="center",c2e="normalize",f2e=["y0","y1"];function QW(e){Oe.call(this,null,e)}QW.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:zse,values:[zse,l2e,c2e]},{name:"as",type:"string",array:!0,length:2,default:f2e}]};dt(QW,Oe,{transform(e,t){var n=e.as||f2e,r=n[0],i=n[1],s=jy(e.sort),o=e.field||B_,a=e.offset===l2e?PDt:e.offset===c2e?ODt:MDt,u,l,c,f;for(u=$Dt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function PDt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function ODt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function MDt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function $Dt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const FDt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:JTe,datajoin:ZTe,encode:e2e,legendentries:t2e,linkpath:KW,pie:XW,scale:o2e,sortitems:u2e,stack:QW},Symbol.toStringTag,{value:"Module"}));var LDt=Math.abs,m9=Math.cos,qk=Math.sin,BDt=1e-6,d2e=Math.PI,g9=d2e/2,Use=jDt(2);function Vse(e){return e>1?g9:e<-1?-g9:Math.asin(e)}function jDt(e){return e>0?Math.sqrt(e):0}function zDt(e,t){var n=e*qk(t),r=30,i;do t-=i=(t+qk(t)-n)/(1+m9(t));while(LDt(i)>BDt&&--r>0);return t/2}function UDt(e,t,n){function r(i,s){return[e*i*m9(s=zDt(n,s)),t*qk(s)]}return r.invert=function(i,s){return s=Vse(s/t),[i/(e*m9(s)),Vse((2*s+qk(2*s))/n)]},r}var VDt=UDt(Use/g9,Use,d2e);function HDt(){return Qf(VDt).scale(169.529)}const qDt=tye(),y9=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function WDt(e,t){return function n(){const r=t();return r.type=e,r.path=tye().projection(r),r.copy=r.copy||function(){const i=n();return y9.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},pSe(r)}}function JW(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Wk[e]=WDt(e,t),this):Wk[e]||null}function h2e(e){return e&&e.path||qDt}const Wk={albers:rye,albersusa:Oet,azimuthalequalarea:Met,azimuthalequidistant:$et,conicconformal:Bet,conicequalarea:BN,conicequidistant:Uet,equalEarth:Het,equirectangular:jet,gnomonic:qet,identity:Wet,mercator:Fet,mollweide:HDt,naturalEarth1:Get,orthographic:Yet,stereographic:Ket,transversemercator:Xet};for(const e in Wk)JW(e,Wk[e]);function GDt(){}const _d=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function p2e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),YDt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(KDt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,_d[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,_d[m|g<<1].forEach(b);for(_d[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,_d[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,_d[m|g<<1|y<<2|v<<3].forEach(b);_d[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,_d[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,_d[y<<2|v<<3].forEach(b);_d[y<<3].forEach(b);function b(E){var _=[E[0][0]+h,E[0][1]+p],x=[E[1][0]+h,E[1][1]+p],S=o(_),C=o(x),A,D;(A=d[S])?(D=f[C])?(delete d[A.end],delete f[D.start],A===D?(A.ring.push(x),c(A.ring)):f[A.start]=d[D.end]={start:A.start,end:D.end,ring:A.ring.concat(D.ring)}):(delete d[A.end],A.ring.push(x),d[A.end=C]=A):(A=f[C])?(D=d[S])?(delete f[A.start],delete d[D.end],A===D?(A.ring.push(x),c(A.ring)):f[D.start]=d[A.end]={start:D.start,end:A.end,ring:D.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(_),f[A.start=S]=A):f[S]=d[C]={start:S,end:C,ring:[_,x]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:GDt,r):n===a},r}function YDt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function KDt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=XDt(e,t[n]))return i;return 0}function XDt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(QDt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function QDt(e,t,n){var r;return JDt(e,t,n)&&ZDt(e[r=+(e[0]===t[0])],n[r],t[r])}function JDt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function ZDt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function m2e(e,t,n){return function(r){var i=$f(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?ym(s,o,e):a/(e+1);return wu(s+u,o,u)}}function ZW(e){Oe.call(this,null,e)}ZW.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};dt(ZW,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||jo,s=p2e().smooth(e.smooth!==!1),o=e.thresholds||eIt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ue(o)?o:o(c.values));tIt(f,c,l,e),f.forEach(d=>{u.push(gO(l,sr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function eIt(e,t,n){const r=m2e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Ga(t(i).values)))}function tIt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(yn(i)&&(i=i(n,r)),yn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Wn(i)?i:i[0])||1,a=(Wn(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(g2e(t,o,a,u,l))}function g2e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Hse(e,t,n){const r=e>=0?e:vq(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function N6(e){return yn(e)?e:zo(+e)}function y2e(){var e=u=>u[0],t=u=>u[1],n=B_,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Hse(r[0],u,e)>>o,f=Hse(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(E=>{const _=d+(+e(E)>>o),x=h+(+t(E)>>o);_>=0&&_<p&&x>=0&&x<m&&(g[_+x*p]+=+n(E))}),c>0&&f>0?(S1(p,m,g,y,c),T1(p,m,y,g,f),S1(p,m,g,y,c),T1(p,m,y,g,f),S1(p,m,g,y,c),T1(p,m,y,g,f)):c>0?(S1(p,m,g,y,c),S1(p,m,y,g,c),S1(p,m,g,y,c),v=y):f>0&&(T1(p,m,g,y,f),T1(p,m,y,g,f),T1(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/tge(v);for(let E=0,_=p*m;E<_;++E)v[E]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=N6(u),a):e},a.y=function(u){return arguments.length?(t=N6(u),a):t},a.weight=function(u){return arguments.length?(n=N6(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=gt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function S1(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function T1(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function eG(e){Oe.call(this,null,e)}eG.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const nIt=["x","y","weight","size","cellSize","bandwidth"];function v2e(e,t){return nIt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}dt(eG,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=rIt(r,e.groupby),s=(e.groupby||[]).map(Ci),o=v2e(y2e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>sr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function rIt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function tG(e){Oe.call(this,null,e)}tG.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};dt(tG,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=p2e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||m2e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=v2e(y2e(),e)(i,!0),u=g2e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ue(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(sr),n}});const v9="Feature",nG="FeatureCollection",iIt="MultiPoint";function rG(e){Oe.call(this,null,e)}rG.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};dt(rG,Oe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&jo,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Po(a))||s&&t.modified(Po(s))||o&&t.modified(Po(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:v9,geometry:{type:iIt,coordinates:r}})),this.value={type:nG,features:n}}});function iG(e){Oe.call(this,null,e)}iG.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};dt(iG,Oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||jo,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=h2e(e.projection),n.materialize().reflow()):o=i===jo||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=sIt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function sIt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function sG(e){Oe.call(this,null,e)}sG.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};dt(sG,Oe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function oG(e){Oe.call(this,null,e)}oG.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};dt(oG,Oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=oIt(h2e(e.projection),e.field||wl("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function oIt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function aG(e){Oe.call(this,[],e),this.generator=det()}aG.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};dt(aG,Oe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)yn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(vxe(n[0],i)):t.add.push(sr(i)),n[0]=i,t}});function uG(e){Oe.call(this,null,e)}uG.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};dt(uG,Oe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||jo,s=uIt(e.opacity,e),o=aIt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Ga(n.map(l=>Ga(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=gn({},l,u);r||(f.$max=Ga(c.values||[])),l[a]=lIt(c,f,o.dep?o:zo(o(f)),s.dep?s:zo(s(f)))}),t.reflow(!0).modifies(a)}});function aIt(e,t){let n;return yn(e)?(n=r=>vm(e(r,t)),n.dep=b2e(e)):n=zo(vm(e||"#888")),n}function uIt(e,t){let n;return yn(e)?(n=r=>e(r,t),n.dep=b2e(e)):e?n=zo(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function b2e(e){if(!yn(e))return!1;const t=Ac(Po(e));return t.$x||t.$y||t.$value||t.$max}function lIt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Tp,d=om(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const E=n(t);m[y+0]=E.r,m[y+1]=E.g,m[y+2]=E.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function _2e(e){Oe.call(this,null,e),this.modified(!0)}dt(_2e,Oe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=fIt(e.type),y9.forEach(r=>{e[r]!=null&&qse(n,r,e[r])})):y9.forEach(r=>{e.modified(r)&&qse(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&cIt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function cIt(e,t){const n=dIt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function fIt(e){const t=JW((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function qse(e,t,n){yn(e[t])&&e[t](n)}function dIt(e){return e=gt(e),e.length===1?e[0]:{type:nG,features:e.reduce((t,n)=>t.concat(hIt(n)),[])}}function hIt(e){return e.type===nG?e.features:gt(e).filter(t=>t!=null).map(t=>t.type===v9?t:{type:v9,geometry:t})}const pIt=Object.freeze(Object.defineProperty({__proto__:null,contour:tG,geojson:rG,geopath:iG,geopoint:sG,geoshape:oG,graticule:aG,heatmap:uG,isocontour:ZW,kde2d:eG,projection:_2e},Symbol.toStringTag,{value:"Module"})),Wse={center:uZe,collide:AZe,nbody:LZe,link:IZe,x:BZe,y:jZe},Uw="forces",b9=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],mIt=["static","iterations"],E2e=["x","y","vx","vy"];function lG(e){Oe.call(this,null,e)}lG.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:E2e}]};dt(lG,Oe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(b9),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&w2e(n,e,0,t)):(this.value=n=yIt(t.source,e),n.on("tick",gIt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(mIt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==Uw||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(E2e)}});function gIt(e,t){return()=>e.touch(t).run()}function yIt(e,t){const n=FZe(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),w2e(n,t,!0).on("end",()=>s=!0)}function w2e(e,t,n,r){var i=gt(t.forces),s,o,a,u;for(s=0,o=b9.length;s<o;++s)a=b9[s],a!==Uw&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=Uw+s,a=n||t.modified(Uw,s)?bIt(i[s]):r&&vIt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(Uw+s,null);return e.numForces=i.length,e}function vIt(e,t){var n,r;for(n in e)if(yn(r=e[n])&&t.modified(Po(r)))return 1;return 0}function bIt(e){var t,n;Ut(Wse,e.force)||Le("Unrecognized force: "+e.force),t=Wse[e.force]();for(n in e)yn(t[n])&&_It(t[n],e[n],e);return t}function _It(e,t,n){e(yn(t)?r=>t(r,n):t)}const EIt=Object.freeze(Object.defineProperty({__proto__:null,force:lG},Symbol.toStringTag,{value:"Module"}));function _9(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function cG(e){Oe.call(this,null,e)}cG.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const wIt=e=>e.values;dt(cG,Oe,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&mO(o.data)&&i.rem.push(o.data)}),this.value=s=EU({values:gt(e.keys).reduce((o,a)=>(o.key(a),o),xIt()).entries(i.source)},wIt),n&&s.each(o=>{o.children&&(o=sr(o.data),i.add.push(o),i.source.push(o))}),_9(s,Bt,Bt)),i.source.root=s,i}});function xIt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Vh(e){Oe.call(this,null,e)}const SIt=(e,t)=>e.parent===t.parent?1:2;dt(Vh,Oe,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(jy(e.sort,o=>o.data)),TIt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?SIt:B_);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>CIt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function TIt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function CIt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const E9=["x","y","r","depth","children"];function fG(e){Vh.call(this,e)}fG.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:E9.length,default:E9}]};dt(fG,Vh,{layout:Mtt,params:["radius","size","padding"],fields:E9});const w9=["x0","y0","x1","y1","depth","children"];function dG(e){Vh.call(this,e)}dG.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:w9.length,default:w9}]};dt(dG,Vh,{layout:$tt,params:["size","round","padding"],fields:w9});function hG(e){Oe.call(this,null,e)}hG.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};dt(hG,Oe,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?_9(yte().id(e.key).parentId(e.parentKey)(i.source),e.key,xl):_9(yte()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Gse={tidy:Wtt,cluster:itt},x9=["x","y","depth","children"];function pG(e){Vh.call(this,e)}pG.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:x9.length,default:x9}]};dt(pG,Vh,{layout(e){const t=e||"tidy";if(Ut(Gse,t))return Gse[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:x9});function mG(e){Oe.call(this,[],e)}mG.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};dt(mG,Oe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Bt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Bt(a)]&&s[Bt(u)]&&i.add.push(sr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Bt(o)]=1),n.forEach(o=>{(s[Bt(o.source)]||s[Bt(o.target)])&&i.mod.push(o)})),i}});const Yse={binary:Ytt,dice:QT,slice:t3,slicedice:Ktt,squarify:Eye,resquarify:Xtt},S9=["x0","y0","x1","y1","depth","children"];function gG(e){Vh.call(this,e)}gG.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:S9.length,default:S9}]};dt(gG,Vh,{layout(){const e=Gtt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ut(Yse,t)?e.tile(Yse[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:S9});const AIt=Object.freeze(Object.defineProperty({__proto__:null,nest:cG,pack:fG,partition:dG,stratify:hG,tree:pG,treelinks:mG,treemap:gG},Symbol.toStringTag,{value:"Module"})),k6=4278190080;function DIt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function IIt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=om(s,o).getContext("2d"),l=om(s,o).getContext("2d"),c=a&&om(s,o).getContext("2d");n.forEach(C=>tI(u,C,!1)),tI(l,t,!1),a&&tI(c,t,!0);const f=R6(u,s,o),d=R6(l,s,o),h=a&&R6(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,E,_,x,S;for(y=0;y<o;++y)for(g=0;g<s;++g)E=y*s+g,_=f[E]&k6,S=d[E]&k6,x=a&&h[E]&k6,(_||x||S)&&(v=e(g),b=e(y),!i&&(_||S)&&p.set(v,b),a&&(_||x)&&m.set(v,b));return[p,m]}function R6(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function tI(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>tI(e,s.items,n))}):Bu[r].draw(e,{items:n?t.map(NIt):t})}function NIt(e){const t=gO(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ed=5,Ko=31,nT=32,mp=new Uint32Array(nT+1),tc=new Uint32Array(nT+1);tc[0]=0;mp[0]=~tc[0];for(let e=1;e<=nT;++e)tc[e]=tc[e-1]<<1|1,mp[e]=~tc[e];function kIt(e,t){const n=new Uint32Array(~~((e*t+nT)/nT));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Ed]&1<<(a&Ko)},set:(s,o)=>{const a=o*e+s;r(a>>>Ed,1<<(a&Ko))},clear:(s,o)=>{const a=o*e+s;i(a>>>Ed,~(1<<(a&Ko)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Ed,h=f>>>Ed,d===h){if(n[d]&mp[c&Ko]&tc[(f&Ko)+1])return!0}else{if(n[d]&mp[c&Ko]||n[h]&tc[(f&Ko)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ed,d=c>>>Ed,f===d)r(f,mp[l&Ko]&tc[(c&Ko)+1]);else for(r(f,mp[l&Ko]),r(d,tc[(c&Ko)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ed,d=c>>>Ed,f===d)i(f,tc[l&Ko]|mp[(c&Ko)+1]);else for(i(f,tc[l&Ko]),i(d,mp[(c&Ko)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function RIt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>kIt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function PIt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Au.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function Gk(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Bp(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function OIt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!Gk(p,m,d,h,i,s)&&!Bp(e,p,m,h,d,g,o,a)&&!Bp(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Bp(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Au.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,E,_,x,S,C,A,D,I,O,R,M,F,P,j,z;for(let V=0;V<f;++V){for(v=c[V].x,E=c[V].y,b=c[V].x2===void 0?v:c[V].x2,_=c[V].y2===void 0?E:c[V].y2,v>b&&(z=v,v=b,b=z),E>_&&(z=E,E=_,_=z),D=e(v),O=e(b),I=~~((D+O)/2),R=e(E),F=e(_),M=~~((R+F)/2),C=I;C>=D;--C)for(A=M;A>=R;--A)j=u(C,A,p,h,d),j&&([l.x,l.y,p,m]=j);for(C=I;C<=O;++C)for(A=M;A<=F;++A)j=u(C,A,p,h,d),j&&([l.x,l.y,p,m]=j);!m&&!n&&(P=Math.abs(b-v+_-E),x=(v+b)/2,S=(E+_)/2,P>=y&&!Gk(x,S,h,d,i,s)&&!Bp(e,x,S,d,h,d,o,null)&&(y=P,l.x=x,l.y=S,g=!0))}return m||g?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const MIt=[-1,-1,1,1],$It=[-1,1,-1,1];function FIt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Au.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,E,_,x,S,C,A,D,I,O,R,M;for(let F=0;F<f;++F){for(b=c[F].x,_=c[F].y,E=c[F].x2===void 0?b:c[F].x2,x=c[F].y2===void 0?_:c[F].y2,p.push([e((b+E)/2),e((_+x)/2)]);p.length;)if([A,D]=p.pop(),!(o.get(A,D)||a.get(A,D)||u.get(A,D))){u.set(A,D);for(let P=0;P<4;++P)S=A+MIt[P],C=D+$It[P],u.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(A),C=e.invert(D),I=m,O=s,!Gk(S,C,h,d,i,s)&&!Bp(e,S,C,d,h,I,o,a)&&!Bp(e,S,C,d,h,d,o,null)){for(;O-I>=1;)R=(I+O)/2,Bp(e,S,C,d,h,R,o,a)?O=R:I=R;I>m&&(l.x=S,l.y=C,m=I,g=!0)}}!g&&!n&&(M=Math.abs(E-b+x-_),S=(b+E)/2,C=(_+x)/2,M>=v&&!Gk(S,C,h,d,i,s)&&!Bp(e,S,C,d,h,d,o,null)&&(v=M,l.x=S,l.y=C,y=!0))}return g||y?(S=h/2,C=d/2,o.setRange(e(l.x-S),e(l.y-C),e(l.x+S),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const LIt=["right","center","left"],BIt=["bottom","middle","top"];function jIt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,E,_,x,S,C,A,D,I;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,E=S-f/2,_=S+f/2,C=e(v),D=e(E),I=e(_),!d)if(Kse(C,C,D,I,o,a,v,v,E,_,c,m))d=Au.width(l.datum,l.datum.text);else continue;if(x=v+y*d*h/2,v=x-d/2,b=x+d/2,C=e(v),A=e(b),Kse(C,A,D,I,o,a,v,b,E,_,c,m))return l.x=h?h*y<0?b:v:x,l.y=p?p*y<0?_:E:S,l.align=LIt[h*y+1],l.baseline=BIt[p*y+1],o.setRange(C,D,A,I),!0}return!1}}function Kse(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const P6=0,O6=4,M6=8,$6=0,F6=1,L6=2,zIt={"top-left":P6+$6,top:P6+F6,"top-right":P6+L6,left:O6+$6,middle:O6+F6,right:O6+L6,"bottom-left":M6+$6,bottom:M6+F6,"bottom-right":M6+L6},UIt={naive:PIt,"reduced-search":OIt,floodfill:FIt};function VIt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=HIt(r,f),h=qIt(i,f),p=WIt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=GIt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let E=-1,_=-1;const x=e.map(D=>{const I=v?Au.width(D,D.text):void 0;return E=Math.max(E,I),_=Math.max(_,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(D),textWidth:I}});l=l===null||l===1/0?Math.max(E,_)+Math.max(...r):l;const S=RIt(t[0],t[1],l);let C;if(!b){n&&x.sort((O,R)=>n(O.datum,R.datum));let D=!1;for(let O=0;O<h.length&&!D;++O)D=h[O]===5||d[O]<0;const I=(p&&o||g)&&e.map(O=>O.datum);C=s.length||I?IIt(S,I||[],s,D,g):DIt(S,o&&x)}const A=g?UIt[c](S,C,o,u):jIt(S,C,h,d);return x.forEach(D=>D.opacity=+A(D)),x}function HIt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function qIt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=zIt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function WIt(e){return e&&e.mark&&e.mark.marktype}function GIt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const T9=["x","y","opacity","align","baseline"],x2e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function yG(e){Oe.call(this,null,e)}yG.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:x2e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:T9.length,default:T9}]};dt(yG,Oe,{transform(e,t){function n(s){const o=e[s];return yn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||T9;return VIt(t.materialize(t.SOURCE).source||[],e.size,e.sort,gt(e.offset==null?1:e.offset),gt(e.anchor||x2e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const YIt=Object.freeze(Object.defineProperty({__proto__:null,label:yG},Symbol.toStringTag,{value:"Module"}));function S2e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function vG(e){Oe.call(this,null,e)}vG.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};dt(vG,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=S2e(r,e.groupby),s=(e.groupby||[]).map(Ci),o=s.length,a=e.as||[Ci(e.x),Ci(e.y)],u=[];i.forEach(l=>{$xe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(sr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const C9={constant:Nq,linear:kq,log:Rxe,exp:Pxe,pow:Oxe,quad:Rq,poly:Mxe},KIt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function bG(e){Oe.call(this,null,e)}bG.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(C9)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};dt(bG,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=S2e(r,e.groupby),s=(e.groupby||[]).map(Ci),o=e.method||"linear",a=e.order==null?3:e.order,u=KIt(o,a),l=e.as||[Ci(e.x),Ci(e.y)],c=C9[o],f=[];let d=e.extent;Ut(C9,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(sr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||$f(h,e.x),y=v=>{const b={};for(let E=0;E<s.length;++E)b[s[E]]=h.dims[E];b[l[0]]=v[0],b[l[1]]=v[1],f.push(sr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):xO(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const XIt=Object.freeze(Object.defineProperty({__proto__:null,loess:vG,regression:bG},Symbol.toStringTag,{value:"Module"}));function _G(e){Oe.call(this,null,e)}_G.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const QIt=[-1e5,-1e5,1e5,1e5];dt(_G,Oe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:QIt;const s=this.value=fU.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!ZIt(u)?JIt(u):null}return t.reflow(e.modified()).modifies(n)}});function JIt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function ZIt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const eNt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:_G},Symbol.toStringTag,{value:"Module"}));var B6=Math.PI/180,Vw=64,nI=2048;function tNt(){var e=[256,256],t,n,r,i,s,o,a,u=T2e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(om()),m=aNt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],E=l.map(x=>({text:t(x),font:n(x),style:i(x),weight:s(x),rotate:o(x),size:~~(r(x)+1e-14),padding:a(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,S)=>S.size-x.size);++v<y;){var _=E[v];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,nNt(p,_,E,v),_.hasText&&h(m,_,g)&&(b.push(_),g?iNt(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(Vw<<5)/m,p.height=nI/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),E=u(e),_=c()<.5?1:-1,x=-_,S,C,A;(S=E(x+=_))&&(C=~~S[0],A=~~S[1],!(Math.min(Math.abs(C),Math.abs(A))>=b));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!rNt(m,p,e[0]))&&(!g||sNt(m,g))){for(var D=m.sprite,I=m.width>>5,O=e[0]>>5,R=m.x-(I<<4),M=R&127,F=32-M,P=m.y1-m.y0,j=(m.y+m.y0)*O+(R>>5),z,V=0;V<P;V++){z=0;for(var $=0;$<=I;$++)p[j+$]|=z<<F|($<I?(z=D[V*I+$])>>>M:0);j+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=wg(p),f):n},f.fontStyle=function(p){return arguments.length?(i=wg(p),f):i},f.fontWeight=function(p){return arguments.length?(s=wg(p),f):s},f.rotate=function(p){return arguments.length?(o=wg(p),f):o},f.text=function(p){return arguments.length?(t=wg(p),f):t},f.spiral=function(p){return arguments.length?(u=uNt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=wg(p),f):r},f.padding=function(p){return arguments.length?(a=wg(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function nNt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(Vw<<5)/s,nI/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*B6),g=Math.cos(t.rotate*B6),y=c*g,v=c*m,b=d*g,E=d*m;c=Math.max(Math.abs(y+E),Math.abs(y-E))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=Vw<<5&&(o=0,a+=u,u=0),a+d>=nI)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*B6),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var _=i.getImageData(0,0,(Vw<<5)/s,nI/s).data,x=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)x[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),D=_[(a+p)*(Vw<<5)+(o+h)<<2]?1<<31-h%32:0;x[A]|=D,S|=D}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=x.slice(0,(t.y1-t.y0)*f)}}}function rNt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function iNt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function sNt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function T2e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function oNt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function aNt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function wg(e){return typeof e=="function"?e:function(){return e}}var uNt={archimedean:T2e,rectangular:oNt};const C2e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],lNt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function EG(e){Oe.call(this,tNt(),e)}EG.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:C2e}]};dt(EG,Oe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return yn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||lNt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||C2e;let a=e.fontSize||14,u;if(yn(a)?u=e.fontSizeRange:a=zo(a),u){const p=a,m=Jn("sqrt")().domain($f(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Tl).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const cNt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:EG},Symbol.toStringTag,{value:"Module"})),fNt=e=>new Uint8Array(e),dNt=e=>new Uint16Array(e),Fx=e=>new Uint32Array(e);function hNt(){let e=8,t=[],n=Fx(0),r=FA(0,e),i=FA(0,e);return{data:()=>t,seen:()=>n=pNt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=FA(s,e,r),i=FA(s,e))}}}function pNt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function FA(e,t,n){const r=(t<257?fNt:t<65537?dNt:Fx)(e);return n&&r.set(n),r}function Xse(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Qse(){let e=Fx(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Fx(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=mNt(h,d),c)p=t,m=e,t=Array(c+f),e=Fx(c+f),gNt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[rGe(u,a[0],0,l),gm(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function mNt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),oGe(e,t)}function gNt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function wG(e){Oe.call(this,hNt(),e),this._indices=null,this._dims=null}wG.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};dt(wG,Oe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Qse()),s.push(Xse(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,E,_,x,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},v=t.mod,_=0,x=v.length;_<x;++_)E[v[_]._index]=1;for(_=0;_<h;++_)S=r[_],(!o[_]||e.modified("fields",_)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=Qse(),p[y]=m=g.insert(S,t.source,0)),o[_]=Xse(g,_,i[_]).onAdd(m,u));for(_=0,x=a.data().length;_<x;++_)b[_]||(l[_]!==u[_]?f.push(_):E[_]&&u[_]!==c&&d.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function xG(e){Oe.call(this,null,e)}xG.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};dt(xG,Oe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const yNt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:wG,resolvefilter:xG},Symbol.toStringTag,{value:"Module"})),vNt="RawCode",J0="Literal",bNt="Property",_Nt="Identifier",ENt="ArrayExpression",wNt="BinaryExpression",A2e="CallExpression",xNt="ConditionalExpression",SNt="LogicalExpression",TNt="MemberExpression",CNt="ObjectExpression",ANt="UnaryExpression";function Mc(e){this.type=e}Mc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=DNt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function DNt(e){switch(e.type){case ENt:return e.elements;case wNt:case SNt:return[e.left,e.right];case A2e:return[e.callee].concat(e.arguments);case xNt:return[e.test,e.consequent,e.alternate];case TNt:return[e.object,e.property];case CNt:return e.properties;case bNt:return[e.key,e.value];case ANt:return[e.argument];case _Nt:case J0:case vNt:default:return[]}}var rd,Rt,Fe,Mo,hr,zO=1,$2=2,Z0=3,sg=4,UO=5,Vy=6,Ia=7,F2=8,INt=9;rd={};rd[zO]="Boolean";rd[$2]="<end>";rd[Z0]="Identifier";rd[sg]="Keyword";rd[UO]="Null";rd[Vy]="Numeric";rd[Ia]="Punctuator";rd[F2]="String";rd[INt]="RegularExpression";var NNt="ArrayExpression",kNt="BinaryExpression",RNt="CallExpression",PNt="ConditionalExpression",D2e="Identifier",ONt="Literal",MNt="LogicalExpression",$Nt="MemberExpression",FNt="ObjectExpression",LNt="Property",BNt="UnaryExpression",Cs="Unexpected token %0",jNt="Unexpected number",zNt="Unexpected string",UNt="Unexpected identifier",VNt="Unexpected reserved word",HNt="Unexpected end of input",A9="Invalid regular expression",j6="Invalid regular expression: missing /",I2e="Octal literals are not allowed in strict mode.",qNt="Duplicate data property in object literal not allowed in strict mode",Js="ILLEGAL",rT="Disabled.",WNt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),GNt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function VO(e,t){if(!e)throw new Error("ASSERT: "+t)}function Id(e){return e>=48&&e<=57}function SG(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Lx(e){return"01234567".indexOf(e)>=0}function YNt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function iT(e){return e===10||e===13||e===8232||e===8233}function L2(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&WNt.test(String.fromCharCode(e))}function Yk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&GNt.test(String.fromCharCode(e))}const KNt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function N2e(){for(;Fe<Mo;){const e=Rt.charCodeAt(Fe);if(YNt(e)||iT(e))++Fe;else break}}function D9(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Fe<Mo&&SG(Rt[Fe])?(r=Rt[Fe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Xn({},Cs,Js);return String.fromCharCode(i)}function XNt(){var e,t,n,r;for(e=Rt[Fe],t=0,e==="}"&&Xn({},Cs,Js);Fe<Mo&&(e=Rt[Fe++],!!SG(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Xn({},Cs,Js),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function k2e(){var e,t;for(e=Rt.charCodeAt(Fe++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt(Fe)!==117&&Xn({},Cs,Js),++Fe,e=D9("u"),(!e||e==="\\"||!L2(e.charCodeAt(0)))&&Xn({},Cs,Js),t=e);Fe<Mo&&(e=Rt.charCodeAt(Fe),!!Yk(e));)++Fe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt(Fe)!==117&&Xn({},Cs,Js),++Fe,e=D9("u"),(!e||e==="\\"||!Yk(e.charCodeAt(0)))&&Xn({},Cs,Js),t+=e);return t}function QNt(){var e,t;for(e=Fe++;Fe<Mo;){if(t=Rt.charCodeAt(Fe),t===92)return Fe=e,k2e();if(Yk(t))++Fe;else break}return Rt.slice(e,Fe)}function JNt(){var e,t,n;return e=Fe,t=Rt.charCodeAt(Fe)===92?k2e():QNt(),t.length===1?n=Z0:KNt.hasOwnProperty(t)?n=sg:t==="null"?n=UO:t==="true"||t==="false"?n=zO:n=Z0,{type:n,value:t,start:e,end:Fe}}function z6(){var e=Fe,t=Rt.charCodeAt(Fe),n,r=Rt[Fe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Fe,{type:Ia,value:String.fromCharCode(t),start:e,end:Fe};default:if(n=Rt.charCodeAt(Fe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Fe+=2,{type:Ia,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Fe};case 33:case 61:return Fe+=2,Rt.charCodeAt(Fe)===61&&++Fe,{type:Ia,value:Rt.slice(e,Fe),start:e,end:Fe}}}if(o=Rt.substr(Fe,4),o===">>>=")return Fe+=4,{type:Ia,value:o,start:e,end:Fe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Fe+=3,{type:Ia,value:s,start:e,end:Fe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Fe+=2,{type:Ia,value:i,start:e,end:Fe};if(i==="//"&&Xn({},Cs,Js),"<>=!+-*%&|^/".indexOf(r)>=0)return++Fe,{type:Ia,value:r,start:e,end:Fe};Xn({},Cs,Js)}function ZNt(e){let t="";for(;Fe<Mo&&SG(Rt[Fe]);)t+=Rt[Fe++];return t.length===0&&Xn({},Cs,Js),L2(Rt.charCodeAt(Fe))&&Xn({},Cs,Js),{type:Vy,value:parseInt("0x"+t,16),start:e,end:Fe}}function ekt(e){let t="0"+Rt[Fe++];for(;Fe<Mo&&Lx(Rt[Fe]);)t+=Rt[Fe++];return(L2(Rt.charCodeAt(Fe))||Id(Rt.charCodeAt(Fe)))&&Xn({},Cs,Js),{type:Vy,value:parseInt(t,8),octal:!0,start:e,end:Fe}}function Jse(){var e,t,n;if(n=Rt[Fe],VO(Id(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Fe,e="",n!=="."){if(e=Rt[Fe++],n=Rt[Fe],e==="0"){if(n==="x"||n==="X")return++Fe,ZNt(t);if(Lx(n))return ekt(t);n&&Id(n.charCodeAt(0))&&Xn({},Cs,Js)}for(;Id(Rt.charCodeAt(Fe));)e+=Rt[Fe++];n=Rt[Fe]}if(n==="."){for(e+=Rt[Fe++];Id(Rt.charCodeAt(Fe));)e+=Rt[Fe++];n=Rt[Fe]}if(n==="e"||n==="E")if(e+=Rt[Fe++],n=Rt[Fe],(n==="+"||n==="-")&&(e+=Rt[Fe++]),Id(Rt.charCodeAt(Fe)))for(;Id(Rt.charCodeAt(Fe));)e+=Rt[Fe++];else Xn({},Cs,Js);return L2(Rt.charCodeAt(Fe))&&Xn({},Cs,Js),{type:Vy,value:parseFloat(e),start:t,end:Fe}}function tkt(){var e="",t,n,r,i,s=!1;for(t=Rt[Fe],VO(t==="'"||t==='"',"String literal must starts with a quote"),n=Fe,++Fe;Fe<Mo;)if(r=Rt[Fe++],r===t){t="";break}else if(r==="\\")if(r=Rt[Fe++],!r||!iT(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[Fe]==="{"?(++Fe,e+=XNt()):e+=D9(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Lx(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Fe<Mo&&Lx(Rt[Fe])&&(s=!0,i=i*8+"01234567".indexOf(Rt[Fe++]),"0123".indexOf(r)>=0&&Fe<Mo&&Lx(Rt[Fe])&&(i=i*8+"01234567".indexOf(Rt[Fe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[Fe]===`
`&&++Fe;else{if(iT(r.charCodeAt(0)))break;e+=r}return t!==""&&Xn({},Cs,Js),{type:F2,value:e,octal:s,start:n,end:Fe}}function nkt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Xn({},A9)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Xn({},A9)}try{return new RegExp(e,t)}catch{return null}}function rkt(){var e,t,n,r,i;for(e=Rt[Fe],VO(e==="/","Regular expression literal must start with a slash"),t=Rt[Fe++],n=!1,r=!1;Fe<Mo;)if(e=Rt[Fe++],t+=e,e==="\\")e=Rt[Fe++],iT(e.charCodeAt(0))&&Xn({},j6),t+=e;else if(iT(e.charCodeAt(0)))Xn({},j6);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Xn({},j6),i=t.substr(1,t.length-2),{value:i,literal:t}}function ikt(){var e,t,n;for(t="",n="";Fe<Mo&&(e=Rt[Fe],!!Yk(e.charCodeAt(0)));)++Fe,e==="\\"&&Fe<Mo?Xn({},Cs,Js):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Xn({},A9,n),{value:n,literal:t}}function skt(){var e,t,n,r;return hr=null,N2e(),e=Fe,t=rkt(),n=ikt(),r=nkt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Fe}}function okt(e){return e.type===Z0||e.type===sg||e.type===zO||e.type===UO}function R2e(){if(N2e(),Fe>=Mo)return{type:$2,start:Fe,end:Fe};const e=Rt.charCodeAt(Fe);return L2(e)?JNt():e===40||e===41||e===59?z6():e===39||e===34?tkt():e===46?Id(Rt.charCodeAt(Fe+1))?Jse():z6():Id(e)?Jse():z6()}function $a(){const e=hr;return Fe=e.end,hr=R2e(),Fe=e.end,e}function P2e(){const e=Fe;hr=R2e(),Fe=e}function akt(e){const t=new Mc(NNt);return t.elements=e,t}function Zse(e,t,n){const r=new Mc(e==="||"||e==="&&"?MNt:kNt);return r.operator=e,r.left=t,r.right=n,r}function ukt(e,t){const n=new Mc(RNt);return n.callee=e,n.arguments=t,n}function lkt(e,t,n){const r=new Mc(PNt);return r.test=e,r.consequent=t,r.alternate=n,r}function TG(e){const t=new Mc(D2e);return t.name=e,t}function Hw(e){const t=new Mc(ONt);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function eoe(e,t,n){const r=new Mc($Nt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function ckt(e){const t=new Mc(FNt);return t.properties=e,t}function toe(e,t,n){const r=new Mc(LNt);return r.key=t,r.value=n,r.kind=e,r}function fkt(e,t){const n=new Mc(BNt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Xn(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(VO(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Fe,n.description=i,n}function HO(e){e.type===$2&&Xn(e,HNt),e.type===Vy&&Xn(e,jNt),e.type===F2&&Xn(e,zNt),e.type===Z0&&Xn(e,UNt),e.type===sg&&Xn(e,VNt),Xn(e,Cs,e.value)}function $o(e){const t=$a();(t.type!==Ia||t.value!==e)&&HO(t)}function Ur(e){return hr.type===Ia&&hr.value===e}function U6(e){return hr.type===sg&&hr.value===e}function dkt(){const e=[];for(Fe=hr.start,$o("[");!Ur("]");)Ur(",")?($a(),e.push(null)):(e.push(ey()),Ur("]")||$o(","));return $a(),akt(e)}function noe(){Fe=hr.start;const e=$a();return e.type===F2||e.type===Vy?(e.octal&&Xn(e,I2e),Hw(e)):TG(e.value)}function hkt(){var e,t,n,r;if(Fe=hr.start,e=hr,e.type===Z0)return n=noe(),$o(":"),r=ey(),toe("init",n,r);if(e.type===$2||e.type===Ia)HO(e);else return t=noe(),$o(":"),r=ey(),toe("init",t,r)}function pkt(){var e=[],t,n,r,i={},s=String;for(Fe=hr.start,$o("{");!Ur("}");)t=hkt(),t.key.type===D2e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Xn({},qNt):i[r]=!0,e.push(t),Ur("}")||$o(",");return $o("}"),ckt(e)}function mkt(){$o("(");const e=CG();return $o(")"),e}const gkt={if:1};function ykt(){var e,t,n;if(Ur("("))return mkt();if(Ur("["))return dkt();if(Ur("{"))return pkt();if(e=hr.type,Fe=hr.start,e===Z0||gkt[hr.value])n=TG($a().value);else if(e===F2||e===Vy)hr.octal&&Xn(hr,I2e),n=Hw($a());else{if(e===sg)throw new Error(rT);e===zO?(t=$a(),t.value=t.value==="true",n=Hw(t)):e===UO?(t=$a(),t.value=null,n=Hw(t)):Ur("/")||Ur("/=")?(n=Hw(skt()),P2e()):HO($a())}return n}function vkt(){const e=[];if($o("("),!Ur(")"))for(;Fe<Mo&&(e.push(ey()),!Ur(")"));)$o(",");return $o(")"),e}function bkt(){Fe=hr.start;const e=$a();return okt(e)||HO(e),TG(e.value)}function _kt(){return $o("."),bkt()}function Ekt(){$o("[");const e=CG();return $o("]"),e}function wkt(){var e,t,n;for(e=ykt();;)if(Ur("."))n=_kt(),e=eoe(".",e,n);else if(Ur("("))t=vkt(),e=ukt(e,t);else if(Ur("["))n=Ekt(),e=eoe("[",e,n);else break;return e}function roe(){const e=wkt();if(hr.type===Ia&&(Ur("++")||Ur("--")))throw new Error(rT);return e}function rI(){var e,t;if(hr.type!==Ia&&hr.type!==sg)t=roe();else{if(Ur("++")||Ur("--"))throw new Error(rT);if(Ur("+")||Ur("-")||Ur("~")||Ur("!"))e=$a(),t=rI(),t=fkt(e.value,t);else{if(U6("delete")||U6("void")||U6("typeof"))throw new Error(rT);t=roe()}}return t}function ioe(e){let t=0;if(e.type!==Ia&&e.type!==sg)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function xkt(){var e,t,n,r,i,s,o,a,u,l;if(e=hr,u=rI(),r=hr,i=ioe(r),i===0)return u;for(r.prec=i,$a(),t=[e,hr],o=rI(),s=[u,r,o];(i=ioe(hr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Zse(a,u,o),s.push(n);r=$a(),r.prec=i,s.push(r),t.push(hr),n=rI(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Zse(s[l-1].value,s[l-2],n),l-=2;return n}function ey(){var e,t,n;return e=xkt(),Ur("?")&&($a(),t=ey(),$o(":"),n=ey(),e=lkt(e,t,n)),e}function CG(){const e=ey();if(Ur(","))throw new Error(rT);return e}function AG(e){Rt=e,Fe=0,Mo=Rt.length,hr=null,P2e();const t=CG();if(hr.type!==$2)throw new Error("Unexpect token after expression.");return t}var O2e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function M2e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Skt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function $2e(e){e=e||{};const t=e.allowed?Ac(e.allowed):{},n=e.forbidden?Ac(e.forbidden):{},r=e.constants||O2e,i=(e.functions||M2e)(f),s=e.globalvar,o=e.fieldvar,a=yn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(yt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ut(n,m)?Le("Illegal identifier: "+m):Ut(r,m)?r[m]:Ut(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[Skt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ut(i,m)&&i[m];return y||Le("Unrecognized function: "+m),yn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const soe=Symbol("vega_selection_getter");function F2e(e){return(!e.getter||!e.getter[soe])&&(e.getter=wl(e.field),e.getter[soe]=!0),e.getter}const DG="intersect",ooe="union",Tkt="vlMulti",Ckt="vlPoint",aoe="or",Akt="and",nf="_vgsid_",sT=wl(nf),Dkt="E",Ikt="R",Nkt="R-E",kkt="R-LE",Rkt="R-RE",Kk="index:unit";function uoe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=F2e(a)(e),im(o)&&(o=Io(o)),im(r[s])&&(r[s]=Io(r[s])),Ue(r[s])&&im(r[s][0])&&(r[s]=r[s].map(Io)),a.type===Dkt){if(Ue(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===Ikt){if(!lv(o,r[s]))return!1}else if(a.type===Rkt){if(!lv(o,r[s],!0,!1))return!1}else if(a.type===Nkt){if(!lv(o,r[s],!1,!1))return!1}else if(a.type===kkt&&!lv(o,r[s],!1,!0))return!1;return!0}function Pkt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[Kk]&&r[Kk].value:void 0,o=n===DG,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=uoe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=uoe(t,l),o^h)return h;return a&&o}const L2e=x_(sT),Okt=L2e.left,Mkt=L2e.right;function $kt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[Kk]&&r[Kk].value:void 0,o=n===DG,a=sT(t),u=Okt(i,a);if(u===i.length||sT(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Mkt(i,a)-u<s.size)return!1}return!0}function Fkt(e,t){return e.map(n=>gn(t.fields?{values:t.fields.map(r=>F2e(r)(n.datum))}:{[nf]:sT(n.datum)},t))}function Lkt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,E=0,_,x;E<b;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(_=0,x=c.length;_<x;++_)h=c[_],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=V6[`${y}_union`],m[d]=v(g,gt(f[_]));n&&(g=a[d]||(a[d]=[]),g.push(gt(f).reduce((S,C,A)=>(S[c[A].field]=C,S),{})))}else h=nf,p=sT(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[nf]:p}));if(t=t||ooe,o[nf]?o[nf]=V6[`${nf}_${t}`](...Object.values(o[nf])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(C=>o[S][C]).reduce((C,A)=>C===void 0?A:V6[`${u[S]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const S=r?Ckt:Tkt;o[S]=t===ooe?{[aoe]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[Akt]:s.map(C=>({[aoe]:a[C]}))}}return o}var V6={[`${nf}_union`]:mGe,[`${nf}_intersect`]:hGe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Io(t[0]),r=Io(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Io(t[0]),r=Io(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Bkt=":",jkt="@";function IG(e,t,n,r){t[0].type!==J0&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&zn(t).value,o="unit",a=jkt+o,u=Bkt+i;s===DG&&!Ut(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ut(r,u)||(r[u]=n.getData(i).tuplesRef())}function B2e(e){const t=this.context.data[e];return t?t.values.value:[]}function zkt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Ukt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(xl).insert(t)),1}function Vkt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const B2=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Hkt=B2("format"),j2e=B2("timeFormat"),qkt=B2("utcFormat"),Wkt=B2("timeParse"),Gkt=B2("utcParse"),LA=new Date(2e3,0,1);function qO(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(LA.setYear(2e3),LA.setMonth(e),LA.setDate(t),j2e.call(this,LA,n))}function Ykt(e){return qO.call(this,e,1,"%B")}function Kkt(e){return qO.call(this,e,1,"%b")}function Xkt(e){return qO.call(this,0,2+e,"%A")}function Qkt(e){return qO.call(this,0,2+e,"%a")}const Jkt=":",Zkt="@",I9="%",z2e="$";function NG(e,t,n,r){t[0].type!==J0&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=Jkt+i;if(!Ut(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function eRt(e,t,n,r){t[0].type!==J0&&Le("First argument to indata must be a string literal."),t[1].type!==J0&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Zkt+s;Ut(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function la(e,t,n,r){if(t[0].type===J0)loe(n,r,t[0].value);else for(e in n.scales)loe(n,r,e)}function loe(e,t,n){const r=I9+n;if(!Ut(t,r))try{t[r]=e.scaleRef(n)}catch{}}function id(e,t){if(yn(e))return e;if(yt(e)){const n=t.scales[e];return n&&CTt(n.value)?n.value:void 0}}function tRt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=la,n._range=la,n._scale=la;const r=i=>"_["+(i.type===J0?lt(I9+i.value):lt(I9)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function kG(e,t){return function(n,r,i){if(n){const s=id(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const nRt=kG("area",HZe),rRt=kG("bounds",YZe),iRt=kG("centroid",eet);function sRt(e,t){const n=id(e,(t||this).context);return n&&n.scale()}function oRt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function RG(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function aRt(){return RG(this.context.dataflow,"warn",arguments)}function uRt(){return RG(this.context.dataflow,"info",arguments)}function lRt(){return RG(this.context.dataflow,"debug",arguments)}function H6(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function N9(e){const t=vm(e),n=H6(t.r),r=H6(t.g),i=H6(t.b);return .2126*n+.7152*r+.0722*i}function cRt(e,t){const n=N9(e),r=N9(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function fRt(){const e=[].slice.call(arguments);return e.unshift({}),gn(...e)}function U2e(e,t){return e===t||e!==e&&t!==t?!0:Ue(e)?Ue(t)&&e.length===t.length?dRt(e,t):!1:vt(e)&&vt(t)?V2e(e,t):!1}function dRt(e,t){for(let n=0,r=e.length;n<r;++n)if(!U2e(e[n],t[n]))return!1;return!0}function V2e(e,t){for(const n in e)if(!U2e(e[n],t[n]))return!1;return!0}function coe(e){return t=>V2e(e,t)}function hRt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?xl:Ue(n)||mO(n)?n:coe(n),c.remove(f)),t&&c.insert(t),r&&(f=coe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function pRt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function mRt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const foe={};function gRt(e,t){const n=foe[t]||(foe[t]=wl(t));return Ue(e)?e.map(n):n(e)}function PG(e){return Ue(e)||ArrayBuffer.isView(e)?e:null}function OG(e){return PG(e)||(yt(e)?e:null)}function yRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return PG(e).join(...n)}function vRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return OG(e).indexOf(...n)}function bRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return OG(e).lastIndexOf(...n)}function _Rt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return OG(e).slice(...n)}function ERt(e,t,n){return yn(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function wRt(e){return PG(e).slice().reverse()}function xRt(e,t,n){return iW(e||0,t||0,n||0)}function SRt(e,t){const n=id(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function TRt(e,t){const n=id(e,(t||this).context);return n?n.copy():void 0}function CRt(e,t){const n=id(e,(t||this).context);return n?n.domain():[]}function ARt(e,t,n){const r=id(e,(n||this).context);return r?Ue(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function DRt(e,t){const n=id(e,(t||this).context);return n&&n.range?n.range():[]}function IRt(e,t,n){const r=id(e,(n||this).context);return r?r(t):void 0}function NRt(e,t,n,r,i){e=id(e,(i||this).context);const s=PSe(t,n);let o=e.domain(),a=o[0],u=zn(o),l=jo;return u-a?l=ESe(e,a,u):e=(e.interpolator?Jn("sequential")().interpolator(e.interpolator()):Jn("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==zn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function kRt(e,t,n){const r=id(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function RRt(e){let t=null;return function(n){return n?ZS(n,t=t||$b(e)):e}}const H2e=e=>e.data;function q2e(e,t){const n=B2e.call(t,e);return n.root&&n.root.lookup||{}}function PRt(e,t,n){const r=q2e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(H2e):void 0}function ORt(e,t){const n=q2e(e,this)[t];return n?n.ancestors().map(H2e):void 0}const W2e=()=>typeof window<"u"&&window||null;function MRt(){const e=W2e();return e?e.screen:{}}function $Rt(){const e=W2e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function FRt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function G2e(e,t,n){if(!e)return[];const[r,i]=e,s=new Xi().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return NTe(o,s,LRt(t))}function LRt(e){let t=null;if(e){const n=gt(e.marktype),r=gt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function BRt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=gt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function jRt(e){return gt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function zRt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Xi().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),G2e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>URt(u.x,u.y,t))}function URt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const oT={random(){return Tl()},cumulativeNormal:_O,cumulativeLogNormal:Sq,cumulativeUniform:Dq,densityNormal:bq,densityLogNormal:xq,densityUniform:Aq,quantileNormal:EO,quantileLogNormal:Tq,quantileUniform:Iq,sampleNormal:bO,sampleLogNormal:wq,sampleUniform:Cq,isArray:Ue,isBoolean:ig,isDate:im,isDefined(e){return e!==void 0},isNumber:Wn,isObject:vt,isRegExp:kwe,isString:yt,isTuple:mO,isValid(e){return e!=null&&e===e},toBoolean:rq,toDate(e){return iq(e)},toNumber:Io,toString:sq,indexof:vRt,join:yRt,lastindexof:bRt,replace:ERt,reverse:wRt,slice:_Rt,flush:Iwe,lerp:Rwe,merge:fRt,pad:Mwe,peek:zn,pluck:gRt,span:b2,inrange:lv,truncate:$we,rgb:vm,lab:uN,hcl:lN,hsl:oN,luminance:N9,contrast:cRt,sequence:wu,format:Hkt,utcFormat:qkt,utcParse:Gkt,utcOffset:Xwe,utcSequence:Zwe,timeFormat:j2e,timeParse:Wkt,timeOffset:Kwe,timeSequence:Jwe,timeUnitSpecifier:Lwe,monthFormat:Ykt,monthAbbrevFormat:Kkt,dayFormat:Xkt,dayAbbrevFormat:Qkt,quarter:Twe,utcquarter:Cwe,week:jwe,utcweek:Vwe,dayofyear:Bwe,utcdayofyear:Uwe,warn:aRt,info:uRt,debug:lRt,extent(e){return $f(e)},inScope:oRt,intersect:G2e,clampRange:Awe,pinchDistance:pRt,pinchAngle:mRt,screen:MRt,containerSize:FRt,windowSize:$Rt,bandspace:xRt,setdata:Ukt,pathShape:RRt,panLinear:Ewe,panLog:wwe,panPow:xwe,panSymlog:Swe,zoomLinear:QH,zoomLog:JH,zoomPow:Dk,zoomSymlog:ZH,encode:Vkt,modify:hRt,lassoAppend:BRt,lassoPath:jRt,intersectLasso:zRt},VRt=["view","item","group","xy","x","y"],HRt="event.vega.",Y2e="this.",MG={},K2e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${lt(z2e+e)}]`,functions:qRt,constants:O2e,visitors:MG},k9=$2e(K2e);function qRt(e){const t=M2e(e);VRt.forEach(n=>t[n]=HRt+n);for(const n in oT)t[n]=Y2e+n;return gn(t,tRt(e,oT,MG)),t}function Bi(e,t,n){return arguments.length===1?oT[e]:(oT[e]=t,n&&(MG[e]=n),k9&&(k9.functions[e]=Y2e+e),this)}Bi("bandwidth",SRt,la);Bi("copy",TRt,la);Bi("domain",CRt,la);Bi("range",DRt,la);Bi("invert",ARt,la);Bi("scale",IRt,la);Bi("gradient",NRt,la);Bi("geoArea",nRt,la);Bi("geoBounds",rRt,la);Bi("geoCentroid",iRt,la);Bi("geoShape",kRt,la);Bi("geoScale",sRt,la);Bi("indata",zkt,eRt);Bi("data",B2e,NG);Bi("treePath",PRt,NG);Bi("treeAncestors",ORt,NG);Bi("vlSelectionTest",Pkt,IG);Bi("vlSelectionIdTest",$kt,IG);Bi("vlSelectionResolve",Lkt,IG);Bi("vlSelectionTuples",Fkt);function Lf(e,t){const n={};let r;try{e=yt(e)?e:lt(e)+"",r=AG(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==A2e)return;const o=s.callee.name,a=K2e.visitors[o];a&&a(o,s.arguments,t,n)});const i=k9(r);return i.globals.forEach(s=>{const o=z2e+s;!Ut(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function WRt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const GRt=Ac(["rule"]),doe=Ac(["group","image","rect"]);function YRt(e,t){let n="";return GRt[t]||(e.x2&&(e.x?(doe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(doe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function $G(e){return(e+"").toLowerCase()}function KRt(e){return $G(e)==="operator"}function XRt(e){return $G(e)==="collect"}function KE(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function QRt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var JRt={operator:(e,t)=>KE(e,["_"],t.code),parameter:(e,t)=>KE(e,["datum","_"],t.code),event:(e,t)=>KE(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return KE(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+lt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=YRt(r,n),i+="return m;",KE(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(lt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),QRt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function ZRt(e){const t=this;KRt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function ePt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function tPt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ue(i)?i.map(s=>hoe(s,n,t)):hoe(i,n,t)}return t}function hoe(e,t,n){if(!e||!vt(e))return e;for(let r=0,i=poe.length,s;r<i;++r)if(s=poe[r],Ut(e,s.key))return s.parse(e,t,n);return e}var poe=[{key:"$ref",parse:nPt},{key:"$key",parse:iPt},{key:"$expr",parse:rPt},{key:"$field",parse:sPt},{key:"$encode",parse:aPt},{key:"$compare",parse:oPt},{key:"$context",parse:uPt},{key:"$subflow",parse:lPt},{key:"$tupleid",parse:cPt}];function nPt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function rPt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ou(t.parameterExpression(e.$expr),e.$fields))}function iPt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=nq(e.$key,e.$flat,t.expr.codegen))}function sPt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=wl(e.$field,e.$name,t.expr.codegen))}function oPt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=gt(e.$compare).map(i=>i&&i.$tupleid?Bt:i);return t.fn[n]||(t.fn[n]=eq(r,e.$order,t.expr.codegen))}function aPt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ou(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function uPt(e,t){return t}function lPt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function cPt(){return Bt}function fPt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function dPt(e){var t=this,n=vt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const hPt={skip:!0};function pPt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function mPt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],hPt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(xl).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function X2e(e,t,n,r){return new Q2e(e,t,n,r)}function Q2e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||JRt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function moe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Q2e.prototype=moe.prototype={fork(){const e=new moe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),XRt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[$G(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:WRt,parseOperator:ZRt,parseOperatorParameters:ePt,parseParameters:tPt,parseStream:fPt,parseUpdate:dPt,getState:pPt,setState:mPt};function gPt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),J2e(t,e.description()))}function J2e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function yPt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const q6="default";function vPt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:q6,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?yt(i)?i:i.user:q6,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return yt(r)||(i=r.item,r=r.user),R9(e,r&&r!==q6?r:i||r),i},{cursor:t})}function R9(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Xk(e,t){var n=e._runtime.data;return Ut(n,t)||Le("Unrecognized data set: "+t),n[t]}function bPt(e,t){return arguments.length<2?Xk(this,e).values.value:WO.call(this,e,zy().remove(xl).insert(t))}function WO(e,t){bxe(t)||Le("Second argument to changes must be a changeset.");const n=Xk(this,e);return n.modified=!0,this.pulse(n.input,t)}function _Pt(e,t){return WO.call(this,e,zy().insert(t))}function EPt(e,t){return WO.call(this,e,zy().remove(t))}function Z2e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function eCe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function GO(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function wPt(e){var t=GO(e),n=Z2e(e),r=eCe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function xPt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=GO(e),o=t.changedTouches?t.changedTouches[0]:t,s=LO(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=SPt(e,n,s),t}function SPt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;yt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:zo(e),item:zo(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const goe="view",TPt="timer",CPt="window",APt={trap:!1};function DPt(e){const t=gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ue(r[s])&&(r[s]=Ac(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function tCe(e,t,n,r){e._eventListeners.push({type:n,sources:gt(t),handler:r})}function IPt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function BA(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||vt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function NPt(e,t,n){var r=this,i=new vO(n),s=function(l,c){r.runAsync(null,()=>{e===goe&&IPt(r,t)&&l.preventDefault(),i.receive(xPt(r,l,c))})},o;if(e===TPt)BA(r,"timer",t)&&r.timer(s,t);else if(e===goe)BA(r,"view",t)&&r.addEventListener(t,s,APt);else if(e===CPt?BA(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&BA(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);tCe(r,o,t,s)}return i}function yoe(e){return e.item}function voe(e){return e.item.mark.source}function boe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function kPt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",yoe),voe,boe(e)),this.on(this.events("view","pointerout",yoe),voe,boe(t)),this}function RPt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Du(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const PPt="vega-bind",OPt="vega-bind-name",MPt="vega-bind-radio";function $Pt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=tq(r.debounce,i.update))),(r.input==null&&r.element?FPt:BPt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function FPt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),tCe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(LPt(i))}}function LPt(e){return typeof Event<"u"?new Event(e):{type:e}}function BPt(e,t,n,r){const i=r.signal(n.signal),s=Du("div",{class:PPt}),o=n.input==="radio"?s:s.appendChild(Du("label"));o.appendChild(Du("span",{class:OPt},n.name||n.signal)),t.appendChild(s);let a=jPt;switch(n.input){case"checkbox":a=zPt;break;case"select":a=UPt;break;case"radio":a=VPt;break;case"range":a=HPt;break}a(e,o,n,i)}function jPt(e,t,n,r){const i=Du("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function zPt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Du("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function UPt(e,t,n,r){const i=Du("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};Qk(o,r)&&(u.selected=!0),i.appendChild(Du("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(Qk(n.options[a],o)){i.selectedIndex=a;return}}}function VPt(e,t,n,r){const i=Du("span",{class:MPt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};Qk(o,r)&&(u.checked=!0);const l=Du("input",u);l.addEventListener("change",()=>e.update(o));const c=Du("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)Qk(a[l].value,o)&&(a[l].checked=!0)}}function HPt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||ym(s,i,100),a=Du("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Du("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function Qk(e,t){return e===t||e+""==t+""}function nCe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,Z2e(e),eCe(e),GO(e),i,s).background(e.background())}function FG(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function qPt(e,t,n,r){const i=new r(e.loader(),FG(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,GO(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function WPt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=BO(r);e=n._el=e?W6(n,e,!0):null,gPt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||M2,a=e?s.renderer:s.headless;return n._renderer=a?nCe(n,n._renderer,e,a):null,n._handler=qPt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=W6(n,t,!0):e.appendChild(Du("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=W6(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{$Pt(n,u.element||t,u)})),n}function W6(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const XE=e=>+e||0,GPt=e=>({top:e,bottom:e,left:e,right:e});function _oe(e){return vt(e)?{top:XE(e.top),bottom:XE(e.bottom),left:XE(e.left),right:XE(e.right)}:GPt(XE(e))}async function LG(e,t,n,r){const i=BO(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),nCe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function YPt(e,t){e!==$p.Canvas&&e!==$p.SVG&&e!==$p.PNG&&Le("Unrecognized image type: "+e);const n=await LG(this,e,t);return e===$p.SVG?KPt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function KPt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function XPt(e,t){return(await LG(this,$p.Canvas,e,t)).canvas()}async function QPt(e){return(await LG(this,$p.SVG,e)).svg()}function JPt(e,t,n){return X2e(e,Rb,oT,n).parse(t)}function ZPt(e){var t=this._runtime.scales;return Ut(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var rCe="width",iCe="height",BG="padding",Eoe={skip:!0};function sCe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===BG?r.left+r.right:0)}function oCe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===BG?r.top+r.bottom:0)}function e3t(e){var t=e._signals,n=t[rCe],r=t[iCe],i=t[BG];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=sCe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=oCe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function t3t(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(rCe,n,Eoe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(iCe,r,Eoe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function n3t(e){return this._runtime.getState(e||{data:r3t,signals:i3t,recurse:!0})}function r3t(e,t){return t.modified&&Ue(t.input.value)&&!e.startsWith("_:vega:_")}function i3t(e,t){return!(e==="parent"||t instanceof Rb.proxy)}function s3t(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function o3t(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(CQe(n,t))}function a3t(e,t,n,r){const i=e.element();i&&i.setAttribute("title",u3t(r))}function u3t(e){return e==null?"":Ue(e)?aCe(e):vt(e)&&!im(e)?l3t(e):e+""}function l3t(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ue(n)?aCe(n):uCe(n))}).join(`
`)}function aCe(e){return"["+e.map(uCe).join(", ")+"]"}function uCe(e){return Ue(e)?"[]":vt(e)&&!im(e)?"{}":e}function c3t(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function lCe(e,t){const n=this;if(t=t||{},Fv.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=gn({},e.locale,t.locale);n.locale(lxe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||$p.Canvas,n._scenegraph=new rTe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||a3t,n._redraw=!0,n._handler=new M2().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=DPt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=JPt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=sCe(n,n._width),n._viewHeight=oCe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,e3t(n),yPt(n),vPt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function jA(e,t){return Ut(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+lt(t))}function cCe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function woe(e,t,n,r){let i=cCe(n,r);return i||(i=FG(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function xoe(e,t,n){const r=cCe(t,n);return r&&t._targets.remove(r),e}dt(lCe,Fv,{async evaluate(e,t,n){if(await Fv.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,wPt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&HD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&J2e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=jA(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",_oe(e)):_oe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(BO(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Fv.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(jA(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:t3t,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=FG(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return woe(this,e,jA(this,e),t)},removeSignalListener(e,t){return xoe(this,jA(this,e),t)},addDataListener(e,t){return woe(this,e,Xk(this,e).values,t)},removeDataListener(e,t){return xoe(this,Xk(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=R9(this,null);this._globalCursor=!!e,t&&R9(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:o3t,events:NPt,finalize:RPt,hover:kPt,data:bPt,change:WO,insert:_Pt,remove:EPt,scale:ZPt,initialize:WPt,toImageURL:YPt,toCanvas:XPt,toSVG:QPt,getState:n3t,setState:s3t,_watchPixelRatio:c3t});const f3t="view",Jk="[",Zk="]",fCe="{",dCe="}",d3t=":",hCe=",",h3t="@",p3t=">",m3t=/[[\]{}]/,g3t={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let pCe,mCe;function og(e,t,n){return pCe=t||f3t,mCe=n||g3t,gCe(e.trim()).map(P9)}function y3t(e){return mCe[e]}function Bx(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function gCe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Bx(e,i,hCe,Jk+fCe,Zk+dCe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function P9(e){return e[0]==="["?v3t(e):b3t(e)}function v3t(e){const t=e.length;let n=1,r;if(n=Bx(e,n,Zk,Jk,Zk),n===t)throw"Empty between selector: "+e;if(r=gCe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==p3t)throw"Expected '>' after between selector: "+e;r=r.map(P9);const i=P9(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function b3t(e){const t={source:pCe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===dCe){if(a=e.lastIndexOf(fCe),a>=0){try{r=_3t(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===h3t&&(i=++a),u=Bx(e,a,d3t),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Bx(e,a,Jk),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Bx(e,a,Zk),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==Jk)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||m3t.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):y3t(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function _3t(e){const t=e.split(hCe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function E3t(e){return vt(e)?e:{type:e||"pad"}}const QE=e=>+e||0,w3t=e=>({top:e,bottom:e,left:e,right:e});function x3t(e){return vt(e)?e.signal?e:{top:QE(e.top),bottom:QE(e.bottom),left:QE(e.left),right:QE(e.right)}:w3t(QE(e))}const As=e=>vt(e)&&!Ue(e)?gn({},e):{value:e};function Soe(e,t,n,r){return n!=null?(vt(n)&&!Ue(n)||Ue(n)&&n.length&&vt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function oo(e,t,n){for(const r in t)Soe(e,r,t[r]);for(const r in n)Soe(e,r,n[r],"update")}function Y_(e,t,n){for(const r in t)n&&Ut(n,r)||(e[r]=gn(e[r]||{},t[r]));return e}function z1(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const jG="mark",zG="frame",UG="scope",S3t="axis",T3t="axis-domain",C3t="axis-grid",A3t="axis-label",D3t="axis-tick",I3t="axis-title",N3t="legend",k3t="legend-band",R3t="legend-entry",P3t="legend-gradient",yCe="legend-label",O3t="legend-symbol",M3t="legend-title",$3t="title",F3t="title-text",L3t="title-subtitle";function B3t(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!z1(u,e)&&G6(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===zG?i.group:n===jG?gn({},i.mark,i[t]):null;for(u in c)l=z1(u,e)||(u==="fill"||u==="stroke")&&(z1("fill",e)||z1("stroke",e)),l||G6(s,u,c[u]);gt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)z1(h,e)||G6(s,h,d[h])}),e=gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=gn(o,e.enter),a&&(e.update=gn(a,e.update)),e}function G6(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const vCe=e=>yt(e)?lt(e):e.signal?`(${e.signal})`:bCe(e);function YO(e){if(e.gradient!=null)return z3t(e);let t=e.signal?`(${e.signal})`:e.color?j3t(e.color):e.field!=null?bCe(e.field):e.value!==void 0?lt(e.value):void 0;return e.scale!=null&&(t=U3t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${iI(e.exponent)})`),e.mult!=null&&(t+=`*${iI(e.mult)}`),e.offset!=null&&(t+=`+${iI(e.offset)}`),e.round&&(t=`round(${t})`),t}const zA=(e,t,n,r)=>`(${e}(${[t,n,r].map(YO).join(",")})+'')`;function j3t(e){return e.c?zA("hcl",e.h,e.c,e.l):e.h||e.s?zA("hsl",e.h,e.s,e.l):e.l||e.a?zA("lab",e.l,e.a,e.b):e.r||e.g||e.b?zA("rgb",e.r,e.g,e.b):null}function z3t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:lt(n));for(;t.length&&zn(t)==null;)t.pop();return t.unshift(vCe(e.gradient)),`gradient(${t.join(",")})`}function iI(e){return vt(e)?"("+YO(e)+")":e}function bCe(e){return _Ce(vt(e)?e:{datum:e})}function _Ce(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+lt(e));return e.signal||(r=yt(r)?td(r).map(lt).join("]["):_Ce(r)),t+"["+r+"]"}function U3t(e,t){const n=vCe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+iI(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function V3t(e){let t="";return e.forEach(n=>{const r=YO(n);t+=n.test?`(${n.test})?${r}:`:r}),zn(t)===":"&&(t+="null"),t}function ECe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=B3t(e,t,n,r,i.config);for(const a in e)o[a]=H3t(e[a],t,s,i);return s}function H3t(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=W3t(q3t(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function q3t(e){return Ue(e)?V3t(e):YO(e)}function W3t(e,t,n,r){const i=Lf(e,t);return i.$fields.forEach(s=>r[s]=1),gn(n,i.$params),i.$expr}const G3t="outer",Y3t=["value","update","init","react","bind"];function Toe(e,t){Le(e+' for "outer" push: '+lt(t))}function wCe(e,t){const n=e.name;if(e.push===G3t)t.signals[n]||Toe("No prior signal definition",n),Y3t.forEach(r=>{e[r]!==void 0&&Toe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function O9(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function KO(e,t,n,r){return new O9(e,t,n,r)}function eR(e,t){return KO("operator",e,t)}function Lt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function aT(e,t){return t?{$field:e,$name:t}:{$field:e}}const M9=aT("key");function Coe(e,t){return{$compare:e,$order:t}}function K3t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const X3t="ascending",Q3t="descending";function J3t(e){return vt(e)?(e.order===Q3t?"-":"+")+XO(e.op,e.field):""}function XO(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const VG="scope",$9="view";function ls(e){return e&&e.signal}function Z3t(e){return e&&e.expr}function sI(e){if(ls(e))return!0;if(vt(e)){for(const t in e)if(sI(e[t]))return!0}return!1}function Jl(e,t){return e??t}function E0(e){return e&&e.signal||e}const Aoe="timer";function uT(e,t){return(e.merge?tOt:e.stream?nOt:e.type?rOt:Le("Invalid stream specification: "+lt(e)))(e,t)}function eOt(e){return e===VG?$9:e||$9}function tOt(e,t){const n=e.merge.map(i=>uT(i,t)),r=HG({merge:n},e,t);return t.addStream(r).id}function nOt(e,t){const n=uT(e.stream,t),r=HG({stream:n},e,t);return t.addStream(r).id}function rOt(e,t){let n;e.type===Aoe?(n=t.event(Aoe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(eOt(e.source),e.type);const r=HG({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function HG(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+lt(t)),e.between=[uT(r[0],n),uT(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(iOt(t.marktype,t.markname,t.markrole)),t.source===VG&&r.push("inScope(event.item)"),r.length&&(e.filter=Lf("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function iOt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const sOt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function oOt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),yt(s)&&(s=og(s,t.isSubscope()?VG:$9)),s=gt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[uOt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+lt(r)+")"),i.update=yt(o)?Lf(o,t):o.expr!=null?Lf(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:sOt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(gn(aOt(u,t),i)))}function aOt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):uT(e,t)}}function uOt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function lOt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Lf(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>oOt(i,t,n.id))}const wr=e=>(t,n,r)=>KO(e,n,t||void 0,r),xCe=wr("aggregate"),cOt=wr("axisticks"),SCe=wr("bound"),$c=wr("collect"),Doe=wr("compare"),fOt=wr("datajoin"),TCe=wr("encode"),dOt=wr("expression"),hOt=wr("facet"),pOt=wr("field"),mOt=wr("key"),gOt=wr("legendentries"),yOt=wr("load"),vOt=wr("mark"),bOt=wr("multiextent"),_Ot=wr("multivalues"),EOt=wr("overlap"),wOt=wr("params"),CCe=wr("prefacet"),xOt=wr("projection"),SOt=wr("proxy"),TOt=wr("relay"),ACe=wr("render"),COt=wr("scale"),Hy=wr("sieve"),AOt=wr("sortitems"),DCe=wr("viewlayout"),DOt=wr("values");let IOt=0;const ICe={min:"min",max:"max",count:"sum"};function NOt(e,t){const n=e.type||"linear";mSe(n)||Le("Unrecognized scale type: "+lt(n)),t.addScale(e.name,{type:n,domain:void 0})}function kOt(e,t){const n=t.getScale(e.name).params;let r;n.domain=NCe(e.domain,e,t),e.range!=null&&(n.range=RCe(e,t,n)),e.interpolate!=null&&zOt(e.interpolate,n),e.nice!=null&&(n.nice=jOt(e.nice,t)),e.bins!=null&&(n.bins=BOt(e.bins,t));for(r in e)Ut(n,r)||r==="name"||(n[r]=fl(e[r],t))}function fl(e,t){return vt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+lt(e)):e}function oI(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>fl(n,t))}function QO(e){Le("Can not find data set: "+lt(e))}function NCe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ue(e)?ROt:e.fields?OOt:POt)(e,t,n)}function ROt(e,t,n){return e.map(r=>fl(r,n))}function POt(e,t,n){const r=n.getData(e.data);return r||QO(e.data),Mb(t.type)?r.valuesRef(n,e.field,kCe(e.sort,!1)):vSe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function OOt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=yt(o)?{data:r,field:o}:Ue(o)||o.signal?MOt(o,n):o,s.push(o),s),[]);return(Mb(t.type)?$Ot:vSe(t.type)?FOt:LOt)(e,n,i)}function MOt(e,t){const n="_:vega:_"+IOt++,r=$c({});if(Ue(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+lt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Hy({})]),{data:n,field:"data"}}function $Ot(e,t,n){const r=kCe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||QO(l.data),c.countsRef(t,l.field,r)}),a={groupby:M9,pulse:o};r&&(i=r.op||"count",s=r.field?XO(i,r.field):"count",a.ops=[ICe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(xCe(a));const u=t.add($c({pulse:Lt(i)}));return s=t.add(DOt({field:M9,sort:t.sortRef(r),pulse:Lt(u)})),Lt(s)}function kCe(e,t){return e&&(!e.field&&!e.op?vt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!ICe[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function FOt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||QO(i.data),s.domainRef(t,i.field)});return Lt(t.add(_Ot({values:r})))}function LOt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||QO(i.data),s.extentRef(t,i.field)});return Lt(t.add(bOt({extents:r})))}function BOt(e,t){return e.signal||Ue(e)?oI(e,t):t.objectProperty(e)}function jOt(e,t){return e.signal?t.signalRef(e.signal):vt(e)?{interval:fl(e.interval),step:fl(e.step)}:fl(e)}function zOt(e,t){t.interpolate=fl(e.type||e),e.gamma!=null&&(t.interpolateGamma=fl(e.gamma))}function RCe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(yt(i)){if(r&&Ut(r,i))return e=gn({},e,{range:r[i]}),RCe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Mb(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+lt(i))}else if(i.scheme){n.scheme=Ue(i.scheme)?oI(i.scheme,t):fl(i.scheme,t),i.extent&&(n.schemeExtent=oI(i.extent,t)),i.count&&(n.schemeCount=fl(i.count,t));return}else if(i.step){n.rangeStep=fl(i.step,t);return}else{if(Mb(e.type)&&!Ue(i))return NCe(i,e,t);Ue(i)||Le("Unsupported range type: "+lt(i))}return i.map(s=>(Ue(s)?oI:fl)(s,t))}function UOt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=F9(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=F9(n[i],i,t));t.addProjection(e.name,r)}function F9(e,t,n){return Ue(e)?e.map(r=>F9(r,t,n)):vt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+lt(e)):e}const Fc="top",K_="left",X_="right",km="bottom",PCe="center",VOt="vertical",HOt="start",qOt="middle",WOt="end",L9="index",qG="label",GOt="offset",jb="perc",YOt="perc2",ml="value",j2="guide-label",WG="guide-title",KOt="group-title",XOt="group-subtitle",Ioe="symbol",aI="gradient",B9="discrete",j9="size",QOt="shape",JOt="fill",ZOt="stroke",eMt="strokeWidth",tMt="strokeDash",nMt="opacity",GG=[j9,QOt,JOt,ZOt,eMt,tMt,nMt],z2={name:1,style:1,interactive:1},Vn={value:0},gl={value:1},JO="group",OCe="rect",YG="rule",rMt="symbol",qy="text";function lT(e){return e.type=JO,e.interactive=e.interactive||!1,e}function au(e,t){const n=(r,i)=>Jl(e[r],Jl(t[r],i));return n.isVertical=r=>VOt===Jl(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Jl(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Jl(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Jl(e.columns,Jl(t.columns,+n.isVertical(!0))),n}function MCe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function iMt(e,t,n){const r=t.config.style[n];return r&&r[e]}function ZO(e,t,n){return`item.anchor === '${HOt}' ? ${e} : item.anchor === '${WOt}' ? ${t} : ${n}`}const KG=ZO(lt(K_),lt(X_),lt(PCe));function sMt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},vt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function $Ce(e,t){return t?e?vt(e)?Object.assign({},e,{offset:$Ce(e.offset,t)}):{value:e,offset:t}:t:e}function ju(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Y_(e.encode,t,z2)):e.interactive=!1,e}function oMt(e,t,n,r){const i=au(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Vn,x:Vn,y:Vn,width:As(f),height:As(d)},update:gn({},u,{opacity:gl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Vn}};return oo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),ju({type:OCe,role:P3t,encode:h},r)}function aMt(e,t,n,r,i){const s=au(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Vn,fill:{scale:t,field:ml}};p[l]={signal:h+"datum."+jb,mult:u},p[c]=Vn,p[f]={signal:h+"datum."+YOt,mult:u},p[d]=As(a);const m={enter:p,update:gn({},p,{opacity:gl}),exit:{opacity:Vn}};return oo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),ju({type:OCe,role:k3t,key:ml,from:i,encode:m},r)}const uMt=`datum.${jb}<=0?"${K_}":datum.${jb}>=1?"${X_}":"${PCe}"`,lMt=`datum.${jb}<=0?"${km}":datum.${jb}>=1?"${Fc}":"${qOt}"`;function Noe(e,t,n,r){const i=au(e,t),s=i.isVertical(),o=As(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Vn},update:c={opacity:gl,text:{field:qG}},exit:{opacity:Vn}};return oo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Jl(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:lMt},f="y",d="x",h="1-"):(l.align=c.align={signal:uMt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+jb,mult:a},l[d]=c[d]=o,o.offset=Jl(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+L9}:void 0,ju({type:qy,role:yCe,style:j2,key:ml,from:r,encode:p,overlap:u},n)}function cMt(e,t,n,r,i){const s=au(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${GOt} : datum.${j9}`,h=l?As(l):{field:j9},p=`datum.${L9}`,m=`max(1, ${i})`;let g,y,v,b,E;h.mult=.5,g={enter:y={opacity:Vn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:gl,x:y.x,y:y.y},exit:{opacity:Vn}};let _=null,x=null;e.fill||(_=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),oo(g,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",x),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),GG.forEach(D=>{e[D]&&(v[D]=y[D]={scale:e[D],field:ml})});const S=ju({type:rMt,role:O3t,key:ml,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=As(c);C.offset=s("labelOffset"),g={enter:y={opacity:Vn,x:{signal:d,offset:C},y:h},update:v={opacity:gl,text:{field:qG},x:y.x,y:y.y},exit:{opacity:Vn}},oo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=ju({type:qy,role:yCe,style:j2,key:ml,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Vn,height:l?As(l):Vn,opacity:Vn},exit:{opacity:Vn},update:v={opacity:gl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,E={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,E={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:L9}},lT({role:UG,from:r,encode:Y_(g,o,z2),marks:[S,A],name:u,interactive:a,sort:E})}function fMt(e,t){const n=au(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const XG='item.orient === "left"',QG='item.orient === "right"',eM=`(${XG} || ${QG})`,dMt=`datum.vgrad && ${eM}`,hMt=ZO('"top"','"bottom"','"middle"'),pMt=ZO('"right"','"left"','"center"'),mMt=`datum.vgrad && ${QG} ? (${pMt}) : (${eM} && !(datum.vgrad && ${XG})) ? "left" : ${KG}`,gMt=`item._anchor || (${eM} ? "middle" : "start")`,yMt=`${dMt} ? (${XG} ? -90 : 90) : 0`,vMt=`${eM} ? (datum.vgrad ? (${QG} ? "bottom" : "top") : ${hMt}) : "top"`;function bMt(e,t,n,r){const i=au(e,t),s={enter:{opacity:Vn},update:{opacity:gl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Vn}};return oo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:gMt},angle:{signal:yMt},align:{signal:mMt},baseline:{signal:vMt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ju({type:qy,role:M3t,style:WG,from:r,encode:s},n)}function _Mt(e,t){let n;return vt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+koe(e.path)+")":e.sphere&&(n="geoShape("+koe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function koe(e){return vt(e)&&e.signal?e.signal:lt(e)}function FCe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===JO?UG:t||jG}function EMt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||FCe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function wMt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function JG(e,t){const n=wxe(e.type);n||Le("Unrecognized transform type: "+lt(e.type));const r=KO(n.type.toLowerCase(),null,LCe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function LCe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=xMt(o,t,n)}return r}function xMt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return SMt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+lt(t.type)+" parameter: "+lt(e.name));return}else{if(r==="param")return TMt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ls(i)?i.map(s=>Roe(e,s,n)):Roe(e,i,n)}function Roe(e,t,n){const r=e.type;if(ls(t))return Ooe(r)?Le("Expression references can not be signals."):Y6(r)?n.fieldRef(t):Moe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Y6(r);return i&&CMt(t)?n.exprRef(t.expr,t.as):i&&AMt(t)?aT(t.field,t.as):Ooe(r)?Lf(t,n):DMt(r)?Lt(n.getData(t).values):Y6(r)?aT(t):Moe(r)?n.compareRef(t):t}}function SMt(e,t,n){return yt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function TMt(e,t,n){const r=t[e.name];return e.array?(Ue(r)||Le("Expected an array of sub-parameters. Instead: "+lt(r)),r.map(i=>Poe(e,i,n))):Poe(e,r,n)}function Poe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+lt(t));const s=gn(LCe(i,t,n),i.key);return Lt(n.add(wOt(s)))}const CMt=e=>e&&e.expr,AMt=e=>e&&e.field,DMt=e=>e==="data",Ooe=e=>e==="expr",Y6=e=>e==="field",Moe=e=>e==="compare";function IMt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=uI(r,n):(e.data?a=Lt(n.getData(e.data).aggregate):(s=JG(gn({type:"aggregate",groupby:gt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=uI(r,n),o=a=Lt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Lt(n.add($c(null,[{}]))),o||(o=uI(e,n)),{key:i,pulse:o,parent:a}}function uI(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Lt(t.getData(e.data).output)}function ty(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}ty.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Lt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new ty(e,s,i,r,o)};function BCe(e){return yt(e)?e:null}function $oe(e,t,n){const r=XO(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function JE(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=J3t(s);let l=BCe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:M9,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Lt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(KO(r,void 0,d)),o&&(t.index[i]=f),c=Lt(f),l!=null&&(a[l]=c)}return c}ty.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=BCe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&$oe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Lt(r.output)},n&&n.field&&$oe(e,u,n),a=e.add(xCe(u)),o=e.add($c({pulse:Lt(a)})),o={agg:a,ref:Lt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Lt(this.values)},extentRef(e,t){return JE(e,this,"extent","extent",t,!1)},domainRef(e,t){return JE(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return JE(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return JE(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return JE(e,this,"indata","tupleindex",t,!0,!0)}};function NMt(e,t,n){const r=e.from.facet,i=r.name,s=uI(r,t);let o;r.name||Le("Facet must have a name: "+lt(r)),r.data||Le("Facet must reference a data set: "+lt(r)),r.field?o=t.add(CCe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(hOt({key:t.keyRef(r.groupby),group:Lt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+lt(r));const a=t.fork(),u=a.add($c()),l=a.add(Hy({pulse:Lt(u)}));a.addData(i,new ty(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function kMt(e,t,n){const r=t.add(CCe({pulse:n.pulse})),i=t.fork();i.add(Hy()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function jCe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(eR()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Lf(l,t);u.update=c.$expr,u.params=c.$params}function tM(e,t){const n=FCe(e),r=e.type===JO,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===UG||n===zG,a,u,l,c,f,d,h;const p=n===jG||o||i,m=IMt(e.from,r,t);u=t.add(fOt({key:m.key||(e.key?aT(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Lt(u);u=l=t.add($c({pulse:g})),u=t.add(vOt({markdef:EMt(e),interactive:wMt(e.interactive,t),clip:_Mt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Lt(u)}));const y=Lt(u);u=c=t.add(TCe(ECe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(x=>{const S=JG(x,t),C=S.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=Lt(u),t.add(u=S)}),e.sort&&(u=t.add(AOt({sort:t.compareRef(e.sort),pulse:Lt(u)})));const v=Lt(u);(i||o)&&(o=t.add(DCe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Lt(o));const b=t.add(SCe({mark:y,pulse:d||v}));h=Lt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?NMt(e,t,m):p?kMt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=RMt(s,h,t));const E=t.add(ACe({pulse:h})),_=t.add(Hy({pulse:Lt(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new ty(t,l,E,_)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&Le("Marks only support modify triggers."),jCe(x,t,f)}))}function RMt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:ls(s)?n.signalRef(s.signal):s,method:ls(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=ls(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Lt(n.add(EOt(o)))}function PMt(e,t){const n=t.config.legend,r=e.encode||{},i=au(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;GG.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Le("Missing valid scale for legend.");const p=OMt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Lt(t.add($c(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Lt(t.add(gOt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===aI?(h=[oMt(e,c,n,r.gradient),Noe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${E0(i.gradientLength())})/100))`)):p===B9?h=[aMt(e,c,n,r.gradient,v),Noe(e,n,r.labels,v)]:(f=fMt(e,n),h=[cMt(e,n,r,v,E0(f.columns))],d.size=FMt(e,t,h[0].marks)),h=[lT({role:R3t,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(bMt(e,n,r.title,g)),tM(lT({role:N3t,from:g,encode:Y_($Mt(i,e,n),s,z2),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function OMt(e,t){let n=e.type||Ioe;return!e.type&&MMt(e)===1&&(e.fill||e.stroke)&&(n=lW(t)?aI:e9(t)?B9:Ioe),n!==aI?n:e9(t)?B9:aI}function MMt(e){return GG.reduce((t,n)=>t+(e[n]?1:0),0)}function $Mt(e,t,n){const r={enter:{},update:{}};return oo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function FMt(e,t,n){const r=E0(Foe("size",e,n)),i=E0(Foe("strokeWidth",e,n)),s=E0(LMt(n[1].encode,t,j2));return Lf(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Foe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:MCe(e,n[0].encode)}function LMt(e,t,n){return MCe("fontSize",e)||iMt("fontSize",t,n)}const BMt=`item.orient==="${K_}"?-90:item.orient==="${X_}"?90:0`;function jMt(e,t){e=yt(e)?{text:e}:e;const n=au(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Lt(t.add($c(null,[l])));return u.push(VMt(e,n,zMt(e),c)),e.subtitle&&u.push(HMt(e,n,r.subtitle,c)),tM(lT({role:$3t,from:c,encode:UMt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function zMt(e){const t=e.encode;return t&&t.title||gn({name:e.name,interactive:e.interactive,style:e.style},t)}function UMt(e,t){const n={enter:{},update:{}};return oo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:KG},angle:{signal:BMt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Y_(n,t,z2)}function VMt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return oo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ju({type:qy,role:F3t,style:KOt,from:r,encode:o},n)}function HMt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return oo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ju({type:qy,role:L3t,style:XOt,from:r,encode:o},n)}function qMt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(JG(r,t))}),e.on&&e.on.forEach(r=>{jCe(r,t,e.name)}),t.addDataPipeline(e.name,WMt(e,t,n))}function WMt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?ls(e.values)||sI(e.format)?(r.push(Loe(t,e)),r.push(i=xg())):r.push(i=xg({$ingest:e.values,$format:e.format})):e.url?sI(e.url)||sI(e.format)?(r.push(Loe(t,e)),r.push(i=xg())):r.push(i=xg({$request:e.url,$format:e.format})):e.source&&(i=a=gt(e.source).map(d=>Lt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=xg()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=TOt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,xg())),i||r.push(xg()),r.push(Hy({})),r}function xg(e){const t=$c({},e);return t.metadata={source:!0},t}function Loe(e,t){return yOt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const zCe=e=>e===km||e===Fc,nM=(e,t,n)=>ls(e)?XMt(e.signal,t,n):e===K_||e===Fc?t:n,Ds=(e,t,n)=>ls(e)?YMt(e.signal,t,n):zCe(e)?t:n,Ec=(e,t,n)=>ls(e)?KMt(e.signal,t,n):zCe(e)?n:t,UCe=(e,t,n)=>ls(e)?QMt(e.signal,t,n):e===Fc?{value:t}:{value:n},GMt=(e,t,n)=>ls(e)?JMt(e.signal,t,n):e===X_?{value:t}:{value:n},YMt=(e,t,n)=>VCe(`${e} === '${Fc}' || ${e} === '${km}'`,t,n),KMt=(e,t,n)=>VCe(`${e} !== '${Fc}' && ${e} !== '${km}'`,t,n),XMt=(e,t,n)=>ZG(`${e} === '${K_}' || ${e} === '${Fc}'`,t,n),QMt=(e,t,n)=>ZG(`${e} === '${Fc}'`,t,n),JMt=(e,t,n)=>ZG(`${e} === '${X_}'`,t,n),VCe=(e,t,n)=>(t=t!=null?As(t):t,n=n!=null?As(n):n,Boe(t)&&Boe(n)?(t=t?t.signal||lt(t.value):null,n=n?n.signal||lt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[gn({test:e},t)].concat(n||[])),Boe=e=>e==null||Object.keys(e).length===1,ZG=(e,t,n)=>({signal:`${e} ? (${dv(t)}) : (${dv(n)})`}),ZMt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${K_}' ? (${dv(r)}) : `:"")+(n!=null?`${e} === '${km}' ? (${dv(n)}) : `:"")+(i!=null?`${e} === '${X_}' ? (${dv(i)}) : `:"")+(t!=null?`${e} === '${Fc}' ? (${dv(t)}) : `:"")+"(null)"}),dv=e=>ls(e)?e.signal:e==null?null:lt(e),e$t=(e,t)=>t===0?0:ls(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Lv=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function C1(e,t,n,r){let i;if(t&&Ut(t,e))return t[e];if(Ut(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[WG][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[j2][i]}return null}function joe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function t$t(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(ls(o)){const f=joe([n.axisX,n.axisY]),d=joe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Ds(o,C1(l,n.axisX,i,r),C1(l,n.axisY,i,r));u={};for(l of d)u[l]=ZMt(o.signal,C1(l,n.axisTop,i,r),C1(l,n.axisBottom,i,r),C1(l,n.axisLeft,i,r),C1(l,n.axisRight,i,r))}else a=o===Fc||o===km?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?gn({},i,a,u,s):i}function n$t(e,t,n,r){const i=au(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Vn},update:a={opacity:gl},exit:{opacity:Vn}};oo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=zoe(e,0),c=zoe(e,1);return o.x=a.x=Ds(s,l,Vn),o.x2=a.x2=Ds(s,c),o.y=a.y=Ec(s,l,Vn),o.y2=a.y2=Ec(s,c),ju({type:YG,role:T3t,from:r,encode:u},n)}function zoe(e,t){return{scale:e.scale,range:t}}function r$t(e,t,n,r,i){const s=au(e,t),o=e.orient,a=e.gridScale,u=nM(o,1,-1),l=i$t(e.offset,u);let c,f,d;const h={enter:c={opacity:Vn},update:d={opacity:gl},exit:f={opacity:Vn}};oo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:ml,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Ds(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:gn(m,{mult:u,offset:l});return c.x=d.x=Ds(o,p,g),c.y=d.y=Ec(o,p,g),c.x2=d.x2=Ec(o,y),c.y2=d.y2=Ds(o,y),f.x=Ds(o,p),f.y=Ec(o,p),ju({type:YG,role:C3t,key:ml,from:r,encode:h},n)}function i$t(e,t){if(t!==1)if(!vt(e))e=ls(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=gn({},e);for(;n.mult!=null;)if(vt(n.mult))n=n.mult=gn({},n.mult);else return n.mult=ls(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function s$t(e,t,n,r,i,s){const o=au(e,t),a=e.orient,u=nM(a,-1,1);let l,c,f;const d={enter:l={opacity:Vn},update:f={opacity:gl},exit:c={opacity:Vn}};oo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=As(i);h.mult=u;const p={scale:e.scale,field:ml,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Ds(a,Vn,p),f.y2=l.y2=Ds(a,h),c.x=Ds(a,p),f.x=l.x=Ec(a,Vn,p),f.x2=l.x2=Ec(a,h),c.y=Ec(a,p),ju({type:YG,role:D3t,key:ml,from:r,encode:d},n)}function K6(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function o$t(e,t,n,r,i,s){const o=au(e,t),a=e.orient,u=e.scale,l=nM(a,-1,1),c=E0(o("labelFlush")),f=E0(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=As(i);g.mult=l,g.offset=As(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:ml,band:.5,offset:$Ce(s.offset,o("labelOffset"))},v=Ds(a,p?K6(u,c,'"left"','"right"','"center"'):{value:"center"},GMt(a,"left","right")),b=Ds(a,UCe(a,"bottom","top"),p?K6(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=K6(u,c,`-(${f})`,f,0);p=p&&f;const _={opacity:Vn,x:Ds(a,y,g),y:Ec(a,y,g)},x={enter:_,update:m={opacity:gl,text:{field:qG},x:_.x,y:_.y,align:v,baseline:b},exit:{opacity:Vn,x:_.x,y:_.y}};oo(x,{dx:!d&&p?Ds(a,E):null,dy:!h&&p?Ec(a,E):null}),oo(x,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let C=o("labelOverlap");return C=C||S?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=Lv(m.align,v)),m.baseline!==b&&(m.baseline=Lv(m.baseline,b)),ju({type:qy,role:A3t,style:j2,key:ml,from:r,encode:x,overlap:C},n)}function a$t(e,t,n,r){const i=au(e,t),s=e.orient,o=nM(s,-1,1);let a,u;const l={enter:a={opacity:Vn,anchor:As(i("titleAnchor",null)),align:{signal:KG}},update:u=gn({},a,{opacity:gl,text:As(e.title)}),exit:{opacity:Vn}},c={signal:`lerp(range("${e.scale}"), ${ZO(0,1,.5)})`};return u.x=Ds(s,c),u.y=Ec(s,c),a.angle=Ds(s,Vn,e$t(o,90)),a.baseline=Ds(s,UCe(s,km,Fc),{value:km}),u.angle=a.angle,u.baseline=a.baseline,oo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),u$t(i,s,l,n),l.update.align=Lv(l.update.align,a.align),l.update.angle=Lv(l.update.angle,a.angle),l.update.baseline=Lv(l.update.baseline,a.baseline),ju({type:qy,role:I3t,style:WG,from:r,encode:l},n)}function u$t(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Lv(As(a),n.update[u]),!1):!z1(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?As(o):Ds(t,As(o),As(s))}function l$t(e,t){const n=t$t(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=au(e,n),l=sMt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Lt(t.add($c({},[c]))),d=Lt(t.add(cOt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(r$t(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(s$t(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(o$t(e,n,r.labels,d,p,l))),c.domain&&h.push(n$t(e,n,r.domain,f)),c.title&&h.push(a$t(e,n,r.title,f)),tM(lT({role:S3t,from:f,encode:Y_(c$t(u,e),i,z2),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function c$t(e,t){const n={enter:{},update:{}};return oo(n,{orient:e("orient"),offset:e("offset")||0,position:Jl(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function HCe(e,t,n){const r=gt(e.signals),i=gt(e.scales);return n||r.forEach(s=>wCe(s,t)),gt(e.projections).forEach(s=>UOt(s,t)),i.forEach(s=>NOt(s,t)),gt(e.data).forEach(s=>qMt(s,t)),i.forEach(s=>kOt(s,t)),(n||r).forEach(s=>lOt(s,t)),gt(e.axes).forEach(s=>l$t(s,t)),gt(e.marks).forEach(s=>tM(s,t)),gt(e.legends).forEach(s=>PMt(s,t)),e.title&&jMt(e.title,t),t.parseLambdas(),t}const f$t=e=>Y_({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function d$t(e,t){const n=t.config,r=Lt(t.root=t.add(eR())),i=h$t(e,n);i.forEach(l=>wCe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add($c()),o=t.add(TCe(ECe(f$t(e.encode),JO,zG,e.style,t,{pulse:Lt(s)}))),a=t.add(DCe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Lt(o)}));t.operators.pop(),t.pushState(Lt(o),Lt(a),null),HCe(e,t,i),t.operators.push(a);let u=t.add(SCe({mark:r,pulse:Lt(a)}));return u=t.add(ACe({pulse:Lt(u)})),u=t.add(Hy({pulse:Lt(u)})),t.addData("root",new ty(t,s,s,u)),t}function ZE(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function h$t(e,t){const n=o=>Jl(e[o],t[o]),r=[ZE("background",n("background")),ZE("autosize",E3t(n("autosize"))),ZE("padding",x3t(n("padding"))),ZE("width",n("width")||0),ZE("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return gt(e.signals).forEach(o=>{Ut(i,o.name)?o=gn(i[o.name],o):r.push(o),s[o.name]=o}),gt(t.signals).forEach(o=>{!Ut(s,o.name)&&!Ut(i,o.name)&&r.push(o)}),r}function qCe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Uoe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}qCe.prototype=Uoe.prototype={parse(e){return HCe(e,this)},fork(){return new Uoe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof O9?Lt(e):e;return this.add(SOt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Lt(this.add(Hy({pulse:e})))),this._parent.push(t),this._lookup.push(n?Lt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return zn(this._parent)},encode(){return zn(this._encode)},lookup(){return zn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(yt(e))return aT(e,t);e.signal||Le("Unsupported field reference: "+lt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Lt(this.add(pOt(i)))}return r},compareRef(e){let t=!1;const n=s=>ls(s)?(t=!0,this.signalRef(s.signal)):Z3t(s)?(t=!0,this.exprRef(s.expr)):s,r=gt(e.field).map(n),i=gt(e.order).map(n);return t?Lt(this.add(Doe({fields:r,orders:i}))):Coe(r,i)},keyRef(e,t){let n=!1;const r=s=>ls(s)?(n=!0,Lt(i[s.signal])):s,i=this.signals;return e=gt(e).map(r),n?Lt(this.add(mOt({fields:e,flat:t}))):K3t(e,t)},sortRef(e){if(!e)return e;const t=XO(e.op,e.field),n=e.order||X3t;return n.signal?Lt(this.add(Doe({fields:t,orders:this.signalRef(n.signal)}))):Coe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ut(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+lt(e));const n=t instanceof O9?t:this.add(eR(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+lt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Lt(this.signals[e]):(Ut(this.lambdas,e)||(this.lambdas[e]=this.add(eR(null))),Lt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Lf(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!vt(e)?e:this.signalRef(e.signal||eY(e))},exprRef(e,t){const n={expr:Lf(e,this)};return t&&(n.expr.$name=t),Lt(this.add(dOt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+lt(e)),this.bindings.push(gn({signal:e},t))},addScaleProj(e,t){Ut(this.scales,e)&&Le("Duplicate scale or projection name: "+lt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,COt(t))},addProjection(e,t){this.addScaleProj(e,xOt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+lt(e)),this.scales[e]},scaleRef(e){return Lt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ut(this.data,e)&&Le("Duplicate data set name: "+lt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+lt(e)),this.data[e]},addDataPipeline(e,t){return Ut(this.data,e)&&Le("Duplicate data set name: "+lt(e)),this.addData(e,ty.fromEntries(this,t))}};function eY(e){return(Ue(e)?p$t:m$t)(e)}function p$t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(vt(i)?i.signal||eY(i):lt(i))}return n+"]"}function m$t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+lt(r)+":"+(vt(i)?i.signal||eY(i):lt(i));return t+"}"}function g$t(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function y$t(e,t,n){return vt(e)||Le("Input Vega specification must be an object."),t=j_(g$t(),t,e.config),d$t(e,new qCe(t,n)).toRuntime()}var v$t="5.29.0";gn(Rb,yTt,sDt,FDt,pIt,EIt,YIt,AIt,XIt,eNt,cNt,yNt);const b$t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Xi,CanvasHandler:M2,CanvasRenderer:Uk,DATE:nu,DAY:Do,DAYOFYEAR:Ff,Dataflow:Fv,Debug:gwe,Error:YH,EventStream:vO,Gradient:PSe,GroupItem:kO,HOURS:Fu,Handler:OW,HybridHandler:STe,HybridRenderer:f9,Info:mwe,Item:NO,MILLISECONDS:Dc,MINUTES:Lu,MONTH:Oo,Marks:Bu,MultiPulse:pq,None:pwe,Operator:Dr,Parameters:yO,Pulse:sm,QUARTER:tu,RenderType:$p,Renderer:O2,ResourceLoader:jSe,SECONDS:Sl,SVGHandler:fTe,SVGRenderer:jW,SVGStringRenderer:xTe,Scenegraph:rTe,TIME_UNITS:oq,Transform:Oe,View:lCe,WEEK:ss,Warn:KH,YEAR:no,accessor:ou,accessorFields:Po,accessorName:Ci,array:gt,ascending:fO,bandwidthNRD:vq,bin:Txe,bootstrapCI:Cxe,boundClip:OTe,boundContext:N2,boundItem:o9,boundMark:ZSe,boundStroke:Uh,changeset:zy,clampRange:Awe,codegenExpression:$2e,compare:eq,constant:zo,cumulativeLogNormal:Sq,cumulativeNormal:_O,cumulativeUniform:Dq,dayofyear:Bwe,debounce:tq,defaultLocale:lq,definition:wxe,densityLogNormal:xq,densityNormal:bq,densityUniform:Aq,domChild:rs,domClear:sl,domCreate:Op,domFind:PW,dotbin:Axe,error:Le,expressionFunction:Bi,extend:gn,extent:$f,extentIndex:Dwe,falsy:op,fastmap:U_,field:wl,flush:Iwe,font:$O,fontFamily:P2,fontSize:nd,format:VD,formatLocale:Ik,formats:dq,hasOwnProperty:Ut,id:v2,identity:jo,inferType:fxe,inferTypes:dxe,ingest:sr,inherits:dt,inrange:lv,interpolate:cW,interpolateColors:DO,interpolateRange:bSe,intersect:NTe,intersectBoxLine:cv,intersectPath:vW,intersectPoint:bW,intersectRule:USe,isArray:Ue,isBoolean:ig,isDate:im,isFunction:yn,isIterable:Nwe,isNumber:Wn,isObject:vt,isRegExp:kwe,isString:yt,isTuple:mO,key:nq,lerp:Rwe,lineHeight:Dm,loader:hO,locale:lxe,logger:XH,lruCache:Pwe,markup:BW,merge:Owe,mergeConfig:j_,multiLineOffset:NW,one:B_,pad:Mwe,panLinear:Ewe,panLog:wwe,panPow:xwe,panSymlog:Swe,parse:y$t,parseExpression:AG,parseSelector:og,path:QP,pathCurves:mW,pathEqual:MTe,pathParse:$b,pathRectangle:$Se,pathRender:ZS,pathSymbols:MSe,pathTrail:FSe,peek:zn,point:LO,projection:JW,quantileLogNormal:Tq,quantileNormal:EO,quantileUniform:Iq,quantiles:gq,quantizeInterpolator:_Se,quarter:Twe,quartiles:yq,get random(){return Tl},randomInteger:ESt,randomKDE:Eq,randomLCG:_St,randomLogNormal:Ixe,randomMixture:Nxe,randomNormal:_q,randomUniform:kxe,read:mxe,regressionConstant:Nq,regressionExp:Pxe,regressionLinear:kq,regressionLoess:$xe,regressionLog:Rxe,regressionPoly:Mxe,regressionPow:Oxe,regressionQuad:Rq,renderModule:BO,repeat:Pw,resetDefaultLocale:yxt,resetSVGClipId:BSe,resetSVGDefIds:xAt,responseType:pxe,runtimeContext:X2e,sampleCurve:xO,sampleLogNormal:wq,sampleNormal:bO,sampleUniform:Cq,scale:Jn,sceneEqual:zW,sceneFromJSON:tTe,scenePickVisit:Ok,sceneToJSON:eTe,sceneVisit:Ic,sceneZOrder:_W,scheme:fW,serializeXML:bTe,setHybridRendererOptions:bAt,setRandom:vSt,span:b2,splitAccessPath:td,stringValue:lt,textMetrics:Au,timeBin:nxe,timeFloor:Wwe,timeFormatLocale:XS,timeInterval:V_,timeOffset:Kwe,timeSequence:Jwe,timeUnitSpecifier:Lwe,timeUnits:aq,toBoolean:rq,toDate:iq,toNumber:Io,toSet:Ac,toString:sq,transform:xxe,transforms:Rb,truncate:$we,truthy:xl,tupleid:Bt,typeParsers:Q8,utcFloor:Gwe,utcInterval:H_,utcOffset:Xwe,utcSequence:Zwe,utcdayofyear:Uwe,utcquarter:Cwe,utcweek:Vwe,version:v$t,visitArray:hp,week:jwe,writeConfig:z_,zero:Tp,zoomLinear:QH,zoomLog:JH,zoomPow:Dk,zoomSymlog:ZH},Symbol.toStringTag,{value:"Module"}));function _$t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var E$t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},w$t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},x$t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const S$t=Array.prototype.slice,Sg=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,S$t.call(t,1))},T$t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var C$t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:T$t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Sg("join",arguments)},indexof:function(){return Sg("indexOf",arguments)},lastindexof:function(){return Sg("lastIndexOf",arguments)},slice:function(){return Sg("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Sg("substring",arguments,String)},split:function(){return Sg("split",arguments,String)},replace:function(){return Sg("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const A$t=["view","item","group","xy","x","y"],z9=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&z9.add(setImmediate);const D$t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:E$t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),z9.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||C$t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>w$t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>x$t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,z9.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function ew(e,t,n,r,i,s){const o=a=>D$t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,A$t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var I$t={operator(e,t){const n=t.ast,r=e.functions;return i=>ew(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>ew(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>ew(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return ew(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=ew(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&_$t(o,r,s),l}}};const N$t="vega-lite",k$t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',R$t="5.18.1",P$t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],O$t="https://vega.github.io/vega-lite/",M$t="Vega-Lite is a concise high-level language for interactive visualization.",$$t=["vega","chart","visualization"],F$t="build/vega-lite.js",L$t="build/vega-lite.min.js",B$t="build/vega-lite.min.js",j$t="build/src/index",z$t="build/src/index.d.ts",U$t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},V$t=["bin","build","src","vega-lite*","tsconfig.json"],H$t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},q$t={type:"git",url:"https://github.com/vega/vega-lite.git"},W$t="BSD-3-Clause",G$t={url:"https://github.com/vega/vega-lite/issues"},Y$t={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},K$t={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},X$t={vega:"^5.24.0"},Q$t={node:">=18"},J$t="yarn@1.22.19",Z$t={name:N$t,author:k$t,version:R$t,collaborators:P$t,homepage:O$t,description:M$t,keywords:$$t,main:F$t,unpkg:L$t,jsdelivr:B$t,module:j$t,types:z$t,bin:U$t,files:V$t,scripts:H$t,repository:q$t,license:W$t,bugs:G$t,devDependencies:Y$t,dependencies:K$t,peerDependencies:X$t,engines:Q$t,packageManager:J$t};function tY(e){return!!e.or}function nY(e){return!!e.and}function rY(e){return!!e.not}function lI(e,t){if(rY(e))lI(e.not,t);else if(nY(e))for(const n of e.and)lI(n,t);else if(tY(e))for(const n of e.or)lI(n,t);else t(e)}function Bv(e,t){return rY(e)?{not:Bv(e.not,t)}:nY(e)?{and:e.and.map(n=>Bv(n,t))}:tY(e)?{or:e.or.map(n=>Bv(n,t))}:t(e)}const tn=structuredClone;function WCe(e){throw new Error(e)}function zb(e,t){const n={};for(const r of t)Ut(e,r)&&(n[r]=e[r]);return n}function Ka(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Er(e)).join(",")})`};function On(e){if(Wn(e))return e;const t=yt(e)?e:Er(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function U9(e){return e===!1||e===null}function Mn(e,t){return e.includes(t)}function ny(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function iY(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function GCe(e,...t){for(const n of t)eFt(e,n??{});return e}function eFt(e,t){for(const n of et(t))z_(e,n,t[n],!0)}function gf(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function tFt(e,t){const n=et(e),r=et(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function YCe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function sY(e,t){for(const n of e)if(t.has(n))return!0;return!1}function V9(e){const t=new Set;for(const n of e){const i=td(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function oY(e,t){return e===void 0||t===void 0?!0:sY(V9(e),V9(t))}function _r(e){return et(e).length===0}const et=Object.keys,ro=Object.values,Rm=Object.entries;function cT(e){return e===!0||e===!1}function ri(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function jx(e,t){return rY(e)?`!(${jx(e.not,t)})`:nY(e)?`(${e.and.map(n=>jx(n,t)).join(") && (")})`:tY(e)?`(${e.or.map(n=>jx(n,t)).join(") || (")})`:t(e)}function tR(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&tR(e[n],t)&&delete e[n],_r(e)}function U2(e){return e.charAt(0).toUpperCase()+e.substr(1)}function aY(e,t="datum"){const n=td(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(lt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function KCe(e,t="datum"){return`${t}[${lt(td(e).join("."))}]`}function nFt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Cl(e){return`${td(e).map(nFt).join("\\.")}`}function ry(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Q_(e){return`${td(e).join(".")}`}function Ub(e){return e?td(e).length:0}function Fi(...e){for(const t of e)if(t!==void 0)return t}let XCe=42;function QCe(e){const t=++XCe;return e?String(e)+t:t}function rFt(){XCe=42}function JCe(e){return ZCe(e)?e:`__${e}`}function ZCe(e){return e.startsWith("__")}function fT(e){if(e!==void 0)return(e%360+360)%360}function rM(e){return Wn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Voe=Object.getPrototypeOf(structuredClone({}));function Tu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Tu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Tu(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Voe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Voe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Tu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Er(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const nh="row",rh="column",iM="facet",ii="x",$s="y",Lc="x2",sd="y2",ag="xOffset",J_="yOffset",Bc="radius",Hh="radius2",$l="theta",qh="theta2",jc="latitude",zc="longitude",Uc="latitude2",Al="longitude2",ru="color",od="fill",ad="stroke",iu="shape",Wh="size",Wy="angle",Gh="opacity",ug="fillOpacity",lg="strokeOpacity",cg="strokeWidth",fg="strokeDash",V2="text",Vb="order",H2="detail",sM="key",iy="tooltip",oM="href",aM="url",uM="description",iFt={x:1,y:1,x2:1,y2:1},eAe={theta:1,theta2:1,radius:1,radius2:1};function tAe(e){return e in eAe}const uY={longitude:1,longitude2:1,latitude:1,latitude2:1};function nAe(e){switch(e){case jc:return"y";case Uc:return"y2";case zc:return"x";case Al:return"x2"}}function rAe(e){return e in uY}const sFt=et(uY),lY={...iFt,...eAe,...uY,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function jv(e){return e===ru||e===od||e===ad}const iAe={row:1,column:1,facet:1},dl=et(iAe),cY={...lY,...iAe},oFt=et(cY),{order:EUt,detail:wUt,tooltip:xUt,...aFt}=cY,{row:SUt,column:TUt,facet:CUt,...uFt}=aFt;function lFt(e){return!!uFt[e]}function sAe(e){return!!cY[e]}const cFt=[Lc,sd,Uc,Al,qh,Hh];function oAe(e){return Gy(e)!==e}function Gy(e){switch(e){case Lc:return ii;case sd:return $s;case Uc:return jc;case Al:return zc;case qh:return $l;case Hh:return Bc}return e}function Pm(e){if(tAe(e))switch(e){case $l:return"startAngle";case qh:return"endAngle";case Bc:return"outerRadius";case Hh:return"innerRadius"}return e}function ud(e){switch(e){case ii:return Lc;case $s:return sd;case jc:return Uc;case zc:return Al;case $l:return qh;case Bc:return Hh}}function su(e){switch(e){case ii:case Lc:return"width";case $s:case sd:return"height"}}function aAe(e){switch(e){case ii:return"xOffset";case $s:return"yOffset";case Lc:return"x2Offset";case sd:return"y2Offset";case $l:return"thetaOffset";case Bc:return"radiusOffset";case qh:return"theta2Offset";case Hh:return"radius2Offset"}}function fY(e){switch(e){case ii:return"xOffset";case $s:return"yOffset"}}function fFt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const dFt=et(lY),{x:AUt,y:DUt,x2:IUt,y2:NUt,xOffset:kUt,yOffset:RUt,latitude:PUt,longitude:OUt,latitude2:MUt,longitude2:$Ut,theta:FUt,theta2:LUt,radius:BUt,radius2:jUt,...dY}=lY,hFt=et(dY),hY={x:1,y:1},ld=et(hY);function Li(e){return e in hY}const pY={theta:1,radius:1},pFt=et(pY);function lM(e){return e==="width"?ii:$s}const uAe={xOffset:1,yOffset:1};function q2(e){return e in uAe}const{text:zUt,tooltip:UUt,href:VUt,url:HUt,description:qUt,detail:WUt,key:GUt,order:YUt,...lAe}=dY,mFt=et(lAe);function gFt(e){return!!dY[e]}function yFt(e){switch(e){case ru:case od:case ad:case Wh:case iu:case Gh:case cg:case fg:return!0;case ug:case lg:case Wy:return!1}}const cAe={...hY,...pY,...uAe,...lAe},cM=et(cAe);function Yh(e){return!!cAe[e]}function vFt(e,t){return _Ft(e)[t]}const fAe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:KUt,...bFt}=fAe;function _Ft(e){switch(e){case ru:case od:case ad:case uM:case H2:case sM:case iy:case oM:case Vb:case Gh:case ug:case lg:case cg:case iM:case nh:case rh:return fAe;case ii:case $s:case ag:case J_:case jc:case zc:return bFt;case Lc:case sd:case Uc:case Al:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Wh:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case fg:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case iu:return{point:"always",geoshape:"always"};case V2:return{text:"always"};case Wy:return{point:"always",square:"always",text:"always"};case aM:return{image:"always"};case $l:return{text:"always",arc:"always"};case Bc:return{text:"always",arc:"always"};case qh:case Hh:return{arc:"always"}}}function X6(e){switch(e){case ii:case $s:case $l:case Bc:case ag:case J_:case Wh:case Wy:case cg:case Gh:case ug:case lg:case Lc:case sd:case qh:case Hh:return;case iM:case nh:case rh:case iu:case fg:case V2:case iy:case oM:case aM:case uM:return"discrete";case ru:case od:case ad:return"flexible";case jc:case zc:case Uc:case Al:case H2:case sM:case Vb:return}}const EFt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},wFt={count:1,min:1,max:1};function Dh(e){return!!e&&!!e.argmin}function dg(e){return!!e&&!!e.argmax}function mY(e){return yt(e)&&!!EFt[e]}const xFt=new Set(["count","valid","missing","distinct"]);function dAe(e){return yt(e)&&xFt.has(e)}function SFt(e){return yt(e)&&Mn(["min","max"],e)}const TFt=new Set(["count","sum","distinct","valid","missing"]),CFt=new Set(["mean","average","median","q1","q3","min","max"]);function hAe(e){return ig(e)&&(e=wM(e,void 0)),"bin"+et(e).map(t=>fM(e[t])?ri(`_${t}_${Rm(e[t])}`):ri(`_${t}_${e[t]}`)).join("")}function Fr(e){return e===!0||Yy(e)&&!e.binned}function Gs(e){return e==="binned"||Yy(e)&&e.binned===!0}function Yy(e){return vt(e)}function fM(e){return e==null?void 0:e.param}function Hoe(e){switch(e){case nh:case rh:case Wh:case ru:case od:case ad:case cg:case Gh:case ug:case lg:case iu:return 6;case fg:return 4;default:return 10}}function W2(e){return!!(e!=null&&e.expr)}function Pa(e){const t=et(e||{}),n={};for(const r of t)n[r]=yu(e[r]);return n}function pAe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=zb(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function gp(e){return yt(e)||Ue(e)&&yt(e[0])}function Pt(e){return!!(e!=null&&e.signal)}function hg(e){return!!e.step}function AFt(e){return Ue(e)?!1:"fields"in e&&!("data"in e)}function DFt(e){return Ue(e)?!1:"fields"in e&&"data"in e}function Wd(e){return Ue(e)?!1:"field"in e&&"data"in e}const IFt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},NFt=et(IFt),kFt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},H9=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function mAe(e){const t=Ue(e.condition)?e.condition.map(qoe):qoe(e.condition);return{...yu(e),condition:t}}function yu(e){if(W2(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function qoe(e){if(W2(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Vr(e){if(W2(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Pt(e)?e:e!==void 0?{value:e}:void 0}function RFt(e){return Pt(e)?e.signal:lt(e)}function Woe(e){return Pt(e)?e.signal:lt(e.value)}function cc(e){return Pt(e)?e.signal:e==null?null:lt(e)}function PFt(e,t,n){for(const r of n){const i=Ih(r,t.markDef,t.config);i!==void 0&&(e[r]=Vr(i))}return e}function gAe(e){return[].concat(e.type,e.style??[])}function ir(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Ih(e,t,n,r)}function Ih(e,t,n,{vgChannel:r}={}){return Fi(r?nR(e,t,n.style):void 0,nR(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function nR(e,t,n){return yAe(e,gAe(t),n)}function yAe(e,t,n){t=gt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function vAe(e,t){return gt(e).reduce((n,r)=>(n.field.push(ft(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function bAe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Tu(i,r))return;n.push(r)}),n}function _Ae(e,t){return Tu(e,t)||!t?e:e?[...gt(e),...gt(t)].join(", "):t}function EAe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((gp(n)||Pt(n))&&(gp(r)||Pt(r)))return{explicit:e.explicit,value:_Ae(n,r)};if(gp(n)||Pt(n))return{explicit:e.explicit,value:n};if(gp(r)||Pt(r))return{explicit:e.explicit,value:r};if(!gp(n)&&!Pt(n)&&!gp(r)&&!Pt(r))return{explicit:e.explicit,value:bAe(n,r)};throw new Error("It should never reach here")}function gY(e){return`Invalid specification ${Er(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const OFt='Autosize "fit" only works for single views and layered views.';function Goe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Yoe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Koe(e){return e?`Dropping "fit-${e}" because spec has discrete ${su(e)}.`:'Dropping "fit" because spec has discrete size.'}function yY(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Xoe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function MFt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function $Ft(e){return`The "nearest" transform is not supported for ${e} marks.`}function wAe(e){return`Selection not supported for ${e} yet.`}function FFt(e){return`Cannot find a selection named "${e}".`}const LFt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",BFt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",jFt="Legend bindings are only supported for selections over an individual field or encoding channel.";function zFt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function UFt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const VFt="The same selection must be used to override scale domains in a layered view.",HFt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function qFt(e){return`Unknown repeated value "${e}".`}function Qoe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const WFt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function GFt(e){return`Unrecognized parse "${e}".`}function Joe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const YFt="Attempt to add the same child twice.";function KFt(e){return`Ignoring an invalid transform: ${Er(e)}.`}const XFt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Zoe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function QFt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Er(t)} is overridden by a child projection ${Er(n)}.`}const JFt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ZFt(e){return`${e}Offset dropped because ${e} is continuous`}function e6t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Er(n)}}.`}function xAe(e){return`Invalid field type "${e}".`}function t6t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function n6t(e){return`Invalid aggregation operator "${e}".`}function SAe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function r6t(e){return`Position range does not support relative band size for ${e}.`}function q9(e,t){return`Dropping ${Er(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const i6t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function dM(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function s6t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function o6t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function a6t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function u6t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Q6(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function l6t(e){return`The ${e} for range marks cannot be an expression`}function c6t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function f6t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function d6t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function h6t(e){return`Cannot use the relative band size with ${e} scale.`}function p6t(e){return`Using unaggregated domain with raw field has no effect (${Er(e)}).`}function m6t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function g6t(e){return`Unaggregated domain is currently unsupported for log scale (${Er(e)}).`}function y6t(e){return`Cannot apply size to non-oriented mark "${e}".`}function v6t(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function b6t(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function TAe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function CAe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function _6t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Er(n)} and ${Er(r)}). Using ${Er(n)}.`}function E6t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Er(n)} and ${Er(r)}). Using the union of the two domains.`}function w6t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function x6t(e){return`Dropping sort property ${Er(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const eae="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",S6t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",T6t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",C6t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function A6t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function D6t(e){return`Stack is applied to a non-linear scale (${e}).`}function I6t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function rR(e,t){return`Invalid ${e}: ${Er(t)}.`}function N6t(e){return`Dropping day from datetime ${Er(e)} as day cannot be combined with other units.`}function k6t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function R6t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function P6t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function tae(e){return`1D error band does not support ${e}.`}function AAe(e){return`Channel ${e} is required for "binned" bin.`}function O6t(e){return`Channel ${e} should not be used with "binned" bin.`}function M6t(e){return`Domain for ${e} is required for threshold scale.`}const DAe=XH(KH);let Hb=DAe;function $6t(e){return Hb=e,Hb}function F6t(){return Hb=DAe,Hb}function it(...e){Hb.warn(...e)}function L6t(...e){Hb.debug(...e)}function Ky(e){if(e&&vt(e)){for(const t of bY)if(t in e)return!0}return!1}const IAe=["january","february","march","april","may","june","july","august","september","october","november","december"],B6t=IAe.map(e=>e.substr(0,3)),NAe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],j6t=NAe.map(e=>e.substr(0,3));function z6t(e){if(rM(e)&&(e=+e),Wn(e))return e>4&&it(rR("quarter",e)),e-1;throw new Error(rR("quarter",e))}function U6t(e){if(rM(e)&&(e=+e),Wn(e))return e-1;{const t=e.toLowerCase(),n=IAe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=B6t.indexOf(r);if(i!==-1)return i;throw new Error(rR("month",e))}}function V6t(e){if(rM(e)&&(e=+e),Wn(e))return e%7;{const t=e.toLowerCase(),n=NAe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=j6t.indexOf(r);if(i!==-1)return i;throw new Error(rR("day",e))}}function vY(e,t){const n=[];if(t&&e.day!==void 0&&et(e).length>1&&(it(N6t(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?U6t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?z6t(e.quarter):e.quarter;n.push(Wn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?V6t(e.day):e.day;n.push(Wn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function sy(e){const n=vY(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function H6t(e){const n=vY(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function q6t(e){const t=vY(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const kAe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},bY=et(kAe);function W6t(e){return!!kAe[e]}function Xy(e){return vt(e)?e.binned:RAe(e)}function RAe(e){return e&&e.startsWith("binned")}function _Y(e){return e.startsWith("utc")}function G6t(e){return e.substring(3)}const Y6t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function hM(e){return bY.filter(t=>OAe(e,t))}function PAe(e){const t=hM(e);return t[t.length-1]}function OAe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function K6t(e,t,{end:n}={end:!1}){const r=aY(t),i=_Y(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of bY)OAe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),H6t(a)}function MAe(e){if(!e)return;const t=hM(e);return`timeUnitSpecifier(${Er(t)}, ${Er(Y6t)})`}function X6t(e,t,n){if(!e)return;const r=MAe(e);return`${n||_Y(e)?"utc":"time"}Format(${t}, ${r})`}function Ns(e){if(!e)return;let t;return yt(e)?RAe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:vt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),_Y(t.unit)&&(t.utc=!0,t.unit=G6t(t.unit)),t}function Q6t(e){const{utc:t,...n}=Ns(e);return n.unit?(t?"utc":"")+et(n).map(r=>ri(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+et(n).map(r=>ri(`_${r}_${n[r]}`)).join("")}function $Ae(e,t=n=>n){const n=Ns(e),r=PAe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=FAe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(sy(a))} - ${t(sy(i))}`}}const J6t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Z6t(e){return!!J6t[e]}function FAe(e,t=1){if(Z6t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function eLt(e){return e==null?void 0:e.param}function EY(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function wY(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function xY(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function SY(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function TY(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function CY(e){if(e!=null&&e.field){if(Ue(e.range)&&e.range.length===2)return!0;if(Pt(e.range))return!0}return!1}function AY(e){return!!(e!=null&&e.field)&&(Ue(e.oneOf)||Ue(e.in))}function tLt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function LAe(e){return AY(e)||EY(e)||CY(e)||wY(e)||SY(e)||xY(e)||TY(e)}function Yc(e,t){return xM(e,{timeUnit:t,wrapTime:!0})}function nLt(e,t){return e.map(n=>Yc(n,t))}function BAe(e,t=!0){const{field:n}=e,r=Ns(e.timeUnit),{unit:i,binned:s}=r||{},o=ft(e,{expr:"datum"}),a=i?`time(${s?o:K6t(i,n)})`:o;if(EY(e))return`${a}===${Yc(e.equal,i)}`;if(wY(e)){const u=e.lt;return`${a}<${Yc(u,i)}`}else if(SY(e)){const u=e.gt;return`${a}>${Yc(u,i)}`}else if(xY(e)){const u=e.lte;return`${a}<=${Yc(u,i)}`}else if(TY(e)){const u=e.gte;return`${a}>=${Yc(u,i)}`}else{if(AY(e))return`indexof([${nLt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(tLt(e))return DY(a,e.valid);if(CY(e)){const{range:u}=e,l=Pt(u)?{signal:`${u.signal}[0]`}:u[0],c=Pt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Yc(l,i)+", "+Yc(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Yc(l,i)}`),c!==null&&f.push(`${a} <= ${Yc(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Er(e)}`)}function DY(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function rLt(e){return LAe(e)&&e.timeUnit?{...e,timeUnit:Ns(e.timeUnit)}:e}const G2={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function iLt(e){return e==="quantitative"||e==="temporal"}function jAe(e){return e==="ordinal"||e==="nominal"}const oy=G2.quantitative,IY=G2.ordinal,qb=G2.temporal,NY=G2.nominal,Z_=G2.geojson;function sLt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case oy:return"quantitative";case"t":case qb:return"temporal";case"o":case IY:return"ordinal";case"n":case NY:return"nominal";case Z_:return"geojson"}}const Xa={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},W9={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function oLt(e,t){const n=W9[e],r=W9[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const aLt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function nae(e){return aLt[e]}const zAe=new Set(["linear","log","pow","sqrt","symlog"]),UAe=new Set([...zAe,"time","utc"]);function VAe(e){return zAe.has(e)}const HAe=new Set(["quantile","quantize","threshold"]),uLt=new Set([...UAe,...HAe,"sequential","identity"]),lLt=new Set(["ordinal","bin-ordinal","point","band"]);function Rs(e){return lLt.has(e)}function zu(e){return uLt.has(e)}function fc(e){return UAe.has(e)}function Wb(e){return HAe.has(e)}const cLt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function fLt(e){return!yt(e)&&!!e.name}function qAe(e){return e==null?void 0:e.param}function dLt(e){return e==null?void 0:e.unionWith}function hLt(e){return vt(e)&&"field"in e}const pLt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:XUt,domain:QUt,range:JUt,rangeMax:ZUt,rangeMin:eVt,scheme:tVt,...mLt}=pLt,gLt=et(mLt);function G9(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return fc(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return fc(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return fc(e);case"nice":return fc(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return zu(e)&&!Mn(["log","time","utc","threshold","quantile"],e)}}function WAe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return jv(e)?void 0:d6t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function yLt(e,t){return Mn([IY,NY],t)?e===void 0||Rs(e):t===qb?Mn([Xa.TIME,Xa.UTC,void 0],e):t===oy?VAe(e)||Wb(e)||e===void 0:!0}function vLt(e,t,n=!1){if(!Yh(e))return!1;switch(e){case ii:case $s:case ag:case J_:case $l:case Bc:return fc(t)||t==="band"?!0:t==="point"?!n:!1;case Wh:case cg:case Gh:case ug:case lg:case Wy:return fc(t)||Wb(t)||Mn(["band","point","ordinal"],t);case ru:case od:case ad:return t!=="band";case fg:case iu:return t==="ordinal"||Wb(t)}}function kY(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=PY(e);return st(n)&&!dAe(n.aggregate)&&i&&fc(i.get("type"))?bLt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function bLt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return ir("invalid",n,i)===null?[_Lt(e,t),r]:r}function _Lt(e,t){const n=RY(e,!0),i=Gy(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function RY(e,t=!0){return DY(yt(e)?e:ft(e,{expr:"datum"}),!t)}function ELt(e){const{datum:t}=e;return Ky(t)?sy(t):`${Er(t)}`}function w0(e,t,n,r){const i={};if(t&&(i.scale=t),cd(e)){const{datum:s}=e;Ky(s)?i.signal=sy(s):Pt(s)?i.signal=s.signal:W2(s)?i.signal=s.expr:i.value=s}else i.field=ft(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function iR({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Pt(o)&&0<o&&o<1?"datum":void 0,u=ft(t,{expr:a,suffix:i}),l=n!==void 0?ft(n,{expr:a}):ft(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Pt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function wLt({scaleName:e,fieldDef:t}){const n=ft(t,{expr:"datum"}),r=ft(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function PY({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ln(t)){const f=o==null?void 0:o.get("type");if(ha(t)){c??(c=Om({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Fr(d)||c&&h&&p===qb)return a!=null&&a.impute?w0(t,s,{binSuffix:"mid"},{offset:u}):c&&!Rs(f)?iR({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):w0(t,s,Q2(t,e)?{binSuffix:"range"}:{},{offset:u});if(Gs(d)){if(st(n))return iR({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});it(AAe(e===ii?Lc:sd))}}return w0(t,s,Rs(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Nc(t)){const f=t.value,d=u?{offset:u}:{};return{...zx(e,f),...d}}}return yn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function zx(e,t){return Mn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Mn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Vr(t)}function ay(e){return e&&e!=="number"&&e!=="time"}function GAe(e,t,n){return`${e}(${t}${n?`, ${Er(n)}`:""})`}const xLt="  ";function OY({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(ay(n))return dc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=YAe(e,r,i),a=Gb(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return dc({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return dc({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&st(e)&&e.timeUnit===void 0)return dc({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Kb(e)){const c=TLt({field:o,timeUnit:st(e)?(u=Ns(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Jy(e)&&((l=e.scale)==null?void 0:l.type)===Xa.UTC});return c?{signal:c}:void 0}if(t=Y9({type:a,specifiedFormat:t,config:s,normalizeStack:i}),st(e)&&Fr(e.bin)){const c=ft(e,{expr:r,binSuffix:"end"});return{signal:Y2(o,c,t,n,s)}}else return t||Gb(e)==="quantitative"?{signal:`${QAe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function YAe(e,t,n){return st(e)?n?`${ft(e,{expr:t,suffix:"end"})}-${ft(e,{expr:t,suffix:"start"})}`:ft(e,{expr:t}):ELt(e)}function dc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=YAe(e,r,i)),o!=="datum.value"&&st(e)&&Fr(e.bin)){const a=ft(e,{expr:r,binSuffix:"end"});return{signal:Y2(o,a,t,n,s)}}return{signal:GAe(n,o,t)}}function KAe(e,t,n,r,i,s){var o;if(!(yt(r)&&ay(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Gb(e)==="quantitative"&&(i.normalizedNumberFormatType&&Yb(e)&&e.stack==="normalize"||i.numberFormatType))){if(Yb(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return Y9({type:"quantitative",config:i,normalizeStack:!0});if(Kb(e)){const a=st(e)?(o=Ns(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:SLt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return Y9({type:t,specifiedFormat:n,config:i})}}function XAe(e,t,n){var r;if(e&&(Pt(e)||e==="number"||e==="time"))return e;if(Kb(t)&&n!=="time"&&n!=="utc")return st(t)&&((r=Ns(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function Y9({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(yt(t))return t;if(e===oy)return r?n.normalizedNumberFormat:n.numberFormat}function SLt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:MAe(t)}:r?void 0:n.timeFormat)}function QAe(e,t){return`format(${e}, "${t||""}")`}function rae(e,t,n,r){return ay(n)?GAe(n,e,t):QAe(e,(yt(t)?t:void 0)??r.numberFormat)}function Y2(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Y2(e,t,i.numberFormat,i.numberFormatType,i);const s=rae(e,n,r,i),o=rae(t,n,r,i);return`${DY(e,!1)} ? "null" : ${s} + "${xLt}" + ${o}`}function TLt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=yt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):X6t(t,e,s)}const ba={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},JAe=ba.arc,pM=ba.area,mM=ba.bar,CLt=ba.image,gM=ba.line,yM=ba.point,ALt=ba.rect,sR=ba.rule,ZAe=ba.text,MY=ba.tick,DLt=ba.trail,$Y=ba.circle,FY=ba.square,eDe=ba.geoshape;function Qy(e){return["line","area","trail"].includes(e)}function dT(e){return["rect","bar","image","arc"].includes(e)}const ILt=new Set(et(ba));function Bf(e){return e.type}const NLt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],kLt=["fill","fillOpacity"],RLt=[...NLt,...kLt],PLt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},iae=et(PLt),OLt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},MLt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},$Lt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},tDe=et($Lt);function uy(e){return e&&e.band!=null}const FLt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},nDe=5,LLt={binSpacing:1,continuousBandSize:nDe,minBandSize:.25,timeUnitBandPosition:.5},BLt={binSpacing:0,continuousBandSize:nDe,minBandSize:.25,timeUnitBandPosition:.5},jLt={thickness:1};function zLt(e){return Bf(e)?e.type:e}const vM="min",ULt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function sae(e){return e in ULt}function rDe(e){return!!(e!=null&&e.encoding)}function Cf(e){return e&&(e.op==="count"||!!e.field)}function iDe(e){return e&&Ue(e)}function K2(e){return"row"in e||"column"in e}function LY(e){return!!e&&"header"in e}function bM(e){return"facet"in e}function VLt(e){return e.param}function HLt(e){return e&&!yt(e)&&"repeat"in e}function oae(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function BY(e){return"sort"in e}function Om({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(st(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Ih("timeUnitBandPosition",n,r);if(Fr(s))return .5}}function sDe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=su(e),u=ir(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(st(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Ih("timeUnitBandSize",r,i)};if(Fr(h)&&!Rs(s))return{band:1}}if(dT(r.type))return s?Rs(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function oDe(e,t,n,r){return Fr(e.bin)||e.timeUnit&&ha(e)&&e.type==="temporal"?Om({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function aDe(e){return e&&!!e.sort&&!e.field}function _M(e){return e&&"condition"in e}function EM(e){const t=e==null?void 0:e.condition;return!!t&&!Ue(t)&&st(t)}function X2(e){const t=e==null?void 0:e.condition;return!!t&&!Ue(t)&&ln(t)}function qLt(e){const t=e==null?void 0:e.condition;return!!t&&(Ue(t)||Nc(t))}function st(e){return e&&(!!e.field||e.aggregate==="count")}function Gb(e){return e==null?void 0:e.type}function cd(e){return e&&"datum"in e}function jp(e){return ha(e)&&!aR(e)||oR(e)}function aae(e){return ha(e)&&e.type==="quantitative"&&!e.bin||oR(e)}function oR(e){return cd(e)&&Wn(e.datum)}function ln(e){return st(e)||cd(e)}function ha(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Nc(e){return e&&"value"in e&&"value"in e}function Jy(e){return e&&("scale"in e||"sort"in e)}function Yb(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function uDe(e){return e&&"legend"in e}function lDe(e){return e&&("format"in e||"formatType"in e)}function WLt(e){return Ka(e,["legend","axis","header","scale"])}function GLt(e){return"op"in e}function ft(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(KLt(e))n=JCe("count");else{let o;if(!t.nofn)if(GLt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Fr(a)?(o=hAe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?dg(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Dh(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Xy(l)&&(o=Q6t(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Q_(n):t.expr?KCe(n,t.expr)+s:Cl(n)+s}function aR(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return st(e)&&!!e.bin;case"temporal":return!1}throw new Error(xAe(e.type))}function YLt(e){var t;return Jy(e)&&Wb((t=e.scale)==null?void 0:t.type)}function KLt(e){return e.aggregate==="count"}function XLt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Fr(r))return`${n} (binned)`;if(i&&!Xy(i)){const a=(o=Ns(i))==null?void 0:o.unit;if(a)return`${n} (${hM(a).join("-")})`}else if(s)return dg(s)?`${n} for max ${s.argmax}`:Dh(s)?`${n} for min ${s.argmin}`:`${U2(s)} of ${n}`;return n}function QLt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(dg(t))return`${i} for argmax(${t.argmax})`;if(Dh(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Xy(r)?Ns(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Fr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const cDe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return QLt(e);default:return XLt(e,t)}};let fDe=cDe;function dDe(e){fDe=e}function JLt(){dDe(cDe)}function zv(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=jY(e))==null?void 0:a.title;if(!st(e))return i??e.title;const s=e,o=r?zY(s,t):void 0;return n?Fi(i,s.title,o):i??s.title??o}function jY(e){if(Yb(e)&&e.axis)return e.axis;if(uDe(e)&&e.legend)return e.legend;if(LY(e)&&e.header)return e.header}function zY(e,t){return fDe(e,t)}function uR(e){if(lDe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=jY(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function ZLt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(BY(e)&&Ue(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!dg(n)&&!Dh(n))return"quantitative";if(Jy(e)&&((s=e.scale)!=null&&s.type))switch(W9[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function jf(e){if(st(e))return e;if(EM(e))return e.condition}function os(e){if(ln(e))return e;if(X2(e))return e.condition}function hDe(e,t,n,r={}){if(yt(e)||Wn(e)||ig(e)){const i=yt(e)?"string":Wn(e)?"number":"boolean";return it(e6t(t,i,e)),{value:e}}return ln(e)?lR(e,t,n,r):X2(e)?{...e,condition:lR(e.condition,t,n,r)}:e}function lR(e,t,n,r){if(lDe(e)){const{format:i,formatType:s,...o}=e;if(ay(s)&&!n.customFormatTypes)return it(Zoe(t)),lR(o,t,n,r)}else{const i=Yb(e)?"axis":uDe(e)?"legend":LY(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(ay(o)&&!n.customFormatTypes)return it(Zoe(t)),lR({...e,[i]:a},t,n,r)}}return st(e)?UY(e,t,r):e4t(e)}function e4t(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Wn(n)?"quantitative":yt(n)?"nominal":Ky(n)?"temporal":void 0,{...e,type:t}}function UY(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!mY(r)&&!dg(r)&&!Dh(r)&&(it(n6t(r)),delete a.aggregate),i&&(a.timeUnit=Ns(i)),o&&(a.field=`${o}`),Fr(s)&&(a.bin=wM(s,t)),Gs(s)&&!Li(t)&&it(O6t(t)),ha(a)){const{type:u}=a,l=sLt(u);u!==l&&(a.type=l),u!=="quantitative"&&dAe(r)&&(it(t6t(u,r)),a.type="quantitative")}else if(!oAe(t)){const u=ZLt(a,t);a.type=u}if(ha(a)){const{compatible:u,warning:l}=t4t(a,t)||{};u===!1&&it(l)}if(BY(a)&&yt(a.sort)){const{sort:u}=a;if(sae(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&sae(l))return{...a,sort:{encoding:l,order:"descending"}}}if(LY(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function wM(e,t){return ig(e)?{maxbins:Hoe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Hoe(t)}:e}const A1={compatible:!0};function t4t(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case nh:case rh:case iM:return aR(e)?A1:{compatible:!1,warning:o6t(t)};case ii:case $s:case ag:case J_:case ru:case od:case ad:case V2:case H2:case sM:case iy:case oM:case aM:case Wy:case $l:case Bc:case uM:return A1;case zc:case Al:case jc:case Uc:return n!==oy?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:A1;case Gh:case ug:case lg:case cg:case Wh:case qh:case Hh:case Lc:case sd:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:A1;case iu:case fg:return!aR(e)&&!YLt(e)?{compatible:!1,warning:a6t(t)}:A1;case Vb:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:A1}}function Kb(e){const{formatType:t}=uR(e);return t==="time"||!t&&n4t(e)}function n4t(e){return e&&(e.type==="temporal"||st(e)&&!!e.timeUnit)}function xM(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ns(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return W2(e)?a=e.expr:Pt(e)?a=e.signal:Ky(e)?(o=!0,a=sy(e)):(yt(e)||Wn(e))&&o&&(a=`datetime(${Er(e)})`,W6t(s)&&(Wn(e)&&e<1e4||yt(e)&&isNaN(Date.parse(e)))&&(a=sy({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Er(e)}function pDe(e,t){const{type:n}=e;return t.map(r=>{const i=st(e)&&!Xy(e.timeUnit)?e.timeUnit:void 0,s=xM(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function Q2(e,t){return Fr(e.bin)?Yh(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const uae={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function J2(e){return e==null?void 0:e.condition}const mDe=["domain","grid","labels","ticks","title"],r4t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},gDe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},i4t={...gDe,style:1,labelExpr:1,encoding:1};function lae(e){return!!i4t[e]}const s4t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},yDe=et(s4t);function Kh(e){return"mark"in e}class SM{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Kh(t)?zLt(t.mark)===this.name:!1}}function x0(e,t){const n=e&&e[t];return n?Ue(n)?ny(n,r=>!!r.field):st(n)||EM(n):!1}function vDe(e,t){const n=e&&e[t];return n?Ue(n)?ny(n,r=>!!r.field):st(n)||cd(n)||X2(n):!1}function bDe(e,t){if(Li(t)){const n=e[t];if((st(n)||cd(n))&&(jAe(n.type)||st(n)&&n.timeUnit)){const r=fY(t);return vDe(e,r)}}return!1}function VY(e){return ny(oFt,t=>{if(x0(e,t)){const n=e[t];if(Ue(n))return ny(n,r=>!!r.aggregate);{const r=jf(n);return r&&!!r.aggregate}}return!1})}function _De(e,t){const n=[],r=[],i=[],s=[],o={};return HY(e,(a,u)=>{if(st(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=jY(a),m=p==null?void 0:p.title;let g=ft(a,{forAs:!0});const y={...m?[]:{title:zv(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(dg(c)?(v="argmax",g=ft({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Dh(c)?(v="argmin",g=ft({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),ha(a)&&Fr(f)){if(r.push({bin:f,field:l,as:g}),n.push(ft(a,{binSuffix:"end"})),Q2(a,u)&&n.push(ft(a,{binSuffix:"range"})),Li(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",oAe(u)||(y.type=oy)}else if(d&&!Xy(d)){i.push({timeUnit:d,field:l,as:g});const v=ha(a)&&a.type!==qb&&"time";v&&(u===V2||u===iy?y.formatType=v:gFt(u)?y.legend={formatType:v,...y.legend}:Li(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function o4t(e,t,n){const r=vFt(t,n);if(r){if(r==="binned"){const i=e[t===Lc?ii:$s];return!!(st(i)&&st(e[t])&&Gs(i.bin))}}else return!1;return!0}function a4t(e,t,n,r){const i={};for(const s of et(e))sAe(s)||it(s6t(s));for(let s of dFt){if(!e[s])continue;const o=e[s];if(q2(s)){const a=fFt(s),u=i[a];if(st(u)&&iLt(u.type)&&st(o)&&!u.timeUnit){it(ZFt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(it(JFt),s=$l),!o4t(e,s,t)){it(dM(s,t));continue}if(s===Wh&&t==="line"){const a=jf(e[s]);if(a!=null&&a.aggregate){it(i6t);continue}}if(s===ru&&(n?"fill"in e:"stroke"in e)){it(SAe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===H2||s===Vb&&!Ue(o)&&!Nc(o)||s===iy&&Ue(o)){if(o){if(s===Vb){const a=e[s];if(aDe(a)){i[s]=a;continue}}i[s]=gt(o).reduce((a,u)=>(st(u)?a.push(UY(u,s)):it(q9(u,s)),a),[])}}else{if(s===iy&&o===null)i[s]=null;else if(!st(o)&&!cd(o)&&!Nc(o)&&!_M(o)&&!Pt(o)){it(q9(o,s));continue}i[s]=hDe(o,s,r)}}return i}function TM(e,t){const n={};for(const r of et(e)){const i=hDe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function u4t(e){const t=[];for(const n of et(e))if(x0(e,n)){const r=e[n],i=gt(r);for(const s of i)st(s)?t.push(s):EM(s)&&t.push(s.condition)}return t}function HY(e,t,n){if(e)for(const r of et(e)){const i=e[r];if(Ue(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function l4t(e,t,n,r){return e?et(e).reduce((i,s)=>{const o=e[s];return Ue(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function EDe(e,t){return et(t).reduce((n,r)=>{switch(r){case ii:case $s:case oM:case uM:case aM:case Lc:case sd:case ag:case J_:case $l:case qh:case Bc:case Hh:case jc:case zc:case Uc:case Al:case V2:case iu:case Wy:case iy:return n;case Vb:if(e==="line"||e==="trail")return n;case H2:case sM:{const i=t[r];if(Ue(i)||st(i))for(const s of gt(i))s.aggregate||n.push(ft(s,{}));return n}case Wh:if(e==="trail")return n;case ru:case od:case ad:case Gh:case ug:case lg:case fg:case cg:{const i=jf(t[r]);return i&&!i.aggregate&&n.push(ft(i,{})),n}}},[])}function c4t(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ue(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ue(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function K9(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${qY(t)}`:"";return{field:o+t.field,type:t.type,title:Pt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=u4t(n).map(WLt);return{tooltip:[...i,...gf(s,On)]}}function qY(e){const{title:t,field:n}=e;return Fi(t,n)}function WY(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=qY(n);return wDe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...yt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function wDe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Bf(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...ig(e[t])?{}:e[t]}}]:[]}function xDe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:UA(s,n),continuousAxisChannelDef2:UA(o,n),continuousAxisChannelDefError:UA(a,n),continuousAxisChannelDefError2:UA(u,n),continuousAxis:i}}function UA(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&it(P6t(n,t)),r}else return e}function SDe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Bf(n)&&n.orient)return n.orient;if(jp(i)){if(jp(s)){const o=st(i)&&i.aggregate,a=st(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Kb(s)&&!Kb(i)?"horizontal":"vertical"}return"horizontal"}else{if(jp(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const cR="boxplot",f4t=["box","median","outliers","rule","ticks"],d4t=new SM(cR,CDe);function TDe(e){return Wn(e)?"tukey":e}function CDe(e,{config:t}){e={...e,encoding:TM(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Bf(n)?n:{type:n};i&&it(wAe("boxplot"));const u=a.extent??t.boxplot.extent,l=ir("size",a,t),c=a.invalid,f=TDe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:x}=h4t(e,u,t),S=Q_(m.field),{color:C,size:A,...D}=b,I=Be=>WY(a,g,m,Be,t.boxplot),O=I(D),R=I(b),M=(vt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=I({...D,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:M}}}}),P=K9([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),j={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},z=f==="min-max"?P:K9([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...O({partName:"ticks",mark:j,positionPrefix:"lower_whisker",extraEncoding:z}),...O({partName:"ticks",mark:j,positionPrefix:"upper_whisker",extraEncoding:z})],$=[...f!=="tukey"?V:[],...R({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...F({partName:"median",mark:{type:"tick",invalid:c,...vt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:P})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:$};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,B=`(${W} - ${U})`,q=`${U} - ${u} * ${B}`,Y=`${W} + ${u} * ${B}`,re=`datum["${m.field}"]`,pe={joinaggregate:ADe(m.field),groupby:y},_e={transform:[{filter:`(${q} <= ${re}) && (${re} <= ${Y})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:V},{tooltip:de,...ye}=D,{scale:Ce,axis:ve}=m,qe=qY(m),He=Ka(ve,["title"]),ht=wDe(a,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${q}) || (${re} > ${Y})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...qe!==void 0?{title:qe}:{},...Ce!==void 0?{scale:Ce}:{},..._r(He)?{}:{axis:He}},...ye,...C?{color:C}:{},...x?{tooltip:x}:{}}})[0];let rt;const Pe=[...d,...h,pe];return ht?rt={transform:Pe,layer:[ht,_e]}:(rt=_e,rt.transform.unshift(...Pe)),{...o,layer:[rt,{transform:p,layer:$}]}}function ADe(e){const t=Q_(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function h4t(e,t,n){const r=SDe(e,cR),{continuousAxisChannelDef:i,continuousAxis:s}=xDe(e,r,cR),o=i.field,a=Q_(o),u=TDe(t),l=[...ADe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=c4t(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=_De(p,n),E=r==="vertical"?"horizontal":"vertical",_=r,x=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:x,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:h}}const GY="errorbar",p4t=["ticks","rule"],m4t=new SM(GY,DDe);function DDe(e,{config:t}){e={...e,encoding:TM(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=IDe(e,GY,t);delete s.size;const c=WY(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function g4t(e,t){const{encoding:n}=e;if(y4t(n))return{orient:SDe(e,t),inputType:"raw"};const r=v4t(n),i=b4t(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ln(a)&&ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(ln(a)){if(jp(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ln(u)){if(jp(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ln(u)&&!ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(ln(c)&&!ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(ln(a)&&ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ln(a)){if(jp(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ln(l)){if(jp(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function y4t(e){return(ln(e.x)||ln(e.y))&&!ln(e.x2)&&!ln(e.y2)&&!ln(e.xError)&&!ln(e.xError2)&&!ln(e.yError)&&!ln(e.yError2)}function v4t(e){return ln(e.x2)||ln(e.y2)}function b4t(e){return ln(e.xError)||ln(e.xError2)||ln(e.yError)||ln(e.yError2)}function IDe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Bf(r)?r:{type:r};s&&it(wAe(t));const{orient:l,inputType:c}=g4t(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=xDe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=_4t(u,f,d,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:_,[m==="x"?"xError":"yError"]:x,[m==="x"?"xError2":"yError2"]:S,...C}=i,{bins:A,timeUnits:D,aggregate:I,groupby:O,encoding:R}=_De(C,n),M=[...I,...g],F=c!=="raw"?[]:O,P=K9(v,f,R,b);return{transform:[...a.transform??[],...A,...D,...M.length===0?[]:[{aggregate:M,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:R,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:P}}function _4t(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&it(R6t(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:U2(h)},{fieldPrefix:"upper_",titlePrefix:cae(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:cae(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:zv({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:zv({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:zv({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&it(k6t(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:ry(ry(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function cae(e,t,n){return`${U2(e)} ${n} ${t}`}const YY="errorband",E4t=["band","borders"],w4t=new SM(YY,NDe);function NDe(e,{config:t}){e={...e,encoding:TM(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=IDe(e,YY,t),l=o,c=WY(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?it(tae("interpolate")):l.tension&&it(tae("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const kDe={};function KY(e,t,n){const r=new SM(e,t);kDe[e]={normalizer:r,parts:n}}function x4t(){return et(kDe)}KY(cR,CDe,f4t);KY(GY,DDe,p4t);KY(YY,NDe,E4t);const S4t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],RDe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},PDe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},T4t=et(RDe),C4t=et(PDe),A4t={header:1,headerRow:1,headerColumn:1,headerFacet:1},ODe=et(A4t),MDe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],D4t={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},I4t={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},kc="_vgsid_",N4t={point:{on:"click",fields:[kc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function XY(e){return e==="legend"||!!(e!=null&&e.legend)}function J6(e){return XY(e)&&vt(e)}function QY(e){return!!(e!=null&&e.select)}function $De(e){const t=[];for(const n of e||[]){if(QY(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function k4t(e){return CM(e)||ZY(e)||JY(e)}function JY(e){return"concat"in e}function CM(e){return"vconcat"in e}function ZY(e){return"hconcat"in e}function FDe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function zf(e){return vt(e)&&e.step!==void 0}function fae(e){return e.view||e.width||e.height}const dae=20,R4t={align:1,bounds:1,center:1,columns:1,spacing:1},P4t=et(R4t);function O4t(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(bM(e)&&!K2(e.facet)||JY(e))&&(i.columns=o),CM(e)&&(i.columns=1);for(const a of P4t)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Wn(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function X9(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function fR(e,t){const n=dR(e,t);return zf(n)?n.step:LDe}function dR(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Fi(n,{step:e.step})}const LDe=20,M4t={continuousWidth:200,continuousHeight:200,step:LDe},$4t={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:M4t,mark:MLt,arc:{},area:{},bar:LLt,circle:{},geoshape:{},image:{},line:{},point:{},rect:BLt,rule:{color:"black"},square:{},text:{color:"black"},tick:jLt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:cLt,projection:{},legend:D4t,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:N4t,style:{},title:{},facet:{spacing:dae},concat:{spacing:dae},normalizedNumberFormat:".0%"},wd=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],hae={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},pae={blue:wd[0],orange:wd[1],red:wd[2],teal:wd[3],green:wd[4],yellow:wd[5],purple:wd[6],pink:wd[7],brown:wd[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function F4t(e={}){return{signals:[{name:"color",value:vt(e)?{...pae,...e}:pae}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function L4t(e){return{signals:[{name:"fontSize",value:vt(e)?{...hae,...e}:hae}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function B4t(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function BDe(e){const t=et(e||{}),n={};for(const r of t){const i=e[r];n[r]=J2(i)?mAe(i):yu(i)}return n}function j4t(e){const t=et(e),n={};for(const r of t)n[r]=BDe(e[r]);return n}const z4t=[...tDe,...yDe,...ODe,"background","padding","legend","lineBreak","scale","style","title","view"];function jDe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=j_({},tn($4t),n?B4t(n):{},t?F4t(t):{},r?L4t(r):{},s||{});i&&z_(o,"selection",i,!0);const a=Ka(o,z4t);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=yu(o[u]));for(const u of tDe)o[u]&&(a[u]=Pa(o[u]));for(const u of yDe)o[u]&&(a[u]=BDe(o[u]));for(const u of ODe)o[u]&&(a[u]=Pa(o[u]));return o.legend&&(a.legend=Pa(o.legend)),o.scale&&(a.scale=Pa(o.scale)),o.style&&(a.style=j4t(o.style)),o.title&&(a.title=Pa(o.title)),o.view&&(a.view=Pa(o.view)),a}const U4t=new Set(["view",...ILt]),V4t=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],H4t={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...OLt};function q4t(e){e=tn(e);for(const t of V4t)delete e[t];if(e.axis)for(const t in e.axis)J2(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of S4t)delete e.legend[t];if(e.mark){for(const t of iae)delete e.mark[t];e.mark.tooltip&&vt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat($De(e.params)),delete e.params);for(const t of U4t){for(const r of iae)delete e[t][r];const n=H4t[t];if(n)for(const r of n)delete e[t][r];G4t(e,t)}for(const t of x4t())delete e[t];W4t(e);for(const t in e)vt(e[t])&&_r(e[t])&&delete e[t];return _r(e)?void 0:e}function W4t(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=pAe(e.title);_r(t)||(e.style["group-title"]={...e.style["group-title"],...t}),_r(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),_r(r)?delete e.title:e.title=r}function G4t(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};_r(s)||(e.style[n??t]=s),delete e[t]}function AM(e){return"layer"in e}function Y4t(e){return"repeat"in e}function K4t(e){return!Ue(e.repeat)&&e.repeat.layer}class eK{map(t,n){return bM(t)?this.mapFacet(t,n):Y4t(t)?this.mapRepeat(t,n):ZY(t)?this.mapHConcat(t,n):CM(t)?this.mapVConcat(t,n):JY(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(AM(t))return this.mapLayer(t,n);if(Kh(t))return this.mapUnit(t,n);throw new Error(gY(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const X4t={zero:1,center:1,normalize:1};function Q4t(e){return e in X4t}const J4t=new Set([JAe,mM,pM,sR,yM,$Y,FY,gM,ZAe,MY]),Z4t=new Set([mM,pM,JAe]);function D1(e){return st(e)&&Gb(e)==="quantitative"&&!e.bin}function mae(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(st(o)&&st(a))if(D1(o)&&D1(a)){if(o.stack)return t;if(a.stack)return i;const u=st(o)&&!!o.aggregate,l=st(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(D1(o))return t;if(D1(a))return i}else{if(D1(o))return s&&n==="vertical"?void 0:t;if(D1(a))return s&&n==="horizontal"?void 0:i}}function e5t(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function zDe(e,t){var m,g;const n=Bf(e)?e:{type:e},r=n.type;if(!J4t.has(r))return null;const i=mae(t,"x",n)||mae(t,"theta",n);if(!i)return null;const s=t[i],o=st(s)?ft(s,{}):void 0,a=e5t(i),u=[],l=new Set;if(t[a]){const y=t[a],v=st(y)?ft(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=st(f)?ft(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=hFt.reduce((y,v)=>{if(v!=="tooltip"&&x0(t,v)){const b=t[v];for(const E of gt(b)){const _=jf(E);if(_.aggregate)continue;const x=ft(_,{});(!x||!l.has(x))&&y.push({channel:v,fieldDef:_})}}return y},[]);let p;return s.stack!==void 0?ig(s.stack)?p=s.stack?"zero":null:p=s.stack:Z4t.has(r)&&(p="zero"),!p||!Q4t(p)||VY(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Xa.LINEAR&&s!=null&&s.stack&&it(D6t(s.scale.type)),ln(t[ud(i)])?(s.stack!==void 0&&it(A6t(i)),null):(st(s)&&s.aggregate&&!TFt.has(s.aggregate)&&it(I6t(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Qy(r),stackBy:h,offset:p}))}function UDe(e,t,n){const r=Pa(e),i=ir("orient",r,n);if(r.orient=i5t(r.type,t,i),i!==void 0&&i!==r.orient&&it(f6t(r.orient,i)),r.type==="bar"&&r.orient){const u=ir("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:FLt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=ir("opacity",r,n),o=ir("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=n5t(r.type,t)),ir("cursor",r,n)===void 0&&(r.cursor=t5t(r,t,n)),r}function t5t(e,t,n){return t.href||e.href||ir("href",e,n)?"pointer":e.cursor}function n5t(e,t){if(Mn([yM,MY,$Y,FY],e)&&!VY(t))return .7}function r5t(e,t,{graticule:n}){if(n)return!1;const r=Ih("filled",e,t),i=e.type;return Fi(r,i!==yM&&i!==gM&&i!==sR)}function i5t(e,t,n){switch(e){case yM:case $Y:case FY:case ZAe:case ALt:case CLt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case mM:if(st(r)&&(Gs(r.bin)||st(i)&&i.aggregate&&!r.aggregate))return"vertical";if(st(i)&&(Gs(i.bin)||st(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(st(r)&&r.type===oy&&!Fr(r.bin)||oR(r))&&st(i)&&Gs(i.bin)?"horizontal":"vertical";if(!o)return(st(i)&&i.type===oy&&!Fr(i.bin)||oR(i))&&st(r)&&Gs(r.bin)?"vertical":"horizontal"}case sR:if(s&&!(st(r)&&Gs(r.bin))&&o&&!(st(i)&&Gs(i.bin)))return;case pM:if(o)return st(i)&&Gs(i.bin)?"horizontal":"vertical";if(s)return st(r)&&Gs(r.bin)?"vertical":"horizontal";if(e===sR){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case gM:case MY:{const a=aae(r),u=aae(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ha(r)&&r.type===qb,c=ha(i)&&i.type===qb;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function s5t(e){const{point:t,line:n,...r}=e;return et(r).length>1?r:r.type}function o5t(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ka(e[t],["point","line"])});return e}function Z6(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?vt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?vt(t.point)?t.point:{}:void 0}function gae(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class a5t{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Kh(t)){const{mark:r,encoding:i}=t,s=Bf(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!Z6(s,n[s.type],i);case"area":return!!Z6(s,n[s.type],i)||!!gae(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=TM(l,i),d=Bf(a)?a:{type:a},h=Z6(d,i[d.type],f),p=d.type==="area"&&gae(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:s5t({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Ka(f,["shape"])}],g=zDe(UDe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Ka(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...zb(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...zb(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:o5t(i)})}}function u5t(e,t){return t?K2(e)?HDe(e,t):VDe(e,t):e}function eL(e,t){return t?HDe(e,t):e}function Q9(e,t,n){const r=t[e];if(HLt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};it(qFt(r.repeat));return}return t}function VDe(e,t){if(e=Q9("field",e,t),e!==void 0){if(e===null)return null;if(BY(e)&&Cf(e.sort)){const n=Q9("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function yae(e,t){if(st(e))return VDe(e,t);{const n=Q9("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function vae(e,t){if(ln(e)){const n=yae(e,t);if(n)return n;if(_M(e))return{condition:e.condition}}else{if(X2(e)){const n=yae(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function HDe(e,t){const n={};for(const r in e)if(Ut(e,r)){const i=e[r];if(Ue(i))n[r]=i.map(s=>vae(s,t)).filter(s=>s);else{const s=vae(i,t);s!==void 0&&(n[r]=s)}}return n}class l5t{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Kh(t)){const{encoding:n,mark:r}=t;if(r==="line"||Bf(r)&&r.type==="line")for(const i of cFt){const s=Gy(i),o=n[s];if(n[i]&&(st(o)&&!Gs(o.bin)||cd(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return it(c6t(!!i.x2,!!i.y2)),r({...t,mark:vt(s)?{...s,type:"rule"}:"rule"},n)}}class c5t extends eK{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[d4t,m4t,w4t,new a5t,new l5t]}map(t,n){if(Kh(t)){const r=x0(t.encoding,nh),i=x0(t.encoding,rh),s=x0(t.encoding,iM);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=eL(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return K4t(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${ri(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ue(r)&&t.columns&&(t=Ka(t,["columns"]),it(Qoe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ue(r)&&r.row||[u?u.row:null],f=!Ue(r)&&r.column||[u?u.column:null],d=Ue(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ue(r)?`${ri(p)}`:(r.row?`row_${ri(m)}`:"")+(r.column?`column_${ri(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Ka(b,["data"]))}const h=Ue(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return K2(r)&&t.columns&&(t=Ka(t,["columns"]),it(Qoe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=_ae({parentProjection:o,projection:i}),l=bae({parentEncoding:s,encoding:eL(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=eL(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&it(u6t([...r?[nh]:[],...i?[rh]:[]]));const o={},a={};for(const u of[nh,rh]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:u5t(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:bae({parentEncoding:n,encoding:s,layer:!0}),parentProjection:_ae({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function bae({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...et(e),...et(t)]);for(const s of i){const o=t[s],a=e[s];if(ln(o)){const u={...a,...o};r[s]=u}else X2(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Nc(a)||Pt(a)||ln(a)||Ue(a))&&(r[s]=a)}}else r=t;return!r||_r(r)?void 0:r}function _ae(e){const{parentProjection:t,projection:n}=e;return t&&n&&it(QFt({parentProjection:t,projection:n})),n??t}function tK(e){return"filter"in e}function f5t(e){return(e==null?void 0:e.stop)!==void 0}function qDe(e){return"lookup"in e}function d5t(e){return"data"in e}function h5t(e){return"param"in e}function p5t(e){return"pivot"in e}function m5t(e){return"density"in e}function g5t(e){return"quantile"in e}function y5t(e){return"regression"in e}function v5t(e){return"loess"in e}function b5t(e){return"sample"in e}function _5t(e){return"window"in e}function E5t(e){return"joinaggregate"in e}function w5t(e){return"flatten"in e}function x5t(e){return"calculate"in e}function WDe(e){return"bin"in e}function S5t(e){return"impute"in e}function T5t(e){return"timeUnit"in e}function C5t(e){return"aggregate"in e}function A5t(e){return"stack"in e}function D5t(e){return"fold"in e}function I5t(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function N5t(e){return e.map(t=>tK(t)?{filter:Bv(t.filter,rLt)}:t)}class k5t extends eK{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Eae(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Eae(t,n),t.encoding){const r={};for(const[i,s]of Rm(t.encoding))r[i]=GDe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Rm(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of ro(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Eae(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(tK(s))return{filter:J9(s,t)};if(WDe(s)&&Yy(s.bin))return{...s,bin:YDe(s.bin)};if(qDe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function GDe(e,t){var r,i;const n=tn(e);if(st(n)&&Yy(n.bin)&&(n.bin=YDe(n.bin)),Jy(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(_M(n))if(Ue(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:J9(s,t)}});else{const{selection:s,param:o,test:a,...u}=GDe(n.condition,t);n.condition=o?n.condition:{...u,test:J9(n.condition,t)}}return n}function YDe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function J9(e,t){const n=r=>Bv(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Bv(e.test||e.filter,r=>r.selection?n(r.selection):r)}class Z9 extends eK{map(t,n){const r=n.selections??[];if(t.params&&!Kh(t)){const i=[];for(const s of t.params)QY(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(yt(a)&&(a===t.name||i.includes(a))||Ue(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Z9.prototype[e];Z9.prototype[e]=function(n,r){return t.call(this,n,R5t(n,r))}}function R5t(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function KDe(e,t){t===void 0&&(t=jDe(e.config));const n=$5t(e,t),{width:r,height:i}=e,s=F5t(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const P5t=new c5t,O5t=new k5t,M5t=new Z9;function $5t(e,t={}){const n={config:t};return M5t.map(P5t.map(O5t.map(e,n),n),n)}function wae(e){return yt(e)?{type:e}:e??{}}function F5t(e,t,n){let{width:r,height:i}=t;const s=Kh(e)||AM(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(it(Goe("width")),r=void 0),i=="container"&&(it(Goe("height")),i=void 0));const a={type:"pad",...o,...n?wae(n.autosize):{},...wae(e.autosize)};if(a.type==="fit"&&!s&&(it(OFt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&it(Yoe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&it(Yoe("height")),!Tu(a,{type:"pad"}))return a}function L5t(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function B5t(e){return e?`fit-${lM(e)}`:"fit"}const j5t=["background","padding"];function xae(e,t){const n={};for(const r of j5t)e&&e[r]!==void 0&&(n[r]=yu(e[r]));return t&&(n.params=e.params),n}class Xh{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Xh(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Fi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of et(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function ef(e){return{explicit:!0,value:e}}function du(e){return{explicit:!1,value:e}}function XDe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:DM(t,n,r,i)}}function DM(e,t,n,r){return e.explicit&&t.explicit&&it(_6t(n,r,e.value,t.value)),e}function Mm(e,t,n,r,i=DM){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Tu(e.value,t.value)?e:i(e,t,n,r)}class z5t extends Xh{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Xb(e){return"url"in e}function hT(e){return"values"in e}function QDe(e){return"name"in e&&!Xb(e)&&!hT(e)&&!um(e)}function um(e){return e&&(JDe(e)||ZDe(e)||nK(e))}function JDe(e){return"sequence"in e}function ZDe(e){return"sphere"in e}function nK(e){return"graticule"in e}var ei;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ei||(ei={}));function eIe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Cl(i.field),i}function ly(e,t=!0,n=jo){if(Ue(e)){const r=e.map(i=>ly(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Ky(e))return n(t?sy(e):q6t(e));return t?n(Er(e)):e}function U5t(e,t){for(const n of ro(e.component.selection??{})){const r=n.name;let i=`${r}${Fm}, ${n.resolve==="global"?"true":`{unit: ${S0(e)}}`}`;for(const s of RM)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+_8t,on:[{events:{signal:n.name+Fm},update:`modify(${lt(n.name+cy)}, ${i})`}]})}return rK(t)}function V5t(e,t){if(e.component.selection&&et(e.component.selection).length){const n=lt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:og("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return rK(t)}function H5t(e,t){let n=!1;for(const r of ro(e.component.selection??{})){const i=r.name,s=lt(i+cy);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${vIe}(${s}, ${lt(a)}${u}`})}n=!0;for(const a of RM)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),rK(t)}function q5t(e,t){const n=[...t],r=S0(e,{escape:!1});for(const i of ro(e.component.selection??{})){const s={name:i.name+cy};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:kc}}]),i.init){const a=i.project.items.map(eIe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[kc]:ly(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:ly(u,!1)}))}n.filter(a=>a.name===i.name+cy).length||n.push(s)}return n}function tIe(e,t){for(const n of ro(e.component.selection??{}))for(const r of RM)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function W5t(e,t){for(const n of e.children)wi(n)&&(t=tIe(n,t));return t}function G5t(e,t,n,r){const i=xIe(e,t.param,t);return{signal:zu(n.get("type"))&&Ue(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function rK(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class mr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){it(YFt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Qa extends mr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${QCe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function tL(e){return e.as!==void 0}function Sae(e){return`${e}_end`}class Af extends mr{clone(){return new Af(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Xy(u)){if(wi(n)){const{mark:c,markDef:f,config:d}=n,h=Om({fieldDef:s,markDef:f,config:d});(dT(c)||h)&&(l={timeUnit:Ns(u),field:a})}}else l={as:ft(s,{forAs:!0}),field:a,timeUnit:u};if(wi(n)){const{mark:c,markDef:f,config:d}=n,h=Om({fieldDef:s,markDef:f,config:d});dT(c)&&Li(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[On(l)]=l)}return i},{});return _r(r)?null:new Af(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ns(r),o={...i,timeUnit:s};return new Af(t,{[On(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Rm(this.timeUnits)){const s=tL(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(ro(this.timeUnits).map(t=>tL(t)?t.as:Sae(t.field)))}dependentFields(){return new Set(ro(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${On(this.timeUnits)}`}assemble(){const t=[];for(const n of ro(this.timeUnits)){const{rectBandPosition:r}=n,i=Ns(n.timeUnit);if(tL(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Cl(s),type:"timeunit",...a?{units:hM(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Tae(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=nIe({timeUnit:i,field:o}),u=Sae(o);t.push({type:"formula",expr:a,as:u}),t.push(...Tae([o,u],r,i))}}return t}}const IM="offsetted_rect_start",NM="offsetted_rect_end";function nIe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=PAe(r),{part:o,step:a}=FAe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Tae([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Cae([nIe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${IM}`},{type:"formula",expr:Cae([i,s],n+.5),as:`${e}_${NM}`}]}return[]}function Cae([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Z2="_tuple_fields";class Y5t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const K5t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Y5t),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=ri(`${r}_${g}`);for(let v=1;a.has(y);v++)y=ri(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?gt(n.value):null;let{fields:d,encodings:h}=vt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(vt(p))for(const m of et(p))lFt(m)?(h||(h=[])).push(m):l==="interval"?(it(HFt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){it(MFt(p,m.aggregate));continue}else if(!g){it(Xoe(p));continue}if(m.timeUnit&&!Xy(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[On(y)]=y}if(!s[g]){const y=l==="interval"&&Yh(p)&&zu(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===kc,rAe(p)?(v.geoChannel=p,v.channel=nAe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else it(Xoe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===kc}f&&(t.init=f.map(p=>i.items.map(m=>vt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),_r(o)||(i.timeUnit=new Af(null,o))},signals:(e,t,n)=>{const r=t.name+Z2;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(eIe)})}},ih={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Yh(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&it(BFt),!s||!zu(o)){it(LFt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Aae(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(vIe)>=0)i.update=`{${r.map(o=>`${lt(Cl(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${lt(Cl(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Aae(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function eB(e,t){return`domain(${lt(e.scaleName(t))})`}function Aae(e){return e.parent&&iE(e.parent)&&!e.parent.parent}const Uv="_brush",rIe="_scale_trigger",tw="geo_interval_init_tick",iIe="_init",X5t="_center",Q5t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...vt(n.select)?n.select:{}};i.fields=[kc],i.encodings||(i.encodings=n.value?et(n.value):[zc,jc]),n.select={type:"interval",...i}}if(t.translate&&!ih.defined(t)){const i=`!event.item || event.item.mark.name !== ${lt(t.name+Uv)}`;for(const s of t.events){if(!s.between){it(`${s} is not an ordered event stream for interval selections.`);continue}const o=gt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Fm,s=ro(t.project.hasChannel).filter(a=>a.channel===ii||a.channel===$s),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(J5t(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=lt(e.projectionName()),u=e.projectionName()+X5t,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=_=>e.getSizeSignalRef(_).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+iIe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(x=>x.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${lt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${S0(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,E=s.map(_=>_.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:tw}]:[]],update:b}]})}else{if(!ih.defined(t)){const l=r+rIe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=lt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=zu(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${S0(e)}, fields: ${r+Z2}, values`;return n.concat({name:i,...o?{init:`{${u}: ${ly(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===tw).length||n.unshift({name:tw,value:null,on:[{events:"timer{1}",update:`${tw} === null ? {} : ${tw}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${lt(t.name+cy)})`;if(ih.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of et(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${S0(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=et(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Uv}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Uv,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function J5t(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=lt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===ii?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=ih.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:ly(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+rIe},update:zu(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:ly(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===ii?0:1,h=t.name+iIe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Z5t={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+Z2,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=ro(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Uv):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${S0(e)}, `;if(t.project.hasSelectionId)l+=`${kc}: ${o}[${lt(kc)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${lt(e.vgField(d.channel,{}))}], ${o}[${lt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${lt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Fm,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function eE(e,t,n,r){const i=_M(t)&&t.condition,s=r(t);if(i){const a=gt(i).map(u=>{const l=r(u);if(VLt(u)){const{param:c,empty:f}=u;return{test:wIe(e,{param:c,empty:f}),...l}}else return{test:mR(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function iK(e,t="text"){const n=e.encoding[t];return eE(e,n,t,r=>kM(r,e.config))}function kM(e,t,n="datum"){if(e){if(Nc(e))return Vr(e.value);if(ln(e)){const{format:r,formatType:i}=uR(e);return OY({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function sIe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ue(o))return{tooltip:Dae({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return eE(e,o,"tooltip",u=>{const l=kM(u,i,a);if(l)return l;if(u===null)return;let c=ir("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),yt(c))return{value:c};if(vt(c))return Pt(c)?c:c.content==="encoding"?Dae(n,s,i,t):{signal:a}})}}function oIe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Gy(f),h=ha(c)?c:{...c,type:e[d].type},p=h.title||zY(h,i),m=gt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Li(f)){const y=f==="x"?"x2":"y2",v=jf(e[y]);if(Gs(h.bin)&&v){const b=ft(h,{expr:o}),E=ft(v,{expr:o}),{format:_,formatType:x}=uR(h);g=Y2(b,E,_,x,i),s[y]=!0}}if((Li(f)||f===$l||f===Bc)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=uR(h);g=OY({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=kM(h,i,o).signal),a.push({channel:f,key:m,value:g})}HY(e,(c,f)=>{st(c)?u(c,f):EM(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Dae(e,t,n,{reactiveGeom:r}={}){const i=oIe(e,t,n,{reactiveGeom:r}),s=Rm(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function e8t(e){const{markDef:t,config:n}=e,r=ir("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...t8t(e),...n8t(e)}}function t8t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=ir("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in kFt?{}:{ariaRoleDescription:{value:t}}}function n8t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return eE(e,s,"description",u=>kM(u,e.config));const o=ir("description",n,r);if(o!=null)return{description:Vr(o)};if(r.aria===!1)return{};const a=oIe(t,i,r);if(!_r(a))return{description:{signal:Rm(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function xs(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=ir(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Vr(u)));const l=i[e];return eE(t,l,o??e,c=>PY({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function aIe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??ir("filled",n,i),a=Mn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=ir(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=ir(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Vr(u)}:{},...l?{stroke:Vr(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&it(SAe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...xs("color",e,{vgChannel:c,defaultValue:o?u:l}),...xs("fill",e,{defaultValue:r.fill?u:void 0}),...xs("stroke",e,{defaultValue:r.stroke?l:void 0})}}function r8t(e){const{encoding:t,mark:n}=e,r=t.order;return!Qy(n)&&Nc(r)?eE(e,r,"zindex",i=>Vr(i.value)):{}}function Qb({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:PY({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Vr(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function No(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[ud(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Qb({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=sK({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Li(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:i8t({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function i8t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(ln(n)&&i&&t===i.fieldChannel){if(st(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return iR({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return w0(n,r,{suffix:"end"},{offset:s})}return kY(e)}function sK({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Gy(n),u=Pm(n),l=ir(n,s,o,{vgChannel:u});if(l!==void 0)return zx(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Mn([Xa.LOG,Xa.TIME,Xa.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[su(n)],mult:.5}}}}const s8t={left:"x",center:"xc",right:"x2"},o8t={top:"y",middle:"yc",bottom:"y2"};function uIe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Pm(e);const i=e==="x"?"align":"baseline",s=ir(i,t,n);let o;return Pt(s)?(it(l6t(i)),o=void 0):o=s,e==="x"?s8t[o||(r==="top"?"left":"center")]:o8t[o||r]}function hR(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?lIe(e,t,{defaultPos:n,defaultPos2:r}):No(e,t,{defaultPos:n})}function lIe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=ud(e),a=su(e),u=a8t(t,r,o),l=u[a]?uIe(e,i,s):Pm(e);return{...No(e,t,{defaultPos:n,vgChannel:l}),...u}}function a8t(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Gy(n),l=su(n),c=Pm(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Qb({channel:n,markDef:s,encoding:r,model:e}):Qb({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=su(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=u8t({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:VA(n,s)||VA(n,{[n]:nR(n,s,a.style),[l]:nR(l,s,a.style)})||VA(n,a[i])||VA(n,a.mark)||{[c]:sK({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function u8t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?w0(t,s,{suffix:"start"},{offset:u}):kY({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function VA(e,t){const n=su(e),r=Pm(e);if(t[r]!==void 0)return{[r]:zx(e,t[r])};if(t[e]!==void 0)return{[r]:zx(e,t[e])};if(t[n]){const i=t[n];if(uy(i))it(r6t(n));else return{[n]:zx(e,i)}}}function $m(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=ud(t),a=su(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??ir("size",i,n,{vgChannel:a}),p=aAe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return st(u)&&(Fr(u.bin)||Gs(u.bin)||u.timeUnit&&!l)&&!(h&&!uy(h))&&!r[p]&&!Rs(f)?f8t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ln(u)&&Rs(f)||m)&&!l?c8t(u,t,e):lIe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function l8t(e,t,n,r,i,s,o){if(uy(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Ih("minBandSize",{type:o},r);return{signal:c?`max(${cc(c)}, ${l})`:l}}else i.band!==1&&(it(h6t(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Pt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(hg(u)&&Wn(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Fi(u,o==="bar"?l:c);if(Pt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Wn(f))return{signal:`${1-f} * ${e}`}}return{value:fR(r.view,e)-2}}function c8t(e,t,n){var A,D;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=su(t),f=ud(t),d=aAe(t),h=n.scaleName(d),p=n.getScaleComponent(fY(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=xs("size",n,{vgChannel:c,defaultRef:Vr(r.size)}):it(y6t(r.type)));const y=!!g,v=sDe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:l8t(c,h||u,p||l,s,v,!!e,r.type)};const b=((D=l||p)==null?void 0:D.get("type"))==="band"&&uy(v)&&!y?"top":"middle",E=uIe(t,r,s,b),_=E==="xc"||E==="yc",{offset:x,offsetType:S}=Qb({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),C=kY({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:x,defaultRef:sK({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:_?S==="encoding"?0:.5:Pt(v)?{signal:`(1-${v})/2`}:uy(v)?(1-v.band)/2:0});if(c)return{[E]:C,...g};{const I=Pm(f),O=g[c],R=x?{...O,offset:x}:O;return{[E]:C,[I]:Ue(C)?[C[0],{...C[1],offset:R}]:{...C,offset:R}}}}function Iae(e,t,n,r,i,s,o){if(tAe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Pt(n)||Pt(i)||Pt(r)||s){const l=cc(n),c=cc(i),f=cc(r),d=cc(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function f8t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var D;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=sDe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(D=r.component.axes[n])==null?void 0:D[0],h=(d==null?void 0:d.get("translate"))??.5,p=Li(n)?ir("binSpacing",s,i)??0:0,m=ud(n),g=Pm(n),y=Pm(m),v=Ih("minBandSize",s,i),{offset:b}=Qb({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=Qb({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),_=wLt({fieldDef:e,scaleName:u}),x=Iae(n,p,c,h,b,v,_),S=Iae(m,p,c,h,E??b,v,_),C=Pt(f)?{signal:`(1-${f.signal})/2`}:uy(f)?(1-f.band)/2:.5,A=Om({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Fr(e.bin)||e.timeUnit){const I=e.timeUnit&&A!==.5;return{[y]:Nae({fieldDef:e,scaleName:u,bandPosition:C,offset:S,useRectOffsetField:I}),[g]:Nae({fieldDef:e,scaleName:u,bandPosition:Pt(C)?{signal:`1-${C.signal}`}:1-C,offset:x,useRectOffsetField:I})}}else if(Gs(e.bin)){const I=w0(e,u,{},{offset:S});if(st(t))return{[y]:I,[g]:w0(t,u,{},{offset:x})};if(Yy(e.bin)&&e.bin.step)return{[y]:I,[g]:{signal:`scale("${u}", ${ft(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}it(AAe(m))}function Nae({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return iR({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:IM,endSuffix:NM}:{}})}const d8t=new Set(["aria","width","height"]);function Fl(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?aIe(e):{};return{...h8t(e.markDef,t),...kae(e,"fill",n),...kae(e,"stroke",r),...xs("opacity",e),...xs("fillOpacity",e),...xs("strokeOpacity",e),...xs("strokeWidth",e),...xs("strokeDash",e),...r8t(e),...sIe(e),...iK(e,"href"),...e8t(e)}}function kae(e,t,n){const{config:r,mark:i,markDef:s}=e;if(ir("invalid",s,r)==="hide"&&n&&!Qy(i)){const a=p8t(e,{invalid:!0,channels:cM});if(a)return{[t]:[{test:a,value:null},...gt(n)]}}return n?{[t]:n}:{}}function h8t(e,t){return NFt.reduce((n,r)=>(!d8t.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Vr(e[r])),n),{})}function p8t(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&zu(u)&&(s[l]=!0)}return s},{}),i=et(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>RY(o,t)).join(` ${s} `)}}function oK(e){const{config:t,markDef:n}=e;if(ir("invalid",n,t)){const i=m8t(e,{channels:ld});if(i)return{defined:{signal:i}}}return{}}function m8t(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&zu(l)&&(s[c]=!0)}return s},{}),i=et(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>RY(o,t)).join(` ${s} `)}}function Rae(e,t){if(t!==void 0)return{[e]:Vr(t)}}const nL="voronoi",cIe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(nL)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Qy(s))return it($Ft(s)),n;const o={name:e.getName(nL),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...sIe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(nL)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},fIe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!XY(e.bind),parse:(e,t,n)=>bIe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=cIe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=ri(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:ly(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${lt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Fm)[0],o=r+Z2,a=i.items.map(l=>ri(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},pR="_toggle",dIe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+pR,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Fm,r=t.name+pR;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${S0(e)}}, `)+`${r} ? ${n} : null`}},g8t={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=yt(t.clear)?og(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(fIe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===ri(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Fm);r(i,"null"),dIe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+pR),r(i,"false"))}return n}},hIe={defined:e=>{const t=e.resolve==="global"&&e.bind&&XY(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==kc;return t&&!n&&it(jFt),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=yt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},bIe(t,r),vt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=gt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=J6(t.bind)?t.bind.legend:"click",s=yt(i)?og(i,"view"):gt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=J6(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${ri(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Fm),o=r+Z2,a=i.items.filter(d=>d.hasLegend).map(d=>ri(`${r}_${ri(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+pR),f=J6(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function y8t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of ro(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&hIe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const pIe="_translate_anchor",mIe="_translate_delta",v8t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=ih.defined(t),s=r+pIe,{x:o,y:a}=t.project.hasChannel;let u=og(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Uv,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?eB(e,ii):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?eB(e,$s):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+mIe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Pae(e,t,o,"width",n),a!==void 0&&Pae(e,t,a,"height",n),n}};function Pae(e,t,n,r,i){const s=t.name,o=s+pIe,a=s+mIe,u=n.channel,l=ih.defined(t),c=i.filter(_=>_.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===ii?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const gIe="_zoom_anchor",yIe="_zoom_delta",b8t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=ih.defined(t),s=r+yIe,{x:o,y:a}=t.project.hasChannel,u=lt(e.scaleName(ii)),l=lt(e.scaleName($s));let c=og(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Uv,f))),n.push({name:r+gIe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Oae(e,t,o,"width",n),a!==void 0&&Oae(e,t,a,"height",n),n}};function Oae(e,t,n,r,i){const s=t.name,o=n.channel,a=ih.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?eB(e,o):u.name,h=s+yIe,p=`${s}${gIe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const cy="_store",Fm="_tuple",_8t="_modify",vIe="vlSelectionResolve",RM=[Z5t,Q5t,K5t,dIe,fIe,ih,hIe,g8t,v8t,b8t,cIe];function E8t(e){let t=e.parent;for(;t&&!Iu(t);)t=t.parent;return t}function S0(e,{escape:t}={escape:!0}){let n=t?lt(e.name):e.name;const r=E8t(e);if(r){const{facet:i}=r;for(const s of dl)i[s]&&(n+=` + '__facet_${s}_' + (facet[${lt(r.vgField(s))}])`)}return n}function aK(e){return ro(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function bIe(e,t){(yt(t.select)||!t.select.on)&&delete e.events,(yt(t.select)||!t.select.clear)&&delete e.clear,(yt(t.select)||!t.select.toggle)&&delete e.toggle}function tB(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...tB(e.object)),t.push(...tB(e.property))),t)}function _Ie(e){return e.object.type==="MemberExpression"?_Ie(e.object):e.object.name==="datum"}function EIe(e){const t=AG(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&_Ie(r)&&n.add(tB(r).slice(1).join("."))}),n}class tE extends mr{clone(){return new tE(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=mR(this.model,this.filter,this),this._dependentFields=EIe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function w8t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=ri(i.name),o=i.select,a=yt(o)?o:o.type,u=vt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:yt(u.on)?og(u.on,"scope"):gt(tn(u.on))},f=tn(i);for(const d of RM)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function wIe(e,t,n,r="datum"){const i=yt(t)?t:t.param,s=ri(i),o=lt(s+cy);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${lt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function xIe(e,t,n){const r=ri(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&it(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${lt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,it((a.length?"Multiple ":"No ")+`matching ${lt(i)} encoding found for selection ${lt(n.param)}. Using "field": ${lt(s)}.`)):s=a[0].field}return`${o.name}[${lt(Cl(s))}]`}function x8t(e,t){for(const[n,r]of Rm(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Qa(new tE(t,e,{param:n}),i,ei.Lookup,e.component.data.outputNodeRefCounts)}}function mR(e,t,n){return jx(t,r=>yt(r)?r:eLt(r)?wIe(e,r,n):BAe(r))}function S8t(e,t){if(e)return Ue(e)&&!gp(e)?e.map(n=>zY(n,t)).join(", "):e}function rL(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function qw(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=r4t[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(J2(m)){const{condition:g,...y}=m,v=gt(g),b=uae[h];if(b){const{vgProp:E,part:_}=b,x=[...v.map(S=>{const{test:C,...A}=S;return{test:mR(null,C),...A}}),y];rL(c,_,E,x),delete c[h]}else if(b===null){const E={signal:v.map(_=>{const{test:x,...S}=_;return`${mR(null,x)} ? ${Woe(S)} : `}).join("")+Woe(y)};c[h]=E}}else if(Pt(m)){const g=uae[h];if(g){const{vgProp:y,part:v}=g;rL(c,v,y,m),delete c[h]}}Mn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},_r(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Fi(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Pt(c.encode.labels.update.text)&&(p=ry(a,"datum.label",c.encode.labels.update.text.signal)),rL(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of mDe)e.hasAxisPart(p)||delete c.encode[p];_r(c.encode)&&delete c.encode}const h=S8t(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Fi(l,0)}}}}function SIe(e){const{axes:t}=e.component,n=[];for(const r of ld)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function T8t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>qw(i,"grid",t)),...r.map(i=>qw(i,"grid",t)),...n.map(i=>qw(i,"main",t)),...r.map(i=>qw(i,"main",t))].filter(i=>i)}function Mae(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...et(o),...et(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${cc(o[c])} : ${cc(a[c])}`};return l}return t[i]})])}function C8t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:VAe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Pt(n)?"axisOrient":`axis${U2(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Mae(a,r,e,n),vgAxisConfig:Mae(u,r,e,n),axisConfigStyle:A8t([...u,...a],r)}}function A8t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=gt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function nB(e,t,n,r={}){var s;const i=yAe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const $ae={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??D8t(n,e),gridScale:({model:e,channel:t})=>I8t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||CIe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||TIe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??k8t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??R8t(t.type,n,st(t)&&!!t.timeUnit,st(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??O8t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:M8t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=AIe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return bAe(i?[oae(i)]:[],st(o)?[oae(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>$8t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??F8t(n,t)};function D8t(e,t){return!Rs(e)&&st(t)&&!Fr(t==null?void 0:t.bin)&&!Gs(t==null?void 0:t.bin)}function I8t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function N8t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Pt(s)?s:fT(s);{const{configValue:o}=nB("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?fT(o):n===ii&&Mn([NY,IY],e.type)&&!(st(e)&&e.timeUnit)?270:void 0}}function rB(e){return`(((${e.signal} % 360) + 360) % 360)`}function TIe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Pt(e)){const i=rB(e),s=Pt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Pt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Pt(e)){const i=rB(e),s=Pt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Pt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function CIe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Pt(e)){const o=rB(e),a=Pt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Pt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function k8t(e,t){if(t==="x"&&Mn(["quantitative","temporal"],e))return!0}function R8t(e,t,n,r){if(n&&!vt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function P8t(e){return e==="x"?"bottom":"left"}function O8t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Rs(t)&&t!=="log"){if(st(e)){if(Fr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Mn(["month","hours","day","quarter"],(i=Ns(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function M8t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(st(t)){const{timeUnit:n}=t;if(n){const r=$Ae(n);if(r)return{signal:r}}}}function AIe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return _Ae(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function $8t(e,t){const n=e.values;if(Ue(n))return pDe(t,n);if(Pt(n))return n}function F8t(e,t){return e==="rect"&&aR(t)?1:0}class Jb extends mr{clone(){return new Jb(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=EIe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Jy(r)&&iDe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${BAe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Jb(t,{calculate:u,as:Zb(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${On(this.transform)}`}}function Zb(e,t,n){return ft(e,{prefix:t,suffix:"sort_index",...n})}function PM(e,t){return Mn(["top","bottom"],t)?"column":Mn(["left","right"],t)||e==="row"?"row":"column"}function e_(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Fi((t||{})[e],i[e],n.header[e])}function OM(e,t,n,r){const i={};for(const s of e){const o=e_(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const uK=["row","column"],lK=["header","footer"];function L8t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=OM(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=PM(t,a),l=fT(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...IIe(l,u),...DIe(u,l,s),...NIe(r,i,t,T4t,RDe)}}}function DIe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=CIe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function IIe(e,t){const n=TIe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function B8t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of lK)if(n[i])for(const s of n[i]){const o=z8t(e,t,i,n,s);o!=null&&r.push(o)}return r}function j8t(e,t){const{sort:n}=e;return Cf(n)?{field:ft(n,{expr:"datum"}),order:n.order??"ascending"}:Ue(n)?{field:Zb(e,t,{expr:"datum"}),order:"ascending"}:{field:ft(e,{expr:"datum"}),order:n??"ascending"}}function iB(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=OM(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=OY({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=PM(t,a);return{text:{signal:u?ry(ry(u,"datum.label",l),"datum.value",ft(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...IIe(s,c),...DIe(c,s,o),...NIe(n,e,t,C4t,PDe)}}function z8t(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=OM(["labelOrient"],o.header,a,t);(t==="row"&&!Mn(["top","bottom"],f)||t==="column"&&!Mn(["left","right"],f))&&(s=iB(o,t,a))}const u=Iu(e)&&!K2(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:j8t(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const U8t={column:{start:0,end:1},row:{start:1,end:0}};function V8t(e,t){return U8t[t][e]}function H8t(e,t){const n={};for(const r of dl){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=OM(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=PM(r,o),u=V8t(s,a);u!==void 0&&(n[a]=u)}}return _r(n)?void 0:n}function NIe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=e_(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function cK(e){return[...HA(e,"width"),...HA(e,"height"),...HA(e,"childWidth"),...HA(e,"childHeight")]}function HA(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Rs(o)&&hg(a)){const u=e.scaleName(n);return Iu(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Fae(u,a)]:[Fae(u,a),{name:i,update:kIe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=X9(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Fae(e,t){const n=`${e}_step`;return Pt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function kIe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Fi(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${cc(o)}, ${cc(s)}) * ${e}_step`}function RIe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function PIe(e,t){return et(e).reduce((n,r)=>{const i=e[r];return{...n,...eE(t,i,r,s=>Vr(s.value))}},{})}function OIe(e,t){if(Iu(t))return e==="theta"?"independent":"shared";if(iE(t))return"shared";if(yK(t))return Li(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function fK(e,t){const n=e.scale[t],r=Li(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&it(w6t(t)),"independent"):e[r][t]||"shared"}const q8t={...I4t,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},MIe=et(q8t);class W8t extends Xh{}const Lae={symbols:G8t,gradient:Y8t,labels:K8t,entries:X8t};function G8t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...PFt({},n,RLt),...aIe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?$Ie(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===ru)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Vr(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Vr(m??1));else if(Ue(f.fill)){const g=sB(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Vr(g))}}if(f.stroke){if(r==="stroke"||!c&&r===ru)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ue(f.stroke)){const g=Fi(sB(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Gh){const g=st(t)&&LIe(n,i,t);g?f.opacity=[{test:g,...Vr(m??1)},Vr(u.legend.unselectedOpacity)]:m&&(f.opacity=Vr(m))}return f={...f,...e},_r(f)?void 0:f}function Y8t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?$Ie(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Vr(l)),a={...a,...e},_r(a)?void 0:a}function K8t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=st(t)?LIe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;ay(c)?f=dc({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=dc({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&st(t)&&t.timeUnit===void 0&&(f=dc({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return _r(d)?void 0:d}function X8t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function $Ie(e){return FIe(e,(t,n)=>Math.max(t,n.value))}function sB(e){return FIe(e,(t,n)=>Fi(t,n.value))}function FIe(e,t){if(qLt(e))return gt(e.condition).reduce(t,e.value);if(Nc(e))return e.value}function LIe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=lt(n.field);return r.map(s=>`(!length(data(${lt(ri(s)+cy)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Bae={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return KAe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return XAe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??r9t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??i9t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??J8t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>zv(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(jv(n)&&fc(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Q8t(t,e)};function Q8t(e,t){const n=e.values;if(Ue(n))return pDe(t,n);if(Pt(n))return n}function J8t(e,t,n,r){if(t!=="shape"){const i=sB(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Z8t(e){const{legend:t}=e;return Fi(t.type,e9t(e))}function e9t({channel:e,timeUnit:t,scaleType:n}){if(jv(e)){if(Mn(["quarter","month","day"],t))return"symbol";if(fc(n))return"gradient"}return"symbol"}function t9t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??n9t(n,t)}function n9t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function r9t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(fc(i))return n==="horizontal"?r==="top"||r==="bottom"?jae(t,"width",o,s):o:jae(t,"height",u,a)}function jae(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function i9t(e){if(Mn(["quantile","threshold","log","symlog"],e))return"greedy"}function BIe(e){const t=wi(e)?s9t(e):l9t(e);return e.component.legends=t,t}function s9t(e){const{encoding:t}=e,n={};for(const r of[ru,...MDe]){const i=os(t[r]);!i||!e.getScaleComponent(r)||r===iu&&st(i)&&i.type===Z_||(n[r]=u9t(e,r))}return n}function o9t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function a9t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function u9t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new W8t({},o9t(e,t));y8t(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=os(i[t]),f=st(c)?(E=Ns(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=Z8t({legend:n,channel:t,timeUnit:f,scaleType:l}),p=t9t({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const _ of MIe){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const x=_ in Bae?Bae[_](m):n[_];if(x!==void 0){const S=a9t(x,_,n,e.fieldDef(t));(S||s.legend[_]===void 0)&&a.set(_,x,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const x=PIe(g[_]??{},e),S=_ in Lae?Lae[_](x,b):x;S!==void 0&&!_r(S)&&(v[_]={...y!=null&&y.length&&st(c)?{name:`${ri(c.field)}_legend_${_}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return _r(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function l9t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){BIe(r);for(const i of et(r.component.legends))n.legend[i]=fK(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=jIe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of et(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function jIe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of MIe){const c=Mm(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return c9t(f,d);case"title":return EAe(f,d);case"type":return i=!0,du("symbol")}return DM(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&tR(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&tR(e.explicit,["encode","gradient"])),e}function c9t(e,t){return t.value==="circle"?t:e}function f9t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function zIe(e){const t=e.component.legends,n={};for(const i of et(t)){const s=e.getScaleComponent(i),o=Er(s.get("domains"));if(n[o])for(const a of n[o])jIe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return ro(n).flat().map(i=>d9t(i,e.config)).filter(i=>i!==void 0)}function d9t(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of MDe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Pt(s.encode.labels.update.text)&&(l=ry(r,"datum.label",s.encode.labels.update.text.signal)),f9t(s,"labels","text",{signal:l})}return s}}function h9t(e){return iE(e)||yK(e)?p9t(e):UIe(e)}function p9t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),UIe(e))}function UIe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Pt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Mn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const m9t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class VIe extends Xh{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function HIe(e){e.component.projection=wi(e)?g9t(e):b9t(e)}function g9t(e){if(e.hasProjection){const t=Pa(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?y9t(e):void 0,s=new VIe(e.projectionName(!0),{...Pa(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function y9t(e){const t=[],{encoding:n}=e;for(const r of[[zc,jc],[Al,Uc]])(os(n[r[0]])||os(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(iu)&&e.typedFieldDef(iu).type===Z_&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ei.Main)),t}function v9t(e,t){const n=iY(m9t,i=>!!(!Ut(e.explicit,i)&&!Ut(t.explicit,i)||Ut(e.explicit,i)&&Ut(t.explicit,i)&&Tu(e.get(i),t.get(i))));if(Tu(e.size,t.size)){if(n)return e;if(Tu(e.explicit,{}))return t;if(Tu(t.explicit,{}))return e}return null}function b9t(e){if(e.children.length===0)return;let t;for(const r of e.children)HIe(r);const n=iY(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=v9t(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new VIe(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function _9t(e,t,n,r){if(Q2(t,n)){const i=wi(e)?e.axis(n)??e.legend(n)??{}:{},s=ft(t,{expr:"datum"}),o=ft(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ft(t,{binSuffix:"range",forAs:!0}),formula:Y2(s,o,i.format,i.formatType,r)}}return{}}function qIe(e,t){return`${hAe(e)}_${t}`}function E9t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function dK(e,t,n){const r=wM(n,void 0)??{},i=qIe(r,t);return e.getName(`${i}_bins`)}function w9t(e){return"as"in e}function zae(e,t,n){let r,i;w9t(e)?r=yt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ft(e,{forAs:!0}),ft(e,{binSuffix:"end",forAs:!0})];const s={...wM(t,void 0)},o=qIe(s,e.field),{signal:a,extentSignal:u}=E9t(n,o);if(fM(s.extent)){const c=s.extent;i=xIe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Df extends mr{clone(){return new Df(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ha(s)&&Fr(s.bin)){const{key:a,binComponent:u}=zae(s,s.bin,n);i[a]={...u,...i[a],..._9t(n,s,o,n.config)}}return i},{});return _r(r)?null:new Df(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=zae(n,n.bin,r);return new Df(t,{[i]:s})}merge(t,n){for(const r of et(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=gf([...this.bins[r].as,...t.bins[r].as],On)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(ro(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ro(this.bins).map(t=>t.field))}hash(){return`Bin ${On(this.bins)}`}assemble(){return ro(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Cl(t.field),as:r,signal:t.signal,...fM(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Cl(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:ft({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function x9t(e,t,n,r){var s;const i=wi(r)?r.encoding[ud(t)]:void 0;if(ha(n)&&wi(r)&&oDe(n,i,r.markDef,r.config)){e.add(ft(n,{})),e.add(ft(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Om({fieldDef:n,markDef:a,config:u});dT(o)&&l!==.5&&Li(t)&&(e.add(ft(n,{suffix:IM})),e.add(ft(n,{suffix:NM}))),n.bin&&Q2(n,t)&&e.add(ft(n,{binSuffix:"range"}))}else if(rAe(t)){const o=nAe(t);e.add(r.getName(o))}else e.add(ft(n));return Jy(n)&&hLt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function S9t(e,t){for(const n of et(t)){const r=t[n];for(const i of et(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class wc extends mr{clone(){return new wc(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ft(o,{forAs:!0})]);else{if(Dh(u)||dg(u)){const c=Dh(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([ft({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([ft(o,{forAs:!0})]);Yh(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([ft({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([ft({field:l,aggregate:"max"},{forAs:!0})]))}else x9t(s,a,o,n)}),s.size+et(i).length===0)?null:new wc(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||ft(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||ft(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+et(i).length===0?null:new wc(t,r,i)}merge(t){return YCe(this.dimensions,t.dimensions)?(S9t(this.measures,t.measures),!0):(L6t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...et(this.measures)])}producedFields(){const t=new Set;for(const n of et(this.measures))for(const r of et(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${On({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of et(this.measures))for(const o of et(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Cl(s));return{type:"aggregate",groupby:[...this.dimensions].map(Cl),ops:t,fields:n,as:r}}}class nE extends mr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of dl){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[ft(o),...Fr(a)?[ft(o,{binSuffix:"end"})]:[]],...Cf(u)?{sortField:u}:Ue(u)?{sortIndexField:Zb(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of dl)this[n]&&(t+=` ${n.charAt(0)}:${On(this[n])}`);return t}get fields(){var n;const t=[];for(const r of dl)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of dl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ld){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Rs(i)&&hg(s)){const o=MM(this.childModel,n),a=gK(o);a?t[n]=a:it(yY(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=vM,field:f}=u;s.push(f),o.push(c),a.push(ft(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of uK){for(const c of lK){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[rh,nh])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Uae(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function T9t(e,t){const n=aY(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Uae(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Uae(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return it(GFt(t)),null}function C9t(e){const t={};return lI(e.filter,n=>{if(LAe(n)){let r=null;EY(n)?r=yu(n.equal):xY(n)?r=yu(n.lte):wY(n)?r=yu(n.lt):SY(n)?r=yu(n.gt):TY(n)?r=yu(n.gte):CY(n)?r=n.range[0]:AY(n)&&(r=(n.oneOf??n.in)[0]),r&&(Ky(r)?t[n.field]="date":Wn(r)?t[n.field]="number":yt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function A9t(e){const t={};function n(r){Kb(r)?t[r.field]="date":r.type==="quantitative"&&SFt(r.aggregate)?t[r.field]="number":Ub(r.field)>1?r.field in t||(t[r.field]="flatten"):Jy(r)&&Cf(r.sort)&&Ub(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((wi(e)||Iu(e))&&e.forEachFieldDef((r,i)=>{if(ha(r))n(r);else{const s=Gy(i),o=e.fieldDef(s);n({...r,type:o.type})}}),wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Qy(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];st(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function D9t(e){const t={};if(wi(e)&&e.component.selection)for(const n of et(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Ub(i.field)>1&&(t[i.field]="flatten")}return t}class ko extends mr{clone(){return new ko(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${On(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!um(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of et(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:it(Joe(a,r[a],u.value)))}for(const a of et(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:it(Joe(a,n[a],u)))}const s=new Xh(n,r);i.copyAll(s);const o={};for(const a of et(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return et(o).length===0||i.parseNothing?null:new ko(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of et(this._parse)){const r=this._parse[n];Ub(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(et(this._parse))}dependentFields(){return new Set(et(this._parse))}assembleTransforms(t=!1){return et(this._parse).filter(n=>t?Ub(n)>1:!0).map(n=>{const r=T9t(n,this._parse[n]);return r?{type:"formula",expr:r,as:Q_(n)}:null}).filter(n=>n!==null)}}class Lm extends mr{clone(){return new Lm(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([kc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:kc}}}class eC extends mr{clone(){return new eC(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${On(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class tC extends mr{clone(){return new tC(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${On(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class fy extends mr{constructor(t){super(null),t??(t={name:"source"});let n;if(um(t)||(n=t.format?{...Ka(t.format,["parse"])}:{}),hT(t))this._data={values:t.values};else if(Xb(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Mn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else ZDe(t)?this._data={values:[{type:"Sphere"}]}:(QDe(t)||um(t))&&(this._data={});this._generator=um(t),t.name&&(this._name=t.name),n&&!_r(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Vae=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},I9t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Ww;function hK(e){return e instanceof fy||e instanceof eC||e instanceof tC}class pK{constructor(){Ww.set(this,void 0),Vae(this,Ww,!1,"f")}setModified(){Vae(this,Ww,!0,"f")}get modifiedFlag(){return I9t(this,Ww,"f")}}Ww=new WeakMap;class Zy extends pK{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class mK extends pK{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class N9t extends mK{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of et(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class k9t extends mK{constructor(t){super(),this.requiresSelectionId=t&&aK(t)}run(t){t instanceof Lm&&(this.requiresSelectionId&&(hK(t.parent)||t.parent instanceof wc||t.parent instanceof ko)||(this.setModified(),t.remove()))}}class R9t extends pK{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Af&&(r=t.producedFields(),sY(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class P9t extends mK{constructor(){super()}run(t){t instanceof Qa&&!t.isRequired()&&(this.setModified(),t.remove())}}class O9t extends Zy{run(t){if(!hK(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ko)if(t instanceof ko)this.setModified(),t.merge(n);else{if(oY(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class M9t extends Zy{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ko);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of et(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!_r(i)){this.setModified();const o=new ko(t,i);for(const a of n){if(a instanceof ko)for(const u of et(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ko&&et(a.parse).length===0&&a.remove()}}}}}class $9t extends Zy{run(t){t instanceof Qa||t.numChildren()>0||t instanceof nE||t instanceof fy||(this.setModified(),t.remove())}}class F9t extends Zy{run(t){const n=t.children.filter(i=>i instanceof Af),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class L9t extends Zy{run(t){const n=t.children.filter(i=>i instanceof wc),r={};for(const i of n){const s=On(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of et(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class B9t extends Zy{constructor(t){super(),this.model=t}run(t){const n=!(hK(t)||t instanceof tE||t instanceof ko||t instanceof Lm),r=[],i=[];for(const s of t.children)s instanceof Df&&(n&&!oY(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Df?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class j9t extends Zy{run(t){const n=[...t.children];if(!ny(n,o=>o instanceof Qa)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Qa){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Qa)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class e1 extends mr{clone(){return new e1(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ft(t)}hash(){return`JoinAggregateTransform ${On(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function z9t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ft(r);return i&&t.push(i),t},[])}function U9t(e){return Ue(e)&&e.every(t=>yt(t))&&e.length>1}class sh extends mr{clone(){return new sh(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Fi(f.order,"ascending"));const l={field:a,order:u};let c;return U9t(s)?c=s:yt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new sh(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return jf(p)}).filter(h=>!!h),c=z9t(n),f=n.encoding.order;let d;if(Ue(f)||st(f))d=vAe(f);else{const h=aDe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new sh(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${On(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ft(i,{binSuffix:"mid"})]:[ft(i,{}),ft(i,{binSuffix:"end"})]:[ft(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ft(c,{expr:"datum"}),p=ft(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:ft(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:ft(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class rE extends mr{clone(){return new rE(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ft(t)}hash(){return`WindowTransform ${On(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>mY(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function V9t(e){function t(n){if(!(n instanceof nE)){const r=n.clone();if(r instanceof Qa){const i=aB+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof wc||r instanceof sh||r instanceof rE||r instanceof e1)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function oB(e){if(e instanceof nE)if(e.numChildren()===1&&!(e.children[0]instanceof Qa)){const t=e.children[0];(t instanceof wc||t instanceof sh||t instanceof rE||t instanceof e1)&&t.addDimensions(e.fields),t.swapWithParent(),oB(e)}else{const t=e.model.component.data.main;WIe(t);const n=V9t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(oB)}function WIe(e){if(e instanceof Qa&&e.type===ei.Main&&e.numChildren()===1){const t=e.children[0];t instanceof nE||(t.swapWithParent(),WIe(e))}}const aB="scale_",qA=5;function uB(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!uB(t.children))return!1}return!0}function Vl(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Hae(e,t,n){let r=e.sources,i=!1;return i=Vl(new P9t,r)||i,i=Vl(new k9t(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Vl(new $9t,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Vl(new O9t,r)||i,i=Vl(new B9t(t),r)||i,i=Vl(new R9t,r)||i,i=Vl(new M9t,r)||i,i=Vl(new L9t,r)||i,i=Vl(new F9t,r)||i,i=Vl(new N9t,r)||i,i=Vl(new j9t,r)||i),e.sources=r,i}function H9t(e,t){uB(e.sources);let n=0,r=0;for(let i=0;i<qA&&Hae(e,t,!0);i++)n++;e.sources.map(oB);for(let i=0;i<qA&&Hae(e,t,!1);i++)r++;uB(e.sources),Math.max(n,r)===qA&&it(`Maximum optimization runs(${qA}) reached.`)}class Es{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Es(()=>t(n))}}function GIe(e){wi(e)?q9t(e):W9t(e)}function q9t(e){const t=e.component.scales;for(const n of et(t)){const r=Y9t(e,n);if(t[n].setWithExplicit("domains",r),X9t(e,n),e.component.data.isFaceted){let s=e;for(;!Iu(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Wd(a)&&(a.data=aB+a.data.replace(aB,""))}}}function W9t(e){for(const n of e.children)GIe(n);const t=e.component.scales;for(const n of et(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Mm(r,o.getWithExplicit("domains"),"domains","scale",lB);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&it(VFt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function G9t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=qae(t,n);if(!i){it(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=qae(t,n);if(i)return"unaggregated"}return e}function Y9t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=G9t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&os(r.x2)?os(r.x)?Mm(up(n,i,e,"x"),up(n,i,e,"x2"),"domain","scale",lB):up(n,i,e,"x2"):t==="y"&&os(r.y2)?os(r.y)?Mm(up(n,i,e,"y"),up(n,i,e,"y2"),"domain","scale",lB):up(n,i,e,"y2"):up(n,i,e,t)}function K9t(e,t,n){return e.map(r=>({signal:`{data: ${xM(r,{timeUnit:n,type:t})}}`}))}function iL(e,t,n){var i;const r=(i=Ns(n))==null?void 0:i.unit;return t==="temporal"||r?K9t(e,t,r):[e]}function up(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=os(i[r]),{type:c}=l,f=l.timeUnit;if(dLt(t)){const p=up(e,void 0,n,r),m=iL(t.unionWith,c,f);return ef([...m,...p.value])}else{if(Pt(t))return ef([t]);if(t&&t!=="unaggregated"&&!qAe(t))return ef(iL(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return du([[0,1]]);const p=n.requestDataName(ei.Main);return du([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Yh(r)&&st(l)?Q9t(n,r,e):void 0;if(cd(l)){const p=iL([l.datum],c,f);return du(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(ei.Main),{field:m}=l;return du([{data:p,field:ft({field:m,aggregate:"min"})},{data:p,field:ft({field:m,aggregate:"max"})}])}else if(Fr(h.bin)){if(Rs(e))return du(e==="bin-ordinal"?[]:[{data:cT(d)?n.requestDataName(ei.Main):n.requestDataName(ei.Raw),field:n.vgField(r,Q2(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!vt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Fr(p)){const m=dK(n,h.field,p);return du([new Es(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return du([{data:n.requestDataName(ei.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Mn(["time","utc"],e)){const p=i[ud(r)];if(oDe(h,p,s,a)){const m=n.requestDataName(ei.Main),g=Om({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=dT(o)&&g!==.5&&Li(r);return du([{data:m,field:n.vgField(r,y?{suffix:IM}:{})},{data:m,field:n.vgField(r,{suffix:y?NM:"end"})}])}}return du(d?[{data:cT(d)?n.requestDataName(ei.Main):n.requestDataName(ei.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ei.Main),field:n.vgField(r)}])}function sL(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":vM),...r?{field:Cl(r)}:{},...i?{order:i}:{}}}function X9t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=qAe(r)&&r,o=Yy(i)&&fM(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Q9t(e,t,n){if(!Rs(n))return;const r=e.fieldDef(t),i=r.sort;if(iDe(i))return{op:"min",field:Zb(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Cf(i)){const a=s&&!o.has(i.field);return sL(i,a)}else if(rDe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Dh(c)||dg(c))return sL({field:ft(l),order:u},d);if(mY(c)||!c)return sL({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Mn(["ascending",void 0],i))return!0}}function qae(e,t){const{aggregate:n,type:r}=e;return n?yt(n)&&!CFt.has(n)?{valid:!1,reason:m6t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:g6t(e)}:{valid:!0}:{valid:!1,reason:p6t(e)}}function lB(e,t,n,r){return e.explicit&&t.explicit&&it(E6t(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function J9t(e){const t=gf(e.map(o=>{if(Wd(o)){const{sort:a,...u}=o;return u}return o}),On),n=gf(e.map(o=>{if(Wd(o)){const a=o.sort;return a!==void 0&&!cT(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),On);if(t.length===0)return;if(t.length===1){const o=e[0];if(Wd(o)&&n.length>0){let a=n[0];if(n.length>1){it(eae);const u=n.filter(l=>vt(l)&&"op"in l&&l.op!=="min");n.every(l=>vt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(vt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=gf(n.map(o=>cT(o)||!("op"in o)||yt(o.op)&&o.op in wFt?o:(it(x6t(o)),!0)),On);let i;r.length===1?i=r[0]:r.length>1&&(it(eae),i=!0);const s=gf(e.map(o=>Wd(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function gK(e){if(Wd(e)&&yt(e.field))return e.field;if(AFt(e)){let t;for(const n of e.fields)if(Wd(n)&&yt(n.field)){if(!t)t=n.field;else if(t!==n.field)return it(S6t),t}return it(T6t),t}else if(DFt(e)){it(C6t);const t=e.fields[0];return yt(t)?t:void 0}}function MM(e,t){const r=e.component.scales[t].get("domains").map(i=>(Wd(i)&&(i.data=e.lookupDataSource(i.data)),i));return J9t(r)}function YIe(e){return iE(e)||yK(e)?e.children.reduce((t,n)=>t.concat(YIe(n)),Wae(e)):Wae(e)}function Wae(e){return et(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Z9t(i.range,s,n,e),h=MM(e,n),p=a?G5t(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Z9t(e,t,n,r){if(Li(n)){if(hg(e))return{step:{signal:`${t}_step`}}}else if(vt(e)&&Wd(e))return{...e,data:r.lookupDataSource(e.data)};return e}class KIe extends Xh{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ny(this.get("domains"),t=>Ue(t)&&t.length===2&&Wn(t[0])&&t[0]<=0&&Wn(t[1])&&t[1]>=0)}}const eBt=["range","scheme"];function tBt(e){const t=e.component.scales;for(const n of cM){const r=t[n];if(!r)continue;const i=nBt(n,e);r.setWithExplicit("range",i)}}function Gae(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=su(t),o=e.getName(s);if(vt(r)&&r.binned&&r.step!==void 0)return new Es(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Fr(r)){const a=dK(e,i,r);return new Es(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function nBt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of eBt)if(n[f]!==void 0){const d=G9(s,f),h=WAe(e,f);if(!d)it(TAe(s,f,e));else if(h)it(h);else switch(f){case"range":{const p=n.range;if(Ue(p)){if(Li(e))return ef(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Es.fromName(y,g)}return m}))}else if(vt(p))return ef({data:t.requestDataName(ei.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return ef(p)}case"scheme":return ef(rBt(n[f]))}}const o=e===ii||e==="xOffset"?"width":"height",a=r[o];if(zf(a)){if(Li(e))if(Rs(s)){const f=QIe(a,t,e);if(f)return ef({step:f})}else it(CAe(o));else if(q2(e)){const f=e===ag?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=JIe(a,s);if(p)return ef(p)}}}const{rangeMin:u,rangeMax:l}=n,c=iBt(e,t);return(u!==void 0||l!==void 0)&&G9(s,"rangeMin")&&Ue(c)&&c.length===2?ef([u??c[0],l??c[1]]):du(c)}function rBt(e){return fLt(e)?{scheme:e.name,...Ka(e,["name"])}:{scheme:e}}function XIe(e,t,n,{center:r}={}){const i=su(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===$s&&zu(n)?r?[Es.fromName(a=>`${o(a)}/2`,s),Es.fromName(a=>`-${o(a)}/2`,s)]:[Es.fromName(o,s),0]:r?[Es.fromName(a=>`-${o(a)}/2`,s),Es.fromName(a=>`${o(a)}/2`,s)]:[0,Es.fromName(o,s)]}function iBt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=os(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case ii:case $s:{if(Mn(["point","band"],u)){const f=ZIe(e,n,r.view);if(zf(f))return{step:QIe(f,t,e)}}return XIe(e,t,u)}case ag:case J_:return sBt(e,t,u);case Wh:{const f=t.component.scales[e].get("zero"),d=eNe(i,f,r),h=uBt(i,n,t,r);return Wb(u)?aBt(d,h,oBt(u,r,l,e)):[d,h]}case $l:return[0,Math.PI*2];case Wy:return[0,360];case Bc:return[0,new Es(()=>{const f=t.getSignalName(Iu(t.parent)?"child_width":"width"),d=t.getSignalName(Iu(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case cg:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case fg:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case iu:return"symbol";case ru:case od:case ad:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Gh:case ug:case lg:return[r.scale.minOpacity,r.scale.maxOpacity]}}function QIe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=fY(n),o=r[s];if(FDe({step:e,offsetIsDiscrete:ln(o)&&jAe(o.type)})==="offset"&&vDe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${RFt(f)})`}}else return e.step}function JIe(e,t){if(FDe({step:e,offsetIsDiscrete:Rs(t)})==="offset")return{step:e.step}}function sBt(e,t,n){const r=e===ag?"x":"y",i=t.getScaleComponent(r);if(!i)return XIe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=ZIe(r,t.size,t.config.view);if(zf(l)){const c=JIe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(st(l)&&l.timeUnit){const c=$Ae(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Om({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Pt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Pt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return WCe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function ZIe(e,t,n){const r=e===ii?"width":"height",i=t[r];return i||dR(n,r)}function oBt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ue(n)?n.length+1:(it(M6t(r)),3)}}function aBt(e,t,n){const r=()=>{const i=cc(t),s=cc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Pt(t)?new Es(r):{signal:r()}}function eNe(e,t,n){if(t)return Pt(t)?{signal:`${t.signal} ? 0 : ${eNe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(dM("size",e))}const Yae=.95;function uBt(e,t,n,r){const i={x:Gae(n,"x"),y:Gae(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Kae(t,i,r.view);return Wn(s)?s-1:new Es(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Kae(t,i,r.view);return Wn(s)?Math.pow(Yae*s,2):new Es(()=>`pow(${Yae} * ${s.signal}, 2)`)}}throw new Error(dM("size",e))}function Kae(e,t,n){const r=zf(e.width)?e.width.step:fR(n,"width"),i=zf(e.height)?e.height.step:fR(n,"height");return t.x||t.y?new Es(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function tNe(e,t){wi(e)?lBt(e,t):rNe(e,t)}function lBt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of et(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=os(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=G9(h,t),y=WAe(a,t);if(d!==void 0&&(g?y&&it(y):it(TAe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Ky(u[t])||b==="temporal"||v?l.set(t,{signal:xM(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Xae?Xae[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:bDe(i,a),hasSecondaryRangeChannel:!!i[ud(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Xae={bins:({model:e,fieldOrDatumDef:t})=>st(t)?cBt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>fBt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>dBt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>hBt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>pBt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>mBt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=st(e)?e.sort:void 0;return gBt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>yBt(e,t,n,r,i,s.scale,o)};function nNe(e){wi(e)?tBt(e):rNe(e,"range")}function rNe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?nNe(r):tNe(r,t);for(const r of et(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Mm(i,a,t,"scale",XDe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function cBt(e,t){const n=t.bin;if(Fr(n)){const r=dK(e,t.field,n);return new Es(()=>e.getSignalName(r))}else if(Gs(n)&&Yy(n)&&n.step!==void 0)return{step:n.step}}function fBt(e,t){if(Mn([ru,od,ad],e)&&t!=="nominal")return"hcl"}function dBt(e,t,n,r,i,s){var o;if(!((o=jf(s))!=null&&o.bin||Ue(n)||i!=null||r!=null||Mn([Xa.TIME,Xa.UTC],e)))return Li(t)?!0:void 0}function hBt(e,t,n,r,i,s){if(Li(e)){if(fc(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(st(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Xa.POINT)return n.pointPadding}}function pBt(e,t,n,r,i,s=!1){if(e===void 0){if(Li(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Fi(o,n==="bar"?a:u)}else if(q2(t)&&r===Xa.BAND)return i.offsetBandPaddingInner}}function mBt(e,t,n,r,i,s=!1){if(e===void 0){if(Li(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Xa.BAND)return Fi(o,Pt(r)?{signal:`${r.signal}/2`}:r/2)}else if(q2(t)){if(n===Xa.POINT)return .5;if(n===Xa.BAND)return i.offsetBandPaddingOuter}}}function gBt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return zu(e)&&t==="descending"?Pt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(zu(e)&&t==="descending")return!0}function yBt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&zu(i)){if(Ue(n)){const u=n[0],l=n[n.length-1];if(Wn(u)&&u<=0&&Wn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Wb(i))return!0;if(!(st(t)&&t.bin)&&Mn([...ld,...pFt],e)){const{orient:u,type:l}=r;return Mn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Mn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function vBt(e,t,n,r,i=!1){const s=bBt(t,n,r,i),{type:o}=e;return Yh(t)?o!==void 0?vLt(t,o)?st(n)&&!yLt(o,n.type)?(it(b6t(o,s)),s):o:(it(v6t(t,o,s)),s):s:null}function bBt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(jv(e)||X6(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&it(Q6(e,"ordinal")),"ordinal";if(Li(e)||q2(e)){if(Mn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in pY)return"band";const s=n[su(e)];return uy(s)||Yb(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return jv(e)?"time":X6(e)==="discrete"?(it(Q6(e,"temporal")),"ordinal"):st(t)&&t.timeUnit&&Ns(t.timeUnit).utc?"utc":"time";case"quantitative":return jv(e)?st(t)&&Fr(t.bin)?"bin-ordinal":"linear":X6(e)==="discrete"?(it(Q6(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(xAe(t.type))}function _Bt(e,{ignoreRange:t}={}){iNe(e),GIe(e);for(const n of gLt)tNe(e,n);t||nNe(e)}function iNe(e){wi(e)?e.component.scales=EBt(e):e.component.scales=xBt(e)}function EBt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of cM){const o=os(t[s]);if(o&&n===eDe&&s===iu&&o.type===Z_)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=bDe(t,s),l=vBt(a,s,o,r,u);i[s]=new KIe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const wBt=XDe((e,t)=>nae(e)-nae(t));function xBt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){iNe(s);for(const o of et(s.component.scales))if((t=i.scale)[o]??(t[o]=OIe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?oLt(a.value,u.value)?r[o]=Mm(a,u,"type","scale",wBt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of et(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new KIe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class oL{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function wi(e){return(e==null?void 0:e.type)==="unit"}function Iu(e){return(e==null?void 0:e.type)==="facet"}function yK(e){return(e==null?void 0:e.type)==="concat"}function iE(e){return(e==null?void 0:e.type)==="layer"}class vK{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Pa(a),this.name=t.name??i,this.title=gp(t.title)?{text:t.title}:t.title?Pa(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new oL,this.projectionNameMap=r?r.projectionNameMap:new oL,this.signalNameMap=r?r.signalNameMap:new oL,this.data=t.data,this.description=t.description,this.transforms=N5t(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:O4t(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:bM(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Xh,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){_Bt(this)}parseProjection(){HIe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){BIe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of et(r)){const o=r[s];o!==void 0&&(i[s]=Vr(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Vr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:_r(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=H8t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of dl)t[r].title&&n.push(L8t(this,r));for(const r of uK)n=n.concat(B8t(this,r));return n}assembleAxes(){return T8t(this.component.axes,this.config)}assembleLegends(){return zIe(this)}assembleProjections(){return h9t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...pAe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Mn(["unit","layer"],this.type)?Mn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),_r(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Iu(this.parent)?YIe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return ri((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ei[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Iu(this.parent)){const n=RIe(t),r=lM(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Rs(s)&&hg(o)){const a=i.get("name"),u=MM(this,r),l=gK(u);if(l){const c=ft({aggregate:"distinct",field:l},{expr:"datum"});return{signal:kIe(a,i,c)}}else return it(yY(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(sAe(t)&&Yh(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(FFt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class sNe extends vK{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ft(r,n)}reduceFieldDef(t,n){return l4t(this.getMapping(),(r,i,s)=>{const o=jf(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){HY(this.getMapping(),(r,i)=>{const s=jf(r);s&&t(s,i)},n)}}class $M extends mr{clone(){return new $M(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${On(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class FM extends mr{clone(){return new FM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${On(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class pT extends mr{clone(){return new pT(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(ir("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Yh(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");zu(d)&&l.aggregate!=="count"&&!Qy(i)&&(u[l.field]=l)}return u},{});return et(a).length?new pT(t,a):null}dependentFields(){return new Set(et(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${On(this.filter)}`}assemble(){const t=et(this.filter).reduce((n,r)=>{const i=this.filter[r],s=ft(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class LM extends mr{clone(){return new LM(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${On(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class BM extends mr{clone(){return new BM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${On(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Vv extends mr{clone(){return new Vv(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[zc,jc],[Al,Uc]]){const s=i.map(o=>{const a=os(n.encoding[o]);return st(a)?a.field:cd(a)?{expr:`${a.datum}`}:Nc(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Vv(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(iu)){const i=n.typedFieldDef(iu);i.type===Z_&&(t=new Vv(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(yt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${On(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class mT extends mr{clone(){return new mT(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[zc,jc],[Al,Uc]]){const i=r.map(o=>{const a=os(n.encoding[o]);return st(a)?a.field:cd(a)?{expr:`${a.datum}`}:Nc(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Al?"2":"";(i[0]||i[1])&&(t=new mT(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(yt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${On(this.fields)} ${On(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class T0 extends mr{clone(){return new T0(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new T0(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(st(i)&&st(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=EDe(n.mark,r);return new T0(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${On(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:f5t(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class jM extends mr{clone(){return new jM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${On(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class gT extends mr{clone(){return new gT(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(d5t(o)){let u=uNe(o.data,s);u||(u=new fy(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Qa(u,l,ei.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(h5t(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(ri(u),u)}catch{throw new Error(zFt(u))}if(a=l.materialized,!a)throw new Error(UFt(u))}return new gT(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?gt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${On({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:gt(this.transform.as)}:{}};else{let n=this.transform.as;yt(n)||(it(XFt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class zM extends mr{clone(){return new zM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${On(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class UM extends mr{clone(){return new UM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${On(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class VM extends mr{clone(){return new VM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gf((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${On(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class HM extends mr{clone(){return new HM(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${On(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function oNe(e){let t=0;function n(r,i){if(r instanceof fy&&!r.isGenerator&&!Xb(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ko&&(r.parent instanceof fy&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof nE){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof eC||r instanceof tC||r instanceof pT||r instanceof tE||r instanceof Jb||r instanceof mT||r instanceof wc||r instanceof gT||r instanceof rE||r instanceof e1||r instanceof BM||r instanceof LM||r instanceof $M||r instanceof jM||r instanceof zM||r instanceof UM||r instanceof Lm||r instanceof HM||r instanceof VM||r instanceof FM)&&i.transform.push(r.assemble()),(r instanceof Df||r instanceof Af||r instanceof T0||r instanceof sh||r instanceof Vv)&&i.transform.push(...r.assemble()),r instanceof Qa&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Qa?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Qa&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function SBt(e){const t=[],n=oNe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function TBt(e,t){const n=[],r=oNe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function CBt(e){return e==="top"||e==="left"||Pt(e)?"header":"footer"}function ABt(e){for(const t of dl)DBt(e,t);Qae(e,"x"),Qae(e,"y")}function DBt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=e_("title",null,r,t);let l=zv(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ue(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=e_("labelOrient",a.header,r,t),f=a.header!==null?Fi((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Mn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[aNe(e,t,f)]}}}function aNe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Qae(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=fK(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=CBt(a.get("orient"));o[u]??(o[u]=[aNe(e,s,!1)]);const l=qw(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function IBt(e){bK(e),gR(e,"width"),gR(e,"height")}function NBt(e){bK(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";gR(e,t),gR(e,n)}function bK(e){for(const t of e.children)t.parseLayoutSize()}function gR(e,t){const n=RIe(t),r=lM(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??OIe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Mm(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function kBt(e){const{size:t,component:n}=e;for(const r of ld){const i=su(r);if(t[i]){const s=t[i];n.layoutSize.set(i,zf(s)?"step":s,!0)}else{const s=RBt(e,i);n.layoutSize.set(i,s,!1)}}}function RBt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Rs(s)){const a=dR(r.view,t);return hg(o)||zf(a)?"step":a}else return X9(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return X9(r.view,t);{const s=dR(r.view,t);return zf(s)?s.step:s}}}function cB(e,t,n){return ft(t,{suffix:`by_${ft(e)}`,...n})}class Ux extends sNe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=SK(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!K2(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=et(t),r={};for(const i of n){if(![nh,rh].includes(i)){it(dM(i,"facet"));break}const s=t[i];if(s.field===void 0){it(q9(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=UY(t,n);return r.header?r.header=Pa(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=qM(this),this.child.parseData()}parseLayoutSize(){bK(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),ABt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of dl)for(const r of lK){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=e_("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=PM(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Ux))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Ux?{...this.channelHasField("column")?{encode:{update:{columns:{field:ft(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Ux){if(this.child.channelHasField("column")){const i=ft(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of ld){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Rs(o)&&hg(a)){const u=MM(this.child,i),l=gK(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):it(yY(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of dl){const f=this.facet[c];if(f){u.push(ft(f));const{bin:d,sort:h}=f;if(Fr(d)&&u.push(ft(f,{binSuffix:"end"})),Cf(h)){const{field:p,op:m=vM}=h,g=cB(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ue(h)){const p=Zb(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Cf(r.sort)?[cB(r,r.sort,{expr:"datum"})]:Ue(r.sort)?[Zb(r,t,{expr:"datum"})]:[ft(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Cf(i)?i.order:!Ue(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return iB(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of uK)if(t[s]){const o=e_("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return iB(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=SBt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:dl.map(u=>this.facetSortFields(u)).flat(),order:dl.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(V5t(this,[]))}]}getMapping(){return this.facet}}function PBt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Cf(s.sort)){const{field:o,op:a=vM}=s.sort;e=i=new e1(e,{joinaggregate:[{op:a,field:o,as:cB(s,s.sort,{forAs:!0})}],groupby:[ft(s)]})}return i}return null}function uNe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(hT(e)&&hT(a)){if(Tu(e.values,a.values))return o}else if(Xb(e)&&Xb(a)){if(e.url===a.url)return o}else if(QDe(e)&&e.name===o.dataName)return o}}return null}function OBt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new fy({values:[]});return t.push(r),r}const n=uNe(e.data,t);if(n)return um(e.data)||(n.data.format=GCe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new fy(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function MBt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(x5t(i))o=e=new Jb(e,i),s="derived";else if(tK(i)){const a=C9t(i);o=e=ko.makeWithAncestors(e,{},a,n)??e,e=new tE(e,t,i.filter)}else if(WDe(i))o=e=Df.makeFromTransform(e,i,t),s="number";else if(T5t(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ko(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Af.makeFromTransform(e,i);else if(C5t(i))o=e=wc.makeFromTransform(e,i),s="number",aK(t)&&(e=new Lm(e));else if(qDe(i))o=e=gT.make(e,t,i,r++),s="derived";else if(_5t(i))o=e=new rE(e,i),s="number";else if(E5t(i))o=e=new e1(e,i),s="number";else if(A5t(i))o=e=sh.makeFromTransform(e,i),s="derived";else if(D5t(i))o=e=new BM(e,i),s="derived";else if(I5t(i))o=e=new FM(e,i),s="derived";else if(w5t(i))o=e=new LM(e,i),s="derived";else if(p5t(i))o=e=new VM(e,i),s="derived";else if(b5t(i))e=new HM(e,i);else if(S5t(i))o=e=T0.makeFromTransform(e,i),s="derived";else if(m5t(i))o=e=new $M(e,i),s="derived";else if(g5t(i))o=e=new zM(e,i),s="derived";else if(y5t(i))o=e=new UM(e,i),s="derived";else if(v5t(i))o=e=new jM(e,i),s="derived";else{it(KFt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function qM(e){var h;let t=OBt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(um(i)||Xb(i)||hT(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new z5t;um(i)?(JDe(i)?t=new tC(t,i.sequence):nK(i)&&(t=new eC(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ko.makeExplicit(t,e,o)??t,t=new Lm(t);const a=e.parent&&iE(e.parent);(wi(e)||Iu(e))&&a&&(t=Df.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=MBt(t,e,o));const u=D9t(e),l=A9t(e);t=ko.makeWithAncestors(t,{},{...u,...l},o)??t,wi(e)&&(t=Vv.parseAll(t,e),t=mT.parseAll(t,e)),(wi(e)||Iu(e))&&(a||(t=Df.makeFromEncoding(t,e)??t),t=Af.makeFromEncoding(t,e)??t,t=Jb.parseAllForSortIndex(t,e));const c=t=Jae(ei.Raw,e,t);if(wi(e)){const p=wc.makeFromEncoding(t,e);p&&(t=p,aK(e)&&(t=new Lm(t))),t=T0.makeFromEncoding(t,e)??t,t=sh.makeFromEncoding(t,e)??t}wi(e)&&(t=pT.make(t,e)??t);const f=t=Jae(ei.Main,e,t);wi(e)&&x8t(e,f);let d=null;if(Iu(e)){const p=e.getName("facet");t=PBt(t,e.facet)??t,d=new nE(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Jae(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Qa(n,s,e,i);return r[s]=o,o}class $Bt extends vK{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&it(WFt),this.children=this.getChildren(t).map((l,c)=>SK(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=qM(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of et(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return CM(t)?t.vconcat:ZY(t)?t.hconcat:t.concat}parseLayoutSize(){NBt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=cK(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function FBt(e){return e===!1||e===null}const LBt={disable:1,gridScale:1,scale:1,...gDe,labelExpr:1,encode:1},lNe=et(LBt);class _K extends Xh{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new _K(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!FBt(this.get(t))}hasOrientSignalRef(){return Pt(this.explicit.orient)}}function BBt(e,t,n){const{encoding:r,config:i}=e,s=os(r[t])??os(r[ud(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(ay(u))return{text:dc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Gb(s)==="quantitative"){if(Yb(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:dc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:dc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Gb(s)==="temporal"&&i.timeFormatType&&st(s)&&!s.timeUnit)return{text:dc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function jBt(e){return ld.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[GBt(n,e)]),t),{})}const zBt={bottom:"top",top:"bottom",left:"right",right:"left"};function UBt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of et(i.component.axes))n.axis[s]=fK(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=VBt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of ld){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Pt(a)){if(r[a]>0&&!u){const l=zBt[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function VBt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=HBt(i,s)}}}else return t.map(n=>n.clone());return e}function HBt(e,t){for(const n of lNe){const r=Mm(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return EAe(i,s);case"gridScale":return{explicit:i.explicit,value:Fi(i.value,s.value)}}return DM(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function qBt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Pt(n.labelAngle)?n.labelAngle:fT(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===AIe(r,i))return!0}return e===n[t]}const WBt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function GBt(e,t){var y,v;let n=t.axis(e);const r=new _K,i=os(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||P8t(e),u=t.getScaleComponent(e).get("type"),l=C8t(e,u,a,t.config),c=n!==void 0?!n:nB("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=N8t(i,n,e,o.style,l),d=XAe(n.formatType,i,u),h=KAe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of lNe){const E=b in $ae?$ae[b](p):lae(b)?n[b]:void 0,_=E!==void 0,x=qBt(E,b,n,t,e);if(_&&x)r.set(b,E,x);else{const{configValue:S=void 0,configFrom:C=void 0}=lae(b)&&b!=="values"?nB(b,o.style,n.style,l):{},A=S!==void 0;_&&!A?r.set(b,E,x):(C!=="vgAxisConfig"||WBt.has(b)&&A||J2(S)||Pt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=mDe.reduce((b,E)=>{if(!r.hasAxisPart(E))return b;const _=PIe(m[E]??{},t),x=E==="labels"?BBt(t,e,_):_;return x!==void 0&&!_r(x)&&(b[E]={update:x}),b},{});return _r(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function YBt({encoding:e,size:t}){for(const n of ld){const r=su(n);zf(t[r])&&jp(e[n])&&(delete t[r],it(CAe(r)))}return t}const KBt={vgMark:"arc",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...No("x",e,{defaultPos:"mid"}),...No("y",e,{defaultPos:"mid"}),...$m(e,"radius"),...$m(e,"theta")})},XBt={vgMark:"area",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...hR("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...hR("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...oK(e)})},QBt={vgMark:"rect",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$m(e,"x"),...$m(e,"y")})},JBt={vgMark:"shape",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&st(n)&&n.type===Z_?{field:ft(n,{expr:"datum"})}:{}}]}},ZBt={vgMark:"image",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...$m(e,"x"),...$m(e,"y"),...iK(e,"url")})},e7t={vgMark:"line",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...No("x",e,{defaultPos:"mid"}),...No("y",e,{defaultPos:"mid"}),...xs("size",e,{vgChannel:"strokeWidth"}),...oK(e)})},t7t={vgMark:"trail",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...No("x",e,{defaultPos:"mid"}),...No("y",e,{defaultPos:"mid"}),...xs("size",e),...oK(e)})};function EK(e,t){const{config:n}=e;return{...Fl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...No("x",e,{defaultPos:"mid"}),...No("y",e,{defaultPos:"mid"}),...xs("size",e),...xs("angle",e),...n7t(e,n,t)}}function n7t(e,t,n){return n?{shape:{value:n}}:xs("shape",e)}const r7t={vgMark:"symbol",encodeEntry:e=>EK(e)},i7t={vgMark:"symbol",encodeEntry:e=>EK(e,"circle")},s7t={vgMark:"symbol",encodeEntry:e=>EK(e,"square")},o7t={vgMark:"rect",encodeEntry:e=>({...Fl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$m(e,"x"),...$m(e,"y")})},a7t={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Fl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...hR("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...hR("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...xs("size",e,{vgChannel:"strokeWidth"})}}},u7t={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Fl(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...No("x",e,{defaultPos:"mid"}),...No("y",e,{defaultPos:"mid"}),...iK(e),...xs("size",e,{vgChannel:"fontSize"}),...xs("angle",e),...Rae("align",l7t(e.markDef,n,t)),...Rae("baseline",c7t(e.markDef,n,t)),...No("radius",e,{defaultPos:null}),...No("theta",e,{defaultPos:null})}}};function l7t(e,t,n){if(ir("align",e,n)===void 0)return"center"}function c7t(e,t,n){if(ir("baseline",e,n)===void 0)return"middle"}const f7t={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Fl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...No("x",e,{defaultPos:"mid",vgChannel:"xc"}),...No("y",e,{defaultPos:"mid",vgChannel:"yc"}),...xs("size",e,{defaultValue:d7t(e),vgChannel:i}),[s]:Vr(ir("thickness",n,t))}}};function d7t(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=ir("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&hg(a)&&Wn(a.step)?a.step*3/4:fR(t.view,i)*3/4}}const WA={arc:KBt,area:XBt,bar:QBt,circle:i7t,geoshape:JBt,image:ZBt,line:e7t,point:r7t,rect:o7t,rule:a7t,square:s7t,text:u7t,tick:f7t,trail:t7t};function h7t(e){if(Mn([gM,pM,DLt],e.mark)){const t=EDe(e.mark,e.encoding);if(t.length>0)return p7t(e,t)}else if(e.mark===mM){const t=H9.some(n=>ir(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return m7t(e)}return wK(e)}const Zae="faceted_path_";function p7t(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Zae+e.requestDataName(ei.Main),data:e.requestDataName(ei.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:wK(e,{fromPrefix:Zae})}]}const eue="stack_group_";function m7t(e){var l;const[t]=wK(e,{fromPrefix:eue}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...zb(t.encode.update,["y","yc","y2","height",...H9]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ka(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...zb(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ka(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of H9){const f=Ih(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Vr(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ft(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ft(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Ih(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Vr(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ei.Main),name:eue+e.requestDataName(ei.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function g7t(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ue(o)&&Nc(o)&&U9(o.value)||!o&&U9(ir("order",i,s)))){if((Ue(o)||st(o))&&!n)return vAe(o,{expr:"datum"});if(Qy(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(st(l)){const c=l.sort;if(Ue(c))return{field:ft(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Cf(c))return{field:ft({aggregate:VY(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(rDe(c)){const f=e.fieldDef(c.encoding);return{field:ft(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ft(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function wK(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Fi(r.clip,y7t(e),v7t(e)),a=gAe(r),u=i.key,l=g7t(e),c=b7t(e),f=ir("aria",r,s),d=WA[n].postEncodingTransform?WA[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:WA[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(ei.Main)},encode:{update:WA[n].encodeEntry(e)},...d?{transform:d}:{}}]}function y7t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function v7t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function b7t(e){if(!e.component.selection)return null;const t=et(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=et(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class cNe extends sNe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,fae(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Bf(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=r5t(o,s,{graticule:t.data&&nK(t.data)}));const u=this.encoding=a4t(t.encoding||{},a,o.filled,s);this.markDef=UDe(o,u,s),this.size=YBt({encoding:u,size:fae(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=zDe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>QY(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===eDe,r=t&&sFt.some(i=>ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return cM.reduce((r,i)=>{const s=os(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Pa(t);return Ue(n)&&(i.domain=n.map(yu)),Ue(r)&&(i.range=r.map(yu)),i}initAxes(t){return ld.reduce((n,r)=>{const i=t[r];if(ln(i)||r===ii&&ln(t.x2)||r===$s&&ln(t.y2)){const s=ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=et(t),r={};for(const i of n){const s=t[i];r[i]=J2(s)?mAe(s):yu(s)}return r}initLegends(t){return mFt.reduce((n,r)=>{const i=os(t[r]);if(i&&yFt(r)){const s=i.legend;n[r]=s&&Pa(s)}return n},{})}parseData(){this.component.data=qM(this)}parseLayoutSize(){kBt(this)}parseSelections(){this.component.selection=w8t(this,this.selection)}parseMarkGroup(){this.component.mark=h7t(this)}parseAxesAndHeaders(){this.component.axes=jBt(this)}assembleSelectionTopLevelSignals(t){return H5t(this,t)}assembleSignals(){return[...SIe(this),...U5t(this,[])]}assembleSelectionData(t){return q5t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return cK(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!iE(this.parent))&&(t=tIe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return x0(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return jf(n)}typedFieldDef(t){const n=this.fieldDef(t);return ha(n)?n:null}}class xK extends vK{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(AM(a))return new xK(a,this,this.getName(`layer_${u}`),o,s);if(Kh(a))return new cNe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(gY(a))})}parseData(){this.component.data=qM(this);for(const t of this.children)t.parseData()}parseLayoutSize(){IBt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of et(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){UBt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),SIe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),cK(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of gt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return W5t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),zIe(this))}}function SK(e,t,n,r,i){if(bM(e))return new Ux(e,t,n,i);if(AM(e))return new xK(e,t,n,r,i);if(Kh(e))return new cNe(e,t,n,r,i);if(k4t(e))return new $Bt(e,t,n,i);throw new Error(gY(e))}function _7t(e,t={}){t.logger&&$6t(t.logger),t.fieldTitle&&dDe(t.fieldTitle);try{const n=jDe(j_(t.config,e.config)),r=KDe(e,n),i=SK(r,null,"",void 0,n);return i.parse(),H9t(i.component.data,i),{spec:w7t(i,E7t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&F6t(),t.fieldTitle&&JLt()}}function E7t(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):yt(t)&&(t={type:t}),i&&s&&L5t(t.type)){if(i==="step"&&s==="step")it(Koe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";it(Koe(lM(o)));const a=o==="width"?"height":"width";t.type=B5t(a)}}return{...et(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...xae(n,!1),...xae(e,!0)}}function w7t(e,t,n={},r){const i=e.config?q4t(e.config):void 0,s=[].concat(e.assembleSelectionData([]),TBt(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...$De(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const x7t=Z$t.version,S7t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Ub,accessPathWithDatum:aY,compile:_7t,contains:Mn,deepEqual:Tu,deleteNestedProperty:tR,duplicate:tn,entries:Rm,every:iY,fieldIntersection:oY,flatAccessWithDatum:KCe,getFirstDefined:Fi,hasIntersection:sY,hash:On,internalField:JCe,isBoolean:cT,isEmpty:_r,isEqual:tFt,isInternalField:ZCe,isNullOrFalse:U9,isNumeric:rM,keys:et,logicalExpr:jx,mergeDeep:GCe,never:WCe,normalize:KDe,normalizeAngle:fT,omit:Ka,pick:zb,prefixGenerator:V9,removePathFromField:Q_,replaceAll:ry,replacePathInField:Cl,resetIdCounter:rFt,setEqual:YCe,some:ny,stringify:Er,titleCase:U2,unique:gf,uniqueId:QCe,vals:ro,varName:ri,version:x7t},Symbol.toStringTag,{value:"Module"}));function fNe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var T7t="vega-themes",C7t="2.15.0",A7t="Themes for stylized Vega and Vega-Lite visualizations.",D7t=["vega","vega-lite","themes","style"],I7t="BSD-3-Clause",N7t={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},k7t=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],R7t="build/vega-themes.js",TK="build/vega-themes.module.js",P7t="build/vega-themes.min.js",O7t="build/vega-themes.min.js",M7t="build/vega-themes.module.d.ts",$7t={type:"git",url:"https://github.com/vega/vega-themes.git"},F7t=["src","build"],L7t={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},B7t={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},j7t={vega:"*","vega-lite":"*"},z7t={},U7t={name:T7t,version:C7t,description:A7t,keywords:D7t,license:I7t,author:N7t,contributors:k7t,main:R7t,module:TK,unpkg:P7t,jsdelivr:O7t,types:M7t,repository:$7t,files:F7t,scripts:L7t,devDependencies:B7t,peerDependencies:j7t,dependencies:z7t};const I1="#fff",tue="#888",V7t={background:"#333",view:{stroke:tue},title:{color:I1,subtitleColor:I1},style:{"guide-label":{fill:I1},"guide-title":{fill:I1}},axis:{domainColor:I1,gridColor:tue,tickColor:I1}},Tg="#4572a7",H7t={background:"#fff",arc:{fill:Tg},area:{fill:Tg},line:{stroke:Tg,strokeWidth:2},path:{stroke:Tg},rect:{fill:Tg},shape:{stroke:Tg},symbol:{fill:Tg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Cg="#30a2da",aL="#cbcbcb",q7t="#999",W7t="#333",nue="#f0f0f0",rue="#333",G7t={arc:{fill:Cg},area:{fill:Cg},axis:{domainColor:aL,grid:!0,gridColor:aL,gridWidth:1,labelColor:q7t,labelFontSize:10,titleColor:W7t,tickColor:aL,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:nue,group:{fill:nue},legend:{labelColor:rue,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:rue,titleFontSize:14,titlePadding:10},line:{stroke:Cg,strokeWidth:2},path:{stroke:Cg,strokeWidth:.5},rect:{fill:Cg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Cg},bar:{binSpacing:2,fill:Cg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ag="#000",Y7t={group:{fill:"#e5e5e5"},arc:{fill:Ag},area:{fill:Ag},line:{stroke:Ag},path:{stroke:Ag},rect:{fill:Ag},shape:{stroke:Ag},symbol:{fill:Ag,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},K7t=22,X7t="normal",iue="Benton Gothic, sans-serif",sue=11.5,Q7t="normal",Dg="#82c6df",uL="Benton Gothic Bold, sans-serif",oue="normal",aue=13,nw={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},J7t={background:"#ffffff",title:{anchor:"start",color:"#000000",font:uL,fontSize:K7t,fontWeight:X7t},arc:{fill:Dg},area:{fill:Dg},line:{stroke:Dg,strokeWidth:2},path:{stroke:Dg},rect:{fill:Dg},shape:{stroke:Dg},symbol:{fill:Dg,size:30},axis:{labelFont:iue,labelFontSize:sue,labelFontWeight:Q7t,titleFont:uL,titleFontSize:aue,titleFontWeight:oue},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:iue,labelFontSize:sue,symbolType:"square",titleFont:uL,titleFontSize:aue,titleFontWeight:oue},range:{category:nw["category-6"],diverging:nw["fireandice-6"],heatmap:nw["fire-7"],ordinal:nw["fire-7"],ramp:nw["fire-7"]}},Ig="#ab5787",GA="#979797",Z7t={background:"#f9f9f9",arc:{fill:Ig},area:{fill:Ig},line:{stroke:Ig},path:{stroke:Ig},rect:{fill:Ig},shape:{stroke:Ig},symbol:{fill:Ig,size:30},axis:{domainColor:GA,domainWidth:.5,gridWidth:.2,labelColor:GA,tickColor:GA,tickWidth:.2,titleColor:GA},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ng="#3e5c69",ejt={background:"#fff",arc:{fill:Ng},area:{fill:Ng},line:{stroke:Ng},path:{stroke:Ng},rect:{fill:Ng},shape:{stroke:Ng},symbol:{fill:Ng},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ju="#1696d2",uue="#000000",tjt="#FFFFFF",YA="Lato",lL="Lato",njt="Lato",rjt="#DEDDDD",ijt=18,rw={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},sjt={background:tjt,title:{anchor:"start",fontSize:ijt,font:YA},axisX:{domain:!0,domainColor:uue,domainWidth:1,grid:!1,labelFontSize:12,labelFont:lL,labelAngle:0,tickColor:uue,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:YA},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:rjt,gridWidth:1,labelFontSize:12,labelFont:lL,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:YA,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:lL,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:YA,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:rw["six-groups-cat-1"],diverging:rw["diverging-colors"],heatmap:rw["diverging-colors"],ordinal:rw["six-groups-seq"],ramp:rw["shades-blue"]},area:{fill:Ju},rect:{fill:Ju},line:{color:Ju,stroke:Ju,strokeWidth:5},trail:{color:Ju,stroke:Ju,strokeWidth:0,size:1},path:{stroke:Ju,strokeWidth:.5},point:{filled:!0},text:{font:njt,color:Ju,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ju,stroke:null}},arc:{fill:Ju},shape:{stroke:Ju},symbol:{fill:Ju,size:30}},kg="#3366CC",lue="#ccc",KA="Arial, sans-serif",ojt={arc:{fill:kg},area:{fill:kg},path:{stroke:kg},rect:{fill:kg},shape:{stroke:kg},symbol:{stroke:kg},circle:{fill:kg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:KA,fontSize:12},"guide-title":{font:KA,fontSize:12},"group-title":{font:KA,fontSize:12}},title:{font:KA,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:lue,tickColor:lue,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},CK=e=>e*(1/3+1),cue=CK(9),fue=CK(10),due=CK(12),iw="Segoe UI",hue="wf_standard-font, helvetica, arial, sans-serif",pue="#252423",sw="#605E5C",mue="transparent",ajt="#C8C6C4",Wl="#118DFF",ujt="#12239E",ljt="#E66C37",cjt="#6B007B",fjt="#E044A7",djt="#744EC2",hjt="#D9B300",pjt="#D64550",dNe=Wl,hNe="#DEEFFF",gue=[hNe,dNe],mjt=[hNe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",dNe],gjt={view:{stroke:mue},background:mue,font:iw,header:{titleFont:hue,titleFontSize:due,titleColor:pue,labelFont:iw,labelFontSize:fue,labelColor:sw},axis:{ticks:!1,grid:!1,domain:!1,labelColor:sw,labelFontSize:cue,titleFont:hue,titleColor:pue,titleFontSize:due,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:ajt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Wl},line:{stroke:Wl,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:iw,fontSize:cue,fill:sw},arc:{fill:Wl},area:{fill:Wl,line:!0,opacity:.6},path:{stroke:Wl},rect:{fill:Wl},point:{fill:Wl,filled:!0,size:75},shape:{stroke:Wl},symbol:{fill:Wl,strokeWidth:1.5,size:50},legend:{titleFont:iw,titleFontWeight:"bold",titleColor:sw,labelFont:iw,labelFontSize:fue,labelColor:sw,symbolType:"circle",symbolSize:75},range:{category:[Wl,ujt,ljt,cjt,fjt,djt,hjt,pjt],diverging:gue,heatmap:gue,ordinal:mjt}},cL='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',yjt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',fL=400,XA={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},vjt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],bjt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function WM({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=XA.gridBg[e],i=XA.textPrimary[e],s=XA.textSecondary[e],o=n==="dark"?vjt:bjt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:cL,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:yjt,labelFontWeight:fL,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:XA.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:cL,fill:s,fontWeight:fL},"guide-title":{font:cL,fill:s,fontWeight:fL}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const _jt=WM({theme:"white",background:"#ffffff"}),Ejt=WM({theme:"g10",background:"#f4f4f4"}),wjt=WM({theme:"g90",background:"#262626"}),xjt=WM({theme:"g100",background:"#161616"}),Sjt=U7t.version,Tjt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Ejt,carbong100:xjt,carbong90:wjt,carbonwhite:_jt,dark:V7t,excel:H7t,fivethirtyeight:G7t,ggplot2:Y7t,googlecharts:ojt,latimes:J7t,powerbi:gjt,quartz:Z7t,urbaninstitute:sjt,version:Sjt,vox:ejt},Symbol.toStringTag,{value:"Module"}));function Cjt(e,t,n,r){if(Ue(e))return`[${e.map(i=>t(yt(i)?i:yue(i,n))).join(", ")}]`;if(vt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(vt(c)&&(c=yue(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Ajt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function yue(e,t){return JSON.stringify(e,Ajt(t))}var Djt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const pNe="vg-tooltip-element",Ijt={offsetX:10,offsetY:10,id:pNe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Njt,maxDepth:2,formatTooltip:Cjt,baseURL:""};function Njt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function kjt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Djt.toString().replace(pNe,e)}function Rjt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Pjt{constructor(t){this.options={...Ijt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=kjt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Rjt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var dL={};function Ojt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hL,vue;function Mjt(){return vue||(vue=1,hL=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),hL}var $jt=Zn;Zn.Node=dy;Zn.create=Zn;function Zn(e){var t=this;if(t instanceof Zn||(t=new Zn),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Zn.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Zn.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Zn.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Zn.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Ljt(this,arguments[e]);return this.length};Zn.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Bjt(this,arguments[e]);return this.length};Zn.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Zn.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Zn.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Zn.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Zn.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Zn.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Zn.prototype.map=function(e,t){t=t||this;for(var n=new Zn,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Zn.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Zn,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Zn.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Zn.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Zn.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Zn.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Zn.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Zn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Zn.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Zn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Zn.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Fjt(this,i,n[r]);return s};Zn.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Fjt(e,t,n){var r=t===e.head?new dy(n,null,t,e):new dy(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Ljt(e,t){e.tail=new dy(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Bjt(e,t){e.head=new dy(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function dy(e,t,n,r){if(!(this instanceof dy))return new dy(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Mjt()(Zn)}catch{}const jjt=$jt,Qg=Symbol("max"),Nd=Symbol("length"),N1=Symbol("lengthCalculator"),Vx=Symbol("allowStale"),l0=Symbol("maxAge"),Cd=Symbol("dispose"),bue=Symbol("noDisposeOnSet"),vs=Symbol("lruList"),Gl=Symbol("cache"),mNe=Symbol("updateAgeOnGet"),pL=()=>1;class zjt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Qg]=t.max||1/0;const n=t.length||pL;if(this[N1]=typeof n!="function"?pL:n,this[Vx]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[l0]=t.maxAge||0,this[Cd]=t.dispose,this[bue]=t.noDisposeOnSet||!1,this[mNe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Qg]=t||1/0,ow(this)}get max(){return this[Qg]}set allowStale(t){this[Vx]=!!t}get allowStale(){return this[Vx]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[l0]=t,ow(this)}get maxAge(){return this[l0]}set lengthCalculator(t){typeof t!="function"&&(t=pL),t!==this[N1]&&(this[N1]=t,this[Nd]=0,this[vs].forEach(n=>{n.length=this[N1](n.value,n.key),this[Nd]+=n.length})),ow(this)}get lengthCalculator(){return this[N1]}get length(){return this[Nd]}get itemCount(){return this[vs].length}rforEach(t,n){n=n||this;for(let r=this[vs].tail;r!==null;){const i=r.prev;_ue(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[vs].head;r!==null;){const i=r.next;_ue(this,t,r,n),r=i}}keys(){return this[vs].toArray().map(t=>t.key)}values(){return this[vs].toArray().map(t=>t.value)}reset(){this[Cd]&&this[vs]&&this[vs].length&&this[vs].forEach(t=>this[Cd](t.key,t.value)),this[Gl]=new Map,this[vs]=new jjt,this[Nd]=0}dump(){return this[vs].map(t=>yR(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[vs]}set(t,n,r){if(r=r||this[l0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[N1](n,t);if(this[Gl].has(t)){if(s>this[Qg])return Hv(this,this[Gl].get(t)),!1;const u=this[Gl].get(t).value;return this[Cd]&&(this[bue]||this[Cd](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Nd]+=s-u.length,u.length=s,this.get(t),ow(this),!0}const o=new Ujt(t,n,s,i,r);return o.length>this[Qg]?(this[Cd]&&this[Cd](t,n),!1):(this[Nd]+=o.length,this[vs].unshift(o),this[Gl].set(t,this[vs].head),ow(this),!0)}has(t){if(!this[Gl].has(t))return!1;const n=this[Gl].get(t).value;return!yR(this,n)}get(t){return mL(this,t,!0)}peek(t){return mL(this,t,!1)}pop(){const t=this[vs].tail;return t?(Hv(this,t),t.value):null}del(t){Hv(this,this[Gl].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Gl].forEach((t,n)=>mL(this,n,!1))}}const mL=(e,t,n)=>{const r=e[Gl].get(t);if(r){const i=r.value;if(yR(e,i)){if(Hv(e,r),!e[Vx])return}else n&&(e[mNe]&&(r.value.now=Date.now()),e[vs].unshiftNode(r));return i.value}},yR=(e,t)=>{if(!t||!t.maxAge&&!e[l0])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l0]&&n>e[l0]},ow=e=>{if(e[Nd]>e[Qg])for(let t=e[vs].tail;e[Nd]>e[Qg]&&t!==null;){const n=t.prev;Hv(e,t),t=n}},Hv=(e,t)=>{if(t){const n=t.value;e[Cd]&&e[Cd](n.key,n.value),e[Nd]-=n.length,e[Gl].delete(n.key),e[vs].removeNode(t)}};class Ujt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const _ue=(e,t,n,r)=>{let i=n.value;yR(e,i)&&(Hv(e,n),e[Vx]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Vjt=zjt;const Hjt=Object.freeze({loose:!0}),qjt=Object.freeze({}),Wjt=e=>e?typeof e!="object"?Hjt:e:qjt;var AK=Wjt,fB={exports:{}};const Gjt="2.0.0",gNe=256,Yjt=Number.MAX_SAFE_INTEGER||9007199254740991,Kjt=16,Xjt=gNe-6,Qjt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var DK={MAX_LENGTH:gNe,MAX_SAFE_COMPONENT_LENGTH:Kjt,MAX_SAFE_BUILD_LENGTH:Xjt,MAX_SAFE_INTEGER:Yjt,RELEASE_TYPES:Qjt,SEMVER_SPEC_VERSION:Gjt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Jjt=typeof process=="object"&&dL&&dL.NODE_DEBUG&&/\bsemver\b/i.test(dL.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var GM=Jjt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=DK,s=GM;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(fB,fB.exports);var IK=fB.exports;const Eue=/^[0-9]+$/,yNe=(e,t)=>{const n=Eue.test(e),r=Eue.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Zjt=(e,t)=>yNe(t,e);var ezt={compareIdentifiers:yNe,rcompareIdentifiers:Zjt};const QA=GM,{MAX_LENGTH:wue,MAX_SAFE_INTEGER:JA}=DK,{safeRe:xue,t:Sue}=IK,tzt=AK,{compareIdentifiers:k1}=ezt;let nzt=class Kc{constructor(t,n){if(n=tzt(n),t instanceof Kc){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>wue)throw new TypeError(`version is longer than ${wue} characters`);QA("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?xue[Sue.LOOSE]:xue[Sue.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>JA||this.major<0)throw new TypeError("Invalid major version");if(this.minor>JA||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>JA||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<JA)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(QA("SemVer.compare",this.version,this.options,t),!(t instanceof Kc)){if(typeof t=="string"&&t===this.version)return 0;t=new Kc(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Kc||(t=new Kc(t,this.options)),k1(this.major,t.major)||k1(this.minor,t.minor)||k1(this.patch,t.patch)}comparePre(t){if(t instanceof Kc||(t=new Kc(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(QA("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return k1(r,i)}while(++n)}compareBuild(t){t instanceof Kc||(t=new Kc(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(QA("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return k1(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),k1(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var NK=nzt;const Tue=NK,rzt=(e,t,n)=>new Tue(e,n).compare(new Tue(t,n));var sE=rzt;const izt=sE,szt=(e,t,n)=>izt(e,t,n)===0;var ozt=szt;const azt=sE,uzt=(e,t,n)=>azt(e,t,n)!==0;var lzt=uzt;const czt=sE,fzt=(e,t,n)=>czt(e,t,n)>0;var dzt=fzt;const hzt=sE,pzt=(e,t,n)=>hzt(e,t,n)>=0;var mzt=pzt;const gzt=sE,yzt=(e,t,n)=>gzt(e,t,n)<0;var vzt=yzt;const bzt=sE,_zt=(e,t,n)=>bzt(e,t,n)<=0;var Ezt=_zt;const wzt=ozt,xzt=lzt,Szt=dzt,Tzt=mzt,Czt=vzt,Azt=Ezt,Dzt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return wzt(e,n,r);case"!=":return xzt(e,n,r);case">":return Szt(e,n,r);case">=":return Tzt(e,n,r);case"<":return Czt(e,n,r);case"<=":return Azt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Izt=Dzt,gL,Cue;function Nzt(){if(Cue)return gL;Cue=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}gL=t;const n=AK,{safeRe:r,t:i}=IK,s=Izt,o=GM,a=NK,u=vNe();return gL}var yL,Aue;function vNe(){if(Aue)return yL;Aue=1;class e{constructor(M,F){if(F=r(F),M instanceof e)return M.loose===!!F.loose&&M.includePrerelease===!!F.includePrerelease?M:new e(M.raw,F);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(j=>!p(j[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&m(j[0])){this.set=[j];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const P=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+M,j=n.get(P);if(j)return j;const z=this.options.loose,V=z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];M=M.replace(V,I(this.options.includePrerelease)),s("hyphen replace",M),M=M.replace(a[u.COMPARATORTRIM],l),s("comparator trim",M),M=M.replace(a[u.TILDETRIM],c),s("tilde trim",M),M=M.replace(a[u.CARETTRIM],f),s("caret trim",M);let $=M.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>D(q,this.options));z&&($=$.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",$);const U=new Map,W=$.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];U.set(q.value,q)}U.size>1&&U.has("")&&U.delete("");const B=[...U.values()];return n.set(P,B),B}intersects(M,F){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(P=>g(P,F)&&M.set.some(j=>g(j,F)&&P.every(z=>j.every(V=>z.intersects(V,F)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new o(M,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],M,this.options))return!0;return!1}}yL=e;const t=Vjt,n=new t({max:1e3}),r=AK,i=Nzt(),s=GM,o=NK,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=IK,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=DK,p=R=>R.value==="<0.0.0-0",m=R=>R.value==="",g=(R,M)=>{let F=!0;const P=R.slice();let j=P.pop();for(;F&&P.length;)F=P.every(z=>j.intersects(z,M)),j=P.pop();return F},y=(R,M)=>(s("comp",R,M),R=_(R,M),s("caret",R),R=b(R,M),s("tildes",R),R=S(R,M),s("xrange",R),R=A(R,M),s("stars",R),R),v=R=>!R||R.toLowerCase()==="x"||R==="*",b=(R,M)=>R.trim().split(/\s+/).map(F=>E(F,M)).join(" "),E=(R,M)=>{const F=M.loose?a[u.TILDELOOSE]:a[u.TILDE];return R.replace(F,(P,j,z,V,$)=>{s("tilde",R,P,j,z,V,$);let U;return v(j)?U="":v(z)?U=`>=${j}.0.0 <${+j+1}.0.0-0`:v(V)?U=`>=${j}.${z}.0 <${j}.${+z+1}.0-0`:$?(s("replaceTilde pr",$),U=`>=${j}.${z}.${V}-${$} <${j}.${+z+1}.0-0`):U=`>=${j}.${z}.${V} <${j}.${+z+1}.0-0`,s("tilde return",U),U})},_=(R,M)=>R.trim().split(/\s+/).map(F=>x(F,M)).join(" "),x=(R,M)=>{s("caret",R,M);const F=M.loose?a[u.CARETLOOSE]:a[u.CARET],P=M.includePrerelease?"-0":"";return R.replace(F,(j,z,V,$,U)=>{s("caret",R,j,z,V,$,U);let W;return v(z)?W="":v(V)?W=`>=${z}.0.0${P} <${+z+1}.0.0-0`:v($)?z==="0"?W=`>=${z}.${V}.0${P} <${z}.${+V+1}.0-0`:W=`>=${z}.${V}.0${P} <${+z+1}.0.0-0`:U?(s("replaceCaret pr",U),z==="0"?V==="0"?W=`>=${z}.${V}.${$}-${U} <${z}.${V}.${+$+1}-0`:W=`>=${z}.${V}.${$}-${U} <${z}.${+V+1}.0-0`:W=`>=${z}.${V}.${$}-${U} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?V==="0"?W=`>=${z}.${V}.${$}${P} <${z}.${V}.${+$+1}-0`:W=`>=${z}.${V}.${$}${P} <${z}.${+V+1}.0-0`:W=`>=${z}.${V}.${$} <${+z+1}.0.0-0`),s("caret return",W),W})},S=(R,M)=>(s("replaceXRanges",R,M),R.split(/\s+/).map(F=>C(F,M)).join(" ")),C=(R,M)=>{R=R.trim();const F=M.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return R.replace(F,(P,j,z,V,$,U)=>{s("xRange",R,P,j,z,V,$,U);const W=v(z),B=W||v(V),q=B||v($),Y=q;return j==="="&&Y&&(j=""),U=M.includePrerelease?"-0":"",W?j===">"||j==="<"?P="<0.0.0-0":P="*":j&&Y?(B&&(V=0),$=0,j===">"?(j=">=",B?(z=+z+1,V=0,$=0):(V=+V+1,$=0)):j==="<="&&(j="<",B?z=+z+1:V=+V+1),j==="<"&&(U="-0"),P=`${j+z}.${V}.${$}${U}`):B?P=`>=${z}.0.0${U} <${+z+1}.0.0-0`:q&&(P=`>=${z}.${V}.0${U} <${z}.${+V+1}.0-0`),s("xRange return",P),P})},A=(R,M)=>(s("replaceStars",R,M),R.trim().replace(a[u.STAR],"")),D=(R,M)=>(s("replaceGTE0",R,M),R.trim().replace(a[M.includePrerelease?u.GTE0PRE:u.GTE0],"")),I=R=>(M,F,P,j,z,V,$,U,W,B,q,Y,re)=>(v(P)?F="":v(j)?F=`>=${P}.0.0${R?"-0":""}`:v(z)?F=`>=${P}.${j}.0${R?"-0":""}`:V?F=`>=${F}`:F=`>=${F}${R?"-0":""}`,v(W)?U="":v(B)?U=`<${+W+1}.0.0-0`:v(q)?U=`<${W}.${+B+1}.0-0`:Y?U=`<=${W}.${B}.${q}-${Y}`:R?U=`<${W}.${B}.${+q+1}-0`:U=`<=${U}`,`${F} ${U}`.trim()),O=(R,M,F)=>{for(let P=0;P<R.length;P++)if(!R[P].test(M))return!1;if(M.prerelease.length&&!F.includePrerelease){for(let P=0;P<R.length;P++)if(s(R[P].semver),R[P].semver!==i.ANY&&R[P].semver.prerelease.length>0){const j=R[P].semver;if(j.major===M.major&&j.minor===M.minor&&j.patch===M.patch)return!0}return!1}return!0};return yL}const kzt=vNe(),Rzt=(e,t,n)=>{try{t=new kzt(t,n)}catch{return!1}return t.test(e)};var Pzt=Rzt,bNe=Ojt(Pzt);function Ozt(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Mzt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function _Ne(e,...t){for(const n of t)$zt(e,n);return e}function $zt(e,t){for(const n of Object.keys(t))z_(e,n,t[n],!0)}const Kl=b$t;let yT=S7t;const ZA=typeof window<"u"?window:void 0;var Rue;yT===void 0&&((Rue=ZA==null?void 0:ZA.vl)!=null&&Rue.compile)&&(yT=ZA.vl);const Fzt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Lzt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Gw={vega:"Vega","vega-lite":"Vega-Lite"},vR={vega:Kl.version,"vega-lite":yT?yT.version:"not available"},Bzt={vega:e=>e,"vega-lite":(e,t)=>yT.compile(e,{config:t}).spec},jzt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,zzt="chart-wrapper";function Uzt(e){return typeof e=="function"}function Due(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${Gw[r]} JSON Source`}function Vzt(e,t){if(e.$schema){const n=fNe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Gw[n.library]}, but mode argument sets ${Gw[t]??t}.`);const r=n.library;return bNe(vR[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Gw[r]} ${n.version}, but the current version of ${Gw[r]} is v${vR[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function ENe(e){return!!(e&&"load"in e)}function Iue(e){return ENe(e)?e:Kl.loader(e)}function Hzt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return yt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function qzt(e,t,n={}){let r,i;yt(t)?(i=Iue(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Hzt(r),o=s.loader;(!i||o)&&(i=Iue(n.loader??o));const a=await Nue(s,i),u=await Nue(n,i),l={..._Ne(u,a),config:j_(u.config??{},a.config??{})};return await Gzt(e,r,l,i)}async function Nue(e,t){const n=yt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=yt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Wzt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Gzt(e,t,n={},r){const i=n.theme?j_(Tjt[n.theme],n.config??{}):n.config,s=ig(n.actions)?n.actions:_Ne({},Fzt,n.actions??{}),o={...Lzt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Kl.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:x,rootContainer:S}=Wzt(c);if(!x.getElementById(_)){const C=document.createElement("style");C.id=_,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Mzt.toString():n.defaultStyle,S.appendChild(C)}}const f=Vzt(t,n.mode);let d=Bzt[f](t,i);if(f==="vega-lite"&&d.$schema){const _=fNe(d.$schema);bNe(vR.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${vR.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const _=document.createElement("div");_.classList.add(zzt),c.appendChild(_),h=_}const p=n.patch;if(p&&(d=p instanceof Function?p(d):uO(d,p,!0,!1).newDocument),n.formatLocale&&Kl.formatLocale(n.formatLocale),n.timeFormatLocale&&Kl.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const x=n.expressionFunctions[_];"fn"in x?Kl.expressionFunction(_,x.fn,x.visitor):x instanceof Function&&Kl.expressionFunction(_,x)}const{ast:m}=n,g=Kl.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Kl.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Kl.expressionInterpreter??n.expr??I$t}:{}});if(y.addSignalListener("autosize",(_,x)=>{const{type:S}=x;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:x}=n,S=_&&!ENe(_)?_==null?void 0:_.baseURL:void 0,C=Uzt(x)?x:new Pjt({baseURL:S,...x===!0?{}:x}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:_,updateSet:x}=typeof v=="boolean"?{}:v;y.hover(_,x)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let _=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),_=S;const C=document.createElement("summary");C.innerHTML=jzt,S.append(C),b=A=>{S.contains(A.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const x=document.createElement("div");if(_.append(x),x.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const C=o[`${S.toUpperCase()}_ACTION`],A=document.createElement("a"),D=vt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${S}`,A.addEventListener("mousedown",async function(I){I.preventDefault();const O=await y.toImageURL(S,D);this.href=O}),x.append(A)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){Due(v6(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),x.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){Due(v6(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),x.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Ozt(window,S,{config:i,mode:f,renderer:a,spec:v6(t)}),A.preventDefault()}),x.append(C)}}function E(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function Yzt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Kzt(e,t,n){n&&(Yzt(n)?n(e.data(t)):e.change(t,Kl.changeset().remove(()=>!0).insert(n)))}function Xzt(e,t){Object.keys(t).forEach(n=>{Kzt(e,n,t[n])})}function wNe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const xNe=()=>{};function vL(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Qzt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=wNe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!ED(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function kue(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function bL(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function Yw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class SNe extends xi.PureComponent{constructor(){super(...arguments),Yw(this,"containerRef",xi.createRef()),Yw(this,"resultPromise",void 0),Yw(this,"handleError",t=>{const{onError:n=xNe}=this.props;n(t,this.containerRef.current),console.warn(t)}),Yw(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=wNe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Qzt(bL(this.props),bL(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!F8(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&kue(a,s),i&&vL(a,i)),a.run()})}else F8(i,s)||this.modifyView(o=>{s&&kue(o,s),i&&vL(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=bL(this.props);this.resultPromise=qzt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;vL(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return xi.createElement("div",{ref:this.containerRef,className:t,style:n})}}Yw(SNe,"propTypes",{className:Fie.string,onError:Fie.func});function dB(){return dB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dB.apply(this,arguments)}function hB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Jzt={};class TNe extends xi.PureComponent{constructor(){super(...arguments),hB(this,"vegaEmbed",xi.createRef()),hB(this,"handleNewView",t=>{this.update();const{onNewView:n=xNe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){F8(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Xzt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return xi.createElement(SNe,dB({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}hB(TNe,"defaultProps",{data:Jzt});function pB(){return pB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pB.apply(this,arguments)}function Zzt(e){return xi.createElement(TNe,pB({},e,{mode:"vega-lite"}))}function eUt(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function tUt(e){const{studyId:t,allParticipants:n,config:r}=e,i=Lh(),[s,o]=ofe(),a=n.filter(b=>b.completed).map(b=>Math.max(...Object.values(b.answers).map(E=>E.endTime).filter(E=>E!==void 0))).filter(b=>Number.isFinite(b)),[u,l]=k.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,f,d,h]=k.useMemo(()=>{const b=n.filter(x=>!x.rejected&&x.completed),E=n.filter(x=>!x.rejected&&!x.completed),_=n.filter(x=>x.rejected);return[b,E,_,b.filter(x=>eUt(x.answers,u))]},[n,u]),p=k.useMemo(()=>{var b,E;return h.length>0?[{Date:(b=u[0])==null?void 0:b.getTime(),Participants:0},...h.map(_=>Math.max(...Object.values(_.answers).map(x=>x.endTime).flat())).sort((_,x)=>_-x).map((_,x)=>({Date:_,Participants:x})),{Date:(E=u[1])==null?void 0:E.getTime(),Participants:h.length}]:[]},[h,u]),m=k.useMemo(()=>{var b,E;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(b=u[0])==null?void 0:b.getTime(),(E=u[1])==null?void 0:E.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,u,p]),[g,{close:y,open:v}]=_v(!1);return w.jsx(_l,{children:w.jsxs(Ey,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[w.jsxs(Jt,{align:"center",mb:"xs",justify:"space-between",children:[w.jsxs(Jt,{direction:"row",align:"center",children:[w.jsx(ci,{order:5,children:t}),w.jsx(BEe,{completed:c.length,inProgress:f.length,rejected:d.length,filteredCompleted:h.length})]}),w.jsxs(cs,{children:[w.jsx(LEe,{allParticipants:n,studyId:t}),w.jsxs(Rr,{opened:g,children:[w.jsx(Rr.Target,{children:w.jsx(In,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:w.jsx(W8e,{})})}),w.jsx(Rr.Dropdown,{children:w.jsx(Ze,{children:"Analyze and manage study data"})})]})]})]}),w.jsx(qH,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),p.length>0?w.jsxs(w.Fragment,{children:[w.jsx(Ze,{mt:16,children:"Finished Participants"}),w.jsx(Zzt,{spec:m,actions:!1})]}):w.jsx(we,{h:293.4,children:w.jsx(fs,{style:{height:"100%"},children:w.jsx(Ze,{children:"Not enough participants for chart"})})})]})})}function nUt(e){const{globalConfig:t}=e,[n,r]=k.useState(!1),[i,s]=k.useState({}),[o,a]=k.useState({}),[u,l]=k.useState({}),{storageEngine:c}=Qi(),{user:f}=By();k.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async b=>{const E=await x3(b,t);if(c){if(p[b]=await c.getAllParticipantsDataByStudy(b),E===null)return;if(m[b]=E,c instanceof il){const _=await c.getModes(b);g[b]=_.analyticsInterfacePubliclyAccessible}}};await(async()=>{const b=t.configsList.map(E=>y(E));try{await Promise.all(b),s(p),a(m),l(g)}catch(E){console.error("Error fetching data:",E)}finally{r(!1)}})()})()},[t,c]);const d=t.configsList.map(h=>i[h]&&(u[h]||f.isAdmin?w.jsx(ul.Col,{span:{md:12,xl:6},children:w.jsx(tUt,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return w.jsxs(we,{children:[w.jsx(ci,{mb:20,order:4,children:"Your Studies:"}),w.jsxs(ul,{children:[d.length>0?d:w.jsx(_l,{mt:100,children:w.jsx(Ze,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),w.jsx(Pu,{visible:n})]})]})}function rUt({globalConfig:e}){return w.jsxs(w.Fragment,{children:[w.jsx(Px,{studyIds:e.configsList}),w.jsx(Wr.Main,{children:w.jsx(_l,{fluid:!0,children:w.jsx(nUt,{globalConfig:e})})})]})}function iUt(){const{user:e,triggerAuth:t}=By(),{storageEngine:n}=Qi(),[r,i]=k.useState(!1),[s,o]=k.useState([]),[a,u]=k.useState(!1),[l,c]=k.useState(!1),[f,d]=k.useState(!1),[h,p]=k.useState(!1),[m,g]=k.useState(""),[y,v]=k.useState(null),b=Vme({initialValues:{email:""},validate:{email:$We("Invalid email")}});k.useEffect(()=>{(async()=>{if(u(!0),n instanceof il){const I=await(n==null?void 0:n.getUserManagementData("authentication"));i(I==null?void 0:I.isEnabled);const O=await(n==null?void 0:n.getUserManagementData("adminUsers"));O&&O.adminUsersList&&o(O==null?void 0:O.adminUsersList.map(R=>R.email))}else i(!1);u(!1)})()},[n]);const E=async()=>{if(u(!0),n instanceof il){const D=await jEe(n,u);D&&D.email&&v({email:D.email,uid:D.uid}),p(!0)}u(!1)},_=async D=>{u(!0),n instanceof il&&D&&(await n.changeAuth(!0),await n.addAdminUser(D),o([D.email]),i(!0),t()),p(!1),u(!1)},x=async()=>{if(u(!0),n instanceof il){await n.addAdminUser({email:b.values.email,uid:null});const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(I=>I.email))}u(!1),c(!1),b.setValues({email:""})},S=D=>{d(!0),g(D)},C=async()=>{if(u(!0),n instanceof il){await n.removeAdminUser(m);const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(I=>I.email))}d(!1),u(!1)},A=k.useMemo(()=>n instanceof il,[n]);return w.jsxs(w.Fragment,{children:[w.jsx(_l,{children:w.jsxs(Ey,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[w.jsx(ci,{mb:20,order:3,children:"Authentication"}),r?w.jsx(Jt,{children:w.jsx(Ze,{children:"Authentication is enabled."})}):w.jsxs(Jt,{justify:"space-between",children:[w.jsx(we,{children:w.jsx(Ze,{children:"Authentication is currently disabled."})}),w.jsx(Wi,{label:"You can only enable auth when using Firebase",disabled:A,children:w.jsx(In,{onClick:D=>A?E():D.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?w.jsxs(Jt,{mt:40,direction:"column",children:[w.jsxs(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[w.jsx(ci,{order:6,children:"Enabled Users"}),w.jsx(oz,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(D=>{var I;return w.jsxs(Jt,{justify:"space-between",mb:10,children:[w.jsx(Ze,{children:D}),D===((I=e.user)==null?void 0:I.email)?w.jsx(Ze,{color:"blue",size:"xs",children:"You"}):w.jsx(hm,{variant:"subtle",onClick:()=>S(D),children:w.jsx(zhe,{color:"red"})})]},D)}):null]}):null]})}),w.jsx(Ki,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:w.jsxs(we,{component:"form",onSubmit:b.onSubmit(()=>x()),children:[w.jsx(h0,{leftSection:w.jsx(U8e,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),w.jsxs(Jt,{mt:30,justify:"right",children:[w.jsx(In,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),w.jsx(In,{type:"submit",children:"Save"})]})]})}),w.jsxs(Ki,{opened:f,size:"large",onClose:()=>d(!1),title:w.jsxs(Ze,{fw:700,children:["Remove",m,"?"]}),children:[w.jsxs(Ze,{mt:40,children:["Are you sure you want to remove",w.jsx("b",{children:m})," ","as an administrator?"]}),w.jsxs(Jt,{mt:40,justify:"right",children:[w.jsx(In,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),w.jsx(In,{onClick:()=>C(),children:"Yes, I'm sure."})]})]}),w.jsxs(Ki,{opened:h,size:"md",onClose:()=>d(!1),title:w.jsx(Ze,{fw:700,children:"Enable Authentication?"}),children:[w.jsxs(Ze,{mt:40,children:["User"," ",w.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),w.jsxs(Jt,{mt:40,justify:"right",children:[w.jsx(In,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),w.jsx(In,{onClick:()=>_(y),children:"Yes, I'm sure."})]})]}),w.jsx(Pu,{visible:a})]})}class sUt extends $Ee{constructor(){super("localStorage");wa(this,"studyDatabase");wa(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await j1.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Sk(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await Sk(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await j1.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=xk();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=j1.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=xk();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await j1.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await j1.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function oUt(){let e,t=!1;{const n=new il;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new sUt;await n.connect(),e=n}return e}async function aUt(){const t=await(await fetch(`${qf}global.json`)).text();return wht(t)}function uUt(){const[e,t]=k.useState(null),[n,r]=k.useState({});k.useEffect(()=>{async function a(){e&&r(await fpt(e))}a()},[e]),k.useEffect(()=>{e||aUt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Qi();k.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await oUt();s(u)}a()},[s,i]);const o=async a=>i instanceof il?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?w.jsx(R8e,{basename:qf,children:w.jsx(cEt,{children:w.jsx(L8e,{children:w.jsx(Wr,{padding:"md",header:{height:70},children:w.jsxs(D8e,{children:[w.jsx(xd,{path:"/",element:w.jsxs(w.Fragment,{children:[w.jsx(Px,{studyIds:e.configsList}),w.jsx(zHe,{globalConfig:e,studyConfigs:n})]})}),w.jsx(xd,{path:"/:studyId/*",element:w.jsx(dpt,{globalConfig:e})}),w.jsx(xd,{path:"/analysis/dashboard",element:w.jsx(rUt,{globalConfig:e})}),w.jsx(xd,{path:"/analysis",element:w.jsx(a8,{to:"/analysis/dashboard"})}),w.jsx(xd,{path:"/analysis/stats/:studyId/:tab",element:w.jsx(Pie,{paramToCheck:"studyId",paramCallback:o,children:w.jsx(yEt,{globalConfig:e})})}),w.jsx(xd,{path:"/analysis/stats/:studyId",element:w.jsx(a8,{to:"./table",replace:!0})}),w.jsx(xd,{path:"/settings",element:w.jsxs(Pie,{children:[w.jsx(Px,{studyIds:e.configsList}),w.jsx(Wr.Main,{children:w.jsx(iUt,{})})]})}),w.jsx(xd,{path:"/login",element:w.jsxs(w.Fragment,{children:[w.jsx(Px,{studyIds:e.configsList}),w.jsx(Wr.Main,{children:w.jsx(vEt,{})})]})})]})})})})}):null}_L.createRoot(document.getElementById("root")).render(w.jsx(xi.StrictMode,{children:w.jsx(L5e,{children:w.jsx(dfe,{children:w.jsx(uUt,{})})})}))});export default lUt();
