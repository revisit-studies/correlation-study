var q4e=Object.defineProperty;var W4e=(e,t,n)=>t in e?q4e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ka=(e,t,n)=>W4e(e,typeof t!="symbol"?t+"":t,n);function G4e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Y4e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var U$={exports:{}},ZE={},V$={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hee;function K4e(){if(hee)return jn;hee=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(B){return B===null||typeof B!="object"?null:(B=f&&B[f]||B["@@iterator"],typeof B=="function"?B:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,p={};function g(B,q,z){this.props=B,this.context=q,this.refs=p,this.updater=z||h}g.prototype.isReactComponent={},g.prototype.setState=function(B,q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,q,"setState")},g.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function v(){}v.prototype=g.prototype;function b(B,q,z){this.props=B,this.context=q,this.refs=p,this.updater=z||h}var w=b.prototype=new v;w.constructor=b,m(w,g.prototype),w.isPureReactComponent=!0;var E=Array.isArray,_=Object.prototype.hasOwnProperty,T={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function D(B,q,z){var G,X={},ne=null,ge=null;if(q!=null)for(G in q.ref!==void 0&&(ge=q.ref),q.key!==void 0&&(ne=""+q.key),q)_.call(q,G)&&!S.hasOwnProperty(G)&&(X[G]=q[G]);var me=arguments.length-2;if(me===1)X.children=z;else if(1<me){for(var ye=Array(me),we=0;we<me;we++)ye[we]=arguments[we+2];X.children=ye}if(B&&B.defaultProps)for(G in me=B.defaultProps,me)X[G]===void 0&&(X[G]=me[G]);return{$$typeof:e,type:B,key:ne,ref:ge,props:X,_owner:T.current}}function k(B,q){return{$$typeof:e,type:B.type,key:q,ref:B.ref,props:B.props,_owner:B._owner}}function R(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function O(B){var q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(z){return q[z]})}var M=/\/+/g;function F(B,q){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):q.toString(36)}function L(B,q,z,G,X){var ne=typeof B;(ne==="undefined"||ne==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(ne){case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case e:case t:ge=!0}}if(ge)return ge=B,X=X(ge),B=G===""?"."+F(ge,0):G,E(X)?(z="",B!=null&&(z=B.replace(M,"$&/")+"/"),L(X,q,z,"",function(we){return we})):X!=null&&(R(X)&&(X=k(X,z+(!X.key||ge&&ge.key===X.key?"":(""+X.key).replace(M,"$&/")+"/")+B)),q.push(X)),1;if(ge=0,G=G===""?".":G+":",E(B))for(var me=0;me<B.length;me++){ne=B[me];var ye=G+F(ne,me);ge+=L(ne,q,z,ye,X)}else if(ye=d(B),typeof ye=="function")for(B=ye.call(B),me=0;!(ne=B.next()).done;)ne=ne.value,ye=G+F(ne,me++),ge+=L(ne,q,z,ye,X);else if(ne==="object")throw q=String(B),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ge}function H(B,q,z){if(B==null)return B;var G=[],X=0;return L(B,G,"","",function(ne){return q.call(z,ne,X++)}),G}function V(B){if(B._status===-1){var q=B._result;q=q(),q.then(function(z){(B._status===0||B._status===-1)&&(B._status=1,B._result=z)},function(z){(B._status===0||B._status===-1)&&(B._status=2,B._result=z)}),B._status===-1&&(B._status=0,B._result=q)}if(B._status===1)return B._result.default;throw B._result}var Q={current:null},K={transition:null},Z={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:K,ReactCurrentOwner:T};function U(){throw Error("act(...) is not supported in production builds of React.")}return jn.Children={map:H,forEach:function(B,q,z){H(B,function(){q.apply(this,arguments)},z)},count:function(B){var q=0;return H(B,function(){q++}),q},toArray:function(B){return H(B,function(q){return q})||[]},only:function(B){if(!R(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},jn.Component=g,jn.Fragment=n,jn.Profiler=i,jn.PureComponent=b,jn.StrictMode=r,jn.Suspense=u,jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,jn.act=U,jn.cloneElement=function(B,q,z){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var G=m({},B.props),X=B.key,ne=B.ref,ge=B._owner;if(q!=null){if(q.ref!==void 0&&(ne=q.ref,ge=T.current),q.key!==void 0&&(X=""+q.key),B.type&&B.type.defaultProps)var me=B.type.defaultProps;for(ye in q)_.call(q,ye)&&!S.hasOwnProperty(ye)&&(G[ye]=q[ye]===void 0&&me!==void 0?me[ye]:q[ye])}var ye=arguments.length-2;if(ye===1)G.children=z;else if(1<ye){me=Array(ye);for(var we=0;we<ye;we++)me[we]=arguments[we+2];G.children=me}return{$$typeof:e,type:B.type,key:X,ref:ne,props:G,_owner:ge}},jn.createContext=function(B){return B={$$typeof:s,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},jn.createElement=D,jn.createFactory=function(B){var q=D.bind(null,B);return q.type=B,q},jn.createRef=function(){return{current:null}},jn.forwardRef=function(B){return{$$typeof:a,render:B}},jn.isValidElement=R,jn.lazy=function(B){return{$$typeof:c,_payload:{_status:-1,_result:B},_init:V}},jn.memo=function(B,q){return{$$typeof:l,type:B,compare:q===void 0?null:q}},jn.startTransition=function(B){var q=K.transition;K.transition={};try{B()}finally{K.transition=q}},jn.unstable_act=U,jn.useCallback=function(B,q){return Q.current.useCallback(B,q)},jn.useContext=function(B){return Q.current.useContext(B)},jn.useDebugValue=function(){},jn.useDeferredValue=function(B){return Q.current.useDeferredValue(B)},jn.useEffect=function(B,q){return Q.current.useEffect(B,q)},jn.useId=function(){return Q.current.useId()},jn.useImperativeHandle=function(B,q,z){return Q.current.useImperativeHandle(B,q,z)},jn.useInsertionEffect=function(B,q){return Q.current.useInsertionEffect(B,q)},jn.useLayoutEffect=function(B,q){return Q.current.useLayoutEffect(B,q)},jn.useMemo=function(B,q){return Q.current.useMemo(B,q)},jn.useReducer=function(B,q,z){return Q.current.useReducer(B,q,z)},jn.useRef=function(B){return Q.current.useRef(B)},jn.useState=function(B){return Q.current.useState(B)},jn.useSyncExternalStore=function(B,q,z){return Q.current.useSyncExternalStore(B,q,z)},jn.useTransition=function(){return Q.current.useTransition()},jn.version="18.3.1",jn}var pee;function p4(){return pee||(pee=1,V$.exports=K4e()),V$.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mee;function X4e(){if(mee)return ZE;mee=1;var e=p4(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!o.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return ZE.Fragment=n,ZE.jsx=s,ZE.jsxs=s,ZE}var gee;function Q4e(){return gee||(gee=1,U$.exports=X4e()),U$.exports}var C=Q4e(),P=p4();const ur=Fl(P),J4e=G4e({__proto__:null,default:ur},[P]);var hD={},H$={exports:{}},pu={},q$={exports:{}},W$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yee;function Z4e(){return yee||(yee=1,function(e){function t(K,Z){var U=K.length;K.push(Z);e:for(;0<U;){var B=U-1>>>1,q=K[B];if(0<i(q,Z))K[B]=Z,K[U]=q,U=B;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Z=K[0],U=K.pop();if(U!==Z){K[0]=U;e:for(var B=0,q=K.length,z=q>>>1;B<z;){var G=2*(B+1)-1,X=K[G],ne=G+1,ge=K[ne];if(0>i(X,U))ne<q&&0>i(ge,X)?(K[B]=ge,K[ne]=U,B=ne):(K[B]=X,K[G]=U,B=G);else if(ne<q&&0>i(ge,U))K[B]=ge,K[ne]=U,B=ne;else break e}}return Z}function i(K,Z){var U=K.sortIndex-Z.sortIndex;return U!==0?U:K.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(K){for(var Z=n(l);Z!==null;){if(Z.callback===null)r(l);else if(Z.startTime<=K)r(l),Z.sortIndex=Z.expirationTime,t(u,Z);else break;Z=n(l)}}function E(K){if(p=!1,w(K),!m)if(n(u)!==null)m=!0,V(_);else{var Z=n(l);Z!==null&&Q(E,Z.startTime-K)}}function _(K,Z){m=!1,p&&(p=!1,v(D),D=-1),h=!0;var U=d;try{for(w(Z),f=n(u);f!==null&&(!(f.expirationTime>Z)||K&&!O());){var B=f.callback;if(typeof B=="function"){f.callback=null,d=f.priorityLevel;var q=B(f.expirationTime<=Z);Z=e.unstable_now(),typeof q=="function"?f.callback=q:f===n(u)&&r(u),w(Z)}else r(u);f=n(u)}if(f!==null)var z=!0;else{var G=n(l);G!==null&&Q(E,G.startTime-Z),z=!1}return z}finally{f=null,d=U,h=!1}}var T=!1,S=null,D=-1,k=5,R=-1;function O(){return!(e.unstable_now()-R<k)}function M(){if(S!==null){var K=e.unstable_now();R=K;var Z=!0;try{Z=S(!0,K)}finally{Z?F():(T=!1,S=null)}}else T=!1}var F;if(typeof b=="function")F=function(){b(M)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=M,F=function(){H.postMessage(null)}}else F=function(){g(M,0)};function V(K){S=K,T||(T=!0,F())}function Q(K,Z){D=g(function(){K(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,V(_))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(d){case 1:case 2:case 3:var Z=3;break;default:Z=d}var U=d;d=Z;try{return K()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var U=d;d=K;try{return Z()}finally{d=U}},e.unstable_scheduleCallback=function(K,Z,U){var B=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?B+U:B):U=B,K){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=U+q,K={id:c++,callback:Z,priorityLevel:K,startTime:U,expirationTime:q,sortIndex:-1},U>B?(K.sortIndex=U,t(l,K),n(u)===null&&K===n(l)&&(p?(v(D),D=-1):p=!0,Q(E,U-B))):(K.sortIndex=q,t(u,K),m||h||(m=!0,V(_))),K},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(K){var Z=d;return function(){var U=d;d=Z;try{return K.apply(this,arguments)}finally{d=U}}}}(W$)),W$}var vee;function eOe(){return vee||(vee=1,q$.exports=Z4e()),q$.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bee;function tOe(){if(bee)return pu;bee=1;var e=p4(),t=eOe();function n(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,A=1;A<arguments.length;A++)x+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(y,x){s(y,x),s(y+"Capture",x)}function s(y,x){for(i[y]=x,y=0;y<x.length;y++)r.add(x[y])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(y){return u.call(f,y)?!0:u.call(c,y)?!1:l.test(y)?f[y]=!0:(c[y]=!0,!1)}function h(y,x,A,N){if(A!==null&&A.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return N?!1:A!==null?!A.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function m(y,x,A,N){if(x===null||typeof x>"u"||h(y,x,A,N))return!0;if(N)return!1;if(A!==null)switch(A.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function p(y,x,A,N,j,Y,ee){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=N,this.attributeNamespace=j,this.mustUseProperty=A,this.propertyName=y,this.type=x,this.sanitizeURL=Y,this.removeEmptyString=ee}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){g[y]=new p(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var x=y[0];g[x]=new p(x,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){g[y]=new p(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){g[y]=new p(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){g[y]=new p(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){g[y]=new p(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){g[y]=new p(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){g[y]=new p(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){g[y]=new p(y,5,!1,y.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new p(x,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new p(x,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var x=y.replace(v,b);g[x]=new p(x,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){g[y]=new p(y,1,!1,y.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){g[y]=new p(y,1,!1,y.toLowerCase(),null,!0,!0)});function w(y,x,A,N){var j=g.hasOwnProperty(x)?g[x]:null;(j!==null?j.type!==0:N||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(m(x,A,j,N)&&(A=null),N||j===null?d(x)&&(A===null?y.removeAttribute(x):y.setAttribute(x,""+A)):j.mustUseProperty?y[j.propertyName]=A===null?j.type===3?!1:"":A:(x=j.attributeName,N=j.attributeNamespace,A===null?y.removeAttribute(x):(j=j.type,A=j===3||j===4&&A===!0?"":""+A,N?y.setAttributeNS(N,x,A):y.setAttribute(x,A))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),K=Symbol.iterator;function Z(y){return y===null||typeof y!="object"?null:(y=K&&y[K]||y["@@iterator"],typeof y=="function"?y:null)}var U=Object.assign,B;function q(y){if(B===void 0)try{throw Error()}catch(A){var x=A.stack.trim().match(/\n( *(at )?)/);B=x&&x[1]||""}return`
`+B+y}var z=!1;function G(y,x){if(!y||z)return"";z=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Be){var N=Be}Reflect.construct(y,[],x)}else{try{x.call()}catch(Be){N=Be}y.call(x.prototype)}else{try{throw Error()}catch(Be){N=Be}y()}}catch(Be){if(Be&&N&&typeof Be.stack=="string"){for(var j=Be.stack.split(`
`),Y=N.stack.split(`
`),ee=j.length-1,he=Y.length-1;1<=ee&&0<=he&&j[ee]!==Y[he];)he--;for(;1<=ee&&0<=he;ee--,he--)if(j[ee]!==Y[he]){if(ee!==1||he!==1)do if(ee--,he--,0>he||j[ee]!==Y[he]){var Te=`
`+j[ee].replace(" at new "," at ");return y.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",y.displayName)),Te}while(1<=ee&&0<=he);break}}}finally{z=!1,Error.prepareStackTrace=A}return(y=y?y.displayName||y.name:"")?q(y):""}function X(y){switch(y.tag){case 5:return q(y.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return y=G(y.type,!1),y;case 11:return y=G(y.type.render,!1),y;case 1:return y=G(y.type,!0),y;default:return""}}function ne(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case S:return"Fragment";case T:return"Portal";case k:return"Profiler";case D:return"StrictMode";case F:return"Suspense";case L:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case O:return(y.displayName||"Context")+".Consumer";case R:return(y._context.displayName||"Context")+".Provider";case M:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case H:return x=y.displayName||null,x!==null?x:ne(y.type)||"Memo";case V:x=y._payload,y=y._init;try{return ne(y(x))}catch{}}return null}function ge(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(x);case 8:return x===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function me(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function ye(y){var x=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function we(y){var x=ye(y)?"checked":"value",A=Object.getOwnPropertyDescriptor(y.constructor.prototype,x),N=""+y[x];if(!y.hasOwnProperty(x)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var j=A.get,Y=A.set;return Object.defineProperty(y,x,{configurable:!0,get:function(){return j.call(this)},set:function(ee){N=""+ee,Y.call(this,ee)}}),Object.defineProperty(y,x,{enumerable:A.enumerable}),{getValue:function(){return N},setValue:function(ee){N=""+ee},stopTracking:function(){y._valueTracker=null,delete y[x]}}}}function fe(y){y._valueTracker||(y._valueTracker=we(y))}function se(y){if(!y)return!1;var x=y._valueTracker;if(!x)return!0;var A=x.getValue(),N="";return y&&(N=ye(y)?y.checked?"true":"false":y.value),y=N,y!==A?(x.setValue(y),!0):!1}function Ce(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}function Ae(y,x){var A=x.checked;return U({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??y._wrapperState.initialChecked})}function Ue(y,x){var A=x.defaultValue==null?"":x.defaultValue,N=x.checked!=null?x.checked:x.defaultChecked;A=me(x.value!=null?x.value:A),y._wrapperState={initialChecked:N,initialValue:A,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Xe(y,x){x=x.checked,x!=null&&w(y,"checked",x,!1)}function Le(y,x){Xe(y,x);var A=me(x.value),N=x.type;if(A!=null)N==="number"?(A===0&&y.value===""||y.value!=A)&&(y.value=""+A):y.value!==""+A&&(y.value=""+A);else if(N==="submit"||N==="reset"){y.removeAttribute("value");return}x.hasOwnProperty("value")?et(y,x.type,A):x.hasOwnProperty("defaultValue")&&et(y,x.type,me(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(y.defaultChecked=!!x.defaultChecked)}function Ge(y,x,A){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var N=x.type;if(!(N!=="submit"&&N!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+y._wrapperState.initialValue,A||x===y.value||(y.value=x),y.defaultValue=x}A=y.name,A!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,A!==""&&(y.name=A)}function et(y,x,A){(x!=="number"||Ce(y.ownerDocument)!==y)&&(A==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+A&&(y.defaultValue=""+A))}var Et=Array.isArray;function ht(y,x,A,N){if(y=y.options,x){x={};for(var j=0;j<A.length;j++)x["$"+A[j]]=!0;for(A=0;A<y.length;A++)j=x.hasOwnProperty("$"+y[A].value),y[A].selected!==j&&(y[A].selected=j),j&&N&&(y[A].defaultSelected=!0)}else{for(A=""+me(A),x=null,j=0;j<y.length;j++){if(y[j].value===A){y[j].selected=!0,N&&(y[j].defaultSelected=!0);return}x!==null||y[j].disabled||(x=y[j])}x!==null&&(x.selected=!0)}}function xt(y,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return U({},x,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function te(y,x){var A=x.value;if(A==null){if(A=x.children,x=x.defaultValue,A!=null){if(x!=null)throw Error(n(92));if(Et(A)){if(1<A.length)throw Error(n(93));A=A[0]}x=A}x==null&&(x=""),A=x}y._wrapperState={initialValue:me(A)}}function le(y,x){var A=me(x.value),N=me(x.defaultValue);A!=null&&(A=""+A,A!==y.value&&(y.value=A),x.defaultValue==null&&y.defaultValue!==A&&(y.defaultValue=A)),N!=null&&(y.defaultValue=""+N)}function be(y){var x=y.textContent;x===y._wrapperState.initialValue&&x!==""&&x!==null&&(y.value=x)}function ae(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(y,x){return y==null||y==="http://www.w3.org/1999/xhtml"?ae(x):y==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var Ee,$e=function(y){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,A,N,j){MSApp.execUnsafeLocalFunction(function(){return y(x,A,N,j)})}:y}(function(y,x){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=x;else{for(Ee=Ee||document.createElement("div"),Ee.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Ee.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;x.firstChild;)y.appendChild(x.firstChild)}});function Ne(y,x){if(x){var A=y.firstChild;if(A&&A===y.lastChild&&A.nodeType===3){A.nodeValue=x;return}}y.textContent=x}var Ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ke=["Webkit","ms","Moz","O"];Object.keys(Ze).forEach(function(y){Ke.forEach(function(x){x=x+y.charAt(0).toUpperCase()+y.substring(1),Ze[x]=Ze[y]})});function It(y,x,A){return x==null||typeof x=="boolean"||x===""?"":A||typeof x!="number"||x===0||Ze.hasOwnProperty(y)&&Ze[y]?(""+x).trim():x+"px"}function zt(y,x){y=y.style;for(var A in x)if(x.hasOwnProperty(A)){var N=A.indexOf("--")===0,j=It(A,x[A],N);A==="float"&&(A="cssFloat"),N?y.setProperty(A,j):y[A]=j}}var Pt=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function en(y,x){if(x){if(Pt[y]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,y));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function kn(y,x){if(y.indexOf("-")===-1)return typeof x.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pn=null;function Rr(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var br=null,xr=null,Ei=null;function Lr(y){if(y=LE(y)){if(typeof br!="function")throw Error(n(280));var x=y.stateNode;x&&(x=DA(x),br(y.stateNode,y.type,x))}}function wr(y){xr?Ei?Ei.push(y):Ei=[y]:xr=y}function Ea(){if(xr){var y=xr,x=Ei;if(Ei=xr=null,Lr(y),x)for(y=0;y<x.length;y++)Lr(x[y])}}function ps(y,x){return y(x)}function _a(){}var Eo=!1;function Fn(y,x,A){if(Eo)return y(x,A);Eo=!0;try{return ps(y,x,A)}finally{Eo=!1,(xr!==null||Ei!==null)&&(_a(),Ea())}}function Kn(y,x){var A=y.stateNode;if(A===null)return null;var N=DA(A);if(N===null)return null;A=N[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(y=y.type,N=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!N;break e;default:y=!1}if(y)return null;if(A&&typeof A!="function")throw Error(n(231,x,typeof A));return A}var _o=!1;if(a)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){_o=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{_o=!1}function Kr(y,x,A,N,j,Y,ee,he,Te){var Be=Array.prototype.slice.call(arguments,3);try{x.apply(A,Be)}catch(ct){this.onError(ct)}}var oo=!1,Fi=null,To=!1,Vu=null,$l={onError:function(y){oo=!0,Fi=y}};function iu(y,x,A,N,j,Y,ee,he,Te){oo=!1,Fi=null,Kr.apply($l,arguments)}function Hu(y,x,A,N,j,Y,ee,he,Te){if(iu.apply(this,arguments),oo){if(oo){var Be=Fi;oo=!1,Fi=null}else throw Error(n(198));To||(To=!0,Vu=Be)}}function bn(y){var x=y,A=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,x.flags&4098&&(A=x.return),y=x.return;while(y)}return x.tag===3?A:null}function ms(y){if(y.tag===13){var x=y.memoizedState;if(x===null&&(y=y.alternate,y!==null&&(x=y.memoizedState)),x!==null)return x.dehydrated}return null}function so(y){if(bn(y)!==y)throw Error(n(188))}function qu(y){var x=y.alternate;if(!x){if(x=bn(y),x===null)throw Error(n(188));return x!==y?null:y}for(var A=y,N=x;;){var j=A.return;if(j===null)break;var Y=j.alternate;if(Y===null){if(N=j.return,N!==null){A=N;continue}break}if(j.child===Y.child){for(Y=j.child;Y;){if(Y===A)return so(j),y;if(Y===N)return so(j),x;Y=Y.sibling}throw Error(n(188))}if(A.return!==N.return)A=j,N=Y;else{for(var ee=!1,he=j.child;he;){if(he===A){ee=!0,A=j,N=Y;break}if(he===N){ee=!0,N=j,A=Y;break}he=he.sibling}if(!ee){for(he=Y.child;he;){if(he===A){ee=!0,A=Y,N=j;break}if(he===N){ee=!0,N=Y,A=j;break}he=he.sibling}if(!ee)throw Error(n(189))}}if(A.alternate!==N)throw Error(n(190))}if(A.tag!==3)throw Error(n(188));return A.stateNode.current===A?y:x}function Wu(y){return y=qu(y),y!==null?Ll(y):null}function Ll(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=Ll(y);if(x!==null)return x;y=y.sibling}return null}var Bl=t.unstable_scheduleCallback,Gu=t.unstable_cancelCallback,Vf=t.unstable_shouldYield,gs=t.unstable_requestPaint,Ft=t.unstable_now,di=t.unstable_getCurrentPriorityLevel,Yi=t.unstable_ImmediatePriority,Ho=t.unstable_UserBlockingPriority,ri=t.unstable_NormalPriority,Yu=t.unstable_LowPriority,sm=t.unstable_IdlePriority,jl=null,Co=null;function am(y){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(jl,y,void 0,(y.current.flags&128)===128)}catch{}}var So=Math.clz32?Math.clz32:ce,re=Math.log,xe=Math.LN2;function ce(y){return y>>>=0,y===0?32:31-(re(y)/xe|0)|0}var De=64,Ie=4194304;function Se(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Qe(y,x){var A=y.pendingLanes;if(A===0)return 0;var N=0,j=y.suspendedLanes,Y=y.pingedLanes,ee=A&268435455;if(ee!==0){var he=ee&~j;he!==0?N=Se(he):(Y&=ee,Y!==0&&(N=Se(Y)))}else ee=A&~j,ee!==0?N=Se(ee):Y!==0&&(N=Se(Y));if(N===0)return 0;if(x!==0&&x!==N&&!(x&j)&&(j=N&-N,Y=x&-x,j>=Y||j===16&&(Y&4194240)!==0))return x;if(N&4&&(N|=A&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=N;0<x;)A=31-So(x),j=1<<A,N|=y[A],x&=~j;return N}function ot(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(y,x){for(var A=y.suspendedLanes,N=y.pingedLanes,j=y.expirationTimes,Y=y.pendingLanes;0<Y;){var ee=31-So(Y),he=1<<ee,Te=j[ee];Te===-1?(!(he&A)||he&N)&&(j[ee]=ot(he,x)):Te<=x&&(y.expiredLanes|=he),Y&=~he}}function at(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function vt(){var y=De;return De<<=1,!(De&4194240)&&(De=64),y}function Dt(y){for(var x=[],A=0;31>A;A++)x.push(y);return x}function dn(y,x,A){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-So(x),y[x]=A}function Wt(y,x){var A=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var N=y.eventTimes;for(y=y.expirationTimes;0<A;){var j=31-So(A),Y=1<<j;x[j]=0,N[j]=-1,y[j]=-1,A&=~Y}}function Pn(y,x){var A=y.entangledLanes|=x;for(y=y.entanglements;A;){var N=31-So(A),j=1<<N;j&x|y[N]&x&&(y[N]|=x),A&=~j}}var Yt=0;function dr(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var Ao,ou,zl,um,Hf,lm=!1,ys=[],_i=null,qo=null,Ta=null,qf=new Map,Ca=new Map,su=[],cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ul(y,x){switch(y){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":qo=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":qf.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(x.pointerId)}}function ao(y,x,A,N,j,Y){return y===null||y.nativeEvent!==Y?(y={blockedOn:x,domEventName:A,eventSystemFlags:N,nativeEvent:Y,targetContainers:[j]},x!==null&&(x=LE(x),x!==null&&ou(x)),y):(y.eventSystemFlags|=N,x=y.targetContainers,j!==null&&x.indexOf(j)===-1&&x.push(j),y)}function AE(y,x,A,N,j){switch(x){case"focusin":return _i=ao(_i,y,x,A,N,j),!0;case"dragenter":return qo=ao(qo,y,x,A,N,j),!0;case"mouseover":return Ta=ao(Ta,y,x,A,N,j),!0;case"pointerover":var Y=j.pointerId;return qf.set(Y,ao(qf.get(Y)||null,y,x,A,N,j)),!0;case"gotpointercapture":return Y=j.pointerId,Ca.set(Y,ao(Ca.get(Y)||null,y,x,A,N,j)),!0}return!1}function _g(y){var x=Sg(y.target);if(x!==null){var A=bn(x);if(A!==null){if(x=A.tag,x===13){if(x=ms(A),x!==null){y.blockedOn=x,Hf(y.priority,function(){zl(A)});return}}else if(x===3&&A.stateNode.current.memoizedState.isDehydrated){y.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}y.blockedOn=null}function Nc(y){if(y.blockedOn!==null)return!1;for(var x=y.targetContainers;0<x.length;){var A=tr(y.domEventName,y.eventSystemFlags,x[0],y.nativeEvent);if(A===null){A=y.nativeEvent;var N=new A.constructor(A.type,A);pn=N,A.target.dispatchEvent(N),pn=null}else return x=LE(A),x!==null&&ou(x),y.blockedOn=A,!1;x.shift()}return!0}function Wf(y,x,A){Nc(y)&&A.delete(x)}function fv(){lm=!1,_i!==null&&Nc(_i)&&(_i=null),qo!==null&&Nc(qo)&&(qo=null),Ta!==null&&Nc(Ta)&&(Ta=null),qf.forEach(Wf),Ca.forEach(Wf)}function Ku(y,x){y.blockedOn===x&&(y.blockedOn=null,lm||(lm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fv)))}function au(y){function x(j){return Ku(j,y)}if(0<ys.length){Ku(ys[0],y);for(var A=1;A<ys.length;A++){var N=ys[A];N.blockedOn===y&&(N.blockedOn=null)}}for(_i!==null&&Ku(_i,y),qo!==null&&Ku(qo,y),Ta!==null&&Ku(Ta,y),qf.forEach(x),Ca.forEach(x),A=0;A<su.length;A++)N=su[A],N.blockedOn===y&&(N.blockedOn=null);for(;0<su.length&&(A=su[0],A.blockedOn===null);)_g(A),A.blockedOn===null&&su.shift()}var Pc=E.ReactCurrentBatchConfig,de=!0;function _e(y,x,A,N){var j=Yt,Y=Pc.transition;Pc.transition=null;try{Yt=1,Mt(y,x,A,N)}finally{Yt=j,Pc.transition=Y}}function ze(y,x,A,N){var j=Yt,Y=Pc.transition;Pc.transition=null;try{Yt=4,Mt(y,x,A,N)}finally{Yt=j,Pc.transition=Y}}function Mt(y,x,A,N){if(de){var j=tr(y,x,A,N);if(j===null)NM(y,x,N,In,A),Ul(y,N);else if(AE(j,y,x,A,N))N.stopPropagation();else if(Ul(y,N),x&4&&-1<cv.indexOf(y)){for(;j!==null;){var Y=LE(j);if(Y!==null&&Ao(Y),Y=tr(y,x,A,N),Y===null&&NM(y,x,N,In,A),Y===j)break;j=Y}j!==null&&N.stopPropagation()}else NM(y,x,N,null,A)}}var In=null;function tr(y,x,A,N){if(In=null,y=Rr(N),y=Sg(y),y!==null)if(x=bn(y),x===null)y=null;else if(A=x.tag,A===13){if(y=ms(x),y!==null)return y;y=null}else if(A===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null);return In=y,null}function Sr(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(di()){case Yi:return 1;case Ho:return 4;case ri:case Yu:return 16;case sm:return 536870912;default:return 16}default:return 16}}var _n=null,Er=null,Xr=null;function Do(){if(Xr)return Xr;var y,x=Er,A=x.length,N,j="value"in _n?_n.value:_n.textContent,Y=j.length;for(y=0;y<A&&x[y]===j[y];y++);var ee=A-y;for(N=1;N<=ee&&x[A-N]===j[Y-N];N++);return Xr=j.slice(y,1<N?1-N:void 0)}function Vl(y){var x=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&x===13&&(y=13)):y=x,y===10&&(y=13),32<=y||y===13?y:0}function uu(){return!0}function yh(){return!1}function uo(y){function x(A,N,j,Y,ee){this._reactName=A,this._targetInst=j,this.type=N,this.nativeEvent=Y,this.target=ee,this.currentTarget=null;for(var he in y)y.hasOwnProperty(he)&&(A=y[he],this[he]=A?A(Y):Y[he]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?uu:yh,this.isPropagationStopped=yh,this}return U(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=uu)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=uu)},persist:function(){},isPersistent:uu}),x}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dv=uo(Oc),Gf=U({},Oc,{view:0,detail:0}),EM=uo(Gf),hv,vh,cm,Tg=U({},Gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yf,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==cm&&(cm&&y.type==="mousemove"?(hv=y.screenX-cm.screenX,vh=y.screenY-cm.screenY):vh=hv=0,cm=y),hv)},movementY:function(y){return"movementY"in y?y.movementY:vh}}),pv=uo(Tg),DE=U({},Tg,{dataTransfer:0}),pA=uo(DE),mv=U({},Gf,{relatedTarget:0}),gv=uo(mv),mA=U({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),bh=uo(mA),gA=U({},Oc,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),yA=uo(gA),vA=U({},Oc,{data:0}),kE=uo(vA),yv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xA(y){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(y):(y=bA[y])?!!x[y]:!1}function Yf(){return xA}var I=U({},Gf,{key:function(y){if(y.key){var x=yv[y.key]||y.key;if(x!=="Unidentified")return x}return y.type==="keypress"?(y=Vl(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?Sa[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yf,charCode:function(y){return y.type==="keypress"?Vl(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?Vl(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),W=uo(I),J=U({},Tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oe=uo(J),Pe=U({},Gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yf}),He=uo(Pe),Ct=U({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nr=uo(Ct),ko=U({},Tg,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),nr=uo(ko),Wo=[9,13,27,32],lo=a&&"CompositionEvent"in window,Hl=null;a&&"documentMode"in document&&(Hl=document.documentMode);var Xu=a&&"TextEvent"in window&&!Hl,Cg=a&&(!lo||Hl&&8<Hl&&11>=Hl),vv=" ",aJ=!1;function uJ(y,x){switch(y){case"keyup":return Wo.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lJ(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var bv=!1;function UPe(y,x){switch(y){case"compositionend":return lJ(x);case"keypress":return x.which!==32?null:(aJ=!0,vv);case"textInput":return y=x.data,y===vv&&aJ?null:y;default:return null}}function VPe(y,x){if(bv)return y==="compositionend"||!lo&&uJ(y,x)?(y=Do(),Xr=Er=_n=null,bv=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Cg&&x.locale!=="ko"?null:x.data;default:return null}}var HPe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cJ(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x==="input"?!!HPe[y.type]:x==="textarea"}function fJ(y,x,A,N){wr(N),x=CA(x,"onChange"),0<x.length&&(A=new dv("onChange","change",null,A,N),y.push({event:A,listeners:x}))}var IE=null,RE=null;function qPe(y){kJ(y,0)}function wA(y){var x=Tv(y);if(se(x))return y}function WPe(y,x){if(y==="change")return x}var dJ=!1;if(a){var _M;if(a){var TM="oninput"in document;if(!TM){var hJ=document.createElement("div");hJ.setAttribute("oninput","return;"),TM=typeof hJ.oninput=="function"}_M=TM}else _M=!1;dJ=_M&&(!document.documentMode||9<document.documentMode)}function pJ(){IE&&(IE.detachEvent("onpropertychange",mJ),RE=IE=null)}function mJ(y){if(y.propertyName==="value"&&wA(RE)){var x=[];fJ(x,RE,y,Rr(y)),Fn(qPe,x)}}function GPe(y,x,A){y==="focusin"?(pJ(),IE=x,RE=A,IE.attachEvent("onpropertychange",mJ)):y==="focusout"&&pJ()}function YPe(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return wA(RE)}function KPe(y,x){if(y==="click")return wA(x)}function XPe(y,x){if(y==="input"||y==="change")return wA(x)}function QPe(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var Fc=typeof Object.is=="function"?Object.is:QPe;function NE(y,x){if(Fc(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var A=Object.keys(y),N=Object.keys(x);if(A.length!==N.length)return!1;for(N=0;N<A.length;N++){var j=A[N];if(!u.call(x,j)||!Fc(y[j],x[j]))return!1}return!0}function gJ(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function yJ(y,x){var A=gJ(y);y=0;for(var N;A;){if(A.nodeType===3){if(N=y+A.textContent.length,y<=x&&N>=x)return{node:A,offset:x-y};y=N}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=gJ(A)}}function vJ(y,x){return y&&x?y===x?!0:y&&y.nodeType===3?!1:x&&x.nodeType===3?vJ(y,x.parentNode):"contains"in y?y.contains(x):y.compareDocumentPosition?!!(y.compareDocumentPosition(x)&16):!1:!1}function bJ(){for(var y=window,x=Ce();x instanceof y.HTMLIFrameElement;){try{var A=typeof x.contentWindow.location.href=="string"}catch{A=!1}if(A)y=x.contentWindow;else break;x=Ce(y.document)}return x}function CM(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x&&(x==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||x==="textarea"||y.contentEditable==="true")}function JPe(y){var x=bJ(),A=y.focusedElem,N=y.selectionRange;if(x!==A&&A&&A.ownerDocument&&vJ(A.ownerDocument.documentElement,A)){if(N!==null&&CM(A)){if(x=N.start,y=N.end,y===void 0&&(y=x),"selectionStart"in A)A.selectionStart=x,A.selectionEnd=Math.min(y,A.value.length);else if(y=(x=A.ownerDocument||document)&&x.defaultView||window,y.getSelection){y=y.getSelection();var j=A.textContent.length,Y=Math.min(N.start,j);N=N.end===void 0?Y:Math.min(N.end,j),!y.extend&&Y>N&&(j=N,N=Y,Y=j),j=yJ(A,Y);var ee=yJ(A,N);j&&ee&&(y.rangeCount!==1||y.anchorNode!==j.node||y.anchorOffset!==j.offset||y.focusNode!==ee.node||y.focusOffset!==ee.offset)&&(x=x.createRange(),x.setStart(j.node,j.offset),y.removeAllRanges(),Y>N?(y.addRange(x),y.extend(ee.node,ee.offset)):(x.setEnd(ee.node,ee.offset),y.addRange(x)))}}for(x=[],y=A;y=y.parentNode;)y.nodeType===1&&x.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<x.length;A++)y=x[A],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var ZPe=a&&"documentMode"in document&&11>=document.documentMode,xv=null,SM=null,PE=null,AM=!1;function xJ(y,x,A){var N=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;AM||xv==null||xv!==Ce(N)||(N=xv,"selectionStart"in N&&CM(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),PE&&NE(PE,N)||(PE=N,N=CA(SM,"onSelect"),0<N.length&&(x=new dv("onSelect","select",null,x,A),y.push({event:x,listeners:N}),x.target=xv)))}function EA(y,x){var A={};return A[y.toLowerCase()]=x.toLowerCase(),A["Webkit"+y]="webkit"+x,A["Moz"+y]="moz"+x,A}var wv={animationend:EA("Animation","AnimationEnd"),animationiteration:EA("Animation","AnimationIteration"),animationstart:EA("Animation","AnimationStart"),transitionend:EA("Transition","TransitionEnd")},DM={},wJ={};a&&(wJ=document.createElement("div").style,"AnimationEvent"in window||(delete wv.animationend.animation,delete wv.animationiteration.animation,delete wv.animationstart.animation),"TransitionEvent"in window||delete wv.transitionend.transition);function _A(y){if(DM[y])return DM[y];if(!wv[y])return y;var x=wv[y],A;for(A in x)if(x.hasOwnProperty(A)&&A in wJ)return DM[y]=x[A];return y}var EJ=_A("animationend"),_J=_A("animationiteration"),TJ=_A("animationstart"),CJ=_A("transitionend"),SJ=new Map,AJ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fm(y,x){SJ.set(y,x),o(x,[y])}for(var kM=0;kM<AJ.length;kM++){var IM=AJ[kM],e4e=IM.toLowerCase(),t4e=IM[0].toUpperCase()+IM.slice(1);fm(e4e,"on"+t4e)}fm(EJ,"onAnimationEnd"),fm(_J,"onAnimationIteration"),fm(TJ,"onAnimationStart"),fm("dblclick","onDoubleClick"),fm("focusin","onFocus"),fm("focusout","onBlur"),fm(CJ,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var OE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n4e=new Set("cancel close invalid load scroll toggle".split(" ").concat(OE));function DJ(y,x,A){var N=y.type||"unknown-event";y.currentTarget=A,Hu(N,x,void 0,y),y.currentTarget=null}function kJ(y,x){x=(x&4)!==0;for(var A=0;A<y.length;A++){var N=y[A],j=N.event;N=N.listeners;e:{var Y=void 0;if(x)for(var ee=N.length-1;0<=ee;ee--){var he=N[ee],Te=he.instance,Be=he.currentTarget;if(he=he.listener,Te!==Y&&j.isPropagationStopped())break e;DJ(j,he,Be),Y=Te}else for(ee=0;ee<N.length;ee++){if(he=N[ee],Te=he.instance,Be=he.currentTarget,he=he.listener,Te!==Y&&j.isPropagationStopped())break e;DJ(j,he,Be),Y=Te}}}if(To)throw y=Vu,To=!1,Vu=null,y}function ii(y,x){var A=x[LM];A===void 0&&(A=x[LM]=new Set);var N=y+"__bubble";A.has(N)||(IJ(x,y,2,!1),A.add(N))}function RM(y,x,A){var N=0;x&&(N|=4),IJ(A,y,N,x)}var TA="_reactListening"+Math.random().toString(36).slice(2);function FE(y){if(!y[TA]){y[TA]=!0,r.forEach(function(A){A!=="selectionchange"&&(n4e.has(A)||RM(A,!1,y),RM(A,!0,y))});var x=y.nodeType===9?y:y.ownerDocument;x===null||x[TA]||(x[TA]=!0,RM("selectionchange",!1,x))}}function IJ(y,x,A,N){switch(Sr(x)){case 1:var j=_e;break;case 4:j=ze;break;default:j=Mt}A=j.bind(null,x,A,y),j=void 0,!_o||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(j=!0),N?j!==void 0?y.addEventListener(x,A,{capture:!0,passive:j}):y.addEventListener(x,A,!0):j!==void 0?y.addEventListener(x,A,{passive:j}):y.addEventListener(x,A,!1)}function NM(y,x,A,N,j){var Y=N;if(!(x&1)&&!(x&2)&&N!==null)e:for(;;){if(N===null)return;var ee=N.tag;if(ee===3||ee===4){var he=N.stateNode.containerInfo;if(he===j||he.nodeType===8&&he.parentNode===j)break;if(ee===4)for(ee=N.return;ee!==null;){var Te=ee.tag;if((Te===3||Te===4)&&(Te=ee.stateNode.containerInfo,Te===j||Te.nodeType===8&&Te.parentNode===j))return;ee=ee.return}for(;he!==null;){if(ee=Sg(he),ee===null)return;if(Te=ee.tag,Te===5||Te===6){N=Y=ee;continue e}he=he.parentNode}}N=N.return}Fn(function(){var Be=Y,ct=Rr(A),mt=[];e:{var lt=SJ.get(y);if(lt!==void 0){var Rt=dv,Bt=y;switch(y){case"keypress":if(Vl(A)===0)break e;case"keydown":case"keyup":Rt=W;break;case"focusin":Bt="focus",Rt=gv;break;case"focusout":Bt="blur",Rt=gv;break;case"beforeblur":case"afterblur":Rt=gv;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Rt=pv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Rt=pA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Rt=He;break;case EJ:case _J:case TJ:Rt=bh;break;case CJ:Rt=Nr;break;case"scroll":Rt=EM;break;case"wheel":Rt=nr;break;case"copy":case"cut":case"paste":Rt=yA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Rt=oe}var Ut=(x&4)!==0,Ki=!Ut&&y==="scroll",Oe=Ut?lt!==null?lt+"Capture":null:lt;Ut=[];for(var ke=Be,Me;ke!==null;){Me=ke;var _t=Me.stateNode;if(Me.tag===5&&_t!==null&&(Me=_t,Oe!==null&&(_t=Kn(ke,Oe),_t!=null&&Ut.push(ME(ke,_t,Me)))),Ki)break;ke=ke.return}0<Ut.length&&(lt=new Rt(lt,Bt,null,A,ct),mt.push({event:lt,listeners:Ut}))}}if(!(x&7)){e:{if(lt=y==="mouseover"||y==="pointerover",Rt=y==="mouseout"||y==="pointerout",lt&&A!==pn&&(Bt=A.relatedTarget||A.fromElement)&&(Sg(Bt)||Bt[xh]))break e;if((Rt||lt)&&(lt=ct.window===ct?ct:(lt=ct.ownerDocument)?lt.defaultView||lt.parentWindow:window,Rt?(Bt=A.relatedTarget||A.toElement,Rt=Be,Bt=Bt?Sg(Bt):null,Bt!==null&&(Ki=bn(Bt),Bt!==Ki||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(Rt=null,Bt=Be),Rt!==Bt)){if(Ut=pv,_t="onMouseLeave",Oe="onMouseEnter",ke="mouse",(y==="pointerout"||y==="pointerover")&&(Ut=oe,_t="onPointerLeave",Oe="onPointerEnter",ke="pointer"),Ki=Rt==null?lt:Tv(Rt),Me=Bt==null?lt:Tv(Bt),lt=new Ut(_t,ke+"leave",Rt,A,ct),lt.target=Ki,lt.relatedTarget=Me,_t=null,Sg(ct)===Be&&(Ut=new Ut(Oe,ke+"enter",Bt,A,ct),Ut.target=Me,Ut.relatedTarget=Ki,_t=Ut),Ki=_t,Rt&&Bt)t:{for(Ut=Rt,Oe=Bt,ke=0,Me=Ut;Me;Me=Ev(Me))ke++;for(Me=0,_t=Oe;_t;_t=Ev(_t))Me++;for(;0<ke-Me;)Ut=Ev(Ut),ke--;for(;0<Me-ke;)Oe=Ev(Oe),Me--;for(;ke--;){if(Ut===Oe||Oe!==null&&Ut===Oe.alternate)break t;Ut=Ev(Ut),Oe=Ev(Oe)}Ut=null}else Ut=null;Rt!==null&&RJ(mt,lt,Rt,Ut,!1),Bt!==null&&Ki!==null&&RJ(mt,Ki,Bt,Ut,!0)}}e:{if(lt=Be?Tv(Be):window,Rt=lt.nodeName&&lt.nodeName.toLowerCase(),Rt==="select"||Rt==="input"&&lt.type==="file")var Gt=WPe;else if(cJ(lt))if(dJ)Gt=XPe;else{Gt=YPe;var un=GPe}else(Rt=lt.nodeName)&&Rt.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(Gt=KPe);if(Gt&&(Gt=Gt(y,Be))){fJ(mt,Gt,A,ct);break e}un&&un(y,lt,Be),y==="focusout"&&(un=lt._wrapperState)&&un.controlled&&lt.type==="number"&&et(lt,"number",lt.value)}switch(un=Be?Tv(Be):window,y){case"focusin":(cJ(un)||un.contentEditable==="true")&&(xv=un,SM=Be,PE=null);break;case"focusout":PE=SM=xv=null;break;case"mousedown":AM=!0;break;case"contextmenu":case"mouseup":case"dragend":AM=!1,xJ(mt,A,ct);break;case"selectionchange":if(ZPe)break;case"keydown":case"keyup":xJ(mt,A,ct)}var ln;if(lo)e:{switch(y){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else bv?uJ(y,A)&&(mn="onCompositionEnd"):y==="keydown"&&A.keyCode===229&&(mn="onCompositionStart");mn&&(Cg&&A.locale!=="ko"&&(bv||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&bv&&(ln=Do()):(_n=ct,Er="value"in _n?_n.value:_n.textContent,bv=!0)),un=CA(Be,mn),0<un.length&&(mn=new kE(mn,y,null,A,ct),mt.push({event:mn,listeners:un}),ln?mn.data=ln:(ln=lJ(A),ln!==null&&(mn.data=ln)))),(ln=Xu?UPe(y,A):VPe(y,A))&&(Be=CA(Be,"onBeforeInput"),0<Be.length&&(ct=new kE("onBeforeInput","beforeinput",null,A,ct),mt.push({event:ct,listeners:Be}),ct.data=ln))}kJ(mt,x)})}function ME(y,x,A){return{instance:y,listener:x,currentTarget:A}}function CA(y,x){for(var A=x+"Capture",N=[];y!==null;){var j=y,Y=j.stateNode;j.tag===5&&Y!==null&&(j=Y,Y=Kn(y,A),Y!=null&&N.unshift(ME(y,Y,j)),Y=Kn(y,x),Y!=null&&N.push(ME(y,Y,j))),y=y.return}return N}function Ev(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function RJ(y,x,A,N,j){for(var Y=x._reactName,ee=[];A!==null&&A!==N;){var he=A,Te=he.alternate,Be=he.stateNode;if(Te!==null&&Te===N)break;he.tag===5&&Be!==null&&(he=Be,j?(Te=Kn(A,Y),Te!=null&&ee.unshift(ME(A,Te,he))):j||(Te=Kn(A,Y),Te!=null&&ee.push(ME(A,Te,he)))),A=A.return}ee.length!==0&&y.push({event:x,listeners:ee})}var r4e=/\r\n?/g,i4e=/\u0000|\uFFFD/g;function NJ(y){return(typeof y=="string"?y:""+y).replace(r4e,`
`).replace(i4e,"")}function SA(y,x,A){if(x=NJ(x),NJ(y)!==x&&A)throw Error(n(425))}function AA(){}var PM=null,OM=null;function FM(y,x){return y==="textarea"||y==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var MM=typeof setTimeout=="function"?setTimeout:void 0,o4e=typeof clearTimeout=="function"?clearTimeout:void 0,PJ=typeof Promise=="function"?Promise:void 0,s4e=typeof queueMicrotask=="function"?queueMicrotask:typeof PJ<"u"?function(y){return PJ.resolve(null).then(y).catch(a4e)}:MM;function a4e(y){setTimeout(function(){throw y})}function $M(y,x){var A=x,N=0;do{var j=A.nextSibling;if(y.removeChild(A),j&&j.nodeType===8)if(A=j.data,A==="/$"){if(N===0){y.removeChild(j),au(x);return}N--}else A!=="$"&&A!=="$?"&&A!=="$!"||N++;A=j}while(A);au(x)}function dm(y){for(;y!=null;y=y.nextSibling){var x=y.nodeType;if(x===1||x===3)break;if(x===8){if(x=y.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return y}function OJ(y){y=y.previousSibling;for(var x=0;y;){if(y.nodeType===8){var A=y.data;if(A==="$"||A==="$!"||A==="$?"){if(x===0)return y;x--}else A==="/$"&&x++}y=y.previousSibling}return null}var _v=Math.random().toString(36).slice(2),Kf="__reactFiber$"+_v,$E="__reactProps$"+_v,xh="__reactContainer$"+_v,LM="__reactEvents$"+_v,u4e="__reactListeners$"+_v,l4e="__reactHandles$"+_v;function Sg(y){var x=y[Kf];if(x)return x;for(var A=y.parentNode;A;){if(x=A[xh]||A[Kf]){if(A=x.alternate,x.child!==null||A!==null&&A.child!==null)for(y=OJ(y);y!==null;){if(A=y[Kf])return A;y=OJ(y)}return x}y=A,A=y.parentNode}return null}function LE(y){return y=y[Kf]||y[xh],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function Tv(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(n(33))}function DA(y){return y[$E]||null}var BM=[],Cv=-1;function hm(y){return{current:y}}function oi(y){0>Cv||(y.current=BM[Cv],BM[Cv]=null,Cv--)}function Qr(y,x){Cv++,BM[Cv]=y.current,y.current=x}var pm={},qs=hm(pm),lu=hm(!1),Ag=pm;function Sv(y,x){var A=y.type.contextTypes;if(!A)return pm;var N=y.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===x)return N.__reactInternalMemoizedMaskedChildContext;var j={},Y;for(Y in A)j[Y]=x[Y];return N&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=j),j}function cu(y){return y=y.childContextTypes,y!=null}function kA(){oi(lu),oi(qs)}function FJ(y,x,A){if(qs.current!==pm)throw Error(n(168));Qr(qs,x),Qr(lu,A)}function MJ(y,x,A){var N=y.stateNode;if(x=x.childContextTypes,typeof N.getChildContext!="function")return A;N=N.getChildContext();for(var j in N)if(!(j in x))throw Error(n(108,ge(y)||"Unknown",j));return U({},A,N)}function IA(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||pm,Ag=qs.current,Qr(qs,y),Qr(lu,lu.current),!0}function $J(y,x,A){var N=y.stateNode;if(!N)throw Error(n(169));A?(y=MJ(y,x,Ag),N.__reactInternalMemoizedMergedChildContext=y,oi(lu),oi(qs),Qr(qs,y)):oi(lu),Qr(lu,A)}var wh=null,RA=!1,jM=!1;function LJ(y){wh===null?wh=[y]:wh.push(y)}function c4e(y){RA=!0,LJ(y)}function mm(){if(!jM&&wh!==null){jM=!0;var y=0,x=Yt;try{var A=wh;for(Yt=1;y<A.length;y++){var N=A[y];do N=N(!0);while(N!==null)}wh=null,RA=!1}catch(j){throw wh!==null&&(wh=wh.slice(y+1)),Bl(Yi,mm),j}finally{Yt=x,jM=!1}}return null}var Av=[],Dv=0,NA=null,PA=0,ql=[],Wl=0,Dg=null,Eh=1,_h="";function kg(y,x){Av[Dv++]=PA,Av[Dv++]=NA,NA=y,PA=x}function BJ(y,x,A){ql[Wl++]=Eh,ql[Wl++]=_h,ql[Wl++]=Dg,Dg=y;var N=Eh;y=_h;var j=32-So(N)-1;N&=~(1<<j),A+=1;var Y=32-So(x)+j;if(30<Y){var ee=j-j%5;Y=(N&(1<<ee)-1).toString(32),N>>=ee,j-=ee,Eh=1<<32-So(x)+j|A<<j|N,_h=Y+y}else Eh=1<<Y|A<<j|N,_h=y}function zM(y){y.return!==null&&(kg(y,1),BJ(y,1,0))}function UM(y){for(;y===NA;)NA=Av[--Dv],Av[Dv]=null,PA=Av[--Dv],Av[Dv]=null;for(;y===Dg;)Dg=ql[--Wl],ql[Wl]=null,_h=ql[--Wl],ql[Wl]=null,Eh=ql[--Wl],ql[Wl]=null}var Qu=null,Ju=null,hi=!1,Mc=null;function jJ(y,x){var A=Xl(5,null,null,0);A.elementType="DELETED",A.stateNode=x,A.return=y,x=y.deletions,x===null?(y.deletions=[A],y.flags|=16):x.push(A)}function zJ(y,x){switch(y.tag){case 5:var A=y.type;return x=x.nodeType!==1||A.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(y.stateNode=x,Qu=y,Ju=dm(x.firstChild),!0):!1;case 6:return x=y.pendingProps===""||x.nodeType!==3?null:x,x!==null?(y.stateNode=x,Qu=y,Ju=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(A=Dg!==null?{id:Eh,overflow:_h}:null,y.memoizedState={dehydrated:x,treeContext:A,retryLane:1073741824},A=Xl(18,null,null,0),A.stateNode=x,A.return=y,y.child=A,Qu=y,Ju=null,!0):!1;default:return!1}}function VM(y){return(y.mode&1)!==0&&(y.flags&128)===0}function HM(y){if(hi){var x=Ju;if(x){var A=x;if(!zJ(y,x)){if(VM(y))throw Error(n(418));x=dm(A.nextSibling);var N=Qu;x&&zJ(y,x)?jJ(N,A):(y.flags=y.flags&-4097|2,hi=!1,Qu=y)}}else{if(VM(y))throw Error(n(418));y.flags=y.flags&-4097|2,hi=!1,Qu=y}}}function UJ(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Qu=y}function OA(y){if(y!==Qu)return!1;if(!hi)return UJ(y),hi=!0,!1;var x;if((x=y.tag!==3)&&!(x=y.tag!==5)&&(x=y.type,x=x!=="head"&&x!=="body"&&!FM(y.type,y.memoizedProps)),x&&(x=Ju)){if(VM(y))throw VJ(),Error(n(418));for(;x;)jJ(y,x),x=dm(x.nextSibling)}if(UJ(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));e:{for(y=y.nextSibling,x=0;y;){if(y.nodeType===8){var A=y.data;if(A==="/$"){if(x===0){Ju=dm(y.nextSibling);break e}x--}else A!=="$"&&A!=="$!"&&A!=="$?"||x++}y=y.nextSibling}Ju=null}}else Ju=Qu?dm(y.stateNode.nextSibling):null;return!0}function VJ(){for(var y=Ju;y;)y=dm(y.nextSibling)}function kv(){Ju=Qu=null,hi=!1}function qM(y){Mc===null?Mc=[y]:Mc.push(y)}var f4e=E.ReactCurrentBatchConfig;function BE(y,x,A){if(y=A.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(n(309));var N=A.stateNode}if(!N)throw Error(n(147,y));var j=N,Y=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===Y?x.ref:(x=function(ee){var he=j.refs;ee===null?delete he[Y]:he[Y]=ee},x._stringRef=Y,x)}if(typeof y!="string")throw Error(n(284));if(!A._owner)throw Error(n(290,y))}return y}function FA(y,x){throw y=Object.prototype.toString.call(x),Error(n(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function HJ(y){var x=y._init;return x(y._payload)}function qJ(y){function x(Oe,ke){if(y){var Me=Oe.deletions;Me===null?(Oe.deletions=[ke],Oe.flags|=16):Me.push(ke)}}function A(Oe,ke){if(!y)return null;for(;ke!==null;)x(Oe,ke),ke=ke.sibling;return null}function N(Oe,ke){for(Oe=new Map;ke!==null;)ke.key!==null?Oe.set(ke.key,ke):Oe.set(ke.index,ke),ke=ke.sibling;return Oe}function j(Oe,ke){return Oe=_m(Oe,ke),Oe.index=0,Oe.sibling=null,Oe}function Y(Oe,ke,Me){return Oe.index=Me,y?(Me=Oe.alternate,Me!==null?(Me=Me.index,Me<ke?(Oe.flags|=2,ke):Me):(Oe.flags|=2,ke)):(Oe.flags|=1048576,ke)}function ee(Oe){return y&&Oe.alternate===null&&(Oe.flags|=2),Oe}function he(Oe,ke,Me,_t){return ke===null||ke.tag!==6?(ke=M$(Me,Oe.mode,_t),ke.return=Oe,ke):(ke=j(ke,Me),ke.return=Oe,ke)}function Te(Oe,ke,Me,_t){var Gt=Me.type;return Gt===S?ct(Oe,ke,Me.props.children,_t,Me.key):ke!==null&&(ke.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===V&&HJ(Gt)===ke.type)?(_t=j(ke,Me.props),_t.ref=BE(Oe,ke,Me),_t.return=Oe,_t):(_t=oD(Me.type,Me.key,Me.props,null,Oe.mode,_t),_t.ref=BE(Oe,ke,Me),_t.return=Oe,_t)}function Be(Oe,ke,Me,_t){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Me.containerInfo||ke.stateNode.implementation!==Me.implementation?(ke=$$(Me,Oe.mode,_t),ke.return=Oe,ke):(ke=j(ke,Me.children||[]),ke.return=Oe,ke)}function ct(Oe,ke,Me,_t,Gt){return ke===null||ke.tag!==7?(ke=$g(Me,Oe.mode,_t,Gt),ke.return=Oe,ke):(ke=j(ke,Me),ke.return=Oe,ke)}function mt(Oe,ke,Me){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=M$(""+ke,Oe.mode,Me),ke.return=Oe,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case _:return Me=oD(ke.type,ke.key,ke.props,null,Oe.mode,Me),Me.ref=BE(Oe,null,ke),Me.return=Oe,Me;case T:return ke=$$(ke,Oe.mode,Me),ke.return=Oe,ke;case V:var _t=ke._init;return mt(Oe,_t(ke._payload),Me)}if(Et(ke)||Z(ke))return ke=$g(ke,Oe.mode,Me,null),ke.return=Oe,ke;FA(Oe,ke)}return null}function lt(Oe,ke,Me,_t){var Gt=ke!==null?ke.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Gt!==null?null:he(Oe,ke,""+Me,_t);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case _:return Me.key===Gt?Te(Oe,ke,Me,_t):null;case T:return Me.key===Gt?Be(Oe,ke,Me,_t):null;case V:return Gt=Me._init,lt(Oe,ke,Gt(Me._payload),_t)}if(Et(Me)||Z(Me))return Gt!==null?null:ct(Oe,ke,Me,_t,null);FA(Oe,Me)}return null}function Rt(Oe,ke,Me,_t,Gt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return Oe=Oe.get(Me)||null,he(ke,Oe,""+_t,Gt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case _:return Oe=Oe.get(_t.key===null?Me:_t.key)||null,Te(ke,Oe,_t,Gt);case T:return Oe=Oe.get(_t.key===null?Me:_t.key)||null,Be(ke,Oe,_t,Gt);case V:var un=_t._init;return Rt(Oe,ke,Me,un(_t._payload),Gt)}if(Et(_t)||Z(_t))return Oe=Oe.get(Me)||null,ct(ke,Oe,_t,Gt,null);FA(ke,_t)}return null}function Bt(Oe,ke,Me,_t){for(var Gt=null,un=null,ln=ke,mn=ke=0,Ko=null;ln!==null&&mn<Me.length;mn++){ln.index>mn?(Ko=ln,ln=null):Ko=ln.sibling;var hr=lt(Oe,ln,Me[mn],_t);if(hr===null){ln===null&&(ln=Ko);break}y&&ln&&hr.alternate===null&&x(Oe,ln),ke=Y(hr,ke,mn),un===null?Gt=hr:un.sibling=hr,un=hr,ln=Ko}if(mn===Me.length)return A(Oe,ln),hi&&kg(Oe,mn),Gt;if(ln===null){for(;mn<Me.length;mn++)ln=mt(Oe,Me[mn],_t),ln!==null&&(ke=Y(ln,ke,mn),un===null?Gt=ln:un.sibling=ln,un=ln);return hi&&kg(Oe,mn),Gt}for(ln=N(Oe,ln);mn<Me.length;mn++)Ko=Rt(ln,Oe,mn,Me[mn],_t),Ko!==null&&(y&&Ko.alternate!==null&&ln.delete(Ko.key===null?mn:Ko.key),ke=Y(Ko,ke,mn),un===null?Gt=Ko:un.sibling=Ko,un=Ko);return y&&ln.forEach(function(Tm){return x(Oe,Tm)}),hi&&kg(Oe,mn),Gt}function Ut(Oe,ke,Me,_t){var Gt=Z(Me);if(typeof Gt!="function")throw Error(n(150));if(Me=Gt.call(Me),Me==null)throw Error(n(151));for(var un=Gt=null,ln=ke,mn=ke=0,Ko=null,hr=Me.next();ln!==null&&!hr.done;mn++,hr=Me.next()){ln.index>mn?(Ko=ln,ln=null):Ko=ln.sibling;var Tm=lt(Oe,ln,hr.value,_t);if(Tm===null){ln===null&&(ln=Ko);break}y&&ln&&Tm.alternate===null&&x(Oe,ln),ke=Y(Tm,ke,mn),un===null?Gt=Tm:un.sibling=Tm,un=Tm,ln=Ko}if(hr.done)return A(Oe,ln),hi&&kg(Oe,mn),Gt;if(ln===null){for(;!hr.done;mn++,hr=Me.next())hr=mt(Oe,hr.value,_t),hr!==null&&(ke=Y(hr,ke,mn),un===null?Gt=hr:un.sibling=hr,un=hr);return hi&&kg(Oe,mn),Gt}for(ln=N(Oe,ln);!hr.done;mn++,hr=Me.next())hr=Rt(ln,Oe,mn,hr.value,_t),hr!==null&&(y&&hr.alternate!==null&&ln.delete(hr.key===null?mn:hr.key),ke=Y(hr,ke,mn),un===null?Gt=hr:un.sibling=hr,un=hr);return y&&ln.forEach(function(H4e){return x(Oe,H4e)}),hi&&kg(Oe,mn),Gt}function Ki(Oe,ke,Me,_t){if(typeof Me=="object"&&Me!==null&&Me.type===S&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case _:e:{for(var Gt=Me.key,un=ke;un!==null;){if(un.key===Gt){if(Gt=Me.type,Gt===S){if(un.tag===7){A(Oe,un.sibling),ke=j(un,Me.props.children),ke.return=Oe,Oe=ke;break e}}else if(un.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===V&&HJ(Gt)===un.type){A(Oe,un.sibling),ke=j(un,Me.props),ke.ref=BE(Oe,un,Me),ke.return=Oe,Oe=ke;break e}A(Oe,un);break}else x(Oe,un);un=un.sibling}Me.type===S?(ke=$g(Me.props.children,Oe.mode,_t,Me.key),ke.return=Oe,Oe=ke):(_t=oD(Me.type,Me.key,Me.props,null,Oe.mode,_t),_t.ref=BE(Oe,ke,Me),_t.return=Oe,Oe=_t)}return ee(Oe);case T:e:{for(un=Me.key;ke!==null;){if(ke.key===un)if(ke.tag===4&&ke.stateNode.containerInfo===Me.containerInfo&&ke.stateNode.implementation===Me.implementation){A(Oe,ke.sibling),ke=j(ke,Me.children||[]),ke.return=Oe,Oe=ke;break e}else{A(Oe,ke);break}else x(Oe,ke);ke=ke.sibling}ke=$$(Me,Oe.mode,_t),ke.return=Oe,Oe=ke}return ee(Oe);case V:return un=Me._init,Ki(Oe,ke,un(Me._payload),_t)}if(Et(Me))return Bt(Oe,ke,Me,_t);if(Z(Me))return Ut(Oe,ke,Me,_t);FA(Oe,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,ke!==null&&ke.tag===6?(A(Oe,ke.sibling),ke=j(ke,Me),ke.return=Oe,Oe=ke):(A(Oe,ke),ke=M$(Me,Oe.mode,_t),ke.return=Oe,Oe=ke),ee(Oe)):A(Oe,ke)}return Ki}var Iv=qJ(!0),WJ=qJ(!1),MA=hm(null),$A=null,Rv=null,WM=null;function GM(){WM=Rv=$A=null}function YM(y){var x=MA.current;oi(MA),y._currentValue=x}function KM(y,x,A){for(;y!==null;){var N=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,N!==null&&(N.childLanes|=x)):N!==null&&(N.childLanes&x)!==x&&(N.childLanes|=x),y===A)break;y=y.return}}function Nv(y,x){$A=y,WM=Rv=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&x&&(fu=!0),y.firstContext=null)}function Gl(y){var x=y._currentValue;if(WM!==y)if(y={context:y,memoizedValue:x,next:null},Rv===null){if($A===null)throw Error(n(308));Rv=y,$A.dependencies={lanes:0,firstContext:y}}else Rv=Rv.next=y;return x}var Ig=null;function XM(y){Ig===null?Ig=[y]:Ig.push(y)}function GJ(y,x,A,N){var j=x.interleaved;return j===null?(A.next=A,XM(x)):(A.next=j.next,j.next=A),x.interleaved=A,Th(y,N)}function Th(y,x){y.lanes|=x;var A=y.alternate;for(A!==null&&(A.lanes|=x),A=y,y=y.return;y!==null;)y.childLanes|=x,A=y.alternate,A!==null&&(A.childLanes|=x),A=y,y=y.return;return A.tag===3?A.stateNode:null}var gm=!1;function QM(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YJ(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Ch(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function ym(y,x,A){var N=y.updateQueue;if(N===null)return null;if(N=N.shared,ar&2){var j=N.pending;return j===null?x.next=x:(x.next=j.next,j.next=x),N.pending=x,Th(y,A)}return j=N.interleaved,j===null?(x.next=x,XM(N)):(x.next=j.next,j.next=x),N.interleaved=x,Th(y,A)}function LA(y,x,A){if(x=x.updateQueue,x!==null&&(x=x.shared,(A&4194240)!==0)){var N=x.lanes;N&=y.pendingLanes,A|=N,x.lanes=A,Pn(y,A)}}function KJ(y,x){var A=y.updateQueue,N=y.alternate;if(N!==null&&(N=N.updateQueue,A===N)){var j=null,Y=null;if(A=A.firstBaseUpdate,A!==null){do{var ee={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};Y===null?j=Y=ee:Y=Y.next=ee,A=A.next}while(A!==null);Y===null?j=Y=x:Y=Y.next=x}else j=Y=x;A={baseState:N.baseState,firstBaseUpdate:j,lastBaseUpdate:Y,shared:N.shared,effects:N.effects},y.updateQueue=A;return}y=A.lastBaseUpdate,y===null?A.firstBaseUpdate=x:y.next=x,A.lastBaseUpdate=x}function BA(y,x,A,N){var j=y.updateQueue;gm=!1;var Y=j.firstBaseUpdate,ee=j.lastBaseUpdate,he=j.shared.pending;if(he!==null){j.shared.pending=null;var Te=he,Be=Te.next;Te.next=null,ee===null?Y=Be:ee.next=Be,ee=Te;var ct=y.alternate;ct!==null&&(ct=ct.updateQueue,he=ct.lastBaseUpdate,he!==ee&&(he===null?ct.firstBaseUpdate=Be:he.next=Be,ct.lastBaseUpdate=Te))}if(Y!==null){var mt=j.baseState;ee=0,ct=Be=Te=null,he=Y;do{var lt=he.lane,Rt=he.eventTime;if((N&lt)===lt){ct!==null&&(ct=ct.next={eventTime:Rt,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var Bt=y,Ut=he;switch(lt=x,Rt=A,Ut.tag){case 1:if(Bt=Ut.payload,typeof Bt=="function"){mt=Bt.call(Rt,mt,lt);break e}mt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Ut.payload,lt=typeof Bt=="function"?Bt.call(Rt,mt,lt):Bt,lt==null)break e;mt=U({},mt,lt);break e;case 2:gm=!0}}he.callback!==null&&he.lane!==0&&(y.flags|=64,lt=j.effects,lt===null?j.effects=[he]:lt.push(he))}else Rt={eventTime:Rt,lane:lt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},ct===null?(Be=ct=Rt,Te=mt):ct=ct.next=Rt,ee|=lt;if(he=he.next,he===null){if(he=j.shared.pending,he===null)break;lt=he,he=lt.next,lt.next=null,j.lastBaseUpdate=lt,j.shared.pending=null}}while(!0);if(ct===null&&(Te=mt),j.baseState=Te,j.firstBaseUpdate=Be,j.lastBaseUpdate=ct,x=j.shared.interleaved,x!==null){j=x;do ee|=j.lane,j=j.next;while(j!==x)}else Y===null&&(j.shared.lanes=0);Pg|=ee,y.lanes=ee,y.memoizedState=mt}}function XJ(y,x,A){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var N=y[x],j=N.callback;if(j!==null){if(N.callback=null,N=A,typeof j!="function")throw Error(n(191,j));j.call(N)}}}var jE={},Xf=hm(jE),zE=hm(jE),UE=hm(jE);function Rg(y){if(y===jE)throw Error(n(174));return y}function JM(y,x){switch(Qr(UE,x),Qr(zE,y),Qr(Xf,jE),y=x.nodeType,y){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:pe(null,"");break;default:y=y===8?x.parentNode:x,x=y.namespaceURI||null,y=y.tagName,x=pe(x,y)}oi(Xf),Qr(Xf,x)}function Pv(){oi(Xf),oi(zE),oi(UE)}function QJ(y){Rg(UE.current);var x=Rg(Xf.current),A=pe(x,y.type);x!==A&&(Qr(zE,y),Qr(Xf,A))}function ZM(y){zE.current===y&&(oi(Xf),oi(zE))}var Ti=hm(0);function jA(y){for(var x=y;x!==null;){if(x.tag===13){var A=x.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var e$=[];function t$(){for(var y=0;y<e$.length;y++)e$[y]._workInProgressVersionPrimary=null;e$.length=0}var zA=E.ReactCurrentDispatcher,n$=E.ReactCurrentBatchConfig,Ng=0,Ci=null,Io=null,Go=null,UA=!1,VE=!1,HE=0,d4e=0;function Ws(){throw Error(n(321))}function r$(y,x){if(x===null)return!1;for(var A=0;A<x.length&&A<y.length;A++)if(!Fc(y[A],x[A]))return!1;return!0}function i$(y,x,A,N,j,Y){if(Ng=Y,Ci=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,zA.current=y===null||y.memoizedState===null?g4e:y4e,y=A(N,j),VE){Y=0;do{if(VE=!1,HE=0,25<=Y)throw Error(n(301));Y+=1,Go=Io=null,x.updateQueue=null,zA.current=v4e,y=A(N,j)}while(VE)}if(zA.current=qA,x=Io!==null&&Io.next!==null,Ng=0,Go=Io=Ci=null,UA=!1,x)throw Error(n(300));return y}function o$(){var y=HE!==0;return HE=0,y}function Qf(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Go===null?Ci.memoizedState=Go=y:Go=Go.next=y,Go}function Yl(){if(Io===null){var y=Ci.alternate;y=y!==null?y.memoizedState:null}else y=Io.next;var x=Go===null?Ci.memoizedState:Go.next;if(x!==null)Go=x,Io=y;else{if(y===null)throw Error(n(310));Io=y,y={memoizedState:Io.memoizedState,baseState:Io.baseState,baseQueue:Io.baseQueue,queue:Io.queue,next:null},Go===null?Ci.memoizedState=Go=y:Go=Go.next=y}return Go}function qE(y,x){return typeof x=="function"?x(y):x}function s$(y){var x=Yl(),A=x.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=y;var N=Io,j=N.baseQueue,Y=A.pending;if(Y!==null){if(j!==null){var ee=j.next;j.next=Y.next,Y.next=ee}N.baseQueue=j=Y,A.pending=null}if(j!==null){Y=j.next,N=N.baseState;var he=ee=null,Te=null,Be=Y;do{var ct=Be.lane;if((Ng&ct)===ct)Te!==null&&(Te=Te.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),N=Be.hasEagerState?Be.eagerState:y(N,Be.action);else{var mt={lane:ct,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};Te===null?(he=Te=mt,ee=N):Te=Te.next=mt,Ci.lanes|=ct,Pg|=ct}Be=Be.next}while(Be!==null&&Be!==Y);Te===null?ee=N:Te.next=he,Fc(N,x.memoizedState)||(fu=!0),x.memoizedState=N,x.baseState=ee,x.baseQueue=Te,A.lastRenderedState=N}if(y=A.interleaved,y!==null){j=y;do Y=j.lane,Ci.lanes|=Y,Pg|=Y,j=j.next;while(j!==y)}else j===null&&(A.lanes=0);return[x.memoizedState,A.dispatch]}function a$(y){var x=Yl(),A=x.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=y;var N=A.dispatch,j=A.pending,Y=x.memoizedState;if(j!==null){A.pending=null;var ee=j=j.next;do Y=y(Y,ee.action),ee=ee.next;while(ee!==j);Fc(Y,x.memoizedState)||(fu=!0),x.memoizedState=Y,x.baseQueue===null&&(x.baseState=Y),A.lastRenderedState=Y}return[Y,N]}function JJ(){}function ZJ(y,x){var A=Ci,N=Yl(),j=x(),Y=!Fc(N.memoizedState,j);if(Y&&(N.memoizedState=j,fu=!0),N=N.queue,u$(nZ.bind(null,A,N,y),[y]),N.getSnapshot!==x||Y||Go!==null&&Go.memoizedState.tag&1){if(A.flags|=2048,WE(9,tZ.bind(null,A,N,j,x),void 0,null),Yo===null)throw Error(n(349));Ng&30||eZ(A,x,j)}return j}function eZ(y,x,A){y.flags|=16384,y={getSnapshot:x,value:A},x=Ci.updateQueue,x===null?(x={lastEffect:null,stores:null},Ci.updateQueue=x,x.stores=[y]):(A=x.stores,A===null?x.stores=[y]:A.push(y))}function tZ(y,x,A,N){x.value=A,x.getSnapshot=N,rZ(x)&&iZ(y)}function nZ(y,x,A){return A(function(){rZ(x)&&iZ(y)})}function rZ(y){var x=y.getSnapshot;y=y.value;try{var A=x();return!Fc(y,A)}catch{return!0}}function iZ(y){var x=Th(y,1);x!==null&&jc(x,y,1,-1)}function oZ(y){var x=Qf();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qE,lastRenderedState:y},x.queue=y,y=y.dispatch=m4e.bind(null,Ci,y),[x.memoizedState,y]}function WE(y,x,A,N){return y={tag:y,create:x,destroy:A,deps:N,next:null},x=Ci.updateQueue,x===null?(x={lastEffect:null,stores:null},Ci.updateQueue=x,x.lastEffect=y.next=y):(A=x.lastEffect,A===null?x.lastEffect=y.next=y:(N=A.next,A.next=y,y.next=N,x.lastEffect=y)),y}function sZ(){return Yl().memoizedState}function VA(y,x,A,N){var j=Qf();Ci.flags|=y,j.memoizedState=WE(1|x,A,void 0,N===void 0?null:N)}function HA(y,x,A,N){var j=Yl();N=N===void 0?null:N;var Y=void 0;if(Io!==null){var ee=Io.memoizedState;if(Y=ee.destroy,N!==null&&r$(N,ee.deps)){j.memoizedState=WE(x,A,Y,N);return}}Ci.flags|=y,j.memoizedState=WE(1|x,A,Y,N)}function aZ(y,x){return VA(8390656,8,y,x)}function u$(y,x){return HA(2048,8,y,x)}function uZ(y,x){return HA(4,2,y,x)}function lZ(y,x){return HA(4,4,y,x)}function cZ(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function fZ(y,x,A){return A=A!=null?A.concat([y]):null,HA(4,4,cZ.bind(null,x,y),A)}function l$(){}function dZ(y,x){var A=Yl();x=x===void 0?null:x;var N=A.memoizedState;return N!==null&&x!==null&&r$(x,N[1])?N[0]:(A.memoizedState=[y,x],y)}function hZ(y,x){var A=Yl();x=x===void 0?null:x;var N=A.memoizedState;return N!==null&&x!==null&&r$(x,N[1])?N[0]:(y=y(),A.memoizedState=[y,x],y)}function pZ(y,x,A){return Ng&21?(Fc(A,x)||(A=vt(),Ci.lanes|=A,Pg|=A,y.baseState=!0),x):(y.baseState&&(y.baseState=!1,fu=!0),y.memoizedState=A)}function h4e(y,x){var A=Yt;Yt=A!==0&&4>A?A:4,y(!0);var N=n$.transition;n$.transition={};try{y(!1),x()}finally{Yt=A,n$.transition=N}}function mZ(){return Yl().memoizedState}function p4e(y,x,A){var N=wm(y);if(A={lane:N,action:A,hasEagerState:!1,eagerState:null,next:null},gZ(y))yZ(x,A);else if(A=GJ(y,x,A,N),A!==null){var j=Da();jc(A,y,N,j),vZ(A,x,N)}}function m4e(y,x,A){var N=wm(y),j={lane:N,action:A,hasEagerState:!1,eagerState:null,next:null};if(gZ(y))yZ(x,j);else{var Y=y.alternate;if(y.lanes===0&&(Y===null||Y.lanes===0)&&(Y=x.lastRenderedReducer,Y!==null))try{var ee=x.lastRenderedState,he=Y(ee,A);if(j.hasEagerState=!0,j.eagerState=he,Fc(he,ee)){var Te=x.interleaved;Te===null?(j.next=j,XM(x)):(j.next=Te.next,Te.next=j),x.interleaved=j;return}}catch{}finally{}A=GJ(y,x,j,N),A!==null&&(j=Da(),jc(A,y,N,j),vZ(A,x,N))}}function gZ(y){var x=y.alternate;return y===Ci||x!==null&&x===Ci}function yZ(y,x){VE=UA=!0;var A=y.pending;A===null?x.next=x:(x.next=A.next,A.next=x),y.pending=x}function vZ(y,x,A){if(A&4194240){var N=x.lanes;N&=y.pendingLanes,A|=N,x.lanes=A,Pn(y,A)}}var qA={readContext:Gl,useCallback:Ws,useContext:Ws,useEffect:Ws,useImperativeHandle:Ws,useInsertionEffect:Ws,useLayoutEffect:Ws,useMemo:Ws,useReducer:Ws,useRef:Ws,useState:Ws,useDebugValue:Ws,useDeferredValue:Ws,useTransition:Ws,useMutableSource:Ws,useSyncExternalStore:Ws,useId:Ws,unstable_isNewReconciler:!1},g4e={readContext:Gl,useCallback:function(y,x){return Qf().memoizedState=[y,x===void 0?null:x],y},useContext:Gl,useEffect:aZ,useImperativeHandle:function(y,x,A){return A=A!=null?A.concat([y]):null,VA(4194308,4,cZ.bind(null,x,y),A)},useLayoutEffect:function(y,x){return VA(4194308,4,y,x)},useInsertionEffect:function(y,x){return VA(4,2,y,x)},useMemo:function(y,x){var A=Qf();return x=x===void 0?null:x,y=y(),A.memoizedState=[y,x],y},useReducer:function(y,x,A){var N=Qf();return x=A!==void 0?A(x):x,N.memoizedState=N.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},N.queue=y,y=y.dispatch=p4e.bind(null,Ci,y),[N.memoizedState,y]},useRef:function(y){var x=Qf();return y={current:y},x.memoizedState=y},useState:oZ,useDebugValue:l$,useDeferredValue:function(y){return Qf().memoizedState=y},useTransition:function(){var y=oZ(!1),x=y[0];return y=h4e.bind(null,y[1]),Qf().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,A){var N=Ci,j=Qf();if(hi){if(A===void 0)throw Error(n(407));A=A()}else{if(A=x(),Yo===null)throw Error(n(349));Ng&30||eZ(N,x,A)}j.memoizedState=A;var Y={value:A,getSnapshot:x};return j.queue=Y,aZ(nZ.bind(null,N,Y,y),[y]),N.flags|=2048,WE(9,tZ.bind(null,N,Y,A,x),void 0,null),A},useId:function(){var y=Qf(),x=Yo.identifierPrefix;if(hi){var A=_h,N=Eh;A=(N&~(1<<32-So(N)-1)).toString(32)+A,x=":"+x+"R"+A,A=HE++,0<A&&(x+="H"+A.toString(32)),x+=":"}else A=d4e++,x=":"+x+"r"+A.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},y4e={readContext:Gl,useCallback:dZ,useContext:Gl,useEffect:u$,useImperativeHandle:fZ,useInsertionEffect:uZ,useLayoutEffect:lZ,useMemo:hZ,useReducer:s$,useRef:sZ,useState:function(){return s$(qE)},useDebugValue:l$,useDeferredValue:function(y){var x=Yl();return pZ(x,Io.memoizedState,y)},useTransition:function(){var y=s$(qE)[0],x=Yl().memoizedState;return[y,x]},useMutableSource:JJ,useSyncExternalStore:ZJ,useId:mZ,unstable_isNewReconciler:!1},v4e={readContext:Gl,useCallback:dZ,useContext:Gl,useEffect:u$,useImperativeHandle:fZ,useInsertionEffect:uZ,useLayoutEffect:lZ,useMemo:hZ,useReducer:a$,useRef:sZ,useState:function(){return a$(qE)},useDebugValue:l$,useDeferredValue:function(y){var x=Yl();return Io===null?x.memoizedState=y:pZ(x,Io.memoizedState,y)},useTransition:function(){var y=a$(qE)[0],x=Yl().memoizedState;return[y,x]},useMutableSource:JJ,useSyncExternalStore:ZJ,useId:mZ,unstable_isNewReconciler:!1};function $c(y,x){if(y&&y.defaultProps){x=U({},x),y=y.defaultProps;for(var A in y)x[A]===void 0&&(x[A]=y[A]);return x}return x}function c$(y,x,A,N){x=y.memoizedState,A=A(N,x),A=A==null?x:U({},x,A),y.memoizedState=A,y.lanes===0&&(y.updateQueue.baseState=A)}var WA={isMounted:function(y){return(y=y._reactInternals)?bn(y)===y:!1},enqueueSetState:function(y,x,A){y=y._reactInternals;var N=Da(),j=wm(y),Y=Ch(N,j);Y.payload=x,A!=null&&(Y.callback=A),x=ym(y,Y,j),x!==null&&(jc(x,y,j,N),LA(x,y,j))},enqueueReplaceState:function(y,x,A){y=y._reactInternals;var N=Da(),j=wm(y),Y=Ch(N,j);Y.tag=1,Y.payload=x,A!=null&&(Y.callback=A),x=ym(y,Y,j),x!==null&&(jc(x,y,j,N),LA(x,y,j))},enqueueForceUpdate:function(y,x){y=y._reactInternals;var A=Da(),N=wm(y),j=Ch(A,N);j.tag=2,x!=null&&(j.callback=x),x=ym(y,j,N),x!==null&&(jc(x,y,N,A),LA(x,y,N))}};function bZ(y,x,A,N,j,Y,ee){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(N,Y,ee):x.prototype&&x.prototype.isPureReactComponent?!NE(A,N)||!NE(j,Y):!0}function xZ(y,x,A){var N=!1,j=pm,Y=x.contextType;return typeof Y=="object"&&Y!==null?Y=Gl(Y):(j=cu(x)?Ag:qs.current,N=x.contextTypes,Y=(N=N!=null)?Sv(y,j):pm),x=new x(A,Y),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=WA,y.stateNode=x,x._reactInternals=y,N&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=j,y.__reactInternalMemoizedMaskedChildContext=Y),x}function wZ(y,x,A,N){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(A,N),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(A,N),x.state!==y&&WA.enqueueReplaceState(x,x.state,null)}function f$(y,x,A,N){var j=y.stateNode;j.props=A,j.state=y.memoizedState,j.refs={},QM(y);var Y=x.contextType;typeof Y=="object"&&Y!==null?j.context=Gl(Y):(Y=cu(x)?Ag:qs.current,j.context=Sv(y,Y)),j.state=y.memoizedState,Y=x.getDerivedStateFromProps,typeof Y=="function"&&(c$(y,x,Y,A),j.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(x=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),x!==j.state&&WA.enqueueReplaceState(j,j.state,null),BA(y,A,j,N),j.state=y.memoizedState),typeof j.componentDidMount=="function"&&(y.flags|=4194308)}function Ov(y,x){try{var A="",N=x;do A+=X(N),N=N.return;while(N);var j=A}catch(Y){j=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:y,source:x,stack:j,digest:null}}function d$(y,x,A){return{value:y,source:null,stack:A??null,digest:x??null}}function h$(y,x){try{console.error(x.value)}catch(A){setTimeout(function(){throw A})}}var b4e=typeof WeakMap=="function"?WeakMap:Map;function EZ(y,x,A){A=Ch(-1,A),A.tag=3,A.payload={element:null};var N=x.value;return A.callback=function(){ZA||(ZA=!0,D$=N),h$(y,x)},A}function _Z(y,x,A){A=Ch(-1,A),A.tag=3;var N=y.type.getDerivedStateFromError;if(typeof N=="function"){var j=x.value;A.payload=function(){return N(j)},A.callback=function(){h$(y,x)}}var Y=y.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(A.callback=function(){h$(y,x),typeof N!="function"&&(bm===null?bm=new Set([this]):bm.add(this));var ee=x.stack;this.componentDidCatch(x.value,{componentStack:ee!==null?ee:""})}),A}function TZ(y,x,A){var N=y.pingCache;if(N===null){N=y.pingCache=new b4e;var j=new Set;N.set(x,j)}else j=N.get(x),j===void 0&&(j=new Set,N.set(x,j));j.has(A)||(j.add(A),y=P4e.bind(null,y,x,A),x.then(y,y))}function CZ(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function SZ(y,x,A,N,j){return y.mode&1?(y.flags|=65536,y.lanes=j,y):(y===x?y.flags|=65536:(y.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(x=Ch(-1,1),x.tag=2,ym(A,x,1))),A.lanes|=1),y)}var x4e=E.ReactCurrentOwner,fu=!1;function Aa(y,x,A,N){x.child=y===null?WJ(x,null,A,N):Iv(x,y.child,A,N)}function AZ(y,x,A,N,j){A=A.render;var Y=x.ref;return Nv(x,j),N=i$(y,x,A,N,Y,j),A=o$(),y!==null&&!fu?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~j,Sh(y,x,j)):(hi&&A&&zM(x),x.flags|=1,Aa(y,x,N,j),x.child)}function DZ(y,x,A,N,j){if(y===null){var Y=A.type;return typeof Y=="function"&&!F$(Y)&&Y.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(x.tag=15,x.type=Y,kZ(y,x,Y,N,j)):(y=oD(A.type,null,N,x,x.mode,j),y.ref=x.ref,y.return=x,x.child=y)}if(Y=y.child,!(y.lanes&j)){var ee=Y.memoizedProps;if(A=A.compare,A=A!==null?A:NE,A(ee,N)&&y.ref===x.ref)return Sh(y,x,j)}return x.flags|=1,y=_m(Y,N),y.ref=x.ref,y.return=x,x.child=y}function kZ(y,x,A,N,j){if(y!==null){var Y=y.memoizedProps;if(NE(Y,N)&&y.ref===x.ref)if(fu=!1,x.pendingProps=N=Y,(y.lanes&j)!==0)y.flags&131072&&(fu=!0);else return x.lanes=y.lanes,Sh(y,x,j)}return p$(y,x,A,N,j)}function IZ(y,x,A){var N=x.pendingProps,j=N.children,Y=y!==null?y.memoizedState:null;if(N.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qr(Mv,Zu),Zu|=A;else{if(!(A&1073741824))return y=Y!==null?Y.baseLanes|A:A,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null,transitions:null},x.updateQueue=null,Qr(Mv,Zu),Zu|=y,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=Y!==null?Y.baseLanes:A,Qr(Mv,Zu),Zu|=N}else Y!==null?(N=Y.baseLanes|A,x.memoizedState=null):N=A,Qr(Mv,Zu),Zu|=N;return Aa(y,x,j,A),x.child}function RZ(y,x){var A=x.ref;(y===null&&A!==null||y!==null&&y.ref!==A)&&(x.flags|=512,x.flags|=2097152)}function p$(y,x,A,N,j){var Y=cu(A)?Ag:qs.current;return Y=Sv(x,Y),Nv(x,j),A=i$(y,x,A,N,Y,j),N=o$(),y!==null&&!fu?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~j,Sh(y,x,j)):(hi&&N&&zM(x),x.flags|=1,Aa(y,x,A,j),x.child)}function NZ(y,x,A,N,j){if(cu(A)){var Y=!0;IA(x)}else Y=!1;if(Nv(x,j),x.stateNode===null)YA(y,x),xZ(x,A,N),f$(x,A,N,j),N=!0;else if(y===null){var ee=x.stateNode,he=x.memoizedProps;ee.props=he;var Te=ee.context,Be=A.contextType;typeof Be=="object"&&Be!==null?Be=Gl(Be):(Be=cu(A)?Ag:qs.current,Be=Sv(x,Be));var ct=A.getDerivedStateFromProps,mt=typeof ct=="function"||typeof ee.getSnapshotBeforeUpdate=="function";mt||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(he!==N||Te!==Be)&&wZ(x,ee,N,Be),gm=!1;var lt=x.memoizedState;ee.state=lt,BA(x,N,ee,j),Te=x.memoizedState,he!==N||lt!==Te||lu.current||gm?(typeof ct=="function"&&(c$(x,A,ct,N),Te=x.memoizedState),(he=gm||bZ(x,A,he,N,lt,Te,Be))?(mt||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=N,x.memoizedState=Te),ee.props=N,ee.state=Te,ee.context=Be,N=he):(typeof ee.componentDidMount=="function"&&(x.flags|=4194308),N=!1)}else{ee=x.stateNode,YJ(y,x),he=x.memoizedProps,Be=x.type===x.elementType?he:$c(x.type,he),ee.props=Be,mt=x.pendingProps,lt=ee.context,Te=A.contextType,typeof Te=="object"&&Te!==null?Te=Gl(Te):(Te=cu(A)?Ag:qs.current,Te=Sv(x,Te));var Rt=A.getDerivedStateFromProps;(ct=typeof Rt=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(he!==mt||lt!==Te)&&wZ(x,ee,N,Te),gm=!1,lt=x.memoizedState,ee.state=lt,BA(x,N,ee,j);var Bt=x.memoizedState;he!==mt||lt!==Bt||lu.current||gm?(typeof Rt=="function"&&(c$(x,A,Rt,N),Bt=x.memoizedState),(Be=gm||bZ(x,A,Be,N,lt,Bt,Te)||!1)?(ct||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(N,Bt,Te),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(N,Bt,Te)),typeof ee.componentDidUpdate=="function"&&(x.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ee.componentDidUpdate!="function"||he===y.memoizedProps&&lt===y.memoizedState||(x.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||he===y.memoizedProps&&lt===y.memoizedState||(x.flags|=1024),x.memoizedProps=N,x.memoizedState=Bt),ee.props=N,ee.state=Bt,ee.context=Te,N=Be):(typeof ee.componentDidUpdate!="function"||he===y.memoizedProps&&lt===y.memoizedState||(x.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||he===y.memoizedProps&&lt===y.memoizedState||(x.flags|=1024),N=!1)}return m$(y,x,A,N,Y,j)}function m$(y,x,A,N,j,Y){RZ(y,x);var ee=(x.flags&128)!==0;if(!N&&!ee)return j&&$J(x,A,!1),Sh(y,x,Y);N=x.stateNode,x4e.current=x;var he=ee&&typeof A.getDerivedStateFromError!="function"?null:N.render();return x.flags|=1,y!==null&&ee?(x.child=Iv(x,y.child,null,Y),x.child=Iv(x,null,he,Y)):Aa(y,x,he,Y),x.memoizedState=N.state,j&&$J(x,A,!0),x.child}function PZ(y){var x=y.stateNode;x.pendingContext?FJ(y,x.pendingContext,x.pendingContext!==x.context):x.context&&FJ(y,x.context,!1),JM(y,x.containerInfo)}function OZ(y,x,A,N,j){return kv(),qM(j),x.flags|=256,Aa(y,x,A,N),x.child}var g$={dehydrated:null,treeContext:null,retryLane:0};function y$(y){return{baseLanes:y,cachePool:null,transitions:null}}function FZ(y,x,A){var N=x.pendingProps,j=Ti.current,Y=!1,ee=(x.flags&128)!==0,he;if((he=ee)||(he=y!==null&&y.memoizedState===null?!1:(j&2)!==0),he?(Y=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(j|=1),Qr(Ti,j&1),y===null)return HM(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(x.mode&1?y.data==="$!"?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(ee=N.children,y=N.fallback,Y?(N=x.mode,Y=x.child,ee={mode:"hidden",children:ee},!(N&1)&&Y!==null?(Y.childLanes=0,Y.pendingProps=ee):Y=sD(ee,N,0,null),y=$g(y,N,A,null),Y.return=x,y.return=x,Y.sibling=y,x.child=Y,x.child.memoizedState=y$(A),x.memoizedState=g$,y):v$(x,ee));if(j=y.memoizedState,j!==null&&(he=j.dehydrated,he!==null))return w4e(y,x,ee,N,he,j,A);if(Y){Y=N.fallback,ee=x.mode,j=y.child,he=j.sibling;var Te={mode:"hidden",children:N.children};return!(ee&1)&&x.child!==j?(N=x.child,N.childLanes=0,N.pendingProps=Te,x.deletions=null):(N=_m(j,Te),N.subtreeFlags=j.subtreeFlags&14680064),he!==null?Y=_m(he,Y):(Y=$g(Y,ee,A,null),Y.flags|=2),Y.return=x,N.return=x,N.sibling=Y,x.child=N,N=Y,Y=x.child,ee=y.child.memoizedState,ee=ee===null?y$(A):{baseLanes:ee.baseLanes|A,cachePool:null,transitions:ee.transitions},Y.memoizedState=ee,Y.childLanes=y.childLanes&~A,x.memoizedState=g$,N}return Y=y.child,y=Y.sibling,N=_m(Y,{mode:"visible",children:N.children}),!(x.mode&1)&&(N.lanes=A),N.return=x,N.sibling=null,y!==null&&(A=x.deletions,A===null?(x.deletions=[y],x.flags|=16):A.push(y)),x.child=N,x.memoizedState=null,N}function v$(y,x){return x=sD({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function GA(y,x,A,N){return N!==null&&qM(N),Iv(x,y.child,null,A),y=v$(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function w4e(y,x,A,N,j,Y,ee){if(A)return x.flags&256?(x.flags&=-257,N=d$(Error(n(422))),GA(y,x,ee,N)):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(Y=N.fallback,j=x.mode,N=sD({mode:"visible",children:N.children},j,0,null),Y=$g(Y,j,ee,null),Y.flags|=2,N.return=x,Y.return=x,N.sibling=Y,x.child=N,x.mode&1&&Iv(x,y.child,null,ee),x.child.memoizedState=y$(ee),x.memoizedState=g$,Y);if(!(x.mode&1))return GA(y,x,ee,null);if(j.data==="$!"){if(N=j.nextSibling&&j.nextSibling.dataset,N)var he=N.dgst;return N=he,Y=Error(n(419)),N=d$(Y,N,void 0),GA(y,x,ee,N)}if(he=(ee&y.childLanes)!==0,fu||he){if(N=Yo,N!==null){switch(ee&-ee){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(N.suspendedLanes|ee)?0:j,j!==0&&j!==Y.retryLane&&(Y.retryLane=j,Th(y,j),jc(N,y,j,-1))}return O$(),N=d$(Error(n(421))),GA(y,x,ee,N)}return j.data==="$?"?(x.flags|=128,x.child=y.child,x=O4e.bind(null,y),j._reactRetry=x,null):(y=Y.treeContext,Ju=dm(j.nextSibling),Qu=x,hi=!0,Mc=null,y!==null&&(ql[Wl++]=Eh,ql[Wl++]=_h,ql[Wl++]=Dg,Eh=y.id,_h=y.overflow,Dg=x),x=v$(x,N.children),x.flags|=4096,x)}function MZ(y,x,A){y.lanes|=x;var N=y.alternate;N!==null&&(N.lanes|=x),KM(y.return,x,A)}function b$(y,x,A,N,j){var Y=y.memoizedState;Y===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:N,tail:A,tailMode:j}:(Y.isBackwards=x,Y.rendering=null,Y.renderingStartTime=0,Y.last=N,Y.tail=A,Y.tailMode=j)}function $Z(y,x,A){var N=x.pendingProps,j=N.revealOrder,Y=N.tail;if(Aa(y,x,N.children,A),N=Ti.current,N&2)N=N&1|2,x.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&MZ(y,A,x);else if(y.tag===19)MZ(y,A,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}N&=1}if(Qr(Ti,N),!(x.mode&1))x.memoizedState=null;else switch(j){case"forwards":for(A=x.child,j=null;A!==null;)y=A.alternate,y!==null&&jA(y)===null&&(j=A),A=A.sibling;A=j,A===null?(j=x.child,x.child=null):(j=A.sibling,A.sibling=null),b$(x,!1,j,A,Y);break;case"backwards":for(A=null,j=x.child,x.child=null;j!==null;){if(y=j.alternate,y!==null&&jA(y)===null){x.child=j;break}y=j.sibling,j.sibling=A,A=j,j=y}b$(x,!0,A,null,Y);break;case"together":b$(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function YA(y,x){!(x.mode&1)&&y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2)}function Sh(y,x,A){if(y!==null&&(x.dependencies=y.dependencies),Pg|=x.lanes,!(A&x.childLanes))return null;if(y!==null&&x.child!==y.child)throw Error(n(153));if(x.child!==null){for(y=x.child,A=_m(y,y.pendingProps),x.child=A,A.return=x;y.sibling!==null;)y=y.sibling,A=A.sibling=_m(y,y.pendingProps),A.return=x;A.sibling=null}return x.child}function E4e(y,x,A){switch(x.tag){case 3:PZ(x),kv();break;case 5:QJ(x);break;case 1:cu(x.type)&&IA(x);break;case 4:JM(x,x.stateNode.containerInfo);break;case 10:var N=x.type._context,j=x.memoizedProps.value;Qr(MA,N._currentValue),N._currentValue=j;break;case 13:if(N=x.memoizedState,N!==null)return N.dehydrated!==null?(Qr(Ti,Ti.current&1),x.flags|=128,null):A&x.child.childLanes?FZ(y,x,A):(Qr(Ti,Ti.current&1),y=Sh(y,x,A),y!==null?y.sibling:null);Qr(Ti,Ti.current&1);break;case 19:if(N=(A&x.childLanes)!==0,y.flags&128){if(N)return $Z(y,x,A);x.flags|=128}if(j=x.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Qr(Ti,Ti.current),N)break;return null;case 22:case 23:return x.lanes=0,IZ(y,x,A)}return Sh(y,x,A)}var LZ,x$,BZ,jZ;LZ=function(y,x){for(var A=x.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===x)break;for(;A.sibling===null;){if(A.return===null||A.return===x)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},x$=function(){},BZ=function(y,x,A,N){var j=y.memoizedProps;if(j!==N){y=x.stateNode,Rg(Xf.current);var Y=null;switch(A){case"input":j=Ae(y,j),N=Ae(y,N),Y=[];break;case"select":j=U({},j,{value:void 0}),N=U({},N,{value:void 0}),Y=[];break;case"textarea":j=xt(y,j),N=xt(y,N),Y=[];break;default:typeof j.onClick!="function"&&typeof N.onClick=="function"&&(y.onclick=AA)}en(A,N);var ee;A=null;for(Be in j)if(!N.hasOwnProperty(Be)&&j.hasOwnProperty(Be)&&j[Be]!=null)if(Be==="style"){var he=j[Be];for(ee in he)he.hasOwnProperty(ee)&&(A||(A={}),A[ee]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(i.hasOwnProperty(Be)?Y||(Y=[]):(Y=Y||[]).push(Be,null));for(Be in N){var Te=N[Be];if(he=j!=null?j[Be]:void 0,N.hasOwnProperty(Be)&&Te!==he&&(Te!=null||he!=null))if(Be==="style")if(he){for(ee in he)!he.hasOwnProperty(ee)||Te&&Te.hasOwnProperty(ee)||(A||(A={}),A[ee]="");for(ee in Te)Te.hasOwnProperty(ee)&&he[ee]!==Te[ee]&&(A||(A={}),A[ee]=Te[ee])}else A||(Y||(Y=[]),Y.push(Be,A)),A=Te;else Be==="dangerouslySetInnerHTML"?(Te=Te?Te.__html:void 0,he=he?he.__html:void 0,Te!=null&&he!==Te&&(Y=Y||[]).push(Be,Te)):Be==="children"?typeof Te!="string"&&typeof Te!="number"||(Y=Y||[]).push(Be,""+Te):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(i.hasOwnProperty(Be)?(Te!=null&&Be==="onScroll"&&ii("scroll",y),Y||he===Te||(Y=[])):(Y=Y||[]).push(Be,Te))}A&&(Y=Y||[]).push("style",A);var Be=Y;(x.updateQueue=Be)&&(x.flags|=4)}},jZ=function(y,x,A,N){A!==N&&(x.flags|=4)};function GE(y,x){if(!hi)switch(y.tailMode){case"hidden":x=y.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?y.tail=null:A.sibling=null;break;case"collapsed":A=y.tail;for(var N=null;A!==null;)A.alternate!==null&&(N=A),A=A.sibling;N===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:N.sibling=null}}function Gs(y){var x=y.alternate!==null&&y.alternate.child===y.child,A=0,N=0;if(x)for(var j=y.child;j!==null;)A|=j.lanes|j.childLanes,N|=j.subtreeFlags&14680064,N|=j.flags&14680064,j.return=y,j=j.sibling;else for(j=y.child;j!==null;)A|=j.lanes|j.childLanes,N|=j.subtreeFlags,N|=j.flags,j.return=y,j=j.sibling;return y.subtreeFlags|=N,y.childLanes=A,x}function _4e(y,x,A){var N=x.pendingProps;switch(UM(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(x),null;case 1:return cu(x.type)&&kA(),Gs(x),null;case 3:return N=x.stateNode,Pv(),oi(lu),oi(qs),t$(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(y===null||y.child===null)&&(OA(x)?x.flags|=4:y===null||y.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,Mc!==null&&(R$(Mc),Mc=null))),x$(y,x),Gs(x),null;case 5:ZM(x);var j=Rg(UE.current);if(A=x.type,y!==null&&x.stateNode!=null)BZ(y,x,A,N,j),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!N){if(x.stateNode===null)throw Error(n(166));return Gs(x),null}if(y=Rg(Xf.current),OA(x)){N=x.stateNode,A=x.type;var Y=x.memoizedProps;switch(N[Kf]=x,N[$E]=Y,y=(x.mode&1)!==0,A){case"dialog":ii("cancel",N),ii("close",N);break;case"iframe":case"object":case"embed":ii("load",N);break;case"video":case"audio":for(j=0;j<OE.length;j++)ii(OE[j],N);break;case"source":ii("error",N);break;case"img":case"image":case"link":ii("error",N),ii("load",N);break;case"details":ii("toggle",N);break;case"input":Ue(N,Y),ii("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!Y.multiple},ii("invalid",N);break;case"textarea":te(N,Y),ii("invalid",N)}en(A,Y),j=null;for(var ee in Y)if(Y.hasOwnProperty(ee)){var he=Y[ee];ee==="children"?typeof he=="string"?N.textContent!==he&&(Y.suppressHydrationWarning!==!0&&SA(N.textContent,he,y),j=["children",he]):typeof he=="number"&&N.textContent!==""+he&&(Y.suppressHydrationWarning!==!0&&SA(N.textContent,he,y),j=["children",""+he]):i.hasOwnProperty(ee)&&he!=null&&ee==="onScroll"&&ii("scroll",N)}switch(A){case"input":fe(N),Ge(N,Y,!0);break;case"textarea":fe(N),be(N);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(N.onclick=AA)}N=j,x.updateQueue=N,N!==null&&(x.flags|=4)}else{ee=j.nodeType===9?j:j.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=ae(A)),y==="http://www.w3.org/1999/xhtml"?A==="script"?(y=ee.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof N.is=="string"?y=ee.createElement(A,{is:N.is}):(y=ee.createElement(A),A==="select"&&(ee=y,N.multiple?ee.multiple=!0:N.size&&(ee.size=N.size))):y=ee.createElementNS(y,A),y[Kf]=x,y[$E]=N,LZ(y,x,!1,!1),x.stateNode=y;e:{switch(ee=kn(A,N),A){case"dialog":ii("cancel",y),ii("close",y),j=N;break;case"iframe":case"object":case"embed":ii("load",y),j=N;break;case"video":case"audio":for(j=0;j<OE.length;j++)ii(OE[j],y);j=N;break;case"source":ii("error",y),j=N;break;case"img":case"image":case"link":ii("error",y),ii("load",y),j=N;break;case"details":ii("toggle",y),j=N;break;case"input":Ue(y,N),j=Ae(y,N),ii("invalid",y);break;case"option":j=N;break;case"select":y._wrapperState={wasMultiple:!!N.multiple},j=U({},N,{value:void 0}),ii("invalid",y);break;case"textarea":te(y,N),j=xt(y,N),ii("invalid",y);break;default:j=N}en(A,j),he=j;for(Y in he)if(he.hasOwnProperty(Y)){var Te=he[Y];Y==="style"?zt(y,Te):Y==="dangerouslySetInnerHTML"?(Te=Te?Te.__html:void 0,Te!=null&&$e(y,Te)):Y==="children"?typeof Te=="string"?(A!=="textarea"||Te!=="")&&Ne(y,Te):typeof Te=="number"&&Ne(y,""+Te):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?Te!=null&&Y==="onScroll"&&ii("scroll",y):Te!=null&&w(y,Y,Te,ee))}switch(A){case"input":fe(y),Ge(y,N,!1);break;case"textarea":fe(y),be(y);break;case"option":N.value!=null&&y.setAttribute("value",""+me(N.value));break;case"select":y.multiple=!!N.multiple,Y=N.value,Y!=null?ht(y,!!N.multiple,Y,!1):N.defaultValue!=null&&ht(y,!!N.multiple,N.defaultValue,!0);break;default:typeof j.onClick=="function"&&(y.onclick=AA)}switch(A){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Gs(x),null;case 6:if(y&&x.stateNode!=null)jZ(y,x,y.memoizedProps,N);else{if(typeof N!="string"&&x.stateNode===null)throw Error(n(166));if(A=Rg(UE.current),Rg(Xf.current),OA(x)){if(N=x.stateNode,A=x.memoizedProps,N[Kf]=x,(Y=N.nodeValue!==A)&&(y=Qu,y!==null))switch(y.tag){case 3:SA(N.nodeValue,A,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&SA(N.nodeValue,A,(y.mode&1)!==0)}Y&&(x.flags|=4)}else N=(A.nodeType===9?A:A.ownerDocument).createTextNode(N),N[Kf]=x,x.stateNode=N}return Gs(x),null;case 13:if(oi(Ti),N=x.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(hi&&Ju!==null&&x.mode&1&&!(x.flags&128))VJ(),kv(),x.flags|=98560,Y=!1;else if(Y=OA(x),N!==null&&N.dehydrated!==null){if(y===null){if(!Y)throw Error(n(318));if(Y=x.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(n(317));Y[Kf]=x}else kv(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;Gs(x),Y=!1}else Mc!==null&&(R$(Mc),Mc=null),Y=!0;if(!Y)return x.flags&65536?x:null}return x.flags&128?(x.lanes=A,x):(N=N!==null,N!==(y!==null&&y.memoizedState!==null)&&N&&(x.child.flags|=8192,x.mode&1&&(y===null||Ti.current&1?Ro===0&&(Ro=3):O$())),x.updateQueue!==null&&(x.flags|=4),Gs(x),null);case 4:return Pv(),x$(y,x),y===null&&FE(x.stateNode.containerInfo),Gs(x),null;case 10:return YM(x.type._context),Gs(x),null;case 17:return cu(x.type)&&kA(),Gs(x),null;case 19:if(oi(Ti),Y=x.memoizedState,Y===null)return Gs(x),null;if(N=(x.flags&128)!==0,ee=Y.rendering,ee===null)if(N)GE(Y,!1);else{if(Ro!==0||y!==null&&y.flags&128)for(y=x.child;y!==null;){if(ee=jA(y),ee!==null){for(x.flags|=128,GE(Y,!1),N=ee.updateQueue,N!==null&&(x.updateQueue=N,x.flags|=4),x.subtreeFlags=0,N=A,A=x.child;A!==null;)Y=A,y=N,Y.flags&=14680066,ee=Y.alternate,ee===null?(Y.childLanes=0,Y.lanes=y,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=ee.childLanes,Y.lanes=ee.lanes,Y.child=ee.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=ee.memoizedProps,Y.memoizedState=ee.memoizedState,Y.updateQueue=ee.updateQueue,Y.type=ee.type,y=ee.dependencies,Y.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),A=A.sibling;return Qr(Ti,Ti.current&1|2),x.child}y=y.sibling}Y.tail!==null&&Ft()>$v&&(x.flags|=128,N=!0,GE(Y,!1),x.lanes=4194304)}else{if(!N)if(y=jA(ee),y!==null){if(x.flags|=128,N=!0,A=y.updateQueue,A!==null&&(x.updateQueue=A,x.flags|=4),GE(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!ee.alternate&&!hi)return Gs(x),null}else 2*Ft()-Y.renderingStartTime>$v&&A!==1073741824&&(x.flags|=128,N=!0,GE(Y,!1),x.lanes=4194304);Y.isBackwards?(ee.sibling=x.child,x.child=ee):(A=Y.last,A!==null?A.sibling=ee:x.child=ee,Y.last=ee)}return Y.tail!==null?(x=Y.tail,Y.rendering=x,Y.tail=x.sibling,Y.renderingStartTime=Ft(),x.sibling=null,A=Ti.current,Qr(Ti,N?A&1|2:A&1),x):(Gs(x),null);case 22:case 23:return P$(),N=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==N&&(x.flags|=8192),N&&x.mode&1?Zu&1073741824&&(Gs(x),x.subtreeFlags&6&&(x.flags|=8192)):Gs(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function T4e(y,x){switch(UM(x),x.tag){case 1:return cu(x.type)&&kA(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return Pv(),oi(lu),oi(qs),t$(),y=x.flags,y&65536&&!(y&128)?(x.flags=y&-65537|128,x):null;case 5:return ZM(x),null;case 13:if(oi(Ti),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(n(340));kv()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return oi(Ti),null;case 4:return Pv(),null;case 10:return YM(x.type._context),null;case 22:case 23:return P$(),null;case 24:return null;default:return null}}var KA=!1,Ys=!1,C4e=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Fv(y,x){var A=y.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(N){Mi(y,x,N)}else A.current=null}function w$(y,x,A){try{A()}catch(N){Mi(y,x,N)}}var zZ=!1;function S4e(y,x){if(PM=de,y=bJ(),CM(y)){if("selectionStart"in y)var A={start:y.selectionStart,end:y.selectionEnd};else e:{A=(A=y.ownerDocument)&&A.defaultView||window;var N=A.getSelection&&A.getSelection();if(N&&N.rangeCount!==0){A=N.anchorNode;var j=N.anchorOffset,Y=N.focusNode;N=N.focusOffset;try{A.nodeType,Y.nodeType}catch{A=null;break e}var ee=0,he=-1,Te=-1,Be=0,ct=0,mt=y,lt=null;t:for(;;){for(var Rt;mt!==A||j!==0&&mt.nodeType!==3||(he=ee+j),mt!==Y||N!==0&&mt.nodeType!==3||(Te=ee+N),mt.nodeType===3&&(ee+=mt.nodeValue.length),(Rt=mt.firstChild)!==null;)lt=mt,mt=Rt;for(;;){if(mt===y)break t;if(lt===A&&++Be===j&&(he=ee),lt===Y&&++ct===N&&(Te=ee),(Rt=mt.nextSibling)!==null)break;mt=lt,lt=mt.parentNode}mt=Rt}A=he===-1||Te===-1?null:{start:he,end:Te}}else A=null}A=A||{start:0,end:0}}else A=null;for(OM={focusedElem:y,selectionRange:A},de=!1,$t=x;$t!==null;)if(x=$t,y=x.child,(x.subtreeFlags&1028)!==0&&y!==null)y.return=x,$t=y;else for(;$t!==null;){x=$t;try{var Bt=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var Ut=Bt.memoizedProps,Ki=Bt.memoizedState,Oe=x.stateNode,ke=Oe.getSnapshotBeforeUpdate(x.elementType===x.type?Ut:$c(x.type,Ut),Ki);Oe.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Me=x.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(_t){Mi(x,x.return,_t)}if(y=x.sibling,y!==null){y.return=x.return,$t=y;break}$t=x.return}return Bt=zZ,zZ=!1,Bt}function YE(y,x,A){var N=x.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var j=N=N.next;do{if((j.tag&y)===y){var Y=j.destroy;j.destroy=void 0,Y!==void 0&&w$(x,A,Y)}j=j.next}while(j!==N)}}function XA(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var A=x=x.next;do{if((A.tag&y)===y){var N=A.create;A.destroy=N()}A=A.next}while(A!==x)}}function E$(y){var x=y.ref;if(x!==null){var A=y.stateNode;switch(y.tag){case 5:y=A;break;default:y=A}typeof x=="function"?x(y):x.current=y}}function UZ(y){var x=y.alternate;x!==null&&(y.alternate=null,UZ(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&(delete x[Kf],delete x[$E],delete x[LM],delete x[u4e],delete x[l4e])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function VZ(y){return y.tag===5||y.tag===3||y.tag===4}function HZ(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||VZ(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function _$(y,x,A){var N=y.tag;if(N===5||N===6)y=y.stateNode,x?A.nodeType===8?A.parentNode.insertBefore(y,x):A.insertBefore(y,x):(A.nodeType===8?(x=A.parentNode,x.insertBefore(y,A)):(x=A,x.appendChild(y)),A=A._reactRootContainer,A!=null||x.onclick!==null||(x.onclick=AA));else if(N!==4&&(y=y.child,y!==null))for(_$(y,x,A),y=y.sibling;y!==null;)_$(y,x,A),y=y.sibling}function T$(y,x,A){var N=y.tag;if(N===5||N===6)y=y.stateNode,x?A.insertBefore(y,x):A.appendChild(y);else if(N!==4&&(y=y.child,y!==null))for(T$(y,x,A),y=y.sibling;y!==null;)T$(y,x,A),y=y.sibling}var vs=null,Lc=!1;function vm(y,x,A){for(A=A.child;A!==null;)qZ(y,x,A),A=A.sibling}function qZ(y,x,A){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(jl,A)}catch{}switch(A.tag){case 5:Ys||Fv(A,x);case 6:var N=vs,j=Lc;vs=null,vm(y,x,A),vs=N,Lc=j,vs!==null&&(Lc?(y=vs,A=A.stateNode,y.nodeType===8?y.parentNode.removeChild(A):y.removeChild(A)):vs.removeChild(A.stateNode));break;case 18:vs!==null&&(Lc?(y=vs,A=A.stateNode,y.nodeType===8?$M(y.parentNode,A):y.nodeType===1&&$M(y,A),au(y)):$M(vs,A.stateNode));break;case 4:N=vs,j=Lc,vs=A.stateNode.containerInfo,Lc=!0,vm(y,x,A),vs=N,Lc=j;break;case 0:case 11:case 14:case 15:if(!Ys&&(N=A.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){j=N=N.next;do{var Y=j,ee=Y.destroy;Y=Y.tag,ee!==void 0&&(Y&2||Y&4)&&w$(A,x,ee),j=j.next}while(j!==N)}vm(y,x,A);break;case 1:if(!Ys&&(Fv(A,x),N=A.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=A.memoizedProps,N.state=A.memoizedState,N.componentWillUnmount()}catch(he){Mi(A,x,he)}vm(y,x,A);break;case 21:vm(y,x,A);break;case 22:A.mode&1?(Ys=(N=Ys)||A.memoizedState!==null,vm(y,x,A),Ys=N):vm(y,x,A);break;default:vm(y,x,A)}}function WZ(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var A=y.stateNode;A===null&&(A=y.stateNode=new C4e),x.forEach(function(N){var j=F4e.bind(null,y,N);A.has(N)||(A.add(N),N.then(j,j))})}}function Bc(y,x){var A=x.deletions;if(A!==null)for(var N=0;N<A.length;N++){var j=A[N];try{var Y=y,ee=x,he=ee;e:for(;he!==null;){switch(he.tag){case 5:vs=he.stateNode,Lc=!1;break e;case 3:vs=he.stateNode.containerInfo,Lc=!0;break e;case 4:vs=he.stateNode.containerInfo,Lc=!0;break e}he=he.return}if(vs===null)throw Error(n(160));qZ(Y,ee,j),vs=null,Lc=!1;var Te=j.alternate;Te!==null&&(Te.return=null),j.return=null}catch(Be){Mi(j,x,Be)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)GZ(x,y),x=x.sibling}function GZ(y,x){var A=y.alternate,N=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(Bc(x,y),Jf(y),N&4){try{YE(3,y,y.return),XA(3,y)}catch(Ut){Mi(y,y.return,Ut)}try{YE(5,y,y.return)}catch(Ut){Mi(y,y.return,Ut)}}break;case 1:Bc(x,y),Jf(y),N&512&&A!==null&&Fv(A,A.return);break;case 5:if(Bc(x,y),Jf(y),N&512&&A!==null&&Fv(A,A.return),y.flags&32){var j=y.stateNode;try{Ne(j,"")}catch(Ut){Mi(y,y.return,Ut)}}if(N&4&&(j=y.stateNode,j!=null)){var Y=y.memoizedProps,ee=A!==null?A.memoizedProps:Y,he=y.type,Te=y.updateQueue;if(y.updateQueue=null,Te!==null)try{he==="input"&&Y.type==="radio"&&Y.name!=null&&Xe(j,Y),kn(he,ee);var Be=kn(he,Y);for(ee=0;ee<Te.length;ee+=2){var ct=Te[ee],mt=Te[ee+1];ct==="style"?zt(j,mt):ct==="dangerouslySetInnerHTML"?$e(j,mt):ct==="children"?Ne(j,mt):w(j,ct,mt,Be)}switch(he){case"input":Le(j,Y);break;case"textarea":le(j,Y);break;case"select":var lt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!Y.multiple;var Rt=Y.value;Rt!=null?ht(j,!!Y.multiple,Rt,!1):lt!==!!Y.multiple&&(Y.defaultValue!=null?ht(j,!!Y.multiple,Y.defaultValue,!0):ht(j,!!Y.multiple,Y.multiple?[]:"",!1))}j[$E]=Y}catch(Ut){Mi(y,y.return,Ut)}}break;case 6:if(Bc(x,y),Jf(y),N&4){if(y.stateNode===null)throw Error(n(162));j=y.stateNode,Y=y.memoizedProps;try{j.nodeValue=Y}catch(Ut){Mi(y,y.return,Ut)}}break;case 3:if(Bc(x,y),Jf(y),N&4&&A!==null&&A.memoizedState.isDehydrated)try{au(x.containerInfo)}catch(Ut){Mi(y,y.return,Ut)}break;case 4:Bc(x,y),Jf(y);break;case 13:Bc(x,y),Jf(y),j=y.child,j.flags&8192&&(Y=j.memoizedState!==null,j.stateNode.isHidden=Y,!Y||j.alternate!==null&&j.alternate.memoizedState!==null||(A$=Ft())),N&4&&WZ(y);break;case 22:if(ct=A!==null&&A.memoizedState!==null,y.mode&1?(Ys=(Be=Ys)||ct,Bc(x,y),Ys=Be):Bc(x,y),Jf(y),N&8192){if(Be=y.memoizedState!==null,(y.stateNode.isHidden=Be)&&!ct&&y.mode&1)for($t=y,ct=y.child;ct!==null;){for(mt=$t=ct;$t!==null;){switch(lt=$t,Rt=lt.child,lt.tag){case 0:case 11:case 14:case 15:YE(4,lt,lt.return);break;case 1:Fv(lt,lt.return);var Bt=lt.stateNode;if(typeof Bt.componentWillUnmount=="function"){N=lt,A=lt.return;try{x=N,Bt.props=x.memoizedProps,Bt.state=x.memoizedState,Bt.componentWillUnmount()}catch(Ut){Mi(N,A,Ut)}}break;case 5:Fv(lt,lt.return);break;case 22:if(lt.memoizedState!==null){XZ(mt);continue}}Rt!==null?(Rt.return=lt,$t=Rt):XZ(mt)}ct=ct.sibling}e:for(ct=null,mt=y;;){if(mt.tag===5){if(ct===null){ct=mt;try{j=mt.stateNode,Be?(Y=j.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none"):(he=mt.stateNode,Te=mt.memoizedProps.style,ee=Te!=null&&Te.hasOwnProperty("display")?Te.display:null,he.style.display=It("display",ee))}catch(Ut){Mi(y,y.return,Ut)}}}else if(mt.tag===6){if(ct===null)try{mt.stateNode.nodeValue=Be?"":mt.memoizedProps}catch(Ut){Mi(y,y.return,Ut)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===y)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===y)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===y)break e;ct===mt&&(ct=null),mt=mt.return}ct===mt&&(ct=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:Bc(x,y),Jf(y),N&4&&WZ(y);break;case 21:break;default:Bc(x,y),Jf(y)}}function Jf(y){var x=y.flags;if(x&2){try{e:{for(var A=y.return;A!==null;){if(VZ(A)){var N=A;break e}A=A.return}throw Error(n(160))}switch(N.tag){case 5:var j=N.stateNode;N.flags&32&&(Ne(j,""),N.flags&=-33);var Y=HZ(y);T$(y,Y,j);break;case 3:case 4:var ee=N.stateNode.containerInfo,he=HZ(y);_$(y,he,ee);break;default:throw Error(n(161))}}catch(Te){Mi(y,y.return,Te)}y.flags&=-3}x&4096&&(y.flags&=-4097)}function A4e(y,x,A){$t=y,YZ(y)}function YZ(y,x,A){for(var N=(y.mode&1)!==0;$t!==null;){var j=$t,Y=j.child;if(j.tag===22&&N){var ee=j.memoizedState!==null||KA;if(!ee){var he=j.alternate,Te=he!==null&&he.memoizedState!==null||Ys;he=KA;var Be=Ys;if(KA=ee,(Ys=Te)&&!Be)for($t=j;$t!==null;)ee=$t,Te=ee.child,ee.tag===22&&ee.memoizedState!==null?QZ(j):Te!==null?(Te.return=ee,$t=Te):QZ(j);for(;Y!==null;)$t=Y,YZ(Y),Y=Y.sibling;$t=j,KA=he,Ys=Be}KZ(y)}else j.subtreeFlags&8772&&Y!==null?(Y.return=j,$t=Y):KZ(y)}}function KZ(y){for(;$t!==null;){var x=$t;if(x.flags&8772){var A=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:Ys||XA(5,x);break;case 1:var N=x.stateNode;if(x.flags&4&&!Ys)if(A===null)N.componentDidMount();else{var j=x.elementType===x.type?A.memoizedProps:$c(x.type,A.memoizedProps);N.componentDidUpdate(j,A.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var Y=x.updateQueue;Y!==null&&XJ(x,Y,N);break;case 3:var ee=x.updateQueue;if(ee!==null){if(A=null,x.child!==null)switch(x.child.tag){case 5:A=x.child.stateNode;break;case 1:A=x.child.stateNode}XJ(x,ee,A)}break;case 5:var he=x.stateNode;if(A===null&&x.flags&4){A=he;var Te=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":Te.autoFocus&&A.focus();break;case"img":Te.src&&(A.src=Te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Be=x.alternate;if(Be!==null){var ct=Be.memoizedState;if(ct!==null){var mt=ct.dehydrated;mt!==null&&au(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ys||x.flags&512&&E$(x)}catch(lt){Mi(x,x.return,lt)}}if(x===y){$t=null;break}if(A=x.sibling,A!==null){A.return=x.return,$t=A;break}$t=x.return}}function XZ(y){for(;$t!==null;){var x=$t;if(x===y){$t=null;break}var A=x.sibling;if(A!==null){A.return=x.return,$t=A;break}$t=x.return}}function QZ(y){for(;$t!==null;){var x=$t;try{switch(x.tag){case 0:case 11:case 15:var A=x.return;try{XA(4,x)}catch(Te){Mi(x,A,Te)}break;case 1:var N=x.stateNode;if(typeof N.componentDidMount=="function"){var j=x.return;try{N.componentDidMount()}catch(Te){Mi(x,j,Te)}}var Y=x.return;try{E$(x)}catch(Te){Mi(x,Y,Te)}break;case 5:var ee=x.return;try{E$(x)}catch(Te){Mi(x,ee,Te)}}}catch(Te){Mi(x,x.return,Te)}if(x===y){$t=null;break}var he=x.sibling;if(he!==null){he.return=x.return,$t=he;break}$t=x.return}}var D4e=Math.ceil,QA=E.ReactCurrentDispatcher,C$=E.ReactCurrentOwner,Kl=E.ReactCurrentBatchConfig,ar=0,Yo=null,co=null,bs=0,Zu=0,Mv=hm(0),Ro=0,KE=null,Pg=0,JA=0,S$=0,XE=null,du=null,A$=0,$v=1/0,Ah=null,ZA=!1,D$=null,bm=null,eD=!1,xm=null,tD=0,QE=0,k$=null,nD=-1,rD=0;function Da(){return ar&6?Ft():nD!==-1?nD:nD=Ft()}function wm(y){return y.mode&1?ar&2&&bs!==0?bs&-bs:f4e.transition!==null?(rD===0&&(rD=vt()),rD):(y=Yt,y!==0||(y=window.event,y=y===void 0?16:Sr(y.type)),y):1}function jc(y,x,A,N){if(50<QE)throw QE=0,k$=null,Error(n(185));dn(y,A,N),(!(ar&2)||y!==Yo)&&(y===Yo&&(!(ar&2)&&(JA|=A),Ro===4&&Em(y,bs)),hu(y,N),A===1&&ar===0&&!(x.mode&1)&&($v=Ft()+500,RA&&mm()))}function hu(y,x){var A=y.callbackNode;ut(y,x);var N=Qe(y,y===Yo?bs:0);if(N===0)A!==null&&Gu(A),y.callbackNode=null,y.callbackPriority=0;else if(x=N&-N,y.callbackPriority!==x){if(A!=null&&Gu(A),x===1)y.tag===0?c4e(ZZ.bind(null,y)):LJ(ZZ.bind(null,y)),s4e(function(){!(ar&6)&&mm()}),A=null;else{switch(dr(N)){case 1:A=Yi;break;case 4:A=Ho;break;case 16:A=ri;break;case 536870912:A=sm;break;default:A=ri}A=aee(A,JZ.bind(null,y))}y.callbackPriority=x,y.callbackNode=A}}function JZ(y,x){if(nD=-1,rD=0,ar&6)throw Error(n(327));var A=y.callbackNode;if(Lv()&&y.callbackNode!==A)return null;var N=Qe(y,y===Yo?bs:0);if(N===0)return null;if(N&30||N&y.expiredLanes||x)x=iD(y,N);else{x=N;var j=ar;ar|=2;var Y=tee();(Yo!==y||bs!==x)&&(Ah=null,$v=Ft()+500,Fg(y,x));do try{R4e();break}catch(he){eee(y,he)}while(!0);GM(),QA.current=Y,ar=j,co!==null?x=0:(Yo=null,bs=0,x=Ro)}if(x!==0){if(x===2&&(j=at(y),j!==0&&(N=j,x=I$(y,j))),x===1)throw A=KE,Fg(y,0),Em(y,N),hu(y,Ft()),A;if(x===6)Em(y,N);else{if(j=y.current.alternate,!(N&30)&&!k4e(j)&&(x=iD(y,N),x===2&&(Y=at(y),Y!==0&&(N=Y,x=I$(y,Y))),x===1))throw A=KE,Fg(y,0),Em(y,N),hu(y,Ft()),A;switch(y.finishedWork=j,y.finishedLanes=N,x){case 0:case 1:throw Error(n(345));case 2:Mg(y,du,Ah);break;case 3:if(Em(y,N),(N&130023424)===N&&(x=A$+500-Ft(),10<x)){if(Qe(y,0)!==0)break;if(j=y.suspendedLanes,(j&N)!==N){Da(),y.pingedLanes|=y.suspendedLanes&j;break}y.timeoutHandle=MM(Mg.bind(null,y,du,Ah),x);break}Mg(y,du,Ah);break;case 4:if(Em(y,N),(N&4194240)===N)break;for(x=y.eventTimes,j=-1;0<N;){var ee=31-So(N);Y=1<<ee,ee=x[ee],ee>j&&(j=ee),N&=~Y}if(N=j,N=Ft()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*D4e(N/1960))-N,10<N){y.timeoutHandle=MM(Mg.bind(null,y,du,Ah),N);break}Mg(y,du,Ah);break;case 5:Mg(y,du,Ah);break;default:throw Error(n(329))}}}return hu(y,Ft()),y.callbackNode===A?JZ.bind(null,y):null}function I$(y,x){var A=XE;return y.current.memoizedState.isDehydrated&&(Fg(y,x).flags|=256),y=iD(y,x),y!==2&&(x=du,du=A,x!==null&&R$(x)),y}function R$(y){du===null?du=y:du.push.apply(du,y)}function k4e(y){for(var x=y;;){if(x.flags&16384){var A=x.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var N=0;N<A.length;N++){var j=A[N],Y=j.getSnapshot;j=j.value;try{if(!Fc(Y(),j))return!1}catch{return!1}}}if(A=x.child,x.subtreeFlags&16384&&A!==null)A.return=x,x=A;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Em(y,x){for(x&=~S$,x&=~JA,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var A=31-So(x),N=1<<A;y[A]=-1,x&=~N}}function ZZ(y){if(ar&6)throw Error(n(327));Lv();var x=Qe(y,0);if(!(x&1))return hu(y,Ft()),null;var A=iD(y,x);if(y.tag!==0&&A===2){var N=at(y);N!==0&&(x=N,A=I$(y,N))}if(A===1)throw A=KE,Fg(y,0),Em(y,x),hu(y,Ft()),A;if(A===6)throw Error(n(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,Mg(y,du,Ah),hu(y,Ft()),null}function N$(y,x){var A=ar;ar|=1;try{return y(x)}finally{ar=A,ar===0&&($v=Ft()+500,RA&&mm())}}function Og(y){xm!==null&&xm.tag===0&&!(ar&6)&&Lv();var x=ar;ar|=1;var A=Kl.transition,N=Yt;try{if(Kl.transition=null,Yt=1,y)return y()}finally{Yt=N,Kl.transition=A,ar=x,!(ar&6)&&mm()}}function P$(){Zu=Mv.current,oi(Mv)}function Fg(y,x){y.finishedWork=null,y.finishedLanes=0;var A=y.timeoutHandle;if(A!==-1&&(y.timeoutHandle=-1,o4e(A)),co!==null)for(A=co.return;A!==null;){var N=A;switch(UM(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&kA();break;case 3:Pv(),oi(lu),oi(qs),t$();break;case 5:ZM(N);break;case 4:Pv();break;case 13:oi(Ti);break;case 19:oi(Ti);break;case 10:YM(N.type._context);break;case 22:case 23:P$()}A=A.return}if(Yo=y,co=y=_m(y.current,null),bs=Zu=x,Ro=0,KE=null,S$=JA=Pg=0,du=XE=null,Ig!==null){for(x=0;x<Ig.length;x++)if(A=Ig[x],N=A.interleaved,N!==null){A.interleaved=null;var j=N.next,Y=A.pending;if(Y!==null){var ee=Y.next;Y.next=j,N.next=ee}A.pending=N}Ig=null}return y}function eee(y,x){do{var A=co;try{if(GM(),zA.current=qA,UA){for(var N=Ci.memoizedState;N!==null;){var j=N.queue;j!==null&&(j.pending=null),N=N.next}UA=!1}if(Ng=0,Go=Io=Ci=null,VE=!1,HE=0,C$.current=null,A===null||A.return===null){Ro=1,KE=x,co=null;break}e:{var Y=y,ee=A.return,he=A,Te=x;if(x=bs,he.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Be=Te,ct=he,mt=ct.tag;if(!(ct.mode&1)&&(mt===0||mt===11||mt===15)){var lt=ct.alternate;lt?(ct.updateQueue=lt.updateQueue,ct.memoizedState=lt.memoizedState,ct.lanes=lt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var Rt=CZ(ee);if(Rt!==null){Rt.flags&=-257,SZ(Rt,ee,he,Y,x),Rt.mode&1&&TZ(Y,Be,x),x=Rt,Te=Be;var Bt=x.updateQueue;if(Bt===null){var Ut=new Set;Ut.add(Te),x.updateQueue=Ut}else Bt.add(Te);break e}else{if(!(x&1)){TZ(Y,Be,x),O$();break e}Te=Error(n(426))}}else if(hi&&he.mode&1){var Ki=CZ(ee);if(Ki!==null){!(Ki.flags&65536)&&(Ki.flags|=256),SZ(Ki,ee,he,Y,x),qM(Ov(Te,he));break e}}Y=Te=Ov(Te,he),Ro!==4&&(Ro=2),XE===null?XE=[Y]:XE.push(Y),Y=ee;do{switch(Y.tag){case 3:Y.flags|=65536,x&=-x,Y.lanes|=x;var Oe=EZ(Y,Te,x);KJ(Y,Oe);break e;case 1:he=Te;var ke=Y.type,Me=Y.stateNode;if(!(Y.flags&128)&&(typeof ke.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(bm===null||!bm.has(Me)))){Y.flags|=65536,x&=-x,Y.lanes|=x;var _t=_Z(Y,he,x);KJ(Y,_t);break e}}Y=Y.return}while(Y!==null)}ree(A)}catch(Gt){x=Gt,co===A&&A!==null&&(co=A=A.return);continue}break}while(!0)}function tee(){var y=QA.current;return QA.current=qA,y===null?qA:y}function O$(){(Ro===0||Ro===3||Ro===2)&&(Ro=4),Yo===null||!(Pg&268435455)&&!(JA&268435455)||Em(Yo,bs)}function iD(y,x){var A=ar;ar|=2;var N=tee();(Yo!==y||bs!==x)&&(Ah=null,Fg(y,x));do try{I4e();break}catch(j){eee(y,j)}while(!0);if(GM(),ar=A,QA.current=N,co!==null)throw Error(n(261));return Yo=null,bs=0,Ro}function I4e(){for(;co!==null;)nee(co)}function R4e(){for(;co!==null&&!Vf();)nee(co)}function nee(y){var x=see(y.alternate,y,Zu);y.memoizedProps=y.pendingProps,x===null?ree(y):co=x,C$.current=null}function ree(y){var x=y;do{var A=x.alternate;if(y=x.return,x.flags&32768){if(A=T4e(A,x),A!==null){A.flags&=32767,co=A;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{Ro=6,co=null;return}}else if(A=_4e(A,x,Zu),A!==null){co=A;return}if(x=x.sibling,x!==null){co=x;return}co=x=y}while(x!==null);Ro===0&&(Ro=5)}function Mg(y,x,A){var N=Yt,j=Kl.transition;try{Kl.transition=null,Yt=1,N4e(y,x,A,N)}finally{Kl.transition=j,Yt=N}return null}function N4e(y,x,A,N){do Lv();while(xm!==null);if(ar&6)throw Error(n(327));A=y.finishedWork;var j=y.finishedLanes;if(A===null)return null;if(y.finishedWork=null,y.finishedLanes=0,A===y.current)throw Error(n(177));y.callbackNode=null,y.callbackPriority=0;var Y=A.lanes|A.childLanes;if(Wt(y,Y),y===Yo&&(co=Yo=null,bs=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||eD||(eD=!0,aee(ri,function(){return Lv(),null})),Y=(A.flags&15990)!==0,A.subtreeFlags&15990||Y){Y=Kl.transition,Kl.transition=null;var ee=Yt;Yt=1;var he=ar;ar|=4,C$.current=null,S4e(y,A),GZ(A,y),JPe(OM),de=!!PM,OM=PM=null,y.current=A,A4e(A),gs(),ar=he,Yt=ee,Kl.transition=Y}else y.current=A;if(eD&&(eD=!1,xm=y,tD=j),Y=y.pendingLanes,Y===0&&(bm=null),am(A.stateNode),hu(y,Ft()),x!==null)for(N=y.onRecoverableError,A=0;A<x.length;A++)j=x[A],N(j.value,{componentStack:j.stack,digest:j.digest});if(ZA)throw ZA=!1,y=D$,D$=null,y;return tD&1&&y.tag!==0&&Lv(),Y=y.pendingLanes,Y&1?y===k$?QE++:(QE=0,k$=y):QE=0,mm(),null}function Lv(){if(xm!==null){var y=dr(tD),x=Kl.transition,A=Yt;try{if(Kl.transition=null,Yt=16>y?16:y,xm===null)var N=!1;else{if(y=xm,xm=null,tD=0,ar&6)throw Error(n(331));var j=ar;for(ar|=4,$t=y.current;$t!==null;){var Y=$t,ee=Y.child;if($t.flags&16){var he=Y.deletions;if(he!==null){for(var Te=0;Te<he.length;Te++){var Be=he[Te];for($t=Be;$t!==null;){var ct=$t;switch(ct.tag){case 0:case 11:case 15:YE(8,ct,Y)}var mt=ct.child;if(mt!==null)mt.return=ct,$t=mt;else for(;$t!==null;){ct=$t;var lt=ct.sibling,Rt=ct.return;if(UZ(ct),ct===Be){$t=null;break}if(lt!==null){lt.return=Rt,$t=lt;break}$t=Rt}}}var Bt=Y.alternate;if(Bt!==null){var Ut=Bt.child;if(Ut!==null){Bt.child=null;do{var Ki=Ut.sibling;Ut.sibling=null,Ut=Ki}while(Ut!==null)}}$t=Y}}if(Y.subtreeFlags&2064&&ee!==null)ee.return=Y,$t=ee;else e:for(;$t!==null;){if(Y=$t,Y.flags&2048)switch(Y.tag){case 0:case 11:case 15:YE(9,Y,Y.return)}var Oe=Y.sibling;if(Oe!==null){Oe.return=Y.return,$t=Oe;break e}$t=Y.return}}var ke=y.current;for($t=ke;$t!==null;){ee=$t;var Me=ee.child;if(ee.subtreeFlags&2064&&Me!==null)Me.return=ee,$t=Me;else e:for(ee=ke;$t!==null;){if(he=$t,he.flags&2048)try{switch(he.tag){case 0:case 11:case 15:XA(9,he)}}catch(Gt){Mi(he,he.return,Gt)}if(he===ee){$t=null;break e}var _t=he.sibling;if(_t!==null){_t.return=he.return,$t=_t;break e}$t=he.return}}if(ar=j,mm(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(jl,y)}catch{}N=!0}return N}finally{Yt=A,Kl.transition=x}}return!1}function iee(y,x,A){x=Ov(A,x),x=EZ(y,x,1),y=ym(y,x,1),x=Da(),y!==null&&(dn(y,1,x),hu(y,x))}function Mi(y,x,A){if(y.tag===3)iee(y,y,A);else for(;x!==null;){if(x.tag===3){iee(x,y,A);break}else if(x.tag===1){var N=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(bm===null||!bm.has(N))){y=Ov(A,y),y=_Z(x,y,1),x=ym(x,y,1),y=Da(),x!==null&&(dn(x,1,y),hu(x,y));break}}x=x.return}}function P4e(y,x,A){var N=y.pingCache;N!==null&&N.delete(x),x=Da(),y.pingedLanes|=y.suspendedLanes&A,Yo===y&&(bs&A)===A&&(Ro===4||Ro===3&&(bs&130023424)===bs&&500>Ft()-A$?Fg(y,0):S$|=A),hu(y,x)}function oee(y,x){x===0&&(y.mode&1?(x=Ie,Ie<<=1,!(Ie&130023424)&&(Ie=4194304)):x=1);var A=Da();y=Th(y,x),y!==null&&(dn(y,x,A),hu(y,A))}function O4e(y){var x=y.memoizedState,A=0;x!==null&&(A=x.retryLane),oee(y,A)}function F4e(y,x){var A=0;switch(y.tag){case 13:var N=y.stateNode,j=y.memoizedState;j!==null&&(A=j.retryLane);break;case 19:N=y.stateNode;break;default:throw Error(n(314))}N!==null&&N.delete(x),oee(y,A)}var see;see=function(y,x,A){if(y!==null)if(y.memoizedProps!==x.pendingProps||lu.current)fu=!0;else{if(!(y.lanes&A)&&!(x.flags&128))return fu=!1,E4e(y,x,A);fu=!!(y.flags&131072)}else fu=!1,hi&&x.flags&1048576&&BJ(x,PA,x.index);switch(x.lanes=0,x.tag){case 2:var N=x.type;YA(y,x),y=x.pendingProps;var j=Sv(x,qs.current);Nv(x,A),j=i$(null,x,N,y,j,A);var Y=o$();return x.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,cu(N)?(Y=!0,IA(x)):Y=!1,x.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,QM(x),j.updater=WA,x.stateNode=j,j._reactInternals=x,f$(x,N,y,A),x=m$(null,x,N,!0,Y,A)):(x.tag=0,hi&&Y&&zM(x),Aa(null,x,j,A),x=x.child),x;case 16:N=x.elementType;e:{switch(YA(y,x),y=x.pendingProps,j=N._init,N=j(N._payload),x.type=N,j=x.tag=$4e(N),y=$c(N,y),j){case 0:x=p$(null,x,N,y,A);break e;case 1:x=NZ(null,x,N,y,A);break e;case 11:x=AZ(null,x,N,y,A);break e;case 14:x=DZ(null,x,N,$c(N.type,y),A);break e}throw Error(n(306,N,""))}return x;case 0:return N=x.type,j=x.pendingProps,j=x.elementType===N?j:$c(N,j),p$(y,x,N,j,A);case 1:return N=x.type,j=x.pendingProps,j=x.elementType===N?j:$c(N,j),NZ(y,x,N,j,A);case 3:e:{if(PZ(x),y===null)throw Error(n(387));N=x.pendingProps,Y=x.memoizedState,j=Y.element,YJ(y,x),BA(x,N,null,A);var ee=x.memoizedState;if(N=ee.element,Y.isDehydrated)if(Y={element:N,isDehydrated:!1,cache:ee.cache,pendingSuspenseBoundaries:ee.pendingSuspenseBoundaries,transitions:ee.transitions},x.updateQueue.baseState=Y,x.memoizedState=Y,x.flags&256){j=Ov(Error(n(423)),x),x=OZ(y,x,N,A,j);break e}else if(N!==j){j=Ov(Error(n(424)),x),x=OZ(y,x,N,A,j);break e}else for(Ju=dm(x.stateNode.containerInfo.firstChild),Qu=x,hi=!0,Mc=null,A=WJ(x,null,N,A),x.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(kv(),N===j){x=Sh(y,x,A);break e}Aa(y,x,N,A)}x=x.child}return x;case 5:return QJ(x),y===null&&HM(x),N=x.type,j=x.pendingProps,Y=y!==null?y.memoizedProps:null,ee=j.children,FM(N,j)?ee=null:Y!==null&&FM(N,Y)&&(x.flags|=32),RZ(y,x),Aa(y,x,ee,A),x.child;case 6:return y===null&&HM(x),null;case 13:return FZ(y,x,A);case 4:return JM(x,x.stateNode.containerInfo),N=x.pendingProps,y===null?x.child=Iv(x,null,N,A):Aa(y,x,N,A),x.child;case 11:return N=x.type,j=x.pendingProps,j=x.elementType===N?j:$c(N,j),AZ(y,x,N,j,A);case 7:return Aa(y,x,x.pendingProps,A),x.child;case 8:return Aa(y,x,x.pendingProps.children,A),x.child;case 12:return Aa(y,x,x.pendingProps.children,A),x.child;case 10:e:{if(N=x.type._context,j=x.pendingProps,Y=x.memoizedProps,ee=j.value,Qr(MA,N._currentValue),N._currentValue=ee,Y!==null)if(Fc(Y.value,ee)){if(Y.children===j.children&&!lu.current){x=Sh(y,x,A);break e}}else for(Y=x.child,Y!==null&&(Y.return=x);Y!==null;){var he=Y.dependencies;if(he!==null){ee=Y.child;for(var Te=he.firstContext;Te!==null;){if(Te.context===N){if(Y.tag===1){Te=Ch(-1,A&-A),Te.tag=2;var Be=Y.updateQueue;if(Be!==null){Be=Be.shared;var ct=Be.pending;ct===null?Te.next=Te:(Te.next=ct.next,ct.next=Te),Be.pending=Te}}Y.lanes|=A,Te=Y.alternate,Te!==null&&(Te.lanes|=A),KM(Y.return,A,x),he.lanes|=A;break}Te=Te.next}}else if(Y.tag===10)ee=Y.type===x.type?null:Y.child;else if(Y.tag===18){if(ee=Y.return,ee===null)throw Error(n(341));ee.lanes|=A,he=ee.alternate,he!==null&&(he.lanes|=A),KM(ee,A,x),ee=Y.sibling}else ee=Y.child;if(ee!==null)ee.return=Y;else for(ee=Y;ee!==null;){if(ee===x){ee=null;break}if(Y=ee.sibling,Y!==null){Y.return=ee.return,ee=Y;break}ee=ee.return}Y=ee}Aa(y,x,j.children,A),x=x.child}return x;case 9:return j=x.type,N=x.pendingProps.children,Nv(x,A),j=Gl(j),N=N(j),x.flags|=1,Aa(y,x,N,A),x.child;case 14:return N=x.type,j=$c(N,x.pendingProps),j=$c(N.type,j),DZ(y,x,N,j,A);case 15:return kZ(y,x,x.type,x.pendingProps,A);case 17:return N=x.type,j=x.pendingProps,j=x.elementType===N?j:$c(N,j),YA(y,x),x.tag=1,cu(N)?(y=!0,IA(x)):y=!1,Nv(x,A),xZ(x,N,j),f$(x,N,j,A),m$(null,x,N,!0,y,A);case 19:return $Z(y,x,A);case 22:return IZ(y,x,A)}throw Error(n(156,x.tag))};function aee(y,x){return Bl(y,x)}function M4e(y,x,A,N){this.tag=y,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xl(y,x,A,N){return new M4e(y,x,A,N)}function F$(y){return y=y.prototype,!(!y||!y.isReactComponent)}function $4e(y){if(typeof y=="function")return F$(y)?1:0;if(y!=null){if(y=y.$$typeof,y===M)return 11;if(y===H)return 14}return 2}function _m(y,x){var A=y.alternate;return A===null?(A=Xl(y.tag,x,y.key,y.mode),A.elementType=y.elementType,A.type=y.type,A.stateNode=y.stateNode,A.alternate=y,y.alternate=A):(A.pendingProps=x,A.type=y.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=y.flags&14680064,A.childLanes=y.childLanes,A.lanes=y.lanes,A.child=y.child,A.memoizedProps=y.memoizedProps,A.memoizedState=y.memoizedState,A.updateQueue=y.updateQueue,x=y.dependencies,A.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},A.sibling=y.sibling,A.index=y.index,A.ref=y.ref,A}function oD(y,x,A,N,j,Y){var ee=2;if(N=y,typeof y=="function")F$(y)&&(ee=1);else if(typeof y=="string")ee=5;else e:switch(y){case S:return $g(A.children,j,Y,x);case D:ee=8,j|=8;break;case k:return y=Xl(12,A,x,j|2),y.elementType=k,y.lanes=Y,y;case F:return y=Xl(13,A,x,j),y.elementType=F,y.lanes=Y,y;case L:return y=Xl(19,A,x,j),y.elementType=L,y.lanes=Y,y;case Q:return sD(A,j,Y,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case R:ee=10;break e;case O:ee=9;break e;case M:ee=11;break e;case H:ee=14;break e;case V:ee=16,N=null;break e}throw Error(n(130,y==null?y:typeof y,""))}return x=Xl(ee,A,x,j),x.elementType=y,x.type=N,x.lanes=Y,x}function $g(y,x,A,N){return y=Xl(7,y,N,x),y.lanes=A,y}function sD(y,x,A,N){return y=Xl(22,y,N,x),y.elementType=Q,y.lanes=A,y.stateNode={isHidden:!1},y}function M$(y,x,A){return y=Xl(6,y,null,x),y.lanes=A,y}function $$(y,x,A){return x=Xl(4,y.children!==null?y.children:[],y.key,x),x.lanes=A,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function L4e(y,x,A,N,j){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dt(0),this.expirationTimes=Dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.identifierPrefix=N,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function L$(y,x,A,N,j,Y,ee,he,Te){return y=new L4e(y,x,A,he,Te),x===1?(x=1,Y===!0&&(x|=8)):x=0,Y=Xl(3,null,null,x),y.current=Y,Y.stateNode=y,Y.memoizedState={element:N,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},QM(Y),y}function B4e(y,x,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:N==null?null:""+N,children:y,containerInfo:x,implementation:A}}function uee(y){if(!y)return pm;y=y._reactInternals;e:{if(bn(y)!==y||y.tag!==1)throw Error(n(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(cu(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(y.tag===1){var A=y.type;if(cu(A))return MJ(y,A,x)}return x}function lee(y,x,A,N,j,Y,ee,he,Te){return y=L$(A,N,!0,y,j,Y,ee,he,Te),y.context=uee(null),A=y.current,N=Da(),j=wm(A),Y=Ch(N,j),Y.callback=x??null,ym(A,Y,j),y.current.lanes=j,dn(y,j,N),hu(y,N),y}function aD(y,x,A,N){var j=x.current,Y=Da(),ee=wm(j);return A=uee(A),x.context===null?x.context=A:x.pendingContext=A,x=Ch(Y,ee),x.payload={element:y},N=N===void 0?null:N,N!==null&&(x.callback=N),y=ym(j,x,ee),y!==null&&(jc(y,j,ee,Y),LA(y,j,ee)),ee}function uD(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function cee(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var A=y.retryLane;y.retryLane=A!==0&&A<x?A:x}}function B$(y,x){cee(y,x),(y=y.alternate)&&cee(y,x)}function j4e(){return null}var fee=typeof reportError=="function"?reportError:function(y){console.error(y)};function j$(y){this._internalRoot=y}lD.prototype.render=j$.prototype.render=function(y){var x=this._internalRoot;if(x===null)throw Error(n(409));aD(y,x,null,null)},lD.prototype.unmount=j$.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var x=y.containerInfo;Og(function(){aD(null,y,null,null)}),x[xh]=null}};function lD(y){this._internalRoot=y}lD.prototype.unstable_scheduleHydration=function(y){if(y){var x=um();y={blockedOn:null,target:y,priority:x};for(var A=0;A<su.length&&x!==0&&x<su[A].priority;A++);su.splice(A,0,y),A===0&&_g(y)}};function z$(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function cD(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function dee(){}function z4e(y,x,A,N,j){if(j){if(typeof N=="function"){var Y=N;N=function(){var Be=uD(ee);Y.call(Be)}}var ee=lee(x,N,y,0,null,!1,!1,"",dee);return y._reactRootContainer=ee,y[xh]=ee.current,FE(y.nodeType===8?y.parentNode:y),Og(),ee}for(;j=y.lastChild;)y.removeChild(j);if(typeof N=="function"){var he=N;N=function(){var Be=uD(Te);he.call(Be)}}var Te=L$(y,0,!1,null,null,!1,!1,"",dee);return y._reactRootContainer=Te,y[xh]=Te.current,FE(y.nodeType===8?y.parentNode:y),Og(function(){aD(x,Te,A,N)}),Te}function fD(y,x,A,N,j){var Y=A._reactRootContainer;if(Y){var ee=Y;if(typeof j=="function"){var he=j;j=function(){var Te=uD(ee);he.call(Te)}}aD(x,ee,y,j)}else ee=z4e(A,x,y,j,N);return uD(ee)}Ao=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var A=Se(x.pendingLanes);A!==0&&(Pn(x,A|1),hu(x,Ft()),!(ar&6)&&($v=Ft()+500,mm()))}break;case 13:Og(function(){var N=Th(y,1);if(N!==null){var j=Da();jc(N,y,1,j)}}),B$(y,1)}},ou=function(y){if(y.tag===13){var x=Th(y,134217728);if(x!==null){var A=Da();jc(x,y,134217728,A)}B$(y,134217728)}},zl=function(y){if(y.tag===13){var x=wm(y),A=Th(y,x);if(A!==null){var N=Da();jc(A,y,x,N)}B$(y,x)}},um=function(){return Yt},Hf=function(y,x){var A=Yt;try{return Yt=y,x()}finally{Yt=A}},br=function(y,x,A){switch(x){case"input":if(Le(y,A),x=A.name,A.type==="radio"&&x!=null){for(A=y;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<A.length;x++){var N=A[x];if(N!==y&&N.form===y.form){var j=DA(N);if(!j)throw Error(n(90));se(N),Le(N,j)}}}break;case"textarea":le(y,A);break;case"select":x=A.value,x!=null&&ht(y,!!A.multiple,x,!1)}},ps=N$,_a=Og;var U4e={usingClientEntryPoint:!1,Events:[LE,Tv,DA,wr,Ea,N$]},JE={findFiberByHostInstance:Sg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V4e={bundleType:JE.bundleType,version:JE.version,rendererPackageName:JE.rendererPackageName,rendererConfig:JE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=Wu(y),y===null?null:y.stateNode},findFiberByHostInstance:JE.findFiberByHostInstance||j4e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dD=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dD.isDisabled&&dD.supportsFiber)try{jl=dD.inject(V4e),Co=dD}catch{}}return pu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U4e,pu.createPortal=function(y,x){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z$(x))throw Error(n(200));return B4e(y,x,null,A)},pu.createRoot=function(y,x){if(!z$(y))throw Error(n(299));var A=!1,N="",j=fee;return x!=null&&(x.unstable_strictMode===!0&&(A=!0),x.identifierPrefix!==void 0&&(N=x.identifierPrefix),x.onRecoverableError!==void 0&&(j=x.onRecoverableError)),x=L$(y,1,!1,null,null,A,!1,N,j),y[xh]=x.current,FE(y.nodeType===8?y.parentNode:y),new j$(x)},pu.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(n(188)):(y=Object.keys(y).join(","),Error(n(268,y)));return y=Wu(x),y=y===null?null:y.stateNode,y},pu.flushSync=function(y){return Og(y)},pu.hydrate=function(y,x,A){if(!cD(x))throw Error(n(200));return fD(null,y,x,!0,A)},pu.hydrateRoot=function(y,x,A){if(!z$(y))throw Error(n(405));var N=A!=null&&A.hydratedSources||null,j=!1,Y="",ee=fee;if(A!=null&&(A.unstable_strictMode===!0&&(j=!0),A.identifierPrefix!==void 0&&(Y=A.identifierPrefix),A.onRecoverableError!==void 0&&(ee=A.onRecoverableError)),x=lee(x,null,y,1,A??null,j,!1,Y,ee),y[xh]=x.current,FE(y),N)for(y=0;y<N.length;y++)A=N[y],j=A._getVersion,j=j(A._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[A,j]:x.mutableSourceEagerHydrationData.push(A,j);return new lD(x)},pu.render=function(y,x,A){if(!cD(x))throw Error(n(200));return fD(null,y,x,!1,A)},pu.unmountComponentAtNode=function(y){if(!cD(y))throw Error(n(40));return y._reactRootContainer?(Og(function(){fD(null,null,y,!1,function(){y._reactRootContainer=null,y[xh]=null})}),!0):!1},pu.unstable_batchedUpdates=N$,pu.unstable_renderSubtreeIntoContainer=function(y,x,A,N){if(!cD(A))throw Error(n(200));if(y==null||y._reactInternals===void 0)throw Error(n(38));return fD(y,x,A,!1,N)},pu.version="18.3.1-next-f1338f8080-20240426",pu}var xee;function Bpe(){if(xee)return H$.exports;xee=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),H$.exports=tOe(),H$.exports}var wee;function nOe(){if(wee)return hD;wee=1;var e=Bpe();return hD.createRoot=e.createRoot,hD.hydrateRoot=e.hydrateRoot,hD}var rOe=nOe();const iOe=Fl(rOe);var cd=function(){return cd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},cd.apply(this,arguments)};function NC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function oOe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var II="right-scroll-bar-position",RI="width-before-scroll-bar",sOe="with-scroll-bars-hidden",aOe="--removed-body-scroll-bar-size";function G$(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function uOe(e,t){var n=P.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var lOe=typeof window<"u"?P.useLayoutEffect:P.useEffect,Eee=new WeakMap;function cOe(e,t){var n=uOe(null,function(r){return e.forEach(function(i){return G$(i,r)})});return lOe(function(){var r=Eee.get(n);if(r){var i=new Set(r),o=new Set(e),s=n.current;i.forEach(function(a){o.has(a)||G$(a,null)}),o.forEach(function(a){i.has(a)||G$(a,s)})}Eee.set(n,e)},[e]),n}function fOe(e){return e}function dOe(e,t){t===void 0&&(t=fOe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var s=t(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var u=function(){var c=s;s=[],c.forEach(o)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){s.push(c),l()},filter:function(c){return s=s.filter(c),n}}}};return i}function hOe(e){e===void 0&&(e={});var t=dOe(null);return t.options=cd({async:!0,ssr:!1},e),t}var jpe=function(e){var t=e.sideCar,n=NC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,cd({},n))};jpe.isSideCarExport=!0;function pOe(e,t){return e.useMedium(t),jpe}var zpe=hOe(),Y$=function(){},m4=P.forwardRef(function(e,t){var n=P.useRef(null),r=P.useState({onScrollCapture:Y$,onWheelCapture:Y$,onTouchMoveCapture:Y$}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,g=e.as,v=g===void 0?"div":g,b=e.gapMode,w=NC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,_=cOe([n,t]),T=cd(cd({},w),i);return P.createElement(P.Fragment,null,c&&P.createElement(E,{sideCar:zpe,removeScrollBar:l,shards:f,noIsolation:h,inert:m,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:b}),s?P.cloneElement(P.Children.only(a),cd(cd({},T),{ref:_})):P.createElement(v,cd({},T,{className:u,ref:_}),a))});m4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m4.classNames={fullWidth:RI,zeroRight:II};var mOe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gOe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mOe();return t&&e.setAttribute("nonce",t),e}function yOe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function vOe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bOe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=gOe())&&(yOe(t,n),vOe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xOe=function(){var e=bOe();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Upe=function(){var e=xOe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},wOe={left:0,top:0,right:0,gap:0},K$=function(e){return parseInt(e||"",10)||0},EOe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[K$(n),K$(r),K$(i)]},_Oe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return wOe;var t=EOe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},TOe=Upe(),Vb="data-scroll-locked",COe=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(sOe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Vb,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(II,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(RI,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(II," .").concat(II,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(RI," .").concat(RI,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Vb,`] {
    `).concat(aOe,": ").concat(a,`px;
  }
`)},_ee=function(){var e=parseInt(document.body.getAttribute(Vb)||"0",10);return isFinite(e)?e:0},SOe=function(){P.useEffect(function(){return document.body.setAttribute(Vb,(_ee()+1).toString()),function(){var e=_ee()-1;e<=0?document.body.removeAttribute(Vb):document.body.setAttribute(Vb,e.toString())}},[])},AOe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;SOe();var o=P.useMemo(function(){return _Oe(i)},[i]);return P.createElement(TOe,{styles:COe(o,!t,i,n?"":"!important")})},$9=!1;if(typeof window<"u")try{var pD=Object.defineProperty({},"passive",{get:function(){return $9=!0,!0}});window.addEventListener("test",pD,pD),window.removeEventListener("test",pD,pD)}catch{$9=!1}var Bv=$9?{passive:!1}:!1,DOe=function(e){return e.tagName==="TEXTAREA"},Vpe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!DOe(e)&&n[t]==="visible")},kOe=function(e){return Vpe(e,"overflowY")},IOe=function(e){return Vpe(e,"overflowX")},Tee=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Hpe(e,r);if(i){var o=qpe(e,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ROe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},NOe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Hpe=function(e,t){return e==="v"?kOe(t):IOe(t)},qpe=function(e,t){return e==="v"?ROe(t):NOe(t)},POe=function(e,t){return e==="h"&&t==="rtl"?-1:1},OOe=function(e,t,n,r,i){var o=POe(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,u=t.contains(a),l=!1,c=s>0,f=0,d=0;do{var h=qpe(e,a),m=h[0],p=h[1],g=h[2],v=p-g-o*m;(m||v)&&Hpe(e,a)&&(f+=v,d+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},mD=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Cee=function(e){return[e.deltaX,e.deltaY]},See=function(e){return e&&"current"in e?e.current:e},FOe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},MOe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},$Oe=0,jv=[];function LOe(e){var t=P.useRef([]),n=P.useRef([0,0]),r=P.useRef(),i=P.useState($Oe++)[0],o=P.useState(Upe)[0],s=P.useRef(e);P.useEffect(function(){s.current=e},[e]),P.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=oOe([e.lockRef.current],(e.shards||[]).map(See),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=P.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var v=mD(p),b=n.current,w="deltaX"in p?p.deltaX:b[0]-v[0],E="deltaY"in p?p.deltaY:b[1]-v[1],_,T=p.target,S=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in p&&S==="h"&&T.type==="range")return!1;var D=Tee(S,T);if(!D)return!0;if(D?_=S:(_=S==="v"?"h":"v",D=Tee(S,T)),!D)return!1;if(!r.current&&"changedTouches"in p&&(w||E)&&(r.current=_),!_)return!0;var k=r.current||_;return OOe(k,g,p,k==="h"?w:E)},[]),u=P.useCallback(function(p){var g=p;if(!(!jv.length||jv[jv.length-1]!==o)){var v="deltaY"in g?Cee(g):mD(g),b=t.current.filter(function(_){return _.name===g.type&&(_.target===g.target||g.target===_.shadowParent)&&FOe(_.delta,v)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(s.current.shards||[]).map(See).filter(Boolean).filter(function(_){return _.contains(g.target)}),E=w.length>0?a(g,w[0]):!s.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=P.useCallback(function(p,g,v,b){var w={name:p,delta:g,target:v,should:b,shadowParent:BOe(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(E){return E!==w})},1)},[]),c=P.useCallback(function(p){n.current=mD(p),r.current=void 0},[]),f=P.useCallback(function(p){l(p.type,Cee(p),p.target,a(p,e.lockRef.current))},[]),d=P.useCallback(function(p){l(p.type,mD(p),p.target,a(p,e.lockRef.current))},[]);P.useEffect(function(){return jv.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,Bv),document.addEventListener("touchmove",u,Bv),document.addEventListener("touchstart",c,Bv),function(){jv=jv.filter(function(p){return p!==o}),document.removeEventListener("wheel",u,Bv),document.removeEventListener("touchmove",u,Bv),document.removeEventListener("touchstart",c,Bv)}},[]);var h=e.removeScrollBar,m=e.inert;return P.createElement(P.Fragment,null,m?P.createElement(o,{styles:MOe(i)}):null,h?P.createElement(AOe,{gapMode:e.gapMode}):null)}function BOe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const jOe=pOe(zpe,LOe);var gx=P.forwardRef(function(e,t){return P.createElement(m4,cd({},e,{ref:t,sideCar:jOe}))});gx.classNames=m4.classNames;function Gr(e){return Object.keys(e)}function X$(e){return e&&typeof e=="object"&&!Array.isArray(e)}function uU(e,t){const n={...e},r=t;return X$(e)&&X$(t)&&Object.keys(t).forEach(i=>{X$(r[i])&&i in e?n[i]=uU(n[i],r[i]):n[i]=r[i]}),n}function zOe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function UOe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function yT(e){const t=UOe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Q$(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Wpe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Q$(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(o=>n(o)).join(",");if(r.includes(" "))return r.split(" ").map(o=>n(o)).join(" ");if(r.includes(e))return t?Q$(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const o=`${Number(i)/16}${e}`;return t?Q$(o):o}}return r}return n}const je=Wpe("rem",{shouldScale:!0}),xN=Wpe("em");function q0(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Gpe(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function W0(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==P.Fragment:!1}function Us(e){const t=P.createContext(null);return[({children:i,value:o})=>C.jsx(t.Provider,{value:o,children:i}),()=>{const i=P.useContext(t);if(i===null)throw new Error(e);return i}]}function G0(e=null){const t=P.createContext(e);return[({children:i,value:o})=>C.jsx(t.Provider,{value:o,children:i}),()=>P.useContext(t)]}function wN(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function EN(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function VOe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function HOe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function qOe(e,t,n){return EN(e,n)===EN(t,n)}function lU({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:o="rtl",orientation:s}){return a=>{var m;n==null||n(a);const u=Array.from(((m=EN(a.currentTarget,e))==null?void 0:m.querySelectorAll(t))||[]).filter(p=>qOe(a.currentTarget,p,e)),l=u.findIndex(p=>a.currentTarget===p),c=HOe(l,u,r),f=VOe(l,u,r),d=o==="rtl"?f:c,h=o==="rtl"?c:f;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const p=u.length-1;!u[p].disabled&&u[p].focus();break}}}}const WOe={app:100,modal:200,popover:300,overlay:400,max:9999};function zu(e){return WOe[e]}const L9=()=>{};function GOe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||L9:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function An(e,t="size",n=!0){if(e!==void 0)return Gpe(e)?n?je(e):e:`var(--${t}-${e})`}function yo(e){return An(e,"mantine-spacing")}function Mr(e){return e===void 0?"var(--mantine-radius-default)":An(e,"mantine-radius")}function Ms(e){return An(e,"mantine-font-size")}function Ype(e){return An(e,"mantine-line-height",!1)}function cU(e){if(e)return An(e,"mantine-shadow",!1)}function md(e,t){return n=>{e==null||e(n),t==null||t(n)}}function fU(e,t){return e in t?yT(t[e]):yT(e)}function vT(e,t){const n=e.map(r=>({value:r,px:fU(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function tf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function YOe(e,t,n){var r;return n?Array.from(((r=EN(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function KOe(){const[e,t]=P.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Yh(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Hb(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Bm(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const XOe=()=>{};function g4(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Bm(e),o=P.useRef(0),s=Object.assign(P.useCallback((...a)=>{window.clearTimeout(o.current);const u=()=>{o.current!==0&&(o.current=0,i(...a))};s.flush=u,o.current=window.setTimeout(u,n)},[i,n]),{flush:XOe});return P.useEffect(()=>()=>{window.clearTimeout(o.current),r&&s.flush()},[s,r]),s}const Aee=["mousedown","touchstart"];function QOe(e,t,n){const r=P.useRef(null);return P.useEffect(()=>{const i=o=>{const{target:s}=o??{};if(Array.isArray(n)){const a=(s==null?void 0:s.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(s)&&s.tagName!=="HTML";n.every(l=>!!l&&!o.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(s)&&e()};return(t||Aee).forEach(o=>document.addEventListener(o,i)),()=>{(t||Aee).forEach(o=>document.removeEventListener(o,i))}},[r,e,n]),r}function JOe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function ZOe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function e6e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=P.useState(n?t:ZOe(e)),o=P.useRef(null);return P.useEffect(()=>{if("matchMedia"in window)return o.current=window.matchMedia(e),i(o.current.matches),JOe(o.current,s=>i(s.matches))},[e]),r}const C1=typeof document<"u"?P.useLayoutEffect:P.useEffect;function Md(e,t){const n=P.useRef(!1);P.useEffect(()=>()=>{n.current=!1},[]),P.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Kpe({opened:e,shouldReturnFocus:t=!0}){const n=P.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Md(()=>{let i=-1;const o=s=>{s.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",o),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",o)}},[e,t]),r}const t6e=/input|select|textarea|button|object/,Xpe="a, input, select, textarea, button, object, [tabindex]";function n6e(e){return e.style.display==="none"}function r6e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(n6e(n))return!1;n=n.parentNode}return!0}function Qpe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function B9(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Qpe(e));return(t6e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&r6e(e)}function Jpe(e){const t=Qpe(e);return(Number.isNaN(t)||t>=0)&&B9(e)}function i6e(e){return Array.from(e.querySelectorAll(Xpe)).filter(Jpe)}function o6e(e,t){const n=i6e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let o=r===i.activeElement||e===i.activeElement;const s=i.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(o=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===s.getAttribute("name")).includes(r)),!o)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function s6e(e=!0){const t=P.useRef(null),n=i=>{let o=i.querySelector("[data-autofocus]");if(!o){const s=Array.from(i.querySelectorAll(Xpe));o=s.find(Jpe)||s.find(B9)||null,!o&&B9(i)&&(o=i)}o&&o.focus({preventScroll:!0})},r=P.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return P.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=o=>{o.key==="Tab"&&t.current&&o6e(t.current,o)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const a6e=e=>(e+1)%1e6;function u6e(){const[,e]=P.useReducer(a6e,0);return e}const l6e=ur.useId||(()=>{});function c6e(){const e=l6e();return e?`mantine-${e.replace(/:/g,"")}`:""}function tu(e){const t=c6e(),[n,r]=P.useState(t);return C1(()=>{r(Hb())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Zpe(e,t,n){P.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function _N(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function eme(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=_N(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():_N(r,null)}),t.clear()}}}function zo(...e){return P.useCallback(eme(...e),e)}function f6e(e,t,n="ltr"){const r=P.useRef(null),i=P.useRef(!1),o=P.useRef(!1),s=P.useRef(0),[a,u]=P.useState(!1);return P.useEffect(()=>{i.current=!0},[]),P.useEffect(()=>{const l=r.current,c=({x:w,y:E})=>{cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{if(i.current&&l){l.style.userSelect="none";const _=l.getBoundingClientRect();if(_.width&&_.height){const T=Yh((w-_.left)/_.width,0,1);e({x:n==="ltr"?T:1-T,y:Yh((E-_.top)/_.height,0,1)})}}})},f=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",m),document.addEventListener("touchmove",b),document.addEventListener("touchend",m)},d=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",m)},h=()=>{!o.current&&i.current&&(o.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),f())},m=()=>{o.current&&i.current&&(o.current=!1,u(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{h(),w.preventDefault(),g(w)},g=w=>c({x:w.clientX,y:w.clientY}),v=w=>{w.cancelable&&w.preventDefault(),h(),b(w)},b=w=>{w.cancelable&&w.preventDefault(),c({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return l==null||l.addEventListener("mousedown",p),l==null||l.addEventListener("touchstart",v,{passive:!1}),()=>{l&&(l.removeEventListener("mousedown",p),l.removeEventListener("touchstart",v))}},[n,e]),{ref:r,active:a}}function as({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,o]=P.useState(t!==void 0?t:n),s=(a,...u)=>{o(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,s,!1]}function y4(e,t){return e6e("(prefers-reduced-motion: reduce)",e,t)}const d6e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function PC(e){const t=P.useRef(0),n=P.useRef(null),[r,i]=P.useState(d6e),o=P.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const a=s[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return P.useEffect(()=>(n.current&&(o==null||o.observe(n.current,e)),()=>{o==null||o.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function h6e(e){const[t,{width:n,height:r}]=PC(e);return{ref:t,width:n,height:r}}function dU(e=!1,t){const{onOpen:n,onClose:r}={},[i,o]=P.useState(e),s=P.useCallback(()=>{o(l=>l||(n==null||n(),!0))},[n]),a=P.useCallback(()=>{o(l=>l&&(r==null||r(),!1))},[r]),u=P.useCallback(()=>{i?a():s()},[a,s,i]);return[i,{open:s,close:a,toggle:u}]}function p6e(e){const t=P.useRef(void 0);return P.useEffect(()=>{t.current=e},[e]),t.current}function m6e(e,t){const n=Bm(e),r=P.useRef(null),i=P.useRef(null),o=P.useRef(!0),s=P.useRef(t),a=P.useRef(-1),u=()=>window.clearTimeout(a.current),l=P.useCallback((...d)=>{n(...d),r.current=d,i.current=d,o.current=!1},[n]),c=P.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,s.current)):o.current=!0},[l]),f=P.useCallback((...d)=>{o.current?(l(...d),a.current=window.setTimeout(c,s.current)):r.current=d},[l,c]);return P.useEffect(()=>{s.current=t},[t]),[f,u]}function g6e(e,t){const[n,r]=P.useState(e),[i,o]=m6e(r,t);return P.useEffect(()=>o,[]),[n,i]}function y6e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function v6e(e){function t(r){const i=Object.keys(r).reduce((o,s)=>(o[`${e}:${s}`]=a=>r[s](a.detail),o),{});C1(()=>(Object.keys(i).forEach(o=>{window.removeEventListener(o,i[o]),window.addEventListener(o,i[o])}),()=>Object.keys(i).forEach(o=>{window.removeEventListener(o,i[o])})),[i])}function n(r){return(...i)=>y6e(`${e}:${String(r)}`,i[0])}return[t,n]}var b6e={};function x6e(){return typeof process<"u"&&b6e?"production":"development"}function Dee(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function v4(e){var n;const t=ur.version;return typeof ur.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function tme(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=tme(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function eo(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=tme(e))&&(r&&(r+=" "),r+=t);return r}const w6e={};function E6e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=eo(t[r],i):t[r]=i})}),t}function b4({theme:e,classNames:t,props:n,stylesCtx:r}){const o=(Array.isArray(t)?t:[t]).map(s=>typeof s=="function"?s(e,n,r):s||w6e);return E6e(o)}function TN({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((o,s)=>typeof s=="function"?{...o,...s(e,n,r)}:{...o,...s},{})}const nme=P.createContext(null);function Y0(){const e=P.useContext(nme);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function _6e(){return Y0().cssVariablesResolver}function T6e(){return Y0().classNamesPrefix}function hU(){return Y0().getStyleNonce}function C6e(){return Y0().withStaticClasses}function S6e(){return Y0().headless}function A6e(){var e;return(e=Y0().stylesTransform)==null?void 0:e.sx}function D6e(){var e;return(e=Y0().stylesTransform)==null?void 0:e.styles}function k6e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function I6e(e){let t=e.replace("#","");if(t.length===3){const s=t.split("");t=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(t.length===8){const s=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:s}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,o=n&255;return{r,g:i,b:o,a:1}}function R6e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function N6e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*o-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=o-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:s||1}}function pU(e){return k6e(e)?I6e(e):e.startsWith("rgb")?R6e(e):e.startsWith("hsl")?N6e(e):{r:0,g:0,b:0,a:1}}function gD(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:o}=pU(e),s=1-t,a=u=>Math.round(u*s);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${o})`}function bT(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function J$(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function P6e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function O6e(e){if(e.startsWith("oklch("))return(P6e(e)||0)/100;const{r:t,g:n,b:r}=pU(e),i=t/255,o=n/255,s=r/255,a=J$(i),u=J$(o),l=J$(s);return .2126*a+.7152*u+.0722*l}function e_(e,t=.179){return e.startsWith("var(")?!1:O6e(e)>t}function Zd({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:e_(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:e_(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:e_(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),o=i?Number(i):void 0,s=r in t.colors;if(s){const a=o!==void 0?t.colors[r][o]:t.colors[r][bT(t,n||"light")];return{color:r,value:a,shade:o,isThemeColor:s,isLight:e_(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${o}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:s,isLight:e_(e,t.luminanceThreshold),shade:o,variable:void 0}}function Yr(e,t){const n=Zd({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function j9(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Yr(n.from,t),i=Yr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function rd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${o}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=pU(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const zv=rd,F6e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const o=Zd({color:e,theme:t}),s=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=s&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${je(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:a,border:`${je(1)} solid transparent`}:{background:e,hover:gD(e,.1),color:a,border:`${je(1)} solid transparent`}}if(n==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${je(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:rd(a,.1),hover:rd(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${je(1)} solid transparent`}}return{background:rd(e,.1),hover:rd(e,.12),color:e,border:`${je(1)} solid transparent`}}if(n==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${je(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:rd(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${je(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:rd(e,.05),color:e,border:`${je(1)} solid ${e}`};if(n==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${je(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:"transparent",hover:rd(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${je(1)} solid transparent`}}return{background:"transparent",hover:rd(e,.12),color:e,border:`${je(1)} solid transparent`}}return n==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${je(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${je(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${je(1)} solid transparent`}:n==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:gD(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${je(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:gD(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${je(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:gD(t.white,.01),color:e,border:`${je(1)} solid transparent`}:n==="gradient"?{background:j9(r,t),hover:j9(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${je(1)} solid var(--mantine-color-default-border)`}:{}},M6e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},kee="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",mU={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:M6e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:F6e,autoContrast:!1,luminanceThreshold:.3,fontFamily:kee,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:kee,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:je(34),lineHeight:"1.3"},h2:{fontSize:je(26),lineHeight:"1.35"},h3:{fontSize:je(22),lineHeight:"1.4"},h4:{fontSize:je(18),lineHeight:"1.45"},h5:{fontSize:je(16),lineHeight:"1.5"},h6:{fontSize:je(14),lineHeight:"1.5"}}},fontSizes:{xs:je(12),sm:je(14),md:je(16),lg:je(18),xl:je(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:je(2),sm:je(4),md:je(8),lg:je(16),xl:je(32)},spacing:{xs:je(10),sm:je(12),md:je(16),lg:je(20),xl:je(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${je(1)} ${je(3)} rgba(0, 0, 0, 0.05), 0 ${je(1)} ${je(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${je(1)} ${je(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${je(10)} ${je(15)} ${je(-5)}, rgba(0, 0, 0, 0.04) 0 ${je(7)} ${je(7)} ${je(-5)}`,md:`0 ${je(1)} ${je(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${je(20)} ${je(25)} ${je(-5)}, rgba(0, 0, 0, 0.04) 0 ${je(10)} ${je(10)} ${je(-5)}`,lg:`0 ${je(1)} ${je(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${je(28)} ${je(23)} ${je(-7)}, rgba(0, 0, 0, 0.04) 0 ${je(12)} ${je(12)} ${je(-7)}`,xl:`0 ${je(1)} ${je(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${je(36)} ${je(28)} ${je(-7)}, rgba(0, 0, 0, 0.04) 0 ${je(17)} ${je(17)} ${je(-7)}`},other:{},components:{}};function Iee(e){return e==="auto"||e==="dark"||e==="light"}function $6e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Iee(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Iee(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const L6e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Ree="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Z$(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Nee(e){if(!(e.primaryColor in e.colors))throw new Error(L6e);if(typeof e.primaryShade=="object"&&(!Z$(e.primaryShade.dark)||!Z$(e.primaryShade.light)))throw new Error(Ree);if(typeof e.primaryShade=="number"&&!Z$(e.primaryShade))throw new Error(Ree)}function B6e(e,t){var r;if(!t)return Nee(e),e;const n=uU(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Nee(n),n}const gU=P.createContext(null),j6e=()=>P.useContext(gU)||mU;function xo(){const e=P.useContext(gU);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function rme({theme:e,children:t,inherit:n=!0}){const r=j6e(),i=P.useMemo(()=>B6e(n?r:mU,e),[e,r,n]);return C.jsx(gU.Provider,{value:i,children:t})}rme.displayName="@mantine/core/MantineThemeProvider";function z6e(){const e=xo(),t=hU(),n=Gr(e.breakpoints).reduce((r,i)=>{const o=e.breakpoints[i].includes("px"),s=yT(e.breakpoints[i]),a=o?`${s-.1}px`:xN(s-.1),u=o?`${s}px`:xN(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return C.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function e5(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function t_(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function U6e(e,t){const n=e5(e.variables),r=n?t_(t,n):"",i=e5(e.dark),o=e5(e.light),s=i?t_(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=o?t_(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function S1({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Zd({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Pee(e,t){return S1({color:e.colors[e.primaryColor][bT(e,t)],theme:e,autoContrast:null})}function yD({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=bT(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:zv(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:zv(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:zv(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const o=bT(e,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${o})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${o===9?8:o+1})`,[`--mantine-color-${r}-light`]:zv(e.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${r}-light-hover`]:zv(e.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(o-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(o-4,0)})`,[`--mantine-color-${r}-outline-hover`]:zv(e.colors[t][Math.max(o-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...s}:s}function V6e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Uv(e,t,n){Gr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const ime=e=>{const t=bT(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:je(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Pee(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Pee(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Uv(r.variables,e.breakpoints,"breakpoint"),Uv(r.variables,e.spacing,"spacing"),Uv(r.variables,e.fontSizes,"font-size"),Uv(r.variables,e.lineHeights,"line-height"),Uv(r.variables,e.shadows,"shadow"),Uv(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((o,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${e.primaryColor}-${s})`}),Gr(e.colors).forEach(o=>{const s=e.colors[o];if(V6e(s)){Object.assign(r.light,yD({theme:e,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,yD({theme:e,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,u)=>{r.variables[`--mantine-color-${o}-${u}`]=a}),Object.assign(r.light,yD({theme:e,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,yD({theme:e,color:o,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Gr(i).forEach(o=>{r.variables[`--mantine-${o}-font-size`]=i[o].fontSize,r.variables[`--mantine-${o}-line-height`]=i[o].lineHeight,r.variables[`--mantine-${o}-font-weight`]=i[o].fontWeight||e.headings.fontWeight}),r};function H6e({theme:e,generator:t}){const n=ime(e),r=t==null?void 0:t(e);return r?uU(n,r):n}const t5=ime(mU);function q6e(e){const t={variables:{},light:{},dark:{}};return Gr(e.variables).forEach(n=>{t5.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Gr(e.light).forEach(n=>{t5.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Gr(e.dark).forEach(n=>{t5.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function W6e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function ome({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=xo(),r=hU(),i=_6e(),o=H6e({theme:n,generator:i}),s=e===":root"&&t,a=s?q6e(o):o,u=U6e(a,e);return u?C.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${s?"":W6e(e)}`}}):null}ome.displayName="@mantine/CssVariables";function G6e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Vv(e,t){var i,o;const n=typeof window<"u"&&"matchMedia"in window&&((i=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:i.matches),r=e!=="auto"?e:n?"dark":"light";(o=t())==null||o.setAttribute("data-mantine-color-scheme",r)}function Y6e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=P.useRef(null),[o,s]=P.useState(()=>e.get(t)),a=r||o,u=P.useCallback(c=>{r||(Vv(c,n),s(c),e.set(c))},[e.set,a,r]),l=P.useCallback(()=>{s(t),Vv(t,n),e.clear()},[e.clear,t]);return P.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),C1(()=>{Vv(e.get(t),n)},[]),P.useEffect(()=>{var f;if(r)return Vv(r,n),()=>{};r===void 0&&Vv(o,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{o==="auto"&&Vv(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[o,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function K6e({respectReducedMotion:e,getRootElement:t}){C1(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}G6e();function sme({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:o=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=$6e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:m}){const{colorScheme:p,setColorScheme:g,clearColorScheme:v}=Y6e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return K6e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),C.jsx(nme.Provider,{value:{colorScheme:p,setColorScheme:g,clearColorScheme:v,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:m},children:C.jsxs(rme,{theme:e,children:[s&&C.jsx(ome,{cssVariablesSelector:a,deduplicateCssVariables:o}),i&&C.jsx(z6e,{}),t]})})}sme.displayName="@mantine/core/MantineProvider";function A1({classNames:e,styles:t,props:n,stylesCtx:r}){const i=xo();return{resolvedClassNames:b4({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:TN({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const X6e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Q6e({theme:e,options:t,unstyled:n}){return eo((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||X6e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function J6e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return b4({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Oee({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return b4({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Z6e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function eFe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function tFe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function nFe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(o=>{var s,a;return(a=b4({theme:t,classNames:(s=t.components[o])==null?void 0:s.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function rFe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function iFe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:o,classes:s,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:m}){return eo(Q6e({theme:e,options:t,unstyled:a||h}),nFe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),rFe({options:t,classes:s,selector:r,unstyled:a}),Oee({selector:r,stylesCtx:f,theme:e,classNames:o,props:c}),Oee({selector:r,stylesCtx:f,theme:e,classNames:m,props:c}),J6e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Z6e({rootSelector:l,selector:r,className:u}),eFe({selector:r,classes:s,unstyled:a||h}),d&&!h&&tFe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function oFe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(o=>{var s;return TN({theme:e,styles:(s=e.components[o])==null?void 0:s.styles,props:n,stylesCtx:r})[i]}).reduce((o,s)=>({...o,...s}),{})}function z9({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...z9({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function sFe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...q0(n[r])}}),t),{})}function aFe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:o,themeName:s,headless:a}){var u;return(u=sFe([a?{}:t==null?void 0:t(n,r,i),...s.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[o]}function uFe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:o,rootSelector:s,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&oFe({theme:e,themeName:t,props:i,stylesCtx:o,selector:n}),...!d&&TN({theme:e,styles:a,props:i,stylesCtx:o})[n],...!d&&TN({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:o})[n],...aFe({theme:e,props:i,stylesCtx:o,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...s===n?z9({style:u,theme:e}):null,...z9({style:r==null?void 0:r.style,theme:e})}}function lFe({props:e,stylesCtx:t,themeName:n}){var s;const r=xo(),i=(s=D6e())==null?void 0:s();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Nt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:o,rootSelector:s="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=xo(),h=T6e(),m=C6e(),p=S6e(),g=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:b}=lFe({props:n,stylesCtx:r,themeName:g});return(w,E)=>({className:iFe({theme:d,options:E,themeName:g,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:m,headless:p,transformedStyles:b([E==null?void 0:E.styles,l])}),style:uFe({theme:d,themeName:g,selector:w,options:E,props:n,stylesCtx:r,rootSelector:s,styles:l,style:o,vars:c,varsResolver:f,headless:p,withStylesTransform:v})})}function xw(e,t){return typeof e=="boolean"?e:t.autoContrast}function qe(e,t,n){var s;const r=xo(),i=(s=r.components[e])==null?void 0:s.defaultProps,o=typeof i=="function"?i(r):i;return{...t,...o,...q0(n)}}function n5(e){return Gr(e).reduce((t,n)=>e[n]!==void 0?`${t}${zOe(n)}:${e[n]};`:t,"").trim()}function cFe({selector:e,styles:t,media:n,container:r}){const i=t?n5(t):"",o=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${n5(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${n5(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${o.join("")}${s.join("")}`.trim()}function D1(e){const t=hU();return C.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:cFe(e)}})}function k1(e){const{m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:m,pl:p,pr:g,pe:v,ps:b,bd:w,bg:E,c:_,opacity:T,ff:S,fz:D,fw:k,lts:R,ta:O,lh:M,fs:F,tt:L,td:H,w:V,miw:Q,maw:K,h:Z,mih:U,mah:B,bgsz:q,bgp:z,bgr:G,bga:X,pos:ne,top:ge,left:me,bottom:ye,right:we,inset:fe,display:se,flex:Ce,hiddenFrom:Ae,visibleFrom:Ue,lightHidden:Xe,darkHidden:Le,sx:Ge,...et}=e;return{styleProps:q0({m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:m,pl:p,pr:g,pe:v,ps:b,bd:w,bg:E,c:_,opacity:T,ff:S,fz:D,fw:k,lts:R,ta:O,lh:M,fs:F,tt:L,td:H,w:V,miw:Q,maw:K,h:Z,mih:U,mah:B,bgsz:q,bgp:z,bgr:G,bga:X,pos:ne,top:ge,left:me,bottom:ye,right:we,inset:fe,display:se,flex:Ce,hiddenFrom:Ae,visibleFrom:Ue,lightHidden:Xe,darkHidden:Le,sx:Ge}),rest:et}}const fFe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function yU(e,t){const n=Zd({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function dFe(e,t){const n=Zd({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:yU(e,t)}function hFe(e,t){if(typeof e=="number")return je(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(s=>s.trim()!=="");let o=`${je(n)}`;return r&&(o+=` ${r}`),i.length>0&&(o+=` ${yU(i.join(" "),t)}`),o.trim()}return e}const Fee={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function pFe(e){return typeof e=="string"&&e in Fee?Fee[e]:e}const mFe=["h1","h2","h3","h4","h5","h6"];function gFe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&mFe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?je(e):e}function yFe(e){return e}const vFe=["h1","h2","h3","h4","h5","h6"];function bFe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&vFe.includes(e)?`var(--mantine-${e}-line-height)`:e}function xFe(e){return typeof e=="number"?je(e):e}function wFe(e,t){if(typeof e=="number")return je(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return je(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const r5={color:yU,textColor:dFe,fontSize:gFe,spacing:wFe,identity:yFe,size:xFe,lineHeight:bFe,fontFamily:pFe,border:hFe};function Mee(e){return e.replace("(min-width: ","").replace("em)","")}function EFe({media:e,...t}){const r=Object.keys(e).sort((i,o)=>Number(Mee(i))-Number(Mee(o))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function _Fe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function TFe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function CFe(e){return typeof e=="object"&&e!==null?Gr(e).filter(t=>t!=="base"):[]}function SFe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function ame({styleProps:e,data:t,theme:n}){return EFe(Gr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const o=t[i],s=Array.isArray(o.property)?o.property:[o.property],a=TFe(e[i]);if(!_Fe(e[i]))return s.forEach(l=>{r.inlineStyles[l]=r5[o.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=CFe(e[i]);return s.forEach(l=>{a&&(r.styles[l]=r5[o.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:r5[o.type](SFe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function OC(){return`__m__-${P.useId().replace(/:/g,"")}`}function vU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...vU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function ume(e){return e.startsWith("data-")?e:`data-${e}`}function AFe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[ume(n)]=e[n]),t},{})}function lme(e){return e?typeof e=="string"?{[ume(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...lme(n)}),{}):AFe(e):null}function U9(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...U9(r,t)}),{}):typeof e=="function"?e(t):e??{}}function DFe({theme:e,style:t,vars:n,styleProps:r}){const i=U9(t,e),o=U9(n,e);return{...i,...o,...r}}const cme=P.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:o,size:s,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},m)=>{var D;const p=xo(),g=e||"div",{styleProps:v,rest:b}=k1(h),w=A6e(),E=(D=w==null?void 0:w())==null?void 0:D(v.sx),_=OC(),T=ame({styleProps:v,theme:p,data:fFe}),S={ref:m,style:DFe({theme:p,style:t,vars:n,styleProps:T.inlineStyles}),className:eo(r,E,{[_]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":Gpe(s)?void 0:s||void 0,size:d,...lme(o),...b};return C.jsxs(C.Fragment,{children:[T.hasResponsiveStyles&&C.jsx(D1,{selector:`.${_}`,styles:T.styles,media:T.media}),typeof f=="function"?f(S):C.jsx(g,{...S})]})});cme.displayName="@mantine/core/Box";const Re=cme;function fme(e){return e}function kFe(e){const t=e;return n=>{const r=P.forwardRef((i,o)=>C.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function dt(e){const t=P.forwardRef(e);return t.extend=fme,t.withProps=n=>{const r=P.forwardRef((i,o)=>C.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function wo(e){const t=P.forwardRef(e);return t.withProps=n=>{const r=P.forwardRef((i,o)=>C.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=fme,t}const IFe=P.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function K0(){return P.useContext(IFe)}var x4=Bpe();const W_=Fl(x4);function RFe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function i5(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const n_=typeof window<"u"&&window.requestAnimationFrame;function NFe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=P.useRef(null),o=0,s={display:"none",height:0,overflow:"hidden"},[a,u]=P.useState(r?{}:s),l=m=>{x4.flushSync(()=>u(m))},c=m=>{l(p=>({...p,...m}))};function f(m){const p=e||RFe(m);return{transition:`height ${p}ms ${t}, opacity ${p}ms ${t}`}}Md(()=>{typeof n_=="function"&&n_(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),n_(()=>{const m=i5(i);c({...f(m),height:m})})}:()=>{const m=i5(i);c({...f(m),willChange:"height",height:m}),n_(()=>c({height:o,overflow:"hidden"}))})},[r]);const d=m=>{if(!(m.target!==i.current||m.propertyName!=="height"))if(r){const p=i5(i);p===a.height?l({}):c({height:p}),n()}else a.height===o&&(l(s),n())};function h({style:m={},refKey:p="ref",...g}={}){const v=g[p];return{"aria-hidden":!r,...g,[p]:eme(i,v),onTransitionEnd:d,style:{boxSizing:"border-box",...m,...a}}}return h}const PFe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},w4=dt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:o,style:s,onTransitionEnd:a,animateOpacity:u,...l}=qe("Collapse",PFe,e),c=xo(),f=y4(),h=(c.respectReducedMotion?f:!1)?0:i,m=NFe({opened:r,transitionDuration:h,transitionTimingFunction:o,onTransitionEnd:a});return h===0?r?C.jsx(Re,{...l,children:n}):null:C.jsx(Re,{...m({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${o}`:"none",...vU(s,c)},ref:t,...l}),children:n})});w4.displayName="@mantine/core/Collapse";const[OFe,bc]=Us("ScrollArea.Root component was not found in tree");function yx(e,t){const n=Bm(t);C1(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const FFe=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=bc(),[o,s]=P.useState(0),[a,u]=P.useState(0),l=!!(o&&a);return yx(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),yx(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),s(c)}),l?C.jsx("div",{...r,ref:t,style:{...n,width:o,height:a}}):null}),MFe=P.forwardRef((e,t)=>{const n=bc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?C.jsx(FFe,{...e,ref:t}):null}),$Fe={scrollHideDelay:1e3,type:"hover"},dme=P.forwardRef((e,t)=>{const n=qe("ScrollAreaRoot",$Fe,e),{type:r,scrollHideDelay:i,scrollbars:o,...s}=n,[a,u]=P.useState(null),[l,c]=P.useState(null),[f,d]=P.useState(null),[h,m]=P.useState(null),[p,g]=P.useState(null),[v,b]=P.useState(0),[w,E]=P.useState(0),[_,T]=P.useState(!1),[S,D]=P.useState(!1),k=zo(t,R=>u(R));return C.jsx(OFe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:m,scrollbarXEnabled:_,onScrollbarXEnabledChange:T,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:D,onCornerWidthChange:b,onCornerHeightChange:E},children:C.jsx(Re,{...s,ref:k,__vars:{"--sa-corner-width":o!=="xy"?"0px":`${v}px`,"--sa-corner-height":o!=="xy"?"0px":`${w}px`}})})});dme.displayName="@mantine/core/ScrollAreaRoot";function hme(e,t){const n=e/t;return Number.isNaN(n)?0:n}function E4(e){const t=hme(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function pme(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function LFe(e,[t,n]){return Math.min(n,Math.max(t,e))}function $ee(e,t,n="ltr"){const r=E4(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,s=t.content-t.viewport,a=o-r,u=n==="ltr"?[0,s]:[s*-1,0],l=LFe(e,u);return pme([0,s],[0,a])(l)}function BFe(e,t,n,r="ltr"){const i=E4(n),o=i/2,s=t||o,a=i-s,u=n.scrollbar.paddingStart+s,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return pme([u,l],f)(e)}function mme(e,t){return e>0&&e<t}function CN(e){return e?parseInt(e,10):0}function Iy(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[jFe,gme]=Us("ScrollAreaScrollbar was not found in tree"),yme=P.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=bc(),[h,m]=P.useState(null),p=zo(t,D=>m(D)),g=P.useRef(null),v=P.useRef(""),{viewport:b}=d,w=n.content-n.viewport,E=Bm(l),_=Bm(a),T=g4(c,10),S=D=>{if(g.current){const k=D.clientX-g.current.left,R=D.clientY-g.current.top;u({x:k,y:R})}};return P.useEffect(()=>{const D=k=>{const R=k.target;(h==null?void 0:h.contains(R))&&E(k,w)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[b,h,w,E]),P.useEffect(_,[n,_]),yx(h,T),yx(d.content,T),C.jsx(jFe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Bm(i),onThumbPointerUp:Bm(o),onThumbPositionChange:_,onThumbPointerDown:Bm(s)},children:C.jsx("div",{...f,ref:p,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:Iy(e.onPointerDown,D=>{D.preventDefault(),D.button===0&&(D.target.setPointerCapture(D.pointerId),g.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(D))}),onPointerMove:Iy(e.onPointerMove,S),onPointerUp:Iy(e.onPointerUp,D=>{D.preventDefault();const k=D.target;k.hasPointerCapture(D.pointerId)&&k.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=v.current,g.current=null})})})}),vme=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...o}=e,s=bc(),[a,u]=P.useState(),l=P.useRef(null),c=zo(t,l,s.onScrollbarXChange);return P.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),C.jsx(yme,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${E4(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),mme(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:CN(a.paddingLeft),paddingEnd:CN(a.paddingRight)}})}})});vme.displayName="@mantine/core/ScrollAreaScrollbarX";const bme=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...o}=e,s=bc(),[a,u]=P.useState(),l=P.useRef(null),c=zo(t,l,s.onScrollbarYChange);return P.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),C.jsx(yme,{...o,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${E4(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),mme(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:CN(a.paddingTop),paddingEnd:CN(a.paddingBottom)}})}})});bme.displayName="@mantine/core/ScrollAreaScrollbarY";const _4=P.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=K0(),o=bc(),s=P.useRef(null),a=P.useRef(0),[u,l]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=hme(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{s.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,m)=>BFe(h,a.current,u,m);return n==="horizontal"?C.jsx(vme,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollLeft,m=$ee(h,u,i);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=d(h,i))}}):n==="vertical"?C.jsx(bme,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollTop,m=$ee(h,u);u.scrollbar.size===0?s.current.style.setProperty("--thumb-opacity","0"):s.current.style.setProperty("--thumb-opacity","1"),s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=d(h))}}):null});_4.displayName="@mantine/core/ScrollAreaScrollbarVisible";const bU=P.forwardRef((e,t)=>{const n=bc(),{forceMount:r,...i}=e,[o,s]=P.useState(!1),a=e.orientation==="horizontal",u=g4(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;s(a?l:c)}},10);return yx(n.viewport,u),yx(n.content,u),r||o?C.jsx(_4,{"data-state":o?"visible":"hidden",...i,ref:t}):null});bU.displayName="@mantine/core/ScrollAreaScrollbarAuto";const xme=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=bc(),[o,s]=P.useState(!1);return P.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),s(!0)},c=()=>{u=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||o?C.jsx(bU,{"data-state":o?"visible":"hidden",...r,ref:t}):null});xme.displayName="@mantine/core/ScrollAreaScrollbarHover";const zFe=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=bc(),o=e.orientation==="horizontal",[s,a]=P.useState("hidden"),u=g4(()=>a("idle"),100);return P.useEffect(()=>{if(s==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[s,i.scrollHideDelay]),P.useEffect(()=>{const{viewport:l}=i,c=o?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,o,u]),n||s!=="hidden"?C.jsx(_4,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Iy(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Iy(e.onPointerLeave,()=>a("idle"))}):null}),V9=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=bc(),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=i,a=e.orientation==="horizontal";return P.useEffect(()=>(a?o(!0):s(!0),()=>{a?o(!1):s(!1)}),[a,o,s]),i.type==="hover"?C.jsx(xme,{...r,ref:t,forceMount:n}):i.type==="scroll"?C.jsx(zFe,{...r,ref:t,forceMount:n}):i.type==="auto"?C.jsx(bU,{...r,ref:t,forceMount:n}):i.type==="always"?C.jsx(_4,{...r,ref:t}):null});V9.displayName="@mantine/core/ScrollAreaScrollbar";function UFe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},s=n.left!==o.left,a=n.top!==o.top;(s||a)&&t(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const wme=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=bc(),o=gme(),{onThumbPositionChange:s}=o,a=zo(t,c=>o.onThumbChange(c)),u=P.useRef(void 0),l=g4(()=>{u.current&&(u.current(),u.current=void 0)},100);return P.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=UFe(c,s);u.current=d,s()}};return s(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,s]),C.jsx("div",{"data-state":o.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Iy(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,m=c.clientY-d.top;o.onThumbPointerDown({x:h,y:m})}),onPointerUp:Iy(e.onPointerUp,o.onThumbPointerUp)})});wme.displayName="@mantine/core/ScrollAreaThumb";const H9=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gme();return n||i.hasThumb?C.jsx(wme,{ref:t,...r}):null});H9.displayName="@mantine/core/ScrollAreaThumb";const Eme=P.forwardRef(({children:e,style:t,...n},r)=>{const i=bc(),o=zo(r,i.onViewportChange);return C.jsx(Re,{...n,ref:o,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:C.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Eme.displayName="@mantine/core/ScrollAreaViewport";var xU={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const _me={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},VFe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":je(t)}}),wp=dt((e,t)=>{const n=qe("ScrollArea",_me,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:m,children:p,offsetScrollbars:g,scrollbars:v,onBottomReached:b,onTopReached:w,...E}=n,[_,T]=P.useState(!1),S=Nt({name:"ScrollArea",props:n,classes:xU,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:VFe});return C.jsxs(dme,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:v,...S("root"),...E,children:[C.jsx(Eme,{...d,...S("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":v||void 0,onScroll:D=>{var M;(M=d==null?void 0:d.onScroll)==null||M.call(d,D),m==null||m({x:D.currentTarget.scrollLeft,y:D.currentTarget.scrollTop});const{scrollTop:k,scrollHeight:R,clientHeight:O}=D.currentTarget;k-(R-O)>=0&&(b==null||b()),k===0&&(w==null||w())},children:p}),(v==="xy"||v==="x")&&C.jsx(V9,{...S("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:C.jsx(H9,{...S("thumb")})}),(v==="xy"||v==="y")&&C.jsx(V9,{...S("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:C.jsx(H9,{...S("thumb")})}),C.jsx(MFe,{...S("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});wp.displayName="@mantine/core/ScrollArea";const wU=dt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:o,scrollHideDelay:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:m,scrollbars:p,style:g,vars:v,onBottomReached:b,onTopReached:w,...E}=qe("ScrollAreaAutosize",_me,e);return C.jsx(Re,{...E,ref:t,style:[{display:"flex",overflow:"auto"},g],children:C.jsx(Re,{style:{display:"flex",flexDirection:"column",flex:1},children:C.jsx(wp,{classNames:r,styles:i,scrollHideDelay:s,scrollbarSize:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:m,vars:v,scrollbars:p,onBottomReached:b,onTopReached:w,children:n})})})});wp.classes=xU;wU.displayName="@mantine/core/ScrollAreaAutosize";wU.classes=xU;wp.Autosize=wU;var Tme={root:"m_87cf2631"};const HFe={__staticSelector:"UnstyledButton"},xl=wo((e,t)=>{const n=qe("UnstyledButton",HFe,e),{className:r,component:i="button",__staticSelector:o,unstyled:s,classNames:a,styles:u,style:l,...c}=n,f=Nt({name:o,props:n,classes:Tme,className:r,style:l,classNames:a,styles:u,unstyled:s});return C.jsx(Re,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});xl.classes=Tme;xl.displayName="@mantine/core/UnstyledButton";var Cme={root:"m_515a97f8"};const qFe={},EU=dt((e,t)=>{const n=qe("VisuallyHidden",qFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,...l}=n,c=Nt({name:"VisuallyHidden",classes:Cme,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a});return C.jsx(Re,{component:"span",ref:t,...c("root"),...l})});EU.classes=Cme;EU.displayName="@mantine/core/VisuallyHidden";var Sme={root:"m_1b7284a3"};const WFe={},GFe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Mr(t),"--paper-shadow":cU(n)}}),ww=wo((e,t)=>{const n=qe("Paper",WFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...m}=n,p=Nt({name:"Paper",props:n,classes:Sme,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:GFe});return C.jsx(Re,{ref:t,mod:[{"data-with-border":u},h],...p("root"),variant:d,...m})});ww.classes=Sme;ww.displayName="@mantine/core/Paper";function T4(){return typeof window<"u"}function Ew(e){return Ame(e)?(e.nodeName||"").toLowerCase():"#document"}function Du(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Up(e){var t;return(t=(Ame(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ame(e){return T4()?e instanceof Node||e instanceof Du(e).Node:!1}function ai(e){return T4()?e instanceof Element||e instanceof Du(e).Element:!1}function wl(e){return T4()?e instanceof HTMLElement||e instanceof Du(e).HTMLElement:!1}function q9(e){return!T4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Du(e).ShadowRoot}function FC(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=dc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function YFe(e){return["table","td","th"].includes(Ew(e))}function KFe(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function _U(e){const t=C4(),n=ai(e)?dc(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function XFe(e){let t=Ep(e);for(;wl(t)&&!m0(t);){if(_U(t))return t;if(KFe(t))return null;t=Ep(t)}return null}function C4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function m0(e){return["html","body","#document"].includes(Ew(e))}function dc(e){return Du(e).getComputedStyle(e)}function S4(e){return ai(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ep(e){if(Ew(e)==="html")return e;const t=e.assignedSlot||e.parentNode||q9(e)&&e.host||Up(e);return q9(t)?t.host:t}function Dme(e){const t=Ep(e);return m0(t)?e.ownerDocument?e.ownerDocument.body:e.body:wl(t)&&FC(t)?t:Dme(t)}function sp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Dme(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Du(i);if(o){const a=QFe(s);return t.concat(s,s.visualViewport||[],FC(i)?i:[],a&&n?sp(a):[])}return t.concat(i,sp(i,[],n))}function QFe(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Lee(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function xT(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&q9(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function kme(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Ime(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function JFe(e){return tMe()?!1:!Bee()&&e.width===0&&e.height===0||Bee()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function ZFe(){return/apple/i.test(navigator.vendor)}function Bee(){const e=/android/i;return e.test(kme())||e.test(Ime())}function eMe(){return kme().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function tMe(){return Ime().includes("jsdom/")}function W9(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function nMe(e){return"nativeEvent"in e}function rMe(e){return e.matches("html,body")}function xy(e){return(e==null?void 0:e.ownerDocument)||document}function o5(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function bb(e){return"composedPath"in e?e.composedPath()[0]:e.target}const iMe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function oMe(e){return wl(e)&&e.matches(iMe)}const vf=Math.min,oa=Math.max,SN=Math.round,vD=Math.floor,g0=e=>({x:e,y:e}),sMe={left:"right",right:"left",bottom:"top",top:"bottom"},aMe={start:"end",end:"start"};function G9(e,t,n){return oa(e,vf(t,n))}function _p(e,t){return typeof e=="function"?e(t):e}function bf(e){return e.split("-")[0]}function _w(e){return e.split("-")[1]}function TU(e){return e==="x"?"y":"x"}function CU(e){return e==="y"?"height":"width"}function Tp(e){return["top","bottom"].includes(bf(e))?"y":"x"}function SU(e){return TU(Tp(e))}function uMe(e,t,n){n===void 0&&(n=!1);const r=_w(e),i=SU(e),o=CU(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=AN(s)),[s,AN(s)]}function lMe(e){const t=AN(e);return[Y9(e),t,Y9(t)]}function Y9(e){return e.replace(/start|end/g,t=>aMe[t])}function cMe(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function fMe(e,t,n,r){const i=_w(e);let o=cMe(bf(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(Y9)))),o}function AN(e){return e.replace(/left|right|bottom|top/g,t=>sMe[t])}function dMe(e){return{top:0,right:0,bottom:0,left:0,...e}}function AU(e){return typeof e!="number"?dMe(e):{top:e,right:e,bottom:e,left:e}}function vx(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function jee(e,t,n){let{reference:r,floating:i}=e;const o=Tp(t),s=SU(t),a=CU(s),u=bf(t),l=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(_w(t)){case"start":h[s]-=d*(n&&l?-1:1);break;case"end":h[s]+=d*(n&&l?-1:1);break}return h}const hMe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=jee(l,r,u),d=r,h={},m=0;for(let p=0;p<a.length;p++){const{name:g,fn:v}=a[p],{x:b,y:w,data:E,reset:_}=await v({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:s,elements:{reference:e,floating:t}});c=b??c,f=w??f,h={...h,[g]:{...h[g],...E}},_&&m<=50&&(m++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(l=_.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:f}=jee(l,d,u)),p=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function DU(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_p(t,e),m=AU(h),g=a[d?f==="floating"?"reference":"floating":f],v=vx(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(g)))==null||n?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},_=vx(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(v.top-_.top+m.top)/E.y,bottom:(_.bottom-v.bottom+m.bottom)/E.y,left:(v.left-_.left+m.left)/E.x,right:(_.right-v.right+m.right)/E.x}}const pMe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=_p(e,t)||{};if(l==null)return{};const f=AU(c),d={x:n,y:r},h=SU(i),m=CU(h),p=await s.getDimensions(l),g=h==="y",v=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",E=o.reference[m]+o.reference[h]-d[h]-o.floating[m],_=d[h]-o.reference[h],T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let S=T?T[w]:0;(!S||!await(s.isElement==null?void 0:s.isElement(T)))&&(S=a.floating[w]||o.floating[m]);const D=E/2-_/2,k=S/2-p[m]/2-1,R=vf(f[v],k),O=vf(f[b],k),M=R,F=S-p[m]-O,L=S/2-p[m]/2+D,H=G9(M,L,F),V=!u.arrow&&_w(i)!=null&&L!==H&&o.reference[m]/2-(L<M?R:O)-p[m]/2<0,Q=V?L<M?L-M:L-F:0;return{[h]:d[h]+Q,data:{[h]:H,centerOffset:L-H-Q,...V&&{alignmentOffset:Q}},reset:V}}}),mMe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...g}=_p(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=bf(i),b=Tp(a),w=bf(a)===a,E=await(u.isRTL==null?void 0:u.isRTL(l.floating)),_=d||(w||!p?[AN(a)]:lMe(a)),T=m!=="none";!d&&T&&_.push(...fMe(a,p,m,E));const S=[a,..._],D=await DU(t,g),k=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&k.push(D[v]),f){const L=uMe(i,s,E);k.push(D[L[0]],D[L[1]])}if(R=[...R,{placement:i,overflows:k}],!k.every(L=>L<=0)){var O,M;const L=(((O=o.flip)==null?void 0:O.index)||0)+1,H=S[L];if(H)return{data:{index:L,overflows:R},reset:{placement:H}};let V=(M=R.filter(Q=>Q.overflows[0]<=0).sort((Q,K)=>Q.overflows[1]-K.overflows[1])[0])==null?void 0:M.placement;if(!V)switch(h){case"bestFit":{var F;const Q=(F=R.filter(K=>{if(T){const Z=Tp(K.placement);return Z===b||Z==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Z=>Z>0).reduce((Z,U)=>Z+U,0)]).sort((K,Z)=>K[1]-Z[1])[0])==null?void 0:F[0];Q&&(V=Q);break}case"initialPlacement":V=a;break}if(i!==V)return{reset:{placement:V}}}return{}}}};function Rme(e){const t=vf(...e.map(o=>o.left)),n=vf(...e.map(o=>o.top)),r=oa(...e.map(o=>o.right)),i=oa(...e.map(o=>o.bottom));return{x:t,y:n,width:r-t,height:i-n}}function gMe(e){const t=e.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<t.length;i++){const o=t[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>vx(Rme(i)))}const yMe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:o,strategy:s}=t,{padding:a=2,x:u,y:l}=_p(e,t),c=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=gMe(c),d=vx(Rme(c)),h=AU(a);function m(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Tp(n)==="y"){const R=f[0],O=f[f.length-1],M=bf(n)==="top",F=R.top,L=O.bottom,H=M?R.left:O.left,V=M?R.right:O.right,Q=V-H,K=L-F;return{top:F,bottom:L,left:H,right:V,width:Q,height:K,x:H,y:F}}const g=bf(n)==="left",v=oa(...f.map(R=>R.right)),b=vf(...f.map(R=>R.left)),w=f.filter(R=>g?R.left===b:R.right===v),E=w[0].top,_=w[w.length-1].bottom,T=b,S=v,D=S-T,k=_-E;return{top:E,bottom:_,left:T,right:S,width:D,height:k,x:T,y:E}}return d}const p=await o.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:s});return i.reference.x!==p.reference.x||i.reference.y!==p.reference.y||i.reference.width!==p.reference.width||i.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function vMe(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=bf(n),a=_w(n),u=Tp(n)==="y",l=["left","top"].includes(s)?-1:1,c=o&&u?-1:1,f=_p(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const bMe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,u=await vMe(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:s}}}}},xMe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...u}=_p(e,t),l={x:n,y:r},c=await DU(t,u),f=Tp(bf(i)),d=TU(f);let h=l[d],m=l[f];if(o){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[g],w=h-c[v];h=G9(b,h,w)}if(s){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=m+c[g],w=m-c[v];m=G9(b,m,w)}const p=a.fn({...t,[d]:h,[f]:m});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[d]:o,[f]:s}}}}}},wMe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=_p(e,t),c={x:n,y:r},f=Tp(i),d=TU(f);let h=c[d],m=c[f];const p=_p(a,t),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(u){const w=d==="y"?"height":"width",E=o.reference[d]-o.floating[w]+g.mainAxis,_=o.reference[d]+o.reference[w]-g.mainAxis;h<E?h=E:h>_&&(h=_)}if(l){var v,b;const w=d==="y"?"width":"height",E=["top","left"].includes(bf(i)),_=o.reference[f]-o.floating[w]+(E&&((v=s.offset)==null?void 0:v[f])||0)+(E?0:g.crossAxis),T=o.reference[f]+o.reference[w]+(E?0:((b=s.offset)==null?void 0:b[f])||0)-(E?g.crossAxis:0);m<_?m=_:m>T&&(m=T)}return{[d]:h,[f]:m}}}},EMe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:u=()=>{},...l}=_p(e,t),c=await DU(t,l),f=bf(i),d=_w(i),h=Tp(i)==="y",{width:m,height:p}=o.floating;let g,v;f==="top"||f==="bottom"?(g=f,v=d===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=f,g=d==="end"?"top":"bottom");const b=p-c.top-c.bottom,w=m-c.left-c.right,E=vf(p-c[g],b),_=vf(m-c[v],w),T=!t.middlewareData.shift;let S=E,D=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=b),T&&!d){const R=oa(c.left,0),O=oa(c.right,0),M=oa(c.top,0),F=oa(c.bottom,0);h?D=m-2*(R!==0||O!==0?R+O:oa(c.left,c.right)):S=p-2*(M!==0||F!==0?M+F:oa(c.top,c.bottom))}await u({...t,availableWidth:D,availableHeight:S});const k=await s.getDimensions(a.floating);return m!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function Nme(e){const t=dc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=wl(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=SN(n)!==o||SN(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function kU(e){return ai(e)?e:e.contextElement}function qb(e){const t=kU(e);if(!wl(t))return g0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Nme(t);let s=(o?SN(n.width):n.width)/r,a=(o?SN(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const _Me=g0(0);function Pme(e){const t=Du(e);return!C4()||!t.visualViewport?_Me:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function TMe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Du(e)?!1:t}function Hy(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=kU(e);let s=g0(1);t&&(r?ai(r)&&(s=qb(r)):s=qb(e));const a=TMe(o,n,r)?Pme(o):g0(0);let u=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const d=Du(o),h=r&&ai(r)?Du(r):r;let m=d,p=m.frameElement;for(;p&&r&&h!==m;){const g=qb(p),v=p.getBoundingClientRect(),b=dc(p),w=v.left+(p.clientLeft+parseFloat(b.paddingLeft))*g.x,E=v.top+(p.clientTop+parseFloat(b.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=w,l+=E,m=Du(p),p=m.frameElement}}return vx({width:c,height:f,x:u,y:l})}const CMe=[":popover-open",":modal"];function IU(e){return CMe.some(t=>{try{return e.matches(t)}catch{return!1}})}function SMe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=Up(r),a=t?IU(t.floating):!1;if(r===s||a&&o)return n;let u={scrollLeft:0,scrollTop:0},l=g0(1);const c=g0(0),f=wl(r);if((f||!f&&!o)&&((Ew(r)!=="body"||FC(s))&&(u=S4(r)),wl(r))){const d=Hy(r);l=qb(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function AMe(e){return Array.from(e.getClientRects())}function Ome(e){return Hy(Up(e)).left+S4(e).scrollLeft}function DMe(e){const t=Up(e),n=S4(e),r=e.ownerDocument.body,i=oa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=oa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Ome(e);const a=-n.scrollTop;return dc(r).direction==="rtl"&&(s+=oa(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function kMe(e,t){const n=Du(e),r=Up(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,u=0;if(i){o=i.width,s=i.height;const l=C4();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:o,height:s,x:a,y:u}}function IMe(e,t){const n=Hy(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=wl(e)?qb(e):g0(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,u=i*o.x,l=r*o.y;return{width:s,height:a,x:u,y:l}}function zee(e,t,n){let r;if(t==="viewport")r=kMe(e,n);else if(t==="document")r=DMe(Up(e));else if(ai(t))r=IMe(t,n);else{const i=Pme(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return vx(r)}function Fme(e,t){const n=Ep(e);return n===t||!ai(n)||m0(n)?!1:dc(n).position==="fixed"||Fme(n,t)}function RMe(e,t){const n=t.get(e);if(n)return n;let r=sp(e,[],!1).filter(a=>ai(a)&&Ew(a)!=="body"),i=null;const o=dc(e).position==="fixed";let s=o?Ep(e):e;for(;ai(s)&&!m0(s);){const a=dc(s),u=_U(s);!u&&a.position==="fixed"&&(i=null),(o?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||FC(s)&&!u&&Fme(e,s))?r=r.filter(c=>c!==s):i=a,s=Ep(s)}return t.set(e,r),r}function NMe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?IU(t)?[]:RMe(t,this._c):[].concat(n),r],a=s[0],u=s.reduce((l,c)=>{const f=zee(t,c,i);return l.top=oa(f.top,l.top),l.right=vf(f.right,l.right),l.bottom=vf(f.bottom,l.bottom),l.left=oa(f.left,l.left),l},zee(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function PMe(e){const{width:t,height:n}=Nme(e);return{width:t,height:n}}function OMe(e,t,n){const r=wl(t),i=Up(t),o=n==="fixed",s=Hy(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const u=g0(0);if(r||!r&&!o)if((Ew(t)!=="body"||FC(i))&&(a=S4(t)),r){const f=Hy(t,!0,o,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Ome(i));const l=s.left+a.scrollLeft-u.x,c=s.top+a.scrollTop-u.y;return{x:l,y:c,width:s.width,height:s.height}}function s5(e){return dc(e).position==="static"}function Uee(e,t){return!wl(e)||dc(e).position==="fixed"?null:t?t(e):e.offsetParent}function Mme(e,t){const n=Du(e);if(IU(e))return n;if(!wl(e)){let i=Ep(e);for(;i&&!m0(i);){if(ai(i)&&!s5(i))return i;i=Ep(i)}return n}let r=Uee(e,t);for(;r&&YFe(r)&&s5(r);)r=Uee(r,t);return r&&m0(r)&&s5(r)&&!_U(r)?n:r||XFe(e)||n}const FMe=async function(e){const t=this.getOffsetParent||Mme,n=this.getDimensions,r=await n(e.floating);return{reference:OMe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function MMe(e){return dc(e).direction==="rtl"}const $Me={convertOffsetParentRelativeRectToViewportRelativeRect:SMe,getDocumentElement:Up,getClippingRect:NMe,getOffsetParent:Mme,getElementRects:FMe,getClientRects:AMe,getDimensions:PMe,getScale:qb,isElement:ai,isRTL:MMe};function LMe(e,t){let n=null,r;const i=Up(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),o();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=vD(c),m=vD(i.clientWidth-(l+f)),p=vD(i.clientHeight-(c+d)),g=vD(l),b={rootMargin:-h+"px "+-m+"px "+-p+"px "+-g+"px",threshold:oa(0,vf(1,u))||1};let w=!0;function E(_){const T=_[0].intersectionRatio;if(T!==u){if(!w)return s();T?s(!1,T):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return s(!0),o}function BMe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=kU(e),c=i||o?[...l?sp(l):[],...sp(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const f=l&&a?LMe(l,n):null;let d=-1,h=null;s&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let m,p=u?Hy(e):null;u&&g();function g(){const v=Hy(e);p&&(v.x!==p.x||v.y!==p.y||v.width!==p.width||v.height!==p.height)&&n(),p=v,m=requestAnimationFrame(g)}return n(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",n),o&&b.removeEventListener("resize",n)}),f==null||f(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(m)}}const jMe=bMe,zMe=xMe,UMe=mMe,VMe=EMe,Vee=pMe,HMe=yMe,qMe=wMe,WMe=(e,t,n)=>{const r=new Map,i={platform:$Me,...n},o={...i.platform,_c:r};return hMe(e,t,{...i,platform:o})};var NI=typeof document<"u"?P.useLayoutEffect:P.useEffect;function DN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!DN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!DN(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function $me(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Hee(e,t){const n=$me(e);return Math.round(t*n)/n}function a5(e){const t=P.useRef(e);return NI(()=>{t.current=e}),t}function GMe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=P.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=P.useState(r);DN(d,r)||h(r);const[m,p]=P.useState(null),[g,v]=P.useState(null),b=P.useCallback(K=>{K!==T.current&&(T.current=K,p(K))},[]),w=P.useCallback(K=>{K!==S.current&&(S.current=K,v(K))},[]),E=o||m,_=s||g,T=P.useRef(null),S=P.useRef(null),D=P.useRef(c),k=u!=null,R=a5(u),O=a5(i),M=a5(l),F=P.useCallback(()=>{if(!T.current||!S.current)return;const K={placement:t,strategy:n,middleware:d};O.current&&(K.platform=O.current),WMe(T.current,S.current,K).then(Z=>{const U={...Z,isPositioned:M.current!==!1};L.current&&!DN(D.current,U)&&(D.current=U,x4.flushSync(()=>{f(U)}))})},[d,t,n,O,M]);NI(()=>{l===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(K=>({...K,isPositioned:!1})))},[l]);const L=P.useRef(!1);NI(()=>(L.current=!0,()=>{L.current=!1}),[]),NI(()=>{if(E&&(T.current=E),_&&(S.current=_),E&&_){if(R.current)return R.current(E,_,F);F()}},[E,_,F,R,k]);const H=P.useMemo(()=>({reference:T,floating:S,setReference:b,setFloating:w}),[b,w]),V=P.useMemo(()=>({reference:E,floating:_}),[E,_]),Q=P.useMemo(()=>{const K={position:n,left:0,top:0};if(!V.floating)return K;const Z=Hee(V.floating,c.x),U=Hee(V.floating,c.y);return a?{...K,transform:"translate("+Z+"px, "+U+"px)",...$me(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:U}},[n,a,V.floating,c.x,c.y]);return P.useMemo(()=>({...c,update:F,refs:H,elements:V,floatingStyles:Q}),[c,F,H,V,Q])}const YMe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Vee({element:r.current,padding:i}).fn(n):{}:r?Vee({element:r,padding:i}).fn(n):{}}}},Lme=(e,t)=>({...jMe(e),options:[e,t]}),RU=(e,t)=>({...zMe(e),options:[e,t]}),qee=(e,t)=>({...qMe(e),options:[e,t]}),kN=(e,t)=>({...UMe(e),options:[e,t]}),KMe=(e,t)=>({...VMe(e),options:[e,t]}),$2=(e,t)=>({...HMe(e),options:[e,t]}),Bme=(e,t)=>({...YMe(e),options:[e,t]}),jme={...J4e},XMe=jme.useInsertionEffect,QMe=XMe||(e=>e());function Vh(e){const t=P.useRef(()=>{});return QMe(()=>{t.current=e}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Ed=typeof document<"u"?P.useLayoutEffect:P.useEffect;let Wee=!1,JMe=0;const Gee=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+JMe++;function ZMe(){const[e,t]=P.useState(()=>Wee?Gee():void 0);return Ed(()=>{e==null&&t(Gee())},[]),P.useEffect(()=>{Wee=!0},[]),e}const e$e=jme.useId,zme=e$e||ZMe;function t$e(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const n$e=P.createContext(null),r$e=P.createContext(null),NU=()=>{var e;return((e=P.useContext(n$e))==null?void 0:e.id)||null},PU=()=>P.useContext(r$e);function OU(e){return"data-floating-ui-"+e}function u5(e){const t=P.useRef(e);return Ed(()=>{t.current=e}),t}const Yee=OU("safe-polygon");function PI(e,t,n){return n&&!W9(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function i$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:s}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=PU(),m=NU(),p=u5(l),g=u5(u),v=u5(n),b=P.useRef(),w=P.useRef(-1),E=P.useRef(),_=P.useRef(-1),T=P.useRef(!0),S=P.useRef(!1),D=P.useRef(()=>{}),k=P.useRef(!1),R=P.useCallback(()=>{var Q;const K=(Q=i.current.openEvent)==null?void 0:Q.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[i]);P.useEffect(()=>{if(!a)return;function Q(K){let{open:Z}=K;Z||(clearTimeout(w.current),clearTimeout(_.current),T.current=!0,k.current=!1)}return o.on("openchange",Q),()=>{o.off("openchange",Q)}},[a,o]),P.useEffect(()=>{if(!a||!p.current||!n)return;function Q(Z){R()&&r(!1,Z,"hover")}const K=xy(s.floating).documentElement;return K.addEventListener("mouseleave",Q),()=>{K.removeEventListener("mouseleave",Q)}},[s.floating,n,r,a,p,R]);const O=P.useCallback(function(Q,K,Z){K===void 0&&(K=!0),Z===void 0&&(Z="hover");const U=PI(g.current,"close",b.current);U&&!E.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,Q,Z),U)):K&&(clearTimeout(w.current),r(!1,Q,Z))},[g,r]),M=Vh(()=>{D.current(),E.current=void 0}),F=Vh(()=>{if(S.current){const Q=xy(s.floating).body;Q.style.pointerEvents="",Q.removeAttribute(Yee),S.current=!1}}),L=Vh(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);P.useEffect(()=>{if(!a)return;function Q(B){if(clearTimeout(w.current),T.current=!1,c&&!W9(b.current)||f>0&&!PI(g.current,"open"))return;const q=PI(g.current,"open",b.current);q?w.current=window.setTimeout(()=>{v.current||r(!0,B,"hover")},q):n||r(!0,B,"hover")}function K(B){if(L())return;D.current();const q=xy(s.floating);if(clearTimeout(_.current),k.current=!1,p.current&&i.current.floatingContext){n||clearTimeout(w.current),E.current=p.current({...i.current.floatingContext,tree:h,x:B.clientX,y:B.clientY,onClose(){F(),M(),L()||O(B,!0,"safe-polygon")}});const G=E.current;q.addEventListener("mousemove",G),D.current=()=>{q.removeEventListener("mousemove",G)};return}(b.current==="touch"?!xT(s.floating,B.relatedTarget):!0)&&O(B)}function Z(B){L()||i.current.floatingContext&&(p.current==null||p.current({...i.current.floatingContext,tree:h,x:B.clientX,y:B.clientY,onClose(){F(),M(),L()||O(B)}})(B))}if(ai(s.domReference)){var U;const B=s.domReference;return n&&B.addEventListener("mouseleave",Z),(U=s.floating)==null||U.addEventListener("mouseleave",Z),d&&B.addEventListener("mousemove",Q,{once:!0}),B.addEventListener("mouseenter",Q),B.addEventListener("mouseleave",K),()=>{var q;n&&B.removeEventListener("mouseleave",Z),(q=s.floating)==null||q.removeEventListener("mouseleave",Z),d&&B.removeEventListener("mousemove",Q),B.removeEventListener("mouseenter",Q),B.removeEventListener("mouseleave",K)}}},[s,a,e,c,f,d,O,M,F,r,n,v,h,g,p,i,L]),Ed(()=>{var Q;if(a&&n&&(Q=p.current)!=null&&Q.__options.blockPointerEvents&&R()){S.current=!0;const Z=s.floating;if(ai(s.domReference)&&Z){var K;const U=xy(s.floating).body;U.setAttribute(Yee,"");const B=s.domReference,q=h==null||(K=h.nodesRef.current.find(z=>z.id===m))==null||(K=K.context)==null?void 0:K.elements.floating;return q&&(q.style.pointerEvents=""),U.style.pointerEvents="none",B.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{U.style.pointerEvents="",B.style.pointerEvents="",Z.style.pointerEvents=""}}}},[a,n,m,s,h,p,R]),Ed(()=>{n||(b.current=void 0,k.current=!1,M(),F())},[n,M,F]),P.useEffect(()=>()=>{M(),clearTimeout(w.current),clearTimeout(_.current),F()},[a,s.domReference,M,F]);const H=P.useMemo(()=>{function Q(K){b.current=K.pointerType}return{onPointerDown:Q,onPointerEnter:Q,onMouseMove(K){const{nativeEvent:Z}=K;function U(){!T.current&&!v.current&&r(!0,Z,"hover")}c&&!W9(b.current)||n||f===0||k.current&&K.movementX**2+K.movementY**2<2||(clearTimeout(_.current),b.current==="touch"?U():(k.current=!0,_.current=window.setTimeout(U,f)))}}},[c,r,n,v,f]),V=P.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(Q){L()||O(Q.nativeEvent,!1)}}),[O,L]);return P.useMemo(()=>a?{reference:H,floating:V}:{},[a,H,V])}const K9=()=>{},Ume=P.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:K9,setState:K9,isInstantPhase:!1}),o$e=()=>P.useContext(Ume);function s$e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,o]=P.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=P.useRef(null),a=P.useCallback(u=>{o({currentId:u})},[]);return Ed(()=>{i.currentId?s.current===null?s.current=i.currentId:i.isInstantPhase||o({isInstantPhase:!0}):(i.isInstantPhase&&o({isInstantPhase:!1}),s.current=null)},[i.currentId,i.isInstantPhase]),P.createElement(Ume.Provider,{value:P.useMemo(()=>({...i,setState:o,setCurrentId:a}),[i,a])},t)}function a$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:o,enabled:s=!0}=t,a=o??i,u=o$e(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return Ed(()=>{s&&l&&(d({delay:{open:1,close:PI(f,"close")}}),l!==a&&r(!1))},[s,a,r,d,l,f]),Ed(()=>{function m(){r(!1),d({delay:f,currentId:null})}if(s&&l&&!n&&l===a){if(h){const p=window.setTimeout(m,h);return()=>{clearTimeout(p)}}m()}},[s,n,d,l,a,r,f,h]),Ed(()=>{s&&(c===K9||!n||c(a))},[s,n,c,a]),u}function l5(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var a;return i.parentId===s.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const u$e="data-floating-ui-focusable",l$e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},c$e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Kee=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function f$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:m}=t,p=PU(),g=Vh(typeof u=="function"?u:()=>!1),v=typeof u=="function"?g:u,b=P.useRef(!1),w=P.useRef(!1),{escapeKey:E,outsidePress:_}=Kee(h),{escapeKey:T,outsidePress:S}=Kee(m),D=P.useRef(!1),k=Vh(H=>{var V;if(!n||!s||!a||H.key!=="Escape"||D.current)return;const Q=(V=o.current.floatingContext)==null?void 0:V.nodeId,K=p?l5(p.nodesRef.current,Q):[];if(!E&&(H.stopPropagation(),K.length>0)){let Z=!0;if(K.forEach(U=>{var B;if((B=U.context)!=null&&B.open&&!U.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}r(!1,nMe(H)?H.nativeEvent:H,"escape-key")}),R=Vh(H=>{var V;const Q=()=>{var K;k(H),(K=bb(H))==null||K.removeEventListener("keydown",Q)};(V=bb(H))==null||V.addEventListener("keydown",Q)}),O=Vh(H=>{var V;const Q=b.current;b.current=!1;const K=w.current;if(w.current=!1,l==="click"&&K||Q||typeof v=="function"&&!v(H))return;const Z=bb(H),U="["+OU("inert")+"]",B=xy(i.floating).querySelectorAll(U);let q=ai(Z)?Z:null;for(;q&&!m0(q);){const ne=Ep(q);if(m0(ne)||!ai(ne))break;q=ne}if(B.length&&ai(Z)&&!rMe(Z)&&!xT(Z,i.floating)&&Array.from(B).every(ne=>!xT(q,ne)))return;if(wl(Z)&&L){const ne=Z.clientWidth>0&&Z.scrollWidth>Z.clientWidth,ge=Z.clientHeight>0&&Z.scrollHeight>Z.clientHeight;let me=ge&&H.offsetX>Z.clientWidth;if(ge&&dc(Z).direction==="rtl"&&(me=H.offsetX<=Z.offsetWidth-Z.clientWidth),me||ne&&H.offsetY>Z.clientHeight)return}const z=(V=o.current.floatingContext)==null?void 0:V.nodeId,G=p&&l5(p.nodesRef.current,z).some(ne=>{var ge;return o5(H,(ge=ne.context)==null?void 0:ge.elements.floating)});if(o5(H,i.floating)||o5(H,i.domReference)||G)return;const X=p?l5(p.nodesRef.current,z):[];if(X.length>0){let ne=!0;if(X.forEach(ge=>{var me;if((me=ge.context)!=null&&me.open&&!ge.context.dataRef.current.__outsidePressBubbles){ne=!1;return}}),!ne)return}r(!1,H,"outside-press")}),M=Vh(H=>{var V;const Q=()=>{var K;O(H),(K=bb(H))==null||K.removeEventListener(l,Q)};(V=bb(H))==null||V.addEventListener(l,Q)});P.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=E,o.current.__outsidePressBubbles=_;let H=-1;function V(B){r(!1,B,"ancestor-scroll")}function Q(){window.clearTimeout(H),D.current=!0}function K(){H=window.setTimeout(()=>{D.current=!1},C4()?5:0)}const Z=xy(i.floating);a&&(Z.addEventListener("keydown",T?R:k,T),Z.addEventListener("compositionstart",Q),Z.addEventListener("compositionend",K)),v&&Z.addEventListener(l,S?M:O,S);let U=[];return d&&(ai(i.domReference)&&(U=sp(i.domReference)),ai(i.floating)&&(U=U.concat(sp(i.floating))),!ai(i.reference)&&i.reference&&i.reference.contextElement&&(U=U.concat(sp(i.reference.contextElement)))),U=U.filter(B=>{var q;return B!==((q=Z.defaultView)==null?void 0:q.visualViewport)}),U.forEach(B=>{B.addEventListener("scroll",V,{passive:!0})}),()=>{a&&(Z.removeEventListener("keydown",T?R:k,T),Z.removeEventListener("compositionstart",Q),Z.removeEventListener("compositionend",K)),v&&Z.removeEventListener(l,S?M:O,S),U.forEach(B=>{B.removeEventListener("scroll",V)}),window.clearTimeout(H)}},[o,i,a,v,l,n,r,d,s,E,_,k,T,R,O,S,M]),P.useEffect(()=>{b.current=!1},[v,l]);const F=P.useMemo(()=>({onKeyDown:k,[l$e[f]]:H=>{c&&r(!1,H.nativeEvent,"reference-press")}}),[k,r,c,f]),L=P.useMemo(()=>({onKeyDown:k,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[c$e[l]]:()=>{b.current=!0}}),[k,l]);return P.useMemo(()=>s?{reference:F,floating:L}:{},[s,F,L])}function d$e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=zme(),o=P.useRef({}),[s]=P.useState(()=>t$e()),a=NU()!=null,[u,l]=P.useState(r.reference),c=Vh((h,m,p)=>{o.current.openEvent=h?m:void 0,s.emit("openchange",{open:h,event:m,reason:p,nested:a}),n==null||n(h,m,p)}),f=P.useMemo(()=>({setPositionReference:l}),[]),d=P.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return P.useMemo(()=>({dataRef:o,open:t,onOpenChange:c,elements:d,events:s,floatingId:i,refs:f}),[t,c,d,s,i,f])}function FU(e){e===void 0&&(e={});const{nodeId:t}=e,n=d$e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=P.useState(null),[a,u]=P.useState(null),c=(i==null?void 0:i.domReference)||o,f=P.useRef(null),d=PU();Ed(()=>{c&&(f.current=c)},[c]);const h=GMe({...e,elements:{...i,...a&&{reference:a}}}),m=P.useCallback(w=>{const E=ai(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),p=P.useCallback(w=>{(ai(w)||w===null)&&(f.current=w,s(w)),(ai(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!ai(w))&&h.refs.setReference(w)},[h.refs]),g=P.useMemo(()=>({...h.refs,setReference:p,setPositionReference:m,domReference:f}),[h.refs,p,m]),v=P.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=P.useMemo(()=>({...h,...r,refs:g,elements:v,nodeId:t}),[h,g,v,t,r]);return Ed(()=>{r.dataRef.current.floatingContext=b;const w=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);w&&(w.context=b)}),P.useMemo(()=>({...h,context:b,refs:g,elements:v}),[h,g,v,b])}function h$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:o,elements:s}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=P.useRef(!1),c=P.useRef(),f=P.useRef(!0);P.useEffect(()=>{if(!a)return;const h=Du(s.domReference);function m(){!n&&wl(s.domReference)&&s.domReference===Lee(xy(s.domReference))&&(l.current=!0)}function p(){f.current=!0}return h.addEventListener("blur",m),h.addEventListener("keydown",p,!0),()=>{h.removeEventListener("blur",m),h.removeEventListener("keydown",p,!0)}},[s.domReference,n,a]),P.useEffect(()=>{if(!a)return;function h(m){let{reason:p}=m;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),P.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=P.useMemo(()=>({onPointerDown(h){JFe(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const m=bb(h.nativeEvent);if(u&&ai(m))try{if(ZFe()&&eMe())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!f.current&&!oMe(m))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const m=h.relatedTarget,p=h.nativeEvent,g=ai(m)&&m.hasAttribute(OU("focus-guard"))&&m.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var v;const b=Lee(s.domReference?s.domReference.ownerDocument:document);!m&&b===s.domReference||xT((v=o.current.floatingContext)==null?void 0:v.refs.floating.current,b)||xT(s.domReference,b)||g||r(!1,p,"focus")})}}),[o,s.domReference,r,u]);return P.useMemo(()=>a?{reference:d}:{},[a,d])}const Xee="active",Qee="selected";function c5(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[Xee]:s,[Qee]:a,...u}=e;o=u}return{...n==="floating"&&{tabIndex:-1,[u$e]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Xee,Qee].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),s[l]=function(){for(var d,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(d=r.get(l))==null?void 0:d.map(g=>g(...m)).find(g=>g!==void 0)}}}else s[l]=c}),s),{})}}function p$e(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=P.useCallback(a=>c5(a,e,"reference"),t),o=P.useCallback(a=>c5(a,e,"floating"),n),s=P.useCallback(a=>c5(a,e,"item"),r);return P.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const m$e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function g$e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,a=(n=m$e.get(s))!=null?n:s,u=zme(),c=NU()!=null,f=P.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,s]),d=P.useMemo(()=>{const m={id:i,...a&&{role:a}};return a==="tooltip"||s==="label"?m:{...m,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,s]),h=P.useCallback(m=>{let{active:p,selected:g}=m;const v={role:"option",...p&&{id:i+"-option"}};switch(s){case"select":return{...v,"aria-selected":p&&g};case"combobox":return{...v,...p&&{"aria-selected":!0}}}return{}},[i,s]);return P.useMemo(()=>o?{reference:f,floating:d,item:h}:{},[o,f,d,h])}function Vme(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Jee(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Zee(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const y$e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function v$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:o,arrowY:s,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[y$e[u]]:r},f=-t/2;return u==="left"?{...c,...Jee(l,s,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...Jee(l,s,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...Zee(l,o,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...Zee(l,o,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const MU=P.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:o,arrowX:s,arrowY:a,style:u,...l},c)=>{const{dir:f}=K0();return o?C.jsx("div",{...l,ref:c,style:{...u,...v$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:s,arrowY:a})}}):null});MU.displayName="@mantine/core/FloatingArrow";var Hme={root:"m_9814e45f"};const b$e={zIndex:zu("modal")},x$e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:o,zIndex:s})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&rd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${je(i)})`:void 0,"--overlay-radius":o===void 0?void 0:Mr(o),"--overlay-z-index":s==null?void 0:s.toString()}}),bx=wo((e,t)=>{const n=qe("Overlay",b$e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:m,blur:p,color:g,backgroundOpacity:v,mod:b,...w}=n,E=Nt({name:"Overlay",props:n,classes:Hme,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:x$e});return C.jsx(Re,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],...w,children:f})});bx.classes=Hme;bx.displayName="@mantine/core/Overlay";function w$e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const E$e={},qme=P.forwardRef((e,t)=>{const{children:n,target:r,...i}=qe("Portal",E$e,e),[o,s]=P.useState(!1),a=P.useRef(null);return C1(()=>(s(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:w$e(i),_N(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!o||!a.current?null:x4.createPortal(C.jsx(C.Fragment,{children:n}),a.current)});qme.displayName="@mantine/core/Portal";function X0({withinPortal:e=!0,children:t,...n}){return e?C.jsx(qme,{...n,children:t}):C.jsx(C.Fragment,{children:t})}X0.displayName="@mantine/core/OptionalPortal";const r_=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),bD={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...r_("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...r_("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...r_("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...r_("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...r_("top"),common:{transformOrigin:"top right"}}},ete={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function _$e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in bD?{transitionProperty:bD[e].transitionProperty,...i,...bD[e].common,...bD[e][ete[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[ete[t]]}}function T$e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:o,onEntered:s,onExited:a,enterDelay:u,exitDelay:l}){const c=xo(),f=y4(),d=c.respectReducedMotion?f:!1,[h,m]=P.useState(d?0:e),[p,g]=P.useState(r?"entered":"exited"),v=P.useRef(-1),b=P.useRef(-1),w=P.useRef(-1),E=T=>{const S=T?i:o,D=T?s:a;window.clearTimeout(v.current);const k=d?0:T?e:t;m(k),k===0?(typeof S=="function"&&S(),typeof D=="function"&&D(),g(T?"entered":"exited")):w.current=requestAnimationFrame(()=>{W_.flushSync(()=>{g(T?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof S=="function"&&S(),g(T?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof D=="function"&&D(),g(T?"entered":"exited")},k)})})},_=T=>{if(window.clearTimeout(b.current),typeof(T?u:l)!="number"){E(T);return}b.current=window.setTimeout(()=>{E(T)},T?u:l)};return Md(()=>{_(r)},[r]),P.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:h,transitionStatus:p,transitionTimingFunction:n||"ease"}}function eh({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:o,timingFunction:s="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:m,transitionTimingFunction:p}=T$e({mounted:i,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?C.jsx(C.Fragment,{children:o({})}):e?o({display:"none"}):null:m==="exited"?e?o({display:"none"}):null:C.jsx(C.Fragment,{children:o(_$e({transition:t,duration:h,state:m,timingFunction:p}))})}eh.displayName="@mantine/core/Transition";const[C$e,Wme]=Us("Popover component was not found in the tree");function A4({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=s6e(t),o=zo(i,r);return W0(e)?P.cloneElement(e,{[n]:o}):e}function Gme(e){return C.jsx(EU,{tabIndex:-1,"data-autofocus":!0,...e})}A4.displayName="@mantine/core/FocusTrap";Gme.displayName="@mantine/core/FocusTrapInitialFocus";A4.InitialFocus=Gme;var Yme={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const S$e={},$U=dt((e,t)=>{var g,v,b,w;const n=qe("PopoverDropdown",S$e,e),{className:r,style:i,vars:o,children:s,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Wme(),h=Kpe({opened:d.opened,shouldReturnFocus:d.returnFocus}),m=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},p=zo(t,d.floating);return d.disabled?null:C.jsx(X0,{...d.portalProps,withinPortal:d.withinPortal,children:C.jsx(eh,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((v=d.transitionProps)==null?void 0:v.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(w=d.transitionProps)==null?void 0:w.duration,children:E=>C.jsx(A4,{active:d.trapFocus&&d.opened,innerRef:p,children:C.jsxs(Re,{...m,...f,variant:u,onKeyDownCapture:GOe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:je(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[s,C.jsx(MU,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});$U.classes=Yme;$U.displayName="@mantine/core/PopoverDropdown";const A$e={refProp:"ref",popupType:"dialog"},Kme=dt((e,t)=>{const{children:n,refProp:r,popupType:i,...o}=qe("PopoverTarget",A$e,e);if(!W0(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=o,a=Wme(),u=zo(a.reference,v4(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return P.cloneElement(n,{...s,...l,...a.targetProps,className:eo(a.targetProps.className,s.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Kme.displayName="@mantine/core/PopoverTarget";function Xme({opened:e,floating:t,position:n,positionDependencies:r}){const[i,o]=P.useState(0);P.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return BMe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Md(()=>{t.update()},r),Md(()=>{o(s=>s+1)},[e])}function D$e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function k$e(e,t){const n=D$e(e.middlewares),r=[Lme(e.offset)];return n.shift&&r.push(RU(typeof n.shift=="boolean"?{limiter:qee(),padding:5}:{limiter:qee(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?kN():kN(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?$2():$2(n.inline)),r.push(Bme({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(KMe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:o,availableHeight:s,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:o,availableHeight:s,...a}):Object.assign(l,{maxWidth:`${o}px`,maxHeight:`${s}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function I$e(e){const[t,n]=as({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=P.useRef(t),i=()=>{t&&n(!1)},o=()=>n(!t),s=FU({strategy:e.strategy,placement:e.position,middleware:k$e(e,()=>s)});return Xme({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Md(()=>{var a;(a=e.onPositionChange)==null||a.call(e,s.placement)},[s.placement]),Md(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:o}}const R$e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:zu("popover"),__staticSelector:"Popover",width:"max-content"},N$e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Mr(t),"--popover-shadow":cU(n)}});function $s(e){var le,be,ae,pe,Ee,$e;const t=qe("Popover",R$e,e),{children:n,position:r,offset:i,onPositionChange:o,positionDependencies:s,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:m,arrowOffset:p,arrowRadius:g,arrowPosition:v,unstyled:b,classNames:w,styles:E,closeOnClickOutside:_,withinPortal:T,portalProps:S,closeOnEscape:D,clickOutsideEvents:k,trapFocus:R,onClose:O,onOpen:M,onChange:F,zIndex:L,radius:H,shadow:V,id:Q,defaultOpened:K,__staticSelector:Z,withRoles:U,disabled:B,returnFocus:q,variant:z,keepMounted:G,vars:X,floatingStrategy:ne,withOverlay:ge,overlayProps:me,...ye}=t,we=Nt({name:Z,props:t,classes:Yme,classNames:w,styles:E,unstyled:b,rootSelector:"dropdown",vars:X,varsResolver:N$e}),{resolvedStyles:fe}=A1({classNames:w,styles:E,props:t}),se=P.useRef(null),[Ce,Ae]=P.useState(null),[Ue,Xe]=P.useState(null),{dir:Le}=K0(),Ge=tu(Q),et=I$e({middlewares:d,width:f,position:Vme(Le,r),offset:typeof i=="number"?i+(h?m/2:0):i,arrowRef:se,arrowOffset:p,onPositionChange:o,positionDependencies:s,opened:a,defaultOpened:K,onChange:F,onOpen:M,onClose:O,strategy:ne});QOe(()=>_&&et.onClose(),k,[Ce,Ue]);const Et=P.useCallback(Ne=>{Ae(Ne),et.floating.refs.setReference(Ne)},[et.floating.refs.setReference]),ht=P.useCallback(Ne=>{Xe(Ne),et.floating.refs.setFloating(Ne)},[et.floating.refs.setFloating]),xt=P.useCallback(()=>{var Ne;(Ne=u==null?void 0:u.onExited)==null||Ne.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),te=P.useCallback(()=>{var Ne;(Ne=u==null?void 0:u.onEntered)==null||Ne.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return C.jsxs(C$e,{value:{returnFocus:q,disabled:B,controlled:et.controlled,reference:Et,floating:ht,x:et.floating.x,y:et.floating.y,arrowX:(ae=(be=(le=et.floating)==null?void 0:le.middlewareData)==null?void 0:be.arrow)==null?void 0:ae.x,arrowY:($e=(Ee=(pe=et.floating)==null?void 0:pe.middlewareData)==null?void 0:Ee.arrow)==null?void 0:$e.y,opened:et.opened,arrowRef:se,transitionProps:{...u,onExited:xt,onEntered:te},width:f,withArrow:h,arrowSize:m,arrowOffset:p,arrowRadius:g,arrowPosition:v,placement:et.floating.placement,trapFocus:R,withinPortal:T,portalProps:S,zIndex:L,radius:H,shadow:V,closeOnEscape:D,onClose:et.onClose,onToggle:et.onToggle,getTargetId:()=>`${Ge}-target`,getDropdownId:()=>`${Ge}-dropdown`,withRoles:U,targetProps:ye,__staticSelector:Z,classNames:w,styles:E,unstyled:b,variant:z,keepMounted:G,getStyles:we,resolvedStyles:fe,floatingStrategy:ne},children:[n,ge&&C.jsx(eh,{transition:"fade",mounted:et.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Ne=>C.jsx(X0,{withinPortal:T,children:C.jsx(bx,{...me,...we("overlay",{className:me==null?void 0:me.className,style:[Ne,me==null?void 0:me.style]})})})})]})}$s.Target=Kme;$s.Dropdown=$U;$s.displayName="@mantine/core/Popover";$s.extend=e=>e;var nf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Qme=P.forwardRef(({className:e,...t},n)=>C.jsxs(Re,{component:"span",className:eo(nf.barsLoader,e),...t,ref:n,children:[C.jsx("span",{className:nf.bar}),C.jsx("span",{className:nf.bar}),C.jsx("span",{className:nf.bar})]}));Qme.displayName="@mantine/core/Bars";const Jme=P.forwardRef(({className:e,...t},n)=>C.jsxs(Re,{component:"span",className:eo(nf.dotsLoader,e),...t,ref:n,children:[C.jsx("span",{className:nf.dot}),C.jsx("span",{className:nf.dot}),C.jsx("span",{className:nf.dot})]}));Jme.displayName="@mantine/core/Dots";const Zme=P.forwardRef(({className:e,...t},n)=>C.jsx(Re,{component:"span",className:eo(nf.ovalLoader,e),...t,ref:n}));Zme.displayName="@mantine/core/Oval";const e0e={bars:Qme,oval:Zme,dots:Jme},P$e={loaders:e0e,type:"oval"},O$e=(e,{size:t,color:n})=>({root:{"--loader-size":An(t,"loader-size"),"--loader-color":n?Yr(n,e):void 0}}),th=dt((e,t)=>{const n=qe("Loader",P$e,e),{size:r,color:i,type:o,vars:s,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:m,...p}=n,g=Nt({name:"Loader",props:n,classes:nf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:s,varsResolver:O$e});return m?C.jsx(Re,{...g("root"),ref:t,...p,children:m}):C.jsx(Re,{...g("root"),ref:t,component:d[o],variant:h,size:r,...p})});th.defaultLoaders=e0e;th.classes=nf;th.displayName="@mantine/core/Loader";var Tw={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const tte={orientation:"horizontal"},F$e=(e,{borderWidth:t})=>({group:{"--ai-border-width":je(t)}}),LU=dt((e,t)=>{const n=qe("ActionIconGroup",tte,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=qe("ActionIconGroup",tte,e),m=Nt({name:"ActionIconGroup",props:n,classes:Tw,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:l,varsResolver:F$e,rootSelector:"group"});return C.jsx(Re,{...m("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});LU.classes=Tw;LU.displayName="@mantine/core/ActionIconGroup";const nte={},M$e=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:o,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":An(s,"section-height"),"--section-padding-x":An(s,"section-padding-x"),"--section-fz":Ms(s),"--section-radius":t===void 0?void 0:Mr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},BU=dt((e,t)=>{const n=qe("ActionIconGroupSection",nte,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=qe("ActionIconGroupSection",nte,e),m=Nt({name:"ActionIconGroupSection",props:n,classes:Tw,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,varsResolver:M$e,rootSelector:"groupSection"});return C.jsx(Re,{...m("groupSection"),ref:t,variant:l,...h})});BU.classes=Tw;BU.displayName="@mantine/core/ActionIconGroupSection";const $$e={},L$e=(e,{size:t,radius:n,variant:r,gradient:i,color:o,autoContrast:s})=>{const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":An(t,"ai-size"),"--ai-radius":n===void 0?void 0:Mr(n),"--ai-bg":o||r?a.background:void 0,"--ai-hover":o||r?a.hover:void 0,"--ai-hover-color":o||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":o||r?a.border:void 0}}},Q0=wo((e,t)=>{const n=qe("ActionIcon",$$e,e),{className:r,unstyled:i,variant:o,classNames:s,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:m,gradient:p,vars:g,children:v,disabled:b,"data-disabled":w,autoContrast:E,mod:_,...T}=n,S=Nt({name:["ActionIcon",m],props:n,className:r,style:u,classes:Tw,classNames:s,styles:a,unstyled:i,vars:g,varsResolver:L$e});return C.jsxs(xl,{...S("root",{active:!b&&!l&&!w}),...T,unstyled:i,variant:o,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},_],children:[C.jsx(eh,{mounted:!!l,transition:"slide-down",duration:150,children:D=>C.jsx(Re,{component:"span",...S("loader",{style:D}),"aria-hidden":!0,children:C.jsx(th,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),C.jsx(Re,{component:"span",mod:{loading:l},...S("icon"),children:v})]})});Q0.classes=Tw;Q0.displayName="@mantine/core/ActionIcon";Q0.Group=LU;Q0.GroupSection=BU;const t0e=P.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>C.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:C.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));t0e.displayName="@mantine/core/CloseIcon";var n0e={root:"m_86a44da5","root--subtle":"m_220c80f2"};const B$e={variant:"subtle"},j$e=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":An(t,"cb-size"),"--cb-radius":n===void 0?void 0:Mr(n),"--cb-icon-size":je(r)}}),J0=wo((e,t)=>{const n=qe("CloseButton",B$e,e),{iconSize:r,children:i,vars:o,radius:s,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:m,icon:p,mod:g,__staticSelector:v,...b}=n,w=Nt({name:v||"CloseButton",props:n,className:a,style:l,classes:n0e,classNames:u,styles:c,unstyled:f,vars:o,varsResolver:j$e});return C.jsxs(xl,{ref:t,...b,unstyled:f,variant:m,disabled:h,mod:[{disabled:h||d},g],...w("root",{variant:m,active:!h&&!d}),children:[p||C.jsx(t0e,{}),i]})});J0.classes=n0e;J0.displayName="@mantine/core/CloseButton";function z$e(e){return P.Children.toArray(e).filter(Boolean)}var r0e={root:"m_4081bf90"};const U$e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},V$e=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:o,wrap:s},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":yo(r),"--group-align":i,"--group-justify":o,"--group-wrap":s}}),Cr=dt((e,t)=>{const n=qe("Group",U$e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:m,vars:p,variant:g,__size:v,mod:b,...w}=n,E=z$e(u),_=E.length,T=yo(l??"md"),D={childWidth:`calc(${100/_}% - (${T} - ${T} / ${_}))`},k=Nt({name:"Group",props:n,stylesCtx:D,className:i,style:o,classes:r0e,classNames:r,styles:s,unstyled:a,vars:p,varsResolver:V$e});return C.jsx(Re,{...k("root"),ref:t,variant:g,mod:[{grow:h},b],size:v,...w,children:E})});Cr.classes=r0e;Cr.displayName="@mantine/core/Group";const[H$e,Vp]=Us("ModalBase component was not found in tree");function q$e({opened:e,transitionDuration:t}){const[n,r]=P.useState(e),i=P.useRef(-1),s=y4()?0:t;return P.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):s===0?r(!1):i.current=window.setTimeout(()=>r(!1),s),()=>window.clearTimeout(i.current)),[e,s]),n}function W$e({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:o,returnFocus:s}){const a=tu(e),[u,l]=P.useState(!1),[c,f]=P.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=q$e({opened:n,transitionDuration:d});return Zpe("keydown",m=>{var p;m.key==="Escape"&&i&&n&&((p=m.target)==null?void 0:p.getAttribute("data-mantine-stop-propagation"))!=="true"&&o()},{capture:!0}),Kpe({opened:n,shouldReturnFocus:r&&s}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const i0e=P.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:o,onEnterTransitionEnd:s,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:m,zIndex:p,shadow:g,padding:v,__vars:b,unstyled:w,removeScrollProps:E,..._},T)=>{const{_id:S,titleMounted:D,bodyMounted:k,shouldLockScroll:R,setTitleMounted:O,setBodyMounted:M}=W$e({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:F,...L}=E||{};return C.jsx(X0,{...d,withinPortal:f,children:C.jsx(H$e,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:o,onEnterTransitionEnd:s,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${S}-title`,getBodyId:()=>`${S}-body`,titleMounted:D,bodyMounted:k,setTitleMounted:O,setBodyMounted:M,trapFocus:a,closeOnEscape:u,zIndex:p,unstyled:w},children:C.jsx(gx,{enabled:R&&h,...L,children:C.jsx(Re,{ref:T,..._,__vars:{...b,"--mb-z-index":(p||zu("modal")).toString(),"--mb-shadow":cU(g),"--mb-padding":yo(v)},children:m})},F)})})});i0e.displayName="@mantine/core/ModalBase";function G$e(){const e=Vp();return P.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var xx={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const o0e=P.forwardRef(({className:e,...t},n)=>{const r=G$e(),i=Vp();return C.jsx(Re,{ref:n,...t,id:r,className:eo({[xx.body]:!i.unstyled},e)})});o0e.displayName="@mantine/core/ModalBaseBody";const s0e=P.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Vp();return C.jsx(J0,{ref:r,...n,onClick:o=>{i.onClose(),t==null||t(o)},className:eo({[xx.close]:!i.unstyled},e),unstyled:i.unstyled})});s0e.displayName="@mantine/core/ModalBaseCloseButton";const a0e=P.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...o},s)=>{const a=Vp();return C.jsx(eh,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>C.jsx("div",{...n,className:eo({[xx.inner]:!a.unstyled},n.className),children:C.jsx(A4,{active:a.opened&&a.trapFocus,innerRef:s,children:C.jsx(ww,{...o,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:eo({[xx.content]:!a.unstyled},t),unstyled:a.unstyled,children:o.children})})})})});a0e.displayName="@mantine/core/ModalBaseContent";const u0e=P.forwardRef(({className:e,...t},n)=>{const r=Vp();return C.jsx(Re,{component:"header",ref:n,className:eo({[xx.header]:!r.unstyled},e),...t})});u0e.displayName="@mantine/core/ModalBaseHeader";const Y$e={duration:200,timingFunction:"ease",transition:"fade"};function K$e(e){const t=Vp();return{...Y$e,...t.transitionProps,...e}}const l0e=P.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},o)=>{const s=Vp(),a=K$e(t);return C.jsx(eh,{mounted:r!==void 0?r:s.opened,...a,transition:"fade",children:u=>C.jsx(bx,{ref:o,fixed:!0,style:[n,u],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{e==null||e(l),s.closeOnClickOutside&&s.onClose()},...i})})});l0e.displayName="@mantine/core/ModalBaseOverlay";function X$e(){const e=Vp();return P.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const c0e=P.forwardRef(({className:e,...t},n)=>{const r=X$e(),i=Vp();return C.jsx(Re,{component:"h2",ref:n,className:eo({[xx.title]:!i.unstyled},e),...t,id:r})});c0e.displayName="@mantine/core/ModalBaseTitle";function Q$e({children:e}){return C.jsx(C.Fragment,{children:e})}const[J$e,Z$e]=G0({size:"sm"}),e5e={},f0e=dt((e,t)=>{const n=qe("InputClearButton",e5e,e),{size:r,variant:i,vars:o,classNames:s,styles:a,...u}=n,l=Z$e(),{resolvedClassNames:c,resolvedStyles:f}=A1({classNames:s,styles:a,props:n});return C.jsx(J0,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});f0e.displayName="@mantine/core/InputClearButton";const[t5e,Cw]=G0({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var xc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const rte={},n5e=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Ms(t)} - ${je(2)})`}}),D4=dt((e,t)=>{const n=qe("InputDescription",rte,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=qe("InputDescription",rte,n),m=Cw(),p=Nt({name:["InputWrapper",c],props:n,classes:xc,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"description",vars:u,varsResolver:n5e}),g=f&&(m==null?void 0:m.getStyles)||p;return C.jsx(Re,{component:"p",ref:t,variant:d,size:l,...g("description",m!=null&&m.getStyles?{className:i,style:o}:void 0),...h})});D4.classes=xc;D4.displayName="@mantine/core/InputDescription";const r5e={},i5e=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Ms(t)} - ${je(2)})`}}),k4=dt((e,t)=>{const n=qe("InputError",r5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,m=Nt({name:["InputWrapper",c],props:n,classes:xc,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"error",vars:u,varsResolver:i5e}),p=Cw(),g=f&&(p==null?void 0:p.getStyles)||m;return C.jsx(Re,{component:"p",ref:t,variant:d,size:l,...g("error",p!=null&&p.getStyles?{className:i,style:o}:void 0),...h})});k4.classes=xc;k4.displayName="@mantine/core/InputError";const ite={labelElement:"label"},o5e=(e,{size:t})=>({label:{"--input-label-size":Ms(t),"--input-asterisk-color":void 0}}),I4=dt((e,t)=>{const n=qe("InputLabel",ite,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:m,__staticSelector:p,variant:g,mod:v,...b}=qe("InputLabel",ite,n),w=Nt({name:["InputWrapper",p],props:n,classes:xc,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"label",vars:u,varsResolver:o5e}),E=Cw(),_=(E==null?void 0:E.getStyles)||w;return C.jsxs(Re,{..._("label",E!=null&&E.getStyles?{className:i,style:o}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},v],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...b,children:[m,f&&C.jsx("span",{..._("required"),"aria-hidden":!0,children:" *"})]})});I4.classes=xc;I4.displayName="@mantine/core/InputLabel";const ote={},jU=dt((e,t)=>{const n=qe("InputPlaceholder",ote,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=qe("InputPlaceholder",ote,n),m=Nt({name:["InputPlaceholder",l],props:n,classes:xc,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"placeholder"});return C.jsx(Re,{...m("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});jU.classes=xc;jU.displayName="@mantine/core/InputPlaceholder";function s5e(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),o=e.slice(r+1),s=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&o.includes("description")||n&&o.includes("error"),offsetTop:s}}const a5e={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},u5e=(e,{size:t})=>({label:{"--input-label-size":Ms(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Ms(t)} - ${je(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Ms(t)} - ${je(2)})`}}),zU=dt((e,t)=>{const n=qe("InputWrapper",a5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:m,error:p,description:g,labelProps:v,descriptionProps:b,errorProps:w,labelElement:E,children:_,withAsterisk:T,id:S,required:D,__stylesApiProps:k,mod:R,...O}=n,M=Nt({name:["InputWrapper",f],props:k||n,classes:xc,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:u5e}),F={size:l,variant:c,__staticSelector:f},L=tu(S),H=typeof T=="boolean"?T:D,V=(w==null?void 0:w.id)||`${L}-error`,Q=(b==null?void 0:b.id)||`${L}-description`,K=L,Z=!!p&&typeof p!="boolean",U=!!g,B=`${Z?V:""} ${U?Q:""}`,q=B.trim().length>0?B.trim():void 0,z=(v==null?void 0:v.id)||`${L}-label`,G=m&&C.jsx(I4,{labelElement:E,id:z,htmlFor:K,required:H,...F,...v,children:m},"label"),X=U&&C.jsx(D4,{...b,...F,size:(b==null?void 0:b.size)||F.size,id:(b==null?void 0:b.id)||Q,children:g},"description"),ne=C.jsx(P.Fragment,{children:d(_)},"input"),ge=Z&&P.createElement(k4,{...w,...F,size:(w==null?void 0:w.size)||F.size,key:"error",id:(w==null?void 0:w.id)||V},p),me=h.map(ye=>{switch(ye){case"label":return G;case"input":return ne;case"description":return X;case"error":return ge;default:return null}});return C.jsx(t5e,{value:{getStyles:M,describedBy:q,inputId:K,labelId:z,...s5e(h,{hasDescription:U,hasError:Z})},children:C.jsx(Re,{ref:t,variant:c,size:l,mod:[{error:!!p},R],...M("root"),...O,children:me})})});zU.classes=xc;zU.displayName="@mantine/core/InputWrapper";const l5e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},c5e=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":An(t.size,"input-height"),"--input-fz":Ms(t.size),"--input-radius":t.radius===void 0?void 0:Mr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?je(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?je(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?An(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Vr=wo((e,t)=>{const n=qe("Input",l5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:m,leftSection:p,leftSectionProps:g,leftSectionWidth:v,rightSection:b,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:_,leftSectionPointerEvents:T,variant:S,vars:D,pointer:k,multiline:R,radius:O,id:M,withAria:F,withErrorStyles:L,mod:H,inputSize:V,__clearSection:Q,__clearable:K,__defaultRightSection:Z,...U}=n,{styleProps:B,rest:q}=k1(U),z=Cw(),G={offsetBottom:z==null?void 0:z.offsetBottom,offsetTop:z==null?void 0:z.offsetTop},X=Nt({name:["Input",l],props:c||n,classes:xc,className:i,style:o,classNames:r,styles:s,unstyled:a,stylesCtx:G,rootSelector:"wrapper",vars:D,varsResolver:c5e}),ne=F?{required:u,disabled:m,"aria-invalid":!!h,"aria-describedby":z==null?void 0:z.describedBy,id:(z==null?void 0:z.inputId)||M}:{},ge=b||K&&Q||Z;return C.jsx(J$e,{value:{size:f||"sm"},children:C.jsxs(Re,{...X("wrapper"),...B,...d,mod:[{error:!!h&&L,pointer:k,disabled:m,multiline:R,"data-with-right-section":!!b,"data-with-left-section":!!p},H],variant:S,size:f,children:[p&&C.jsx("div",{...g,"data-position":"left",...X("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:p}),C.jsx(Re,{component:"input",...q,...ne,ref:t,required:u,mod:{disabled:m,error:!!h&&L},variant:S,__size:V,...X("input")}),ge&&C.jsx("div",{...w,"data-position":"right",...X("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:ge})]})})});Vr.classes=xc;Vr.Wrapper=zU;Vr.Label=I4;Vr.Error=k4;Vr.Description=D4;Vr.Placeholder=jU;Vr.ClearButton=f0e;Vr.displayName="@mantine/core/Input";function f5e(e,t,n){const r=qe(e,t,n),{label:i,description:o,error:s,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:m,labelProps:p,descriptionProps:g,wrapperProps:v,id:b,size:w,style:E,inputContainer:_,inputWrapperOrder:T,withAsterisk:S,variant:D,vars:k,mod:R,...O}=r,{styleProps:M,rest:F}=k1(O),L={label:i,description:o,error:s,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:m,labelProps:p,descriptionProps:g,unstyled:f,styles:l,size:w,style:E,inputContainer:_,inputWrapperOrder:T,withAsterisk:S,variant:D,id:b,mod:R,...v};return{...F,classNames:u,styles:l,unstyled:f,wrapperProps:{...L,...M},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:s,variant:D,id:b}}}const d5e={__staticSelector:"InputBase",withAria:!0},wc=wo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=f5e("InputBase",d5e,e);return C.jsx(Vr.Wrapper,{...r,children:C.jsx(Vr,{...n,...i,ref:t})})});wc.classes={...Vr.classes,...Vr.Wrapper.classes};wc.displayName="@mantine/core/InputBase";const h5e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var d0e={root:"m_8bffd616"};const p5e={},Lt=wo((e,t)=>{const n=qe("Flex",p5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:m,direction:p,...g}=n,v=Nt({name:"Flex",classes:d0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u}),b=xo(),w=OC(),E=ame({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:m,direction:p},theme:b,data:h5e});return C.jsxs(C.Fragment,{children:[E.hasResponsiveStyles&&C.jsx(D1,{selector:`.${w}`,styles:E.styles,media:E.media}),C.jsx(Re,{ref:t,...v("root",{className:w,style:q0(E.inlineStyles)}),...g})]})});Lt.classes=d0e;Lt.displayName="@mantine/core/Flex";const[m5e,UU]=Us("Accordion component was not found in the tree");function R4({style:e,size:t=16,...n}){return C.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:je(t),height:je(t),display:"block"},...n,children:C.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}R4.displayName="@mantine/core/AccordionChevron";const[g5e,h0e]=Us("Accordion.Item component was not found in the tree");var MC={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const y5e={},VU=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...m}=qe("AccordionControl",y5e,e),{value:p}=h0e(),g=UU(),v=g.isItemActive(p),b=typeof g.order=="number",w=`h${g.order}`,E=C.jsxs(xl,{...m,...g.getStyles("control",{className:r,classNames:n,style:i,styles:o,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:v,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:_=>{l==null||l(_),g.onChange(p)},type:"button",disabled:d,"aria-expanded":v,"aria-controls":g.getRegionId(p),id:g.getControlId(p),onKeyDown:lU({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[C.jsx(Re,{component:"span",mod:{rotate:!g.disableChevronRotation&&v,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:o}),children:a||g.chevron}),C.jsx("span",{...g.getStyles("label",{classNames:n,styles:o}),children:f}),u&&C.jsx(Re,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:o}),children:u})]});return b?C.jsx(w,{...g.getStyles("itemTitle",{classNames:n,styles:o}),children:E}):E});VU.displayName="@mantine/core/AccordionControl";VU.classes=MC;const v5e={},HU=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,value:a,mod:u,...l}=qe("AccordionItem",v5e,e),c=UU();return C.jsx(g5e,{value:{value:a},children:C.jsx(Re,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:o,style:i,variant:c.variant}),...l})})});HU.displayName="@mantine/core/AccordionItem";HU.classes=MC;const b5e={},qU=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,children:a,...u}=qe("AccordionPanel",b5e,e),{value:l}=h0e(),c=UU();return C.jsx(w4,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:o}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:C.jsx("div",{...c.getStyles("content",{classNames:n,styles:o}),children:a})})});qU.displayName="@mantine/core/AccordionPanel";qU.classes=MC;const x5e={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:C.jsx(R4,{})},w5e=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:je(n),"--accordion-radius":r===void 0?void 0:Mr(r)}});function ia(e){const t=qe("Accordion",x5e,e),{classNames:n,className:r,style:i,styles:o,unstyled:s,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:m,transitionDuration:p,disableChevronRotation:g,chevronPosition:v,chevronSize:b,order:w,chevron:E,variant:_,radius:T,...S}=t,D=tu(h),[k,R]=as({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),O=L=>Array.isArray(k)?k.includes(L):L===k,M=L=>{const H=Array.isArray(k)?k.includes(L)?k.filter(V=>V!==L):[...k,L]:L===k?null:L;R(H)},F=Nt({name:"Accordion",classes:MC,props:t,className:r,style:i,classNames:n,styles:o,unstyled:s,vars:a,varsResolver:w5e});return C.jsx(m5e,{value:{isItemActive:O,onChange:M,getControlId:wN(`${D}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:wN(`${D}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:p,disableChevronRotation:g,chevronPosition:v,order:w,chevron:E,loop:m,getStyles:F,variant:_,unstyled:s},children:C.jsx(Re,{...F("root"),id:D,...S,variant:_,"data-accordion":!0,children:u})})}const E5e=e=>e;ia.extend=E5e;ia.withProps=kFe(ia);ia.classes=MC;ia.displayName="@mantine/core/Accordion";ia.Item=HU;ia.Panel=qU;ia.Control=VU;ia.Chevron=R4;var p0e={root:"m_7f854edf"};const _5e={position:{bottom:0,right:0},zIndex:zu("modal"),withinPortal:!0},T5e=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":je(n==null?void 0:n.top),"--affix-left":je(n==null?void 0:n.left),"--affix-bottom":je(n==null?void 0:n.bottom),"--affix-right":je(n==null?void 0:n.right)}}),WU=dt((e,t)=>{const n=qe("Affix",_5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,m=Nt({name:"Affix",classes:p0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:T5e});return C.jsx(X0,{...l,withinPortal:f,children:C.jsx(Re,{ref:t,...m("root"),...h})})});WU.classes=p0e;WU.displayName="@mantine/core/Affix";var m0e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const C5e={},S5e=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Mr(t),"--alert-bg":n||r?o.background:void 0,"--alert-color":o.color,"--alert-bd":n||r?o.border:void 0}}},ap=dt((e,t)=>{const n=qe("Alert",C5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:m,withCloseButton:p,onClose:g,closeButtonLabel:v,variant:b,autoContrast:w,...E}=n,_=Nt({name:"Alert",classes:m0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:S5e}),T=tu(h),S=f&&`${T}-title`||void 0,D=`${T}-body`;return C.jsx(Re,{id:T,..._("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":D,"aria-labelledby":S,children:C.jsxs("div",{..._("wrapper"),children:[m&&C.jsx("div",{..._("icon"),children:m}),C.jsxs("div",{..._("body"),children:[f&&C.jsx("div",{..._("title"),"data-with-close-button":p||void 0,children:C.jsx("span",{id:S,..._("label"),children:f})}),d&&C.jsx("div",{id:D,..._("message"),"data-variant":b,children:d})]}),p&&C.jsx(J0,{..._("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":v,unstyled:a})]})})});ap.classes=m0e;ap.displayName="@mantine/core/Alert";var g0e={root:"m_b6d8b162"};function A5e(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const D5e={inherit:!1},k5e=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:o})=>({root:{"--text-fz":Ms(i),"--text-lh":Ype(i),"--text-gradient":t==="gradient"?j9(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":o?Yr(o,e):void 0}}),Ye=wo((e,t)=>{const n=qe("Text",D5e,e),{lineClamp:r,truncate:i,inline:o,inherit:s,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:m,unstyled:p,variant:g,mod:v,size:b,...w}=n,E=Nt({name:["Text",l],props:n,classes:g0e,className:f,style:d,classNames:h,styles:m,unstyled:p,vars:c,varsResolver:k5e});return C.jsx(Re,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":A5e(i),"data-line-clamp":typeof r=="number","data-inline":o,"data-inherit":s},v],size:b,...w})});Ye.classes=g0e;Ye.displayName="@mantine/core/Text";var y0e={root:"m_849cf0da"};const I5e={underline:"hover"},Sw=wo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:o,...s}=qe("Anchor",I5e,e);return C.jsx(Ye,{component:"a",ref:t,className:eo({[y0e.root]:!i},r),...s,mod:[{underline:n},o],__staticSelector:"Anchor",unstyled:i})});Sw.classes=y0e;Sw.displayName="@mantine/core/Anchor";const[R5e,Aw]=Us("AppShell was not found in tree");var Z0={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const N5e={},GU=dt((e,t)=>{const n=qe("AppShellAside",N5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Aw();return h.disabled?null:C.jsx(Re,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});GU.classes=Z0;GU.displayName="@mantine/core/AppShellAside";const P5e={},YU=dt((e,t)=>{var m;const n=qe("AppShellFooter",P5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Aw();return h.disabled?null:C.jsx(Re,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:eo({[gx.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-footer-z-index":(m=c??h.zIndex)==null?void 0:m.toString()}})});YU.classes=Z0;YU.displayName="@mantine/core/AppShellFooter";const O5e={},KU=dt((e,t)=>{var m;const n=qe("AppShellHeader",O5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Aw();return h.disabled?null:C.jsx(Re,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:eo({[gx.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-header-z-index":(m=c??h.zIndex)==null?void 0:m.toString()}})});KU.classes=Z0;KU.displayName="@mantine/core/AppShellHeader";const F5e={},XU=dt((e,t)=>{const n=qe("AppShellMain",F5e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=Aw();return C.jsx(Re,{component:"main",ref:t,...l.getStyles("main",{className:i,style:o,classNames:r,styles:s}),...u})});XU.classes=Z0;XU.displayName="@mantine/core/AppShellMain";function $C(e){return typeof e=="object"?e.base:e}function LC(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function BC(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function M5e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const o=r==null?void 0:r.width,s="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),LC(o)){const f=je($C(o));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(BC(o)&&(typeof o.base<"u"&&(e["--app-shell-aside-width"]=je(o.base),e["--app-shell-aside-offset"]=je(o.base)),Gr(o).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=je(o[f]),t[f]["--app-shell-aside-offset"]=je(o[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=s,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=fU(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=s,n[f]["--app-shell-aside-transform-rtl"]=a}}function $5e({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",o=(n==null?void 0:n.offset)??!0;if(LC(r)){const s=je($C(r));e["--app-shell-footer-height"]=s,o&&(e["--app-shell-footer-offset"]=s)}BC(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=je(r.base),o&&(e["--app-shell-footer-offset"]=je(r.base))),Gr(r).forEach(s=>{s!=="base"&&(t[s]=t[s]||{},t[s]["--app-shell-footer-height"]=je(r[s]),o&&(t[s]["--app-shell-footer-offset"]=je(r[s])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function L5e({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",o=(n==null?void 0:n.offset)??!0;if(LC(r)){const s=je($C(r));e["--app-shell-header-height"]=s,o&&(e["--app-shell-header-offset"]=s)}BC(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=je(r.base),o&&(e["--app-shell-header-offset"]=je(r.base))),Gr(r).forEach(s=>{s!=="base"&&(t[s]=t[s]||{},t[s]["--app-shell-header-height"]=je(r[s]),o&&(t[s]["--app-shell-header-offset"]=je(r[s])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function B5e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const o=r==null?void 0:r.width,s="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),LC(o)){const f=je($C(o));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(BC(o)&&(typeof o.base<"u"&&(e["--app-shell-navbar-width"]=je(o.base),e["--app-shell-navbar-offset"]=je(o.base)),Gr(o).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=je(o[f]),t[f]["--app-shell-navbar-offset"]=je(o[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=s,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=fU(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=s,n[f]["--app-shell-navbar-transform-rtl"]=a}}function f5(e){return Number(e)===0?"0px":yo(e)}function j5e({padding:e,baseStyles:t,minMediaStyles:n}){LC(e)&&(t["--app-shell-padding"]=f5($C(e))),BC(e)&&(e.base&&(t["--app-shell-padding"]=f5(e.base)),Gr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=f5(e[r]))}))}function z5e({navbar:e,header:t,footer:n,aside:r,padding:i,theme:o}){const s={},a={},u={};B5e({baseStyles:u,minMediaStyles:s,maxMediaStyles:a,navbar:e,theme:o}),M5e({baseStyles:u,minMediaStyles:s,maxMediaStyles:a,aside:r,theme:o}),L5e({baseStyles:u,minMediaStyles:s,header:t}),$5e({baseStyles:u,minMediaStyles:s,footer:n}),j5e({baseStyles:u,minMediaStyles:s,padding:i});const l=vT(Gr(s),o.breakpoints).map(d=>({query:`(min-width: ${xN(d.px)})`,styles:s[d.value]})),c=vT(Gr(a),o.breakpoints).map(d=>({query:`(max-width: ${xN(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function U5e({navbar:e,header:t,aside:n,footer:r,padding:i}){const o=xo(),s=Y0(),{media:a,baseStyles:u}=z5e({navbar:e,header:t,footer:r,aside:n,padding:i,theme:o});return C.jsx(D1,{media:a,styles:u,selector:s.cssVariablesSelector})}const V5e={},QU=dt((e,t)=>{const n=qe("AppShellNavbar",V5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Aw();return h.disabled?null:C.jsx(Re,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});QU.classes=Z0;QU.displayName="@mantine/core/AppShellNavbar";const H5e={},JU=wo((e,t)=>{const n=qe("AppShellSection",H5e,e),{classNames:r,className:i,style:o,styles:s,vars:a,grow:u,mod:l,...c}=n,f=Aw();return C.jsx(Re,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:o,classNames:r,styles:s}),...c})});JU.classes=Z0;JU.displayName="@mantine/core/AppShellSection";function q5e({transitionDuration:e,disabled:t}){const[n,r]=P.useState(!0),i=P.useRef(-1),o=P.useRef(-1);return Zpe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>P.startTransition(()=>{r(!1)}),200)}),C1(()=>{r(!0),clearTimeout(o.current),o.current=window.setTimeout(()=>P.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const W5e={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:zu("app")},G5e=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Br=dt((e,t)=>{const n=qe("AppShell",W5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:m,zIndex:p,layout:g,disabled:v,aside:b,footer:w,offsetScrollbars:E=g!=="alt",mod:_,...T}=n,S=Nt({name:"AppShell",classes:Z0,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:G5e}),D=q5e({disabled:v,transitionDuration:d});return C.jsxs(R5e,{value:{getStyles:S,withBorder:c,zIndex:p,disabled:v,offsetScrollbars:E},children:[C.jsx(U5e,{navbar:l,header:m,aside:b,footer:w,padding:f}),C.jsx(Re,{ref:t,...S("root"),mod:[{resizing:D,layout:g,disabled:v},_],...T})]})});Br.classes=Z0;Br.displayName="@mantine/core/AppShell";Br.Navbar=QU;Br.Header=KU;Br.Main=XU;Br.Aside=GU;Br.Footer=YU;Br.Section=JU;function v0e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>v0e(t))}:e}function b0e(e){return e?e.map(t=>v0e(t)):[]}function ZU(e){return e.reduce((t,n)=>"group"in n?{...t,...ZU(n.items)}:(t[n.value]=n,t),{})}var Nu={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Y5e={error:null},K5e=(e,{size:t,color:n})=>({chevron:{"--combobox-chevron-size":An(t,"combobox-chevron-size"),"--combobox-chevron-color":n?Yr(n,e):void 0}}),eV=dt((e,t)=>{const n=qe("ComboboxChevron",Y5e,e),{size:r,error:i,style:o,className:s,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Nt({name:"ComboboxChevron",classes:Nu,props:n,style:o,className:s,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:K5e,rootSelector:"chevron"});return C.jsx(Re,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:C.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});eV.classes=Nu;eV.displayName="@mantine/core/ComboboxChevron";const[X5e,Ec]=Us("Combobox component was not found in tree"),x0e=P.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},o)=>C.jsx(Vr.ClearButton,{ref:o,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:s=>{s.preventDefault(),t==null||t(s)},onClick:s=>{r(),n==null||n(s)}}));x0e.displayName="@mantine/core/ComboboxClearButton";const Q5e={},tV=dt((e,t)=>{const{classNames:n,styles:r,className:i,style:o,hidden:s,...a}=qe("ComboboxDropdown",Q5e,e),u=Ec();return C.jsx($s.Dropdown,{...a,ref:t,role:"presentation","data-hidden":s||void 0,...u.getStyles("dropdown",{className:i,style:o,classNames:n,styles:r})})});tV.classes=Nu;tV.displayName="@mantine/core/ComboboxDropdown";const J5e={refProp:"ref"},w0e=dt((e,t)=>{const{children:n,refProp:r}=qe("ComboboxDropdownTarget",J5e,e);if(Ec(),!W0(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return C.jsx($s.Target,{ref:t,refProp:r,children:n})});w0e.displayName="@mantine/core/ComboboxDropdownTarget";const Z5e={},nV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=qe("ComboboxEmpty",Z5e,e),u=Ec();return C.jsx(Re,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:o,style:i}),...a})});nV.classes=Nu;nV.displayName="@mantine/core/ComboboxEmpty";function rV({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:o}){const s=Ec(),[a,u]=P.useState(null),l=f=>{if(e==null||e(f),!s.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),s.store.dropdownOpened?u(s.store.selectNextOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),s.store.dropdownOpened?u(s.store.selectPreviousOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=s.store.getSelectedOptionIndex();s.store.dropdownOpened&&d!==-1?(f.preventDefault(),s.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),s.store.openDropdown("keyboard"))}f.key==="Escape"&&s.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),s.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(s.store.listId&&s.store.dropdownOpened)||void 0,"aria-controls":s.store.dropdownOpened?s.store.listId:void 0,"aria-activedescendant":s.store.dropdownOpened&&a||void 0,autoComplete:o,"data-expanded":s.store.dropdownOpened||void 0,"data-mantine-stop-propagation":s.store.dropdownOpened||void 0}:{},onKeyDown:l}}const e8e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},E0e=dt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:o,withExpandedAttribute:s,targetType:a,autoComplete:u,...l}=qe("ComboboxEventsTarget",e8e,e);if(!W0(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Ec(),f=rV({targetType:a,withAriaAttributes:o,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:u});return P.cloneElement(n,{...f,...l,[r]:zo(t,c.store.targetRef,v4(n))})});E0e.displayName="@mantine/core/ComboboxEventsTarget";const t8e={},iV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=qe("ComboboxFooter",t8e,e),u=Ec();return C.jsx(Re,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:o}),...a,onMouseDown:l=>{l.preventDefault()}})});iV.classes=Nu;iV.displayName="@mantine/core/ComboboxFooter";const n8e={},oV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,children:a,label:u,...l}=qe("ComboboxGroup",n8e,e),c=Ec();return C.jsxs(Re,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:o}),...l,children:[u&&C.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:o}),children:u}),a]})});oV.classes=Nu;oV.displayName="@mantine/core/ComboboxGroup";const r8e={},sV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=qe("ComboboxHeader",r8e,e),u=Ec();return C.jsx(Re,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:o}),...a,onMouseDown:l=>{l.preventDefault()}})});sV.classes=Nu;sV.displayName="@mantine/core/ComboboxHeader";function _0e({value:e,valuesDivider:t=",",...n}){return C.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}_0e.displayName="@mantine/core/ComboboxHiddenInput";const i8e={},aV=dt((e,t)=>{const n=qe("ComboboxOption",i8e,e),{classNames:r,className:i,style:o,styles:s,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:m,mod:p,...g}=n,v=Ec(),b=P.useId(),w=l||b;return C.jsx(Re,{...v.getStyles("option",{className:i,classNames:r,styles:s,style:o}),...g,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":m},p],role:"option",onClick:E=>{var _;h?E.preventDefault():((_=v.onOptionSubmit)==null||_.call(v,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{v.resetSelectionOnOptionHover&&v.store.resetSelectedOption(),d==null||d(E)}})});aV.classes=Nu;aV.displayName="@mantine/core/ComboboxOption";const o8e={},uV=dt((e,t)=>{const n=qe("ComboboxOptions",o8e,e),{classNames:r,className:i,style:o,styles:s,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Ec(),d=tu(a);return P.useEffect(()=>{f.store.setListId(d)},[d]),C.jsx(Re,{ref:t,...f.getStyles("options",{className:i,style:o,classNames:r,styles:s}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});uV.classes=Nu;uV.displayName="@mantine/core/ComboboxOptions";const s8e={withAriaAttributes:!0,withKeyboardNavigation:!0},lV=dt((e,t)=>{const n=qe("ComboboxSearch",s8e,e),{classNames:r,styles:i,unstyled:o,vars:s,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Ec(),h=d.getStyles("search"),m=rV({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return C.jsx(Vr,{ref:zo(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...m,...f,__staticSelector:"Combobox"})});lV.classes=Nu;lV.displayName="@mantine/core/ComboboxSearch";const a8e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},T0e=dt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:o,withExpandedAttribute:s,targetType:a,autoComplete:u,...l}=qe("ComboboxTarget",a8e,e);if(!W0(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Ec(),f=rV({targetType:a,withAriaAttributes:o,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=P.cloneElement(n,{...f,...l});return C.jsx($s.Target,{ref:zo(t,c.store.targetRef),children:d})});T0e.displayName="@mantine/core/ComboboxTarget";function u8e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function l8e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function c8e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function cV({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:o=!0,scrollBehavior:s="instant"}={}){const[a,u]=as({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=P.useRef(null),c=P.useRef(-1),f=P.useRef(null),d=P.useRef(null),h=P.useRef(-1),m=P.useRef(-1),p=P.useRef(-1),g=P.useCallback((V="unknown")=>{a||(u(!0),i==null||i(V))},[u,i,a]),v=P.useCallback((V="unknown")=>{a&&(u(!1),r==null||r(V))},[u,r,a]),b=P.useCallback((V="unknown")=>{a?v(V):g(V)},[v,g,a]),w=P.useCallback(()=>{const V=document.querySelector(`#${l.current} [data-combobox-selected]`);V==null||V.removeAttribute("data-combobox-selected"),V==null||V.removeAttribute("aria-selected")},[]),E=P.useCallback(V=>{const Q=document.getElementById(l.current),K=Q==null?void 0:Q.querySelectorAll("[data-combobox-option]");if(!K)return null;const Z=V>=K.length?0:V<0?K.length-1:V;return c.current=Z,K!=null&&K[Z]&&!K[Z].hasAttribute("data-combobox-disabled")?(w(),K[Z].setAttribute("data-combobox-selected","true"),K[Z].setAttribute("aria-selected","true"),K[Z].scrollIntoView({block:"nearest",behavior:s}),K[Z].id):null},[s,w]),_=P.useCallback(()=>{const V=document.querySelector(`#${l.current} [data-combobox-active]`);if(V){const Q=document.querySelectorAll(`#${l.current} [data-combobox-option]`),K=Array.from(Q).findIndex(Z=>Z===V);return E(K)}return E(0)},[E]),T=P.useCallback(()=>E(l8e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),o)),[E,o]),S=P.useCallback(()=>E(u8e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),o)),[E,o]),D=P.useCallback(()=>E(c8e(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),k=P.useCallback((V="selected",Q)=>{p.current=window.setTimeout(()=>{var U;const K=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=Array.from(K).findIndex(B=>B.hasAttribute(`data-combobox-${V}`));c.current=Z,Q!=null&&Q.scrollIntoView&&((U=K[Z])==null||U.scrollIntoView({block:"nearest",behavior:s}))},0)},[]),R=P.useCallback(()=>{c.current=-1,w()},[w]),O=P.useCallback(()=>{const V=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Q=V==null?void 0:V[c.current];Q==null||Q.click()},[]),M=P.useCallback(V=>{l.current=V},[]),F=P.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),L=P.useCallback(()=>{m.current=window.setTimeout(()=>d.current.focus(),0)},[]),H=P.useCallback(()=>c.current,[]);return P.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(m.current),window.clearTimeout(p.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:v,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:H,selectOption:E,selectFirstOption:D,selectActiveOption:_,selectNextOption:T,selectPreviousOption:S,resetSelectedOption:R,updateSelectedOptionIndex:k,listId:l.current,setListId:M,clickSelectedOption:O,searchRef:f,focusSearchInput:F,targetRef:d,focusTarget:L}}const f8e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},d8e=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Ms(t),"--combobox-option-padding":An(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:je(n),"--combobox-option-fz":Ms(t),"--combobox-option-padding":An(t,"combobox-option-padding")}});function Jn(e){const t=qe("Combobox",f8e,e),{classNames:n,styles:r,unstyled:i,children:o,store:s,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:m,...p}=t,g=cV(),v=s||g,b=Nt({name:h||"Combobox",classes:Nu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:d8e}),w=()=>{l==null||l(),v.closeDropdown()};return C.jsx(X5e,{value:{getStyles:b,store:v,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:m},children:C.jsx($s,{opened:v.dropdownOpened,...p,onChange:E=>!E&&w(),withRoles:!1,unstyled:i,children:o})})}const h8e=e=>e;Jn.extend=h8e;Jn.classes=Nu;Jn.displayName="@mantine/core/Combobox";Jn.Target=T0e;Jn.Dropdown=tV;Jn.Options=uV;Jn.Option=aV;Jn.Search=lV;Jn.Empty=nV;Jn.Chevron=eV;Jn.Footer=iV;Jn.Header=sV;Jn.EventsTarget=E0e;Jn.DropdownTarget=w0e;Jn.Group=oV;Jn.ClearButton=x0e;Jn.HiddenInput=_0e;var C0e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const S0e=C0e,N4=P.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:o,children:s,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:m="div",labelElement:p="label",variant:g,style:v,vars:b,mod:w,...E},_)=>{const T=Nt({name:e,props:t,className:n,style:v,classes:C0e,classNames:r,styles:i,unstyled:o});return C.jsx(Re,{...T("root"),ref:_,__vars:{"--label-fz":Ms(d),"--label-lh":An(d,"label-lh")},mod:[{"label-position":h},w],variant:g,size:d,...E,children:C.jsxs(Re,{component:m,htmlFor:m==="label"?l:void 0,...T("body"),children:[s,C.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&C.jsx(Re,{component:p,htmlFor:p==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&C.jsx(Vr.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&C.jsx(Vr.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});N4.displayName="@mantine/core/InlineInput";const A0e=P.createContext(null),p8e=A0e.Provider,D0e=()=>P.useContext(A0e),[m8e,g8e]=G0();var k0e={card:"m_26775b0a"};const y8e={withBorder:!0},v8e=(e,{radius:t})=>({card:{"--card-radius":Mr(t)}}),fV=dt((e,t)=>{const n=qe("CheckboxCard",y8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:m,onChange:p,...g}=n,v=Nt({name:"CheckboxCard",classes:k0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:v8e,rootSelector:"card"}),b=D0e(),w=typeof l=="boolean"?l:b?b.value.includes(d||""):void 0,[E,_]=as({value:w,defaultValue:m,finalValue:!1,onChange:p});return C.jsx(m8e,{value:{checked:E},children:C.jsx(xl,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"checkbox","aria-checked":E,onClick:T=>{h==null||h(T),b==null||b.onChange(d||""),_(!E)}})})});fV.displayName="@mantine/core/CheckboxCard";fV.classes=k0e;function dV({children:e,role:t}){const n=Cw();return n?C.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):C.jsx(C.Fragment,{children:e})}const b8e={},hV=dt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,readOnly:u,...l}=qe("CheckboxGroup",b8e,e),[c,f]=as({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const m=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(m)?c.filter(p=>p!==m):[...c,m])};return C.jsx(p8e,{value:{value:c,onChange:d,size:o},children:C.jsx(Vr.Wrapper,{size:o,ref:t,...s,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:C.jsx(dV,{role:"group",children:a})})})});hV.classes=Vr.Wrapper.classes;hV.displayName="@mantine/core/CheckboxGroup";function I0e({size:e,style:t,...n}){const r=e!==void 0?{width:je(e),height:je(e),...t}:t;return C.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:C.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function R0e({indeterminate:e,...t}){return e?C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:C.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):C.jsx(I0e,{...t})}var N0e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const x8e={icon:R0e},w8e=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Zd({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":An(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Mr(t),"--checkbox-color":o==="outline"?u:Yr(n,e),"--checkbox-icon-color":i?Yr(i,e):xw(s,e)?S1({color:n,theme:e,autoContrast:s}):void 0}}},pV=dt((e,t)=>{const n=qe("CheckboxIndicator",x8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:m,checked:p,mod:g,variant:v,disabled:b,...w}=n,E=l,_=Nt({name:"CheckboxIndicator",classes:N0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:w8e,rootSelector:"indicator"}),T=g8e(),S=typeof p=="boolean"||typeof c=="boolean"?p||c:(T==null?void 0:T.checked)||!1;return C.jsx(Re,{ref:t,..._("indicator",{variant:v}),variant:v,mod:[{checked:S,disabled:b},g],...w,children:C.jsx(E,{indeterminate:c,..._("icon")})})});pV.displayName="@mantine/core/CheckboxIndicator";pV.classes=N0e;var P0e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const E8e={labelPosition:"right",icon:R0e},_8e=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Zd({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":An(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Mr(t),"--checkbox-color":o==="outline"?u:Yr(n,e),"--checkbox-icon-color":i?Yr(i,e):xw(s,e)?S1({color:n,theme:e,autoContrast:s}):void 0}}},ca=dt((e,t)=>{const n=qe("Checkbox",E8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:m,checked:p,labelPosition:g,description:v,error:b,disabled:w,variant:E,indeterminate:_,icon:T,rootRef:S,iconColor:D,onChange:k,autoContrast:R,mod:O,...M}=n,F=D0e(),L=d||(F==null?void 0:F.size),H=T,V=Nt({name:"Checkbox",props:n,classes:P0e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:_8e}),{styleProps:Q,rest:K}=k1(M),Z=tu(f),U=F?{checked:F.value.includes(K.value),onChange:B=>{F.onChange(B),k==null||k(B)}}:{};return C.jsx(N4,{...V("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:Z,size:L,labelPosition:g,label:c,description:v,error:b,disabled:w,classNames:r,styles:s,unstyled:a,"data-checked":U.checked||p||void 0,variant:E,ref:S,mod:O,...Q,...m,children:C.jsxs(Re,{...V("inner"),mod:{"data-label-position":g},children:[C.jsx(Re,{component:"input",id:Z,ref:t,checked:p,disabled:w,mod:{error:!!b,indeterminate:_},...V("input",{focusable:!0,variant:E}),onChange:k,...K,...U,type:"checkbox"}),C.jsx(H,{indeterminate:_,...V("icon")})]})})});ca.classes={...P0e,...S0e};ca.displayName="@mantine/core/Checkbox";ca.Group=hV;ca.Indicator=pV;ca.Card=fV;function wx(e){return"group"in e}function O0e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let o=0;o<e.length;o+=1){const s=e[o];if(i.length===n)return i;wx(s)&&i.push({group:s.group,items:O0e({options:s.items,search:t,limit:n-i.length})}),wx(s)||s.label.toLowerCase().includes(r)&&i.push(s)}return i}function T8e(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function F0e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(wx(n))F0e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function C8e(e,t){return Array.isArray(e)?e.includes(t):e===t}function M0e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:o}){if(!wx(e)){const a=C8e(n,e.value),u=t&&a&&C.jsx(I0e,{className:Nu.optionsDropdownCheckIcon}),l=C.jsxs(C.Fragment,{children:[r==="left"&&u,C.jsx("span",{children:e.label}),r==="right"&&u]});return C.jsx(Jn.Option,{value:e.value,disabled:e.disabled,className:eo({[Nu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof o=="function"?o({option:e,checked:a}):l})}const s=e.items.map(a=>C.jsx(M0e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:o},a.value));return C.jsx(Jn.Group,{label:e.group,children:s})}function $0e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:o,maxDropdownHeight:s,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:m,renderOption:p,scrollAreaProps:g,"aria-label":v}){F0e(e);const w=typeof i=="string"?(r||O0e)({options:e,search:u?i:"",limit:o??1/0}):e,E=T8e(w),_=w.map(T=>C.jsx(M0e,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:p},wx(T)?T.group:T.value));return C.jsx(Jn.Dropdown,{hidden:t||n&&E,children:C.jsxs(Jn.Options,{labelledBy:m,"aria-label":v,children:[a?C.jsx(wp.Autosize,{mah:s??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:_}):_,E&&d&&C.jsx(Jn.Empty,{children:d})]})})}var L0e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const S8e={},A8e=(e,{radius:t,color:n,gradient:r,variant:i,size:o,autoContrast:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{root:{"--badge-height":An(o,"badge-height"),"--badge-padding-x":An(o,"badge-padding-x"),"--badge-fz":An(o,"badge-fz"),"--badge-radius":t===void 0?void 0:Mr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Yr(n,e):void 0}}},lf=wo((e,t)=>{const n=qe("Badge",S8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:m,variant:p,fullWidth:g,autoContrast:v,circle:b,mod:w,...E}=n,_=Nt({name:"Badge",props:n,classes:L0e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:A8e});return C.jsxs(Re,{variant:p,mod:[{block:g,circle:b,"with-right-section":!!h,"with-left-section":!!d},w],..._("root",{variant:p}),ref:t,...E,children:[d&&C.jsx("span",{..._("section"),"data-position":"left",children:d}),C.jsx("span",{..._("label"),children:m}),h&&C.jsx("span",{..._("section"),"data-position":"right",children:h})]})});lf.classes=L0e;lf.displayName="@mantine/core/Badge";var Dw={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const ste={orientation:"horizontal"},D8e=(e,{borderWidth:t})=>({group:{"--button-border-width":je(t)}}),mV=dt((e,t)=>{const n=qe("ButtonGroup",ste,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=qe("ButtonGroup",ste,e),m=Nt({name:"ButtonGroup",props:n,classes:Dw,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:l,varsResolver:D8e,rootSelector:"group"});return C.jsx(Re,{...m("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});mV.classes=Dw;mV.displayName="@mantine/core/ButtonGroup";const ate={},k8e=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:o,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":An(s,"section-height"),"--section-padding-x":An(s,"section-padding-x"),"--section-fz":s!=null&&s.includes("compact")?Ms(s.replace("compact-","")):Ms(s),"--section-radius":t===void 0?void 0:Mr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},gV=dt((e,t)=>{const n=qe("ButtonGroupSection",ate,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=qe("ButtonGroupSection",ate,e),m=Nt({name:"ButtonGroupSection",props:n,classes:Dw,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,varsResolver:k8e,rootSelector:"groupSection"});return C.jsx(Re,{...m("groupSection"),ref:t,variant:l,...h})});gV.classes=Dw;gV.displayName="@mantine/core/ButtonGroupSection";const I8e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${je(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},R8e={},N8e=(e,{radius:t,color:n,gradient:r,variant:i,size:o,justify:s,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":An(o,"button-height"),"--button-padding-x":An(o,"button-padding-x"),"--button-fz":o!=null&&o.includes("compact")?Ms(o.replace("compact-","")):Ms(o),"--button-radius":t===void 0?void 0:Mr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},At=wo((e,t)=>{const n=qe("Button",R8e,e),{style:r,vars:i,className:o,color:s,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:m,loaderProps:p,gradient:g,classNames:v,styles:b,unstyled:w,"data-disabled":E,autoContrast:_,mod:T,...S}=n,D=Nt({name:"Button",props:n,classes:Dw,className:o,style:r,classNames:v,styles:b,unstyled:w,vars:i,varsResolver:N8e}),k=!!l,R=!!c;return C.jsxs(xl,{ref:t,...D("root",{active:!a&&!m&&!E}),unstyled:w,variant:d,disabled:a||m,mod:[{disabled:a||E,loading:m,block:f,"with-left-section":k,"with-right-section":R},T],...S,children:[C.jsx(eh,{mounted:!!m,transition:I8e,duration:150,children:O=>C.jsx(Re,{component:"span",...D("loader",{style:O}),"aria-hidden":!0,children:C.jsx(th,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...p})})}),C.jsxs("span",{...D("inner"),children:[l&&C.jsx(Re,{component:"span",...D("section"),mod:{position:"left"},children:l}),C.jsx(Re,{component:"span",mod:{loading:m},...D("label"),children:u}),c&&C.jsx(Re,{component:"span",...D("section"),mod:{position:"right"},children:c})]})]})});At.classes=Dw;At.displayName="@mantine/core/Button";At.Group=mV;At.GroupSection=gV;const[P8e,O8e]=Us("Card component was not found in tree");var yV={root:"m_e615b15f",section:"m_599a2148"};const F8e={},P4=wo((e,t)=>{const n=qe("CardSection",F8e,e),{classNames:r,className:i,style:o,styles:s,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=O8e();return C.jsx(Re,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:o,styles:s,classNames:r}),...f})});P4.classes=yV;P4.displayName="@mantine/core/CardSection";const M8e={},$8e=(e,{padding:t})=>({root:{"--card-padding":yo(t)}}),kw=wo((e,t)=>{const n=qe("Card",M8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Nt({name:"Card",props:n,classes:yV,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:$8e}),h=P.Children.toArray(l),m=h.map((p,g)=>typeof p=="object"&&p&&"type"in p&&p.type===P4?P.cloneElement(p,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):p);return C.jsx(P8e,{value:{getStyles:d},children:C.jsx(ww,{ref:t,unstyled:a,...d("root"),...f,children:m})})});kw.classes=yV;kw.displayName="@mantine/core/Card";kw.Section=P4;var B0e={root:"m_4451eb3a"};const L8e={},Ir=wo((e,t)=>{const n=qe("Center",L8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Nt({name:"Center",props:n,classes:B0e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u});return C.jsx(Re,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Ir.classes=B0e;Ir.displayName="@mantine/core/Center";var j0e={root:"m_b183c0a2"};const B8e={},j8e=(e,{color:t})=>({root:{"--code-bg":t?Yr(t,e):void 0}}),L2=dt((e,t)=>{const n=qe("Code",B8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,m=Nt({name:"Code",props:n,classes:j0e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:j8e});return C.jsx(Re,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...m("root"),...h,dir:"ltr"})});L2.classes=j0e;L2.displayName="@mantine/core/Code";var z0e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const ute={withShadow:!0},z8e=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Mr(t),"--cs-size":je(n)}}),vV=wo((e,t)=>{const n=qe("ColorSwatch",ute,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:m,...p}=qe("ColorSwatch",ute,n),g=Nt({name:"ColorSwatch",props:n,classes:z0e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:z8e});return C.jsxs(Re,{ref:t,variant:m,size:c,...g("root",{focusable:!0}),...p,children:[C.jsx("span",{...g("alphaOverlay")}),d&&C.jsx("span",{...g("shadowOverlay")}),C.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),C.jsx("span",{...g("childrenOverlay"),children:h})]})});vV.classes=z0e;vV.displayName="@mantine/core/ColorSwatch";var U0e={root:"m_7485cace"};const U8e={},V8e=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:An(t,"container-size")}}),Cp=dt((e,t)=>{const n=qe("Container",U8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Nt({name:"Container",classes:U0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:V8e});return C.jsx(Re,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Cp.classes=U0e;Cp.displayName="@mantine/core/Container";var V0e={root:"m_3eebeb36",label:"m_9e365f20"};const H8e={orientation:"horizontal"},q8e=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Yr(t,e):void 0,"--divider-border-style":n,"--divider-size":An(r,"divider-size")}}),I1=dt((e,t)=>{const n=qe("Divider",H8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...m}=n,p=Nt({name:"Divider",classes:V0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:q8e});return C.jsx(Re,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...p("root"),...m,role:"separator",children:f&&C.jsx(Re,{component:"span",mod:{position:d},...p("label"),children:f})})});I1.classes=V0e;I1.displayName="@mantine/core/Divider";function W8e({open:e,close:t,openDelay:n,closeDelay:r}){const i=P.useRef(-1),o=P.useRef(-1),s=()=>{window.clearTimeout(i.current),window.clearTimeout(o.current)},a=()=>{s(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{s(),r===0||r===void 0?t():o.current=window.setTimeout(t,r)};return P.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:u}}const[lte,H0e]=Us("Grid component was not found in tree"),X9=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,cte=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":X9(e,t),fte=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},dte=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function G8e({span:e,order:t,offset:n,selector:r}){var h;const i=xo(),o=H0e(),s=o.breakpoints||i.breakpoints,u=tf(e)===void 0?12:tf(e),l=q0({"--col-order":(h=tf(t))==null?void 0:h.toString(),"--col-flex-grow":fte(u,o.grow),"--col-flex-basis":X9(u,o.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":cte(u,o.columns,o.grow),"--col-offset":dte(tf(n),o.columns)}),c=Gr(s).reduce((m,p)=>{var g;return m[p]||(m[p]={}),typeof t=="object"&&t[p]!==void 0&&(m[p]["--col-order"]=(g=t[p])==null?void 0:g.toString()),typeof e=="object"&&e[p]!==void 0&&(m[p]["--col-flex-grow"]=fte(e[p],o.grow),m[p]["--col-flex-basis"]=X9(e[p],o.columns),m[p]["--col-width"]=e[p]==="content"?"auto":void 0,m[p]["--col-max-width"]=cte(e[p],o.columns,o.grow)),typeof n=="object"&&n[p]!==void 0&&(m[p]["--col-offset"]=dte(n[p],o.columns)),m},{}),d=vT(Gr(c),s).filter(m=>Gr(c[m.value]).length>0).map(m=>({query:o.type==="container"?`mantine-grid (min-width: ${s[m.value]})`:`(min-width: ${s[m.value]})`,styles:c[m.value]}));return C.jsx(D1,{styles:l,media:o.type==="container"?void 0:d,container:o.type==="container"?d:void 0,selector:r})}var bV={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Y8e={span:12},xV=dt((e,t)=>{const n=qe("GridCol",Y8e,e),{classNames:r,className:i,style:o,styles:s,vars:a,span:u,order:l,offset:c,...f}=n,d=H0e(),h=OC();return C.jsxs(C.Fragment,{children:[C.jsx(G8e,{selector:`.${h}`,span:u,order:l,offset:c}),C.jsx(Re,{ref:t,...d.getStyles("col",{className:eo(i,h),style:o,classNames:r,styles:s}),...f})]})});xV.classes=bV;xV.displayName="@mantine/core/GridCol";function hte({gutter:e,selector:t,breakpoints:n,type:r}){const i=xo(),o=n||i.breakpoints,s=q0({"--grid-gutter":yo(tf(e))}),a=Gr(o).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=yo(e[f])),c),{}),l=vT(Gr(a),o).filter(c=>Gr(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${o[c.value]})`:`(min-width: ${o[c.value]})`,styles:a[c.value]}));return C.jsx(D1,{styles:s,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const K8e={gutter:"md",grow:!1,columns:12},X8e=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),gd=dt((e,t)=>{const n=qe("Grid",K8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:m,breakpoints:p,type:g,...v}=n,b=Nt({name:"Grid",classes:bV,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:X8e}),w=OC();return g==="container"&&p?C.jsxs(lte,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:p,type:g},children:[C.jsx(hte,{selector:`.${w}`,...n}),C.jsx("div",{...b("container"),children:C.jsx(Re,{ref:t,...b("root",{className:w}),...v,children:C.jsx("div",{...b("inner"),children:m})})})]}):C.jsxs(lte,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:p,type:g},children:[C.jsx(hte,{selector:`.${w}`,...n}),C.jsx(Re,{ref:t,...b("root",{className:w}),...v,children:C.jsx("div",{...b("inner"),children:m})})]})});gd.classes=bV;gd.displayName="@mantine/core/Grid";gd.Col=xV;var q0e={root:"m_9e117634"};const Q8e={},J8e=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Mr(t),"--image-object-fit":n}}),eg=wo((e,t)=>{const n=qe("Image",Q8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:m,...p}=n,[g,v]=P.useState(!c);P.useEffect(()=>v(!c),[c]);const b=Nt({name:"Image",classes:q0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:J8e});return g&&h?C.jsx(Re,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",m],...p}):C.jsx(Re,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),v(!0)},mod:m,...p})});eg.classes=q0e;eg.displayName="@mantine/core/Image";function Q9(){return Q9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q9.apply(null,arguments)}function Z8e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var eLe=P.useLayoutEffect,tLe=function(t){var n=P.useRef(t);return eLe(function(){n.current=t}),n},pte=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},nLe=function(t,n){var r=P.useRef();return P.useCallback(function(i){t.current=i,r.current&&pte(r.current,null),r.current=n,n&&pte(n,i)},[n])},mte={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},rLe=function(t){Object.keys(mte).forEach(function(n){t.style.setProperty(n,mte[n],"important")})},gte=rLe,Ia=null,yte=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function iLe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ia||(Ia=document.createElement("textarea"),Ia.setAttribute("tabindex","-1"),Ia.setAttribute("aria-hidden","true"),gte(Ia)),Ia.parentNode===null&&document.body.appendChild(Ia);var i=e.paddingSize,o=e.borderSize,s=e.sizingStyle,a=s.boxSizing;Object.keys(s).forEach(function(d){var h=d;Ia.style[h]=s[h]}),gte(Ia),Ia.value=t;var u=yte(Ia,e);Ia.value=t,u=yte(Ia,e),Ia.value="x";var l=Ia.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+o),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+o),u=Math.min(f,u),[u,l]}var vte=function(){},oLe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},sLe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],aLe=!!document.documentElement.currentStyle,uLe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=oLe(sLe,n),i=r.boxSizing;if(i==="")return null;aLe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var o=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:o,borderSize:s}},lLe=uLe;function W0e(e,t,n){var r=tLe(n);P.useLayoutEffect(function(){var i=function(s){return r.current(s)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var cLe=function(t){W0e(window,"resize",t)},fLe=function(t){W0e(document.fonts,"loadingdone",t)},dLe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],hLe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,o=t.minRows,s=t.onChange,a=s===void 0?vte:s,u=t.onHeightChange,l=u===void 0?vte:u,c=Z8e(t,dLe),f=c.value!==void 0,d=P.useRef(null),h=nLe(d,n),m=P.useRef(0),p=P.useRef(),g=function(){var w=d.current,E=r&&p.current?p.current:lLe(w);if(E){p.current=E;var _=iLe(E,w.value||w.placeholder||"x",o,i),T=_[0],S=_[1];m.current!==T&&(m.current=T,w.style.setProperty("height",T+"px","important"),l(T,{rowHeight:S}))}},v=function(w){f||g(),a(w)};return P.useLayoutEffect(g),cLe(g),fLe(g),P.createElement("textarea",Q9({},c,{onChange:v,ref:h}))},pLe=P.forwardRef(hLe);const mLe={},wV=dt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:o,resize:s,...a}=qe("Textarea",mLe,e),u=n&&x6e()!=="test",l=u?{maxRows:r,minRows:i}:{};return C.jsx(wc,{component:u?pLe:"textarea",ref:t,...a,__staticSelector:o||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":s},...l})});wV.classes=wc.classes;wV.displayName="@mantine/core/Textarea";const[gLe,yLe]=Us("List component was not found in tree");var EV={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const vLe={},_V=dt((e,t)=>{const n=qe("ListItem",vLe,e),{classNames:r,className:i,style:o,styles:s,vars:a,icon:u,children:l,mod:c,...f}=n,d=yLe(),h=u||d.icon,m={classNames:r,styles:s};return C.jsx(Re,{...d.getStyles("item",{...m,className:i,style:o}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:C.jsxs("div",{...d.getStyles("itemWrapper",m),children:[h&&C.jsx("span",{...d.getStyles("itemIcon",m),children:h}),C.jsx("span",{...d.getStyles("itemLabel",m),children:l})]})})});_V.classes=EV;_V.displayName="@mantine/core/ListItem";const bLe={type:"unordered"},xLe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Ms(t),"--list-lh":Ype(t),"--list-spacing":yo(n)}}),cf=dt((e,t)=>{const n=qe("List",bLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:m,listStyleType:p,mod:g,...v}=n,b=Nt({name:"List",classes:EV,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:xLe});return C.jsx(gLe,{value:{center:m,icon:d,getStyles:b},children:C.jsx(Re,{...b("root",{style:{listStyleType:p}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...v,children:l})})});cf.classes=EV;cf.displayName="@mantine/core/List";cf.Item=_V;var G0e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const bte={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:zu("overlay")},wLe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),El=dt((e,t)=>{const n=qe("LoadingOverlay",bte,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...m}=n,p=xo(),g=Nt({name:"LoadingOverlay",classes:G0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:wLe}),v={...bte.overlayProps,...f};return C.jsx(eh,{transition:"fade",...l,mounted:!!d,children:b=>C.jsxs(Re,{...g("root",{style:b}),ref:t,...m,children:[C.jsx(th,{...g("loader"),unstyled:a,...c}),C.jsx(bx,{...v,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||p.white}),C.jsx(bx,{...v,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||p.colors.dark[5]})]})})});El.classes=G0e;El.displayName="@mantine/core/LoadingOverlay";const[ELe,jC]=Us("Menu component was not found in the tree");var Iw={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const _Le={},TV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=qe("MenuDivider",_Le,e),u=jC();return C.jsx(Re,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:o,classNames:n}),...a})});TV.classes=Iw;TV.displayName="@mantine/core/MenuDivider";const TLe={},CV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=qe("MenuDropdown",TLe,e),d=P.useRef(null),h=jC(),m=md(l,v=>{var b,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(b=d.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),p=md(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=md(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return C.jsxs($s.Dropdown,{...f,onMouseEnter:p,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:zo(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[h.withInitialFocusPlaceholder&&C.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});CV.classes=Iw;CV.displayName="@mantine/core/MenuDropdown";const CLe={},SV=wo((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,"data-disabled":h,...m}=qe("MenuItem",CLe,e),p=jC(),g=xo(),{dir:v}=K0(),b=P.useRef(null),w=p.getItemIndex(b.current),E=m,_=md(E.onMouseLeave,()=>p.setHovered(-1)),T=md(E.onMouseEnter,()=>p.setHovered(p.getItemIndex(b.current))),S=md(E.onClick,()=>{h||(typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately())}),D=md(E.onFocus,()=>p.setHovered(p.getItemIndex(b.current))),k=a?g.variantColorResolver({color:a,theme:g,variant:"light"}):void 0,R=a?Zd({color:a,theme:g}):null;return C.jsxs(xl,{...m,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:D,...p.getStyles("item",{className:r,style:i,styles:o,classNames:n}),ref:zo(b,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||h||void 0,"data-hovered":p.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:T,onMouseLeave:_,onClick:S,onKeyDown:lU({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:v,orientation:"vertical",onKeyDown:E.onKeyDown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:k==null?void 0:k.color,"--menu-item-hover":k==null?void 0:k.hover},children:[l&&C.jsx("div",{...p.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:l}),f&&C.jsx("div",{...p.getStyles("itemLabel",{styles:o,classNames:n}),children:f}),c&&C.jsx("div",{...p.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:c})]})});SV.classes=Iw;SV.displayName="@mantine/core/MenuItem";const SLe={},AV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=qe("MenuLabel",SLe,e),u=jC();return C.jsx(Re,{ref:t,...u.getStyles("label",{className:r,style:i,styles:o,classNames:n}),...a})});AV.classes=Iw;AV.displayName="@mantine/core/MenuLabel";const ALe={refProp:"ref"},Y0e=P.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=qe("MenuTarget",ALe,e);if(!W0(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=jC(),s=n.props,a=md(s.onClick,()=>{o.trigger==="click"?o.toggleDropdown():o.trigger==="click-hover"&&(o.setOpenedViaClick(!0),o.opened||o.openDropdown())}),u=md(s.onMouseEnter,()=>(o.trigger==="hover"||o.trigger==="click-hover")&&o.openDropdown()),l=md(s.onMouseLeave,()=>{(o.trigger==="hover"||o.trigger==="click-hover"&&!o.openedViaClick)&&o.closeDropdown()});return C.jsx($s.Target,{refProp:r,popupType:"menu",ref:t,...i,children:P.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0})})});Y0e.displayName="@mantine/core/MenuTarget";const DLe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ma(e){const t=qe("Menu",DLe,e),{children:n,onOpen:r,onClose:i,opened:o,defaultOpened:s,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:m,classNames:p,styles:g,unstyled:v,variant:b,vars:w,menuItemTabIndex:E,keepMounted:_,withInitialFocusPlaceholder:T,...S}=t,D=Nt({name:"Menu",classes:Iw,props:t,classNames:p,styles:g,unstyled:v}),[k,{setHovered:R,resetHovered:O}]=KOe(),[M,F]=as({value:o,defaultValue:s,finalValue:!1,onChange:u}),[L,H]=P.useState(!1),V=()=>{F(!1),H(!1),M&&(i==null||i())},Q=()=>{F(!0),!M&&(r==null||r())},K=()=>{M?V():Q()},{openDropdown:Z,closeDropdown:U}=W8e({open:Q,close:V,closeDelay:m,openDelay:h}),B=G=>YOe("[data-menu-item]","[data-menu-dropdown]",G),{resolvedClassNames:q,resolvedStyles:z}=A1({classNames:p,styles:g,props:t});return Md(()=>{O()},[M]),C.jsx(ELe,{value:{getStyles:D,opened:M,toggleDropdown:K,getItemIndex:B,hovered:k,setHovered:R,openedViaClick:L,setOpenedViaClick:H,closeOnItemClick:l,closeDropdown:d==="click"?V:U,openDropdown:d==="click"?Q:Z,closeDropdownImmediately:V,loop:c,trigger:d,unstyled:v,menuItemTabIndex:E,withInitialFocusPlaceholder:T},children:C.jsx($s,{...S,opened:M,onChange:K,defaultOpened:s,trapFocus:_?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:q,styles:z,unstyled:v,variant:b,keepMounted:_,children:n})})}Ma.extend=e=>e;Ma.classes=Iw;Ma.displayName="@mantine/core/Menu";Ma.Item=SV;Ma.Label=AV;Ma.Dropdown=CV;Ma.Target=Y0e;Ma.Divider=TV;const[kLe,Rw]=Us("Modal component was not found in tree");var Hp={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const ILe={},O4=dt((e,t)=>{const n=qe("ModalBody",ILe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=Rw();return C.jsx(o0e,{ref:t,...l.getStyles("body",{classNames:r,style:o,styles:s,className:i}),...u})});O4.classes=Hp;O4.displayName="@mantine/core/ModalBody";const RLe={},F4=dt((e,t)=>{const n=qe("ModalCloseButton",RLe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=Rw();return C.jsx(s0e,{ref:t,...l.getStyles("close",{classNames:r,style:o,styles:s,className:i}),...u})});F4.classes=Hp;F4.displayName="@mantine/core/ModalCloseButton";const NLe={},M4=dt((e,t)=>{const n=qe("ModalContent",NLe,e),{classNames:r,className:i,style:o,styles:s,vars:a,children:u,__hidden:l,...c}=n,f=Rw(),d=f.scrollAreaComponent||Q$e;return C.jsx(a0e,{...f.getStyles("content",{className:i,style:o,styles:s,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:o,styles:s,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:C.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${je(f.yOffset)} * 2))`},children:u})})});M4.classes=Hp;M4.displayName="@mantine/core/ModalContent";const PLe={},$4=dt((e,t)=>{const n=qe("ModalHeader",PLe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=Rw();return C.jsx(u0e,{ref:t,...l.getStyles("header",{classNames:r,style:o,styles:s,className:i}),...u})});$4.classes=Hp;$4.displayName="@mantine/core/ModalHeader";const OLe={},L4=dt((e,t)=>{const n=qe("ModalOverlay",OLe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=Rw();return C.jsx(l0e,{ref:t,...l.getStyles("overlay",{classNames:r,style:o,styles:s,className:i}),...u})});L4.classes=Hp;L4.displayName="@mantine/core/ModalOverlay";const FLe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:zu("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},MLe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Mr(t),"--modal-size":An(n,"modal-size"),"--modal-y-offset":je(r),"--modal-x-offset":je(i)}}),B4=dt((e,t)=>{const n=qe("ModalRoot",FLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:m,__staticSelector:p,...g}=n,v=Nt({name:p,classes:Hp,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:MLe});return C.jsx(kLe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:v,fullScreen:d},children:C.jsx(i0e,{ref:t,...v("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});B4.classes=Hp;B4.displayName="@mantine/core/ModalRoot";const[$Le,LLe]=G0();function K0e({children:e}){const[t,n]=P.useState([]),[r,i]=P.useState(zu("modal"));return C.jsx($Le,{value:{stack:t,addModal:(o,s)=>{n(a=>[...new Set([...a,o])]),i(a=>typeof s=="number"&&typeof a=="number"?Math.max(a,s):a)},removeModal:o=>n(s=>s.filter(a=>a!==o)),getZIndex:o=>`calc(${r} + ${t.indexOf(o)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}K0e.displayName="@mantine/core/ModalStack";const BLe={},j4=dt((e,t)=>{const n=qe("ModalTitle",BLe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=Rw();return C.jsx(c0e,{ref:t,...l.getStyles("title",{classNames:r,style:o,styles:s,className:i}),...u})});j4.classes=Hp;j4.displayName="@mantine/core/ModalTitle";const jLe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:zu("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ni=dt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:o,closeButtonProps:s,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=qe("Modal",jLe,e),h=LLe(),m=!!n||o,p=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:l;return P.useEffect(()=>{h&&c&&(l?h.addModal(c,f||zu("modal")):h.removeModal(c))},[l,c,f]),C.jsxs(B4,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...p,children:[r&&C.jsx(L4,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),C.jsxs(M4,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[m&&C.jsxs($4,{children:[n&&C.jsx(j4,{children:n}),o&&C.jsx(F4,{...s})]}),C.jsx(O4,{children:a})]})]})});Ni.classes=Hp;Ni.displayName="@mantine/core/Modal";Ni.Root=B4;Ni.Overlay=L4;Ni.Content=M4;Ni.Body=O4;Ni.Header=$4;Ni.Title=j4;Ni.CloseButton=F4;Ni.Stack=K0e;const[zLe,DV]=G0(),[ULe,VLe]=G0();var z4={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const HLe={},qLe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?An(t):An(n,"pg-gap")}}),kV=dt((e,t)=>{const n=qe("PillGroup",HLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=DV(),h=(d==null?void 0:d.size)||l||void 0,m=Nt({name:"PillGroup",classes:z4,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:qLe,stylesCtx:{size:h},rootSelector:"group"});return C.jsx(ULe,{value:{size:h,disabled:c},children:C.jsx(Re,{ref:t,size:h,...m("group"),...f})})});kV.classes=z4;kV.displayName="@mantine/core/PillGroup";const WLe={variant:"default"},GLe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":An(n,"pill-fz"),"--pill-height":An(n,"pill-height"),"--pill-radius":t===void 0?void 0:Mr(t)}}),wT=dt((e,t)=>{const n=qe("Pill",WLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:m,size:p,disabled:g,mod:v,...b}=n,w=VLe(),E=DV(),_=p||(w==null?void 0:w.size)||void 0,T=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",S=Nt({name:"Pill",classes:z4,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:GLe,stylesCtx:{size:_}});return C.jsxs(Re,{component:"span",ref:t,variant:T,size:_,...S("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(w==null?void 0:w.disabled)},v],...b,children:[C.jsx("span",{...S("label"),children:c}),f&&C.jsx(J0,{variant:"transparent",radius:m,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:D=>{var k;D.preventDefault(),D.stopPropagation(),(k=h==null?void 0:h.onMouseDown)==null||k.call(h,D)},onClick:D=>{var k;D.stopPropagation(),d==null||d(),(k=h==null?void 0:h.onClick)==null||k.call(h,D)}})]})});wT.classes=z4;wT.displayName="@mantine/core/Pill";wT.Group=kV;var X0e={field:"m_45c4369d"};const YLe={type:"visible"},IV=dt((e,t)=>{const n=qe("PillsInputField",YLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...m}=n,p=DV(),g=Cw(),v=Nt({name:"PillsInputField",classes:X0e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"field"}),b=c||(p==null?void 0:p.disabled);return C.jsx(Re,{component:"input",ref:zo(t,p==null?void 0:p.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...v("field"),...m,id:(g==null?void 0:g.inputId)||f,"aria-invalid":p==null?void 0:p.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:w=>!d&&w.stopPropagation()})});IV.classes=X0e;IV.displayName="@mantine/core/PillsInputField";const KLe={},IN=dt((e,t)=>{const n=qe("PillsInput",KLe,e),{children:r,onMouseDown:i,onClick:o,size:s,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=P.useRef(null);return C.jsx(zLe,{value:{fieldRef:d,size:s,disabled:a,hasError:!!l,variant:c},children:C.jsx(wc,{size:s,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var m;h.preventDefault(),i==null||i(h),(m=d.current)==null||m.focus()},onClick:h=>{var m;h.preventDefault(),o==null||o(h),(m=d.current)==null||m.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});IN.displayName="@mantine/core/PillsInput";IN.Field=IV;function XLe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,o)=>(wx(o)?i.push({group:o.group,items:o.items.filter(s=>n.indexOf(s.value.toLowerCase().trim())===-1)}):n.indexOf(o.value.toLowerCase().trim())===-1&&i.push(o),i),[])}const QLe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},RV=dt((e,t)=>{const n=qe("MultiSelect",QLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:m,data:p,dropdownOpened:g,defaultDropdownOpened:v,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:E,onOptionSubmit:_,comboboxProps:T,filter:S,limit:D,withScrollArea:k,maxDropdownHeight:R,searchValue:O,defaultSearchValue:M,onSearchChange:F,readOnly:L,disabled:H,onFocus:V,onBlur:Q,onPaste:K,radius:Z,rightSection:U,rightSectionWidth:B,rightSectionPointerEvents:q,rightSectionProps:z,leftSection:G,leftSectionWidth:X,leftSectionPointerEvents:ne,leftSectionProps:ge,inputContainer:me,inputWrapperOrder:ye,withAsterisk:we,labelProps:fe,descriptionProps:se,errorProps:Ce,wrapperProps:Ae,description:Ue,label:Xe,error:Le,maxValues:Ge,searchable:et,nothingFoundMessage:Et,withCheckIcon:ht,checkIconPosition:xt,hidePickedOptions:te,withErrorStyles:le,name:be,form:ae,id:pe,clearable:Ee,clearButtonProps:$e,hiddenInputProps:Ne,placeholder:Ze,hiddenInputValuesDivider:Ke,required:It,mod:zt,renderOption:Pt,onRemove:en,onClear:kn,scrollAreaProps:pn,chevronColor:Rr,...br}=n,xr=tu(pe),Ei=b0e(p),Lr=ZU(Ei),wr=cV({opened:g,defaultOpened:v,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),wr.resetSelectedOption()}}),{styleProps:Ea,rest:{type:ps,autoComplete:_a,...Eo}}=k1(br),[Fn,Kn]=as({value:c,defaultValue:f,finalValue:[],onChange:d}),[_o,qn]=as({value:O,defaultValue:M,finalValue:"",onChange:F}),Kr=Nt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:s,unstyled:a}),{resolvedClassNames:oo,resolvedStyles:Fi}=A1({props:n,styles:s,classNames:r}),To=bn=>{h==null||h(bn),bn.key===" "&&!et&&(bn.preventDefault(),wr.toggleDropdown()),bn.key==="Backspace"&&_o.length===0&&Fn.length>0&&(en==null||en(Fn[Fn.length-1]),Kn(Fn.slice(0,Fn.length-1)))},Vu=Fn.map((bn,ms)=>{var so,qu;return C.jsx(wT,{withRemoveButton:!L&&!((so=Lr[bn])!=null&&so.disabled),onRemove:()=>{Kn(Fn.filter(Wu=>bn!==Wu)),en==null||en(bn)},unstyled:a,disabled:H,...Kr("pill"),children:((qu=Lr[bn])==null?void 0:qu.label)||bn},`${bn}-${ms}`)});P.useEffect(()=>{E&&wr.selectFirstOption()},[E,Fn]);const $l=C.jsx(Jn.ClearButton,{...$e,onClear:()=>{kn==null||kn(),Kn([]),qn("")}}),iu=XLe({data:Ei,value:Fn}),Hu=Ee&&Fn.length>0&&!H&&!L;return C.jsxs(C.Fragment,{children:[C.jsxs(Jn,{store:wr,classNames:oo,styles:Fi,unstyled:a,size:l,readOnly:L,__staticSelector:"MultiSelect",onOptionSubmit:bn=>{_==null||_(bn),qn(""),wr.updateSelectedOptionIndex("selected"),Fn.includes(Lr[bn].value)?(Kn(Fn.filter(ms=>ms!==Lr[bn].value)),en==null||en(Lr[bn].value)):Fn.length<Ge&&Kn([...Fn,Lr[bn].value])},...T,children:[C.jsx(Jn.DropdownTarget,{children:C.jsx(IN,{...Ea,__staticSelector:"MultiSelect",classNames:oo,styles:Fi,unstyled:a,size:l,className:i,style:o,variant:m,disabled:H,radius:Z,__defaultRightSection:C.jsx(Jn.Chevron,{size:l,error:Le,unstyled:a,color:Rr}),__clearSection:$l,__clearable:Hu,rightSection:U,rightSectionPointerEvents:q||($l?"all":"none"),rightSectionWidth:B,rightSectionProps:z,leftSection:G,leftSectionWidth:X,leftSectionPointerEvents:ne,leftSectionProps:ge,inputContainer:me,inputWrapperOrder:ye,withAsterisk:we,labelProps:fe,descriptionProps:se,errorProps:Ce,wrapperProps:Ae,description:Ue,label:Xe,error:Le,multiline:!0,withErrorStyles:le,__stylesApiProps:{...n,rightSectionPointerEvents:q||(Hu?"all":"none"),multiline:!0},pointer:!et,onClick:()=>et?wr.openDropdown():wr.toggleDropdown(),"data-expanded":wr.dropdownOpened||void 0,id:xr,required:It,mod:zt,children:C.jsxs(wT.Group,{disabled:H,unstyled:a,...Kr("pillsList"),children:[Vu,C.jsx(Jn.EventsTarget,{autoComplete:_a,children:C.jsx(IN.Field,{...Eo,ref:t,id:xr,placeholder:Ze,type:!et&&!Ze?"hidden":"visible",...Kr("inputField"),unstyled:a,onFocus:bn=>{V==null||V(bn),et&&wr.openDropdown()},onBlur:bn=>{Q==null||Q(bn),wr.closeDropdown(),qn("")},onKeyDown:To,value:_o,onChange:bn=>{qn(bn.currentTarget.value),et&&wr.openDropdown(),E&&wr.selectFirstOption()},disabled:H,readOnly:L||!et,pointer:!et})})]})})}),C.jsx($0e,{data:te?iu:Ei,hidden:L||H,filter:S,search:_o,limit:D,hiddenWhenEmpty:!Et,withScrollArea:k,maxDropdownHeight:R,filterOptions:et,value:Fn,checkIconPosition:xt,withCheckIcon:ht,nothingFoundMessage:Et,unstyled:a,labelId:Xe?`${xr}-label`:void 0,"aria-label":Xe?void 0:br["aria-label"],renderOption:Pt,scrollAreaProps:pn})]}),C.jsx(Jn.HiddenInput,{name:be,valuesDivider:Ke,value:Fn,form:ae,disabled:H,...Ne})]})});RV.classes={...wc.classes,...Jn.classes};RV.displayName="@mantine/core/MultiSelect";var Q0e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const JLe={},ZLe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?o.background:void 0,"--nl-hover":n||t?o.hover:void 0,"--nl-color":n||t?o.color:void 0},children:{"--nl-offset":yo(r)}}},U4=wo((e,t)=>{const n=qe("NavLink",JLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:m,disabled:p,leftSection:g,rightSection:v,label:b,description:w,disableRightSectionRotation:E,noWrap:_,childrenOffset:T,onKeyDown:S,autoContrast:D,mod:k,...R}=n,O=Nt({name:"NavLink",props:n,classes:Q0e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:ZLe}),[M,F]=as({value:l,defaultValue:c,finalValue:!1,onChange:f}),L=!!d,H=V=>{h==null||h(V),L&&(V.preventDefault(),F(!M))};return C.jsxs(C.Fragment,{children:[C.jsxs(xl,{...O("root"),component:"a",ref:t,onClick:H,onKeyDown:V=>{S==null||S(V),V.nativeEvent.code==="Space"&&L&&(V.preventDefault(),F(!M))},unstyled:a,mod:[{disabled:p,active:m,expanded:M},k],...R,children:[g&&C.jsx(Re,{component:"span",...O("section"),mod:{position:"left"},children:g}),C.jsxs(Re,{...O("body"),mod:{"no-wrap":_},children:[C.jsx(Re,{component:"span",...O("label"),children:b}),C.jsx(Re,{component:"span",mod:{active:m},...O("description"),children:w})]}),(L||v)&&C.jsx(Re,{...O("section"),component:"span",mod:{rotate:M&&!E,position:"right"},children:L?v||C.jsx(R4,{...O("chevron")}):v})]}),L&&C.jsx(w4,{in:M,...O("collapse"),children:C.jsx("div",{...O("children"),children:d})})]})});U4.classes=Q0e;U4.displayName="@mantine/core/NavLink";var J0e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const e9e={withCloseButton:!0},t9e=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Mr(t),"--notification-color":n?Yr(n,e):void 0}}),NV=dt((e,t)=>{const n=qe("Notification",e9e,e),{className:r,color:i,radius:o,loading:s,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:m,style:p,styles:g,unstyled:v,variant:b,vars:w,mod:E,..._}=n,T=Nt({name:"Notification",classes:J0e,props:n,className:r,style:p,classNames:m,styles:g,unstyled:v,vars:w,varsResolver:t9e});return C.jsxs(Re,{...T("root"),mod:[{"data-with-icon":!!c||s,"data-with-border":u},E],ref:t,variant:b,..._,role:"alert",children:[c&&!s&&C.jsx("div",{...T("icon"),children:c}),s&&C.jsx(th,{size:28,color:i,...T("loader")}),C.jsxs("div",{...T("body"),children:[l&&C.jsx("div",{...T("title"),children:l}),C.jsx(Re,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&C.jsx(J0,{iconSize:16,color:"gray",...h,unstyled:v,onClick:d,...T("closeButton")})]})});NV.classes=J0e;NV.displayName="@mantine/core/Notification";function Z0e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var ET;(function(e){e.event="event",e.props="prop"})(ET||(ET={}));function jm(){}function n9e(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(o,s){return o===t[s]})||(t=r,n=e.apply(void 0,r)),n}}function _T(e){return!!(e||"").match(/\d/)}function Wb(e){return e==null}function r9e(e){return typeof e=="number"&&isNaN(e)}function ege(e){return Wb(e)||r9e(e)||typeof e=="number"&&!isFinite(e)}function tge(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function i9e(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function o9e(e,t,n){var r=i9e(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function s9e(e){var t=P.useRef(e);t.current=e;var n=P.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function PV(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),o=i[0],s=i[1]||"";return{beforeDecimal:o,afterDecimal:s,hasNegation:n,addNegation:r}}function a9e(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function nge(e,t,n){for(var r="",i=n?"0":"",o=0;o<=t-1;o++)r+=e[o]||i;return r}function xte(e,t){return Array(t+1).join(e)}function rge(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],o=r[1];if(o=Number(o),!o)return n+i;i=i.replace(".","");var s=1+o,a=i.length;return s<0?i="0."+xte("0",Math.abs(s))+i:s>=a?i=i+xte("0",s-a):i=(i.substring(0,s)||"0")+"."+i.substring(s),n+i}function wte(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=PV(e),o=i.beforeDecimal,s=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(s||"0")),l=s.length<=t?"0."+s:u.toFixed(t),c=l.split("."),f=o;o&&Number(c[0])&&(f=o.split("").reverse().reduce(function(p,g,v){return p.length>v?(Number(p[0])+Number(g)).toString()+p.substring(1,p.length):g+p},c[0]));var d=nge(c[1]||"",t,n),h=a?"-":"",m=r?".":"";return""+h+f+m+d}function fy(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var ige=n9e(function(e,t){for(var n=0,r=0,i=e.length,o=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[o-1-r]&&o-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:o-r}}}),u9e=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function l9e(e,t,n){return Math.min(Math.max(e,t),n)}function d5(e){return Math.max(e.selectionStart,e.selectionEnd)}function c9e(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function f9e(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function d9e(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function h9e(e,t,n,r,i,o,s){s===void 0&&(s=d9e);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var m=0,p=c;m<p;m++){var g=s({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:m});if(g&&f[m]!==!0){d[h]=m,f[m]=!0;break}}}for(var v=r;v<l&&(d[v]===-1||!o(n[v]));)v++;var b=v===l||d[v]===-1?c:d[v];for(v=r-1;v>0&&d[v]===-1;)v--;var w=v===-1||d[v]===-1?0:d[v]+1;return w>b?b:r-w<b-r?w:b}function Ete(e,t,n,r){var i=e.length;if(t=l9e(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function p9e(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(_T(e[n])||_T(e[n-1]));return t}function oge(e,t,n,r,i,o){o===void 0&&(o=jm);var s=s9e(function(m,p){var g,v;return ege(m)?(v="",g=""):typeof m=="number"||p?(v=typeof m=="number"?rge(m):m,g=r(v)):(v=i(m,void 0),g=r(v)),{formattedValue:g,numAsString:v}}),a=P.useState(function(){return s(Wb(e)?t:e,n)}),u=a[0],l=a[1],c=function(m,p){m.formattedValue!==u.formattedValue&&l({formattedValue:m.formattedValue,numAsString:m.value}),o(m,p)},f=e,d=n;Wb(e)&&(f=u.numAsString,d=!0);var h=s(f,d);return P.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function m9e(e){return e.replace(/[^0-9]/g,"")}function g9e(e){return e}function y9e(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,o=e.getInputRef,s=e.format;s===void 0&&(s=g9e);var a=e.removeFormatting;a===void 0&&(a=m9e);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=jm);var h=e.onKeyDown;h===void 0&&(h=jm);var m=e.onMouseUp;m===void 0&&(m=jm);var p=e.onFocus;p===void 0&&(p=jm);var g=e.onBlur;g===void 0&&(g=jm);var v=e.value,b=e.getCaretBoundary;b===void 0&&(b=p9e);var w=e.isValidInputCharacter;w===void 0&&(w=_T);var E=e.isCharacterSame,_=Z0e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=oge(v,u,!!l,s,a,c),S=T[0],D=S.formattedValue,k=S.numAsString,R=T[1],O=P.useRef(),M=P.useRef({formattedValue:D,numAsString:k}),F=function(Le,Ge){M.current={formattedValue:Le.formattedValue,numAsString:Le.value},R(Le,Ge)},L=P.useState(!1),H=L[0],V=L[1],Q=P.useRef(null),K=P.useRef({setCaretTimeout:null,focusTimeout:null});P.useEffect(function(){return V(!0),function(){clearTimeout(K.current.setCaretTimeout),clearTimeout(K.current.focusTimeout)}},[]);var Z=s,U=function(Le,Ge){var et=parseFloat(Ge);return{formattedValue:Le,value:Ge,floatValue:isNaN(et)?void 0:et}},B=function(Le,Ge,et){Le.selectionStart===0&&Le.selectionEnd===Le.value.length||(fy(Le,Ge),K.current.setCaretTimeout=setTimeout(function(){Le.value===et&&Le.selectionStart!==Ge&&fy(Le,Ge)},0))},q=function(Le,Ge,et){return Ete(Le,Ge,b(Le),et)},z=function(Le,Ge,et){var Et=b(Ge),ht=h9e(Ge,D,Le,et,Et,w,E);return ht=Ete(Ge,ht,Et),ht},G=function(Le){var Ge=Le.formattedValue;Ge===void 0&&(Ge="");var et=Le.input,Et=Le.source,ht=Le.event,xt=Le.numAsString,te;if(et){var le=Le.inputValue||et.value,be=d5(et);et.value=Ge,te=z(le,Ge,be),te!==void 0&&B(et,te,Ge)}Ge!==D&&F(U(Ge,xt),{event:ht,source:Et})};P.useEffect(function(){var Le=M.current,Ge=Le.formattedValue,et=Le.numAsString;(D!==Ge||k!==et)&&F(U(D,k),{event:void 0,source:ET.props})},[D,k]);var X=Q.current?d5(Q.current):void 0,ne=typeof window<"u"?P.useLayoutEffect:P.useEffect;ne(function(){var Le=Q.current;if(D!==M.current.formattedValue&&Le){var Ge=z(M.current.formattedValue,D,X);Le.value=D,B(Le,Ge,D)}},[D]);var ge=function(Le,Ge,et){var Et=Ge.target,ht=O.current?u9e(O.current,Et.selectionEnd):ige(D,Le),xt=Object.assign(Object.assign({},ht),{lastValue:D}),te=a(Le,xt),le=Z(te);if(te=a(le,void 0),f&&!f(U(le,te))){var be=Ge.target,ae=d5(be),pe=z(Le,D,ae);return be.value=D,B(be,pe,D),!1}return G({formattedValue:le,numAsString:te,inputValue:Le,event:Ge,source:et,input:Ge.target}),!0},me=function(Le,Ge){Ge===void 0&&(Ge=0);var et=Le.selectionStart,Et=Le.selectionEnd;O.current={selectionStart:et,selectionEnd:Et+Ge}},ye=function(Le){var Ge=Le.target,et=Ge.value,Et=ge(et,Le,ET.event);Et&&d(Le),O.current=void 0},we=function(Le){var Ge=Le.target,et=Le.key,Et=Ge.selectionStart,ht=Ge.selectionEnd,xt=Ge.value;xt===void 0&&(xt="");var te;et==="ArrowLeft"||et==="Backspace"?te=Math.max(Et-1,0):et==="ArrowRight"?te=Math.min(Et+1,xt.length):et==="Delete"&&(te=Et);var le=0;et==="Delete"&&Et===ht&&(le=1);var be=et==="ArrowLeft"||et==="ArrowRight";if(te===void 0||Et!==ht&&!be){h(Le),me(Ge,le);return}var ae=te;if(be){var pe=et==="ArrowLeft"?"left":"right";ae=q(xt,te,pe),ae!==te&&Le.preventDefault()}else et==="Delete"&&!w(xt[te])?ae=q(xt,te,"right"):et==="Backspace"&&!w(xt[te])&&(ae=q(xt,te,"left"));ae!==te&&B(Ge,ae,xt),h(Le),me(Ge,le)},fe=function(Le){var Ge=Le.target,et=function(){var Et=Ge.selectionStart,ht=Ge.selectionEnd,xt=Ge.value;if(xt===void 0&&(xt=""),Et===ht){var te=q(xt,Et);te!==Et&&B(Ge,te,xt)}};et(),requestAnimationFrame(function(){et()}),m(Le),me(Ge)},se=function(Le){Le.persist&&Le.persist();var Ge=Le.target,et=Le.currentTarget;Q.current=Ge,K.current.focusTimeout=setTimeout(function(){var Et=Ge.selectionStart,ht=Ge.selectionEnd,xt=Ge.value;xt===void 0&&(xt="");var te=q(xt,Et);te!==Et&&!(Et===0&&ht===xt.length)&&B(Ge,te,xt),p(Object.assign(Object.assign({},Le),{currentTarget:et}))},0)},Ce=function(Le){Q.current=null,clearTimeout(K.current.focusTimeout),clearTimeout(K.current.setCaretTimeout),g(Le)},Ae=H&&c9e()?"numeric":void 0,Ue=Object.assign({inputMode:Ae},_,{type:t,value:D,onChange:ye,onKeyDown:we,onMouseUp:fe,onFocus:se,onBlur:Ce});if(n==="text")return i?ur.createElement(ur.Fragment,null,i(D,_)||null):ur.createElement("span",Object.assign({},_,{ref:o}),D);if(r){var Xe=r;return ur.createElement(Xe,Object.assign({},Ue,{ref:o}))}return ur.createElement("input",Object.assign({},Ue,{ref:o}))}function _te(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var o=t.suffix;o===void 0&&(o="");var s=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=V4(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=PV(e,s),h=d.beforeDecimal,m=d.afterDecimal,p=d.addNegation;return n!==void 0&&(m=nge(m,n,!!r)),l&&(h=o9e(h,l,a)),i&&(h=i+h),o&&(m=m+o),p&&(h="-"+h),e=h+(f&&c||"")+m,e}function V4(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function v9e(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),o=r.test(e);return e=e.replace(/-/g,""),i&&!o&&t&&(e="-"+e),e}function b9e(e,t){return new RegExp("(^-)|[0-9]|"+tge(e),"g")}function x9e(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function w9e(e,t,n){var r;t===void 0&&(t=f9e(e));var i=n.allowNegative,o=n.prefix;o===void 0&&(o="");var s=n.suffix;s===void 0&&(s="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=V4(n),h=d.allowedDecimalSeparators,m=d.decimalSeparator,p=e[f]===m;if(_T(e)&&(e===o||e===s)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":m;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var v=function(Q,K,Z){var U=!1,B=!1;o.startsWith("-")?U=!1:Q.startsWith("--")?(U=!1,B=!0):s.startsWith("-")&&Q.length===s.length?U=!1:Q[0]==="-"&&(U=!0);var q=U?1:0;return B&&(q=2),q&&(Q=Q.substring(q),K-=q,Z-=q),{value:Q,start:K,end:Z,hasNegation:U}},b=v(e,c,f),w=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var E=v(t.lastValue,u.start,u.end),_=E.start,T=E.end,S=E.value,D=e.substring(c,f);e.length&&S.length&&(_>S.length-s.length||T<o.length)&&!(D&&s.startsWith(D))&&(e=S);var k=0;e.startsWith(o)?k+=o.length:c<o.length&&(k=c),e=e.substring(k),f-=k;var R=e.length,O=e.length-s.length;e.endsWith(s)?R=O:(f>O||f>e.length-s.length)&&(R=f),e=e.substring(0,R),e=v9e(w?"-"+e:e,i),e=(e.match(b9e(m))||[]).join("");var M=e.indexOf(m);e=e.replace(new RegExp(tge(m),"g"),function(Q,K){return K===M?".":""});var F=PV(e,i),L=F.beforeDecimal,H=F.afterDecimal,V=F.addNegation;return l.end-l.start<u.end-u.start&&L===""&&p&&!parseFloat(H)&&(e=V?"-":""),e}function E9e(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";i.fill(!1,0,n.length+(o?1:0));var s=e.length;return i.fill(!1,s-r.length+1,s+1),i}function _9e(e){var t=V4(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var o=e.allowNegative;if(o===void 0&&(o=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function T9e(e){e=_9e(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=jm);var o=e.onBlur;o===void 0&&(o=jm);var s=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,m=Z0e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),p=V4(e),g=p.decimalSeparator,v=p.allowedDecimalSeparators,b=function(V){return _te(V,e)},w=function(V,Q){return w9e(V,Q,e)},E=Wb(f)?c:f,_=d??x9e(E,l,t);Wb(f)?Wb(c)||(_=_||typeof c=="number"):_=_||typeof f=="number";var T=function(V){return ege(V)?V:(typeof V=="number"&&(V=rge(V)),_&&typeof a=="number"?wte(V,a,!!u):V)},S=oge(T(f),T(c),!!_,b,w,h),D=S[0],k=D.numAsString,R=D.formattedValue,O=S[1],M=function(V){var Q=V.target,K=V.key,Z=Q.selectionStart,U=Q.selectionEnd,B=Q.value;if(B===void 0&&(B=""),(K==="Backspace"||K==="Delete")&&U<l.length){V.preventDefault();return}if(Z!==U){i(V);return}K==="Backspace"&&B[0]==="-"&&Z===l.length+1&&n&&fy(Q,1),a&&u&&(K==="Backspace"&&B[Z-1]===g?(fy(Q,Z-1),V.preventDefault()):K==="Delete"&&B[Z]===g&&V.preventDefault()),v!=null&&v.includes(K)&&B[Z]===g&&fy(Q,Z+1);var q=s===!0?",":s;K==="Backspace"&&B[Z-1]===q&&fy(Q,Z-1),K==="Delete"&&B[Z]===q&&fy(Q,Z+1),i(V)},F=function(V){var Q=k;if(Q.match(/\d/g)||(Q=""),r||(Q=a9e(Q)),u&&a&&(Q=wte(Q,a,u)),Q!==k){var K=_te(Q,e);O({formattedValue:K,value:Q,floatValue:parseFloat(Q)},{event:V,source:ET.event})}o(V)},L=function(V){return V===g?!0:_T(V)},H=function(V){var Q=V.currentValue,K=V.lastValue,Z=V.formattedValue,U=V.currentValueIndex,B=V.formattedValueIndex,q=Q[U],z=Z[B],G=ige(K,Q),X=G.to,ne=function(ge){return w(ge).indexOf(".")+l.length};return f===0&&u&&a&&Q[X.start]===g&&ne(Q)<U&&ne(Z)>B?!1:U>=X.start&&U<X.end&&v&&v.includes(q)&&z===g?!0:q===z};return Object.assign(Object.assign({},m),{value:R,valueIsNumericString:!1,isValidInputCharacter:L,isCharacterSame:H,onValueChange:O,format:b,removeFormatting:w,getCaretBoundary:function(V){return E9e(V,e)},onKeyDown:M,onBlur:F})}function C9e(e){var t=T9e(e);return ur.createElement(y9e,Object.assign({},t))}function Tte({direction:e,style:t,...n}){return C.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:C.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var J9={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const S9e=/^(0\.0*|-0(\.0*)?)$/,A9e=/^-?0\d+(\.\d+)?\.?$/;function Z9(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function h5(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||Z9(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function D9e(e){return e.toString().replace(".","").length}function k9e(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&D9e(t)<14&&t!==""}function Cte(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const I9e={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},R9e=(e,{size:t})=>({controls:{"--ni-chevron-size":An(t,"ni-chevron-size")}}),OV=dt((e,t)=>{const n=qe("NumberInput",I9e,e),{className:r,classNames:i,styles:o,unstyled:s,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:m,hideControls:p,rightSection:g,isAllowed:v,clampBehavior:b,onBlur:w,allowDecimal:E,decimalScale:_,onKeyDown:T,onKeyDownCapture:S,handlersRef:D,startValue:k,disabled:R,rightSectionPointerEvents:O,allowNegative:M,readOnly:F,size:L,rightSectionWidth:H,stepHoldInterval:V,stepHoldDelay:Q,allowLeadingZeros:K,withKeyboardEvents:Z,trimLeadingZeroesOnBlur:U,...B}=n,q=Nt({name:"NumberInput",classes:J9,props:n,classNames:i,styles:o,unstyled:s,vars:a,varsResolver:R9e}),{resolvedClassNames:z,resolvedStyles:G}=A1({classNames:i,styles:o,props:n}),[X,ne]=as({value:c,defaultValue:f,finalValue:"",onChange:u}),ge=Q!==void 0&&V!==void 0,me=P.useRef(null),ye=P.useRef(null),we=P.useRef(0),fe=(le,be)=>{be.source==="event"&&ne(k9e(le.floatValue,le.value)&&!S9e.test(le.value)&&!(K&&A9e.test(le.value))?le.floatValue:le.value),l==null||l(le,be)},se=le=>{const be=String(le).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return be?Math.max(0,(be[1]?be[1].length:0)-(be[2]?+be[2]:0)):0},Ce=le=>{me.current&&typeof le<"u"&&me.current.setSelectionRange(le,le)},Ae=P.useRef(L9);Ae.current=()=>{if(!h5(X))return;let le;const be=se(X),ae=se(m),pe=Math.max(be,ae),Ee=10**pe;if(!Z9(X)&&(typeof X!="number"||Number.isNaN(X)))le=Yh(k,h,d);else if(d!==void 0){const Ne=(Math.round(Number(X)*Ee)+Math.round(m*Ee))/Ee;le=Ne<=d?Ne:d}else le=(Math.round(Number(X)*Ee)+Math.round(m*Ee))/Ee;const $e=le.toFixed(pe);ne(parseFloat($e)),l==null||l({floatValue:parseFloat($e),formattedValue:$e,value:$e},{source:"increment"}),setTimeout(()=>{var Ne;return Ce((Ne=me.current)==null?void 0:Ne.value.length)},0)};const Ue=P.useRef(L9);Ue.current=()=>{if(!h5(X))return;let le;const be=h!==void 0?h:M?Number.MIN_SAFE_INTEGER:0,ae=se(X),pe=se(m),Ee=Math.max(ae,pe),$e=10**Ee;if(!Z9(X)&&typeof X!="number"||Number.isNaN(X))le=Yh(k,be,d);else{const Ze=(Math.round(Number(X)*$e)-Math.round(m*$e))/$e;le=be!==void 0&&Ze<be?be:Ze}const Ne=le.toFixed(Ee);ne(parseFloat(Ne)),l==null||l({floatValue:parseFloat(Ne),formattedValue:Ne,value:Ne},{source:"decrement"}),setTimeout(()=>{var Ze;return Ce((Ze=me.current)==null?void 0:Ze.value.length)},0)};const Xe=le=>{T==null||T(le),!(F||!Z)&&(le.key==="ArrowUp"&&(le.preventDefault(),Ae.current()),le.key==="ArrowDown"&&(le.preventDefault(),Ue.current()))},Le=le=>{if(S==null||S(le),le.key==="Backspace"){const be=me.current;be.selectionStart===0&&be.selectionStart===be.selectionEnd&&(le.preventDefault(),window.setTimeout(()=>Ce(0),0))}},Ge=le=>{let be=X;if(b==="blur"&&typeof be=="number"&&(be=Yh(be,h,d)),U&&typeof be=="string"&&se(be)<15){const ae=be.toString().replace(/^0+/,""),pe=parseFloat(ae);be=Number.isNaN(pe)||pe>Number.MAX_SAFE_INTEGER?ae:Yh(pe,h,d)}X!==be&&ne(be),w==null||w(le)};_N(D,{increment:Ae.current,decrement:Ue.current});const et=le=>{le?Ae.current():Ue.current(),we.current+=1},Et=le=>{if(et(le),ge){const be=typeof V=="number"?V:V(we.current);ye.current=window.setTimeout(()=>Et(le),be)}},ht=(le,be)=>{var ae;le.preventDefault(),(ae=me.current)==null||ae.focus(),et(be),ge&&(ye.current=window.setTimeout(()=>Et(be),Q))},xt=()=>{ye.current&&window.clearTimeout(ye.current),ye.current=null,we.current=0},te=C.jsxs("div",{...q("controls"),children:[C.jsx(xl,{...q("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof X=="number"&&d!==void 0&&X>=d,mod:{direction:"up"},onMouseDown:le=>le.preventDefault(),onPointerDown:le=>{ht(le,!0)},onPointerUp:xt,onPointerLeave:xt,children:C.jsx(Tte,{direction:"up"})}),C.jsx(xl,{...q("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof X=="number"&&h!==void 0&&X<=h,mod:{direction:"down"},onMouseDown:le=>le.preventDefault(),onPointerDown:le=>{ht(le,!1)},onPointerUp:xt,onPointerLeave:xt,children:C.jsx(Tte,{direction:"down"})})]});return C.jsx(wc,{component:C9e,allowNegative:M,className:eo(J9.root,r),size:L,...B,readOnly:F,disabled:R,value:X,getInputRef:zo(t,me),onValueChange:fe,rightSection:p||F||!h5(X)?g:g||te,classNames:z,styles:G,unstyled:s,__staticSelector:"NumberInput",decimalScale:E?_:0,onKeyDown:Xe,onKeyDownCapture:Le,rightSectionPointerEvents:O??(R?"none":void 0),rightSectionWidth:H??`var(--ni-right-section-width-${L||"sm"})`,allowLeadingZeros:K,onBlur:Ge,isAllowed:le=>b==="strict"?v?v(le)&&Cte(le.floatValue,h,d):Cte(le.floatValue,h,d):v?v(le):!0})});OV.classes={...wc.classes,...J9};OV.displayName="@mantine/core/NumberInput";const[N9e,sge]=Us("Progress.Root component was not found in tree");var zC={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const P9e={},FV=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=qe("ProgressLabel",P9e,e),u=sge();return C.jsx(Re,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:o}),...a})});FV.classes=zC;FV.displayName="@mantine/core/ProgressLabel";const O9e={},F9e=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":An(t,"progress-size"),"--progress-radius":n===void 0?void 0:Mr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),H4=dt((e,t)=>{const n=qe("ProgressRoot",O9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Nt({name:"Progress",classes:zC,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:F9e});return C.jsx(N9e,{value:{getStyles:d,autoContrast:l},children:C.jsx(Re,{ref:t,...d("root"),...f})})});H4.classes=zC;H4.displayName="@mantine/core/ProgressRoot";const M9e={withAria:!0},q4=dt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=qe("ProgressSection",M9e,e),m=sge(),p=xo(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return C.jsx(Re,{ref:t,...m.getStyles("section",{className:r,classNames:n,styles:o,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Yr(l,p),"--progress-label-color":xw(m.autoContrast,p)?S1({color:l,theme:p,autoContrast:m.autoContrast}):void 0}})});q4.classes=zC;q4.displayName="@mantine/core/ProgressSection";const $9e={},Nw=dt((e,t)=>{const n=qe("Progress",$9e,e),{value:r,classNames:i,styles:o,vars:s,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=A1({classNames:i,styles:o,props:n});return C.jsx(H4,{ref:t,classNames:d,styles:h,vars:s,...f,children:C.jsx(q4,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Nw.classes=zC;Nw.displayName="@mantine/core/Progress";Nw.Section=q4;Nw.Root=H4;Nw.Label=FV;const[L9e,age]=G0(),[B9e,j9e]=G0();var uge={card:"m_9dc8ae12"};const z9e={withBorder:!0},U9e=(e,{radius:t})=>({card:{"--card-radius":Mr(t)}}),MV=dt((e,t)=>{const n=qe("RadioCard",z9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:m,onKeyDown:p,...g}=n,v=Nt({name:"RadioCard",classes:uge,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:U9e,rootSelector:"card"}),{dir:b}=K0(),w=age(),E=typeof l=="boolean"?l:(w==null?void 0:w.value)===d||!1,_=m||(w==null?void 0:w.name),T=S=>{if(p==null||p(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const D=Array.from(document.querySelectorAll(`[role="radio"][name="${_||"__mantine"}"]`)),k=D.findIndex(M=>M===S.target),R=k+1>=D.length?0:k+1,O=k-1<0?D.length-1:k-1;S.nativeEvent.code==="ArrowDown"&&(D[R].focus(),D[R].click()),S.nativeEvent.code==="ArrowUp"&&(D[O].focus(),D[O].click()),S.nativeEvent.code==="ArrowLeft"&&(D[b==="ltr"?O:R].focus(),D[b==="ltr"?O:R].click()),S.nativeEvent.code==="ArrowRight"&&(D[b==="ltr"?R:O].focus(),D[b==="ltr"?R:O].click())}};return C.jsx(B9e,{value:{checked:E},children:C.jsx(xl,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"radio","aria-checked":E,name:_,onClick:S=>{h==null||h(S),w==null||w.onChange(d||"")},onKeyDown:T})})});MV.displayName="@mantine/core/RadioCard";MV.classes=uge;const V9e={},W4=dt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,name:u,readOnly:l,...c}=qe("RadioGroup",V9e,e),f=tu(u),[d,h]=as({value:n,defaultValue:r,finalValue:"",onChange:i}),m=p=>!l&&h(typeof p=="string"?p:p.currentTarget.value);return C.jsx(L9e,{value:{value:d,onChange:m,size:o,name:f},children:C.jsx(Vr.Wrapper,{size:o,ref:t,...s,...c,labelElement:"div",__staticSelector:"RadioGroup",children:C.jsx(dV,{role:"radiogroup",children:a})})})});W4.classes=Vr.Wrapper.classes;W4.displayName="@mantine/core/RadioGroup";function lge({size:e,style:t,...n}){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:je(e),height:je(e),...t},"aria-hidden":!0,...n,children:C.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var cge={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const H9e={icon:lge},q9e=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Zd({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":An(r,"radio-size"),"--radio-radius":t===void 0?void 0:Mr(t),"--radio-color":o==="outline"?u:Yr(n,e),"--radio-icon-size":An(r,"radio-icon-size"),"--radio-icon-color":i?Yr(i,e):xw(s,e)?S1({color:n,theme:e,autoContrast:s}):void 0}}},$V=dt((e,t)=>{const n=qe("RadioIndicator",H9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:m,mod:p,variant:g,disabled:v,...b}=n,w=l,E=Nt({name:"RadioIndicator",classes:cge,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:q9e,rootSelector:"indicator"}),_=j9e(),T=typeof m=="boolean"?m:(_==null?void 0:_.checked)||!1;return C.jsx(Re,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:v},p],...b,children:C.jsx(w,{...E("icon")})})});$V.displayName="@mantine/core/RadioIndicator";$V.classes=cge;var fge={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const W9e={labelPosition:"right"},G9e=(e,{size:t,radius:n,color:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Zd({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":An(t,"radio-size"),"--radio-radius":n===void 0?void 0:Mr(n),"--radio-color":o==="outline"?u:Yr(r,e),"--radio-icon-color":i?Yr(i,e):xw(s,e)?S1({color:r,theme:e,autoContrast:s}):void 0,"--radio-icon-size":An(t,"radio-icon-size")}}},lc=dt((e,t)=>{const n=qe("Radio",W9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:m,radius:p,color:g,variant:v,disabled:b,wrapperProps:w,icon:E=lge,rootRef:_,iconColor:T,onChange:S,mod:D,...k}=n,R=Nt({name:"Radio",classes:fge,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:G9e}),O=age(),M=(O==null?void 0:O.size)??c,F=n.size?c:M,{styleProps:L,rest:H}=k1(k),V=tu(l),Q=O?{checked:O.value===H.value,name:H.name??O.name,onChange:K=>{O.onChange(K),S==null||S(K)}}:{};return C.jsx(N4,{...R("root"),__staticSelector:"Radio",__stylesApiProps:n,id:V,size:F,labelPosition:d,label:f,description:h,error:m,disabled:b,classNames:r,styles:s,unstyled:a,"data-checked":Q.checked||void 0,variant:v,ref:_,mod:D,...L,...w,children:C.jsxs(Re,{...R("inner"),mod:{"label-position":d},children:[C.jsx(Re,{...R("radio",{focusable:!0,variant:v}),onChange:S,...H,...Q,component:"input",mod:{error:!!m},ref:t,id:V,disabled:b,type:"radio"}),C.jsx(E,{...R("icon"),"aria-hidden":!0})]})})});lc.classes=fge;lc.displayName="@mantine/core/Radio";lc.Group=W4;lc.Card=MV;lc.Indicator=$V;const Y9e={duration:100,transition:"fade"};function K9e(e,t){return{...Y9e,...t,...e}}function X9e({offset:e,position:t,defaultOpened:n}){const[r,i]=P.useState(n),o=P.useRef(null),{x:s,y:a,elements:u,refs:l,update:c,placement:f}=FU({placement:t,middleware:[RU({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,m=P.useCallback(({clientX:p,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:g,left:p+d,top:g+h,right:p,bottom:g}}})},[u.reference]);return P.useEffect(()=>{if(l.floating.current){const p=o.current;p.addEventListener("mousemove",m);const g=sp(l.floating.current);return g.forEach(v=>{v.addEventListener("scroll",c)}),()=>{p.removeEventListener("mousemove",m),g.forEach(v=>{v.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,m,r]),{handleMouseMove:m,x:s,y:a,opened:r,setOpened:i,boundaryRef:o,floating:l.setFloating}}var G4={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Q9e={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:zu("popover")},J9e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Mr(t),"--tooltip-bg":n?Yr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),LV=dt((e,t)=>{const n=qe("TooltipFloating",Q9e,e),{children:r,refProp:i,withinPortal:o,style:s,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:m,position:p,multiline:g,zIndex:v,disabled:b,defaultOpened:w,variant:E,vars:_,portalProps:T,...S}=n,D=xo(),k=Nt({name:"TooltipFloating",props:n,classes:G4,className:a,style:s,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:_,varsResolver:J9e}),{handleMouseMove:R,x:O,y:M,opened:F,boundaryRef:L,floating:H,setOpened:V}=X9e({offset:m,position:p,defaultOpened:w});if(!W0(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Q=zo(L,v4(r),t),K=r.props,Z=B=>{var q;(q=K.onMouseEnter)==null||q.call(K,B),R(B),V(!0)},U=B=>{var q;(q=K.onMouseLeave)==null||q.call(K,B),V(!1)};return C.jsxs(C.Fragment,{children:[C.jsx(X0,{...T,withinPortal:o,children:C.jsx(Re,{...S,...k("tooltip",{style:{...vU(s,D),zIndex:v,display:!b&&F?"block":"none",top:(M&&Math.round(M))??"",left:(O&&Math.round(O))??""}}),variant:E,ref:H,mod:{multiline:g},children:h})}),P.cloneElement(r,{...K,[i]:Q,onMouseEnter:Z,onMouseLeave:U})]})});LV.classes=G4;LV.displayName="@mantine/core/TooltipFloating";const dge=P.createContext(!1),Z9e=dge.Provider,eBe=()=>P.useContext(dge),tBe={openDelay:0,closeDelay:0};function BV(e){const{openDelay:t,closeDelay:n,children:r}=qe("TooltipGroup",tBe,e);return C.jsx(Z9e,{value:!0,children:C.jsx(s$e,{delay:{open:t,close:n},children:r})})}BV.displayName="@mantine/core/TooltipGroup";BV.extend=e=>e;function nBe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function rBe(e){const t=nBe(e.middlewares),n=[Lme(e.offset)];return t.shift&&n.push(RU(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?kN():kN(t.flip)),n.push(Bme({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?$2():$2(t.inline)):e.inline&&n.push($2()),n}function iBe(e){var T,S,D;const[t,n]=P.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,o=eBe(),s=tu(),a=P.useCallback(k=>{n(k),k&&b(s)},[s]),{x:u,y:l,context:c,refs:f,update:d,placement:h,middlewareData:{arrow:{x:m,y:p}={}}}=FU({strategy:e.strategy,placement:e.position,open:i,onOpenChange:a,middleware:rBe(e)}),{delay:g,currentId:v,setCurrentId:b}=a$e(c,{id:s}),{getReferenceProps:w,getFloatingProps:E}=p$e([i$e(c,{enabled:(T=e.events)==null?void 0:T.hover,delay:o?g:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),h$e(c,{enabled:(D=e.events)==null?void 0:D.focus,visibleOnly:!0}),g$e(c,{role:"tooltip"}),f$e(c,{enabled:typeof e.opened>"u"})]);Xme({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:f,update:d}}),Md(()=>{var k;(k=e.onPositionChange)==null||k.call(e,h)},[h]);const _=i&&v&&v!==s;return{x:u,y:l,arrowX:m,arrowY:p,reference:f.setReference,floating:f.setFloating,getFloatingProps:E,getReferenceProps:w,isGroupPhase:_,opened:i,placement:h}}const Ste={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:zu("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},oBe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Mr(t),"--tooltip-bg":n?Yr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ui=dt((e,t)=>{const n=qe("Tooltip",Ste,e),{children:r,position:i,refProp:o,label:s,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:m,classNames:p,styles:g,unstyled:v,style:b,className:w,withArrow:E,arrowSize:_,arrowOffset:T,arrowRadius:S,arrowPosition:D,offset:k,transitionProps:R,multiline:O,events:M,zIndex:F,disabled:L,positionDependencies:H,onClick:V,onMouseEnter:Q,onMouseLeave:K,inline:Z,variant:U,keepMounted:B,vars:q,portalProps:z,mod:G,floatingStrategy:X,middlewares:ne,...ge}=qe("Tooltip",Ste,n),{dir:me}=K0(),ye=P.useRef(null),we=iBe({position:Vme(me,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:M,arrowRef:ye,arrowOffset:T,offset:typeof k=="number"?k+(E?_/2:0):k,positionDependencies:[...H,r],inline:Z,strategy:X,middlewares:ne}),fe=Nt({name:"Tooltip",props:n,classes:G4,className:w,style:b,classNames:p,styles:g,unstyled:v,rootSelector:"tooltip",vars:q,varsResolver:oBe});if(!W0(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const se=zo(we.reference,v4(r),t),Ce=K9e(R,{duration:100,transition:"fade"}),Ae=r.props;return C.jsxs(C.Fragment,{children:[C.jsx(X0,{...z,withinPortal:d,children:C.jsx(eh,{...Ce,keepMounted:B,mounted:!L&&!!we.opened,duration:we.isGroupPhase?10:Ce.duration,children:Ue=>C.jsxs(Re,{...ge,"data-fixed":X==="fixed"||void 0,variant:U,mod:[{multiline:O},G],...we.getFloatingProps({ref:we.floating,className:fe("tooltip").className,style:{...fe("tooltip").style,...Ue,zIndex:F,top:we.y??0,left:we.x??0}}),children:[s,C.jsx(MU,{ref:ye,arrowX:we.arrowX,arrowY:we.arrowY,visible:E,position:we.placement,arrowSize:_,arrowOffset:T,arrowRadius:S,arrowPosition:D,...fe("arrow")})]})})}),P.cloneElement(r,we.getReferenceProps({onClick:V,onMouseEnter:Q,onMouseLeave:K,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[o]:se,className:eo(w,Ae.className),...Ae}))]})});ui.classes=G4;ui.displayName="@mantine/core/Tooltip";ui.Floating=LV;ui.Group=BV;const sBe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Pw=dt((e,t)=>{const n=qe("Select",sBe,e),{classNames:r,styles:i,unstyled:o,vars:s,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:m,data:p,value:g,defaultValue:v,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:E,readOnly:_,disabled:T,filter:S,limit:D,withScrollArea:k,maxDropdownHeight:R,size:O,searchable:M,rightSection:F,checkIconPosition:L,withCheckIcon:H,nothingFoundMessage:V,name:Q,form:K,searchValue:Z,defaultSearchValue:U,onSearchChange:B,allowDeselect:q,error:z,rightSectionPointerEvents:G,id:X,clearable:ne,clearButtonProps:ge,hiddenInputProps:me,renderOption:ye,onClear:we,autoComplete:fe,scrollAreaProps:se,__defaultRightSection:Ce,__clearSection:Ae,__clearable:Ue,chevronColor:Xe,...Le}=n,Ge=P.useMemo(()=>b0e(p),[p]),et=P.useMemo(()=>ZU(Ge),[Ge]),Et=tu(X),[ht,xt,te]=as({value:g,defaultValue:v,finalValue:null,onChange:m}),le=typeof ht=="string"?et[ht]:void 0,be=p6e(le),[ae,pe]=as({value:Z,defaultValue:U,finalValue:le?le.label:"",onChange:B}),Ee=cV({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Ee.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Ee.resetSelectedOption()}}),{resolvedClassNames:$e,resolvedStyles:Ne}=A1({props:n,styles:i,classNames:r});P.useEffect(()=>{b&&Ee.selectFirstOption()},[b,ht]),P.useEffect(()=>{g===null&&pe(""),typeof g=="string"&&le&&((be==null?void 0:be.value)!==le.value||(be==null?void 0:be.label)!==le.label)&&pe(le.label)},[g,le]);const Ze=C.jsx(Jn.ClearButton,{...ge,onClear:()=>{xt(null,null),pe(""),we==null||we()}}),Ke=ne&&!!ht&&!T&&!_;return C.jsxs(C.Fragment,{children:[C.jsxs(Jn,{store:Ee,__staticSelector:"Select",classNames:$e,styles:Ne,unstyled:o,readOnly:_,onOptionSubmit:It=>{w==null||w(It);const zt=q&&et[It].value===ht?null:et[It],Pt=zt?zt.value:null;Pt!==ht&&xt(Pt,zt),!te&&pe(typeof Pt=="string"&&(zt==null?void 0:zt.label)||""),Ee.closeDropdown()},size:O,...E,children:[C.jsx(Jn.Target,{targetType:M?"input":"button",autoComplete:fe,children:C.jsx(wc,{id:Et,ref:t,__defaultRightSection:C.jsx(Jn.Chevron,{size:O,error:z,unstyled:o,color:Xe}),__clearSection:Ze,__clearable:Ke,rightSection:F,rightSectionPointerEvents:G||(Ke?"all":"none"),...Le,size:O,__staticSelector:"Select",disabled:T,readOnly:_||!M,value:ae,onChange:It=>{pe(It.currentTarget.value),Ee.openDropdown(),b&&Ee.selectFirstOption()},onFocus:It=>{M&&Ee.openDropdown(),f==null||f(It)},onBlur:It=>{var zt;M&&Ee.closeDropdown(),pe(ht!=null&&((zt=et[ht])==null?void 0:zt.label)||""),d==null||d(It)},onClick:It=>{M?Ee.openDropdown():Ee.toggleDropdown(),h==null||h(It)},classNames:$e,styles:Ne,unstyled:o,pointer:!M,error:z})}),C.jsx($0e,{data:Ge,hidden:_||T,filter:S,search:ae,limit:D,hiddenWhenEmpty:!V,withScrollArea:k,maxDropdownHeight:R,filterOptions:M&&(le==null?void 0:le.label)!==ae,value:ht,checkIconPosition:L,withCheckIcon:H,nothingFoundMessage:V,unstyled:o,labelId:Le.label?`${Et}-label`:void 0,"aria-label":Le.label?void 0:Le["aria-label"],renderOption:ye,scrollAreaProps:se})]}),C.jsx(Jn.HiddenInput,{value:ht,name:Q,form:K,disabled:T,...me})]})});Pw.classes={...wc.classes,...Jn.classes};Pw.displayName="@mantine/core/Select";function aBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=xo(),o=t===void 0?e:t,s=q0({"--sg-spacing-x":yo(tf(e)),"--sg-spacing-y":yo(tf(o)),"--sg-cols":(c=tf(n))==null?void 0:c.toString()}),a=Gr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=yo(e[d])),typeof o=="object"&&o[d]!==void 0&&(f[d]["--sg-spacing-y"]=yo(o[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=vT(Gr(a),i.breakpoints).filter(f=>Gr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return C.jsx(D1,{styles:s,media:l,selector:r})}function p5(e){return typeof e=="object"&&e!==null?Gr(e):[]}function uBe(e){return e.sort((t,n)=>yT(t)-yT(n))}function lBe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...p5(e),...p5(t),...p5(n)]));return uBe(r)}function cBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,o=q0({"--sg-spacing-x":yo(tf(e)),"--sg-spacing-y":yo(tf(i)),"--sg-cols":(l=tf(n))==null?void 0:l.toString()}),s=lBe({spacing:e,verticalSpacing:t,cols:n}),a=s.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=yo(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=yo(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=s.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return C.jsx(D1,{styles:o,container:u,selector:r})}var hge={container:"m_925c2d2c",root:"m_2415a157"};const fBe={cols:1,spacing:"md",type:"media"},jV=dt((e,t)=>{const n=qe("SimpleGrid",fBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,m=Nt({name:"SimpleGrid",classes:hge,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u}),p=OC();return d==="container"?C.jsxs(C.Fragment,{children:[C.jsx(cBe,{...n,selector:`.${p}`}),C.jsx("div",{...m("container"),children:C.jsx(Re,{ref:t,...m("root",{className:p}),...h})})]}):C.jsxs(C.Fragment,{children:[C.jsx(aBe,{...n,selector:`.${p}`}),C.jsx(Re,{ref:t,...m("root",{className:p}),...h})]})});jV.classes=hge;jV.displayName="@mantine/core/SimpleGrid";const[dBe,Y4]=Us("SliderProvider was not found in tree"),pge=P.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:o,...s},a)=>{const{getStyles:u}=Y4();return C.jsx(Re,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...s})});pge.displayName="@mantine/core/SliderRoot";const mge=P.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:o,onMouseDown:s,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:m,children:p=null,disabled:g},v)=>{const{getStyles:b}=Y4(),[w,E]=P.useState(!1),_=l||o||w||h&&m;return C.jsxs(Re,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:v,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:o,disabled:g},onFocus:T=>{E(!0),typeof f=="function"&&f(T)},onBlur:T=>{E(!1),typeof d=="function"&&d(T)},onTouchStart:s,onMouseDown:s,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[p,C.jsx(eh,{mounted:i!=null&&!!_,transition:"fade",duration:0,...u,children:T=>C.jsx("div",{...b("label",{style:T}),children:i})})]})});mge.displayName="@mantine/core/SliderThumb";function gge({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function hBe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function yge({marks:e,min:t,max:n,disabled:r,value:i,offset:o,inverted:s}){const{getStyles:a}=Y4();if(!e)return null;const u=e.map((l,c)=>P.createElement(Re,{...a("markWrapper"),__vars:{"--mark-offset":`${gge({value:l.value,min:t,max:n})}%`},key:c},C.jsx(Re,{...a("mark"),mod:{filled:hBe({mark:l,value:i,offset:o,inverted:s}),disabled:r}}),l.label&&C.jsx("div",{...a("markLabel"),children:l.label})));return C.jsx("div",{children:u})}yge.displayName="@mantine/core/SliderMarks";function vge({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:o,containerProps:s,...a}){const{getStyles:u}=Y4();return C.jsx(Re,{...u("trackContainer"),mod:{disabled:r},...s,children:C.jsxs(Re,{...u("track"),mod:{inverted:o,disabled:r},children:[C.jsx(Re,{mod:{inverted:o,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,C.jsx(yge,{...a,offset:i,disabled:r,inverted:o})]})})}vge.displayName="@mantine/core/SliderTrack";function pBe({value:e,containerWidth:t,min:n,max:r,step:i,precision:o}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return o!==void 0?Number(l.toFixed(o)):l}function xD(e,t){return parseFloat(e.toFixed(t))}function mBe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function m5(e,t){const r=[...t].sort((i,o)=>i.value-o.value).find(i=>i.value>e);return r?r.value:e}function g5(e,t){const r=[...t].sort((i,o)=>o.value-i.value).find(i=>i.value<e);return r?r.value:e}function Ate(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function Dte(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var bge={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const gBe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},yBe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":An(t,"slider-size"),"--slider-color":n?Yr(n,e):void 0,"--slider-radius":i===void 0?void 0:Mr(i),"--slider-thumb-size":r!==void 0?je(r):"calc(var(--slider-size) * 2)"}}),zV=dt((e,t)=>{const n=qe("Slider",gBe,e),{classNames:r,styles:i,value:o,onChange:s,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:m,marks:p,label:g,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,thumbChildren:_,disabled:T,unstyled:S,scale:D,inverted:k,className:R,style:O,vars:M,hiddenInputProps:F,restrictToMarks:L,thumbProps:H,...V}=n,Q=Nt({name:"Slider",props:n,classes:bge,classNames:r,className:R,styles:i,style:O,vars:M,varsResolver:yBe,unstyled:S}),{dir:K}=K0(),[Z,U]=P.useState(!1),[B,q]=as({value:typeof o=="number"?Yh(o,l,c):o,defaultValue:typeof h=="number"?Yh(h,l,c):h,finalValue:Yh(0,l,c),onChange:s}),z=P.useRef(B),G=P.useRef(null),X=P.useRef(null),ne=gge({value:B,min:l,max:c}),ge=D(B),me=typeof g=="function"?g(ge):g,ye=d??mBe(f),we=P.useCallback(({x:Ae})=>{if(!T){const Ue=pBe({value:Ae,min:l,max:c,step:f,precision:ye});q(L&&(p!=null&&p.length)?Dee(Ue,p.map(Xe=>Xe.value)):Ue),z.current=Ue}},[T,l,c,f,ye,q,p,L]),{ref:fe,active:se}=f6e(we,{onScrubEnd:()=>!T&&(a==null?void 0:a(L&&(p!=null&&p.length)?Dee(z.current,p.map(Ae=>Ae.value)):z.current))},K),Ce=Ae=>{var Ue,Xe,Le,Ge,et,Et;if(!T)switch(Ae.key){case"ArrowUp":{if(Ae.preventDefault(),(Ue=X.current)==null||Ue.focus(),L&&p){const xt=m5(B,p);q(xt),a==null||a(xt);break}const ht=xD(Math.min(Math.max(B+f,l),c),ye);q(ht),a==null||a(ht);break}case"ArrowRight":{if(Ae.preventDefault(),(Xe=X.current)==null||Xe.focus(),L&&p){const xt=K==="rtl"?g5(B,p):m5(B,p);q(xt),a==null||a(xt);break}const ht=xD(Math.min(Math.max(K==="rtl"?B-f:B+f,l),c),ye);q(ht),a==null||a(ht);break}case"ArrowDown":{if(Ae.preventDefault(),(Le=X.current)==null||Le.focus(),L&&p){const xt=g5(B,p);q(xt),a==null||a(xt);break}const ht=xD(Math.min(Math.max(B-f,l),c),ye);q(ht),a==null||a(ht);break}case"ArrowLeft":{if(Ae.preventDefault(),(Ge=X.current)==null||Ge.focus(),L&&p){const xt=K==="rtl"?m5(B,p):g5(B,p);q(xt),a==null||a(xt);break}const ht=xD(Math.min(Math.max(K==="rtl"?B+f:B-f,l),c),ye);q(ht),a==null||a(ht);break}case"Home":{if(Ae.preventDefault(),(et=X.current)==null||et.focus(),L&&p){q(Ate(p)),a==null||a(Ate(p));break}q(l),a==null||a(l);break}case"End":{if(Ae.preventDefault(),(Et=X.current)==null||Et.focus(),L&&p){q(Dte(p)),a==null||a(Dte(p));break}q(c),a==null||a(c);break}}};return C.jsx(dBe,{value:{getStyles:Q},children:C.jsxs(pge,{...V,ref:zo(t,G),onKeyDownCapture:Ce,onMouseDownCapture:()=>{var Ae;return(Ae=G.current)==null?void 0:Ae.focus()},size:u,disabled:T,children:[C.jsx(vge,{inverted:k,offset:0,filled:ne,marks:p,min:l,max:c,value:ge,disabled:T,containerProps:{ref:fe,onMouseEnter:E?()=>U(!0):void 0,onMouseLeave:E?()=>U(!1):void 0},children:C.jsx(mge,{max:c,min:l,value:ge,position:ne,dragging:se,label:me,ref:X,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,isHovered:Z,disabled:T,...H,children:_})}),C.jsx("input",{type:"hidden",name:m,value:ge,...F})]})})});zV.classes=bge;zV.displayName="@mantine/core/Slider";const vBe={},ml=dt((e,t)=>{const{w:n,h:r,miw:i,mih:o,...s}=qe("Space",vBe,e);return C.jsx(Re,{ref:t,...s,w:n,miw:i??n,h:r,mih:o??r})});ml.displayName="@mantine/core/Space";var xge={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const bBe={maxHeight:100,initialState:!1},xBe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),UV=dt((e,t)=>{const n=qe("Spoiler",bBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:m,transitionDuration:p,id:g,expanded:v,onExpandedChange:b,...w}=n,E=Nt({name:"Spoiler",classes:xge,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:xBe}),_=tu(g),T=`${_}-region`,[S,D]=as({value:v,defaultValue:l,finalValue:!1,onChange:b}),{ref:k,height:R}=h6e(),O=S?f:d,M=O!==null&&c<R;return C.jsxs(Re,{...E("root"),id:_,ref:t,"data-has-spoiler":M||void 0,...w,children:[M&&C.jsx(Sw,{component:"button",type:"button",ref:m,onClick:()=>D(!S),"aria-expanded":S,"aria-controls":T,...E("control"),children:O}),C.jsx("div",{...E("content",{style:{maxHeight:S?R?je(R):void 0:je(c)}}),"data-reduce-motion":!0,role:"region",id:T,children:C.jsx("div",{ref:k,children:h})})]})});UV.classes=xge;UV.displayName="@mantine/core/Spoiler";var wge={root:"m_6d731127"};const wBe={gap:"md",align:"stretch",justify:"flex-start"},EBe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":yo(t),"--stack-align":n,"--stack-justify":r}}),Un=dt((e,t)=>{const n=qe("Stack",wBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,m=Nt({name:"Stack",props:n,classes:wge,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:EBe});return C.jsx(Re,{ref:t,...m("root"),variant:d,...h})});Un.classes=wge;Un.displayName="@mantine/core/Stack";const Ege=P.createContext(null),_Be=Ege.Provider,TBe=()=>P.useContext(Ege),CBe={},VV=dt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,readOnly:u,...l}=qe("SwitchGroup",CBe,e),[c,f]=as({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const m=h.currentTarget.value;!u&&f(c.includes(m)?c.filter(p=>p!==m):[...c,m])};return C.jsx(_Be,{value:{value:c,onChange:d,size:o},children:C.jsx(Vr.Wrapper,{size:o,ref:t,...s,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:C.jsx(dV,{role:"group",children:a})})})});VV.classes=Vr.Wrapper.classes;VV.displayName="@mantine/core/SwitchGroup";var _ge={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const SBe={labelPosition:"right"},ABe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Mr(t),"--switch-height":An(r,"switch-height"),"--switch-width":An(r,"switch-width"),"--switch-thumb-size":An(r,"switch-thumb-size"),"--switch-label-font-size":An(r,"switch-label-font-size"),"--switch-track-label-padding":An(r,"switch-track-label-padding"),"--switch-color":n?Yr(n,e):void 0}}),Ry=dt((e,t)=>{const n=qe("Switch",SBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:m,radius:p,wrapperProps:g,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:_,description:T,error:S,disabled:D,variant:k,rootRef:R,mod:O,...M}=n,F=TBe(),L=m||(F==null?void 0:F.size),H=Nt({name:"Switch",props:n,classes:_ge,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:ABe}),{styleProps:V,rest:Q}=k1(M),K=tu(h),Z=F?{checked:F.value.includes(Q.value),onChange:F.onChange}:{},[U,B]=as({value:Z.checked??b,defaultValue:w,finalValue:!1});return C.jsxs(N4,{...H("root"),__staticSelector:"Switch",__stylesApiProps:n,id:K,size:L,labelPosition:_,label:c,description:T,error:S,disabled:D,bodyElement:"label",labelElement:"span",classNames:r,styles:s,unstyled:a,"data-checked":Z.checked||b||void 0,variant:k,ref:R,mod:O,...V,...g,children:[C.jsx("input",{...Q,disabled:D,checked:U,"data-checked":Z.checked||b||void 0,onChange:q=>{var z;F?(z=Z.onChange)==null||z.call(Z,q):E==null||E(q),B(q.currentTarget.checked)},id:K,ref:t,type:"checkbox",role:"switch",...H("input")}),C.jsxs(Re,{"aria-hidden":"true",mod:{error:S,"label-position":_,"without-labels":!d&&!f},...H("track"),children:[C.jsx(Re,{component:"span",mod:"reduce-motion",...H("thumb"),children:v}),C.jsx("span",{...H("trackLabel"),children:U?d:f})]})]})});Ry.classes={..._ge,...S0e};Ry.displayName="@mantine/core/Switch";Ry.Group=VV;const[DBe,kBe]=Us("Table component was not found in the tree");var UC={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function IBe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function R1(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=dt((i,o)=>{const s=qe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=s,d=kBe();return C.jsx(Re,{component:e,ref:o,...IBe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:s}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=UC,r}const eB=R1("th",{columnBorder:!0}),Tge=R1("td",{columnBorder:!0}),OI=R1("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Cge=R1("thead",{stickyHeader:!0}),Sge=R1("tbody"),Age=R1("tfoot"),Dge=R1("caption",{captionSide:!0});function HV({data:e}){return C.jsxs(C.Fragment,{children:[e.caption&&C.jsx(Dge,{children:e.caption}),e.head&&C.jsx(Cge,{children:C.jsx(OI,{children:e.head.map((t,n)=>C.jsx(eB,{children:t},n))})}),e.body&&C.jsx(Sge,{children:e.body.map((t,n)=>C.jsx(OI,{children:t.map((r,i)=>C.jsx(Tge,{children:r},i))},n))}),e.foot&&C.jsx(Age,{children:C.jsx(OI,{children:e.foot.map((t,n)=>C.jsx(eB,{children:t},n))})})]})}HV.displayName="@mantine/core/TableDataRenderer";const RBe={type:"scrollarea"},NBe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":je(t),"--table-overflow":n==="native"?"auto":void 0}}),qV=dt((e,t)=>{const n=qe("TableScrollContainer",RBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Nt({name:"TableScrollContainer",classes:UC,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:NBe,rootSelector:"scrollContainer"});return C.jsx(Re,{component:f==="scrollarea"?wp:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:C.jsx("div",{...h("scrollContainerInner"),children:l})})});qV.classes=UC;qV.displayName="@mantine/core/TableScrollContainer";const PBe={withRowBorders:!0,verticalSpacing:7},OBe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:o,stripedColor:s,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":yo(r),"--table-vertical-spacing":yo(i),"--table-border-color":o?Yr(o,e):void 0,"--table-striped-color":u&&s?Yr(s,e):void 0,"--table-highlight-on-hover-color":l&&a?Yr(a,e):void 0,"--table-sticky-header-offset":f?je(c):void 0}}),tn=dt((e,t)=>{const n=qe("Table",PBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:m,highlightOnHover:p,withColumnBorders:g,withRowBorders:v,withTableBorder:b,borderColor:w,layout:E,variant:_,data:T,children:S,stickyHeader:D,stickyHeaderOffset:k,mod:R,tabularNums:O,...M}=n,F=Nt({name:"Table",props:n,className:i,style:o,classes:UC,classNames:r,styles:s,unstyled:a,rootSelector:"table",vars:u,varsResolver:OBe});return C.jsx(DBe,{value:{getStyles:F,stickyHeader:D,striped:m===!0?"odd":m||void 0,highlightOnHover:p,withColumnBorders:g,withRowBorders:v,captionSide:f||"bottom"},children:C.jsx(Re,{component:"table",variant:_,ref:t,mod:[{"data-with-table-border":b,"data-tabular-nums":O},R],...F("table"),...M,children:S||!!T&&C.jsx(HV,{data:T})})})});tn.classes=UC;tn.displayName="@mantine/core/Table";tn.Td=Tge;tn.Th=eB;tn.Tr=OI;tn.Thead=Cge;tn.Tbody=Sge;tn.Tfoot=Age;tn.Caption=Dge;tn.ScrollContainer=qV;tn.DataRenderer=HV;const[FBe,WV]=Us("Tabs component was not found in the tree");var VC={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const MBe={},GV=dt((e,t)=>{const n=qe("TabsList",MBe,e),{children:r,className:i,grow:o,justify:s,classNames:a,styles:u,style:l,mod:c,...f}=n,d=WV();return C.jsx(Re,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:o,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":s},children:r})});GV.classes=VC;GV.displayName="@mantine/core/TabsList";const $Be={},YV=dt((e,t)=>{const n=qe("TabsPanel",$Be,e),{children:r,className:i,value:o,classNames:s,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=WV(),h=d.value===o,m=d.keepMounted||c||h?r:null;return C.jsx(Re,{...f,...d.getStyles("panel",{className:i,classNames:s,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(o),"aria-labelledby":d.getTabId(o),children:m})});YV.classes=VC;YV.displayName="@mantine/core/TabsPanel";const LBe={},KV=dt((e,t)=>{const n=qe("TabsTab",LBe,e),{className:r,children:i,rightSection:o,leftSection:s,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:m,vars:p,mod:g,tabIndex:v,...b}=n,w=xo(),{dir:E}=K0(),_=WV(),T=a===_.value,S=k=>{_.onChange(_.allowTabDeactivation&&a===_.value?null:a),u==null||u(k)},D={classNames:h,styles:m,props:n};return C.jsxs(xl,{...b,..._.getStyles("tab",{className:r,style:d,variant:_.variant,...D}),disabled:c,unstyled:_.unstyled,variant:_.variant,mod:[{active:T,disabled:c,orientation:_.orientation,inverted:_.inverted,placement:_.orientation==="vertical"&&_.placement},g],ref:t,role:"tab",id:_.getTabId(a),"aria-selected":T,tabIndex:v!==void 0?v:T||_.value===null?0:-1,"aria-controls":_.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?Yr(f,w):void 0},onKeyDown:lU({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:E,onKeyDown:l}),children:[s&&C.jsx("span",{..._.getStyles("tabSection",D),"data-position":"left",children:s}),i&&C.jsx("span",{..._.getStyles("tabLabel",D),children:i}),o&&C.jsx("span",{..._.getStyles("tabSection",D),"data-position":"right",children:o})]})});KV.classes=VC;KV.displayName="@mantine/core/TabsTab";const kte="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",BBe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},jBe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Mr(t),"--tabs-color":Yr(n,e),"--tabs-text-color":xw(r,e)?S1({color:n,theme:e,autoContrast:r}):void 0}}),Xn=dt((e,t)=>{const n=qe("Tabs",BBe,e),{defaultValue:r,value:i,onChange:o,orientation:s,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:m,inverted:p,placement:g,keepMounted:v,classNames:b,styles:w,unstyled:E,className:_,style:T,vars:S,autoContrast:D,mod:k,...R}=n,O=tu(l),[M,F]=as({value:i,defaultValue:r,finalValue:null,onChange:o}),L=Nt({name:"Tabs",props:n,classes:VC,className:_,style:T,classNames:b,styles:w,unstyled:E,vars:S,varsResolver:jBe});return C.jsx(FBe,{value:{placement:g,value:M,orientation:s,id:O,loop:u,activateTabWithKeyboard:c,getTabId:wN(`${O}-tab`,kte),getPanelId:wN(`${O}-panel`,kte),onChange:F,allowTabDeactivation:f,variant:d,color:h,radius:m,inverted:p,keepMounted:v,unstyled:E,getStyles:L},children:C.jsx(Re,{ref:t,id:O,variant:d,mod:[{orientation:s,inverted:s==="horizontal"&&p,placement:s==="vertical"&&g},k],...L("root"),...R,children:a})})});Xn.classes=VC;Xn.displayName="@mantine/core/Tabs";Xn.Tab=KV;Xn.Panel=YV;Xn.List=GV;const zBe={},Kh=dt((e,t)=>{const n=qe("TextInput",zBe,e);return C.jsx(wc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Kh.classes=wc.classes;Kh.displayName="@mantine/core/TextInput";const UBe=["h1","h2","h3","h4","h5","h6"],VBe=["xs","sm","md","lg","xl"];function HBe(e,t){const n=t!==void 0?t:`h${e}`;return UBe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:VBe.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:je(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var kge={root:"m_8a5d1357"};const qBe={order:1},WBe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const o=HBe(t,n);return{root:{"--title-fw":o.fontWeight,"--title-lh":o.lineHeight,"--title-fz":o.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Ui=dt((e,t)=>{const n=qe("Title",qBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:m,...p}=n,g=Nt({name:"Title",props:n,classes:kge,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:WBe});return[1,2,3,4,5,6].includes(u)?C.jsx(Re,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},m],size:c,...p}):null});Ui.classes=kge;Ui.displayName="@mantine/core/Title";function GBe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(o=>o(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function YBe(e){return P.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function KBe(e,t,n){const r=[],i=[],o={};for(const s of e){const a=s.position||t;o[a]=o[a]||0,o[a]+=1,o[a]<=n?i.push(s):r.push(s)}return{notifications:i,queue:r}}const XBe=()=>GBe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),N1=XBe(),QBe=(e=N1)=>YBe(e);function Ow(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=KBe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function JBe(e,t=N1){const n=e.id||Hb();return Ow(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function Ige(e,t=N1){return Ow(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function ZBe(e,t=N1){return Ow(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function e7e(e=N1){Ow(e,()=>[])}function t7e(e=N1){Ow(e,t=>t.slice(0,e.getState().limit))}const P1={show:JBe,hide:Ige,update:ZBe,clean:e7e,cleanQueue:t7e,updateState:Ow};function tB(){return tB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tB.apply(null,arguments)}function Rge(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function nB(e,t){return nB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},nB(e,t)}function Nge(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,nB(e,t)}var y5={exports:{}},v5,Ite;function n7e(){if(Ite)return v5;Ite=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return v5=e,v5}var b5,Rte;function r7e(){if(Rte)return b5;Rte=1;var e=n7e();function t(){}function n(){}return n.resetWarningCache=t,b5=function(){function r(s,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},b5}var Nte;function i7e(){return Nte||(Nte=1,y5.exports=r7e()()),y5.exports}var o7e=i7e();const Pte=Fl(o7e),Ote={disabled:!1},RN=ur.createContext(null);var s7e=function(t){return t.scrollTop},G_="unmounted",Zg="exited",ey="entering",xb="entered",rB="exiting",qp=function(e){Nge(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,u;return o.appearStatus=null,r.in?a?(u=Zg,o.appearStatus=ey):u=xb:r.unmountOnExit||r.mountOnEnter?u=G_:u=Zg,o.state={status:u},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===G_?{status:Zg}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==ey&&s!==xb&&(o=ey):(s===ey||s===xb)&&(o=rB)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===ey){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:W_.findDOMNode(this);s&&s7e(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zg&&this.setState({status:G_})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[W_.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!s||Ote.disabled){this.safeSetState({status:xb},function(){o.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:ey},function(){o.props.onEntering(l,c),o.onTransitionEnd(d,function(){o.safeSetState({status:xb},function(){o.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:W_.findDOMNode(this);if(!o||Ote.disabled){this.safeSetState({status:Zg},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:rB},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:Zg},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:W_.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===G_)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=Rge(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ur.createElement(RN.Provider,{value:null},typeof s=="function"?s(i,a):ur.cloneElement(ur.Children.only(s),a))},t}(ur.Component);qp.contextType=RN;qp.propTypes={};function Hv(){}qp.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Hv,onEntering:Hv,onEntered:Hv,onExit:Hv,onExiting:Hv,onExited:Hv};qp.UNMOUNTED=G_;qp.EXITED=Zg;qp.ENTERING=ey;qp.ENTERED=xb;qp.EXITING=rB;function a7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XV(e,t){var n=function(o){return t&&P.isValidElement(o)?t(o):o},r=Object.create(null);return e&&P.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function u7e(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var o in e)o in t?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var u in t){if(r[u])for(s=0;s<r[u].length;s++){var l=r[u][s];a[r[u][s]]=n(l)}a[u]=n(u)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function wy(e,t,n){return n[t]!=null?n[t]:e.props[t]}function l7e(e,t){return XV(e.children,function(n){return P.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:wy(n,"appear",e),enter:wy(n,"enter",e),exit:wy(n,"exit",e)})})}function c7e(e,t,n){var r=XV(e.children),i=u7e(t,r);return Object.keys(i).forEach(function(o){var s=i[o];if(P.isValidElement(s)){var a=o in t,u=o in r,l=t[o],c=P.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[o]=P.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:wy(s,"exit",e),enter:wy(s,"enter",e)}):!u&&a&&!c?i[o]=P.cloneElement(s,{in:!1}):u&&a&&P.isValidElement(l)&&(i[o]=P.cloneElement(s,{onExited:n.bind(null,s),in:l.props.in,exit:wy(s,"exit",e),enter:wy(s,"enter",e)}))}}),i}var f7e=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},d7e={component:"div",childFactory:function(t){return t}},Pm=function(e){Nge(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=o.handleExited.bind(a7e(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,u=o.firstRender;return{children:u?l7e(i,a):c7e(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=XV(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var u=tB({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=Rge(i,["component","childFactory"]),u=this.state.contextValue,l=f7e(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?ur.createElement(RN.Provider,{value:u},l):ur.createElement(RN.Provider,{value:u},ur.createElement(o,a,l))},t}(ur.Component);Pm.propTypes={};Pm.defaultProps=d7e;const Pge=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function h7e(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),Pge.reduce((n,r)=>(n[r]=[],n),{}))}const Fte={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},p7e={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function m7e({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,o]=n.split("-"),s=o==="center"?`${i}-center`:o,a={opacity:0,maxHeight:t,transform:Fte[s],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:p7e[s]},l={opacity:0,maxHeight:0,transform:Fte[s]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function g7e(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const Oge=P.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:o,message:s,...a}=e,u=g7e(n,e.autoClose),l=P.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return P.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),P.useEffect(()=>(d(),c),[u]),C.jsx(NV,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:s})});Oge.displayName="@mantine/notifications/NotificationContainer";var Fge={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const y7e=qp,v7e={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:zu("overlay"),store:N1,withinPortal:!0},b7e=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":je(n)}}),Wp=dt((e,t)=>{const n=qe("Notifications",v7e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:m,zIndex:p,store:g,portalProps:v,withinPortal:b,...w}=n,E=xo(),_=QBe(g),T=u6e(),S=y4(),D=P.useRef({}),k=P.useRef(0),O=(E.respectReducedMotion?S:!1)?1:f,M=Nt({name:"Notifications",classes:Fge,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:b7e});P.useEffect(()=>{g==null||g.updateState(H=>({...H,limit:m||5,defaultPosition:l}))},[m,l]),Md(()=>{_.notifications.length>k.current&&setTimeout(()=>T(),0),k.current=_.notifications.length},[_.notifications]);const F=h7e(_.notifications,l),L=Pge.reduce((H,V)=>(H[V]=F[V].map(({style:Q,...K})=>C.jsx(y7e,{timeout:O,onEnter:()=>D.current[K.id].offsetHeight,nodeRef:{current:D.current[K.id]},children:Z=>C.jsx(Oge,{ref:U=>{D.current[K.id]=U},data:K,onHide:U=>Ige(U,g),autoClose:c,...M("notification",{style:{...m7e({state:Z,position:V,transitionDuration:O,maxHeight:h}),...Q}})})},K.id)),H),{});return C.jsxs(X0,{withinPortal:b,...v,children:[C.jsx(Re,{...M("root"),"data-position":"top-center",ref:t,...w,children:C.jsx(Pm,{children:L["top-center"]})}),C.jsx(Re,{...M("root"),"data-position":"top-left",...w,children:C.jsx(Pm,{children:L["top-left"]})}),C.jsx(Re,{...M("root",{className:gx.classNames.fullWidth}),"data-position":"top-right",...w,children:C.jsx(Pm,{children:L["top-right"]})}),C.jsx(Re,{...M("root",{className:gx.classNames.fullWidth}),"data-position":"bottom-right",...w,children:C.jsx(Pm,{children:L["bottom-right"]})}),C.jsx(Re,{...M("root"),"data-position":"bottom-left",...w,children:C.jsx(Pm,{children:L["bottom-left"]})}),C.jsx(Re,{...M("root"),"data-position":"bottom-center",...w,children:C.jsx(Pm,{children:L["bottom-center"]})})]})});Wp.classes=Fge;Wp.displayName="@mantine/notifications/Notifications";Wp.show=P1.show;Wp.hide=P1.hide;Wp.update=P1.update;Wp.clean=P1.clean;Wp.cleanQueue=P1.cleanQueue;Wp.updateState=P1.updateState;const Mge=P.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Wi=()=>P.useContext(Mge);function x7e({children:e}){const[t,n]=P.useState(void 0),r=P.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return C.jsx(Mge.Provider,{value:r,children:e})}var i_={},Mte;function w7e(){if(Mte)return i_;Mte=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.parse=s,i_.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function s(d,h){const m=new o,p=d.length;if(p<2)return m;const g=(h==null?void 0:h.decode)||c;let v=0;do{const b=d.indexOf("=",v);if(b===-1)break;const w=d.indexOf(";",v),E=w===-1?p:w;if(b>E){v=d.lastIndexOf(";",b-1)+1;continue}const _=a(d,v,b),T=u(d,b,_),S=d.slice(_,T);if(m[S]===void 0){let D=a(d,b+1,E),k=u(d,E,D);const R=g(d.slice(D,k));m[S]=R}v=E+1}while(v<p);return m}function a(d,h,m){do{const p=d.charCodeAt(h);if(p!==32&&p!==9)return h}while(++h<m);return m}function u(d,h,m){for(;h>m;){const p=d.charCodeAt(--h);if(p!==32&&p!==9)return h+1}return m}function l(d,h,m){const p=(m==null?void 0:m.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const g=p(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let v=d+"="+g;if(!m)return v;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);v+="; Max-Age="+m.maxAge}if(m.domain){if(!n.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);v+="; Domain="+m.domain}if(m.path){if(!r.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);v+="; Path="+m.path}if(m.expires){if(!f(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);v+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(v+="; HttpOnly"),m.secure&&(v+="; Secure"),m.partitioned&&(v+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return v}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return i_}w7e();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $te="popstate";function E7e(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return iB("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:TT(i)}return T7e(t,n,null,e)}function vi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _7e(){return Math.random().toString(36).substring(2,10)}function Lte(e,t){return{usr:e.state,key:e.key,idx:t}}function iB(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Fw(t):t,state:n,key:t&&t.key||r||_7e()}}function TT({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fw(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function T7e(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",u=null,l=c();l==null&&(l=0,s.replaceState({...s.state,idx:l},""));function c(){return(s.state||{idx:null}).idx}function f(){a="POP";let g=c(),v=g==null?null:g-l;l=g,u&&u({action:a,location:p.location,delta:v})}function d(g,v){a="PUSH";let b=iB(p.location,g,v);l=c()+1;let w=Lte(b,l),E=p.createHref(b);try{s.pushState(w,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(E)}o&&u&&u({action:a,location:p.location,delta:1})}function h(g,v){a="REPLACE";let b=iB(p.location,g,v);l=c();let w=Lte(b,l),E=p.createHref(b);s.replaceState(w,"",E),o&&u&&u({action:a,location:p.location,delta:0})}function m(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:TT(g);return b=b.replace(/ $/,"%20"),vi(v,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,v)}let p={get action(){return a},get location(){return e(i,s)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener($te,f),u=g,()=>{i.removeEventListener($te,f),u=null}},createHref(g){return t(i,g)},createURL:m,encodeLocation(g){let v=m(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(g){return s.go(g)}};return p}function $ge(e,t,n="/"){return C7e(e,t,n,!1)}function C7e(e,t,n,r){let i=typeof t=="string"?Fw(t):t,o=y0(i.pathname||"/",n);if(o==null)return null;let s=Lge(e);S7e(s);let a=null;for(let u=0;a==null&&u<s.length;++u){let l=$7e(o);a=F7e(s[u],l,r)}return a}function Lge(e,t=[],n=[],r=""){let i=(o,s,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(vi(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=up([r,u.relativePath]),c=n.concat(u);o.children&&o.children.length>0&&(vi(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),Lge(o.children,t,c,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:P7e(l,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let u of Bge(o.path))i(o,s,u)}),t}function Bge(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Bge(r.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function S7e(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:O7e(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var A7e=/^:[\w-]+$/,D7e=3,k7e=2,I7e=1,R7e=10,N7e=-2,Bte=e=>e==="*";function P7e(e,t){let n=e.split("/"),r=n.length;return n.some(Bte)&&(r+=N7e),t&&(r+=k7e),n.filter(i=>!Bte(i)).reduce((i,o)=>i+(A7e.test(o)?D7e:o===""?I7e:R7e),r)}function O7e(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function F7e(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",f=NN({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=NN({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:up([o,f.pathname]),pathnameBase:z7e(up([o,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(o=up([o,f.pathnameBase]))}return s}function NN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=M7e(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let m=a[d]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:e}}function M7e(e,t=!1,n=!0){hc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function $7e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function y0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function L7e(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Fw(e):e;return{pathname:n?n.startsWith("/")?n:B7e(n,t):t,search:U7e(r),hash:V7e(i)}}function B7e(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function x5(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j7e(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function QV(e){let t=j7e(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function JV(e,t,n,r=!1){let i;typeof e=="string"?i=Fw(e):(i={...e},vi(!i.pathname||!i.pathname.includes("?"),x5("?","pathname","search",i)),vi(!i.pathname||!i.pathname.includes("#"),x5("#","pathname","hash",i)),vi(!i.search||!i.search.includes("#"),x5("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=t.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=L7e(i,a),l=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var up=e=>e.join("/").replace(/\/\/+/g,"/"),z7e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U7e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,V7e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function H7e(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var jge=["POST","PUT","PATCH","DELETE"];new Set(jge);var q7e=["GET",...jge];new Set(q7e);var Mw=P.createContext(null);Mw.displayName="DataRouter";var K4=P.createContext(null);K4.displayName="DataRouterState";var zge=P.createContext({isTransitioning:!1});zge.displayName="ViewTransition";var W7e=P.createContext(new Map);W7e.displayName="Fetchers";var G7e=P.createContext(null);G7e.displayName="Await";var If=P.createContext(null);If.displayName="Navigation";var HC=P.createContext(null);HC.displayName="Location";var _c=P.createContext({outlet:null,matches:[],isDataRoute:!1});_c.displayName="Route";var ZV=P.createContext(null);ZV.displayName="RouteError";function eH(e,{relative:t}={}){vi($w(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(If),{hash:i,pathname:o,search:s}=qC(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:up([n,o])),r.createHref({pathname:a,search:s,hash:i})}function $w(){return P.useContext(HC)!=null}function Tc(){return vi($w(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(HC).location}var Uge="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vge(e){P.useContext(If).static||P.useLayoutEffect(e)}function Cc(){let{isDataRoute:e}=P.useContext(_c);return e?aje():Y7e()}function Y7e(){vi($w(),"useNavigate() may be used only in the context of a <Router> component.");let e=P.useContext(Mw),{basename:t,navigator:n}=P.useContext(If),{matches:r}=P.useContext(_c),{pathname:i}=Tc(),o=JSON.stringify(QV(r)),s=P.useRef(!1);return Vge(()=>{s.current=!0}),P.useCallback((u,l={})=>{if(hc(s.current,Uge),!s.current)return;if(typeof u=="number"){n.go(u);return}let c=JV(u,JSON.parse(o),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:up([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,o,i,e])}var K7e=P.createContext(null);function X7e(e){let t=P.useContext(_c).outlet;return t&&P.createElement(K7e.Provider,{value:e},t)}function _l(){let{matches:e}=P.useContext(_c),t=e[e.length-1];return t?t.params:{}}function qC(e,{relative:t}={}){let{matches:n}=P.useContext(_c),{pathname:r}=Tc(),i=JSON.stringify(QV(n));return P.useMemo(()=>JV(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function Hge(e,t){return qge(e,t)}function qge(e,t,n,r){var b;vi($w(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=P.useContext(If),{matches:s}=P.useContext(_c),a=s[s.length-1],u=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let w=f&&f.path||"";Wge(l,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let d=Tc(),h;if(t){let w=typeof t=="string"?Fw(t):t;vi(c==="/"||((b=w.pathname)==null?void 0:b.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),h=w}else h=d;let m=h.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=!o&&n&&n.matches&&n.matches.length>0?n.matches:$ge(e,{pathname:p});hc(f||g!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),hc(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=tje(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:up([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:up([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&v?P.createElement(HC.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},v):v}function Q7e(){let e=sje(),t=H7e(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,s)}var J7e=P.createElement(Q7e,null),Z7e=class extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(_c.Provider,{value:this.props.routeContext},P.createElement(ZV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eje({routeContext:e,match:t,children:n}){let r=P.useContext(Mw);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(_c.Provider,{value:e},n)}function tje(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id])!==void 0);vi(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let s=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,m=null;n&&(f=o&&l.route.id?o[l.route.id]:void 0,h=l.route.errorElement||J7e,s&&(a<0&&c===0?(Wge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,m=null):a===c&&(d=!0,m=l.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,c+1)),g=()=>{let v;return f?v=h:d?v=m:l.route.Component?v=P.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=u,P.createElement(eje,{match:l,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?P.createElement(Z7e,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function tH(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nje(e){let t=P.useContext(Mw);return vi(t,tH(e)),t}function rje(e){let t=P.useContext(K4);return vi(t,tH(e)),t}function ije(e){let t=P.useContext(_c);return vi(t,tH(e)),t}function nH(e){let t=ije(e),n=t.matches[t.matches.length-1];return vi(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function oje(){return nH("useRouteId")}function sje(){var r;let e=P.useContext(ZV),t=rje("useRouteError"),n=nH("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function aje(){let{router:e}=nje("useNavigate"),t=nH("useNavigate"),n=P.useRef(!1);return Vge(()=>{n.current=!0}),P.useCallback(async(i,o={})=>{hc(n.current,Uge),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var jte={};function Wge(e,t,n){!t&&!jte[e]&&(jte[e]=!0,hc(!1,n))}P.memo(uje);function uje({routes:e,future:t,state:n}){return qge(e,void 0,n,t)}function rH({to:e,replace:t,state:n,relative:r}){vi($w(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(If);hc(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=P.useContext(_c),{pathname:s}=Tc(),a=Cc(),u=JV(e,QV(o),s,r==="path"),l=JSON.stringify(u);return P.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function lje(e){return X7e(e.context)}function ty(e){vi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cje({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){vi(!$w(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=P.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=Fw(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=P.useMemo(()=>{let m=y0(u,s);return m==null?null:{location:{pathname:m,search:l,hash:c,state:f,key:d},navigationType:r}},[s,u,l,c,f,d,r]);return hc(h!=null,`<Router basename="${s}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:P.createElement(If.Provider,{value:a},P.createElement(HC.Provider,{children:t,value:h}))}function fje({children:e,location:t}){return Hge(oB(e),t)}function oB(e,t=[]){let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let o=[...t,i];if(r.type===P.Fragment){n.push.apply(n,oB(r.props.children,o));return}vi(r.type===ty,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=oB(r.props.children,o)),n.push(s)}),n}var FI="get",MI="application/x-www-form-urlencoded";function X4(e){return e!=null&&typeof e.tagName=="string"}function dje(e){return X4(e)&&e.tagName.toLowerCase()==="button"}function hje(e){return X4(e)&&e.tagName.toLowerCase()==="form"}function pje(e){return X4(e)&&e.tagName.toLowerCase()==="input"}function mje(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gje(e,t){return e.button===0&&(!t||t==="_self")&&!mje(e)}function sB(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function yje(e,t){let n=sB(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}var wD=null;function vje(){if(wD===null)try{new FormData(document.createElement("form"),0),wD=!1}catch{wD=!0}return wD}var bje=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function w5(e){return e!=null&&!bje.has(e)?(hc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${MI}"`),null):e}function xje(e,t){let n,r,i,o,s;if(hje(e)){let a=e.getAttribute("action");r=a?y0(a,t):null,n=e.getAttribute("method")||FI,i=w5(e.getAttribute("enctype"))||MI,o=new FormData(e)}else if(dje(e)||pje(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?y0(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||FI,i=w5(e.getAttribute("formenctype"))||w5(a.getAttribute("enctype"))||MI,o=new FormData(a,e),!vje()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";o.append(`${d}x`,"0"),o.append(`${d}y`,"0")}else l&&o.append(l,f)}}else{if(X4(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=FI,r=null,i=MI,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function iH(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function wje(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Eje(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _je(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await wje(o,n);return s.links?s.links():[]}return[]}));return Aje(r.flat(1).filter(Eje).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function zte(e,t,n,r,i,o){let s=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return o==="assets"?t.filter((u,l)=>s(u,l)||a(u,l)):o==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(s(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function Tje(e,t){return Cje(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Cje(e){return[...new Set(e)]}function Sje(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Aje(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(Sje(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function Dje(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function kje(){let e=P.useContext(Mw);return iH(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ije(){let e=P.useContext(K4);return iH(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var oH=P.createContext(void 0);oH.displayName="FrameworkContext";function Gge(){let e=P.useContext(oH);return iH(e,"You must render this element inside a <HydratedRouter> element"),e}function Rje(e,t){let n=P.useContext(oH),[r,i]=P.useState(!1),[o,s]=P.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=P.useRef(null);P.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let p=v=>{v.forEach(b=>{s(b.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),P.useEffect(()=>{if(r){let p=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(p)}}},[r]);let h=()=>{i(!0)},m=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,d,{}]:[o,d,{onFocus:o_(a,h),onBlur:o_(u,m),onMouseEnter:o_(l,h),onMouseLeave:o_(c,m),onTouchStart:o_(f,h)}]:[!1,d,{}]}function o_(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Nje({page:e,...t}){let{router:n}=kje(),r=P.useMemo(()=>$ge(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?P.createElement(Oje,{page:e,matches:r,...t}):null}function Pje(e){let{manifest:t,routeModules:n}=Gge(),[r,i]=P.useState([]);return P.useEffect(()=>{let o=!1;return _je(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function Oje({page:e,matches:t,...n}){let r=Tc(),{manifest:i,routeModules:o}=Gge(),{loaderData:s,matches:a}=Ije(),u=P.useMemo(()=>zte(e,t,a,i,r,"data"),[e,t,a,i,r]),l=P.useMemo(()=>zte(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=P.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,m=!1;if(t.forEach(g=>{var b;let v=i.routes[g.route.id];!v||!v.hasLoader||(!u.some(w=>w.route.id===g.route.id)&&g.route.id in s&&((b=o[g.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?m=!0:h.add(g.route.id))}),h.size===0)return[];let p=Dje(e);return m&&h.size>0&&p.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[p.pathname+p.search]},[s,r,i,u,t,e,o]),f=P.useMemo(()=>Tje(l,i),[l,i]),d=Pje(l);return P.createElement(P.Fragment,null,c.map(h=>P.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>P.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:m})=>P.createElement("link",{key:h,...m})))}function Fje(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Yge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yge&&(window.__reactRouterVersion="7.1.5")}catch{}function Mje({basename:e,children:t,window:n}){let r=P.useRef();r.current==null&&(r.current=E7e({window:n,v5Compat:!0}));let i=r.current,[o,s]=P.useState({action:i.action,location:i.location}),a=P.useCallback(u=>{P.startTransition(()=>s(u))},[s]);return P.useLayoutEffect(()=>i.listen(a),[i,a]),P.createElement(cje,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var Kge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xge=P.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:m}=P.useContext(If),p=typeof l=="string"&&Kge.test(l),g,v=!1;if(typeof l=="string"&&p&&(g=l,Yge))try{let k=new URL(window.location.href),R=l.startsWith("//")?new URL(k.protocol+l):new URL(l),O=y0(R.pathname,m);R.origin===k.origin&&O!=null?l=O+R.search+R.hash:v=!0}catch{hc(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=eH(l,{relative:i}),[w,E,_]=Rje(r,d),T=jje(l,{replace:s,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function S(k){t&&t(k),k.defaultPrevented||T(k)}let D=P.createElement("a",{...d,..._,href:g||b,onClick:v||o?t:S,ref:Fje(h,E),target:u,"data-discover":!p&&n==="render"?"true":void 0});return w&&!p?P.createElement(P.Fragment,null,D,P.createElement(Nje,{page:b})):D});Xge.displayName="Link";var $je=P.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:u,...l},c){let f=qC(s,{relative:l.relative}),d=Tc(),h=P.useContext(K4),{navigator:m,basename:p}=P.useContext(If),g=h!=null&&qje(f)&&a===!0,v=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=d.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&p&&(w=y0(w,p)||w);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=b===v||!i&&b.startsWith(v)&&b.charAt(E)==="/",T=w!=null&&(w===v||!i&&w.startsWith(v)&&w.charAt(v.length)==="/"),S={isActive:_,isPending:T,isTransitioning:g},D=_?t:void 0,k;typeof r=="function"?k=r(S):k=[r,_?"active":null,T?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(S):o;return P.createElement(Xge,{...l,"aria-current":D,className:k,ref:c,style:R,to:s,viewTransition:a},typeof u=="function"?u(S):u)});$je.displayName="NavLink";var Lje=P.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=FI,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let m=Vje(),p=Hje(a,{relative:l}),g=s.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&Kge.test(a),b=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,_=(E==null?void 0:E.getAttribute("formmethod"))||s;m(E||w.currentTarget,{fetcherKey:t,method:_,navigate:n,replace:i,state:o,relative:l,preventScrollReset:c,viewTransition:f})};return P.createElement("form",{ref:h,method:g,action:p,onSubmit:r?u:b,...d,"data-discover":!v&&e==="render"?"true":void 0})});Lje.displayName="Form";function Bje(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qge(e){let t=P.useContext(Mw);return vi(t,Bje(e)),t}function jje(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Cc(),u=Tc(),l=qC(e,{relative:o});return P.useCallback(c=>{if(gje(c,t)){c.preventDefault();let f=n!==void 0?n:TT(u)===TT(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[u,a,l,n,r,t,e,i,o,s])}function Gp(e){hc(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=P.useRef(sB(e)),n=P.useRef(!1),r=Tc(),i=P.useMemo(()=>yje(r.search,n.current?null:t.current),[r.search]),o=Cc(),s=P.useCallback((a,u)=>{const l=sB(typeof a=="function"?a(i):a);n.current=!0,o("?"+l,u)},[o,i]);return[i,s]}var zje=0,Uje=()=>`__${String(++zje)}__`;function Vje(){let{router:e}=Qge("useSubmit"),{basename:t}=P.useContext(If),n=oje();return P.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:u,body:l}=xje(r,t);if(i.navigate===!1){let c=i.fetcherKey||Uje();await e.fetch(c,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Hje(e,{relative:t}={}){let{basename:n}=P.useContext(If),r=P.useContext(_c);vi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...qC(e||".",{relative:t})},s=Tc();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();o.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:up([n,o.pathname])),TT(o)}function qje(e,t={}){let n=P.useContext(zge);vi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Qge("useViewTransitionState"),i=qC(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=y0(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=y0(n.nextLocation.pathname,r)||n.nextLocation.pathname;return NN(i.pathname,s)!=null||NN(i.pathname,o)!=null}new TextEncoder;const sH=P.createContext(null);sH.displayName="@mantine/modals/ModalsContext";function Wje(){const e=P.useContext(sH);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Gje({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:o=!0,groupProps:s,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Wje(),h=p=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(p)),typeof a=="function"&&a(),o&&d.closeModal(e)},m=p=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(p)),typeof u=="function"&&u(),i&&d.closeModal(e)};return C.jsxs(C.Fragment,{children:[l&&C.jsx(Re,{mb:"md",children:l}),C.jsxs(Cr,{mt:l?0:"md",justify:"flex-end",...s,children:[C.jsx(At,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),C.jsx(At,{...n,onClick:m,children:(n==null?void 0:n.children)||f})]})]})}const[Yje,aH]=v6e("mantine-modals"),Ute=e=>{const t=e.modalId||Hb();return aH("openConfirmModal")({...e,modalId:t}),t};aH("closeModal");aH("closeAllModals");function Vte(e,t){var n,r,i,o;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(o=(i=e.props).onClose)==null||o.call(i)}function Kje(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(o=>o.id===t.modalId);if(!r)return e;Vte(r,t.canceled);const i=e.modals.filter(o=>o.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Vte(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,o=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),s=((n=e.current)==null?void 0:n.id)===r&&o.find(a=>a.id===r)||e.current;return{...e,modals:o,current:s}}default:return e}}function Xje(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:o,closeOnCancel:s,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:o,closeOnCancel:s,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Qje({children:e,modalProps:t,labels:n,modals:r}){const[i,o]=P.useReducer(Kje,{modals:[],current:null}),s=P.useRef(i);s.current=i;const a=P.useCallback(b=>{o({type:"CLOSE_ALL",canceled:b})},[s,o]),u=P.useCallback(({modalId:b,...w})=>{const E=b||Hb();return o({type:"OPEN",modal:{id:E,type:"content",props:w}}),E},[o]),l=P.useCallback(({modalId:b,...w})=>{const E=b||Hb();return o({type:"OPEN",modal:{id:E,type:"confirm",props:w}}),E},[o]),c=P.useCallback((b,{modalId:w,...E})=>{const _=w||Hb();return o({type:"OPEN",modal:{id:_,type:"context",props:E,ctx:b}}),_},[o]),f=P.useCallback((b,w)=>{o({type:"CLOSE",modalId:b,canceled:w})},[s,o]),d=P.useCallback(({modalId:b,...w})=>{o({type:"UPDATE",modalId:b,newProps:w})},[o]),h=P.useCallback(({modalId:b,...w})=>{o({type:"UPDATE",modalId:b,newProps:w})},[o]);Yje({openModal:u,openConfirmModal:l,openContextModal:({modal:b,...w})=>c(b,w),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const m={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},p=()=>{const b=s.current.current;switch(b==null?void 0:b.type){case"context":{const{innerProps:w,...E}=b.props,_=r[b.ctx];return{modalProps:E,content:C.jsx(_,{innerProps:w,context:m,id:b.id})}}case"confirm":{const{modalProps:w,confirmProps:E}=Xje(b.props);return{modalProps:w,content:C.jsx(Gje,{...E,id:b.id,labels:b.props.labels||n})}}case"content":{const{children:w,...E}=b.props;return{modalProps:E,content:w}}default:return{modalProps:{},content:null}}},{modalProps:g,content:v}=p();return C.jsxs(sH.Provider,{value:m,children:[C.jsx(Ni,{zIndex:zu("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var b;return f((b=i.current)==null?void 0:b.id)},children:v}),e]})}/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jje={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=(e,t,n,r)=>{const i=P.forwardRef(({color:o="currentColor",size:s=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>P.createElement("svg",{ref:d,...Jje[e],width:s,height:s,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:o}:{strokeWidth:a,stroke:o},...f},[u&&P.createElement("title",{key:"svg-title"},u),...r.map(([h,m])=>P.createElement(h,m)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zje=En("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eze=En("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B2=En("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hte=En("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qte=En("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tze=En("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nze=En("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rze=En("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ize=En("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oze=En("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sze=En("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jge=En("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q4=En("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aze=En("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uze=En("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lze=En("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cze=En("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fze=En("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dze=En("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hze=En("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pze=En("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uH=En("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mze=En("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zge=En("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gze=En("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yze=En("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vze=En("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bze=En("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xze=En("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eye=En("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wze=En("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eze=En("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ze=En("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tze=En("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cze=En("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tye=En("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sze=En("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nye=En("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Aze=En("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rye=En("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lH=En("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wte=En("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WC=En("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dze=En("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kze=En("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ize=En("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function iye(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const us="/correlation-study/";function Gte(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const s=n.slice(i,r).trim();(s||!o)&&t.push(s),i=r+1,r=n.indexOf(",",i)}return t}function oye(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Rze=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Nze=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Pze={};function Yte(e,t){return(Pze.jsx?Nze:Rze).test(e)}const Oze=/[ \t\n\f\r]/g;function Fze(e){return typeof e=="object"?e.type==="text"?Kte(e.value):!1:Kte(e)}function Kte(e){return e.replace(Oze,"")===""}class GC{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}GC.prototype.property={};GC.prototype.normal={};GC.prototype.space=null;function sye(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new GC(n,r,t)}function CT(e){return e.toLowerCase()}let Sc=class{constructor(t,n){this.property=t,this.attribute=n}};Sc.prototype.space=null;Sc.prototype.boolean=!1;Sc.prototype.booleanish=!1;Sc.prototype.overloadedBoolean=!1;Sc.prototype.number=!1;Sc.prototype.commaSeparated=!1;Sc.prototype.spaceSeparated=!1;Sc.prototype.commaOrSpaceSeparated=!1;Sc.prototype.mustUseProperty=!1;Sc.prototype.defined=!1;let Mze=0;const Rn=O1(),ho=O1(),aye=O1(),wt=O1(),Jr=O1(),Gb=O1(),nl=O1();function O1(){return 2**++Mze}const aB=Object.freeze(Object.defineProperty({__proto__:null,boolean:Rn,booleanish:ho,commaOrSpaceSeparated:nl,commaSeparated:Gb,number:wt,overloadedBoolean:aye,spaceSeparated:Jr},Symbol.toStringTag,{value:"Module"})),E5=Object.keys(aB);class cH extends Sc{constructor(t,n,r,i){let o=-1;if(super(t,n),Xte(this,"space",i),typeof r=="number")for(;++o<E5.length;){const s=E5[o];Xte(this,E5[o],(r&aB[s])===aB[s])}}}cH.prototype.defined=!0;function Xte(e,t,n){n&&(e[t]=n)}const $ze={}.hasOwnProperty;function Lw(e){const t={},n={};let r;for(r in e.properties)if($ze.call(e.properties,r)){const i=e.properties[r],o=new cH(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[CT(r)]=r,n[CT(o.attribute)]=r}return new GC(t,n,e.space)}const uye=Lw({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),lye=Lw({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function cye(e,t){return t in e?e[t]:t}function fye(e,t){return cye(e,t.toLowerCase())}const dye=Lw({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:fye,properties:{xmlns:null,xmlnsXLink:null}}),hye=Lw({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ho,ariaAutoComplete:null,ariaBusy:ho,ariaChecked:ho,ariaColCount:wt,ariaColIndex:wt,ariaColSpan:wt,ariaControls:Jr,ariaCurrent:null,ariaDescribedBy:Jr,ariaDetails:null,ariaDisabled:ho,ariaDropEffect:Jr,ariaErrorMessage:null,ariaExpanded:ho,ariaFlowTo:Jr,ariaGrabbed:ho,ariaHasPopup:null,ariaHidden:ho,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jr,ariaLevel:wt,ariaLive:null,ariaModal:ho,ariaMultiLine:ho,ariaMultiSelectable:ho,ariaOrientation:null,ariaOwns:Jr,ariaPlaceholder:null,ariaPosInSet:wt,ariaPressed:ho,ariaReadOnly:ho,ariaRelevant:null,ariaRequired:ho,ariaRoleDescription:Jr,ariaRowCount:wt,ariaRowIndex:wt,ariaRowSpan:wt,ariaSelected:ho,ariaSetSize:wt,ariaSort:null,ariaValueMax:wt,ariaValueMin:wt,ariaValueNow:wt,ariaValueText:null,role:null}}),Lze=Lw({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:fye,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Gb,acceptCharset:Jr,accessKey:Jr,action:null,allow:null,allowFullScreen:Rn,allowPaymentRequest:Rn,allowUserMedia:Rn,alt:null,as:null,async:Rn,autoCapitalize:null,autoComplete:Jr,autoFocus:Rn,autoPlay:Rn,blocking:Jr,capture:null,charSet:null,checked:Rn,cite:null,className:Jr,cols:wt,colSpan:null,content:null,contentEditable:ho,controls:Rn,controlsList:Jr,coords:wt|Gb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Rn,defer:Rn,dir:null,dirName:null,disabled:Rn,download:aye,draggable:ho,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Rn,formTarget:null,headers:Jr,height:wt,hidden:Rn,high:wt,href:null,hrefLang:null,htmlFor:Jr,httpEquiv:Jr,id:null,imageSizes:null,imageSrcSet:null,inert:Rn,inputMode:null,integrity:null,is:null,isMap:Rn,itemId:null,itemProp:Jr,itemRef:Jr,itemScope:Rn,itemType:Jr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Rn,low:wt,manifest:null,max:null,maxLength:wt,media:null,method:null,min:null,minLength:wt,multiple:Rn,muted:Rn,name:null,nonce:null,noModule:Rn,noValidate:Rn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Rn,optimum:wt,pattern:null,ping:Jr,placeholder:null,playsInline:Rn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Rn,referrerPolicy:null,rel:Jr,required:Rn,reversed:Rn,rows:wt,rowSpan:wt,sandbox:Jr,scope:null,scoped:Rn,seamless:Rn,selected:Rn,shadowRootClonable:Rn,shadowRootDelegatesFocus:Rn,shadowRootMode:null,shape:null,size:wt,sizes:null,slot:null,span:wt,spellCheck:ho,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wt,step:null,style:null,tabIndex:wt,target:null,title:null,translate:null,type:null,typeMustMatch:Rn,useMap:null,value:ho,width:wt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jr,axis:null,background:null,bgColor:null,border:wt,borderColor:null,bottomMargin:wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Rn,declare:Rn,event:null,face:null,frame:null,frameBorder:null,hSpace:wt,leftMargin:wt,link:null,longDesc:null,lowSrc:null,marginHeight:wt,marginWidth:wt,noResize:Rn,noHref:Rn,noShade:Rn,noWrap:Rn,object:null,profile:null,prompt:null,rev:null,rightMargin:wt,rules:null,scheme:null,scrolling:ho,standby:null,summary:null,text:null,topMargin:wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Rn,disableRemotePlayback:Rn,prefix:null,property:null,results:wt,security:null,unselectable:null}}),Bze=Lw({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:cye,properties:{about:nl,accentHeight:wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wt,amplitude:wt,arabicForm:null,ascent:wt,attributeName:null,attributeType:null,azimuth:wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wt,by:null,calcMode:null,capHeight:wt,className:Jr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wt,diffuseConstant:wt,direction:null,display:null,dur:null,divisor:wt,dominantBaseline:null,download:Rn,dx:null,dy:null,edgeMode:null,editable:null,elevation:wt,enableBackground:null,end:null,event:null,exponent:wt,externalResourcesRequired:null,fill:null,fillOpacity:wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Gb,g2:Gb,glyphName:Gb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wt,horizOriginX:wt,horizOriginY:wt,id:null,ideographic:wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wt,k:wt,k1:wt,k2:wt,k3:wt,k4:wt,kernelMatrix:nl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wt,overlineThickness:wt,paintOrder:null,panose1:null,path:null,pathLength:wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wt,pointsAtY:wt,pointsAtZ:wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nl,rev:nl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nl,requiredFeatures:nl,requiredFonts:nl,requiredFormats:nl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wt,specularExponent:wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wt,strikethroughThickness:wt,string:null,stroke:null,strokeDashArray:nl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wt,strokeOpacity:wt,strokeWidth:null,style:null,surfaceScale:wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nl,tabIndex:wt,tableValues:null,target:null,targetX:wt,targetY:wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wt,underlineThickness:wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wt,values:null,vAlphabetic:wt,vMathematical:wt,vectorEffect:null,vHanging:wt,vIdeographic:wt,version:null,vertAdvY:wt,vertOriginX:wt,vertOriginY:wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),jze=/^data[-\w.:]+$/i,Qte=/-[a-z]/g,zze=/[A-Z]/g;function J4(e,t){const n=CT(t);let r=t,i=Sc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&jze.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Qte,Vze);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Qte.test(o)){let s=o.replace(zze,Uze);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}i=cH}return new i(r,t)}function Uze(e){return"-"+e.toLowerCase()}function Vze(e){return e.charAt(1).toUpperCase()}const Hze={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},YC=sye([lye,uye,dye,hye,Lze],"html"),tg=sye([lye,uye,dye,hye,Bze],"svg");function Jte(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function pye(e){return e.join(" ").trim()}var qv={},_5,Zte;function qze(){if(Zte)return _5;Zte=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";_5=function(p,g){if(typeof p!="string")throw new TypeError("First argument must be a string");if(!p)return[];g=g||{};var v=1,b=1;function w(F){var L=F.match(t);L&&(v+=L.length);var H=F.lastIndexOf(u);b=~H?F.length-H:b+F.length}function E(){var F={line:v,column:b};return function(L){return L.position=new _(F),D(),L}}function _(F){this.start=F,this.end={line:v,column:b},this.source=g.source}_.prototype.content=p;function T(F){var L=new Error(g.source+":"+v+":"+b+": "+F);if(L.reason=F,L.filename=g.source,L.line=v,L.column=b,L.source=p,!g.silent)throw L}function S(F){var L=F.exec(p);if(L){var H=L[0];return w(H),p=p.slice(H.length),L}}function D(){S(n)}function k(F){var L;for(F=F||[];L=R();)L!==!1&&F.push(L);return F}function R(){var F=E();if(!(l!=p.charAt(0)||c!=p.charAt(1))){for(var L=2;f!=p.charAt(L)&&(c!=p.charAt(L)||l!=p.charAt(L+1));)++L;if(L+=2,f===p.charAt(L-1))return T("End of comment missing");var H=p.slice(2,L-2);return b+=2,w(H),p=p.slice(L),b+=2,F({type:d,comment:H})}}function O(){var F=E(),L=S(r);if(L){if(R(),!S(i))return T("property missing ':'");var H=S(o),V=F({type:h,property:m(L[0].replace(e,f)),value:H?m(H[0].replace(e,f)):f});return S(s),V}}function M(){var F=[];k(F);for(var L;L=O();)L!==!1&&(F.push(L),k(F));return F}return D(),M()};function m(p){return p?p.replace(a,f):f}return _5}var ene;function Wze(){if(ene)return qv;ene=1;var e=qv&&qv.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qv,"__esModule",{value:!0});var t=e(qze());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var s=(0,t.default)(r),a=typeof i=="function";return s.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(o=o||{},o[l]=c)}}),o}return qv.default=n,qv}var Gze=Wze();const tne=Fl(Gze),Yze=tne.default||tne,Z4=mye("end"),nh=mye("start");function mye(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Kze(e){const t=nh(e),n=Z4(e);if(t&&n)return{start:t,end:n}}function j2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?nne(e.position):"start"in e||"end"in e?nne(e):"line"in e||"column"in e?uB(e):""}function uB(e){return rne(e&&e.line)+":"+rne(e&&e.column)}function nne(e){return uB(e&&e.start)+"-"+uB(e&&e.end)}function rne(e){return e&&typeof e=="number"?e:1}class xa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(s=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=j2(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}xa.prototype.file="";xa.prototype.name="";xa.prototype.reason="";xa.prototype.message="";xa.prototype.stack="";xa.prototype.column=void 0;xa.prototype.line=void 0;xa.prototype.ancestors=void 0;xa.prototype.cause=void 0;xa.prototype.fatal=void 0;xa.prototype.place=void 0;xa.prototype.ruleId=void 0;xa.prototype.source=void 0;const fH={}.hasOwnProperty,Xze=new Map,Qze=/[A-Z]/g,Jze=/-([a-z])/g,Zze=new Set(["table","tbody","thead","tfoot","tr"]),eUe=new Set(["td","th"]),gye="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tUe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=lUe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=uUe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?tg:YC,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=yye(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function yye(e,t,n){if(t.type==="element")return nUe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return rUe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return oUe(e,t,n);if(t.type==="mdxjsEsm")return iUe(e,t);if(t.type==="root")return sUe(e,t,n);if(t.type==="text")return aUe(e,t)}function nUe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=tg,e.schema=i),e.ancestors.push(t);const o=bye(e,t.tagName,!1),s=cUe(e,t);let a=hH(e,t);return Zze.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Fze(u):!0})),vye(e,s,o,t),dH(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}function rUe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ST(e,t.position)}function iUe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ST(e,t.position)}function oUe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=tg,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:bye(e,t.name,!0),s=fUe(e,t),a=hH(e,t);return vye(e,s,o,t),dH(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}function sUe(e,t,n){const r={};return dH(r,hH(e,t)),e.create(t,e.Fragment,r,n)}function aUe(e,t){return t.value}function vye(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function dH(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function uUe(e,t,n){return r;function r(i,o,s,a){const l=Array.isArray(s.children)?n:t;return a?l(o,s,a):l(o,s)}}function lUe(e,t){return n;function n(r,i,o,s){const a=Array.isArray(o.children),u=nh(r);return t(i,o,s,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function cUe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&fH.call(t.properties,i)){const o=dUe(e,i,t.properties[i]);if(o){const[s,a]=o;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&eUe.has(t.tagName)?r=a:n[s]=a}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function fUe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else ST(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,o=e.evaluater.evaluateExpression(a.expression)}else ST(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function hH(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Xze;for(;++r<t.children.length;){const o=t.children[r];let s;if(e.passKeys){const u=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(u){const l=i.get(u)||0;s=u+"-"+l,i.set(u,l+1)}}const a=yye(e,o,s);a!==void 0&&n.push(a)}return n}function dUe(e,t,n){const r=J4(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?oye(n):pye(n)),r.property==="style"){let i=typeof n=="object"?n:hUe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=pUe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Hze[r.property]||r.property:r.attribute,n]}}function hUe(e,t){const n={};try{Yze(t,r)}catch(i){if(!e.ignoreInvalidStyle){const o=i,s=new xa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=gye+"#cannot-parse-style-attribute",s}}return n;function r(i,o){let s=i;s.slice(0,2)!=="--"&&(s.slice(0,4)==="-ms-"&&(s="ms-"+s.slice(4)),s=s.replace(Jze,gUe)),n[s]=o}}function bye(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,s;for(;++o<i.length;){const a=Yte(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}r=s}else r=Yte(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return fH.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);ST(e)}function ST(e,t){const n=new xa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=gye+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pUe(e){const t={};let n;for(n in e)fH.call(e,n)&&(t[mUe(n)]=e[n]);return t}function mUe(e){let t=e.replace(Qze,yUe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function gUe(e,t){return t.toUpperCase()}function yUe(e){return"-"+e.toLowerCase()}const T5={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},vUe={};function bUe(e,t){const n=vUe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return xye(e,r,i)}function xye(e,t,n){if(xUe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ine(e.children,t,n)}return Array.isArray(e)?ine(e,t,n):""}function ine(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=xye(e[i],t,n);return r.join("")}function xUe(e){return!!(e&&typeof e=="object")}const one=document.createElement("i");function pH(e){const t="&"+e+";";one.innerHTML=t;const n=one.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Sp(e,t,n,r){const i=e.length;let o=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);o<r.length;)s=r.slice(o,o+1e4),s.unshift(t,0),e.splice(...s),o+=1e4,t+=1e4}function ec(e,t){return e.length>0?(Sp(e,e.length,0,t),e):t}const sne={}.hasOwnProperty;function wUe(e){const t={};let n=-1;for(;++n<e.length;)EUe(t,e[n]);return t}function EUe(e,t){let n;for(n in t){const i=(sne.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){sne.call(i,s)||(i[s]=[]);const a=o[s];_Ue(i[s],Array.isArray(a)?a:a?[a]:[])}}}function _Ue(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Sp(e,0,0,r)}function wye(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Yb(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fd=ng(/[A-Za-z]/),ll=ng(/[\dA-Za-z]/),TUe=ng(/[#-'*+\--9=?A-Z^-~]/);function lB(e){return e!==null&&(e<32||e===127)}const cB=ng(/\d/),CUe=ng(/[\dA-Fa-f]/),SUe=ng(/[!-/:-@[-`{-~]/);function gn(e){return e!==null&&e<-2}function ku(e){return e!==null&&(e<0||e===32)}function _r(e){return e===-2||e===-1||e===32}const AUe=ng(new RegExp("\\p{P}|\\p{S}","u")),DUe=ng(/\s/);function ng(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Bw(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(o===37&&ll(e.charCodeAt(n+1))&&ll(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),i=1):s=""}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ei(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(u){return _r(u)?(e.enter(n),a(u)):t(u)}function a(u){return _r(u)&&o++<i?(e.consume(u),a):(e.exit(n),t(u))}}const kUe={tokenize:IUe};function IUe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ei(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),o(a)}function o(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return gn(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),s)}}const RUe={tokenize:NUe},ane={tokenize:PUe};function NUe(e){const t=this,n=[];let r=0,i,o,s;return a;function a(w){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let _=E,T;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){T=t.events[_][1].end;break}v(r);let S=E;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},T),S++;return Sp(t.events,_+1,0,t.events.slice(E)),t.events.length=S,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return m(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ane,c,f)(w)}function c(w){return i&&b(),v(r),d(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,m(w)}function d(w){return t.containerState={},e.attempt(ane,h,m)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),d(w)}function m(w){if(w===null){i&&b(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),p(w)}function p(w){if(w===null){g(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return gn(w)?(e.consume(w),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),p)}function g(w,E){const _=t.sliceStream(w);if(E&&_.push(null),w.previous=o,o&&(o.next=w),o=w,i.defineSkip(w.start),i.write(_),t.parser.lazy[w.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<s&&(!i.events[T][1].end||i.events[T][1].end.offset>s))return;const S=t.events.length;let D=S,k,R;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(k){R=t.events[D][1].end;break}k=!0}for(v(r),T=S;T<t.events.length;)t.events[T][1].end=Object.assign({},R),T++;Sp(t.events,D+1,0,t.events.slice(S)),t.events.length=T}}function v(w){let E=n.length;for(;E-- >w;){const _=n[E];t.containerState=_[1],_[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function PUe(e,t,n){return ei(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function une(e){if(e===null||ku(e)||DUe(e))return 1;if(AUe(e))return 2}function mH(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const fB={name:"attention",tokenize:FUe,resolveAll:OUe};function OUe(e,t){let n=-1,r,i,o,s,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);lne(f,-u),lne(d,u),s={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},o={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},s.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=ec(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=ec(l,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",o,t]]),l=ec(l,mH(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=ec(l,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=ec(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Sp(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function FUe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=une(r);let o;return s;function s(u){return o=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===o)return e.consume(u),a;const l=e.exit("attentionSequence"),c=une(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(o===42?f:f&&(i||!d)),l._close=!!(o===42?d:d&&(c||!f)),t(u)}}function lne(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const MUe={name:"autolink",tokenize:$Ue};function $Ue(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(h){return fd(h)?(e.consume(h),s):h===64?n(h):l(h)}function s(h){return h===43||h===45||h===46||ll(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||ll(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||lB(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):TUe(h)?(e.consume(h),l):n(h)}function c(h){return ll(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||ll(h))&&r++<63){const m=h===45?d:f;return e.consume(h),m}return n(h)}}const eO={tokenize:LUe,partial:!0};function LUe(e,t,n){return r;function r(o){return _r(o)?ei(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||gn(o)?t(o):n(o)}}const Eye={name:"blockQuote",tokenize:BUe,continuation:{tokenize:jUe},exit:zUe};function BUe(e,t,n){const r=this;return i;function i(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return _r(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function jUe(e,t,n){const r=this;return i;function i(s){return _r(s)?ei(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return e.attempt(Eye,t,n)(s)}}function zUe(e){e.exit("blockQuote")}const _ye={name:"characterEscape",tokenize:UUe};function UUe(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return SUe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Tye={name:"characterReference",tokenize:VUe};function VUe(e,t,n){const r=this;let i=0,o,s;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,s=ll,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=CUe,c):(e.enter("characterReferenceValue"),o=7,s=cB,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return s===ll&&!pH(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(f)&&i++<o?(e.consume(f),c):n(f)}}const cne={tokenize:qUe,partial:!0},fne={name:"codeFenced",tokenize:HUe,concrete:!0};function HUe(e,t,n){const r=this,i={tokenize:_,partial:!0};let o=0,s=0,a;return u;function u(T){return l(T)}function l(T){const S=r.events[r.events.length-1];return o=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(s++,e.consume(T),c):s<3?n(T):(e.exit("codeFencedFenceSequence"),_r(T)?ei(e,f,"whitespace")(T):f(T))}function f(T){return T===null||gn(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(cne,p,E)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||gn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):_r(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ei(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||gn(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(T))}function m(T){return T===null||gn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),m)}function p(T){return e.attempt(i,E,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),v}function v(T){return o>0&&_r(T)?ei(e,b,"linePrefix",o+1)(T):b(T)}function b(T){return T===null||gn(T)?e.check(cne,p,E)(T):(e.enter("codeFlowValue"),w(T))}function w(T){return T===null||gn(T)?(e.exit("codeFlowValue"),b(T)):(e.consume(T),w)}function E(T){return e.exit("codeFenced"),t(T)}function _(T,S,D){let k=0;return R;function R(H){return T.enter("lineEnding"),T.consume(H),T.exit("lineEnding"),O}function O(H){return T.enter("codeFencedFence"),_r(H)?ei(T,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):M(H)}function M(H){return H===a?(T.enter("codeFencedFenceSequence"),F(H)):D(H)}function F(H){return H===a?(k++,T.consume(H),F):k>=s?(T.exit("codeFencedFenceSequence"),_r(H)?ei(T,L,"whitespace")(H):L(H)):D(H)}function L(H){return H===null||gn(H)?(T.exit("codeFencedFence"),S(H)):D(H)}}}function qUe(e,t,n){const r=this;return i;function i(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const C5={name:"codeIndented",tokenize:GUe},WUe={tokenize:YUe,partial:!0};function GUe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ei(e,o,"linePrefix",5)(l)}function o(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?u(l):gn(l)?e.attempt(WUe,s,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||gn(l)?(e.exit("codeFlowValue"),s(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function YUe(e,t,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):gn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):ei(e,o,"linePrefix",5)(s)}function o(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):gn(s)?i(s):n(s)}}const KUe={name:"codeText",tokenize:JUe,resolve:XUe,previous:QUe};function XUe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function QUe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function JUe(e,t,n){let r=0,i,o;return s;function s(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(o=e.enter("codeTextSequence"),i=0,c(f)):gn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||gn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(o.type="codeTextData",l(f))}}class ZUe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&s_(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),s_(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),s_(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);s_(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);s_(this.left,n.reverse())}}}function s_(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Cye(e){const t={};let n=-1,r,i,o,s,a,u,l;const c=new ZUe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,eVe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(o=n,i=void 0;o--&&(s=c.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Sp(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function eVe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,u=[],l={};let c,f,d=-1,h=n,m=0,p=0;const g=[p];for(;h;){for(;e.get(++i)[1]!==h;);o.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&s.defineSkip(h.start),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(c),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(p=d+1,g.push(p),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(s.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const v=a.slice(g[d],g[d+1]),b=o.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),d=-1;++d<u.length;)l[m+u[d][0]]=m+u[d][1],m+=u[d][1]-u[d][0]-1;return l}const tVe={tokenize:iVe,resolve:rVe},nVe={tokenize:oVe,partial:!0};function rVe(e){return Cye(e),e}function iVe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):gn(a)?e.check(nVe,s,o)(a):(e.consume(a),i)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function oVe(e,t,n){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),ei(e,o,"linePrefix")}function o(s){if(s===null||gn(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function Sye(e,t,n,r,i,o,s,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(v){return v===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(v),e.exit(o),d):v===null||v===32||v===41||lB(v)?n(v):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),p(v))}function d(v){return v===62?(e.enter(o),e.consume(v),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(a),d(v)):v===null||v===60||gn(v)?n(v):(e.consume(v),v===92?m:h)}function m(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function p(v){return!c&&(v===null||v===41||ku(v))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(v)):c<l&&v===40?(e.consume(v),c++,p):v===41?(e.consume(v),c--,p):v===null||v===32||v===40||lB(v)?n(v):(e.consume(v),v===92?g:p)}function g(v){return v===40||v===41||v===92?(e.consume(v),p):p(v)}}function Aye(e,t,n,r,i,o){const s=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(o),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(h):h===93?(e.exit(o),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):gn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||gn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!_r(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Dye(e,t,n,r,i,o){let s;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),s=d===40?41:d,u):n(d)}function u(d){return d===s?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(o),l(d))}function l(d){return d===s?(e.exit(o),u(s)):d===null?n(d):gn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ei(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===s||d===null||gn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===s||d===92?(e.consume(d),c):c(d)}}function z2(e,t){let n;return r;function r(i){return gn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):_r(i)?ei(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const sVe={name:"definition",tokenize:uVe},aVe={tokenize:lVe,partial:!0};function uVe(e,t,n){const r=this;let i;return o;function o(h){return e.enter("definition"),s(h)}function s(h){return Aye.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Yb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return ku(h)?z2(e,l)(h):l(h)}function l(h){return Sye(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(aVe,f,f)(h)}function f(h){return _r(h)?ei(e,d,"whitespace")(h):d(h)}function d(h){return h===null||gn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function lVe(e,t,n){return r;function r(a){return ku(a)?z2(e,i)(a):n(a)}function i(a){return Dye(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return _r(a)?ei(e,s,"whitespace")(a):s(a)}function s(a){return a===null||gn(a)?t(a):n(a)}}const cVe={name:"hardBreakEscape",tokenize:fVe};function fVe(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return gn(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const dVe={name:"headingAtx",tokenize:pVe,resolve:hVe};function hVe(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Sp(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function pVe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),o(c)}function o(c){return e.enter("atxHeadingSequence"),s(c)}function s(c){return c===35&&r++<6?(e.consume(c),s):c===null||ku(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||gn(c)?(e.exit("atxHeading"),t(c)):_r(c)?ei(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ku(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const mVe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dne=["pre","script","style","textarea"],gVe={name:"htmlFlow",tokenize:xVe,resolveTo:bVe,concrete:!0},yVe={tokenize:EVe,partial:!0},vVe={tokenize:wVe,partial:!0};function bVe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xVe(e,t,n){const r=this;let i,o,s,a,u;return l;function l(z){return c(z)}function c(z){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(z),f}function f(z){return z===33?(e.consume(z),d):z===47?(e.consume(z),o=!0,p):z===63?(e.consume(z),i=3,r.interrupt?t:U):fd(z)?(e.consume(z),s=String.fromCharCode(z),g):n(z)}function d(z){return z===45?(e.consume(z),i=2,h):z===91?(e.consume(z),i=5,a=0,m):fd(z)?(e.consume(z),i=4,r.interrupt?t:U):n(z)}function h(z){return z===45?(e.consume(z),r.interrupt?t:U):n(z)}function m(z){const G="CDATA[";return z===G.charCodeAt(a++)?(e.consume(z),a===G.length?r.interrupt?t:M:m):n(z)}function p(z){return fd(z)?(e.consume(z),s=String.fromCharCode(z),g):n(z)}function g(z){if(z===null||z===47||z===62||ku(z)){const G=z===47,X=s.toLowerCase();return!G&&!o&&dne.includes(X)?(i=1,r.interrupt?t(z):M(z)):mVe.includes(s.toLowerCase())?(i=6,G?(e.consume(z),v):r.interrupt?t(z):M(z)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(z):o?b(z):w(z))}return z===45||ll(z)?(e.consume(z),s+=String.fromCharCode(z),g):n(z)}function v(z){return z===62?(e.consume(z),r.interrupt?t:M):n(z)}function b(z){return _r(z)?(e.consume(z),b):R(z)}function w(z){return z===47?(e.consume(z),R):z===58||z===95||fd(z)?(e.consume(z),E):_r(z)?(e.consume(z),w):R(z)}function E(z){return z===45||z===46||z===58||z===95||ll(z)?(e.consume(z),E):_(z)}function _(z){return z===61?(e.consume(z),T):_r(z)?(e.consume(z),_):w(z)}function T(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(e.consume(z),u=z,S):_r(z)?(e.consume(z),T):D(z)}function S(z){return z===u?(e.consume(z),u=null,k):z===null||gn(z)?n(z):(e.consume(z),S)}function D(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||ku(z)?_(z):(e.consume(z),D)}function k(z){return z===47||z===62||_r(z)?w(z):n(z)}function R(z){return z===62?(e.consume(z),O):n(z)}function O(z){return z===null||gn(z)?M(z):_r(z)?(e.consume(z),O):n(z)}function M(z){return z===45&&i===2?(e.consume(z),V):z===60&&i===1?(e.consume(z),Q):z===62&&i===4?(e.consume(z),B):z===63&&i===3?(e.consume(z),U):z===93&&i===5?(e.consume(z),Z):gn(z)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(yVe,q,F)(z)):z===null||gn(z)?(e.exit("htmlFlowData"),F(z)):(e.consume(z),M)}function F(z){return e.check(vVe,L,q)(z)}function L(z){return e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),H}function H(z){return z===null||gn(z)?F(z):(e.enter("htmlFlowData"),M(z))}function V(z){return z===45?(e.consume(z),U):M(z)}function Q(z){return z===47?(e.consume(z),s="",K):M(z)}function K(z){if(z===62){const G=s.toLowerCase();return dne.includes(G)?(e.consume(z),B):M(z)}return fd(z)&&s.length<8?(e.consume(z),s+=String.fromCharCode(z),K):M(z)}function Z(z){return z===93?(e.consume(z),U):M(z)}function U(z){return z===62?(e.consume(z),B):z===45&&i===2?(e.consume(z),U):M(z)}function B(z){return z===null||gn(z)?(e.exit("htmlFlowData"),q(z)):(e.consume(z),B)}function q(z){return e.exit("htmlFlow"),t(z)}}function wVe(e,t,n){const r=this;return i;function i(s){return gn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):n(s)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function EVe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(eO,t,n)}}const _Ve={name:"htmlText",tokenize:TVe};function TVe(e,t,n){const r=this;let i,o,s;return a;function a(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),u}function u(U){return U===33?(e.consume(U),l):U===47?(e.consume(U),_):U===63?(e.consume(U),w):fd(U)?(e.consume(U),D):n(U)}function l(U){return U===45?(e.consume(U),c):U===91?(e.consume(U),o=0,m):fd(U)?(e.consume(U),b):n(U)}function c(U){return U===45?(e.consume(U),h):n(U)}function f(U){return U===null?n(U):U===45?(e.consume(U),d):gn(U)?(s=f,Q(U)):(e.consume(U),f)}function d(U){return U===45?(e.consume(U),h):f(U)}function h(U){return U===62?V(U):U===45?d(U):f(U)}function m(U){const B="CDATA[";return U===B.charCodeAt(o++)?(e.consume(U),o===B.length?p:m):n(U)}function p(U){return U===null?n(U):U===93?(e.consume(U),g):gn(U)?(s=p,Q(U)):(e.consume(U),p)}function g(U){return U===93?(e.consume(U),v):p(U)}function v(U){return U===62?V(U):U===93?(e.consume(U),v):p(U)}function b(U){return U===null||U===62?V(U):gn(U)?(s=b,Q(U)):(e.consume(U),b)}function w(U){return U===null?n(U):U===63?(e.consume(U),E):gn(U)?(s=w,Q(U)):(e.consume(U),w)}function E(U){return U===62?V(U):w(U)}function _(U){return fd(U)?(e.consume(U),T):n(U)}function T(U){return U===45||ll(U)?(e.consume(U),T):S(U)}function S(U){return gn(U)?(s=S,Q(U)):_r(U)?(e.consume(U),S):V(U)}function D(U){return U===45||ll(U)?(e.consume(U),D):U===47||U===62||ku(U)?k(U):n(U)}function k(U){return U===47?(e.consume(U),V):U===58||U===95||fd(U)?(e.consume(U),R):gn(U)?(s=k,Q(U)):_r(U)?(e.consume(U),k):V(U)}function R(U){return U===45||U===46||U===58||U===95||ll(U)?(e.consume(U),R):O(U)}function O(U){return U===61?(e.consume(U),M):gn(U)?(s=O,Q(U)):_r(U)?(e.consume(U),O):k(U)}function M(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(e.consume(U),i=U,F):gn(U)?(s=M,Q(U)):_r(U)?(e.consume(U),M):(e.consume(U),L)}function F(U){return U===i?(e.consume(U),i=void 0,H):U===null?n(U):gn(U)?(s=F,Q(U)):(e.consume(U),F)}function L(U){return U===null||U===34||U===39||U===60||U===61||U===96?n(U):U===47||U===62||ku(U)?k(U):(e.consume(U),L)}function H(U){return U===47||U===62||ku(U)?k(U):n(U)}function V(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):n(U)}function Q(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),K}function K(U){return _r(U)?ei(e,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):Z(U)}function Z(U){return e.enter("htmlTextData"),s(U)}}const gH={name:"labelEnd",tokenize:IVe,resolveTo:kVe,resolveAll:DVe},CVe={tokenize:RVe},SVe={tokenize:NVe},AVe={tokenize:PVe};function DVe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function kVe(e,t){let n=e.length,r=0,i,o,s,a;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const u={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[s][1].end)},c={type:"labelText",start:Object.assign({},e[o+r+2][1].end),end:Object.assign({},e[s-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=ec(a,e.slice(o+1,o+r+3)),a=ec(a,[["enter",c,t]]),a=ec(a,mH(t.parser.constructs.insideSpan.null,e.slice(o+r+4,s-3),t)),a=ec(a,[["exit",c,t],e[s-2],e[s-1],["exit",l,t]]),a=ec(a,e.slice(s+1)),a=ec(a,[["exit",u,t]]),Sp(e,o,e.length,a),e}function IVe(e,t,n){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(d){return o?o._inactive?f(d):(s=r.parser.defined.includes(Yb(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(CVe,c,s?c:f)(d):d===91?e.attempt(SVe,c,s?l:f)(d):s?c(d):f(d)}function l(d){return e.attempt(AVe,c,f)(d)}function c(d){return t(d)}function f(d){return o._balanced=!0,n(d)}}function RVe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return ku(f)?z2(e,o)(f):o(f)}function o(f){return f===41?c(f):Sye(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return ku(f)?z2(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Dye(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return ku(f)?z2(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function NVe(e,t,n){const r=this;return i;function i(a){return Aye.call(r,e,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(Yb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function PVe(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const OVe={name:"labelStartImage",tokenize:FVe,resolveAll:gH.resolveAll};function FVe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const MVe={name:"labelStartLink",tokenize:$Ve,resolveAll:gH.resolveAll};function $Ve(e,t,n){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const S5={name:"lineEnding",tokenize:LVe};function LVe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ei(e,t,"linePrefix")}}const $I={name:"thematicBreak",tokenize:BVe};function BVe(e,t,n){let r=0,i;return o;function o(l){return e.enter("thematicBreak"),s(l)}function s(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||gn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),_r(l)?ei(e,a,"whitespace")(l):a(l))}}const yu={name:"list",tokenize:UVe,continuation:{tokenize:VVe},exit:qVe},jVe={tokenize:WVe,partial:!0},zVe={tokenize:HVe,partial:!0};function UVe(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(h){const m=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:cB(h)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check($I,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return cB(h)&&++s<10?(e.consume(h),u):(!r.interrupt||s<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(eO,r.interrupt?n:c,e.attempt(jVe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,o++,d(h)}function f(h){return _r(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function VVe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(eO,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ei(e,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!_r(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(zVe,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ei(e,e.attempt(yu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function HVe(e,t,n){const r=this;return ei(e,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(o):n(o)}}function qVe(e){e.exit(this.containerState.type)}function WVe(e,t,n){const r=this;return ei(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const s=r.events[r.events.length-1];return!_r(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const hne={name:"setextUnderline",tokenize:YVe,resolveTo:GVe};function GVe(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[o][1].end)):e[r][1]=s,e.push(["exit",s,t]),e}function YVe(e,t,n){const r=this;let i;return o;function o(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,s(l)):n(l)}function s(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),_r(l)?ei(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||gn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const KVe={tokenize:XVe};function XVe(e){const t=this,n=e.attempt(eO,r,e.attempt(this.parser.constructs.flowInitial,i,ei(e,e.attempt(this.parser.constructs.flow,i,e.attempt(tVe,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const QVe={resolveAll:Iye()},JVe=kye("string"),ZVe=kye("text");function kye(e){return{tokenize:t,resolveAll:Iye(e==="text"?eHe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,s,a);return s;function s(c){return l(c)?o(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),o(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Iye(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function eHe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,s=-1,a=0,u;for(;o--;){const l=i[o];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(l===-2)u=!0,a++;else if(l!==-1){o++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function tHe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let s=[],a=[];const u={consume:b,enter:w,exit:E,attempt:S(_),check:S(T),interrupt:S(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:m,defineSkip:p,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&o.push(t),l;function f(O){return s=ec(s,O),g(),s[s.length-1]!==null?[]:(D(t,0),l.events=mH(o,l.events,l),l.events)}function d(O,M){return rHe(h(O),M)}function h(O){return nHe(s,O)}function m(){const{line:O,column:M,offset:F,_index:L,_bufferIndex:H}=r;return{line:O,column:M,offset:F,_index:L,_bufferIndex:H}}function p(O){i[O.line]=O.column,R()}function g(){let O;for(;r._index<s.length;){const M=s[r._index];if(typeof M=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<M.length;)v(M.charCodeAt(r._bufferIndex));else v(M)}}function v(O){c=c(O)}function b(O){gn(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,R()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function w(O,M){const F=M||{};return F.type=O,F.start=m(),l.events.push(["enter",F,l]),a.push(F),F}function E(O){const M=a.pop();return M.end=m(),l.events.push(["exit",M,l]),M}function _(O,M){D(O,M.from)}function T(O,M){M.restore()}function S(O,M){return F;function F(L,H,V){let Q,K,Z,U;return Array.isArray(L)?q(L):"tokenize"in L?q([L]):B(L);function B(ne){return ge;function ge(me){const ye=me!==null&&ne[me],we=me!==null&&ne.null,fe=[...Array.isArray(ye)?ye:ye?[ye]:[],...Array.isArray(we)?we:we?[we]:[]];return q(fe)(me)}}function q(ne){return Q=ne,K=0,ne.length===0?V:z(ne[K])}function z(ne){return ge;function ge(me){return U=k(),Z=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?X():ne.tokenize.call(M?Object.assign(Object.create(l),M):l,u,G,X)(me)}}function G(ne){return O(Z,U),H}function X(ne){return U.restore(),++K<Q.length?z(Q[K]):V}}}function D(O,M){O.resolveAll&&!o.includes(O)&&o.push(O),O.resolve&&Sp(l.events,M,l.events.length-M,O.resolve(l.events.slice(M),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function k(){const O=m(),M=l.previous,F=l.currentConstruct,L=l.events.length,H=Array.from(a);return{restore:V,from:L};function V(){r=O,l.previous=M,l.currentConstruct=F,l.events.length=L,a=H,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function nHe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}function rHe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}const iHe={42:yu,43:yu,45:yu,48:yu,49:yu,50:yu,51:yu,52:yu,53:yu,54:yu,55:yu,56:yu,57:yu,62:Eye},oHe={91:sVe},sHe={[-2]:C5,[-1]:C5,32:C5},aHe={35:dVe,42:$I,45:[hne,$I],60:gVe,61:hne,95:$I,96:fne,126:fne},uHe={38:Tye,92:_ye},lHe={[-5]:S5,[-4]:S5,[-3]:S5,33:OVe,38:Tye,42:fB,60:[MUe,_Ve],91:MVe,92:[cVe,_ye],93:gH,95:fB,96:KUe},cHe={null:[fB,QVe]},fHe={null:[42,95]},dHe={null:[]},hHe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:fHe,contentInitial:oHe,disable:dHe,document:iHe,flow:aHe,flowInitial:sHe,insideSpan:cHe,string:uHe,text:lHe},Symbol.toStringTag,{value:"Module"}));function pHe(e){const n=wUe([hHe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(kUe),document:i(RUe),flow:i(KVe),string:i(JVe),text:i(ZVe)};return r;function i(o){return s;function s(a){return tHe(r,o,a)}}}function mHe(e){for(;!Cye(e););return e}const pne=/[\0\t\n\r]/g;function gHe(){let e=1,t="",n=!0,r;return i;function i(o,s,a){const u=[];let l,c,f,d,h;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),f=0,t="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(pne.lastIndex=f,l=pne.exec(o),d=l&&l.index!==void 0?l.index:o.length,h=o.charCodeAt(d),!l){t=o.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(o.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const yHe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function vHe(e){return e.replace(yHe,bHe)}function bHe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return wye(n.slice(o?2:1),o?16:10)}return pH(n)||e}const Rye={}.hasOwnProperty;function xHe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),wHe(n)(mHe(pHe(n).document().write(gHe()(e,t,!0))))}function wHe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(et),autolinkProtocol:k,autolinkEmail:k,atxHeading:o(Ue),blockQuote:o(we),characterEscape:k,characterReference:k,codeFenced:o(fe),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(fe,s),codeText:o(se,s),codeTextData:k,data:k,codeFlowValue:k,definition:o(Ce),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Ae),hardBreakEscape:o(Xe),hardBreakTrailing:o(Xe),htmlFlow:o(Le,s),htmlFlowData:k,htmlText:o(Le,s),htmlTextData:k,image:o(Ge),label:s,link:o(et),listItem:o(ht),listItemValue:d,listOrdered:o(Et,f),listUnordered:o(Et),paragraph:o(xt),reference:z,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Ue),strong:o(te),thematicBreak:o(be)},exit:{atxHeading:u(),atxHeadingSequence:_,autolink:u(),autolinkEmail:ye,autolinkProtocol:me,blockQuote:u(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:ne,characterReference:ge,codeFenced:u(g),codeFencedFence:p,codeFencedFenceInfo:h,codeFencedFenceMeta:m,codeFlowValue:R,codeIndented:u(v),codeText:u(H),codeTextData:R,data:R,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u(F),htmlFlowData:R,htmlText:u(L),htmlTextData:R,image:u(Q),label:Z,labelText:K,lineEnding:O,link:u(V),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:G,resourceDestinationString:U,resourceTitleString:B,resource:q,setextHeading:u(D),setextHeadingLineSequence:S,setextHeadingText:T,strong:u(),thematicBreak:u()}};Nye(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ae){let pe={type:"root",children:[]};const Ee={stack:[pe],tokenStack:[],config:t,enter:a,exit:l,buffer:s,resume:c,data:n},$e=[];let Ne=-1;for(;++Ne<ae.length;)if(ae[Ne][1].type==="listOrdered"||ae[Ne][1].type==="listUnordered")if(ae[Ne][0]==="enter")$e.push(Ne);else{const Ze=$e.pop();Ne=i(ae,Ze,Ne)}for(Ne=-1;++Ne<ae.length;){const Ze=t[ae[Ne][0]];Rye.call(Ze,ae[Ne][1].type)&&Ze[ae[Ne][1].type].call(Object.assign({sliceSerialize:ae[Ne][2].sliceSerialize},Ee),ae[Ne][1])}if(Ee.tokenStack.length>0){const Ze=Ee.tokenStack[Ee.tokenStack.length-1];(Ze[1]||mne).call(Ee,void 0,Ze[0])}for(pe.position={start:Cm(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:Cm(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Ne=-1;++Ne<t.transforms.length;)pe=t.transforms[Ne](pe)||pe;return pe}function i(ae,pe,Ee){let $e=pe-1,Ne=-1,Ze=!1,Ke,It,zt,Pt;for(;++$e<=Ee;){const en=ae[$e];switch(en[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{en[0]==="enter"?Ne++:Ne--,Pt=void 0;break}case"lineEndingBlank":{en[0]==="enter"&&(Ke&&!Pt&&!Ne&&!zt&&(zt=$e),Pt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pt=void 0}if(!Ne&&en[0]==="enter"&&en[1].type==="listItemPrefix"||Ne===-1&&en[0]==="exit"&&(en[1].type==="listUnordered"||en[1].type==="listOrdered")){if(Ke){let kn=$e;for(It=void 0;kn--;){const pn=ae[kn];if(pn[1].type==="lineEnding"||pn[1].type==="lineEndingBlank"){if(pn[0]==="exit")continue;It&&(ae[It][1].type="lineEndingBlank",Ze=!0),pn[1].type="lineEnding",It=kn}else if(!(pn[1].type==="linePrefix"||pn[1].type==="blockQuotePrefix"||pn[1].type==="blockQuotePrefixWhitespace"||pn[1].type==="blockQuoteMarker"||pn[1].type==="listItemIndent"))break}zt&&(!It||zt<It)&&(Ke._spread=!0),Ke.end=Object.assign({},It?ae[It][1].start:en[1].end),ae.splice(It||$e,0,["exit",Ke,en[2]]),$e++,Ee++}if(en[1].type==="listItemPrefix"){const kn={type:"listItem",_spread:!1,start:Object.assign({},en[1].start),end:void 0};Ke=kn,ae.splice($e,0,["enter",kn,en[2]]),$e++,Ee++,zt=void 0,Pt=!0}}}return ae[pe][1]._spread=Ze,Ee}function o(ae,pe){return Ee;function Ee($e){a.call(this,ae($e),$e),pe&&pe.call(this,$e)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(ae,pe,Ee){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([pe,Ee]),ae.position={start:Cm(pe.start),end:void 0}}function u(ae){return pe;function pe(Ee){ae&&ae.call(this,Ee),l.call(this,Ee)}}function l(ae,pe){const Ee=this.stack.pop(),$e=this.tokenStack.pop();if($e)$e[0].type!==ae.type&&(pe?pe.call(this,ae,$e[0]):($e[1]||mne).call(this,ae,$e[0]));else throw new Error("Cannot close `"+ae.type+"` ("+j2({start:ae.start,end:ae.end})+"): its not open");Ee.position.end=Cm(ae.end)}function c(){return bUe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ae){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=ae}function m(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=ae}function p(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae.replace(/(\r?\n|\r)$/g,"")}function b(ae){const pe=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=pe,Ee.identifier=Yb(this.sliceSerialize(ae)).toLowerCase()}function w(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ae}function E(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ae}function _(ae){const pe=this.stack[this.stack.length-1];if(!pe.depth){const Ee=this.sliceSerialize(ae).length;pe.depth=Ee}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function S(ae){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function k(ae){const Ee=this.stack[this.stack.length-1].children;let $e=Ee[Ee.length-1];(!$e||$e.type!=="text")&&($e=le(),$e.position={start:Cm(ae.start),end:void 0},Ee.push($e)),this.stack.push($e)}function R(ae){const pe=this.stack.pop();pe.value+=this.sliceSerialize(ae),pe.position.end=Cm(ae.end)}function O(ae){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ee=pe.children[pe.children.length-1];Ee.position.end=Cm(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(k.call(this,ae),R.call(this,ae))}function M(){this.data.atHardBreak=!0}function F(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae}function L(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae}function H(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae}function V(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=pe,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function Q(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=pe,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function K(ae){const pe=this.sliceSerialize(ae),Ee=this.stack[this.stack.length-2];Ee.label=vHe(pe),Ee.identifier=Yb(pe).toLowerCase()}function Z(){const ae=this.stack[this.stack.length-1],pe=this.resume(),Ee=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ee.type==="link"){const $e=ae.children;Ee.children=$e}else Ee.alt=pe}function U(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ae}function B(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ae}function q(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function G(ae){const pe=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=pe,Ee.identifier=Yb(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function X(ae){this.data.characterReferenceType=ae.type}function ne(ae){const pe=this.sliceSerialize(ae),Ee=this.data.characterReferenceType;let $e;Ee?($e=wye(pe,Ee==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$e=pH(pe);const Ne=this.stack[this.stack.length-1];Ne.value+=$e}function ge(ae){const pe=this.stack.pop();pe.position.end=Cm(ae.end)}function me(ae){R.call(this,ae);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(ae)}function ye(ae){R.call(this,ae);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(ae)}function we(){return{type:"blockquote",children:[]}}function fe(){return{type:"code",lang:null,meta:null,value:""}}function se(){return{type:"inlineCode",value:""}}function Ce(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ae(){return{type:"emphasis",children:[]}}function Ue(){return{type:"heading",depth:0,children:[]}}function Xe(){return{type:"break"}}function Le(){return{type:"html",value:""}}function Ge(){return{type:"image",title:null,url:"",alt:null}}function et(){return{type:"link",title:null,url:"",children:[]}}function Et(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function ht(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function xt(){return{type:"paragraph",children:[]}}function te(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function be(){return{type:"thematicBreak"}}}function Cm(e){return{line:e.line,column:e.column,offset:e.offset}}function Nye(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Nye(e,r):EHe(e,r)}}function EHe(e,t){let n;for(n in t)if(Rye.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function mne(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+j2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+j2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+j2({start:t.start,end:t.end})+") is still open")}function _He(e){const t=this;t.parser=n;function n(r){return xHe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function THe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function CHe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function SHe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function AHe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function DHe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kHe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Bw(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function IHe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function RHe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Pye(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function NHe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Pye(e,t);const i={src:Bw(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function PHe(e,t){const n={src:Bw(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function OHe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function FHe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Pye(e,t);const i={href:Bw(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function MHe(e,t){const n={href:Bw(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function $He(e,t,n){const r=e.all(t),i=n?LHe(n):Oye(t),o={},s=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?s.push(...c.children):s.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,l),e.applyData(t,l)}function LHe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Oye(n[r])}return t}function Oye(e){const t=e.spread;return t??e.children.length>1}function BHe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function jHe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zHe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function UHe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function VHe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=nh(t.children[1]),u=Z4(t.children[t.children.length-1]);a&&u&&(s.position={start:a,end:u}),i.push(s)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function HHe(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=s?s[u]:void 0;h&&(d.align=h);let m={type:"element",tagName:o,properties:d,children:[]};f&&(m.children=e.all(f),e.patch(f,m),m=e.applyData(f,m)),l.push(m)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function qHe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const gne=9,yne=32;function WHe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(vne(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(vne(t.slice(i),i>0,!1)),o.join("")}function vne(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===gne||o===yne;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===gne||o===yne;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function GHe(e,t){const n={type:"text",value:WHe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function YHe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const KHe={blockquote:THe,break:CHe,code:SHe,delete:AHe,emphasis:DHe,footnoteReference:kHe,heading:IHe,html:RHe,imageReference:NHe,image:PHe,inlineCode:OHe,linkReference:FHe,link:MHe,listItem:$He,list:BHe,paragraph:jHe,root:zHe,strong:UHe,table:VHe,tableCell:qHe,tableRow:HHe,text:GHe,thematicBreak:YHe,toml:ED,yaml:ED,definition:ED,footnoteDefinition:ED};function ED(){}const Fye=-1,tO=0,PN=1,ON=2,yH=3,vH=4,bH=5,xH=6,Mye=7,$ye=8,bne=typeof self=="object"?self:globalThis,XHe=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,s]=t[i];switch(o){case tO:case Fye:return n(s,i);case PN:{const a=n([],i);for(const u of s)a.push(r(u));return a}case ON:{const a=n({},i);for(const[u,l]of s)a[r(u)]=r(l);return a}case yH:return n(new Date(s),i);case vH:{const{source:a,flags:u}=s;return n(new RegExp(a,u),i)}case bH:{const a=n(new Map,i);for(const[u,l]of s)a.set(r(u),r(l));return a}case xH:{const a=n(new Set,i);for(const u of s)a.add(r(u));return a}case Mye:{const{name:a,message:u}=s;return n(new bne[a](u),i)}case $ye:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i)}return n(new bne[o](s),i)};return r},xne=e=>XHe(new Map,e)(0),Wv="",{toString:QHe}={},{keys:JHe}=Object,a_=e=>{const t=typeof e;if(t!=="object"||!e)return[tO,t];const n=QHe.call(e).slice(8,-1);switch(n){case"Array":return[PN,Wv];case"Object":return[ON,Wv];case"Date":return[yH,Wv];case"RegExp":return[vH,Wv];case"Map":return[bH,Wv];case"Set":return[xH,Wv]}return n.includes("Array")?[PN,n]:n.includes("Error")?[Mye,n]:[ON,n]},_D=([e,t])=>e===tO&&(t==="function"||t==="symbol"),ZHe=(e,t,n,r)=>{const i=(s,a)=>{const u=r.push(s)-1;return n.set(a,u),u},o=s=>{if(n.has(s))return n.get(s);let[a,u]=a_(s);switch(a){case tO:{let c=s;switch(u){case"bigint":a=$ye,c=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Fye],s)}return i([a,c],s)}case PN:{if(u)return i([u,[...s]],s);const c=[],f=i([a,c],s);for(const d of s)c.push(o(d));return f}case ON:{if(u)switch(u){case"BigInt":return i([u,s.toString()],s);case"Boolean":case"Number":case"String":return i([u,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const c=[],f=i([a,c],s);for(const d of JHe(s))(e||!_D(a_(s[d])))&&c.push([o(d),o(s[d])]);return f}case yH:return i([a,s.toISOString()],s);case vH:{const{source:c,flags:f}=s;return i([a,{source:c,flags:f}],s)}case bH:{const c=[],f=i([a,c],s);for(const[d,h]of s)(e||!(_D(a_(d))||_D(a_(h))))&&c.push([o(d),o(h)]);return f}case xH:{const c=[],f=i([a,c],s);for(const d of s)(e||!_D(a_(d)))&&c.push(o(d));return f}}const{message:l}=s;return i([a,{name:u,message:l}],s)};return o},wne=(e,{json:t,lossy:n}={})=>{const r=[];return ZHe(!(t||n),!!t,new Map,r)(e),r},Ex=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?xne(wne(e,t)):structuredClone(e):(e,t)=>xne(wne(e,t));function eqe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function tqe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function nqe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||eqe,r=e.options.footnoteBackLabel||tqe,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=Bw(f.toLowerCase());let h=0;const m=[],p=e.footnoteCounts.get(f);for(;p!==void 0&&++h<=p;){m.length>0&&m.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...m)}else c.push(...m);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Ex(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Lye=function(e){if(e==null)return sqe;if(typeof e=="function")return nO(e);if(typeof e=="object")return Array.isArray(e)?rqe(e):iqe(e);if(typeof e=="string")return oqe(e);throw new Error("Expected function, string, or object as test")};function rqe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Lye(e[n]);return nO(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function iqe(e){const t=e;return nO(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function oqe(e){return nO(t);function t(n){return n&&n.type===e}}function nO(e){return t;function t(n,r,i){return!!(aqe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function sqe(){return!0}function aqe(e){return e!==null&&typeof e=="object"&&"type"in e}const Bye=[],uqe=!0,Ene=!1,lqe="skip";function cqe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Lye(i),s=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Bye,m,p,g;if((!t||o(u,l,c[c.length-1]||void 0))&&(h=fqe(n(u,c)),h[0]===Ene))return h;if("children"in u&&u.children){const v=u;if(v.children&&h[0]!==lqe)for(p=(r?v.children.length:-1)+s,g=c.concat(v);p>-1&&p<v.children.length;){const b=v.children[p];if(m=a(b,p,g)(),m[0]===Ene)return m;p=typeof m[1]=="number"?m[1]:p+s}}return h}}}function fqe(e){return Array.isArray(e)?e:typeof e=="number"?[uqe,e]:e==null?Bye:[e]}function wH(e,t,n,r){let i,o,s;typeof t=="function"&&typeof n!="function"?(o=void 0,s=t,i=n):(o=t,s=n,i=r),cqe(e,o,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return s(u,f,c)}}const dB={}.hasOwnProperty,dqe={};function hqe(e,t){const n=t||dqe,r=new Map,i=new Map,o=new Map,s={...KHe,...n.handlers},a={all:l,applyData:mqe,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:u,options:n,patch:pqe,wrap:yqe};return wH(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(dB.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:p,...g}=c,v=Ex(g);return v.children=a.all(c),v}return Ex(c)}return(a.options.unknownHandler||gqe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const m=a.one(d[h],c);if(m){if(h&&d[h-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=_ne(m.value)),!Array.isArray(m)&&m.type==="element")){const p=m.children[0];p&&p.type==="text"&&(p.value=_ne(p.value))}Array.isArray(m)?f.push(...m):f.push(m)}}}return f}}function pqe(e,t){e.position&&(t.position=Kze(e))}function mqe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,Ex(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function gqe(e,t){const n=t.data||{},r="value"in t&&!(dB.call(n,"hProperties")||dB.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function yqe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function _ne(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Tne(e,t){const n=hqe(e,t),r=n.one(e,void 0),i=nqe(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function vqe(e,t){return e&&"run"in e?async function(n,r){const i=Tne(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Tne(n,{file:r,...t||e})}}function Cne(e){if(e)throw e}var A5,Sne;function bqe(){if(Sne)return A5;Sne=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},o=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},s=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return A5=function u(){var l,c,f,d,h,m,p=arguments[0],g=1,v=arguments.length,b=!1;for(typeof p=="boolean"&&(b=p,p=arguments[1]||{},g=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});g<v;++g)if(l=arguments[g],l!=null)for(c in l)f=a(p,c),d=a(l,c),p!==d&&(b&&d&&(o(d)||(h=i(d)))?(h?(h=!1,m=f&&i(f)?f:[]):m=f&&o(f)?f:{},s(p,{name:c,newValue:u(b,m,d)})):typeof d<"u"&&s(p,{name:c,newValue:d}));return p},A5}var xqe=bqe();const D5=Fl(xqe);function hB(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wqe(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(u,...l){const c=e[++o];let f=-1;if(u){s(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Eqe(c,a)(...l):s(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Eqe(e,t){let n;return r;function r(...s){const a=e.length>s.length;let u;a&&s.push(i);try{u=e.apply(this,s)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(o,i):u instanceof Error?i(u):o(u))}function i(s,...a){n||(n=!0,t(s,...a))}function o(s){i(null,s)}}const id={basename:_qe,dirname:Tqe,extname:Cqe,join:Sqe,sep:"/"};function _qe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');KC(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function Tqe(e){if(KC(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Cqe(e){KC(e);let t=e.length,n=-1,r=0,i=-1,o=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Sqe(...e){let t=-1,n;for(;++t<e.length;)KC(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Aqe(n)}function Aqe(e){KC(e);const t=e.codePointAt(0)===47;let n=Dqe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Dqe(e,t){let n="",r=0,i=-1,o=0,s=-1,a,u;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function KC(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kqe={cwd:Iqe};function Iqe(){return"/"}function pB(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Rqe(e){if(typeof e=="string")e=new URL(e);else if(!pB(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Nqe(e)}function Nqe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const k5=["history","path","basename","stem","extname","dirname"];class jye{constructor(t){let n;t?pB(t)?n={path:t}:typeof t=="string"||Pqe(t)?n={value:t}:n=t:n={},this.cwd=kqe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<k5.length;){const o=k5[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)k5.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?id.basename(this.path):void 0}set basename(t){R5(t,"basename"),I5(t,"basename"),this.path=id.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?id.dirname(this.path):void 0}set dirname(t){Ane(this.basename,"dirname"),this.path=id.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?id.extname(this.path):void 0}set extname(t){if(I5(t,"extname"),Ane(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=id.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){pB(t)&&(t=Rqe(t)),R5(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?id.basename(this.path,this.extname):void 0}set stem(t){R5(t,"stem"),I5(t,"stem"),this.path=id.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new xa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function I5(e,t){if(e&&e.includes(id.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+id.sep+"`")}function R5(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ane(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Pqe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Oqe=function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};Object.setPrototypeOf(o,r);const s=Object.getOwnPropertyNames(i);for(const a of s){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(o,a,u)}return o},Fqe={}.hasOwnProperty;class EH extends Oqe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=wqe()}copy(){const t=new EH;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(D5(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(O5("data",this.frozen),this.namespace[t]=n,this):Fqe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(O5("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=TD(t),r=this.parser||this.Parser;return N5("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),N5("process",this.parser||this.Parser),P5("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,s){const a=TD(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,m=r.stringify(h,d);Lqe(m)?d.value=m:d.result=m,l(c,d)});function l(c,f){c||!f?s(c):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),N5("processSync",this.parser||this.Parser),P5("processSync",this.compiler||this.Compiler),this.process(t,i),kne("processSync","process",n),r;function i(o,s){n=!0,Cne(o),r=s}}run(t,n,r){Dne(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(s,a){const u=TD(n);i.run(t,u,l);function l(c,f,d){c?a(c):r(void 0,f||t,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),kne("runSync","run",r),i;function o(s,a){Cne(s),i=a,r=!0}}stringify(t,n){this.freeze();const r=TD(n),i=this.compiler||this.Compiler;return P5("stringify",i),Dne(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(O5("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=D5(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];o(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...m]=c;const p=r[d][1];hB(p)&&hB(h)&&(h=D5(!0,p,h)),r[d]=[l,h,...m]}}}}const Mqe=new EH().freeze();function N5(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function P5(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function O5(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Dne(e){if(!hB(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function kne(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function TD(e){return $qe(e)?e:new jye(e)}function $qe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Lqe(e){return typeof e=="string"||Bqe(e)}function Bqe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const jqe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ine=[],Rne={allowDangerousHtml:!0},zqe=/^(https?|ircs?|mailto|xmpp)$/i,Uqe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Vqe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,o=e.components,s=e.disallowedElements,a=e.rehypePlugins||Ine,u=e.remarkPlugins||Ine,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Rne}:Rne,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Hqe,h=Mqe().use(_He).use(u).use(vqe,l).use(a),m=new jye;typeof r=="string"&&(m.value=r);for(const b of Uqe)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+jqe+b.id,void 0);const p=h.parse(m);let g=h.runSync(p,m);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),wH(g,v),tUe(g,{Fragment:C.Fragment,components:o,ignoreInvalidStyle:!0,jsx:C.jsx,jsxs:C.jsxs,passKeys:!0,passNode:!0});function v(b,w,E){if(b.type==="raw"&&E&&typeof w=="number")return c?E.children.splice(w,1):E.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let _;for(_ in T5)if(Object.hasOwn(T5,_)&&Object.hasOwn(b.properties,_)){const T=b.properties[_],S=T5[_];(S===null||S.includes(b.tagName))&&(b.properties[_]=d(String(T||""),_,b))}}if(b.type==="element"){let _=t?!t.includes(b.tagName):s?s.includes(b.tagName):!1;if(!_&&n&&typeof w=="number"&&(_=!n(b,w,E)),_&&E&&typeof w=="number")return f&&b.children?E.children.splice(w,1,...b.children):E.children.splice(w,1),w}}}function Hqe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||zqe.test(e.slice(0,t))?e:""}const Nne=/[#.]/g;function qqe(e,t){const n=e||"",r={};let i=0,o,s;for(;i<n.length;){Nne.lastIndex=i;const a=Nne.exec(n),u=n.slice(i,a?a.index:n.length);u&&(o?o==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:s=u,i+=u.length),a&&(o=a[0],i++)}return{type:"element",tagName:s||t||"div",properties:r,children:[]}}const mB={}.hasOwnProperty;function zye(e,t,n){const r=n&&Kqe(n);function i(o,s,...a){let u=-1,l;if(o==null){l={type:"root",children:[]};const c=s;a.unshift(c)}else if(l=qqe(o,t),l.tagName=l.tagName.toLowerCase(),r&&mB.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Wqe(s))a.unshift(s);else{let c;for(c in s)mB.call(s,c)&&Gqe(e,l.properties,c,s[c])}for(;++u<a.length;)gB(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Wqe(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const i=t[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const o=i;for(const s of o)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function Gqe(e,t,n,r){const i=J4(e,n);let o=-1,s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=Jte(r):i.commaSeparated?s=Gte(r):i.commaOrSpaceSeparated?s=Jte(Gte(r).join(" ")):s=Pne(i,i.property,r):Array.isArray(r)?s=r.concat():s=i.property==="style"?Yqe(r):String(r);if(Array.isArray(s)){const a=[];for(;++o<s.length;){const u=Pne(i,i.property,s[o]);a[o]=u}s=a}if(i.property==="className"&&Array.isArray(t.className)){const a=s;s=t.className.concat(a)}t[i.property]=s}}function gB(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)gB(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?gB(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Pne(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||CT(n)===CT(t)))return!0}return n}function Yqe(e){const t=[];let n;for(n in e)mB.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Kqe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Xqe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Qqe=zye(YC,"div"),Jqe=zye(tg,"g",Xqe),F5=/\r?\n|\r/g;function Zqe(e){const t=String(e),n=[];for(F5.lastIndex=0;F5.test(t);)n.push(F5.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(o){let s=-1;if(typeof o=="number"&&o>-1&&o<n[n.length-1]){for(;++s<n.length;)if(n[s]>o)return{line:s+1,column:o-(s>0?n[s-1]:0)+1,offset:o}}}function i(o){const s=o&&o.line,a=o&&o.column;if(typeof s=="number"&&typeof a=="number"&&!Number.isNaN(s)&&!Number.isNaN(a)&&s-1 in n){const u=(n[s-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Ey={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Uye={}.hasOwnProperty,eWe=Object.prototype;function tWe(e,t){const n=t||{};return _H({file:n.file||void 0,location:!1,schema:n.space==="svg"?tg:YC,verbose:n.verbose||!1},e)}function _H(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},LI(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Vye(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const o=String(e.file),s=Zqe(o),a=s.toPoint(0),u=s.toPoint(o.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},LI(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},LI(e,r,n),n}default:return n=nWe(e,t),n}}function Vye(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=_H(e,t[n]);r.push(i)}return r}function nWe(e,t){const n=e.schema;e.schema=t.namespaceURI===Ey.svg?tg:YC;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Uye.call(eWe,u)||(i[u]=a.value)}const s=(e.schema.space==="svg"?Jqe:Qqe)(t.tagName,i,Vye(e,t.childNodes));if(LI(e,t,s),s.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Rb(u.startTag),c=u&&u.endTag&&Rb(u.endTag),f=_H(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),s.content=f}return e.schema=n,s}function LI(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=rWe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function rWe(e,t,n){const r=Rb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const o={};let s;if(n.attrs)for(s in n.attrs)Uye.call(n.attrs,s)&&(o[J4(e.schema,s).property]=Rb(n.attrs[s]));n.startTag;const a=Rb(n.startTag),u=n.endTag?Rb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=o,t.data={position:l}}}return r}function Rb(e){const t=One({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=One({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function One(e){return e.line&&e.column?e:void 0}const Fne={}.hasOwnProperty;function Hye(e,t){const n=t||{};function r(i,...o){let s=r.invalid;const a=r.handlers;if(i&&Fne.call(i,e)){const u=String(i[e]);s=Fne.call(a,u)?a[u]:r.unknown}if(s)return s.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const iWe={},oWe={}.hasOwnProperty,qye=Hye("type",{handlers:{root:aWe,element:dWe,text:cWe,comment:fWe,doctype:lWe}});function sWe(e,t){const r=(t||iWe).space;return qye(e,r==="svg"?tg:YC)}function aWe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=TH(e.children,n,t),jw(e,n),n}function uWe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=TH(e.children,n,t),jw(e,n),n}function lWe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return jw(e,t),t}function cWe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return jw(e,t),t}function fWe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return jw(e,t),t}function dWe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=tg);const i=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&oWe.call(e.properties,o)){const u=hWe(r,o,e.properties[o]);u&&i.push(u)}}const s=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Ey[s],childNodes:[],parentNode:null};return a.childNodes=TH(e.children,a,r),jw(e,a),e.tagName==="template"&&e.content&&(a.content=uWe(e.content,r)),a}function hWe(e,t,n){const r=J4(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?oye(n):pye(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=i.name.indexOf(":");o<0?i.prefix="":(i.name=i.name.slice(o+1),i.prefix=r.attribute.slice(0,o)),i.namespace=Ey[r.space]}return i}function TH(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const o=qye(e[r],n);o.parentNode=t,i.push(o)}return i}function jw(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const pWe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],mWe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),pi="";var ie;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ie=ie||(ie={}));const mu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Wye(e){return e>=55296&&e<=57343}function gWe(e){return e>=56320&&e<=57343}function yWe(e,t){return(e-55296)*1024+9216+t}function Gye(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Yye(e){return e>=64976&&e<=65007||mWe.has(e)}var Ve;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ve=Ve||(Ve={}));const vWe=65536;class bWe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=vWe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(gWe(n))return this.pos++,this._addGap(),yWe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ie.EOF;return this._err(Ve.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;const r=this.html.charCodeAt(n);return r===ie.CARRIAGE_RETURN?ie.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;let t=this.html.charCodeAt(this.pos);return t===ie.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ie.LINE_FEED):t===ie.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Wye(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ie.LINE_FEED||t===ie.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Gye(t)?this._err(Ve.controlCharacterInInputStream):Yye(t)&&this._err(Ve.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var $n;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})($n=$n||($n={}));function Kye(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const km=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xWe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var M5;const wWe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),EWe=(M5=String.fromCodePoint)!==null&&M5!==void 0?M5:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function _We(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=wWe.get(e))!==null&&t!==void 0?t:e}var es;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(es||(es={}));const TWe=32;var yd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(yd||(yd={}));function yB(e){return e>=es.ZERO&&e<=es.NINE}function CWe(e){return e>=es.UPPER_A&&e<=es.UPPER_F||e>=es.LOWER_A&&e<=es.LOWER_F}function SWe(e){return e>=es.UPPER_A&&e<=es.UPPER_Z||e>=es.LOWER_A&&e<=es.LOWER_Z||yB(e)}function AWe(e){return e===es.EQUALS||SWe(e)}var Xo;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Xo||(Xo={}));var dy;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(dy||(dy={}));class DWe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Xo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=dy.Strict}startEntity(t){this.decodeMode=t,this.state=Xo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Xo.EntityStart:return t.charCodeAt(n)===es.NUM?(this.state=Xo.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Xo.NamedEntity,this.stateNamedEntity(t,n));case Xo.NumericStart:return this.stateNumericStart(t,n);case Xo.NumericDecimal:return this.stateNumericDecimal(t,n);case Xo.NumericHex:return this.stateNumericHex(t,n);case Xo.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|TWe)===es.LOWER_X?(this.state=Xo.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Xo.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+parseInt(t.substr(n,o),i),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(yB(i)||CWe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(yB(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===es.SEMI)this.consumed+=1;else if(this.decodeMode===dy.Strict)return 0;return this.emitCodePoint(_We(this.result),this.consumed),this.errors&&(t!==es.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&yd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=Qye(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===dy.Attribute&&(o===0||AWe(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&yd.VALUE_LENGTH)>>14,o!==0){if(s===es.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==dy.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&yd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~yd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Xo.NamedEntity:return this.result!==0&&(this.decodeMode!==dy.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Xo.NumericDecimal:return this.emitNumericEntity(0,2);case Xo.NumericHex:return this.emitNumericEntity(0,3);case Xo.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Xo.EntityStart:return 0}}}function Xye(e){let t="";const n=new DWe(e,r=>t+=EWe(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(s,a),n.startEntity(o);const l=n.write(i,a+1);if(l<0){s=a+n.end();break}s=a+l,a=l===0?s+1:s}const u=t+i.slice(s);return t="",u}}function Qye(e,t,n,r){const i=(t&yd.BRANCH_LENGTH)>>7,o=t&yd.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const u=r-o;return u<0||u>=i?-1:e[n+u]-1}let s=n,a=s+i-1;for(;s<=a;){const u=s+a>>>1,l=e[u];if(l<r)s=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Xye(km);Xye(xWe);var nt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(nt=nt||(nt={}));var r0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(r0=r0||(r0={}));var sl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(sl=sl||(sl={}));var Fe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Fe=Fe||(Fe={}));var $;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})($=$||($={}));const kWe=new Map([[Fe.A,$.A],[Fe.ADDRESS,$.ADDRESS],[Fe.ANNOTATION_XML,$.ANNOTATION_XML],[Fe.APPLET,$.APPLET],[Fe.AREA,$.AREA],[Fe.ARTICLE,$.ARTICLE],[Fe.ASIDE,$.ASIDE],[Fe.B,$.B],[Fe.BASE,$.BASE],[Fe.BASEFONT,$.BASEFONT],[Fe.BGSOUND,$.BGSOUND],[Fe.BIG,$.BIG],[Fe.BLOCKQUOTE,$.BLOCKQUOTE],[Fe.BODY,$.BODY],[Fe.BR,$.BR],[Fe.BUTTON,$.BUTTON],[Fe.CAPTION,$.CAPTION],[Fe.CENTER,$.CENTER],[Fe.CODE,$.CODE],[Fe.COL,$.COL],[Fe.COLGROUP,$.COLGROUP],[Fe.DD,$.DD],[Fe.DESC,$.DESC],[Fe.DETAILS,$.DETAILS],[Fe.DIALOG,$.DIALOG],[Fe.DIR,$.DIR],[Fe.DIV,$.DIV],[Fe.DL,$.DL],[Fe.DT,$.DT],[Fe.EM,$.EM],[Fe.EMBED,$.EMBED],[Fe.FIELDSET,$.FIELDSET],[Fe.FIGCAPTION,$.FIGCAPTION],[Fe.FIGURE,$.FIGURE],[Fe.FONT,$.FONT],[Fe.FOOTER,$.FOOTER],[Fe.FOREIGN_OBJECT,$.FOREIGN_OBJECT],[Fe.FORM,$.FORM],[Fe.FRAME,$.FRAME],[Fe.FRAMESET,$.FRAMESET],[Fe.H1,$.H1],[Fe.H2,$.H2],[Fe.H3,$.H3],[Fe.H4,$.H4],[Fe.H5,$.H5],[Fe.H6,$.H6],[Fe.HEAD,$.HEAD],[Fe.HEADER,$.HEADER],[Fe.HGROUP,$.HGROUP],[Fe.HR,$.HR],[Fe.HTML,$.HTML],[Fe.I,$.I],[Fe.IMG,$.IMG],[Fe.IMAGE,$.IMAGE],[Fe.INPUT,$.INPUT],[Fe.IFRAME,$.IFRAME],[Fe.KEYGEN,$.KEYGEN],[Fe.LABEL,$.LABEL],[Fe.LI,$.LI],[Fe.LINK,$.LINK],[Fe.LISTING,$.LISTING],[Fe.MAIN,$.MAIN],[Fe.MALIGNMARK,$.MALIGNMARK],[Fe.MARQUEE,$.MARQUEE],[Fe.MATH,$.MATH],[Fe.MENU,$.MENU],[Fe.META,$.META],[Fe.MGLYPH,$.MGLYPH],[Fe.MI,$.MI],[Fe.MO,$.MO],[Fe.MN,$.MN],[Fe.MS,$.MS],[Fe.MTEXT,$.MTEXT],[Fe.NAV,$.NAV],[Fe.NOBR,$.NOBR],[Fe.NOFRAMES,$.NOFRAMES],[Fe.NOEMBED,$.NOEMBED],[Fe.NOSCRIPT,$.NOSCRIPT],[Fe.OBJECT,$.OBJECT],[Fe.OL,$.OL],[Fe.OPTGROUP,$.OPTGROUP],[Fe.OPTION,$.OPTION],[Fe.P,$.P],[Fe.PARAM,$.PARAM],[Fe.PLAINTEXT,$.PLAINTEXT],[Fe.PRE,$.PRE],[Fe.RB,$.RB],[Fe.RP,$.RP],[Fe.RT,$.RT],[Fe.RTC,$.RTC],[Fe.RUBY,$.RUBY],[Fe.S,$.S],[Fe.SCRIPT,$.SCRIPT],[Fe.SECTION,$.SECTION],[Fe.SELECT,$.SELECT],[Fe.SOURCE,$.SOURCE],[Fe.SMALL,$.SMALL],[Fe.SPAN,$.SPAN],[Fe.STRIKE,$.STRIKE],[Fe.STRONG,$.STRONG],[Fe.STYLE,$.STYLE],[Fe.SUB,$.SUB],[Fe.SUMMARY,$.SUMMARY],[Fe.SUP,$.SUP],[Fe.TABLE,$.TABLE],[Fe.TBODY,$.TBODY],[Fe.TEMPLATE,$.TEMPLATE],[Fe.TEXTAREA,$.TEXTAREA],[Fe.TFOOT,$.TFOOT],[Fe.TD,$.TD],[Fe.TH,$.TH],[Fe.THEAD,$.THEAD],[Fe.TITLE,$.TITLE],[Fe.TR,$.TR],[Fe.TRACK,$.TRACK],[Fe.TT,$.TT],[Fe.U,$.U],[Fe.UL,$.UL],[Fe.SVG,$.SVG],[Fe.VAR,$.VAR],[Fe.WBR,$.WBR],[Fe.XMP,$.XMP]]);function zw(e){var t;return(t=kWe.get(e))!==null&&t!==void 0?t:$.UNKNOWN}const gt=$,IWe={[nt.HTML]:new Set([gt.ADDRESS,gt.APPLET,gt.AREA,gt.ARTICLE,gt.ASIDE,gt.BASE,gt.BASEFONT,gt.BGSOUND,gt.BLOCKQUOTE,gt.BODY,gt.BR,gt.BUTTON,gt.CAPTION,gt.CENTER,gt.COL,gt.COLGROUP,gt.DD,gt.DETAILS,gt.DIR,gt.DIV,gt.DL,gt.DT,gt.EMBED,gt.FIELDSET,gt.FIGCAPTION,gt.FIGURE,gt.FOOTER,gt.FORM,gt.FRAME,gt.FRAMESET,gt.H1,gt.H2,gt.H3,gt.H4,gt.H5,gt.H6,gt.HEAD,gt.HEADER,gt.HGROUP,gt.HR,gt.HTML,gt.IFRAME,gt.IMG,gt.INPUT,gt.LI,gt.LINK,gt.LISTING,gt.MAIN,gt.MARQUEE,gt.MENU,gt.META,gt.NAV,gt.NOEMBED,gt.NOFRAMES,gt.NOSCRIPT,gt.OBJECT,gt.OL,gt.P,gt.PARAM,gt.PLAINTEXT,gt.PRE,gt.SCRIPT,gt.SECTION,gt.SELECT,gt.SOURCE,gt.STYLE,gt.SUMMARY,gt.TABLE,gt.TBODY,gt.TD,gt.TEMPLATE,gt.TEXTAREA,gt.TFOOT,gt.TH,gt.THEAD,gt.TITLE,gt.TR,gt.TRACK,gt.UL,gt.WBR,gt.XMP]),[nt.MATHML]:new Set([gt.MI,gt.MO,gt.MN,gt.MS,gt.MTEXT,gt.ANNOTATION_XML]),[nt.SVG]:new Set([gt.TITLE,gt.FOREIGN_OBJECT,gt.DESC]),[nt.XLINK]:new Set,[nt.XML]:new Set,[nt.XMLNS]:new Set};function Jye(e){return e===gt.H1||e===gt.H2||e===gt.H3||e===gt.H4||e===gt.H5||e===gt.H6}Fe.STYLE,Fe.SCRIPT,Fe.XMP,Fe.IFRAME,Fe.NOEMBED,Fe.NOFRAMES,Fe.PLAINTEXT;const RWe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ue;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ue||(ue={}));const Ji={DATA:ue.DATA,RCDATA:ue.RCDATA,RAWTEXT:ue.RAWTEXT,SCRIPT_DATA:ue.SCRIPT_DATA,PLAINTEXT:ue.PLAINTEXT,CDATA_SECTION:ue.CDATA_SECTION};function U2(e){return e>=ie.DIGIT_0&&e<=ie.DIGIT_9}function Y_(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_Z}function NWe(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_Z}function Im(e){return NWe(e)||Y_(e)}function vB(e){return Im(e)||U2(e)}function Zye(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_F}function e1e(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_F}function PWe(e){return U2(e)||Zye(e)||e1e(e)}function CD(e){return e+32}function t1e(e){return e===ie.SPACE||e===ie.LINE_FEED||e===ie.TABULATION||e===ie.FORM_FEED}function OWe(e){return e===ie.EQUALS_SIGN||vB(e)}function Mne(e){return t1e(e)||e===ie.SOLIDUS||e===ie.GREATER_THAN_SIGN}class FWe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ue.DATA,this.returnState=ue.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new bWe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:$n.START_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:$n.END_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:$n.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:$n.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Kye(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ve.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=zw(t.tagName),t.type===$n.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ve.endTagWithAttributes),t.selfClosing&&this._err(Ve.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case $n.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case $n.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case $n.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:$n.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=t1e(t)?$n.WHITESPACE_CHARACTER:t===ie.NULL?$n.NULL_CHARACTER:$n.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken($n.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let o=0,s=km[0];o>=0&&(o=Qye(km,s,o+1,t),!(o<0));t=this._consume()){r+=1,s=km[o];const a=s&yd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==ie.SEMICOLON&&this._isCharacterReferenceInAttribute()&&OWe(this.preprocessor.peek(1))?(n=[ie.AMPERSAND],o+=u):(n=u===0?[km[o]&~yd.VALUE_LENGTH]:u===1?[km[++o]]:[km[++o],km[++o]],r=0,i=t!==ie.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ve.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===ue.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ue.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ue.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ue.DATA:{this._stateData(t);break}case ue.RCDATA:{this._stateRcdata(t);break}case ue.RAWTEXT:{this._stateRawtext(t);break}case ue.SCRIPT_DATA:{this._stateScriptData(t);break}case ue.PLAINTEXT:{this._statePlaintext(t);break}case ue.TAG_OPEN:{this._stateTagOpen(t);break}case ue.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ue.TAG_NAME:{this._stateTagName(t);break}case ue.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ue.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ue.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ue.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ue.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ue.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ue.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ue.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ue.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ue.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ue.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ue.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ue.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ue.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ue.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ue.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ue.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ue.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ue.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ue.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ue.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ue.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ue.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ue.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ue.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ue.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ue.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ue.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ue.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ue.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ue.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ue.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ue.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ue.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ue.COMMENT_START:{this._stateCommentStart(t);break}case ue.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ue.COMMENT:{this._stateComment(t);break}case ue.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ue.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ue.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ue.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ue.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ue.COMMENT_END:{this._stateCommentEnd(t);break}case ue.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ue.DOCTYPE:{this._stateDoctype(t);break}case ue.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ue.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ue.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ue.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ue.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ue.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ue.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ue.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ue.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ue.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ue.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ue.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ue.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ue.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ue.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ue.CDATA_SECTION:{this._stateCdataSection(t);break}case ue.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ue.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ue.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case ue.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case ue.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case ue.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case ue.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case ue.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case ue.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case ue.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ue.TAG_OPEN;break}case ie.AMPERSAND:{this.returnState=ue.DATA,this.state=ue.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitCodePoint(t);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ie.AMPERSAND:{this.returnState=ue.RCDATA,this.state=ue.CHARACTER_REFERENCE;break}case ie.LESS_THAN_SIGN:{this.state=ue.RCDATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(pi);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ue.RAWTEXT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(pi);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ue.SCRIPT_DATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(pi);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(pi);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Im(t))this._createStartTagToken(),this.state=ue.TAG_NAME,this._stateTagName(t);else switch(t){case ie.EXCLAMATION_MARK:{this.state=ue.MARKUP_DECLARATION_OPEN;break}case ie.SOLIDUS:{this.state=ue.END_TAG_OPEN;break}case ie.QUESTION_MARK:{this._err(Ve.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ue.BOGUS_COMMENT,this._stateBogusComment(t);break}case ie.EOF:{this._err(Ve.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ve.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ue.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Im(t))this._createEndTagToken(),this.state=ue.TAG_NAME,this._stateTagName(t);else switch(t){case ie.GREATER_THAN_SIGN:{this._err(Ve.missingEndTagName),this.state=ue.DATA;break}case ie.EOF:{this._err(Ve.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ve.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ue.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ue.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this.state=ue.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this.state=ue.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.tagName+=pi;break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Y_(t)?CD(t):t)}}_stateRcdataLessThanSign(t){t===ie.SOLIDUS?this.state=ue.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ue.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Im(t)?(this.state=ue.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ue.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ue.BEFORE_ATTRIBUTE_NAME,!1;case ie.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ue.SELF_CLOSING_START_TAG,!1;case ie.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ue.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ue.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ie.SOLIDUS?this.state=ue.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ue.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Im(t)?(this.state=ue.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ue.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ue.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ie.SOLIDUS:{this.state=ue.SCRIPT_DATA_END_TAG_OPEN;break}case ie.EXCLAMATION_MARK:{this.state=ue.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ue.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Im(t)?(this.state=ue.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ue.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ue.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ie.HYPHEN_MINUS?(this.state=ue.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ue.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ie.HYPHEN_MINUS?(this.state=ue.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ue.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ue.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ue.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(pi);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ue.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ue.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=ue.SCRIPT_DATA_ESCAPED,this._emitChars(pi);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ue.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ue.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.GREATER_THAN_SIGN:{this.state=ue.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=ue.SCRIPT_DATA_ESCAPED,this._emitChars(pi);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ue.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ie.SOLIDUS?this.state=ue.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Im(t)?(this._emitChars("<"),this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ue.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Im(t)?(this.state=ue.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ue.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ue.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(mu.SCRIPT,!1)&&Mne(this.preprocessor.peek(mu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<mu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ue.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._emitChars(pi);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pi);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.GREATER_THAN_SIGN:{this.state=ue.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pi);break}case ie.EOF:{this._err(Ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ie.SOLIDUS?(this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(mu.SCRIPT,!1)&&Mne(this.preprocessor.peek(mu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<mu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ue.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ue.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this.state=ue.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._err(Ve.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ue.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ue.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this._leaveAttrName(),this.state=ue.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._leaveAttrName(),this.state=ue.BEFORE_ATTRIBUTE_VALUE;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:{this._err(Ve.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.name+=pi;break}default:this.currentAttr.name+=String.fromCodePoint(Y_(t)?CD(t):t)}}_stateAfterAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:{this.state=ue.SELF_CLOSING_START_TAG;break}case ie.EQUALS_SIGN:{this.state=ue.BEFORE_ATTRIBUTE_VALUE;break}case ie.GREATER_THAN_SIGN:{this.state=ue.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ue.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{this.state=ue.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this.state=ue.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingAttributeValue),this.state=ue.DATA,this.emitCurrentTagToken();break}default:this.state=ue.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ie.QUOTATION_MARK:{this.state=ue.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=ue.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ue.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ie.APOSTROPHE:{this.state=ue.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=ue.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ue.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=ue.BEFORE_ATTRIBUTE_NAME;break}case ie.AMPERSAND:{this.returnState=ue.ATTRIBUTE_VALUE_UNQUOTED,this.state=ue.CHARACTER_REFERENCE;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ue.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:case ie.EQUALS_SIGN:case ie.GRAVE_ACCENT:{this._err(Ve.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=ue.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this._leaveAttrValue(),this.state=ue.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ue.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this._err(Ve.missingWhitespaceBetweenAttributes),this.state=ue.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ie.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=ue.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ve.eofInTag),this._emitEOFToken();break}default:this._err(Ve.unexpectedSolidusInTag),this.state=ue.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=ue.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.data+=pi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(mu.DASH_DASH,!0)?(this._createCommentToken(mu.DASH_DASH.length+1),this.state=ue.COMMENT_START):this._consumeSequenceIfMatch(mu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(mu.DOCTYPE.length+1),this.state=ue.DOCTYPE):this._consumeSequenceIfMatch(mu.CDATA_START,!0)?this.inForeignNode?this.state=ue.CDATA_SECTION:(this._err(Ve.cdataInHtmlContent),this._createCommentToken(mu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ue.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ve.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ue.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ue.COMMENT_START_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptClosingOfEmptyComment),this.state=ue.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=ue.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ue.COMMENT_END;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptClosingOfEmptyComment),this.state=ue.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ue.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ue.COMMENT_END_DASH;break}case ie.LESS_THAN_SIGN:{n.data+="<",this.state=ue.COMMENT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.data+=pi;break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ie.EXCLAMATION_MARK:{n.data+="!",this.state=ue.COMMENT_LESS_THAN_SIGN_BANG;break}case ie.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=ue.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ie.HYPHEN_MINUS?this.state=ue.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ue.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ie.HYPHEN_MINUS?this.state=ue.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ue.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ie.GREATER_THAN_SIGN&&t!==ie.EOF&&this._err(Ve.nestedComment),this.state=ue.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ue.COMMENT_END;break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ue.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=ue.DATA,this.emitCurrentComment(n);break}case ie.EXCLAMATION_MARK:{this.state=ue.COMMENT_END_BANG;break}case ie.HYPHEN_MINUS:{n.data+="-";break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=ue.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{n.data+="--!",this.state=ue.COMMENT_END_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.incorrectlyClosedComment),this.state=ue.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=ue.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ue.BEFORE_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=ue.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ie.EOF:{this._err(Ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingWhitespaceBeforeDoctypeName),this.state=ue.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Y_(t))this._createDoctypeToken(String.fromCharCode(CD(t))),this.state=ue.DOCTYPE_NAME;else switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.NULL:{this._err(Ve.unexpectedNullCharacter),this._createDoctypeToken(pi),this.state=ue.DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ue.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ue.AFTER_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=ue.DATA,this.emitCurrentDoctype(n);break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.name+=pi;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Y_(t)?CD(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.state=ue.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(mu.PUBLIC,!1)?this.state=ue.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(mu.SYSTEM,!1)?this.state=ue.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ve.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ue.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ue.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ue.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ue.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.publicId="",this.state=ue.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.publicId="",this.state=ue.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ue.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=ue.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.publicId+=pi;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=ue.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.publicId+=pi;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ue.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ie.GREATER_THAN_SIGN:{this.state=ue.DATA,this.emitCurrentDoctype(n);break}case ie.QUOTATION_MARK:{this._err(Ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.QUOTATION_MARK:{n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ue.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ue.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=ue.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ue.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=ue.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.systemId+=pi;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=ue.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter),n.systemId+=pi;break}case ie.GREATER_THAN_SIGN:{this._err(Ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.EOF:{this._err(Ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ve.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ue.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ue.DATA;break}case ie.NULL:{this._err(Ve.unexpectedNullCharacter);break}case ie.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ie.RIGHT_SQUARE_BRACKET:{this.state=ue.CDATA_SECTION_BRACKET;break}case ie.EOF:{this._err(Ve.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ie.RIGHT_SQUARE_BRACKET?this.state=ue.CDATA_SECTION_END:(this._emitChars("]"),this.state=ue.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ie.GREATER_THAN_SIGN:{this.state=ue.DATA;break}case ie.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ue.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ie.NUMBER_SIGN?this.state=ue.NUMERIC_CHARACTER_REFERENCE:vB(t)?(this.state=ue.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this.state=ue.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){vB(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ie.SEMICOLON&&this._err(Ve.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ie.LATIN_SMALL_X||t===ie.LATIN_CAPITAL_X?this.state=ue.HEXADEMICAL_CHARACTER_REFERENCE_START:U2(t)?(this.state=ue.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ve.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){PWe(t)?(this.state=ue.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ve.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Zye(t)?this.charRefCode=this.charRefCode*16+t-55:e1e(t)?this.charRefCode=this.charRefCode*16+t-87:U2(t)?this.charRefCode=this.charRefCode*16+t-48:t===ie.SEMICOLON?this.state=ue.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ve.missingSemicolonAfterCharacterReference),this.state=ue.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){U2(t)?this.charRefCode=this.charRefCode*10+t-48:t===ie.SEMICOLON?this.state=ue.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ve.missingSemicolonAfterCharacterReference),this.state=ue.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ie.NULL)this._err(Ve.nullCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ve.characterReferenceOutsideUnicodeRange),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(Wye(this.charRefCode))this._err(Ve.surrogateCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(Yye(this.charRefCode))this._err(Ve.noncharacterCharacterReference);else if(Gye(this.charRefCode)||this.charRefCode===ie.CARRIAGE_RETURN){this._err(Ve.controlCharacterReference);const n=RWe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const n1e=new Set([$.DD,$.DT,$.LI,$.OPTGROUP,$.OPTION,$.P,$.RB,$.RP,$.RT,$.RTC]),$ne=new Set([...n1e,$.CAPTION,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]),SD=new Map([[$.APPLET,nt.HTML],[$.CAPTION,nt.HTML],[$.HTML,nt.HTML],[$.MARQUEE,nt.HTML],[$.OBJECT,nt.HTML],[$.TABLE,nt.HTML],[$.TD,nt.HTML],[$.TEMPLATE,nt.HTML],[$.TH,nt.HTML],[$.ANNOTATION_XML,nt.MATHML],[$.MI,nt.MATHML],[$.MN,nt.MATHML],[$.MO,nt.MATHML],[$.MS,nt.MATHML],[$.MTEXT,nt.MATHML],[$.DESC,nt.SVG],[$.FOREIGN_OBJECT,nt.SVG],[$.TITLE,nt.SVG]]),MWe=[$.H1,$.H2,$.H3,$.H4,$.H5,$.H6],$We=[$.TR,$.TEMPLATE,$.HTML],LWe=[$.TBODY,$.TFOOT,$.THEAD,$.TEMPLATE,$.HTML],BWe=[$.TABLE,$.TEMPLATE,$.HTML],jWe=[$.TD,$.TH];class zWe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=$.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===$.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===nt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==nt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(MWe,nt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(jWe,nt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(BWe,nt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(LWe,nt.HTML)}clearBackToTableRowContext(){this.clearBackTo($We,nt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===$.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===$.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===nt.HTML)return!0;if(SD.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(Jye(n)&&r===nt.HTML)return!0;if(SD.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===nt.HTML)return!0;if((r===$.UL||r===$.OL)&&i===nt.HTML||SD.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===nt.HTML)return!0;if(r===$.BUTTON&&i===nt.HTML||SD.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===nt.HTML){if(r===t)return!0;if(r===$.TABLE||r===$.TEMPLATE||r===$.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===nt.HTML){if(n===$.TBODY||n===$.THEAD||n===$.TFOOT)return!0;if(n===$.TABLE||n===$.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===nt.HTML){if(r===t)return!0;if(r!==$.OPTION&&r!==$.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;n1e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;$ne.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&$ne.has(this.currentTagId);)this.pop()}}const $5=3;var Kc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Kc=Kc||(Kc={}));const Lne={type:Kc.Marker};class UWe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,o=this.treeAdapter.getTagName(t),s=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Kc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===o&&this.treeAdapter.getNamespaceURI(l)===s){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<$5)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<$5)return;const i=new Map(n.map(s=>[s.name,s.value]));let o=0;for(let s=0;s<r.length;s++){const a=r[s];a.attrs.every(u=>i.get(u.name)===u.value)&&(o+=1,o>=$5&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Lne)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Kc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Kc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Lne);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Kc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Kc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Kc.Element&&n.element===t)}}function Bne(e){return{nodeName:"#text",value:e,parentNode:null}}const wb={createDocument(){return{nodeName:"#document",mode:sl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(o=>o.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const o={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};wb.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(wb.isTextNode(n)){n.value+=t;return}}wb.appendChild(e,Bne(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&wb.isTextNode(r)?r.value+=t:wb.insertBefore(e,Bne(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},r1e="html",VWe="about:legacy-compat",HWe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",i1e=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],qWe=[...i1e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],WWe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),o1e=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],GWe=[...o1e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function jne(e,t){return t.some(n=>e.startsWith(n))}function YWe(e){return e.name===r1e&&e.publicId===null&&(e.systemId===null||e.systemId===VWe)}function KWe(e){if(e.name!==r1e)return sl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===HWe)return sl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),WWe.has(n))return sl.QUIRKS;let r=t===null?qWe:i1e;if(jne(n,r))return sl.QUIRKS;if(r=t===null?o1e:GWe,jne(n,r))return sl.LIMITED_QUIRKS}return sl.NO_QUIRKS}const zne={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},XWe="definitionurl",QWe="definitionURL",JWe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),ZWe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:nt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:nt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:nt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:nt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:nt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:nt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:nt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:nt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:nt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:nt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:nt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:nt.XMLNS}]]),eGe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),tGe=new Set([$.B,$.BIG,$.BLOCKQUOTE,$.BODY,$.BR,$.CENTER,$.CODE,$.DD,$.DIV,$.DL,$.DT,$.EM,$.EMBED,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HR,$.I,$.IMG,$.LI,$.LISTING,$.MENU,$.META,$.NOBR,$.OL,$.P,$.PRE,$.RUBY,$.S,$.SMALL,$.SPAN,$.STRONG,$.STRIKE,$.SUB,$.SUP,$.TABLE,$.TT,$.U,$.UL,$.VAR]);function nGe(e){const t=e.tagID;return t===$.FONT&&e.attrs.some(({name:r})=>r===r0.COLOR||r===r0.SIZE||r===r0.FACE)||tGe.has(t)}function s1e(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===XWe){e.attrs[t].name=QWe;break}}function a1e(e){for(let t=0;t<e.attrs.length;t++){const n=JWe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function CH(e){for(let t=0;t<e.attrs.length;t++){const n=ZWe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function rGe(e){const t=eGe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=zw(e.tagName))}function iGe(e,t){return t===nt.MATHML&&(e===$.MI||e===$.MO||e===$.MN||e===$.MS||e===$.MTEXT)}function oGe(e,t,n){if(t===nt.MATHML&&e===$.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===r0.ENCODING){const i=n[r].value.toLowerCase();return i===zne.TEXT_HTML||i===zne.APPLICATION_XML}}return t===nt.SVG&&(e===$.FOREIGN_OBJECT||e===$.DESC||e===$.TITLE)}function sGe(e,t,n,r){return(!r||r===nt.HTML)&&oGe(e,t,n)||(!r||r===nt.MATHML)&&iGe(e,t)}const aGe="hidden",uGe=8,lGe=3;var ve;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ve||(ve={}));const cGe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},u1e=new Set([$.TABLE,$.TBODY,$.TFOOT,$.THEAD,$.TR]),Une={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:wb,onParseError:null};class Vne{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ve.INITIAL,this.originalInsertionMode=ve.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Une,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new FWe(this.options,this),this.activeFormattingElements=new UWe(this.treeAdapter),this.fragmentContextID=r?zw(this.treeAdapter.getTagName(r)):$.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new zWe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Une,...n};t??(t=r.treeAdapter.createElement(Fe.TEMPLATE,nt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",nt.HTML,[]),o=new this(r,i,t);return o.fragmentContextID===$.TEMPLATE&&o.tmplInsertionModeStack.unshift(ve.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const o=(i=t.location)!==null&&i!==void 0?i:cGe,s={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(s)}onItemPush(t,n,r){var i,o;(o=(i=this.treeAdapter).onItemPush)===null||o===void 0||o.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let o,s;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,s=this.fragmentContextID):{current:o,currentTagId:s}=this.openElements,this._setContextModes(o,s)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===nt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,nt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ve.TEXT}switchToPlaintextParsing(){this.insertionMode=ve.TEXT,this.originalInsertionMode=ve.IN_BODY,this.tokenizer.state=Ji.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Fe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==nt.HTML))switch(this.fragmentContextID){case $.TITLE:case $.TEXTAREA:{this.tokenizer.state=Ji.RCDATA;break}case $.STYLE:case $.XMP:case $.IFRAME:case $.NOEMBED:case $.NOFRAMES:case $.NOSCRIPT:{this.tokenizer.state=Ji.RAWTEXT;break}case $.SCRIPT:{this.tokenizer.state=Ji.SCRIPT_DATA;break}case $.PLAINTEXT:{this.tokenizer.state=Ji.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const s=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));s&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,nt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,nt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Fe.HTML,nt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,$.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),o=r?i.lastIndexOf(r):i.length,s=i[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),o=n.type===$n.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===$.SVG&&this.treeAdapter.getTagName(n)===Fe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===nt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===$.MGLYPH||t.tagID===$.MALIGNMARK)&&!this._isIntegrationPoint(r,n,nt.HTML)}_processToken(t){switch(t.type){case $n.CHARACTER:{this.onCharacter(t);break}case $n.NULL_CHARACTER:{this.onNullCharacter(t);break}case $n.COMMENT:{this.onComment(t);break}case $n.DOCTYPE:{this.onDoctype(t);break}case $n.START_TAG:{this._processStartTag(t);break}case $n.END_TAG:{this.onEndTag(t);break}case $n.EOF:{this.onEof(t);break}case $n.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return sGe(t,i,o,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Kc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const o=this.activeFormattingElements.entries[i];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ve.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($.P),this.openElements.popUntilTagNamePopped($.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case $.TR:{this.insertionMode=ve.IN_ROW;return}case $.TBODY:case $.THEAD:case $.TFOOT:{this.insertionMode=ve.IN_TABLE_BODY;return}case $.CAPTION:{this.insertionMode=ve.IN_CAPTION;return}case $.COLGROUP:{this.insertionMode=ve.IN_COLUMN_GROUP;return}case $.TABLE:{this.insertionMode=ve.IN_TABLE;return}case $.BODY:{this.insertionMode=ve.IN_BODY;return}case $.FRAMESET:{this.insertionMode=ve.IN_FRAMESET;return}case $.SELECT:{this._resetInsertionModeForSelect(t);return}case $.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case $.HTML:{this.insertionMode=this.headElement?ve.AFTER_HEAD:ve.BEFORE_HEAD;return}case $.TD:case $.TH:{if(t>0){this.insertionMode=ve.IN_CELL;return}break}case $.HEAD:{if(t>0){this.insertionMode=ve.IN_HEAD;return}break}}this.insertionMode=ve.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===$.TEMPLATE)break;if(r===$.TABLE){this.insertionMode=ve.IN_SELECT_IN_TABLE;return}}this.insertionMode=ve.IN_SELECT}_isElementCausesFosterParenting(t){return u1e.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case $.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===nt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case $.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return IWe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){jYe(this,t);return}switch(this.insertionMode){case ve.INITIAL:{u_(this,t);break}case ve.BEFORE_HTML:{V2(this,t);break}case ve.BEFORE_HEAD:{H2(this,t);break}case ve.IN_HEAD:{q2(this,t);break}case ve.IN_HEAD_NO_SCRIPT:{W2(this,t);break}case ve.AFTER_HEAD:{G2(this,t);break}case ve.IN_BODY:case ve.IN_CAPTION:case ve.IN_CELL:case ve.IN_TEMPLATE:{c1e(this,t);break}case ve.TEXT:case ve.IN_SELECT:case ve.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ve.IN_TABLE:case ve.IN_TABLE_BODY:case ve.IN_ROW:{L5(this,t);break}case ve.IN_TABLE_TEXT:{g1e(this,t);break}case ve.IN_COLUMN_GROUP:{FN(this,t);break}case ve.AFTER_BODY:{MN(this,t);break}case ve.AFTER_AFTER_BODY:{BI(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){BYe(this,t);return}switch(this.insertionMode){case ve.INITIAL:{u_(this,t);break}case ve.BEFORE_HTML:{V2(this,t);break}case ve.BEFORE_HEAD:{H2(this,t);break}case ve.IN_HEAD:{q2(this,t);break}case ve.IN_HEAD_NO_SCRIPT:{W2(this,t);break}case ve.AFTER_HEAD:{G2(this,t);break}case ve.TEXT:{this._insertCharacters(t);break}case ve.IN_TABLE:case ve.IN_TABLE_BODY:case ve.IN_ROW:{L5(this,t);break}case ve.IN_COLUMN_GROUP:{FN(this,t);break}case ve.AFTER_BODY:{MN(this,t);break}case ve.AFTER_AFTER_BODY:{BI(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){bB(this,t);return}switch(this.insertionMode){case ve.INITIAL:case ve.BEFORE_HTML:case ve.BEFORE_HEAD:case ve.IN_HEAD:case ve.IN_HEAD_NO_SCRIPT:case ve.AFTER_HEAD:case ve.IN_BODY:case ve.IN_TABLE:case ve.IN_CAPTION:case ve.IN_COLUMN_GROUP:case ve.IN_TABLE_BODY:case ve.IN_ROW:case ve.IN_CELL:case ve.IN_SELECT:case ve.IN_SELECT_IN_TABLE:case ve.IN_TEMPLATE:case ve.IN_FRAMESET:case ve.AFTER_FRAMESET:{bB(this,t);break}case ve.IN_TABLE_TEXT:{l_(this,t);break}case ve.AFTER_BODY:{yGe(this,t);break}case ve.AFTER_AFTER_BODY:case ve.AFTER_AFTER_FRAMESET:{vGe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ve.INITIAL:{bGe(this,t);break}case ve.BEFORE_HEAD:case ve.IN_HEAD:case ve.IN_HEAD_NO_SCRIPT:case ve.AFTER_HEAD:{this._err(t,Ve.misplacedDoctype);break}case ve.IN_TABLE_TEXT:{l_(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ve.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?zYe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ve.INITIAL:{u_(this,t);break}case ve.BEFORE_HTML:{xGe(this,t);break}case ve.BEFORE_HEAD:{EGe(this,t);break}case ve.IN_HEAD:{Rf(this,t);break}case ve.IN_HEAD_NO_SCRIPT:{CGe(this,t);break}case ve.AFTER_HEAD:{AGe(this,t);break}case ve.IN_BODY:{wa(this,t);break}case ve.IN_TABLE:{_x(this,t);break}case ve.IN_TABLE_TEXT:{l_(this,t);break}case ve.IN_CAPTION:{_Ye(this,t);break}case ve.IN_COLUMN_GROUP:{DH(this,t);break}case ve.IN_TABLE_BODY:{oO(this,t);break}case ve.IN_ROW:{sO(this,t);break}case ve.IN_CELL:{SYe(this,t);break}case ve.IN_SELECT:{b1e(this,t);break}case ve.IN_SELECT_IN_TABLE:{DYe(this,t);break}case ve.IN_TEMPLATE:{IYe(this,t);break}case ve.AFTER_BODY:{NYe(this,t);break}case ve.IN_FRAMESET:{PYe(this,t);break}case ve.AFTER_FRAMESET:{FYe(this,t);break}case ve.AFTER_AFTER_BODY:{$Ye(this,t);break}case ve.AFTER_AFTER_FRAMESET:{LYe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?UYe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ve.INITIAL:{u_(this,t);break}case ve.BEFORE_HTML:{wGe(this,t);break}case ve.BEFORE_HEAD:{_Ge(this,t);break}case ve.IN_HEAD:{TGe(this,t);break}case ve.IN_HEAD_NO_SCRIPT:{SGe(this,t);break}case ve.AFTER_HEAD:{DGe(this,t);break}case ve.IN_BODY:{iO(this,t);break}case ve.TEXT:{hYe(this,t);break}case ve.IN_TABLE:{AT(this,t);break}case ve.IN_TABLE_TEXT:{l_(this,t);break}case ve.IN_CAPTION:{TYe(this,t);break}case ve.IN_COLUMN_GROUP:{CYe(this,t);break}case ve.IN_TABLE_BODY:{xB(this,t);break}case ve.IN_ROW:{v1e(this,t);break}case ve.IN_CELL:{AYe(this,t);break}case ve.IN_SELECT:{x1e(this,t);break}case ve.IN_SELECT_IN_TABLE:{kYe(this,t);break}case ve.IN_TEMPLATE:{RYe(this,t);break}case ve.AFTER_BODY:{E1e(this,t);break}case ve.IN_FRAMESET:{OYe(this,t);break}case ve.AFTER_FRAMESET:{MYe(this,t);break}case ve.AFTER_AFTER_BODY:{BI(this,t);break}}}onEof(t){switch(this.insertionMode){case ve.INITIAL:{u_(this,t);break}case ve.BEFORE_HTML:{V2(this,t);break}case ve.BEFORE_HEAD:{H2(this,t);break}case ve.IN_HEAD:{q2(this,t);break}case ve.IN_HEAD_NO_SCRIPT:{W2(this,t);break}case ve.AFTER_HEAD:{G2(this,t);break}case ve.IN_BODY:case ve.IN_TABLE:case ve.IN_CAPTION:case ve.IN_COLUMN_GROUP:case ve.IN_TABLE_BODY:case ve.IN_ROW:case ve.IN_CELL:case ve.IN_SELECT:case ve.IN_SELECT_IN_TABLE:{p1e(this,t);break}case ve.TEXT:{pYe(this,t);break}case ve.IN_TABLE_TEXT:{l_(this,t);break}case ve.IN_TEMPLATE:{w1e(this,t);break}case ve.AFTER_BODY:case ve.IN_FRAMESET:case ve.AFTER_FRAMESET:case ve.AFTER_AFTER_BODY:case ve.AFTER_AFTER_FRAMESET:{AH(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ie.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ve.IN_HEAD:case ve.IN_HEAD_NO_SCRIPT:case ve.AFTER_HEAD:case ve.TEXT:case ve.IN_COLUMN_GROUP:case ve.IN_SELECT:case ve.IN_SELECT_IN_TABLE:case ve.IN_FRAMESET:case ve.AFTER_FRAMESET:{this._insertCharacters(t);break}case ve.IN_BODY:case ve.IN_CAPTION:case ve.IN_CELL:case ve.IN_TEMPLATE:case ve.AFTER_BODY:case ve.AFTER_AFTER_BODY:case ve.AFTER_AFTER_FRAMESET:{l1e(this,t);break}case ve.IN_TABLE:case ve.IN_TABLE_BODY:case ve.IN_ROW:{L5(this,t);break}case ve.IN_TABLE_TEXT:{m1e(this,t);break}}}}function fGe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):h1e(e,t),n}function dGe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function hGe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,s=i;s!==n;o++,s=i){i=e.openElements.getCommonAncestor(s);const a=e.activeFormattingElements.getElementEntry(s),u=a&&o>=lGe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(s)):(s=pGe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(s,r),r=s)}return r}function pGe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function mGe(e,t,n){const r=e.treeAdapter.getTagName(t),i=zw(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);i===$.TEMPLATE&&o===nt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function gGe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function SH(e,t){for(let n=0;n<uGe;n++){const r=fGe(e,t);if(!r)break;const i=dGe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const o=hGe(e,i,r.element),s=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),s&&mGe(e,s,o),gGe(e,i,r)}}function bB(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function yGe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function vGe(e,t){e._appendCommentNode(t,e.document)}function AH(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(o);s&&!s.endTag&&e._setEndLocation(o,t)}}}}function bGe(e,t){e._setDocumentType(t);const n=t.forceQuirks?sl.QUIRKS:KWe(t);YWe(t)||e._err(t,Ve.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ve.BEFORE_HTML}function u_(e,t){e._err(t,Ve.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,sl.QUIRKS),e.insertionMode=ve.BEFORE_HTML,e._processToken(t)}function xGe(e,t){t.tagID===$.HTML?(e._insertElement(t,nt.HTML),e.insertionMode=ve.BEFORE_HEAD):V2(e,t)}function wGe(e,t){const n=t.tagID;(n===$.HTML||n===$.HEAD||n===$.BODY||n===$.BR)&&V2(e,t)}function V2(e,t){e._insertFakeRootElement(),e.insertionMode=ve.BEFORE_HEAD,e._processToken(t)}function EGe(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.HEAD:{e._insertElement(t,nt.HTML),e.headElement=e.openElements.current,e.insertionMode=ve.IN_HEAD;break}default:H2(e,t)}}function _Ge(e,t){const n=t.tagID;n===$.HEAD||n===$.BODY||n===$.HTML||n===$.BR?H2(e,t):e._err(t,Ve.endTagWithoutMatchingOpenElement)}function H2(e,t){e._insertFakeElement(Fe.HEAD,$.HEAD),e.headElement=e.openElements.current,e.insertionMode=ve.IN_HEAD,e._processToken(t)}function Rf(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:{e._appendElement(t,nt.HTML),t.ackSelfClosing=!0;break}case $.TITLE:{e._switchToTextParsing(t,Ji.RCDATA);break}case $.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Ji.RAWTEXT):(e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_HEAD_NO_SCRIPT);break}case $.NOFRAMES:case $.STYLE:{e._switchToTextParsing(t,Ji.RAWTEXT);break}case $.SCRIPT:{e._switchToTextParsing(t,Ji.SCRIPT_DATA);break}case $.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ve.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ve.IN_TEMPLATE);break}case $.HEAD:{e._err(t,Ve.misplacedStartTagForHeadElement);break}default:q2(e,t)}}function TGe(e,t){switch(t.tagID){case $.HEAD:{e.openElements.pop(),e.insertionMode=ve.AFTER_HEAD;break}case $.BODY:case $.BR:case $.HTML:{q2(e,t);break}case $.TEMPLATE:{F1(e,t);break}default:e._err(t,Ve.endTagWithoutMatchingOpenElement)}}function F1(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==$.TEMPLATE&&e._err(t,Ve.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ve.endTagWithoutMatchingOpenElement)}function q2(e,t){e.openElements.pop(),e.insertionMode=ve.AFTER_HEAD,e._processToken(t)}function CGe(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.BASEFONT:case $.BGSOUND:case $.HEAD:case $.LINK:case $.META:case $.NOFRAMES:case $.STYLE:{Rf(e,t);break}case $.NOSCRIPT:{e._err(t,Ve.nestedNoscriptInHead);break}default:W2(e,t)}}function SGe(e,t){switch(t.tagID){case $.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ve.IN_HEAD;break}case $.BR:{W2(e,t);break}default:e._err(t,Ve.endTagWithoutMatchingOpenElement)}}function W2(e,t){const n=t.type===$n.EOF?Ve.openElementsLeftAfterEof:Ve.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ve.IN_HEAD,e._processToken(t)}function AGe(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.BODY:{e._insertElement(t,nt.HTML),e.framesetOk=!1,e.insertionMode=ve.IN_BODY;break}case $.FRAMESET:{e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_FRAMESET;break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{e._err(t,Ve.abandonedHeadElementChild),e.openElements.push(e.headElement,$.HEAD),Rf(e,t),e.openElements.remove(e.headElement);break}case $.HEAD:{e._err(t,Ve.misplacedStartTagForHeadElement);break}default:G2(e,t)}}function DGe(e,t){switch(t.tagID){case $.BODY:case $.HTML:case $.BR:{G2(e,t);break}case $.TEMPLATE:{F1(e,t);break}default:e._err(t,Ve.endTagWithoutMatchingOpenElement)}}function G2(e,t){e._insertFakeElement(Fe.BODY,$.BODY),e.insertionMode=ve.IN_BODY,rO(e,t)}function rO(e,t){switch(t.type){case $n.CHARACTER:{c1e(e,t);break}case $n.WHITESPACE_CHARACTER:{l1e(e,t);break}case $n.COMMENT:{bB(e,t);break}case $n.START_TAG:{wa(e,t);break}case $n.END_TAG:{iO(e,t);break}case $n.EOF:{p1e(e,t);break}}}function l1e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function c1e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function kGe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function IGe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function RGe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_FRAMESET)}function NGe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,nt.HTML)}function PGe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),Jye(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,nt.HTML)}function OGe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,nt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function FGe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,nt.HTML),n||(e.formElement=e.openElements.current))}function MGe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===$.LI&&i===$.LI||(n===$.DD||n===$.DT)&&(i===$.DD||i===$.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==$.ADDRESS&&i!==$.DIV&&i!==$.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,nt.HTML)}function $Ge(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,nt.HTML),e.tokenizer.state=Ji.PLAINTEXT}function LGe(e,t){e.openElements.hasInScope($.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,nt.HTML),e.framesetOk=!1}function BGe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Fe.A);n&&(SH(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,nt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function jGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,nt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function zGe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope($.NOBR)&&(SH(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,nt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function UGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,nt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function VGe(e,t){e.treeAdapter.getDocumentMode(e.document)!==sl.QUIRKS&&e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,nt.HTML),e.framesetOk=!1,e.insertionMode=ve.IN_TABLE}function f1e(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,nt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function d1e(e){const t=Kye(e,r0.TYPE);return t!=null&&t.toLowerCase()===aGe}function HGe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,nt.HTML),d1e(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function qGe(e,t){e._appendElement(t,nt.HTML),t.ackSelfClosing=!0}function WGe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._appendElement(t,nt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function GGe(e,t){t.tagName=Fe.IMG,t.tagID=$.IMG,f1e(e,t)}function YGe(e,t){e._insertElement(t,nt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Ji.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ve.TEXT}function KGe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Ji.RAWTEXT)}function XGe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Ji.RAWTEXT)}function Hne(e,t){e._switchToTextParsing(t,Ji.RAWTEXT)}function QGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,nt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ve.IN_TABLE||e.insertionMode===ve.IN_CAPTION||e.insertionMode===ve.IN_TABLE_BODY||e.insertionMode===ve.IN_ROW||e.insertionMode===ve.IN_CELL?ve.IN_SELECT_IN_TABLE:ve.IN_SELECT}function JGe(e,t){e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,nt.HTML)}function ZGe(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,nt.HTML)}function eYe(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion($.RTC),e._insertElement(t,nt.HTML)}function tYe(e,t){e._reconstructActiveFormattingElements(),s1e(t),CH(t),t.selfClosing?e._appendElement(t,nt.MATHML):e._insertElement(t,nt.MATHML),t.ackSelfClosing=!0}function nYe(e,t){e._reconstructActiveFormattingElements(),a1e(t),CH(t),t.selfClosing?e._appendElement(t,nt.SVG):e._insertElement(t,nt.SVG),t.ackSelfClosing=!0}function qne(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,nt.HTML)}function wa(e,t){switch(t.tagID){case $.I:case $.S:case $.B:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.SMALL:case $.STRIKE:case $.STRONG:{jGe(e,t);break}case $.A:{BGe(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{PGe(e,t);break}case $.P:case $.DL:case $.OL:case $.UL:case $.DIV:case $.DIR:case $.NAV:case $.MAIN:case $.MENU:case $.ASIDE:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.DETAILS:case $.ADDRESS:case $.ARTICLE:case $.SECTION:case $.SUMMARY:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{NGe(e,t);break}case $.LI:case $.DD:case $.DT:{MGe(e,t);break}case $.BR:case $.IMG:case $.WBR:case $.AREA:case $.EMBED:case $.KEYGEN:{f1e(e,t);break}case $.HR:{WGe(e,t);break}case $.RB:case $.RTC:{ZGe(e,t);break}case $.RT:case $.RP:{eYe(e,t);break}case $.PRE:case $.LISTING:{OGe(e,t);break}case $.XMP:{KGe(e,t);break}case $.SVG:{nYe(e,t);break}case $.HTML:{kGe(e,t);break}case $.BASE:case $.LINK:case $.META:case $.STYLE:case $.TITLE:case $.SCRIPT:case $.BGSOUND:case $.BASEFONT:case $.TEMPLATE:{Rf(e,t);break}case $.BODY:{IGe(e,t);break}case $.FORM:{FGe(e,t);break}case $.NOBR:{zGe(e,t);break}case $.MATH:{tYe(e,t);break}case $.TABLE:{VGe(e,t);break}case $.INPUT:{HGe(e,t);break}case $.PARAM:case $.TRACK:case $.SOURCE:{qGe(e,t);break}case $.IMAGE:{GGe(e,t);break}case $.BUTTON:{LGe(e,t);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{UGe(e,t);break}case $.IFRAME:{XGe(e,t);break}case $.SELECT:{QGe(e,t);break}case $.OPTION:case $.OPTGROUP:{JGe(e,t);break}case $.NOEMBED:{Hne(e,t);break}case $.FRAMESET:{RGe(e,t);break}case $.TEXTAREA:{YGe(e,t);break}case $.NOSCRIPT:{e.options.scriptingEnabled?Hne(e,t):qne(e,t);break}case $.PLAINTEXT:{$Ge(e,t);break}case $.COL:case $.TH:case $.TD:case $.TR:case $.HEAD:case $.FRAME:case $.TBODY:case $.TFOOT:case $.THEAD:case $.CAPTION:case $.COLGROUP:break;default:qne(e,t)}}function rYe(e,t){if(e.openElements.hasInScope($.BODY)&&(e.insertionMode=ve.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function iYe(e,t){e.openElements.hasInScope($.BODY)&&(e.insertionMode=ve.AFTER_BODY,E1e(e,t))}function oYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function sYe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope($.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped($.FORM):n&&e.openElements.remove(n))}function aYe(e){e.openElements.hasInButtonScope($.P)||e._insertFakeElement(Fe.P,$.P),e._closePElement()}function uYe(e){e.openElements.hasInListItemScope($.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion($.LI),e.openElements.popUntilTagNamePopped($.LI))}function lYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function cYe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function fYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function dYe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Fe.BR,$.BR),e.openElements.pop(),e.framesetOk=!1}function h1e(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const o=e.openElements.items[i],s=e.openElements.tagIDs[i];if(r===s&&(r!==$.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(o,s))break}}function iO(e,t){switch(t.tagID){case $.A:case $.B:case $.I:case $.S:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.NOBR:case $.SMALL:case $.STRIKE:case $.STRONG:{SH(e,t);break}case $.P:{aYe(e);break}case $.DL:case $.UL:case $.OL:case $.DIR:case $.DIV:case $.NAV:case $.PRE:case $.MAIN:case $.MENU:case $.ASIDE:case $.BUTTON:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.ADDRESS:case $.ARTICLE:case $.DETAILS:case $.SECTION:case $.SUMMARY:case $.LISTING:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{oYe(e,t);break}case $.LI:{uYe(e);break}case $.DD:case $.DT:{lYe(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{cYe(e);break}case $.BR:{dYe(e);break}case $.BODY:{rYe(e,t);break}case $.HTML:{iYe(e,t);break}case $.FORM:{sYe(e);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{fYe(e,t);break}case $.TEMPLATE:{F1(e,t);break}default:h1e(e,t)}}function p1e(e,t){e.tmplInsertionModeStack.length>0?w1e(e,t):AH(e,t)}function hYe(e,t){var n;t.tagID===$.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function pYe(e,t){e._err(t,Ve.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function L5(e,t){if(u1e.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ve.IN_TABLE_TEXT,t.type){case $n.CHARACTER:{g1e(e,t);break}case $n.WHITESPACE_CHARACTER:{m1e(e,t);break}}else XC(e,t)}function mYe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_CAPTION}function gYe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_COLUMN_GROUP}function yYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Fe.COLGROUP,$.COLGROUP),e.insertionMode=ve.IN_COLUMN_GROUP,DH(e,t)}function vYe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_TABLE_BODY}function bYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Fe.TBODY,$.TBODY),e.insertionMode=ve.IN_TABLE_BODY,oO(e,t)}function xYe(e,t){e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function wYe(e,t){d1e(t)?e._appendElement(t,nt.HTML):XC(e,t),t.ackSelfClosing=!0}function EYe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,nt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function _x(e,t){switch(t.tagID){case $.TD:case $.TH:case $.TR:{bYe(e,t);break}case $.STYLE:case $.SCRIPT:case $.TEMPLATE:{Rf(e,t);break}case $.COL:{yYe(e,t);break}case $.FORM:{EYe(e,t);break}case $.TABLE:{xYe(e,t);break}case $.TBODY:case $.TFOOT:case $.THEAD:{vYe(e,t);break}case $.INPUT:{wYe(e,t);break}case $.CAPTION:{mYe(e,t);break}case $.COLGROUP:{gYe(e,t);break}default:XC(e,t)}}function AT(e,t){switch(t.tagID){case $.TABLE:{e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode());break}case $.TEMPLATE:{F1(e,t);break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:XC(e,t)}}function XC(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,rO(e,t),e.fosterParentingEnabled=n}function m1e(e,t){e.pendingCharacterTokens.push(t)}function g1e(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function l_(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)XC(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const y1e=new Set([$.CAPTION,$.COL,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]);function _Ye(e,t){const n=t.tagID;y1e.has(n)?e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ve.IN_TABLE,_x(e,t)):wa(e,t)}function TYe(e,t){const n=t.tagID;switch(n){case $.CAPTION:case $.TABLE:{e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ve.IN_TABLE,n===$.TABLE&&AT(e,t));break}case $.BODY:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:iO(e,t)}}function DH(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.COL:{e._appendElement(t,nt.HTML),t.ackSelfClosing=!0;break}case $.TEMPLATE:{Rf(e,t);break}default:FN(e,t)}}function CYe(e,t){switch(t.tagID){case $.COLGROUP:{e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=ve.IN_TABLE);break}case $.TEMPLATE:{F1(e,t);break}case $.COL:break;default:FN(e,t)}}function FN(e,t){e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=ve.IN_TABLE,e._processToken(t))}function oO(e,t){switch(t.tagID){case $.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_ROW;break}case $.TH:case $.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Fe.TR,$.TR),e.insertionMode=ve.IN_ROW,sO(e,t);break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ve.IN_TABLE,_x(e,t));break}default:_x(e,t)}}function xB(e,t){const n=t.tagID;switch(t.tagID){case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ve.IN_TABLE);break}case $.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ve.IN_TABLE,AT(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:case $.TR:break;default:AT(e,t)}}function sO(e,t){switch(t.tagID){case $.TH:case $.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,nt.HTML),e.insertionMode=ve.IN_CELL,e.activeFormattingElements.insertMarker();break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ve.IN_TABLE_BODY,oO(e,t));break}default:_x(e,t)}}function v1e(e,t){switch(t.tagID){case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ve.IN_TABLE_BODY);break}case $.TABLE:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ve.IN_TABLE_BODY,xB(e,t));break}case $.TBODY:case $.TFOOT:case $.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope($.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ve.IN_TABLE_BODY,xB(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:break;default:AT(e,t)}}function SYe(e,t){const n=t.tagID;y1e.has(n)?(e.openElements.hasInTableScope($.TD)||e.openElements.hasInTableScope($.TH))&&(e._closeTableCell(),sO(e,t)):wa(e,t)}function AYe(e,t){const n=t.tagID;switch(n){case $.TD:case $.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ve.IN_ROW);break}case $.TABLE:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),v1e(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:break;default:iO(e,t)}}function b1e(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._insertElement(t,nt.HTML);break}case $.OPTGROUP:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop(),e._insertElement(t,nt.HTML);break}case $.INPUT:case $.KEYGEN:case $.TEXTAREA:case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),t.tagID!==$.SELECT&&e._processStartTag(t));break}case $.SCRIPT:case $.TEMPLATE:{Rf(e,t);break}}}function x1e(e,t){switch(t.tagID){case $.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===$.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===$.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop();break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop();break}case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode());break}case $.TEMPLATE:{F1(e,t);break}}}function DYe(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e._processStartTag(t)):b1e(e,t)}function kYe(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e.onEndTag(t)):x1e(e,t)}function IYe(e,t){switch(t.tagID){case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{Rf(e,t);break}case $.CAPTION:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.tmplInsertionModeStack[0]=ve.IN_TABLE,e.insertionMode=ve.IN_TABLE,_x(e,t);break}case $.COL:{e.tmplInsertionModeStack[0]=ve.IN_COLUMN_GROUP,e.insertionMode=ve.IN_COLUMN_GROUP,DH(e,t);break}case $.TR:{e.tmplInsertionModeStack[0]=ve.IN_TABLE_BODY,e.insertionMode=ve.IN_TABLE_BODY,oO(e,t);break}case $.TD:case $.TH:{e.tmplInsertionModeStack[0]=ve.IN_ROW,e.insertionMode=ve.IN_ROW,sO(e,t);break}default:e.tmplInsertionModeStack[0]=ve.IN_BODY,e.insertionMode=ve.IN_BODY,wa(e,t)}}function RYe(e,t){t.tagID===$.TEMPLATE&&F1(e,t)}function w1e(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):AH(e,t)}function NYe(e,t){t.tagID===$.HTML?wa(e,t):MN(e,t)}function E1e(e,t){var n;if(t.tagID===$.HTML){if(e.fragmentContext||(e.insertionMode=ve.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===$.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else MN(e,t)}function MN(e,t){e.insertionMode=ve.IN_BODY,rO(e,t)}function PYe(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.FRAMESET:{e._insertElement(t,nt.HTML);break}case $.FRAME:{e._appendElement(t,nt.HTML),t.ackSelfClosing=!0;break}case $.NOFRAMES:{Rf(e,t);break}}}function OYe(e,t){t.tagID===$.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==$.FRAMESET&&(e.insertionMode=ve.AFTER_FRAMESET))}function FYe(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.NOFRAMES:{Rf(e,t);break}}}function MYe(e,t){t.tagID===$.HTML&&(e.insertionMode=ve.AFTER_AFTER_FRAMESET)}function $Ye(e,t){t.tagID===$.HTML?wa(e,t):BI(e,t)}function BI(e,t){e.insertionMode=ve.IN_BODY,rO(e,t)}function LYe(e,t){switch(t.tagID){case $.HTML:{wa(e,t);break}case $.NOFRAMES:{Rf(e,t);break}}}function BYe(e,t){t.chars=pi,e._insertCharacters(t)}function jYe(e,t){e._insertCharacters(t),e.framesetOk=!1}function _1e(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==nt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function zYe(e,t){if(nGe(t))_1e(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===nt.MATHML?s1e(t):r===nt.SVG&&(rGe(t),a1e(t)),CH(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function UYe(e,t){if(t.tagID===$.P||t.tagID===$.BR){_1e(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===nt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Fe.AREA,Fe.BASE,Fe.BASEFONT,Fe.BGSOUND,Fe.BR,Fe.COL,Fe.EMBED,Fe.FRAME,Fe.HR,Fe.IMG,Fe.INPUT,Fe.KEYGEN,Fe.LINK,Fe.META,Fe.PARAM,Fe.SOURCE,Fe.TRACK,Fe.WBR;const VYe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Wne={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function T1e(e,t){const n=ZYe(e),r=Hye("type",{handlers:{root:HYe,element:qYe,text:WYe,comment:S1e,doctype:GYe,raw:KYe},unknown:XYe}),i={parser:n?new Vne(Wne):Vne.getFragmentParser(void 0,Wne),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Uw(i,nh());const o=n?i.parser.document:i.parser.getFragment(),s=tWe(o,{file:i.options.file});return i.stitches&&wH(s,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),s.type==="root"&&s.children.length===1&&s.children[0].type===e.type?s.children[0]:s}function C1e(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function HYe(e,t){C1e(e.children,t)}function qYe(e,t){QYe(e,t),C1e(e.children,t),JYe(e,t)}function WYe(e,t){const n={type:$n.CHARACTER,chars:e.value,location:QC(e)};Uw(t,nh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function GYe(e,t){const n={type:$n.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:QC(e)};Uw(t,nh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function YYe(e,t){t.stitches=!0;const n=eKe(e);if("children"in e&&"children"in n){const r=T1e({type:"root",children:e.children},t.options);n.children=r.children}S1e({type:"comment",value:{stitch:n}},t)}function S1e(e,t){const n=e.value,r={type:$n.COMMENT,data:n,location:QC(e)};Uw(t,nh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function KYe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,A1e(t,nh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function XYe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))YYe(n,t);else{let r="";throw VYe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Uw(e,t){A1e(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Ji.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function A1e(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function QYe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Ji.PLAINTEXT)return;Uw(t,nh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Ey.html;i===Ey.html&&n==="svg"&&(i=Ey.svg);const o=sWe({...e,children:[]},{space:i===Ey.svg?"svg":"html"}),s={type:$n.START_TAG,tagName:n,tagID:zw(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:QC(e)};t.parser.currentToken=s,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function JYe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&pWe.includes(n)||t.parser.tokenizer.state===Ji.PLAINTEXT)return;Uw(t,Z4(e));const r={type:$n.END_TAG,tagName:n,tagID:zw(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:QC(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Ji.RCDATA||t.parser.tokenizer.state===Ji.RAWTEXT||t.parser.tokenizer.state===Ji.SCRIPT_DATA)&&(t.parser.tokenizer.state=Ji.DATA)}function ZYe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function QC(e){const t=nh(e)||{line:void 0,column:void 0,offset:void 0},n=Z4(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function eKe(e){return"children"in e?Ex({...e,children:[]}):Ex(e)}function tKe(e){return function(t,n){return T1e(t,{...e,file:n})}}function ya({text:e,required:t}){const n={img({node:i,width:o,height:s,...a}){return C.jsx(eg,{...a,h:s,w:o,ref:void 0})},p({node:i,...o}){return C.jsx(Ye,{...o,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...o}){return C.jsx(Ui,{...o,order:1,...o,pb:12})},h2({node:i,...o}){return C.jsx(Ui,{...o,order:2,...o,pb:12})},h3({node:i,...o}){return C.jsx(Ui,{...o,order:3,...o,pb:12})},h4({node:i,...o}){return C.jsx(Ui,{...o,order:4,...o,pb:12})},h5({node:i,...o}){return C.jsx(Ui,{...o,order:5,...o,pb:12})},h6({node:i,...o}){return C.jsx(Ui,{...o,order:6,...o,pb:12})},a({node:i,...o}){return C.jsx(Sw,{...o,ref:void 0})},ul({node:i,...o}){return C.jsx(cf,{withPadding:!0,...o,pb:8})},ol({node:i,type:o,...s}){return C.jsx(cf,{type:"ordered",withPadding:!0,...s,pb:8})}};return C.jsx(Vqe,{components:n,rehypePlugins:[tKe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function jI({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return C.jsx(ya,{text:n})}const Gv=14;function nKe({completed:e,inProgress:t,rejected:n}){return C.jsxs(Lt,{ml:4,gap:4,children:[C.jsx(ui,{label:"Completed",children:C.jsx(lf,{variant:"light",color:"green",leftSection:C.jsx(Q4,{width:Gv,height:Gv,style:{paddingTop:1}}),pb:1,children:e})}),C.jsx(ui,{label:"In Progress",children:C.jsx(lf,{variant:"light",color:"orange",leftSection:C.jsx(eye,{width:Gv,height:Gv,style:{paddingTop:1}}),pb:1,children:t})}),C.jsx(ui,{label:"Rejected",children:C.jsx(lf,{variant:"light",color:"red",leftSection:C.jsx(WC,{width:Gv,height:Gv,style:{paddingTop:1}}),pb:1,children:n})})]})}const rKe={},iKe=Object.freeze(Object.defineProperty({__proto__:null,default:rKe},Symbol.toStringTag,{value:"Module"})),kH=Y4e(iKe);var B5,Gne;function aO(){if(Gne)return B5;Gne=1;var e=kH;function t(s,a){var u,l="",c=0,f=!0,d=0,h;function m(){return h=s.charAt(d),d++,h}for(m(),h==="-"&&(l="-",m());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,m();if(f&&c--,h===".")for(l+=".";m()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,m(),(h==="-"||h==="+")&&(l+=h,m());h>="0"&&h<="9";)l+=h,m();for(;h&&h<=" ";)m();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(s[d]==="/"||s[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(s,a){return Object.defineProperty&&Object.defineProperty(s,"__COMMENTS__",{enumerable:!1,writable:!0}),s.__COMMENTS__=a||{}}function r(s){Object.defineProperty(s,"__COMMENTS__",{value:void 0})}function i(s){return s.__COMMENTS__}function o(s){if(!s)return"";var a=s.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return B5={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:o},B5}var j5,Yne;function oKe(){return Yne||(Yne=1,j5="3.2.1"),j5}var z5,Kne;function IH(){if(Kne)return z5;Kne=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function o(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}o.description="parse hexadecimal numbers prefixed with 0x";function s(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return s.description="support ISO dates",z5={loadDsf:e,std:{math:i,hex:o,date:s}},z5}var U5,Xne;function sKe(){return Xne||(Xne=1,U5=function(e,t){var n=aO(),r=IH(),i,o,s,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){o=0,s=" "}function f(L){return L==="{"||L==="}"||L==="["||L==="]"||L===","||L===":"}function d(L){var H,V=0,Q=1;for(H=o-1;H>0&&i[H]!==`
`;H--,V++);for(;H>0;H--)i[H]===`
`&&Q++;throw new Error(L+" at line "+Q+","+V+" >>>"+i.substr(o-V,20)+" ...")}function h(){return s=i.charAt(o),o++,s}function m(L){return i.charAt(o+L)}function p(L){for(var H="",V=s;h();){if(s===V)return h(),L&&V==="'"&&s==="'"&&H.length===0?(h(),g()):H;if(s==="\\")if(h(),s==="u"){for(var Q=0,K=0;K<4;K++){h();var Z=s.charCodeAt(0),U;s>="0"&&s<="9"?U=Z-48:s>="a"&&s<="f"?U=Z-97+10:s>="A"&&s<="F"?U=Z-65+10:d("Bad \\u char "+s),Q=Q*16+U}H+=String.fromCharCode(Q)}else if(typeof a[s]=="string")H+=a[s];else break;else s===`
`||s==="\r"?d("Bad string containing newline"):H+=s}d("Bad string")}function g(){for(var L="",H=0,V=0;;){var Q=m(-V-5);if(!Q||Q===`
`)break;V++}function K(){for(var Z=V;s&&s<=" "&&s!==`
`&&Z-- >0;)h()}for(;s&&s<=" "&&s!==`
`;)h();for(s===`
`&&(h(),K());;){if(!s)d("Bad multiline string");else if(s==="'"){if(H++,h(),H===3)return L.slice(-1)===`
`&&(L=L.slice(0,-1)),L;continue}else for(;H>0;)L+="'",H--;s===`
`?(L+=`
`,h(),K()):(s!=="\r"&&(L+=s),h())}}function v(){if(s==='"'||s==="'")return p(!1);for(var L="",H=o,V=-1;;){if(s===":")return L?V>=0&&V!==L.length&&(o=H+V,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),L;s<=" "?s?V<0&&(V=L.length):d("Found EOF while looking for a key name (check your syntax)"):f(s)?d("Found '"+s+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):L+=s,h()}}function b(){for(;s;){for(;s&&s<=" ";)h();if(s==="#"||s==="/"&&m(0)==="/")for(;s&&s!==`
`;)h();else if(s==="/"&&m(0)==="*"){for(h(),h();s&&!(s==="*"&&m(0)==="/");)h();s&&(h(),h())}else break}}function w(){var L=s;for(f(s)&&d("Found a punctuator character '"+s+"' when expecting a quoteless string (check your syntax)");;){h();var H=s==="\r"||s===`
`||s==="";if(H||s===","||s==="}"||s==="]"||s==="#"||s==="/"&&(m(0)==="/"||m(0)==="*")){var V=L[0];switch(V){case"f":if(L.trim()==="false")return!1;break;case"n":if(L.trim()==="null")return null;break;case"t":if(L.trim()==="true")return!0;break;default:if(V==="-"||V>="0"&&V<="9"){var Q=n.tryParseNumber(L);if(Q!==void 0)return Q}}if(H){L=L.trim();var K=l(L);return K!==void 0?K:L}}L+=s}}function E(L,H){var V;for(L--,V=o-2;V>L&&i[V]<=" "&&i[V]!==`
`;V--);i[V]===`
`&&V--,i[V]==="\r"&&V--;var Q=i.substr(L,V-L+1);for(V=0;V<Q.length;V++)if(Q[V]>" "){var K=Q.indexOf(`
`);if(K>=0){var Z=[Q.substr(0,K),Q.substr(K+1)];return H&&Z[0].trim().length===0&&Z.shift(),Z}else return[Q]}return[]}function _(L){function H(Q,K){var Z,U,B,q;switch(typeof Q){case"string":Q.indexOf(K)>=0&&(q=Q);break;case"object":if(Object.prototype.toString.apply(Q)==="[object Array]")for(Z=0,B=Q.length;Z<B;Z++)q=H(Q[Z],K)||q;else for(U in Q)Object.prototype.hasOwnProperty.call(Q,U)&&(q=H(Q[U],K)||q)}return q}function V(Q){var K=H(L,Q);return K?"found '"+Q+`' in a string value, your mistake could be with:
  > `+K+`
  (unquoted strings contain everything up to the next line!)`:""}return V("}")||V("]")}function T(){var L=[],H,V,Q;try{if(u&&(H=n.createComment(L,{a:[]})),h(),V=o,b(),H&&(Q=E(V,!0).join(`
`)),s==="]")return h(),H&&(H.e=[Q]),L;for(;s;){if(L.push(D()),V=o,b(),s===","&&(h(),V=o,b()),H){var K=E(V);H.a.push([Q||"",K[0]||""]),Q=K[1]}if(s==="]")return h(),H&&(H.a[H.a.length-1][1]+=Q||""),L;b()}d("End of input while parsing an array (missing ']')")}catch(Z){throw Z.hint=Z.hint||_(L),Z}}function S(L){var H="",V={},Q,K,Z;try{if(u&&(Q=n.createComment(V,{c:{},o:[]})),L?K=1:(h(),K=o),b(),Q&&(Z=E(K,!0).join(`
`)),s==="}"&&!L)return Q&&(Q.e=[Z]),h(),V;for(;s;){if(H=v(),b(),s!==":"&&d("Expected ':' instead of '"+s+"'"),h(),V[H]=D(),K=o,b(),s===","&&(h(),K=o,b()),Q){var U=E(K);Q.c[H]=[Z||"",U[0]||""],Z=U[1],Q.o.push(H)}if(s==="}"&&!L)return h(),Q&&(Q.c[H][1]+=Z||""),V;b()}if(L)return V;d("End of input while parsing an object (missing '}')")}catch(B){throw B.hint=B.hint||_(V),B}}function D(){switch(b(),s){case"{":return S();case"[":return T();case"'":case'"':return p(!0);default:return w()}}function k(L,H){var V=o;if(b(),s&&d("Syntax error, found trailing characters"),u){var Q=H.join(`
`),K=E(V).join(`
`);if(K||Q){var Z=n.createComment(L,n.getComment(L));Z.r=[Q,K]}}return L}function R(){b();var L=u?E(1):null;switch(s){case"{":return k(S(),L);case"[":return k(T(),L);default:return k(D(),L)}}function O(){b();var L=u?E(1):null;switch(s){case"{":return k(S(),L);case"[":return k(T(),L)}try{return k(S(!0),L)}catch(H){c();try{return k(D(),L)}catch{throw H}}}if(typeof e!="string")throw new Error("source is not a string");var M=null,F=!0;return t&&typeof t=="object"&&(u=t.keepWsc,M=t.dsf,F=t.legacyRoot!==!1),l=r.loadDsf(M,"parse"),i=e,c(),F?O():R()}),U5}var V5,Qne;function aKe(){return Qne||(Qne=1,V5=function(e,t){var n=aO(),r=IH(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},o=n.EOL,s="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",m=null,p=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(o=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",m=t.dsf,p=t.sortProps,typeof t.space=="number"?s=new Array(t.space+1).join(" "):typeof t.space=="string"&&(s=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var v,b=Object.keys(i);for(v=b.length-1;v>=0;v--){var w=b[v];g[w].push(i[w][0].length,i[w][1].length)}}var E,_="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+_+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+_+"]","g"),D=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+_+"]","g"),k=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),R={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,M="",F=0;function L(q,z){return F+=q[0].length+q[1].length-q[2]-q[3],q[0]+z+q[1]}function H(q){return q.replace(T,function(z){var G=R[z];return typeof G=="string"?L(g.esc,G):L(g.uni,("0000"+z.charCodeAt(0).toString(16)).slice(-4))})}function V(q,z,G,X){return q?(S.lastIndex=0,k.lastIndex=0,c||G||S.test(q)||n.tryParseNumber(q,!0)!==void 0||k.test(q)?(T.lastIndex=0,D.lastIndex=0,T.test(q)?!D.test(q)&&!X&&d?Q(q,z):L(g.qstr,H(q)):L(g.qstr,q)):L(g.str,q)):L(g.qstr,"")}function Q(q,z){var G,X=q.replace(/\r/g,"").split(`
`);if(z+=s,X.length===1)return L(g.mstr,X[0]);var ne=o+z+g.mstr[0];for(G=0;G<X.length;G++)ne+=o,X[G]&&(ne+=z+X[G]);return ne+o+z+g.mstr[1]}function K(q){return q?l||O.test(q)?(T.lastIndex=0,L(g.qkey,T.test(q)?H(q):q)):L(g.key,q):'""'}function Z(q,z,G,X){function ne(Pt){return Pt&&Pt[Pt[0]==="\r"?1:0]===`
`}function ge(Pt){return Pt&&!ne(Pt)}function me(Pt,en,kn){if(!Pt)return"";Pt=n.forceComment(Pt);var pn,Rr=Pt.length;for(pn=0;pn<Rr&&Pt[pn]<=" ";pn++);return kn&&pn>0&&(Pt=Pt.substr(pn)),pn<Rr?en+L(g.rem,Pt):Pt}var ye=E(q);if(ye!==void 0)return L(g.dsf,ye);switch(typeof q){case"string":return V(q,M,z,X);case"number":return isFinite(q)?L(g.num,String(q)):L(g.lit,"null");case"boolean":return L(g.lit,String(q));case"object":if(!q)return L(g.lit,"null");var we;a&&(we=n.getComment(q));var fe=Object.prototype.toString.apply(q)==="[object Array]",se=M;M+=s;var Ce=o+se,Ae=o+M,Ue=G||u?"":Ce,Xe=[],Le,Ge=f?[]:null,et=c,Et=d,ht=h?"":g.com[0],xt=0,te,le,be,ae,pe,Ee,$e,Ne,Ze;if(fe){for(te=0,le=q.length;te<le;te++){if(Le=te<le-1,we?(Ee=we.a[te]||[],$e=ge(Ee[1]),Xe.push(me(Ee[0],`
`)+Ae),Ge&&(Ee[0]||Ee[1]||$e)&&(Ge=null)):Xe.push(Ae),F=0,ae=q[te],Xe.push(Z(ae,we?$e:!1,!0)+(Le?h:"")),Ge){switch(typeof ae){case"string":F=0,c=!0,d=0,Ge.push(Z(ae,!1,!0)+(Le?g.com[0]:"")),c=et,d=Et;break;case"object":if(ae){Ge=null;break}default:Ge.push(Xe[Xe.length-1]+(Le?ht:""));break}Le&&(F+=g.com[0].length-g.com[2]),xt+=F}we&&Ee[1]&&Xe.push(me(Ee[1],$e?" ":`
`,$e))}le===0?we&&we.e&&Xe.push(me(we.e[0],`
`)+Ce):Xe.push(Ce),Xe.length===0?Ne=L(g.arr,""):(Ne=Ue+L(g.arr,Xe.join("")),Ge&&(Ze=Ge.join(" "),Ze.length-xt<=f&&(Ne=L(g.arr,Ze))))}else{var Ke=we?we.o.slice():[],It=[];for(be in q)Object.prototype.hasOwnProperty.call(q,be)&&Ke.indexOf(be)<0&&It.push(be);p&&It.sort();var zt=Ke.concat(It);for(te=0,le=zt.length;te<le;te++)if(Le=te<le-1,be=zt[te],we?(Ee=we.c[be]||[],$e=ge(Ee[1]),Xe.push(me(Ee[0],`
`)+Ae),Ge&&(Ee[0]||Ee[1]||$e)&&(Ge=null)):Xe.push(Ae),F=0,ae=q[be],pe=Z(ae,we&&$e),Xe.push(K(be)+g.col[0]+(ne(pe)?"":" ")+pe+(Le?h:"")),we&&Ee[1]&&Xe.push(me(Ee[1],$e?" ":`
`,$e)),Ge){switch(typeof ae){case"string":F=0,c=!0,d=0,pe=Z(ae,!1),c=et,d=Et,Ge.push(K(be)+g.col[0]+" "+pe+(Le?g.com[0]:""));break;case"object":if(ae){Ge=null;break}default:Ge.push(Xe[Xe.length-1]+(Le?ht:""));break}F+=g.col[0].length-g.col[2],Le&&(F+=g.com[0].length-g.com[2]),xt+=F}le===0?we&&we.e&&Xe.push(me(we.e[0],`
`)+Ce):Xe.push(Ce),Xe.length===0?Ne=L(g.obj,""):(Ne=Ue+L(g.obj,Xe.join("")),Ge&&(Ze=Ge.join(" "),Ze.length-xt<=f&&(Ne=L(g.obj,Ze))))}return M=se,Ne}}E=r.loadDsf(m,"stringify");var U="",B=a?B=(n.getComment(e)||{}).r:null;return B&&B[0]&&(U=B[0]+`
`),U+=Z(e,null,!0,!0),B&&(U+=B[1]||""),U}),V5}var H5,Jne;function uKe(){if(Jne)return H5;Jne=1;var e=aO();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,m,p,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,m=c.length;h<m;h++)o(g.a,h,d.a[h],n(c[h]))&&(p=!0);!p&&d.e&&(g.e=t(d.e[0],d.e[1]),p=!0)}else{g={s:{}};var v,b=Object.keys(c);for(d&&d.o?(v=[],d.o.concat(b).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&v.indexOf(E)<0&&v.push(E)})):v=b,g.o=v,h=0,m=v.length;h<m;h++){var w=v[h];o(g.s,w,d.c[w],n(c[w]))&&(p=!0)}!p&&d.e&&(g.e=t(d.e[0],d.e[1]),p=!0)}return f&&d&&d.r&&(g.r=t(d.r[0],d.r[1])),p?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(m){h+=("# "+m.path.join("/")+": "+r(m.b,m.a,m.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function o(c,f,d,h){var m=t(d?d[0]:void 0,d?d[1]:void 0,h);return m&&(c[f]=m),m}function s(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,m;if(c.a)for(h=0,m=c.a.length;h<m;h++){var p=d.slice().concat([h]),g=c.a[h];g&&(f.push(s(p,g)),a(g.x,f,p))}else c.o&&c.o.forEach(function(v){var b=d.slice().concat([v]),w=c.s[v];w&&(f.push(s(b,w)),a(w.x,f,b))});c.e&&f.push(s(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var m,p=e.createComment(f);if(h.length===0&&c.r&&(p.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){p.a=[];var g=c.a||{};for(var v in g)if(g.hasOwnProperty(v)){m=parseInt(v);var b=c.a[v];if(b){var w=h.slice().concat([m]);m<f.length?(p.a[m]=[b.b,b.a],u(b.x,f[m],d,w)):(d.push(s(w,b)),a(b.x,d,w))}}m===0&&c.e&&(p.e=[c.e.b,c.e.a])}else p.c={},p.o=[],(c.o||[]).forEach(function(E){var _=h.slice().concat([E]),T=c.s[E];Object.prototype.hasOwnProperty.call(f,E)?(p.o.push(E),T&&(p.c[E]=[T.b,T.a],u(T.x,f[E],d,_))):T&&(d.push(s(_,T)),a(T.x,d,_))}),c.e&&(p.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return H5={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},H5}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var q5,Zne;function lKe(){if(Zne)return q5;Zne=1;var e=aO(),t=oKe(),n=sKe(),r=aKe(),i=uKe(),o=IH();return q5={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(s){(s===`
`||s===`\r
`)&&(e.EOL=s)},version:t,rt:{parse:function(s,a){return(a=a||{}).keepWsc=!0,n(s,a)},stringify:function(s,a){return(a=a||{}).keepWsc=!0,r(s,a)}},comments:i,dsf:o.std},q5}var cKe=lKe(),ere={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},fKe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],s=e[n++],a=e[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},RH={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,f=(o&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,s||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(D1e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fKe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new dKe;const d=o<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const m=l<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dKe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hKe=function(e){const t=D1e(e);return RH.encodeByteArray(t,!0)},$N=function(e){return hKe(e).replace(/\./g,"")},k1e=function(e){try{return RH.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pKe=()=>I1e().__FIREBASE_DEFAULTS__,mKe=()=>{if(typeof process>"u"||typeof ere>"u")return;const e=ere.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},gKe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&k1e(e[1]);return t&&JSON.parse(t)},uO=()=>{try{return pKe()||mKe()||gKe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},R1e=e=>{var t,n;return(n=(t=uO())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yKe=e=>{const t=R1e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},N1e=()=>{var e;return(e=uO())===null||e===void 0?void 0:e.config},P1e=e=>{var t;return(t=uO())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vKe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$N(JSON.stringify(n)),$N(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bKe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(va())}function xKe(){var e;const t=(e=uO())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wKe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EKe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _Ke(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TKe(){const e=va();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function CKe(){return!xKe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NH(){try{return typeof indexedDB=="object"}catch{return!1}}function SKe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AKe="FirebaseError";class rh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=AKe,Object.setPrototypeOf(this,rh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vw.prototype.create)}}class Vw{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?DKe(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new rh(i,a,r)}}function DKe(e,t){return e.replace(kKe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const kKe=/\{\$([^}]+)}/g;function IKe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function kT(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(tre(o)&&tre(s)){if(!kT(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tre(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function RKe(e,t){const n=new NKe(e,t);return n.subscribe.bind(n)}class NKe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PKe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=W5),i.error===void 0&&(i.error=W5),i.complete===void 0&&(i.complete=W5);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PKe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function W5(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OKe=1e3,FKe=2,MKe=4*60*60*1e3,$Ke=.5;function LKe(e,t=OKe,n=FKe){const r=t*Math.pow(n,e),i=Math.round($Ke*r*(Math.random()-.5)*2);return Math.min(MKe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(e){return e&&e._delegate?e._delegate:e}class $d{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BKe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new DT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(zKe(t))try{this.getOrInitializeService({instanceIdentifier:ny})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=ny){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ny){return this.instances.has(t)}getOptions(t=ny){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jKe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ny){return this.component?this.component.multipleInstances?t:ny:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jKe(e){return e===ny?void 0:e}function zKe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UKe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new BKe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Wn||(Wn={}));const VKe={debug:Wn.DEBUG,verbose:Wn.VERBOSE,info:Wn.INFO,warn:Wn.WARN,error:Wn.ERROR,silent:Wn.SILENT},HKe=Wn.INFO,qKe={[Wn.DEBUG]:"log",[Wn.VERBOSE]:"log",[Wn.INFO]:"info",[Wn.WARN]:"warn",[Wn.ERROR]:"error"},WKe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=qKe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class lO{constructor(t){this.name=t,this._logLevel=HKe,this._logHandler=WKe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?VKe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wn.DEBUG,...t),this._logHandler(this,Wn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wn.VERBOSE,...t),this._logHandler(this,Wn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wn.INFO,...t),this._logHandler(this,Wn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wn.WARN,...t),this._logHandler(this,Wn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wn.ERROR,...t),this._logHandler(this,Wn.ERROR,...t)}}const GKe=(e,t)=>t.some(n=>e instanceof n);let nre,rre;function YKe(){return nre||(nre=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KKe(){return rre||(rre=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O1e=new WeakMap,wB=new WeakMap,F1e=new WeakMap,G5=new WeakMap,PH=new WeakMap;function XKe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(i0(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&O1e.set(n,e)}).catch(()=>{}),PH.set(t,e),t}function QKe(e){if(wB.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});wB.set(e,t)}let EB={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return wB.get(e);if(t==="objectStoreNames")return e.objectStoreNames||F1e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return i0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function JKe(e){EB=e(EB)}function ZKe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Y5(this),t,...n);return F1e.set(r,t.sort?t.sort():[t]),i0(r)}:KKe().includes(e)?function(...t){return e.apply(Y5(this),t),i0(O1e.get(this))}:function(...t){return i0(e.apply(Y5(this),t))}}function eXe(e){return typeof e=="function"?ZKe(e):(e instanceof IDBTransaction&&QKe(e),GKe(e,YKe())?new Proxy(e,EB):e)}function i0(e){if(e instanceof IDBRequest)return XKe(e);if(G5.has(e))return G5.get(e);const t=eXe(e);return t!==e&&(G5.set(e,t),PH.set(t,e)),t}const Y5=e=>PH.get(e);function tXe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=i0(s);return r&&s.addEventListener("upgradeneeded",u=>{r(i0(s.result),u.oldVersion,u.newVersion,i0(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const nXe=["get","getKey","getAll","getAllKeys","count"],rXe=["put","add","delete","clear"],K5=new Map;function ire(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(K5.get(t))return K5.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=rXe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nXe.includes(n)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return K5.set(t,o),o}JKe(e=>({...e,get:(t,n,r)=>ire(t,n)||e.get(t,n,r),has:(t,n)=>!!ire(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iXe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oXe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oXe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const _B="@firebase/app",ore="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=new lO("@firebase/app"),sXe="@firebase/app-compat",aXe="@firebase/analytics-compat",uXe="@firebase/analytics",lXe="@firebase/app-check-compat",cXe="@firebase/app-check",fXe="@firebase/auth",dXe="@firebase/auth-compat",hXe="@firebase/database",pXe="@firebase/data-connect",mXe="@firebase/database-compat",gXe="@firebase/functions",yXe="@firebase/functions-compat",vXe="@firebase/installations",bXe="@firebase/installations-compat",xXe="@firebase/messaging",wXe="@firebase/messaging-compat",EXe="@firebase/performance",_Xe="@firebase/performance-compat",TXe="@firebase/remote-config",CXe="@firebase/remote-config-compat",SXe="@firebase/storage",AXe="@firebase/storage-compat",DXe="@firebase/firestore",kXe="@firebase/vertexai",IXe="@firebase/firestore-compat",RXe="firebase",NXe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="[DEFAULT]",PXe={[_B]:"fire-core",[sXe]:"fire-core-compat",[uXe]:"fire-analytics",[aXe]:"fire-analytics-compat",[cXe]:"fire-app-check",[lXe]:"fire-app-check-compat",[fXe]:"fire-auth",[dXe]:"fire-auth-compat",[hXe]:"fire-rtdb",[pXe]:"fire-data-connect",[mXe]:"fire-rtdb-compat",[gXe]:"fire-fn",[yXe]:"fire-fn-compat",[vXe]:"fire-iid",[bXe]:"fire-iid-compat",[xXe]:"fire-fcm",[wXe]:"fire-fcm-compat",[EXe]:"fire-perf",[_Xe]:"fire-perf-compat",[TXe]:"fire-rc",[CXe]:"fire-rc-compat",[SXe]:"fire-gcs",[AXe]:"fire-gcs-compat",[DXe]:"fire-fst",[IXe]:"fire-fst-compat",[kXe]:"fire-vertex","fire-js":"fire-js",[RXe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new Map,OXe=new Map,CB=new Map;function sre(e,t){try{e.container.addComponent(t)}catch(n){Ap.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Dp(e){const t=e.name;if(CB.has(t))return Ap.debug(`There were multiple attempts to register component ${t}.`),!1;CB.set(t,e);for(const n of LN.values())sre(n,e);for(const n of OXe.values())sre(n,e);return!0}function Hw(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FXe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},o0=new Vw("app","Firebase",FXe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MXe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $d("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw o0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=NXe;function M1e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:TB,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw o0.create("bad-app-name",{appName:String(i)});if(n||(n=N1e()),!n)throw o0.create("no-options");const o=LN.get(i);if(o){if(kT(n,o.options)&&kT(r,o.config))return o;throw o0.create("duplicate-app",{appName:i})}const s=new UKe(i);for(const u of CB.values())s.addComponent(u);const a=new MXe(n,r,s);return LN.set(i,a),a}function OH(e=TB){const t=LN.get(e);if(!t&&e===TB&&N1e())return M1e();if(!t)throw o0.create("no-app",{appName:e});return t}function ff(e,t,n){var r;let i=(r=PXe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ap.warn(a.join(" "));return}Dp(new $d(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Xe="firebase-heartbeat-database",LXe=1,IT="firebase-heartbeat-store";let X5=null;function $1e(){return X5||(X5=tXe($Xe,LXe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(IT)}catch(n){console.warn(n)}}}}).catch(e=>{throw o0.create("idb-open",{originalErrorMessage:e.message})})),X5}async function BXe(e){try{const n=(await $1e()).transaction(IT),r=await n.objectStore(IT).get(L1e(e));return await n.done,r}catch(t){if(t instanceof rh)Ap.warn(t.message);else{const n=o0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ap.warn(n.message)}}}async function are(e,t){try{const r=(await $1e()).transaction(IT,"readwrite");await r.objectStore(IT).put(t,L1e(e)),await r.done}catch(n){if(n instanceof rh)Ap.warn(n.message);else{const r=o0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ap.warn(r.message)}}}function L1e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jXe=1024,zXe=30*24*60*60*1e3;class UXe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HXe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ure();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=zXe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ap.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ure(),{heartbeatsToSend:r,unsentEntries:i}=VXe(this._heartbeatsCache.heartbeats),o=$N(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ap.warn(n),""}}}function ure(){return new Date().toISOString().substring(0,10)}function VXe(e,t=jXe){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),lre(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lre(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HXe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NH()?SKe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BXe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return are(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return are(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function lre(e){return $N(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qXe(e){Dp(new $d("platform-logger",t=>new iXe(t),"PRIVATE")),Dp(new $d("heartbeat",t=>new UXe(t),"PRIVATE")),ff(_B,ore,e),ff(_B,ore,"esm2017"),ff("fire-js","")}qXe("");var WXe="firebase",GXe="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ff(WXe,GXe,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1e="firebasestorage.googleapis.com",j1e="storageBucket",YXe=2*60*1e3,KXe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends rh{constructor(t,n,r=0){super(Q5(t),`Firebase Storage: ${n} (${Q5(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Q5(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qi||(qi={}));function Q5(e){return"storage/"+e}function FH(){const e="An unknown error occurred, please check the error payload for server response.";return new Gi(qi.UNKNOWN,e)}function XXe(e){return new Gi(qi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function QXe(e){return new Gi(qi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function JXe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gi(qi.UNAUTHENTICATED,e)}function ZXe(){return new Gi(qi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function eQe(e){return new Gi(qi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function tQe(){return new Gi(qi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nQe(){return new Gi(qi.CANCELED,"User canceled the upload/download.")}function rQe(e){return new Gi(qi.INVALID_URL,"Invalid URL '"+e+"'.")}function iQe(e){return new Gi(qi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function oQe(){return new Gi(qi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+j1e+"' property when initializing the app?")}function sQe(){return new Gi(qi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function aQe(){return new Gi(qi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uQe(e){return new Gi(qi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function SB(e){return new Gi(qi.INVALID_ARGUMENT,e)}function z1e(){return new Gi(qi.APP_DELETED,"The Firebase app was deleted.")}function lQe(e){return new Gi(qi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Y2(e,t){return new Gi(qi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function c_(e){throw new Gi(qi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Va.makeFromUrl(t,n)}catch{return new Va(t,"")}if(r.path==="")return r;throw iQe(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),m={bucket:1,path:3},p=n===B1e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${p}/${i}/${g}`,"i"),w=[{regex:a,indices:u,postModify:o},{regex:h,indices:m,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<w.length;E++){const _=w[E],T=_.regex.exec(t);if(T){const S=T[_.indices.bucket];let D=T[_.indices.path];D||(D=""),r=new Va(S,D),_.postModify(r);break}}if(r==null)throw rQe(t);return r}}class cQe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fQe(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){o&&clearTimeout(o)}function h(g,...v){if(l){d();return}if(g){d(),c.call(null,g,...v);return}if(u()||s){d(),c.call(null,g,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let m=!1;function p(g){m||(m=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,p(!0)},n),p}function dQe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQe(e){return e!==void 0}function pQe(e){return typeof e=="object"&&!Array.isArray(e)}function MH(e){return typeof e=="string"||e instanceof String}function cre(e){return $H()&&e instanceof Blob}function $H(){return typeof Blob<"u"}function AB(e,t,n,r){if(r<t)throw SB(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw SB(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function U1e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ny;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Ny||(Ny={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mQe(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQe{constructor(t,n,r,i,o,s,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new AD(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Ny.NO_ERROR,u=o.getStatus();if(!a||mQe(u,this.additionalRetryCodes_)&&this.retry){const c=o.getErrorCode()===Ny.ABORT;r(!1,new AD(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new AD(l,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());hQe(u)?o(u):o()}catch(u){s(u)}else if(a!==null){const u=FH();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){const u=this.appDelete_?z1e():nQe();s(u)}else{const u=tQe();s(u)}};this.canceled_?n(!1,new AD(!1,null,!0)):this.backoffId_=fQe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&dQe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class AD{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function yQe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function vQe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function bQe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function xQe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function wQe(e,t,n,r,i,o,s=!0){const a=U1e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return bQe(l,t),yQe(l,n),vQe(l,o),xQe(l,r),new gQe(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EQe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _Qe(...e){const t=EQe();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if($H())return new Blob(e);throw new Gi(qi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TQe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CQe(e){if(typeof atob>"u")throw uQe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class J5{constructor(t,n){this.data=t,this.contentType=n||null}}function SQe(e,t){switch(e){case bd.RAW:return new J5(V1e(t));case bd.BASE64:case bd.BASE64URL:return new J5(H1e(e,t));case bd.DATA_URL:return new J5(DQe(t),kQe(t))}throw FH()}function V1e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=r,s=e.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function AQe(e){let t;try{t=decodeURIComponent(e)}catch{throw Y2(bd.DATA_URL,"Malformed data URL.")}return V1e(t)}function H1e(e,t){switch(e){case bd.BASE64:{const i=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(i||o)throw Y2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case bd.BASE64URL:{const i=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(i||o)throw Y2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=CQe(t)}catch(i){throw i.message.includes("polyfill")?i:Y2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class q1e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Y2(bd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IQe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function DQe(e){const t=new q1e(e);return t.base64?H1e(bd.BASE64,t.rest):AQe(t.rest)}function kQe(e){return new q1e(e).contentType}function IQe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,n){let r=0,i="";cre(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(cre(this.data_)){const r=this.data_,i=TQe(r,t,n);return i===null?null:new zm(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new zm(r,!0)}}static getBlob(...t){if($H()){const n=t.map(r=>r instanceof zm?r.data_:r);return new zm(_Qe.apply(null,n))}else{const n=t.map(s=>MH(s)?SQe(bd.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new zm(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(e){let t;try{t=JSON.parse(e)}catch{return null}return pQe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function NQe(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function W1e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQe(e,t){return t}class Ra{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||PQe}}let DD=null;function OQe(e){return!MH(e)||e.length<2?e:W1e(e)}function G1e(){if(DD)return DD;const e=[];e.push(new Ra("bucket")),e.push(new Ra("generation")),e.push(new Ra("metageneration")),e.push(new Ra("name","fullPath",!0));function t(o,s){return OQe(s)}const n=new Ra("name");n.xform=t,e.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Ra("size");return i.xform=r,e.push(i),e.push(new Ra("timeCreated")),e.push(new Ra("updated")),e.push(new Ra("md5Hash",null,!0)),e.push(new Ra("cacheControl",null,!0)),e.push(new Ra("contentDisposition",null,!0)),e.push(new Ra("contentEncoding",null,!0)),e.push(new Ra("contentLanguage",null,!0)),e.push(new Ra("contentType",null,!0)),e.push(new Ra("metadata","customMetadata",!0)),DD=e,DD}function FQe(e,t){function n(){const r=e.bucket,i=e.fullPath,o=new Va(r,i);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function MQe(e,t,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,t[s.server])}return FQe(r,e),r}function Y1e(e,t,n){const r=LH(t);return r===null?null:MQe(e,r,n)}function $Qe(e,t,n,r){const i=LH(t);if(i===null||!MH(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+s(c)+"/o/"+s(f),h=ZC(d,n,r),m=U1e({alt:"media",token:l});return h+m})[0]}function LQe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fre="prefixes",dre="items";function BQe(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[fre])for(const i of n[fre]){const o=i.replace(/\/$/,""),s=e._makeStorageReference(new Va(t,o));r.prefixes.push(s)}if(n[dre])for(const i of n[dre]){const o=e._makeStorageReference(new Va(t,i.name));r.items.push(o)}return r}function jQe(e,t,n){const r=LH(n);return r===null?null:BQe(e,t,r)}class cO{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(e){if(!e)throw FH()}function zQe(e,t){function n(r,i){const o=Y1e(e,i,t);return BH(o!==null),o}return n}function UQe(e,t){function n(r,i){const o=jQe(e,t,i);return BH(o!==null),o}return n}function VQe(e,t){function n(r,i){const o=Y1e(e,i,t);return BH(o!==null),$Qe(o,i,e.host,e._protocol)}return n}function jH(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ZXe():i=JXe():n.getStatus()===402?i=QXe(e.bucket):n.getStatus()===403?i=eQe(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function K1e(e){const t=jH(e);function n(r,i){let o=t(r,i);return r.getStatus()===404&&(o=XXe(e.path)),o.serverResponse=i.serverResponse,o}return n}function HQe(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=t.bucketOnlyServerUrl(),a=ZC(s,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new cO(a,u,UQe(e,t.bucket),l);return c.urlParams=o,c.errorHandler=jH(t),c}function qQe(e,t,n){const r=t.fullServerUrl(),i=ZC(r,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,a=new cO(i,o,VQe(e,n),s);return a.errorHandler=K1e(t),a}function WQe(e,t){const n=t.fullServerUrl(),r=ZC(n,e.host,e._protocol),i="DELETE",o=e.maxOperationRetryTime;function s(u,l){}const a=new cO(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=K1e(t),a}function GQe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function YQe(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=GQe(null,t)),r}function KQe(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const u=a();s["Content-Type"]="multipart/related; boundary="+u;const l=YQe(t,r,i),c=LQe(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=zm.getBlob(f,r,d);if(h===null)throw sQe();const m={name:l.fullPath},p=ZC(o,e.host,e._protocol),g="POST",v=e.maxUploadRetryTime,b=new cO(p,g,zQe(e,n),v);return b.urlParams=m,b.headers=s,b.body=h.uploadData(),b.errorHandler=jH(t),b}class XQe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ny.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ny.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ny.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw c_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw c_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw c_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw c_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw c_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class QQe extends XQe{initXhr(){this.xhr_.responseType="text"}}function fO(){return new QQe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(t,n){this._service=t,n instanceof Va?this._location=n:this._location=Va.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new qy(t,n)}get root(){const t=new Va(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W1e(this._location.path)}get storage(){return this._service}get parent(){const t=RQe(this._location.path);if(t===null)return null;const n=new Va(this._location.bucket,t);return new qy(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw lQe(t)}}function JQe(e,t,n){e._throwIfRoot("uploadBytes");const r=KQe(e.storage,e._location,G1e(),new zm(t,!0),n);return e.storage.makeRequestWithTokens(r,fO).then(i=>({metadata:i,ref:e}))}function ZQe(e){const t={prefixes:[],items:[]};return X1e(e,t).then(()=>t)}async function X1e(e,t,n){const i=await eJe(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await X1e(e,t,i.nextPageToken)}function eJe(e,t){t!=null&&typeof t.maxResults=="number"&&AB("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=HQe(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,fO)}function tJe(e){e._throwIfRoot("getDownloadURL");const t=qQe(e.storage,e._location,G1e());return e.storage.makeRequestWithTokens(t,fO).then(n=>{if(n===null)throw aQe();return n})}function nJe(e){e._throwIfRoot("deleteObject");const t=WQe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,fO)}function rJe(e,t){const n=NQe(e._location.path,t),r=new Va(e._location.bucket,n);return new qy(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iJe(e){return/^[A-Za-z]+:\/\//.test(e)}function oJe(e,t){return new qy(e,t)}function Q1e(e,t){if(e instanceof zH){const n=e;if(n._bucket==null)throw oQe();const r=new qy(n,n._bucket);return t!=null?Q1e(r,t):r}else return t!==void 0?rJe(e,t):e}function sJe(e,t){if(t&&iJe(t)){if(e instanceof zH)return oJe(e,t);throw SB("To use ref(service, url), the first argument must be a Storage instance.")}else return Q1e(e,t)}function hre(e,t){const n=t==null?void 0:t[j1e];return n==null?null:Va.makeFromBucketSpec(n,e)}function aJe(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:vKe(i,e.app.options.projectId))}class zH{constructor(t,n,r,i,o){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=B1e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YXe,this._maxUploadRetryTime=KXe,this._requests=new Set,i!=null?this._bucket=Va.makeFromBucketSpec(i,this._host):this._bucket=hre(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Va.makeFromBucketSpec(this._url,t):this._bucket=hre(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){AB("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){AB("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new qy(this,t)}_makeRequest(t,n,r,i,o=!0){if(this._deleted)return new cQe(z1e());{const s=wQe(t,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const pre="@firebase/storage",mre="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1e="storage";function kD(e,t,n){return e=ti(e),JQe(e,t,n)}function f_(e){return e=ti(e),ZQe(e)}function ID(e){return e=ti(e),tJe(e)}function gre(e){return e=ti(e),nJe(e)}function el(e,t){return e=ti(e),sJe(e,t)}function yre(e=OH(),t){e=ti(e);const r=Hw(e,J1e).getImmediate({identifier:t}),i=yKe("storage");return i&&uJe(r,...i),r}function uJe(e,t,n,r={}){aJe(e,t,n,r)}function lJe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new zH(n,r,i,t,M1)}function cJe(){Dp(new $d(J1e,lJe,"PUBLIC").setMultipleInstances(!0)),ff(pre,mre,""),ff(pre,mre,"esm2017")}cJe();var vre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s0,Z1e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,D){function k(){}k.prototype=D.prototype,S.D=D.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(R,O,M){for(var F=Array(arguments.length-2),L=2;L<arguments.length;L++)F[L-2]=arguments[L];return D.prototype[O].apply(R,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,D,k){k||(k=0);var R=Array(16);if(typeof D=="string")for(var O=0;16>O;++O)R[O]=D.charCodeAt(k++)|D.charCodeAt(k++)<<8|D.charCodeAt(k++)<<16|D.charCodeAt(k++)<<24;else for(O=0;16>O;++O)R[O]=D[k++]|D[k++]<<8|D[k++]<<16|D[k++]<<24;D=S.g[0],k=S.g[1],O=S.g[2];var M=S.g[3],F=D+(M^k&(O^M))+R[0]+3614090360&4294967295;D=k+(F<<7&4294967295|F>>>25),F=M+(O^D&(k^O))+R[1]+3905402710&4294967295,M=D+(F<<12&4294967295|F>>>20),F=O+(k^M&(D^k))+R[2]+606105819&4294967295,O=M+(F<<17&4294967295|F>>>15),F=k+(D^O&(M^D))+R[3]+3250441966&4294967295,k=O+(F<<22&4294967295|F>>>10),F=D+(M^k&(O^M))+R[4]+4118548399&4294967295,D=k+(F<<7&4294967295|F>>>25),F=M+(O^D&(k^O))+R[5]+1200080426&4294967295,M=D+(F<<12&4294967295|F>>>20),F=O+(k^M&(D^k))+R[6]+2821735955&4294967295,O=M+(F<<17&4294967295|F>>>15),F=k+(D^O&(M^D))+R[7]+4249261313&4294967295,k=O+(F<<22&4294967295|F>>>10),F=D+(M^k&(O^M))+R[8]+1770035416&4294967295,D=k+(F<<7&4294967295|F>>>25),F=M+(O^D&(k^O))+R[9]+2336552879&4294967295,M=D+(F<<12&4294967295|F>>>20),F=O+(k^M&(D^k))+R[10]+4294925233&4294967295,O=M+(F<<17&4294967295|F>>>15),F=k+(D^O&(M^D))+R[11]+2304563134&4294967295,k=O+(F<<22&4294967295|F>>>10),F=D+(M^k&(O^M))+R[12]+1804603682&4294967295,D=k+(F<<7&4294967295|F>>>25),F=M+(O^D&(k^O))+R[13]+4254626195&4294967295,M=D+(F<<12&4294967295|F>>>20),F=O+(k^M&(D^k))+R[14]+2792965006&4294967295,O=M+(F<<17&4294967295|F>>>15),F=k+(D^O&(M^D))+R[15]+1236535329&4294967295,k=O+(F<<22&4294967295|F>>>10),F=D+(O^M&(k^O))+R[1]+4129170786&4294967295,D=k+(F<<5&4294967295|F>>>27),F=M+(k^O&(D^k))+R[6]+3225465664&4294967295,M=D+(F<<9&4294967295|F>>>23),F=O+(D^k&(M^D))+R[11]+643717713&4294967295,O=M+(F<<14&4294967295|F>>>18),F=k+(M^D&(O^M))+R[0]+3921069994&4294967295,k=O+(F<<20&4294967295|F>>>12),F=D+(O^M&(k^O))+R[5]+3593408605&4294967295,D=k+(F<<5&4294967295|F>>>27),F=M+(k^O&(D^k))+R[10]+38016083&4294967295,M=D+(F<<9&4294967295|F>>>23),F=O+(D^k&(M^D))+R[15]+3634488961&4294967295,O=M+(F<<14&4294967295|F>>>18),F=k+(M^D&(O^M))+R[4]+3889429448&4294967295,k=O+(F<<20&4294967295|F>>>12),F=D+(O^M&(k^O))+R[9]+568446438&4294967295,D=k+(F<<5&4294967295|F>>>27),F=M+(k^O&(D^k))+R[14]+3275163606&4294967295,M=D+(F<<9&4294967295|F>>>23),F=O+(D^k&(M^D))+R[3]+4107603335&4294967295,O=M+(F<<14&4294967295|F>>>18),F=k+(M^D&(O^M))+R[8]+1163531501&4294967295,k=O+(F<<20&4294967295|F>>>12),F=D+(O^M&(k^O))+R[13]+2850285829&4294967295,D=k+(F<<5&4294967295|F>>>27),F=M+(k^O&(D^k))+R[2]+4243563512&4294967295,M=D+(F<<9&4294967295|F>>>23),F=O+(D^k&(M^D))+R[7]+1735328473&4294967295,O=M+(F<<14&4294967295|F>>>18),F=k+(M^D&(O^M))+R[12]+2368359562&4294967295,k=O+(F<<20&4294967295|F>>>12),F=D+(k^O^M)+R[5]+4294588738&4294967295,D=k+(F<<4&4294967295|F>>>28),F=M+(D^k^O)+R[8]+2272392833&4294967295,M=D+(F<<11&4294967295|F>>>21),F=O+(M^D^k)+R[11]+1839030562&4294967295,O=M+(F<<16&4294967295|F>>>16),F=k+(O^M^D)+R[14]+4259657740&4294967295,k=O+(F<<23&4294967295|F>>>9),F=D+(k^O^M)+R[1]+2763975236&4294967295,D=k+(F<<4&4294967295|F>>>28),F=M+(D^k^O)+R[4]+1272893353&4294967295,M=D+(F<<11&4294967295|F>>>21),F=O+(M^D^k)+R[7]+4139469664&4294967295,O=M+(F<<16&4294967295|F>>>16),F=k+(O^M^D)+R[10]+3200236656&4294967295,k=O+(F<<23&4294967295|F>>>9),F=D+(k^O^M)+R[13]+681279174&4294967295,D=k+(F<<4&4294967295|F>>>28),F=M+(D^k^O)+R[0]+3936430074&4294967295,M=D+(F<<11&4294967295|F>>>21),F=O+(M^D^k)+R[3]+3572445317&4294967295,O=M+(F<<16&4294967295|F>>>16),F=k+(O^M^D)+R[6]+76029189&4294967295,k=O+(F<<23&4294967295|F>>>9),F=D+(k^O^M)+R[9]+3654602809&4294967295,D=k+(F<<4&4294967295|F>>>28),F=M+(D^k^O)+R[12]+3873151461&4294967295,M=D+(F<<11&4294967295|F>>>21),F=O+(M^D^k)+R[15]+530742520&4294967295,O=M+(F<<16&4294967295|F>>>16),F=k+(O^M^D)+R[2]+3299628645&4294967295,k=O+(F<<23&4294967295|F>>>9),F=D+(O^(k|~M))+R[0]+4096336452&4294967295,D=k+(F<<6&4294967295|F>>>26),F=M+(k^(D|~O))+R[7]+1126891415&4294967295,M=D+(F<<10&4294967295|F>>>22),F=O+(D^(M|~k))+R[14]+2878612391&4294967295,O=M+(F<<15&4294967295|F>>>17),F=k+(M^(O|~D))+R[5]+4237533241&4294967295,k=O+(F<<21&4294967295|F>>>11),F=D+(O^(k|~M))+R[12]+1700485571&4294967295,D=k+(F<<6&4294967295|F>>>26),F=M+(k^(D|~O))+R[3]+2399980690&4294967295,M=D+(F<<10&4294967295|F>>>22),F=O+(D^(M|~k))+R[10]+4293915773&4294967295,O=M+(F<<15&4294967295|F>>>17),F=k+(M^(O|~D))+R[1]+2240044497&4294967295,k=O+(F<<21&4294967295|F>>>11),F=D+(O^(k|~M))+R[8]+1873313359&4294967295,D=k+(F<<6&4294967295|F>>>26),F=M+(k^(D|~O))+R[15]+4264355552&4294967295,M=D+(F<<10&4294967295|F>>>22),F=O+(D^(M|~k))+R[6]+2734768916&4294967295,O=M+(F<<15&4294967295|F>>>17),F=k+(M^(O|~D))+R[13]+1309151649&4294967295,k=O+(F<<21&4294967295|F>>>11),F=D+(O^(k|~M))+R[4]+4149444226&4294967295,D=k+(F<<6&4294967295|F>>>26),F=M+(k^(D|~O))+R[11]+3174756917&4294967295,M=D+(F<<10&4294967295|F>>>22),F=O+(D^(M|~k))+R[2]+718787259&4294967295,O=M+(F<<15&4294967295|F>>>17),F=k+(M^(O|~D))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+D&4294967295,S.g[1]=S.g[1]+(O+(F<<21&4294967295|F>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.u=function(S,D){D===void 0&&(D=S.length);for(var k=D-this.blockSize,R=this.B,O=this.h,M=0;M<D;){if(O==0)for(;M<=k;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<D;)if(R[O++]=S.charCodeAt(M++),O==this.blockSize){i(this,R),O=0;break}}else for(;M<D;)if(R[O++]=S[M++],O==this.blockSize){i(this,R),O=0;break}}this.h=O,this.o+=D},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var D=1;D<S.length-8;++D)S[D]=0;var k=8*this.o;for(D=S.length-8;D<S.length;++D)S[D]=k&255,k/=256;for(this.u(S),S=Array(16),D=k=0;4>D;++D)for(var R=0;32>R;R+=8)S[k++]=this.g[D]>>>R&255;return S};function o(S,D){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=D(S)}function s(S,D){this.h=D;for(var k=[],R=!0,O=S.length-1;0<=O;O--){var M=S[O]|0;R&&M==D||(k[O]=M,R=!1)}this.g=k}var a={};function u(S){return-128<=S&&128>S?o(S,function(D){return new s([D|0],0>D?-1:0)}):new s([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var D=[],k=1,R=0;S>=k;R++)D[R]=S/k|0,k*=4294967296;return new s(D,0)}function c(S,D){if(S.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S.charAt(0)=="-")return g(c(S.substring(1),D));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(D,8)),R=f,O=0;O<S.length;O+=8){var M=Math.min(8,S.length-O),F=parseInt(S.substring(O,O+M),D);8>M?(M=l(Math.pow(D,M)),R=R.j(M).add(l(F))):(R=R.j(k),R=R.add(l(F)))}return R}var f=u(0),d=u(1),h=u(16777216);e=s.prototype,e.m=function(){if(p(this))return-g(this).m();for(var S=0,D=1,k=0;k<this.g.length;k++){var R=this.i(k);S+=(0<=R?R:4294967296+R)*D,D*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(m(this))return"0";if(p(this))return"-"+g(this).toString(S);for(var D=l(Math.pow(S,6)),k=this,R="";;){var O=E(k,D).g;k=v(k,O.j(D));var M=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=O,m(k))return M+R;for(;6>M.length;)M="0"+M;R=M+R}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function m(S){if(S.h!=0)return!1;for(var D=0;D<S.g.length;D++)if(S.g[D]!=0)return!1;return!0}function p(S){return S.h==-1}e.l=function(S){return S=v(this,S),p(S)?-1:m(S)?0:1};function g(S){for(var D=S.g.length,k=[],R=0;R<D;R++)k[R]=~S.g[R];return new s(k,~S.h).add(d)}e.abs=function(){return p(this)?g(this):this},e.add=function(S){for(var D=Math.max(this.g.length,S.g.length),k=[],R=0,O=0;O<=D;O++){var M=R+(this.i(O)&65535)+(S.i(O)&65535),F=(M>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);R=F>>>16,M&=65535,F&=65535,k[O]=F<<16|M}return new s(k,k[k.length-1]&-2147483648?-1:0)};function v(S,D){return S.add(g(D))}e.j=function(S){if(m(this)||m(S))return f;if(p(this))return p(S)?g(this).j(g(S)):g(g(this).j(S));if(p(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var D=this.g.length+S.g.length,k=[],R=0;R<2*D;R++)k[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<S.g.length;O++){var M=this.i(R)>>>16,F=this.i(R)&65535,L=S.i(O)>>>16,H=S.i(O)&65535;k[2*R+2*O]+=F*H,b(k,2*R+2*O),k[2*R+2*O+1]+=M*H,b(k,2*R+2*O+1),k[2*R+2*O+1]+=F*L,b(k,2*R+2*O+1),k[2*R+2*O+2]+=M*L,b(k,2*R+2*O+2)}for(R=0;R<D;R++)k[R]=k[2*R+1]<<16|k[2*R];for(R=D;R<2*D;R++)k[R]=0;return new s(k,0)};function b(S,D){for(;(S[D]&65535)!=S[D];)S[D+1]+=S[D]>>>16,S[D]&=65535,D++}function w(S,D){this.g=S,this.h=D}function E(S,D){if(m(D))throw Error("division by zero");if(m(S))return new w(f,f);if(p(S))return D=E(g(S),D),new w(g(D.g),g(D.h));if(p(D))return D=E(S,g(D)),new w(g(D.g),D.h);if(30<S.g.length){if(p(S)||p(D))throw Error("slowDivide_ only works with positive integers.");for(var k=d,R=D;0>=R.l(S);)k=_(k),R=_(R);var O=T(k,1),M=T(R,1);for(R=T(R,2),k=T(k,2);!m(R);){var F=M.add(R);0>=F.l(S)&&(O=O.add(k),M=F),R=T(R,1),k=T(k,1)}return D=v(S,O.j(D)),new w(O,D)}for(O=f;0<=S.l(D);){for(k=Math.max(1,Math.floor(S.m()/D.m())),R=Math.ceil(Math.log(k)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),M=l(k),F=M.j(D);p(F)||0<F.l(S);)k-=R,M=l(k),F=M.j(D);m(M)&&(M=d),O=O.add(M),S=v(S,F)}return new w(O,S)}e.A=function(S){return E(this,S).h},e.and=function(S){for(var D=Math.max(this.g.length,S.g.length),k=[],R=0;R<D;R++)k[R]=this.i(R)&S.i(R);return new s(k,this.h&S.h)},e.or=function(S){for(var D=Math.max(this.g.length,S.g.length),k=[],R=0;R<D;R++)k[R]=this.i(R)|S.i(R);return new s(k,this.h|S.h)},e.xor=function(S){for(var D=Math.max(this.g.length,S.g.length),k=[],R=0;R<D;R++)k[R]=this.i(R)^S.i(R);return new s(k,this.h^S.h)};function _(S){for(var D=S.g.length+1,k=[],R=0;R<D;R++)k[R]=S.i(R)<<1|S.i(R-1)>>>31;return new s(k,S.h)}function T(S,D){var k=D>>5;D%=32;for(var R=S.g.length-k,O=[],M=0;M<R;M++)O[M]=0<D?S.i(M+k)>>>D|S.i(M+k+1)<<32-D:S.i(M+k);return new s(O,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Z1e=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=c,s0=s}).apply(typeof vre<"u"?vre:typeof self<"u"?self:typeof window<"u"?window:{});var RD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eve,K_,tve,zI,DB,nve,rve,ive;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,W,J){return I==Array.prototype||I==Object.prototype||(I[W]=J.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof RD=="object"&&RD];for(var W=0;W<I.length;++W){var J=I[W];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var r=n(this);function i(I,W){if(W)e:{var J=r;I=I.split(".");for(var oe=0;oe<I.length-1;oe++){var Pe=I[oe];if(!(Pe in J))break e;J=J[Pe]}I=I[I.length-1],oe=J[I],W=W(oe),W!=oe&&W!=null&&t(J,I,{configurable:!0,writable:!0,value:W})}}function o(I,W){I instanceof String&&(I+="");var J=0,oe=!1,Pe={next:function(){if(!oe&&J<I.length){var He=J++;return{value:W(He,I[He]),done:!1}}return oe=!0,{done:!0,value:void 0}}};return Pe[Symbol.iterator]=function(){return Pe},Pe}i("Array.prototype.values",function(I){return I||function(){return o(this,function(W,J){return J})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function u(I){var W=typeof I;return W=W!="object"?W:I?Array.isArray(I)?"array":W:"null",W=="array"||W=="object"&&typeof I.length=="number"}function l(I){var W=typeof I;return W=="object"&&I!=null||W=="function"}function c(I,W,J){return I.call.apply(I.bind,arguments)}function f(I,W,J){if(!I)throw Error();if(2<arguments.length){var oe=Array.prototype.slice.call(arguments,2);return function(){var Pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Pe,oe),I.apply(W,Pe)}}return function(){return I.apply(W,arguments)}}function d(I,W,J){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(I,W){var J=Array.prototype.slice.call(arguments,1);return function(){var oe=J.slice();return oe.push.apply(oe,arguments),I.apply(this,oe)}}function m(I,W){function J(){}J.prototype=W.prototype,I.aa=W.prototype,I.prototype=new J,I.prototype.constructor=I,I.Qb=function(oe,Pe,He){for(var Ct=Array(arguments.length-2),Nr=2;Nr<arguments.length;Nr++)Ct[Nr-2]=arguments[Nr];return W.prototype[Pe].apply(oe,Ct)}}function p(I){const W=I.length;if(0<W){const J=Array(W);for(let oe=0;oe<W;oe++)J[oe]=I[oe];return J}return[]}function g(I,W){for(let J=1;J<arguments.length;J++){const oe=arguments[J];if(u(oe)){const Pe=I.length||0,He=oe.length||0;I.length=Pe+He;for(let Ct=0;Ct<He;Ct++)I[Pe+Ct]=oe[Ct]}else I.push(oe)}}class v{constructor(W,J){this.i=W,this.j=J,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function b(I){return/^[\s\xa0]*$/.test(I)}function w(){var I=a.navigator;return I&&(I=I.userAgent)?I:""}function E(I){return E[" "](I),I}E[" "]=function(){};var _=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function T(I,W,J){for(const oe in I)W.call(J,I[oe],oe,I)}function S(I,W){for(const J in I)W.call(void 0,I[J],J,I)}function D(I){const W={};for(const J in I)W[J]=I[J];return W}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(I,W){let J,oe;for(let Pe=1;Pe<arguments.length;Pe++){oe=arguments[Pe];for(J in oe)I[J]=oe[J];for(let He=0;He<k.length;He++)J=k[He],Object.prototype.hasOwnProperty.call(oe,J)&&(I[J]=oe[J])}}function O(I){var W=1;I=I.split(":");const J=[];for(;0<W&&I.length;)J.push(I.shift()),W--;return I.length&&J.push(I.join(":")),J}function M(I){a.setTimeout(()=>{throw I},0)}function F(){var I=Z;let W=null;return I.g&&(W=I.g,I.g=I.g.next,I.g||(I.h=null),W.next=null),W}class L{constructor(){this.h=this.g=null}add(W,J){const oe=H.get();oe.set(W,J),this.h?this.h.next=oe:this.g=oe,this.h=oe}}var H=new v(()=>new V,I=>I.reset());class V{constructor(){this.next=this.g=this.h=null}set(W,J){this.h=W,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,K=!1,Z=new L,U=()=>{const I=a.Promise.resolve(void 0);Q=()=>{I.then(B)}};var B=()=>{for(var I;I=F();){try{I.h.call(I.g)}catch(J){M(J)}var W=H;W.j(I),100>W.h&&(W.h++,I.next=W.g,W.g=I)}K=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(I,W){this.type=I,this.g=this.target=W,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var I=!1,W=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const J=()=>{};a.addEventListener("test",J,W),a.removeEventListener("test",J,W)}catch{}return I}();function X(I,W){if(z.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var J=this.type=I.type,oe=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=W,W=I.relatedTarget){if(_){e:{try{E(W.nodeName);var Pe=!0;break e}catch{}Pe=!1}Pe||(W=null)}}else J=="mouseover"?W=I.fromElement:J=="mouseout"&&(W=I.toElement);this.relatedTarget=W,oe?(this.clientX=oe.clientX!==void 0?oe.clientX:oe.pageX,this.clientY=oe.clientY!==void 0?oe.clientY:oe.pageY,this.screenX=oe.screenX||0,this.screenY=oe.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:ne[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&X.aa.h.call(this)}}m(X,z);var ne={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),me=0;function ye(I,W,J,oe,Pe){this.listener=I,this.proxy=null,this.src=W,this.type=J,this.capture=!!oe,this.ha=Pe,this.key=++me,this.da=this.fa=!1}function we(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function fe(I){this.src=I,this.g={},this.h=0}fe.prototype.add=function(I,W,J,oe,Pe){var He=I.toString();I=this.g[He],I||(I=this.g[He]=[],this.h++);var Ct=Ce(I,W,oe,Pe);return-1<Ct?(W=I[Ct],J||(W.fa=!1)):(W=new ye(W,this.src,He,!!oe,Pe),W.fa=J,I.push(W)),W};function se(I,W){var J=W.type;if(J in I.g){var oe=I.g[J],Pe=Array.prototype.indexOf.call(oe,W,void 0),He;(He=0<=Pe)&&Array.prototype.splice.call(oe,Pe,1),He&&(we(W),I.g[J].length==0&&(delete I.g[J],I.h--))}}function Ce(I,W,J,oe){for(var Pe=0;Pe<I.length;++Pe){var He=I[Pe];if(!He.da&&He.listener==W&&He.capture==!!J&&He.ha==oe)return Pe}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),Ue={};function Xe(I,W,J,oe,Pe){if(Array.isArray(W)){for(var He=0;He<W.length;He++)Xe(I,W[He],J,oe,Pe);return null}return J=be(J),I&&I[ge]?I.K(W,J,l(oe)?!!oe.capture:!1,Pe):Le(I,W,J,!1,oe,Pe)}function Le(I,W,J,oe,Pe,He){if(!W)throw Error("Invalid event type");var Ct=l(Pe)?!!Pe.capture:!!Pe,Nr=te(I);if(Nr||(I[Ae]=Nr=new fe(I)),J=Nr.add(W,J,oe,Ct,He),J.proxy)return J;if(oe=Ge(),J.proxy=oe,oe.src=I,oe.listener=J,I.addEventListener)G||(Pe=Ct),Pe===void 0&&(Pe=!1),I.addEventListener(W.toString(),oe,Pe);else if(I.attachEvent)I.attachEvent(ht(W.toString()),oe);else if(I.addListener&&I.removeListener)I.addListener(oe);else throw Error("addEventListener and attachEvent are unavailable.");return J}function Ge(){function I(J){return W.call(I.src,I.listener,J)}const W=xt;return I}function et(I,W,J,oe,Pe){if(Array.isArray(W))for(var He=0;He<W.length;He++)et(I,W[He],J,oe,Pe);else oe=l(oe)?!!oe.capture:!!oe,J=be(J),I&&I[ge]?(I=I.i,W=String(W).toString(),W in I.g&&(He=I.g[W],J=Ce(He,J,oe,Pe),-1<J&&(we(He[J]),Array.prototype.splice.call(He,J,1),He.length==0&&(delete I.g[W],I.h--)))):I&&(I=te(I))&&(W=I.g[W.toString()],I=-1,W&&(I=Ce(W,J,oe,Pe)),(J=-1<I?W[I]:null)&&Et(J))}function Et(I){if(typeof I!="number"&&I&&!I.da){var W=I.src;if(W&&W[ge])se(W.i,I);else{var J=I.type,oe=I.proxy;W.removeEventListener?W.removeEventListener(J,oe,I.capture):W.detachEvent?W.detachEvent(ht(J),oe):W.addListener&&W.removeListener&&W.removeListener(oe),(J=te(W))?(se(J,I),J.h==0&&(J.src=null,W[Ae]=null)):we(I)}}}function ht(I){return I in Ue?Ue[I]:Ue[I]="on"+I}function xt(I,W){if(I.da)I=!0;else{W=new X(W,this);var J=I.listener,oe=I.ha||I.src;I.fa&&Et(I),I=J.call(oe,W)}return I}function te(I){return I=I[Ae],I instanceof fe?I:null}var le="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(I){return typeof I=="function"?I:(I[le]||(I[le]=function(W){return I.handleEvent(W)}),I[le])}function ae(){q.call(this),this.i=new fe(this),this.M=this,this.F=null}m(ae,q),ae.prototype[ge]=!0,ae.prototype.removeEventListener=function(I,W,J,oe){et(this,I,W,J,oe)};function pe(I,W){var J,oe=I.F;if(oe)for(J=[];oe;oe=oe.F)J.push(oe);if(I=I.M,oe=W.type||W,typeof W=="string")W=new z(W,I);else if(W instanceof z)W.target=W.target||I;else{var Pe=W;W=new z(oe,I),R(W,Pe)}if(Pe=!0,J)for(var He=J.length-1;0<=He;He--){var Ct=W.g=J[He];Pe=Ee(Ct,oe,!0,W)&&Pe}if(Ct=W.g=I,Pe=Ee(Ct,oe,!0,W)&&Pe,Pe=Ee(Ct,oe,!1,W)&&Pe,J)for(He=0;He<J.length;He++)Ct=W.g=J[He],Pe=Ee(Ct,oe,!1,W)&&Pe}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var I=this.i,W;for(W in I.g){for(var J=I.g[W],oe=0;oe<J.length;oe++)we(J[oe]);delete I.g[W],I.h--}}this.F=null},ae.prototype.K=function(I,W,J,oe){return this.i.add(String(I),W,!1,J,oe)},ae.prototype.L=function(I,W,J,oe){return this.i.add(String(I),W,!0,J,oe)};function Ee(I,W,J,oe){if(W=I.i.g[String(W)],!W)return!0;W=W.concat();for(var Pe=!0,He=0;He<W.length;++He){var Ct=W[He];if(Ct&&!Ct.da&&Ct.capture==J){var Nr=Ct.listener,ko=Ct.ha||Ct.src;Ct.fa&&se(I.i,Ct),Pe=Nr.call(ko,oe)!==!1&&Pe}}return Pe&&!oe.defaultPrevented}function $e(I,W,J){if(typeof I=="function")J&&(I=d(I,J));else if(I&&typeof I.handleEvent=="function")I=d(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:a.setTimeout(I,W||0)}function Ne(I){I.g=$e(()=>{I.g=null,I.i&&(I.i=!1,Ne(I))},I.l);const W=I.h;I.h=null,I.m.apply(null,W)}class Ze extends q{constructor(W,J){super(),this.m=W,this.l=J,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(I){q.call(this),this.h=I,this.g={}}m(Ke,q);var It=[];function zt(I){T(I.g,function(W,J){this.g.hasOwnProperty(J)&&Et(W)},I),I.g={}}Ke.prototype.N=function(){Ke.aa.N.call(this),zt(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pt=a.JSON.stringify,en=a.JSON.parse,kn=class{stringify(I){return a.JSON.stringify(I,void 0)}parse(I){return a.JSON.parse(I,void 0)}};function pn(){}pn.prototype.h=null;function Rr(I){return I.h||(I.h=I.i())}function br(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ei(){z.call(this,"d")}m(Ei,z);function Lr(){z.call(this,"c")}m(Lr,z);var wr={},Ea=null;function ps(){return Ea=Ea||new ae}wr.La="serverreachability";function _a(I){z.call(this,wr.La,I)}m(_a,z);function Eo(I){const W=ps();pe(W,new _a(W))}wr.STAT_EVENT="statevent";function Fn(I,W){z.call(this,wr.STAT_EVENT,I),this.stat=W}m(Fn,z);function Kn(I){const W=ps();pe(W,new Fn(W,I))}wr.Ma="timingevent";function _o(I,W){z.call(this,wr.Ma,I),this.size=W}m(_o,z);function qn(I,W){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){I()},W)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function oo(I,W,J,oe,Pe,He){I.info(function(){if(I.g)if(He)for(var Ct="",Nr=He.split("&"),ko=0;ko<Nr.length;ko++){var nr=Nr[ko].split("=");if(1<nr.length){var Wo=nr[0];nr=nr[1];var lo=Wo.split("_");Ct=2<=lo.length&&lo[1]=="type"?Ct+(Wo+"="+nr+"&"):Ct+(Wo+"=redacted&")}}else Ct=null;else Ct=He;return"XMLHTTP REQ ("+oe+") [attempt "+Pe+"]: "+W+`
`+J+`
`+Ct})}function Fi(I,W,J,oe,Pe,He,Ct){I.info(function(){return"XMLHTTP RESP ("+oe+") [ attempt "+Pe+"]: "+W+`
`+J+`
`+He+" "+Ct})}function To(I,W,J,oe){I.info(function(){return"XMLHTTP TEXT ("+W+"): "+$l(I,J)+(oe?" "+oe:"")})}function Vu(I,W){I.info(function(){return"TIMEOUT: "+W})}Kr.prototype.info=function(){};function $l(I,W){if(!I.g)return W;if(!W)return null;try{var J=JSON.parse(W);if(J){for(I=0;I<J.length;I++)if(Array.isArray(J[I])){var oe=J[I];if(!(2>oe.length)){var Pe=oe[1];if(Array.isArray(Pe)&&!(1>Pe.length)){var He=Pe[0];if(He!="noop"&&He!="stop"&&He!="close")for(var Ct=1;Ct<Pe.length;Ct++)Pe[Ct]=""}}}}return Pt(J)}catch{return W}}var iu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function ms(){}m(ms,pn),ms.prototype.g=function(){return new XMLHttpRequest},ms.prototype.i=function(){return{}},bn=new ms;function so(I,W,J,oe){this.j=I,this.i=W,this.l=J,this.R=oe||1,this.U=new Ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qu}function qu(){this.i=null,this.g="",this.h=!1}var Wu={},Ll={};function Bl(I,W,J){I.L=1,I.v=Pn(at(W)),I.m=J,I.P=!0,Gu(I,null)}function Gu(I,W){I.F=Date.now(),Ft(I),I.A=at(I.v);var J=I.A,oe=I.R;Array.isArray(oe)||(oe=[String(oe)]),qf(J.i,"t",oe),I.C=0,J=I.j.J,I.h=new qu,I.g=vA(I.j,J?W:null,!I.m),0<I.O&&(I.M=new Ze(d(I.Y,I,I.g),I.O)),W=I.U,J=I.g,oe=I.ca;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(It[0]=Pe.toString()),Pe=It);for(var He=0;He<Pe.length;He++){var Ct=Xe(J,Pe[He],oe||W.handleEvent,!1,W.h||W);if(!Ct)break;W.g[Ct.key]=Ct}W=I.H?D(I.H):{},I.m?(I.u||(I.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,W)):(I.u="GET",I.g.ea(I.A,I.u,null,W)),Eo(),oo(I.i,I.u,I.A,I.l,I.R,I.m)}so.prototype.ca=function(I){I=I.target;const W=this.M;W&&Xr(I)==3?W.j():this.Y(I)},so.prototype.Y=function(I){try{if(I==this.g)e:{const lo=Xr(this.g);var W=this.g.Ba();const Hl=this.g.Z();if(!(3>lo)&&(lo!=3||this.g&&(this.h.h||this.g.oa()||Do(this.g)))){this.J||lo!=4||W==7||(W==8||0>=Hl?Eo(3):Eo(2)),Yi(this);var J=this.g.Z();this.X=J;t:if(Vf(this)){var oe=Do(this.g);I="";var Pe=oe.length,He=Xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Ho(this);var Ct="";break t}this.h.i=new a.TextDecoder}for(W=0;W<Pe;W++)this.h.h=!0,I+=this.h.i.decode(oe[W],{stream:!(He&&W==Pe-1)});oe.length=0,this.h.g+=I,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=J==200,Fi(this.i,this.u,this.A,this.l,this.R,lo,J),this.o){if(this.T&&!this.K){t:{if(this.g){var Nr,ko=this.g;if((Nr=ko.g?ko.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Nr)){var nr=Nr;break t}}nr=null}if(J=nr)To(this.i,this.l,J,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yu(this,J);else{this.o=!1,this.s=3,Kn(12),ri(this),Ho(this);break e}}if(this.P){J=!0;let Xu;for(;!this.J&&this.C<Ct.length;)if(Xu=gs(this,Ct),Xu==Ll){lo==4&&(this.s=4,Kn(14),J=!1),To(this.i,this.l,null,"[Incomplete Response]");break}else if(Xu==Wu){this.s=4,Kn(15),To(this.i,this.l,Ct,"[Invalid Chunk]"),J=!1;break}else To(this.i,this.l,Xu,null),Yu(this,Xu);if(Vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lo!=4||Ct.length!=0||this.h.h||(this.s=1,Kn(16),J=!1),this.o=this.o&&J,!J)To(this.i,this.l,Ct,"[Invalid Chunked Response]"),ri(this),Ho(this);else if(0<Ct.length&&!this.W){this.W=!0;var Wo=this.j;Wo.g==this&&Wo.ba&&!Wo.M&&(Wo.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),DE(Wo),Wo.M=!0,Kn(11))}}else To(this.i,this.l,Ct,null),Yu(this,Ct);lo==4&&ri(this),this.o&&!this.J&&(lo==4?gv(this.j,this):(this.o=!1,Ft(this)))}else Vl(this.g),J==400&&0<Ct.indexOf("Unknown SID")?(this.s=3,Kn(12)):(this.s=0,Kn(13)),ri(this),Ho(this)}}}catch{}finally{}};function Vf(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function gs(I,W){var J=I.C,oe=W.indexOf(`
`,J);return oe==-1?Ll:(J=Number(W.substring(J,oe)),isNaN(J)?Wu:(oe+=1,oe+J>W.length?Ll:(W=W.slice(oe,oe+J),I.C=oe+J,W)))}so.prototype.cancel=function(){this.J=!0,ri(this)};function Ft(I){I.S=Date.now()+I.I,di(I,I.I)}function di(I,W){if(I.B!=null)throw Error("WatchDog timer not null");I.B=qn(d(I.ba,I),W)}function Yi(I){I.B&&(a.clearTimeout(I.B),I.B=null)}so.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(Vu(this.i,this.A),this.L!=2&&(Eo(),Kn(17)),ri(this),this.s=2,Ho(this)):di(this,this.S-I)};function Ho(I){I.j.G==0||I.J||gv(I.j,I)}function ri(I){Yi(I);var W=I.M;W&&typeof W.ma=="function"&&W.ma(),I.M=null,zt(I.U),I.g&&(W=I.g,I.g=null,W.abort(),W.ma())}function Yu(I,W){try{var J=I.j;if(J.G!=0&&(J.g==I||So(J.h,I))){if(!I.K&&So(J.h,I)&&J.G==3){try{var oe=J.Da.g.parse(W)}catch{oe=null}if(Array.isArray(oe)&&oe.length==3){var Pe=oe;if(Pe[0]==0){e:if(!J.u){if(J.g)if(J.g.F+3e3<I.F)mv(J),Oc(J);else break e;pv(J),Kn(18)}}else J.za=Pe[1],0<J.za-J.T&&37500>Pe[2]&&J.F&&J.v==0&&!J.C&&(J.C=qn(d(J.Za,J),6e3));if(1>=am(J.h)&&J.ca){try{J.ca()}catch{}J.ca=void 0}}else bh(J,11)}else if((I.K||J.g==I)&&mv(J),!b(W))for(Pe=J.Da.g.parse(W),W=0;W<Pe.length;W++){let nr=Pe[W];if(J.T=nr[0],nr=nr[1],J.G==2)if(nr[0]=="c"){J.K=nr[1],J.ia=nr[2];const Wo=nr[3];Wo!=null&&(J.la=Wo,J.j.info("VER="+J.la));const lo=nr[4];lo!=null&&(J.Aa=lo,J.j.info("SVER="+J.Aa));const Hl=nr[5];Hl!=null&&typeof Hl=="number"&&0<Hl&&(oe=1.5*Hl,J.L=oe,J.j.info("backChannelRequestTimeoutMs_="+oe)),oe=J;const Xu=I.g;if(Xu){const Cg=Xu.g?Xu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cg){var He=oe.h;He.g||Cg.indexOf("spdy")==-1&&Cg.indexOf("quic")==-1&&Cg.indexOf("h2")==-1||(He.j=He.l,He.g=new Set,He.h&&(re(He,He.h),He.h=null))}if(oe.D){const vv=Xu.g?Xu.g.getResponseHeader("X-HTTP-Session-Id"):null;vv&&(oe.ya=vv,Wt(oe.I,oe.D,vv))}}J.G=3,J.l&&J.l.ua(),J.ba&&(J.R=Date.now()-I.F,J.j.info("Handshake RTT: "+J.R+"ms")),oe=J;var Ct=I;if(oe.qa=yA(oe,oe.J?oe.ia:null,oe.W),Ct.K){xe(oe.h,Ct);var Nr=Ct,ko=oe.L;ko&&(Nr.I=ko),Nr.B&&(Yi(Nr),Ft(Nr)),oe.g=Ct}else Tg(oe);0<J.i.length&&Gf(J)}else nr[0]!="stop"&&nr[0]!="close"||bh(J,7);else J.G==3&&(nr[0]=="stop"||nr[0]=="close"?nr[0]=="stop"?bh(J,7):uo(J):nr[0]!="noop"&&J.l&&J.l.ta(nr),J.v=0)}}Eo(4)}catch{}}var sm=class{constructor(I,W){this.g=I,this.map=W}};function jl(I){this.l=I||10,a.PerformanceNavigationTiming?(I=a.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Co(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function am(I){return I.h?1:I.g?I.g.size:0}function So(I,W){return I.h?I.h==W:I.g?I.g.has(W):!1}function re(I,W){I.g?I.g.add(W):I.h=W}function xe(I,W){I.h&&I.h==W?I.h=null:I.g&&I.g.has(W)&&I.g.delete(W)}jl.prototype.cancel=function(){if(this.i=ce(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function ce(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let W=I.i;for(const J of I.g.values())W=W.concat(J.D);return W}return p(I.i)}function De(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(u(I)){for(var W=[],J=I.length,oe=0;oe<J;oe++)W.push(I[oe]);return W}W=[],J=0;for(oe in I)W[J++]=I[oe];return W}function Ie(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(u(I)||typeof I=="string"){var W=[];I=I.length;for(var J=0;J<I;J++)W.push(J);return W}W=[],J=0;for(const oe in I)W[J++]=oe;return W}}}function Se(I,W){if(I.forEach&&typeof I.forEach=="function")I.forEach(W,void 0);else if(u(I)||typeof I=="string")Array.prototype.forEach.call(I,W,void 0);else for(var J=Ie(I),oe=De(I),Pe=oe.length,He=0;He<Pe;He++)W.call(void 0,oe[He],J&&J[He],I)}var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(I,W){if(I){I=I.split("&");for(var J=0;J<I.length;J++){var oe=I[J].indexOf("="),Pe=null;if(0<=oe){var He=I[J].substring(0,oe);Pe=I[J].substring(oe+1)}else He=I[J];W(He,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function ut(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof ut){this.h=I.h,vt(this,I.j),this.o=I.o,this.g=I.g,Dt(this,I.s),this.l=I.l;var W=I.i,J=new ys;J.i=W.i,W.g&&(J.g=new Map(W.g),J.h=W.h),dn(this,J),this.m=I.m}else I&&(W=String(I).match(Qe))?(this.h=!1,vt(this,W[1]||"",!0),this.o=Yt(W[2]||""),this.g=Yt(W[3]||"",!0),Dt(this,W[4]),this.l=Yt(W[5]||"",!0),dn(this,W[6]||"",!0),this.m=Yt(W[7]||"")):(this.h=!1,this.i=new ys(null,this.h))}ut.prototype.toString=function(){var I=[],W=this.j;W&&I.push(dr(W,ou,!0),":");var J=this.g;return(J||W=="file")&&(I.push("//"),(W=this.o)&&I.push(dr(W,ou,!0),"@"),I.push(encodeURIComponent(String(J)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.s,J!=null&&I.push(":",String(J))),(J=this.l)&&(this.g&&J.charAt(0)!="/"&&I.push("/"),I.push(dr(J,J.charAt(0)=="/"?um:zl,!0))),(J=this.i.toString())&&I.push("?",J),(J=this.m)&&I.push("#",dr(J,lm)),I.join("")};function at(I){return new ut(I)}function vt(I,W,J){I.j=J?Yt(W,!0):W,I.j&&(I.j=I.j.replace(/:$/,""))}function Dt(I,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);I.s=W}else I.s=null}function dn(I,W,J){W instanceof ys?(I.i=W,su(I.i,I.h)):(J||(W=dr(W,Hf)),I.i=new ys(W,I.h))}function Wt(I,W,J){I.i.set(W,J)}function Pn(I){return Wt(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function Yt(I,W){return I?W?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function dr(I,W,J){return typeof I=="string"?(I=encodeURI(I).replace(W,Ao),J&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function Ao(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var ou=/[#\/\?@]/g,zl=/[#\?:]/g,um=/[#\?]/g,Hf=/[#\?@]/g,lm=/#/g;function ys(I,W){this.h=this.g=null,this.i=I||null,this.j=!!W}function _i(I){I.g||(I.g=new Map,I.h=0,I.i&&ot(I.i,function(W,J){I.add(decodeURIComponent(W.replace(/\+/g," ")),J)}))}e=ys.prototype,e.add=function(I,W){_i(this),this.i=null,I=Ca(this,I);var J=this.g.get(I);return J||this.g.set(I,J=[]),J.push(W),this.h+=1,this};function qo(I,W){_i(I),W=Ca(I,W),I.g.has(W)&&(I.i=null,I.h-=I.g.get(W).length,I.g.delete(W))}function Ta(I,W){return _i(I),W=Ca(I,W),I.g.has(W)}e.forEach=function(I,W){_i(this),this.g.forEach(function(J,oe){J.forEach(function(Pe){I.call(W,Pe,oe,this)},this)},this)},e.na=function(){_i(this);const I=Array.from(this.g.values()),W=Array.from(this.g.keys()),J=[];for(let oe=0;oe<W.length;oe++){const Pe=I[oe];for(let He=0;He<Pe.length;He++)J.push(W[oe])}return J},e.V=function(I){_i(this);let W=[];if(typeof I=="string")Ta(this,I)&&(W=W.concat(this.g.get(Ca(this,I))));else{I=Array.from(this.g.values());for(let J=0;J<I.length;J++)W=W.concat(I[J])}return W},e.set=function(I,W){return _i(this),this.i=null,I=Ca(this,I),Ta(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[W]),this.h+=1,this},e.get=function(I,W){return I?(I=this.V(I),0<I.length?String(I[0]):W):W};function qf(I,W,J){qo(I,W),0<J.length&&(I.i=null,I.g.set(Ca(I,W),p(J)),I.h+=J.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],W=Array.from(this.g.keys());for(var J=0;J<W.length;J++){var oe=W[J];const He=encodeURIComponent(String(oe)),Ct=this.V(oe);for(oe=0;oe<Ct.length;oe++){var Pe=He;Ct[oe]!==""&&(Pe+="="+encodeURIComponent(String(Ct[oe]))),I.push(Pe)}}return this.i=I.join("&")};function Ca(I,W){return W=String(W),I.j&&(W=W.toLowerCase()),W}function su(I,W){W&&!I.j&&(_i(I),I.i=null,I.g.forEach(function(J,oe){var Pe=oe.toLowerCase();oe!=Pe&&(qo(this,oe),qf(this,Pe,J))},I)),I.j=W}function cv(I,W){const J=new Kr;if(a.Image){const oe=new Image;oe.onload=h(ao,J,"TestLoadImage: loaded",!0,W,oe),oe.onerror=h(ao,J,"TestLoadImage: error",!1,W,oe),oe.onabort=h(ao,J,"TestLoadImage: abort",!1,W,oe),oe.ontimeout=h(ao,J,"TestLoadImage: timeout",!1,W,oe),a.setTimeout(function(){oe.ontimeout&&oe.ontimeout()},1e4),oe.src=I}else W(!1)}function Ul(I,W){const J=new Kr,oe=new AbortController,Pe=setTimeout(()=>{oe.abort(),ao(J,"TestPingServer: timeout",!1,W)},1e4);fetch(I,{signal:oe.signal}).then(He=>{clearTimeout(Pe),He.ok?ao(J,"TestPingServer: ok",!0,W):ao(J,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(Pe),ao(J,"TestPingServer: error",!1,W)})}function ao(I,W,J,oe,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),oe(J)}catch{}}function AE(){this.g=new kn}function _g(I,W,J){const oe=J||"";try{Se(I,function(Pe,He){let Ct=Pe;l(Pe)&&(Ct=Pt(Pe)),W.push(oe+He+"="+encodeURIComponent(Ct))})}catch(Pe){throw W.push(oe+"type="+encodeURIComponent("_badmap")),Pe}}function Nc(I){this.l=I.Ub||null,this.j=I.eb||!1}m(Nc,pn),Nc.prototype.g=function(){return new Wf(this.l,this.j)},Nc.prototype.i=function(I){return function(){return I}}({});function Wf(I,W){ae.call(this),this.D=I,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Wf,ae),e=Wf.prototype,e.open=function(I,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=W,this.readyState=1,au(this)},e.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(W.body=I),(this.D||a).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ku(this)),this.readyState=0},e.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,au(this)),this.g&&(this.readyState=3,au(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fv(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function fv(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}e.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var W=I.value?I.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!I.done}))&&(this.response=this.responseText+=W)}I.done?Ku(this):au(this),this.readyState==3&&fv(this)}},e.Ra=function(I){this.g&&(this.response=this.responseText=I,Ku(this))},e.Qa=function(I){this.g&&(this.response=I,Ku(this))},e.ga=function(){this.g&&Ku(this)};function Ku(I){I.readyState=4,I.l=null,I.j=null,I.v=null,au(I)}e.setRequestHeader=function(I,W){this.u.append(I,W)},e.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],W=this.h.entries();for(var J=W.next();!J.done;)J=J.value,I.push(J[0]+": "+J[1]),J=W.next();return I.join(`\r
`)};function au(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(Wf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function Pc(I){let W="";return T(I,function(J,oe){W+=oe,W+=":",W+=J,W+=`\r
`}),W}function de(I,W,J){e:{for(oe in J){var oe=!1;break e}oe=!0}oe||(J=Pc(J),typeof I=="string"?J!=null&&encodeURIComponent(String(J)):Wt(I,W,J))}function _e(I){ae.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(_e,ae);var ze=/^https?$/i,Mt=["POST","PUT"];e=_e.prototype,e.Ha=function(I){this.J=I},e.ea=function(I,W,J,oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);W=W?W.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?Rr(this.o):Rr(bn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(W,String(I),!0),this.B=!1}catch(He){In(this,He);return}if(I=J||"",J=new Map(this.headers),oe)if(Object.getPrototypeOf(oe)===Object.prototype)for(var Pe in oe)J.set(Pe,oe[Pe]);else if(typeof oe.keys=="function"&&typeof oe.get=="function")for(const He of oe.keys())J.set(He,oe.get(He));else throw Error("Unknown input type for opt_headers: "+String(oe));oe=Array.from(J.keys()).find(He=>He.toLowerCase()=="content-type"),Pe=a.FormData&&I instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Mt,W,void 0))||oe||Pe||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[He,Ct]of J)this.g.setRequestHeader(He,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Er(this),this.u=!0,this.g.send(I),this.u=!1}catch(He){In(this,He)}};function In(I,W){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=W,I.m=5,tr(I),_n(I)}function tr(I){I.A||(I.A=!0,pe(I,"complete"),pe(I,"error"))}e.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,pe(this,"complete"),pe(this,"abort"),_n(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_n(this,!0)),_e.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Sr(this):this.bb())},e.bb=function(){Sr(this)};function Sr(I){if(I.h&&typeof s<"u"&&(!I.v[1]||Xr(I)!=4||I.Z()!=2)){if(I.u&&Xr(I)==4)$e(I.Ea,0,I);else if(pe(I,"readystatechange"),Xr(I)==4){I.h=!1;try{const Ct=I.Z();e:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var J;if(!(J=W)){var oe;if(oe=Ct===0){var Pe=String(I.D).match(Qe)[1]||null;!Pe&&a.self&&a.self.location&&(Pe=a.self.location.protocol.slice(0,-1)),oe=!ze.test(Pe?Pe.toLowerCase():"")}J=oe}if(J)pe(I,"complete"),pe(I,"success");else{I.m=6;try{var He=2<Xr(I)?I.g.statusText:""}catch{He=""}I.l=He+" ["+I.Z()+"]",tr(I)}}finally{_n(I)}}}}function _n(I,W){if(I.g){Er(I);const J=I.g,oe=I.v[0]?()=>{}:null;I.g=null,I.v=null,W||pe(I,"ready");try{J.onreadystatechange=oe}catch{}}}function Er(I){I.I&&(a.clearTimeout(I.I),I.I=null)}e.isActive=function(){return!!this.g};function Xr(I){return I.g?I.g.readyState:0}e.Z=function(){try{return 2<Xr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(I){if(this.g){var W=this.g.responseText;return I&&W.indexOf(I)==0&&(W=W.substring(I.length)),en(W)}};function Do(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function Vl(I){const W={};I=(I.g&&2<=Xr(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let oe=0;oe<I.length;oe++){if(b(I[oe]))continue;var J=O(I[oe]);const Pe=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const He=W[Pe]||[];W[Pe]=He,He.push(J)}S(W,function(oe){return oe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uu(I,W,J){return J&&J.internalChannelParams&&J.internalChannelParams[I]||W}function yh(I){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uu("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uu("baseRetryDelayMs",5e3,I),this.cb=uu("retryDelaySeedMs",1e4,I),this.Wa=uu("forwardChannelMaxRetries",2,I),this.wa=uu("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new jl(I&&I.concurrentRequestLimit),this.Da=new AE,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=yh.prototype,e.la=8,e.G=1,e.connect=function(I,W,J,oe){Kn(0),this.W=I,this.H=W||{},J&&oe!==void 0&&(this.H.OSID=J,this.H.OAID=oe),this.F=this.X,this.I=yA(this,null,this.W),Gf(this)};function uo(I){if(dv(I),I.G==3){var W=I.U++,J=at(I.I);if(Wt(J,"SID",I.K),Wt(J,"RID",W),Wt(J,"TYPE","terminate"),vh(I,J),W=new so(I,I.j,W),W.L=2,W.v=Pn(at(J)),J=!1,a.navigator&&a.navigator.sendBeacon)try{J=a.navigator.sendBeacon(W.v.toString(),"")}catch{}!J&&a.Image&&(new Image().src=W.v,J=!0),J||(W.g=vA(W.j,null),W.g.ea(W.v)),W.F=Date.now(),Ft(W)}gA(I)}function Oc(I){I.g&&(DE(I),I.g.cancel(),I.g=null)}function dv(I){Oc(I),I.u&&(a.clearTimeout(I.u),I.u=null),mv(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&a.clearTimeout(I.s),I.s=null)}function Gf(I){if(!Co(I.h)&&!I.s){I.s=!0;var W=I.Ga;Q||U(),K||(Q(),K=!0),Z.add(W,I),I.B=0}}function EM(I,W){return am(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=W.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=qn(d(I.Ga,I,W),mA(I,I.B)),I.B++,!0)}e.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const Pe=new so(this,this.j,I);let He=this.o;if(this.S&&(He?(He=D(He),R(He,this.S)):He=this.S),this.m!==null||this.O||(Pe.H=He,He=null),this.P)e:{for(var W=0,J=0;J<this.i.length;J++){t:{var oe=this.i[J];if("__data__"in oe.map&&(oe=oe.map.__data__,typeof oe=="string")){oe=oe.length;break t}oe=void 0}if(oe===void 0)break;if(W+=oe,4096<W){W=J;break e}if(W===4096||J===this.i.length-1){W=J+1;break e}}W=1e3}else W=1e3;W=cm(this,Pe,W),J=at(this.I),Wt(J,"RID",I),Wt(J,"CVER",22),this.D&&Wt(J,"X-HTTP-Session-Id",this.D),vh(this,J),He&&(this.O?W="headers="+encodeURIComponent(String(Pc(He)))+"&"+W:this.m&&de(J,this.m,He)),re(this.h,Pe),this.Ua&&Wt(J,"TYPE","init"),this.P?(Wt(J,"$req",W),Wt(J,"SID","null"),Pe.T=!0,Bl(Pe,J,null)):Bl(Pe,J,W),this.G=2}}else this.G==3&&(I?hv(this,I):this.i.length==0||Co(this.h)||hv(this))};function hv(I,W){var J;W?J=W.l:J=I.U++;const oe=at(I.I);Wt(oe,"SID",I.K),Wt(oe,"RID",J),Wt(oe,"AID",I.T),vh(I,oe),I.m&&I.o&&de(oe,I.m,I.o),J=new so(I,I.j,J,I.B+1),I.m===null&&(J.H=I.o),W&&(I.i=W.D.concat(I.i)),W=cm(I,J,1e3),J.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),re(I.h,J),Bl(J,oe,W)}function vh(I,W){I.H&&T(I.H,function(J,oe){Wt(W,oe,J)}),I.l&&Se({},function(J,oe){Wt(W,oe,J)})}function cm(I,W,J){J=Math.min(I.i.length,J);var oe=I.l?d(I.l.Na,I.l,I):null;e:{var Pe=I.i;let He=-1;for(;;){const Ct=["count="+J];He==-1?0<J?(He=Pe[0].g,Ct.push("ofs="+He)):He=0:Ct.push("ofs="+He);let Nr=!0;for(let ko=0;ko<J;ko++){let nr=Pe[ko].g;const Wo=Pe[ko].map;if(nr-=He,0>nr)He=Math.max(0,Pe[ko].g-100),Nr=!1;else try{_g(Wo,Ct,"req"+nr+"_")}catch{oe&&oe(Wo)}}if(Nr){oe=Ct.join("&");break e}}}return I=I.i.splice(0,J),W.D=I,oe}function Tg(I){if(!I.g&&!I.u){I.Y=1;var W=I.Fa;Q||U(),K||(Q(),K=!0),Z.add(W,I),I.v=0}}function pv(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=qn(d(I.Fa,I),mA(I,I.v)),I.v++,!0)}e.Fa=function(){if(this.u=null,pA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=qn(d(this.ab,this),I)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kn(10),Oc(this),pA(this))};function DE(I){I.A!=null&&(a.clearTimeout(I.A),I.A=null)}function pA(I){I.g=new so(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var W=at(I.qa);Wt(W,"RID","rpc"),Wt(W,"SID",I.K),Wt(W,"AID",I.T),Wt(W,"CI",I.F?"0":"1"),!I.F&&I.ja&&Wt(W,"TO",I.ja),Wt(W,"TYPE","xmlhttp"),vh(I,W),I.m&&I.o&&de(W,I.m,I.o),I.L&&(I.g.I=I.L);var J=I.g;I=I.ia,J.L=1,J.v=Pn(at(W)),J.m=null,J.P=!0,Gu(J,I)}e.Za=function(){this.C!=null&&(this.C=null,Oc(this),pv(this),Kn(19))};function mv(I){I.C!=null&&(a.clearTimeout(I.C),I.C=null)}function gv(I,W){var J=null;if(I.g==W){mv(I),DE(I),I.g=null;var oe=2}else if(So(I.h,W))J=W.D,xe(I.h,W),oe=1;else return;if(I.G!=0){if(W.o)if(oe==1){J=W.m?W.m.length:0,W=Date.now()-W.F;var Pe=I.B;oe=ps(),pe(oe,new _o(oe,J)),Gf(I)}else Tg(I);else if(Pe=W.s,Pe==3||Pe==0&&0<W.X||!(oe==1&&EM(I,W)||oe==2&&pv(I)))switch(J&&0<J.length&&(W=I.h,W.i=W.i.concat(J)),Pe){case 1:bh(I,5);break;case 4:bh(I,10);break;case 3:bh(I,6);break;default:bh(I,2)}}}function mA(I,W){let J=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(J*=2),J*W}function bh(I,W){if(I.j.info("Error code "+W),W==2){var J=d(I.fb,I),oe=I.Xa;const Pe=!oe;oe=new ut(oe||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vt(oe,"https"),Pn(oe),Pe?cv(oe.toString(),J):Ul(oe.toString(),J)}else Kn(2);I.G=0,I.l&&I.l.sa(W),gA(I),dv(I)}e.fb=function(I){I?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))};function gA(I){if(I.G=0,I.ka=[],I.l){const W=ce(I.h);(W.length!=0||I.i.length!=0)&&(g(I.ka,W),g(I.ka,I.i),I.h.i.length=0,p(I.i),I.i.length=0),I.l.ra()}}function yA(I,W,J){var oe=J instanceof ut?at(J):new ut(J);if(oe.g!="")W&&(oe.g=W+"."+oe.g),Dt(oe,oe.s);else{var Pe=a.location;oe=Pe.protocol,W=W?W+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;var He=new ut(null);oe&&vt(He,oe),W&&(He.g=W),Pe&&Dt(He,Pe),J&&(He.l=J),oe=He}return J=I.D,W=I.ya,J&&W&&Wt(oe,J,W),Wt(oe,"VER",I.la),vh(I,oe),oe}function vA(I,W,J){if(W&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=I.Ca&&!I.pa?new _e(new Nc({eb:J})):new _e(I.pa),W.Ha(I.J),W}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function kE(){}e=kE.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function yv(){}yv.prototype.g=function(I,W){return new Sa(I,W)};function Sa(I,W){ae.call(this),this.g=new yh(W),this.l=I,this.h=W&&W.messageUrlParams||null,I=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(I?I["X-WebChannel-Content-Type"]=W.messageContentType:I={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(I?I["X-WebChannel-Client-Profile"]=W.va:I={"X-WebChannel-Client-Profile":W.va}),this.g.S=I,(I=W&&W.Sb)&&!b(I)&&(this.g.m=I),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!b(W)&&(this.g.D=W,I=this.h,I!==null&&W in I&&(I=this.h,W in I&&delete I[W])),this.j=new Yf(this)}m(Sa,ae),Sa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sa.prototype.close=function(){uo(this.g)},Sa.prototype.o=function(I){var W=this.g;if(typeof I=="string"){var J={};J.__data__=I,I=J}else this.u&&(J={},J.__data__=Pt(I),I=J);W.i.push(new sm(W.Ya++,I)),W.G==3&&Gf(W)},Sa.prototype.N=function(){this.g.l=null,delete this.j,uo(this.g),delete this.g,Sa.aa.N.call(this)};function bA(I){Ei.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var W=I.__sm__;if(W){e:{for(const J in W){I=J;break e}I=void 0}(this.i=I)&&(I=this.i,W=W!==null&&I in W?W[I]:void 0),this.data=W}else this.data=I}m(bA,Ei);function xA(){Lr.call(this),this.status=1}m(xA,Lr);function Yf(I){this.g=I}m(Yf,kE),Yf.prototype.ua=function(){pe(this.g,"a")},Yf.prototype.ta=function(I){pe(this.g,new bA(I))},Yf.prototype.sa=function(I){pe(this.g,new xA)},Yf.prototype.ra=function(){pe(this.g,"b")},yv.prototype.createWebChannel=yv.prototype.g,Sa.prototype.send=Sa.prototype.o,Sa.prototype.open=Sa.prototype.m,Sa.prototype.close=Sa.prototype.close,ive=function(){return new yv},rve=function(){return ps()},nve=wr,DB={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},iu.NO_ERROR=0,iu.TIMEOUT=8,iu.HTTP_ERROR=6,zI=iu,Hu.COMPLETE="complete",tve=Hu,br.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",ae.prototype.listen=ae.prototype.K,K_=br,_e.prototype.listenOnce=_e.prototype.L,_e.prototype.getLastError=_e.prototype.Ka,_e.prototype.getLastErrorCode=_e.prototype.Ba,_e.prototype.getStatus=_e.prototype.Z,_e.prototype.getResponseJson=_e.prototype.Oa,_e.prototype.getResponseText=_e.prototype.oa,_e.prototype.send=_e.prototype.ea,_e.prototype.setWithCredentials=_e.prototype.Ha,eve=_e}).apply(typeof RD<"u"?RD:typeof self<"u"?self:typeof window<"u"?window:{});const bre="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}bu.UNAUTHENTICATED=new bu(null),bu.GOOGLE_CREDENTIALS=new bu("google-credentials-uid"),bu.FIRST_PARTY=new bu("first-party-uid"),bu.MOCK_USER=new bu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qw="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new lO("@firebase/firestore");function Eb(){return Wy.logLevel}function Ot(e,...t){if(Wy.logLevel<=Wn.DEBUG){const n=t.map(UH);Wy.debug(`Firestore (${qw}): ${e}`,...n)}}function kp(e,...t){if(Wy.logLevel<=Wn.ERROR){const n=t.map(UH);Wy.error(`Firestore (${qw}): ${e}`,...n)}}function RT(e,...t){if(Wy.logLevel<=Wn.WARN){const n=t.map(UH);Wy.warn(`Firestore (${qw}): ${e}`,...n)}}function UH(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(e="Unexpected state"){const t=`FIRESTORE (${qw}) INTERNAL ASSERTION FAILED: `+e;throw kp(t),new Error(t)}function kr(e,t){e||yn()}function Sn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kt extends rh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fJe{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dJe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(bu.UNAUTHENTICATED))}shutdown(){}}class hJe{constructor(t){this.t=t,this.currentUser=bu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){kr(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new lp;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lp,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lp)}},0),s()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kr(typeof r.accessToken=="string"),new fJe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return kr(t===null||typeof t=="string"),new bu(t)}}class pJe{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=bu.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class mJe{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new pJe(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(bu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gJe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yJe{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){kr(this.o===void 0);const r=o=>{o.error!=null&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Ot("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(kr(typeof n.token=="string"),this.R=n.token,new gJe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ove{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=vJe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length))}return r}}function Qn(e,t){return e<t?-1:e>t?1:0}function Tx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static now(){return $o.fromMillis(Date.now())}static fromDate(t){return $o.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new $o(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new kt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new kt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new kt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Qn(this.nanoseconds,t.nanoseconds):Qn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{static fromTimestamp(t){return new Cn(t)}static min(){return new Cn(new $o(0,0))}static max(){return new Cn(new $o(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,n,r){n===void 0?n=0:n>t.length&&yn(),r===void 0?r=t.length-n:r>t.length-n&&yn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return od.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof od?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=od.compareSegments(t.get(i),n.get(i));if(o!==0)return o}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=od.isNumericId(t),i=od.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?od.extractNumericId(t).compare(od.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return s0.fromString(t.substring(4,t.length-2))}}class li extends od{construct(t,n,r){return new li(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new kt(rt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new li(n)}static emptyPath(){return new li([])}}const bJe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Is extends od{construct(t,n,r){return new Is(t,n,r)}static isValidIdentifier(t){return bJe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Is.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Is(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new kt(rt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new kt(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new kt(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new kt(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Is(n)}static emptyPath(){return new Is([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.path=t}static fromPath(t){return new on(li.fromString(t))}static fromName(t){return new on(li.fromString(t).popFirst(5))}static empty(){return new on(li.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&li.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return li.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new on(new li(t.slice()))}}function xJe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Cn.fromTimestamp(r===1e9?new $o(n+1,0):new $o(n,r));return new v0(i,on.empty(),t)}function wJe(e){return new v0(e.readTime,e.key,-1)}class v0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new v0(Cn.min(),on.empty(),-1)}static max(){return new v0(Cn.max(),on.empty(),-1)}}function EJe(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=on.comparator(e.documentKey,t.documentKey),n!==0?n:Qn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Je="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TJe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(e){if(e.code!==rt.FAILED_PRECONDITION||e.message!==_Je)throw e;Ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&yn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new it((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof it?n:it.resolve(n)}catch(n){return it.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):it.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):it.reject(n)}static resolve(t){return new it((n,r)=>{n(t)})}static reject(t){return new it((n,r)=>{r(t)})}static waitFor(t){return new it((n,r)=>{let i=0,o=0,s=!1;t.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(t){let n=it.resolve(!1);for(const r of t)n=n.next(i=>i?it.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new it((r,i)=>{const o=t.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(t[l]).next(c=>{s[l]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(t,n){return new it((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}function CJe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gw(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}dO.oe=-1;function hO(e){return e==null}function BN(e){return e===0&&1/e==-1/0}function SJe(e){return typeof e=="number"&&Number.isInteger(e)&&!BN(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xre(t)),t=DJe(e.get(n),t);return xre(t)}function DJe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function xre(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wre(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rg(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sve(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||Ss.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ND(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ND(this.root,t,this.comparator,!1)}getReverseIterator(){return new ND(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ND(this.root,t,this.comparator,!0)}}class ND{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ss{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??Ss.RED,this.left=i??Ss.EMPTY,this.right=o??Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new Ss(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ss.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yn();const t=this.left.check();if(t!==this.right.check())throw yn();return t+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1;Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw yn()}get value(){throw yn()}get color(){throw yn()}get left(){throw yn()}get right(){throw yn()}copy(t,n,r,i,o){return this}insert(t,n,r){return new Ss(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ere(this.data.getIterator())}getIteratorFrom(t){return new Ere(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Lo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Lo(this.comparator);return n.data=t,n}}class Ere{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this.fields=t,t.sort(Is.comparator)}static empty(){return new cl([])}unionWith(t){let n=new Lo(Is.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new cl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Tx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ave extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ave("Invalid base64 string: "+o):o}}(t);return new js(n)}static fromUint8Array(t){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new js(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Qn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}js.EMPTY_BYTE_STRING=new js("");const kJe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function b0(e){if(kr(!!e),typeof e=="string"){let t=0;const n=kJe.exec(e);if(kr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Qi(e.seconds),nanos:Qi(e.nanos)}}function Qi(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function x0(e){return typeof e=="string"?js.fromBase64String(e):js.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pO(e){const t=e.mapValue.fields.__previous_value__;return VH(t)?pO(t):t}function NT(e){const t=b0(e.mapValue.fields.__local_write_time__.timestampValue);return new $o(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJe{constructor(t,n,r,i,o,s,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class PT{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new PT("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof PT&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={mapValue:{}};function w0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?VH(e)?4:NJe(e)?9007199254740991:RJe(e)?10:11:yn()}function Ld(e,t){if(e===t)return!0;const n=w0(e);if(n!==w0(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return NT(e).isEqual(NT(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=b0(i.timestampValue),a=b0(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return x0(i.bytesValue).isEqual(x0(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return Qi(i.geoPointValue.latitude)===Qi(o.geoPointValue.latitude)&&Qi(i.geoPointValue.longitude)===Qi(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Qi(i.integerValue)===Qi(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Qi(i.doubleValue),a=Qi(o.doubleValue);return s===a?BN(s)===BN(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return Tx(e.arrayValue.values||[],t.arrayValue.values||[],Ld);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(wre(s)!==wre(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ld(s[u],a[u])))return!1;return!0}(e,t);default:return yn()}}function OT(e,t){return(e.values||[]).find(n=>Ld(n,t))!==void 0}function Cx(e,t){if(e===t)return 0;const n=w0(e),r=w0(t);if(n!==r)return Qn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qn(e.booleanValue,t.booleanValue);case 2:return function(o,s){const a=Qi(o.integerValue||o.doubleValue),u=Qi(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return _re(e.timestampValue,t.timestampValue);case 4:return _re(NT(e),NT(t));case 5:return Qn(e.stringValue,t.stringValue);case 6:return function(o,s){const a=x0(o),u=x0(s);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Qn(a[l],u[l]);if(c!==0)return c}return Qn(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){const a=Qn(Qi(o.latitude),Qi(s.latitude));return a!==0?a:Qn(Qi(o.longitude),Qi(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Tre(e.arrayValue,t.arrayValue);case 10:return function(o,s){var a,u,l,c;const f=o.fields||{},d=s.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,m=(u=d.value)===null||u===void 0?void 0:u.arrayValue,p=Qn(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0);return p!==0?p:Tre(h,m)}(e.mapValue,t.mapValue);case 11:return function(o,s){if(o===PD.mapValue&&s===PD.mapValue)return 0;if(o===PD.mapValue)return 1;if(s===PD.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Qn(u[f],c[f]);if(d!==0)return d;const h=Cx(a[u[f]],l[c[f]]);if(h!==0)return h}return Qn(u.length,c.length)}(e.mapValue,t.mapValue);default:throw yn()}}function _re(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Qn(e,t);const n=b0(e),r=b0(t),i=Qn(n.seconds,r.seconds);return i!==0?i:Qn(n.nanos,r.nanos)}function Tre(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Cx(n[i],r[i]);if(o)return o}return Qn(n.length,r.length)}function Sx(e){return kB(e)}function kB(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=b0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return x0(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return on.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=kB(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${kB(n.fields[s])}`;return i+"}"}(e.mapValue):yn()}function UI(e){switch(w0(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=pO(e);return t?16+UI(t):16;case 5:return 2*e.stringValue.length;case 6:return x0(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+UI(o),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return rg(r.fields,(o,s)=>{i+=o.length+UI(s)}),i}(e.mapValue);default:throw yn()}}function Cre(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function IB(e){return!!e&&"integerValue"in e}function HH(e){return!!e&&"arrayValue"in e}function Sre(e){return!!e&&"nullValue"in e}function Are(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function VI(e){return!!e&&"mapValue"in e}function RJe(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function K2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return rg(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=K2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=K2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function NJe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t){this.value=t}static empty(){return new _u({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!VI(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=K2(n)}setAll(t){let n=Is.emptyPath(),r={},i=[];t.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=K2(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());VI(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ld(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];VI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){rg(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new _u(K2(this.value))}}function uve(e){const t=[];return rg(e.fields,(n,r)=>{const i=new Is([n]);if(VI(r)){const o=uve(r.mapValue).fields;if(o.length===0)t.push(i);else for(const s of o)t.push(i.child(s))}else t.push(i)}),new cl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t,n,r,i,o,s,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new sa(t,0,Cn.min(),Cn.min(),Cn.min(),_u.empty(),0)}static newFoundDocument(t,n,r,i){return new sa(t,1,n,Cn.min(),r,i,0)}static newNoDocument(t,n){return new sa(t,2,n,Cn.min(),Cn.min(),_u.empty(),0)}static newUnknownDocument(t,n){return new sa(t,3,n,Cn.min(),Cn.min(),_u.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Cn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_u.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_u.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jN=class{constructor(t,n){this.position=t,this.inclusive=n}};function Dre(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(o.field.isKeyField()?r=on.comparator(on.fromName(s.referenceValue),n.key):r=Cx(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kre(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ld(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t,n="asc"){this.field=t,this.dir=n}}function PJe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lve=class{};class go extends lve{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new FJe(t,n,r):n==="array-contains"?new LJe(t,r):n==="in"?new BJe(t,r):n==="not-in"?new jJe(t,r):n==="array-contains-any"?new zJe(t,r):new go(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new MJe(t,r):new $Je(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cx(n,this.value)):n!==null&&w0(this.value)===w0(n)&&this.matchesComparison(Cx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xf extends lve{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new xf(t,n)}matches(t){return cve(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cve(e){return e.op==="and"}function fve(e){return OJe(e)&&cve(e)}function OJe(e){for(const t of e.filters)if(t instanceof xf)return!1;return!0}function RB(e){if(e instanceof go)return e.field.canonicalString()+e.op.toString()+Sx(e.value);if(fve(e))return e.filters.map(t=>RB(t)).join(",");{const t=e.filters.map(n=>RB(n)).join(",");return`${e.op}(${t})`}}function dve(e,t){return e instanceof go?function(r,i){return i instanceof go&&r.op===i.op&&r.field.isEqual(i.field)&&Ld(r.value,i.value)}(e,t):e instanceof xf?function(r,i){return i instanceof xf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&dve(s,i.filters[a]),!0):!1}(e,t):void yn()}function hve(e){return e instanceof go?function(n){return`${n.field.canonicalString()} ${n.op} ${Sx(n.value)}`}(e):e instanceof xf?function(n){return n.op.toString()+" {"+n.getFilters().map(hve).join(" ,")+"}"}(e):"Filter"}class FJe extends go{constructor(t,n,r){super(t,n,r),this.key=on.fromName(r.referenceValue)}matches(t){const n=on.comparator(t.key,this.key);return this.matchesComparison(n)}}class MJe extends go{constructor(t,n){super(t,"in",n),this.keys=pve("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class $Je extends go{constructor(t,n){super(t,"not-in",n),this.keys=pve("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function pve(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>on.fromName(r.referenceValue))}class LJe extends go{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return HH(n)&&OT(n.arrayValue,this.value)}}class BJe extends go{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&OT(this.value.arrayValue,n)}}class jJe extends go{constructor(t,n){super(t,"not-in",n)}matches(t){if(OT(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!OT(this.value.arrayValue,n)}}class zJe extends go{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!HH(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>OT(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJe{constructor(t,n=null,r=[],i=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Ire(e,t=null,n=[],r=[],i=null,o=null,s=null){return new UJe(e,t,n,r,i,o,s)}function qH(e){const t=Sn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>RB(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),hO(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Sx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Sx(r)).join(",")),t.ue=n}return t.ue}function WH(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!PJe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dve(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!kre(e.startAt,t.startAt)&&kre(e.endAt,t.endAt)}function NB(e){return on.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VJe(e,t,n,r,i,o,s,a){return new Yw(e,t,n,r,i,o,s,a)}function GH(e){return new Yw(e)}function Rre(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function mve(e){return e.collectionGroup!==null}function X2(e){const t=Sn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),n.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Lo(Is.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.ce.push(new FT(o,r))}),n.has(Is.keyField().canonicalString())||t.ce.push(new FT(Is.keyField(),r))}return t.ce}function _d(e){const t=Sn(e);return t.le||(t.le=HJe(t,X2(e))),t.le}function HJe(e,t){if(e.limitType==="F")return Ire(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new FT(i.field,o)});const n=e.endAt?new jN(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new jN(e.startAt.position,e.startAt.inclusive):null;return Ire(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function PB(e,t){const n=e.filters.concat([t]);return new Yw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function OB(e,t,n){return new Yw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mO(e,t){return WH(_d(e),_d(t))&&e.limitType===t.limitType}function gve(e){return`${qH(_d(e))}|lt:${e.limitType}`}function _b(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>hve(i)).join(", ")}]`),hO(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Sx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Sx(i)).join(",")),`Target(${r})`}(_d(e))}; limitType=${e.limitType})`}function gO(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):on.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of X2(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(s,a,u){const l=Dre(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,X2(r),i)||r.endAt&&!function(s,a,u){const l=Dre(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,X2(r),i))}(e,t)}function qJe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yve(e){return(t,n)=>{let r=!1;for(const i of X2(e)){const o=WJe(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function WJe(e,t,n){const r=e.field.isKeyField()?on.comparator(t.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Cx(u,l):yn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){rg(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return sve(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GJe=new Oi(on.comparator);function Ip(){return GJe}const vve=new Oi(on.comparator);function X_(...e){let t=vve;for(const n of e)t=t.insert(n.key,n);return t}function bve(e){let t=vve;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function _y(){return Q2()}function xve(){return Q2()}function Q2(){return new $1(e=>e.toString(),(e,t)=>e.isEqual(t))}const YJe=new Oi(on.comparator),KJe=new Lo(on.comparator);function Gn(...e){let t=KJe;for(const n of e)t=t.add(n);return t}const XJe=new Lo(Qn);function QJe(){return XJe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:BN(t)?"-0":t}}function wve(e){return{integerValue:""+e}}function JJe(e,t){return SJe(t)?wve(t):YH(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this._=void 0}}function ZJe(e,t,n){return e instanceof MT?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&VH(o)&&(o=pO(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,t):e instanceof $T?_ve(e,t):e instanceof LT?Tve(e,t):function(i,o){const s=Eve(i,o),a=Nre(s)+Nre(i.Pe);return IB(s)&&IB(i.Pe)?wve(a):YH(i.serializer,a)}(e,t)}function eZe(e,t,n){return e instanceof $T?_ve(e,t):e instanceof LT?Tve(e,t):n}function Eve(e,t){return e instanceof zN?function(r){return IB(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class MT extends yO{}class $T extends yO{constructor(t){super(),this.elements=t}}function _ve(e,t){const n=Cve(t);for(const r of e.elements)n.some(i=>Ld(i,r))||n.push(r);return{arrayValue:{values:n}}}class LT extends yO{constructor(t){super(),this.elements=t}}function Tve(e,t){let n=Cve(t);for(const r of e.elements)n=n.filter(i=>!Ld(i,r));return{arrayValue:{values:n}}}class zN extends yO{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Nre(e){return Qi(e.integerValue||e.doubleValue)}function Cve(e){return HH(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZe{constructor(t,n){this.field=t,this.transform=n}}function nZe(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof $T&&i instanceof $T||r instanceof LT&&i instanceof LT?Tx(r.elements,i.elements,Ld):r instanceof zN&&i instanceof zN?Ld(r.Pe,i.Pe):r instanceof MT&&i instanceof MT}(e.transform,t.transform)}class rZe{constructor(t,n){this.version=t,this.transformResults=n}}class gl{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new gl}static exists(t){return new gl(void 0,t)}static updateTime(t){return new gl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function HI(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class vO{}function Sve(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new KH(e.key,gl.none()):new eS(e.key,e.data,gl.none());{const n=e.data,r=_u.empty();let i=new Lo(Is.comparator);for(let o of t.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ig(e.key,r,new cl(i.toArray()),gl.none())}}function iZe(e,t,n){e instanceof eS?function(i,o,s){const a=i.value.clone(),u=Ore(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof ig?function(i,o,s){if(!HI(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Ore(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Ave(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(e,t,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function J2(e,t,n,r){return e instanceof eS?function(o,s,a,u){if(!HI(o.precondition,s))return a;const l=o.value.clone(),c=Fre(o.fieldTransforms,u,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof ig?function(o,s,a,u){if(!HI(o.precondition,s))return a;const l=Fre(o.fieldTransforms,u,s),c=s.data;return c.setAll(Ave(o)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(o,s,a){return HI(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,n)}function oZe(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),o=Eve(r.transform,i||null);o!=null&&(n===null&&(n=_u.empty()),n.set(r.field,o))}return n||null}function Pre(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tx(r,i,(o,s)=>nZe(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class eS extends vO{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ig extends vO{constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ave(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ore(e,t,n){const r=new Map;kr(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,eZe(s,a,n[i]))}return r}function Fre(e,t,n){const r=new Map;for(const i of e){const o=i.transform,s=n.data.field(i.field);r.set(i.field,ZJe(o,s,t))}return r}class KH extends vO{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sZe extends vO{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZe{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&iZe(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=J2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=J2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=xve();return this.mutations.forEach(i=>{const o=t.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=Sve(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Cn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Gn())}isEqual(t){return this.batchId===t.batchId&&Tx(this.mutations,t.mutations,(n,r)=>Pre(n,r))&&Tx(this.baseMutations,t.baseMutations,(n,r)=>Pre(n,r))}}class XH{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){kr(t.mutations.length===r.length);let i=function(){return YJe}();const o=t.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new XH(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZe{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZe{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fo,rr;function cZe(e){switch(e){default:return yn();case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0}}function Dve(e){if(e===void 0)return kp("GRPC error has no .code"),rt.UNKNOWN;switch(e){case fo.OK:return rt.OK;case fo.CANCELLED:return rt.CANCELLED;case fo.UNKNOWN:return rt.UNKNOWN;case fo.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case fo.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case fo.INTERNAL:return rt.INTERNAL;case fo.UNAVAILABLE:return rt.UNAVAILABLE;case fo.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case fo.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case fo.NOT_FOUND:return rt.NOT_FOUND;case fo.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case fo.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case fo.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case fo.ABORTED:return rt.ABORTED;case fo.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case fo.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case fo.DATA_LOSS:return rt.DATA_LOSS;default:return yn()}}(rr=fo||(fo={}))[rr.OK=0]="OK",rr[rr.CANCELLED=1]="CANCELLED",rr[rr.UNKNOWN=2]="UNKNOWN",rr[rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rr[rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rr[rr.NOT_FOUND=5]="NOT_FOUND",rr[rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",rr[rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",rr[rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",rr[rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rr[rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rr[rr.ABORTED=10]="ABORTED",rr[rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",rr[rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",rr[rr.INTERNAL=13]="INTERNAL",rr[rr.UNAVAILABLE=14]="UNAVAILABLE",rr[rr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fZe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZe=new s0([4294967295,4294967295],0);function Mre(e){const t=fZe().encode(e),n=new Z1e;return n.update(t),new Uint8Array(n.digest())}function $re(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new s0([n,r],0),new s0([i,o],0)]}class QH{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Q_(`Invalid padding: ${n}`);if(r<0)throw new Q_(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Q_(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Q_(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=s0.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(s0.fromNumber(r)));return i.compare(dZe)===1&&(i=new s0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Mre(t),[r,i]=$re(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new QH(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(t){if(this.Te===0)return;const n=Mre(t),[r,i]=$re(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Ae(s)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Q_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,tS.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new bO(Cn.min(),i,new Oi(Qn),Ip(),Gn())}}class tS{constructor(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new tS(r,n,Gn(),Gn(),Gn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class kve{constructor(t,n){this.targetId=t,this.me=n}}class Ive{constructor(t,n,r=js.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Lre{constructor(){this.fe=0,this.ge=Bre(),this.pe=js.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Gn(),n=Gn(),r=Gn();return this.ge.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:yn()}}),new tS(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Bre()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,kr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hZe{constructor(t){this.Be=t,this.Le=new Map,this.ke=Ip(),this.qe=OD(),this.Qe=OD(),this.Ke=new Oi(Qn)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:yn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const o=i.target;if(NB(o))if(r===0){const s=new on(o.path);this.We(n,s,sa.newNoDocument(s,Cn.min()))}else kr(r===1);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(t),u=a?this.et(a,t,s):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=x0(r).toUint8Array()}catch(u){if(u instanceof ave)return RT("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new QH(s,i,o)}catch(u){return RT(u instanceof Q_?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.We(n,o,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&NB(a.target)){const u=new on(a.target.path);this.st(u).has(s)||this.ot(s,u)||this.We(s,u,sa.newNoDocument(u,t))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Gn();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));const i=new bO(t,n,this.Ke,this.ke,r);return this.ke=Ip(),this.qe=OD(),this.Qe=OD(),this.Ke=new Oi(Qn),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new Lre,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new Lo(Qn),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Lo(Qn),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Ot("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new Lre),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function OD(){return new Oi(on.comparator)}function Bre(){return new Oi(on.comparator)}const pZe={asc:"ASCENDING",desc:"DESCENDING"},mZe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gZe={and:"AND",or:"OR"};class yZe{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function FB(e,t){return e.useProto3Json||hO(t)?t:{value:t}}function UN(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rve(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vZe(e,t){return UN(e,t.toTimestamp())}function Td(e){return kr(!!e),Cn.fromTimestamp(function(n){const r=b0(n);return new $o(r.seconds,r.nanos)}(e))}function JH(e,t){return MB(e,t).canonicalString()}function MB(e,t){const n=function(i){return new li(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Nve(e){const t=li.fromString(e);return kr($ve(t)),t}function $B(e,t){return JH(e.databaseId,t.path)}function Z5(e,t){const n=Nve(t);if(n.get(1)!==e.databaseId.projectId)throw new kt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new kt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new on(Ove(n))}function Pve(e,t){return JH(e.databaseId,t)}function bZe(e){const t=Nve(e);return t.length===4?li.emptyPath():Ove(t)}function LB(e){return new li(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ove(e){return kr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function jre(e,t,n){return{name:$B(e,t),fields:n.value.mapValue.fields}}function xZe(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:yn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(kr(c===void 0||typeof c=="string"),js.fromBase64String(c||"")):(kr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),js.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(l){const c=l.code===void 0?rt.UNKNOWN:Dve(l.code);return new kt(c,l.message||"")}(s);n=new Ive(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Z5(e,r.document.name),o=Td(r.document.updateTime),s=r.document.createTime?Td(r.document.createTime):Cn.min(),a=new _u({mapValue:{fields:r.document.fields}}),u=sa.newFoundDocument(i,o,s,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new qI(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Z5(e,r.document),o=r.readTime?Td(r.readTime):Cn.min(),s=sa.newNoDocument(i,o),a=r.removedTargetIds||[];n=new qI([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Z5(e,r.document),o=r.removedTargetIds||[];n=new qI([],o,i,null)}else{if(!("filter"in t))return yn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new lZe(i,o),a=r.targetId;n=new kve(a,s)}}return n}function wZe(e,t){let n;if(t instanceof eS)n={update:jre(e,t.key,t.value)};else if(t instanceof KH)n={delete:$B(e,t.key)};else if(t instanceof ig)n={update:jre(e,t.key,t.data),updateMask:IZe(t.fieldMask)};else{if(!(t instanceof sZe))return yn();n={verify:$B(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof MT)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $T)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof LT)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zN)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw yn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:vZe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:yn()}(e,t.precondition)),n}function EZe(e,t){return e&&e.length>0?(kr(t!==void 0),e.map(n=>function(i,o){let s=i.updateTime?Td(i.updateTime):Td(o);return s.isEqual(Cn.min())&&(s=Td(o)),new rZe(s,i.transformResults||[])}(n,t))):[]}function _Ze(e,t){return{documents:[Pve(e,t.path)]}}function TZe(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Pve(e,i);const o=function(l){if(l.length!==0)return Mve(xf.create(l,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Tb(d.field),direction:AZe(d.dir)}}(c))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=FB(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function CZe(e){let t=bZe(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){kr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let o=[];n.where&&(o=function(f){const d=Fve(f);return d instanceof xf&&fve(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(d=>function(m){return new FT(Cb(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,hO(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new jN(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new jN(h,d)}(n.endAt)),VJe(t,i,s,o,a,"F",u,l)}function SZe(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Fve(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cb(n.unaryFilter.field);return go.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cb(n.unaryFilter.field);return go.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Cb(n.unaryFilter.field);return go.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Cb(n.unaryFilter.field);return go.create(s,"!=",{nullValue:"NULL_VALUE"});default:return yn()}}(e):e.fieldFilter!==void 0?function(n){return go.create(Cb(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return xf.create(n.compositeFilter.filters.map(r=>Fve(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return yn()}}(n.compositeFilter.op))}(e):yn()}function AZe(e){return pZe[e]}function DZe(e){return mZe[e]}function kZe(e){return gZe[e]}function Tb(e){return{fieldPath:e.canonicalString()}}function Cb(e){return Is.fromServerFormat(e.fieldPath)}function Mve(e){return e instanceof go?function(n){if(n.op==="=="){if(Are(n.value))return{unaryFilter:{field:Tb(n.field),op:"IS_NAN"}};if(Sre(n.value))return{unaryFilter:{field:Tb(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Are(n.value))return{unaryFilter:{field:Tb(n.field),op:"IS_NOT_NAN"}};if(Sre(n.value))return{unaryFilter:{field:Tb(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tb(n.field),op:DZe(n.op),value:n.value}}}(e):e instanceof xf?function(n){const r=n.getFilters().map(i=>Mve(i));return r.length===1?r[0]:{compositeFilter:{op:kZe(n.op),filters:r}}}(e):yn()}function IZe(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function $ve(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,r,i,o=Cn.min(),s=Cn.min(),a=js.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Wm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Wm(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Wm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Wm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZe{constructor(t){this.ht=t}}function NZe(e){const t=CZe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?OB(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZe{constructor(){this.ln=new OZe}addToCollectionParentIndex(t,n){return this.ln.add(n),it.resolve()}getCollectionParents(t,n){return it.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return it.resolve()}deleteFieldIndex(t,n){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,n){return it.resolve()}getDocumentsMatchingTarget(t,n){return it.resolve(null)}getIndexType(t,n){return it.resolve(0)}getFieldIndexes(t,n){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,n){return it.resolve(v0.min())}getMinOffsetFromCollectionGroup(t,n){return it.resolve(v0.min())}updateCollectionGroup(t,n,r){return it.resolve()}updateIndexEntries(t,n){return it.resolve()}}class OZe{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Lo(li.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Lo(li.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zre={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xu{static withCacheSize(t){return new xu(t,xu.DEFAULT_COLLECTION_PERCENTILE,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xu.DEFAULT_COLLECTION_PERCENTILE=10,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xu.DEFAULT=new xu(41943040,xu.DEFAULT_COLLECTION_PERCENTILE,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xu.DISABLED=new xu(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new Ax(0)}static Qn(){return new Ax(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ure([e,t],[n,r]){const i=Qn(e,n);return i===0?Qn(t,r):i}class FZe{constructor(t){this.Gn=t,this.buffer=new Lo(Ure),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ure(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MZe{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){Ot("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gw(n)?Ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ww(n)}await this.Yn(3e5)})}}class $Ze{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return it.resolve(dO.oe);const r=new FZe(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Ot("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(zre)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zre):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,o,s,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),Eb()<=Wn.DEBUG&&Ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function LZe(e,t){return new $Ze(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZe{constructor(){this.changes=new $1(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,sa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?it.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZe{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZe{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&J2(r.mutation,i,cl.empty(),$o.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Gn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Gn()){const i=_y();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let s=X_();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(t,n){const r=_y();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Gn()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(t,n,r,i){let o=Ip();const s=Q2(),a=function(){return Q2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof ig)?o=o.insert(l.key,l):c!==void 0?(s.set(l.key,c.mutation.getFieldMask()),J2(c.mutation,l,c.mutation.getFieldMask(),$o.now())):s.set(l.key,cl.empty())}),this.recalculateAndSaveOverlays(t,o).next(u=>(u.forEach((l,c)=>s.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new jZe(c,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Q2();let i=new Oi((s,a)=>s-a),o=Gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||cl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Gn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=xve();c.forEach(d=>{if(!o.has(d)){const h=Sve(n.get(d),r.get(d));h!==null&&f.set(d,h),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(t,l,f))}return it.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(s){return on.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):mve(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):it.resolve(_y());let a=-1,u=o;return s.next(l=>it.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(c)?it.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,o)).next(()=>this.computeViews(t,u,l,Gn())).next(c=>({batchId:a,changes:bve(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new on(n)).next(r=>{let i=X_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let s=X_();return this.indexManager.getCollectionParents(t,o).next(a=>it.forEach(a,u=>{const l=function(f,d){return new Yw(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{s=s.insert(f,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,sa.newInvalidDocument(c)))});let a=X_();return s.forEach((u,l)=>{const c=o.get(u);c!==void 0&&J2(c.mutation,l,cl.empty(),$o.now()),gO(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZe{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return it.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Td(i.createTime)}}(n)),it.resolve()}getNamedQuery(t,n){return it.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:NZe(i.bundledQuery),readTime:Td(i.readTime)}}(n)),it.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZe{constructor(){this.overlays=new Oi(on.comparator),this.dr=new Map}getOverlay(t,n){return it.resolve(this.overlays.get(n))}getOverlays(t,n){const r=_y();return it.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.Tt(t,n,o)}),it.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),it.resolve()}getOverlaysForCollection(t,n,r){const i=_y(),o=n.length+1,s=new on(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return it.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new Oi((l,c)=>l-c);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=o.get(l.largestBatchId);c===null&&(c=_y(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=_y(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return it.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new uZe(n,r));let o=this.dr.get(n);o===void 0&&(o=Gn(),this.dr.set(n,o)),this.dr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZe{constructor(){this.sessionToken=js.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,it.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(){this.Er=new Lo(Jo.Ar),this.Rr=new Lo(Jo.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Jo(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Jo(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new on(new li([])),r=new Jo(n,t),i=new Jo(n,t+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new on(new li([])),r=new Jo(n,t),i=new Jo(n,t+1);let o=Gn();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(t){const n=new Jo(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Jo{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return on.comparator(t.key,n.key)||Qn(t.br,n.br)}static Vr(t,n){return Qn(t.br,n.br)||on.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZe{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Lo(Jo.Ar)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new aZe(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.vr=this.vr.add(new Jo(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return it.resolve(s)}lookupMutationBatch(t,n){return it.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return it.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Jo(n,0),i=new Jo(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const a=this.Cr(s.br);o.push(a)}),it.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Lo(Qn);return n.forEach(i=>{const o=new Jo(i,0),s=new Jo(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),it.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;on.isDocumentKey(o)||(o=o.child(""));const s=new Jo(new on(o),0);let a=new Lo(Qn);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},s),it.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){kr(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return it.forEach(n.mutations,i=>{const o=new Jo(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Jo(n,0),i=this.vr.firstAfterOrEqual(r);return it.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZe{constructor(t){this.Nr=t,this.docs=function(){return new Oi(on.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return it.resolve(r?r.document.mutableCopy():sa.newInvalidDocument(n))}getEntries(t,n){let r=Ip();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():sa.newInvalidDocument(i))}),it.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=Ip();const s=n.path,a=new on(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||EJe(wJe(c),r)<=0||(i.has(c.key)||gO(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return it.resolve(o)}getAllFromCollectionGroup(t,n,r,i){yn()}Br(t,n){return it.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new GZe(this)}getSize(t){return it.resolve(this.size)}}class GZe extends BZe{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),it.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZe{constructor(t){this.persistence=t,this.Lr=new $1(n=>qH(n),WH),this.lastRemoteSnapshotVersion=Cn.min(),this.highestTargetId=0,this.kr=0,this.qr=new ZH,this.targetCount=0,this.Qr=Ax.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),it.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new Ax(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,it.resolve()}updateTargetData(t,n){return this.Un(n),it.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),it.waitFor(o).next(()=>i)}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return it.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),it.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),it.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),it.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return it.resolve(r)}containsKey(t,n){return it.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lve{constructor(t,n){this.Kr={},this.overlays={},this.$r=new dO(0),this.Ur=!1,this.Ur=!0,this.Wr=new HZe,this.referenceDelegate=t(this),this.Gr=new YZe(this),this.indexManager=new PZe,this.remoteDocumentCache=function(i){return new WZe(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new RZe(n),this.jr=new UZe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new VZe,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new qZe(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){Ot("MemoryPersistence","Starting transaction:",t);const i=new KZe(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(t,n){return it.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class KZe extends TJe{constructor(t){super(),this.currentSequenceNumber=t}}class eq{constructor(t){this.persistence=t,this.Zr=new ZH,this.Xr=null}static ei(t){return new eq(t)}get ti(){if(this.Xr)return this.Xr;throw yn()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),it.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),it.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),it.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.ti,r=>{const i=on.fromPath(r);return this.ni(t,i).next(o=>{o||n.removeEntry(i,Cn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return it.or([()=>it.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class VN{constructor(t,n){this.persistence=t,this.ri=new $1(r=>AJe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=LZe(this,n)}static ei(t,n){return new VN(t,n)}Hr(){}Jr(t){return it.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return it.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(o=>o?it.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(t,s=>this.ir(t,s,n).next(a=>{a||(r++,o.removeEntry(s,Cn.min()))})).next(()=>o.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),it.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),it.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),it.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=UI(t.data.value)),n}ir(t,n,r){return it.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return it.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=Gn(),i=Gn();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new tq(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZe{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return CKe()?8:CJe(va())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.Xi(t,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(t,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new XZe;return this.ts(t,n,s).next(a=>{if(o.result=a,this.Hi)return this.ns(t,n,s,a.size)})}).next(()=>o.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(Eb()<=Wn.DEBUG&&Ot("QueryEngine","SDK will not create cache indexes for query:",_b(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),it.resolve()):(Eb()<=Wn.DEBUG&&Ot("QueryEngine","Query:",_b(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Eb()<=Wn.DEBUG&&Ot("QueryEngine","The SDK decides to create cache indexes for query:",_b(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_d(n))):it.resolve())}Xi(t,n){if(Rre(n))return it.resolve(null);let r=_d(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=OB(n,null,"F"),r=_d(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const s=Gn(...o);return this.Zi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,s,u.readTime)?this.Xi(t,OB(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return Rre(n)||i.isEqual(Cn.min())?it.resolve(null):this.Zi.getDocuments(t,r).next(o=>{const s=this.rs(n,o);return this.ss(n,s,r,i)?it.resolve(null):(Eb()<=Wn.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_b(n)),this.os(t,s,n,xJe(i,-1)).next(a=>a))})}rs(t,n){let r=new Lo(yve(t));return n.forEach((i,o)=>{gO(t,o)&&(r=r.add(o))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(t,n,r){return Eb()<=Wn.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",_b(n)),this.Zi.getDocumentsMatchingQuery(t,n,v0.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZe{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new Oi(Qn),this.cs=new $1(o=>qH(o),WH),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zZe(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function ZZe(e,t,n,r){return new JZe(e,t,n,r)}async function Bve(e,t){const n=Sn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Gn();for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:s,addedBatchIds:a}))})})}function eet(e,t){const n=Sn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=it.resolve();return d.forEach(m=>{h=h.next(()=>c.getEntry(u,m)).next(p=>{const g=l.docVersions.get(m);kr(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Gn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function jve(e){const t=Sn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function tet(e,t){const n=Sn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(o,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(o,c.addedDocuments,f)));let h=d.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(js.EMPTY_BYTE_STRING,Cn.min()).withLastLimboFreeSnapshotVersion(Cn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(p,g,v){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(o,h))});let u=Ip(),l=Gn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(net(o,s,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(Cn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(o).next(f=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return it.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.us=i,o))}function net(e,t,n){let r=Gn(),i=Gn();return n.forEach(o=>r=r.add(o)),t.getEntries(e,r).next(o=>{let s=Ip();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Cn.min())?(t.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),s=s.insert(a,u)):Ot("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:s,ds:i}})}function ret(e,t){const n=Sn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function iet(e,t){const n=Sn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(o=>o?(i=o,it.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new Wm(t,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function BB(e,t,n){const r=Sn(e),i=r.us.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Gw(s))throw s;Ot("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function Vre(e,t,n){const r=Sn(e);let i=Cn.min(),o=Gn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,c){const f=Sn(u),d=f.cs.get(c);return d!==void 0?it.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,s,_d(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r._s.getDocumentsMatchingQuery(s,t,n?i:Cn.min(),n?o:Gn())).next(a=>(oet(r,qJe(t),a),{documents:a,Es:o})))}function oet(e,t,n){let r=e.ls.get(t)||Cn.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),e.ls.set(t,r)}class Hre{constructor(){this.activeTargetIds=QJe()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class set{constructor(){this._o=new Hre,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Hre,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aet{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qre{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FD=null;function e8(){return FD===null?FD=function(){return 268435456+Math.round(2147483648*Math.random())}():FD++,"0x"+FD.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uet={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cet{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="WebChannelConnection";class fet extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){const a=e8(),u=this.No(n,r.toUriEncodedString());Ot("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,o,s),this.Lo(n,u,l,i).then(c=>(Ot("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw RT("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,o,s,a){return this.Oo(n,r,i,o,s)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qw}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){const i=uet[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const o=e8();return new Promise((s,a)=>{const u=new eve;u.setWithCredentials(!0),u.listenOnce(tve.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zI.NO_ERROR:const c=u.getResponseJson();Ot(Ks,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(c)),s(c);break;case zI.TIMEOUT:Ot(Ks,`RPC '${t}' ${o} timed out`),a(new kt(rt.DEADLINE_EXCEEDED,"Request time out"));break;case zI.HTTP_ERROR:const f=u.getStatus();if(Ot(Ks,`RPC '${t}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(v)>=0?v:rt.UNKNOWN}(h.status);a(new kt(m,h.message))}else a(new kt(rt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new kt(rt.UNAVAILABLE,"Connection failed."));break;default:yn()}}finally{Ot(Ks,`RPC '${t}' ${o} completed.`)}});const l=JSON.stringify(i);Ot(Ks,`RPC '${t}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=e8(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ive(),a=rve(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=o.join("");Ot(Ks,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=s.createWebChannel(c,u);let d=!1,h=!1;const m=new cet({Eo:g=>{h?Ot(Ks,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Ot(Ks,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Ot(Ks,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),p=(g,v,b)=>{g.listen(v,w=>{try{b(w)}catch(E){setTimeout(()=>{throw E},0)}})};return p(f,K_.EventType.OPEN,()=>{h||(Ot(Ks,`RPC '${t}' stream ${i} transport opened.`),m.So())}),p(f,K_.EventType.CLOSE,()=>{h||(h=!0,Ot(Ks,`RPC '${t}' stream ${i} transport closed`),m.Do())}),p(f,K_.EventType.ERROR,g=>{h||(h=!0,RT(Ks,`RPC '${t}' stream ${i} transport errored:`,g),m.Do(new kt(rt.UNAVAILABLE,"The operation could not be completed")))}),p(f,K_.EventType.MESSAGE,g=>{var v;if(!h){const b=g.data[0];kr(!!b);const w=b,E=(w==null?void 0:w.error)||((v=w[0])===null||v===void 0?void 0:v.error);if(E){Ot(Ks,`RPC '${t}' stream ${i} received error:`,E);const _=E.status;let T=function(k){const R=fo[k];if(R!==void 0)return Dve(R)}(_),S=E.message;T===void 0&&(T=rt.INTERNAL,S="Unknown error status: "+_+" with message "+E.message),h=!0,m.Do(new kt(T,S)),f.close()}else Ot(Ks,`RPC '${t}' stream ${i} received:`,b),m.vo(b)}}),p(a,nve.STAT_EVENT,g=>{g.stat===DB.PROXY?Ot(Ks,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===DB.NOPROXY&&Ot(Ks,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.bo()},0),m}}function t8(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(e){return new yZe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zve{constructor(t,n,r=1e3,i=1.5,o=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Ot("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(t,n,r,i,o,s,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new zve(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===rt.RESOURCE_EXHAUSTED?(kp(n.toString()),kp("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new kt(rt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return Ot("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class det extends Uve{constructor(t,n,r,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=xZe(this.serializer,t),r=function(o){if(!("targetChange"in o))return Cn.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Cn.min():s.readTime?Td(s.readTime):Cn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=LB(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=NB(u)?{documents:_Ze(o,u)}:{query:TZe(o,u).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Rve(o,s.resumeToken);const l=FB(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Cn.min())>0){a.readTime=UN(o,s.snapshotVersion.toTimestamp());const l=FB(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=SZe(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=LB(this.serializer),n.removeTarget=t,this.c_(n)}}class het extends Uve{constructor(t,n,r,i,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return kr(!!t.streamToken),this.lastStreamToken=t.streamToken,kr(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){kr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=EZe(t.writeResults,t.commitTime),r=Td(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=LB(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>wZe(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pet extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new kt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(t,MB(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new kt(rt.UNKNOWN,o.toString())})}ko(t,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(t,MB(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new kt(rt.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class met{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(kp(n),this.C_=!1):Ot("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class get{constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{L1(this)&&(Ot("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Sn(u);l.k_.add(4),await rS(l),l.K_.set("Unknown"),l.k_.delete(4),await nS(l)}(this))})}),this.K_=new met(r,i)}}async function nS(e){if(L1(e))for(const t of e.q_)await t(!0)}async function rS(e){for(const t of e.q_)await t(!1)}function Vve(e,t){const n=Sn(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),oq(n)?iq(n):Kw(n).s_()&&rq(n,t))}function nq(e,t){const n=Sn(e),r=Kw(n);n.L_.delete(t),r.s_()&&Hve(n,t),n.L_.size===0&&(r.s_()?r.a_():L1(n)&&n.K_.set("Unknown"))}function rq(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Cn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Kw(e).V_(t)}function Hve(e,t){e.U_.xe(t),Kw(e).m_(t)}function iq(e){e.U_=new hZe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Kw(e).start(),e.K_.F_()}function oq(e){return L1(e)&&!Kw(e).i_()&&e.L_.size>0}function L1(e){return Sn(e).k_.size===0}function qve(e){e.U_=void 0}async function yet(e){e.K_.set("Online")}async function vet(e){e.L_.forEach((t,n)=>{rq(e,t)})}async function bet(e,t){qve(e),oq(e)?(e.K_.O_(t),iq(e)):e.K_.set("Unknown")}async function xet(e,t,n){if(e.K_.set("Online"),t instanceof Ive&&t.state===2&&t.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){Ot("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await HN(e,r)}else if(t instanceof qI?e.U_.$e(t):t instanceof kve?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(Cn.min()))try{const r=await jve(e.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.U_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.L_.get(l);c&&o.L_.set(l,c.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const c=o.L_.get(u);if(!c)return;o.L_.set(u,c.withResumeToken(js.EMPTY_BYTE_STRING,c.snapshotVersion)),Hve(o,u);const f=new Wm(c.target,u,l,c.sequenceNumber);rq(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Ot("RemoteStore","Failed to raise snapshot:",r),await HN(e,r)}}async function HN(e,t,n){if(!Gw(t))throw t;e.k_.add(1),await rS(e),e.K_.set("Offline"),n||(n=()=>jve(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ot("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await nS(e)})}function Wve(e,t){return t().catch(n=>HN(e,n,t))}async function wO(e){const t=Sn(e),n=E0(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;wet(t);)try{const i=await ret(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,Eet(t,i)}catch(i){await HN(t,i)}Gve(t)&&Yve(t)}function wet(e){return L1(e)&&e.B_.length<10}function Eet(e,t){e.B_.push(t);const n=E0(e);n.s_()&&n.f_&&n.g_(t.mutations)}function Gve(e){return L1(e)&&!E0(e).i_()&&e.B_.length>0}function Yve(e){E0(e).start()}async function _et(e){E0(e).w_()}async function Tet(e){const t=E0(e);for(const n of e.B_)t.g_(n.mutations)}async function Cet(e,t,n){const r=e.B_.shift(),i=XH.from(r,t,n);await Wve(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await wO(e)}async function Aet(e,t){t&&E0(e).f_&&await async function(r,i){if(function(s){return cZe(s)&&s!==rt.ABORTED}(i.code)){const o=r.B_.shift();E0(r).__(),await Wve(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await wO(r)}}(e,t),Gve(e)&&Yve(e)}async function Wre(e,t){const n=Sn(e);n.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const r=L1(n);n.k_.add(3),await rS(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await nS(n)}async function Det(e,t){const n=Sn(e);t?(n.k_.delete(2),await nS(n)):t||(n.k_.add(2),await rS(n),n.K_.set("Unknown"))}function Kw(e){return e.W_||(e.W_=function(n,r,i){const o=Sn(n);return o.b_(),new det(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Ro:yet.bind(null,e),mo:vet.bind(null,e),po:bet.bind(null,e),R_:xet.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),oq(e)?iq(e):e.K_.set("Unknown")):(await e.W_.stop(),qve(e))})),e.W_}function E0(e){return e.G_||(e.G_=function(n,r,i){const o=Sn(n);return o.b_(),new het(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:_et.bind(null,e),po:Aet.bind(null,e),p_:Tet.bind(null,e),y_:Cet.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await wO(e)):(await e.G_.stop(),e.B_.length>0&&(Ot("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const s=Date.now()+r,a=new sq(t,n,s,i,o);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new kt(rt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aq(e,t){if(kp("AsyncQueue",`${t}: ${e}`),Gw(e))return new kt(rt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{static emptySet(t){return new Kb(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||on.comparator(n.key,r.key):(n,r)=>on.comparator(n.key,r.key),this.keyedMap=X_(),this.sortedSet=new Oi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Kb)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Kb;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre{constructor(){this.z_=new Oi(on.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):yn():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Dx{constructor(t,n,r,i,o,s,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Dx(t,n,Kb.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&mO(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ket{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class Iet{constructor(){this.queries=Yre(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Sn(n),o=i.queries;i.queries=Yre(),o.forEach((s,a)=>{for(const u of a.J_)u.onError(r)})})(this,new kt(rt.ABORTED,"Firestore shutting down"))}}function Yre(){return new $1(e=>gve(e),mO)}async function Kve(e,t){const n=Sn(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.Y_()&&t.Z_()&&(r=2):(o=new ket,r=t.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=aq(s,`Initialization of query '${_b(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,o),o.J_.push(t),t.ea(n.onlineState),o.H_&&t.ta(o.H_)&&uq(n)}async function Xve(e,t){const n=Sn(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const s=o.J_.indexOf(t);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=t.Z_()?0:1:!o.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ret(e,t){const n=Sn(e);let r=!1;for(const i of t){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&uq(n)}function Net(e,t,n){const r=Sn(e),i=r.queries.get(t);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(t)}function uq(e){e.X_.forEach(t=>{t.next()})}var jB,Kre;(Kre=jB||(jB={})).na="default",Kre.Cache="cache";class Qve{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Dx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=Dx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==jB.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jve{constructor(t){this.key=t}}class Zve{constructor(t){this.key=t}}class Pet{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Gn(),this.mutatedKeys=Gn(),this.Va=yve(t),this.ma=new Kb(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new Gre,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=gO(this.query,f)?f:null,m=!!d&&this.mutatedKeys.has(d.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?m!==p&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(s=s.add(h),o=p?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const o=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const s=t.pa.j_();s.sort((c,f)=>function(h,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yn()}};return p(h)-p(m)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,s.length!==0||l?{snapshot:new Dx(this.query,t.ma,o,s,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Gre,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=Gn(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new Zve(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new Jve(r))}),n}va(t){this.Ea=t.Es,this.Ra=Gn();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return Dx.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Oet{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Fet{constructor(t){this.key=t,this.Fa=!1}}class Met{constructor(t,n,r,i,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new $1(a=>gve(a),mO),this.Oa=new Map,this.Na=new Set,this.Ba=new Oi(on.comparator),this.La=new Map,this.ka=new ZH,this.qa={},this.Qa=new Map,this.Ka=Ax.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function $et(e,t,n=!0){const r=obe(e);let i;const o=r.xa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await ebe(r,t,n,!0),i}async function Let(e,t){const n=obe(e);await ebe(n,t,!0,!1)}async function ebe(e,t,n,r){const i=await iet(e.localStore,_d(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Bet(e,t,o,s==="current",i.resumeToken)),e.isPrimaryClient&&n&&Vve(e.remoteStore,i),a}async function Bet(e,t,n,r,i){e.Ua=(f,d,h)=>async function(p,g,v,b){let w=g.view.ga(v);w.ss&&(w=await Vre(p.localStore,g.query,!1).then(({documents:S})=>g.view.ga(S,w)));const E=b&&b.targetChanges.get(g.targetId),_=b&&b.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(w,p.isPrimaryClient,E,_);return Qre(p,g.targetId,T.ba),T.snapshot}(e,f,d,h);const o=await Vre(e.localStore,t,!0),s=new Pet(t,o.Es),a=s.ga(o.documents),u=tS.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=s.applyChanges(a,e.isPrimaryClient,u);Qre(e,n,l.ba);const c=new Oet(t,n,s);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function jet(e,t,n){const r=Sn(e),i=r.xa.get(t),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!mO(s,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await BB(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nq(r.remoteStore,i.targetId),zB(r,i.targetId)}).catch(Ww)):(zB(r,i.targetId),await BB(r.localStore,i.targetId,!0))}async function zet(e,t){const n=Sn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nq(n.remoteStore,r.targetId))}async function Uet(e,t,n){const r=Ket(e);try{const i=await function(s,a){const u=Sn(s),l=$o.now(),c=a.reduce((h,m)=>h.add(m.key),Gn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=Ip(),p=Gn();return u.hs.getEntries(h,c).next(g=>{m=g,m.forEach((v,b)=>{b.isValidDocument()||(p=p.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,m)).next(g=>{f=g;const v=[];for(const b of a){const w=oZe(b,f.get(b.key).overlayedDocument);w!=null&&v.push(new ig(b.key,w,uve(w.value.mapValue),gl.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,v,a)}).next(g=>{d=g;const v=g.applyToLocalDocumentSet(f,p);return u.documentOverlayCache.saveOverlays(h,g.batchId,v)})}).then(()=>({batchId:d.batchId,changes:bve(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.qa[s.currentUser.toKey()];l||(l=new Oi(Qn)),l=l.insert(a,u),s.qa[s.currentUser.toKey()]=l}(r,i.batchId,n),await iS(r,i.changes),await wO(r.remoteStore)}catch(i){const o=aq(i,"Failed to persist write");n.reject(o)}}async function tbe(e,t){const n=Sn(e);try{const r=await tet(n.localStore,t);t.targetChanges.forEach((i,o)=>{const s=n.La.get(o);s&&(kr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?kr(s.Fa):i.removedDocuments.size>0&&(kr(s.Fa),s.Fa=!1))}),await iS(n,r,t)}catch(r){await Ww(r)}}function Xre(e,t,n){const r=Sn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,s)=>{const a=s.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Sn(s);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&uq(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Vet(e,t,n){const r=Sn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),o=i&&i.key;if(o){let s=new Oi(on.comparator);s=s.insert(o,sa.newNoDocument(o,Cn.min()));const a=Gn().add(o),u=new bO(Cn.min(),new Map,new Oi(Qn),s,a);await tbe(r,u),r.Ba=r.Ba.remove(o),r.La.delete(t),lq(r)}else await BB(r.localStore,t,!1).then(()=>zB(r,t,n)).catch(Ww)}async function Het(e,t){const n=Sn(e),r=t.batch.batchId;try{const i=await eet(n.localStore,t);rbe(n,r,null),nbe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await iS(n,i)}catch(i){await Ww(i)}}async function qet(e,t,n){const r=Sn(e);try{const i=await function(s,a){const u=Sn(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(kr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);rbe(r,t,n),nbe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await iS(r,i)}catch(i){await Ww(i)}}function nbe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function rbe(e,t,n){const r=Sn(e);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function zB(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||ibe(e,r)})}function ibe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(nq(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),lq(e))}function Qre(e,t,n){for(const r of n)r instanceof Jve?(e.ka.addReference(r.key,t),Wet(e,r)):r instanceof Zve?(Ot("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||ibe(e,r.key)):yn()}function Wet(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(Ot("SyncEngine","New document in limbo: "+n),e.Na.add(r),lq(e))}function lq(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new on(li.fromString(t)),r=e.Ka.next();e.La.set(r,new Fet(n)),e.Ba=e.Ba.insert(n,r),Vve(e.remoteStore,new Wm(_d(GH(n.path)),r,"TargetPurposeLimboResolution",dO.oe))}}async function iS(e,t,n){const r=Sn(e),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{s.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=tq.zi(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(u,l){const c=Sn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>it.forEach(l,d=>it.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>it.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Gw(f))throw f;Ot("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);c.us=c.us.insert(d,p)}}}(r.localStore,o))}async function Get(e,t){const n=Sn(e);if(!n.currentUser.isEqual(t)){Ot("SyncEngine","User change. New user:",t.toKey());const r=await Bve(n.localStore,t);n.currentUser=t,function(o,s){o.Qa.forEach(a=>{a.forEach(u=>{u.reject(new kt(rt.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await iS(n,r.Ts)}}function Yet(e,t){const n=Sn(e),r=n.La.get(t);if(r&&r.Fa)return Gn().add(r.key);{let i=Gn();const o=n.Oa.get(t);if(!o)return i;for(const s of o){const a=n.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function obe(e){const t=Sn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tbe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yet.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vet.bind(null,t),t.Ma.R_=Ret.bind(null,t.eventManager),t.Ma.Wa=Net.bind(null,t.eventManager),t}function Ket(e){const t=Sn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Het.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qet.bind(null,t),t}class qN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=xO(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return ZZe(this.persistence,new QZe,t.initialUser,this.serializer)}ja(t){return new Lve(eq.ei,this.serializer)}za(t){return new set}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qN.provider={build:()=>new qN};class Xet extends qN{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){kr(this.persistence.referenceDelegate instanceof VN);const r=this.persistence.referenceDelegate.garbageCollector;return new MZe(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?xu.withCacheSize(this.cacheSizeBytes):xu.DEFAULT;return new Lve(r=>VN.ei(r,n),this.serializer)}}class UB{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xre(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Get.bind(null,this.syncEngine),await Det(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Iet}()}createDatastore(t){const n=xO(t.databaseInfo.databaseId),r=function(o){return new fet(o)}(t.databaseInfo);return function(o,s,a,u){return new pet(o,s,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,s,a){return new get(r,i,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Xre(this.syncEngine,n,0),function(){return qre.p()?new qre:new aet}())}createSyncEngine(t,n){return function(i,o,s,a,u,l,c){const f=new Met(i,o,s,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const o=Sn(i);Ot("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await rS(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}UB.provider={build:()=>new UB};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sbe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):kp("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qet{constructor(t,n,r,i,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=bu.UNAUTHENTICATED,this.clientId=ove.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Ot("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ot("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new lp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=aq(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function n8(e,t){e.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Bve(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Jre(e,t){e.asyncQueue.verifyOperationInProgress();const n=await abe(e);Ot("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Wre(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Wre(t.remoteStore,i)),e._onlineComponents=t}async function abe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ot("FirestoreClient","Using user provided OfflineComponentProvider");try{await n8(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===rt.FAILED_PRECONDITION||i.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;RT("Error using user provided cache. Falling back to memory cache: "+n),await n8(e,new qN)}}else Ot("FirestoreClient","Using default OfflineComponentProvider"),await n8(e,new Xet(void 0));return e._offlineComponents}async function cq(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ot("FirestoreClient","Using user provided OnlineComponentProvider"),await Jre(e,e._uninitializedComponentsProvider._online)):(Ot("FirestoreClient","Using default OnlineComponentProvider"),await Jre(e,new UB))),e._onlineComponents}function Jet(e){return abe(e).then(t=>t.persistence)}function Zet(e){return cq(e).then(t=>t.remoteStore)}function ett(e){return cq(e).then(t=>t.syncEngine)}async function ube(e){const t=await cq(e),n=t.eventManager;return n.onListen=$et.bind(null,t.syncEngine),n.onUnlisten=jet.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Let.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=zet.bind(null,t.syncEngine),n}function ttt(e){return e.asyncQueue.enqueue(async()=>{const t=await Jet(e),n=await Zet(e);return t.setNetworkEnabled(!0),function(i){const o=Sn(i);return o.k_.delete(0),nS(o)}(n)})}function ntt(e,t,n={}){const r=new lp;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new sbe({next:d=>{c.eu(),s.enqueueAndForget(()=>Xve(o,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new kt(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new kt(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Qve(GH(a.path),c,{includeMetadataChanges:!0,ua:!0});return Kve(o,f)}(await ube(e),e.asyncQueue,t,n,r)),r.promise}function rtt(e,t,n={}){const r=new lp;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new sbe({next:d=>{c.eu(),s.enqueueAndForget(()=>Xve(o,f)),d.fromCache&&u.source==="server"?l.reject(new kt(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Qve(a,c,{includeMetadataChanges:!0,ua:!0});return Kve(o,f)}(await ube(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lbe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zre=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cbe(e,t,n){if(!n)throw new kt(rt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function itt(e,t,n,r){if(t===!0&&r===!0)throw new kt(rt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function eie(e){if(!on.isDocumentKey(e))throw new kt(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function tie(e){if(on.isDocumentKey(e))throw new kt(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function EO(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":yn()}function Bd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kt(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=EO(e);throw new kt(rt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new kt(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new kt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}itt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lbe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new kt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new kt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new kt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fq{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nie({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kt(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new kt(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nie(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dJe;switch(r.type){case"firstParty":return new mJe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new kt(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zre.get(n);r&&(Ot("ComponentProvider","Removing Datastore"),Zre.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new B1(this.firestore,t,this._query)}}class Ga{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new a0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ga(this.firestore,t,this._key)}}class a0 extends B1{constructor(t,n,r){super(t,n,GH(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ga(this.firestore,null,new on(t))}withConverter(t){return new a0(this.firestore,t,this._path)}}function gu(e,t,...n){if(e=ti(e),cbe("collection","path",t),e instanceof fq){const r=li.fromString(t,...n);return tie(r),new a0(e,null,r)}{if(!(e instanceof Ga||e instanceof a0))throw new kt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(li.fromString(t,...n));return tie(r),new a0(e.firestore,null,r)}}function si(e,t,...n){if(e=ti(e),arguments.length===1&&(t=ove.newId()),cbe("doc","path",t),e instanceof fq){const r=li.fromString(t,...n);return eie(r),new Ga(e,null,new on(r))}{if(!(e instanceof Ga||e instanceof a0))throw new kt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(li.fromString(t,...n));return eie(r),new Ga(e.firestore,e instanceof a0?e.converter:null,new on(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new zve(this,"async_queue_retry"),this.fu=()=>{const r=t8();r&&Ot("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=t8();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=t8();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new lp;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!Gw(t))throw t;Ot("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw kp("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=sq.createAndSchedule(this,t,n,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&yn()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class j1 extends fq{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new rie,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new rie(t),this._firestoreClient=void 0,await t}}}function ott(e,t,n){n||(n="(default)");const r=Hw(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),o=r.getOptions(n);if(kT(o,t))return i;throw new kt(rt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new kt(rt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new kt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function oS(e){if(e._terminated)throw new kt(rt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||stt(e),e._firestoreClient}function stt(e){var t,n,r;const i=e._freezeSettings(),o=function(a,u,l,c){return new IJe(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,lbe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Qet(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function att(e){return ttt(oS(e=Bd(e,j1)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new kx(js.fromBase64String(t))}catch(n){throw new kt(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new kx(js.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new kt(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Is(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dq=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new kt(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new kt(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Qn(this._lat,t._lat)||Qn(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const utt=/^__.*__$/;class ltt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new ig(t,this.data,this.fieldMask,n,this.fieldTransforms):new eS(t,this.data,n,this.fieldTransforms)}}class fbe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new ig(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function dbe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yn()}}class pq{constructor(t,n,r,i,o,s){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new pq(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return WN(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(dbe(this.Mu)&&utt.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class ctt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||xO(t)}$u(t,n,r,i=!1){return new pq({Mu:t,methodName:n,Ku:r,path:Is.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TO(e){const t=e._freezeSettings(),n=xO(e._databaseId);return new ctt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hbe(e,t,n,r,i,o={}){const s=e.$u(o.merge||o.mergeFields?2:0,t,n,i);gq("Data must be an object, but it was:",s,r);const a=gbe(r,s);let u,l;if(o.merge)u=new cl(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const f of o.mergeFields){const d=VB(t,f,n);if(!s.contains(d))throw new kt(rt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);vbe(c,d)||c.push(d)}u=new cl(c),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new ltt(new _u(a),u,l)}class CO extends _O{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof CO}}class mq extends _O{_toFieldTransform(t){return new tZe(t.path,new MT)}isEqual(t){return t instanceof mq}}function pbe(e,t,n,r){const i=e.$u(1,t,n);gq("Data must be an object, but it was:",i,r);const o=[],s=_u.empty();rg(r,(u,l)=>{const c=yq(t,u,n);l=ti(l);const f=i.Lu(c);if(l instanceof CO)o.push(c);else{const d=aS(l,f);d!=null&&(o.push(c),s.set(c,d))}});const a=new cl(o);return new fbe(s,a,i.fieldTransforms)}function mbe(e,t,n,r,i,o){const s=e.$u(1,t,n),a=[VB(t,r,n)],u=[i];if(o.length%2!=0)throw new kt(rt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(VB(t,o[d])),u.push(o[d+1]);const l=[],c=_u.empty();for(let d=a.length-1;d>=0;--d)if(!vbe(l,a[d])){const h=a[d];let m=u[d];m=ti(m);const p=s.Lu(h);if(m instanceof CO)l.push(h);else{const g=aS(m,p);g!=null&&(l.push(h),c.set(h,g))}}const f=new cl(l);return new fbe(c,f,s.fieldTransforms)}function ftt(e,t,n,r=!1){return aS(n,e.$u(r?4:3,t))}function aS(e,t){if(ybe(e=ti(e)))return gq("Unsupported field value:",t,e),gbe(e,t);if(e instanceof _O)return function(r,i){if(!dbe(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=aS(a,i.ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=ti(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JJe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=$o.fromDate(r);return{timestampValue:UN(i.serializer,o)}}if(r instanceof $o){const o=new $o(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:UN(i.serializer,o)}}if(r instanceof dq)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kx)return{bytesValue:Rve(i.serializer,r._byteString)};if(r instanceof Ga){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:JH(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hq)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return YH(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${EO(r)}`)}(e,t)}function gbe(e,t){const n={};return sve(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rg(e,(r,i)=>{const o=aS(i,t.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ybe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof $o||e instanceof dq||e instanceof kx||e instanceof Ga||e instanceof _O||e instanceof hq)}function gq(e,t,n){if(!ybe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=EO(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function VB(e,t,n){if((t=ti(t))instanceof sS)return t._internalPath;if(typeof t=="string")return yq(e,t);throw WN("Field path arguments must be of type string or ",e,!1,void 0,n)}const dtt=new RegExp("[~\\*/\\[\\]]");function yq(e,t,n){if(t.search(dtt)>=0)throw WN(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new sS(...t.split("."))._internalPath}catch{throw WN(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function WN(e,t,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new kt(rt.INVALID_ARGUMENT,a+e+u)}function vbe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bbe{constructor(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ga(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new htt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(SO("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class htt extends bbe{data(){return super.data()}}function SO(e,t){return typeof t=="string"?yq(e,t):t instanceof sS?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ptt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new kt(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vq{}class xbe extends vq{}function r8(e,t,...n){let r=[];t instanceof vq&&r.push(t),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof bq).length,a=o.filter(u=>u instanceof AO).length;if(s>1||s>0&&a>0)throw new kt(rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class AO extends xbe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new AO(t,n,r)}_apply(t){const n=this._parse(t);return wbe(t._query,n),new B1(t.firestore,t.converter,PB(t._query,n))}_parse(t){const n=TO(t.firestore);return function(o,s,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new kt(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){aie(f,c);const h=[];for(const m of f)h.push(sie(u,o,m));d={arrayValue:{values:h}}}else d=sie(u,o,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||aie(f,c),d=ftt(a,s,f,c==="in"||c==="not-in");return go.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function iie(e,t,n){const r=t,i=SO("where",e);return AO._create(i,r,n)}class bq extends vq{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new bq(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)wbe(s,u),s=PB(s,u)}(t._query,n),new B1(t.firestore,t.converter,PB(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xq extends xbe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new xq(t,n)}_apply(t){const n=function(i,o,s){if(i.startAt!==null)throw new kt(rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new kt(rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new FT(o,s)}(t._query,this._field,this._direction);return new B1(t.firestore,t.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Yw(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function oie(e,t="asc"){const n=t,r=SO("orderBy",e);return xq._create(r,n)}function sie(e,t,n){if(typeof(n=ti(n))=="string"){if(n==="")throw new kt(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mve(t)&&n.indexOf("/")!==-1)throw new kt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(li.fromString(n));if(!on.isDocumentKey(r))throw new kt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cre(e,new on(r))}if(n instanceof Ga)return Cre(e,n._key);throw new kt(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${EO(n)}.`)}function aie(e,t){if(!Array.isArray(e)||e.length===0)throw new kt(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function wbe(e,t){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new kt(rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new kt(rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class mtt{convertValue(t,n="none"){switch(w0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(x0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw yn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return rg(t,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(t){var n,r,i;const o=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Qi(s.doubleValue));return new hq(o)}convertGeoPoint(t){return new dq(Qi(t.latitude),Qi(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=pO(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(NT(t));default:return null}}convertTimestamp(t){const n=b0(t);return new $o(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=li.fromString(t);kr($ve(r));const i=new PT(r.get(1),r.get(3)),o=new on(r.popFirst(5));return i.isEqual(n)||kp(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ebe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _be extends bbe{constructor(t,n,r,i,o,s){super(t,n,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new WI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(SO("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class WI extends _be{data(t={}){return super.data(t)}}class gtt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new J_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new WI(this._firestore,this._userDataWriter,r.key,r,new J_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new kt(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const u=new WI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new J_(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const u=new WI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new J_(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:ytt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ytt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(e){e=Bd(e,Ga);const t=Bd(e.firestore,j1);return ntt(oS(t),e._key).then(n=>vtt(t,e,n))}class Tbe extends mtt{constructor(t){super(),this.firestore=t}convertBytes(t){return new kx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ga(this.firestore,null,n)}}function Yv(e){e=Bd(e,B1);const t=Bd(e.firestore,j1),n=oS(t),r=new Tbe(t);return ptt(e._query),rtt(n,e._query).then(i=>new gtt(t,r,e,i))}function Xs(e,t,n){e=Bd(e,Ga);const r=Bd(e.firestore,j1),i=Ebe(e.converter,t,n);return wq(r,[hbe(TO(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,gl.none())])}function uie(e,t,n,...r){e=Bd(e,Ga);const i=Bd(e.firestore,j1),o=TO(i);let s;return s=typeof(t=ti(t))=="string"||t instanceof sS?mbe(o,"updateDoc",e._key,t,n,r):pbe(o,"updateDoc",e._key,t),wq(i,[s.toMutation(e._key,gl.exists(!0))])}function wq(e,t){return function(r,i){const o=new lp;return r.asyncQueue.enqueueAndForget(async()=>Uet(await ett(r),i,o)),o.promise}(oS(e),t)}function vtt(e,t,n){const r=n.docs.get(t._key),i=new Tbe(e);return new _be(e,i,t._key,r,new J_(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class btt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=TO(t)}set(t,n,r){this._verifyNotCommitted();const i=i8(t,this._firestore),o=Ebe(i.converter,n,r),s=hbe(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,gl.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const o=i8(t,this._firestore);let s;return s=typeof(n=ti(n))=="string"||n instanceof sS?mbe(this._dataReader,"WriteBatch.update",o._key,n,r,i):pbe(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,gl.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=i8(t,this._firestore);return this._mutations=this._mutations.concat(new KH(n._key,gl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new kt(rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function i8(e,t){if((e=ti(e)).firestore!==t)throw new kt(rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function $D(){return new mq("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(e){return oS(e=Bd(e,j1)),new btt(e,t=>wq(e,t))}(function(t,n=!0){(function(i){qw=i})(M1),Dp(new $d("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new j1(new hJe(r.getProvider("auth-internal")),new yJe(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new kt(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new PT(l.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ff(bre,"4.7.6",t),ff(bre,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=new Map,Cbe={activated:!1,tokenObservers:[]},xtt={initialized:!1,enabled:!1};function Bo(e){return HB.get(e)||Object.assign({},Cbe)}function wtt(e,t){return HB.set(e,t),HB.get(e)}function DO(){return xtt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sbe="https://content-firebaseappcheck.googleapis.com/v1",Ett="exchangeRecaptchaV3Token",_tt="exchangeDebugToken",cie={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Ttt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ctt{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new DT,this.pending.promise.catch(n=>{}),await Stt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new DT,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Stt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Att={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Cu=new Vw("appCheck","AppCheck",Att);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fie(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Eq(e){if(!Bo(e).activated)throw Cu.create("use-before-activation",{appName:e.name})}function Abe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),o=t-n*3600*24-r*3600-i*60;let s="";return n&&(s+=LD(n)+"d:"),r&&(s+=LD(r)+"h:"),s+=LD(i)+"m:"+LD(o)+"s",s}function LD(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _q({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const o={method:"POST",body:JSON.stringify(t),headers:r};let s;try{s=await fetch(e,o)}catch(f){throw Cu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(s.status!==200)throw Cu.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(f){throw Cu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Cu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function Dtt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Sbe}/projects/${n}/apps/${r}:${Ett}?key=${i}`,body:{recaptcha_v3_token:t}}}function Dbe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Sbe}/projects/${n}/apps/${r}:${_tt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ktt="firebase-app-check-database",Itt=1,BT="firebase-app-check-store",kbe="debug-token";let BD=null;function Ibe(){return BD||(BD=new Promise((e,t)=>{try{const n=indexedDB.open(ktt,Itt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Cu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(BT,{keyPath:"compositeKey"})}}}catch(n){t(Cu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),BD)}function Rtt(e){return Nbe(Pbe(e))}function Ntt(e,t){return Rbe(Pbe(e),t)}function Ptt(e){return Rbe(kbe,e)}function Ott(){return Nbe(kbe)}async function Rbe(e,t){const r=(await Ibe()).transaction(BT,"readwrite"),o=r.objectStore(BT).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Cu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function Nbe(e){const n=(await Ibe()).transaction(BT,"readonly"),i=n.objectStore(BT).get(e);return new Promise((o,s)=>{i.onsuccess=a=>{const u=a.target.result;o(u?u.value:void 0)},n.onerror=a=>{var u;s(Cu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function Pbe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new lO("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ftt(e){if(NH()){let t;try{t=await Rtt(e)}catch(n){jT.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function o8(e,t){return NH()?Ntt(e,t).catch(n=>{jT.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Mtt(){let e;try{e=await Ott()}catch{}if(e)return e;{const t=crypto.randomUUID();return Ptt(t).catch(n=>jT.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(){return DO().enabled}async function Cq(){const e=DO();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function $tt(){const e=I1e(),t=DO();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new DT;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Mtt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ltt={error:"UNKNOWN_ERROR"};function Btt(e){return RH.encodeString(JSON.stringify(e),!1)}async function qB(e,t=!1){const n=e.app;Eq(n);const r=Bo(n);let i=r.token,o;if(i&&!Nb(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Nb(u)?i=u:await o8(n,void 0))}if(!t&&i&&Nb(i))return{token:i.token};let s=!1;if(Tq()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_q(Dbe(n,await Cq()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const u=await r.exchangeTokenPromise;return await o8(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=await Bo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?jT.warn(u.message):jT.error(u),o=u}let a;return i?o?Nb(i)?a={token:i.token,internalError:o}:a=hie(o):(a={token:i.token},r.token=i,await o8(n,i)):a=hie(o),s&&Mbe(n,a),a}async function jtt(e){const t=e.app;Eq(t);const{provider:n}=Bo(t);if(Tq()){const r=await Cq(),{token:i}=await _q(Dbe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function Obe(e,t,n,r){const{app:i}=e,o=Bo(i),s={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Nb(o.token)){const a=o.token;Promise.resolve().then(()=>{n({token:a.token}),die(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>die(e))}function Fbe(e,t){const n=Bo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function die(e){const{app:t}=e,n=Bo(t);let r=n.tokenRefresher;r||(r=ztt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function ztt(e){const{app:t}=e;return new Ctt(async()=>{const n=Bo(t);let r;if(n.token?r=await qB(e,!0):r=await qB(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Bo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cie.RETRIAL_MIN_WAIT,cie.RETRIAL_MAX_WAIT)}function Mbe(e,t){const n=Bo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Nb(e){return e.expireTimeMillis-Date.now()>0}function hie(e){return{token:Btt(Ltt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Utt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Bo(this.app);for(const n of t)Fbe(this.app,n.next);return Promise.resolve()}}function Vtt(e,t){return new Utt(e,t)}function Htt(e){return{getToken:t=>qB(e,t),getLimitedUseToken:()=>jtt(e),addTokenListener:t=>Obe(e,"INTERNAL",t),removeTokenListener:t=>Fbe(e.app,t)}}const qtt="@firebase/app-check",Wtt="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gtt="https://www.google.com/recaptcha/api.js";function Ytt(e,t){const n=new DT,r=Bo(e);r.reCAPTCHAState={initialized:n};const i=Ktt(e),o=fie(!1);return o?pie(e,t,o,i,n):Jtt(()=>{const s=fie(!1);if(!s)throw new Error("no recaptcha");pie(e,t,s,i,n)}),n.promise}function pie(e,t,n,r,i){n.ready(()=>{Qtt(e,t,n,r),i.resolve(n)})}function Ktt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Xtt(e){Eq(e);const n=await Bo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const o=Bo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(o.widgetId,{action:"fire_app_check"}))})})}function Qtt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Bo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Bo(e).reCAPTCHAState.succeeded=!1}}),o=Bo(e);o.reCAPTCHAState=Object.assign(Object.assign({},o.reCAPTCHAState),{widgetId:i})}function Jtt(e){const t=document.createElement("script");t.src=Gtt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;ent(this._throttleData);const i=await Xtt(this._app).catch(s=>{throw Cu.create("recaptcha-error")});if(!(!((t=Bo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Cu.create("recaptcha-error");let o;try{o=await _q(Dtt(this._app,i),this._heartbeatServiceProvider)}catch(s){throw!((n=s.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=Ztt(Number((r=s.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Cu.create("throttled",{time:Abe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):s}return this._throttleData=null,o}initialize(t){this._app=t,this._heartbeatServiceProvider=Hw(t,"heartbeat"),Ytt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Sq?this._siteKey===t._siteKey:!1}}function Ztt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Ttt,httpStatus:e};{const n=t?t.backoffCount:0,r=LKe(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function ent(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Cu.create("throttled",{time:Abe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tnt(e=OH(),t){e=ti(e);const n=Hw(e,"app-check");if(DO().initialized||$tt(),Tq()&&Cq().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(o.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&o.provider.isEqual(t.provider))return i;throw Cu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return nnt(e,t.provider,t.isTokenAutoRefreshEnabled),Bo(e).isTokenAutoRefreshEnabled&&Obe(r,"INTERNAL",()=>{}),r}function nnt(e,t,n){const r=wtt(e,Object.assign({},Cbe));r.activated=!0,r.provider=t,r.cachedTokenPromise=Ftt(e).then(i=>(i&&Nb(i)&&(r.token=i,Mbe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const rnt="app-check",mie="app-check-internal";function int(){Dp(new $d(rnt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Vtt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(mie).initialize()})),Dp(new $d(mie,e=>{const t=e.getProvider("app-check").getImmediate();return Htt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ff(qtt,Wtt)}int();function $be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ont=$be,Lbe=new Vw("auth","Firebase",$be());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new lO("@firebase/auth");function snt(e,...t){GN.logLevel<=Wn.WARN&&GN.warn(`Auth (${M1}): ${e}`,...t)}function GI(e,...t){GN.logLevel<=Wn.ERROR&&GN.error(`Auth (${M1}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(e,...t){throw Dq(e,...t)}function df(e,...t){return Dq(e,...t)}function Aq(e,t,n){const r=Object.assign(Object.assign({},ont()),{[t]:n});return new Vw("auth","Firebase",r).create(t,{appName:e.name})}function u0(e){return Aq(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ant(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&jd(e,"argument-error"),Aq(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dq(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Lbe.create(e,...t)}function xn(e,t,...n){if(!e)throw Dq(t,...n)}function Xh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw GI(t),new Error(t)}function Rp(e,t){e||Xh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function unt(){return gie()==="http:"||gie()==="https:"}function gie(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lnt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(unt()||EKe()||"connection"in navigator)?navigator.onLine:!0}function cnt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(t,n){this.shortDelay=t,this.longDelay=n,Rp(n>t,"Short delay should be less than long delay!"),this.isMobile=bKe()||_Ke()}get(){return lnt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(e,t){Rp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bbe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fnt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dnt=new uS(3e4,6e4);function kO(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xw(e,t,n,r,i={}){return jbe(e,i,async()=>{let o={},s={};r&&(t==="GET"?s=r:o={body:JSON.stringify(r)});const a=JC(Object.assign({key:e.config.apiKey},s)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},o);return wKe()||(l.referrerPolicy="no-referrer"),Bbe.fetch()(Ube(e,e.config.apiHost,n,a),l)})}async function jbe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},fnt),t);try{const i=new hnt(e),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw jD(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw jD(e,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw jD(e,"email-already-in-use",s);if(u==="USER_DISABLED")throw jD(e,"user-disabled",s);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Aq(e,c,l);jd(e,c)}}catch(i){if(i instanceof rh)throw i;jd(e,"network-request-failed",{message:String(i)})}}async function zbe(e,t,n,r,i={}){const o=await Xw(e,t,n,r,i);return"mfaPendingCredential"in o&&jd(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Ube(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?kq(e.config,i):`${e.config.apiScheme}://${i}`}class hnt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(df(this.auth,"network-request-failed")),dnt.get())})}}function jD(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=df(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pnt(e,t){return Xw(e,"POST","/v1/accounts:delete",t)}async function Vbe(e,t){return Xw(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function mnt(e,t=!1){const n=ti(e),r=await n.getIdToken(t),i=Iq(r);xn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Z2(s8(i.auth_time)),issuedAtTime:Z2(s8(i.iat)),expirationTime:Z2(s8(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function s8(e){return Number(e)*1e3}function Iq(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return GI("JWT malformed, contained fewer than 3 sections"),null;try{const i=k1e(n);return i?JSON.parse(i):(GI("Failed to decode base64 JWT payload"),null)}catch(i){return GI("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yie(e){const t=Iq(e);return xn(t,"internal-error"),xn(typeof t.exp<"u","internal-error"),xn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof rh&&gnt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function gnt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ynt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z2(this.lastLoginAt),this.creationTime=Z2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(e){var t;const n=e.auth,r=await e.getIdToken(),i=await zT(e,Vbe(n,{idToken:r}));xn(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?Hbe(o.providerUserInfo):[],a=bnt(e.providerData,s),u=e.isAnonymous,l=!(e.email&&o.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new GB(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function vnt(e){const t=ti(e);await YN(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function bnt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function Hbe(e){return e.map(t=>{var{providerId:n}=t,r=NC(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xnt(e,t){const n=await jbe(e,{},async()=>{const r=JC({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=Ube(e,i,"/v1/token",`key=${o}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Bbe.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wnt(e,t){return Xw(e,"POST","/v2/accounts:revokeToken",kO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){xn(t.idToken,"internal-error"),xn(typeof t.idToken<"u","internal-error"),xn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):yie(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){xn(t.length!==0,"internal-error");const n=yie(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await xnt(t,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Xb;return r&&(xn(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(xn(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(xn(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Xb,this.toJSON())}_performRefresh(){return Xh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(e,t){xn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Qh{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=NC(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ynt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new GB(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await zT(this,this.stsTokenManager.getToken(this.auth,t));return xn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return mnt(this,t)}reload(){return vnt(this)}_assign(t){this!==t&&(xn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Qh(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){xn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await YN(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vd(this.auth.app))return Promise.reject(u0(this.auth));const t=await this.getIdToken();return await zT(this,pnt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,p=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:E,isAnonymous:_,providerData:T,stsTokenManager:S}=n;xn(w&&S,t,"internal-error");const D=Xb.fromJSON(this.name,S);xn(typeof w=="string",t,"internal-error"),Sm(f,t.name),Sm(d,t.name),xn(typeof E=="boolean",t,"internal-error"),xn(typeof _=="boolean",t,"internal-error"),Sm(h,t.name),Sm(m,t.name),Sm(p,t.name),Sm(g,t.name),Sm(v,t.name),Sm(b,t.name);const k=new Qh({uid:w,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:_,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:D,createdAt:v,lastLoginAt:b});return T&&Array.isArray(T)&&(k.providerData=T.map(R=>Object.assign({},R))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(t,n,r=!1){const i=new Xb;i.updateFromServerResponse(n);const o=new Qh({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await YN(o),o}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];xn(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Hbe(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Xb;a.updateFromIdToken(r);const u=new Qh({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new GB(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vie=new Map;function Jh(e){Rp(e instanceof Function,"Expected a class definition");let t=vie.get(e);return t?(Rp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vie.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qbe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}qbe.type="NONE";const bie=qbe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(e,t,n){return`firebase:${e}:${t}:${n}`}class Qb{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=YI(this.userKey,i.apiKey,o),this.fullPersistenceKey=YI("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Qh._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Qb(Jh(bie),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||Jh(bie);const s=YI(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(s);if(c){const f=Qh._fromJSON(t,c);l!==o&&(a=f),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Qb(o,t,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new Qb(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Kbe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wbe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qbe(t))return"Blackberry";if(Jbe(t))return"Webos";if(Gbe(t))return"Safari";if((t.includes("chrome/")||Ybe(t))&&!t.includes("edge/"))return"Chrome";if(Xbe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Wbe(e=va()){return/firefox\//i.test(e)}function Gbe(e=va()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ybe(e=va()){return/crios\//i.test(e)}function Kbe(e=va()){return/iemobile/i.test(e)}function Xbe(e=va()){return/android/i.test(e)}function Qbe(e=va()){return/blackberry/i.test(e)}function Jbe(e=va()){return/webos/i.test(e)}function Rq(e=va()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ent(e=va()){var t;return Rq(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function _nt(){return TKe()&&document.documentMode===10}function Zbe(e=va()){return Rq(e)||Xbe(e)||Jbe(e)||Qbe(e)||/windows phone/i.test(e)||Kbe(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function exe(e,t=[]){let n;switch(e){case"Browser":n=xie(va());break;case"Worker":n=`${xie(va())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${M1}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tnt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((s,a)=>{try{const u=t(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cnt(e,t={}){return Xw(e,"GET","/v2/passwordPolicy",kO(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Snt=6;class Ant{constructor(t){var n,r,i,o;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Snt,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dnt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wie(this),this.idTokenSubscription=new wie(this),this.beforeStateQueue=new Tnt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lbe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Jh(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qb.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Vbe(this,{idToken:t}),r=await Qh._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(vd(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!s||s===a)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await YN(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=cnt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vd(this.app))return Promise.reject(u0(this));const n=t?ti(t):null;return n&&xn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&xn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vd(this.app)?Promise.reject(u0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vd(this.app)?Promise.reject(u0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Cnt(this),n=new Ant(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Vw("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wnt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Jh(t)||this._popupRedirectResolver;xn(n,this,"argument-error"),this.redirectPersistenceManager=await Qb.create(this,[Jh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xn(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{s=!0,u()}}else{const u=t.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return xn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=exe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&snt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lS(e){return ti(e)}class wie{constructor(t){this.auth=t,this.observer=null,this.addObserver=RKe(n=>this.observer=n)}get next(){return xn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nq={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function knt(e){Nq=e}function Int(e){return Nq.loadJS(e)}function Rnt(){return Nq.gapiScript}function Nnt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pnt(e,t){const n=Hw(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(kT(o,t??{}))return i;jd(i,"already-initialized")}return n.initialize({options:t})}function Ont(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Fnt(e,t,n){const r=lS(e);xn(r._canInitEmulator,r,"emulator-config-failed"),xn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,o=txe(t),{host:s,port:a}=Mnt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),$nt()}function txe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Mnt(e){const t=txe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Eie(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Eie(s)}}}function Eie(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function $nt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nxe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Xh("not implemented")}_getIdTokenResponse(t){return Xh("not implemented")}_linkToIdToken(t,n){return Xh("not implemented")}_getReauthenticationResolver(t){return Xh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(e,t){return zbe(e,"POST","/v1/accounts:signInWithIdp",kO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lnt="http://localhost";class Gy extends nxe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Gy(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):jd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,o=NC(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Gy(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){const n=this.buildRequest();return Jb(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Jb(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Jb(t,n)}buildRequest(){const t={requestUri:Lnt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=JC(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends Pq{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends cS{constructor(){super("facebook.com")}static credential(t){return Gy._fromParams({providerId:Um.PROVIDER_ID,signInMethod:Um.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Um.credentialFromTaggedObject(t)}static credentialFromError(t){return Um.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Um.credential(t.oauthAccessToken)}catch{return null}}}Um.FACEBOOK_SIGN_IN_METHOD="facebook.com";Um.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends cS{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Gy._fromParams({providerId:Hh.PROVIDER_ID,signInMethod:Hh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Hh.credentialFromTaggedObject(t)}static credentialFromError(t){return Hh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Hh.credential(n,r)}catch{return null}}}Hh.GOOGLE_SIGN_IN_METHOD="google.com";Hh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends cS{constructor(){super("github.com")}static credential(t){return Gy._fromParams({providerId:Vm.PROVIDER_ID,signInMethod:Vm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vm.credentialFromTaggedObject(t)}static credentialFromError(t){return Vm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vm.credential(t.oauthAccessToken)}catch{return null}}}Vm.GITHUB_SIGN_IN_METHOD="github.com";Vm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends cS{constructor(){super("twitter.com")}static credential(t,n){return Gy._fromParams({providerId:Hm.PROVIDER_ID,signInMethod:Hm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Hm.credentialFromTaggedObject(t)}static credentialFromError(t){return Hm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Hm.credential(n,r)}catch{return null}}}Hm.TWITTER_SIGN_IN_METHOD="twitter.com";Hm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bnt(e,t){return zbe(e,"POST","/v1/accounts:signUp",kO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const o=await Qh._fromIdTokenResponse(t,r,i),s=_ie(r);return new _0({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=_ie(r);return new _0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function _ie(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jnt(e){var t;if(vd(e.app))return Promise.reject(u0(e));const n=lS(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new _0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Bnt(n,{returnSecureToken:!0}),i=await _0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN extends rh{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,KN.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new KN(t,n,r,i)}}function rxe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?KN._fromErrorAndOperation(e,o,t,r):o})}async function znt(e,t,n=!1){const r=await zT(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Unt(e,t,n=!1){const{auth:r}=e;if(vd(r.app))return Promise.reject(u0(r));const i="reauthenticate";try{const o=await zT(e,rxe(r,i,t,e),n);xn(o.idToken,r,"internal-error");const s=Iq(o.idToken);xn(s,r,"internal-error");const{sub:a}=s;return xn(e.uid===a,r,"user-mismatch"),_0._forOperation(e,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&jd(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vnt(e,t,n=!1){if(vd(e.app))return Promise.reject(u0(e));const r="signIn",i=await rxe(e,r,t),o=await _0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function Hnt(e,t,n,r){return ti(e).onIdTokenChanged(t,n,r)}function qnt(e,t,n){return ti(e).beforeAuthStateChanged(t,n)}function Wnt(e,t,n,r){return ti(e).onAuthStateChanged(t,n,r)}function Gnt(e){return ti(e).signOut()}const XN="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ixe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(XN,"1"),this.storage.removeItem(XN),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ynt=1e3,Knt=10;class oxe extends ixe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zbe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);_nt()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Knt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Ynt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}oxe.type="LOCAL";const Xnt=oxe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxe extends ixe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}sxe.type="SESSION";const axe=sxe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qnt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new IO(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async l=>l(n.origin,o)),u=await Qnt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}IO.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jnt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const l=Oq("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(){return window}function Znt(e){Cd().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uxe(){return typeof Cd().WorkerGlobalScope<"u"&&typeof Cd().importScripts=="function"}async function ert(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function trt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function nrt(){return uxe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lxe="firebaseLocalStorageDb",rrt=1,QN="firebaseLocalStorage",cxe="fbase_key";class fS{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function RO(e,t){return e.transaction([QN],t?"readwrite":"readonly").objectStore(QN)}function irt(){const e=indexedDB.deleteDatabase(lxe);return new fS(e).toPromise()}function YB(){const e=indexedDB.open(lxe,rrt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(QN,{keyPath:cxe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(QN)?t(r):(r.close(),await irt(),t(await YB()))})})}async function Tie(e,t,n){const r=RO(e,!0).put({[cxe]:t,value:n});return new fS(r).toPromise()}async function ort(e,t){const n=RO(e,!1).get(t),r=await new fS(n).toPromise();return r===void 0?null:r.value}function Cie(e,t){const n=RO(e,!0).delete(t);return new fS(n).toPromise()}const srt=800,art=3;class fxe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await YB(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>art)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uxe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=IO._getInstance(nrt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await ert(),!this.activeServiceWorker)return;this.sender=new Jnt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||trt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await YB();return await Tie(t,XN,"1"),await Cie(t,XN),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tie(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>ort(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cie(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=RO(i,!1).getAll();return new fS(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),srt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fxe.type="LOCAL";const urt=fxe;new uS(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dxe(e,t){return t?Jh(t):(xn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq extends nxe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Jb(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Jb(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Jb(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function lrt(e){return Vnt(e.auth,new Fq(e),e.bypassAuthState)}function crt(e){const{auth:t,user:n}=e;return xn(n,t,"internal-error"),Unt(n,new Fq(e),e.bypassAuthState)}async function frt(e){const{auth:t,user:n}=e;return xn(n,t,"internal-error"),znt(n,new Fq(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return lrt;case"linkViaPopup":case"linkViaRedirect":return frt;case"reauthViaPopup":case"reauthViaRedirect":return crt;default:jd(this.auth,"internal-error")}}resolve(t){Rp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const drt=new uS(2e3,1e4);async function hrt(e,t,n){if(vd(e.app))return Promise.reject(df(e,"operation-not-supported-in-this-environment"));const r=lS(e);ant(e,t,Pq);const i=dxe(r,n);return new Ty(r,"signInViaPopup",t,i).executeNotNull()}class Ty extends hxe{constructor(t,n,r,i,o){super(t,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ty.currentPopupAction&&Ty.currentPopupAction.cancel(),Ty.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return xn(t,this.auth,"internal-error"),t}async onExecution(){Rp(this.filter.length===1,"Popup operations only handle one event");const t=Oq();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(df(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(df(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ty.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(df(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,drt.get())};t()}}Ty.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const prt="pendingRedirect",KI=new Map;class mrt extends hxe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=KI.get(this.auth._key());if(!t){try{const r=await grt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}KI.set(this.auth._key(),t)}return this.bypassAuthState||KI.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function grt(e,t){const n=brt(t),r=vrt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function yrt(e,t){KI.set(e._key(),t)}function vrt(e){return Jh(e._redirectPersistence)}function brt(e){return YI(prt,e.config.apiKey,e.name)}async function xrt(e,t,n=!1){if(vd(e.app))return Promise.reject(u0(e));const r=lS(e),i=dxe(r,t),s=await new mrt(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wrt=10*60*1e3;class Ert{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!_rt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!pxe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(df(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=wrt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sie(t))}saveEventToCache(t){this.cachedEventUids.add(Sie(t)),this.lastProcessedEventTime=Date.now()}}function Sie(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function pxe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function _rt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pxe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Trt(e,t={}){return Xw(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Crt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Srt=/^https?/;async function Art(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Trt(e);for(const n of t)try{if(Drt(n))return}catch{}jd(e,"unauthorized-domain")}function Drt(e){const t=WB(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Srt.test(n))return!1;if(Crt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const krt=new uS(3e4,6e4);function Aie(){const e=Cd().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Irt(e){return new Promise((t,n)=>{var r,i,o;function s(){Aie(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Aie(),n(df(e,"network-request-failed"))},timeout:krt.get()})}if(!((i=(r=Cd().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=Cd().gapi)===null||o===void 0)&&o.load)s();else{const a=Nnt("iframefcb");return Cd()[a]=()=>{gapi.load?s():n(df(e,"network-request-failed"))},Int(`${Rnt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw XI=null,t})}let XI=null;function Rrt(e){return XI=XI||Irt(e),XI}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nrt=new uS(5e3,15e3),Prt="__/auth/iframe",Ort="emulator/auth/iframe",Frt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mrt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $rt(e){const t=e.config;xn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kq(t,Ort):`https://${e.config.authDomain}/${Prt}`,r={apiKey:t.apiKey,appName:e.name,v:M1},i=Mrt.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${JC(r).slice(1)}`}async function Lrt(e){const t=await Rrt(e),n=Cd().gapi;return xn(n,e,"internal-error"),t.open({where:document.body,url:$rt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Frt,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=df(e,"network-request-failed"),a=Cd().setTimeout(()=>{o(s)},Nrt.get());function u(){Cd().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Brt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jrt=500,zrt=600,Urt="_blank",Vrt="http://localhost";class Die{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hrt(e,t,n,r=jrt,i=zrt){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Brt),{width:r.toString(),height:i.toString(),top:o,left:s}),l=va().toLowerCase();n&&(a=Ybe(l)?Urt:n),Wbe(l)&&(t=t||Vrt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,m])=>`${d}${h}=${m},`,"");if(Ent(l)&&a!=="_self")return qrt(t||"",a),new Die(null);const f=window.open(t||"",a,c);xn(f,e,"popup-blocked");try{f.focus()}catch{}return new Die(f)}function qrt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wrt="__/auth/handler",Grt="emulator/auth/handler",Yrt=encodeURIComponent("fac");async function kie(e,t,n,r,i,o){xn(e.config.authDomain,e,"auth-domain-config-required"),xn(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:M1,eventId:i};if(t instanceof Pq){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",IKe(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))s[c]=f}if(t instanceof cS){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(s.scopes=c.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Yrt}=${encodeURIComponent(u)}`:"";return`${Krt(e)}?${JC(a).slice(1)}${l}`}function Krt({config:e}){return e.emulator?kq(e,Grt):`https://${e.authDomain}/${Wrt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8="webStorageSupport";class Xrt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=axe,this._completeRedirectFn=xrt,this._overrideRedirectResult=yrt}async _openPopup(t,n,r,i){var o;Rp((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await kie(t,n,r,WB(),i);return Hrt(t,s,Oq())}async _openRedirect(t,n,r,i){await this._originValidation(t);const o=await kie(t,n,r,WB(),i);return Znt(o),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Rp(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Lrt(t),r=new Ert(t);return n.register("authEvent",i=>(xn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(a8,{type:a8},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[a8];s!==void 0&&n(!!s),jd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Art(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zbe()||Gbe()||Rq()}}const mxe=Xrt;var Iie="@firebase/auth",Rie="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qrt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jrt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zrt(e){Dp(new $d("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;xn(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:exe(e)},l=new Dnt(r,i,o,u);return Ont(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Dp(new $d("auth-internal",t=>{const n=lS(t.getProvider("auth").getImmediate());return(r=>new Qrt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ff(Iie,Rie,Jrt(e)),ff(Iie,Rie,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eit=5*60,tit=P1e("authIdTokenMaxAge")||eit;let Nie=null;const nit=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tit)return;const i=n==null?void 0:n.token;Nie!==i&&(Nie=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JN(e=OH()){const t=Hw(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Pnt(e,{popupRedirectResolver:mxe,persistence:[urt,Xnt,axe]}),r=P1e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=nit(o.toString());qnt(n,s,()=>s(n.currentUser)),Hnt(n,a=>s(a))}}const i=R1e("auth");return i&&Fnt(n,`http://${i}`),n}function rit(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}knt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=df("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",rit().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zrt("Browser");function Z_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var u8={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Pie;function iit(){return Pie||(Pie=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(l,c){if(!i[l]){if(!r[l]){var f=typeof Z_=="function"&&Z_;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(m){var p=r[l][1][m];return s(p||m)},h,h.exports,n,r,i,o)}return i[l].exports}for(var a=typeof Z_=="function"&&Z_,u=0;u<o.length;u++)s(o[u]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var u=0,l=new s(m),c=o.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=m,a=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var g=o.document.createElement("script");g.onreadystatechange=function(){m(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:a=function(){setTimeout(m,0)};var d,h=[];function m(){d=!0;for(var g,v,b=h.length;b;){for(v=h,h=[],g=-1;++g<b;)v[g]();b=h.length}d=!1}r.exports=p;function p(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,_!==s&&p(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,T){if(typeof _!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(s);if(this.state!==c){var D=this.state===l?_:T;h(S,D,this.outcome)}else this.queue.push(new d(S,_,T));return S};function d(_,T,S){this.promise=_,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},d.prototype.otherCallFulfilled=function(_){h(this.promise,this.onFulfilled,_)},d.prototype.callRejected=function(_){a.reject(this.promise,_)},d.prototype.otherCallRejected=function(_){h(this.promise,this.onRejected,_)};function h(_,T,S){o(function(){var D;try{D=T(S)}catch(k){return a.reject(_,k)}D===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,D)})}a.resolve=function(_,T){var S=g(m,T);if(S.status==="error")return a.reject(_,S.value);var D=S.value;if(D)p(_,D);else{_.state=l,_.outcome=T;for(var k=-1,R=_.queue.length;++k<R;)_.queue[k].callFulfilled(T)}return _},a.reject=function(_,T){_.state=u,_.outcome=T;for(var S=-1,D=_.queue.length;++S<D;)_.queue[S].callRejected(T);return _};function m(_){var T=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof T=="function")return function(){T.apply(_,arguments)}}function p(_,T){var S=!1;function D(M){S||(S=!0,a.reject(_,M))}function k(M){S||(S=!0,a.resolve(_,M))}function R(){T(k,D)}var O=g(R);O.status==="error"&&D(O.value)}function g(_,T){var S={};try{S.value=_(T),S.status="success"}catch(D){S.status="error",S.value=D}return S}f.resolve=v;function v(_){return _ instanceof this?_:a.resolve(new this(s),_)}f.reject=b;function b(_){var T=new this(s);return a.reject(T,_)}f.all=w;function w(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,D=!1;if(!S)return this.resolve([]);for(var k=new Array(S),R=0,O=-1,M=new this(s);++O<S;)F(_[O],O);return M;function F(L,H){T.resolve(L).then(V,function(Q){D||(D=!0,a.reject(M,Q))});function V(Q){k[H]=Q,++R===S&&!D&&(D=!0,a.resolve(M,k))}}}f.race=E;function E(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,D=!1;if(!S)return this.resolve([]);for(var k=-1,R=new this(s);++k<S;)O(_[k]);return R;function O(M){T.resolve(M).then(function(F){D||(D=!0,a.resolve(R,F))},function(F){D||(D=!0,a.reject(R,F))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re};function s(re,xe){if(!(re instanceof xe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var re=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),xe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!re||xe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(re,xe){re=re||[],xe=xe||{};try{return new Blob(re,xe)}catch(Se){if(Se.name!=="TypeError")throw Se;for(var ce=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,De=new ce,Ie=0;Ie<re.length;Ie+=1)De.append(re[Ie]);return De.getBlob(xe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(re,xe){xe&&re.then(function(ce){xe(null,ce)},function(ce){xe(ce)})}function h(re,xe,ce){typeof xe=="function"&&re.then(xe),typeof ce=="function"&&re.catch(ce)}function m(re){return typeof re!="string"&&(console.warn(re+" used as a key, but it is not a string."),re=String(re)),re}function p(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",v=void 0,b={},w=Object.prototype.toString,E="readonly",_="readwrite";function T(re){for(var xe=re.length,ce=new ArrayBuffer(xe),De=new Uint8Array(ce),Ie=0;Ie<xe;Ie++)De[Ie]=re.charCodeAt(Ie);return ce}function S(re){return new f(function(xe){var ce=re.transaction(g,_),De=c([""]);ce.objectStore(g).put(De,"key"),ce.onabort=function(Ie){Ie.preventDefault(),Ie.stopPropagation(),xe(!1)},ce.oncomplete=function(){var Ie=navigator.userAgent.match(/Chrome\/(\d+)/),Se=navigator.userAgent.match(/Edge\//);xe(Se||!Ie||parseInt(Ie[1],10)>=43)}}).catch(function(){return!1})}function D(re){return typeof v=="boolean"?f.resolve(v):S(re).then(function(xe){return v=xe,v})}function k(re){var xe=b[re.name],ce={};ce.promise=new f(function(De,Ie){ce.resolve=De,ce.reject=Ie}),xe.deferredOperations.push(ce),xe.dbReady?xe.dbReady=xe.dbReady.then(function(){return ce.promise}):xe.dbReady=ce.promise}function R(re){var xe=b[re.name],ce=xe.deferredOperations.pop();if(ce)return ce.resolve(),ce.promise}function O(re,xe){var ce=b[re.name],De=ce.deferredOperations.pop();if(De)return De.reject(xe),De.promise}function M(re,xe){return new f(function(ce,De){if(b[re.name]=b[re.name]||q(),re.db)if(xe)k(re),re.db.close();else return ce(re.db);var Ie=[re.name];xe&&Ie.push(re.version);var Se=u.open.apply(u,Ie);xe&&(Se.onupgradeneeded=function(Qe){var ot=Se.result;try{ot.createObjectStore(re.storeName),Qe.oldVersion<=1&&ot.createObjectStore(g)}catch(ut){if(ut.name==="ConstraintError")console.warn('The database "'+re.name+'" has been upgraded from version '+Qe.oldVersion+" to version "+Qe.newVersion+', but the storage "'+re.storeName+'" already exists.');else throw ut}}),Se.onerror=function(Qe){Qe.preventDefault(),De(Se.error)},Se.onsuccess=function(){var Qe=Se.result;Qe.onversionchange=function(ot){ot.target.close()},ce(Qe),R(re)}})}function F(re){return M(re,!1)}function L(re){return M(re,!0)}function H(re,xe){if(!re.db)return!0;var ce=!re.db.objectStoreNames.contains(re.storeName),De=re.version<re.db.version,Ie=re.version>re.db.version;if(De&&(re.version!==xe&&console.warn('The database "'+re.name+`" can't be downgraded from version `+re.db.version+" to version "+re.version+"."),re.version=re.db.version),Ie||ce){if(ce){var Se=re.db.version+1;Se>re.version&&(re.version=Se)}return!0}return!1}function V(re){return new f(function(xe,ce){var De=new FileReader;De.onerror=ce,De.onloadend=function(Ie){var Se=btoa(Ie.target.result||"");xe({__local_forage_encoded_blob:!0,data:Se,type:re.type})},De.readAsBinaryString(re)})}function Q(re){var xe=T(atob(re.data));return c([xe],{type:re.type})}function K(re){return re&&re.__local_forage_encoded_blob}function Z(re){var xe=this,ce=xe._initReady().then(function(){var De=b[xe._dbInfo.name];if(De&&De.dbReady)return De.dbReady});return h(ce,re,re),ce}function U(re){k(re);for(var xe=b[re.name],ce=xe.forages,De=0;De<ce.length;De++){var Ie=ce[De];Ie._dbInfo.db&&(Ie._dbInfo.db.close(),Ie._dbInfo.db=null)}return re.db=null,F(re).then(function(Se){return re.db=Se,H(re)?L(re):Se}).then(function(Se){re.db=xe.db=Se;for(var Qe=0;Qe<ce.length;Qe++)ce[Qe]._dbInfo.db=Se}).catch(function(Se){throw O(re,Se),Se})}function B(re,xe,ce,De){De===void 0&&(De=1);try{var Ie=re.db.transaction(re.storeName,xe);ce(null,Ie)}catch(Se){if(De>0&&(!re.db||Se.name==="InvalidStateError"||Se.name==="NotFoundError"))return f.resolve().then(function(){if(!re.db||Se.name==="NotFoundError"&&!re.db.objectStoreNames.contains(re.storeName)&&re.version<=re.db.version)return re.db&&(re.version=re.db.version+1),L(re)}).then(function(){return U(re).then(function(){B(re,xe,ce,De-1)})}).catch(ce);ce(Se)}}function q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(re){var xe=this,ce={db:null};if(re)for(var De in re)ce[De]=re[De];var Ie=b[ce.name];Ie||(Ie=q(),b[ce.name]=Ie),Ie.forages.push(xe),xe._initReady||(xe._initReady=xe.ready,xe.ready=Z);var Se=[];function Qe(){return f.resolve()}for(var ot=0;ot<Ie.forages.length;ot++){var ut=Ie.forages[ot];ut!==xe&&Se.push(ut._initReady().catch(Qe))}var at=Ie.forages.slice(0);return f.all(Se).then(function(){return ce.db=Ie.db,F(ce)}).then(function(vt){return ce.db=vt,H(ce,xe._defaultConfig.version)?L(ce):vt}).then(function(vt){ce.db=Ie.db=vt,xe._dbInfo=ce;for(var Dt=0;Dt<at.length;Dt++){var dn=at[Dt];dn!==xe&&(dn._dbInfo.db=ce.db,dn._dbInfo.version=ce.version)}})}function G(re,xe){var ce=this;re=m(re);var De=new f(function(Ie,Se){ce.ready().then(function(){B(ce._dbInfo,E,function(Qe,ot){if(Qe)return Se(Qe);try{var ut=ot.objectStore(ce._dbInfo.storeName),at=ut.get(re);at.onsuccess=function(){var vt=at.result;vt===void 0&&(vt=null),K(vt)&&(vt=Q(vt)),Ie(vt)},at.onerror=function(){Se(at.error)}}catch(vt){Se(vt)}})}).catch(Se)});return d(De,xe),De}function X(re,xe){var ce=this,De=new f(function(Ie,Se){ce.ready().then(function(){B(ce._dbInfo,E,function(Qe,ot){if(Qe)return Se(Qe);try{var ut=ot.objectStore(ce._dbInfo.storeName),at=ut.openCursor(),vt=1;at.onsuccess=function(){var Dt=at.result;if(Dt){var dn=Dt.value;K(dn)&&(dn=Q(dn));var Wt=re(dn,Dt.key,vt++);Wt!==void 0?Ie(Wt):Dt.continue()}else Ie()},at.onerror=function(){Se(at.error)}}catch(Dt){Se(Dt)}})}).catch(Se)});return d(De,xe),De}function ne(re,xe,ce){var De=this;re=m(re);var Ie=new f(function(Se,Qe){var ot;De.ready().then(function(){return ot=De._dbInfo,w.call(xe)==="[object Blob]"?D(ot.db).then(function(ut){return ut?xe:V(xe)}):xe}).then(function(ut){B(De._dbInfo,_,function(at,vt){if(at)return Qe(at);try{var Dt=vt.objectStore(De._dbInfo.storeName);ut===null&&(ut=void 0);var dn=Dt.put(ut,re);vt.oncomplete=function(){ut===void 0&&(ut=null),Se(ut)},vt.onabort=vt.onerror=function(){var Wt=dn.error?dn.error:dn.transaction.error;Qe(Wt)}}catch(Wt){Qe(Wt)}})}).catch(Qe)});return d(Ie,ce),Ie}function ge(re,xe){var ce=this;re=m(re);var De=new f(function(Ie,Se){ce.ready().then(function(){B(ce._dbInfo,_,function(Qe,ot){if(Qe)return Se(Qe);try{var ut=ot.objectStore(ce._dbInfo.storeName),at=ut.delete(re);ot.oncomplete=function(){Ie()},ot.onerror=function(){Se(at.error)},ot.onabort=function(){var vt=at.error?at.error:at.transaction.error;Se(vt)}}catch(vt){Se(vt)}})}).catch(Se)});return d(De,xe),De}function me(re){var xe=this,ce=new f(function(De,Ie){xe.ready().then(function(){B(xe._dbInfo,_,function(Se,Qe){if(Se)return Ie(Se);try{var ot=Qe.objectStore(xe._dbInfo.storeName),ut=ot.clear();Qe.oncomplete=function(){De()},Qe.onabort=Qe.onerror=function(){var at=ut.error?ut.error:ut.transaction.error;Ie(at)}}catch(at){Ie(at)}})}).catch(Ie)});return d(ce,re),ce}function ye(re){var xe=this,ce=new f(function(De,Ie){xe.ready().then(function(){B(xe._dbInfo,E,function(Se,Qe){if(Se)return Ie(Se);try{var ot=Qe.objectStore(xe._dbInfo.storeName),ut=ot.count();ut.onsuccess=function(){De(ut.result)},ut.onerror=function(){Ie(ut.error)}}catch(at){Ie(at)}})}).catch(Ie)});return d(ce,re),ce}function we(re,xe){var ce=this,De=new f(function(Ie,Se){if(re<0){Ie(null);return}ce.ready().then(function(){B(ce._dbInfo,E,function(Qe,ot){if(Qe)return Se(Qe);try{var ut=ot.objectStore(ce._dbInfo.storeName),at=!1,vt=ut.openKeyCursor();vt.onsuccess=function(){var Dt=vt.result;if(!Dt){Ie(null);return}re===0||at?Ie(Dt.key):(at=!0,Dt.advance(re))},vt.onerror=function(){Se(vt.error)}}catch(Dt){Se(Dt)}})}).catch(Se)});return d(De,xe),De}function fe(re){var xe=this,ce=new f(function(De,Ie){xe.ready().then(function(){B(xe._dbInfo,E,function(Se,Qe){if(Se)return Ie(Se);try{var ot=Qe.objectStore(xe._dbInfo.storeName),ut=ot.openKeyCursor(),at=[];ut.onsuccess=function(){var vt=ut.result;if(!vt){De(at);return}at.push(vt.key),vt.continue()},ut.onerror=function(){Ie(ut.error)}}catch(vt){Ie(vt)}})}).catch(Ie)});return d(ce,re),ce}function se(re,xe){xe=p.apply(this,arguments);var ce=this.config();re=typeof re!="function"&&re||{},re.name||(re.name=re.name||ce.name,re.storeName=re.storeName||ce.storeName);var De=this,Ie;if(!re.name)Ie=f.reject("Invalid arguments");else{var Se=re.name===ce.name&&De._dbInfo.db,Qe=Se?f.resolve(De._dbInfo.db):F(re).then(function(ot){var ut=b[re.name],at=ut.forages;ut.db=ot;for(var vt=0;vt<at.length;vt++)at[vt]._dbInfo.db=ot;return ot});re.storeName?Ie=Qe.then(function(ot){if(ot.objectStoreNames.contains(re.storeName)){var ut=ot.version+1;k(re);var at=b[re.name],vt=at.forages;ot.close();for(var Dt=0;Dt<vt.length;Dt++){var dn=vt[Dt];dn._dbInfo.db=null,dn._dbInfo.version=ut}var Wt=new f(function(Pn,Yt){var dr=u.open(re.name,ut);dr.onerror=function(Ao){var ou=dr.result;ou.close(),Yt(Ao)},dr.onupgradeneeded=function(){var Ao=dr.result;Ao.deleteObjectStore(re.storeName)},dr.onsuccess=function(){var Ao=dr.result;Ao.close(),Pn(Ao)}});return Wt.then(function(Pn){at.db=Pn;for(var Yt=0;Yt<vt.length;Yt++){var dr=vt[Yt];dr._dbInfo.db=Pn,R(dr._dbInfo)}}).catch(function(Pn){throw(O(re,Pn)||f.resolve()).catch(function(){}),Pn})}}):Ie=Qe.then(function(ot){k(re);var ut=b[re.name],at=ut.forages;ot.close();for(var vt=0;vt<at.length;vt++){var Dt=at[vt];Dt._dbInfo.db=null}var dn=new f(function(Wt,Pn){var Yt=u.deleteDatabase(re.name);Yt.onerror=function(){var dr=Yt.result;dr&&dr.close(),Pn(Yt.error)},Yt.onblocked=function(){console.warn('dropInstance blocked for database "'+re.name+'" until all open connections are closed')},Yt.onsuccess=function(){var dr=Yt.result;dr&&dr.close(),Wt(dr)}});return dn.then(function(Wt){ut.db=Wt;for(var Pn=0;Pn<at.length;Pn++){var Yt=at[Pn];R(Yt._dbInfo)}}).catch(function(Wt){throw(O(re,Wt)||f.resolve()).catch(function(){}),Wt})})}return d(Ie,xe),Ie}var Ce={_driver:"asyncStorage",_initStorage:z,_support:l(),iterate:X,getItem:G,setItem:ne,removeItem:ge,clear:me,length:ye,key:we,keys:fe,dropInstance:se};function Ae(){return typeof openDatabase=="function"}var Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xe="~~local_forage_type~",Le=/^~~local_forage_type~([^~]+)~/,Ge="__lfsc__:",et=Ge.length,Et="arbf",ht="blob",xt="si08",te="ui08",le="uic8",be="si16",ae="si32",pe="ur16",Ee="ui32",$e="fl32",Ne="fl64",Ze=et+Et.length,Ke=Object.prototype.toString;function It(re){var xe=re.length*.75,ce=re.length,De,Ie=0,Se,Qe,ot,ut;re[re.length-1]==="="&&(xe--,re[re.length-2]==="="&&xe--);var at=new ArrayBuffer(xe),vt=new Uint8Array(at);for(De=0;De<ce;De+=4)Se=Ue.indexOf(re[De]),Qe=Ue.indexOf(re[De+1]),ot=Ue.indexOf(re[De+2]),ut=Ue.indexOf(re[De+3]),vt[Ie++]=Se<<2|Qe>>4,vt[Ie++]=(Qe&15)<<4|ot>>2,vt[Ie++]=(ot&3)<<6|ut&63;return at}function zt(re){var xe=new Uint8Array(re),ce="",De;for(De=0;De<xe.length;De+=3)ce+=Ue[xe[De]>>2],ce+=Ue[(xe[De]&3)<<4|xe[De+1]>>4],ce+=Ue[(xe[De+1]&15)<<2|xe[De+2]>>6],ce+=Ue[xe[De+2]&63];return xe.length%3===2?ce=ce.substring(0,ce.length-1)+"=":xe.length%3===1&&(ce=ce.substring(0,ce.length-2)+"=="),ce}function Pt(re,xe){var ce="";if(re&&(ce=Ke.call(re)),re&&(ce==="[object ArrayBuffer]"||re.buffer&&Ke.call(re.buffer)==="[object ArrayBuffer]")){var De,Ie=Ge;re instanceof ArrayBuffer?(De=re,Ie+=Et):(De=re.buffer,ce==="[object Int8Array]"?Ie+=xt:ce==="[object Uint8Array]"?Ie+=te:ce==="[object Uint8ClampedArray]"?Ie+=le:ce==="[object Int16Array]"?Ie+=be:ce==="[object Uint16Array]"?Ie+=pe:ce==="[object Int32Array]"?Ie+=ae:ce==="[object Uint32Array]"?Ie+=Ee:ce==="[object Float32Array]"?Ie+=$e:ce==="[object Float64Array]"?Ie+=Ne:xe(new Error("Failed to get type for BinaryArray"))),xe(Ie+zt(De))}else if(ce==="[object Blob]"){var Se=new FileReader;Se.onload=function(){var Qe=Xe+re.type+"~"+zt(this.result);xe(Ge+ht+Qe)},Se.readAsArrayBuffer(re)}else try{xe(JSON.stringify(re))}catch(Qe){console.error("Couldn't convert value into a JSON string: ",re),xe(null,Qe)}}function en(re){if(re.substring(0,et)!==Ge)return JSON.parse(re);var xe=re.substring(Ze),ce=re.substring(et,Ze),De;if(ce===ht&&Le.test(xe)){var Ie=xe.match(Le);De=Ie[1],xe=xe.substring(Ie[0].length)}var Se=It(xe);switch(ce){case Et:return Se;case ht:return c([Se],{type:De});case xt:return new Int8Array(Se);case te:return new Uint8Array(Se);case le:return new Uint8ClampedArray(Se);case be:return new Int16Array(Se);case pe:return new Uint16Array(Se);case ae:return new Int32Array(Se);case Ee:return new Uint32Array(Se);case $e:return new Float32Array(Se);case Ne:return new Float64Array(Se);default:throw new Error("Unkown type: "+ce)}}var kn={serialize:Pt,deserialize:en,stringToBuffer:It,bufferToString:zt};function pn(re,xe,ce,De){re.executeSql("CREATE TABLE IF NOT EXISTS "+xe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ce,De)}function Rr(re){var xe=this,ce={db:null};if(re)for(var De in re)ce[De]=typeof re[De]!="string"?re[De].toString():re[De];var Ie=new f(function(Se,Qe){try{ce.db=openDatabase(ce.name,String(ce.version),ce.description,ce.size)}catch(ot){return Qe(ot)}ce.db.transaction(function(ot){pn(ot,ce,function(){xe._dbInfo=ce,Se()},function(ut,at){Qe(at)})},Qe)});return ce.serializer=kn,Ie}function br(re,xe,ce,De,Ie,Se){re.executeSql(ce,De,Ie,function(Qe,ot){ot.code===ot.SYNTAX_ERR?Qe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[xe.storeName],function(ut,at){at.rows.length?Se(ut,ot):pn(ut,xe,function(){ut.executeSql(ce,De,Ie,Se)},Se)},Se):Se(Qe,ot)},Se)}function xr(re,xe){var ce=this;re=m(re);var De=new f(function(Ie,Se){ce.ready().then(function(){var Qe=ce._dbInfo;Qe.db.transaction(function(ot){br(ot,Qe,"SELECT * FROM "+Qe.storeName+" WHERE key = ? LIMIT 1",[re],function(ut,at){var vt=at.rows.length?at.rows.item(0).value:null;vt&&(vt=Qe.serializer.deserialize(vt)),Ie(vt)},function(ut,at){Se(at)})})}).catch(Se)});return d(De,xe),De}function Ei(re,xe){var ce=this,De=new f(function(Ie,Se){ce.ready().then(function(){var Qe=ce._dbInfo;Qe.db.transaction(function(ot){br(ot,Qe,"SELECT * FROM "+Qe.storeName,[],function(ut,at){for(var vt=at.rows,Dt=vt.length,dn=0;dn<Dt;dn++){var Wt=vt.item(dn),Pn=Wt.value;if(Pn&&(Pn=Qe.serializer.deserialize(Pn)),Pn=re(Pn,Wt.key,dn+1),Pn!==void 0){Ie(Pn);return}}Ie()},function(ut,at){Se(at)})})}).catch(Se)});return d(De,xe),De}function Lr(re,xe,ce,De){var Ie=this;re=m(re);var Se=new f(function(Qe,ot){Ie.ready().then(function(){xe===void 0&&(xe=null);var ut=xe,at=Ie._dbInfo;at.serializer.serialize(xe,function(vt,Dt){Dt?ot(Dt):at.db.transaction(function(dn){br(dn,at,"INSERT OR REPLACE INTO "+at.storeName+" (key, value) VALUES (?, ?)",[re,vt],function(){Qe(ut)},function(Wt,Pn){ot(Pn)})},function(dn){if(dn.code===dn.QUOTA_ERR){if(De>0){Qe(Lr.apply(Ie,[re,ut,ce,De-1]));return}ot(dn)}})})}).catch(ot)});return d(Se,ce),Se}function wr(re,xe,ce){return Lr.apply(this,[re,xe,ce,1])}function Ea(re,xe){var ce=this;re=m(re);var De=new f(function(Ie,Se){ce.ready().then(function(){var Qe=ce._dbInfo;Qe.db.transaction(function(ot){br(ot,Qe,"DELETE FROM "+Qe.storeName+" WHERE key = ?",[re],function(){Ie()},function(ut,at){Se(at)})})}).catch(Se)});return d(De,xe),De}function ps(re){var xe=this,ce=new f(function(De,Ie){xe.ready().then(function(){var Se=xe._dbInfo;Se.db.transaction(function(Qe){br(Qe,Se,"DELETE FROM "+Se.storeName,[],function(){De()},function(ot,ut){Ie(ut)})})}).catch(Ie)});return d(ce,re),ce}function _a(re){var xe=this,ce=new f(function(De,Ie){xe.ready().then(function(){var Se=xe._dbInfo;Se.db.transaction(function(Qe){br(Qe,Se,"SELECT COUNT(key) as c FROM "+Se.storeName,[],function(ot,ut){var at=ut.rows.item(0).c;De(at)},function(ot,ut){Ie(ut)})})}).catch(Ie)});return d(ce,re),ce}function Eo(re,xe){var ce=this,De=new f(function(Ie,Se){ce.ready().then(function(){var Qe=ce._dbInfo;Qe.db.transaction(function(ot){br(ot,Qe,"SELECT key FROM "+Qe.storeName+" WHERE id = ? LIMIT 1",[re+1],function(ut,at){var vt=at.rows.length?at.rows.item(0).key:null;Ie(vt)},function(ut,at){Se(at)})})}).catch(Se)});return d(De,xe),De}function Fn(re){var xe=this,ce=new f(function(De,Ie){xe.ready().then(function(){var Se=xe._dbInfo;Se.db.transaction(function(Qe){br(Qe,Se,"SELECT key FROM "+Se.storeName,[],function(ot,ut){for(var at=[],vt=0;vt<ut.rows.length;vt++)at.push(ut.rows.item(vt).key);De(at)},function(ot,ut){Ie(ut)})})}).catch(Ie)});return d(ce,re),ce}function Kn(re){return new f(function(xe,ce){re.transaction(function(De){De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ie,Se){for(var Qe=[],ot=0;ot<Se.rows.length;ot++)Qe.push(Se.rows.item(ot).name);xe({db:re,storeNames:Qe})},function(Ie,Se){ce(Se)})},function(De){ce(De)})})}function _o(re,xe){xe=p.apply(this,arguments);var ce=this.config();re=typeof re!="function"&&re||{},re.name||(re.name=re.name||ce.name,re.storeName=re.storeName||ce.storeName);var De=this,Ie;return re.name?Ie=new f(function(Se){var Qe;re.name===ce.name?Qe=De._dbInfo.db:Qe=openDatabase(re.name,"","",0),re.storeName?Se({db:Qe,storeNames:[re.storeName]}):Se(Kn(Qe))}).then(function(Se){return new f(function(Qe,ot){Se.db.transaction(function(ut){function at(Wt){return new f(function(Pn,Yt){ut.executeSql("DROP TABLE IF EXISTS "+Wt,[],function(){Pn()},function(dr,Ao){Yt(Ao)})})}for(var vt=[],Dt=0,dn=Se.storeNames.length;Dt<dn;Dt++)vt.push(at(Se.storeNames[Dt]));f.all(vt).then(function(){Qe()}).catch(function(Wt){ot(Wt)})},function(ut){ot(ut)})})}):Ie=f.reject("Invalid arguments"),d(Ie,xe),Ie}var qn={_driver:"webSQLStorage",_initStorage:Rr,_support:Ae(),iterate:Ei,getItem:xr,setItem:wr,removeItem:Ea,clear:ps,length:_a,key:Eo,keys:Fn,dropInstance:_o};function Kr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oo(re,xe){var ce=re.name+"/";return re.storeName!==xe.storeName&&(ce+=re.storeName+"/"),ce}function Fi(){var re="_localforage_support_test";try{return localStorage.setItem(re,!0),localStorage.removeItem(re),!1}catch{return!0}}function To(){return!Fi()||localStorage.length>0}function Vu(re){var xe=this,ce={};if(re)for(var De in re)ce[De]=re[De];return ce.keyPrefix=oo(re,xe._defaultConfig),To()?(xe._dbInfo=ce,ce.serializer=kn,f.resolve()):f.reject()}function $l(re){var xe=this,ce=xe.ready().then(function(){for(var De=xe._dbInfo.keyPrefix,Ie=localStorage.length-1;Ie>=0;Ie--){var Se=localStorage.key(Ie);Se.indexOf(De)===0&&localStorage.removeItem(Se)}});return d(ce,re),ce}function iu(re,xe){var ce=this;re=m(re);var De=ce.ready().then(function(){var Ie=ce._dbInfo,Se=localStorage.getItem(Ie.keyPrefix+re);return Se&&(Se=Ie.serializer.deserialize(Se)),Se});return d(De,xe),De}function Hu(re,xe){var ce=this,De=ce.ready().then(function(){for(var Ie=ce._dbInfo,Se=Ie.keyPrefix,Qe=Se.length,ot=localStorage.length,ut=1,at=0;at<ot;at++){var vt=localStorage.key(at);if(vt.indexOf(Se)===0){var Dt=localStorage.getItem(vt);if(Dt&&(Dt=Ie.serializer.deserialize(Dt)),Dt=re(Dt,vt.substring(Qe),ut++),Dt!==void 0)return Dt}}});return d(De,xe),De}function bn(re,xe){var ce=this,De=ce.ready().then(function(){var Ie=ce._dbInfo,Se;try{Se=localStorage.key(re)}catch{Se=null}return Se&&(Se=Se.substring(Ie.keyPrefix.length)),Se});return d(De,xe),De}function ms(re){var xe=this,ce=xe.ready().then(function(){for(var De=xe._dbInfo,Ie=localStorage.length,Se=[],Qe=0;Qe<Ie;Qe++){var ot=localStorage.key(Qe);ot.indexOf(De.keyPrefix)===0&&Se.push(ot.substring(De.keyPrefix.length))}return Se});return d(ce,re),ce}function so(re){var xe=this,ce=xe.keys().then(function(De){return De.length});return d(ce,re),ce}function qu(re,xe){var ce=this;re=m(re);var De=ce.ready().then(function(){var Ie=ce._dbInfo;localStorage.removeItem(Ie.keyPrefix+re)});return d(De,xe),De}function Wu(re,xe,ce){var De=this;re=m(re);var Ie=De.ready().then(function(){xe===void 0&&(xe=null);var Se=xe;return new f(function(Qe,ot){var ut=De._dbInfo;ut.serializer.serialize(xe,function(at,vt){if(vt)ot(vt);else try{localStorage.setItem(ut.keyPrefix+re,at),Qe(Se)}catch(Dt){(Dt.name==="QuotaExceededError"||Dt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ot(Dt),ot(Dt)}})})});return d(Ie,ce),Ie}function Ll(re,xe){if(xe=p.apply(this,arguments),re=typeof re!="function"&&re||{},!re.name){var ce=this.config();re.name=re.name||ce.name,re.storeName=re.storeName||ce.storeName}var De=this,Ie;return re.name?Ie=new f(function(Se){re.storeName?Se(oo(re,De._defaultConfig)):Se(re.name+"/")}).then(function(Se){for(var Qe=localStorage.length-1;Qe>=0;Qe--){var ot=localStorage.key(Qe);ot.indexOf(Se)===0&&localStorage.removeItem(ot)}}):Ie=f.reject("Invalid arguments"),d(Ie,xe),Ie}var Bl={_driver:"localStorageWrapper",_initStorage:Vu,_support:Kr(),iterate:Hu,getItem:iu,setItem:Wu,removeItem:qu,clear:$l,length:so,key:bn,keys:ms,dropInstance:Ll},Gu=function(xe,ce){return xe===ce||typeof xe=="number"&&typeof ce=="number"&&isNaN(xe)&&isNaN(ce)},Vf=function(xe,ce){for(var De=xe.length,Ie=0;Ie<De;){if(Gu(xe[Ie],ce))return!0;Ie++}return!1},gs=Array.isArray||function(re){return Object.prototype.toString.call(re)==="[object Array]"},Ft={},di={},Yi={INDEXEDDB:Ce,WEBSQL:qn,LOCALSTORAGE:Bl},Ho=[Yi.INDEXEDDB._driver,Yi.WEBSQL._driver,Yi.LOCALSTORAGE._driver],ri=["dropInstance"],Yu=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ri),sm={description:"",driver:Ho.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function jl(re,xe){re[xe]=function(){var ce=arguments;return re.ready().then(function(){return re[xe].apply(re,ce)})}}function Co(){for(var re=1;re<arguments.length;re++){var xe=arguments[re];if(xe)for(var ce in xe)xe.hasOwnProperty(ce)&&(gs(xe[ce])?arguments[0][ce]=xe[ce].slice():arguments[0][ce]=xe[ce])}return arguments[0]}var am=function(){function re(xe){s(this,re);for(var ce in Yi)if(Yi.hasOwnProperty(ce)){var De=Yi[ce],Ie=De._driver;this[ce]=Ie,Ft[Ie]||this.defineDriver(De)}this._defaultConfig=Co({},sm),this._config=Co({},this._defaultConfig,xe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return re.prototype.config=function(ce){if((typeof ce>"u"?"undefined":o(ce))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var De in ce){if(De==="storeName"&&(ce[De]=ce[De].replace(/\W/g,"_")),De==="version"&&typeof ce[De]!="number")return new Error("Database version must be a number.");this._config[De]=ce[De]}return"driver"in ce&&ce.driver?this.setDriver(this._config.driver):!0}else return typeof ce=="string"?this._config[ce]:this._config},re.prototype.defineDriver=function(ce,De,Ie){var Se=new f(function(Qe,ot){try{var ut=ce._driver,at=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ce._driver){ot(at);return}for(var vt=Yu.concat("_initStorage"),Dt=0,dn=vt.length;Dt<dn;Dt++){var Wt=vt[Dt],Pn=!Vf(ri,Wt);if((Pn||ce[Wt])&&typeof ce[Wt]!="function"){ot(at);return}}var Yt=function(){for(var ou=function(ys){return function(){var _i=new Error("Method "+ys+" is not implemented by the current driver"),qo=f.reject(_i);return d(qo,arguments[arguments.length-1]),qo}},zl=0,um=ri.length;zl<um;zl++){var Hf=ri[zl];ce[Hf]||(ce[Hf]=ou(Hf))}};Yt();var dr=function(ou){Ft[ut]&&console.info("Redefining LocalForage driver: "+ut),Ft[ut]=ce,di[ut]=ou,Qe()};"_support"in ce?ce._support&&typeof ce._support=="function"?ce._support().then(dr,ot):dr(!!ce._support):dr(!0)}catch(Ao){ot(Ao)}});return h(Se,De,Ie),Se},re.prototype.driver=function(){return this._driver||null},re.prototype.getDriver=function(ce,De,Ie){var Se=Ft[ce]?f.resolve(Ft[ce]):f.reject(new Error("Driver not found."));return h(Se,De,Ie),Se},re.prototype.getSerializer=function(ce){var De=f.resolve(kn);return h(De,ce),De},re.prototype.ready=function(ce){var De=this,Ie=De._driverSet.then(function(){return De._ready===null&&(De._ready=De._initDriver()),De._ready});return h(Ie,ce,ce),Ie},re.prototype.setDriver=function(ce,De,Ie){var Se=this;gs(ce)||(ce=[ce]);var Qe=this._getSupportedDrivers(ce);function ot(){Se._config.driver=Se.driver()}function ut(Dt){return Se._extend(Dt),ot(),Se._ready=Se._initStorage(Se._config),Se._ready}function at(Dt){return function(){var dn=0;function Wt(){for(;dn<Dt.length;){var Pn=Dt[dn];return dn++,Se._dbInfo=null,Se._ready=null,Se.getDriver(Pn).then(ut).catch(Wt)}ot();var Yt=new Error("No available storage method found.");return Se._driverSet=f.reject(Yt),Se._driverSet}return Wt()}}var vt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=vt.then(function(){var Dt=Qe[0];return Se._dbInfo=null,Se._ready=null,Se.getDriver(Dt).then(function(dn){Se._driver=dn._driver,ot(),Se._wrapLibraryMethodsWithReady(),Se._initDriver=at(Qe)})}).catch(function(){ot();var Dt=new Error("No available storage method found.");return Se._driverSet=f.reject(Dt),Se._driverSet}),h(this._driverSet,De,Ie),this._driverSet},re.prototype.supports=function(ce){return!!di[ce]},re.prototype._extend=function(ce){Co(this,ce)},re.prototype._getSupportedDrivers=function(ce){for(var De=[],Ie=0,Se=ce.length;Ie<Se;Ie++){var Qe=ce[Ie];this.supports(Qe)&&De.push(Qe)}return De},re.prototype._wrapLibraryMethodsWithReady=function(){for(var ce=0,De=Yu.length;ce<De;ce++)jl(this,Yu[ce])},re.prototype.createInstance=function(ce){return new re(ce)},re}(),So=new am;r.exports=So},{3:3}]},{},[4])(4)})}(u8)),u8.exports}var oit=iit();const Sb=Fl(oit),_s=[];for(let e=0;e<256;++e)_s.push((e+256).toString(16).slice(1));function sit(e,t=0){return(_s[e[t+0]]+_s[e[t+1]]+_s[e[t+2]]+_s[e[t+3]]+"-"+_s[e[t+4]]+_s[e[t+5]]+"-"+_s[e[t+6]]+_s[e[t+7]]+"-"+_s[e[t+8]]+_s[e[t+9]]+"-"+_s[e[t+10]]+_s[e[t+11]]+_s[e[t+12]]+_s[e[t+13]]+_s[e[t+14]]+_s[e[t+15]]).toLowerCase()}let l8;const ait=new Uint8Array(16);function uit(){if(!l8){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l8=crypto.getRandomValues.bind(crypto)}return l8(ait)}const lit=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Oie={randomUUID:lit};function ZN(e,t,n){var i;if(Oie.randomUUID&&!e)return Oie.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??uit();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,sit(r)}class gxe{constructor(t){ka(this,"engine");ka(this,"connected",!1);ka(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function e3(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")}function d_(e){return e.participantId!==void 0}class tc extends gxe{constructor(){super("firebase");ka(this,"RECAPTCHAV3TOKEN","6Ld7v0cqAAAAACbRoSHv-PfJiq9wfYgjhXC4_e7Z");ka(this,"firestore");ka(this,"collectionPrefix","prod-");ka(this,"studyCollection");ka(this,"storage");ka(this,"studyId","");ka(this,"localForage",Sb.createInstance({name:"currentParticipantId"}));ka(this,"participantData",null);ka(this,"userManagementData",{});const n=cKe.parse(`
{
  apiKey: "AIzaSyBNW230jLUCwld9aUjZRzIunyGMdaMXv6I",
  authDomain: "abrar-test-study.firebaseapp.com",
  projectId: "abrar-test-study",
  storageBucket: "abrar-test-study.appspot.com",
  messagingSenderId: "304916533445",
  appId: "1:304916533445:web:22d7fea7e8e3faea4ca0ac"
}
`),r=M1e(n);this.firestore=ott(r,{}),this.storage=yre();try{tnt(r,{provider:new Sq(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await att(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=JN();if(!i.currentUser&&(await jnt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=gu(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const o=await this.getCurrentConfigHash(),s=await e3(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${s}`,"config",r),o&&o!==s){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(s),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,o,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(d_(a))return this.participantData=a,a;const l=await e3(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:o,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=si(this.studyCollection,"configHash"),r=await MD(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=si(this.studyCollection,"configHash");await Xs(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=el(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),o=await Promise.all(i),s={};return n.forEach((a,u)=>s[a]=o[u]),s}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=ZN(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const o=async s=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)},500))};n.addEventListener("dataavailable",o),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=si(this.studyCollection,"sequenceAssignment");await Xs(i,{});const o=gu(i,"sequenceAssignment"),s=si(o,this.currentParticipantId),a=r8(o,iie("rejected","==",!0),iie("claimed","==",!1)),u=await Yv(a);if(u.docs.length>0){const v=u.docs[0],b=v.data().timestamp;r.dataCollectionEnabled&&(await Xs(v.ref,{claimed:!0}),await Xs(s,{participantId:this.currentParticipantId,timestamp:b,rejected:!1,claimed:!1,completed:null,createdTime:$D()}))}else r.dataCollectionEnabled&&await Xs(s,{participantId:this.currentParticipantId,timestamp:$D(),rejected:!1,claimed:!1,completed:null,createdTime:$D()});const l=r8(o,oie("timestamp","asc")),f=(await Yv(l)).docs.map(v=>v.data()),d=f.filter(v=>!v.rejected).findIndex(v=>v.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,m=n[h];if(!m)throw new Error("Latin square is empty");const g=f.sort((v,b)=>v.createdTime-b.createdTime).findIndex(v=>v.participantId===this.currentParticipantId)+1;return{currentRow:m,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=el(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await f_(n),i=[],o=r.items.map(async s=>{const a=await this._getFromFirebaseStorageByRef(s,"participantData");d_(a)&&i.push(a)});return await Promise.all(o),i}async getAudio(n,r){const i=yre(),o=await ID(el(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",o),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return d_(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ZN();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=si(this.studyCollection,"sequenceAssignment"),i=gu(r,"sequenceAssignment"),o=si(i,this.currentParticipantId);return await uie(o,{completed:$D()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=gu(this.firestore,"user-management"),i=await Yv(r),o=Object.fromEntries(i.docs.map(s=>[s.id,s.data()]));this.userManagementData=o}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const o=await this.getUserManagementData("adminUsers");if(o&&o.adminUsersList){const s=Object.fromEntries(o.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const u=o.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Xs(si(this.firestore,"user-management","adminUsers"),{adminUsersList:o.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Xs(si(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(s=>s.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Xs(si(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Xs(si(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Xs(si(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=el(this.storage,`${this.collectionPrefix}${n}/participants`),i=await f_(r),o=[],s=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");d_(u)&&o.push(u)});return await Promise.all(s),o}async rejectParticipant(n,r,i){const o=gu(this.firestore,`${this.collectionPrefix}${n}`),s=el(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!a||!d_(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(s,"participantData",a);const u=si(o,"sequenceAssignment"),l=gu(u,"sequenceAssignment"),c=si(l,r);await uie(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const o=si(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Xs(o,{[r]:i},{merge:!0})}async getModes(n){const r=si(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await MD(r);if(i.exists())return i.data();const o={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Xs(r,o),o}async getParticipantsStatusCounts(n){const r=gu(this.firestore,`${this.collectionPrefix}${n}`),i=si(r,"sequenceAssignment"),o=gu(i,"sequenceAssignment"),s=r8(o,oie("timestamp","asc")),u=(await Yv(s)).docs.map(m=>m.data()),l=u.filter(m=>m.completed&&!m.rejected).length,c=u.filter(m=>m.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const o=new Date,s=o.getUTCFullYear(),a=(o.getUTCMonth()+1).toString().padStart(2,"0"),u=o.getUTCDate().toString().padStart(2,"0"),l=o.getUTCHours().toString().padStart(2,"0"),c=o.getUTCMinutes().toString().padStart(2,"0"),f=o.getUTCSeconds().toString().padStart(2,"0"),d=`${s}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const m=[];if(r){const p=await this.removeSnapshotOrLive(i,!1);p.status==="FAILED"?m.push({title:p.error.title,message:p.error.message,color:"red"}):m.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return m.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:m}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=si(this.firestore,"metadata","collections"),i=await MD(r);if(i.exists()){const o=i.data();return Object.keys(o).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=o[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,o=[];try{const s=await this.createSnapshot(n,!0);return s.status==="FAILED"?(console.warn("No live data to capture."),o.push({title:s.error.title,message:s.error.message,color:"yellow"})):o.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),o.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:o}}catch(s){return console.error("Error trying to delete a snapshot",s),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=si(this.firestore,"metadata","collections");await Xs(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=si(this.firestore,"metadata","collections");return await Xs(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=si(this.firestore,"metadata","collections"),i=await MD(r);if(i.exists()){const o=i.data();o[n]?(delete o[n],await Xs(r,o)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=el(this.storage,n),o=(await f_(r)).items.map(s=>gre(s));await Promise.all(o)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=el(this.storage,n),s=(await f_(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(s)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=el(this.storage,n),o=el(this.storage,r),s=await ID(i),u=await(await fetch(s)).blob();await kD(o,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=gu(this.firestore,n),o=si(i,"sequenceAssignment"),s=gu(o,"sequenceAssignment"),a=gu(this.firestore,r),u=si(a,"sequenceAssignment");await Xs(u,{});const l=gu(u,"sequenceAssignment"),c=await Yv(s),f=lie(this.firestore);c.docs.forEach(d=>{const h=si(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=gu(this.firestore,n),i=si(r,"sequenceAssignment"),o=gu(i,"sequenceAssignment"),s=await Yv(o),a=lie(this.firestore);s.forEach(u=>{const l=si(o,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=el(this.storage,n);return(await f_(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=el(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let o={};try{const s=await ID(i),u=await(await fetch(s)).text();o=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return o}async _getFromFirebaseStorageByRef(n,r){let i={};try{const o=await ID(n),a=await(await fetch(o)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const o=el(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await kD(o,i);else if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await kD(o,s)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await kD(n,o)}}async _deleteFromFirebaseStorage(n,r){const i=el(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await gre(i)}}const yxe=P.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Qw=()=>P.useContext(yxe);function cit({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,o]=P.useState(t),[s,a]=P.useState(!1),{storageEngine:u}=Wi(),l=async()=>{const h=JN();try{await Gnt(h)}catch(m){console.error(`There was an issue signing-out the user: ${m.message}`)}finally{o(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;P.useEffect(()=>{o(t);let h;if(u instanceof tc)try{h=JN()}catch{console.warn("No firebase store.")}const m=async v=>{if(o(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),v){const b={user:v,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await f(b);b.isAdmin=!!w,o(b)}else l()},g=(async()=>{if(u instanceof tc){const v=await(u==null?void 0:u.getUserManagementData("authentication"));if(v!=null&&v.isEnabled){const b=Wnt(h,async w=>await m(w));return()=>b()}o(r)}else u&&o(r);return()=>{}})();return()=>{g.then(v=>v())}},[u,s]);const d=P.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return C.jsx(yxe.Provider,{value:d,children:i.determiningStatus?C.jsx(El,{visible:!0}):e})}function fit({configName:e,config:t,url:n}){const{storageEngine:r}=Wi(),[i,o]=P.useState(null);P.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{o(f)})},[e,r]);const{minTime:s,maxTime:a}=P.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=P.useState(null);P.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=P.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return C.jsx(kw,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?C.jsxs(C.Fragment,{children:[C.jsx(Ye,{fw:"bold",children:e}),C.jsxs(Lt,{align:"center",direction:"row",children:[C.jsx(B2,{color:"red"}),C.jsx(Ye,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),C.jsx(jI,{issues:t.errors,type:"error"}),t.warnings.length>0&&C.jsxs(C.Fragment,{children:[C.jsxs(Lt,{align:"center",direction:"row",children:[C.jsx(B2,{color:"orange"}),C.jsx(Ye,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),C.jsx(jI,{issues:t.warnings,type:"warning"})]})]}):C.jsxs(C.Fragment,{children:[C.jsx(Lt,{direction:"row",justify:"space-between",children:C.jsx(Ye,{fw:"bold",children:t.studyMetadata.title})}),C.jsxs(Ye,{c:"dimmed",children:[C.jsx(Ye,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),C.jsx(Ye,{c:"dimmed",children:t.studyMetadata.description}),t.warnings.length>0&&C.jsxs(C.Fragment,{children:[C.jsxs(Lt,{align:"center",direction:"row",children:[C.jsx(B2,{color:"orange"}),C.jsx(Ye,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),C.jsx(jI,{issues:t.warnings,type:"warning"})]}),C.jsx(I1,{my:"md"}),C.jsxs(Lt,{direction:"row",gap:"sm",children:[C.jsxs(Ye,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&C.jsx(nKe,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),s&&a&&C.jsxs(Ye,{c:"dimmed",mt:4,children:["Activity:"," ",s," ",""," ",a]}),C.jsxs(Lt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[C.jsx(At,{leftSection:C.jsx(Jge,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${us}analysis/stats/${n}`,children:"Analyze & Manage Study"}),C.jsx(At,{leftSection:C.jsx(Zge,{}),component:"a",href:`${us}${n}`,children:"Go to Study"})]})]})},e)}function Kv({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=iye(n);return C.jsx(fit,{configName:n,config:r,url:i},n)})}function dit({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Wi(),{configsList:r}=e,i=r.filter(v=>v.startsWith("demo-")),o=r.filter(v=>v.startsWith("tutorial")),s=r.filter(v=>v.startsWith("example-")),a=r.filter(v=>v.startsWith("test-")),u=r.filter(v=>v.startsWith("library-")),l=P.useMemo(()=>r.filter(v=>!v.startsWith("demo-")&&!v.startsWith("tutorial")&&!v.startsWith("example-")&&!v.startsWith("test-")&&!v.startsWith("library-")),[r]),[c,f]=P.useState({});P.useEffect(()=>{async function v(){const b={};await Promise.all(l.map(async w=>{if(n instanceof tc){const E=await n.getModes(w);b[w]=E.analyticsInterfacePubliclyAccessible}})),f(b)}v()},[l,n]);const{user:d}=Qw(),h=P.useMemo(()=>l.filter(v=>c[v]||d.isAdmin),[l,c,d]),[m]=Gp(),p=P.useMemo(()=>m.get("tab")||(h.length>0?"Others":"Demos"),[h.length,m]),g=Cc();return C.jsx(Br.Main,{children:C.jsxs(Cp,{size:"sm",px:0,children:[C.jsx(eg,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${us}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),C.jsxs(Xn,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:p,onChange:v=>g(`/?tab=${v}`),children:[C.jsxs(Xn.List,{children:[h.length>0&&C.jsx(Xn.Tab,{value:"Others",children:"Your Studies"}),C.jsx(Xn.Tab,{value:"Demos",children:"Demo Studies"}),C.jsx(Xn.Tab,{value:"Examples",children:"Example Studies"}),C.jsx(Xn.Tab,{value:"Tutorials",children:"Tutorials"}),C.jsx(Xn.Tab,{value:"Tests",children:"Tests"}),C.jsx(Xn.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&C.jsx(Xn.Panel,{value:"Others",children:C.jsx(Kv,{configNames:h,studyConfigs:t})}),C.jsxs(Xn.Panel,{value:"Demos",children:[C.jsx(Ye,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),C.jsx(Kv,{configNames:i,studyConfigs:t})]}),C.jsxs(Xn.Panel,{value:"Examples",children:[C.jsx(Ye,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),C.jsx(Kv,{configNames:s,studyConfigs:t})]}),C.jsxs(Xn.Panel,{value:"Tutorials",children:[C.jsx(Ye,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),C.jsx(Kv,{configNames:o,studyConfigs:t})]}),C.jsxs(Xn.Panel,{value:"Tests",children:[C.jsx(Ye,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),C.jsx(Kv,{configNames:a,studyConfigs:t})]}),C.jsxs(Xn.Panel,{value:"Libraries",children:[C.jsx(Ye,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),C.jsx(Kv,{configNames:u,studyConfigs:t})]})]})]})})}var c8={exports:{}},f8={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fie;function hit(){if(Fie)return f8;Fie=1;var e=p4();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,s=e.useMemo,a=e.useDebugValue;return f8.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var m={hasValue:!1,value:null};h.current=m}else m=h.current;h=s(function(){function g(_){if(!v){if(v=!0,b=_,_=f(_),d!==void 0&&m.hasValue){var T=m.value;if(d(T,_))return w=T}return w=_}if(T=w,n(b,_))return T;var S=f(_);return d!==void 0&&d(T,S)?(b=_,T):(b=_,w=S)}var v=!1,b,w,E=c===void 0?null:c;return[function(){return g(l())},E===null?void 0:function(){return g(E())}]},[l,c,f,d]);var p=r(u,h[0],h[1]);return o(function(){m.hasValue=!0,m.value=p},[p]),a(p),p},f8}var Mie;function pit(){return Mie||(Mie=1,c8.exports=hit()),c8.exports}var mit=pit();function git(e){e()}function yit(){let e=null,t=null;return{clear(){e=null,t=null},notify(){git(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var $ie={notify(){},get:()=>[]};function vit(e,t){let n,r=$ie,i=0,o=!1;function s(p){c();const g=r.subscribe(p);let v=!1;return()=>{v||(v=!0,g(),f())}}function a(){r.notify()}function u(){m.onStateChange&&m.onStateChange()}function l(){return o}function c(){i++,n||(n=e.subscribe(u),r=yit())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=$ie)}function d(){o||(o=!0,c())}function h(){o&&(o=!1,f())}const m={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return m}var bit=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xit=bit(),wit=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Eit=wit(),_it=()=>xit||Eit?P.useLayoutEffect:P.useEffect,Tit=_it(),d8=Symbol.for("react-redux-context"),h8=typeof globalThis<"u"?globalThis:{};function Cit(){if(!P.createContext)return{};const e=h8[d8]??(h8[d8]=new Map);let t=e.get(P.createContext);return t||(t=P.createContext(null),e.set(P.createContext,t)),t}var T0=Cit();function Sit(e){const{children:t,context:n,serverState:r,store:i}=e,o=P.useMemo(()=>{const u=vit(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),s=P.useMemo(()=>i.getState(),[i]);Tit(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const a=n||T0;return P.createElement(a.Provider,{value:o},t)}var Ait=Sit;function Mq(e=T0){return function(){return P.useContext(e)}}var vxe=Mq();function bxe(e=T0){const t=e===T0?vxe:Mq(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Dit=bxe();function kit(e=T0){const t=e===T0?Dit:bxe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var xxe=kit(),Iit=(e,t)=>e===t;function Rit(e=T0){const t=e===T0?vxe:Mq(e),n=(r,i={})=>{const{equalityFn:o=Iit}=typeof i=="function"?{equalityFn:i}:i,s=t(),{store:a,subscription:u,getServerState:l}=s;P.useRef(!0);const c=P.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=mit.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,o);return P.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var Nit=Rit();function cp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pit(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jw(e){let t,n,r;e.length!==2?(t=cp,n=(a,u)=>cp(e(a),u),r=(a,u)=>e(a)-u):(t=e===cp||e===Pit?e:Oit,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function Oit(){return 0}function wxe(e){return e===null?NaN:+e}function*Fit(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Exe=Jw(cp),C0=Exe.right,Mit=Exe.left;Jw(wxe).center;function $it(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function Lit(e,t){const n=$it(e,t);return n&&Math.sqrt(n)}function Bit(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ya{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class Lie extends Map{constructor(t,n=Cxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(KB(this,t))}has(t){return super.has(KB(this,t))}set(t,n){return super.set(_xe(this,t),n)}delete(t){return super.delete(Txe(this,t))}}class t3 extends Set{constructor(t,n=Cxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(KB(this,t))}add(t){return super.add(_xe(this,t))}delete(t){return super.delete(Txe(this,t))}}function KB({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _xe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Txe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Cxe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function jit(e,t){return Array.from(t,n=>e[n])}function zit(e=cp){if(e===cp)return Sxe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Sxe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Uit=Math.sqrt(50),Vit=Math.sqrt(10),Hit=Math.sqrt(2);function n3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Uit?10:o>=Vit?5:o>=Hit?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?n3(e,t,n*2):[a,u,l]}function XB(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?n3(t,e,n):n3(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function QB(e,t,n){return t=+t,e=+e,n=+n,n3(e,t,n)[2]}function S0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?QB(t,e,n):QB(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function da(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function fl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Axe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Sxe:zit(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),m=Math.min(r,Math.floor(t+(u-l)*f/u+d));Axe(e,t,h,m,i)}const o=e[t];let s=n,a=r;for(h_(e,n,t),i(e[r],o)>0&&h_(e,n,r);s<a;){for(h_(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?h_(e,n,a):(++a,h_(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function h_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function JB(e,t,n){if(e=Float64Array.from(Fit(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return fl(e);if(t>=1)return da(e);var r,i=(r-1)*t,o=Math.floor(i),s=da(Axe(e,o).subarray(0,o+1)),a=fl(e.subarray(o+1));return s+(a-s)*(i-o)}}function Dxe(e,t,n=wxe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function qit(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function kxe(e,t){return JB(e,.5,t)}function*Wit(e){for(const t of e)yield*t}function Ixe(e){return Array.from(Wit(e))}function dl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Rxe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Git(e,...t){e=new t3(e),t=t.map(Yit);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Yit(e){return e instanceof t3?e:new t3(e)}function Kit(...e){const t=new t3;for(const n of e)for(const r of n)t.add(r);return t}function Xit(e){return e}var p8=1,m8=2,ZB=3,e2=4,Bie=1e-6;function Qit(e){return"translate("+e+",0)"}function Jit(e){return"translate(0,"+e+")"}function Zit(e){return t=>+e(t)}function eot(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function tot(){return!this.__axis}function Nxe(e,t){var n=[],r=null,i=null,o=6,s=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===p8||e===e2?-1:1,c=e===e2||e===m8?"x":"y",f=e===p8||e===ZB?Qit:Jit;function d(h){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):Xit),g=Math.max(o,0)+a,v=t.range(),b=+v[0]+u,w=+v[v.length-1]+u,E=(t.bandwidth?eot:Zit)(t.copy(),u),_=h.selection?h.selection():h,T=_.selectAll(".domain").data([null]),S=_.selectAll(".tick").data(m,t).order(),D=S.exit(),k=S.enter().append("g").attr("class","tick"),R=S.select("line"),O=S.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(k),R=R.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),O=O.merge(k.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===p8?"0em":e===ZB?"0.71em":"0.32em")),h!==_&&(T=T.transition(h),S=S.transition(h),R=R.transition(h),O=O.transition(h),D=D.transition(h).attr("opacity",Bie).attr("transform",function(M){return isFinite(M=E(M))?f(M+u):this.getAttribute("transform")}),k.attr("opacity",Bie).attr("transform",function(M){var F=this.parentNode.__axis;return f((F&&isFinite(F=F(M))?F:E(M))+u)})),D.remove(),T.attr("d",e===e2||e===m8?s?"M"+l*s+","+b+"H"+u+"V"+w+"H"+l*s:"M"+u+","+b+"V"+w:s?"M"+b+","+l*s+"V"+u+"H"+w+"V"+l*s:"M"+b+","+u+"H"+w),S.attr("opacity",1).attr("transform",function(M){return f(E(M)+u)}),R.attr(c+"2",l*o),O.attr(c,l*g).text(p),_.filter(tot).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===m8?"start":e===e2?"end":"middle"),_.each(function(){this.__axis=E})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(o=s=+h,d):o},d.tickSizeInner=function(h){return arguments.length?(o=+h,d):o},d.tickSizeOuter=function(h){return arguments.length?(s=+h,d):s},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function Pxe(e){return Nxe(ZB,e)}function r3(e){return Nxe(e2,e)}var not={value:()=>{}};function $q(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new QI(n)}function QI(e){this._=e}function rot(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}QI.prototype=$q.prototype={constructor:QI,on:function(e,t){var n=this._,r=rot(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=iot(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=jie(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jie(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new QI(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function iot(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jie(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=not,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var e7="http://www.w3.org/1999/xhtml";const zie={svg:"http://www.w3.org/2000/svg",xhtml:e7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function NO(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zie.hasOwnProperty(t)?{space:zie[t],local:e}:e}function oot(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===e7&&t.documentElement.namespaceURI===e7?t.createElement(e):t.createElementNS(n,e)}}function sot(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Oxe(e){var t=NO(e);return(t.local?sot:oot)(t)}function aot(){}function Lq(e){return e==null?aot:function(){return this.querySelector(e)}}function uot(e){typeof e!="function"&&(e=Lq(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Tl(r,this._parents)}function lot(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cot(){return[]}function Fxe(e){return e==null?cot:function(){return this.querySelectorAll(e)}}function fot(e){return function(){return lot(e.apply(this,arguments))}}function dot(e){typeof e=="function"?e=fot(e):e=Fxe(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new Tl(r,i)}function Mxe(e){return function(){return this.matches(e)}}function $xe(e){return function(t){return t.matches(e)}}var hot=Array.prototype.find;function pot(e){return function(){return hot.call(this.children,e)}}function mot(){return this.firstElementChild}function got(e){return this.select(e==null?mot:pot(typeof e=="function"?e:$xe(e)))}var yot=Array.prototype.filter;function vot(){return Array.from(this.children)}function bot(e){return function(){return yot.call(this.children,e)}}function xot(e){return this.selectAll(e==null?vot:bot(typeof e=="function"?e:$xe(e)))}function wot(e){typeof e!="function"&&(e=Mxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Tl(r,this._parents)}function Lxe(e){return new Array(e.length)}function Eot(){return new Tl(this._enter||this._groups.map(Lxe),this._parents)}function i3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}i3.prototype={constructor:i3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _ot(e){return function(){return e}}function Tot(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new i3(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Cot(e,t,n,r,i,o,s){var a,u,l=new Map,c=t.length,f=o.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=s.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=s.call(e,o[a],a,o)+"",(u=l.get(h))?(r[a]=u,u.__data__=o[a],l.delete(h)):n[a]=new i3(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Sot(e){return e.__data__}function Aot(e,t){if(!arguments.length)return Array.from(this,Sot);var n=t?Cot:Tot,r=this._parents,i=this._groups;typeof e!="function"&&(e=_ot(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=Dot(e.call(c,c&&c.__data__,l,r)),m=h.length,p=a[l]=new Array(m),g=s[l]=new Array(m),v=u[l]=new Array(d);n(c,f,p,g,v,h,t);for(var b=0,w=0,E,_;b<m;++b)if(E=p[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<m;);E._next=_||null}}return s=new Tl(s,r),s._enter=a,s._exit=u,s}function Dot(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kot(){return new Tl(this._exit||this._groups.map(Lxe),this._parents)}function Iot(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Rot(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,m=0;m<f;++m)(h=l[m]||c[m])&&(d[m]=h);for(;u<i;++u)a[u]=n[u];return new Tl(a,this._parents)}function Not(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Pot(e){e||(e=Oot);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new Tl(i,this._parents).order()}function Oot(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Fot(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Mot(){return Array.from(this)}function $ot(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Lot(){let e=0;for(const t of this)++e;return e}function Bot(){return!this.node()}function jot(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function zot(e){return function(){this.removeAttribute(e)}}function Uot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vot(e,t){return function(){this.setAttribute(e,t)}}function Hot(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Wot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Got(e,t){var n=NO(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Uot:zot:typeof t=="function"?n.local?Wot:qot:n.local?Hot:Vot)(n,t))}function Bxe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Yot(e){return function(){this.style.removeProperty(e)}}function Kot(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Xot(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Qot(e,t,n){return arguments.length>1?this.each((t==null?Yot:typeof t=="function"?Xot:Kot)(e,t,n??"")):Ix(this.node(),e)}function Ix(e,t){return e.style.getPropertyValue(t)||Bxe(e).getComputedStyle(e,null).getPropertyValue(t)}function Jot(e){return function(){delete this[e]}}function Zot(e,t){return function(){this[e]=t}}function est(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tst(e,t){return arguments.length>1?this.each((t==null?Jot:typeof t=="function"?est:Zot)(e,t)):this.node()[e]}function jxe(e){return e.trim().split(/^|\s+/)}function Bq(e){return e.classList||new zxe(e)}function zxe(e){this._node=e,this._names=jxe(e.getAttribute("class")||"")}zxe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Uxe(e,t){for(var n=Bq(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Vxe(e,t){for(var n=Bq(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function nst(e){return function(){Uxe(this,e)}}function rst(e){return function(){Vxe(this,e)}}function ist(e,t){return function(){(t.apply(this,arguments)?Uxe:Vxe)(this,e)}}function ost(e,t){var n=jxe(e+"");if(arguments.length<2){for(var r=Bq(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ist:t?nst:rst)(n,t))}function sst(){this.textContent=""}function ast(e){return function(){this.textContent=e}}function ust(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lst(e){return arguments.length?this.each(e==null?sst:(typeof e=="function"?ust:ast)(e)):this.node().textContent}function cst(){this.innerHTML=""}function fst(e){return function(){this.innerHTML=e}}function dst(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function hst(e){return arguments.length?this.each(e==null?cst:(typeof e=="function"?dst:fst)(e)):this.node().innerHTML}function pst(){this.nextSibling&&this.parentNode.appendChild(this)}function mst(){return this.each(pst)}function gst(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yst(){return this.each(gst)}function vst(e){var t=typeof e=="function"?e:Oxe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bst(){return null}function xst(e,t){var n=typeof e=="function"?e:Oxe(e),r=t==null?bst:typeof t=="function"?t:Lq(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function wst(){var e=this.parentNode;e&&e.removeChild(this)}function Est(){return this.each(wst)}function _st(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tst(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cst(e){return this.select(e?Tst:_st)}function Sst(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ast(e){return function(t){e.call(this,t,this.__data__)}}function Dst(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function kst(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Ist(e,t,n){return function(){var r=this.__on,i,o=Ast(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Rst(e,t,n){var r=Dst(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Ist:kst,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Hxe(e,t,n){var r=Bxe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Nst(e,t){return function(){return Hxe(this,e,t)}}function Pst(e,t){return function(){return Hxe(this,e,t.apply(this,arguments))}}function Ost(e,t){return this.each((typeof t=="function"?Pst:Nst)(e,t))}function*Fst(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var qxe=[null];function Tl(e,t){this._groups=e,this._parents=t}function dS(){return new Tl([[document.documentElement]],qxe)}function Mst(){return this}Tl.prototype=dS.prototype={constructor:Tl,select:uot,selectAll:dot,selectChild:got,selectChildren:xot,filter:wot,data:Aot,enter:Eot,exit:kot,join:Iot,merge:Rot,selection:Mst,order:Not,sort:Pot,call:Fot,nodes:Mot,node:$ot,size:Lot,empty:Bot,each:jot,attr:Got,style:Qot,property:tst,classed:ost,text:lst,html:hst,raise:mst,lower:yst,append:vst,insert:xst,remove:Est,clone:Cst,datum:Sst,on:Rst,dispatch:Ost,[Symbol.iterator]:Fst};function hS(e){return typeof e=="string"?new Tl([[document.querySelector(e)]],[document.documentElement]):new Tl([[e]],qxe)}function Zw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function og(){}var Yy=.7,Rx=1/Yy,Zb="\\s*([+-]?\\d+)\\s*",UT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$st=/^#([0-9a-f]{3,8})$/,Lst=new RegExp(`^rgb\\(${Zb},${Zb},${Zb}\\)$`),Bst=new RegExp(`^rgb\\(${Sd},${Sd},${Sd}\\)$`),jst=new RegExp(`^rgba\\(${Zb},${Zb},${Zb},${UT}\\)$`),zst=new RegExp(`^rgba\\(${Sd},${Sd},${Sd},${UT}\\)$`),Ust=new RegExp(`^hsl\\(${UT},${Sd},${Sd}\\)$`),Vst=new RegExp(`^hsla\\(${UT},${Sd},${Sd},${UT}\\)$`),Uie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zw(og,Ky,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vie,formatHex:Vie,formatHex8:Hst,formatHsl:qst,formatRgb:Hie,toString:Hie});function Vie(){return this.rgb().formatHex()}function Hst(){return this.rgb().formatHex8()}function qst(){return Wxe(this).formatHsl()}function Hie(){return this.rgb().formatRgb()}function Ky(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$st.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qie(t):n===3?new ts(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zD(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lst.exec(e))?new ts(t[1],t[2],t[3],1):(t=Bst.exec(e))?new ts(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jst.exec(e))?zD(t[1],t[2],t[3],t[4]):(t=zst.exec(e))?zD(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ust.exec(e))?Yie(t[1],t[2]/100,t[3]/100,1):(t=Vst.exec(e))?Yie(t[1],t[2]/100,t[3]/100,t[4]):Uie.hasOwnProperty(e)?qie(Uie[e]):e==="transparent"?new ts(NaN,NaN,NaN,0):null}function qie(e){return new ts(e>>16&255,e>>8&255,e&255,1)}function zD(e,t,n,r){return r<=0&&(e=t=n=NaN),new ts(e,t,n,r)}function jq(e){return e instanceof og||(e=Ky(e)),e?(e=e.rgb(),new ts(e.r,e.g,e.b,e.opacity)):new ts}function A0(e,t,n,r){return arguments.length===1?jq(e):new ts(e,t,n,r??1)}function ts(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Zw(ts,A0,pS(og,{brighter(e){return e=e==null?Rx:Math.pow(Rx,e),new ts(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yy:Math.pow(Yy,e),new ts(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ts(Py(this.r),Py(this.g),Py(this.b),o3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wie,formatHex:Wie,formatHex8:Wst,formatRgb:Gie,toString:Gie}));function Wie(){return`#${Cy(this.r)}${Cy(this.g)}${Cy(this.b)}`}function Wst(){return`#${Cy(this.r)}${Cy(this.g)}${Cy(this.b)}${Cy((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gie(){const e=o3(this.opacity);return`${e===1?"rgb(":"rgba("}${Py(this.r)}, ${Py(this.g)}, ${Py(this.b)}${e===1?")":`, ${e})`}`}function o3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Py(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cy(e){return e=Py(e),(e<16?"0":"")+e.toString(16)}function Yie(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qc(e,t,n,r)}function Wxe(e){if(e instanceof Qc)return new Qc(e.h,e.s,e.l,e.opacity);if(e instanceof og||(e=Ky(e)),!e)return new Qc;if(e instanceof Qc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Qc(s,a,u,e.opacity)}function s3(e,t,n,r){return arguments.length===1?Wxe(e):new Qc(e,t,n,r??1)}function Qc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zw(Qc,s3,pS(og,{brighter(e){return e=e==null?Rx:Math.pow(Rx,e),new Qc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yy:Math.pow(Yy,e),new Qc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ts(g8(e>=240?e-240:e+120,i,r),g8(e,i,r),g8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Qc(Kie(this.h),UD(this.s),UD(this.l),o3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=o3(this.opacity);return`${e===1?"hsl(":"hsla("}${Kie(this.h)}, ${UD(this.s)*100}%, ${UD(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kie(e){return e=(e||0)%360,e<0?e+360:e}function UD(e){return Math.max(0,Math.min(1,e||0))}function g8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gxe=Math.PI/180,Yxe=180/Math.PI,a3=18,Kxe=.96422,Xxe=1,Qxe=.82521,Jxe=4/29,ex=6/29,Zxe=3*ex*ex,Gst=ex*ex*ex;function ewe(e){if(e instanceof Ad)return new Ad(e.l,e.a,e.b,e.opacity);if(e instanceof Zh)return twe(e);e instanceof ts||(e=jq(e));var t=x8(e.r),n=x8(e.g),r=x8(e.b),i=y8((.2225045*t+.7168786*n+.0606169*r)/Xxe),o,s;return t===n&&n===r?o=s=i:(o=y8((.4360747*t+.3850649*n+.1430804*r)/Kxe),s=y8((.0139322*t+.0971045*n+.7141733*r)/Qxe)),new Ad(116*i-16,500*(o-i),200*(i-s),e.opacity)}function u3(e,t,n,r){return arguments.length===1?ewe(e):new Ad(e,t,n,r??1)}function Ad(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Zw(Ad,u3,pS(og,{brighter(e){return new Ad(this.l+a3*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ad(this.l-a3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Kxe*v8(t),e=Xxe*v8(e),n=Qxe*v8(n),new ts(b8(3.1338561*t-1.6168667*e-.4906146*n),b8(-.9787684*t+1.9161415*e+.033454*n),b8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function y8(e){return e>Gst?Math.pow(e,1/3):e/Zxe+Jxe}function v8(e){return e>ex?e*e*e:Zxe*(e-Jxe)}function b8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function x8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Yst(e){if(e instanceof Zh)return new Zh(e.h,e.c,e.l,e.opacity);if(e instanceof Ad||(e=ewe(e)),e.a===0&&e.b===0)return new Zh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Yxe;return new Zh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function l3(e,t,n,r){return arguments.length===1?Yst(e):new Zh(e,t,n,r??1)}function Zh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function twe(e){if(isNaN(e.h))return new Ad(e.l,0,0,e.opacity);var t=e.h*Gxe;return new Ad(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Zw(Zh,l3,pS(og,{brighter(e){return new Zh(this.h,this.c,this.l+a3*(e??1),this.opacity)},darker(e){return new Zh(this.h,this.c,this.l-a3*(e??1),this.opacity)},rgb(){return twe(this).rgb()}}));var nwe=-.14861,zq=1.78277,Uq=-.29227,PO=-.90649,VT=1.97294,Xie=VT*PO,Qie=VT*zq,Jie=zq*Uq-PO*nwe;function Kst(e){if(e instanceof Oy)return new Oy(e.h,e.s,e.l,e.opacity);e instanceof ts||(e=jq(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Jie*r+Xie*t-Qie*n)/(Jie+Xie-Qie),o=r-i,s=(VT*(n-i)-Uq*o)/PO,a=Math.sqrt(s*s+o*o)/(VT*i*(1-i)),u=a?Math.atan2(s,o)*Yxe-120:NaN;return new Oy(u<0?u+360:u,a,i,e.opacity)}function t7(e,t,n,r){return arguments.length===1?Kst(e):new Oy(e,t,n,r??1)}function Oy(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zw(Oy,t7,pS(og,{brighter(e){return e=e==null?Rx:Math.pow(Rx,e),new Oy(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yy:Math.pow(Yy,e),new Oy(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Gxe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ts(255*(t+n*(nwe*r+zq*i)),255*(t+n*(Uq*r+PO*i)),255*(t+n*(VT*r)),this.opacity)}}));function rwe(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function iwe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return rwe((n-r/t)*t,s,i,o,a)}}function owe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return rwe((n-r/t)*t,i,o,s,a)}}const OO=e=>()=>e;function swe(e,t){return function(n){return e+n*t}}function Xst(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function FO(e,t){var n=t-e;return n?swe(e,n>180||n<-180?n-360*Math.round(n/360):n):OO(isNaN(e)?t:e)}function Qst(e){return(e=+e)==1?ns:function(t,n){return n-t?Xst(t,n,e):OO(isNaN(t)?n:t)}}function ns(e,t){var n=t-e;return n?swe(e,n):OO(isNaN(e)?t:e)}const HT=function e(t){var n=Qst(t);function r(i,o){var s=n((i=A0(i)).r,(o=A0(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=ns(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function awe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=A0(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var uwe=awe(iwe),Jst=awe(owe);function Vq(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function lwe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zst(e,t){return(lwe(t)?Vq:cwe)(e,t)}function cwe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=sg(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function fwe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function nc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function dwe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=sg(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var n7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w8=new RegExp(n7.source,"g");function eat(e){return function(){return e}}function tat(e){return function(t){return e(t)+""}}function Hq(e,t){var n=n7.lastIndex=w8.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=n7.exec(e))&&(i=w8.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:nc(r,i)})),n=w8.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?tat(u[0].x):eat(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function sg(e,t){var n=typeof t,r;return t==null||n==="boolean"?OO(t):(n==="number"?nc:n==="string"?(r=Ky(t))?(t=r,HT):Hq:t instanceof Ky?HT:t instanceof Date?fwe:lwe(t)?Vq:Array.isArray(t)?cwe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dwe:nc)(e,t)}function nat(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function rat(e,t){var n=FO(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function mS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Zie=180/Math.PI,r7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hwe(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Zie,skewX:Math.atan(u)*Zie,scaleX:s,scaleY:a}}var VD;function iat(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?r7:hwe(t.a,t.b,t.c,t.d,t.e,t.f)}function oat(e){return e==null||(VD||(VD=document.createElementNS("http://www.w3.org/2000/svg","g")),VD.setAttribute("transform",e),!(e=VD.transform.baseVal.consolidate()))?r7:(e=e.matrix,hwe(e.a,e.b,e.c,e.d,e.e,e.f))}function pwe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,m){if(l!==f||c!==d){var p=h.push("translate(",null,t,null,n);m.push({i:p-4,x:nc(l,f)},{i:p-2,x:nc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:nc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:nc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,m){if(l!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:nc(l,f)},{i:p-2,x:nc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var m=-1,p=d.length,g;++m<p;)f[(g=d[m]).i]=g.x(h);return f.join("")}}}var mwe=pwe(iat,"px, ","px)","deg)"),gwe=pwe(oat,", ",")",")"),sat=1e-12;function eoe(e){return((e=Math.exp(e))+1/e)/2}function aat(e){return((e=Math.exp(e))-1/e)/2}function uat(e){return((e=Math.exp(2*e))-1)/(e+1)}const lat=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,m=f-u,p=h*h+m*m,g,v;if(p<sat)v=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*m,l*Math.exp(t*S*v)]};else{var b=Math.sqrt(p),w=(d*d-l*l+r*p)/(2*l*n*b),E=(d*d-l*l-r*p)/(2*d*n*b),_=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(E*E+1)-E);v=(T-_)/t,g=function(S){var D=S*v,k=eoe(_),R=l/(n*b)*(k*uat(t*D+_)-aat(_));return[a+R*h,u+R*m,l*k/eoe(t*D+_)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function ywe(e){return function(t,n){var r=e((t=s3(t)).h,(n=s3(n)).h),i=ns(t.s,n.s),o=ns(t.l,n.l),s=ns(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const cat=ywe(FO);var fat=ywe(ns);function dat(e,t){var n=ns((e=u3(e)).l,(t=u3(t)).l),r=ns(e.a,t.a),i=ns(e.b,t.b),o=ns(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function vwe(e){return function(t,n){var r=e((t=l3(t)).h,(n=l3(n)).h),i=ns(t.c,n.c),o=ns(t.l,n.l),s=ns(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const hat=vwe(FO);var pat=vwe(ns);function bwe(e){return function t(n){n=+n;function r(i,o){var s=e((i=t7(i)).h,(o=t7(o)).h),a=ns(i.s,o.s),u=ns(i.l,o.l),l=ns(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const mat=bwe(FO);var gat=bwe(ns);function qq(e,t){t===void 0&&(t=e,e=sg);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function yat(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const vat=Object.freeze(Object.defineProperty({__proto__:null,interpolate:sg,interpolateArray:Zst,interpolateBasis:iwe,interpolateBasisClosed:owe,interpolateCubehelix:mat,interpolateCubehelixLong:gat,interpolateDate:fwe,interpolateDiscrete:nat,interpolateHcl:hat,interpolateHclLong:pat,interpolateHsl:cat,interpolateHslLong:fat,interpolateHue:rat,interpolateLab:dat,interpolateNumber:nc,interpolateNumberArray:Vq,interpolateObject:dwe,interpolateRgb:HT,interpolateRgbBasis:uwe,interpolateRgbBasisClosed:Jst,interpolateRound:mS,interpolateString:Hq,interpolateTransformCss:mwe,interpolateTransformSvg:gwe,interpolateZoom:lat,piecewise:qq,quantize:yat},Symbol.toStringTag,{value:"Module"}));var Nx=0,t2=0,p_=0,xwe=1e3,c3,n2,f3=0,Xy=0,MO=0,qT=typeof performance=="object"&&performance.now?performance:Date,wwe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $O(){return Xy||(wwe(bat),Xy=qT.now()+MO)}function bat(){Xy=0}function WT(){this._call=this._time=this._next=null}WT.prototype=Wq.prototype={constructor:WT,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$O():+n)+(t==null?0:+t),!this._next&&n2!==this&&(n2?n2._next=this:c3=this,n2=this),this._call=e,this._time=n,i7()},stop:function(){this._call&&(this._call=null,this._time=1/0,i7())}};function Wq(e,t,n){var r=new WT;return r.restart(e,t,n),r}function xat(){$O(),++Nx;for(var e=c3,t;e;)(t=Xy-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nx}function toe(){Xy=(f3=qT.now())+MO,Nx=t2=0;try{xat()}finally{Nx=0,Eat(),Xy=0}}function wat(){var e=qT.now(),t=e-f3;t>xwe&&(MO-=t,f3=e)}function Eat(){for(var e,t=c3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:c3=n);n2=e,i7(r)}function i7(e){if(!Nx){t2&&(t2=clearTimeout(t2));var t=e-Xy;t>24?(e<1/0&&(t2=setTimeout(toe,e-qT.now()-MO)),p_&&(p_=clearInterval(p_))):(p_||(f3=qT.now(),p_=setInterval(wat,xwe)),Nx=1,wwe(toe))}}function noe(e,t,n){var r=new WT;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function _at(e,t,n){var r=new WT,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?$O():+a,r._restart(function u(l){l+=i,r._restart(u,i+=s,a),o(l)},s,a)},r.restart(e,t,n),r)}var Tat=$q("start","end","cancel","interrupt"),Cat=[],Ewe=0,roe=1,o7=2,JI=3,ioe=4,s7=5,ZI=6;function LO(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Sat(e,n,{name:t,index:r,group:i,on:Tat,tween:Cat,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ewe})}function Gq(e,t){var n=Nf(e,t);if(n.state>Ewe)throw new Error("too late; already scheduled");return n}function ih(e,t){var n=Nf(e,t);if(n.state>JI)throw new Error("too late; already running");return n}function Nf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Sat(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Wq(o,0,n.time);function o(l){n.state=roe,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,d,h;if(n.state!==roe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===JI)return noe(s);h.state===ioe?(h.state=ZI,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=ZI,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(noe(function(){n.state===JI&&(n.state=ioe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=o7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===o7){for(n.state=JI,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=s7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===s7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=ZI,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Aat(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>o7&&r.state<s7,r.state=ZI,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Dat(e){return this.each(function(){Aat(this,e)})}function kat(e,t){var n,r;return function(){var i=ih(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Iat(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ih(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function Rat(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Nf(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?kat:Iat)(n,e,t))}function Yq(e,t,n){var r=e._id;return e.each(function(){var i=ih(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Nf(i,r).value[t]}}function _we(e,t){var n;return(typeof t=="number"?nc:t instanceof Ky?HT:(n=Ky(t))?(t=n,HT):Hq)(e,t)}function Nat(e){return function(){this.removeAttribute(e)}}function Pat(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Oat(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Fat(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Mat(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function $at(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Lat(e,t){var n=NO(e),r=n==="transform"?gwe:_we;return this.attrTween(e,typeof t=="function"?(n.local?$at:Mat)(n,r,Yq(this,"attr."+e,t)):t==null?(n.local?Pat:Nat)(n):(n.local?Fat:Oat)(n,r,t))}function Bat(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function jat(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function zat(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&jat(e,o)),n}return i._value=t,i}function Uat(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Bat(e,o)),n}return i._value=t,i}function Vat(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=NO(e);return this.tween(n,(r.local?zat:Uat)(r,t))}function Hat(e,t){return function(){Gq(this,e).delay=+t.apply(this,arguments)}}function qat(e,t){return t=+t,function(){Gq(this,e).delay=t}}function Wat(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hat:qat)(t,e)):Nf(this.node(),t).delay}function Gat(e,t){return function(){ih(this,e).duration=+t.apply(this,arguments)}}function Yat(e,t){return t=+t,function(){ih(this,e).duration=t}}function Kat(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gat:Yat)(t,e)):Nf(this.node(),t).duration}function Xat(e,t){if(typeof t!="function")throw new Error;return function(){ih(this,e).ease=t}}function Qat(e){var t=this._id;return arguments.length?this.each(Xat(t,e)):Nf(this.node(),t).ease}function Jat(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ih(this,e).ease=n}}function Zat(e){if(typeof e!="function")throw new Error;return this.each(Jat(this._id,e))}function eut(e){typeof e!="function"&&(e=Mxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Np(r,this._parents,this._name,this._id)}function tut(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,f=s[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)s[a]=t[a];return new Np(s,this._parents,this._name,this._id)}function nut(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function rut(e,t,n){var r,i,o=nut(t)?Gq:ih;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function iut(e,t){var n=this._id;return arguments.length<2?Nf(this.node(),n).on.on(e):this.each(rut(n,e,t))}function out(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function sut(){return this.on("end.remove",out(this._id))}function aut(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lq(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,LO(l[d],t,n,d,l,Nf(c,n)));return new Np(o,this._parents,t,n)}function uut(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fxe(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,m=Nf(c,n),p=0,g=d.length;p<g;++p)(h=d[p])&&LO(h,t,n,p,d,m);o.push(d),s.push(c)}return new Np(o,s,t,n)}var lut=dS.prototype.constructor;function cut(){return new lut(this._groups,this._parents)}function fut(e,t){var n,r,i;return function(){var o=Ix(this,e),s=(this.style.removeProperty(e),Ix(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Twe(e){return function(){this.style.removeProperty(e)}}function dut(e,t,n){var r,i=n+"",o;return function(){var s=Ix(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function hut(e,t,n){var r,i,o;return function(){var s=Ix(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Ix(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function put(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=ih(this,e),l=u.on,c=u.value[o]==null?a||(a=Twe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function mut(e,t,n){var r=(e+="")=="transform"?mwe:_we;return t==null?this.styleTween(e,fut(e,r)).on("end.style."+e,Twe(e)):typeof t=="function"?this.styleTween(e,hut(e,r,Yq(this,"style."+e,t))).each(put(this._id,e)):this.styleTween(e,dut(e,r,t),n).on("end.style."+e,null)}function gut(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function yut(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&gut(e,s,n)),r}return o._value=t,o}function vut(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,yut(e,t,n??""))}function but(e){return function(){this.textContent=e}}function xut(e){return function(){var t=e(this);this.textContent=t??""}}function wut(e){return this.tween("text",typeof e=="function"?xut(Yq(this,"text",e)):but(e==null?"":e+""))}function Eut(e){return function(t){this.textContent=e.call(this,t)}}function _ut(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Eut(i)),t}return r._value=e,r}function Tut(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_ut(e))}function Cut(){for(var e=this._name,t=this._id,n=Cwe(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=Nf(u,t);LO(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Np(r,this._parents,e,n)}function Sut(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=ih(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var Aut=0;function Np(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Cwe(){return++Aut}var Dh=dS.prototype;Np.prototype={constructor:Np,select:aut,selectAll:uut,selectChild:Dh.selectChild,selectChildren:Dh.selectChildren,filter:eut,merge:tut,selection:cut,transition:Cut,call:Dh.call,nodes:Dh.nodes,node:Dh.node,size:Dh.size,empty:Dh.empty,each:Dh.each,on:iut,attr:Lat,attrTween:Vat,style:mut,styleTween:vut,text:wut,textTween:Tut,remove:sut,tween:Rat,delay:Wat,duration:Kat,ease:Qat,easeVarying:Zat,end:Sut,[Symbol.iterator]:Dh[Symbol.iterator]};const Dut=e=>+e;function kut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Iut={time:null,delay:0,duration:250,ease:kut};function Rut(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Nut(e){var t,n;e instanceof Np?(t=e._id,e=e._name):(t=Cwe(),(n=Iut).time=$O(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&LO(u,e,t,l,s,n||Rut(u,t));return new Np(r,this._parents,e,t)}dS.prototype.interrupt=Dat;dS.prototype.transition=Nut;const a7=Math.PI,u7=2*a7,ry=1e-6,Put=u7-ry;function Swe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Out(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Swe;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Kq=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Swe:Out(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-t,l=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>ry)if(!(Math.abs(f*u-l*c)>ry)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,m=i-a,p=u*u+l*l,g=h*h+m*m,v=Math.sqrt(p),b=Math.sqrt(d),w=o*Math.tan((a7-Math.acos((p+d-g)/(2*v*b)))/2),E=w/b,_=w/v;Math.abs(E-1)>ry&&this._append`L${t+E*c},${n+E*f}`,this._append`A${o},${o},0,0,${+(f*h>c*m)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>ry||Math.abs(this._y1-c)>ry)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%u7+u7),d>Put?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>ry&&this._append`A${r},${r},0,${+(d>=a7)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function BO(){return new Kq}BO.prototype=Kq.prototype;const fp=11102230246251565e-32,Qs=134217729,Fut=(3+8*fp)*fp;function E8(e,t,n,r,i){let o,s,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(o=l,l=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(s=l+o,a=o-(s-l),l=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f]):(s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function Mut(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function gS(e){return new Float64Array(e)}const $ut=(3+16*fp)*fp,Lut=(2+12*fp)*fp,But=(9+64*fp)*fp*fp,Xv=gS(4),ooe=gS(8),soe=gS(12),aoe=gS(16),Na=gS(4);function jut(e,t,n,r,i,o,s){let a,u,l,c,f,d,h,m,p,g,v,b,w,E,_,T,S,D;const k=e-i,R=n-i,O=t-o,M=r-o;E=k*M,d=Qs*k,h=d-(d-k),m=k-h,d=Qs*M,p=d-(d-M),g=M-p,_=m*g-(E-h*p-m*p-h*g),T=O*R,d=Qs*O,h=d-(d-O),m=O-h,d=Qs*R,p=d-(d-R),g=R-p,S=m*g-(T-h*p-m*p-h*g),v=_-S,f=_-v,Xv[0]=_-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-T,f=w-v,Xv[1]=w-(v+f)+(f-T),D=b+v,f=D-b,Xv[2]=b-(D-f)+(v-f),Xv[3]=D;let F=Mut(4,Xv),L=Lut*s;if(F>=L||-F>=L||(f=e-k,a=e-(k+f)+(f-i),f=n-R,l=n-(R+f)+(f-i),f=t-O,u=t-(O+f)+(f-o),f=r-M,c=r-(M+f)+(f-o),a===0&&u===0&&l===0&&c===0)||(L=But*s+Fut*Math.abs(F),F+=k*c+M*a-(O*l+R*u),F>=L||-F>=L))return F;E=a*M,d=Qs*a,h=d-(d-a),m=a-h,d=Qs*M,p=d-(d-M),g=M-p,_=m*g-(E-h*p-m*p-h*g),T=u*R,d=Qs*u,h=d-(d-u),m=u-h,d=Qs*R,p=d-(d-R),g=R-p,S=m*g-(T-h*p-m*p-h*g),v=_-S,f=_-v,Na[0]=_-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-T,f=w-v,Na[1]=w-(v+f)+(f-T),D=b+v,f=D-b,Na[2]=b-(D-f)+(v-f),Na[3]=D;const H=E8(4,Xv,4,Na,ooe);E=k*c,d=Qs*k,h=d-(d-k),m=k-h,d=Qs*c,p=d-(d-c),g=c-p,_=m*g-(E-h*p-m*p-h*g),T=O*l,d=Qs*O,h=d-(d-O),m=O-h,d=Qs*l,p=d-(d-l),g=l-p,S=m*g-(T-h*p-m*p-h*g),v=_-S,f=_-v,Na[0]=_-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-T,f=w-v,Na[1]=w-(v+f)+(f-T),D=b+v,f=D-b,Na[2]=b-(D-f)+(v-f),Na[3]=D;const V=E8(H,ooe,4,Na,soe);E=a*c,d=Qs*a,h=d-(d-a),m=a-h,d=Qs*c,p=d-(d-c),g=c-p,_=m*g-(E-h*p-m*p-h*g),T=u*l,d=Qs*u,h=d-(d-u),m=u-h,d=Qs*l,p=d-(d-l),g=l-p,S=m*g-(T-h*p-m*p-h*g),v=_-S,f=_-v,Na[0]=_-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-T,f=w-v,Na[1]=w-(v+f)+(f-T),D=b+v,f=D-b,Na[2]=b-(D-f)+(v-f),Na[3]=D;const Q=E8(V,soe,4,Na,aoe);return aoe[Q-1]}function HD(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),u=s-a,l=Math.abs(s+a);return Math.abs(u)>=$ut*l?u:-jut(e,t,n,r,i,o,l)}const uoe=Math.pow(2,-52),qD=new Uint32Array(512);class d3{static from(t,n=qut,r=Wut){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new d3(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<s;k++){const R=t[2*k],O=t[2*k+1];R<a&&(a=R),O<u&&(u=O),R>l&&(l=R),O>c&&(c=O),this._ids[k]=k}const f=(a+l)/2,d=(u+c)/2;let h,m,p;for(let k=0,R=1/0;k<s;k++){const O=_8(f,d,t[2*k],t[2*k+1]);O<R&&(h=k,R=O)}const g=t[2*h],v=t[2*h+1];for(let k=0,R=1/0;k<s;k++){if(k===h)continue;const O=_8(g,v,t[2*k],t[2*k+1]);O<R&&O>0&&(m=k,R=O)}let b=t[2*m],w=t[2*m+1],E=1/0;for(let k=0;k<s;k++){if(k===h||k===m)continue;const R=Vut(g,v,b,w,t[2*k],t[2*k+1]);R<E&&(p=k,E=R)}let _=t[2*p],T=t[2*p+1];if(E===1/0){for(let O=0;O<s;O++)this._dists[O]=t[2*O]-t[0]||t[2*O+1]-t[1];Pb(this._ids,this._dists,0,s-1);const k=new Uint32Array(s);let R=0;for(let O=0,M=-1/0;O<s;O++){const F=this._ids[O],L=this._dists[F];L>M&&(k[R++]=F,M=L)}this.hull=k.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(HD(g,v,b,w,_,T)<0){const k=m,R=b,O=w;m=p,b=_,w=T,p=k,_=R,T=O}const S=Hut(g,v,b,w,_,T);this._cx=S.x,this._cy=S.y;for(let k=0;k<s;k++)this._dists[k]=_8(t[2*k],t[2*k+1],S.x,S.y);Pb(this._ids,this._dists,0,s-1),this._hullStart=h;let D=3;r[h]=n[p]=m,r[m]=n[h]=p,r[p]=n[m]=h,i[h]=0,i[m]=1,i[p]=2,o.fill(-1),o[this._hashKey(g,v)]=h,o[this._hashKey(b,w)]=m,o[this._hashKey(_,T)]=p,this.trianglesLen=0,this._addTriangle(h,m,p,-1,-1,-1);for(let k=0,R,O;k<this._ids.length;k++){const M=this._ids[k],F=t[2*M],L=t[2*M+1];if(k>0&&Math.abs(F-R)<=uoe&&Math.abs(L-O)<=uoe||(R=F,O=L,M===h||M===m||M===p))continue;let H=0;for(let U=0,B=this._hashKey(F,L);U<this._hashSize&&(H=o[(B+U)%this._hashSize],!(H!==-1&&H!==r[H]));U++);H=n[H];let V=H,Q;for(;Q=r[V],HD(F,L,t[2*V],t[2*V+1],t[2*Q],t[2*Q+1])>=0;)if(V=Q,V===H){V=-1;break}if(V===-1)continue;let K=this._addTriangle(V,M,r[V],-1,-1,i[V]);i[M]=this._legalize(K+2),i[V]=K,D++;let Z=r[V];for(;Q=r[Z],HD(F,L,t[2*Z],t[2*Z+1],t[2*Q],t[2*Q+1])<0;)K=this._addTriangle(Z,M,Q,i[M],-1,i[Z]),i[M]=this._legalize(K+2),r[Z]=Z,D--,Z=Q;if(V===H)for(;Q=n[V],HD(F,L,t[2*Q],t[2*Q+1],t[2*V],t[2*V+1])<0;)K=this._addTriangle(Q,M,V,-1,i[V],i[Q]),this._legalize(K+2),i[Q]=K,r[V]=V,D--,V=Q;this._hullStart=n[M]=V,r[V]=n[Z]=M,r[M]=Z,o[this._hashKey(F,L)]=M,o[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(D);for(let k=0,R=this._hullStart;k<D;k++)this.hull[k]=R,R=r[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(zut(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],u=t-t%3;if(s=u+(t+2)%3,a===-1){if(o===0)break;t=qD[--o];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[s],h=n[t],m=n[c],p=n[f];if(Uut(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1],i[2*p],i[2*p+1])){n[t]=p,n[a]=d;const v=r[f];if(v===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,v),this._link(a,r[s]),this._link(s,f);const b=l+(a+1)%3;o<qD.length&&(qD[o++]=b)}else{if(o===0)break;t=qD[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function zut(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function _8(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function Uut(e,t,n,r,i,o,s,a){const u=e-s,l=t-a,c=n-s,f=r-a,d=i-s,h=o-a,m=u*u+l*l,p=c*c+f*f,g=d*d+h*h;return u*(f*g-p*h)-l*(c*g-p*d)+m*(c*h-f*d)<0}function Vut(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=(l*c-a*f)*d,m=(s*f-u*c)*d;return h*h+m*m}function Hut(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=e+(l*c-a*f)*d,m=t+(s*f-u*c)*d;return{x:h,y:m}}function Pb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;m_(e,i,o),t[e[n]]>t[e[r]]&&m_(e,n,r),t[e[o]]>t[e[r]]&&m_(e,o,r),t[e[n]]>t[e[o]]&&m_(e,n,o);const a=e[o],u=t[a];for(;;){do o++;while(t[e[o]]<u);do s--;while(t[e[s]]>u);if(s<o)break;m_(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Pb(e,t,o,r),Pb(e,t,n,s-1)):(Pb(e,t,n,s-1),Pb(e,t,o,r))}}function m_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qut(e){return e[0]}function Wut(e){return e[1]}const loe=1e-6;class Sy{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>loe||Math.abs(this._y1-o)>loe)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class l7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Gut=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let p=0,g=0,v=r.length,b,w;p<v;p+=3,g+=2){const E=r[p]*2,_=r[p+1]*2,T=r[p+2]*2,S=t[E],D=t[E+1],k=t[_],R=t[_+1],O=t[T],M=t[T+1],F=k-S,L=R-D,H=O-S,V=M-D,Q=(F*V-L*H)*2;if(Math.abs(Q)<1e-9){if(o===void 0){o=s=0;for(const Z of n)o+=t[Z*2],s+=t[Z*2+1];o/=n.length,s/=n.length}const K=1e9*Math.sign((o-S)*V-(s-D)*H);b=(S+O)/2-K*V,w=(D+M)/2+K*H}else{const K=1/Q,Z=F*F+L*L,U=H*H+V*V;b=S+(V*Z-L*U)*K,w=D+(F*U-H*Z)*K}a[g]=b,a[g+1]=w}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,m=t[2*u+1];i.fill(0);for(let p=0;p<n.length;++p)u=n[p],l=c,f=d,h=m,c=u*4,d=t[2*u],m=t[2*u+1],i[l+2]=i[c]=h-m,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Sy:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,m=Math.floor(d/3)*2,p=s[h],g=s[h+1],v=s[m],b=s[m+1];this._renderSegment(p,g,v,b,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=s[f],h=s[f+1],m=u*4,p=this._project(d,h,a[m+2],a[m+3]);p&&this._renderSegment(d,h,p[0],p[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Sy:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Sy:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new l7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,u))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+u-2)%u]&&n[(o+3)%s]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let u=s;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==s&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let m,p,g,v,b;if(l===0){if((m=this._clipSegment(o,s,a,u,l,c))===null)continue;[p,g,v,b]=m}else{if((m=this._clipSegment(a,u,o,s,c,l))===null)continue;[v,b,p,g]=m,f=d,d=this._edgecode(p,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(p,g):i=[p,g]}f=d,d=this._edgecode(v,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,b):i=[v,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let u,l,c=o||s;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),o?(t=u,n=l,o=this._regioncode(t,n)):(r=u,i=l,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,u;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(u=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(u=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,u=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,u=n+(o=s)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Yut=2*Math.PI,Qv=Math.pow;function Kut(e){return e[0]}function Xut(e){return e[1]}function Qut(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function Jut(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Xq{static from(t,n=Kut,r=Xut,i){return new Xq("length"in t?Zut(t,n,r,i):Float64Array.from(elt(t,n,r,i)))}constructor(t){this._delaunator=new d3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Qut(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const m=Jut(n[2*d],n[2*d+1],f);n[2*d]=m[0],n[2*d+1]=m[1]}this._delaunator=new d3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3===2?u-2:u+1];(r[u]===-1||s[c]===-1)&&(s[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Gut(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Qv(n-l[t*2],2)+Qv(r-l[t*2+1],2);const d=i[t];let h=d;do{let m=u[h];const p=Qv(n-l[m*2],2)+Qv(r-l[m*2+1],2);if(p<f&&(f=p,c=m),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==m&&Qv(n-l[h*2],2)+Qv(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Sy:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const u=i[s];if(u<s)continue;const l=o[s]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Sy:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],u=i[o+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Yut)}return r&&r.value()}renderHull(t){const n=t==null?t=new Sy:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new l7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Sy:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new l7;return this.renderTriangle(t,n),n.value()}}function Zut(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*elt(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var coe={},T8={},C8=34,g_=10,S8=13;function tlt(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function foe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function vu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function nlt(e){return e<0?"-"+vu(-e,6):e>9999?"+"+vu(e,6):vu(e,4)}function rlt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":nlt(e.getUTCFullYear())+"-"+vu(e.getUTCMonth()+1,2)+"-"+vu(e.getUTCDate(),2)+(i?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"."+vu(i,3)+"Z":r?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"Z":n||t?"T"+vu(t,2)+":"+vu(n,2)+"Z":"")}function ilt(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,m,p=i(f,function(g,v){if(h)return h(g,v-1);m=g,h=tlt(g)});return p.columns=m||[],p}function i(f,d){var h=[],m=f.length,p=0,g=0,v,b=m<=0,w=!1;f.charCodeAt(m-1)===g_&&--m,f.charCodeAt(m-1)===S8&&--m;function E(){if(b)return T8;if(w)return w=!1,coe;var T,S=p,D;if(f.charCodeAt(S)===C8){for(;p++<m&&f.charCodeAt(p)!==C8||f.charCodeAt(++p)===C8;);return(T=p)>=m?b=!0:(D=f.charCodeAt(p++))===g_?w=!0:D===S8&&(w=!0,f.charCodeAt(p)===g_&&++p),f.slice(S+1,T-1).replace(/""/g,'"')}for(;p<m;){if((D=f.charCodeAt(T=p++))===g_)w=!0;else if(D===S8)w=!0,f.charCodeAt(p)===g_&&++p;else if(D!==n)continue;return f.slice(S,T)}return b=!0,f.slice(S,m)}for(;(v=E())!==T8;){for(var _=[];v!==coe&&v!==T8;)_.push(v),v=E();d&&(_=d(_,g++))==null||h.push(_)}return h}function o(f,d){return f.map(function(h){return d.map(function(m){return c(h[m])}).join(e)})}function s(f,d){return d==null&&(d=foe(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=foe(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?rlt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function olt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-e)*r,l=(l/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function slt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Awe(this.cover(t,n),t,n,e)}function Awe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,m,p,g,v,b;if(!o)return e._root=s,e;for(;o.length;)if((p=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[v=g<<1|p]))return i[v]=s,e;if(h=+e._x.call(null,o.data),m=+e._y.call(null,o.data),t===h&&n===m)return s.next=o,i?i[v]=s:e._root=s,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(p=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((v=g<<1|p)===(b=(m>=d)<<1|h>=f));return i[b]=o,i[v]=s,e}function alt(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Awe(this,s[n],a[n],e[n]);return this}function ult(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function llt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function clt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function za(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function flt(e,t,n){var r,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,m,p;for(h&&d.push(new za(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);m=d.pop();)if(!(!(h=m.node)||(s=m.x0)>c||(a=m.y0)>f||(u=m.x1)<i||(l=m.y1)<o))if(h.length){var g=(s+u)/2,v=(a+l)/2;d.push(new za(h[3],g,v,u,l),new za(h[2],s,v,g,l),new za(h[1],g,a,u,v),new za(h[0],s,a,g,v)),(p=(t>=v)<<1|e>=g)&&(m=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=m)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var _=Math.sqrt(n=E);i=e-_,o=t-_,c=e+_,f=t+_,r=h.data}}return r}function dlt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,m,p,g,v;if(!n)return this;if(n.length)for(;;){if((m=c>=(d=(s+u)/2))?s=d:u=d,(p=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=p<<1|m]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function hlt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function plt(){return this._root}function mlt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function glt(e){var t=[],n,r=this._root,i,o,s,a,u;for(r&&t.push(new za(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(o+a)/2,c=(s+u)/2;(i=r[3])&&t.push(new za(i,l,c,a,u)),(i=r[2])&&t.push(new za(i,o,c,l,u)),(i=r[1])&&t.push(new za(i,l,s,a,c)),(i=r[0])&&t.push(new za(i,o,s,l,c))}return this}function ylt(e){var t=[],n=[],r;for(this._root&&t.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&t.push(new za(o,s,a,c,f)),(o=i[1])&&t.push(new za(o,c,a,u,f)),(o=i[2])&&t.push(new za(o,s,f,c,l)),(o=i[3])&&t.push(new za(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function vlt(e){return e[0]}function blt(e){return arguments.length?(this._x=e,this):this._x}function xlt(e){return e[1]}function wlt(e){return arguments.length?(this._y=e,this):this._y}function Qq(e,t,n){var r=new Jq(t??vlt,n??xlt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Jq(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function doe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var nu=Qq.prototype=Jq.prototype;nu.copy=function(){var e=new Jq(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=doe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=doe(r));return e};nu.add=slt;nu.addAll=alt;nu.cover=ult;nu.data=llt;nu.extent=clt;nu.find=flt;nu.remove=dlt;nu.removeAll=hlt;nu.root=plt;nu.size=mlt;nu.visit=glt;nu.visitAfter=ylt;nu.x=blt;nu.y=wlt;function Ha(e){return function(){return e}}function Gm(e){return(e()-.5)*1e-6}function Elt(e){return e.x+e.vx}function _lt(e){return e.y+e.vy}function Tlt(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Ha(e==null?1:+e));function s(){for(var l,c=t.length,f,d,h,m,p,g,v=0;v<o;++v)for(f=Qq(t,Elt,_lt).visitAfter(a),l=0;l<c;++l)d=t[l],p=n[d.index],g=p*p,h=d.x+d.vx,m=d.y+d.vy,f.visit(b);function b(w,E,_,T,S){var D=w.data,k=w.r,R=p+k;if(D){if(D.index>d.index){var O=h-D.x-D.vx,M=m-D.y-D.vy,F=O*O+M*M;F<R*R&&(O===0&&(O=Gm(r),F+=O*O),M===0&&(M=Gm(r),F+=M*M),F=(R-(F=Math.sqrt(F)))/F*i,d.vx+=(O*=F)*(R=(k*=k)/(g+k)),d.vy+=(M*=F)*R,D.vx-=O*(R=1-R),D.vy-=M*R)}return}return E>h+R||T<h-R||_>m+R||S<m-R}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ha(+l),u(),s):e},s}function Clt(e){return e.index}function hoe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Slt(e){var t=Clt,n=f,r,i=Ha(30),o,s,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var v=0,b=e.length;v<c;++v)for(var w=0,E,_,T,S,D,k,R;w<b;++w)E=e[w],_=E.source,T=E.target,S=T.x+T.vx-_.x-_.vx||Gm(l),D=T.y+T.vy-_.y-_.vy||Gm(l),k=Math.sqrt(S*S+D*D),k=(k-o[w])/k*g*r[w],S*=k,D*=k,T.vx-=S*(R=u[w]),T.vy-=D*R,_.vx+=S*(R=1-R),_.vy+=D*R}function h(){if(s){var g,v=s.length,b=e.length,w=new Map(s.map((_,T)=>[t(_,T,s),_])),E;for(g=0,a=new Array(v);g<b;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=hoe(w,E.source)),typeof E.target!="object"&&(E.target=hoe(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),m(),o=new Array(b),p()}}function m(){if(s)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function p(){if(s)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){s=g,l=v,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ha(+g),m(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ha(+g),p(),d):i},d}const Alt=1664525,Dlt=1013904223,poe=4294967296;function klt(){let e=1;return()=>(e=(Alt*e+Dlt)%poe)/poe}function Ilt(e){return e.x}function Rlt(e){return e.y}var Nlt=10,Plt=Math.PI*(3-Math.sqrt(5));function Olt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=Wq(f),l=$q("tick","end"),c=klt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(p){var g,v=e.length,b;p===void 0&&(p=1);for(var w=0;w<p;++w)for(n+=(o-n)*i,a.forEach(function(E){E(n)}),g=0;g<v;++g)b=e[g],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return t}function h(){for(var p=0,g=e.length,v;p<g;++p){if(v=e[p],v.index=p,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var b=Nlt*Math.sqrt(.5+p),w=p*Plt;v.x=b*Math.cos(w),v.y=b*Math.sin(w)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function m(p){return p.initialize&&p.initialize(e,c),p}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(p){return arguments.length?(e=p,h(),a.forEach(m),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(r=+p,t):r},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(o=+p,t):o},velocityDecay:function(p){return arguments.length?(s=1-p,t):1-s},randomSource:function(p){return arguments.length?(c=p,a.forEach(m),t):c},force:function(p,g){return arguments.length>1?(g==null?a.delete(p):a.set(p,m(g)),t):a.get(p)},find:function(p,g,v){var b=0,w=e.length,E,_,T,S,D;for(v==null?v=1/0:v*=v,b=0;b<w;++b)S=e[b],E=p-S.x,_=g-S.y,T=E*E+_*_,T<v&&(D=S,v=T);return D},on:function(p,g){return arguments.length>1?(l.on(p,g),t):l.on(p)}}}function Flt(){var e,t,n,r,i=Ha(-30),o,s=1,a=1/0,u=.81;function l(h){var m,p=e.length,g=Qq(e,Ilt,Rlt).visitAfter(f);for(r=h,m=0;m<p;++m)t=e[m],g.visit(d)}function c(){if(e){var h,m=e.length,p;for(o=new Array(m),h=0;h<m;++h)p=e[h],o[p.index]=+i(p,h,e)}}function f(h){var m=0,p,g,v=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(p=h[E])&&(g=Math.abs(p.value))&&(m+=p.value,v+=g,b+=g*p.x,w+=g*p.y);h.x=b/v,h.y=w/v}else{p=h,p.x=p.data.x,p.y=p.data.y;do m+=o[p.data.index];while(p=p.next)}h.value=m}function d(h,m,p,g){if(!h.value)return!0;var v=h.x-t.x,b=h.y-t.y,w=g-m,E=v*v+b*b;if(w*w/u<E)return E<a&&(v===0&&(v=Gm(n),E+=v*v),b===0&&(b=Gm(n),E+=b*b),E<s&&(E=Math.sqrt(s*E)),t.vx+=v*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(v===0&&(v=Gm(n),E+=v*v),b===0&&(b=Gm(n),E+=b*b),E<s&&(E=Math.sqrt(s*E)));do h.data!==t&&(w=o[h.data.index]*r/E,t.vx+=v*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,m){e=h,n=m,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ha(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Mlt(e){var t=Ha(.1),n,r,i;typeof e!="function"&&(e=Ha(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ha(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ha(+a),s(),o):e},o}function $lt(e){var t=Ha(.1),n,r,i;typeof e!="function"&&(e=Ha(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ha(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ha(+a),s(),o):e},o}function Llt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function h3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Px(e){return e=h3(Math.abs(e)),e?e[1]:NaN}function Blt(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function jlt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var zlt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qy(e){if(!(t=zlt.exec(e)))throw new Error("invalid format: "+e);var t;return new Zq({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qy.prototype=Zq.prototype;function Zq(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ult(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Dwe;function Vlt(e,t){var n=h3(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Dwe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+h3(e,Math.max(0,t+o-1))[0]}function moe(e,t){var n=h3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const goe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Llt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>moe(e*100,t),r:moe,s:Vlt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yoe(e){return e}var voe=Array.prototype.map,boe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function kwe(e){var t=e.grouping===void 0||e.thousands===void 0?yoe:Blt(voe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?yoe:jlt(voe.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Qy(f);var d=f.fill,h=f.align,m=f.sign,p=f.symbol,g=f.zero,v=f.width,b=f.comma,w=f.precision,E=f.trim,_=f.type;_==="n"?(b=!0,_="g"):goe[_]||(w===void 0&&(w=12),E=!0,_="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=p==="$"?r:/[%p]/.test(_)?s:"",D=goe[_],k=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R(O){var M=T,F=S,L,H,V;if(_==="c")F=D(O)+F,O="";else{O=+O;var Q=O<0||1/O<0;if(O=isNaN(O)?u:D(Math.abs(O),w),E&&(O=Ult(O)),Q&&+O==0&&m!=="+"&&(Q=!1),M=(Q?m==="("?m:a:m==="-"||m==="("?"":m)+M,F=(_==="s"?boe[8+Dwe/3]:"")+F+(Q&&m==="("?")":""),k){for(L=-1,H=O.length;++L<H;)if(V=O.charCodeAt(L),48>V||V>57){F=(V===46?i+O.slice(L+1):O.slice(L))+F,O=O.slice(0,L);break}}}b&&!g&&(O=t(O,1/0));var K=M.length+O.length+F.length,Z=K<v?new Array(v-K+1).join(d):"";switch(b&&g&&(O=t(Z+O,Z.length?v-F.length:1/0),Z=""),h){case"<":O=M+O+F+Z;break;case"=":O=M+Z+O+F;break;case"^":O=Z.slice(0,K=Z.length>>1)+M+O+F+Z.slice(K);break;default:O=Z+M+O+F;break}return o(O)}return R.toString=function(){return f+""},R}function c(f,d){var h=l((f=Qy(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Px(d)/3)))*3,p=Math.pow(10,-m),g=boe[8+m/3];return function(v){return h(p*v)+g}}return{format:l,formatPrefix:c}}var WD,jO,eW;Hlt({thousands:",",grouping:[3],currency:["$",""]});function Hlt(e){return WD=kwe(e),jO=WD.format,eW=WD.formatPrefix,WD}function Iwe(e){return Math.max(0,-Px(Math.abs(e)))}function Rwe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Px(t)/3)))*3-Px(Math.abs(e)))}function Nwe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Px(t)-Px(e))+1}var cn=1e-6,c7=1e-12,zn=Math.PI,Vi=zn/2,p3=zn/4,Qa=zn*2,Xi=180/zn,Ln=zn/180,Zn=Math.abs,eE=Math.atan,pc=Math.atan2,sn=Math.cos,GD=Math.ceil,Pwe=Math.exp,f7=Math.hypot,m3=Math.log,A8=Math.pow,Jt=Math.sin,oc=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,tW=Math.tan;function Owe(e){return e>1?0:e<-1?zn:Math.acos(e)}function Pu(e){return e>1?Vi:e<-1?-Vi:Math.asin(e)}function Ps(){}function g3(e,t){e&&woe.hasOwnProperty(e.type)&&woe[e.type](e,t)}var xoe={Feature:function(e,t){g3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)g3(n[r].geometry,t)}},woe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){d7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)d7(n[r],t,0)},Polygon:function(e,t){Eoe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Eoe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)g3(n[r],t)}};function d7(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Eoe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)d7(e[n],t,1);t.polygonEnd()}function qh(e,t){e&&xoe.hasOwnProperty(e.type)?xoe[e.type](e,t):g3(e,t)}var y3=new Ya,v3=new Ya,Fwe,Mwe,h7,p7,m7,zd={point:Ps,lineStart:Ps,lineEnd:Ps,polygonStart:function(){y3=new Ya,zd.lineStart=qlt,zd.lineEnd=Wlt},polygonEnd:function(){var e=+y3;v3.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=Ps},sphere:function(){v3.add(Qa)}};function qlt(){zd.point=Glt}function Wlt(){$we(Fwe,Mwe)}function Glt(e,t){zd.point=$we,Fwe=e,Mwe=t,e*=Ln,t*=Ln,h7=e,p7=sn(t=t/2+p3),m7=Jt(t)}function $we(e,t){e*=Ln,t*=Ln,t=t/2+p3;var n=e-h7,r=n>=0?1:-1,i=r*n,o=sn(t),s=Jt(t),a=m7*s,u=p7*o+a*sn(i),l=a*r*Jt(i);y3.add(pc(l,u)),h7=e,p7=o,m7=s}function Ylt(e){return v3=new Ya,qh(e,zd),v3*2}function b3(e){return[pc(e[1],e[0]),Pu(e[2])]}function Jy(e){var t=e[0],n=e[1],r=sn(n);return[r*sn(t),r*Jt(t),Jt(n)]}function YD(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ox(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function D8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function KD(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function x3(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ai,Eu,$i,al,iy,Lwe,Bwe,tx,eT,Om,Pp,jh={point:g7,lineStart:_oe,lineEnd:Toe,polygonStart:function(){jh.point=zwe,jh.lineStart=Klt,jh.lineEnd=Xlt,eT=new Ya,zd.polygonStart()},polygonEnd:function(){zd.polygonEnd(),jh.point=g7,jh.lineStart=_oe,jh.lineEnd=Toe,y3<0?(Ai=-($i=180),Eu=-(al=90)):eT>cn?al=90:eT<-1e-6&&(Eu=-90),Pp[0]=Ai,Pp[1]=$i},sphere:function(){Ai=-($i=180),Eu=-(al=90)}};function g7(e,t){Om.push(Pp=[Ai=e,$i=e]),t<Eu&&(Eu=t),t>al&&(al=t)}function jwe(e,t){var n=Jy([e*Ln,t*Ln]);if(tx){var r=Ox(tx,n),i=[r[1],-r[0],0],o=Ox(i,r);x3(o),o=b3(o);var s=e-iy,a=s>0?1:-1,u=o[0]*Xi*a,l,c=Zn(s)>180;c^(a*iy<u&&u<a*e)?(l=o[1]*Xi,l>al&&(al=l)):(u=(u+360)%360-180,c^(a*iy<u&&u<a*e)?(l=-o[1]*Xi,l<Eu&&(Eu=l)):(t<Eu&&(Eu=t),t>al&&(al=t))),c?e<iy?ol(Ai,e)>ol(Ai,$i)&&($i=e):ol(e,$i)>ol(Ai,$i)&&(Ai=e):$i>=Ai?(e<Ai&&(Ai=e),e>$i&&($i=e)):e>iy?ol(Ai,e)>ol(Ai,$i)&&($i=e):ol(e,$i)>ol(Ai,$i)&&(Ai=e)}else Om.push(Pp=[Ai=e,$i=e]);t<Eu&&(Eu=t),t>al&&(al=t),tx=n,iy=e}function _oe(){jh.point=jwe}function Toe(){Pp[0]=Ai,Pp[1]=$i,jh.point=g7,tx=null}function zwe(e,t){if(tx){var n=e-iy;eT.add(Zn(n)>180?n+(n>0?360:-360):n)}else Lwe=e,Bwe=t;zd.point(e,t),jwe(e,t)}function Klt(){zd.lineStart()}function Xlt(){zwe(Lwe,Bwe),zd.lineEnd(),Zn(eT)>cn&&(Ai=-($i=180)),Pp[0]=Ai,Pp[1]=$i,tx=null}function ol(e,t){return(t-=e)<0?t+360:t}function Qlt(e,t){return e[0]-t[0]}function Coe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Jlt(e){var t,n,r,i,o,s,a;if(al=$i=-(Ai=Eu=1/0),Om=[],qh(e,jh),n=Om.length){for(Om.sort(Qlt),t=1,r=Om[0],o=[r];t<n;++t)i=Om[t],Coe(r,i[0])||Coe(r,i[1])?(ol(r[0],i[1])>ol(r[0],r[1])&&(r[1]=i[1]),ol(i[0],r[1])>ol(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=ol(r[1],i[0]))>s&&(s=a,Ai=i[0],$i=r[1])}return Om=Pp=null,Ai===1/0||Eu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ai,Eu],[$i,al]]}var r2,w3,E3,_3,T3,C3,S3,A3,y7,v7,b7,Uwe,Vwe,La,Ba,ja,rf={sphere:Ps,point:nW,lineStart:Soe,lineEnd:Aoe,polygonStart:function(){rf.lineStart=tct,rf.lineEnd=nct},polygonEnd:function(){rf.lineStart=Soe,rf.lineEnd=Aoe}};function nW(e,t){e*=Ln,t*=Ln;var n=sn(t);yS(n*sn(e),n*Jt(e),Jt(t))}function yS(e,t,n){++r2,E3+=(e-E3)/r2,_3+=(t-_3)/r2,T3+=(n-T3)/r2}function Soe(){rf.point=Zlt}function Zlt(e,t){e*=Ln,t*=Ln;var n=sn(t);La=n*sn(e),Ba=n*Jt(e),ja=Jt(t),rf.point=ect,yS(La,Ba,ja)}function ect(e,t){e*=Ln,t*=Ln;var n=sn(t),r=n*sn(e),i=n*Jt(e),o=Jt(t),s=pc(Ja((s=Ba*o-ja*i)*s+(s=ja*r-La*o)*s+(s=La*i-Ba*r)*s),La*r+Ba*i+ja*o);w3+=s,C3+=s*(La+(La=r)),S3+=s*(Ba+(Ba=i)),A3+=s*(ja+(ja=o)),yS(La,Ba,ja)}function Aoe(){rf.point=nW}function tct(){rf.point=rct}function nct(){Hwe(Uwe,Vwe),rf.point=nW}function rct(e,t){Uwe=e,Vwe=t,e*=Ln,t*=Ln,rf.point=Hwe;var n=sn(t);La=n*sn(e),Ba=n*Jt(e),ja=Jt(t),yS(La,Ba,ja)}function Hwe(e,t){e*=Ln,t*=Ln;var n=sn(t),r=n*sn(e),i=n*Jt(e),o=Jt(t),s=Ba*o-ja*i,a=ja*r-La*o,u=La*i-Ba*r,l=f7(s,a,u),c=Pu(l),f=l&&-c/l;y7.add(f*s),v7.add(f*a),b7.add(f*u),w3+=c,C3+=c*(La+(La=r)),S3+=c*(Ba+(Ba=i)),A3+=c*(ja+(ja=o)),yS(La,Ba,ja)}function ict(e){r2=w3=E3=_3=T3=C3=S3=A3=0,y7=new Ya,v7=new Ya,b7=new Ya,qh(e,rf);var t=+y7,n=+v7,r=+b7,i=f7(t,n,r);return i<c7&&(t=C3,n=S3,r=A3,w3<cn&&(t=E3,n=_3,r=T3),i=f7(t,n,r),i<c7)?[NaN,NaN]:[pc(n,t)*Xi,Pu(r/i)*Xi]}function x7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function w7(e,t){return Zn(e)>zn&&(e-=Math.round(e/Qa)*Qa),[e,t]}w7.invert=w7;function qwe(e,t,n){return(e%=Qa)?t||n?x7(koe(e),Ioe(t,n)):koe(e):t||n?Ioe(t,n):w7}function Doe(e){return function(t,n){return t+=e,Zn(t)>zn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function koe(e){var t=Doe(e);return t.invert=Doe(-e),t}function Ioe(e,t){var n=sn(e),r=Jt(e),i=sn(t),o=Jt(t);function s(a,u){var l=sn(u),c=sn(a)*l,f=Jt(a)*l,d=Jt(u),h=d*n+c*r;return[pc(f*i-h*o,c*n-d*r),Pu(h*i+f*o)]}return s.invert=function(a,u){var l=sn(u),c=sn(a)*l,f=Jt(a)*l,d=Jt(u),h=d*i-f*o;return[pc(f*i+d*o,c*n+h*r),Pu(h*n-c*r)]},s}function oct(e){e=qwe(e[0]*Ln,e[1]*Ln,e.length>2?e[2]*Ln:0);function t(n){return n=e(n[0]*Ln,n[1]*Ln),n[0]*=Xi,n[1]*=Xi,n}return t.invert=function(n){return n=e.invert(n[0]*Ln,n[1]*Ln),n[0]*=Xi,n[1]*=Xi,n},t}function sct(e,t,n,r,i,o){if(n){var s=sn(t),a=Jt(t),u=r*n;i==null?(i=t+r*Qa,o=t-u/2):(i=Roe(s,i),o=Roe(s,o),(r>0?i<o:i>o)&&(i+=r*Qa));for(var l,c=i;r>0?c>o:c<o;c-=u)l=b3([s,-a*sn(c),-a*Jt(c)]),e.point(l[0],l[1])}}function Roe(e,t){t=Jy(t),t[0]-=e,x3(t);var n=Owe(-t[1]);return((-t[2]<0?-n:n)+Qa-cn)%Qa}function Wwe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ps,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function eR(e,t){return Zn(e[0]-t[0])<cn&&Zn(e[1]-t[1])<cn}function XD(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Gwe(e,t,n,r,i){var o=[],s=[],a,u;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],v=m[p],b;if(eR(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),a=0;a<p;++a)i.point((g=m[a])[0],g[1]);i.lineEnd();return}v[0]+=2*cn}o.push(b=new XD(g,m,null,!0)),s.push(b.o=new XD(g,null,b,!1)),o.push(b=new XD(v,m,null,!1)),s.push(b.o=new XD(v,null,b,!0))}}),!!o.length){for(s.sort(t),Noe(o),Noe(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Noe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function k8(e){return Zn(e[0])<=zn?e[0]:oc(e[0])*((Zn(e[0])+zn)%Qa-zn)}function act(e,t){var n=k8(t),r=t[1],i=Jt(r),o=[Jt(n),-sn(n),0],s=0,a=0,u=new Ya;i===1?r=Vi+cn:i===-1&&(r=-Vi-cn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],m=k8(h),p=h[1]/2+p3,g=Jt(p),v=sn(p),b=0;b<d;++b,m=E,g=T,v=S,h=w){var w=f[b],E=k8(w),_=w[1]/2+p3,T=Jt(_),S=sn(_),D=E-m,k=D>=0?1:-1,R=k*D,O=R>zn,M=g*T;if(u.add(pc(M*k*Jt(R),v*S+M*sn(R))),s+=O?D+k*Qa:D,O^m>=n^E>=n){var F=Ox(Jy(h),Jy(w));x3(F);var L=Ox(o,F);x3(L);var H=(O^D>=0?-1:1)*Pu(L[2]);(r>H||r===H&&(F[0]||F[1]))&&(a+=O^D>=0?1:-1)}}return(s<-1e-6||s<cn&&u<-1e-12)^a&1}function Ywe(e,t,n,r){return function(i){var o=t(i),s=Wwe(),a=t(s),u=!1,l,c,f,d={point:h,lineStart:p,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=w,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=p,d.lineEnd=g,c=Ixe(c);var E=act(l,r);c.length?(u||(i.polygonStart(),u=!0),Gwe(c,lct,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,_){e(E,_)&&i.point(E,_)}function m(E,_){o.point(E,_)}function p(){d.point=m,o.lineStart()}function g(){d.point=h,o.lineEnd()}function v(E,_){f.push([E,_]),a.point(E,_)}function b(){a.lineStart(),f=[]}function w(){v(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),_=s.result(),T,S=_.length,D,k,R;if(f.pop(),l.push(f),f=null,!!S){if(E&1){if(k=_[0],(D=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<D;++T)i.point((R=k[T])[0],R[1]);i.lineEnd()}return}S>1&&E&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(uct))}}return d}}function uct(e){return e.length>1}function lct(e,t){return((e=e.x)[0]<0?e[1]-Vi-cn:Vi-e[1])-((t=t.x)[0]<0?t[1]-Vi-cn:Vi-t[1])}const Poe=Ywe(function(){return!0},cct,dct,[-zn,-Vi]);function cct(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?zn:-zn,u=Zn(o-t);Zn(u-zn)<cn?(e.point(t,n=(n+s)/2>0?Vi:-Vi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&u>=zn&&(Zn(t-r)<cn&&(t-=r*cn),Zn(o-a)<cn&&(o-=a*cn),n=fct(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function fct(e,t,n,r){var i,o,s=Jt(e-n);return Zn(s)>cn?eE((Jt(t)*(o=sn(r))*Jt(n)-Jt(r)*(i=sn(t))*Jt(e))/(i*o*s)):(t+r)/2}function dct(e,t,n,r){var i;if(e==null)i=n*Vi,r.point(-zn,i),r.point(0,i),r.point(zn,i),r.point(zn,0),r.point(zn,-i),r.point(0,-i),r.point(-zn,-i),r.point(-zn,0),r.point(-zn,i);else if(Zn(e[0]-t[0])>cn){var o=e[0]<t[0]?zn:-zn;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function hct(e){var t=sn(e),n=2*Ln,r=t>0,i=Zn(t)>cn;function o(c,f,d,h){sct(h,e,n,d,c,f)}function s(c,f){return sn(c)*sn(f)>t}function a(c){var f,d,h,m,p;return{lineStart:function(){m=h=!1,p=1},point:function(g,v){var b=[g,v],w,E=s(g,v),_=r?E?0:l(g,v):E?l(g+(g<0?zn:-zn),v):0;if(!f&&(m=h=E)&&c.lineStart(),E!==h&&(w=u(f,b),(!w||eR(f,w)||eR(b,w))&&(b[2]=1)),E!==h)p=0,E?(c.lineStart(),w=u(b,f),c.point(w[0],w[1])):(w=u(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^E){var T;!(_&d)&&(T=u(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}E&&(!f||!eR(f,b))&&c.point(b[0],b[1]),f=b,h=E,d=_},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return p|(m&&h)<<1}}}function u(c,f,d){var h=Jy(c),m=Jy(f),p=[1,0,0],g=Ox(h,m),v=YD(g,g),b=g[0],w=v-b*b;if(!w)return!d&&c;var E=t*v/w,_=-t*b/w,T=Ox(p,g),S=KD(p,E),D=KD(g,_);D8(S,D);var k=T,R=YD(S,k),O=YD(k,k),M=R*R-O*(YD(S,S)-1);if(!(M<0)){var F=Ja(M),L=KD(k,(-R-F)/O);if(D8(L,S),L=b3(L),!d)return L;var H=c[0],V=f[0],Q=c[1],K=f[1],Z;V<H&&(Z=H,H=V,V=Z);var U=V-H,B=Zn(U-zn)<cn,q=B||U<cn;if(!B&&K<Q&&(Z=Q,Q=K,K=Z),q?B?Q+K>0^L[1]<(Zn(L[0]-H)<cn?Q:K):Q<=L[1]&&L[1]<=K:U>zn^(H<=L[0]&&L[0]<=V)){var z=KD(k,(-R+F)/O);return D8(z,S),[L,b3(z)]}}}function l(c,f){var d=r?e:zn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Ywe(s,a,o,r?[0,-e]:[-zn,e-zn])}function pct(e,t,n,r,i,o){var s=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-s,h=l-a,m;if(m=n-s,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=i-s,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}if(m=r-a,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=o-a,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var QD=1e9,JD=-1e9;function Kwe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var h=0,m=0;if(l==null||(h=s(l,f))!==(m=s(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==m);else d.point(c[0],c[1])}function s(l,c){return Zn(l[0]-e)<cn?c>0?0:3:Zn(l[0]-n)<cn?c>0?2:1:Zn(l[1]-t)<cn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=s(l,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Wwe(),d,h,m,p,g,v,b,w,E,_,T,S={point:D,lineStart:M,lineEnd:F,polygonStart:R,polygonEnd:O};function D(H,V){i(H,V)&&c.point(H,V)}function k(){for(var H=0,V=0,Q=h.length;V<Q;++V)for(var K=h[V],Z=1,U=K.length,B=K[0],q,z,G=B[0],X=B[1];Z<U;++Z)q=G,z=X,B=K[Z],G=B[0],X=B[1],z<=r?X>r&&(G-q)*(r-z)>(X-z)*(e-q)&&++H:X<=r&&(G-q)*(r-z)<(X-z)*(e-q)&&--H;return H}function R(){c=f,d=[],h=[],T=!0}function O(){var H=k(),V=T&&H,Q=(d=Ixe(d)).length;(V||Q)&&(l.polygonStart(),V&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),Q&&Gwe(d,a,H,o,l),l.polygonEnd()),c=l,d=h=m=null}function M(){S.point=L,h&&h.push(m=[]),_=!0,E=!1,b=w=NaN}function F(){d&&(L(p,g),v&&E&&f.rejoin(),d.push(f.result())),S.point=D,E&&c.lineEnd()}function L(H,V){var Q=i(H,V);if(h&&m.push([H,V]),_)p=H,g=V,v=Q,_=!1,Q&&(c.lineStart(),c.point(H,V));else if(Q&&E)c.point(H,V);else{var K=[b=Math.max(JD,Math.min(QD,b)),w=Math.max(JD,Math.min(QD,w))],Z=[H=Math.max(JD,Math.min(QD,H)),V=Math.max(JD,Math.min(QD,V))];pct(K,Z,e,t,n,r)?(E||(c.lineStart(),c.point(K[0],K[1])),c.point(Z[0],Z[1]),Q||c.lineEnd(),T=!1):Q&&(c.lineStart(),c.point(H,V),T=!1)}b=H,w=V,E=Q}return S}}function Ooe(e,t,n){var r=dl(e,t-cn,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function Foe(e,t,n){var r=dl(e,t-cn,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function mct(){var e,t,n,r,i,o,s,a,u=10,l=u,c=90,f=360,d,h,m,p,g=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return dl(GD(r/c)*c,n,c).map(m).concat(dl(GD(a/f)*f,s,f).map(p)).concat(dl(GD(t/u)*u,e,u).filter(function(w){return Zn(w%c)>cn}).map(d)).concat(dl(GD(o/l)*l,i,l).filter(function(w){return Zn(w%f)>cn}).map(h))}return v.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[m(r).concat(p(s).slice(1),m(n).reverse().slice(1),p(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],s=+w[1][1],r>n&&(w=r,r=n,n=w),a>s&&(w=a,a=s,s=w),v.precision(g)):[[r,a],[n,s]]},v.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],o=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),o>i&&(w=o,o=i,i=w),v.precision(g)):[[t,o],[e,i]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],v):[c,f]},v.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],v):[u,l]},v.precision=function(w){return arguments.length?(g=+w,d=Ooe(o,i,90),h=Foe(t,e,g),m=Ooe(a,s,90),p=Foe(r,n,g),v):g},v.extentMajor([[-180,-90+cn],[180,90-cn]]).extentMinor([[-180,-80-cn],[180,80+cn]])}const GT=e=>e;var I8=new Ya,E7=new Ya,Xwe,Qwe,_7,T7,Wh={point:Ps,lineStart:Ps,lineEnd:Ps,polygonStart:function(){Wh.lineStart=gct,Wh.lineEnd=vct},polygonEnd:function(){Wh.lineStart=Wh.lineEnd=Wh.point=Ps,I8.add(Zn(E7)),E7=new Ya},result:function(){var e=I8/2;return I8=new Ya,e}};function gct(){Wh.point=yct}function yct(e,t){Wh.point=Jwe,Xwe=_7=e,Qwe=T7=t}function Jwe(e,t){E7.add(T7*e-_7*t),_7=e,T7=t}function vct(){Jwe(Xwe,Qwe)}var Fx=1/0,D3=Fx,YT=-Fx,k3=YT,I3={point:bct,lineStart:Ps,lineEnd:Ps,polygonStart:Ps,polygonEnd:Ps,result:function(){var e=[[Fx,D3],[YT,k3]];return YT=k3=-(D3=Fx=1/0),e}};function bct(e,t){e<Fx&&(Fx=e),e>YT&&(YT=e),t<D3&&(D3=t),t>k3&&(k3=t)}var C7=0,S7=0,i2=0,R3=0,N3=0,Ob=0,A7=0,D7=0,o2=0,Zwe,eEe,dd,hd,ic={point:Zy,lineStart:Moe,lineEnd:$oe,polygonStart:function(){ic.lineStart=Ect,ic.lineEnd=_ct},polygonEnd:function(){ic.point=Zy,ic.lineStart=Moe,ic.lineEnd=$oe},result:function(){var e=o2?[A7/o2,D7/o2]:Ob?[R3/Ob,N3/Ob]:i2?[C7/i2,S7/i2]:[NaN,NaN];return C7=S7=i2=R3=N3=Ob=A7=D7=o2=0,e}};function Zy(e,t){C7+=e,S7+=t,++i2}function Moe(){ic.point=xct}function xct(e,t){ic.point=wct,Zy(dd=e,hd=t)}function wct(e,t){var n=e-dd,r=t-hd,i=Ja(n*n+r*r);R3+=i*(dd+e)/2,N3+=i*(hd+t)/2,Ob+=i,Zy(dd=e,hd=t)}function $oe(){ic.point=Zy}function Ect(){ic.point=Tct}function _ct(){tEe(Zwe,eEe)}function Tct(e,t){ic.point=tEe,Zy(Zwe=dd=e,eEe=hd=t)}function tEe(e,t){var n=e-dd,r=t-hd,i=Ja(n*n+r*r);R3+=i*(dd+e)/2,N3+=i*(hd+t)/2,Ob+=i,i=hd*e-dd*t,A7+=i*(dd+e),D7+=i*(hd+t),o2+=i*3,Zy(dd=e,hd=t)}function nEe(e){this._context=e}nEe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:Ps};var k7=new Ya,R8,rEe,iEe,s2,a2,KT={point:Ps,lineStart:function(){KT.point=Cct},lineEnd:function(){R8&&oEe(rEe,iEe),KT.point=Ps},polygonStart:function(){R8=!0},polygonEnd:function(){R8=null},result:function(){var e=+k7;return k7=new Ya,e}};function Cct(e,t){KT.point=oEe,rEe=s2=e,iEe=a2=t}function oEe(e,t){s2-=e,a2-=t,k7.add(Ja(s2*s2+a2*a2)),s2=e,a2=t}let Loe,P3,Boe,joe;class zoe{constructor(t){this._append=t==null?sEe:Sct(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Boe||this._append!==P3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Boe=r,P3=this._append,joe=this._,this._=i}this._+=joe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function sEe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Sct(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return sEe;if(t!==Loe){const n=10**t;Loe=t,P3=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return P3}function aEe(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),qh(a,i(o))),o.result()}return s.area=function(a){return qh(a,i(Wh)),Wh.result()},s.measure=function(a){return qh(a,i(KT)),KT.result()},s.bounds=function(a){return qh(a,i(I3)),I3.result()},s.centroid=function(a){return qh(a,i(ic)),ic.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,GT):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new zoe(n)):new nEe(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(o=new zoe(n)),s},s.projection(e).digits(n).context(t)}function zO(e){return function(t){var n=new I7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function I7(){}I7.prototype={constructor:I7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function rW(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),qh(n,e.stream(I3)),t(I3.result()),r!=null&&e.clipExtent(r),e}function UO(e,t,n){return rW(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,u])},n)}function iW(e,t,n){return UO(e,[[0,0],t],n)}function oW(e,t,n){return rW(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function sW(e,t,n){return rW(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var Uoe=16,Act=sn(30*Ln);function Voe(e,t){return+t?kct(e,t):Dct(e)}function Dct(e){return zO({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function kct(e,t){function n(r,i,o,s,a,u,l,c,f,d,h,m,p,g){var v=l-r,b=c-i,w=v*v+b*b;if(w>4*t&&p--){var E=s+d,_=a+h,T=u+m,S=Ja(E*E+_*_+T*T),D=Pu(T/=S),k=Zn(Zn(T)-1)<cn||Zn(o-f)<cn?(o+f)/2:pc(_,E),R=e(k,D),O=R[0],M=R[1],F=O-r,L=M-i,H=b*F-v*L;(H*H/w>t||Zn((v*F+b*L)/w-.5)>.3||s*d+a*h+u*m<Act)&&(n(r,i,o,s,a,u,O,M,k,E/=S,_/=S,T,p,g),g.point(O,M),n(O,M,k,E,_,T,l,c,f,d,h,m,p,g))}}return function(r){var i,o,s,a,u,l,c,f,d,h,m,p,g={point:v,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function v(D,k){D=e(D,k),r.point(D[0],D[1])}function b(){f=NaN,g.point=w,r.lineStart()}function w(D,k){var R=Jy([D,k]),O=e(D,k);n(f,d,c,h,m,p,f=O[0],d=O[1],c=D,h=R[0],m=R[1],p=R[2],Uoe,r),r.point(f,d)}function E(){g.point=v,r.lineEnd()}function _(){b(),g.point=T,g.lineEnd=S}function T(D,k){w(i=D,k),o=f,s=d,a=h,u=m,l=p,g.point=w}function S(){n(f,d,c,h,m,p,o,s,i,a,u,l,Uoe,r),g.lineEnd=E,E()}return g}}var Ict=zO({point:function(e,t){this.stream.point(e*Ln,t*Ln)}});function Rct(e){return zO({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Nct(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function Hoe(e,t,n,r,i,o){if(!o)return Nct(e,t,n,r,i);var s=sn(o),a=Jt(o),u=s*e,l=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function m(p,g){return p*=r,g*=i,[u*p-l*g+t,n-l*p-u*g]}return m.invert=function(p,g){return[r*(c*p-f*g+d),i*(h-f*p-c*g)]},m}function oh(e){return uEe(function(){return e})()}function uEe(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,u=0,l=0,c,f=0,d=1,h=1,m=null,p=Poe,g=null,v,b,w,E=GT,_=.5,T,S,D,k,R;function O(H){return D(H[0]*Ln,H[1]*Ln)}function M(H){return H=D.invert(H[0],H[1]),H&&[H[0]*Xi,H[1]*Xi]}O.stream=function(H){return k&&R===H?k:k=Ict(Rct(c)(p(T(E(R=H)))))},O.preclip=function(H){return arguments.length?(p=H,m=void 0,L()):p},O.postclip=function(H){return arguments.length?(E=H,g=v=b=w=null,L()):E},O.clipAngle=function(H){return arguments.length?(p=+H?hct(m=H*Ln):(m=null,Poe),L()):m*Xi},O.clipExtent=function(H){return arguments.length?(E=H==null?(g=v=b=w=null,GT):Kwe(g=+H[0][0],v=+H[0][1],b=+H[1][0],w=+H[1][1]),L()):g==null?null:[[g,v],[b,w]]},O.scale=function(H){return arguments.length?(n=+H,F()):n},O.translate=function(H){return arguments.length?(r=+H[0],i=+H[1],F()):[r,i]},O.center=function(H){return arguments.length?(o=H[0]%360*Ln,s=H[1]%360*Ln,F()):[o*Xi,s*Xi]},O.rotate=function(H){return arguments.length?(a=H[0]%360*Ln,u=H[1]%360*Ln,l=H.length>2?H[2]%360*Ln:0,F()):[a*Xi,u*Xi,l*Xi]},O.angle=function(H){return arguments.length?(f=H%360*Ln,F()):f*Xi},O.reflectX=function(H){return arguments.length?(d=H?-1:1,F()):d<0},O.reflectY=function(H){return arguments.length?(h=H?-1:1,F()):h<0},O.precision=function(H){return arguments.length?(T=Voe(S,_=H*H),L()):Ja(_)},O.fitExtent=function(H,V){return UO(O,H,V)},O.fitSize=function(H,V){return iW(O,H,V)},O.fitWidth=function(H,V){return oW(O,H,V)},O.fitHeight=function(H,V){return sW(O,H,V)};function F(){var H=Hoe(n,0,0,d,h,f).apply(null,t(o,s)),V=Hoe(n,r-H[0],i-H[1],d,h,f);return c=qwe(a,u,l),S=x7(t,V),D=x7(c,S),T=Voe(S,_),L()}function L(){return k=R=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&M,F()}}function aW(e){var t=0,n=zn/3,r=uEe(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ln,n=o[1]*Ln):[t*Xi,n*Xi]},i}function Pct(e){var t=sn(e);function n(r,i){return[r*t,Jt(i)/t]}return n.invert=function(r,i){return[r/t,Pu(i*t)]},n}function Oct(e,t){var n=Jt(e),r=(n+Jt(t))/2;if(Zn(r)<cn)return Pct(e);var i=1+n*(2*r-n),o=Ja(i)/r;function s(a,u){var l=Ja(i-2*r*Jt(u))/r;return[l*Jt(a*=r),o-l*sn(a)]}return s.invert=function(a,u){var l=o-u,c=pc(a,Zn(l))*oc(l);return l*r<0&&(c-=zn*oc(a)*oc(l)),[c/r,Pu((i-(a*a+l*l)*r*r)/(2*r))]},s}function O3(){return aW(Oct).scale(155.424).center([0,33.6442])}function lEe(){return O3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Fct(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Mct(){var e,t,n=lEe(),r,i=O3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=O3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],m=d[1];return u=null,r.point(h,m),u||(o.point(h,m),u)||(a.point(h,m),u)}c.invert=function(d){var h=n.scale(),m=n.translate(),p=(d[0]-m[0])/h,g=(d[1]-m[1])/h;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Fct([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),m=+d[0],p=+d[1];return r=n.translate(d).clipExtent([[m-.455*h,p-.238*h],[m+.455*h,p+.238*h]]).stream(l),o=i.translate([m-.307*h,p+.201*h]).clipExtent([[m-.425*h+cn,p+.12*h+cn],[m-.214*h-cn,p+.234*h-cn]]).stream(l),a=s.translate([m-.205*h,p+.212*h]).clipExtent([[m-.214*h+cn,p+.166*h+cn],[m-.115*h-cn,p+.234*h-cn]]).stream(l),f()},c.fitExtent=function(d,h){return UO(c,d,h)},c.fitSize=function(d,h){return iW(c,d,h)},c.fitWidth=function(d,h){return oW(c,d,h)},c.fitHeight=function(d,h){return sW(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function cEe(e){return function(t,n){var r=sn(t),i=sn(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Jt(t),o*Jt(n)]}}function vS(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),o=Jt(i),s=sn(i);return[pc(t*o,r*s),Pu(r&&n*o/r)]}}var fEe=cEe(function(e){return Ja(2/(1+e))});fEe.invert=vS(function(e){return 2*Pu(e/2)});function $ct(){return oh(fEe).scale(124.75).clipAngle(180-.001)}var dEe=cEe(function(e){return(e=Owe(e))&&e/Jt(e)});dEe.invert=vS(function(e){return e});function Lct(){return oh(dEe).scale(79.4188).clipAngle(180-.001)}function VO(e,t){return[e,m3(tW((Vi+t)/2))]}VO.invert=function(e,t){return[e,2*eE(Pwe(t))-Vi]};function Bct(){return hEe(VO).scale(961/Qa)}function hEe(e){var t=oh(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=u=l=null:(s=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):s==null?null:[[s,a],[u,l]]};function c(){var f=zn*r(),d=t(oct(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===VO?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,u),l]]:[[s,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function ZD(e){return tW((Vi+e)/2)}function jct(e,t){var n=sn(e),r=e===t?Jt(e):m3(n/sn(t))/m3(ZD(t)/ZD(e)),i=n*A8(ZD(e),r)/r;if(!r)return VO;function o(s,a){i>0?a<-Vi+cn&&(a=-Vi+cn):a>Vi-cn&&(a=Vi-cn);var u=i/A8(ZD(a),r);return[u*Jt(r*s),i-u*sn(r*s)]}return o.invert=function(s,a){var u=i-a,l=oc(r)*Ja(s*s+u*u),c=pc(s,Zn(u))*oc(u);return u*r<0&&(c-=zn*oc(s)*oc(u)),[c/r,2*eE(A8(i/l,1/r))-Vi]},o}function zct(){return aW(jct).scale(109.5).parallels([30,30])}function F3(e,t){return[e,t]}F3.invert=F3;function Uct(){return oh(F3).scale(152.63)}function Vct(e,t){var n=sn(e),r=e===t?Jt(e):(n-sn(t))/(t-e),i=n/r+e;if(Zn(r)<cn)return F3;function o(s,a){var u=i-a,l=r*s;return[u*Jt(l),i-u*sn(l)]}return o.invert=function(s,a){var u=i-a,l=pc(s,Zn(u))*oc(u);return u*r<0&&(l-=zn*oc(s)*oc(u)),[l/r,i-oc(r)*Ja(s*s+u*u)]},o}function Hct(){return aW(Vct).scale(131.154).center([0,13.9389])}var tT=1.340264,nT=-.081106,rT=893e-6,iT=.003796,M3=Ja(3)/2,qct=12;function pEe(e,t){var n=Pu(M3*Jt(t)),r=n*n,i=r*r*r;return[e*sn(n)/(M3*(tT+3*nT*r+i*(7*rT+9*iT*r))),n*(tT+nT*r+i*(rT+iT*r))]}pEe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,u;o<qct&&(a=n*(tT+nT*r+i*(rT+iT*r))-t,u=tT+3*nT*r+i*(7*rT+9*iT*r),n-=s=a/u,r=n*n,i=r*r*r,!(Zn(s)<c7));++o);return[M3*e*(tT+3*nT*r+i*(7*rT+9*iT*r))/sn(n),Pu(Jt(n)/M3)]};function Wct(){return oh(pEe).scale(177.158)}function mEe(e,t){var n=sn(t),r=sn(e)*n;return[n*Jt(e)/r,Jt(t)/r]}mEe.invert=vS(eE);function Gct(){return oh(mEe).scale(144.049).clipAngle(60)}function Yct(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,u=null,l,c,f,d=1,h=1,m=zO({point:function(E,_){var T=w([E,_]);this.stream.point(T[0],T[1])}}),p=GT,g,v;function b(){return d=e*r,h=e*i,g=v=null,w}function w(E){var _=E[0]*d,T=E[1]*h;if(o){var S=T*s-_*a;_=_*s+T*a,T=S}return[_+t,T+n]}return w.invert=function(E){var _=E[0]-t,T=E[1]-n;if(o){var S=T*s+_*a;_=_*s-T*a,T=S}return[_/d,T/h]},w.stream=function(E){return g&&v===E?g:g=m(p(v=E))},w.postclip=function(E){return arguments.length?(p=E,u=l=c=f=null,b()):p},w.clipExtent=function(E){return arguments.length?(p=E==null?(u=l=c=f=null,GT):Kwe(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),b()):u==null?null:[[u,l],[c,f]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(o=E%360*Ln,a=Jt(o),s=sn(o),b()):o*Xi},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,_){return UO(w,E,_)},w.fitSize=function(E,_){return iW(w,E,_)},w.fitWidth=function(E,_){return oW(w,E,_)},w.fitHeight=function(E,_){return sW(w,E,_)},w}function gEe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}gEe.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Zn(i)>cn&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Kct(){return oh(gEe).scale(175.295)}function yEe(e,t){return[sn(t)*Jt(e),Jt(t)]}yEe.invert=vS(Pu);function Xct(){return oh(yEe).scale(249.5).clipAngle(90+cn)}function vEe(e,t){var n=sn(t),r=1+sn(e)*n;return[n*Jt(e)/r,Jt(t)/r]}vEe.invert=vS(function(e){return 2*eE(e)});function Qct(){return oh(vEe).scale(250).clipAngle(142)}function bEe(e,t){return[m3(tW((Vi+t)/2)),-e]}bEe.invert=function(e,t){return[-t,2*eE(Pwe(e))-Vi]};function Jct(){var e=hEe(bEe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Zct(e,t){return e.parent===t.parent?1:2}function eft(e){return e.reduce(tft,0)/e.length}function tft(e,t){return e+t.x}function nft(e){return 1+e.reduce(rft,0)}function rft(e,t){return Math.max(e,t.y)}function ift(e){for(var t;t=e.children;)e=t[0];return e}function oft(e){for(var t;t=e.children;)e=t[t.length-1];return e}function sft(){var e=Zct,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=eft(h),d.y=nft(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var u=ift(o),l=oft(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function aft(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function uft(){return this.eachAfter(aft)}function lft(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function cft(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function fft(e,t){for(var n=this,r=[n],i=[],o,s,a,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function dft(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function hft(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function pft(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function mft(e){for(var t=this,n=gft(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function gft(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function yft(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function vft(){return Array.from(this)}function bft(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function xft(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*wft(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function uW(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Tft)):t===void 0&&(t=_ft);for(var n=new Mx(e),r,i=[n],o,s,a,u;r=i.pop();)if((s=t(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,a=u-1;a>=0;--a)i.push(o=s[a]=new Mx(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(xEe)}function Eft(){return uW(this).eachBefore(Cft)}function _ft(e){return e.children}function Tft(e){return Array.isArray(e)?e[1]:null}function Cft(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function xEe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Mx(e){this.data=e,this.depth=this.height=0,this.parent=null}Mx.prototype=uW.prototype={constructor:Mx,count:uft,each:lft,eachAfter:fft,eachBefore:cft,find:dft,sum:hft,sort:pft,path:mft,ancestors:yft,descendants:vft,leaves:bft,links:xft,copy:Eft,[Symbol.iterator]:wft};function tR(e){return e==null?null:wEe(e)}function wEe(e){if(typeof e!="function")throw new Error;return e}function hy(){return 0}function Ab(e){return function(){return e}}const Sft=1664525,Aft=1013904223,qoe=4294967296;function Dft(){let e=1;return()=>(e=(Sft*e+Aft)%qoe)/qoe}function kft(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ift(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Rft(e,t){for(var n=0,r=(e=Ift(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&EEe(s,o)?++n:(s=Pft(i=Nft(i,o)),n=0);return s}function Nft(e,t){var n,r;if(N8(t,e))return[t];for(n=0;n<e.length;++n)if(ek(t,e[n])&&N8(u2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ek(u2(e[n],e[r]),t)&&ek(u2(e[n],t),e[r])&&ek(u2(e[r],t),e[n])&&N8(_Ee(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ek(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function EEe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function N8(e,t){for(var n=0;n<t.length;++n)if(!EEe(e,t[n]))return!1;return!0}function Pft(e){switch(e.length){case 1:return Oft(e[0]);case 2:return u2(e[0],e[1]);case 3:return _Ee(e[0],e[1],e[2])}}function Oft(e){return{x:e.x,y:e.y,r:e.r}}function u2(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,u=o-n,l=s-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+s+l/f*c)/2,r:(f+i+a)/2}}function _Ee(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-s,h=r-l,m=i-a,p=i-c,g=u-o,v=f-o,b=r*r+i*i-o*o,w=b-s*s-a*a+u*u,E=b-l*l-c*c+f*f,_=h*m-d*p,T=(m*E-p*w)/(_*2)-r,S=(p*g-m*v)/_,D=(h*w-d*E)/(_*2)-i,k=(d*v-h*g)/_,R=S*S+k*k-1,O=2*(o+T*S+D*k),M=T*T+D*D-o*o,F=-(Math.abs(R)>1e-6?(O+Math.sqrt(O*O-4*R*M))/(2*R):M/O);return{x:r+T+S*F,y:i+D+k*F,r:F}}function Woe(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,u,l=r*r+s*s;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(l+o-u)/(2*l),a=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Goe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Yoe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function tk(e){this._=e,this.next=null,this.previous=null}function Fft(e,t){if(!(o=(e=kft(e)).length))return 0;var n,r,i,o,s,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Woe(r,n,i=e[2]),n=new tk(n),r=new tk(r),i=new tk(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){Woe(n._,r._,i=e[u]),i=new tk(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Goe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Goe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=Yoe(n);(i=i.next)!==r;)(a=Yoe(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Rft(n,t),u=0;u<o;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Mft(e){return Math.sqrt(e.value)}function $ft(){var e=null,t=1,n=1,r=hy;function i(o){const s=Dft();return o.x=t/2,o.y=n/2,e?o.eachBefore(Koe(e)).eachAfter(P8(r,.5,s)).eachBefore(Xoe(1)):o.eachBefore(Koe(Mft)).eachAfter(P8(hy,1,s)).eachAfter(P8(r,o.r/Math.min(t,n),s)).eachBefore(Xoe(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=tR(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Ab(+o),i):r},i}function Koe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function P8(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,u;if(a)for(o=0;o<s;++o)i[o].r+=a;if(u=Fft(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=u+a}}}function Xoe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function TEe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function bS(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(r-t)/e.value;++a<u;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*l}function Lft(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(TEe),s}function o(s,a){return function(u){u.children&&bS(u,u.x0,s*(u.depth+1)/a,u.x1,s*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var Bft={depth:-1},Qoe={},O8={};function jft(e){return e.id}function zft(e){return e.parentId}function Joe(){var e=jft,t=zft,n;function r(i){var o=Array.from(i),s=e,a=t,u,l,c,f,d,h,m,p,g=new Map;if(n!=null){const v=o.map((E,_)=>Uft(n(E,_,i))),b=v.map(Zoe),w=new Set(v).add("");for(const E of b)w.has(E)||(w.add(E),v.push(E),b.push(Zoe(E)),o.push(O8));s=(E,_)=>v[_],a=(E,_)=>b[_]}for(c=0,u=o.length;c<u;++c)l=o[c],h=o[c]=new Mx(l),(m=s(l,c,i))!=null&&(m+="")&&(p=h.id=m,g.set(p,g.has(p)?Qoe:h)),(m=a(l,c,i))!=null&&(m+="")&&(h.parent=m);for(c=0;c<u;++c)if(h=o[c],m=h.parent){if(d=g.get(m),!d)throw new Error("missing: "+m);if(d===Qoe)throw new Error("ambiguous: "+m);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===O8&&f.children.length===1;)f=f.children[0],--u;for(let v=o.length-1;v>=0&&(h=o[v],h.data===O8);--v)h.data=null}if(f.parent=Bft,f.eachBefore(function(v){v.depth=v.parent.depth+1,--u}).eachBefore(xEe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=tR(i),r):e},r.parentId=function(i){return arguments.length?(t=tR(i),r):t},r.path=function(i){return arguments.length?(n=tR(i),r):n},r}function Uft(e){e=`${e}`;let t=e.length;return R7(e,t-1)&&!R7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Zoe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!R7(e,t););return e.slice(0,t)}function R7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Vft(e,t){return e.parent===t.parent?1:2}function F8(e){var t=e.children;return t?t[0]:e.t}function M8(e){var t=e.children;return t?t[t.length-1]:e.t}function Hft(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function qft(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Wft(e,t,n){return e.a.parent===t.parent?e.a:n}function nR(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}nR.prototype=Object.create(Mx.prototype);function Gft(e){for(var t=new nR(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new nR(o[s],s)),i.parent=n;return(t.parent=new nR(null,0)).children=[t],t}function Yft(){var e=Vft,t=1,n=1,r=null;function i(l){var c=Gft(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var m=f===d?1:e(f,d)/2,p=m-f.x,g=t/(d.x+m+p),v=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+p)*g,b.y=b.depth*v})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){qft(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,m=c,p=d.parent.children[0],g=d.m,v=h.m,b=m.m,w=p.m,E;m=M8(m),d=F8(d),m&&d;)p=F8(p),h=M8(h),h.a=l,E=m.z+b-d.z-g+e(m._,d._),E>0&&(Hft(Wft(m,l,f),l,E),g+=E,v+=E),b+=m.m,g+=d.m,w+=p.m,v+=h.m;m&&!M8(h)&&(h.t=m,h.m+=b-v),d&&!F8(p)&&(p.t=d,p.m+=g-w,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function HO(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(i-n)/e.value;++a<u;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*l}var CEe=(1+Math.sqrt(5))/2;function SEe(e,t,n,r,i,o){for(var s=[],a=t.children,u,l,c=0,f=0,d=a.length,h,m,p=t.value,g,v,b,w,E,_,T;c<d;){h=i-n,m=o-r;do g=a[f++].value;while(!g&&f<d);for(v=b=g,_=Math.max(m/h,h/m)/(p*e),T=g*g*_,E=Math.max(b/T,T/v);f<d;++f){if(g+=l=a[f].value,l<v&&(v=l),l>b&&(b=l),T=g*g*_,w=Math.max(b/T,T/v),w>E){g-=l;break}E=w}s.push(u={value:g,dice:h<m,children:a.slice(c,f)}),u.dice?bS(u,n,r,i,p?r+=m*g/p:o):HO(u,n,r,p?n+=h*g/p:i,o),p-=g,c=f}return s}const AEe=function e(t){function n(r,i,o,s,a){SEe(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CEe);function Kft(){var e=AEe,t=!1,n=1,r=1,i=[0],o=hy,s=hy,a=hy,u=hy,l=hy;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(TEe),d}function f(d){var h=i[d.depth],m=d.x0+h,p=d.y0+h,g=d.x1-h,v=d.y1-h;g<m&&(m=g=(m+g)/2),v<p&&(p=v=(p+v)/2),d.x0=m,d.y0=p,d.x1=g,d.y1=v,d.children&&(h=i[d.depth+1]=o(d)/2,m+=l(d)-h,p+=s(d)-h,g-=a(d)-h,v-=u(d)-h,g<m&&(m=g=(m+g)/2),v<p&&(p=v=(p+v)/2),e(d,m,p,g,v))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=wEe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Ab(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:Ab(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Ab(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Ab(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Ab(+d),c):l},c}function Xft(e,t,n,r,i){var o=e.children,s,a=o.length,u,l=new Array(a+1);for(l[0]=u=s=0;s<a;++s)l[s+1]=u+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,m,p,g,v){if(f>=d-1){var b=o[f];b.x0=m,b.y0=p,b.x1=g,b.y1=v;return}for(var w=l[f],E=h/2+w,_=f+1,T=d-1;_<T;){var S=_+T>>>1;l[S]<E?_=S+1:T=S}E-l[_-1]<l[_]-E&&f+1<_&&--_;var D=l[_]-w,k=h-D;if(g-m>v-p){var R=h?(m*k+g*D)/h:g;c(f,_,D,m,p,R,v),c(_,d,k,R,p,g,v)}else{var O=h?(p*k+v*D)/h:v;c(f,_,D,m,p,g,O),c(_,d,k,m,O,g,v)}}}function Qft(e,t,n,r,i){(e.depth&1?HO:bS)(e,t,n,r,i)}const Jft=function e(t){function n(r,i,o,s,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,m=u.length,p=r.value;++d<m;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?bS(l,i,o,s,p?o+=(a-o)*l.value/p:a):HO(l,i,o,p?i+=(s-i)*l.value/p:s,a),p-=l.value}else r._squarify=u=SEe(t,r,i,o,s,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CEe);function sh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ag(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const N7=Symbol("implicit");function lW(){var e=new Lie,t=[],n=[],r=N7;function i(o){let s=e.get(o);if(s===void 0){if(r!==N7)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Lie;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return lW(t,n).unknown(r)},sh.apply(i,arguments),i}function Zft(e){return function(){return e}}function P7(e){return+e}var ese=[0,1];function Su(e){return e}function O7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Zft(isNaN(t)?NaN:.5)}function edt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function tdt(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=O7(i,r),o=n(s,o)):(r=O7(r,i),o=n(o,s)),function(a){return o(r(a))}}function ndt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=O7(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=C0(e,a,1,r)-1;return o[u](i[u](a))}}function xS(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qO(){var e=ese,t=ese,n=sg,r,i,o,s=Su,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==Su&&(s=edt(e[0],e[d-1])),a=d>2?ndt:tdt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),nc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,P7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=mS,c()},f.clamp=function(d){return arguments.length?(s=d?!0:Su,c()):s!==Su},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function DEe(){return qO()(Su,Su)}function kEe(e,t,n,r){var i=S0(e,t,n),o;switch(r=Qy(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=Rwe(i,s))&&(r.precision=o),eW(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Nwe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Iwe(i))&&(r.precision=o-(r.type==="%")*2);break}}return jO(r)}function z1(e){var t=e.domain;return e.ticks=function(n){var r=t();return XB(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return kEe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=QB(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Ud(){var e=DEe();return e.copy=function(){return xS(e,Ud())},sh.apply(e,arguments),z1(e)}function IEe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,P7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return IEe(e).unknown(t)},e=arguments.length?Array.from(e,P7):[0,1],z1(n)}function REe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function tse(e){return Math.log(e)}function nse(e){return Math.exp(e)}function rdt(e){return-Math.log(-e)}function idt(e){return-Math.exp(-e)}function odt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function sdt(e){return e===10?odt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function adt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rse(e){return(t,n)=>-e(-t,n)}function cW(e){const t=e(tse,nse),n=t.domain;let r=10,i,o;function s(){return i=adt(r),o=sdt(r),n()[0]<0?(i=rse(i),o=rse(o),e(rdt,idt)):e(tse,nse),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),m,p;const g=a==null?10:+a;let v=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(m=1;m<r;++m)if(p=d<0?m/o(-d):m*o(d),!(p<l)){if(p>c)break;v.push(p)}}else for(;d<=h;++d)for(m=r-1;m>=1;--m)if(p=d>0?m/o(-d):m*o(d),!(p<l)){if(p>c)break;v.push(p)}v.length*2<g&&(v=XB(l,c,g))}else v=XB(d,h,Math.min(h-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Qy(u)).precision==null&&(u.trim=!0),u=jO(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(REe(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function NEe(){const e=cW(qO()).domain([1,10]);return e.copy=()=>xS(e,NEe()).base(e.base()),sh.apply(e,arguments),e}function ise(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ose(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fW(e){var t=1,n=e(ise(t),ose(t));return n.constant=function(r){return arguments.length?e(ise(t=+r),ose(t)):t},z1(n)}function PEe(){var e=fW(qO());return e.copy=function(){return xS(e,PEe()).constant(e.constant())},sh.apply(e,arguments)}function sse(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function udt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ldt(e){return e<0?-e*e:e*e}function dW(e){var t=e(Su,Su),n=1;function r(){return n===1?e(Su,Su):n===.5?e(udt,ldt):e(sse(n),sse(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},z1(t)}function hW(){var e=dW(qO());return e.copy=function(){return xS(e,hW()).exponent(e.exponent())},sh.apply(e,arguments),e}function cdt(){return hW.apply(null,arguments).exponent(.5)}function OEe(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=Dxe(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[C0(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(cp),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return OEe().domain(e).range(t).unknown(r)},sh.apply(o,arguments)}function FEe(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[C0(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return FEe().domain([e,t]).range(i).unknown(o)},sh.apply(z1(s),arguments)}function MEe(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[C0(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return MEe().domain(e).range(t).unknown(n)},sh.apply(i,arguments)}const $8=new Date,L8=new Date;function Uo(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>Uo(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>($8.setTime(+o),L8.setTime(+s),e($8),e(L8),Math.floor(n($8,L8))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const $x=Uo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$x.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Uo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):$x);$x.range;const ep=1e3,sc=ep*60,tp=sc*60,Op=tp*24,pW=Op*7,ase=Op*30,B8=Op*365,np=Uo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ep)},(e,t)=>(t-e)/ep,e=>e.getUTCSeconds());np.range;const WO=Uo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ep)},(e,t)=>{e.setTime(+e+t*sc)},(e,t)=>(t-e)/sc,e=>e.getMinutes());WO.range;const GO=Uo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*sc)},(e,t)=>(t-e)/sc,e=>e.getUTCMinutes());GO.range;const YO=Uo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ep-e.getMinutes()*sc)},(e,t)=>{e.setTime(+e+t*tp)},(e,t)=>(t-e)/tp,e=>e.getHours());YO.range;const KO=Uo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*tp)},(e,t)=>(t-e)/tp,e=>e.getUTCHours());KO.range;const dp=Uo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*sc)/Op,e=>e.getDate()-1);dp.range;const l0=Uo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Op,e=>e.getUTCDate()-1);l0.range;const $Ee=Uo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Op,e=>Math.floor(e/Op));$Ee.range;function U1(e){return Uo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*sc)/pW)}const tE=U1(0),$3=U1(1),fdt=U1(2),ddt=U1(3),Lx=U1(4),hdt=U1(5),pdt=U1(6);tE.range;$3.range;fdt.range;ddt.range;Lx.range;hdt.range;pdt.range;function V1(e){return Uo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pW)}const nE=V1(0),L3=V1(1),mdt=V1(2),gdt=V1(3),Bx=V1(4),ydt=V1(5),vdt=V1(6);nE.range;L3.range;mdt.range;gdt.range;Bx.range;ydt.range;vdt.range;const XT=Uo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());XT.range;const QT=Uo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());QT.range;const Vd=Uo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Vd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Uo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Vd.range;const Hd=Uo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Uo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Hd.range;function LEe(e,t,n,r,i,o){const s=[[np,1,ep],[np,5,5*ep],[np,15,15*ep],[np,30,30*ep],[o,1,sc],[o,5,5*sc],[o,15,15*sc],[o,30,30*sc],[i,1,tp],[i,3,3*tp],[i,6,6*tp],[i,12,12*tp],[r,1,Op],[r,2,2*Op],[n,1,pW],[t,1,ase],[t,3,3*ase],[e,1,B8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),m=h?h.range(l,+c+1):[];return d?m.reverse():m}function u(l,c,f){const d=Math.abs(c-l)/f,h=Jw(([,,g])=>g).right(s,d);if(h===s.length)return e.every(S0(l/B8,c/B8,f));if(h===0)return $x.every(Math.max(S0(l,c,f),1));const[m,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return m.every(p)}return[a,u]}const[bdt,xdt]=LEe(Hd,QT,nE,$Ee,KO,GO),[wdt,Edt]=LEe(Vd,XT,tE,dp,YO,WO);function j8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function z8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function y_(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function BEe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=v_(i),c=b_(i),f=v_(o),d=b_(o),h=v_(s),m=b_(s),p=v_(a),g=b_(a),v=v_(u),b=b_(u),w={a:Q,A:K,b:Z,B:U,c:null,d:hse,e:hse,f:qdt,g:tht,G:rht,H:Udt,I:Vdt,j:Hdt,L:jEe,m:Wdt,M:Gdt,p:B,q,Q:gse,s:yse,S:Ydt,u:Kdt,U:Xdt,V:Qdt,w:Jdt,W:Zdt,x:null,X:null,y:eht,Y:nht,Z:iht,"%":mse},E={a:z,A:G,b:X,B:ne,c:null,d:pse,e:pse,f:uht,g:vht,G:xht,H:oht,I:sht,j:aht,L:UEe,m:lht,M:cht,p:ge,q:me,Q:gse,s:yse,S:fht,u:dht,U:hht,V:pht,w:mht,W:ght,x:null,X:null,y:yht,Y:bht,Z:wht,"%":mse},_={a:R,A:O,b:M,B:F,c:L,d:fse,e:fse,f:Ldt,g:cse,G:lse,H:dse,I:dse,j:Odt,L:$dt,m:Pdt,M:Fdt,p:k,q:Ndt,Q:jdt,s:zdt,S:Mdt,u:Adt,U:Ddt,V:kdt,w:Sdt,W:Idt,x:H,X:V,y:cse,Y:lse,Z:Rdt,"%":Bdt};w.x=T(n,w),w.X=T(r,w),w.c=T(t,w),E.x=T(n,E),E.X=T(r,E),E.c=T(t,E);function T(ye,we){return function(fe){var se=[],Ce=-1,Ae=0,Ue=ye.length,Xe,Le,Ge;for(fe instanceof Date||(fe=new Date(+fe));++Ce<Ue;)ye.charCodeAt(Ce)===37&&(se.push(ye.slice(Ae,Ce)),(Le=use[Xe=ye.charAt(++Ce)])!=null?Xe=ye.charAt(++Ce):Le=Xe==="e"?" ":"0",(Ge=we[Xe])&&(Xe=Ge(fe,Le)),se.push(Xe),Ae=Ce+1);return se.push(ye.slice(Ae,Ce)),se.join("")}}function S(ye,we){return function(fe){var se=y_(1900,void 0,1),Ce=D(se,ye,fe+="",0),Ae,Ue;if(Ce!=fe.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(we&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Ae=z8(y_(se.y,0,1)),Ue=Ae.getUTCDay(),Ae=Ue>4||Ue===0?L3.ceil(Ae):L3(Ae),Ae=l0.offset(Ae,(se.V-1)*7),se.y=Ae.getUTCFullYear(),se.m=Ae.getUTCMonth(),se.d=Ae.getUTCDate()+(se.w+6)%7):(Ae=j8(y_(se.y,0,1)),Ue=Ae.getDay(),Ae=Ue>4||Ue===0?$3.ceil(Ae):$3(Ae),Ae=dp.offset(Ae,(se.V-1)*7),se.y=Ae.getFullYear(),se.m=Ae.getMonth(),se.d=Ae.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),Ue="Z"in se?z8(y_(se.y,0,1)).getUTCDay():j8(y_(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(Ue+5)%7:se.w+se.U*7-(Ue+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,z8(se)):j8(se)}}function D(ye,we,fe,se){for(var Ce=0,Ae=we.length,Ue=fe.length,Xe,Le;Ce<Ae;){if(se>=Ue)return-1;if(Xe=we.charCodeAt(Ce++),Xe===37){if(Xe=we.charAt(Ce++),Le=_[Xe in use?we.charAt(Ce++):Xe],!Le||(se=Le(ye,fe,se))<0)return-1}else if(Xe!=fe.charCodeAt(se++))return-1}return se}function k(ye,we,fe){var se=l.exec(we.slice(fe));return se?(ye.p=c.get(se[0].toLowerCase()),fe+se[0].length):-1}function R(ye,we,fe){var se=h.exec(we.slice(fe));return se?(ye.w=m.get(se[0].toLowerCase()),fe+se[0].length):-1}function O(ye,we,fe){var se=f.exec(we.slice(fe));return se?(ye.w=d.get(se[0].toLowerCase()),fe+se[0].length):-1}function M(ye,we,fe){var se=v.exec(we.slice(fe));return se?(ye.m=b.get(se[0].toLowerCase()),fe+se[0].length):-1}function F(ye,we,fe){var se=p.exec(we.slice(fe));return se?(ye.m=g.get(se[0].toLowerCase()),fe+se[0].length):-1}function L(ye,we,fe){return D(ye,t,we,fe)}function H(ye,we,fe){return D(ye,n,we,fe)}function V(ye,we,fe){return D(ye,r,we,fe)}function Q(ye){return s[ye.getDay()]}function K(ye){return o[ye.getDay()]}function Z(ye){return u[ye.getMonth()]}function U(ye){return a[ye.getMonth()]}function B(ye){return i[+(ye.getHours()>=12)]}function q(ye){return 1+~~(ye.getMonth()/3)}function z(ye){return s[ye.getUTCDay()]}function G(ye){return o[ye.getUTCDay()]}function X(ye){return u[ye.getUTCMonth()]}function ne(ye){return a[ye.getUTCMonth()]}function ge(ye){return i[+(ye.getUTCHours()>=12)]}function me(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var we=T(ye+="",w);return we.toString=function(){return ye},we},parse:function(ye){var we=S(ye+="",!1);return we.toString=function(){return ye},we},utcFormat:function(ye){var we=T(ye+="",E);return we.toString=function(){return ye},we},utcParse:function(ye){var we=S(ye+="",!0);return we.toString=function(){return ye},we}}}var use={"-":"",_:" ",0:"0"},fs=/^\s*\d+/,_dt=/^%/,Tdt=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Cdt(e){return e.replace(Tdt,"\\$&")}function v_(e){return new RegExp("^(?:"+e.map(Cdt).join("|")+")","i")}function b_(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Sdt(e,t,n){var r=fs.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Adt(e,t,n){var r=fs.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ddt(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function kdt(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Idt(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function lse(e,t,n){var r=fs.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cse(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rdt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ndt(e,t,n){var r=fs.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Pdt(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fse(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Odt(e,t,n){var r=fs.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function dse(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Fdt(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mdt(e,t,n){var r=fs.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $dt(e,t,n){var r=fs.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ldt(e,t,n){var r=fs.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bdt(e,t,n){var r=_dt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function jdt(e,t,n){var r=fs.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function zdt(e,t,n){var r=fs.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function hse(e,t){return mr(e.getDate(),t,2)}function Udt(e,t){return mr(e.getHours(),t,2)}function Vdt(e,t){return mr(e.getHours()%12||12,t,2)}function Hdt(e,t){return mr(1+dp.count(Vd(e),e),t,3)}function jEe(e,t){return mr(e.getMilliseconds(),t,3)}function qdt(e,t){return jEe(e,t)+"000"}function Wdt(e,t){return mr(e.getMonth()+1,t,2)}function Gdt(e,t){return mr(e.getMinutes(),t,2)}function Ydt(e,t){return mr(e.getSeconds(),t,2)}function Kdt(e){var t=e.getDay();return t===0?7:t}function Xdt(e,t){return mr(tE.count(Vd(e)-1,e),t,2)}function zEe(e){var t=e.getDay();return t>=4||t===0?Lx(e):Lx.ceil(e)}function Qdt(e,t){return e=zEe(e),mr(Lx.count(Vd(e),e)+(Vd(e).getDay()===4),t,2)}function Jdt(e){return e.getDay()}function Zdt(e,t){return mr($3.count(Vd(e)-1,e),t,2)}function eht(e,t){return mr(e.getFullYear()%100,t,2)}function tht(e,t){return e=zEe(e),mr(e.getFullYear()%100,t,2)}function nht(e,t){return mr(e.getFullYear()%1e4,t,4)}function rht(e,t){var n=e.getDay();return e=n>=4||n===0?Lx(e):Lx.ceil(e),mr(e.getFullYear()%1e4,t,4)}function iht(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function pse(e,t){return mr(e.getUTCDate(),t,2)}function oht(e,t){return mr(e.getUTCHours(),t,2)}function sht(e,t){return mr(e.getUTCHours()%12||12,t,2)}function aht(e,t){return mr(1+l0.count(Hd(e),e),t,3)}function UEe(e,t){return mr(e.getUTCMilliseconds(),t,3)}function uht(e,t){return UEe(e,t)+"000"}function lht(e,t){return mr(e.getUTCMonth()+1,t,2)}function cht(e,t){return mr(e.getUTCMinutes(),t,2)}function fht(e,t){return mr(e.getUTCSeconds(),t,2)}function dht(e){var t=e.getUTCDay();return t===0?7:t}function hht(e,t){return mr(nE.count(Hd(e)-1,e),t,2)}function VEe(e){var t=e.getUTCDay();return t>=4||t===0?Bx(e):Bx.ceil(e)}function pht(e,t){return e=VEe(e),mr(Bx.count(Hd(e),e)+(Hd(e).getUTCDay()===4),t,2)}function mht(e){return e.getUTCDay()}function ght(e,t){return mr(L3.count(Hd(e)-1,e),t,2)}function yht(e,t){return mr(e.getUTCFullYear()%100,t,2)}function vht(e,t){return e=VEe(e),mr(e.getUTCFullYear()%100,t,2)}function bht(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function xht(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Bx(e):Bx.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function wht(){return"+0000"}function mse(){return"%"}function gse(e){return+e}function yse(e){return Math.floor(+e/1e3)}var Jv,mW,HEe,gW,qEe;Eht({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Eht(e){return Jv=BEe(e),mW=Jv.format,HEe=Jv.parse,gW=Jv.utcFormat,qEe=Jv.utcParse,Jv}function _ht(e){return new Date(e)}function Tht(e){return e instanceof Date?+e:+new Date(+e)}function yW(e,t,n,r,i,o,s,a,u,l){var c=DEe(),f=c.invert,d=c.domain,h=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),w=l("%B"),E=l("%Y");function _(T){return(u(T)<T?h:a(T)<T?m:s(T)<T?p:o(T)<T?g:r(T)<T?i(T)<T?v:b:n(T)<T?w:E)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,Tht)):d().map(_ht)},c.ticks=function(T){var S=d();return e(S[0],S[S.length-1],T??10)},c.tickFormat=function(T,S){return S==null?_:l(S)},c.nice=function(T){var S=d();return(!T||typeof T.range!="function")&&(T=t(S[0],S[S.length-1],T??10)),T?d(REe(S,T)):c},c.copy=function(){return xS(c,yW(e,t,n,r,i,o,s,a,u,l))},c}function Cht(){return sh.apply(yW(wdt,Edt,Vd,XT,tE,dp,YO,WO,np,mW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Sht(){return sh.apply(yW(bdt,xdt,Hd,QT,nE,l0,KO,GO,np,gW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function XO(){var e=0,t=1,n,r,i,o,s=Su,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,m;return arguments.length?([h,m]=d,s=f(h,m),l):[s(0),s(1)]}}return l.range=c(sg),l.rangeRound=c(mS),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function ug(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function vW(){var e=z1(XO()(Su));return e.copy=function(){return ug(e,vW())},ag.apply(e,arguments)}function WEe(){var e=cW(XO()).domain([1,10]);return e.copy=function(){return ug(e,WEe()).base(e.base())},ag.apply(e,arguments)}function GEe(){var e=fW(XO());return e.copy=function(){return ug(e,GEe()).constant(e.constant())},ag.apply(e,arguments)}function bW(){var e=dW(XO());return e.copy=function(){return ug(e,bW()).exponent(e.exponent())},ag.apply(e,arguments)}function Aht(){return bW.apply(null,arguments).exponent(.5)}function QO(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=Su,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-o)*(r*p<r*o?a:u),l(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(l=p,h):l};function m(p){return function(g){var v,b,w;return arguments.length?([v,b,w]=g,l=qq(p,[v,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=m(sg),h.rangeRound=m(mS),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),o=p(t),s=p(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function YEe(){var e=z1(QO()(Su));return e.copy=function(){return ug(e,YEe())},ag.apply(e,arguments)}function KEe(){var e=cW(QO()).domain([.1,1,10]);return e.copy=function(){return ug(e,KEe()).base(e.base())},ag.apply(e,arguments)}function XEe(){var e=fW(QO());return e.copy=function(){return ug(e,XEe()).constant(e.constant())},ag.apply(e,arguments)}function xW(){var e=dW(QO());return e.copy=function(){return ug(e,xW()).exponent(e.exponent())},ag.apply(e,arguments)}function Dht(){return xW.apply(null,arguments).exponent(.5)}function Ac(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const kht=Ac("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Iht=Ac("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Rht=Ac("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Nht=Ac("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Pht=Ac("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Oht=Ac("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Fht=Ac("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Mht=Ac("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),$ht=Ac("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Lht=Ac("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),QEe=e=>uwe(e[e.length-1]);var Bht=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ac);const vse=QEe(Bht);var jht=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ac);const zht=QEe(jht);function Ar(e){return function(){return e}}const bse=Math.abs,Js=Math.atan2,Lg=Math.cos,Uht=Math.max,U8=Math.min,Zf=Math.sin,Ay=Math.sqrt,Zs=1e-12,jx=Math.PI,B3=jx/2,JEe=2*jx;function Vht(e){return e>1?0:e<-1?jx:Math.acos(e)}function xse(e){return e>=1?B3:e<=-1?-B3:Math.asin(e)}function JO(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Kq(t)}function Hht(e){return e.innerRadius}function qht(e){return e.outerRadius}function Wht(e){return e.startAngle}function Ght(e){return e.endAngle}function Yht(e){return e&&e.padAngle}function Kht(e,t,n,r,i,o,s,a){var u=n-e,l=r-t,c=s-i,f=a-o,d=f*u-c*l;if(!(d*d<Zs))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function nk(e,t,n,r,i,o,s){var a=e-n,u=t-r,l=(s?o:-o)/Ay(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,m=n+c,p=r+f,g=(d+m)/2,v=(h+p)/2,b=m-d,w=p-h,E=b*b+w*w,_=i-o,T=d*p-m*h,S=(w<0?-1:1)*Ay(Uht(0,_*_*E-T*T)),D=(T*w-b*S)/E,k=(-T*b-w*S)/E,R=(T*w+b*S)/E,O=(-T*b+w*S)/E,M=D-g,F=k-v,L=R-g,H=O-v;return M*M+F*F>L*L+H*H&&(D=R,k=O),{cx:D,cy:k,x01:-c,y01:-f,x11:D*(i/_-1),y11:k*(i/_-1)}}function Xht(){var e=Hht,t=qht,n=Ar(0),r=null,i=Wht,o=Ght,s=Yht,a=null,u=JO(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),m=i.apply(this,arguments)-B3,p=o.apply(this,arguments)-B3,g=bse(p-m),v=p>m;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Zs))a.moveTo(0,0);else if(g>JEe-Zs)a.moveTo(h*Lg(m),h*Zf(m)),a.arc(0,0,h,m,p,!v),d>Zs&&(a.moveTo(d*Lg(p),d*Zf(p)),a.arc(0,0,d,p,m,v));else{var b=m,w=p,E=m,_=p,T=g,S=g,D=s.apply(this,arguments)/2,k=D>Zs&&(r?+r.apply(this,arguments):Ay(d*d+h*h)),R=U8(bse(h-d)/2,+n.apply(this,arguments)),O=R,M=R,F,L;if(k>Zs){var H=xse(k/d*Zf(D)),V=xse(k/h*Zf(D));(T-=H*2)>Zs?(H*=v?1:-1,E+=H,_-=H):(T=0,E=_=(m+p)/2),(S-=V*2)>Zs?(V*=v?1:-1,b+=V,w-=V):(S=0,b=w=(m+p)/2)}var Q=h*Lg(b),K=h*Zf(b),Z=d*Lg(_),U=d*Zf(_);if(R>Zs){var B=h*Lg(w),q=h*Zf(w),z=d*Lg(E),G=d*Zf(E),X;if(g<jx)if(X=Kht(Q,K,z,G,B,q,Z,U)){var ne=Q-X[0],ge=K-X[1],me=B-X[0],ye=q-X[1],we=1/Zf(Vht((ne*me+ge*ye)/(Ay(ne*ne+ge*ge)*Ay(me*me+ye*ye)))/2),fe=Ay(X[0]*X[0]+X[1]*X[1]);O=U8(R,(d-fe)/(we-1)),M=U8(R,(h-fe)/(we+1))}else O=M=0}S>Zs?M>Zs?(F=nk(z,G,Q,K,h,M,v),L=nk(B,q,Z,U,h,M,v),a.moveTo(F.cx+F.x01,F.cy+F.y01),M<R?a.arc(F.cx,F.cy,M,Js(F.y01,F.x01),Js(L.y01,L.x01),!v):(a.arc(F.cx,F.cy,M,Js(F.y01,F.x01),Js(F.y11,F.x11),!v),a.arc(0,0,h,Js(F.cy+F.y11,F.cx+F.x11),Js(L.cy+L.y11,L.cx+L.x11),!v),a.arc(L.cx,L.cy,M,Js(L.y11,L.x11),Js(L.y01,L.x01),!v))):(a.moveTo(Q,K),a.arc(0,0,h,b,w,!v)):a.moveTo(Q,K),!(d>Zs)||!(T>Zs)?a.lineTo(Z,U):O>Zs?(F=nk(Z,U,B,q,d,-O,v),L=nk(Q,K,z,G,d,-O,v),a.lineTo(F.cx+F.x01,F.cy+F.y01),O<R?a.arc(F.cx,F.cy,O,Js(F.y01,F.x01),Js(L.y01,L.x01),!v):(a.arc(F.cx,F.cy,O,Js(F.y01,F.x01),Js(F.y11,F.x11),!v),a.arc(0,0,d,Js(F.cy+F.y11,F.cx+F.x11),Js(L.cy+L.y11,L.cx+L.x11),v),a.arc(L.cx,L.cy,O,Js(L.y11,L.x11),Js(L.y01,L.x01),!v))):a.arc(0,0,d,_,E,v)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-jx/2;return[Lg(f)*c,Zf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Ar(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Ar(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Ar(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Ar(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Ar(+c),l):i},l.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Ar(+c),l):o},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Ar(+c),l):s},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function ZEe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function e_e(e){this._context=e}e_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wW(e){return new e_e(e)}function t_e(e){return e[0]}function n_e(e){return e[1]}function EW(e,t){var n=Ar(!0),r=null,i=wW,o=null,s=JO(a);e=typeof e=="function"?e:e===void 0?t_e:Ar(e),t=typeof t=="function"?t:t===void 0?n_e:Ar(t);function a(u){var l,c=(u=ZEe(u)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,u),+t(f,l,u));if(h)return o=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Ar(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Ar(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ar(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function r_e(e,t,n){var r=null,i=Ar(!0),o=null,s=wW,a=null,u=JO(l);e=typeof e=="function"?e:e===void 0?t_e:Ar(+e),t=typeof t=="function"?t:Ar(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?n_e:Ar(+n);function l(f){var d,h,m,p=(f=ZEe(f)).length,g,v=!1,b,w=new Array(p),E=new Array(p);for(o==null&&(a=s(b=u())),d=0;d<=p;++d){if(!(d<p&&i(g=f[d],d,f))===v)if(v=!v)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=d-1;m>=h;--m)a.point(w[m],E[m]);a.lineEnd(),a.areaEnd()}v&&(w[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):w[d],n?+n(g,d,f):E[d]))}if(b)return a=null,b+""||null}function c(){return EW().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ar(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ar(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ar(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ar(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ar(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ar(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ar(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}const Qht={draw(e,t){const n=Ay(t/jx);e.moveTo(n,0),e.arc(0,0,n,0,JEe)}};function Jht(e,t){let n=null,r=JO(i);e=typeof e=="function"?e:Ar(e||Qht),t=typeof t=="function"?t:Ar(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:Ar(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:Ar(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function D0(){}function j3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ZO(e){this._context=e}ZO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:j3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:j3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zht(e){return new ZO(e)}function i_e(e){this._context=e}i_e.prototype={areaStart:D0,areaEnd:D0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:j3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ept(e){return new i_e(e)}function o_e(e){this._context=e}o_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:j3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tpt(e){return new o_e(e)}function s_e(e,t){this._basis=new ZO(e),this._beta=t}s_e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*o),this._beta*t[a]+(1-this._beta)*(i+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const npt=function e(t){function n(r){return t===1?new ZO(r):new s_e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function z3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function _W(e,t){this._context=e,this._k=(1-t)/6}_W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:z3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rpt=function e(t){function n(r){return new _W(r,t)}return n.tension=function(r){return e(+r)},n}(0);function TW(e,t){this._context=e,this._k=(1-t)/6}TW.prototype={areaStart:D0,areaEnd:D0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ipt=function e(t){function n(r){return new TW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CW(e,t){this._context=e,this._k=(1-t)/6}CW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const opt=function e(t){function n(r){return new CW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function SW(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>Zs){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Zs){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function a_e(e,t){this._context=e,this._alpha=t}a_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:SW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const spt=function e(t){function n(r){return t?new a_e(r,t):new _W(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function u_e(e,t){this._context=e,this._alpha=t}u_e.prototype={areaStart:D0,areaEnd:D0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:SW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const apt=function e(t){function n(r){return t?new u_e(r,t):new TW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function l_e(e,t){this._context=e,this._alpha=t}l_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:SW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const upt=function e(t){function n(r){return t?new l_e(r,t):new CW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function c_e(e){this._context=e}c_e.prototype={areaStart:D0,areaEnd:D0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lpt(e){return new c_e(e)}function wse(e){return e<0?-1:1}function Ese(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(wse(o)+wse(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function _se(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function V8(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function U3(e){this._context=e}U3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:V8(this,this._t0,_se(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,V8(this,_se(this,n=Ese(this,e,t)),n);break;default:V8(this,this._t0,n=Ese(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function f_e(e){this._context=new d_e(e)}(f_e.prototype=Object.create(U3.prototype)).point=function(e,t){U3.prototype.point.call(this,t,e)};function d_e(e){this._context=e}d_e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function cpt(e){return new U3(e)}function fpt(e){return new f_e(e)}function h_e(e){this._context=e}h_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Tse(e),i=Tse(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Tse(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function dpt(e){return new h_e(e)}function e6(e,t){this._context=e,this._t=t}e6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function hpt(e){return new e6(e,.5)}function ppt(e){return new e6(e,0)}function mpt(e){return new e6(e,1)}function l2(e,t,n){this.k=e,this.x=t,this.y=n}l2.prototype={constructor:l2,scale:function(e){return e===1?this:new l2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new l2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};l2.prototype;var rR={exports:{}},gpt=rR.exports,Cse;function ypt(){return Cse||(Cse=1,function(e){(function(t,n,r){function i(u){var l=this,c=a();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function o(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function s(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}function a(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=s:this.alea=s})(gpt,e)}(rR)),rR.exports}var iR={exports:{}},vpt=iR.exports,Sse;function bpt(){return Sse||(Sse=1,function(e){(function(t,n,r){function i(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function s(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=s:this.xor128=s})(vpt,e)}(iR)),iR.exports}var oR={exports:{}},xpt=oR.exports,Ase;function wpt(){return Ase||(Ase=1,function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function s(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=s:this.xorwow=s})(xpt,e)}(oR)),oR.exports}var sR={exports:{}},Ept=sR.exports,Dse;function _pt(){return Dse||(Dse=1,function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function s(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=s:this.xorshift7=s})(Ept,e)}(sR)),sR.exports}var aR={exports:{}},Tpt=aR.exports,kse;function Cpt(){return kse||(kse=1,function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,m;return u.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,u.i=d,m+(c^c>>>16)|0};function l(c,f){var d,h,m,p,g,v=[],b=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,b=Math.max(b,f.length)),m=0,p=-32;p<b;++p)f&&(h^=f.charCodeAt((p+32)%f.length)),p===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(g=g+1640531527|0,d=v[p&127]^=h+g,m=d==0?m+1:0);for(m>=128&&(v[(f&&f.length||0)&127]=-1),m=127,p=4*128;p>0;--p)h=v[m+34&127],d=v[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,v[m]=h^d;c.w=g,c.X=v,c.i=m}l(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function s(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=s:this.xor4096=s})(Tpt,e)}(aR)),aR.exports}var uR={exports:{}},Spt=uR.exports,Ise;function Apt(){return Ise||(Ise=1,function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,m=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function s(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=s:this.tychei=s})(Spt,e)}(uR)),uR.exports}var lR={exports:{}},Dpt=lR.exports,Rse;function kpt(){return Rse||(Rse=1,function(e){(function(t,n,r){var i=256,o=6,s=52,a="random",u=r.pow(i,o),l=r.pow(2,s),c=l*2,f=i-1,d;function h(E,_,T){var S=[];_=_==!0?{entropy:!0}:_||{};var D=v(g(_.entropy?[E,w(n)]:E??b(),3),S),k=new m(S),R=function(){for(var O=k.g(o),M=u,F=0;O<l;)O=(O+F)*i,M*=i,F=k.g(1);for(;O>=c;)O/=2,M/=2,F>>>=1;return(O+F)/M};return R.int32=function(){return k.g(4)|0},R.quick=function(){return k.g(4)/4294967296},R.double=R,v(w(k.S),n),(_.pass||T||function(O,M,F,L){return L&&(L.S&&p(L,k),O.state=function(){return p(k,{})}),F?(r[a]=O,M):O})(R,D,"global"in _?_.global:this==r,_.state)}function m(E){var _,T=E.length,S=this,D=0,k=S.i=S.j=0,R=S.S=[];for(T||(E=[T++]);D<i;)R[D]=D++;for(D=0;D<i;D++)R[D]=R[k=f&k+E[D%T]+(_=R[D])],R[k]=_;(S.g=function(O){for(var M,F=0,L=S.i,H=S.j,V=S.S;O--;)M=V[L=f&L+1],F=F*i+V[f&(V[L]=V[H=f&H+M])+(V[H]=M)];return S.i=L,S.j=H,F})(i)}function p(E,_){return _.i=E.i,_.j=E.j,_.S=E.S.slice(),_}function g(E,_){var T=[],S=typeof E,D;if(_&&S=="object")for(D in E)try{T.push(g(E[D],_-1))}catch{}return T.length?T:S=="string"?E:E+"\0"}function v(E,_){for(var T=E+"",S,D=0;D<T.length;)_[f&D]=f&(S^=_[f&D]*19)+T.charCodeAt(D++);return w(_)}function b(){try{var E;return d&&(E=d.randomBytes)?E=E(i):(E=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(E)),w(E)}catch{var _=t.navigator,T=_&&_.plugins;return[+new Date,t,T,t.screen,w(n)]}}function w(E){return String.fromCharCode.apply(0,E)}if(v(r.random(),n),e.exports){e.exports=h;try{d=kH}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Dpt,[],Math)}(lR)),lR.exports}var H8,Nse;function Ipt(){if(Nse)return H8;Nse=1;var e=ypt(),t=bpt(),n=wpt(),r=_pt(),i=Cpt(),o=Apt(),s=kpt();return s.alea=e,s.xor128=t,s.xorwow=n,s.xorshift7=r,s.xor4096=i,s.tychei=o,H8=s,H8}var Rpt=Ipt();const AW=Fl(Rpt);function V3(){return V3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V3.apply(null,arguments)}var p_e={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Zr(e){return typeof e=="number"}function Hi(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Npt(e){return typeof e=="bigint"}function m_e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function g_e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function y_e(e){return e&&e.constructor.prototype.isUnit===!0||!1}function ud(e){return typeof e=="string"}var Di=Array.isArray;function Ri(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function zx(e){return Array.isArray(e)||Ri(e)}function Ppt(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Opt(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Fpt(e){return e&&e.constructor.prototype.isRange===!0||!1}function DW(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Mpt(e){return typeof e=="boolean"}function $pt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Lpt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function Bpt(e){return typeof e=="function"}function jpt(e){return e instanceof Date}function zpt(e){return e instanceof RegExp}function kW(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!m_e(e)&&!g_e(e))}function Upt(e){return e===null}function Vpt(e){return e===void 0}function Hpt(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function qpt(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function Wpt(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Gpt(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ypt(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Kpt(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Xpt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Qpt(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Jpt(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Zpt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function emt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function tmt(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function nmt(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function rmt(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function imt(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function omt(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function smt(e){return e&&e.constructor.prototype.isChain===!0||!1}function hf(e){var t=typeof e;return t==="object"?e===null?"null":Hi(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function ji(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return ji(n)});if(e instanceof Date)return new Date(e.valueOf());if(Hi(e))return e;if(kW(e))return amt(e,ji);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function amt(e,t){var n={};for(var r in e)JT(e,r)&&(n[r]=t(e[r]));return n}function v_e(e,t){for(var n in t)JT(t,n)&&(e[n]=t[n]);return e}function Ux(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!Ux(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Ux(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function JT(e,t){return e&&Object.hasOwnProperty.call(e,t)}function umt(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],o=e[i];o!==void 0&&(n[i]=o)}return n}var lmt=["Matrix","Array"],cmt=["number","BigNumber","Fraction"],H1=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(p_e)};V3(H1,p_e,{MATRIX_OPTIONS:lmt,NUMBER_OPTIONS:cmt});function Pse(){return!0}function Ql(){return!1}function Zv(){}const Ose="Argument is not a typed-function.";function b_e(){function e(te){return typeof te=="object"&&te!==null&&te.constructor===Object}const t=[{name:"number",test:function(te){return typeof te=="number"}},{name:"string",test:function(te){return typeof te=="string"}},{name:"boolean",test:function(te){return typeof te=="boolean"}},{name:"Function",test:function(te){return typeof te=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(te){return te instanceof Date}},{name:"RegExp",test:function(te){return te instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(te){return te===null}},{name:"undefined",test:function(te){return te===void 0}}],n={name:"any",test:Pse,isAny:!0};let r,i,o=0,s={createCount:0};function a(te){const le=r.get(te);if(le)return le;let be='Unknown type "'+te+'"';const ae=te.toLowerCase();let pe;for(pe of i)if(pe.toLowerCase()===ae){be+='. Did you mean "'+pe+'" ?';break}throw new TypeError(be)}function u(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const be=le?a(le).index:i.length,ae=[];for(let Ee=0;Ee<te.length;++Ee){if(!te[Ee]||typeof te[Ee].name!="string"||typeof te[Ee].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const $e=te[Ee].name;if(r.has($e))throw new TypeError('Duplicate type name "'+$e+'"');ae.push($e),r.set($e,{name:$e,test:te[Ee].test,isAny:te[Ee].isAny,index:be+Ee,conversionsTo:[]})}const pe=i.slice(be);i=i.slice(0,be).concat(ae).concat(pe);for(let Ee=be+ae.length;Ee<i.length;++Ee)r.get(i[Ee]).index=Ee}function l(){r=new Map,i=[],o=0,u([n],!1)}l(),u(t);function c(){let te;for(te of i)r.get(te).conversionsTo=[];o=0}function f(te){const le=i.filter(be=>{const ae=r.get(be);return!ae.isAny&&ae.test(te)});return le.length?le:["any"]}function d(te){return te&&typeof te=="function"&&"_typedFunctionData"in te}function h(te,le,be){if(!d(te))throw new TypeError(Ose);const ae=be&&be.exact,pe=Array.isArray(le)?le.join(","):le,Ee=E(pe),$e=g(Ee);if(!ae||$e in te.signatures){const It=te._typedFunctionData.signatureMap.get($e);if(It)return It}const Ne=Ee.length;let Ze;if(ae){Ze=[];let It;for(It in te.signatures)Ze.push(te._typedFunctionData.signatureMap.get(It))}else Ze=te._typedFunctionData.signatures;for(let It=0;It<Ne;++It){const zt=Ee[It],Pt=[];let en;for(en of Ze){const kn=D(en.params,It);if(!(!kn||zt.restParam&&!kn.restParam)){if(!kn.hasAny){const pn=w(kn);if(zt.types.some(Rr=>!pn.has(Rr.name)))continue}Pt.push(en)}}if(Ze=Pt,Ze.length===0)break}let Ke;for(Ke of Ze)if(Ke.params.length<=Ne)return Ke;throw new TypeError("Signature not found (signature: "+(te.name||"unnamed")+"("+g(Ee,", ")+"))")}function m(te,le,be){return h(te,le,be).implementation}function p(te,le){const be=a(le);if(be.test(te))return te;const ae=be.conversionsTo;if(ae.length===0)throw new Error("There are no conversions to "+le+" defined.");for(let pe=0;pe<ae.length;pe++)if(a(ae[pe].from).test(te))return ae[pe].convert(te);throw new Error("Cannot convert "+te+" to "+le)}function g(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return te.map(be=>be.name).join(le)}function v(te){const le=te.indexOf("...")===0,ae=(le?te.length>3?te.slice(3):"any":te).split("|").map(Ne=>a(Ne.trim()));let pe=!1,Ee=le?"...":"";return{types:ae.map(function(Ne){return pe=Ne.isAny||pe,Ee+=Ne.name+"|",{name:Ne.name,typeIndex:Ne.index,test:Ne.test,isAny:Ne.isAny,conversion:null,conversionIndex:-1}}),name:Ee.slice(0,-1),hasAny:pe,hasConversion:!1,restParam:le}}function b(te){const le=te.types.map($e=>$e.name),be=Q(le);let ae=te.hasAny,pe=te.name;const Ee=be.map(function($e){const Ne=a($e.from);return ae=Ne.isAny||ae,pe+="|"+$e.from,{name:$e.from,typeIndex:Ne.index,test:Ne.test,isAny:Ne.isAny,conversion:$e,conversionIndex:$e.index}});return{types:te.types.concat(Ee),name:pe,hasAny:ae,hasConversion:Ee.length>0,restParam:te.restParam}}function w(te){return te.typeSet||(te.typeSet=new Set,te.types.forEach(le=>te.typeSet.add(le.name))),te.typeSet}function E(te){const le=[];if(typeof te!="string")throw new TypeError("Signatures must be strings");const be=te.trim();if(be==="")return le;const ae=be.split(",");for(let pe=0;pe<ae.length;++pe){const Ee=v(ae[pe].trim());if(Ee.restParam&&pe!==ae.length-1)throw new SyntaxError('Unexpected rest parameter "'+ae[pe]+'": only allowed for the last parameter');if(Ee.types.length===0)return null;le.push(Ee)}return le}function _(te){const le=ye(te);return le?le.restParam:!1}function T(te){if(!te||te.types.length===0)return Pse;if(te.types.length===1)return a(te.types[0].name).test;if(te.types.length===2){const le=a(te.types[0].name).test,be=a(te.types[1].name).test;return function(pe){return le(pe)||be(pe)}}else{const le=te.types.map(function(be){return a(be.name).test});return function(ae){for(let pe=0;pe<le.length;pe++)if(le[pe](ae))return!0;return!1}}}function S(te){let le,be,ae;if(_(te)){le=me(te).map(T);const pe=le.length,Ee=T(ye(te)),$e=function(Ne){for(let Ze=pe;Ze<Ne.length;Ze++)if(!Ee(Ne[Ze]))return!1;return!0};return function(Ze){for(let Ke=0;Ke<le.length;Ke++)if(!le[Ke](Ze[Ke]))return!1;return $e(Ze)&&Ze.length>=pe+1}}else return te.length===0?function(Ee){return Ee.length===0}:te.length===1?(be=T(te[0]),function(Ee){return be(Ee[0])&&Ee.length===1}):te.length===2?(be=T(te[0]),ae=T(te[1]),function(Ee){return be(Ee[0])&&ae(Ee[1])&&Ee.length===2}):(le=te.map(T),function(Ee){for(let $e=0;$e<le.length;$e++)if(!le[$e](Ee[$e]))return!1;return Ee.length===le.length})}function D(te,le){return le<te.length?te[le]:_(te)?ye(te):null}function k(te,le){const be=D(te,le);return be?w(be):new Set}function R(te){return te.conversion===null||te.conversion===void 0}function O(te,le){const be=new Set;return te.forEach(ae=>{const pe=k(ae.params,le);let Ee;for(Ee of pe)be.add(Ee)}),be.has("any")?["any"]:Array.from(be)}function M(te,le,be){let ae,pe;const Ee=te||"unnamed";let $e=be,Ne;for(Ne=0;Ne<le.length;Ne++){const zt=[];if($e.forEach(Pt=>{const en=D(Pt.params,Ne),kn=T(en);(Ne<Pt.params.length||_(Pt.params))&&kn(le[Ne])&&zt.push(Pt)}),zt.length===0){if(pe=O($e,Ne),pe.length>0){const Pt=f(le[Ne]);return ae=new TypeError("Unexpected type of argument in function "+Ee+" (expected: "+pe.join(" or ")+", actual: "+Pt.join(" | ")+", index: "+Ne+")"),ae.data={category:"wrongType",fn:Ee,index:Ne,actual:Pt,expected:pe},ae}}else $e=zt}const Ze=$e.map(function(zt){return _(zt.params)?1/0:zt.params.length});if(le.length<Math.min.apply(null,Ze))return pe=O($e,Ne),ae=new TypeError("Too few arguments in function "+Ee+" (expected: "+pe.join(" or ")+", index: "+le.length+")"),ae.data={category:"tooFewArgs",fn:Ee,index:le.length,expected:pe},ae;const Ke=Math.max.apply(null,Ze);if(le.length>Ke)return ae=new TypeError("Too many arguments in function "+Ee+" (expected: "+Ke+", actual: "+le.length+")"),ae.data={category:"tooManyArgs",fn:Ee,index:le.length,expectedLength:Ke},ae;const It=[];for(let zt=0;zt<le.length;++zt)It.push(f(le[zt]).join("|"));return ae=new TypeError('Arguments of type "'+It.join(", ")+'" do not match any of the defined signatures of function '+Ee+"."),ae.data={category:"mismatch",actual:It},ae}function F(te){let le=i.length+1;for(let be=0;be<te.types.length;be++)R(te.types[be])&&(le=Math.min(le,te.types[be].typeIndex));return le}function L(te){let le=o+1;for(let be=0;be<te.types.length;be++)R(te.types[be])||(le=Math.min(le,te.types[be].conversionIndex));return le}function H(te,le){if(te.hasAny){if(!le.hasAny)return 1}else if(le.hasAny)return-1;if(te.restParam){if(!le.restParam)return 1}else if(le.restParam)return-1;if(te.hasConversion){if(!le.hasConversion)return 1}else if(le.hasConversion)return-1;const be=F(te)-F(le);if(be<0)return-1;if(be>0)return 1;const ae=L(te)-L(le);return ae<0?-1:ae>0?1:0}function V(te,le){const be=te.params,ae=le.params,pe=ye(be),Ee=ye(ae),$e=_(be),Ne=_(ae);if($e&&pe.hasAny){if(!Ne||!Ee.hasAny)return 1}else if(Ne&&Ee.hasAny)return-1;let Ze=0,Ke=0,It;for(It of be)It.hasAny&&++Ze,It.hasConversion&&++Ke;let zt=0,Pt=0;for(It of ae)It.hasAny&&++zt,It.hasConversion&&++Pt;if(Ze!==zt)return Ze-zt;if($e&&pe.hasConversion){if(!Ne||!Ee.hasConversion)return 1}else if(Ne&&Ee.hasConversion)return-1;if(Ke!==Pt)return Ke-Pt;if($e){if(!Ne)return 1}else if(Ne)return-1;const en=(be.length-ae.length)*($e?-1:1);if(en!==0)return en;const kn=[];let pn=0;for(let br=0;br<be.length;++br){const xr=H(be[br],ae[br]);kn.push(xr),pn+=xr}if(pn!==0)return pn;let Rr;for(Rr of kn)if(Rr!==0)return Rr;return 0}function Q(te){if(te.length===0)return[];const le=te.map(a);te.length>1&&le.sort((pe,Ee)=>pe.index-Ee.index);let be=le[0].conversionsTo;if(te.length===1)return be;be=be.concat([]);const ae=new Set(te);for(let pe=1;pe<le.length;++pe){let Ee;for(Ee of le[pe].conversionsTo)ae.has(Ee.from)||(be.push(Ee),ae.add(Ee.from))}return be}function K(te,le){let be=le;if(te.some(pe=>pe.hasConversion)){const pe=_(te),Ee=te.map(Z);be=function(){const Ne=[],Ze=pe?arguments.length-1:arguments.length;for(let Ke=0;Ke<Ze;Ke++)Ne[Ke]=Ee[Ke](arguments[Ke]);return pe&&(Ne[Ze]=arguments[Ze].map(Ee[Ze])),le.apply(this,Ne)}}let ae=be;if(_(te)){const pe=te.length-1;ae=function(){return be.apply(this,we(arguments,0,pe).concat([we(arguments,pe)]))}}return ae}function Z(te){let le,be,ae,pe;const Ee=[],$e=[];switch(te.types.forEach(function(Ne){Ne.conversion&&(Ee.push(a(Ne.conversion.from).test),$e.push(Ne.conversion.convert))}),$e.length){case 0:return function(Ze){return Ze};case 1:return le=Ee[0],ae=$e[0],function(Ze){return le(Ze)?ae(Ze):Ze};case 2:return le=Ee[0],be=Ee[1],ae=$e[0],pe=$e[1],function(Ze){return le(Ze)?ae(Ze):be(Ze)?pe(Ze):Ze};default:return function(Ze){for(let Ke=0;Ke<$e.length;Ke++)if(Ee[Ke](Ze))return $e[Ke](Ze);return Ze}}}function U(te){function le(be,ae,pe){if(ae<be.length){const Ee=be[ae];let $e=[];if(Ee.restParam){const Ne=Ee.types.filter(R);Ne.length<Ee.types.length&&$e.push({types:Ne,name:"..."+Ne.map(Ze=>Ze.name).join("|"),hasAny:Ne.some(Ze=>Ze.isAny),hasConversion:!1,restParam:!0}),$e.push(Ee)}else $e=Ee.types.map(function(Ne){return{types:[Ne],name:Ne.name,hasAny:Ne.isAny,hasConversion:Ne.conversion,restParam:!1}});return se($e,function(Ne){return le(be,ae+1,pe.concat([Ne]))})}else return[pe]}return le(te,0,[])}function B(te,le){const be=Math.max(te.length,le.length);for(let Ne=0;Ne<be;Ne++){const Ze=k(te,Ne),Ke=k(le,Ne);let It=!1,zt;for(zt of Ke)if(Ze.has(zt)){It=!0;break}if(!It)return!1}const ae=te.length,pe=le.length,Ee=_(te),$e=_(le);return Ee?$e?ae===pe:pe>=ae:$e?ae>=pe:ae===pe}function q(te){return te.map(le=>Le(le)?Ue(le.referToSelf.callback):Xe(le)?Ae(le.referTo.references,le.referTo.callback):le)}function z(te,le,be){const ae=[];let pe;for(pe of te){let Ee=be[pe];if(typeof Ee!="number")throw new TypeError('No definition for referenced signature "'+pe+'"');if(Ee=le[Ee],typeof Ee!="function")return!1;ae.push(Ee)}return ae}function G(te,le,be){const ae=q(te),pe=new Array(ae.length).fill(!1);let Ee=!0;for(;Ee;){Ee=!1;let $e=!0;for(let Ne=0;Ne<ae.length;++Ne){if(pe[Ne])continue;const Ze=ae[Ne];if(Le(Ze))ae[Ne]=Ze.referToSelf.callback(be),ae[Ne].referToSelf=Ze.referToSelf,pe[Ne]=!0,$e=!1;else if(Xe(Ze)){const Ke=z(Ze.referTo.references,ae,le);Ke?(ae[Ne]=Ze.referTo.callback.apply(this,Ke),ae[Ne].referTo=Ze.referTo,pe[Ne]=!0,$e=!1):Ee=!0}}if($e&&Ee)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ae}function X(te){const le=/\bthis(\(|\.signatures\b)/;Object.keys(te).forEach(be=>{const ae=te[be];if(le.test(ae.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ne(te,le){if(s.createCount++,Object.keys(le).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&X(le);const be=[],ae=[],pe={},Ee=[];let $e;for($e in le){if(!Object.prototype.hasOwnProperty.call(le,$e))continue;const Ft=E($e);if(!Ft)continue;be.forEach(function(ri){if(B(ri,Ft))throw new TypeError('Conflicting signatures "'+g(ri)+'" and "'+g(Ft)+'".')}),be.push(Ft);const di=ae.length;ae.push(le[$e]);const Yi=Ft.map(b);let Ho;for(Ho of U(Yi)){const ri=g(Ho);Ee.push({params:Ho,name:ri,fn:di}),Ho.every(Yu=>!Yu.hasConversion)&&(pe[ri]=di)}}Ee.sort(V);const Ne=G(ae,pe,gs);let Ze;for(Ze in pe)Object.prototype.hasOwnProperty.call(pe,Ze)&&(pe[Ze]=Ne[pe[Ze]]);const Ke=[],It=new Map;for(Ze of Ee)It.has(Ze.name)||(Ze.fn=Ne[Ze.fn],Ke.push(Ze),It.set(Ze.name,Ze));const zt=Ke[0]&&Ke[0].params.length<=2&&!_(Ke[0].params),Pt=Ke[1]&&Ke[1].params.length<=2&&!_(Ke[1].params),en=Ke[2]&&Ke[2].params.length<=2&&!_(Ke[2].params),kn=Ke[3]&&Ke[3].params.length<=2&&!_(Ke[3].params),pn=Ke[4]&&Ke[4].params.length<=2&&!_(Ke[4].params),Rr=Ke[5]&&Ke[5].params.length<=2&&!_(Ke[5].params),br=zt&&Pt&&en&&kn&&pn&&Rr;for(let Ft=0;Ft<Ke.length;++Ft)Ke[Ft].test=S(Ke[Ft].params);const xr=zt?T(Ke[0].params[0]):Ql,Ei=Pt?T(Ke[1].params[0]):Ql,Lr=en?T(Ke[2].params[0]):Ql,wr=kn?T(Ke[3].params[0]):Ql,Ea=pn?T(Ke[4].params[0]):Ql,ps=Rr?T(Ke[5].params[0]):Ql,_a=zt?T(Ke[0].params[1]):Ql,Eo=Pt?T(Ke[1].params[1]):Ql,Fn=en?T(Ke[2].params[1]):Ql,Kn=kn?T(Ke[3].params[1]):Ql,_o=pn?T(Ke[4].params[1]):Ql,qn=Rr?T(Ke[5].params[1]):Ql;for(let Ft=0;Ft<Ke.length;++Ft)Ke[Ft].implementation=K(Ke[Ft].params,Ke[Ft].fn);const Kr=zt?Ke[0].implementation:Zv,oo=Pt?Ke[1].implementation:Zv,Fi=en?Ke[2].implementation:Zv,To=kn?Ke[3].implementation:Zv,Vu=pn?Ke[4].implementation:Zv,$l=Rr?Ke[5].implementation:Zv,iu=zt?Ke[0].params.length:-1,Hu=Pt?Ke[1].params.length:-1,bn=en?Ke[2].params.length:-1,ms=kn?Ke[3].params.length:-1,so=pn?Ke[4].params.length:-1,qu=Rr?Ke[5].params.length:-1,Wu=br?6:0,Ll=Ke.length,Bl=Ke.map(Ft=>Ft.test),Gu=Ke.map(Ft=>Ft.implementation),Vf=function(){for(let di=Wu;di<Ll;di++)if(Bl[di](arguments))return Gu[di].apply(this,arguments);return s.onMismatch(te,arguments,Ke)};function gs(Ft,di){return arguments.length===iu&&xr(Ft)&&_a(di)?Kr.apply(this,arguments):arguments.length===Hu&&Ei(Ft)&&Eo(di)?oo.apply(this,arguments):arguments.length===bn&&Lr(Ft)&&Fn(di)?Fi.apply(this,arguments):arguments.length===ms&&wr(Ft)&&Kn(di)?To.apply(this,arguments):arguments.length===so&&Ea(Ft)&&_o(di)?Vu.apply(this,arguments):arguments.length===qu&&ps(Ft)&&qn(di)?$l.apply(this,arguments):Vf.apply(this,arguments)}try{Object.defineProperty(gs,"name",{value:te})}catch{}return gs.signatures=pe,gs._typedFunctionData={signatures:Ke,signatureMap:It},gs}function ge(te,le,be){throw M(te,le,be)}function me(te){return we(te,0,te.length-1)}function ye(te){return te[te.length-1]}function we(te,le,be){return Array.prototype.slice.call(te,le,be)}function fe(te,le){for(let be=0;be<te.length;be++)if(le(te[be]))return te[be]}function se(te,le){return Array.prototype.concat.apply([],te.map(le))}function Ce(){const te=me(arguments).map(be=>g(E(be))),le=ye(arguments);if(typeof le!="function")throw new TypeError("Callback function expected as last argument");return Ae(te,le)}function Ae(te,le){return{referTo:{references:te,callback:le}}}function Ue(te){if(typeof te!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:te}}}function Xe(te){return te&&typeof te.referTo=="object"&&Array.isArray(te.referTo.references)&&typeof te.referTo.callback=="function"}function Le(te){return te&&typeof te.referToSelf=="object"&&typeof te.referToSelf.callback=="function"}function Ge(te,le){if(!te)return le;if(le&&le!==te){const be=new Error("Function names do not match (expected: "+te+", actual: "+le+")");throw be.data={actual:le,expected:te},be}return te}function et(te){let le;for(const be in te)Object.prototype.hasOwnProperty.call(te,be)&&(d(te[be])||typeof te[be].signature=="string")&&(le=Ge(le,te[be].name));return le}function Et(te,le){let be;for(be in le)if(Object.prototype.hasOwnProperty.call(le,be)){if(be in te&&le[be]!==te[be]){const ae=new Error('Signature "'+be+'" is defined twice');throw ae.data={signature:be,sourceFunction:le[be],destFunction:te[be]},ae}te[be]=le[be]}}const ht=s;s=function(te){const le=typeof te=="string",be=le?1:0;let ae=le?te:"";const pe={};for(let Ee=be;Ee<arguments.length;++Ee){const $e=arguments[Ee];let Ne={},Ze;if(typeof $e=="function"?(Ze=$e.name,typeof $e.signature=="string"?Ne[$e.signature]=$e:d($e)&&(Ne=$e.signatures)):e($e)&&(Ne=$e,le||(Ze=et($e))),Object.keys(Ne).length===0){const Ke=new TypeError("Argument to 'typed' at index "+Ee+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ke.data={index:Ee,argument:$e},Ke}le||(ae=Ge(ae,Ze)),Et(pe,Ne)}return ne(ae||"",pe)},s.create=b_e,s.createCount=ht.createCount,s.onMismatch=ge,s.throwMismatchError=ge,s.createError=M,s.clear=l,s.clearConversions=c,s.addTypes=u,s._findType=a,s.referTo=Ce,s.referToSelf=Ue,s.convert=p,s.findSignature=h,s.find=m,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(te,le){let be="any";le!==!1&&r.has("Object")&&(be="Object"),s.addTypes([te],be)};function xt(te){if(!te||typeof te.from!="string"||typeof te.to!="string"||typeof te.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(te.to===te.from)throw new SyntaxError('Illegal to define conversion from "'+te.from+'" to itself.')}return s.addConversion=function(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};xt(te);const be=a(te.to),ae=be.conversionsTo.find(pe=>pe.from===te.from);if(ae)if(le&&le.override)s.removeConversion({from:ae.from,to:te.to,convert:ae.convert});else throw new Error('There is already a conversion from "'+te.from+'" to "'+be.name+'"');be.conversionsTo.push({from:te.from,convert:te.convert,index:o++})},s.addConversions=function(te,le){te.forEach(be=>s.addConversion(be,le))},s.removeConversion=function(te){xt(te);const le=a(te.to),be=fe(le.conversionsTo,pe=>pe.from===te.from);if(!be)throw new Error("Attempt to remove nonexistent conversion from "+te.from+" to "+te.to);if(be.convert!==te.convert)throw new Error("Conversion to remove does not match existing conversion");const ae=le.conversionsTo.indexOf(be);le.conversionsTo.splice(ae,1)},s.resolve=function(te,le){if(!d(te))throw new TypeError(Ose);const be=te._typedFunctionData.signatures;for(let ae=0;ae<be.length;++ae)if(be[ae].test(le))return be[ae];return null},s}const Fb=b_e();function mo(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function q8(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!mo(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!mo(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),o="i".concat(n)}var s="";return e<0&&(e=-e,s="-"),"".concat(s).concat(i).concat(e.toString(t)).concat(o)}function F7(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=x_e(t);switch(n){case"fixed":return dmt(e,r);case"exponential":return w_e(e,r);case"engineering":return fmt(e,r);case"bin":return q8(e,2,i);case"oct":return q8(e,8,i);case"hex":return q8(e,16,i);case"auto":return hmt(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],s=arguments[4];return o!=="."?o+s:s});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function x_e(e){var t="auto",n,r;if(e!==void 0)if(Zr(e))n=e;else if(Hi(e))n=e.toNumber();else if(kW(e))e.precision!==void 0&&(n=Fse(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=Fse(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function t6(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),o=r.indexOf(".");i+=o!==-1?o-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return s.length===0&&(s.push(0),i++),{sign:n,coefficients:s,exponent:i}}function fmt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=t6(e),r=n6(n,t),i=r.exponent,o=r.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Zr(t))for(;t>o.length||i-s+1>o.length;)o.push(0);else for(var a=Math.abs(i-s)-(o.length-1),u=0;u<a;u++)o.push(0);for(var l=Math.abs(i-s),c=1;l>0;)c++,l--;var f=o.slice(c).join(""),d=Zr(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=o.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+s.toString();return r.sign+h}function dmt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=t6(e),r=typeof t=="number"?n6(n,n.exponent+1+t):n,i=r.coefficients,o=r.exponent+1,s=o+(t||0);return i.length<s&&(i=i.concat(nx(s-i.length))),o<0&&(i=nx(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),r.sign+i.join("")}function w_e(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=t6(e),r=t?n6(n,t):n,i=r.coefficients,o=r.exponent;i.length<t&&(i=i.concat(nx(t-i.length)));var s=i.shift();return r.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function hmt(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=Mse(n==null?void 0:n.lowerExp,-3),i=Mse(n==null?void 0:n.upperExp,5),o=t6(e),s=t?n6(o,t):o;if(s.exponent<r||s.exponent>=i)return w_e(e,t);var a=s.coefficients,u=s.exponent;a.length<t&&(a=a.concat(nx(t-a.length))),a=a.concat(nx(u-a.length+1+(a.length<t?t-a.length:0))),a=nx(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),s.sign+a.join("")}function n6(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var o=t-1;for(r[o]++;r[o]===10;)r.pop(),o===0&&(r.unshift(0),n.exponent++,o++),o--,r[o]++}}return n}function nx(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function pmt(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function H3(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function Fse(e,t){if(Zr(e))return e;if(Hi(e))return e.toNumber();t()}function Mse(e,t){return Zr(e)?e:Hi(e)?e.toNumber():t}function an(e,t,n,r){function i(o){var s=umt(o,t.map(ymt));return mmt(e,t,o),n(s)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function mmt(e,t,n){var r=t.filter(o=>!gmt(o)).every(o=>n[o]!==void 0);if(!r){var i=t.filter(o=>n[o]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function gmt(e){return e&&e[0]==="?"}function ymt(e){return e&&e[0]==="?"?e.slice(1):e}function vmt(e,t){if(__e(e)&&E_e(e,t))return e[t];throw typeof e[t]=="function"&&wmt(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function bmt(e,t,n){if(__e(e)&&E_e(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function xmt(e,t){return t in e}function E_e(e,t){return!e||typeof e!="object"?!1:JT(Emt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function wmt(e,t){return e==null||typeof e[t]!="function"||JT(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:JT(_mt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function __e(e){return typeof e=="object"&&e&&e.constructor===Object}var Emt={length:!0,name:!0},_mt={toString:!0,valueOf:!0,toLocaleString:!0};class Tmt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(t){return vmt(this.wrappedObject,t)}set(t,n){return bmt(this.wrappedObject,t,n),this}has(t){return xmt(this.wrappedObject,t)}entries(){return Cmt(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function Cmt(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function Smt(e){return e?e instanceof Map||e instanceof Tmt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var T_e=function(){return T_e=Fb.create,Fb},Amt=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Dmt=an("typed",Amt,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:o}=t,s=T_e();return s.clear(),s.addTypes([{name:"number",test:Zr},{name:"Complex",test:m_e},{name:"BigNumber",test:Hi},{name:"bigint",test:Npt},{name:"Fraction",test:g_e},{name:"Unit",test:y_e},{name:"identifier",test:a=>ud&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:ud},{name:"Chain",test:smt},{name:"Array",test:Di},{name:"Matrix",test:Ri},{name:"DenseMatrix",test:Ppt},{name:"SparseMatrix",test:Opt},{name:"Range",test:Fpt},{name:"Index",test:DW},{name:"boolean",test:Mpt},{name:"ResultSet",test:$pt},{name:"Help",test:Lpt},{name:"function",test:Bpt},{name:"Date",test:jpt},{name:"RegExp",test:zpt},{name:"null",test:Upt},{name:"undefined",test:Vpt},{name:"AccessorNode",test:Hpt},{name:"ArrayNode",test:qpt},{name:"AssignmentNode",test:Wpt},{name:"BlockNode",test:Gpt},{name:"ConditionalNode",test:Ypt},{name:"ConstantNode",test:Kpt},{name:"FunctionNode",test:Qpt},{name:"FunctionAssignmentNode",test:Xpt},{name:"IndexNode",test:Jpt},{name:"Node",test:Zpt},{name:"ObjectNode",test:emt},{name:"OperatorNode",test:tmt},{name:"ParenthesisNode",test:nmt},{name:"RangeNode",test:rmt},{name:"RelationalNode",test:imt},{name:"SymbolNode",test:omt},{name:"Map",test:Smt},{name:"Object",test:kW}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||rk(u),pmt(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||ik(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||ik(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||rk(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return o||ok(u),new o(u.toString())}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||ik(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){o||ok(u);var l=new o(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||rk(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){o||ok(u);try{return new o(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||ik(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||rk(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return o||ok(u),new o(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||kmt(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),s.onMismatch=(a,u,l)=>{var c=s.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&zx(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(a,u,l)=>{var c=s.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&zx(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},s});function rk(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function ik(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function kmt(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function ok(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var M7=9e15,lg=1e9,$7="0123456789abcdef",q3="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",W3="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",L7={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:M7,crypto:!1},C_e,rp,wn=!0,r6="[DecimalError] ",k0=r6+"Invalid argument: ",S_e=r6+"Precision limit exceeded",A_e=r6+"crypto unavailable",D_e="[object Decimal]",ba=Math.floor,No=Math.pow,Imt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Rmt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Nmt=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,k_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pf=1e7,fn=7,Pmt=9007199254740991,Omt=q3.length-1,B7=W3.length-1,st={toStringTag:D_e};st.absoluteValue=st.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Zt(e)};st.ceil=function(){return Zt(new this.constructor(this),this.e+1,2)};st.clampedTo=st.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(k0+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};st.comparedTo=st.cmp=function(e){var t,n,r,i,o=this,s=o.d,a=(e=new o.constructor(e)).d,u=o.s,l=e.s;if(!s||!a)return!u||!l?NaN:u!==l?u:s===a?0:!s^u<0?1:-1;if(!s[0]||!a[0])return s[0]?u:a[0]?-l:0;if(u!==l)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(r=s.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};st.cosine=st.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+fn,r.rounding=1,n=Fmt(r,O_e(r,n)),r.precision=e,r.rounding=t,Zt(rp==2||rp==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};st.cubeRoot=st.cbrt=function(){var e,t,n,r,i,o,s,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(wn=!1,o=c.s*No(c.s*c,1/3),!o||Math.abs(o)==1/0?(n=Os(c.d),e=c.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=No(n,1/3),e=ba((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(o.toString()),s=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=qr(l.plus(c).times(a),l.plus(u),s+2,1),Os(a.d).slice(0,s)===(n=Os(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(Zt(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Zt(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return wn=!0,Zt(r,e,f.rounding,t)};st.decimalPlaces=st.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-ba(this.e/fn))*fn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};st.dividedBy=st.div=function(e){return qr(this,new this.constructor(e))};st.dividedToIntegerBy=st.divToInt=function(e){var t=this,n=t.constructor;return Zt(qr(t,new n(e),0,1,1),n.precision,n.rounding)};st.equals=st.eq=function(e){return this.cmp(e)===0};st.floor=function(){return Zt(new this.constructor(this),this.e+1,3)};st.greaterThan=st.gt=function(e){return this.cmp(e)>0};st.greaterThanOrEqualTo=st.gte=function(e){var t=this.cmp(e);return t==1||t===0};st.hyperbolicCosine=st.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),t=(1/o6(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=Vx(s,1,o.times(t),new s(1),!0);for(var u,l=e,c=new s(8);l--;)u=o.times(o),o=a.minus(u.times(c.minus(u.times(c))));return Zt(o,s.precision=n,s.rounding=r,!0)};st.hyperbolicSine=st.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=Vx(o,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/o6(5,e)),i=Vx(o,2,i,i,!0);for(var s,a=new o(5),u=new o(16),l=new o(20);e--;)s=i.times(i),i=i.times(a.plus(s.times(u.times(s).plus(l))))}return o.precision=t,o.rounding=n,Zt(i,t,n,!0)};st.hyperbolicTangent=st.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,qr(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};st.inverseCosine=st.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return r!==-1?r===0?t.isNeg()?of(n,i,o):new n(0):new n(NaN):t.isZero()?of(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=of(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))};st.inverseHyperbolicCosine=st.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,wn=!1,n=n.times(n).minus(1).sqrt().plus(n),wn=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};st.inverseHyperbolicSine=st.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,wn=!1,n=n.times(n).plus(1).sqrt().plus(n),wn=!0,r.precision=e,r.rounding=t,n.ln())};st.inverseHyperbolicTangent=st.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?Zt(new o(i),e,t,!0):(o.precision=n=r-i.e,i=qr(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)};st.inverseSine=st.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,t!==-1?t===0?(e=of(o,n+4,r).times(.5),e.s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))};st.inverseTangent=st.atan=function(){var e,t,n,r,i,o,s,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=B7)return s=of(c,f+4,d).times(.25),s.s=l.s,s}else{if(!l.s)return new c(NaN);if(f+4<=B7)return s=of(c,f+4,d).times(.5),s.s=l.s,s}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/fn+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(wn=!1,t=Math.ceil(a/fn),r=1,u=l.times(l),s=new c(l),i=l;e!==-1;)if(i=i.times(u),o=s.minus(i.div(r+=2)),i=i.times(u),s=o.plus(i.div(r+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),wn=!0,Zt(s,c.precision=f,c.rounding=d,!0)};st.isFinite=function(){return!!this.d};st.isInteger=st.isInt=function(){return!!this.d&&ba(this.e/fn)>this.d.length-2};st.isNaN=function(){return!this.s};st.isNegative=st.isNeg=function(){return this.s<0};st.isPositive=st.isPos=function(){return this.s>0};st.isZero=function(){return!!this.d&&this.d[0]===0};st.lessThan=st.lt=function(e){return this.cmp(e)<0};st.lessThanOrEqualTo=st.lte=function(e){return this.cmp(e)<1};st.logarithm=st.log=function(e){var t,n,r,i,o,s,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10===0;)i/=10;o=i!==1}if(wn=!1,a=f+h,s=Ym(l,a),r=t?G3(c,a+10):Ym(e,a),u=qr(s,r,a,1),ZT(u.d,i=f,d))do if(a+=10,s=Ym(l,a),r=t?G3(c,a+10):Ym(e,a),u=qr(s,r,a,1),!o){+Os(u.d).slice(i+1,i+15)+1==1e14&&(u=Zt(u,f+1,0));break}while(ZT(u.d,i+=10,d));return wn=!0,Zt(u,f,d)};st.minus=st.sub=function(e){var t,n,r,i,o,s,a,u,l,c,f,d,h=this,m=h.constructor;if(e=new m(e),!h.d||!e.d)return!h.s||!e.s?e=new m(NaN):h.d?e.s=-e.s:e=new m(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=m.precision,u=m.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new m(h);else return new m(u===3?-0:0);return wn?Zt(e,a,u):e}if(n=ba(e.e/fn),c=ba(h.e/fn),l=l.slice(),o=c-n,o){for(f=o<0,f?(t=l,o=-o,s=d.length):(t=d,n=c,s=l.length),r=Math.max(Math.ceil(a/fn),s)+2,o>r&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for(r=l.length,s=d.length,f=r<s,f&&(s=r),r=0;r<s;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}o=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),s=l.length,r=d.length-s;r>0;--r)l[s++]=0;for(r=d.length;r>o;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=pf-1;--l[i],l[r]+=pf}l[r]-=d[r]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=i6(l,n),wn?Zt(e,a,u):e):new m(u===3?-0:0)};st.modulo=st.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?Zt(new r(n),r.precision,r.rounding):(wn=!1,r.modulo==9?(t=qr(n,e.abs(),0,3,1),t.s*=e.s):t=qr(n,e,0,r.modulo,1),t=t.times(e),wn=!0,n.minus(t))};st.naturalExponential=st.exp=function(){return j7(this)};st.naturalLogarithm=st.ln=function(){return Ym(this)};st.negated=st.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Zt(e)};st.plus=st.add=function(e){var t,n,r,i,o,s,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),wn?Zt(e,a,u):e;if(o=ba(f.e/fn),r=ba(e.e/fn),l=l.slice(),i=o-r,i){for(i<0?(n=l,i=-i,s=c.length):(n=c,r=o,s=l.length),o=Math.ceil(a/fn),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=c.length,s-i<0&&(i=s,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/pf|0,l[i]%=pf;for(t&&(l.unshift(t),++r),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i6(l,r),wn?Zt(e,a,u):e};st.precision=st.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(k0+e);return n.d?(t=I_e(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};st.round=function(){var e=this,t=e.constructor;return Zt(new t(e),e.e+1,t.rounding)};st.sine=st.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+fn,r.rounding=1,n=$mt(r,O_e(r,n)),r.precision=e,r.rounding=t,Zt(rp>2?n.neg():n,e,t,!0)):new r(NaN)};st.squareRoot=st.sqrt=function(){var e,t,n,r,i,o,s=this,a=s.d,u=s.e,l=s.s,c=s.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);for(wn=!1,l=Math.sqrt(+s),l==0||l==1/0?(t=Os(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=ba((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(o=r,r=o.plus(qr(s,o,n+2,1)).times(.5),Os(o.d).slice(0,n)===(t=Os(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(Zt(o,u+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Zt(r,u+1,1),e=!r.times(r).eq(s));break}return wn=!0,Zt(r,u,c.rounding,e)};st.tangent=st.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=qr(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,Zt(rp==2||rp==4?n.neg():n,e,t,!0)):new r(NaN)};st.times=st.mul=function(e){var t,n,r,i,o,s,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=ba(c.e/fn)+ba(e.e/fn),u=d.length,l=h.length,u<l&&(o=d,d=h,h=o,s=u,u=l,l=s),o=[],s=u+l,r=s;r--;)o.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=o[i]+h[r]*d[i-r-1]+t,o[i--]=a%pf|0,t=a/pf|0;o[i]=(o[i]+t)%pf|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=i6(o,n),wn?Zt(e,f.precision,f.rounding):e};st.toBinary=function(e,t){return IW(this,2,e,t)};st.toDecimalPlaces=st.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ou(e,0,lg),t===void 0?t=r.rounding:Ou(t,0,8),Zt(n,e+n.e+1,t))};st.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=qd(r,!0):(Ou(e,0,lg),t===void 0?t=i.rounding:Ou(t,0,8),r=Zt(new i(r),e+1,t),n=qd(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};st.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?n=qd(i):(Ou(e,0,lg),t===void 0?t=o.rounding:Ou(t,0,8),r=Zt(new o(i),e+i.e+1,t),n=qd(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};st.toFraction=function(e){var t,n,r,i,o,s,a,u,l,c,f,d,h=this,m=h.d,p=h.constructor;if(!m)return new p(h);if(l=n=new p(1),r=u=new p(0),t=new p(r),o=t.e=I_e(m)-h.e-1,s=o%fn,t.d[0]=No(10,s<0?fn+s:s),e==null)e=o>0?t:l;else{if(a=new p(e),!a.isInt()||a.lt(l))throw Error(k0+a);e=a.gt(t)?o>0?t:l:a}for(wn=!1,a=new p(Os(m)),c=p.precision,p.precision=o=m.length*fn*2;f=qr(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=qr(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=qr(l,r,o,1).minus(h).abs().cmp(qr(u,n,o,1).minus(h).abs())<1?[l,r]:[u,n],p.precision=c,wn=!0,d};st.toHexadecimal=st.toHex=function(e,t){return IW(this,16,e,t)};st.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Ou(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(wn=!1,n=qr(n,e,0,t,1).times(e),wn=!0,Zt(n)):(e.s=n.s,n=e),n};st.toNumber=function(){return+this};st.toOctal=function(e,t){return IW(this,8,e,t)};st.toPower=st.pow=function(e){var t,n,r,i,o,s,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(No(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,o=u.rounding,e.eq(1))return Zt(a,r,o);if(t=ba(e.e/fn),t>=e.d.length-1&&(n=l<0?-l:l)<=Pmt)return i=R_e(u,a,n,r),e.s<0?new u(1).div(i):Zt(i,r,o);if(s=a.s,s<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=No(+a,l),t=n==0||!isFinite(n)?ba(l*(Math.log("0."+Os(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(wn=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=j7(e.times(Ym(a,r+n)),r),i.d&&(i=Zt(i,r+5,1),ZT(i.d,r,o)&&(t=r+10,i=Zt(j7(e.times(Ym(a,t+n)),t),t+5,1),+Os(i.d).slice(r+1,r+15)+1==1e14&&(i=Zt(i,r+1,0)))),i.s=s,wn=!0,u.rounding=o,Zt(i,r,o))};st.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=qd(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Ou(e,1,lg),t===void 0?t=i.rounding:Ou(t,0,8),r=Zt(new i(r),e,t),n=qd(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};st.toSignificantDigits=st.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ou(e,1,lg),t===void 0?t=r.rounding:Ou(t,0,8)),Zt(new r(n),e,t)};st.toString=function(){var e=this,t=e.constructor,n=qd(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};st.truncated=st.trunc=function(){return Zt(new this.constructor(this),this.e+1,1)};st.valueOf=st.toJSON=function(){var e=this,t=e.constructor,n=qd(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Os(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",n=fn-r.length,n&&(o+=Fm(n)),o+=r;s=e[t],r=s+"",n=fn-r.length,n&&(o+=Fm(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function Ou(e,t,n){if(e!==~~e||e<t||e>n)throw Error(k0+e)}function ZT(e,t,n,r){var i,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=fn,i=0):(i=Math.ceil((t+1)/fn),t%=fn),o=No(10,fn-t),a=e[i]%o|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[i+1]/o/100|0)==No(10,t-2)-1||(a==o/2||a==0)&&(e[i+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(r||n<4)&&a==9999||!r&&n>3&&a==4999):s=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(e[i+1]/o/1e3|0)==No(10,t-3)-1,s}function cR(e,t,n){for(var r,i=[0],o,s=0,a=e.length;s<a;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=$7.indexOf(e.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function Fmt(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/o6(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=Vx(e,1,t.times(i),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var qr=function(){function e(r,i,o){var s,a=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+a,r[u]=s%o|0,a=s/o|0;return a&&r.unshift(a),r}function t(r,i,o,s){var a,u;if(o!=s)u=o>s?1:-1;else for(a=u=0;a<o;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,o,s){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,a,u){var l,c,f,d,h,m,p,g,v,b,w,E,_,T,S,D,k,R,O,M,F=r.constructor,L=r.s==i.s?1:-1,H=r.d,V=i.d;if(!H||!H[0]||!V||!V[0])return new F(!r.s||!i.s||(H?V&&H[0]==V[0]:!V)?NaN:H&&H[0]==0||!V?L*0:L/0);for(u?(h=1,c=r.e-i.e):(u=pf,h=fn,c=ba(r.e/h)-ba(i.e/h)),O=V.length,k=H.length,v=new F(L),b=v.d=[],f=0;V[f]==(H[f]||0);f++);if(V[f]>(H[f]||0)&&c--,o==null?(T=o=F.precision,s=F.rounding):a?T=o+(r.e-i.e)+1:T=o,T<0)b.push(1),m=!0;else{if(T=T/h+2|0,f=0,O==1){for(d=0,V=V[0],T++;(f<k||d)&&T--;f++)S=d*u+(H[f]||0),b[f]=S/V|0,d=S%V|0;m=d||f<k}else{for(d=u/(V[0]+1)|0,d>1&&(V=e(V,d,u),H=e(H,d,u),O=V.length,k=H.length),D=O,w=H.slice(0,O),E=w.length;E<O;)w[E++]=0;M=V.slice(),M.unshift(0),R=V[0],V[1]>=u/2&&++R;do d=0,l=t(V,w,O,E),l<0?(_=w[0],O!=E&&(_=_*u+(w[1]||0)),d=_/R|0,d>1?(d>=u&&(d=u-1),p=e(V,d,u),g=p.length,E=w.length,l=t(p,w,g,E),l==1&&(d--,n(p,O<g?M:V,g,u))):(d==0&&(l=d=1),p=V.slice()),g=p.length,g<E&&p.unshift(0),n(w,p,E,u),l==-1&&(E=w.length,l=t(V,w,O,E),l<1&&(d++,n(w,O<E?M:V,E,u))),E=w.length):l===0&&(d++,w=[0]),b[f++]=d,l&&w[0]?w[E++]=H[D]||0:(w=[H[D]],E=1);while((D++<k||w[0]!==void 0)&&T--);m=w[0]!==void 0}b[0]||b.shift()}if(h==1)v.e=c,C_e=m;else{for(f=1,d=b[0];d>=10;d/=10)f++;v.e=f+c*h-1,Zt(v,a?o+v.e+1:o,s,m)}return v}}();function Zt(e,t,n,r){var i,o,s,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(o=t-i,o<0)o+=fn,s=t,c=f[d=0],u=c/No(10,i-s-1)%10|0;else if(d=Math.ceil((o+1)/fn),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,o%=fn,s=o-fn+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;o%=fn,s=o-fn+i,u=s<0?0:c/No(10,i-s-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(s<0?c:c%No(10,i-s-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(o>0?s>0?c/No(10,i-s):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=No(10,(fn-t%fn)%fn),e.e=-t||0):f[0]=e.e=0,e;if(o==0?(f.length=d,a=1,d--):(f.length=d+1,a=No(10,fn-o),f[d]=s>0?(c/No(10,i-s)%No(10,s)|0)*a:0),l)for(;;)if(d==0){for(o=1,s=f[0];s>=10;s/=10)o++;for(s=f[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,f[0]==pf&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=pf)break;f[d--]=0,a=1}for(o=f.length;f[--o]===0;)f.pop()}return wn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function qd(e,t,n){if(!e.isFinite())return P_e(e);var r,i=e.e,o=Os(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Fm(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+Fm(-i-1)+o,n&&(r=n-s)>0&&(o+=Fm(r))):i>=s?(o+=Fm(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Fm(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Fm(r))),o}function i6(e,t){var n=e[0];for(t*=fn;n>=10;n/=10)t++;return t}function G3(e,t,n){if(t>Omt)throw wn=!0,n&&(e.precision=n),Error(S_e);return Zt(new e(q3),t,1,!0)}function of(e,t,n){if(t>B7)throw Error(S_e);return Zt(new e(W3),t,n,!0)}function I_e(e){var t=e.length-1,n=t*fn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Fm(e){for(var t="";e--;)t+="0";return t}function R_e(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/fn+4);for(wn=!1;;){if(n%2&&(o=o.times(t),Lse(o.d,s)&&(i=!0)),n=ba(n/2),n===0){n=o.d.length-1,i&&o.d[n]===0&&++o.d[n];break}t=t.times(t),Lse(t.d,s)}return wn=!0,o}function $se(e){return e.d[e.d.length-1]&1}function N_e(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;)if(r=new e(t[o]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function j7(e,t){var n,r,i,o,s,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(wn=!1,u=m):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(No(2,f))/Math.LN10*2+5|0,u+=r,n=o=s=new d(1),d.precision=u;;){if(o=Zt(o.times(e),u,1),n=n.times(++c),a=s.plus(qr(o,n,u,1)),Os(a.d).slice(0,u)===Os(s.d).slice(0,u)){for(i=f;i--;)s=Zt(s.times(s),u,1);if(t==null)if(l<3&&ZT(s.d,u-r,h,l))d.precision=u+=10,n=o=a=new d(1),c=0,l++;else return Zt(s,d.precision=m,h,wn=!0);else return d.precision=m,s}s=a}}function Ym(e,t){var n,r,i,o,s,a,u,l,c,f,d,h=1,m=10,p=e,g=p.d,v=p.constructor,b=v.rounding,w=v.precision;if(p.s<0||!g||!g[0]||!p.e&&g[0]==1&&g.length==1)return new v(g&&!g[0]?-1/0:p.s!=1?NaN:g?0:p);if(t==null?(wn=!1,c=w):c=t,v.precision=c+=m,n=Os(g),r=n.charAt(0),Math.abs(o=p.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Os(p.d),r=n.charAt(0),h++;o=p.e,r>1?(p=new v("0."+n),o++):p=new v(r+"."+n.slice(1))}else return l=G3(v,c+2,w).times(o+""),p=Ym(new v(r+"."+n.slice(1)),c-m).plus(l),v.precision=w,t==null?Zt(p,w,b,wn=!0):p;for(f=p,u=s=p=qr(p.minus(1),p.plus(1),c,1),d=Zt(p.times(p),c,1),i=3;;){if(s=Zt(s.times(d),c,1),l=u.plus(qr(s,new v(i),c,1)),Os(l.d).slice(0,c)===Os(u.d).slice(0,c))if(u=u.times(2),o!==0&&(u=u.plus(G3(v,c+2,w).times(o+""))),u=qr(u,new v(h),c,1),t==null)if(ZT(u.d,c-m,b,a))v.precision=c+=m,l=s=p=qr(f.minus(1),f.plus(1),c,1),d=Zt(p.times(p),c,1),i=a=1;else return Zt(u,v.precision=w,b,wn=!0);else return v.precision=w,u;u=l,i+=2}}function P_e(e){return String(e.s*e.s/0)}function z7(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%fn,n<0&&(r+=fn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=fn;r<i;)e.d.push(+t.slice(r,r+=fn));t=t.slice(r),r=fn-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),wn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Mmt(e,t){var n,r,i,o,s,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),k_e.test(t))return z7(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Rmt.test(t))n=16,t=t.toLowerCase();else if(Imt.test(t))n=2;else if(Nmt.test(t))n=8;else throw Error(k0+t);for(o=t.search(/p/i),o>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,r=e.constructor,s&&(t=t.replace(".",""),a=t.length,o=a-o,i=R_e(r,new r(n),o,o*2)),l=cR(t,n,pf),c=l.length-1,o=c;l[o]===0;--o)l.pop();return o<0?new r(e.s*0):(e.e=i6(l,c),e.d=l,wn=!1,s&&(e=qr(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?No(2,u):Hx.pow(2,u))),wn=!0,e)}function $mt(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Vx(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/o6(5,n)),t=Vx(e,2,t,t);for(var i,o=new e(5),s=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(a))));return t}function Vx(e,t,n,r,i){var o,s,a,u,l=e.precision,c=Math.ceil(l/fn);for(wn=!1,u=n.times(n),a=new e(r);;){if(s=qr(a.times(u),new e(t++*t++),l,1),a=i?r.plus(s):r.minus(s),r=qr(s.times(u),new e(t++*t++),l,1),s=a.plus(r),s.d[c]!==void 0){for(o=c;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=r,r=s,s=o}return wn=!0,s.d.length=c+1,s}function o6(e,t){for(var n=e;--t;)n*=e;return n}function O_e(e,t){var n,r=t.s<0,i=of(e,e.precision,1),o=i.times(.5);if(t=t.abs(),t.lte(o))return rp=r?4:1,t;if(n=t.divToInt(i),n.isZero())rp=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(o))return rp=$se(n)?r?2:3:r?4:1,t;rp=$se(n)?r?1:4:r?3:2}return t.minus(i).abs()}function IW(e,t,n,r){var i,o,s,a,u,l,c,f,d,h=e.constructor,m=n!==void 0;if(m?(Ou(n,1,lg),r===void 0?r=h.rounding:Ou(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=P_e(e);else{for(c=qd(e),s=c.indexOf("."),m?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,s>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-s,d.d=cR(qd(d),10,i),d.e=d.d.length),f=cR(c,10,i),o=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(s<0?o--:(e=new h(e),e.d=f,e.e=o,e=qr(e,d,n,r,0,i),f=e.d,o=e.e,l=C_e),s=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(s!==void 0||l)&&(r===0||r===(e.s<0?3:2)):s>a||s===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++o,f.unshift(1));for(u=f.length;!f[u-1];--u);for(s=0,c="";s<u;s++)c+=$7.charAt(f[s]);if(m){if(u>1)if(t==16||t==8){for(s=t==16?4:3,--u;u%s;u++)c+="0";for(f=cR(c,i,t),u=f.length;!f[u-1];--u);for(s=1,c="1.";s<u;s++)c+=$7.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>u)for(o-=u;o--;)c+="0";else o<u&&(c=c.slice(0,o)+"."+c.slice(o))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Lse(e,t){if(e.length>t)return e.length=t,!0}function Lmt(e){return new this(e).abs()}function Bmt(e){return new this(e).acos()}function jmt(e){return new this(e).acosh()}function zmt(e,t){return new this(e).plus(t)}function Umt(e){return new this(e).asin()}function Vmt(e){return new this(e).asinh()}function Hmt(e){return new this(e).atan()}function qmt(e){return new this(e).atanh()}function Wmt(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=of(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?of(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=of(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(qr(e,t,o,1)),t=of(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(qr(e,t,o,1)),n}function Gmt(e){return new this(e).cbrt()}function Ymt(e){return Zt(e=new this(e),e.e+1,2)}function Kmt(e,t,n){return new this(e).clamp(t,n)}function Xmt(e){if(!e||typeof e!="object")throw Error(r6+"Object expected");var t,n,r,i=e.defaults===!0,o=["precision",1,lg,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,M7,"maxE",0,M7,"minE",-9e15,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=L7[n]),(r=e[n])!==void 0)if(ba(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(k0+n+": "+r);if(n="crypto",i&&(this[n]=L7[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(A_e);else this[n]=!1;else throw Error(k0+n+": "+r);return this}function Qmt(e){return new this(e).cos()}function Jmt(e){return new this(e).cosh()}function F_e(e){var t,n,r;function i(o){var s,a,u,l=this;if(!(l instanceof i))return new i(o);if(l.constructor=i,Bse(o)){l.s=o.s,wn?!o.d||o.e>i.maxE?(l.e=NaN,l.d=null):o.e<i.minE?(l.e=0,l.d=[0]):(l.e=o.e,l.d=o.d.slice()):(l.e=o.e,l.d=o.d?o.d.slice():o.d);return}if(u=typeof o,u==="number"){if(o===0){l.s=1/o<0?-1:1,l.e=0,l.d=[0];return}if(o<0?(o=-o,l.s=-1):l.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;wn?s>i.maxE?(l.e=NaN,l.d=null):s<i.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[o]):(l.e=s,l.d=[o]);return}else if(o*0!==0){o||(l.s=NaN),l.e=NaN,l.d=null;return}return z7(l,o.toString())}else if(u!=="string")throw Error(k0+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),l.s=-1):(a===43&&(o=o.slice(1)),l.s=1),k_e.test(o)?z7(l,o):Mmt(l,o)}if(i.prototype=st,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Xmt,i.clone=F_e,i.isDecimal=Bse,i.abs=Lmt,i.acos=Bmt,i.acosh=jmt,i.add=zmt,i.asin=Umt,i.asinh=Vmt,i.atan=Hmt,i.atanh=qmt,i.atan2=Wmt,i.cbrt=Gmt,i.ceil=Ymt,i.clamp=Kmt,i.cos=Qmt,i.cosh=Jmt,i.div=Zmt,i.exp=e0t,i.floor=t0t,i.hypot=n0t,i.ln=r0t,i.log=i0t,i.log10=s0t,i.log2=o0t,i.max=a0t,i.min=u0t,i.mod=l0t,i.mul=c0t,i.pow=f0t,i.random=d0t,i.round=h0t,i.sign=p0t,i.sin=m0t,i.sinh=g0t,i.sqrt=y0t,i.sub=v0t,i.sum=b0t,i.tan=x0t,i.tanh=w0t,i.trunc=E0t,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Zmt(e,t){return new this(e).div(t)}function e0t(e){return new this(e).exp()}function t0t(e){return Zt(e=new this(e),e.e+1,3)}function n0t(){var e,t,n=new this(0);for(wn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return wn=!0,new this(1/0);n=t}return wn=!0,n.sqrt()}function Bse(e){return e instanceof Hx||e&&e.toStringTag===D_e||!1}function r0t(e){return new this(e).ln()}function i0t(e,t){return new this(e).log(t)}function o0t(e){return new this(e).log(2)}function s0t(e){return new this(e).log(10)}function a0t(){return N_e(this,arguments,"lt")}function u0t(){return N_e(this,arguments,"gt")}function l0t(e,t){return new this(e).mod(t)}function c0t(e,t){return new this(e).mul(t)}function f0t(e,t){return new this(e).pow(t)}function d0t(e){var t,n,r,i,o=0,s=new this(1),a=[];if(e===void 0?e=this.precision:Ou(e,1,lg),r=Math.ceil(e/fn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);o<r;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=r/4}else throw Error(A_e);else for(;o<r;)a[o++]=Math.random()*1e7|0;for(r=a[--o],e%=fn,r&&e&&(i=No(10,fn-e),a[o]=(r/i|0)*i);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=fn)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<fn&&(n-=fn-r)}return s.e=n,s.d=a,s}function h0t(e){return Zt(e=new this(e),e.e+1,this.rounding)}function p0t(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function m0t(e){return new this(e).sin()}function g0t(e){return new this(e).sinh()}function y0t(e){return new this(e).sqrt()}function v0t(e,t){return new this(e).sub(t)}function b0t(){var e=0,t=arguments,n=new this(t[e]);for(wn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return wn=!0,Zt(n,this.precision,this.rounding)}function x0t(e){return new this(e).tan()}function w0t(e){return new this(e).tanh()}function E0t(e){return Zt(e=new this(e),e.e+1,1)}st[Symbol.for("nodejs.util.inspect.custom")]=st.toString;st[Symbol.toStringTag]="Decimal";var Hx=st.constructor=F_e(L7);q3=new Hx(q3);W3=new Hx(W3);var _0t="BigNumber",T0t=["?on","config"],C0t=an(_0t,T0t,e=>{var{on:t,config:n}=e,r=Hx.clone({precision:n.precision,modulo:Hx.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,o){i.precision!==o.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),W8={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var jse;function S0t(){return jse||(jse=1,function(e,t){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},o=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var h=f*f;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(f,d){var h=Math.abs(f),m=Math.abs(d);return h<3e3&&m<3e3?Math.sqrt(h*h+m*m):(h<m?(h=m,m=f/d):m=d/f,h*Math.sqrt(1+m*m))},a=function(){throw SyntaxError("Invalid Param")};function u(f,d){var h=Math.abs(f),m=Math.abs(d);return f===0?Math.log(m):d===0?Math.log(h):h<3e3&&m<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var l=function(f,d){var h={re:0,im:0};if(f==null)h.re=h.im=0;else if(d!==void 0)h.re=f,h.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)h.re=f.re,h.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;h.re=f.abs*Math.cos(f.arg),h.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;h.re=f.r*Math.cos(f.phi),h.im=f.r*Math.sin(f.phi)}else f.length===2?(h.re=f[0],h.im=f[1]):a();break;case"string":h.im=h.re=0;var m=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),p=1,g=0;m===null&&a();for(var v=0;v<m.length;v++){var b=m[v];b===" "||b==="	"||b===`
`||(b==="+"?p++:b==="-"?g++:b==="i"||b==="I"?(p+g===0&&a(),m[v+1]!==" "&&!isNaN(m[v+1])?(h.im+=parseFloat((g%2?"-":"")+m[v+1]),v++):h.im+=parseFloat((g%2?"-":"")+"1"),p=g=0):((p+g===0||isNaN(b))&&a(),m[v+1]==="i"||m[v+1]==="I"?(h.im+=parseFloat((g%2?"-":"")+b),v++):h.re+=parseFloat((g%2?"-":"")+b),p=g=0))}p+g>0&&a();break;case"number":h.im=0,h.re=f;break;default:a()}return isNaN(h.re)||isNaN(h.im),h};function c(f,d){if(!(this instanceof c))return new c(f,d);var h=l(f,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(f,d){var h=new c(f,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;f=this.re,d=this.im;var m=h.re,p=h.im,g,v;return p===0?new c(f/m,d/m):Math.abs(m)<Math.abs(p)?(v=m/p,g=m*v+p,new c((f*v+d)/g,(d*v-f)/g)):(v=p/m,g=p*v+m,new c((f+d*v)/g,(d-f*v)/g))},pow:function(f,d){var h=new c(f,d);if(f=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&f>0)return new c(Math.pow(f,h.re),0);if(f===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(f===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var m=Math.atan2(d,f),p=u(f,d);return f=Math.exp(h.re*p-h.im*m),d=h.im*p+h.re*m,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,h=this.abs(),m,p;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);m=.5*Math.sqrt(2*(h+f))}else m=Math.abs(d)/Math.sqrt(2*(h-f));return f<=0?p=.5*Math.sqrt(2*(h-f)):p=Math.abs(d)/Math.sqrt(2*(h+f)),new c(m,d<0?-p:p)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+o(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(u(f,d),Math.atan2(d,f))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*r(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*r(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)+r(d);return new c(Math.sin(f)/h,i(d)/h)},cot:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)-r(d);return new c(-Math.sin(f)/h,i(d)/h)},sec:function(){var f=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(d)/h,Math.sin(f)*i(d)/h)},csc:function(){var f=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(d)/h,-Math.cos(f)*i(d)/h)},asin:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(m.im,-m.re)},acos:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(Math.PI/2-m.im,m.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=f*f+(1-d)*(1-d),m=new c((1-d*d-f*f)/h,-2*f/h).log();return new c(-.5*m.im,.5*m.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),r(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(r(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,h=r(f)+Math.cos(d);return new c(i(f)/h,Math.sin(d)/h)},coth:function(){var f=2*this.re,d=2*this.im,h=r(f)-Math.cos(d);return new c(i(f)/h,-Math.sin(d)/h)},csch:function(){var f=this.re,d=this.im,h=Math.cos(2*d)-r(2*f);return new c(-2*i(f)*Math.cos(d)/h,2*r(f)*Math.sin(d)/h)},sech:function(){var f=this.re,d=this.im,h=Math.cos(2*d)+r(2*f);return new c(2*r(f)*Math.cos(d)/h,-2*i(f)*Math.sin(d)/h)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,h=f>1&&d===0,m=1-f,p=1+f,g=m*m+d*d,v=g!==0?new c((p*m-d*d)/g,(d*m+p*d)/g):new c(f!==-1?f/0:0,d!==0?d/0:0),b=v.re;return v.re=u(v.re,v.im)/2,v.im=Math.atan2(v.im,b)/2,h&&(v.im=-v.im),v},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,h=f*f+d*d;return new c(f/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var h=new c(f,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+f:(f!==0?(h+=f,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,e.exports=c})()}(W8)),W8.exports}var A0t=S0t();const xs=Fl(A0t);var D0t="Complex",k0t=[],I0t=an(D0t,k0t,()=>(Object.defineProperty(xs,"name",{value:"Complex"}),xs.prototype.constructor=xs,xs.prototype.type="Complex",xs.prototype.isComplex=!0,xs.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xs.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xs.prototype.format=function(e){var t="",n=this.im,r=this.re,i=F7(this.re,e),o=F7(this.im,e),s=Zr(e)?e:e?e.precision:null;if(s!==null){var a=Math.pow(10,-s);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=o+"i":n<0?n===-1?t=i+" - i":t=i+" - "+o.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+o+"i",t},xs.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return xs(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(Zr(n)){if(y_e(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Zr(r))return new xs({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xs.prototype.valueOf=xs.prototype.toString,xs.fromJSON=function(e){return new xs(e)},xs.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},xs),{isClass:!0});/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var R0t=2e3,Vt={s:1,n:0,d:1};function kh(e,t){if(isNaN(e=parseInt(e,10)))throw fR();return e*t}function Si(e,t){if(t===0)throw RW();var n=Object.create(na.prototype);n.s=e<0?-1:1,e=e<0?-e:e;var r=Mb(e,t);return n.n=e/r,n.d=t/r,n}function zse(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r===0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var rl=function(e,t){var n=0,r=1,i=1,o=0,s=0,a=0,u=1,l=1,c=0,f=1,d=1,h=1,m=1e7,p;if(e!=null)if(t!==void 0){if(n=e,r=t,i=n*r,n%1!==0||r%1!==0)throw F0t()}else switch(typeof e){case"object":{if("d"in e&&"n"in e)n=e.n,r=e.d,"s"in e&&(n*=e.s);else if(0 in e)n=e[0],1 in e&&(r=e[1]);else throw fR();i=n*r;break}case"number":{if(e<0&&(i=e,e=-e),e%1===0)n=e;else if(e>0){for(e>=1&&(l=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)),e/=l);f<=m&&h<=m;)if(p=(c+d)/(f+h),e===p){f+h<=m?(n=c+d,r=f+h):h>f?(n=d,r=h):(n=c,r=f);break}else e>p?(c+=d,f+=h):(d+=c,h+=f),f>m?(n=d,r=h):(n=c,r=f);n*=l}else(isNaN(e)||isNaN(t))&&(r=n=NaN);break}case"string":{if(f=e.match(/\d+|./g),f===null)throw fR();if(f[c]==="-"?(i=-1,c++):f[c]==="+"&&c++,f.length===c+1?s=kh(f[c++],i):f[c+1]==="."||f[c]==="."?(f[c]!=="."&&(o=kh(f[c++],i)),c++,(c+1===f.length||f[c+1]==="("&&f[c+3]===")"||f[c+1]==="'"&&f[c+3]==="'")&&(s=kh(f[c],i),u=Math.pow(10,f[c].length),c++),(f[c]==="("&&f[c+2]===")"||f[c]==="'"&&f[c+2]==="'")&&(a=kh(f[c+1],i),l=Math.pow(10,f[c+1].length)-1,c+=3)):f[c+1]==="/"||f[c+1]===":"?(s=kh(f[c],i),u=kh(f[c+2],1),c+=3):f[c+3]==="/"&&f[c+1]===" "&&(o=kh(f[c],i),s=kh(f[c+2],i),u=kh(f[c+4],1),c+=5),f.length<=c){r=u*l,i=n=a+r*o+l*s;break}}default:throw fR()}if(r===0)throw RW();Vt.s=i<0?-1:1,Vt.n=Math.abs(n),Vt.d=Math.abs(r)};function N0t(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)t&1&&(r=r*e%n);return r}function P0t(e,t){for(;t%2===0;t/=2);for(;t%5===0;t/=5);if(t===1)return 0;for(var n=10%t,r=1;n!==1;r++)if(n=n*10%t,r>R0t)return 0;return r}function O0t(e,t,n){for(var r=1,i=N0t(10,n,t),o=0;o<300;o++){if(r===i)return o;r=r*10%t,i=i*10%t}return 0}function Mb(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function na(e,t){if(rl(e,t),this instanceof na)e=Mb(Vt.d,Vt.n),this.s=Vt.s,this.n=Vt.n/e,this.d=Vt.d/e;else return Si(Vt.s*Vt.n,Vt.d)}var RW=function(){return new Error("Division by Zero")},fR=function(){return new Error("Invalid argument")},F0t=function(){return new Error("Parameters must be integer")};na.prototype={s:1,n:0,d:1,abs:function(){return Si(this.n,this.d)},neg:function(){return Si(-this.s*this.n,this.d)},add:function(e,t){return rl(e,t),Si(this.s*this.n*Vt.d+Vt.s*this.d*Vt.n,this.d*Vt.d)},sub:function(e,t){return rl(e,t),Si(this.s*this.n*Vt.d-Vt.s*this.d*Vt.n,this.d*Vt.d)},mul:function(e,t){return rl(e,t),Si(this.s*Vt.s*this.n*Vt.n,this.d*Vt.d)},div:function(e,t){return rl(e,t),Si(this.s*Vt.s*this.n*Vt.d,this.d*Vt.n)},clone:function(){return Si(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new na(NaN);if(e===void 0)return Si(this.s*this.n%this.d,1);if(rl(e,t),Vt.n===0&&this.d===0)throw RW();return Si(this.s*(Vt.d*this.n)%(Vt.n*this.d),Vt.d*this.d)},gcd:function(e,t){return rl(e,t),Si(Mb(Vt.n,this.n)*Mb(Vt.d,this.d),Vt.d*this.d)},lcm:function(e,t){return rl(e,t),Vt.n===0&&this.n===0?Si(0,1):Si(Vt.n*this.n,Mb(Vt.n,this.n)*Mb(Vt.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new na(NaN):Si(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new na(NaN):Si(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new na(NaN):Si(Math.round(e*this.s*this.n/this.d),e)},roundTo:function(e,t){return rl(e,t),Si(this.s*Math.round(this.n*Vt.d/(this.d*Vt.n))*Vt.n,Vt.d)},inverse:function(){return Si(this.s*this.d,this.n)},pow:function(e,t){if(rl(e,t),Vt.d===1)return Vt.s<0?Si(Math.pow(this.s*this.d,Vt.n),Math.pow(this.n,Vt.n)):Si(Math.pow(this.s*this.n,Vt.n),Math.pow(this.d,Vt.n));if(this.s<0)return null;var n=zse(this.n),r=zse(this.d),i=1,o=1;for(var s in n)if(s!=="1"){if(s==="0"){i=0;break}if(n[s]*=Vt.n,n[s]%Vt.d===0)n[s]/=Vt.d;else return null;i*=Math.pow(s,n[s])}for(var s in r)if(s!=="1"){if(r[s]*=Vt.n,r[s]%Vt.d===0)r[s]/=Vt.d;else return null;o*=Math.pow(s,r[s])}return Vt.s<0?Si(o,i):Si(i,o)},equals:function(e,t){return rl(e,t),this.s*this.n*Vt.d===Vt.s*Vt.n*this.d},compare:function(e,t){rl(e,t);var n=this.s*this.n*Vt.d-Vt.s*Vt.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var i=Si(n[r-1],1),o=r-2;o>=0;o--)i=i.inverse().add(n[o]);if(Math.abs(i.sub(t).valueOf())<e)return i.mul(this.s)}return this},divisible:function(e,t){return rl(e,t),!(!(Vt.n*this.d)||this.n*Vt.d%(Vt.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do r.push(Math.floor(t/n)),e=t%n,t=n,n=e;while(t!==1);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=P0t(t,n),i=O0t(t,n,r),o=this.s<0?"-":"";if(o+=t/n|0,t%=n,t*=10,t&&(o+="."),r){for(var s=i;s--;)o+=t/n|0,t%=n,t*=10;o+="(";for(var s=r;s--;)o+=t/n|0,t%=n,t*=10;o+=")"}else for(var s=e;t&&s--;)o+=t/n|0,t%=n,t*=10;return o}};var M0t="Fraction",$0t=[],L0t=an(M0t,$0t,()=>(Object.defineProperty(na,"name",{value:"Fraction"}),na.prototype.constructor=na,na.prototype.type="Fraction",na.prototype.isFraction=!0,na.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},na.fromJSON=function(e){return new na(e)},na),{isClass:!0}),B0t="Matrix",j0t=[],z0t=an(B0t,j0t,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function G8(e,t,n){var r=e.constructor,i=new r(2),o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!mo(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),o="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(o);case 8:return"".concat(e.toOctal()).concat(o);case 16:return"".concat(e.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(t," not supported "))}}function U0t(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=x_e(t);switch(n){case"fixed":return H0t(e,r);case"exponential":return Use(e,r);case"engineering":return V0t(e,r);case"bin":return G8(e,2,i);case"oct":return G8(e,8,i);case"hex":return G8(e,16,i);case"auto":{var o=Vse(t==null?void 0:t.lowerExp,-3),s=Vse(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=o&&l<s?a=u.toFixed():a=Use(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function V0t(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),o=i.toPrecision(t);if(o.includes("e")){var s=e.constructor;o=new s(o).toFixed()}return o+"e"+(n>=0?"+":"")+r.toString()}function Use(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function H0t(e,t){return e.toFixed(t)}function Vse(e,t){return Zr(e)?e:Hi(e)?e.toNumber():t}function po(e,t){var n=q0t(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function q0t(e,t){if(typeof e=="number")return F7(e,t);if(Hi(e))return U0t(e,t);if(W0t(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return M_e(e,t);if(ud(e))return Hse(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>Hse(r)+": "+po(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function Hse(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in qse?qse[i]:i,r++}return'"'+n+'"'}var qse={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function M_e(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=M_e(e[i],t);return n+="]",n}else return po(e,t)}function W0t(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function Dr(e,t,n){if(!(this instanceof Dr))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Dr.prototype=new RangeError;Dr.prototype.constructor=RangeError;Dr.prototype.name="DimensionError";Dr.prototype.isDimensionError=!0;function Yp(e,t,n){if(!(this instanceof Yp))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Yp.prototype=new RangeError;Yp.prototype.constructor=RangeError;Yp.prototype.name="IndexError";Yp.prototype.isIndexError=!0;function ha(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function $_e(e,t,n){var r,i=e.length;if(i!==t[n])throw new Dr(i,t[n]);if(n<t.length-1){var o=n+1;for(r=0;r<i;r++){var s=e[r];if(!Array.isArray(s))throw new Dr(t.length-1,t.length,"<");$_e(e[r],t,o)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new Dr(t.length+1,t.length,">")}function Wse(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new Dr(e.length,0)}else $_e(e,t,0)}function ki(e,t){if(e!==void 0){if(!Zr(e)||!mo(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Yp(e,t)}}function U7(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!Zr(i)||!mo(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+po(t)+")")}),(Zr(e)||Hi(e))&&(e=[e]);var r=n!==void 0?n:0;return V7(e,t,0,r),e}function V7(e,t,n,r){var i,o,s=e.length,a=t[n],u=Math.min(s,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)o=e[i],Array.isArray(o)||(o=[o],e[i]=o),V7(o,t,l,r);for(i=u;i<a;i++)o=[],e[i]=o,V7(o,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function L_e(e,t){var n=Y0t(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Dr(0,r,"!=");t=NW(t,r);var i=B_e(t);if(r!==i)throw new Dr(i,r,"!=");try{return G0t(n,t)}catch(o){throw o instanceof Dr?new Dr(i,r,"!="):o}}function NW(e,t){var n=B_e(e),r=e.slice(),i=-1,o=e.indexOf(i),s=e.indexOf(i,o+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var a=o>=0,u=t%n===0;if(a)if(u)r[o]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function B_e(e){return e.reduce((t,n)=>t*n,1)}function G0t(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var o=t[i];r=[];for(var s=n.length/o,a=0;a<s;a++)r.push(n.slice(a*o,(a+1)*o));n=r}return n}function j_e(e,t,n,r){var i=r||ha(e);if(n)for(var o=0;o<n;o++)e=[e],i.unshift(1);for(e=z_e(e,t,0);i.length<t;)i.push(1);return e}function z_e(e,t,n){var r,i;if(Array.isArray(e)){var o=n+1;for(r=0,i=e.length;r<i;r++)e[r]=z_e(e[r],t,o)}else for(var s=n;s<t;s++)e=[e];return e}function Y0t(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function Y3(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],s=Array.isArray(o);if(i===0&&s&&(r=o.length),s&&o.length!==r)return;var a=s?Y3(o,t):t(o);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function U_e(e,t,n,r){if(r<n){if(e.length!==t.length)throw new Dr(e.length,t.length);for(var i=[],o=0;o<e.length;o++)i[o]=U_e(e[o],t[o],n,r+1);return i}else return e.concat(t)}function V_e(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return U_e(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function K0t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),o=new Array(i).fill(null),s=0;s<t.length;s++)for(var a=t[s],u=r[s],l=0;l<u;l++){var c=i-u+l;a[l]>o[c]&&(o[c]=a[l])}for(var f=0;f<t.length;f++)K3(t[f],o);return o}function K3(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var o=n-r+i;if(e[i]<t[o]&&e[i]>1||e[i]>t[o])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[o]))}}function Gse(e,t){var n=ha(e);if(Ux(n,t))return e;K3(n,t);var r=K0t(n,t),i=r.length,o=[...Array(i-n.length).fill(1),...n],s=Q0t(e);n.length<i&&(s=L_e(s,o),n=ha(s));for(var a=0;a<i;a++)n[a]<r[a]&&(s=X0t(s,r[a],a),n=ha(s));return s}function X0t(e,t,n){return V_e(...Array(t).fill(e),n)}function Q0t(e){return V3([],e)}function H_e(e){return Object.keys(e.signatures||{}).reduce(function(t,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)}var J0t="DenseMatrix",Z0t=["Matrix"],egt=an(J0t,Z0t,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!ud(f))throw new Error("Invalid datatype: "+f);if(Ri(c))c.type==="DenseMatrix"?(this._data=ji(c._data),this._size=ji(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Di(c.data)&&Di(c.size))this._data=c.data,this._size=c.size,Wse(this._data,this._size),this._datatype=f||c.datatype;else if(Di(c))this._data=l(c),this._size=ha(this._data),Wse(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+hf(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Y3(this._data,hf)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return o(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!Di(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Dr(c.length,this._size.length);for(var f=0;f<c.length;f++)ki(c[f],this._size[f]);for(var d=this._data,h=0,m=c.length;h<m;h++){var p=c[h];ki(p,d.length),d=d[p]}return d},n.prototype.set=function(c,f,d){if(!Di(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Dr(c.length,this._size.length,"<");var h,m,p,g=c.map(function(b){return b+1});u(this,g,d);var v=this._data;for(h=0,m=c.length-1;h<m;h++)p=c[h],ki(p,v.length),v=v[p];return p=c[c.length-1],ki(p,v.length),v[p]=f,this};function r(c,f){if(!DW(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new Dr(h.length,c._size.length);for(var m=f.min(),p=f.max(),g=0,v=c._size.length;g<v;g++)ki(m[g],c._size[g]),ki(p[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var m=h===d-1,p=f.dimension(h);return m?p.map(function(g){return ki(g,c.length),c[g]}).valueOf():p.map(function(g){ki(g,c.length);var v=c[g];return i(v,f,d,h+1)}).valueOf()}function o(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),p=f.isScalar(),g;if(Ri(d)?(g=d.size(),d=d.valueOf()):g=ha(d),p){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!Ux(g,m))try{g.length===0?d=Gse([d],m):d=Gse(d,m),g=ha(d)}catch{}if(m.length<c._size.length)throw new Dr(m.length,c._size.length,"<");if(g.length<m.length){for(var v=0,b=0;m[v]===1&&g[v]===1;)v++;for(;m[v]===1;)b++,v++;d=j_e(d,m.length,b,g)}if(!Ux(m,g))throw new Dr(m,g,">");var w=f.max().map(function(T){return T+1});u(c,w,h);var E=m.length,_=0;s(c._data,f,d,E,_)}return c}function s(c,f,d,h,m){var p=m===h-1,g=f.dimension(m);p?g.forEach(function(v,b){ki(v),c[v]=d[b[0]]}):g.forEach(function(v,b){ki(v),s(c[v],f,d[b[0]],h,m+1)})}n.prototype.resize=function(c,f,d){if(!zx(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),m=d?this.clone():this;return a(m,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;Di(h);)h=h[0];return h}return c._size=f.slice(0),c._data=U7(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=L_e(d._data,c);var h=d._size.reduce((m,p)=>m*p);return d._size=NW(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var p=0,g=f.length;p<g;p++)f[p]>h[p]&&(h[p]=f[p],m=!0);m&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:ji(this._data),size:ji(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,d=H_e(c),h=function g(v,b){return Di(v)?v.map(function(w,E){return g(w,b.concat(E))}):d===1?c(v):d===2?c(v,b):c(v,b,f)},m=h(this._data,[]),p=this._datatype!==void 0?Y3(m,hf):void 0;return new n(m,p)},n.prototype.forEach=function(c){var f=this,d=function h(m,p){Di(m)?m.forEach(function(g,v){h(g,p.concat(v))}):c(m,p,f)};d(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(Di(d))for(var m=0;m<d.length;m++)yield*f(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(v){var b=h.map(w=>[w[v]]);f.push(new n(b,c._datatype))},p=0;p<d[1];p++)m(p);return f},n.prototype.toArray=function(){return ji(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return po(this._data,c)},n.prototype.toString=function(){return po(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Hi(c)&&(c=c.toNumber()),!Zr(c)||!mo(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],p=Math.min(h-d,m-f),g=[],v=0;v<p;v++)g[v]=this._data[v+d][v+f];return new n({data:g,size:[p],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!Di(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(S){if(Hi(S)&&(S=S.toNumber()),!Zr(S)||!mo(S)||S<1)throw new Error("Size values must be positive integers");return S}),d){if(Hi(d)&&(d=d.toNumber()),!Zr(d)||!mo(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,p=d<0?-d:0,g=c[0],v=c[1],b=Math.min(g-p,v-m),w;if(Di(f)){if(f.length!==b)throw new Error("Invalid value array length");w=function(D){return f[D]}}else if(Ri(f)){var E=f.size();if(E.length!==1||E[0]!==b)throw new Error("Invalid matrix length");w=function(D){return f.get([D])}}else w=function(){return f};h||(h=Hi(w(0))?w(0).mul(0):0);var _=[];if(c.length>0){_=U7(_,c,h);for(var T=0;T<b;T++)_[T+p][T+m]=w(T)}return new n({data:_,size:[g,v]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!Zr(c)||!mo(c)||!Zr(f)||!mo(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ki(c,this._size[0]),ki(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return Ri(c)?l(c.valueOf()):Di(c)?c.map(l):c}return n},{isClass:!0});function tgt(e){var t=e.length,n=e[0].length,r,i,o=[];for(i=0;i<n;i++){var s=[];for(r=0;r<t;r++)s.push(e[r][i]);o.push(s)}return o}function ngt(e){for(var t=0;t<e.length;t++)if(zx(e[t]))return!0;return!1}function X3(e,t){Ri(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?X3(i,t):t(i)}}function ah(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return ah(r,t)}):t(e)}function rgt(e,t,n){var r=Array.isArray(e)?ha(e):e.size();if(t<0||t>=r.length)throw new Yp(t,r.length);return Ri(e)?e.create(Q3(e.valueOf(),t,n)):Q3(e,t,n)}function Q3(e,t,n){var r,i,o,s;if(t<=0)if(Array.isArray(e[0])){for(s=tgt(e),i=[],r=0;r<s.length;r++)i[r]=Q3(s[r],t-1,n);return i}else{for(o=e[0],r=1;r<e.length;r++)o=n(o,e[r]);return o}else{for(i=[],r=0;r<e.length;r++)i[r]=Q3(e[r],t-1,n);return i}}var Yse="isInteger",igt=["typed"],ogt=an(Yse,igt,e=>{var{typed:t}=e;return t(Yse,{number:mo,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":t.referToSelf(n=>r=>ah(r,n))})}),q_e="number",PW="number, number";function W_e(e){return Math.abs(e)}W_e.signature=q_e;function G_e(e,t){return e+t}G_e.signature=PW;function Y_e(e,t){return e-t}Y_e.signature=PW;function K_e(e,t){return e*t}K_e.signature=PW;function X_e(e){return-e}X_e.signature=q_e;function sgt(e,t){return Math.log(e)}var agt="number";function Q_e(e){return Number.isNaN(e)}Q_e.signature=agt;function ugt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var Kse="isZero",lgt=["typed","equalScalar"],cgt=an(Kse,lgt,e=>{var{typed:t,equalScalar:n}=e;return t(Kse,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>ah(i,r))})}),Xse="isNaN",fgt=["typed"],dgt=an(Xse,fgt,e=>{var{typed:t}=e;return t(Xse,{number:Q_e,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":t.referToSelf(n=>r=>ah(r,n))})});function hgt(e,t,n,r){return H3(e.re,t.re,n,r)&&H3(e.im,t.im,n,r)}var pgt=an("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),J3="equalScalar",mgt=["typed","config"],ggt=an(J3,mgt,e=>{var{typed:t,config:n}=e,r=pgt({typed:t});return t(J3,{"boolean, boolean":function(o,s){return o===s},"number, number":function(o,s){return H3(o,s,n.relTol,n.absTol)},"BigNumber, BigNumber":function(o,s){return o.eq(s)||ugt(o,s,n.relTol,n.absTol)},"bigint, bigint":function(o,s){return o===s},"Fraction, Fraction":function(o,s){return o.equals(s)},"Complex, Complex":function(o,s){return hgt(o,s,n.relTol,n.absTol)}},r)});an(J3,["typed","config"],e=>{var{typed:t,config:n}=e;return t(J3,{"number, number":function(i,o){return H3(i,o,n.relTol,n.absTol)}})});var ygt="SparseMatrix",vgt=["typed","equalScalar","Matrix"],bgt=an(ygt,vgt,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(p,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!ud(g))throw new Error("Invalid datatype: "+g);if(Ri(p))o(this,p,g);else if(p&&Di(p.index)&&Di(p.ptr)&&Di(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=g||p.datatype;else if(Di(p))s(this,p,g);else{if(p)throw new TypeError("Unsupported type of data ("+hf(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function o(p,g,v){g.type==="SparseMatrix"?(p._values=g._values?ji(g._values):void 0,p._index=ji(g._index),p._ptr=ji(g._ptr),p._size=ji(g._size),p._datatype=v||g._datatype):s(p,g.valueOf(),v||g._datatype)}function s(p,g,v){p._values=[],p._index=[],p._ptr=[],p._datatype=v;var b=g.length,w=0,E=n,_=0;if(ud(v)&&(E=t.find(n,[v,v])||n,_=t.convert(0,v)),b>0){var T=0;do{p._ptr.push(p._index.length);for(var S=0;S<b;S++){var D=g[S];if(Di(D)){if(T===0&&w<D.length&&(w=D.length),T<D.length){var k=D[T];E(k,_)||(p._values.push(k),p._index.push(S))}}else T===0&&w<1&&(w=1),E(D,_)||(p._values.push(D),p._index.push(S))}T++}while(T<w)}p._ptr.push(p._index.length),p._size=[b,w]}i.prototype=new r,i.prototype.createSparseMatrix=function(p,g){return new i(p,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Y3(this._values,hf)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,g){return new i(p,g)},i.prototype.density=function(){var p=this._size[0],g=this._size[1];return p!==0&&g!==0?this._index.length/(p*g):0},i.prototype.subset=function(p,g,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,p);case 2:case 3:return u(this,p,g,v);default:throw new SyntaxError("Wrong number of arguments")}};function a(p,g){if(!DW(g))throw new TypeError("Invalid index");var v=g.isScalar();if(v)return p.get(g.min());var b=g.size();if(b.length!==p._size.length)throw new Dr(b.length,p._size.length);var w,E,_,T,S=g.min(),D=g.max();for(w=0,E=p._size.length;w<E;w++)ki(S[w],p._size[w]),ki(D[w],p._size[w]);var k=p._values,R=p._index,O=p._ptr,M=g.dimension(0),F=g.dimension(1),L=[],H=[];M.forEach(function(Z,U){H[Z]=U[0],L[Z]=!0});var V=k?[]:void 0,Q=[],K=[];return F.forEach(function(Z){for(K.push(Q.length),_=O[Z],T=O[Z+1];_<T;_++)w=R[_],L[w]===!0&&(Q.push(H[w]),V&&V.push(k[_]))}),K.push(Q.length),new i({values:V,index:Q,ptr:K,size:b,datatype:p._datatype})}function u(p,g,v,b){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var w=g.size(),E=g.isScalar(),_;if(Ri(v)?(_=v.size(),v=v.toArray()):_=ha(v),E){if(_.length!==0)throw new TypeError("Scalar expected");p.set(g.min(),v,b)}else{if(w.length!==1&&w.length!==2)throw new Dr(w.length,p._size.length,"<");if(_.length<w.length){for(var T=0,S=0;w[T]===1&&_[T]===1;)T++;for(;w[T]===1;)S++,T++;v=j_e(v,w.length,S,_)}if(!Ux(w,_))throw new Dr(w,_,">");if(w.length===1){var D=g.dimension(0);D.forEach(function(O,M){ki(O),p.set([O,0],v[M[0]],b)})}else{var k=g.dimension(0),R=g.dimension(1);k.forEach(function(O,M){ki(O),R.forEach(function(F,L){ki(F),p.set([O,F],v[M[0]][L[0]],b)})})}}return p}i.prototype.get=function(p){if(!Di(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new Dr(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=p[0],v=p[1];ki(g,this._size[0]),ki(v,this._size[1]);var b=l(g,this._ptr[v],this._ptr[v+1],this._index);return b<this._ptr[v+1]&&this._index[b]===g?this._values[b]:0},i.prototype.set=function(p,g,v){if(!Di(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new Dr(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var b=p[0],w=p[1],E=this._size[0],_=this._size[1],T=n,S=0;ud(this._datatype)&&(T=t.find(n,[this._datatype,this._datatype])||n,S=t.convert(0,this._datatype)),(b>E-1||w>_-1)&&(d(this,Math.max(b+1,E),Math.max(w+1,_),v),E=this._size[0],_=this._size[1]),ki(b,E),ki(w,_);var D=l(b,this._ptr[w],this._ptr[w+1],this._index);return D<this._ptr[w+1]&&this._index[D]===b?T(g,S)?c(D,w,this._values,this._index,this._ptr):this._values[D]=g:T(g,S)||f(D,b,w,g,this._values,this._index,this._ptr),this};function l(p,g,v,b){if(v-g===0)return v;for(var w=g;w<v;w++)if(b[w]===p)return w;return g}function c(p,g,v,b,w){v.splice(p,1),b.splice(p,1);for(var E=g+1;E<w.length;E++)w[E]--}function f(p,g,v,b,w,E,_){w.splice(p,0,b),E.splice(p,0,g);for(var T=v+1;T<_.length;T++)_[T]++}i.prototype.resize=function(p,g,v){if(!zx(p))throw new TypeError("Array or Matrix expected");var b=p.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(b.length!==2)throw new Error("Only two dimensions matrix are supported");b.forEach(function(E){if(!Zr(E)||!mo(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+po(b)+")")});var w=v?this.clone():this;return d(w,b[0],b[1],g)};function d(p,g,v,b){var w=b||0,E=n,_=0;ud(p._datatype)&&(E=t.find(n,[p._datatype,p._datatype])||n,_=t.convert(0,p._datatype),w=t.convert(w,p._datatype));var T=!E(w,_),S=p._size[0],D=p._size[1],k,R,O;if(v>D){for(R=D;R<v;R++)if(p._ptr[R]=p._values.length,T)for(k=0;k<S;k++)p._values.push(w),p._index.push(k);p._ptr[v]=p._values.length}else v<D&&(p._ptr.splice(v+1,D-v),p._values.splice(p._ptr[v],p._values.length),p._index.splice(p._ptr[v],p._index.length));if(D=v,g>S){if(T){var M=0;for(R=0;R<D;R++){p._ptr[R]=p._ptr[R]+M,O=p._ptr[R+1]+M;var F=0;for(k=S;k<g;k++,F++)p._values.splice(O+F,0,w),p._index.splice(O+F,0,k),M++}p._ptr[D]=p._values.length}}else if(g<S){var L=0;for(R=0;R<D;R++){p._ptr[R]=p._ptr[R]-L;var H=p._ptr[R],V=p._ptr[R+1]-L;for(O=H;O<V;O++)k=p._index[O],k>g-1&&(p._values.splice(O,1),p._index.splice(O,1),L++)}p._ptr[R]=p._values.length}return p._size[0]=g,p._size[1]=v,p}i.prototype.reshape=function(p,g){if(!Di(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(Z){if(!Zr(Z)||!mo(Z)||Z<=-2||Z===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+po(p)+")")});var v=this._size[0]*this._size[1];p=NW(p,v);var b=p[0]*p[1];if(v!==b)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=g?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return w;for(var E=[],_=0;_<w._ptr.length;_++)for(var T=0;T<w._ptr[_+1]-w._ptr[_];T++)E.push(_);for(var S=w._values.slice(),D=w._index.slice(),k=0;k<w._index.length;k++){var R=D[k],O=E[k],M=R*w._size[1]+O;E[k]=M%p[1],D[k]=Math.floor(M/p[1])}w._values.length=0,w._index.length=0,w._ptr.length=p[1]+1,w._size=p.slice();for(var F=0;F<w._ptr.length;F++)w._ptr[F]=0;for(var L=0;L<S.length;L++){var H=D[L],V=E[L],Q=S[L],K=l(H,w._ptr[V],w._ptr[V+1],w._index);f(K,H,V,Q,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var p=new i({values:this._values?ji(this._values):void 0,index:ji(this._index),ptr:ji(this._ptr),size:ji(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,b=this._size[0],w=this._size[1],E=H_e(p),_=function(S,D,k){return E===1?p(S):E===2?p(S,[D,k]):p(S,[D,k],v)};return h(this,0,b-1,0,w-1,_,g)};function h(p,g,v,b,w,E,_){var T=[],S=[],D=[],k=n,R=0;ud(p._datatype)&&(k=t.find(n,[p._datatype,p._datatype])||n,R=t.convert(0,p._datatype));for(var O=function(z,G,X){z=E(z,G,X),k(z,R)||(T.push(z),S.push(G))},M=b;M<=w;M++){D.push(T.length);var F=p._ptr[M],L=p._ptr[M+1];if(_)for(var H=F;H<L;H++){var V=p._index[H];V>=g&&V<=v&&O(p._values[H],V-g,M-b)}else{for(var Q={},K=F;K<L;K++){var Z=p._index[K];Q[Z]=p._values[K]}for(var U=g;U<=v;U++){var B=U in Q?Q[U]:0;O(B,U-g,M-b)}}}return D.push(T.length),new i({values:T,index:S,ptr:D,size:[v-g+1,w-b+1]})}i.prototype.forEach=function(p,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,b=this._size[0],w=this._size[1],E=0;E<w;E++){var _=this._ptr[E],T=this._ptr[E+1];if(g)for(var S=_;S<T;S++){var D=this._index[S];p(this._values[S],[D,E],v)}else{for(var k={},R=_;R<T;R++){var O=this._index[R];k[O]=this._values[R]}for(var M=0;M<b;M++){var F=M in k?k[M]:0;p(F,[M,E],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],g=0;g<p;g++)for(var v=this._ptr[g],b=this._ptr[g+1],w=v;w<b;w++){var E=this._index[w];yield{value:this._values[w],index:[E,g]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(p,g,v,b,w){var E=b[0],_=b[1],T=[],S,D;for(S=0;S<E;S++)for(T[S]=[],D=0;D<_;D++)T[S][D]=0;for(D=0;D<_;D++)for(var k=v[D],R=v[D+1],O=k;O<R;O++)S=g[O],T[S][D]=p?w?ji(p[O]):p[O]:1;return T}return i.prototype.format=function(p){for(var g=this._size[0],v=this._size[1],b=this.density(),w="Sparse Matrix ["+po(g,p)+" x "+po(v,p)+"] density: "+po(b,p)+`
`,E=0;E<v;E++)for(var _=this._ptr[E],T=this._ptr[E+1],S=_;S<T;S++){var D=this._index[S];w+=`
    (`+po(D,p)+", "+po(E,p)+") ==> "+(this._values?po(this._values[S],p):"X")}return w},i.prototype.toString=function(){return po(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(Hi(p)&&(p=p.toNumber()),!Zr(p)||!mo(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var g=p>0?p:0,v=p<0?-p:0,b=this._size[0],w=this._size[1],E=Math.min(b-v,w-g),_=[],T=[],S=[];S[0]=0;for(var D=g;D<w&&_.length<E;D++)for(var k=this._ptr[D],R=this._ptr[D+1],O=k;O<R;O++){var M=this._index[O];if(M===D-g+v){_.push(this._values[O]),T[_.length-1]=M-v;break}}return S.push(_.length),new i({values:_,index:T,ptr:S,size:[E,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,g,v,b,w){if(!Di(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(Z){if(Hi(Z)&&(Z=Z.toNumber()),!Zr(Z)||!mo(Z)||Z<1)throw new Error("Size values must be positive integers");return Z}),v){if(Hi(v)&&(v=v.toNumber()),!Zr(v)||!mo(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var E=n,_=0;ud(w)&&(E=t.find(n,[w,w])||n,_=t.convert(0,w));var T=v>0?v:0,S=v<0?-v:0,D=p[0],k=p[1],R=Math.min(D-S,k-T),O;if(Di(g)){if(g.length!==R)throw new Error("Invalid value array length");O=function(U){return g[U]}}else if(Ri(g)){var M=g.size();if(M.length!==1||M[0]!==R)throw new Error("Invalid matrix length");O=function(U){return g.get([U])}}else O=function(){return g};for(var F=[],L=[],H=[],V=0;V<k;V++){H.push(F.length);var Q=V-T;if(Q>=0&&Q<R){var K=O(Q);E(K,_)||(L.push(Q+S),F.push(K))}}return H.push(F.length),new i({values:F,index:L,ptr:H,size:[D,k]})},i.prototype.swapRows=function(p,g){if(!Zr(p)||!mo(p)||!Zr(g)||!mo(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ki(p,this._size[0]),ki(g,this._size[0]),i._swapRows(p,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,g,v,b,w){for(var E=b[p],_=b[p+1],T=E;T<_;T++)w(v[T],g[T])},i._swapRows=function(p,g,v,b,w,E){for(var _=0;_<v;_++){var T=E[_],S=E[_+1],D=l(p,T,S,w),k=l(g,T,S,w);if(D<S&&k<S&&w[D]===p&&w[k]===g){if(b){var R=b[D];b[D]=b[k],b[k]=R}continue}if(D<S&&w[D]===p&&(k>=S||w[k]!==g)){var O=b?b[D]:void 0;w.splice(k,0,g),b&&b.splice(k,0,O),w.splice(k<=D?D+1:D,1),b&&b.splice(k<=D?D+1:D,1);continue}if(k<S&&w[k]===g&&(D>=S||w[D]!==p)){var M=b?b[k]:void 0;w.splice(D,0,p),b&&b.splice(D,0,M),w.splice(D<=k?k+1:k,1),b&&b.splice(D<=k?k+1:k,1)}}},i},{isClass:!0}),xgt="number",wgt=["typed"];function Egt(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function _gt(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var o=t+n;if(isNaN(o))throw new SyntaxError('String "'+e.input+'" is not a valid number');return o}var Tgt=an(xgt,wgt,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=Egt(i);if(o)return _gt(o);var s=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(s=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(s-1)&&(u=u-2**s)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":t.referToSelf(r=>i=>ah(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),Cgt="bignumber",Sgt=["typed","BigNumber"],Agt=an(Cgt,Sgt,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var s=o[2],a=n(o[1]),u=new n(2).pow(Number(s));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(s)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>ah(i,r))})}),Dgt="fraction",kgt=["typed","Fraction"],Igt=an(Dgt,kgt,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,o){return new n(i,o)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>ah(i,r))})}),Qse="matrix",Rgt=["typed","Matrix","DenseMatrix","SparseMatrix"],Ngt=an(Qse,Rgt,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(Qse,{"":function(){return o([])},string:function(a){return o([],a)},"string, string":function(a,u){return o([],a,u)},Array:function(a){return o(a)},Matrix:function(a){return o(a,a.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(s,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(s,u);if(a==="sparse")return new i(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),Jse="unaryMinus",Pgt=["typed"],Ogt=an(Jse,Pgt,e=>{var{typed:t}=e;return t(Jse,{number:X_e,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>ah(r,n))})}),Zse="abs",Fgt=["typed"],Mgt=an(Zse,Fgt,e=>{var{typed:t}=e;return t(Zse,{number:W_e,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>ah(r,n))})}),eae="apply",$gt=["typed","isInteger"],Lgt=an(eae,$gt,e=>{var{typed:t,isInteger:n}=e;return t(eae,{"Array | Matrix, number | BigNumber, function":function(i,o,s){if(!n(o))throw new TypeError("Integer number expected for dimension");var a=Array.isArray(i)?ha(i):i.size();if(o<0||o>=a.length)throw new Yp(o,a.length);return Ri(i)?i.create(Z3(i.valueOf(),o,s)):Z3(i,o,s)}})});function Z3(e,t,n){var r,i,o;if(t<=0)if(Array.isArray(e[0])){for(o=Bgt(e),i=[],r=0;r<o.length;r++)i[r]=Z3(o[r],t-1,n);return i}else return n(e);else{for(i=[],r=0;r<e.length;r++)i[r]=Z3(e[r],t-1,n);return i}}function Bgt(e){var t=e.length,n=e[0].length,r,i,o=[];for(i=0;i<n;i++){var s=[];for(r=0;r<t;r++)s.push(e[r][i]);o.push(s)}return o}var tae="addScalar",jgt=["typed"],zgt=an(tae,jgt,e=>{var{typed:t}=e;return t(tae,{"number, number":G_e,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=t.find(n,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),nae="subtractScalar",Ugt=["typed"],Vgt=an(nae,Ugt,e=>{var{typed:t}=e;return t(nae,{"number, number":Y_e,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=t.find(n,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),Hgt="matAlgo11xS0s",qgt=["typed","equalScalar"],J_e=an(Hgt,qgt,e=>{var{typed:t,equalScalar:n}=e;return function(i,o,s,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],p,g=n,v=0,b=s;typeof d=="string"&&(p=d,g=t.find(n,[p,p]),v=t.convert(0,p),o=t.convert(o,p),b=t.find(s,[p,p]));for(var w=[],E=[],_=[],T=0;T<m;T++){_[T]=E.length;for(var S=c[T],D=c[T+1],k=S;k<D;k++){var R=l[k],O=a?b(o,u[k]):b(u[k],o);g(O,v)||(E.push(R),w.push(O))}}return _[m]=E.length,i.createSparseMatrix({values:w,index:E,ptr:_,size:[h,m],datatype:p})}}),Wgt="matAlgo12xSfs",Ggt=["typed","DenseMatrix"],Ygt=an(Wgt,Ggt,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,o,s,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],p,g=s;typeof d=="string"&&(p=d,o=t.convert(o,p),g=t.find(s,[p,p]));for(var v=[],b=[],w=[],E=0;E<m;E++){for(var _=E+1,T=c[E],S=c[E+1],D=T;D<S;D++){var k=l[D];b[k]=u[D],w[k]=_}for(var R=0;R<h;R++)E===0&&(v[R]=[]),w[R]===_?v[R][E]=a?g(o,b[R]):g(b[R],o):v[R][E]=a?g(o,0):g(0,o)}return new n({data:v,size:[h,m],datatype:p})}}),Kgt="matAlgo14xDs",Xgt=["typed"],OW=an(Kgt,Xgt,e=>{var{typed:t}=e;return function(i,o,s,a){var u=i._data,l=i._size,c=i._datatype,f,d=s;typeof c=="string"&&(f=c,o=t.convert(o,f),d=t.find(s,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,o,a):[];return i.createDenseMatrix({data:h,size:ji(l),datatype:f})};function n(r,i,o,s,a,u,l){var c=[];if(i===o.length-1)for(var f=0;f<s;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<s;d++)c[d]=n(r,i+1,o,o[i+1],a[d],u,l);return c}}),Qgt="matAlgo03xDSf",Jgt=["typed"],Zgt=an(Qgt,Jgt,e=>{var{typed:t}=e;return function(r,i,o,s){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new Dr(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=u[0],g=u[1],v,b=0,w=o;typeof l=="string"&&l===m&&l!=="mixed"&&(v=l,b=t.convert(0,v),w=t.find(o,[v,v]));for(var E=[],_=0;_<p;_++)E[_]=[];for(var T=[],S=[],D=0;D<g;D++){for(var k=D+1,R=d[D],O=d[D+1],M=R;M<O;M++){var F=f[M];T[F]=s?w(c[M],a[F][D]):w(a[F][D],c[M]),S[F]=k}for(var L=0;L<p;L++)S[L]===k?E[L][D]=T[L]:E[L][D]=s?w(b,a[L][D]):w(a[L][D],b)}return r.createDenseMatrix({data:E,size:[p,g],datatype:l===r._datatype&&m===i._datatype?v:void 0})}}),eyt="matAlgo05xSfSf",tyt=["typed","equalScalar"],nyt=an(eyt,tyt,e=>{var{typed:t,equalScalar:n}=e;return function(i,o,s){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,p=o._size,g=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==p.length)throw new Dr(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],b=c[1],w,E=n,_=0,T=s;typeof f=="string"&&f===g&&f!=="mixed"&&(w=f,E=t.find(n,[w,w]),_=t.convert(0,w),T=t.find(s,[w,w]));var S=a&&d?[]:void 0,D=[],k=[],R=S?[]:void 0,O=S?[]:void 0,M=[],F=[],L,H,V,Q;for(H=0;H<b;H++){k[H]=D.length;var K=H+1;for(V=l[H],Q=l[H+1];V<Q;V++)L=u[V],D.push(L),M[L]=K,R&&(R[L]=a[V]);for(V=m[H],Q=m[H+1];V<Q;V++)L=h[V],M[L]!==K&&D.push(L),F[L]=K,O&&(O[L]=d[V]);if(S)for(V=k[H];V<D.length;){L=D[V];var Z=M[L],U=F[L];if(Z===K||U===K){var B=Z===K?R[L]:_,q=U===K?O[L]:_,z=T(B,q);E(z,_)?D.splice(V,1):(S.push(z),V++)}}}return k[b]=D.length,i.createSparseMatrix({values:S,index:D,ptr:k,size:[v,b],datatype:f===i._datatype&&g===o._datatype?w:void 0})}}),ryt="matAlgo13xDD",iyt=["typed"],oyt=an(ryt,iyt,e=>{var{typed:t}=e;return function(i,o,s){var a=i._data,u=i._size,l=i._datatype,c=o._data,f=o._size,d=o._datatype,h=[];if(u.length!==f.length)throw new Dr(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[m]=u[m]}var p,g=s;typeof l=="string"&&l===d&&(p=l,g=t.find(s,[p,p]));var v=h.length>0?n(g,0,h,h[0],a,c):[];return i.createDenseMatrix({data:v,size:h,datatype:p})};function n(r,i,o,s,a,u){var l=[];if(i===o.length-1)for(var c=0;c<s;c++)l[c]=r(a[c],u[c]);else for(var f=0;f<s;f++)l[f]=n(r,i+1,o,o[i+1],a[f],u[f]);return l}}),syt="broadcast",ayt=["concat"],uyt=an(syt,ayt,e=>{var{concat:t}=e;return function(i,o){var s=Math.max(i._size.length,o._size.length);if(i._size.length===o._size.length&&i._size.every((m,p)=>m===o._size[p]))return[i,o];for(var a=n(i._size,s,0),u=n(o._size,s,0),l=[],c=0;c<s;c++)l[c]=Math.max(a[c],u[c]);K3(a,l),K3(u,l);var f=i.clone(),d=o.clone();f._size.length<s?f.reshape(n(f._size,s,1)):d._size.length<s&&d.reshape(n(d._size,s,1));for(var h=0;h<s;h++)f._size[h]<l[h]&&(f=r(f,l[h],h)),d._size[h]<l[h]&&(d=r(d,l[h],h));return[f,d]};function n(i,o,s){return[...Array(o-i.length).fill(s),...i]}function r(i,o,s){return t(...Array(o).fill(i),s)}}),lyt="matrixAlgorithmSuite",cyt=["typed","matrix","concat"],Z_e=an(lyt,cyt,e=>{var{typed:t,matrix:n,concat:r}=e,i=oyt({typed:t}),o=OW({typed:t}),s=uyt({concat:r});return function(u){var l=u.elop,c=u.SD||u.DS,f;l?(f={"DenseMatrix, DenseMatrix":(p,g)=>i(...s(p,g),l),"Array, Array":(p,g)=>i(...s(n(p),n(g)),l).valueOf(),"Array, DenseMatrix":(p,g)=>i(...s(n(p),g),l),"DenseMatrix, Array":(p,g)=>i(...s(p,n(g)),l)},u.SS&&(f["SparseMatrix, SparseMatrix"]=(p,g)=>u.SS(...s(p,g),l,!1)),u.DS&&(f["DenseMatrix, SparseMatrix"]=(p,g)=>u.DS(...s(p,g),l,!1),f["Array, SparseMatrix"]=(p,g)=>u.DS(...s(n(p),g),l,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(p,g)=>c(...s(g,p),l,!0),f["SparseMatrix, Array"]=(p,g)=>c(...s(n(g),p),l,!0))):(f={"DenseMatrix, DenseMatrix":t.referToSelf(p=>(g,v)=>i(...s(g,v),p)),"Array, Array":t.referToSelf(p=>(g,v)=>i(...s(n(g),n(v)),p).valueOf()),"Array, DenseMatrix":t.referToSelf(p=>(g,v)=>i(...s(n(g),v),p)),"DenseMatrix, Array":t.referToSelf(p=>(g,v)=>i(...s(g,n(v)),p))},u.SS&&(f["SparseMatrix, SparseMatrix"]=t.referToSelf(p=>(g,v)=>u.SS(...s(g,v),p,!1))),u.DS&&(f["DenseMatrix, SparseMatrix"]=t.referToSelf(p=>(g,v)=>u.DS(...s(g,v),p,!1)),f["Array, SparseMatrix"]=t.referToSelf(p=>(g,v)=>u.DS(...s(n(g),v),p,!1))),c&&(f["SparseMatrix, DenseMatrix"]=t.referToSelf(p=>(g,v)=>c(...s(v,g),p,!0)),f["SparseMatrix, Array"]=t.referToSelf(p=>(g,v)=>c(...s(n(v),g),p,!0))));var d=u.scalar||"any",h=u.Ds||u.Ss;h&&(l?(f["DenseMatrix,"+d]=(p,g)=>o(p,g,l,!1),f[d+", DenseMatrix"]=(p,g)=>o(g,p,l,!0),f["Array,"+d]=(p,g)=>o(n(p),g,l,!1).valueOf(),f[d+", Array"]=(p,g)=>o(n(g),p,l,!0).valueOf()):(f["DenseMatrix,"+d]=t.referToSelf(p=>(g,v)=>o(g,v,p,!1)),f[d+", DenseMatrix"]=t.referToSelf(p=>(g,v)=>o(v,g,p,!0)),f["Array,"+d]=t.referToSelf(p=>(g,v)=>o(n(g),v,p,!1).valueOf()),f[d+", Array"]=t.referToSelf(p=>(g,v)=>o(n(v),g,p,!0).valueOf())));var m=u.sS!==void 0?u.sS:u.Ss;return l?(u.Ss&&(f["SparseMatrix,"+d]=(p,g)=>u.Ss(p,g,l,!1)),m&&(f[d+", SparseMatrix"]=(p,g)=>m(g,p,l,!0))):(u.Ss&&(f["SparseMatrix,"+d]=t.referToSelf(p=>(g,v)=>u.Ss(g,v,p,!1))),m&&(f[d+", SparseMatrix"]=t.referToSelf(p=>(g,v)=>m(v,g,p,!0)))),l&&l.signatures&&v_e(f,l.signatures),f}}),fyt="matAlgo01xDSid",dyt=["typed"],e2e=an(fyt,dyt,e=>{var{typed:t}=e;return function(r,i,o,s){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new Dr(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=u[0],g=u[1],v=typeof l=="string"&&l!=="mixed"&&l===m?l:void 0,b=v?t.find(o,[v,v]):o,w,E,_=[];for(w=0;w<p;w++)_[w]=[];var T=[],S=[];for(E=0;E<g;E++){for(var D=E+1,k=d[E],R=d[E+1],O=k;O<R;O++)w=f[O],T[w]=s?b(c[O],a[w][E]):b(a[w][E],c[O]),S[w]=D;for(w=0;w<p;w++)S[w]===D?_[w][E]=T[w]:_[w][E]=a[w][E]}return r.createDenseMatrix({data:_,size:[p,g],datatype:l===r._datatype&&m===i._datatype?v:void 0})}}),hyt="matAlgo04xSidSid",pyt=["typed","equalScalar"],myt=an(hyt,pyt,e=>{var{typed:t,equalScalar:n}=e;return function(i,o,s){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,p=o._size,g=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==p.length)throw new Dr(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],b=c[1],w,E=n,_=0,T=s;typeof f=="string"&&f===g&&f!=="mixed"&&(w=f,E=t.find(n,[w,w]),_=t.convert(0,w),T=t.find(s,[w,w]));var S=a&&d?[]:void 0,D=[],k=[],R=a&&d?[]:void 0,O=a&&d?[]:void 0,M=[],F=[],L,H,V,Q,K;for(H=0;H<b;H++){k[H]=D.length;var Z=H+1;for(Q=l[H],K=l[H+1],V=Q;V<K;V++)L=u[V],D.push(L),M[L]=Z,R&&(R[L]=a[V]);for(Q=m[H],K=m[H+1],V=Q;V<K;V++)if(L=h[V],M[L]===Z){if(R){var U=T(R[L],d[V]);E(U,_)?M[L]=null:R[L]=U}}else D.push(L),F[L]=Z,O&&(O[L]=d[V]);if(R&&O)for(V=k[H];V<D.length;)L=D[V],M[L]===Z?(S[V]=R[L],V++):F[L]===Z?(S[V]=O[L],V++):D.splice(V,1)}return k[b]=D.length,i.createSparseMatrix({values:S,index:D,ptr:k,size:[v,b],datatype:f===i._datatype&&g===o._datatype?w:void 0})}}),gyt="matAlgo10xSids",yyt=["typed","DenseMatrix"],t2e=an(gyt,yyt,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,o,s,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],p,g=s;typeof d=="string"&&(p=d,o=t.convert(o,p),g=t.find(s,[p,p]));for(var v=[],b=[],w=[],E=0;E<m;E++){for(var _=E+1,T=c[E],S=c[E+1],D=T;D<S;D++){var k=l[D];b[k]=u[D],w[k]=_}for(var R=0;R<h;R++)E===0&&(v[R]=[]),w[R]===_?v[R][E]=a?g(o,b[R]):g(b[R],o):v[R][E]=o}return new n({data:v,size:[h,m],datatype:p})}}),vyt="multiplyScalar",byt=["typed"],xyt=an(vyt,byt,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":K_e,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),rae="multiply",wyt=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Eyt=an(rae,wyt,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:o,dot:s}=e,a=J_e({typed:t,equalScalar:o}),u=OW({typed:t});function l(_,T){switch(_.length){case 1:switch(T.length){case 1:if(_[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;case 2:switch(T.length){case 1:if(_[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+T[0]+")");break;case 2:if(_[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function c(_,T,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return s(_,T)}function f(_,T){if(T.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(_,T)}function d(_,T){var S=_._data,D=_._size,k=_._datatype||_.getDataType(),R=T._data,O=T._size,M=T._datatype||T.getDataType(),F=D[0],L=O[1],H,V=r,Q=i;k&&M&&k===M&&typeof k=="string"&&k!=="mixed"&&(H=k,V=t.find(r,[H,H]),Q=t.find(i,[H,H]));for(var K=[],Z=0;Z<L;Z++){for(var U=Q(S[0],R[0][Z]),B=1;B<F;B++)U=V(U,Q(S[B],R[B][Z]));K[Z]=U}return _.createDenseMatrix({data:K,size:[L],datatype:k===_._datatype&&M===T._datatype?H:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":b}),m=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":E});function p(_,T){var S=_._data,D=_._size,k=_._datatype||_.getDataType(),R=T._data,O=T._datatype||T.getDataType(),M=D[0],F=D[1],L,H=r,V=i;k&&O&&k===O&&typeof k=="string"&&k!=="mixed"&&(L=k,H=t.find(r,[L,L]),V=t.find(i,[L,L]));for(var Q=[],K=0;K<M;K++){for(var Z=S[K],U=V(Z[0],R[0]),B=1;B<F;B++)U=H(U,V(Z[B],R[B]));Q[K]=U}return _.createDenseMatrix({data:Q,size:[M],datatype:k===_._datatype&&O===T._datatype?L:void 0})}function g(_,T){var S=_._data,D=_._size,k=_._datatype||_.getDataType(),R=T._data,O=T._size,M=T._datatype||T.getDataType(),F=D[0],L=D[1],H=O[1],V,Q=r,K=i;k&&M&&k===M&&typeof k=="string"&&k!=="mixed"&&k!=="mixed"&&(V=k,Q=t.find(r,[V,V]),K=t.find(i,[V,V]));for(var Z=[],U=0;U<F;U++){var B=S[U];Z[U]=[];for(var q=0;q<H;q++){for(var z=K(B[0],R[0][q]),G=1;G<L;G++)z=Q(z,K(B[G],R[G][q]));Z[U][q]=z}}return _.createDenseMatrix({data:Z,size:[F,H],datatype:k===_._datatype&&M===T._datatype?V:void 0})}function v(_,T){var S=_._data,D=_._size,k=_._datatype||_.getDataType(),R=T._values,O=T._index,M=T._ptr,F=T._size,L=T._datatype||T._data===void 0?T._datatype:T.getDataType();if(!R)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var H=D[0],V=F[1],Q,K=r,Z=i,U=o,B=0;k&&L&&k===L&&typeof k=="string"&&k!=="mixed"&&(Q=k,K=t.find(r,[Q,Q]),Z=t.find(i,[Q,Q]),U=t.find(o,[Q,Q]),B=t.convert(0,Q));for(var q=[],z=[],G=[],X=T.createSparseMatrix({values:q,index:z,ptr:G,size:[H,V],datatype:k===_._datatype&&L===T._datatype?Q:void 0}),ne=0;ne<V;ne++){G[ne]=z.length;var ge=M[ne],me=M[ne+1];if(me>ge)for(var ye=0,we=0;we<H;we++){for(var fe=we+1,se=void 0,Ce=ge;Ce<me;Ce++){var Ae=O[Ce];ye!==fe?(se=Z(S[we][Ae],R[Ce]),ye=fe):se=K(se,Z(S[we][Ae],R[Ce]))}ye===fe&&!U(se,B)&&(z.push(we),q.push(se))}}return G[V]=z.length,X}function b(_,T){var S=_._values,D=_._index,k=_._ptr,R=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var O=T._data,M=T._datatype||T.getDataType(),F=_._size[0],L=T._size[0],H=[],V=[],Q=[],K,Z=r,U=i,B=o,q=0;R&&M&&R===M&&typeof R=="string"&&R!=="mixed"&&(K=R,Z=t.find(r,[K,K]),U=t.find(i,[K,K]),B=t.find(o,[K,K]),q=t.convert(0,K));var z=[],G=[];Q[0]=0;for(var X=0;X<L;X++){var ne=O[X];if(!B(ne,q))for(var ge=k[X],me=k[X+1],ye=ge;ye<me;ye++){var we=D[ye];G[we]?z[we]=Z(z[we],U(ne,S[ye])):(G[we]=!0,V.push(we),z[we]=U(ne,S[ye]))}}for(var fe=V.length,se=0;se<fe;se++){var Ce=V[se];H[se]=z[Ce]}return Q[1]=V.length,_.createSparseMatrix({values:H,index:V,ptr:Q,size:[F,1],datatype:R===_._datatype&&M===T._datatype?K:void 0})}function w(_,T){var S=_._values,D=_._index,k=_._ptr,R=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var O=T._data,M=T._datatype||T.getDataType(),F=_._size[0],L=T._size[0],H=T._size[1],V,Q=r,K=i,Z=o,U=0;R&&M&&R===M&&typeof R=="string"&&R!=="mixed"&&(V=R,Q=t.find(r,[V,V]),K=t.find(i,[V,V]),Z=t.find(o,[V,V]),U=t.convert(0,V));for(var B=[],q=[],z=[],G=_.createSparseMatrix({values:B,index:q,ptr:z,size:[F,H],datatype:R===_._datatype&&M===T._datatype?V:void 0}),X=[],ne=[],ge=0;ge<H;ge++){z[ge]=q.length;for(var me=ge+1,ye=0;ye<L;ye++){var we=O[ye][ge];if(!Z(we,U))for(var fe=k[ye],se=k[ye+1],Ce=fe;Ce<se;Ce++){var Ae=D[Ce];ne[Ae]!==me?(ne[Ae]=me,q.push(Ae),X[Ae]=K(we,S[Ce])):X[Ae]=Q(X[Ae],K(we,S[Ce]))}}for(var Ue=z[ge],Xe=q.length,Le=Ue;Le<Xe;Le++){var Ge=q[Le];B[Le]=X[Ge]}}return z[H]=q.length,G}function E(_,T){var S=_._values,D=_._index,k=_._ptr,R=_._datatype||_._data===void 0?_._datatype:_.getDataType(),O=T._values,M=T._index,F=T._ptr,L=T._datatype||T._data===void 0?T._datatype:T.getDataType(),H=_._size[0],V=T._size[1],Q=S&&O,K,Z=r,U=i;R&&L&&R===L&&typeof R=="string"&&R!=="mixed"&&(K=R,Z=t.find(r,[K,K]),U=t.find(i,[K,K]));for(var B=Q?[]:void 0,q=[],z=[],G=_.createSparseMatrix({values:B,index:q,ptr:z,size:[H,V],datatype:R===_._datatype&&L===T._datatype?K:void 0}),X=Q?[]:void 0,ne=[],ge,me,ye,we,fe,se,Ce,Ae,Ue=0;Ue<V;Ue++){z[Ue]=q.length;var Xe=Ue+1;for(fe=F[Ue],se=F[Ue+1],we=fe;we<se;we++)if(Ae=M[we],Q)for(me=k[Ae],ye=k[Ae+1],ge=me;ge<ye;ge++)Ce=D[ge],ne[Ce]!==Xe?(ne[Ce]=Xe,q.push(Ce),X[Ce]=U(O[we],S[ge])):X[Ce]=Z(X[Ce],U(O[we],S[ge]));else for(me=k[Ae],ye=k[Ae+1],ge=me;ge<ye;ge++)Ce=D[ge],ne[Ce]!==Xe&&(ne[Ce]=Xe,q.push(Ce));if(Q)for(var Le=z[Ue],Ge=q.length,et=Le;et<Ge;et++){var Et=q[et];B[et]=X[Et]}}return z[V]=q.length,G}return t(rae,i,{"Array, Array":t.referTo("Matrix, Matrix",_=>(T,S)=>{l(ha(T),ha(S));var D=_(n(T),n(S));return Ri(D)?D.valueOf():D}),"Matrix, Matrix":function(T,S){var D=T.size(),k=S.size();return l(D,k),D.length===1?k.length===1?c(T,S,D[0]):f(T,S):k.length===1?h(T,S):m(T,S)},"Matrix, Array":t.referTo("Matrix,Matrix",_=>(T,S)=>_(T,n(S))),"Array, Matrix":t.referToSelf(_=>(T,S)=>_(n(T,S.storage()),S)),"SparseMatrix, any":function(T,S){return a(T,S,i,!1)},"DenseMatrix, any":function(T,S){return u(T,S,i,!1)},"any, SparseMatrix":function(T,S){return a(S,T,i,!0)},"any, DenseMatrix":function(T,S){return u(S,T,i,!0)},"Array, any":function(T,S){return u(n(T),S,i,!1).valueOf()},"any, Array":function(T,S){return u(n(S),T,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(_=>(T,S,D)=>{for(var k=_(T,S),R=0;R<D.length;R++)k=_(k,D[R]);return k})})}),_yt="sqrt",Tyt=["config","typed","Complex"],Cyt=an(_yt,Tyt,e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||t.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(o){return isNaN(o)?NaN:o>=0||t.predictable?Math.sqrt(o):new r(o,0).sqrt()}}),iae="subtract",Syt=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Ayt=an(iae,Syt,e=>{var{typed:t,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:o,DenseMatrix:s,concat:a}=e,u=e2e({typed:t}),l=Zgt({typed:t}),c=nyt({typed:t,equalScalar:r}),f=t2e({typed:t,DenseMatrix:s}),d=Ygt({typed:t,DenseMatrix:s}),h=Z_e({typed:t,matrix:n,concat:a});return t(iae,{"any, any":i},h({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),oae="conj",Dyt=["typed"],kyt=an(oae,Dyt,e=>{var{typed:t}=e;return t(oae,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>ah(r,n))})}),sae="concat",Iyt=["typed","matrix","isInteger"],Ryt=an(sae,Iyt,e=>{var{typed:t,matrix:n,isInteger:r}=e;return t(sae,{"...Array | Matrix | number | BigNumber":function(o){var s,a=o.length,u=-1,l,c=!1,f=[];for(s=0;s<a;s++){var d=o[s];if(Ri(d)&&(c=!0),Zr(d)||Hi(d)){if(s!==a-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||s>0&&u>l)throw new Yp(u,l+1)}else{var h=ji(d).valueOf(),m=ha(h);if(f[s]=h,l=u,u=m.length-1,s>0&&u!==l)throw new Dr(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var p=f.shift();f.length;)p=V_e(p,f.shift(),u);return c?n(p):p},"...string":function(o){return o.join("")}})});function Nyt(e,t,n,r,i){if(Fb.isTypedFunction(e)){var o=[t,n,r],s=Fb.resolve(e,o);if(s)return f(s.implementation,o);var a=[t,n],u=Fb.resolve(e,a);if(u)return f(u.implementation,a);var l=[t],c=Fb.resolve(e,l);return c?f(c.implementation,l):f(e,o)}else return e(t,n,r);function f(d,h){try{return d.apply(d,h)}catch(g){var m;if(g instanceof TypeError&&((m=g.data)===null||m===void 0?void 0:m.category)==="wrongType"){var p=[];throw p.push("value: ".concat(hf(t))),h.length>=2&&p.push("index: ".concat(hf(n))),h.length>=3&&p.push("array: ".concat(hf(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(e.name,"(").concat(p.join(", "),") at index ").concat(JSON.stringify(n)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(e.name,": ").concat(g.message))}}}var aae="identity",Pyt=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Oyt=an(aae,Pyt,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:o,SparseMatrix:s}=e;return t(aae,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Hi(l)||Hi(c)?i:null;if(Hi(l)&&(l=l.toNumber()),Hi(c)&&(c=c.toNumber()),!mo(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!mo(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,m=d?new d(0):0,p=[l,c];if(f){if(f==="sparse")return s.diagonal(p,h,0,m);if(f==="dense")return o.diagonal(p,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=U7([],p,m),v=l<c?l:c,b=0;b<v;b++)g[b][b]=h;return g}}),uae="map",Fyt=["typed"],Myt=an(uae,Fyt,e=>{var{typed:t}=e;return t(uae,{"Array, function":$yt,"Matrix, function":function(r,i){return r.map(i)}})});function $yt(e,t){var n=function r(i,o){return Array.isArray(i)?i.map(function(s,a){return r(s,o.concat(a))}):Nyt(t,i,o,e,"map")};return n(e,[])}function Lyt(){throw new Error('No "bignumber" implementation available')}function Byt(){throw new Error('No "fraction" implementation available')}function jyt(){throw new Error('No "matrix" implementation available')}var lae="size",zyt=["typed","config","?matrix"],Uyt=an(lae,zyt,e=>{var{typed:t,config:n,matrix:r}=e;return t(lae,{Matrix:function(o){return o.create(o.size())},Array:ha,string:function(o){return n.matrix==="Array"?[o.length]:r([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return n.matrix==="Array"?[]:r?r([]):jyt()}})});function eP(e,t,n){var r;return String(e).includes("Unexpected type")?(r=arguments.length>2?" (type: "+hf(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):String(e).includes("complex numbers")?(r=arguments.length>2?" (type: "+hf(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}var Vyt="numeric",Hyt=["number","?bignumber","?fraction"],qyt=an(Vyt,Hyt,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:s=>t(s),BigNumber:n?s=>n(s):Lyt,bigint:s=>BigInt(s),Fraction:r?s=>r(s):Byt};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=hf(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in o))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(o).join(", "));return u===c?a:o[u](a)}}),cae="divideScalar",Wyt=["typed","numeric"],Gyt=an(cae,Wyt,e=>{var{typed:t,numeric:n}=e;return t(cae,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"bigint, bigint":function(i,o){return i/o},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),fae="log",Yyt=["config","typed","divideScalar","Complex"],Kyt=an(fae,Yyt,e=>{var{typed:t,config:n,divideScalar:r,Complex:i}=e;return t(fae,{number:function(s){return s>=0||n.predictable?sgt(s):new i(s,0).log()},Complex:function(s){return s.log()},BigNumber:function(s){return!s.isNegative()||n.predictable?s.ln():new i(s.toNumber(),0).log()},"any, any":t.referToSelf(o=>(s,a)=>r(o(s),o(a)))})}),dae="add",Xyt=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Qyt=an(dae,Xyt,e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:o,SparseMatrix:s,concat:a}=e,u=e2e({typed:t}),l=myt({typed:t,equalScalar:i}),c=t2e({typed:t,DenseMatrix:o}),f=Z_e({typed:t,matrix:n,concat:a});return t(dae,{"any, any":r,"any, any, ...any":t.referToSelf(d=>(h,m,p)=>{for(var g=d(h,m),v=0;v<p.length;v++)g=d(g,p[v]);return g})},f({elop:r,DS:u,SS:l,Ss:c}))}),hae="dot",Jyt=["typed","addScalar","multiplyScalar","conj","size"],Zyt=an(hae,Jyt,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:o}=e;return t(hae,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function s(c,f){var d=l(c),h=l(f),m,p;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==p)throw new RangeError("Vectors must have equal length ("+m+" != "+p+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function a(c,f){var d=s(c,f),h=Ri(c)?c._data:c,m=Ri(c)?c._datatype||c.getDataType():void 0,p=Ri(f)?f._data:f,g=Ri(f)?f._datatype||f.getDataType():void 0,v=l(c).length===2,b=l(f).length===2,w=n,E=r;if(m&&g&&m===g&&typeof m=="string"&&m!=="mixed"){var _=m;w=t.find(n,[_,_]),E=t.find(r,[_,_])}if(!v&&!b){for(var T=E(i(h[0]),p[0]),S=1;S<d;S++)T=w(T,E(i(h[S]),p[S]));return T}if(!v&&b){for(var D=E(i(h[0]),p[0][0]),k=1;k<d;k++)D=w(D,E(i(h[k]),p[k][0]));return D}if(v&&!b){for(var R=E(i(h[0][0]),p[0]),O=1;O<d;O++)R=w(R,E(i(h[O][0]),p[O]));return R}if(v&&b){for(var M=E(i(h[0][0]),p[0][0]),F=1;F<d;F++)M=w(M,E(i(h[F][0]),p[F][0]));return M}}function u(c,f){s(c,f);for(var d=c._index,h=c._values,m=f._index,p=f._values,g=0,v=n,b=r,w=0,E=0;w<d.length&&E<m.length;){var _=d[w],T=m[E];if(_<T){w++;continue}if(_>T){E++;continue}_===T&&(g=v(g,b(h[w],p[E])),w++,E++)}return g}function l(c){return Ri(c)?c.size():o(c)}}),pae="det",e1t=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],t1t=an(pae,e1t,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:o,isZero:s,unaryMinus:a}=e;return t(pae,{any:function(c){return ji(c)},"Array | Matrix":function(c){var f;switch(Ri(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return ji(c);case 1:if(f[0]===1)return ji(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+po(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+po(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+po(f)+")")}}});function u(l,c,f){if(c===1)return ji(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((S,D)=>D),m=0;m<c;m++){var p=h[m];if(s(l[p][m])){var g=void 0;for(g=m+1;g<c;g++)if(!s(l[h[g]][m])){p=h[g],h[g]=h[m],h[m]=p,d=!d;break}if(g===c)return l[p][m]}for(var v=l[p][m],b=m===0?1:l[h[m-1]][m-1],w=m+1;w<c;w++)for(var E=h[w],_=m+1;_<c;_++)l[E][_]=o(r(i(l[E][_],v),i(l[E][m],l[p][_])),b)}var T=l[h[c-1]][c-1];return d?a(T):T}}),mae="inv",n1t=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],r1t=an(mae,n1t,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:o,unaryMinus:s,det:a,identity:u,abs:l}=e;return t(mae,{"Array | Matrix":function(d){var h=Ri(d)?d.size():ha(d);switch(h.length){case 1:if(h[0]===1)return Ri(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+po(h)+")");case 2:{var m=h[0],p=h[1];if(m===p)return Ri(d)?n(c(d.valueOf(),m,p),d.storage()):c(d,m,p);throw new RangeError("Matrix must be square (size: "+po(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+po(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,p,g,v,b;if(d===1){if(v=f[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,v)]]}else if(d===2){var w=a(f);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],w),r(s(f[0][1]),w)],[r(s(f[1][0]),w),r(f[0][0],w)]]}else{var E=f.concat();for(m=0;m<d;m++)E[m]=E[m].concat();for(var _=u(d).valueOf(),T=0;T<h;T++){var S=l(E[T][T]),D=T;for(m=T+1;m<d;)l(E[m][T])>S&&(S=l(E[m][T]),D=m),m++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");m=D,m!==T&&(b=E[T],E[T]=E[m],E[m]=b,b=_[T],_[T]=_[m],_[m]=b);var k=E[T],R=_[T];for(m=0;m<d;m++){var O=E[m],M=_[m];if(m!==T){if(O[T]!==0){for(g=r(s(O[T]),k[T]),p=T;p<h;p++)O[p]=i(O[p],o(g,k[p]));for(p=0;p<h;p++)M[p]=i(M[p],o(g,R[p]))}}else{for(g=k[T],p=T;p<h;p++)O[p]=r(O[p],g);for(p=0;p<h;p++)M[p]=r(M[p],g)}}}return _}}}),i1t="divide",o1t=["typed","matrix","multiply","equalScalar","divideScalar","inv"],s1t=an(i1t,o1t,e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:o,inv:s}=e,a=J_e({typed:t,equalScalar:i}),u=OW({typed:t});return t("divide",v_e({"Array | Matrix, Array | Matrix":function(c,f){return r(c,s(f))},"DenseMatrix, any":function(c,f){return u(c,f,o,!1)},"SparseMatrix, any":function(c,f){return a(c,f,o,!1)},"Array, any":function(c,f){return u(n(c),f,o,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,s(f))}},o.signatures))}),gae="mean",a1t=["typed","add","divide"],u1t=an(gae,a1t,e=>{var{typed:t,add:n,divide:r}=e;return t(gae,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":i,"...":function(a){if(ngt(a))throw new TypeError("Scalar values expected in function mean");return o(a)}});function i(s,a){try{var u=rgt(s,a,n),l=Array.isArray(s)?ha(s):s.size();return r(u,l[a])}catch(c){throw eP(c,"mean")}}function o(s){var a,u=0;if(X3(s,function(l){try{a=a===void 0?l:n(a,l),u++}catch(c){throw eP(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(a,u)}}),Y8="unbiased",yae="variance",l1t=["typed","add","subtract","multiply","divide","apply","isNaN"],c1t=an(yae,l1t,e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:o,apply:s,isNaN:a}=e;return t(yae,{"Array | Matrix":function(f){return u(f,Y8)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,Y8)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,Y8)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(X3(c,function(g){try{d=d===void 0?g:n(d,g),h++}catch(v){throw eP(v,"variance",g)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=o(d,h);if(d=void 0,X3(c,function(g){var v=r(g,m);d=d===void 0?i(v,v):n(d,i(v,v))}),a(d))return d;switch(f){case"uncorrected":return o(d,h);case"biased":return o(d,h+1);case"unbiased":{var p=Hi(d)?d.mul(0):0;return h===1?p:o(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,h=>u(h,d))}catch(h){throw eP(h,"variance")}}}),vae="std",f1t=["typed","map","sqrt","variance"],d1t=an(vae,f1t,e=>{var{typed:t,map:n,sqrt:r,variance:i}=e;return t(vae,{"Array | Matrix":o,"Array | Matrix, string":o,"Array | Matrix, number | BigNumber":o,"Array | Matrix, number | BigNumber, string":o,"...":function(a){return o(a)}});function o(s,a){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return zx(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),FW=C0t({config:H1}),MW=I0t({}),n2e=L0t({}),$W=z0t({}),wS=egt({Matrix:$W}),fr=Dmt({BigNumber:FW,Complex:MW,DenseMatrix:wS,Fraction:n2e}),h1t=Mgt({typed:fr}),s6=zgt({typed:fr}),p1t=kyt({typed:fr}),rE=ggt({config:H1,typed:fr}),r2e=ogt({typed:fr}),m1t=cgt({equalScalar:rE,typed:fr}),g1t=Myt({typed:fr}),i2e=xyt({typed:fr}),y1t=Tgt({typed:fr}),LW=bgt({Matrix:$W,equalScalar:rE,typed:fr}),o2e=Vgt({typed:fr}),v1t=Lgt({isInteger:r2e,typed:fr}),b1t=Agt({BigNumber:FW,typed:fr}),x1t=dgt({typed:fr}),w1t=Cyt({Complex:MW,config:H1,typed:fr}),BW=Ogt({typed:fr}),E1t=Igt({Fraction:n2e,typed:fr}),Kp=Ngt({DenseMatrix:wS,Matrix:$W,SparseMatrix:LW,typed:fr}),_1t=qyt({bignumber:b1t,fraction:E1t,number:y1t}),T1t=Uyt({matrix:Kp,config:H1,typed:fr}),s2e=Ryt({isInteger:r2e,matrix:Kp,typed:fr}),a6=Gyt({numeric:_1t,typed:fr}),C1t=Oyt({BigNumber:FW,DenseMatrix:wS,SparseMatrix:LW,config:H1,matrix:Kp,typed:fr}),S1t=Ayt({DenseMatrix:wS,concat:s2e,equalScalar:rE,matrix:Kp,subtractScalar:o2e,typed:fr,unaryMinus:BW}),a2e=Qyt({DenseMatrix:wS,SparseMatrix:LW,addScalar:s6,concat:s2e,equalScalar:rE,matrix:Kp,typed:fr}),A1t=Zyt({addScalar:s6,conj:p1t,multiplyScalar:i2e,size:T1t,typed:fr}),u2e=Kyt({Complex:MW,config:H1,divideScalar:a6,typed:fr}),u6=Eyt({addScalar:s6,dot:A1t,equalScalar:rE,matrix:Kp,multiplyScalar:i2e,typed:fr}),D1t=t1t({divideScalar:a6,isZero:m1t,matrix:Kp,multiply:u6,subtractScalar:o2e,typed:fr,unaryMinus:BW}),k1t=r1t({abs:h1t,addScalar:s6,det:D1t,divideScalar:a6,identity:C1t,matrix:Kp,multiply:u6,typed:fr,unaryMinus:BW}),l2e=s1t({divideScalar:a6,equalScalar:rE,inv:k1t,matrix:Kp,multiply:u6,typed:fr}),bae=u1t({add:a2e,divide:l2e,typed:fr}),I1t=c1t({add:a2e,apply:v1t,divide:l2e,isNaN:x1t,multiply:u6,subtract:S1t,typed:fr}),xae=d1t({map:g1t,sqrt:w1t,typed:fr,variance:I1t});const c2e=0,qx=1,wae=AW("thisisjndexperimentseed"),f2e=2*Math.PI;function R1t(e){let t=e.length,n;for(;t>0;)n=Math.floor(Math.random()*t),t-=1,[e[t],e[n]]=[e[n],e[t]];return e}function N1t(e){const t=e(),n=e();return Math.sqrt(-2*Number(u2e(Number(t))))*Math.cos(f2e*n)*qx+c2e}function P1t(){const e=wae(),t=wae();return Math.sqrt(-2*Number(u2e(Number(e))))*Math.cos(f2e*t)*qx+c2e}function jW(e,t){if(e.length===t.length){const n=bae(e),r=bae(t),i=Number(xae(e)),o=Number(xae(t));let s=0;for(let u=0;u<e.length;u++)s+=e[u]-n+(t[u]-r);return s/(e.length-1)/(i*o)}return NaN}function zW(e,t){const n=e**2,r=t**2;return((t-1)*(n+t)+Math.sqrt(n*(r-1)*(n-1)))/((t-1)*(2*n+t-1))}function UW(e,t,n){const r=n**2;return t.map((i,o)=>(n*e[o]+(1-n)*i)/Math.sqrt(r+(1-n)**2))}function Eae(e){const t=[];for(;t.length<e;){const n=P1t();n>=-2*qx&&n<=qx*2&&t.push(n)}return t}function H7(e,t){const n=[];for(;n.length<t;){const r=N1t(e);r>=-2*qx&&r<=qx*2&&n.push(r)}return n}function ES(e,t,n=100){const r=AW(t),i=H7(r,n);let o=H7(r,n);const s=jW(i,o),a=zW(e,s);return o=UW(i,o,a),i.map((u,l)=>e<0?[u,-o[l]]:[u,o[l]])}function O1t(e,t=100){const n=Eae(t);let r=Eae(t);const i=jW(n,r),o=zW(e,i);return r=UW(n,r,o),n.map((s,a)=>[s,r[a]])}function d2e(e,t,n){const r=AW(n);let i=H7(r,e.length);const o=jW(e,i),s=zW(t,o);return i=UW(e,i,s),i}const h2e=Object.freeze(Object.defineProperty({__proto__:null,generateCorrelatedDataset:d2e,generateDataSet:O1t,generateDataSetFixed:ES,shuffle:R1t},Symbol.toStringTag,{value:"Module"})),eb=400,x_=40,K8=10;function c2({r:e,onClick:t}){const n=P.useRef(null),r=P.useRef(Date.now().toString()),[i,o]=P.useState(!1),s=P.useCallback(()=>{const u=ES(1,r.current).map(f=>f[0]).sort((f,d)=>f-d),l=d2e(u,e,r.current),c=hS(n.current).attr("width",eb).attr("height",x_*2+K8);c.selectAll("*").remove(),c.append("g").selectAll("rect").data(u).enter().append("rect").attr("x",(f,d)=>d*(eb/u.length)).attr("y",0).attr("width",eb/u.length).attr("height",x_).style("fill",f=>vse((f-fl(u))/(da(u)-fl(u)))).style("cursor","pointer").on("click",t),c.append("g").selectAll("rect").data(l).enter().append("rect").attr("x",(f,d)=>d*(eb/l.length)).attr("y",x_+K8).attr("width",eb/l.length).attr("height",x_).style("fill",f=>vse((f-fl(l))/(da(l)-fl(l)))).style("cursor","pointer").on("click",t)},[e,t]);return P.useEffect(()=>{s()},[s]),C.jsx("div",{onClick:t,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),style:{display:"inline-block",padding:"5px",border:i?"4px solid cornflowerblue":"4px solid transparent",opacity:i?.8:1,cursor:"pointer"},children:C.jsx("svg",{ref:n,className:"d3-component",width:eb,height:x_*2+K8})})}const p2e=Object.freeze(Object.defineProperty({__proto__:null,default:c2},Symbol.toStringTag,{value:"Module"}));function VW({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=P.useMemo(()=>Math.random()>.5,[e,t]),[o,s]=P.useState(0),a=()=>{n&&s(l=>l+1)},u=l=>{r(l),a()};return i?C.jsxs(Cr,{style:{gap:"100px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(c2,{onClick:()=>u(1),r:e},o),C.jsx(At,{onClick:()=>u(1),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(c2,{onClick:()=>u(2),r:t},o+1),C.jsx(At,{onClick:()=>u(2),children:"Right"})]})]}):C.jsxs(Cr,{style:{gap:"100px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(c2,{onClick:()=>u(2),r:t},o),C.jsx(At,{onClick:()=>u(2),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(c2,{onClick:()=>u(1),r:e},o+1),C.jsx(At,{onClick:()=>u(1),children:"Right"})]})]})}const m2e=Object.freeze(Object.defineProperty({__proto__:null,default:VW},Symbol.toStringTag,{value:"Module"}));var Db=Math.PI/3,F1t=[0,Db,2*Db,3*Db,4*Db,5*Db];function M1t(e){return e[0]}function $1t(e){return e[1]}function L1t(){var e=0,t=0,n=1,r=1,i=M1t,o=$1t,s,a,u;function l(f){var d={},h=[],m,p=f.length;for(m=0;m<p;++m)if(!(isNaN(v=+i.call(null,g=f[m],m,f))||isNaN(b=+o.call(null,g,m,f)))){var g,v,b,w=Math.round(b=b/u),E=Math.round(v=v/a-(w&1)/2),_=b-w;if(Math.abs(_)*3>1){var T=v-E,S=E+(v<E?-1:1)/2,D=w+(b<w?-1:1),k=v-S,R=b-D;T*T+_*_>k*k+R*R&&(E=S+(w&1?1:-1)/2,w=D)}var O=E+"-"+w,M=d[O];M?M.push(g):(h.push(M=d[O]=[g]),M.x=(E+(w&1)/2)*a,M.y=w*u)}return h}function c(f){var d=0,h=0;return F1t.map(function(m){var p=Math.sin(m)*f,g=-Math.cos(m)*f,v=p-d,b=g-h;return d=p,h=g,[v,b]})}return l.hexagon=function(f){return"m"+c(f==null?s:+f).join("l")+"z"},l.centers=function(){for(var f=[],d=Math.round(t/u),h=Math.round(e/a),m=d*u;m<r+s;m+=u,++d)for(var p=h*a+(d&1)*a/2;p<n+a/2;p+=a)f.push([p,m]);return f},l.mesh=function(){var f=c(s).slice(0,4).join("l");return l.centers().map(function(d){return"M"+d+"m"+f}).join("")},l.x=function(f){return arguments.length?(i=f,l):i},l.y=function(f){return arguments.length?(o=f,l):o},l.radius=function(f){return arguments.length?(s=+f,a=s*2*Math.sin(Db),u=s*1.5,l):s},l.size=function(f){return arguments.length?(e=t=0,n=+f[0],r=+f[1],l):[n-e,r-t]},l.extent=function(f){return arguments.length?(e=+f[0][0],t=+f[0][1],n=+f[1][0],r=+f[1][1],l):[[e,t],[n,r]]},l.radius(1)}const sk=300,ak=300;function f2({r:e,onClick:t}){const n=P.useRef(null),[r,i]=P.useState(!1),o=P.useCallback(()=>{const s=ES(e,Date.now().toString(),1e3),a={left:0,top:20,right:20,bottom:1},u=ak-a.bottom,l=sk-a.left-a.right,c=Ud().domain([fl(s,v=>v[0]),da(s,v=>v[0])]).range([0,l]),f=Ud().domain([fl(s,v=>v[1]),da(s,v=>v[1])]).range([u,0]),d=L1t().x(v=>c(v[0])).y(v=>f(v[1])).radius(10).extent([[0,0],[l,u]]),h=d(s),m=hS(n.current).attr("width",sk).attr("height",ak);m.selectAll("*").remove(),m.append("g").attr("transform",`translate(${a.left}, ${a.top})`),m.append("g").selectAll(".hexagon").data(h).enter().append("path").attr("class","hexagon").attr("d",d.hexagon()).attr("transform",v=>`translate(${v.x}, ${v.y})`).style("fill",v=>zht(v.length/da(h,b=>b.length))).style("stroke","white").style("stroke-width","0.5px");const p=Pxe(c).ticks(0),g=r3(f).ticks(0);m.append("g").attr("transform",`translate(${a.left}, ${u})`).call(p),m.append("g").attr("transform",`translate(${a.left}, ${a.top})`).call(g)},[e]);return P.useEffect(()=>{o()},[o]),C.jsxs("svg",{className:"d3-component",width:sk,height:ak,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[C.jsx("g",{id:"d3Stuff",ref:n}),C.jsx("rect",{onClick:t,x:0,y:0,width:sk,height:ak,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const g2e=Object.freeze(Object.defineProperty({__proto__:null,default:f2},Symbol.toStringTag,{value:"Module"}));function HW({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=P.useMemo(()=>Math.random()>.5,[e,t]),[o,s]=P.useState(0),a=()=>{n&&s(l=>l+1)},u=l=>{r(l),a()};return i?C.jsxs(Cr,{style:{gap:"40px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(f2,{onClick:()=>u(1),r:e},o),C.jsx(At,{onClick:()=>u(1),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(f2,{onClick:()=>u(2),r:t},o+1),C.jsx(At,{onClick:()=>u(2),children:"Right"})]})]}):C.jsxs(Cr,{style:{gap:"40px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(f2,{onClick:()=>u(2),r:t},o),C.jsx(At,{onClick:()=>u(2),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(f2,{onClick:()=>u(1),r:e},o+1),C.jsx(At,{onClick:()=>u(1),children:"Right"})]})]})}const y2e=Object.freeze(Object.defineProperty({__proto__:null,default:HW},Symbol.toStringTag,{value:"Module"}));function B1t({setAnswer:e,parameters:t}){const[n,r]=P.useState(0),[i,o]=P.useState(t.above),[s,a]=P.useState([]),[u,l]=P.useState(t.r1),[c,f]=P.useState(t.r2),d=P.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return P.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:s}})},[n,s]),n===50?C.jsx(Ye,{children:"Completed! Great job, please continue."}):C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(VW,{onClick:d,r1:u,r2:c})}),C.jsx(Ir,{style:{marginTop:20},children:C.jsx("progress",{value:n,max:50})})]})}const v2e=Object.freeze(Object.defineProperty({__proto__:null,default:B1t},Symbol.toStringTag,{value:"Module"}));function j1t({setAnswer:e,parameters:t}){const[n,r]=P.useState(0),[i,o]=P.useState(t.above),[s,a]=P.useState([]),[u,l]=P.useState(t.r1),[c,f]=P.useState(t.r2),d=P.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return P.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:s}})},[n,s]),n===50?C.jsx(Ye,{children:"Completed! Great job, please continue."}):C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(HW,{onClick:d,r1:u,r2:c})}),C.jsx(Ir,{style:{marginTop:20},children:C.jsx("progress",{value:n,max:50})})]})}const b2e=Object.freeze(Object.defineProperty({__proto__:null,default:j1t},Symbol.toStringTag,{value:"Module"})),X8=300,Q8=300;function d2({v:e,onClick:t}){const n=P.useRef(null),[r,i]=P.useState(!1),o=P.useCallback(()=>{const s=ES(e,Date.now().toString()),a={left:40,top:20,right:20,bottom:20},u=Q8-a.bottom,l=X8-a.left-a.right,c=s.map(E=>E[0]),f=s.map(E=>E[1]),d=hS(n.current);d.selectAll("*").remove();const h=Ud().range([0,u]),m=Ud().range([0,u]);h.domain([fl(c),da(c)]).range([0,u]),m.domain([fl(f),da(f)]).range([0,u]);const p=r3(h).tickSize(0).tickValues([]),g=r3(m).tickSize(0).tickValues([]),v=`translate(${a.left},${a.top})`,b=`translate(${a.left+l},${a.top})`,w=(E,_,T,S,D)=>{E.selectAll(_).data([0]).enter().append("g").attr("class",S),E.selectAll(_).data([0]).exit().remove(),E.selectAll(_).attr("transform",D).call(T)};w(d,".x.axis",p,"x axis",v),w(d,".y.axis",g,"y axis",b),d.selectAll(".line").data(s).enter().append("line").style("stroke","grey").style("stroke-width",.5).attr("x1",a.left).attr("y1",E=>h(E[0])+a.top).attr("x2",a.left+l).attr("y2",E=>m(E[1])+a.top)},[e]);return P.useEffect(()=>{o()},[o]),C.jsxs("svg",{className:"d3-component",width:X8,height:Q8,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[C.jsx("g",{id:"d3Stuff",ref:n}),C.jsx("rect",{onClick:t,x:0,y:0,width:X8,height:Q8,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const x2e=Object.freeze(Object.defineProperty({__proto__:null,default:d2},Symbol.toStringTag,{value:"Module"}));function l6({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=P.useMemo(()=>Math.random()>.5,[e,t]),[o,s]=P.useState(0),a=()=>{n&&s(l=>l+1)},u=l=>{r(l),a()};return i?C.jsxs(Cr,{style:{gap:"40px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(d2,{onClick:()=>u(1),v:e},o),C.jsx(At,{onClick:()=>u(1),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(d2,{onClick:()=>u(2),v:t},o+1),C.jsx(At,{onClick:()=>u(2),children:"Right"})]})]}):C.jsxs(Cr,{style:{gap:"40px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(d2,{onClick:()=>u(2),v:t},o),C.jsx(At,{onClick:()=>u(2),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(d2,{onClick:()=>u(1),v:e},o+1),C.jsx(At,{onClick:()=>u(1),children:"Right"})]})]})}const w2e=Object.freeze(Object.defineProperty({__proto__:null,default:l6},Symbol.toStringTag,{value:"Module"})),_ae=[.6,.7,.8],Tae=[.3,.4,.5];function z1t({setAnswer:e}){const[t,n]=P.useState(0),[r,i]=P.useState(_ae[Math.floor(Math.random()*_ae.length)]),[o,s]=P.useState(Tae[Math.floor(Math.random()*Tae.length)]),[a,u]=P.useState([]),l=P.useCallback(c=>{u([...a,{r1:r,r2:o,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?s(Math.min(o+.01,1)):i(Math.min(r-.01,1)):f?s(Math.max(o-.03,0)):i(Math.max(r+.03,0))},[t,a,r,o]);return P.useEffect(()=>{if(t===50){const c=Math.abs(r-o);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:o,observedJnd:c}})}},[t,a,r,o,e]),C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsxs(Ye,{children:[t,"/50"]}),C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(l6,{onClick:l,r1:r,r2:o})})]})}const E2e=Object.freeze(Object.defineProperty({__proto__:null,default:z1t},Symbol.toStringTag,{value:"Module"}));function U1t({setAnswer:e,parameters:t}){const[n,r]=P.useState(0),[i,o]=P.useState(t.above),[s,a]=P.useState([]),[u,l]=P.useState(t.r1),[c,f]=P.useState(t.r2),d=P.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return P.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{parallelSelections:s}})},[n,s]),n===50?C.jsx(Ye,{children:"Completed! Great job, please continue."}):C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(l6,{onClick:d,r1:u,r2:c})}),C.jsx(Ir,{style:{marginTop:20},children:C.jsx("progress",{value:n,max:50})})]})}const _2e=Object.freeze(Object.defineProperty({__proto__:null,default:U1t},Symbol.toStringTag,{value:"Module"})),J8=300,uk=300;function h2({r:e,onClick:t}){const n=P.useRef(null),[r,i]=P.useState(!1),o={left:40,right:20,bottom:20},s=uk-o.bottom,a=J8-o.left-o.right,u=P.useCallback(()=>{const l=ES(e,Date.now().toString()),c=l.map(v=>v[0]),f=l.map(v=>v[1]),d=Ud().range([0,a]),h=Ud().range([s,0]),m=Pxe(d).tickSize(0).tickFormat(()=>""),p=r3(h).tickSize(0),g=hS(n.current).attr("width",J8).attr("height",uk);g.selectAll("*").remove(),g.append("g").attr("transform",`translate(0, ${uk-o.bottom})`).attr("class","main axis date").call(m),g.append("g").attr("class","main axis date").call(p),d.domain([fl(c),da(c)]).range([10,a-10]),h.domain([fl(f),da(f)]).range([s-10,10]),g.selectAll(".dot").data(l).enter().append("circle").attr("class","dot").attr("r",2).attr("cx",v=>d(v[0])).attr("cy",v=>h(v[1])).style("fill","black")},[e]);return P.useEffect(()=>{u()},[u]),C.jsxs("svg",{className:"d3-component",width:J8,height:uk,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[C.jsx("g",{id:"d3Stuff",ref:n}),C.jsx("rect",{onClick:t,x:0,y:0,width:a,height:s,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const T2e=Object.freeze(Object.defineProperty({__proto__:null,default:h2},Symbol.toStringTag,{value:"Module"}));function c6({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=P.useMemo(()=>Math.random()>.5,[e,t]),[o,s]=P.useState(0),a=()=>{n&&s(l=>l+1)},u=l=>{r(l),a()};return i?C.jsxs(Cr,{style:{gap:"40px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(h2,{onClick:()=>u(1),r:e},o),C.jsx(At,{onClick:()=>u(1),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(h2,{onClick:()=>u(2),r:t},o+1),C.jsx(At,{onClick:()=>u(2),children:"Right"})]})]}):C.jsxs(Cr,{style:{gap:"40px"},children:[C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(h2,{onClick:()=>u(2),r:t},o),C.jsx(At,{onClick:()=>u(2),children:"Left"})]}),C.jsxs(Un,{style:{alignItems:"center"},children:[C.jsx(h2,{onClick:()=>u(1),r:e},o+1),C.jsx(At,{onClick:()=>u(1),children:"Right"})]})]})}const C2e=Object.freeze(Object.defineProperty({__proto__:null,default:c6},Symbol.toStringTag,{value:"Module"})),Cae=[.6,.7,.8],Sae=[.3,.4,.5];function V1t({setAnswer:e}){const[t,n]=P.useState(0),[r,i]=P.useState(Cae[Math.floor(Math.random()*Cae.length)]),[o,s]=P.useState(Sae[Math.floor(Math.random()*Sae.length)]),[a,u]=P.useState([]),l=P.useCallback(c=>{u([...a,{r1:r,r2:o,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?s(Math.min(o+.01,1)):i(Math.min(r-.01,1)):f?s(Math.max(o-.03,0)):i(Math.max(r+.03,0))},[t,a,r,o]);return P.useEffect(()=>{if(t===50){const c=Math.abs(r-o);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:o,observedJnd:c}})}},[t,a,r,o,e]),C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsxs(Ye,{children:[t,"/50"]}),C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(c6,{onClick:l,r1:r,r2:o})})]})}const S2e=Object.freeze(Object.defineProperty({__proto__:null,default:V1t},Symbol.toStringTag,{value:"Module"}));function H1t({setAnswer:e,parameters:t}){const[n,r]=P.useState(0),[i,o]=P.useState(t.above),[s,a]=P.useState([]),[u,l]=P.useState(t.r1),[c,f]=P.useState(t.r2),d=P.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return P.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:s}})},[n,s]),n===50?C.jsx(Ye,{children:"Completed! Great job, please continue."}):C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(c6,{onClick:d,r1:u,r2:c})}),C.jsx(Ir,{style:{marginTop:20},children:C.jsx("progress",{value:n,max:50})})]})}const A2e=Object.freeze(Object.defineProperty({__proto__:null,default:H1t},Symbol.toStringTag,{value:"Module"})),tb=[[.3,.7],[.9,.6],[.6,.3],[.6,.9],[.3,.1],[.5,.3],[.9,.8],[.6,.7],[.99,.9]];function q1t({setAnswer:e}){const[t,n]=P.useState(0),[r,i]=P.useState(tb[0]),[o,s]=P.useState(null),[a,u]=P.useState(!1),l=P.useCallback(f=>{const[d,h]=r;o===null&&(f===1&&d>h||f===2&&h>d?s("Correct"):s("Incorrect"),u(!0))},[r,o]),c=()=>{s(null),u(!1);const f=t<tb.length-1?t+1:tb.length-1;n(f),f<tb.length-1?i(tb[f]):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),s("Practice Completed, please continue."))};return C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsxs(Ye,{children:[t+1,"/",tb.length]}),C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(VW,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),o&&C.jsx(Ye,{style:{textAlign:"center",marginTop:"1rem"},children:o}),a&&C.jsx(Ir,{style:{justifyContent:"flex-end"},children:C.jsx(At,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const D2e=Object.freeze(Object.defineProperty({__proto__:null,default:q1t},Symbol.toStringTag,{value:"Module"})),nb=[[.3,.7],[.9,.6],[.6,.3],[.6,.9],[.3,.1],[.5,.3],[.9,.8],[.6,.7],[.99,.9]];function W1t({setAnswer:e}){const[t,n]=P.useState(0),[r,i]=P.useState(nb[0]),[o,s]=P.useState(null),[a,u]=P.useState(!1),l=P.useCallback(f=>{const[d,h]=r;o===null&&(f===1&&d>h||f===2&&h>d?s("Correct"):s("Incorrect"),u(!0))},[r,o]),c=()=>{s(null),u(!1);const f=t<nb.length-1?t+1:nb.length-1;n(f),f<nb.length-1?i(nb[f]):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),s("Practice Completed, please continue."))};return C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsxs(Ye,{children:[t+1,"/",nb.length]}),C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(HW,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),o&&C.jsx(Ye,{style:{textAlign:"center",marginTop:"1rem"},children:o}),a&&C.jsx(Ir,{style:{justifyContent:"flex-end"},children:C.jsx(At,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const k2e=Object.freeze(Object.defineProperty({__proto__:null,default:W1t},Symbol.toStringTag,{value:"Module"})),rb=[[.3,.7],[.9,.6],[.6,.3],[.6,.9],[.3,.1],[.5,.3],[.9,.8],[.6,.7],[.99,.9]];function G1t({setAnswer:e}){const[t,n]=P.useState(0),[r,i]=P.useState(rb[0]),[o,s]=P.useState(null),[a,u]=P.useState(!1),l=P.useCallback(f=>{const[d,h]=r;o===null&&(f===1&&d>h||f===2&&h>d?s("Correct"):s("Incorrect"),u(!0))},[r,o]),c=()=>{s(null),u(!1);const f=t<rb.length-1?t+1:rb.length-1;n(f),f<rb.length-1?i(rb[f]):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),s("Practice Completed, please continue."))};return C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsxs(Ye,{children:[t+1,"/",rb.length]}),C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(l6,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),o&&C.jsx(Ye,{style:{textAlign:"center",marginTop:"1rem"},children:o}),a&&C.jsx(Ir,{style:{justifyContent:"flex-end"},children:C.jsx(At,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const I2e=Object.freeze(Object.defineProperty({__proto__:null,default:G1t},Symbol.toStringTag,{value:"Module"})),ib=[[.3,.7],[.9,.6],[.6,.3],[.6,.9],[.3,.1],[.5,.3],[.9,.8],[.6,.7],[.99,.9]];function Y1t({setAnswer:e}){const[t,n]=P.useState(0),[r,i]=P.useState(ib[0]),[o,s]=P.useState(null),[a,u]=P.useState(!1),l=P.useCallback(f=>{const[d,h]=r;o===null&&(f===1&&d>h||f===2&&h>d?s("Correct"):s("Incorrect"),u(!0))},[r,o]),c=()=>{s(null),u(!1);const f=t<ib.length-1?t+1:ib.length-1;n(f),f<ib.length-1?i(ib[f]):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),s("Practice Completed, please continue."))};return C.jsxs(Un,{style:{width:"100%",height:"100%"},children:[C.jsxs(Ye,{children:[t+1,"/",ib.length]}),C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(Ir,{children:C.jsx(c6,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),o&&C.jsx(Ye,{style:{textAlign:"center",marginTop:"1rem"},children:o}),a&&C.jsx(Ir,{style:{justifyContent:"flex-end"},children:C.jsx(At,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const R2e=Object.freeze(Object.defineProperty({__proto__:null,default:Y1t},Symbol.toStringTag,{value:"Module"}));function K1t(){const[e,t]=P.useState("");return C.jsxs(Ir,{style:{flexDirection:"column"},children:[C.jsx(Ye,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"Select the option with the higher correlation"}),C.jsx(W4,{value:e,onChange:t,children:C.jsxs(Lt,{gap:"md",justify:"justify-content",direction:"row",children:[C.jsx(lc,{value:"Option 1",label:"Option 1"}),C.jsx(lc,{value:"Option 2",label:"Option 2"})]})})]})}const N2e=Object.freeze(Object.defineProperty({__proto__:null,RadioOptions:K1t},Symbol.toStringTag,{value:"Module"}));function X1t({v:e}){const t=P.useRef(null),n=(i,o,s)=>{const a=[];for(let u=0;u<i;u++){let l="";for(let c=0;u<5+Math.random()*5;c++)l+=o*i,l+=" ",l+=s+(150-Math.random()*i),l+=" ";a.push(l)}return a},r=()=>{const s=e>0?e:0,a=50,c=n(s,.2,10),f=s,d=.1+s/200,h=-100,m=a/f,p=10+Math.random()*140,g=1e3*(Math.abs(h)/s),v=hS(t.current);v.selectAll("*").remove(),v.attr("width",300).attr("height",300).style("background-color","grey");for(let b=0;b<f;b++){const w=[],E=p+m*b,_=EW()([[0,E],[300,E]]),T=v.append("path").attr("stroke","white").attr("fill","none").attr("stroke-width",2).attr("d",_).attr("class","flowline").attr("stroke-linecap","round").attr("stroke-dasharray",c[b]).attr("stroke-dashoffset",(D,k)=>{const R=Math.random()*100;return w[k]=R,R}).attr("opacity",d),S=D=>{const k=w;D.transition().duration(g).ease(Dut).attr("stroke-dasharray",c[b]).attr("stroke-dashoffset",(R,O)=>(k[O]+=h,k[O])).attr("opacity",()=>Math.floor(Math.random()*100)%4===0?0:d).on("end",()=>{S(D)})};T.call(S)}};return P.useEffect(()=>{r()},[e]),C.jsx("svg",{className:"d3-component",width:300,height:300,ref:t})}const P2e=Object.freeze(Object.defineProperty({__proto__:null,default:X1t},Symbol.toStringTag,{value:"Module"})),Q1t=P.createContext(null);function aa(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}let _S=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const lk={decode:function(e,t){return aa(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let o=0;for(let s=0;s<i;s++){const a=Math.abs(r[s]);a>o&&(o=a)}for(const s of n)for(let a=0;a<i;a++)s[a]/=o}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function O2e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[o,s]of Object.entries(t))typeof s=="string"?n.appendChild(document.createTextNode(s)):n.appendChild(O2e(o,s));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Aae(e,t,n){const r=O2e(e,t||{});return n==null||n.appendChild(r),r}var J1t=Object.freeze({__proto__:null,createElement:Aae,default:Aae});const Z1t={fetchBlob:function(e,t,n){return aa(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,o){aa(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const s=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>aa(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);o(d)}),c=()=>aa(this,void 0,void 0,function*(){let f;try{f=yield s.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let evt=class extends _S{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;r&&(this.media.src="");try{this.media.src=i}catch{this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return aa(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},q7=class W7 extends _S{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,o]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),n&&o.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,o=n.clientY-r.top;return[i/r.width,o/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,o=n/r,s=(n+i)/r;this.emit("scroll",o,s,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,o=3,s=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==s)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,m=!1;const p=Date.now(),g=_=>{if(_.preventDefault(),_.stopPropagation(),u&&Date.now()-p<a)return;const T=_.clientX,S=_.clientY,D=T-d,k=S-h;if(m||Math.abs(D)>o||Math.abs(k)>o){const R=t.getBoundingClientRect(),{left:O,top:M}=R;m||(r==null||r(d-O,h-M),m=!0),n(D,k,T-O,S-M),d=T,h=S}},v=_=>{if(m){const T=_.clientX,S=_.clientY,D=t.getBoundingClientRect(),{left:k,top:R}=D;i==null||i(T-k,S-R)}l()},b=_=>{_.relatedTarget&&_.relatedTarget!==document.documentElement||v(_)},w=_=>{m&&(_.stopPropagation(),_.preventDefault())},E=_=>{m&&_.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",v),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const o=this.parent.clientHeight||128;return n!=null&&n.every(s=>!s.overlay)?o/i:o}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((o,s)=>{i(),r=s,n=setTimeout(()=>{n=void 0,r=void 0,o()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),o=r.createLinearGradient(0,0,0,i),s=1/(t.length-1);return t.forEach((a,u)=>{const l=u*s;o.addColorStop(l,a)}),o}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const o=t[0],s=t[1]||t[0],a=o.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,m=n.barRadius||0,p=u/(d+h)/a,g=m&&"roundRect"in r?"roundRect":"rect";r.beginPath();let v=0,b=0,w=0;for(let E=0;E<=a;E++){const _=Math.round(E*p);if(_>v){const D=Math.round(b*c*i),k=D+Math.round(w*c*i)||1;let R=c-D;n.barAlign==="top"?R=0:n.barAlign==="bottom"&&(R=l-k),r[g](v*(d+h),R,d,k,m),v=_,b=0,w=0}const T=Math.abs(o[E]||0),S=Math.abs(s[E]||0);T>b&&(b=T),S>w&&(w=S)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const o=s=>{const a=t[s]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let m=0;m<=u;m++){const p=Math.round(m*f);if(p>d){const v=c+(Math.round(h*c*i)||1)*(s===0?-1:1);r.lineTo(d,v),d=p,h=0}const g=Math.abs(a[m]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),o(0),o(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const o=Array.from(t[0]).reduce((s,a)=>Math.max(s,Math.abs(a)),0);i=o?1/o:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,o,s,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(o)}px`,s.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,o,s){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(W7.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,v=g+(n.barGap||g/2);c%v!=0&&(c=Math.floor(c/v)*v)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const v=g*c,b=Math.min(l-v,c);if(b<=0)return;const w=t.map(E=>{const _=Math.floor(v/l*E.length),T=Math.floor((v+b)/l*E.length);return E.slice(_,T)});this.renderSingleCanvas(w,n,b,i,v,o,s)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const m=this.scrollContainer.scrollLeft/l,p=Math.floor(m*h);if(d(p-1),d(p),d(p+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:v}=this.scrollContainer,b=Math.floor(v/l*h);Object.keys(f).length>W7.MAX_NODES&&(o.innerHTML="",s.innerHTML="",f={}),d(b-1),d(b),d(b+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:o}=n,s=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(h=Object.getOwnPropertySymbols(c);m<h.length;m++)f.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(c,h[m])&&(d[h[m]]=c[h[m]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(s.height,s.splitChannels);a.style.height=`${u}px`,o&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,s,r,u,a,l)}render(t){return aa(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,o=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=o>i;const s=this.options.fillParent&&!this.isScrollable,a=(s?i:o)*r;if(this.wrapper.style.width=s?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:o}=this.scrollContainer,s=t*i,a=r,u=r+o,l=o/2;if(this.isDragging)s+30>u?this.scrollContainer.scrollLeft+=30:s-30<a&&(this.scrollContainer.scrollLeft-=30);else{(s<a||s>u)&&(this.scrollContainer.scrollLeft=s-(this.options.autoCenter?l:0));const c=s-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+o)/i;this.emit("scroll",f,d,c,c+o)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return aa(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const o=Array.from(i).map(s=>s.toDataURL(t,n));return Promise.resolve(o)}return Promise.all(Array.from(i).map(o=>new Promise((s,a)=>{o.toBlob(u=>{u?s(u):a(new Error("Could not export image"))},t,n)})))})}};q7.MAX_CANVAS_WIDTH=8e3,q7.MAX_NODES=10;let tvt=class extends _S{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}},Dae=class extends _S{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return aa(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return aa(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return aa(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}};const nvt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let G7=class F2e extends evt{static create(t){return new F2e(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Dae:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},nvt,t),this.timer=new tvt;const r=n?void 0:this.getMediaElement();this.renderer=new q7(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:o,duration:s}=this.options;(i||o&&s)&&this.load(i,o,s).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const o=this.getDuration();this.emit("scroll",t*o,n*o,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=lk.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=lk.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return aa(this,void 0,void 0,function*(){var o;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(o=this.abortController)===null||o===void 0?void 0:o.signal);const u=c=>this.emit("loading",c);n=yield Z1t.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const s=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Dae&&(a.duration=s)}if(r)this.decodedData=lk.createBuffer(r,s||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield lk.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return aa(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return aa(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),o=[];for(let s=0;s<i;s++){const a=this.decodedData.getChannelData(s),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const m=f[h];Math.abs(m)>Math.abs(d)&&(d=m)}u.push(Math.round(d*r)/r)}o.push(u)}return o}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return aa(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return aa(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};G7.BasePlugin=class extends _S{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},G7.dom=J1t;function rvt(e){return G7.create(e)}function ivt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const kae=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),ovt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([s])=>r.findIndex(([a])=>a===s)===-1),o=r.filter(([s])=>n.findIndex(([a])=>a===s)===-1);return{disabled:kae(i),enabled:kae(o)}};function Iae(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=ivt(i)}return n}function svt({container:e,plugins:t=[],onMount:n,...r}){const i=P.useRef(!1),[o,s]=P.useState({}),a=P.useRef([]),[u,l]=P.useState(null);return P.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Iae(o,t);a.current=Object.keys(f);const d=rvt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),s(f),l(d),()=>{c!==e&&d.destroy()}},[e]),P.useEffect(()=>{if(u){const c=Iae(o,t),{disabled:f,enabled:d}=ovt(o,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),s(c)}},[t]),[u,o,Object.values(o)]}function M2e({children:e,plugins:t=[],onMount:n,...r}){const i=svt({plugins:t,onMount:n,...r});return ur.createElement(Q1t.Provider,{value:i},e)}const $2e=({id:e="waveform",children:t})=>ur.createElement("div",{id:e},t);function Z8(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(s,a)}u((r=r.apply(e,[])).next())})}let L2e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},avt=class extends L2e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}},uvt=class extends L2e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};const lvt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let cvt=class B2e extends avt{constructor(t){var n,r,i,o,s,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(o=t.continuousWaveform)!==null&&o!==void 0&&o,renderRecordedAudio:(s=t.renderRecordedAudio)===null||s===void 0||s,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new uvt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new B2e(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),o=r.createAnalyser();i.connect(o),this.options.continuousWaveform&&(o.fftSize=32);const s=o.frequencyBinCount,a=new Float32Array(s);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(o.getFloatTimeDomainData(a),this.options.scrollingWaveform){const m=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),p=Math.min(m,this.dataWindow?this.dataWindow.length+s:s),g=new Float32Array(m);if(this.dataWindow){const v=Math.max(0,m-this.dataWindow.length);g.set(this.dataWindow.slice(-p+s),v)}g.set(a,m-s),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const p=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(p)}let m=0;for(let p=0;p<s;p++){const g=Math.abs(a[p]);g>m&&(m=g)}if(u+1>this.dataWindow.length){const p=new Float32Array(2*this.dataWindow.length);p.set(this.dataWindow,0),this.dataWindow=p}this.dataWindow[u]=m,u++}else this.dataWindow=a;if(this.wavesurfer){const m=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:m).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(p=>{console.error("Error rendering real-time recording data:",p)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return Z8(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Z8(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||lvt.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=s=>{s.data.size>0&&i.push(s.data),this.emit("record-data-available",s.data)};const o=s=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(s,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>o("record-pause"),r.onstop=()=>o("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Z8(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}};function j2e({width:e=70,height:t=36}){const n=P.useRef(null),r=P.useRef(null),[i,o]=P.useState(!1);P.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(cvt.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const s=P.useCallback(a=>{n.current=a,o(!0)},[]);return C.jsx(Re,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:C.jsx(M2e,{onMount:s,plugins:[],container:"#waveformDiv",height:t,children:C.jsx($2e,{id:"waveform",height:t})})})}function Rae({setAnswer:e}){return P.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,o=i.createMediaStreamSource(n),s=i.createAnalyser();s.minDecibels=-45,o.connect(s);const a=s.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){s.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),C.jsx(Ir,{style:{height:"70%",width:"100%"},children:C.jsxs(Un,{children:[C.jsx(Ye,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),C.jsx(Ye,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),C.jsx(Ye,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),C.jsx(Ir,{children:C.jsx(j2e,{height:200,width:400})})]})})}const z2e=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Rae,default:Rae},Symbol.toStringTag,{value:"Module"}));function fvt(){return C.jsx("div",{children:"test react file"})}const U2e=Object.freeze(Object.defineProperty({__proto__:null,default:fvt},Symbol.toStringTag,{value:"Module"}));function dvt({parameters:e}){return C.jsx(Ye,{children:(e==null?void 0:e.n)||"-1"})}const V2e=Object.freeze(Object.defineProperty({__proto__:null,default:dvt},Symbol.toStringTag,{value:"Module"}));function hvt({answers:e}){const t=Math.max(...Object.keys(e).filter(n=>n.startsWith("loopingBlock_1_")).map(n=>+n.split("_")[3]));return t>5?{component:null}:{component:"reactComponent",parameters:{n:t}}}const H2e=Object.freeze(Object.defineProperty({__proto__:null,default:hvt},Symbol.toStringTag,{value:"Module"}));function Cs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var pvt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Nae=pvt,eL=()=>Math.random().toString(36).substring(7).split("").join("."),mvt={INIT:`@@redux/INIT${eL()}`,REPLACE:`@@redux/REPLACE${eL()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eL()}`},tP=mvt;function qW(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function q2e(e,t,n){if(typeof e!="function")throw new Error(Cs(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Cs(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Cs(1));return n(q2e)(e,t)}let r=e,i=t,o=new Map,s=o,a=0,u=!1;function l(){s===o&&(s=new Map,o.forEach((g,v)=>{s.set(v,g)}))}function c(){if(u)throw new Error(Cs(3));return i}function f(g){if(typeof g!="function")throw new Error(Cs(4));if(u)throw new Error(Cs(5));let v=!0;l();const b=a++;return s.set(b,g),function(){if(v){if(u)throw new Error(Cs(6));v=!1,l(),s.delete(b),o=null}}}function d(g){if(!qW(g))throw new Error(Cs(7));if(typeof g.type>"u")throw new Error(Cs(8));if(typeof g.type!="string")throw new Error(Cs(17));if(u)throw new Error(Cs(9));try{u=!0,i=r(i,g)}finally{u=!1}return(o=s).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(Cs(10));r=g,d({type:tP.REPLACE})}function m(){const g=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Cs(11));function b(){const E=v;E.next&&E.next(c())}return b(),{unsubscribe:g(b)}},[Nae](){return this}}}return d({type:tP.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Nae]:m}}function gvt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:tP.INIT})>"u")throw new Error(Cs(12));if(typeof n(void 0,{type:tP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Cs(13))})}function yvt(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const r=Object.keys(n);let i;try{gvt(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=s[f],m=d(h,a);if(typeof m>"u")throw a&&a.type,new Error(Cs(14));l[f]=m,u=u||m!==h}return u=u||r.length!==Object.keys(s).length,u?l:s}}function nP(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function vvt(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(Cs(15))};const s={getState:i.getState,dispatch:(u,...l)=>o(u,...l)},a=e.map(u=>u(s));return o=nP(...a)(i.dispatch),{...i,dispatch:o}}}function bvt(e){return qW(e)&&"type"in e&&typeof e.type=="string"}var W2e=Symbol.for("immer-nothing"),Pae=Symbol.for("immer-draftable"),Cl=Symbol.for("immer-state");function Jc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wx=Object.getPrototypeOf;function e1(e){return!!e&&!!e[Cl]}function Fp(e){var t;return e?G2e(e)||Array.isArray(e)||!!e[Pae]||!!((t=e.constructor)!=null&&t[Pae])||d6(e)||h6(e):!1}var xvt=Object.prototype.constructor.toString();function G2e(e){if(!e||typeof e!="object")return!1;const t=Wx(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===xvt}function rP(e,t){f6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function f6(e){const t=e[Cl];return t?t.type_:Array.isArray(e)?1:d6(e)?2:h6(e)?3:0}function Y7(e,t){return f6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Y2e(e,t,n){const r=f6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function wvt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function d6(e){return e instanceof Map}function h6(e){return e instanceof Set}function oy(e){return e.copy_||e.base_}function K7(e,t){if(d6(e))return new Map(e);if(h6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=G2e(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Cl];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Wx(e),r)}else{const r=Wx(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function WW(e,t=!1){return p6(e)||e1(e)||!Fp(e)||(f6(e)>1&&(e.set=e.add=e.clear=e.delete=Evt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>WW(r,!0))),e}function Evt(){Jc(2)}function p6(e){return Object.isFrozen(e)}var _vt={};function t1(e){const t=_vt[e];return t||Jc(0,e),t}var eC;function K2e(){return eC}function Tvt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Oae(e,t){t&&(t1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X7(e){Q7(e),e.drafts_.forEach(Cvt),e.drafts_=null}function Q7(e){e===eC&&(eC=e.parent_)}function Fae(e){return eC=Tvt(eC,e)}function Cvt(e){const t=e[Cl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Mae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Cl].modified_&&(X7(t),Jc(4)),Fp(e)&&(e=iP(t,e),t.parent_||oP(t,e)),t.patches_&&t1("Patches").generateReplacementPatches_(n[Cl].base_,e,t.patches_,t.inversePatches_)):e=iP(t,n,[]),X7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==W2e?e:void 0}function iP(e,t,n){if(p6(t))return t;const r=t[Cl];if(!r)return rP(t,(i,o)=>$ae(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return oP(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),rP(o,(a,u)=>$ae(e,r,i,a,u,n,s)),oP(e,i,!1),n&&e.patches_&&t1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function $ae(e,t,n,r,i,o,s){if(e1(i)){const a=o&&t&&t.type_!==3&&!Y7(t.assigned_,r)?o.concat(r):void 0,u=iP(e,i,a);if(Y2e(n,r,u),e1(u))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Fp(i)&&!p6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;iP(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&oP(e,i)}}function oP(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&WW(t,n)}function Svt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:K2e(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=GW;n&&(i=[r],o=tC);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var GW={get(e,t){if(t===Cl)return e;const n=oy(e);if(!Y7(n,t))return Avt(e,n,t);const r=n[t];return e.finalized_||!Fp(r)?r:r===tL(e.base_,t)?(nL(e),e.copy_[t]=Z7(r,e)):r},has(e,t){return t in oy(e)},ownKeys(e){return Reflect.ownKeys(oy(e))},set(e,t,n){const r=X2e(oy(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=tL(oy(e),t),o=i==null?void 0:i[Cl];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(wvt(n,i)&&(n!==void 0||Y7(e.base_,t)))return!0;nL(e),J7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return tL(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,nL(e),J7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=oy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Jc(11)},getPrototypeOf(e){return Wx(e.base_)},setPrototypeOf(){Jc(12)}},tC={};rP(GW,(e,t)=>{tC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});tC.deleteProperty=function(e,t){return tC.set.call(this,e,t,void 0)};tC.set=function(e,t,n){return GW.set.call(this,e[0],t,n,e[0])};function tL(e,t){const n=e[Cl];return(n?oy(n):e)[t]}function Avt(e,t,n){var i;const r=X2e(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function X2e(e,t){if(!(t in e))return;let n=Wx(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Wx(n)}}function J7(e){e.modified_||(e.modified_=!0,e.parent_&&J7(e.parent_))}function nL(e){e.copy_||(e.copy_=K7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Dvt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(u=o,...l){return s.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Jc(6),r!==void 0&&typeof r!="function"&&Jc(7);let i;if(Fp(t)){const o=Fae(this),s=Z7(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?X7(o):Q7(o)}return Oae(o,r),Mae(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===W2e&&(i=void 0),this.autoFreeze_&&WW(i,!0),r){const o=[],s=[];t1("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else Jc(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,u=>t(u,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Fp(e)||Jc(8),e1(e)&&(e=kvt(e));const t=Fae(this),n=Z7(e,void 0);return n[Cl].isManual_=!0,Q7(t),n}finishDraft(e,t){const n=e&&e[Cl];(!n||!n.isManual_)&&Jc(9);const{scope_:r}=n;return Oae(r,t),Mae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=t1("Patches").applyPatches_;return e1(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Z7(e,t){const n=d6(e)?t1("MapSet").proxyMap_(e,t):h6(e)?t1("MapSet").proxySet_(e,t):Svt(e,t);return(t?t.scope_:K2e()).drafts_.push(n),n}function kvt(e){return e1(e)||Jc(10,e),Q2e(e)}function Q2e(e){if(!Fp(e)||p6(e))return e;const t=e[Cl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=K7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=K7(e,!0);return rP(n,(r,i)=>{Y2e(n,r,Q2e(i))}),t&&(t.finalized_=!1),n}var Sl=new Dvt,J2e=Sl.produce;Sl.produceWithPatches.bind(Sl);Sl.setAutoFreeze.bind(Sl);Sl.setUseStrictShallowCopy.bind(Sl);Sl.applyPatches.bind(Sl);Sl.createDraft.bind(Sl);Sl.finishDraft.bind(Sl);function Ivt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Rvt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Nvt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Lae=e=>Array.isArray(e)?e:[e];function Pvt(e){const t=Array.isArray(e[0])?e[0]:e;return Nvt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Ovt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Fvt=class{constructor(e){this.value=e}deref(){return this.value}},Mvt=typeof WeakRef<"u"?WeakRef:Fvt,$vt=0,Bae=1;function ck(){return{s:$vt,v:void 0,o:null,p:null}}function Z2e(e,t={}){let n=ck();const{resultEqualityCheck:r}=t;let i,o=0;function s(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const m=arguments[d];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const g=p.get(m);g===void 0?(a=ck(),p.set(m,a)):a=g}else{let p=a.p;p===null&&(a.p=p=new Map);const g=p.get(m);g===void 0?(a=ck(),p.set(m,a)):a=g}}const l=a;let c;if(a.s===Bae)c=a.v;else if(c=e.apply(null,arguments),o++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,o!==0&&o--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Mvt(c):c}return l.s=Bae,l.v=c,c}return s.clearCache=()=>{n=ck(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function Lvt(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,s=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Ivt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=Z2e,argsMemoizeOptions:m=[]}=c,p=Lae(d),g=Lae(m),v=Pvt(i),b=f(function(){return o++,l.apply(null,arguments)},...p),w=h(function(){s++;const _=Ovt(v,arguments);return a=b.apply(null,_),a},...g);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var eTe=Lvt(Z2e),Bvt=Object.assign((e,t=eTe)=>{Rvt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((s,a,u)=>(s[n[u]]=a,s),{}))},{withTypes:()=>Bvt});function tTe(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var jvt=tTe(),zvt=tTe,Uvt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nP:nP.apply(null,arguments)};function jae(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(hp(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>bvt(r)&&r.type===e,n}var nTe=class p2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,p2.prototype)}static get[Symbol.species](){return p2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new p2(...t[0].concat(this)):new p2(...t.concat(this))}};function zae(e){return Fp(e)?J2e(e,()=>{}):e}function Uae(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Vvt(e){return typeof e=="boolean"}var Hvt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let s=new nTe;return n&&(Vvt(n)?s.push(jvt):s.push(zvt(n.extraArgument))),s},qvt="RTK_autoBatch",Vae=e=>t=>{setTimeout(t,e)},Wvt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,s=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Vae(10):e.type==="callback"?e.queueNotification:Vae(e.timeout),l=()=>{s=!1,o&&(o=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[qvt]),o=!i,o&&(s||(s=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Gvt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new nTe(e);return r&&i.push(Wvt(typeof r=="object"?r:void 0)),i};function Yvt(e){const t=Hvt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(qW(n))a=yvt(n);else throw new Error(hp(1));let u;typeof r=="function"?u=r(t):u=t();let l=nP;i&&(l=Uvt({trace:!1,...typeof i=="object"&&i}));const c=vvt(...u),f=Gvt(c);let d=typeof s=="function"?s(f):f();const h=l(...d);return q2e(a,o,h)}function rTe(e){const t={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(hp(28));if(a in t)throw new Error(hp(29));return t[a]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function Kvt(e){return typeof e=="function"}function Xvt(e,t){let[n,r,i]=rTe(t),o;if(Kvt(e))o=()=>zae(e());else{const a=zae(e);o=()=>a}function s(a=o(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(e1(c)){const h=f(c,u);return h===void 0?c:h}else{if(Fp(c))return J2e(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return s.getInitialState=o,s}var Qvt=Symbol.for("rtk-slice-createasyncthunk");function Jvt(e,t){return`${e}/${t}`}function Zvt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Qvt];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(hp(11));const a=(typeof i.reducers=="function"?i.reducers(nbt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,E){const _=typeof w=="string"?w:w.type;if(!_)throw new Error(hp(12));if(_ in l.sliceCaseReducersByType)throw new Error(hp(13));return l.sliceCaseReducersByType[_]=E,c},addMatcher(w,E){return l.sliceMatchers.push({matcher:w,reducer:E}),c},exposeAction(w,E){return l.actionCreators[w]=E,c},exposeCaseReducer(w,E){return l.sliceCaseReducersByName[w]=E,c}};u.forEach(w=>{const E=a[w],_={reducerName:w,type:Jvt(o,w),createNotation:typeof i.reducers=="function"};ibt(E)?sbt(_,E,c,t):rbt(_,E,c)});function f(){const[w={},E=[],_=void 0]=typeof i.extraReducers=="function"?rTe(i.extraReducers):[i.extraReducers],T={...w,...l.sliceCaseReducersByType};return Xvt(i.initialState,S=>{for(let D in T)S.addCase(D,T[D]);for(let D of l.sliceMatchers)S.addMatcher(D.matcher,D.reducer);for(let D of E)S.addMatcher(D.matcher,D.reducer);_&&S.addDefaultCase(_)})}const d=w=>w,h=new Map;let m;function p(w,E){return m||(m=f()),m(w,E)}function g(){return m||(m=f()),m.getInitialState()}function v(w,E=!1){function _(S){let D=S[w];return typeof D>"u"&&E&&(D=g()),D}function T(S=d){const D=Uae(h,E,()=>new WeakMap);return Uae(D,S,()=>{const k={};for(const[R,O]of Object.entries(i.selectors??{}))k[R]=ebt(O,S,g,E);return k})}return{reducerPath:w,getSelectors:T,get selectors(){return T(_)},selectSlice:_}}const b={name:o,reducer:p,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...v(s),injectInto(w,{reducerPath:E,..._}={}){const T=E??s;return w.inject({reducerPath:T,reducer:p},_),{...b,...v(T,!0)}}};return b}}function ebt(e,t,n,r){function i(o,...s){let a=t(o);return typeof a>"u"&&r&&(a=n()),e(a,...s)}return i.unwrapped=e,i}var tbt=Zvt();function nbt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function rbt({type:e,reducerName:t,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!obt(r))throw new Error(hp(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?jae(e,s):jae(e))}function ibt(e){return e._reducerDefinitionType==="asyncThunk"}function obt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function sbt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(hp(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,o,c);r.exposeAction(t,f),s&&r.addCase(f.fulfilled,s),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:s||fk,pending:a||fk,rejected:u||fk,settled:l||fk})}function fk(){}function hp(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function iE(e){return e.baseComponent!==void 0}function Al(e){return e.order==="dynamic"}function wf(e){return Al(e)?[e.id]:e.components.flatMap(t=>typeof t=="string"?t:wf(t))}function iTe(e){return Al(e)?[e]:e.components.flatMap(t=>typeof t=="string"?[]:iTe(t))}function abt(e,t){return iTe(t).find(r=>r.id===e)}function oTe(e){var t;return Al(e)?[e.id]:[...e.components.flatMap(n=>typeof n=="string"?n:Al(n)?n.id:oTe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function sTe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const o=e.components[i];if(typeof o=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+wf(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+wf(e).length-1}];r+=1}else{const s=sTe(o,t,n+r);if(typeof s=="number")r+=s;else{const a={currentBlock:e,firstIndex:n,lastIndex:s[0].lastIndex};return[...s,a]}}}return r}function YW(e,t){const n=sTe(e,t,0);return typeof n=="number"?null:n}function aTe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const o=e.components[i];if(typeof o=="string")r+=1;else{const s=aTe(o,t,n+r);if(s.found)return s;r+=s.distance}}return{found:!1,distance:r}}function ubt(e,t){const n=aTe(e,t,0);return n.found?n.distance:-1}function uTe(e,t="root"){if(Al(e))return[];const n=[],r={};return e.components.forEach((i,o)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...uTe(i,`${t}-${o}`))}),n}function KW(e,t){return typeof e=="string"?e:Al(e)?e.id:{...e,orderPath:t,order:e.order,components:e.components.map((n,r)=>KW(n,`${t}-${r}`))}}async function lbt(e,t,n,r,i,o,s){const a=wf(n),u=Object.fromEntries(a.filter(m=>m!=="end").map((m,p)=>[`${m}_${p}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((m,p)=>({[`${m}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((m,p)=>({[`${m}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:o,matrixAnswers:{},participantId:s,funcSequence:{},funcParams:void 0},d=tbt({name:"storeSlice",initialState:f,reducers:{setConfig(m,p){m.config=p.payload},setIsRecording(m,p){m.isRecording=p.payload},setFuncParams(m,p){m.funcParams=p.payload},pushToFuncSequence(m,p){m.funcSequence[p.payload.funcName]||(m.funcSequence[p.payload.funcName]=[]),!(m.funcSequence[p.payload.funcName].length>p.payload.funcIndex)&&(m.funcSequence[p.payload.funcName].push(p.payload.component),m.answers[`${p.payload.funcName}_${p.payload.index}_${p.payload.component}_${p.payload.funcIndex}`]={answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0},m.trialValidation[`${p.payload.funcName}_${p.payload.index}_${p.payload.component}_${p.payload.funcIndex}`]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}})},toggleStudyBrowser:m=>{m.showStudyBrowser=!m.showStudyBrowser},toggleShowHelpText:m=>{m.showHelpText=!m.showHelpText},setAlertModal:(m,p)=>{m.alertModal=p.payload},setreactiveAnswers:(m,p)=>{m.reactiveAnswers=p.payload},setreactiveProvenance:(m,p)=>{m.reactiveProvenance=p.payload},setOtherText:(m,p)=>{m.otherTexts[p.payload.key]=p.payload.value},resetOtherText:m=>{m.otherTexts={}},saveAnalysisState(m,{payload:p}){m.analysisProvState=p},setAnalysisIsPlaying(m,{payload:p}){m.analysisIsPlaying=p},setAnalysisHasAudio(m,{payload:p}){m.analysisHasAudio=p},setAnalysisHasProvenance(m,{payload:p}){m.analysisHasProvenance=p},setMatrixAnswersRadio:(m,p)=>{if(p.payload){const{responseId:g,questionKey:v,val:b}=p.payload;m.matrixAnswers={...m.matrixAnswers,[g]:{...m.matrixAnswers[g],[v]:b}}}else m.matrixAnswers={}},setMatrixAnswersCheckbox:(m,p)=>{var g;if(p.payload){const{responseId:v,questionKey:b,value:w,isChecked:E,choiceOptions:_}=p.payload,T=((g=m.matrixAnswers[v])==null?void 0:g[b])??"";let S="";E?T.length>0?S=[...T.split("|"),w].sort((D,k)=>_.map(R=>R.value).indexOf(D)-_.map(R=>R.value).indexOf(k)).join("|"):S=`${w}`:S=T.split("|").filter(D=>D!==w).join("|"),m.matrixAnswers={...m.matrixAnswers,[v]:{...m.matrixAnswers[v],[b]:S}}}else m.matrixAnswers={}},updateResponseBlockValidation:(m,{payload:p})=>{if(m.trialValidation[p.identifier]||(m.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(p.values).length>0){const g=m.trialValidation[p.identifier][p.location].values;m.trialValidation[p.identifier][p.location]={valid:p.status,values:{...g,...p.values}}}p.provenanceGraph&&(m.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(m,{payload:p}){const{identifier:g,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:_,timedOut:T,incorrectAnswers:S,helpButtonClickedCount:D}=p;m.answers[g]={incorrectAnswers:S,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:_,timedOut:T,helpButtonClickedCount:D}},incrementHelpCounter(m,{payload:p}){const{identifier:g}=p;m.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(m,{payload:p}){const{identifier:g,answer:v,question:b}=p;m.answers[b].incorrectAnswers||(m.answers[b].incorrectAnswers={}),m.answers[b].incorrectAnswers[g]||(m.answers[b].incorrectAnswers[g]={id:g,value:[]}),m.answers[b].incorrectAnswers[g].value.push(v)}}});return{store:Yvt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const lTe=P.createContext(null);function ls(){return P.useContext(lTe).actions}const Vs=xxe,or=Nit;function cbt(e){return or(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const fbt=eTe(e=>e.sequence,e=>wf(e));function m6(){return or(fbt)}var dR={exports:{}},hR={exports:{}},dbt=hR.exports,Hae;function er(){return Hae||(Hae=1,function(e,t){(function(n,r){e.exports=r()})(dbt,function(){var n=n||function(r,i){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof Ua<"u"&&Ua.crypto&&(o=Ua.crypto),!o&&typeof Z_=="function")try{o=kH}catch{}var s=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(w){var E;return b.prototype=w,E=new b,b.prototype=null,E}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var w=a(this);return b&&w.mixIn(b),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var w in b)b.hasOwnProperty(w)&&(this[w]=b[w]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(b,w){b=this.words=b||[],w!=i?this.sigBytes=w:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var w=this.words,E=b.words,_=this.sigBytes,T=b.sigBytes;if(this.clamp(),_%4)for(var S=0;S<T;S++){var D=E[S>>>2]>>>24-S%4*8&255;w[_+S>>>2]|=D<<24-(_+S)%4*8}else for(var k=0;k<T;k+=4)w[_+k>>>2]=E[k>>>2];return this.sigBytes+=T,this},clamp:function(){var b=this.words,w=this.sigBytes;b[w>>>2]&=4294967295<<32-w%4*8,b.length=r.ceil(w/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var w=[],E=0;E<b;E+=4)w.push(s());return new f.init(w,b)}}),d=u.enc={},h=d.Hex={stringify:function(b){for(var w=b.words,E=b.sigBytes,_=[],T=0;T<E;T++){var S=w[T>>>2]>>>24-T%4*8&255;_.push((S>>>4).toString(16)),_.push((S&15).toString(16))}return _.join("")},parse:function(b){for(var w=b.length,E=[],_=0;_<w;_+=2)E[_>>>3]|=parseInt(b.substr(_,2),16)<<24-_%8*4;return new f.init(E,w/2)}},m=d.Latin1={stringify:function(b){for(var w=b.words,E=b.sigBytes,_=[],T=0;T<E;T++){var S=w[T>>>2]>>>24-T%4*8&255;_.push(String.fromCharCode(S))}return _.join("")},parse:function(b){for(var w=b.length,E=[],_=0;_<w;_++)E[_>>>2]|=(b.charCodeAt(_)&255)<<24-_%4*8;return new f.init(E,w)}},p=d.Utf8={stringify:function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return m.parse(unescape(encodeURIComponent(b)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=p.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var w,E=this._data,_=E.words,T=E.sigBytes,S=this.blockSize,D=S*4,k=T/D;b?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var R=k*S,O=r.min(R*4,T);if(R){for(var M=0;M<R;M+=S)this._doProcessBlock(_,M);w=_.splice(0,R),E.sigBytes-=O}return new f.init(w,O)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(b){return function(w,E){return new b.init(E).finalize(w)}},_createHmacHelper:function(b){return function(w,E){return new v.HMAC.init(b,E).finalize(w)}}});var v=u.algo={};return u}(Math);return n})}(hR)),hR.exports}var pR={exports:{}},hbt=pR.exports,qae;function g6(){return qae||(qae=1,function(e,t){(function(n,r){e.exports=r(er())})(hbt,function(n){return function(r){var i=n,o=i.lib,s=o.Base,a=o.WordArray,u=i.x64={};u.Word=s.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=s.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=s.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(pR)),pR.exports}var mR={exports:{}},pbt=mR.exports,Wae;function mbt(){return Wae||(Wae=1,function(e,t){(function(n,r){e.exports=r(er())})(pbt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,o=i.WordArray,s=o.init,a=o.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;s.call(this,c,l)}else s.apply(this,arguments)};a.prototype=o}}(),n.lib.WordArray})}(mR)),mR.exports}var gR={exports:{}},gbt=gR.exports,Gae;function ybt(){return Gae||(Gae=1,function(e,t){(function(n,r){e.exports=r(er())})(gbt,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Utf16=s.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return o.create(c,l*2)}},s.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return o.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(gR)),gR.exports}var yR={exports:{}},vbt=yR.exports,Yae;function q1(){return Yae||(Yae=1,function(e,t){(function(n,r){e.exports=r(er())})(vbt,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var m=l[h>>>2]>>>24-h%4*8&255,p=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=m<<16|p<<8|g,b=0;b<4&&h+b*.75<c;b++)d.push(f.charAt(v>>>6*(3-b)&63));var w=f.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var m=u.indexOf(h);m!==-1&&(l=m)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var m=c[u.charCodeAt(h-1)]<<h%4*2,p=c[u.charCodeAt(h)]>>>6-h%4*2,g=m|p;f[d>>>2]|=g<<24-d%4*8,d++}return o.create(f,d)}}(),n.enc.Base64})}(yR)),yR.exports}var vR={exports:{}},bbt=vR.exports,Kae;function xbt(){return Kae||(Kae=1,function(e,t){(function(n,r){e.exports=r(er())})(bbt,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],m=0;m<f;m+=3)for(var p=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,v=c[m+2>>>2]>>>24-(m+2)%4*8&255,b=p<<16|g<<8|v,w=0;w<4&&m+w*.75<f;w++)h.push(d.charAt(b>>>6*(3-w)&63));var E=d.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var m=f.charAt(64);if(m){var p=u.indexOf(m);p!==-1&&(c=p)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var m=c[u.charCodeAt(h-1)]<<h%4*2,p=c[u.charCodeAt(h)]>>>6-h%4*2,g=m|p;f[d>>>2]|=g<<24-d%4*8,d++}return o.create(f,d)}}(),n.enc.Base64url})}(vR)),vR.exports}var bR={exports:{}},wbt=bR.exports,Xae;function W1(){return Xae||(Xae=1,function(e,t){(function(n,r){e.exports=r(er())})(wbt,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.algo,l=[];(function(){for(var p=0;p<64;p++)l[p]=r.abs(r.sin(p+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,g){for(var v=0;v<16;v++){var b=g+v,w=p[b];p[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var E=this._hash.words,_=p[g+0],T=p[g+1],S=p[g+2],D=p[g+3],k=p[g+4],R=p[g+5],O=p[g+6],M=p[g+7],F=p[g+8],L=p[g+9],H=p[g+10],V=p[g+11],Q=p[g+12],K=p[g+13],Z=p[g+14],U=p[g+15],B=E[0],q=E[1],z=E[2],G=E[3];B=f(B,q,z,G,_,7,l[0]),G=f(G,B,q,z,T,12,l[1]),z=f(z,G,B,q,S,17,l[2]),q=f(q,z,G,B,D,22,l[3]),B=f(B,q,z,G,k,7,l[4]),G=f(G,B,q,z,R,12,l[5]),z=f(z,G,B,q,O,17,l[6]),q=f(q,z,G,B,M,22,l[7]),B=f(B,q,z,G,F,7,l[8]),G=f(G,B,q,z,L,12,l[9]),z=f(z,G,B,q,H,17,l[10]),q=f(q,z,G,B,V,22,l[11]),B=f(B,q,z,G,Q,7,l[12]),G=f(G,B,q,z,K,12,l[13]),z=f(z,G,B,q,Z,17,l[14]),q=f(q,z,G,B,U,22,l[15]),B=d(B,q,z,G,T,5,l[16]),G=d(G,B,q,z,O,9,l[17]),z=d(z,G,B,q,V,14,l[18]),q=d(q,z,G,B,_,20,l[19]),B=d(B,q,z,G,R,5,l[20]),G=d(G,B,q,z,H,9,l[21]),z=d(z,G,B,q,U,14,l[22]),q=d(q,z,G,B,k,20,l[23]),B=d(B,q,z,G,L,5,l[24]),G=d(G,B,q,z,Z,9,l[25]),z=d(z,G,B,q,D,14,l[26]),q=d(q,z,G,B,F,20,l[27]),B=d(B,q,z,G,K,5,l[28]),G=d(G,B,q,z,S,9,l[29]),z=d(z,G,B,q,M,14,l[30]),q=d(q,z,G,B,Q,20,l[31]),B=h(B,q,z,G,R,4,l[32]),G=h(G,B,q,z,F,11,l[33]),z=h(z,G,B,q,V,16,l[34]),q=h(q,z,G,B,Z,23,l[35]),B=h(B,q,z,G,T,4,l[36]),G=h(G,B,q,z,k,11,l[37]),z=h(z,G,B,q,M,16,l[38]),q=h(q,z,G,B,H,23,l[39]),B=h(B,q,z,G,K,4,l[40]),G=h(G,B,q,z,_,11,l[41]),z=h(z,G,B,q,D,16,l[42]),q=h(q,z,G,B,O,23,l[43]),B=h(B,q,z,G,L,4,l[44]),G=h(G,B,q,z,Q,11,l[45]),z=h(z,G,B,q,U,16,l[46]),q=h(q,z,G,B,S,23,l[47]),B=m(B,q,z,G,_,6,l[48]),G=m(G,B,q,z,M,10,l[49]),z=m(z,G,B,q,Z,15,l[50]),q=m(q,z,G,B,R,21,l[51]),B=m(B,q,z,G,Q,6,l[52]),G=m(G,B,q,z,D,10,l[53]),z=m(z,G,B,q,H,15,l[54]),q=m(q,z,G,B,T,21,l[55]),B=m(B,q,z,G,F,6,l[56]),G=m(G,B,q,z,U,10,l[57]),z=m(z,G,B,q,O,15,l[58]),q=m(q,z,G,B,K,21,l[59]),B=m(B,q,z,G,k,6,l[60]),G=m(G,B,q,z,V,10,l[61]),z=m(z,G,B,q,S,15,l[62]),q=m(q,z,G,B,L,21,l[63]),E[0]=E[0]+B|0,E[1]=E[1]+q|0,E[2]=E[2]+z|0,E[3]=E[3]+G|0},_doFinalize:function(){var p=this._data,g=p.words,v=this._nDataBytes*8,b=p.sigBytes*8;g[b>>>5]|=128<<24-b%32;var w=r.floor(v/4294967296),E=v;g[(b+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,g[(b+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,p.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,T=_.words,S=0;S<4;S++){var D=T[S];T[S]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return _},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});function f(p,g,v,b,w,E,_){var T=p+(g&v|~g&b)+w+_;return(T<<E|T>>>32-E)+g}function d(p,g,v,b,w,E,_){var T=p+(g&b|v&~b)+w+_;return(T<<E|T>>>32-E)+g}function h(p,g,v,b,w,E,_){var T=p+(g^v^b)+w+_;return(T<<E|T>>>32-E)+g}function m(p,g,v,b,w,E,_){var T=p+(v^(g|~b))+w+_;return(T<<E|T>>>32-E)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(bR)),bR.exports}var xR={exports:{}},Ebt=xR.exports,Qae;function cTe(){return Qae||(Qae=1,function(e,t){(function(n,r){e.exports=r(er())})(Ebt,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=i.Hasher,a=r.algo,u=[],l=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],m=d[1],p=d[2],g=d[3],v=d[4],b=0;b<80;b++){if(b<16)u[b]=c[f+b]|0;else{var w=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=w<<1|w>>>31}var E=(h<<5|h>>>27)+v+u[b];b<20?E+=(m&p|~m&g)+1518500249:b<40?E+=(m^p^g)+1859775393:b<60?E+=(m&p|m&g|p&g)-1894007588:E+=(m^p^g)-899497514,v=g,g=p,p=m<<30|m>>>2,m=h,h=E}d[0]=d[0]+h|0,d[1]=d[1]+m|0,d[2]=d[2]+p|0,d[3]=d[3]+g|0,d[4]=d[4]+v|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=s.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=s._createHelper(l),r.HmacSHA1=s._createHmacHelper(l)}(),n.SHA1})}(xR)),xR.exports}var wR={exports:{}},_bt=wR.exports,Jae;function XW(){return Jae||(Jae=1,function(e,t){(function(n,r){e.exports=r(er())})(_bt,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.algo,l=[],c=[];(function(){function h(v){for(var b=r.sqrt(v),w=2;w<=b;w++)if(!(v%w))return!1;return!0}function m(v){return(v-(v|0))*4294967296|0}for(var p=2,g=0;g<64;)h(p)&&(g<8&&(l[g]=m(r.pow(p,1/2))),c[g]=m(r.pow(p,1/3)),g++),p++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new s.init(l.slice(0))},_doProcessBlock:function(h,m){for(var p=this._hash.words,g=p[0],v=p[1],b=p[2],w=p[3],E=p[4],_=p[5],T=p[6],S=p[7],D=0;D<64;D++){if(D<16)f[D]=h[m+D]|0;else{var k=f[D-15],R=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,O=f[D-2],M=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;f[D]=R+f[D-7]+M+f[D-16]}var F=E&_^~E&T,L=g&v^g&b^v&b,H=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),V=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),Q=S+V+F+c[D]+f[D],K=H+L;S=T,T=_,_=E,E=w+Q|0,w=b,b=v,v=g,g=Q+K|0}p[0]=p[0]+g|0,p[1]=p[1]+v|0,p[2]=p[2]+b|0,p[3]=p[3]+w|0,p[4]=p[4]+E|0,p[5]=p[5]+_|0,p[6]=p[6]+T|0,p[7]=p[7]+S|0},_doFinalize:function(){var h=this._data,m=h.words,p=this._nDataBytes*8,g=h.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=r.floor(p/4294967296),m[(g+64>>>9<<4)+15]=p,h.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(wR)),wR.exports}var ER={exports:{}},Tbt=ER.exports,Zae;function Cbt(){return Zae||(Zae=1,function(e,t){(function(n,r,i){e.exports=r(er(),XW())})(Tbt,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.algo,a=s.SHA256,u=s.SHA224=a.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(ER)),ER.exports}var _R={exports:{}},Sbt=_R.exports,eue;function fTe(){return eue||(eue=1,function(e,t){(function(n,r,i){e.exports=r(er(),g6())})(Sbt,function(n){return function(){var r=n,i=r.lib,o=i.Hasher,s=r.x64,a=s.Word,u=s.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var h=l.SHA512=o.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(m,p){for(var g=this._hash.words,v=g[0],b=g[1],w=g[2],E=g[3],_=g[4],T=g[5],S=g[6],D=g[7],k=v.high,R=v.low,O=b.high,M=b.low,F=w.high,L=w.low,H=E.high,V=E.low,Q=_.high,K=_.low,Z=T.high,U=T.low,B=S.high,q=S.low,z=D.high,G=D.low,X=k,ne=R,ge=O,me=M,ye=F,we=L,fe=H,se=V,Ce=Q,Ae=K,Ue=Z,Xe=U,Le=B,Ge=q,et=z,Et=G,ht=0;ht<80;ht++){var xt,te,le=d[ht];if(ht<16)te=le.high=m[p+ht*2]|0,xt=le.low=m[p+ht*2+1]|0;else{var be=d[ht-15],ae=be.high,pe=be.low,Ee=(ae>>>1|pe<<31)^(ae>>>8|pe<<24)^ae>>>7,$e=(pe>>>1|ae<<31)^(pe>>>8|ae<<24)^(pe>>>7|ae<<25),Ne=d[ht-2],Ze=Ne.high,Ke=Ne.low,It=(Ze>>>19|Ke<<13)^(Ze<<3|Ke>>>29)^Ze>>>6,zt=(Ke>>>19|Ze<<13)^(Ke<<3|Ze>>>29)^(Ke>>>6|Ze<<26),Pt=d[ht-7],en=Pt.high,kn=Pt.low,pn=d[ht-16],Rr=pn.high,br=pn.low;xt=$e+kn,te=Ee+en+(xt>>>0<$e>>>0?1:0),xt=xt+zt,te=te+It+(xt>>>0<zt>>>0?1:0),xt=xt+br,te=te+Rr+(xt>>>0<br>>>0?1:0),le.high=te,le.low=xt}var xr=Ce&Ue^~Ce&Le,Ei=Ae&Xe^~Ae&Ge,Lr=X&ge^X&ye^ge&ye,wr=ne&me^ne&we^me&we,Ea=(X>>>28|ne<<4)^(X<<30|ne>>>2)^(X<<25|ne>>>7),ps=(ne>>>28|X<<4)^(ne<<30|X>>>2)^(ne<<25|X>>>7),_a=(Ce>>>14|Ae<<18)^(Ce>>>18|Ae<<14)^(Ce<<23|Ae>>>9),Eo=(Ae>>>14|Ce<<18)^(Ae>>>18|Ce<<14)^(Ae<<23|Ce>>>9),Fn=f[ht],Kn=Fn.high,_o=Fn.low,qn=Et+Eo,Kr=et+_a+(qn>>>0<Et>>>0?1:0),qn=qn+Ei,Kr=Kr+xr+(qn>>>0<Ei>>>0?1:0),qn=qn+_o,Kr=Kr+Kn+(qn>>>0<_o>>>0?1:0),qn=qn+xt,Kr=Kr+te+(qn>>>0<xt>>>0?1:0),oo=ps+wr,Fi=Ea+Lr+(oo>>>0<ps>>>0?1:0);et=Le,Et=Ge,Le=Ue,Ge=Xe,Ue=Ce,Xe=Ae,Ae=se+qn|0,Ce=fe+Kr+(Ae>>>0<se>>>0?1:0)|0,fe=ye,se=we,ye=ge,we=me,ge=X,me=ne,ne=qn+oo|0,X=Kr+Fi+(ne>>>0<qn>>>0?1:0)|0}R=v.low=R+ne,v.high=k+X+(R>>>0<ne>>>0?1:0),M=b.low=M+me,b.high=O+ge+(M>>>0<me>>>0?1:0),L=w.low=L+we,w.high=F+ye+(L>>>0<we>>>0?1:0),V=E.low=V+se,E.high=H+fe+(V>>>0<se>>>0?1:0),K=_.low=K+Ae,_.high=Q+Ce+(K>>>0<Ae>>>0?1:0),U=T.low=U+Xe,T.high=Z+Ue+(U>>>0<Xe>>>0?1:0),q=S.low=q+Ge,S.high=B+Le+(q>>>0<Ge>>>0?1:0),G=D.low=G+Et,D.high=z+et+(G>>>0<Et>>>0?1:0)},_doFinalize:function(){var m=this._data,p=m.words,g=this._nDataBytes*8,v=m.sigBytes*8;p[v>>>5]|=128<<24-v%32,p[(v+128>>>10<<5)+30]=Math.floor(g/4294967296),p[(v+128>>>10<<5)+31]=g,m.sigBytes=p.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});r.SHA512=o._createHelper(h),r.HmacSHA512=o._createHmacHelper(h)}(),n.SHA512})}(_R)),_R.exports}var TR={exports:{}},Abt=TR.exports,tue;function Dbt(){return tue||(tue=1,function(e,t){(function(n,r,i){e.exports=r(er(),g6(),fTe())})(Abt,function(n){return function(){var r=n,i=r.x64,o=i.Word,s=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(TR)),TR.exports}var CR={exports:{}},kbt=CR.exports,nue;function Ibt(){return nue||(nue=1,function(e,t){(function(n,r,i){e.exports=r(er(),g6())})(kbt,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,v=0,b=0;b<24;b++){f[g+5*v]=(b+1)*(b+2)/2%64;var w=v%5,E=(2*g+3*v)%5;g=w,v=E}for(var g=0;g<5;g++)for(var v=0;v<5;v++)d[g+5*v]=v+(2*g+3*v)%5*5;for(var _=1,T=0;T<24;T++){for(var S=0,D=0,k=0;k<7;k++){if(_&1){var R=(1<<k)-1;R<32?D^=1<<R:S^=1<<R-32}_&128?_=_<<1^113:_<<=1}h[T]=l.create(S,D)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var p=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],v=0;v<25;v++)g[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,v){for(var b=this._state,w=this.blockSize/2,E=0;E<w;E++){var _=g[v+2*E],T=g[v+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360;var S=b[E];S.high^=T,S.low^=_}for(var D=0;D<24;D++){for(var k=0;k<5;k++){for(var R=0,O=0,M=0;M<5;M++){var S=b[k+5*M];R^=S.high,O^=S.low}var F=m[k];F.high=R,F.low=O}for(var k=0;k<5;k++)for(var L=m[(k+4)%5],H=m[(k+1)%5],V=H.high,Q=H.low,R=L.high^(V<<1|Q>>>31),O=L.low^(Q<<1|V>>>31),M=0;M<5;M++){var S=b[k+5*M];S.high^=R,S.low^=O}for(var K=1;K<25;K++){var R,O,S=b[K],Z=S.high,U=S.low,B=f[K];B<32?(R=Z<<B|U>>>32-B,O=U<<B|Z>>>32-B):(R=U<<B-32|Z>>>64-B,O=Z<<B-32|U>>>64-B);var q=m[d[K]];q.high=R,q.low=O}var z=m[0],G=b[0];z.high=G.high,z.low=G.low;for(var k=0;k<5;k++)for(var M=0;M<5;M++){var K=k+5*M,S=b[K],X=m[K],ne=m[(k+1)%5+5*M],ge=m[(k+2)%5+5*M];S.high=X.high^~ne.high&ge.high,S.low=X.low^~ne.low&ge.low}var S=b[0],me=h[D];S.high^=me.high,S.low^=me.low}},_doFinalize:function(){var g=this._data,v=g.words;this._nDataBytes*8;var b=g.sigBytes*8,w=this.blockSize*32;v[b>>>5]|=1<<24-b%32,v[(r.ceil((b+1)/w)*w>>>5)-1]|=128,g.sigBytes=v.length*4,this._process();for(var E=this._state,_=this.cfg.outputLength/8,T=_/8,S=[],D=0;D<T;D++){var k=E[D],R=k.high,O=k.low;R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,S.push(O),S.push(R)}return new s.init(S,_)},clone:function(){for(var g=a.clone.call(this),v=g._state=this._state.slice(0),b=0;b<25;b++)v[b]=v[b].clone();return g}});i.SHA3=a._createHelper(p),i.HmacSHA3=a._createHmacHelper(p)}(Math),n.SHA3})}(CR)),CR.exports}var SR={exports:{}},Rbt=SR.exports,rue;function Nbt(){return rue||(rue=1,function(e,t){(function(n,r){e.exports=r(er())})(Rbt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.algo,l=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=s.create([0,1518500249,1859775393,2400959708,2840853838]),m=s.create([1352829926,1548603684,1836072691,2053994217,0]),p=u.RIPEMD160=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,S){for(var D=0;D<16;D++){var k=S+D,R=T[k];T[k]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}var O=this._hash.words,M=h.words,F=m.words,L=l.words,H=c.words,V=f.words,Q=d.words,K,Z,U,B,q,z,G,X,ne,ge;z=K=O[0],G=Z=O[1],X=U=O[2],ne=B=O[3],ge=q=O[4];for(var me,D=0;D<80;D+=1)me=K+T[S+L[D]]|0,D<16?me+=g(Z,U,B)+M[0]:D<32?me+=v(Z,U,B)+M[1]:D<48?me+=b(Z,U,B)+M[2]:D<64?me+=w(Z,U,B)+M[3]:me+=E(Z,U,B)+M[4],me=me|0,me=_(me,V[D]),me=me+q|0,K=q,q=B,B=_(U,10),U=Z,Z=me,me=z+T[S+H[D]]|0,D<16?me+=E(G,X,ne)+F[0]:D<32?me+=w(G,X,ne)+F[1]:D<48?me+=b(G,X,ne)+F[2]:D<64?me+=v(G,X,ne)+F[3]:me+=g(G,X,ne)+F[4],me=me|0,me=_(me,Q[D]),me=me+ge|0,z=ge,ge=ne,ne=_(X,10),X=G,G=me;me=O[1]+U+ne|0,O[1]=O[2]+B+ge|0,O[2]=O[3]+q+z|0,O[3]=O[4]+K+G|0,O[4]=O[0]+Z+X|0,O[0]=me},_doFinalize:function(){var T=this._data,S=T.words,D=this._nDataBytes*8,k=T.sigBytes*8;S[k>>>5]|=128<<24-k%32,S[(k+64>>>9<<4)+14]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,T.sigBytes=(S.length+1)*4,this._process();for(var R=this._hash,O=R.words,M=0;M<5;M++){var F=O[M];O[M]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return R},clone:function(){var T=a.clone.call(this);return T._hash=this._hash.clone(),T}});function g(T,S,D){return T^S^D}function v(T,S,D){return T&S|~T&D}function b(T,S,D){return(T|~S)^D}function w(T,S,D){return T&D|S&~D}function E(T,S,D){return T^(S|~D)}function _(T,S){return T<<S|T>>>32-S}i.RIPEMD160=a._createHelper(p),i.HmacRIPEMD160=a._createHmacHelper(p)}(),n.RIPEMD160})}(SR)),SR.exports}var AR={exports:{}},Pbt=AR.exports,iue;function QW(){return iue||(iue=1,function(e,t){(function(n,r){e.exports=r(er())})(Pbt,function(n){(function(){var r=n,i=r.lib,o=i.Base,s=r.enc,a=s.Utf8,u=r.algo;u.HMAC=o.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),m=this._iKey=c.clone(),p=h.words,g=m.words,v=0;v<f;v++)p[v]^=1549556828,g[v]^=909522486;h.sigBytes=m.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(AR)),AR.exports}var DR={exports:{}},Obt=DR.exports,oue;function Fbt(){return oue||(oue=1,function(e,t){(function(n,r,i){e.exports=r(er(),XW(),QW())})(Obt,function(n){return function(){var r=n,i=r.lib,o=i.Base,s=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=o.extend({cfg:o.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,m=l.create(h.hasher,f),p=s.create(),g=s.create([1]),v=p.words,b=g.words,w=h.keySize,E=h.iterations;v.length<w;){var _=m.update(d).finalize(g);m.reset();for(var T=_.words,S=T.length,D=_,k=1;k<E;k++){D=m.finalize(D),m.reset();for(var R=D.words,O=0;O<S;O++)T[O]^=R[O]}p.concat(_),b[0]++}return p.sigBytes=w*4,p}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(DR)),DR.exports}var kR={exports:{}},Mbt=kR.exports,sue;function cg(){return sue||(sue=1,function(e,t){(function(n,r,i){e.exports=r(er(),cTe(),QW())})(Mbt,function(n){return function(){var r=n,i=r.lib,o=i.Base,s=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,m=h.hasher.create(),p=s.create(),g=p.words,v=h.keySize,b=h.iterations;g.length<v;){d&&m.update(d),d=m.update(c).finalize(f),m.reset();for(var w=1;w<b;w++)d=m.finalize(d),m.reset();p.concat(d)}return p.sigBytes=v*4,p}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(kR)),kR.exports}var IR={exports:{}},$bt=IR.exports,aue;function ds(){return aue||(aue=1,function(e,t){(function(n,r,i){e.exports=r(er(),cg())})($bt,function(n){n.lib.Cipher||function(r){var i=n,o=i.lib,s=o.Base,a=o.WordArray,u=o.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=o.Cipher=u.extend({cfg:s.extend(),createEncryptor:function(R,O){return this.create(this._ENC_XFORM_MODE,R,O)},createDecryptor:function(R,O){return this.create(this._DEC_XFORM_MODE,R,O)},init:function(R,O,M){this.cfg=this.cfg.extend(M),this._xformMode=R,this._key=O,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(R){return this._append(R),this._process()},finalize:function(R){R&&this._append(R);var O=this._doFinalize();return O},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function R(O){return typeof O=="string"?k:T}return function(O){return{encrypt:function(M,F,L){return R(F).encrypt(O,M,F,L)},decrypt:function(M,F,L){return R(F).decrypt(O,M,F,L)}}}}()});o.StreamCipher=h.extend({_doFinalize:function(){var R=this._process(!0);return R},blockSize:1});var m=i.mode={},p=o.BlockCipherMode=s.extend({createEncryptor:function(R,O){return this.Encryptor.create(R,O)},createDecryptor:function(R,O){return this.Decryptor.create(R,O)},init:function(R,O){this._cipher=R,this._iv=O}}),g=m.CBC=function(){var R=p.extend();R.Encryptor=R.extend({processBlock:function(M,F){var L=this._cipher,H=L.blockSize;O.call(this,M,F,H),L.encryptBlock(M,F),this._prevBlock=M.slice(F,F+H)}}),R.Decryptor=R.extend({processBlock:function(M,F){var L=this._cipher,H=L.blockSize,V=M.slice(F,F+H);L.decryptBlock(M,F),O.call(this,M,F,H),this._prevBlock=V}});function O(M,F,L){var H,V=this._iv;V?(H=V,this._iv=r):H=this._prevBlock;for(var Q=0;Q<L;Q++)M[F+Q]^=H[Q]}return R}(),v=i.pad={},b=v.Pkcs7={pad:function(R,O){for(var M=O*4,F=M-R.sigBytes%M,L=F<<24|F<<16|F<<8|F,H=[],V=0;V<F;V+=4)H.push(L);var Q=a.create(H,F);R.concat(Q)},unpad:function(R){var O=R.words[R.sigBytes-1>>>2]&255;R.sigBytes-=O}};o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:b}),reset:function(){var R;h.reset.call(this);var O=this.cfg,M=O.iv,F=O.mode;this._xformMode==this._ENC_XFORM_MODE?R=F.createEncryptor:(R=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==R?this._mode.init(this,M&&M.words):(this._mode=R.call(F,this,M&&M.words),this._mode.__creator=R)},_doProcessBlock:function(R,O){this._mode.processBlock(R,O)},_doFinalize:function(){var R,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),R=this._process(!0)):(R=this._process(!0),O.unpad(R)),R},blockSize:128/32});var w=o.CipherParams=s.extend({init:function(R){this.mixIn(R)},toString:function(R){return(R||this.formatter).stringify(this)}}),E=i.format={},_=E.OpenSSL={stringify:function(R){var O,M=R.ciphertext,F=R.salt;return F?O=a.create([1398893684,1701076831]).concat(F).concat(M):O=M,O.toString(c)},parse:function(R){var O,M=c.parse(R),F=M.words;return F[0]==1398893684&&F[1]==1701076831&&(O=a.create(F.slice(2,4)),F.splice(0,4),M.sigBytes-=16),w.create({ciphertext:M,salt:O})}},T=o.SerializableCipher=s.extend({cfg:s.extend({format:_}),encrypt:function(R,O,M,F){F=this.cfg.extend(F);var L=R.createEncryptor(M,F),H=L.finalize(O),V=L.cfg;return w.create({ciphertext:H,key:M,iv:V.iv,algorithm:R,mode:V.mode,padding:V.padding,blockSize:R.blockSize,formatter:F.format})},decrypt:function(R,O,M,F){F=this.cfg.extend(F),O=this._parse(O,F.format);var L=R.createDecryptor(M,F).finalize(O.ciphertext);return L},_parse:function(R,O){return typeof R=="string"?O.parse(R,this):R}}),S=i.kdf={},D=S.OpenSSL={execute:function(R,O,M,F,L){if(F||(F=a.random(64/8)),L)var H=d.create({keySize:O+M,hasher:L}).compute(R,F);else var H=d.create({keySize:O+M}).compute(R,F);var V=a.create(H.words.slice(O),M*4);return H.sigBytes=O*4,w.create({key:H,iv:V,salt:F})}},k=o.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:D}),encrypt:function(R,O,M,F){F=this.cfg.extend(F);var L=F.kdf.execute(M,R.keySize,R.ivSize,F.salt,F.hasher);F.iv=L.iv;var H=T.encrypt.call(this,R,O,L.key,F);return H.mixIn(L),H},decrypt:function(R,O,M,F){F=this.cfg.extend(F),O=this._parse(O,F.format);var L=F.kdf.execute(M,R.keySize,R.ivSize,O.salt,F.hasher);F.iv=L.iv;var H=T.decrypt.call(this,R,O,L.key,F);return H}})}()})}(IR)),IR.exports}var RR={exports:{}},Lbt=RR.exports,uue;function Bbt(){return uue||(uue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(Lbt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize;i.call(this,o,s,u,a),this._prevBlock=o.slice(s,s+u)}}),r.Decryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize,l=o.slice(s,s+u);i.call(this,o,s,u,a),this._prevBlock=l}});function i(o,s,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)o[s+f]^=l[f]}return r}(),n.mode.CFB})}(RR)),RR.exports}var NR={exports:{}},jbt=NR.exports,lue;function zbt(){return lue||(lue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(jbt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)o[s+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(NR)),NR.exports}var PR={exports:{}},Ubt=PR.exports,cue;function Vbt(){return cue||(cue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(Ubt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function o(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var s=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),o(d);var h=d.slice(0);l.encryptBlock(h,0);for(var m=0;m<c;m++)a[u+m]^=h[m]}});return r.Decryptor=s,r}(),n.mode.CTRGladman})}(PR)),PR.exports}var OR={exports:{}},Hbt=OR.exports,fue;function qbt(){return fue||(fue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(Hbt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)o[s+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(OR)),OR.exports}var FR={exports:{}},Wbt=FR.exports,due;function Gbt(){return due||(due=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(Wbt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,o){this._cipher.encryptBlock(i,o)}}),r.Decryptor=r.extend({processBlock:function(i,o){this._cipher.decryptBlock(i,o)}}),r}(),n.mode.ECB})}(FR)),FR.exports}var MR={exports:{}},Ybt=MR.exports,hue;function Kbt(){return hue||(hue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(Ybt,function(n){return n.pad.AnsiX923={pad:function(r,i){var o=r.sigBytes,s=i*4,a=s-o%s,u=o+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(MR)),MR.exports}var $R={exports:{}},Xbt=$R.exports,pue;function Qbt(){return pue||(pue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(Xbt,function(n){return n.pad.Iso10126={pad:function(r,i){var o=i*4,s=o-r.sigBytes%o;r.concat(n.lib.WordArray.random(s-1)).concat(n.lib.WordArray.create([s<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}($R)),$R.exports}var LR={exports:{}},Jbt=LR.exports,mue;function Zbt(){return mue||(mue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(Jbt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(LR)),LR.exports}var BR={exports:{}},ext=BR.exports,gue;function txt(){return gue||(gue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(ext,function(n){return n.pad.ZeroPadding={pad:function(r,i){var o=i*4;r.clamp(),r.sigBytes+=o-(r.sigBytes%o||o)},unpad:function(r){for(var i=r.words,o=r.sigBytes-1,o=r.sigBytes-1;o>=0;o--)if(i[o>>>2]>>>24-o%4*8&255){r.sigBytes=o+1;break}}},n.pad.ZeroPadding})}(BR)),BR.exports}var jR={exports:{}},nxt=jR.exports,yue;function rxt(){return yue||(yue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(nxt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(jR)),jR.exports}var zR={exports:{}},ixt=zR.exports,vue;function oxt(){return vue||(vue=1,function(e,t){(function(n,r,i){e.exports=r(er(),ds())})(ixt,function(n){return function(r){var i=n,o=i.lib,s=o.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return s.create({ciphertext:f})}}}(),n.format.Hex})}(zR)),zR.exports}var UR={exports:{}},sxt=UR.exports,bue;function axt(){return bue||(bue=1,function(e,t){(function(n,r,i){e.exports=r(er(),q1(),W1(),cg(),ds())})(sxt,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,s=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],m=[],p=[],g=[];(function(){for(var w=[],E=0;E<256;E++)E<128?w[E]=E<<1:w[E]=E<<1^283;for(var _=0,T=0,E=0;E<256;E++){var S=T^T<<1^T<<2^T<<3^T<<4;S=S>>>8^S&255^99,a[_]=S,u[S]=_;var D=w[_],k=w[D],R=w[k],O=w[S]*257^S*16843008;l[_]=O<<24|O>>>8,c[_]=O<<16|O>>>16,f[_]=O<<8|O>>>24,d[_]=O;var O=R*16843009^k*65537^D*257^_*16843008;h[S]=O<<24|O>>>8,m[S]=O<<16|O>>>16,p[S]=O<<8|O>>>24,g[S]=O,_?(_=D^w[w[w[R^D]]],T^=w[w[T]]):_=T=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],b=s.AES=o.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,T=E.sigBytes/4,S=this._nRounds=T+6,D=(S+1)*4,k=this._keySchedule=[],R=0;R<D;R++)R<T?k[R]=_[R]:(w=k[R-1],R%T?T>6&&R%T==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=v[R/T|0]<<24),k[R]=k[R-T]^w);for(var O=this._invKeySchedule=[],M=0;M<D;M++){var R=D-M;if(M%4)var w=k[R];else var w=k[R-4];M<4||R<=4?O[M]=w:O[M]=h[a[w>>>24]]^m[a[w>>>16&255]]^p[a[w>>>8&255]]^g[a[w&255]]}}},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._keySchedule,l,c,f,d,a)},decryptBlock:function(w,E){var _=w[E+1];w[E+1]=w[E+3],w[E+3]=_,this._doCryptBlock(w,E,this._invKeySchedule,h,m,p,g,u);var _=w[E+1];w[E+1]=w[E+3],w[E+3]=_},_doCryptBlock:function(w,E,_,T,S,D,k,R){for(var O=this._nRounds,M=w[E]^_[0],F=w[E+1]^_[1],L=w[E+2]^_[2],H=w[E+3]^_[3],V=4,Q=1;Q<O;Q++){var K=T[M>>>24]^S[F>>>16&255]^D[L>>>8&255]^k[H&255]^_[V++],Z=T[F>>>24]^S[L>>>16&255]^D[H>>>8&255]^k[M&255]^_[V++],U=T[L>>>24]^S[H>>>16&255]^D[M>>>8&255]^k[F&255]^_[V++],B=T[H>>>24]^S[M>>>16&255]^D[F>>>8&255]^k[L&255]^_[V++];M=K,F=Z,L=U,H=B}var K=(R[M>>>24]<<24|R[F>>>16&255]<<16|R[L>>>8&255]<<8|R[H&255])^_[V++],Z=(R[F>>>24]<<24|R[L>>>16&255]<<16|R[H>>>8&255]<<8|R[M&255])^_[V++],U=(R[L>>>24]<<24|R[H>>>16&255]<<16|R[M>>>8&255]<<8|R[F&255])^_[V++],B=(R[H>>>24]<<24|R[M>>>16&255]<<16|R[F>>>8&255]<<8|R[L&255])^_[V++];w[E]=K,w[E+1]=Z,w[E+2]=U,w[E+3]=B},keySize:256/32});r.AES=o._createHelper(b)}(),n.AES})}(UR)),UR.exports}var VR={exports:{}},uxt=VR.exports,xue;function lxt(){return xue||(xue=1,function(e,t){(function(n,r,i){e.exports=r(er(),q1(),W1(),cg(),ds())})(uxt,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=s.extend({_doReset:function(){for(var v=this._key,b=v.words,w=[],E=0;E<56;E++){var _=u[E]-1;w[E]=b[_>>>5]>>>31-_%32&1}for(var T=this._subKeys=[],S=0;S<16;S++){for(var D=T[S]=[],k=c[S],E=0;E<24;E++)D[E/6|0]|=w[(l[E]-1+k)%28]<<31-E%6,D[4+(E/6|0)]|=w[28+(l[E+24]-1+k)%28]<<31-E%6;D[0]=D[0]<<1|D[0]>>>31;for(var E=1;E<7;E++)D[E]=D[E]>>>(E-1)*4+3;D[7]=D[7]<<5|D[7]>>>27}for(var R=this._invSubKeys=[],E=0;E<16;E++)R[E]=T[15-E]},encryptBlock:function(v,b){this._doCryptBlock(v,b,this._subKeys)},decryptBlock:function(v,b){this._doCryptBlock(v,b,this._invSubKeys)},_doCryptBlock:function(v,b,w){this._lBlock=v[b],this._rBlock=v[b+1],m.call(this,4,252645135),m.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=w[E],T=this._lBlock,S=this._rBlock,D=0,k=0;k<8;k++)D|=f[k][((S^_[k])&d[k])>>>0];this._lBlock=S,this._rBlock=T^D}var R=this._lBlock;this._lBlock=this._rBlock,this._rBlock=R,m.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),v[b]=this._lBlock,v[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(v,b){var w=(this._lBlock>>>v^this._rBlock)&b;this._rBlock^=w,this._lBlock^=w<<v}function p(v,b){var w=(this._rBlock>>>v^this._lBlock)&b;this._lBlock^=w,this._rBlock^=w<<v}r.DES=s._createHelper(h);var g=a.TripleDES=s.extend({_doReset:function(){var v=this._key,b=v.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=b.slice(0,2),E=b.length<4?b.slice(0,2):b.slice(2,4),_=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(o.create(w)),this._des2=h.createEncryptor(o.create(E)),this._des3=h.createEncryptor(o.create(_))},encryptBlock:function(v,b){this._des1.encryptBlock(v,b),this._des2.decryptBlock(v,b),this._des3.encryptBlock(v,b)},decryptBlock:function(v,b){this._des3.decryptBlock(v,b),this._des2.encryptBlock(v,b),this._des1.decryptBlock(v,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=s._createHelper(g)}(),n.TripleDES})}(VR)),VR.exports}var HR={exports:{}},cxt=HR.exports,wue;function fxt(){return wue||(wue=1,function(e,t){(function(n,r,i){e.exports=r(er(),q1(),W1(),cg(),ds())})(cxt,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=s.RC4=o.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],m=0;m<256;m++)h[m]=m;for(var m=0,p=0;m<256;m++){var g=m%d,v=f[g>>>2]>>>24-g%4*8&255;p=(p+h[m]+v)%256;var b=h[m];h[m]=h[p],h[p]=b}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,m=0;m<4;m++){f=(f+1)%256,d=(d+c[f])%256;var p=c[f];c[f]=c[d],c[d]=p,h|=c[(c[f]+c[d])%256]<<24-m*8}return this._i=f,this._j=d,h}r.RC4=o._createHelper(a);var l=s.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=o._createHelper(l)}(),n.RC4})}(HR)),HR.exports}var qR={exports:{}},dxt=qR.exports,Eue;function hxt(){return Eue||(Eue=1,function(e,t){(function(n,r,i){e.exports=r(er(),q1(),W1(),cg(),ds())})(dxt,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=[],u=[],l=[],c=s.Rabbit=o.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)f.call(this);for(var m=0;m<8;m++)g[m]^=p[m+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,_=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,T=E>>>16|_&4294901760,S=_<<16|E&65535;g[0]^=E,g[1]^=T,g[2]^=_,g[3]^=S,g[4]^=E,g[5]^=T,g[6]^=_,g[7]^=S;for(var m=0;m<4;m++)f.call(this)}},_doProcessBlock:function(d,h){var m=this._X;f.call(this),a[0]=m[0]^m[5]>>>16^m[3]<<16,a[1]=m[2]^m[7]>>>16^m[5]<<16,a[2]=m[4]^m[1]>>>16^m[7]<<16,a[3]=m[6]^m[3]>>>16^m[1]<<16;for(var p=0;p<4;p++)a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360,d[h+p]^=a[p]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,m=0;m<8;m++)u[m]=h[m];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var m=0;m<8;m++){var p=d[m]+h[m],g=p&65535,v=p>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((p&4294901760)*p|0)+((p&65535)*p|0);l[m]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=o._createHelper(c)}(),n.Rabbit})}(qR)),qR.exports}var WR={exports:{}},pxt=WR.exports,_ue;function mxt(){return _ue||(_ue=1,function(e,t){(function(n,r,i){e.exports=r(er(),q1(),W1(),cg(),ds())})(pxt,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=[],u=[],l=[],c=s.RabbitLegacy=o.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],p=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)p[g]^=m[g+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,_=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,T=E>>>16|_&4294901760,S=_<<16|E&65535;p[0]^=E,p[1]^=T,p[2]^=_,p[3]^=S,p[4]^=E,p[5]^=T,p[6]^=_,p[7]^=S;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var m=this._X;f.call(this),a[0]=m[0]^m[5]>>>16^m[3]<<16,a[1]=m[2]^m[7]>>>16^m[5]<<16,a[2]=m[4]^m[1]>>>16^m[7]<<16,a[3]=m[6]^m[3]>>>16^m[1]<<16;for(var p=0;p<4;p++)a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360,d[h+p]^=a[p]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,m=0;m<8;m++)u[m]=h[m];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var m=0;m<8;m++){var p=d[m]+h[m],g=p&65535,v=p>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((p&4294901760)*p|0)+((p&65535)*p|0);l[m]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=o._createHelper(c)}(),n.RabbitLegacy})}(WR)),WR.exports}var GR={exports:{}},gxt=GR.exports,Tue;function yxt(){return Tue||(Tue=1,function(e,t){(function(n,r,i){e.exports=r(er(),q1(),W1(),cg(),ds())})(gxt,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,s=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,v){let b=v>>24&255,w=v>>16&255,E=v>>8&255,_=v&255,T=g.sbox[0][b]+g.sbox[1][w];return T=T^g.sbox[2][E],T=T+g.sbox[3][_],T}function d(g,v,b){let w=v,E=b,_;for(let T=0;T<a;++T)w=w^g.pbox[T],E=f(g,w)^E,_=w,w=E,E=_;return _=w,w=E,E=_,E=E^g.pbox[a],w=w^g.pbox[a+1],{left:w,right:E}}function h(g,v,b){let w=v,E=b,_;for(let T=a+1;T>1;--T)w=w^g.pbox[T],E=f(g,w)^E,_=w,w=E,E=_;return _=w,w=E,E=_,E=E^g.pbox[1],w=w^g.pbox[0],{left:w,right:E}}function m(g,v,b){for(let S=0;S<4;S++){g.sbox[S]=[];for(let D=0;D<256;D++)g.sbox[S][D]=l[S][D]}let w=0;for(let S=0;S<a+2;S++)g.pbox[S]=u[S]^v[w],w++,w>=b&&(w=0);let E=0,_=0,T=0;for(let S=0;S<a+2;S+=2)T=d(g,E,_),E=T.left,_=T.right,g.pbox[S]=E,g.pbox[S+1]=_;for(let S=0;S<4;S++)for(let D=0;D<256;D+=2)T=d(g,E,_),E=T.left,_=T.right,g.sbox[S][D]=E,g.sbox[S][D+1]=_;return!0}var p=s.Blowfish=o.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,v=g.words,b=g.sigBytes/4;m(c,v,b)}},encryptBlock:function(g,v){var b=d(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},decryptBlock:function(g,v){var b=h(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=o._createHelper(p)}(),n.Blowfish})}(GR)),GR.exports}var vxt=dR.exports,Cue;function bxt(){return Cue||(Cue=1,function(e,t){(function(n,r,i){e.exports=r(er(),g6(),mbt(),ybt(),q1(),xbt(),W1(),cTe(),XW(),Cbt(),fTe(),Dbt(),Ibt(),Nbt(),QW(),Fbt(),cg(),ds(),Bbt(),zbt(),Vbt(),qbt(),Gbt(),Kbt(),Qbt(),Zbt(),txt(),rxt(),oxt(),axt(),lxt(),fxt(),hxt(),mxt(),yxt())})(vxt,function(n){return n})}(dR)),dR.exports}var ej=bxt();function ua(e){const t=ej.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function nC(e){const t=ej.AES.decrypt(atob(e),"notSecret").toString(ej.enc.Utf8);return parseInt(t,10)}function Wd(){return or(e=>e.config)}var m2={exports:{}};m2.exports;var Sue;function xxt(){return Sue||(Sue=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",m="[object GeneratorFunction]",p="[object Map]",g="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",E="[object RegExp]",_="[object Set]",T="[object String]",S="[object Undefined]",D="[object WeakMap]",k="[object ArrayBuffer]",R="[object DataView]",O="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",L="[object Int16Array]",H="[object Int32Array]",V="[object Uint8Array]",Q="[object Uint8ClampedArray]",K="[object Uint16Array]",Z="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,q=/^(?:0|[1-9]\d*)$/,z={};z[O]=z[M]=z[F]=z[L]=z[H]=z[V]=z[Q]=z[K]=z[Z]=!0,z[a]=z[u]=z[k]=z[c]=z[R]=z[f]=z[d]=z[h]=z[p]=z[g]=z[b]=z[E]=z[_]=z[T]=z[D]=!1;var G=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,X=typeof self=="object"&&self&&self.Object===Object&&self,ne=G||X||Function("return this")(),ge=t&&!t.nodeType&&t,me=ge&&!0&&e&&!e.nodeType&&e,ye=me&&me.exports===ge,we=ye&&G.process,fe=function(){try{var de=me&&me.require&&me.require("util").types;return de||we&&we.binding&&we.binding("util")}catch{}}(),se=fe&&fe.isTypedArray;function Ce(de,_e,ze){switch(ze.length){case 0:return de.call(_e);case 1:return de.call(_e,ze[0]);case 2:return de.call(_e,ze[0],ze[1]);case 3:return de.call(_e,ze[0],ze[1],ze[2])}return de.apply(_e,ze)}function Ae(de,_e){for(var ze=-1,Mt=Array(de);++ze<de;)Mt[ze]=_e(ze);return Mt}function Ue(de){return function(_e){return de(_e)}}function Xe(de,_e){return de==null?void 0:de[_e]}function Le(de,_e){return function(ze){return de(_e(ze))}}var Ge=Array.prototype,et=Function.prototype,Et=Object.prototype,ht=ne["__core-js_shared__"],xt=et.toString,te=Et.hasOwnProperty,le=function(){var de=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return de?"Symbol(src)_1."+de:""}(),be=Et.toString,ae=xt.call(Object),pe=RegExp("^"+xt.call(te).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=ye?ne.Buffer:void 0,$e=ne.Symbol,Ne=ne.Uint8Array;Ee&&Ee.allocUnsafe;var Ze=Le(Object.getPrototypeOf,Object),Ke=Object.create,It=Et.propertyIsEnumerable,zt=Ge.splice,Pt=$e?$e.toStringTag:void 0,en=function(){try{var de=ut(Object,"defineProperty");return de({},"",{}),de}catch{}}(),kn=Ee?Ee.isBuffer:void 0,pn=Math.max,Rr=Date.now,br=ut(ne,"Map"),xr=ut(Object,"create"),Ei=function(){function de(){}return function(_e){if(!Ul(_e))return{};if(Ke)return Ke(_e);de.prototype=_e;var ze=new de;return de.prototype=void 0,ze}}();function Lr(de){var _e=-1,ze=de==null?0:de.length;for(this.clear();++_e<ze;){var Mt=de[_e];this.set(Mt[0],Mt[1])}}function wr(){this.__data__=xr?xr(null):{},this.size=0}function Ea(de){var _e=this.has(de)&&delete this.__data__[de];return this.size-=_e?1:0,_e}function ps(de){var _e=this.__data__;if(xr){var ze=_e[de];return ze===r?void 0:ze}return te.call(_e,de)?_e[de]:void 0}function _a(de){var _e=this.__data__;return xr?_e[de]!==void 0:te.call(_e,de)}function Eo(de,_e){var ze=this.__data__;return this.size+=this.has(de)?0:1,ze[de]=xr&&_e===void 0?r:_e,this}Lr.prototype.clear=wr,Lr.prototype.delete=Ea,Lr.prototype.get=ps,Lr.prototype.has=_a,Lr.prototype.set=Eo;function Fn(de){var _e=-1,ze=de==null?0:de.length;for(this.clear();++_e<ze;){var Mt=de[_e];this.set(Mt[0],Mt[1])}}function Kn(){this.__data__=[],this.size=0}function _o(de){var _e=this.__data__,ze=gs(_e,de);if(ze<0)return!1;var Mt=_e.length-1;return ze==Mt?_e.pop():zt.call(_e,ze,1),--this.size,!0}function qn(de){var _e=this.__data__,ze=gs(_e,de);return ze<0?void 0:_e[ze][1]}function Kr(de){return gs(this.__data__,de)>-1}function oo(de,_e){var ze=this.__data__,Mt=gs(ze,de);return Mt<0?(++this.size,ze.push([de,_e])):ze[Mt][1]=_e,this}Fn.prototype.clear=Kn,Fn.prototype.delete=_o,Fn.prototype.get=qn,Fn.prototype.has=Kr,Fn.prototype.set=oo;function Fi(de){var _e=-1,ze=de==null?0:de.length;for(this.clear();++_e<ze;){var Mt=de[_e];this.set(Mt[0],Mt[1])}}function To(){this.size=0,this.__data__={hash:new Lr,map:new(br||Fn),string:new Lr}}function Vu(de){var _e=ot(this,de).delete(de);return this.size-=_e?1:0,_e}function $l(de){return ot(this,de).get(de)}function iu(de){return ot(this,de).has(de)}function Hu(de,_e){var ze=ot(this,de),Mt=ze.size;return ze.set(de,_e),this.size+=ze.size==Mt?0:1,this}Fi.prototype.clear=To,Fi.prototype.delete=Vu,Fi.prototype.get=$l,Fi.prototype.has=iu,Fi.prototype.set=Hu;function bn(de){var _e=this.__data__=new Fn(de);this.size=_e.size}function ms(){this.__data__=new Fn,this.size=0}function so(de){var _e=this.__data__,ze=_e.delete(de);return this.size=_e.size,ze}function qu(de){return this.__data__.get(de)}function Wu(de){return this.__data__.has(de)}function Ll(de,_e){var ze=this.__data__;if(ze instanceof Fn){var Mt=ze.__data__;if(!br||Mt.length<n-1)return Mt.push([de,_e]),this.size=++ze.size,this;ze=this.__data__=new Fi(Mt)}return ze.set(de,_e),this.size=ze.size,this}bn.prototype.clear=ms,bn.prototype.delete=so,bn.prototype.get=qu,bn.prototype.has=Wu,bn.prototype.set=Ll;function Bl(de,_e){var ze=qo(de),Mt=!ze&&_i(de),In=!ze&&!Mt&&Ca(de),tr=!ze&&!Mt&&!In&&_g(de),Sr=ze||Mt||In||tr,_n=Sr?Ae(de.length,String):[],Er=_n.length;for(var Xr in de)Sr&&(Xr=="length"||In&&(Xr=="offset"||Xr=="parent")||tr&&(Xr=="buffer"||Xr=="byteLength"||Xr=="byteOffset")||Dt(Xr,Er))||_n.push(Xr);return _n}function Gu(de,_e,ze){(ze!==void 0&&!ys(de[_e],ze)||ze===void 0&&!(_e in de))&&Ft(de,_e,ze)}function Vf(de,_e,ze){var Mt=de[_e];(!(te.call(de,_e)&&ys(Mt,ze))||ze===void 0&&!(_e in de))&&Ft(de,_e,ze)}function gs(de,_e){for(var ze=de.length;ze--;)if(ys(de[ze][0],_e))return ze;return-1}function Ft(de,_e,ze){_e=="__proto__"&&en?en(de,_e,{configurable:!0,enumerable:!0,value:ze,writable:!0}):de[_e]=ze}var di=Qe();function Yi(de){return de==null?de===void 0?S:v:Pt&&Pt in Object(de)?at(de):Ao(de)}function Ho(de){return ao(de)&&Yi(de)==a}function ri(de){if(!Ul(de)||Pn(de))return!1;var _e=su(de)?pe:B;return _e.test(lm(de))}function Yu(de){return ao(de)&&cv(de.length)&&!!z[Yi(de)]}function sm(de){if(!Ul(de))return dr(de);var _e=Yt(de),ze=[];for(var Mt in de)Mt=="constructor"&&(_e||!te.call(de,Mt))||ze.push(Mt);return ze}function jl(de,_e,ze,Mt,In){de!==_e&&di(_e,function(tr,Sr){if(In||(In=new bn),Ul(tr))Co(de,_e,Sr,ze,jl,Mt,In);else{var _n=Mt?Mt(zl(de,Sr),tr,Sr+"",de,_e,In):void 0;_n===void 0&&(_n=tr),Gu(de,Sr,_n)}},Wf)}function Co(de,_e,ze,Mt,In,tr,Sr){var _n=zl(de,ze),Er=zl(_e,ze),Xr=Sr.get(Er);if(Xr){Gu(de,ze,Xr);return}var Do=tr?tr(_n,Er,ze+"",de,_e,Sr):void 0,Vl=Do===void 0;if(Vl){var uu=qo(Er),yh=!uu&&Ca(Er),uo=!uu&&!yh&&_g(Er);Do=Er,uu||yh||uo?qo(_n)?Do=_n:qf(_n)?Do=De(_n):yh?(Vl=!1,Do=re(Er)):uo?(Vl=!1,Do=ce(Er)):Do=[]:AE(Er)||_i(Er)?(Do=_n,_i(_n)?Do=Nc(_n):(!Ul(_n)||su(_n))&&(Do=vt(Er))):Vl=!1}Vl&&(Sr.set(Er,Do),In(Do,Er,Mt,tr,Sr),Sr.delete(Er)),Gu(de,ze,Do)}function am(de,_e){return um(ou(de,_e,au),de+"")}var So=en?function(de,_e){return en(de,"toString",{configurable:!0,enumerable:!1,value:Ku(_e),writable:!0})}:au;function re(de,_e){return de.slice()}function xe(de){var _e=new de.constructor(de.byteLength);return new Ne(_e).set(new Ne(de)),_e}function ce(de,_e){var ze=xe(de.buffer);return new de.constructor(ze,de.byteOffset,de.length)}function De(de,_e){var ze=-1,Mt=de.length;for(_e||(_e=Array(Mt));++ze<Mt;)_e[ze]=de[ze];return _e}function Ie(de,_e,ze,Mt){var In=!ze;ze||(ze={});for(var tr=-1,Sr=_e.length;++tr<Sr;){var _n=_e[tr],Er=void 0;Er===void 0&&(Er=de[_n]),In?Ft(ze,_n,Er):Vf(ze,_n,Er)}return ze}function Se(de){return am(function(_e,ze){var Mt=-1,In=ze.length,tr=In>1?ze[In-1]:void 0,Sr=In>2?ze[2]:void 0;for(tr=de.length>3&&typeof tr=="function"?(In--,tr):void 0,Sr&&dn(ze[0],ze[1],Sr)&&(tr=In<3?void 0:tr,In=1),_e=Object(_e);++Mt<In;){var _n=ze[Mt];_n&&de(_e,_n,Mt,tr)}return _e})}function Qe(de){return function(_e,ze,Mt){for(var In=-1,tr=Object(_e),Sr=Mt(_e),_n=Sr.length;_n--;){var Er=Sr[++In];if(ze(tr[Er],Er,tr)===!1)break}return _e}}function ot(de,_e){var ze=de.__data__;return Wt(_e)?ze[typeof _e=="string"?"string":"hash"]:ze.map}function ut(de,_e){var ze=Xe(de,_e);return ri(ze)?ze:void 0}function at(de){var _e=te.call(de,Pt),ze=de[Pt];try{de[Pt]=void 0;var Mt=!0}catch{}var In=be.call(de);return Mt&&(_e?de[Pt]=ze:delete de[Pt]),In}function vt(de){return typeof de.constructor=="function"&&!Yt(de)?Ei(Ze(de)):{}}function Dt(de,_e){var ze=typeof de;return _e=_e??s,!!_e&&(ze=="number"||ze!="symbol"&&q.test(de))&&de>-1&&de%1==0&&de<_e}function dn(de,_e,ze){if(!Ul(ze))return!1;var Mt=typeof _e;return(Mt=="number"?Ta(ze)&&Dt(_e,ze.length):Mt=="string"&&_e in ze)?ys(ze[_e],de):!1}function Wt(de){var _e=typeof de;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?de!=="__proto__":de===null}function Pn(de){return!!le&&le in de}function Yt(de){var _e=de&&de.constructor,ze=typeof _e=="function"&&_e.prototype||Et;return de===ze}function dr(de){var _e=[];if(de!=null)for(var ze in Object(de))_e.push(ze);return _e}function Ao(de){return be.call(de)}function ou(de,_e,ze){return _e=pn(_e===void 0?de.length-1:_e,0),function(){for(var Mt=arguments,In=-1,tr=pn(Mt.length-_e,0),Sr=Array(tr);++In<tr;)Sr[In]=Mt[_e+In];In=-1;for(var _n=Array(_e+1);++In<_e;)_n[In]=Mt[In];return _n[_e]=ze(Sr),Ce(de,this,_n)}}function zl(de,_e){if(!(_e==="constructor"&&typeof de[_e]=="function")&&_e!="__proto__")return de[_e]}var um=Hf(So);function Hf(de){var _e=0,ze=0;return function(){var Mt=Rr(),In=o-(Mt-ze);if(ze=Mt,In>0){if(++_e>=i)return arguments[0]}else _e=0;return de.apply(void 0,arguments)}}function lm(de){if(de!=null){try{return xt.call(de)}catch{}try{return de+""}catch{}}return""}function ys(de,_e){return de===_e||de!==de&&_e!==_e}var _i=Ho(function(){return arguments}())?Ho:function(de){return ao(de)&&te.call(de,"callee")&&!It.call(de,"callee")},qo=Array.isArray;function Ta(de){return de!=null&&cv(de.length)&&!su(de)}function qf(de){return ao(de)&&Ta(de)}var Ca=kn||Pc;function su(de){if(!Ul(de))return!1;var _e=Yi(de);return _e==h||_e==m||_e==l||_e==w}function cv(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=s}function Ul(de){var _e=typeof de;return de!=null&&(_e=="object"||_e=="function")}function ao(de){return de!=null&&typeof de=="object"}function AE(de){if(!ao(de)||Yi(de)!=b)return!1;var _e=Ze(de);if(_e===null)return!0;var ze=te.call(_e,"constructor")&&_e.constructor;return typeof ze=="function"&&ze instanceof ze&&xt.call(ze)==ae}var _g=se?Ue(se):Yu;function Nc(de){return Ie(de,Wf(de))}function Wf(de){return Ta(de)?Bl(de):sm(de)}var fv=Se(function(de,_e,ze){jl(de,_e,ze)});function Ku(de){return function(){return de}}function au(de){return de}function Pc(){return!1}e.exports=fv}(m2,m2.exports)),m2.exports}var wxt=xxt();const y6=Fl(wxt);function JW(e,t){var n;return iE(e)&&t.baseComponents?y6({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function Aue(e,t){return t.components[e]===void 0?null:JW(t.components[e],t)}function fg(){const{studyId:e}=_l();return`${e}`}function Dc(){const{index:e}=_l();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:nC(e)}const Due=Object.assign({"../public/emma-jnd/vistaJND/src/components/vis/HeatmapPlots.tsx":p2e,"../public/emma-jnd/vistaJND/src/components/vis/HeatmapWrapper.tsx":m2e,"../public/emma-jnd/vistaJND/src/components/vis/HexbinPlots.tsx":g2e,"../public/emma-jnd/vistaJND/src/components/vis/HexbinWrapper.tsx":y2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDHeatmap.tsx":v2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDHexbin.tsx":b2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallel.tsx":E2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallelRevised.tsx":_2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatter.tsx":S2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatterRevised.tsx":A2e,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinates.tsx":x2e,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinatesWrapper.tsx":w2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeHeatmap.tsx":D2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeHexbin.tsx":k2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeParallel.tsx":I2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeScatter.tsx":R2e,"../public/emma-jnd/vistaJND/src/components/vis/RadioOptions.tsx":N2e,"../public/emma-jnd/vistaJND/src/components/vis/ScatterPlots.tsx":T2e,"../public/emma-jnd/vistaJND/src/components/vis/ScatterWrapper.tsx":C2e,"../public/emma-jnd/vistaJND/src/components/vis/Windflow.tsx":P2e,"../public/emma-jnd/vistaJND/src/utils/dataGeneration.ts":h2e,"../public/libraries/mic-check/assets/AudioTest.tsx":z2e,"../public/libraries/test/assets/test.tsx":U2e,"../public/test-step-logic/Example.tsx":V2e,"../public/test-step-logic/func.ts":H2e});function Pf(){const{funcIndex:e}=_l(),t=or(g=>g.answers),n=Wd(),r=Dc(),i=m6(),o=Cc(),s=fg(),a=Vs(),{pushToFuncSequence:u,setFuncParams:l}=ls(),[c,f]=P.useState(""),d=P.useMemo(()=>typeof r=="number"?Aue(i[r],n):null,[r,i,n]),h=P.useMemo(()=>{if(typeof r=="number"&&!d){const g=abt(i[r],n.sequence);if(!g)return null;const v=`../public/${g.functionPath}`;return v in Due?Due[v].default:null}return null},[d,r,i,n.sequence]);P.useEffect(()=>{!e&&h&&typeof r=="number"&&o(`/${s}/${ua(r)}/${ua(0)}${window.location.search}`)},[r,e,o,h,s]);const{compName:m,parameters:p}=P.useMemo(()=>{if(typeof r=="number"){if(!Aue(i[r],n)&&h!==null){const{component:v,parameters:b}=h({components:[],answers:t,sequenceSoFar:[],customParameters:{}});return v!==null?{compName:v,parameters:b}:{compName:c,parameters:null}}return{compName:i[r],parameters:null}}return{compName:r.replace("reviewer-",""),parameters:null}},[t,r,i,h,c,n]);return P.useEffect(()=>{typeof r=="number"&&(m===null?o(`/${s}/${ua(r+1)}${window.location.search}`):i[r]!==m&&(e&&a(u({component:m,funcName:i[r],index:r,funcIndex:nC(e)})),a(l(p))),f(m))},[m,r,i,e,o,p,u,l,a,s]),m}function pp(e){return structuredClone(e)}function ZW(){const{funcIndex:e}=_l(),t=m6(),n=Dc(),r=Pf(),i=e&&typeof n=="number"?`${t[n]}_${n}_${r}_${nC(e)}`:`${r}_${n}`;return or(s=>s.answers[i])}const dTe=P.createContext(null);function Ext(){const e=P.useContext(dTe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function oE(){const[e]=Gp();return!!e.get("participantId")}function kue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),o=Object.entries(r.components).find(([a])=>a===i),s=o?o[1]:null;if(!s)throw new Error(`Component ${i} could not be found in the study components.`);return s.correctAnswer?s.correctAnswer.every(a=>e[a.id]===a.answer):!0}function _xt(){const e=Dc(),t=m6(),n=Pf(),r=or(M=>M.trialValidation),i=or(M=>M.sequence),o=or(M=>M.answers),s=or(M=>M.modes),a=or(M=>M.otherTexts),u=Wd(),{funcIndex:l}=_l(),c=l&&typeof e=="number"?`${t[e]}_${e}_${n}_${nC(l)}`:`${n}_${e}`,f=Vs(),{saveTrialAnswer:d,setreactiveAnswers:h,setMatrixAnswersRadio:m,setMatrixAnswersCheckbox:p,resetOtherText:g}=ls(),{storageEngine:v}=Wi(),b=fg(),w=P.useMemo(()=>s.dataCollectionEnabled,[s]),E=cbt(c),_=oE(),T=typeof e!="number"||_||!E,S=ZW(),D=Cc(),k=P.useMemo(()=>Date.now(),[]),R=Ext(),O=P.useCallback((M=!0)=>{if(typeof e!="number")return;const F=pp(r[c]),L=Object.values(F).reduce((G,X)=>Object.hasOwn(X,"values")?{...G,...X.values}:G,{});Object.entries(a).forEach(([G,X])=>{Array.isArray(L[G])&&L[G].includes("__other")&&(L[G]=L[G].filter(ne=>ne!=="__other"),L[G].push(`other:${X}`)),typeof L[G]=="string"&&L[G]==="__other"&&(L[G]=`other:${X}`)});const{provenanceGraph:H}=F,V=Date.now(),{incorrectAnswers:Q,helpButtonClickedCount:K}=S,Z=R&&"current"in R&&R.current?R.current.splice(0,R.current.length):[];if(w&&S.endTime===-1){const G={answer:M?L:{},startTime:k,endTime:V,incorrectAnswers:Q,provenanceGraph:H,windowEvents:Z,timedOut:!M,helpButtonClickedCount:K};f(d({identifier:c,...G})),v&&v.saveAnswers({...o,[c]:G}),f(h({})),f(g()),f(p(null)),f(m(null))}let U=e+1;const B=YW(i,e),q=B!==null&&B.some(G=>Object.hasOwn(G.currentBlock,"skip")&&G.currentBlock.skip!==void 0),z={...o,[c]:{answer:L,startTime:k,endTime:V,provenanceGraph:H,windowEvents:Z}};q&&[...B.flatMap(X=>X.currentBlock.skip?X.currentBlock.skip.map(ne=>({...ne,firstIndex:X.firstIndex,lastIndex:X.lastIndex})):[])].some(X=>{let ne=!1;const ge=Object.fromEntries(Object.entries(z).filter(([ye])=>{const we=parseInt(ye.slice(ye.lastIndexOf("_")+1),10);return we>=X.firstIndex&&we<=e})),me=X.check!=="block"?Object.entries(ge).filter(([ye])=>ye.slice(0,ye.lastIndexOf("_"))===X.name):Object.entries(ge);if(me.length===0)return!1;if(me.some(([ye,we])=>!we))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(X,null,2)}`);if(X.check==="response"||X.check==="responses"){const[ye,we]=me[0];X.check==="response"?ne=X.comparison==="equal"?X.value===we.answer[X.responseId]:X.value!==we.answer[X.responseId]:ne=!kue(we.answer,ye,u.components[ye.slice(0,ye.lastIndexOf("_"))],u)}else if(X.check==="block"||X.check==="repeatedComponent"){if(me.length<X.value)return!1;const ye=me.map(([se,Ce])=>kue(Ce.answer,se,u.components[se.slice(0,se.lastIndexOf("_"))],u)),we=ye.filter(se=>se).length,fe=ye.length-we;ne=X.condition==="numCorrect"&&we===X.value||X.condition==="numIncorrect"&&fe===X.value}if(ne){const ye=t.indexOf(X.to),we=ye===-1?ubt(i,X.to):-1;return U=ye===-1?we:ye,!0}return!1}),D(l?`/${b}/${ua(e)}/${ua(nC(l)+1)}${window.location.search}`:`/${b}/${ua(U)}${window.location.search}`)},[e,r,c,a,S,R,w,i,o,k,l,D,b,f,d,v,h,g,p,m,u,t]);return{isNextDisabled:T,goToNextStep:O}}function Txt({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:o}=_xt(),s=Wd(),a=Cc(),u=P.useCallback(()=>{n&&n(),o()},[o,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=P.useState(void 0);P.useEffect(()=>{let m=0;const p=setInterval(()=>{m+=100,d(m)},100);return()=>{clearInterval(p)}},[]),P.useEffect(()=>{f&&l&&f>=l&&s.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,s.uiConfig.timeoutReject]);const h=P.useMemo(()=>{const m=l&&f?f<=l:!0,p=f?f>=c:!0;return m&&p},[l,c,f]);return P.useEffect(()=>{const m=p=>{p.key==="Enter"&&!t&&!i&&h&&o()};return s.uiConfig.nextOnEnter?(window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}):()=>{}},[t,i,h,o,s.uiConfig.nextOnEnter]),C.jsxs(C.Fragment,{children:[C.jsx(At,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&C.jsxs(ap,{mt:"md",title:"Please wait",color:"blue",icon:C.jsx(uH,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?C.jsxs(ap,{mt:"md",title:"Next button disables soon",color:"yellow",icon:C.jsx(B2,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!s.uiConfig.timeoutReject&&C.jsxs(ap,{mt:"md",title:"Next button disabled",color:"red",icon:C.jsx(B2,{}),children:["The next button has timed out and is now disabled.",C.jsx(Cr,{justify:"right",mt:"sm",children:C.jsx(At,{onClick:()=>o(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function Cxt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Sxt=typeof window<"u"?P.useLayoutEffect:P.useEffect;function ws(e,t){Sxt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Axt(e,t){e&&Cxt(e),ws(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),ws(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),ws(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),ws(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),ws(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),ws(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),ws(`mantine-form:${e}:clear-errors`,t.clearErrors),ws(`mantine-form:${e}:reset`,t.reset),ws(`mantine-form:${e}:validate`,t.validate),ws(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),ws(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),ws(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),ws(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),ws(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),ws(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),ws(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),ws(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Dxt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function tj(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function kxt(e){const[t,n]=P.useState(tj(e)),r=P.useRef(t),i=P.useCallback(u=>{n(l=>{const c=tj(typeof u=="function"?u(l):u);return r.current=c,c})},[]),o=P.useCallback(()=>i({}),[]),s=P.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=P.useCallback((u,l)=>{l==null||l===!1?s(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:o,setFieldError:a,clearFieldError:s}}function nj(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Iue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Rue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let o=n;r===-1&&(o=nj(`${i}.${t}`,o));const s={...o},a=new Set;return Object.entries(o).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Iue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Iue(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);s[f]=l,a.add(f),a.has(u)||delete s[u]}),s}function Ixt(e,{from:t,to:n},r){const i=`${e}.${t}`,o=`${e}.${n}`,s={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,o)),a.startsWith(o)&&(u=a.replace(o,i),l=a),u&&l){const c=s[u],f=s[l];return f===void 0?delete s[u]:s[u]=f,c===void 0?delete s[l]:s[l]=c,!1}return!0}),s}function Nue(e,t,n){typeof n.value=="object"&&(n.value=$b(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function $b(e){if(typeof e!="object")return e;var t=0,n,r,i,o=Object.prototype.toString.call(e);if(o==="[object Object]"?i=Object.create(e.__proto__||null):o==="[object Array]"?i=Array(e.length):o==="[object Set]"?(i=new Set,e.forEach(function(s){i.add($b(s))})):o==="[object Map]"?(i=new Map,e.forEach(function(s,a){i.set($b(a),$b(s))})):o==="[object Date]"?i=new Date(+e):o==="[object RegExp]"?i=new RegExp(e.source,e.flags):o==="[object DataView]"?i=new e.constructor($b(e.buffer)):o==="[object ArrayBuffer]"?i=e.slice(0):o.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Nue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Nue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function hTe(e){return typeof e!="string"?[]:e.split(".")}function Rs(e,t){const n=hTe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function TS(e,t,n){const r=hTe(e);if(r.length===0)return n;const i=$b(n);if(r.length===1)return i[r[0]]=t,i;let o=i[r[0]];for(let s=1;s<r.length-1;s+=1){if(o===void 0)return i;o=o[r[s]]}return o[r[r.length-1]]=t,i}function Rxt(e,{from:t,to:n},r){const i=Rs(e,r);if(!Array.isArray(i))return r;const o=[...i],s=i[t];return o.splice(t,1),o.splice(n,0,s),TS(e,o,r)}function Nxt(e,t,n,r){const i=Rs(e,r);if(!Array.isArray(i))return r;const o=[...i];return o.splice(typeof n=="number"?n:o.length,0,t),TS(e,o,r)}function Pxt(e,t,n){const r=Rs(e,n);return Array.isArray(r)?TS(e,r.filter((i,o)=>o!==t),n):n}function Oxt(e,t,n,r){const i=Rs(e,r);if(!Array.isArray(i)||i.length<=n)return r;const o=[...i];return o[n]=t,TS(e,o,r)}function Fxt({$values:e,$errors:t,$status:n}){const r=P.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Ixt(a,u,l)),e.setValues({values:Rxt(a,u,e.refValues.current),updateState:!0})},[]),i=P.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Rue(a,u,l,-1)),e.setValues({values:Pxt(a,u,e.refValues.current),updateState:!0})},[]),o=P.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>Rue(a,l,c,1)),e.setValues({values:Nxt(a,u,l,e.refValues.current),updateState:!0})},[]),s=P.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:Oxt(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:o,replaceListItem:s}}var rL,Pue;function eG(){return Pue||(Pue=1,rL=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),rL}var Mxt=eG();const g2=Fl(Mxt);function w_(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function $xt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,o]=P.useState(t),[s,a]=P.useState(e),u=P.useRef(t),l=P.useRef(e),c=P.useCallback(T=>{const S=typeof T=="function"?T(u.current):T;u.current=S,n==="controlled"&&o(S)},[]),f=P.useCallback((T,S=!1)=>{const D=typeof T=="function"?T(l.current):T;l.current=D,(n==="controlled"||S)&&a(D)},[]),d=P.useCallback(()=>c({}),[]),h=P.useCallback(T=>{const S=T?{...r.refValues.current,...T}:r.refValues.current;r.setValuesSnapshot(S),f({})},[]),m=P.useCallback((T,S)=>{c(D=>w_(D,T)===S?D:{...D,[T]:S})},[]),p=P.useCallback((T,S,D)=>{f(k=>w_(k,T)===S?k:{...k,[T]:S},D)},[]),g=P.useCallback((T,S)=>{const D=w_(l.current,T),k=!g2(Rs(T,r.getValuesSnapshot()),S),R=nj(T,l.current);R[T]=k,f(R,D!==k)},[]),v=P.useCallback(T=>w_(u.current,T),[]),b=P.useCallback(T=>f(S=>{if(typeof T!="string")return S;const D=nj(T,S);return delete D[T],g2(D,S)?S:D}),[]),w=P.useCallback(T=>{if(T){const D=Rs(T,l.current);if(typeof D=="boolean")return D;const k=Rs(T,r.refValues.current),R=Rs(T,r.valuesSnapshot.current);return!g2(k,R)}return Object.keys(l.current).length>0?w_(l.current):!g2(r.refValues.current,r.valuesSnapshot.current)},[]),E=P.useCallback(()=>l.current,[]),_=P.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:s,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:v,setFieldTouched:m,setFieldDirty:p,setTouchedState:o,setDirtyState:a,clearFieldDirty:b,isDirty:w,getDirty:E,getTouched:_,setCalculatedFieldDirty:g}}function Lxt({initialValues:e,onValuesChange:t,mode:n}){const r=P.useRef(!1),[i,o]=P.useState(e||{}),s=P.useRef(i),a=P.useRef(i),u=P.useCallback(({values:p,subscribers:g,updateState:v=!0,mergeWithPreviousValues:b=!0})=>{const w=s.current,E=p instanceof Function?p(s.current):p,_=b?{...w,...E}:E;s.current=_,v&&o(_),t==null||t(_,w),g==null||g.filter(Boolean).forEach(T=>T({updatedValues:_,previousValues:w}))},[t]),l=P.useCallback(p=>{var b;const g=Rs(p.path,s.current),v=p.value instanceof Function?p.value(g):p.value;if(g!==v){const w=s.current,E=TS(p.path,v,s.current);u({values:E,updateState:p.updateState}),(b=p.subscribers)==null||b.filter(Boolean).forEach(_=>_({path:p.path,updatedValues:E,previousValues:w}))}},[u]),c=P.useCallback(p=>{a.current=p},[]),f=P.useCallback((p,g)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),g())},[u]),d=P.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=P.useCallback(()=>s.current,[]),m=P.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:s,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:m}}function Bxt({$status:e}){const t=P.useRef({}),n=P.useCallback((i,o)=>{P.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(o),()=>{t.current[i]=t.current[i].filter(s=>s!==o)}),[o])},[]),r=P.useCallback(i=>t.current[i]?t.current[i].map(o=>s=>o({previousValue:Rs(i,s.previousValues),value:Rs(i,s.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Oue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Fue(e){const t=tj(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function rj(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,o)=>{const s=e[o],a=`${n===""?"":`${n}.`}${o}`,u=Rs(a,t);let l=!1;return typeof s=="function"&&(i[a]=s(u,t,a)),typeof s=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>rj(s,t,`${a}.${f}`,i))),typeof s=="object"&&typeof u=="object"&&u!==null&&(l||rj(s,t,a,i)),i},r)}function ij(e,t){return Fue(typeof e=="function"?e(t):rj(e,t))}function dk(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=ij(t,n),i=Object.keys(r.errors).find(o=>e.split(".").every((s,a)=>s===o.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const jxt="__MANTINE_FORM_INDEX__";function Mue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${jxt}`)):!1:!1}function pTe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:o={},clearInputErrorOnChange:s=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=p=>p,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:m="change"}={}){const p=kxt(r),g=Lxt({initialValues:n,onValuesChange:l,mode:t}),v=$xt({initialDirty:i,initialTouched:o,$values:g,mode:t}),b=Fxt({$values:g,$errors:p,$status:v}),w=Bxt({$status:v}),[E,_]=P.useState(0),[T,S]=P.useState({}),[D,k]=P.useState(!1),R=P.useCallback(()=>{g.resetValues(),p.clearErrors(),v.resetDirty(),v.resetTouched(),t==="uncontrolled"&&_(X=>X+1)},[]),O=P.useCallback(X=>{s&&p.clearErrors(),t==="uncontrolled"&&_(ne=>ne+1),Object.keys(w.subscribers.current).forEach(ne=>{const ge=Rs(ne,g.refValues.current),me=Rs(ne,X);ge!==me&&w.getFieldSubscribers(ne).forEach(ye=>ye({previousValues:X,updatedValues:g.refValues.current}))})},[s]),M=P.useCallback(X=>{const ne=g.refValues.current;g.initialize(X,()=>t==="uncontrolled"&&_(ge=>ge+1)),O(ne)},[O]),F=P.useCallback((X,ne,ge)=>{const me=Mue(X,a),ye=ne instanceof Function?ne(Rs(X,g.refValues.current)):ne;v.setCalculatedFieldDirty(X,ye),m==="change"&&v.setFieldTouched(X,!0),!me&&s&&p.clearFieldError(X),g.setFieldValue({path:X,value:ne,updateState:t==="controlled",subscribers:[...w.getFieldSubscribers(X),me?we=>{const fe=dk(X,d,we.updatedValues);fe.hasError?p.setFieldError(X,fe.error):p.clearFieldError(X)}:null,(ge==null?void 0:ge.forceUpdate)!==!1&&t!=="controlled"?()=>S(we=>({...we,[X]:(we[X]||0)+1})):null]})},[l,d]),L=P.useCallback(X=>{const ne=g.refValues.current;g.setValues({values:X,updateState:t==="controlled"}),O(ne)},[l,O]),H=P.useCallback(()=>{const X=ij(d,g.refValues.current);return p.setErrors(X.errors),X},[d]),V=P.useCallback(X=>{const ne=dk(X,d,g.refValues.current);return ne.hasError?p.setFieldError(X,ne.error):p.clearFieldError(X),ne},[d]),Q=(X,{type:ne="input",withError:ge=!0,withFocus:me=!0,...ye}={})=>{const fe={onChange:Dxt(se=>F(X,se,{forceUpdate:!1})),"data-path":Oue(e,X)};return ge&&(fe.error=p.errorsState[X]),ne==="checkbox"?fe[t==="controlled"?"checked":"defaultChecked"]=Rs(X,g.refValues.current):fe[t==="controlled"?"value":"defaultValue"]=Rs(X,g.refValues.current),me&&(fe.onFocus=()=>v.setFieldTouched(X,!0),fe.onBlur=()=>{if(Mue(X,u)){const se=dk(X,d,g.refValues.current);se.hasError?p.setFieldError(X,se.error):p.clearFieldError(X)}}),Object.assign(fe,f==null?void 0:f({inputProps:fe,field:X,options:{type:ne,withError:ge,withFocus:me,...ye},form:G}))},K=(X,ne)=>ge=>{h==="always"&&(ge==null||ge.preventDefault());const me=H();if(me.hasErrors)h==="validation-failed"&&(ge==null||ge.preventDefault()),ne==null||ne(me.errors,g.refValues.current,ge);else{const ye=X==null?void 0:X(c(g.refValues.current),ge);ye instanceof Promise&&(k(!0),ye.finally(()=>k(!1)))}},Z=X=>c(X||g.refValues.current),U=P.useCallback(X=>{X.preventDefault(),R()},[]),B=P.useCallback(X=>X?!dk(X,d,g.refValues.current).hasError:!ij(d,g.refValues.current).hasErrors,[d]),q=X=>`${E}-${X}-${T[X]||0}`,z=P.useCallback(X=>document.querySelector(`[data-path="${Oue(e,X)}"]`),[]),G={watch:w.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:M,setValues:L,setFieldValue:F,submitting:D,setSubmitting:k,errors:p.errorsState,setErrors:p.setErrors,setFieldError:p.setFieldError,clearFieldError:p.clearFieldError,clearErrors:p.clearErrors,resetDirty:v.resetDirty,setTouched:v.setTouched,setDirty:v.setDirty,isTouched:v.isTouched,resetTouched:v.resetTouched,isDirty:v.isDirty,getTouched:v.getTouched,getDirty:v.getDirty,reorderListItem:b.reorderListItem,insertListItem:b.insertListItem,removeListItem:b.removeListItem,replaceListItem:b.replaceListItem,reset:R,validate:H,validateField:V,getInputProps:Q,onSubmit:K,onReset:U,isValid:B,getTransformedValues:Z,key:q,getInputNode:z};return Axt(e,G),G}function zxt(e,t){const n=t;return r=>typeof r!="string"?n:e.test(r)?null:n}function Uxt(e){return zxt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function mTe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Vxt=new URLSearchParams(window.location.search),Hxt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{let o="";r.paramCapture?o=Vxt.get(r.paramCapture):r.type==="reactive"?o=[]:r.type==="matrix-radio"||r.type==="matrix-checkbox"?o=Object.fromEntries(r.questionOptions.map(a=>[a,""])):r.type==="slider"&&r.startingValue&&(o=r.startingValue.toString());const s=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:o,...s}}}),{...n}},qxt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(o=>o!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const o=[...n.requiredValue].sort(),s=[...r].sort();return o.every((a,u)=>a===s[u])?null:"Incorrect input"}return n.type==="checkbox"?mTe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function Wxt(e,t,n){const[r,i]=P.useState(null),o=pTe({initialValues:Hxt(e,n),validate:qxt(e)});return P.useEffect(()=>{r!==t&&(i(t),o.reset())},[r,o,t]),o}function G1(e,t,n){var s;const{requiredValue:r,requiredLabel:i}=e;let o="";return t.checked&&Array.isArray(r)?o=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?o=mTe(e,t.checked):o=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(s=n.find(a=>a.value===r))==null?void 0:s.label:r.toString())} to continue.`:null,o}function gTe({horizontal:e,children:t,style:n}){return e?C.jsx(Cr,{mt:je(4),gap:"lg",style:n,children:t}):C.jsx(Un,{gap:"md",style:n,children:t})}function Gxt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(w=>typeof w=="string"?{value:w,label:w}:w),[d,h]=P.useState(!1),[m,p]=P.useState(""),{setOtherText:g}=ls(),v=Vs();P.useEffect(()=>{v(g({key:e.id,value:m}))},[m,e.id,g,v]);const b=P.useMemo(()=>G1(e,n,f),[e,n,f]);return C.jsxs(ca.Group,{label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:o,required:s})})]}),description:u,...n,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[C.jsx(Re,{mt:"xs",children:C.jsxs(gTe,{horizontal:!!l,style:{flexGrow:1},children:[f.map(w=>C.jsx(ca,{disabled:t,value:w.value,label:w.label},w.value)),c&&C.jsx(ca,{disabled:t,value:"__other",checked:d,onClick:w=>h(w.currentTarget.checked),label:l?"Other":C.jsx(Vr,{mt:-8,placeholder:"Other",disabled:!d,value:m,onChange:w=>p(w.currentTarget.value)})},"__other")]})}),l&&c&&C.jsx(Vr,{mt:"sm",placeholder:"Other",disabled:!d,value:m,onChange:w=>p(w.currentTarget.value),w:216})]})}function Yxt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return C.jsx(Pw,{disabled:t,label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:s,required:a})})]}),description:l,placeholder:o,data:c,radius:"md",size:"md",...n,error:G1(e,n,c)})}function Kxt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:o,secondaryText:s}=e;return C.jsx(Vr.Wrapper,{label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:i,required:o})})]}),description:s,size:"md",children:t.value&&C.jsx(cf,{children:Array.isArray(t.value)?t.value.map(a=>C.jsx(cf.Item,{children:a},a)):C.jsx(cf.Item,{children:t.value})})})}function yTe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:o}){const{prompt:s,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,m=u.map(_=>typeof _=="string"?{value:_,label:_}:_),[p,g]=P.useState(!1),[v,b]=P.useState(""),{setOtherText:w}=ls(),E=Vs();return P.useEffect(()=>{E(w({key:e.id,value:v}))},[v,e.id,w,E]),C.jsxs(lc.Group,{name:`radioInput${e.id}`,label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:s,required:a})})]}),description:f,...n,error:G1(e,n,m),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[C.jsxs(Cr,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?C.jsx(Ye,{children:l}):null,C.jsxs(gTe,{horizontal:!!d,style:{flexGrow:1},children:[m.map(_=>C.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":je(12),flex:o?1:"unset",alignItems:"center"},children:[d&&C.jsx(Ye,{size:"sm",children:_.label}),C.jsx(lc,{disabled:t,value:_.value,label:_.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&C.jsx(Ye,{size:"sm",children:_.label})]},`${_.value}-${e.id}`)),h&&C.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":je(12),flex:o?1:"unset",alignItems:"center"},children:[d&&C.jsx(Ye,{size:"sm",children:"Other"}),C.jsx(lc,{disabled:t,value:"other",checked:p,onClick:_=>g(_.currentTarget.checked),label:!d&&C.jsx(Vr,{mt:-8,placeholder:"Other",disabled:!p,value:v,onChange:_=>b(_.currentTarget.value)}),mt:0})]})]}),C.jsx(Ye,{children:c})]}),d&&h&&C.jsx(Vr,{mt:"sm",placeholder:"Other",disabled:!p,value:v,onChange:_=>b(_.currentTarget.value),w:216})]},e.id)}function Xxt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:o}=e,s=[];for(let u=1;u<=+o;u+=1)s.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:s,horizontal:!0};return C.jsx(yTe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Qxt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,min:a,max:u,placeholder:l,secondaryText:c}=e;return C.jsx(OV,{disabled:t,placeholder:l,label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:o,required:s})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:G1(e,n)})}const Jxt="_markLabel_18a7j_1",Zxt={markLabel:Jxt};function ewt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,options:a,secondaryText:u,snap:l}=e,[c,f]=P.useMemo(()=>[Math.min(...a.map(h=>h.value)),Math.max(...a.map(h=>h.value))],[a]),d=G1(e,n);return C.jsx(Vr.Wrapper,{label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:o,required:s})})]}),description:u,error:d,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:C.jsx(zV,{disabled:t,marks:a,min:c,max:f,...n,h:40,mt:4,classNames:{markLabel:Zxt.markLabel},restrictToMarks:l,label:h=>l?null:h})})}function twt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,secondaryText:u}=e;return C.jsx(Kh,{disabled:t,placeholder:o,label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:s,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:G1(e,n)})}function nwt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,secondaryText:u}=e;return C.jsx(wV,{disabled:t,placeholder:o,label:C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:s,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:G1(e,n)})}function rwt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:o,disabled:s}){return C.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>C.jsx(ca,{disabled:s,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>o(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function iwt({_choices:e,_n:t,idx:n,question:r,response:i,answer:o,onChange:s,disabled:a}){return C.jsx(lc.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>s(u,r.label),value:o.value[r.label],children:C.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>C.jsx(lc,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function owt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:o,setMatrixAnswersCheckbox:s}=ls(),a=Vs(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,m=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(E=>({value:E,label:E})):u.map(E=>typeof E=="string"?{value:E,label:E}:E),p=l.map(E=>typeof E=="string"?{value:E,label:E}:E),g=(E,_)=>{const T={type:"radio",questionKey:_,val:E,responseId:e.id};a(o(T))},v=(E,_,T)=>{const S=E.target.checked,D={questionKey:_,responseId:e.id,value:T.value,label:T.label,isChecked:S,choiceOptions:m};a(s(D))},b=m.length,w=p.length;return C.jsxs(C.Fragment,{children:[C.jsxs(Lt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&C.jsx(Re,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),C.jsx(Re,{style:{display:"block"},className:"no-last-child-bottom-padding",children:C.jsx(ya,{text:c,required:d})})]}),C.jsx(Ye,{c:"dimmed",size:"sm",mt:0,children:f}),C.jsxs(Re,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[C.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),C.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${b}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:m.map((E,_)=>C.jsx(Ye,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${_}-label`))}),C.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w}, 1fr)`},children:p.map((E,_)=>C.jsx(Ye,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:E.label},`question-${_}-label`))}),C.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w},1fr)`},children:p.map((E,_)=>C.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?C.jsx(iwt,{disabled:r,idx:_,question:E,answer:t,_choices:m,_n:b,onChange:g,response:e}):C.jsx(rwt,{disabled:r,idx:_,question:E,answer:t,_choices:m,_n:b,onChange:v})},`question-${_}`))})]})]})}function swt({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:o}){const s=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=Gp(),c=Wd().uiConfig.enumerateQuestions??!1,f=P.useMemo(()=>{if(e.paramCapture){const m=u.get(e.paramCapture);return a||!!m}return a},[a,e.paramCapture,u]),[d,h]=P.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return P.useEffect(()=>{o.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||o.setFieldValue(e.id,"false")},[d,e.id]),C.jsxs(Re,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&C.jsx(Qxt,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="shortText"&&C.jsx(twt,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="longText"&&C.jsx(nwt,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="likert"&&C.jsx(Xxt,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="dropdown"&&C.jsx(Yxt,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="slider"&&C.jsx(ewt,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="radio"&&C.jsx(yTe,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="checkbox"&&C.jsx(Gxt,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="reactive"&&C.jsx(Kxt,{response:e,answer:s,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&C.jsx(owt,{disabled:f||d,response:e,answer:s,index:r,enumerateQuestions:c}),e.withDontKnow&&C.jsx(ca,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:m=>h(m.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&C.jsx(I1,{mt:"xl",mb:"xs"})]})}function sP({config:e,location:t,status:n,style:r}){var U;const{storageEngine:i}=Wi(),o=Vs(),{updateResponseBlockValidation:s,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=ls(),c=Dc(),f=Pf(),d=n==null?void 0:n.answer,h=fg(),m=Cc(),p=e,g=P.useMemo(()=>{var B;return((B=p==null?void 0:p.response)==null?void 0:B.filter(q=>q.location?q.location===t:t==="belowStimulus"))||[]},[p==null?void 0:p.response,t]),v=P.useMemo(()=>g.map(B=>({...B,required:B.required===void 0?!0:B.required})),[g]),b=Wxt(v,c,d||{}),[w,E]=P.useState(void 0),_=or(B=>B.reactiveAnswers),T=or(B=>B.reactiveProvenance),S=or(B=>B.matrixAnswers),D=(p==null?void 0:p.provideFeedback)&&(((U=p==null?void 0:p.correctAnswer)==null?void 0:U.length)||0)>0,k=(p==null?void 0:p.allowFailedTraining)===void 0?!0:p.allowFailedTraining,[R,O]=P.useState(0),M=(p==null?void 0:p.trainingAttempts)||2,[F,L]=P.useState(!1),H=t===((p==null?void 0:p.nextButtonLocation)||"belowStimulus");P.useEffect(()=>{const B=v.find(q=>q.type==="reactive");if(_&&B){const q=B.id;b.setValues({...b.values,[q]:_[q]})}},[_]),P.useEffect(()=>{T&&E(T)},[T]),P.useEffect(()=>{const B=v.filter(q=>q.type==="matrix-radio"||q.type==="matrix-checkbox");if(S&&B.length>0){const q={...b.values};B.forEach(z=>{const{id:G}=z;q[G]={...b.getInputProps(G).value,...S[G]}}),b.setValues(q)}},[S]),P.useEffect(()=>{o(s({location:t,identifier:`${f}_${c}`,status:b.isValid(),values:pp(b.values),provenanceGraph:w}))},[b.values,f,c,t,o,s,w]);const[V,Q]=P.useState(Object.fromEntries(v.map(B=>[B.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),K=(B,q,z,G,X)=>{Q(ne=>({...ne,[B]:{visible:q,title:z,message:G,color:X}}))},Z=()=>{const B=R+1;O(B);const q=Object.fromEntries(v.map(z=>{var ne,ge;const G=(ge=(ne=p.correctAnswer)==null?void 0:ne.find(me=>me.id===z.id))==null?void 0:ge.answer,X=b.values[z.id];return[z.id,Array.isArray(X)?typeof G=="string"?X.length===1&&G===X[0]:X.length===G.length&&X.every(me=>G.includes(me)):G===X]}));D&&(v.forEach(z=>{var G;if(q[z.id]&&!((G=V[z.id])!=null&&G.message.includes("You've failed to answer this question correctly")))K(z.id,!0,"Correct Answer","You have answered the question correctly.","green");else{o(u({question:`${f}_${c}`,identifier:z.id,answer:b.values[z.id]}));let X="";M===-1?X="Please try again.":B>=M?(X=`You didn't answer this question correctly after ${M} attempts. ${k?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!k&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{m("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{m("./../__trainingFailed")},5e3)})):M-B===1?X="Please try again. You have 1 attempt left.":X=`Please try again. You have ${M-B} attempts left.`,K(z.id,!0,"Incorrect Answer",X,"red")}}),L(k&&B>=M||Object.values(q).every(z=>z)&&B<=M))};return C.jsxs("div",{style:r,children:[v.map((B,q)=>{var G,X;const z=(X=(G=p.correctAnswer)==null?void 0:G.find(ne=>ne.id===B.id))==null?void 0:X.answer;return C.jsx(ur.Fragment,{children:B.hidden?"":C.jsxs(C.Fragment,{children:[C.jsx(swt,{storedAnswer:d,answer:{...b.getInputProps(B.id,{type:B.type==="checkbox"?"checkbox":"input"})},response:B,index:q+1,configInUse:p,form:b}),V[B.id].visible&&C.jsxs(ap,{mb:"md",title:V[B.id].title,color:V[B.id].color,children:[V[B.id].message," ",V[B.id].message.includes("Please try again")&&C.jsxs(C.Fragment,{children:[C.jsx("br",{}),C.jsx("br",{}),"If you're unsure"," ",C.jsx(Sw,{style:{fontSize:14},onClick:()=>{o(a()),o(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),C.jsx("br",{}),C.jsx("br",{}),R>=M&&M>=0&&z&&` The correct answer was: ${z}.`]})]})},`${B.id}-${c}`)}),C.jsxs(Cr,{justify:"right",gap:"xs",children:[D&&H&&C.jsx(At,{onClick:()=>Z(),disabled:!b.isValid()||R>=M&&M>=0,children:"Check Answer"}),H&&C.jsx(Txt,{disabled:D&&!F||!b.isValid(),label:p.nextButtonText||"Next",configInUse:p})]})]})}const E_="@REVISIT_COMMS",awt={minHeight:"500px",width:"100%",border:0};function uwt({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=ls(),r=Vs(),i=xxe(),o=P.useRef(null),s=P.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Pf(),u=P.useCallback((l,c)=>{var f,d;(d=(f=o.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${E_}/${l}`,iframeId:s,message:c},"*")},[o,s]);return P.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&s===f.iframeId)switch(f.type){case`${E_}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${E_}/READY`:o.current&&(o.current.style.height=`${f.message.documentHeight}px`);break;case`${E_}/ANSWERS`:r(t(f.message));break;case`${E_}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,s,e,u,t,n]),C.jsx("iframe",{ref:o,src:e.path.startsWith("http")?e.path:`${us}${e.path}?trialid=${a}&id=${s}`,style:awt})}async function tG(e){const n=await(await fetch(`${us}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function lwt(e){const t=await fetch(`${us}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function I0({email:e,path:t}){const n=Tc();return C.jsxs(Cp,{fluid:!0,my:50,maw:800,mx:"auto",children:[C.jsx(Ui,{order:2,children:C.jsx(Ye,{span:!0,c:"orange",children:"404"})}),C.jsxs(Ye,{children:[C.jsx(Ye,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),C.jsx(ml,{h:"lg"}),C.jsxs(cf,{children:[C.jsx(cf.Item,{children:C.jsx(Ye,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),C.jsx(cf.Item,{children:C.jsxs(Ye,{children:["If you're a participant, please contact the study administrator"," ",e&&C.jsxs(C.Fragment,{children:["at"," ",C.jsxs(Sw,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const cwt={maxWidth:"100%"};function fwt({currentConfig:e}){const t={...cwt,...e.style},[n,r]=P.useState(!0),[i,o]=P.useState(!1);return P.useEffect(()=>{async function s(){const a=await tG(e.path);o(!!a),r(!1)}s()},[e]),n||i?C.jsx(eg,{mx:"auto",src:`${us}${e.path}`,style:t}):C.jsx(I0,{path:e.path})}class dwt extends ur.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?C.jsx(Ye,{children:this.state.error.toString()}):this.props.children}}const $ue=Object.assign({"../public/emma-jnd/vistaJND/src/components/vis/HeatmapPlots.tsx":p2e,"../public/emma-jnd/vistaJND/src/components/vis/HeatmapWrapper.tsx":m2e,"../public/emma-jnd/vistaJND/src/components/vis/HexbinPlots.tsx":g2e,"../public/emma-jnd/vistaJND/src/components/vis/HexbinWrapper.tsx":y2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDHeatmap.tsx":v2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDHexbin.tsx":b2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallel.tsx":E2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallelRevised.tsx":_2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatter.tsx":S2e,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatterRevised.tsx":A2e,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinates.tsx":x2e,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinatesWrapper.tsx":w2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeHeatmap.tsx":D2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeHexbin.tsx":k2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeParallel.tsx":I2e,"../public/emma-jnd/vistaJND/src/components/vis/PracticeScatter.tsx":R2e,"../public/emma-jnd/vistaJND/src/components/vis/RadioOptions.tsx":N2e,"../public/emma-jnd/vistaJND/src/components/vis/ScatterPlots.tsx":T2e,"../public/emma-jnd/vistaJND/src/components/vis/ScatterWrapper.tsx":C2e,"../public/emma-jnd/vistaJND/src/components/vis/Windflow.tsx":P2e,"../public/emma-jnd/vistaJND/src/utils/dataGeneration.ts":h2e,"../public/libraries/mic-check/assets/AudioTest.tsx":z2e,"../public/libraries/test/assets/test.tsx":U2e,"../public/test-step-logic/Example.tsx":V2e,"../public/test-step-logic/func.ts":H2e});function hwt({currentConfig:e,provState:t}){const n=Dc(),r=Pf(),i=or(d=>d.funcParams),o=`../public/${e.path}`,s=o in $ue?$ue[o].default:null,a=Vs(),{updateResponseBlockValidation:u,setreactiveAnswers:l}=ls(),c=P.useCallback(({status:d,provenanceGraph:h,answers:m})=>{a(u({location:"sidebar",identifier:`${r}_${n}`,status:d,values:m,provenanceGraph:h})),a(l(m))},[r,n,l,a,u]),f=P.useMemo(()=>i!==void 0?i:e.parameters,[e.parameters,i]);return C.jsx(P.Suspense,{fallback:C.jsx("div",{children:"Loading..."}),children:s?C.jsx(dwt,{children:C.jsx(s,{parameters:f,setAnswer:c,provenanceState:t})}):C.jsx(I0,{path:e.path})})}function pwt({currentConfig:e}){const[t,n]=P.useState(""),[r,i]=P.useState(!0);return P.useEffect(()=>{async function o(){const s=await tG(e.path);s!==void 0&&n(s),i(!1)}o()},[e.path]),r||t?C.jsx(ya,{text:t}):C.jsx(I0,{path:e.path})}function vTe(){const e=Dc(),{setAlertModal:t}=ls(),n=Vs();P.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Lue=Object.prototype.hasOwnProperty;function Bue(e,t,n){for(n of e.keys())if(oT(n,t))return n}function oT(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&oT(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Bue(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Bue(t,i),!i)||!oT(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Lue.call(e,n)&&++r&&!Lue.call(t,n)||!(n in t)||!oT(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function mwt(e){var t=P.useRef(e),n=P.useRef(0);return oT(e,t.current)||(t.current=e,n.current+=1),P.useMemo(function(){return t.current},[n.current])}function gwt(e,t){return P.useEffect(e,mwt(t))}const aP=(e,t=null)=>{const[n,r]=P.useState("idle"),[i,o]=P.useState(null),[s,a]=P.useState(null),u=P.useRef(null),l=P.useRef(!1);P.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=P.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(o(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(o(null),a(h),r("error")),h});return u.current=d,d},[e]);return gwt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:s}};function bTe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(s=>s!==void 0).filter(([s,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let s=i+1;s<n.length;s+=1)if(n[s][2]==="visible"){r+=n[s][0]-n[i][0],i=s;break}}i+=1}return t?t-r:void 0}const ywt="_root_1spq0_1",vwt="_description_1spq0_9",bwt="_title_1spq0_10",xwt="_closeButton_1spq0_14",wwt={root:ywt,description:vwt,title:bwt,closeButton:xwt},rC=e=>{const{title:t,message:n,color:r}=e;P1.show({title:t,message:n,position:"top-center",classNames:wwt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},jue=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],xTe=["participantId","trialId","trialOrder","responseId"];function nG(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Ewt(e,t,n){const r=(Object.entries(e.answers).filter(([i,o])=>o.endTime!==-1).length/(wf(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,o])=>{const s=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[s],l=iE(u)&&u.baseComponent&&n.baseComponents?y6({},n.baseComponents[u.baseComponent],u):u,c=o.endTime===-1?void 0:o.endTime-o.startTime,f=bTe(o);return Object.entries(o.answer).map(([h,m])=>{var v,b;const p={participantId:e.participantId,trialId:s,trialOrder:a,responseId:h},g=l.response.find(w=>w.id===h);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(p.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(p.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(p.answer=m),t.includes("correctAnswer")){const w=(b=(v=l.correctAnswer)==null?void 0:v.find(E=>E.id===h))==null?void 0:b.answer;p.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(p.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(p.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(p.startTime=new Date(o.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(o.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("cleanedDuration")&&(p.cleanedDuration=f),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()]}async function _wt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...xTe,...e],o=[...new Set(t.map(c=>c.participantConfigHash))],s=await n.getAllConfigsFromHash(o,r),a=i,l=(await Promise.all(t.map(async c=>await Ewt(c,i,s[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Twt({opened:e,close:t,filename:n,data:r,studyId:i}){const[o,s]=P.useState([...jue].filter(m=>m!=="meta")),a=Wi(),{value:u,status:l,error:c}=aP(_wt,[o,r,a.storageEngine,i]),f=P.useCallback(()=>{if(!u)return;const m=[u.header.join(","),...u.rows.map(p=>u.header.map(g=>`"${`${p[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);nG(m,n)},[n,u]),d=P.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),rC({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=P.useMemo(()=>{if(!u)return"";const m=u.rows.length>5?5:u.rows.length,p=m===1?"":"s";return`This is a preview of the first ${p?m:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return C.jsxs(Ni,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[C.jsx(RV,{searchable:!0,nothingFoundMessage:"Property not found",data:[...jue],value:o,onChange:m=>s(m),label:"Included optional columns:",leftSection:C.jsx(mze,{}),variant:"filled"}),C.jsx(ml,{h:"md"}),C.jsxs(Re,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?C.jsxs(tn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[C.jsx(tn.Thead,{children:C.jsx(tn.Tr,{children:u.header.map(m=>C.jsx(tn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(m)?200:void 0},children:C.jsxs(Lt,{direction:"row",justify:"space-between",align:"center",children:[m,!xTe.includes(m)&&C.jsx(Q0,{onClick:()=>s(o.filter(p=>p!==m)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:C.jsx(WC,{size:16})})]})},m))})}),C.jsx(tn.Tbody,{children:u.rows.slice(0,5).map((m,p)=>C.jsx(tn.Tr,{children:u.header.map(g=>C.jsx(tn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:m[g]},`${p}-${g}`))},p))})]}):l==="error"&&c?C.jsx(ap,{variant:"light",children:c.message}):null,C.jsx(El,{visible:l==="pending"||l==="idle"})]}),C.jsx(ml,{h:"sm"}),C.jsx(Lt,{justify:"center",fz:"sm",c:"dimmed",children:C.jsx(Ye,{children:h})}),C.jsx(ml,{h:"md"}),C.jsxs(Cr,{justify:"right",children:[C.jsx(At,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),C.jsx(At,{leftSection:C.jsx(nye,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&C.jsx(At,{onClick:d,children:C.jsx(ize,{})})]})]})}function Cwt(){const e=Wd(),{storageEngine:t}=Wi(),n=or(w=>w.answers),r=oE(),[i,o]=P.useState(!1);P.useEffect(()=>{if(r){o(!0);return}const w=setInterval(async()=>{await t.verifyCompletion(n)&&(o(!0),clearInterval(w))},1e3)},[]),vTe();const[s,a]=P.useState(),[u,l]=P.useState(""),c=e.studyMetadata.title.replace(" ","_");P.useEffect(()=>{async function w(){if(t){const E=await t.getCurrentParticipantId(),_=await t.getParticipantData();l(E),a(_)}}w()},[t]);const f=P.useCallback(async()=>{nG(JSON.stringify(s,null,2),`${c}_${u}.json`)},[c,s,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[m,p]=P.useState(Math.floor(h/1e3));P.useEffect(()=>{if(i){const w=setInterval(()=>{p(E=>E-1)},1e3);return m<=0?(d&&f(),clearInterval(w),()=>clearInterval(w)):()=>clearInterval(w)}return()=>{}},[d,i,m,f]);const g=fg(),[v,b]=P.useState(!1);return P.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(g);b(E.dataCollectionEnabled)}})()},[t,g]),C.jsx(Ir,{style:{height:"100%"},children:C.jsx(Lt,{direction:"column",children:i||!v?e.uiConfig.studyEndMsg?C.jsx(ya,{text:e.uiConfig.studyEndMsg}):C.jsx(Ye,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):C.jsxs(C.Fragment,{children:[C.jsx(Ye,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),C.jsx(ml,{h:"lg"}),C.jsx(Ir,{children:C.jsx(th,{color:"blue"})})]})})})}function Swt(){return C.jsx(Ye,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function Awt(){return C.jsx(Ye,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const zue={};function oj(e,t){e===void 0&&(e=zue),t===void 0&&(t=zue);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Dwt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kwt=Object.prototype.hasOwnProperty;function sj(e,t){return kwt.call(e,t)}function aj(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)sj(e,i)&&r.push(i);return r}function hl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function uj(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function sy(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function wTe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function lj(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(lj(e[t]))return!0}else if(typeof e=="object"){for(var r=aj(e),i=r.length,o=0;o<i;o++)if(lj(e[r[o]]))return!0}}return!1}function Uue(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var ETe=function(e){Dwt(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,Uue(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=Uue(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),Li=ETe,Iwt=hl,Lb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=uP(n,this.path);r&&(r=hl(r));var i=Fy(n,{op:"remove",path:this.from}).removed;return Fy(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=uP(n,this.from);return Fy(n,{op:"add",path:this.path,value:hl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:iC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Rwt={add:function(e,t,n){return uj(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Lb.move,copy:Lb.copy,test:Lb.test,_get:Lb._get};function uP(e,t){if(t=="")return e;var n={op:"_get",path:t};return Fy(e,n),n.value}function Fy(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):lP(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=uP(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=iC(e,t.value),s.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Li("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=hl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=lP;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=wTe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&m(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!uj(h))throw new Li("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);uj(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Li("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=Rwt[t.op].call(t,l,h,e);if(s.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Lb[t.op].call(t,l,h,e);if(s.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Li("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function v6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Li("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=hl(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Fy(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function Nwt(e,t,n){var r=Fy(e,t);if(r.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function lP(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Li("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Lb[e.op]){if(typeof e.path!="string")throw new Li("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Li('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Li("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Li("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&lj(e.value))throw new Li("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Li("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Li("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=_Te([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Li("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Li("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function _Te(e,t,n){try{if(!Array.isArray(e))throw new Li("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)v6(hl(t),hl(e),n||!0);else{n=n||lP;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Li)return i;throw i}}function iC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!iC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!iC(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const Pwt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Li,_areEquals:iC,applyOperation:Fy,applyPatch:v6,applyReducer:Nwt,deepClone:Iwt,getValueByPointer:uP,validate:_Te,validator:lP},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var rG=new WeakMap,Owt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Fwt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Mwt(e){return rG.get(e)}function $wt(e,t){return e.observers.get(t)}function Lwt(e,t){e.observers.delete(t.callback)}function Bwt(e,t){t.unobserve()}function jwt(e,t){var n=[],r,i=Mwt(e);if(!i)i=new Owt(e),rG.set(e,i);else{var o=$wt(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=hl(e),t){r.callback=t,r.next=null;var s=function(){cj(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){cj(r),clearTimeout(r.next),Lwt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Fwt(t,r)),r}function cj(e,t){t===void 0&&(t=!1);var n=rG.get(e.object);iG(n.value,e.object,e.patches,"",t),e.patches.length&&v6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function iG(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=aj(t),s=aj(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(sj(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?iG(c,f,n,r+"/"+sy(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+sy(l),value:hl(c)}),n.push({op:"replace",path:r+"/"+sy(l),value:hl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+sy(l),value:hl(c)}),n.push({op:"remove",path:r+"/"+sy(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!sj(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+sy(l),value:hl(t[l])})}}}function zwt(e,t,n){n===void 0&&(n=!1);var r=[];return iG(e,t,r,"",n),r}const Uwt=Object.freeze(Object.defineProperty({__proto__:null,compare:zwt,generate:cj,observe:jwt,unobserve:Bwt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Pwt,Uwt,{JsonPatchError:ETe,deepClone:hl,escapePathComponent:sy,unescapePathComponent:wTe});const Vwt=/("(?:[^\\"]|\\.)*")|[:,]/g;function iL(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function o(s,a,u){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const l=JSON.stringify(s,i);if(l===void 0)return l;const c=r-a.length-u;if(l.length<=c){const f=l.replace(Vwt,(d,h)=>h||`${d} `);if(f.length<=c)return f}if(i!=null&&(s=JSON.parse(l),i=void 0),typeof s=="object"&&s!==null){const f=a+n,d=[];let h=0,m,p;if(Array.isArray(s)){m="[",p="]";const{length:g}=s;for(;h<g;h++)d.push(o(s[h],f,h===g-1?0:1)||"null")}else{m="{",p="}";const g=Object.keys(s),{length:v}=g;for(;h<v;h++){const b=g[h],w=`${JSON.stringify(b)}: `,E=o(s[b],f,w.length+(h===v-1?0:1));E!==void 0&&d.push(w+E)}}if(d.length>0)return[m,n+d.join(`,
${f}`),p].join(`
${a}`)}return l}(e,"",0)}function Xp(e,t,n){return e.fields=t||[],e.fname=n,e}function Hwt(e){return e==null?null:e.fname}function TTe(e){return e==null?null:e.fields}function CTe(e){return e.length===1?qwt(e[0]):Wwt(e)}const qwt=e=>function(t){return t[e]},Wwt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function YR(e){throw Error(e)}function oG(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||YR("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&YR("Access path missing closing bracket: "+e),r&&YR("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function sG(e,t,n){const r=oG(e);return e=r.length===1?r[0]:e,Xp((n&&n.get||CTe)(r),[e],t||e)}const Gwt=sG("id"),aG=Xp(e=>e,[],"identity"),Ywt=Xp(()=>0,[],"zero"),Kwt=Xp(()=>1,[],"one"),Xwt=Xp(()=>!0,[],"true"),Qwt=Xp(()=>!1,[],"false");function Jwt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const STe=0,ATe=1,DTe=2,kTe=3,ITe=4;function Zwt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jwt,r=e||STe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=ATe&&n(t||"error","ERROR",arguments),this},warn(){return r>=DTe&&n(t||"warn","WARN",arguments),this},info(){return r>=kTe&&n(t||"log","INFO",arguments),this},debug(){return r>=ITe&&n(t||"log","DEBUG",arguments),this}}}var b6=Array.isArray;function n1(e){return e===Object(e)}const Vue=e=>e!=="__proto__";function uG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=eEt(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;x6(r,o,i[o],s)}return r},{})}function x6(e,t,n,r){if(!Vue(t))return;let i,o;if(n1(n)&&!b6(n)){o=n1(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?x6(o,i,n[i]):Vue(i)&&(o[i]=n[i])}else e[t]=n}function eEt(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function sE(e){return e[e.length-1]}function lG(e){return e==null||e===""?null:+e}const RTe=e=>t=>e*Math.exp(t),NTe=e=>t=>Math.log(e*t),PTe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),OTe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,cP=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function w6(e,t,n,r){const i=n(e[0]),o=n(sE(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function tEt(e,t){return w6(e,t,lG,aG)}function nEt(e,t){var n=Math.sign(e[0]);return w6(e,t,NTe(n),RTe(n))}function rEt(e,t,n){return w6(e,t,cP(n),cP(1/n))}function iEt(e,t,n){return w6(e,t,PTe(n),OTe(n))}function E6(e,t,n,r,i){const o=r(e[0]),s=r(sE(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function oEt(e,t,n){return E6(e,t,n,lG,aG)}function sEt(e,t,n){const r=Math.sign(e[0]);return E6(e,t,n,NTe(r),RTe(r))}function aEt(e,t,n,r){return E6(e,t,n,cP(r),cP(1/r))}function uEt(e,t,n,r){return E6(e,t,n,PTe(r),OTe(r))}function lEt(e){return 1+~~(new Date(e).getMonth()/3)}function cEt(e){return 1+~~(new Date(e).getUTCMonth()/3)}function oC(e){return e!=null?b6(e)?e:[e]:[]}function fEt(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function _6(e){return typeof e=="function"}const dEt="descending";function hEt(e,t,n){n=n||{},t=oC(t)||[];const r=[],i=[],o={},s=n.comparator||pEt;return oC(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===dEt?-1:1),i.push(a=_6(a)?a:sG(a,null,n)),(TTe(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Xp(s(i,r),Object.keys(o))}const cG=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),pEt=(e,t)=>e.length===1?mEt(e[0],t[0]):gEt(e,t,e.length),mEt=(e,t)=>function(n,r){return cG(e(n),e(r))*t},gEt=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=cG(o(r),o(i));return s*t[a]});function yEt(e){return _6(e)?e:()=>e}function vEt(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function fG(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function bEt(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function xEt(e,t){const n=e.length;let r=-1,i,o,s,a,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}return[a,u]}const wEt=Object.prototype.hasOwnProperty;function Gh(e,t){return wEt.call(e,t)}const hk={};function EEt(e){let t={},n;function r(o){return Gh(t,o)&&t[o]!==hk}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===hk&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=hk),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const u=t[a];u!==hk&&(!n||!n(u))&&(o[a]=u,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function _Et(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=sE(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function TEt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),fG(r,n)}function CEt(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function FTe(e){return typeof e=="boolean"}function MTe(e){return Object.prototype.toString.call(e)==="[object Date]"}function SEt(e){return e&&_6(e[Symbol.iterator])}function $Te(e){return typeof e=="number"}function AEt(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mp(e){return typeof e=="string"}function DEt(e,t,n){e&&(e=t?oC(e).map(a=>a.replace(/\\(.)/g,"$1")):oC(e));const r=e&&e.length,i=n&&n.get||CTe,o=a=>i(t?[a]:oG(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Xp(s,e,"key")}function kEt(e,t){const n=e[0],r=sE(e),i=+t;return i?i===1?r:n+i*(r-n):n}const IEt=1e4;function REt(e){e=+e||IEt;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>Gh(t,s)||Gh(n,s),get:s=>Gh(t,s)?t[s]:Gh(n,s)?o(s,n[s]):void 0,set:(s,a)=>Gh(t,s)?t[s]=a:o(s,a)}}function NEt(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,u=0,l=0;for(;a<i&&u<o;++l)s[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)s[l]=t[a];for(;u<o;++u,++l)s[l]=n[u];return s}function y2(e,t){let n="";for(;--t>=0;)n+=e;return n}function PEt(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?y2(i,s)+o:r==="center"?y2(i,~~(s/2))+o+y2(i,Math.ceil(s/2)):o+y2(i,s)}function OEt(e){return e&&sE(e)-e[0]||0}function rx(e){return b6(e)?"["+e.map(rx)+"]":n1(e)||mp(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function FEt(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const MEt=e=>$Te(e)||MTe(e)?e:Date.parse(e);function $Et(e,t){return t=t||MEt,e==null||e===""?null:t(e)}function LEt(e){return e==null||e===""?null:e+""}function BEt(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function jEt(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function zEt(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function Ml(e,t,n){return e.fields=t||[],e.fname=n,e}function Zi(e){return e==null?null:e.fname}function Ka(e){return e==null?null:e.fields}function LTe(e){return e.length===1?UEt(e[0]):VEt(e)}const UEt=e=>function(t){return t[e]},VEt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function tt(e){throw Error(e)}function dG(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||tt("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&tt("Access path missing closing bracket: "+e),r&&tt("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function Ef(e,t,n){const r=dG(e);return e=r.length===1?r[0]:e,Ml((n&&n.get||LTe)(r),[e],t||e)}const T6=Ef("id"),Fu=Ml(e=>e,[],"identity"),py=Ml(()=>0,[],"zero"),CS=Ml(()=>1,[],"one"),_f=Ml(()=>!0,[],"true"),Bg=Ml(()=>!1,[],"false");function HEt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const qEt=0,BTe=1,WEt=2,GEt=3,YEt=4;function KEt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HEt,r=e||qEt;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=BTe&&n("error","ERROR",arguments),this},warn(){return r>=WEt&&n("warn","WARN",arguments),this},info(){return r>=GEt&&n("log","INFO",arguments),this},debug(){return r>=YEt&&n("log","DEBUG",arguments),this}}}var Kt=Array.isArray;function Nn(e){return e===Object(e)}const Hue=e=>e!=="__proto__";function XEt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=QEt(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;jTe(r,o,i[o],s)}return r},{})}function jTe(e,t,n,r){if(!Hue(t))return;let i,o;if(Nn(n)&&!Kt(n)){o=Nn(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?jTe(o,i,n[i]):Hue(i)&&(o[i]=n[i])}else e[t]=n}function QEt(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function sr(e){return e[e.length-1]}function qa(e){return e==null||e===""?null:+e}const zTe=e=>t=>e*Math.exp(t),UTe=e=>t=>Math.log(e*t),VTe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),HTe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,fP=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function C6(e,t,n,r){const i=n(e[0]),o=n(sr(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function JEt(e,t){return C6(e,t,qa,Fu)}function ZEt(e,t){var n=Math.sign(e[0]);return C6(e,t,UTe(n),zTe(n))}function e_t(e,t,n){return C6(e,t,fP(n),fP(1/n))}function t_t(e,t,n){return C6(e,t,VTe(n),HTe(n))}function S6(e,t,n,r,i){const o=r(e[0]),s=r(sr(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function qTe(e,t,n){return S6(e,t,n,qa,Fu)}function WTe(e,t,n){const r=Math.sign(e[0]);return S6(e,t,n,UTe(r),zTe(r))}function fj(e,t,n,r){return S6(e,t,n,fP(r),fP(1/r))}function GTe(e,t,n,r){return S6(e,t,n,VTe(r),HTe(r))}function n_t(e){return 1+~~(new Date(e).getMonth()/3)}function r_t(e){return 1+~~(new Date(e).getUTCMonth()/3)}function rn(e){return e!=null?Kt(e)?e:[e]:[]}function i_t(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Bn(e){return typeof e=="function"}const o_t="descending";function YTe(e,t,n){n=n||{},t=rn(t)||[];const r=[],i=[],o={},s=n.comparator||s_t;return rn(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===o_t?-1:1),i.push(a=Bn(a)?a:Ef(a,null,n)),(Ka(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Ml(s(i,r),Object.keys(o))}const A6=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),s_t=(e,t)=>e.length===1?a_t(e[0],t[0]):u_t(e,t,e.length),a_t=(e,t)=>function(n,r){return A6(e(n),e(r))*t},u_t=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=A6(o(r),o(i));return s*t[a]});function Za(e){return Bn(e)?e:()=>e}function KTe(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function On(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Mp(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function l_t(e,t){const n=e.length;let r=-1,i,o,s,a,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}return[a,u]}function hn(e,t){return Object.hasOwn(e,t)}const pk={};function SS(e){let t={},n;function r(o){return hn(t,o)&&t[o]!==pk}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===pk&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=pk),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const u=t[a];u!==pk&&(!n||!n(u))&&(o[a]=u,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function c_t(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=sr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function Tt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),On(r,n)}function v2(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function f_t(e){return typeof e=="boolean"}function My(e){return Object.prototype.toString.call(e)==="[object Date]"}function d_t(e){return e&&Bn(e[Symbol.iterator])}function r1(e){return typeof e=="number"}function h_t(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function bi(e){return typeof e=="string"}function XTe(e,t,n){e&&(e=t?rn(e).map(a=>a.replace(/\\(.)/g,"$1")):rn(e));const r=e&&e.length,i=n&&n.get||LTe,o=a=>i(t?[a]:dG(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ml(s,e,"key")}function p_t(e,t){const n=e[0],r=sr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const m_t=1e4;function g_t(e){e=+e||m_t;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>hn(t,s)||hn(n,s),get:s=>hn(t,s)?t[s]:hn(n,s)?o(s,n[s]):void 0,set:(s,a)=>hn(t,s)?t[s]=a:o(s,a)}}function y_t(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,u=0,l=0;for(;a<i&&u<o;++l)s[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)s[l]=t[a];for(;u<o;++u,++l)s[l]=n[u];return s}function mk(e,t){let n="";for(;--t>=0;)n+=e;return n}function v_t(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?mk(i,s)+o:r==="center"?mk(i,~~(s/2))+o+mk(i,Math.ceil(s/2)):o+mk(i,s)}function D6(e){return e&&sr(e)-e[0]||0}function nn(e){return Kt(e)?"["+e.map(nn)+"]":Nn(e)||bi(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function QTe(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const b_t=e=>r1(e)||My(e)?e:Date.parse(e);function JTe(e,t){return t=t||b_t,e==null||e===""?null:t(e)}function ZTe(e){return e==null||e===""?null:e+""}function Gd(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function x_t(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function ay(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function w_t(e){return e}function E_t(e){if(e==null)return w_t;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;l<c;)f[l]=a[l],++l;return f}}function __t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function T_t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return que(e,n)})}:que(e,t)}function que(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=eCe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function eCe(e,t){var n=E_t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,m=d.length;h<m;++h)f.push(n(d[h],h));c<0&&__t(f,m)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function C_t(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,m;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,m=r[d]){delete r[m.start];var p=m===h?h:h.concat(m);r[p.start=h.start]=i[p.end=m.end]=p}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,m=i[f]){delete i[m.end];var g=m===h?h:m.concat(h);r[g.start=m.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function S_t(e){return eCe(e,A_t.apply(this,arguments))}function A_t(e,t,n){var r,i,o;if(arguments.length>1)r=D_t(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:C_t(e,r)}}function D_t(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Ls="year",Mu="quarter",pa="month",Fo="week",$u="date",la="day",Yd="dayofyear",Dl="hours",kl="minutes",mc="seconds",Tf="milliseconds",hG=[Ls,Mu,pa,Fo,$u,la,Yd,Dl,kl,mc,Tf],oL=hG.reduce((e,t,n)=>(e[t]=1+n,e),{});function pG(e){const t=rn(e).slice(),n={};return t.length||tt("Missing time unit."),t.forEach(i=>{hn(oL,i)?n[i]=1:tt(`Invalid time unit: ${i}.`)}),(n[Fo]||n[la]?1:0)+(n[Mu]||n[pa]||n[$u]?1:0)+(n[Yd]?1:0)>1&&tt(`Incompatible time units: ${e}`),t.sort((i,o)=>oL[i]-oL[o]),t}const k_t={[Ls]:"%Y ",[Mu]:"Q%q ",[pa]:"%b ",[$u]:"%d ",[Fo]:"W%U ",[la]:"%a ",[Yd]:"%j ",[Dl]:"%H:00",[kl]:"00:%M",[mc]:":%S",[Tf]:".%L",[`${Ls}-${pa}`]:"%Y-%m ",[`${Ls}-${pa}-${$u}`]:"%Y-%m-%d ",[`${Dl}-${kl}`]:"%H:%M"};function tCe(e,t){const n=On({},k_t,t),r=pG(e),i=r.length;let o="",s=0,a,u;for(s=0;s<i;)for(a=r.length;a>s;--a)if(u=r.slice(s,a).join("-"),n[u]!=null){o+=n[u],s=a;break}return o.trim()}const my=new Date;function mG(e){return my.setFullYear(e),my.setMonth(0),my.setDate(1),my.setHours(0,0,0,0),my}function nCe(e){return iCe(new Date(e))}function rCe(e){return dj(new Date(e))}function iCe(e){return dp.count(mG(e.getFullYear())-1,e)}function dj(e){return tE.count(mG(e.getFullYear())-1,e)}function hj(e){return mG(e).getDay()}function I_t(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function oCe(e){return aCe(new Date(e))}function sCe(e){return pj(new Date(e))}function aCe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return l0.count(t-1,e)}function pj(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return nE.count(t-1,e)}function mj(e){return my.setTime(Date.UTC(e,0,1)),my.getUTCDay()}function R_t(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function uCe(e,t,n,r,i){const o=t||1,s=sr(e),a=(v,b,w)=>(w=w||v,N_t(n[w],r[w],v===s&&o,b)),u=new Date,l=Gd(e),c=l[Ls]?a(Ls):Za(2012),f=l[pa]?a(pa):l[Mu]?a(Mu):py,d=l[Fo]&&l[la]?a(la,1,Fo+la):l[Fo]?a(Fo,1):l[la]?a(la,1):l[$u]?a($u,1):l[Yd]?a(Yd,1):CS,h=l[Dl]?a(Dl):py,m=l[kl]?a(kl):py,p=l[mc]?a(mc):py,g=l[Tf]?a(Tf):py;return function(v){u.setTime(+v);const b=c(u);return i(b,f(u),d(u,b),h(u),m(u),p(u),g(u))}}function N_t(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Gx(e,t,n){return t+e*7-(n+6)%7}const P_t={[Ls]:e=>e.getFullYear(),[Mu]:e=>Math.floor(e.getMonth()/3),[pa]:e=>e.getMonth(),[$u]:e=>e.getDate(),[Dl]:e=>e.getHours(),[kl]:e=>e.getMinutes(),[mc]:e=>e.getSeconds(),[Tf]:e=>e.getMilliseconds(),[Yd]:e=>iCe(e),[Fo]:e=>dj(e),[Fo+la]:(e,t)=>Gx(dj(e),e.getDay(),hj(t)),[la]:(e,t)=>Gx(1,e.getDay(),hj(t))},O_t={[Mu]:e=>3*e,[Fo]:(e,t)=>Gx(e,0,hj(t))};function lCe(e,t){return uCe(e,t||1,P_t,O_t,I_t)}const F_t={[Ls]:e=>e.getUTCFullYear(),[Mu]:e=>Math.floor(e.getUTCMonth()/3),[pa]:e=>e.getUTCMonth(),[$u]:e=>e.getUTCDate(),[Dl]:e=>e.getUTCHours(),[kl]:e=>e.getUTCMinutes(),[mc]:e=>e.getUTCSeconds(),[Tf]:e=>e.getUTCMilliseconds(),[Yd]:e=>aCe(e),[Fo]:e=>pj(e),[la]:(e,t)=>Gx(1,e.getUTCDay(),mj(t)),[Fo+la]:(e,t)=>Gx(pj(e),e.getUTCDay(),mj(t))},M_t={[Mu]:e=>3*e,[Fo]:(e,t)=>Gx(e,0,mj(t))};function cCe(e,t){return uCe(e,t||1,F_t,M_t,R_t)}const $_t={[Ls]:Vd,[Mu]:XT.every(3),[pa]:XT,[Fo]:tE,[$u]:dp,[la]:dp,[Yd]:dp,[Dl]:YO,[kl]:WO,[mc]:np,[Tf]:$x},L_t={[Ls]:Hd,[Mu]:QT.every(3),[pa]:QT,[Fo]:nE,[$u]:l0,[la]:l0,[Yd]:l0,[Dl]:KO,[kl]:GO,[mc]:np,[Tf]:$x};function aE(e){return $_t[e]}function uE(e){return L_t[e]}function fCe(e,t,n){return e?e.offset(t,n):void 0}function dCe(e,t,n){return fCe(aE(e),t,n)}function hCe(e,t,n){return fCe(uE(e),t,n)}function pCe(e,t,n,r){return e?e.range(t,n,r):void 0}function mCe(e,t,n,r){return pCe(aE(e),t,n,r)}function gCe(e,t,n,r){return pCe(uE(e),t,n,r)}const b2=1e3,x2=b2*60,w2=x2*60,k6=w2*24,B_t=k6*7,Wue=k6*30,gj=k6*365,yCe=[Ls,pa,$u,Dl,kl,mc,Tf],E2=yCe.slice(0,-1),_2=E2.slice(0,-1),T2=_2.slice(0,-1),j_t=T2.slice(0,-1),z_t=[Ls,Fo],Gue=[Ls,pa],vCe=[Ls],__=[[E2,1,b2],[E2,5,5*b2],[E2,15,15*b2],[E2,30,30*b2],[_2,1,x2],[_2,5,5*x2],[_2,15,15*x2],[_2,30,30*x2],[T2,1,w2],[T2,3,3*w2],[T2,6,6*w2],[T2,12,12*w2],[j_t,1,k6],[z_t,1,B_t],[Gue,1,Wue],[Gue,3,3*Wue],[vCe,1,gj]];function bCe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(D6(t))/n;let i=Jw(a=>a[2]).right(__,r),o,s;return i===__.length?(o=vCe,s=S0(t[0]/gj,t[1]/gj,n)):i?(i=__[r/__[i-1][2]<__[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=yCe,s=Math.max(S0(t[0],t[1],n),1)),{units:o,step:s}}function C2(e){const t={};return n=>t[n]||(t[n]=e(n))}function U_t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=V_t(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function V_t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function xCe(e){const t=C2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Qy(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return U_t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=Qy(s??",f");const a=S0(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=Rwe(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Nwe(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=Iwe(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}let yj;wCe();function wCe(){return yj=xCe({format:jO,formatPrefix:eW})}function ECe(e){return xCe(kwe(e))}function dP(e){return arguments.length?yj=ECe(e):yj}function Yue(e,t,n){n=n||{},Nn(n)||tt(`Invalid time multi-format specifier: ${n}`);const r=t(mc),i=t(kl),o=t(Dl),s=t($u),a=t(Fo),u=t(pa),l=t(Mu),c=t(Ls),f=e(n[Tf]||".%L"),d=e(n[mc]||":%S"),h=e(n[kl]||"%I:%M"),m=e(n[Dl]||"%I %p"),p=e(n[$u]||n[la]||"%a %d"),g=e(n[Fo]||"%b %d"),v=e(n[pa]||"%B"),b=e(n[Mu]||"%B"),w=e(n[Ls]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:o(E)<E?h:s(E)<E?m:u(E)<E?a(E)<E?p:g:c(E)<E?l(E)<E?v:b:w)(E)}function _Ce(e){const t=C2(e.format),n=C2(e.utcFormat);return{timeFormat:r=>bi(r)?t(r):Yue(t,aE,r),utcFormat:r=>bi(r)?n(r):Yue(n,uE,r),timeParse:C2(e.parse),utcParse:C2(e.utcParse)}}let vj;TCe();function TCe(){return vj=_Ce({format:mW,parse:HEe,utcFormat:gW,utcParse:qEe})}function CCe(e){return _Ce(BEe(e))}function sC(e){return arguments.length?vj=CCe(e):vj}const bj=(e,t)=>On({},e,t);function SCe(e,t){const n=e?ECe(e):dP(),r=t?CCe(t):sC();return bj(n,r)}function gG(e,t){const n=arguments.length;return n&&n!==2&&tt("defaultLocale expects either zero or two arguments."),n?bj(dP(e),sC(t)):bj(dP(),sC())}function H_t(){return wCe(),TCe(),gG()}const q_t=/^(data:|([A-Za-z]+:)?\/\/)/,W_t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,G_t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Kue="file://";function Y_t(e,t){return n=>({options:n||{},sanitize:X_t,load:K_t,fileAccess:!1,file:Q_t(t),http:Z_t(e)})}async function K_t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function X_t(e,t){t=On({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=W_t.test(e.replace(G_t,""));(e==null||typeof e!="string"||!a)&&tt("Sanitize failure, invalid URI: "+nn(e));const u=q_t.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(Kue))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Kue.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Q_t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):J_t}async function J_t(){tt("No file system access.")}function Z_t(e){return e?async function(t,n){const r=On({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Bn(o[i])?o[i]():o.text():tt(o.status+""+o.statusText)}:e2t}async function e2t(){tt("No HTTP fetch method available.")}const t2t=e=>e!=null&&e===e,n2t=e=>e==="true"||e==="false"||e===!0||e===!1,r2t=e=>!Number.isNaN(Date.parse(e)),ACe=e=>!Number.isNaN(+e)&&!(e instanceof Date),i2t=e=>ACe(e)&&Number.isInteger(+e),xj={boolean:QTe,integer:qa,number:qa,date:JTe,string:ZTe,unknown:Fu},gk=[n2t,i2t,ACe,r2t],o2t=["boolean","integer","number","date"];function DCe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=gk.length,i=gk.map((o,s)=>s+1);for(let o=0,s=0,a,u;o<n;++o)for(u=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&t2t(u)&&!gk[a](u)&&(i[a]=0,++s,s===gk.length))return"string";return o2t[i.reduce((o,s)=>o===0?s:o,0)-1]}function kCe(e,t){return t.reduce((n,r)=>(n[r]=DCe(e,r),n),{})}function Xue(e){const t=function(n,r){const i={delimiter:e};return yG(n,r?On(r,i):i)};return t.responseType="text",t}function yG(e,t){return t.header&&(e=t.header.map(nn).join(t.delimiter)+`
`+e),ilt(t.delimiter).parse(e+"")}yG.responseType="text";function s2t(e){return typeof Buffer=="function"&&Bn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function vG(e,t){const n=t&&t.property?Ef(t.property):Fu;return Nn(e)&&!s2t(e)?a2t(n(e),t):n(JSON.parse(e))}vG.responseType="json";function a2t(e,t){return!Kt(e)&&d_t(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const u2t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function ICe(e,t){let n,r,i,o;return e=vG(e,t),t&&t.feature?(n=T_t,i=t.feature):t&&t.mesh?(n=S_t,i=t.mesh,o=u2t[t.filter]):tt("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):tt("Invalid TopoJSON object: "+i),r&&r.features||[r]}ICe.responseType="json";const KR={dsv:yG,csv:Xue(","),tsv:Xue("	"),json:vG,topojson:ICe};function bG(e,t){return arguments.length>1?(KR[e]=t,this):hn(KR,e)?KR[e]:null}function RCe(e){const t=bG(e);return t&&t.responseType||"text"}function NCe(e,t,n,r){t=t||{};const i=bG(t.type||"json");return i||tt("Unknown data format type: "+t.type),e=i(e,t),t.parse&&l2t(e,t.parse,n,r),hn(e,"columns")&&delete e.columns,e}function l2t(e,t,n,r){if(!e.length)return;const i=sC();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,u,l,c,f;t==="auto"&&(t=kCe(e,o)),o=Object.keys(t);const d=o.map(h=>{const m=t[h];let p,g;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return p=m.split(/:(.+)?/,2),g=p[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(p[0]==="utc"?r:n)(g);if(!xj[m])throw Error("Illegal format pattern: "+h+":"+m);return xj[m]});for(u=0,c=e.length,f=o.length;u<c;++u)for(s=e[u],l=0;l<f;++l)a=o[l],s[a]=d[l](s[a])}const I6=Y_t(typeof fetch<"u"&&fetch,null);function R6(e){const t=e||Fu,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function XR(e,t){try{await t(e)}catch(n){e.error(n)}}const PCe=Symbol("vega_id");let c2t=1;function N6(e){return!!(e&&Qt(e))}function Qt(e){return e[PCe]}function OCe(e,t){return e[PCe]=t,e}function Tr(e){const t=e===Object(e)?e:{data:e};return Qt(t)?t:OCe(t,c2t++)}function xG(e){return P6(e,Tr({}))}function P6(e,t){for(const n in e)t[n]=e[n];return t}function FCe(e,t){return OCe(t,Qt(e))}function Y1(e,t){return e?t?(n,r)=>e(n,r)||Qt(t(n))-Qt(t(r)):(n,r)=>e(n,r)||Qt(n)-Qt(r):null}function MCe(e){return e&&e.constructor===K1}function K1(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:K1,insert(a){const u=rn(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Bn(a)?r:t,l=rn(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Za(l)};return Bn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Bn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,u){const l={},c={};let f,d,h,m,p,g;for(f=0,d=u.length;f<d;++f)l[Qt(u[f])]=1;for(f=0,d=t.length;f<d;++f)p=t[f],l[Qt(p)]=-1;for(f=0,d=r.length;f<d;++f)m=r[f],u.forEach(b=>{m(b)&&(l[Qt(b)]=-1)});for(f=0,d=e.length;f<d;++f)p=e[f],g=Qt(p),l[g]?l[g]=1:a.add.push(Tr(e[f]));for(f=0,d=u.length;f<d;++f)p=u[f],l[Qt(p)]<0&&a.rem.push(p);function v(b,w,E){E?b[w]=E(b):a.encode=w,s||(c[Qt(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],p=h.tuple,m=h.field,g=l[Qt(p)],g>0&&(v(p,m,h.value),a.modifies(m));for(f=0,d=i.length;f<d;++f)h=i[f],m=h.filter,u.forEach(b=>{m(b)&&l[Qt(b)]>0&&v(b,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?u.filter(b=>l[Qt(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const QR="_:mod:_";function O6(){Object.defineProperty(this,QR,{writable:!0,value:{}})}O6.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[QR];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=Kt(n)?1+n.length:-1),i},modified(e,t){const n=this[QR];if(arguments.length){if(Kt(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[QR]={},this}};let f2t=0;const d2t="pulse",h2t=new O6,p2t=1,m2t=2;function Wr(e,t,n,r){this.id=++f2t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Que(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wr.prototype={targets(){return this._targets||(this._targets=R6(T6))},set(e){return this.value!==e?(this.value=e,1):0},skip:Que(p2t),modified:Que(m2t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new O6,i=this._argops=this._argops||[],o=[];let s,a,u,l;const c=(f,d,h)=>{h instanceof Wr?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===d2t)rn(a).forEach(f=>{f instanceof Wr?f!==this&&(f.targets().add(this),o.push(f)):tt("Pulse parameters must be operator instances.")}),this.source=a;else if(Kt(a))for(r.set(s,-1,Array(u=a.length)),l=0;l<u;++l)c(s,l,a[l]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||h2t,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function g2t(e,t,n,r){let i=1,o;return e instanceof Wr?o=e:e&&e.prototype instanceof Wr?o=new e:Bn(e)?o=new Wr(null,e):(i=0,o=new Wr(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function y2t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let v2t=0;function F6(e,t,n){this.id=++v2t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Rm(e,t,n){return new F6(e,t,n)}F6.prototype={_filter:_f,_apply:Fu,targets(){return this._targets||(this._targets=R6(T6))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Rm(e);return this.targets().add(t),t},apply(e){const t=Rm(null,e);return this.targets().add(t),t},merge(){const e=Rm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Rm();return this.targets().add(Rm(null,null,KTe(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Rm(null,null,()=>n=!0)),t.targets().add(Rm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=_f,this._targets=null}};function b2t(e,t,n,r){const i=this,o=Rm(n,r),s=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=rn(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,s);return o}function x2t(e,t){const n=this.locale();return NCe(e,t,n.timeParse,n.utcParse)}function w2t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function E2t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:RCe(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function _2t(e,t,n){const r=this,i=r._pending||T2t(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(_f).insert(o.data||[])),i.done(),o}function T2t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const C2t={skip:!0};function S2t(e,t,n,r,i){return(e instanceof Wr?D2t:A2t)(this,e,t,n,r,i),this}function A2t(e,t,n,r,i,o){const s=On({},o,C2t);let a,u;Bn(n)||(n=Za(n)),r===void 0?a=l=>e.touch(n(l)):Bn(r)?(u=new Wr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;MCe(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=l=>e.update(n(l),r,s),t.apply(a)}function D2t(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new Wr(null,k2t(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function k2t(e,t){return t=Bn(t)?t:Za(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function I2t(e){e.rank=++this._rank}function R2t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&tt("Cycle detected in dataflow graph.")}const hP={},sd=1,Mm=2,Lh=4,N2t=sd|Mm,Jue=sd|Lh,ob=sd|Mm|Lh,Zue=8,T_=16,ele=32,tle=64;function c0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function sL(e,t){const n=[];return ay(e,t,r=>n.push(r)),n}function nle(e,t){const n={};return e.visit(t,r=>{n[Qt(r)]=1}),r=>n[Qt(r)]?null:r}function yk(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}c0.prototype={StopPropagation:hP,ADD:sd,REM:Mm,MOD:Lh,ADD_REM:N2t,ADD_MOD:Jue,ALL:ob,REFLOW:Zue,SOURCE:T_,NO_SOURCE:ele,NO_FIELDS:tle,fork(e){return new c0(this.dataflow).init(this,e)},clone(){const e=this.fork(ob);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(ob|T_)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new c0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&tle)&&(n.fields=e.fields),t&sd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Mm?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Lh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&ele?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||ob;return t&sd&&this.add.length||t&Mm&&this.rem.length||t&Lh&&this.mod.length},reflow(e){if(e)return this.fork(ob).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Lh,nle(this,sd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Kt(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Kt(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&sd&&(n.addF=yk(n.addF,t)),e&Mm&&(n.remF=yk(n.remF,t)),e&Lh&&(n.modF=yk(n.modF,t)),e&T_&&(n.srcF=yk(n.srcF,t)),n},materialize(e){e=e||ob;const t=this;return e&sd&&t.addF&&(t.add=sL(t.add,t.addF),t.addF=null),e&Mm&&t.remF&&(t.rem=sL(t.rem,t.remF),t.remF=null),e&Lh&&t.modF&&(t.mod=sL(t.mod,t.modF),t.modF=null),e&T_&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&T_)return ay(n.source,n.srcF,r),n;e&sd&&ay(n.add,n.addF,r),e&Mm&&ay(n.rem,n.remF,r),e&Lh&&ay(n.mod,n.modF,r);const i=n.source;if(e&Zue&&i){const o=n.add.length+n.mod.length;o===i.length||(o?ay(i,nle(n,Jue),r):ay(i,n.srcF,r))}return n}};function wG(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const u in s.fields)a[u]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}Tt(wG,c0,{fork(e){const t=new c0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Kt(e)?e.some(r=>n[r]):n[e]:0},filter(){tt("MultiPulse does not support filtering.")},materialize(){tt("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function P2t(e,t,n){const r=this,i=[];if(r._pulse)return $Ce(r);if(r._pending&&await r._pending,t&&await XR(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new c0(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=R6(T6);let s=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=hP),u!==hP&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await XR(r,c[f].callback)}return n&&await XR(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function O2t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function F2t(e,t,n){return this._pulse?$Ce(this):(this.evaluate(e,t,n),this)}function M2t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function $Ce(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function $2t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function L2t(e,t){const n=e.source,r=this._clock;return n&&Kt(n)?new wG(this,r,n.map(i=>i.pulse),t):this._input[e.id]||B2t(this._pulse,n&&n.pulse)}function B2t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==hP&&(e.source=t.source),e)}const EG={skip:!1,force:!1};function j2t(e,t){const n=t||EG;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function z2t(e,t,n){const r=n||EG;return(e.set(t)||r.force)&&this.touch(e,r),this}function U2t(e,t,n){this.touch(e,n||EG);const r=new c0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function V2t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),LCe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,H2t(t,0,e)):r=n,r}}}function LCe(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function H2t(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,LCe(e,r,t,n)}function ix(){this.logger(KEt()),this.logLevel(BTe),this._clock=0,this._rank=0,this._locale=gG();try{this._loader=I6()}catch{}this._touched=R6(T6),this._input={},this._pulse=null,this._heap=V2t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function C_(e){return function(){return this._log[e].apply(this,arguments)}}ix.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:C_("error"),warn:C_("warn"),info:C_("info"),debug:C_("debug"),logLevel:C_("level"),cleanThreshold:1e4,add:g2t,connect:y2t,rank:I2t,rerank:R2t,pulse:U2t,touch:j2t,update:z2t,changeset:K1,ingest:w2t,parse:x2t,preload:_2t,request:E2t,events:b2t,on:S2t,evaluate:P2t,run:F2t,runAsync:O2t,runAfter:M2t,_enqueue:$2t,_getPulse:L2t};function We(e,t){Wr.call(this,e,null,t)}Tt(We,Wr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Yx={};function BCe(e){const t=jCe(e);return t&&t.Definition||null}function jCe(e){return e=e&&e.toLowerCase(),hn(Yx,e)?Yx[e]:null}function*zCe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function _G(e,t,n){const r=Float64Array.from(zCe(e,n));return r.sort(cp),t.map(i=>Dxe(r,i))}function TG(e,t){return _G(e,[.25,.5,.75],t)}function CG(e,t){const n=e.length,r=Lit(e,t),i=TG(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function UCe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,u,l,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const m=c>=0?0:~~(-c/r)+1,p=Math.pow(n,-m-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+p)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var gc=Math.random;function q2t(e){gc=e}function VCe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(zCe(e,r)),o=i.length,s=t;let a,u,l,c;for(l=0,c=Array(s);l<s;++l){for(a=0,u=0;u<o;++u)a+=i[~~(gc()*o)];c[l]=a/o}return c.sort(cp),[JB(c,n/2),JB(c,1-n/2)]}function HCe(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;s<a;++s)o[s]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;s<a;++s)o[s]=l;return n?W2t(o,t+t/4):o}function W2t(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function G2t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Y2t(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*gc())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const qCe=Math.sqrt(2*Math.PI),K2t=Math.SQRT2;let S_=NaN;function M6(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(S_===S_)n=S_,S_=NaN;else{do n=gc()*2-1,r=gc()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,S_=r*o}return e+n*t}function SG(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*qCe)}function $6(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function L6(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*K2t*X2t(2*e-1)}function X2t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function AG(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>M6(n,r),pdf:o=>SG(o,n,r),cdf:o=>$6(o,n,r),icdf:o=>L6(o,n,r)};return i.mean(e).stdev(t)}function DG(e,t){const n=AG();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=CG(e)),i):t},sample(){return e[~~(gc()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function kG(e,t){return e=e||0,t=t??1,Math.exp(e+M6()*t)}function IG(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*qCe*e)}function RG(e,t,n){return $6(Math.log(e),t,n)}function NG(e,t,n){return Math.exp(L6(e,t,n))}function WCe(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>kG(n,r),pdf:o=>IG(o,n,r),cdf:o=>RG(o,n,r),icdf:o=>NG(o,n,r)};return i.mean(e).stdev(t)}function GCe(e,t){let n=0,r;function i(s){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=s[l]==null?1:+s[l];for(l=0;l<n;++l)a[l]/=u;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=gc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(s<u){a=e[l];break}return a.sample()},pdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(s);return a},cdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function PG(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*gc()}function OG(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function FG(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function MG(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function YCe(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>PG(n,r),pdf:o=>OG(o,n,r),cdf:o=>FG(o,n,r),icdf:o=>MG(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function $G(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function AS(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function B6(e,t,n,r){e=e.filter(h=>{let m=t(h),p=n(h);return m!=null&&(m=+m)>=m&&p!=null&&(p=+p)>=p}),r&&e.sort((h,m)=>t(h)-t(m));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)o[a]-=u,s[a]-=l;return[o,s,u,l]}function DS(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function lE(e,t,n,r,i){let o=0,s=0;return DS(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;o+=l*l,s+=c*c}),1-o/s}function LG(e,t,n){let r=0,i=0,o=0,s=0,a=0;DS(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=AS(r,i,o,s),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:lE(e,t,n,i,l)}}function KCe(e,t,n){let r=0,i=0,o=0,s=0,a=0;DS(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=AS(r,i,o,s),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:lE(e,t,n,i,l)}}function XCe(e,t,n){const[r,i,o,s]=B6(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,m;DS(e,t,n,(b,w)=>{d=r[f++],h=Math.log(w),m=d*w,a+=(w*h-a)/f,u+=(m-u)/f,l+=(m*h-l)/f,c+=(d*m-c)/f});const[p,g]=AS(u/s,a/s,l/s,c/s),v=b=>Math.exp(p+g*(b-o));return{coef:[Math.exp(p-g*o),g],predict:v,rSquared:lE(e,t,n,s,v)}}function QCe(e,t,n){let r=0,i=0,o=0,s=0,a=0,u=0;DS(e,t,n,(f,d)=>{const h=Math.log(f),m=Math.log(d);++u,r+=(h-r)/u,i+=(m-i)/u,o+=(h*m-o)/u,s+=(h*h-s)/u,a+=(d-a)/u});const l=AS(r,i,o,s),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:lE(e,t,n,a,c)}}function BG(e,t,n){const[r,i,o,s]=B6(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,m,p,g;for(h=0;h<a;)m=r[h],p=i[h++],g=m*m,u+=(g-u)/h,l+=(g*m-l)/h,c+=(g*g-c)/h,f+=(m*p-f)/h,d+=(g*p-d)/h;const v=c-u*u,b=u*v-l*l,w=(d*u-f*l)/b,E=(f*v-d*l)/b,_=-w*u,T=S=>(S=S-o,w*S*S+E*S+_+s);return{coef:[_-E*o+w*o*o+s,E-2*w*o,w],predict:T,rSquared:lE(e,t,n,s,T)}}function JCe(e,t,n,r){if(r===0)return $G(e,t,n);if(r===1)return LG(e,t,n);if(r===2)return BG(e,t,n);const[i,o,s,a]=B6(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,m,p,g;for(d=0;d<f;++d){for(m=0,p=0;m<u;++m)p+=Math.pow(i[m],d)*o[m];for(l.push(p),g=new Float64Array(f),h=0;h<f;++h){for(m=0,p=0;m<u;++m)p+=Math.pow(i[m],d+h);g[h]=p}c.push(g)}c.push(l);const v=J2t(c),b=w=>{w-=s;let E=a+v[0]+v[1]*w+v[2]*w*w;for(d=3;d<f;++d)E+=v[d]*Math.pow(w,d);return E};return{coef:Q2t(f,v,-s,a),predict:b,rSquared:lE(e,t,n,a,b)}}function Q2t(e,t,n,r){const i=Array(e);let o,s,a,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],u=1,i[o]+=a,s=1;s<=o;++s)u*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*u;return i[0]+=r,i}function J2t(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const rle=2,ile=1e-12;function ZCe(e,t,n,r){const[i,o,s,a]=B6(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=rle;){const m=[0,l-1];for(let g=0;g<u;++g){const v=i[g],b=m[0],w=m[1],E=v-i[b]>i[w]-v?b:w;let _=0,T=0,S=0,D=0,k=0;const R=1/Math.abs(i[E]-v||1);for(let F=b;F<=w;++F){const L=i[F],H=o[F],V=Z2t(Math.abs(v-L)*R)*d[F],Q=L*V;_+=V,T+=Q,S+=H*V,D+=H*Q,k+=L*Q}const[O,M]=AS(T/_,S/_,D/_,k/_);c[g]=O+M*v,f[g]=Math.abs(o[g]-c[g]),eTt(i,g+1,m)}if(h===rle)break;const p=kxe(f);if(Math.abs(p)<ile)break;for(let g=0,v,b;g<u;++g)v=f[g]/(6*p),d[g]=v>=1?ile:(b=1-v*v)*b}return tTt(i,c,s,a)}function Z2t(e){return(e=1-e*e*e)*e*e}function eTt(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function tTt(e,t,n,r){const i=e.length,o=[];let s=0,a=0,u=[],l;for(;s<i;++s)l=e[s]+n,u[0]===l?u[1]+=(t[s]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[s]],o.push(u));return u[1]+=r,o}const nTt=.5*Math.PI/180;function j6(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=p=>[p,e(p)],o=t[0],s=t[1],a=s-o,u=a/r,l=[i(o)],c=[];if(n===r){for(let p=1;p<r;++p)l.push(i(o+p/n*a));return l.push(i(s)),l}else{c.push(i(s));for(let p=n;--p>0;)c.push(i(o+p/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,m=rTt(f[1],c);for(;d;){const p=i((f[0]+d[0])/2);p[0]-f[0]>=u&&iTt(f,p,d,h,m)>nTt?c.push(p):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function rTt(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function iTt(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function oTt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function wj(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:oTt(e)}function eSe(e,t,n){return n||e+(t?"_"+t:"")}const aL=()=>{},sTt={init:aL,add:aL,rem:aL,idx:0},aC={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},kS=Object.keys(aC).filter(e=>e!=="__count__");function aTt(e,t){return(n,r)=>On({name:e,aggregate_param:r,out:n||e},sTt,t)}[...kS,"__count__"].forEach(e=>{aC[e]=aTt(e,aC[e])});function tSe(e,t,n){return aC[e](n,t)}function nSe(e,t){return e.idx-t.idx}function uTt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=aC[i]())})};return e.forEach(n),Object.values(t).sort(nSe)}function lTt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function cTt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function fTt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function dTt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function rSe(e,t){const n=t||Fu,r=uTt(e),i=e.slice().sort(nSe);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=lTt,o.prototype.add=cTt,o.prototype.rem=fTt,o.prototype.set=dTt,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function jG(e){this._key=e?Ef(e):Qt,this.reset()}const Hs=jG.prototype;Hs.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Hs.add=function(e){this._add.push(e)};Hs.rem=function(e){this._rem.push(e)};Hs.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,u,l;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,u=0;a<r;++a)s[n(l=e[a])]?s[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};Hs.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",hn(n,o)||(n[o]=1,++i);return i};Hs.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=l_t(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Hs.argmin=function(e){return this.extent(e)[0]||{}};Hs.argmax=function(e){return this.extent(e)[1]||{}};Hs.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Hs.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Hs.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=TG(this.values(),e),this._get=e),this._q};Hs.q1=function(e){return this.quartile(e)[0]};Hs.q2=function(e){return this.quartile(e)[1]};Hs.q3=function(e){return this.quartile(e)[2]};Hs.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=VCe(this.values(),1e3,.05,e),this._get=e),this._ci};Hs.ci0=function(e){return this.ci(e)[0]};Hs.ci1=function(e){return this.ci(e)[1]};function R0(e){We.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}R0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:kS},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Tt(R0,We,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function s(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?s(h,u,l):t[h]||e.cell(h,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=rn(Ka(b)),E=w.length;let _=0,T;for(;_<E;++_)r[T=w[_]]||(r[T]=1,t.push(T))}this._dims=rn(e.groupby),this._dnames=this._dims.map(b=>{const w=Zi(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:wj(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=o.length,c={};let f,d,h,m,p,g,v;for(l!==s.length&&tt("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=s[v],h=a[v]||null,f==null&&d!=="count"&&tt("Null aggregate field specified."),p=Zi(f),g=eSe(d,p,u[v]),n.push(g),d==="count"){this._counts.push(g);continue}m=c[p],m||(i(f),m=c[p]=[],m.field=f,this._measures.push(m)),d!=="count"&&(this._countOnly=!1),m.push(tSe(d,h,g))}return this._measures=this._measures.map(b=>rSe(b,b.field)),Object.create(null)},cellkey:wj(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new jG),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?FCe(t.tuple,o):Tr(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&s.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?s:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const hTt=1e-14;function zG(e){We.call(this,null,e)}zG.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Tt(zG,We,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],u=s[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Ka(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=UCe(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const u=function(l){let c=qa(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(hTt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ml(u,Ka(t),e.name||"bin_"+Zi(t))}});function iSe(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:u=>o.push(u),remove:u=>s[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),l&&u&&i.sort(u),o.length&&(i=u?y_t(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function UG(e){We.call(this,[],e)}UG.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Tt(UG,We,{transform(e,t){const n=t.fork(t.ALL),r=iSe(Qt,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Y1(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function oSe(e){Wr.call(this,null,pTt,e)}Tt(oSe,Wr);function pTt(e){return this.value&&!e.modified()?this.value:YTe(e.fields,e.orders)}function VG(e){We.call(this,null,e)}VG.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function mTt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Tt(VG,We,{transform(e,t){const n=f=>d=>{for(var h=mTt(a(d),e.case,o)||[],m,p=0,g=h.length;p<g;++p)s.test(m=h[p])||f(m)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Tr({}),u[i]=a,u[o]=l,s.add.push(u)):l===0?(u&&s.rem.push(u),n[a]=null,r[a]=null):u[o]!==l&&(u[o]=l,s.mod.push(u));return s.modifies(t)}});function HG(e){We.call(this,null,e)}HG.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Tt(HG,We,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=gTt(a,i,o,e.filter||_f)):n.mod=a,n.source=this.value,n.modifies(r)}});function gTt(e,t,n,r){for(var i=[],o={},s=e.length,a=0,u,l;a<s;++a)for(o[t]=l=e[a],u=0;u<s;++u)o[n]=e[u],r(o)&&(i.push(Tr(o)),o={},o[t]=l);return i}const ole={kde:DG,mixture:GCe,normal:AG,lognormal:WCe,uniform:YCe},yTt="distributions",sle="function",vTt="field";function sSe(e,t){const n=e[sle];hn(ole,n)||tt("Unknown distribution function: "+n);const r=ole[n]();for(const i in e)i===vTt?r.data((e.from||t()).map(e[i])):i===yTt?r[i](e[i].map(o=>sSe(o,t))):typeof r[i]===sle&&r[i](e[i]);return r}function qG(e){We.call(this,null,e)}const aSe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],bTt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:aSe},{name:"weights",type:"number",array:!0}]};qG.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:aSe.concat(bTt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Tt(qG,We,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=sSe(e.distribution,xTt(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&tt("Invalid density method: "+s),!e.extent&&!r.data&&tt("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],u=e.extent||Mp(r.data()),l=j6(s,u,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Tr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function xTt(e){return()=>e.materialize(e.SOURCE).source}function uSe(e,t){return e?e.map((n,r)=>t[r]||Zi(n)):null}function WG(e,t,n){const r=[],i=f=>f(u);let o,s,a,u,l,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)u=e[s],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const lSe="bin";function GG(e){We.call(this,null,e)}GG.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:lSe}]};const wTt=(e,t)=>D6(Mp(e,t))/30;Tt(GG,We,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=WG(t.source,e.groupby,Fu),i=e.smooth||!1,o=e.field,s=e.step||wTt(n,o),a=Y1((m,p)=>o(m)-o(p)),u=e.as||lSe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const m=r[d].sort(a);h=-1;for(const p of HCe(m,s,i,o))p<c&&(c=p),p>f&&(f=p),m[++h][u]=p}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(u)}});function cSe(e){Wr.call(this,null,ETt,e),this.modified(!0)}Tt(cSe,Wr);function ETt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ml(n=>t(n,e),Ka(t),Zi(t))}function YG(e){We.call(this,[void 0,void 0],e)}YG.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Tt(YG,We,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=qa(r(a));u!=null&&(u<o&&(o=u),u>s&&(s=u))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Zi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function KG(e,t){Wr.call(this,e),this.parent=t,this.count=0}Tt(KG,Wr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function z6(e){We.call(this,{},e),this._keys=SS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Tt(z6,We,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=hn(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new KG(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Qt(u),c=o.get(l);c!==void 0&&(o.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(Qt(u),l),a(l).add(u)}),s||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Qt(u),c=o.get(l),f=r(u);c===f?a(f).mod(u):(o.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(o.get(Qt(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const l=Qt(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function fSe(e){Wr.call(this,null,_Tt,e)}Tt(fSe,Wr);function _Tt(e){return this.value&&!e.modified()?this.value:Kt(e.name)?rn(e.name).map(t=>Ef(t)):Ef(e.name,e.as)}function XG(e){We.call(this,SS(),e)}XG.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Tt(XG,We,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Qt(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(Qt(f),1)});function c(f){const d=Qt(f),h=u(f,e),m=r.get(d);h&&m?(r.delete(d),o.push(f)):!h&&!m?(r.set(d,1),s.push(f)):l&&h&&!m&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function QG(e){We.call(this,[],e)}QG.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Tt(QG,We,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=uSe(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(m=>m(a)),l=u.reduce((m,p)=>Math.max(m,p.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=xG(a),f=0;f<s;++f)d[i[f]]=(h=u[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function JG(e){We.call(this,[],e)}JG.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Tt(JG,We,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Zi),o=e.as||["key","value"],s=o[0],a=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=xG(l),f[s]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function ZG(e){We.call(this,null,e)}ZG.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Tt(ZG,We,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function dSe(e){We.call(this,[],e)}Tt(dSe,We,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,u;if(o>0){for(s=[];--o>=0;)s.push(u=Tr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const vk={value:"value",median:kxe,mean:qit,min:fl,max:da},TTt=[];function eY(e){We.call(this,[],e)}eY.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function CTt(e){var t=e.method||vk.value,n;if(vk[t]==null)tt("Unrecognized imputation method: "+t);else return t===vk.value?(n=e.value!==void 0?e.value:0,()=>n):vk[t]}function STt(e){const t=e.field;return n=>n?t(n):NaN}Tt(eY,We,{transform(e,t){var n=t.fork(t.ALL),r=CTt(e),i=STt(e),o=Zi(e.field),s=Zi(e.key),a=(e.groupby||[]).map(Zi),u=ATt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,m,p,g,v,b,w,E,_;for(g=0,w=u.length;g<w;++g)for(d=u[g],m=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(p=u.domain[b],_={_impute:!0},v=0,E=m.length;v<E;++v)_[a[v]]=m[v];_[s]=p,_[o]=Number.isNaN(h)?h=r(d,i):h,l.push(Tr(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function ATt(e,t,n,r){var i=v=>v(g),o=[],s=r?r.slice():[],a={},u={},l,c,f,d,h,m,p,g;for(s.forEach((v,b)=>a[v]=b+1),d=0,p=e.length;d<p;++d)g=e[d],m=n(g),h=a[m]||(a[m]=s.push(m)),c=(l=t?t.map(i):TTt)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[h-1]=g;return o.domain=s,o}function tY(e){R0.call(this,e)}tY.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:kS},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Tt(tY,R0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{On(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function nY(e){We.call(this,null,e)}nY.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Tt(nY,We,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=WG(r,e.groupby,e.field),o=(e.groupby||[]).map(Zi),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&tt("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Mp(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const m=DG(h,s)[a],p=e.counts?h.length:1,g=c||Mp(h);j6(m,g,f,d).forEach(v=>{const b={};for(let w=0;w<o.length;++w)b[o[w]]=h.dims[w];b[u[0]]=v[0],b[u[1]]=v[1]*p,l.push(Tr(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function hSe(e){Wr.call(this,null,DTt,e)}Tt(hSe,Wr);function DTt(e){return this.value&&!e.modified()?this.value:XTe(e.fields,e.flat)}function pSe(e){We.call(this,[],e),this._pending=null}Tt(pSe,We,{transform(e,t){const n=t.dataflow;return this._pending?uL(this,t,this._pending):kTt(e)?t.StopPropagation:e.values?uL(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=rn(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>uL(this,t,rn(r.data)))}});function kTt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function uL(e,t,n){n.forEach(Tr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function rY(e){We.call(this,{},e)}rY.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Tt(rY,We,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let u=s?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&tt('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&tt('The "as" parameter has too few output field names.'),c=c||i.map(Zi),f=function(m){for(var p=0,g=0,v,b;p<a;++p)if(b=r.get(n[p](m)),b==null)for(v=0;v<d;++v,++g)m[c[g]]=o;else for(v=0;v<d;++v,++g)m[c[g]]=i[v](b)}):(c||tt("Missing output field names."),f=function(m){for(var p=0,g;p<a;++p)g=r.get(n[p](m)),m[c[p]]=g??o}),s?l=t.reflow(!0):(h=n.some(m=>t.modified(m.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function mSe(e){Wr.call(this,null,ITt,e)}Tt(mSe,Wr);function ITt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function gSe(e){Wr.call(this,null,RTt,e)}Tt(gSe,Wr);function RTt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function ySe(e){We.call(this,null,e)}Tt(ySe,We,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function iY(e){R0.call(this,e)}iY.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:kS,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Tt(iY,R0,{_transform:R0.prototype.transform,transform(e,t){return this._transform(NTt(e,t),t)}});function NTt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=Ka(n).concat(Ka(r)),s=OTt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>PTt(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function PTt(e,t,n,r){return Ml(i=>t(i)===e?n(i):NaN,r,e+"")}function OTt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(A6),t?i.slice(0,t):i}function vSe(e){z6.call(this,e)}Tt(vSe,z6,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Qt(o),n,t,o);return(e.modified("field")||r&&t.modified(Ka(r)))&&tt("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(Tr(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function oY(e){We.call(this,null,e)}oY.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Tt(oY,We,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=uSe(e.fields,e.as||[]),o=r?(a,u)=>FTt(a,u,r,i):P6;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const u=Qt(a);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,a=>{const u=o(a,Tr({}));s[Qt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Qt(a)]))}),n}});function FTt(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function bSe(e){We.call(this,null,e)}Tt(bSe,We,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function sY(e){We.call(this,null,e)}sY.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const MTt=1e-14;Tt(sY,We,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=WG(i,e.groupby,e.field),s=(e.groupby||[]).map(Zi),a=[],u=e.step||.01,l=e.probs||dl(u/2,1-MTt,u),c=l.length;return o.forEach(f=>{const d=_G(f,l);for(let h=0;h<c;++h){const m={};for(let p=0;p<s.length;++p)m[s[p]]=f.dims[p];m[r[0]]=l[h],m[r[1]]=d[h],a.push(Tr(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function xSe(e){We.call(this,null,e)}Tt(xSe,We,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Qt(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=xG(i);r[Qt(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Qt(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function aY(e){We.call(this,[],e),this.count=0}aY.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Tt(aY,We,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[Qt(f)]=1,c),{});let s=this.value,a=this.count,u=0;function l(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*gc()),d<s.length&&d>=u&&(f=s[d],o[Qt(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Qt(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[Qt(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(u=a=s.length,t.visit(t.SOURCE,c=>{o[Qt(c)]||l(c)}),u=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[Qt(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Qt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=s.filter(c=>!o[Qt(c)])),this.count=a,this.value=n.source=s,n}});function uY(e){We.call(this,null,e)}uY.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Tt(uY,We,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=dl(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,Tr(o)}),n.add=t.add.concat(this.value),n}});function wSe(e){We.call(this,null,e),this.modified(!0)}Tt(wSe,We,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function lY(e){We.call(this,null,e)}const ESe=["unit0","unit1"];lY.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:hG,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:ESe}]};Tt(lY,We,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?uE:aE)(o.unit).offset,a=e.as||ESe,u=a[0],l=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ka(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,m=>{const p=n(m);let g,v;p==null?(m[u]=null,r&&(m[l]=null)):(m[u]=g=v=o(p),r&&(m[l]=v=s(g,c)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:bCe({extent:e.extent||Mp(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=pG(r),s=this.value||{},a=(n?cCe:lCe)(o,i);return a.unit=sr(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function _Se(e){We.call(this,SS(),e)}Tt(_Se,We,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function TSe(e){We.call(this,null,e)}Tt(TSe,We,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Y1(e.sort)):t.source).map(e.field))}});function $Tt(e,t,n,r){const i=uC[e](t,n);return{init:i.init||py,update:function(o,s){s[r]=i.next(o)}}}const uC={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=uC.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||tt("ntile num must be greater than zero.");const n=uC.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||tt("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=LTt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function LTt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const BTt=Object.keys(uC);function CSe(e){const t=rn(e.ops),n=rn(e.fields),r=rn(e.params),i=rn(e.aggregate_params),o=rn(e.as),s=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(m){rn(Ka(m)).forEach(p=>u[p]=1)}h(e.sort),t.forEach((m,p)=>{const g=n[p],v=r[p],b=i[p]||null,w=Zi(g),E=eSe(m,w,o[p]);if(h(g),s.push(E),hn(uC,m))a.push($Tt(m,g,v,E));else{if(g==null&&m!=="count"&&tt("Null aggregate field specified."),m==="count"){c.push(E);return}d=!1;let _=l[w];_||(_=l[w]=[],_.field=g,f.push(_)),_.push(tSe(m,b,E))}}),(c.length||f.length)&&(this.cell=jTt(f,c,d)),this.inputs=Object.keys(u)}const SSe=CSe.prototype;SSe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};SSe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function jTt(e,t,n){e=e.map(u=>rSe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new jG;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)o[u].init()},r}function cY(e){We.call(this,{},e),this._mlen=0,this._mods=[]}cY.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:BTt.concat(kS)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Tt(cY,We,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Y1(e.sort),i=wj(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new CSe(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)zTt(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=iSe(Qt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function zTt(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),u=a.length,l=o?Jw(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Za(-1)};t.init();for(let f=0;f<u;++f)UTt(c,s,f,u),o&&VTt(c,l),t.update(c,a[f])}function UTt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function VTt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const HTt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:R0,bin:zG,collect:UG,compare:oSe,countpattern:VG,cross:HG,density:qG,dotbin:GG,expression:cSe,extent:YG,facet:z6,field:fSe,filter:XG,flatten:QG,fold:JG,formula:ZG,generate:dSe,impute:eY,joinaggregate:tY,kde:nY,key:hSe,load:pSe,lookup:rY,multiextent:mSe,multivalues:gSe,params:ySe,pivot:iY,prefacet:vSe,project:oY,proxy:bSe,quantile:sY,relay:xSe,sample:aY,sequence:uY,sieve:wSe,subflow:KG,timeunit:lY,tupleindex:_Se,values:TSe,window:cY},Symbol.toStringTag,{value:"Module"}));function f0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const qTt=()=>typeof Image<"u"?Image:null;function fY(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const WTt="identity",Kx="linear",$p="log",IS="pow",RS="sqrt",U6="symlog",i1="time",o1="utc",Dd="sequential",cE="diverging",Xx="quantile",V6="quantize",H6="threshold",dY="ordinal",Ej="point",ASe="band",hY="bin-ordinal",Vo="continuous",NS="discrete",PS="discretizing",kc="interpolating",pY="temporal";function GTt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function YTt(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function mY(){const e=lW().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],m=fY(f,a,u);let p=r[d-0];i=(h-p)/(m||1),s&&(i=Math.floor(i)),p+=(h-p-i*(f-a))*l,o=i*(1-a),s&&(p=Math.round(p),o=Math.round(o));const g=dl(f).map(v=>p+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),m=h.length-1;let p=+f[0],g=+f[1],v,b,w;if(!(p!==p||g!==g)&&(g<p&&(w=p,p=g,g=w),!(g<h[0]||p>r[1-d])))return v=Math.max(0,C0(h,p)-1),b=p===g?v:C0(h,g)-1,p-h[v]>o+1e-10&&++v,d&&(w=v,v=m-b,b=m-w),v>b?void 0:t().slice(v,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return mY().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function DSe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return DSe(t())},e}function KTt(){return DSe(mY().paddingInner(1))}var XTt=Array.prototype.map;function QTt(e){return XTt.call(e,qa)}const JTt=Array.prototype.slice;function kSe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(C0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=QTt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=JTt.call(r),n):t.slice()},n.tickFormat=function(r,i){return kEe(e[0],sr(e),r??10,i)},n.copy=function(){return kSe().domain(n.domain()).range(n.range())},n}const pP=new Map,ISe=Symbol("vega_scale");function RSe(e){return e[ISe]=!0,e}function ZTt(e){return e&&e[ISe]===!0}function eCt(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?GTt(o):o.invertExtent?YTt(o):void 0),o.type=e,RSe(o)};return r.metadata=Gd(rn(n)),r}function gr(e,t,n){return arguments.length>1?(pP.set(e,eCt(e,t,n)),this):NSe(e)?pP.get(e):void 0}gr(WTt,IEe);gr(Kx,Ud,Vo);gr($p,NEe,[Vo,$p]);gr(IS,hW,Vo);gr(RS,cdt,Vo);gr(U6,PEe,Vo);gr(i1,Cht,[Vo,pY]);gr(o1,Sht,[Vo,pY]);gr(Dd,vW,[Vo,kc]);gr(`${Dd}-${Kx}`,vW,[Vo,kc]);gr(`${Dd}-${$p}`,WEe,[Vo,kc,$p]);gr(`${Dd}-${IS}`,bW,[Vo,kc]);gr(`${Dd}-${RS}`,Aht,[Vo,kc]);gr(`${Dd}-${U6}`,GEe,[Vo,kc]);gr(`${cE}-${Kx}`,YEe,[Vo,kc]);gr(`${cE}-${$p}`,KEe,[Vo,kc,$p]);gr(`${cE}-${IS}`,xW,[Vo,kc]);gr(`${cE}-${RS}`,Dht,[Vo,kc]);gr(`${cE}-${U6}`,XEe,[Vo,kc]);gr(Xx,OEe,[PS,Xx]);gr(V6,FEe,PS);gr(H6,MEe,PS);gr(hY,kSe,[NS,PS]);gr(dY,lW,NS);gr(ASe,mY,NS);gr(Ej,KTt,NS);function NSe(e){return pP.has(e)}function X1(e,t){const n=pP.get(e);return n&&n.metadata[t]}function gY(e){return X1(e,Vo)}function Qx(e){return X1(e,NS)}function _j(e){return X1(e,PS)}function PSe(e){return X1(e,$p)}function tCt(e){return X1(e,pY)}function OSe(e){return X1(e,kc)}function FSe(e){return X1(e,Xx)}const nCt=["clamp","base","constant","exponent"];function MSe(e,t){const n=t[0],r=sr(t)-n;return function(i){return e(n+i*r)}}function q6(e,t,n){return qq(yY(t||"rgb",n),e)}function $Se(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function LSe(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Za(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=gr(o)().domain([t,n]).range([0,1]),nCt.forEach(a=>e[a]?s[a](e[a]()):0),s)}function yY(e,t){const n=vat[rCt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function rCt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const iCt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},oCt={accent:Iht,category10:kht,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Rht,observable10:Nht,paired:Pht,pastel1:Oht,pastel2:Fht,set1:Mht,set2:$ht,set3:Lht,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function BSe(e){if(Kt(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function jSe(e,t){for(const n in e)vY(n,t(e[n]))}const ale={};jSe(oCt,BSe);jSe(iCt,e=>q6(BSe(e)));function vY(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(ale[e]=t,this):ale[e]}const JR="symbol",sCt="discrete",aCt="gradient",uCt=e=>Kt(e)?e.map(t=>String(t)):String(e),lCt=(e,t)=>e[1]-t[1],cCt=(e,t)=>t[1]-e[1];function bY(e,t,n){let r;return r1(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(D6(e.domain())/n||1)+1))),Nn(t)&&(r=t.step,t=t.interval),bi(t)&&(t=e.type===i1?aE(t):e.type==o1?uE(t):tt("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function zSe(e,t,n){let r=e.range(),i=r[0],o=sr(r),s=lCt;if(i>o&&(r=o,o=i,i=r,s=cCt),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],sr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function xY(e,t){return e.bins?zSe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function USe(e,t,n,r,i,o){const s=t.type;let a=uCt;if(s===i1||i===i1)a=e.timeFormat(r);else if(s===o1||i===o1)a=e.utcFormat(r);else if(PSe(s)){const u=e.formatFloat(r);if(o||t.bins)a=u;else{const l=VSe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function VSe(e,t,n){const r=xY(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(a):a}const Tj={[Xx]:"quantiles",[V6]:"thresholds",[H6]:"domain"},HSe={[Xx]:"quantiles",[V6]:"domain"};function qSe(e,t){return e.bins?hCt(e.bins):e.type===$p?VSe(e,t,!0):Tj[e.type]?dCt(e[Tj[e.type]]()):xY(e,t)}function fCt(e,t,n){const r=t[HSe[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function dCt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function hCt(e){const t=e.slice(0,-1);return t.max=sr(e),t}const pCt=e=>Tj[e.type]||e.bins;function WSe(e,t,n,r,i,o,s){const a=HSe[t.type]&&o!==i1&&o!==o1?fCt(e,t,i):USe(e,t,n,i,o,s);return r===JR&&pCt(t)?mCt(a):r===sCt?gCt(a):yCt(a)}const mCt=e=>(t,n,r)=>{const i=ule(r[n+1],ule(r.max,1/0)),o=lle(t,e),s=lle(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},ule=(e,t)=>e??t,gCt=e=>(t,n)=>n?e(t):null,yCt=e=>t=>e(t),lle=(e,t)=>Number.isFinite(e)?t(e):null;function vCt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+sr(t),o=i-r;if(e.type===H6){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function bCt(e,t,n,r){const i=r||t.type;return bi(n)&&tCt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===i1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===o1?e.utcFormat("%A, %d %B %Y, %X UTC"):WSe(e,t,5,null,n,r,!0)}function GSe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=bCt(e,t,n.format,n.formatType);if(_j(t.type)){const o=qSe(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(Qx(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(sr(o))}`}}let YSe=0;function xCt(){YSe=0}const mP="p_";function wY(e){return e&&e.gradient}function KSe(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?mP:"";return i||(i=e.id="gradient_"+YSe++,r==="radial"?(e.x1=ed(e.x1,.5),e.y1=ed(e.y1,.5),e.r1=ed(e.r1,0),e.x2=ed(e.x2,.5),e.y2=ed(e.y2,.5),e.r2=ed(e.r2,.5),o=mP):(e.x1=ed(e.x1,0),e.y1=ed(e.y1,0),e.x2=ed(e.x2,1),e.y2=ed(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function ed(e,t){return e??t}function XSe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const cle={basis:{curve:Zht},"basis-closed":{curve:ept},"basis-open":{curve:tpt},bundle:{curve:npt,tension:"beta",value:.85},cardinal:{curve:rpt,tension:"tension",value:0},"cardinal-open":{curve:opt,tension:"tension",value:0},"cardinal-closed":{curve:ipt,tension:"tension",value:0},"catmull-rom":{curve:spt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:apt,tension:"alpha",value:.5},"catmull-rom-open":{curve:upt,tension:"alpha",value:.5},linear:{curve:wW},"linear-closed":{curve:lpt},monotone:{horizontal:fpt,vertical:cpt},natural:{curve:dpt},step:{curve:hpt},"step-after":{curve:mpt},"step-before":{curve:ppt}};function EY(e,t,n){var r=hn(cle,e)&&cle[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const wCt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},ECt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,_Ct=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,TCt=/^((\s+,?\s*)|(,\s*))/,CCt=/^[01]/;function Jx(e){const t=[];return(e.match(ECt)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=wCt[o],a=SCt(o,s,r.slice(1).trim()),u=a.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),u!==s){o==="m"&&(i=i==="M"?"L":"l");for(let l=s;l<u;l+=s)t.push([i,...a.slice(l,l+s)])}}),t}function SCt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?CCt:_Ct,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(TCt);u!==null&&(i+=u[0].length)}return r}const N0=Math.PI/180,ACt=1e-14,gy=Math.PI/2,pd=Math.PI*2,sb=Math.sqrt(3)/2;var lL={},cL={},QSe=[].join;function DCt(e,t,n,r,i,o,s,a,u){const l=QSe.call(arguments);if(lL[l])return lL[l];const c=s*N0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,m=d*(u-t)*.5-f*(a-e)*.5;let p=h*h/(n*n)+m*m/(r*r);p>1&&(p=Math.sqrt(p),n*=p,r*=p);const g=d/n,v=f/n,b=-f/r,w=d/r,E=g*a+v*u,_=b*a+w*u,T=g*e+v*t,S=b*e+w*t;let k=1/((T-E)*(T-E)+(S-_)*(S-_))-.25;k<0&&(k=0);let R=Math.sqrt(k);o==i&&(R=-R);const O=.5*(E+T)-R*(S-_),M=.5*(_+S)+R*(T-E),F=Math.atan2(_-M,E-O);let H=Math.atan2(S-M,T-O)-F;H<0&&o===1?H+=pd:H>0&&o===0&&(H-=pd);const V=Math.ceil(Math.abs(H/(gy+.001))),Q=[];for(let K=0;K<V;++K){const Z=F+K*H/V,U=F+(K+1)*H/V;Q[K]=[O,M,Z,U,n,r,f,d]}return lL[l]=Q}function kCt(e){const t=QSe.call(e);if(cL[t])return cL[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7];const c=l*s,f=-u*a,d=u*s,h=l*a,m=Math.cos(i),p=Math.sin(i),g=Math.cos(o),v=Math.sin(o),b=.5*(o-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),_=n+m-E*p,T=r+p+E*m,S=n+g,D=r+v,k=S+E*v,R=D-E*g;return cL[t]=[c*_+f*T,d*_+h*T,c*k+f*R,d*k+h*R,c*S+f*D,d*S+h*D]}const Jl=["l",0,0,0,0,0,0,0];function ICt(e,t,n){const r=Jl[0]=e[0];if(r==="a"||r==="A")Jl[1]=t*e[1],Jl[2]=n*e[2],Jl[3]=e[3],Jl[4]=e[4],Jl[5]=e[5],Jl[6]=t*e[6],Jl[7]=n*e[7];else if(r==="h"||r==="H")Jl[1]=t*e[1];else if(r==="v"||r==="V")Jl[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Jl[i]=(i%2==1?t:n)*e[i];return Jl}function lC(e,t,n,r,i,o){var s,a=null,u=0,l=0,c=0,f=0,d,h,m,p,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(s=t[b],(i!==1||o!==1)&&(s=ICt(s,i,o)),s[0]){case"l":u+=s[1],l+=s[2],e.lineTo(u+n,l+r);break;case"L":u=s[1],l=s[2],e.lineTo(u+n,l+r);break;case"h":u+=s[1],e.lineTo(u+n,l+r);break;case"H":u=s[1],e.lineTo(u+n,l+r);break;case"v":l+=s[1],e.lineTo(u+n,l+r);break;case"V":l=s[1],e.lineTo(u+n,l+r);break;case"m":u+=s[1],l+=s[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"M":u=s[1],l=s[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"c":d=u+s[5],h=l+s[6],c=u+s[3],f=l+s[4],e.bezierCurveTo(u+s[1]+n,l+s[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=s[5],l=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+s[3],h=l+s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+s[1]+n,l+s[2]+r,d+n,h+r),c=u+s[1],f=l+s[2],u=d,l=h;break;case"S":d=s[3],h=s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"q":d=u+s[3],h=l+s[4],c=u+s[1],f=l+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"t":d=u+s[1],h=l+s[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-m,f=2*l-p):a[0]==="q"&&(c=2*u-c,f=2*l-f),m=c,p=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+s[1],f=l+s[2];break;case"T":d=s[1],h=s[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":fle(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+l+r]),u+=s[6],l+=s[7];break;case"A":fle(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),u=s[6],l=s[7];break;case"z":case"Z":u=g,l=v,e.closePath();break}a=s}}function fle(e,t,n,r){const i=DCt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=kCt(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const dle=.5773502691896257,hle={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,pd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=sb*n,i=r-n*dle,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=sb*n,i=r-n*dle;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=sb*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=sb*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=sb*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=sb*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function JSe(e){return hn(hle,e)?hle[e]:RCt(e)}var fL={};function RCt(e){if(!hn(fL,e)){const t=Jx(e);fL[e]={draw:function(n,r){lC(n,t,0,0,Math.sqrt(r)/2)}}}return fL[e]}const Am=.448084975506;function NCt(e){return e.x}function PCt(e){return e.y}function OCt(e){return e.width}function FCt(e){return e.height}function Ih(e){return typeof e=="function"?e:()=>+e}function bk(e,t,n){return Math.max(t,Math.min(e,n))}function ZSe(){var e=NCt,t=PCt,n=OCt,r=FCt,i=Ih(0),o=i,s=i,a=i,u=null;function l(c,f,d){var h,m=f??+e.call(this,c),p=d??+t.call(this,c),g=+n.call(this,c),v=+r.call(this,c),b=Math.min(g,v)/2,w=bk(+i.call(this,c),0,b),E=bk(+o.call(this,c),0,b),_=bk(+s.call(this,c),0,b),T=bk(+a.call(this,c),0,b);if(u||(u=h=BO()),w<=0&&E<=0&&_<=0&&T<=0)u.rect(m,p,g,v);else{var S=m+g,D=p+v;u.moveTo(m+w,p),u.lineTo(S-E,p),u.bezierCurveTo(S-Am*E,p,S,p+Am*E,S,p+E),u.lineTo(S,D-T),u.bezierCurveTo(S,D-Am*T,S-Am*T,D,S-T,D),u.lineTo(m+_,D),u.bezierCurveTo(m+Am*_,D,m,D-Am*_,m,D-_),u.lineTo(m,p+w),u.bezierCurveTo(m,p+Am*w,m+Am*w,p,m+w,p),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Ih(c),l):e},l.y=function(c){return arguments.length?(t=Ih(c),l):t},l.width=function(c){return arguments.length?(n=Ih(c),l):n},l.height=function(c){return arguments.length?(r=Ih(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Ih(c),o=f!=null?Ih(f):i,a=d!=null?Ih(d):i,s=h!=null?Ih(h):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function eAe(){var e,t,n,r,i=null,o,s,a,u;function l(f,d,h){const m=h/2;if(o){var p=a-d,g=f-s;if(p||g){var v=Math.hypot(p,g),b=(p/=v)*u,w=(g/=v)*u,E=Math.atan2(g,p);i.moveTo(s-b,a-w),i.lineTo(f-p*m,d-g*m),i.arc(f,d,m,E-Math.PI,E),i.lineTo(s+b,a+w),i.arc(s,a,u,E,E+Math.PI)}else i.arc(f,d,m,0,pd);i.closePath()}else o=1;s=f,a=d,u=m}function c(f){var d,h=f.length,m,p=!1,g;for(i==null&&(i=g=BO()),d=0;d<=h;++d)!(d<h&&r(m=f[d],d,f))===p&&(p=!p)&&(o=0),p&&l(+e(m,d,f),+t(m,d,f),+n(m,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function OS(e,t){return e??t}const FS=e=>e.x||0,MS=e=>e.y||0,MCt=e=>e.width||0,$Ct=e=>e.height||0,LCt=e=>(e.x||0)+(e.width||0),BCt=e=>(e.y||0)+(e.height||0),jCt=e=>e.startAngle||0,zCt=e=>e.endAngle||0,UCt=e=>e.padAngle||0,VCt=e=>e.innerRadius||0,HCt=e=>e.outerRadius||0,qCt=e=>e.cornerRadius||0,WCt=e=>OS(e.cornerRadiusTopLeft,e.cornerRadius)||0,GCt=e=>OS(e.cornerRadiusTopRight,e.cornerRadius)||0,YCt=e=>OS(e.cornerRadiusBottomRight,e.cornerRadius)||0,KCt=e=>OS(e.cornerRadiusBottomLeft,e.cornerRadius)||0,XCt=e=>OS(e.size,64),QCt=e=>e.size||1,W6=e=>e.defined!==!1,JCt=e=>JSe(e.shape||"circle"),ZCt=Xht().startAngle(jCt).endAngle(zCt).padAngle(UCt).innerRadius(VCt).outerRadius(HCt).cornerRadius(qCt),eSt=r_e().x(FS).y1(MS).y0(BCt).defined(W6),tSt=r_e().y(MS).x1(FS).x0(LCt).defined(W6),nSt=EW().x(FS).y(MS).defined(W6),rSt=ZSe().x(FS).y(MS).width(MCt).height($Ct).cornerRadius(WCt,GCt,YCt,KCt),iSt=Jht().type(JCt).size(XCt),oSt=eAe().x(FS).y(MS).defined(W6).size(QCt);function _Y(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function sSt(e,t){return ZCt.context(e)(t)}function aSt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?tSt:eSt).curve(EY(r,n.orient,n.tension)).context(e)(t)}function uSt(e,t){const n=t[0],r=n.interpolate||"linear";return nSt.curve(EY(r,n.orient,n.tension)).context(e)(t)}function fE(e,t,n,r){return rSt.context(e)(t,n,r)}function lSt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function cSt(e,t){return iSt.context(e)(t)}function fSt(e,t){return oSt.context(e)(t)}var tAe=1;function nAe(){tAe=1}function TY(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+tAe++),s=i.clipping[o]||(i.clipping[o]={id:o});return Bn(r)?s.path=r(null):_Y(n)?s.path=fE(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function bo(e){this.clear(),e&&this.union(e)}bo.prototype={clone(){return new bo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*s+l,u*r+a*s+c,a*o-u*i+l,u*o+a*i+c,a*o-u*s+l,u*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function G6(e){this.mark=e,this.bounds=this.bounds||new bo}function Y6(e){G6.call(this,e),this.items=this.items||[]}Tt(Y6,G6);class rAe{constructor(t){this._pending=0,this._loader=t||I6()}pending(){return this._pending}sanitizeURL(t){const n=this;return ple(n),n._loader.sanitize(t,{context:"href"}).then(r=>(A_(n),r)).catch(()=>(A_(n),null))}loadImage(t){const n=this,r=qTt();return ple(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=hn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>A_(n),s.onerror=()=>A_(n),s.src=o,s}).catch(i=>(A_(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function ple(e){e._pending+=1}function A_(e){e._pending-=1}function Qp(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?dSt(t,r):0))}return e}function dSt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const hSt=pd-1e-8;let K6,ZR,eN,Dy,Cj,tN,Sj,Aj;const Km=(e,t)=>K6.add(e,t),nN=(e,t)=>Km(ZR=e,eN=t),mle=e=>Km(e,K6.y1),gle=e=>Km(K6.x1,e),yy=(e,t)=>Cj*e+Sj*t,vy=(e,t)=>tN*e+Aj*t,dL=(e,t)=>Km(yy(e,t),vy(e,t)),hL=(e,t)=>nN(yy(e,t),vy(e,t));function $S(e,t){return K6=e,t?(Dy=t*N0,Cj=Aj=Math.cos(Dy),tN=Math.sin(Dy),Sj=-tN):(Cj=Aj=1,Dy=tN=Sj=0),pSt}const pSt={beginPath(){},closePath(){},moveTo:hL,lineTo:hL,rect(e,t,n,r){Dy?(dL(e+n,t),dL(e+n,t+r),dL(e,t+r),hL(e,t)):(Km(e+n,t+r),nN(e,t))},quadraticCurveTo(e,t,n,r){const i=yy(e,t),o=vy(e,t),s=yy(n,r),a=vy(n,r);yle(ZR,i,s,mle),yle(eN,o,a,gle),nN(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=yy(e,t),a=vy(e,t),u=yy(n,r),l=vy(n,r),c=yy(i,o),f=vy(i,o);vle(ZR,s,u,c,mle),vle(eN,a,l,f,gle),nN(c,f)},arc(e,t,n,r,i,o){if(r+=Dy,i+=Dy,ZR=n*Math.cos(i)+e,eN=n*Math.sin(i)+t,Math.abs(i-r)>hSt)Km(e-n,t-n),Km(e+n,t+n);else{const s=l=>Km(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(s(r),s(i),i!==r)if(r=r%pd,r<0&&(r+=pd),i=i%pd,i<0&&(i+=pd),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=pd,a=r-r%gy,u=0;u<4&&a>i;++u,a-=gy)s(a);else for(a=r-r%gy+gy,u=0;u<4&&a<i;++u,a=a+gy)s(a)}}};function yle(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function vle(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(o)>ACt?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),u=(-s+c)/o,l=(-s-c)/o)):u=.5*a/s,0<u&&u<1&&i(ble(u,e,t,n,r)),0<l&&l<1&&i(ble(l,e,t,n,r))}function ble(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var d0=(d0=f0(1,1))?d0.getContext("2d"):null;const Dj=new bo;function CY(e){return function(t,n){if(!d0)return!0;e(d0,t),Dj.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=Dj;for(let a=i;a<=s;++a)for(let u=r;u<=o;++u)if(d0.isPointInPath(u,a))return!0;return!1}}function SY(e,t){return t.contains(e.x||0,e.y||0)}function iAe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(Dj.set(n,r,n+i,r+o))}function oAe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Bb(t,n,r,i,o)}function Bb(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,m,p,g;for(g=0;g<4;++g){if(g===0&&(h=-l,m=-(o-t)),g===1&&(h=l,m=a-t),g===2&&(h=-c,m=-(s-n)),g===3&&(h=c,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(p=m/h,h<0){if(p>d)return!1;p>f&&(f=p)}else if(h>0){if(p<f)return!1;p<d&&(d=p)}}return!0}function Zx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Vc(e,t){return e??t}function xle(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function mSt(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Vc(t.x1,.5)*r,n.y1+Vc(t.y1,.5)*i,Math.max(r,i)*Vc(t.r1,0),n.x1+Vc(t.x2,.5)*r,n.y1+Vc(t.y2,.5)*i,Math.max(r,i)*Vc(t.r2,.5));else{const s=Vc(t.x1,0),a=Vc(t.y1,0),u=Vc(t.x2,1),l=Vc(t.y2,0);if(s===u||a===l||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=f0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=xle(f.createLinearGradient(s,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return xle(o,t.stops)}function sAe(e,t,n){return wY(n)?mSt(e,n,t.bounds):n}function gP(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=sAe(e,t,t.fill),!0):!1}var gSt=[];function ew(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=sAe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||gSt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function ySt(e,t){return e.zindex-t.zindex||e.index-t.index}function AY(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(ySt)}function Cf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=AY(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function yP(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=AY(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function DY(e){return function(t,n,r){Cf(n,i=>{(!r||r.intersects(i.bounds))&&aAe(e,t,i,i)})}}function vSt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&aAe(e,t,n.items[0],n.items)}}function aAe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Zx(t,n),n.fill&&gP(t,n,i)&&t.fill(),n.stroke&&ew(t,n,i)&&t.stroke()))}function X6(e){return e=e||_f,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,yP(n,a=>{const u=a.bounds;if(!(u&&!u.contains(o,s)||!u)&&e(t,a,r,i,o,s))return a})}}function LS(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,u=s.stroke&&n.isPointInStroke,l,c;return u&&(l=s.strokeWidth,c=s.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function kY(e){return X6(LS(e))}function $y(e,t){return"translate("+e+","+t+")"}function IY(e){return"rotate("+e+")"}function bSt(e,t){return"scale("+e+","+t+")"}function uAe(e){return $y(e.x||0,e.y||0)}function xSt(e){return $y(e.x||0,e.y||0)+(e.angle?" "+IY(e.angle):"")}function wSt(e){return $y(e.x||0,e.y||0)+(e.angle?" "+IY(e.angle):"")+(e.scaleX||e.scaleY?" "+bSt(e.scaleX||1,e.scaleY||1):"")}function RY(e,t,n){function r(s,a){s("transform",xSt(a)),s("d",t(null,a))}function i(s,a){return t($S(s,a.angle),a),Qp(s,a).translate(a.x||0,a.y||0)}function o(s,a){var u=a.x||0,l=a.y||0,c=a.angle||0;s.translate(u,l),c&&s.rotate(c*=N0),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:DY(o),pick:kY(o),isect:n||CY(o)}}var ESt=RY("arc",sSt);function _St(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function TSt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function CSt(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function NY(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t($S(u),c),Qp(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const s=LS(o);function a(u,l,c,f,d,h){var m=l.items,p=l.bounds;return!m||!m.length||p&&!p.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,s(u,m,c,f)?m[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:vSt(o),pick:a,isect:SY,tip:n}}var SSt=NY("area",aSt,_St);function ASt(e,t){var n=t.clip;e.save(),Bn(n)?(e.beginPath(),n(e),e.clip()):lAe(e,t.group)}function lAe(e,t){e.beginPath(),_Y(t)?fE(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function cAe(e){const t=Vc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function DSt(e,t){e("transform",uAe(t))}function fAe(e,t){const n=cAe(t);e("d",fE(null,t,n,n))}function kSt(e,t){e("class","background"),e("aria-hidden",!0),fAe(e,t)}function ISt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?fAe(e,t):e("d","")}function RSt(e,t,n){const r=t.clip?TY(n,t,t):null;e("clip-path",r)}function NSt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Qp(e,t),e.translate(t.x||0,t.y||0)}function cC(e,t,n,r){const i=cAe(t);e.beginPath(),fE(e,t,(n||0)+i,(r||0)+i)}const PSt=LS(cC),OSt=LS(cC,!1),FSt=LS(cC,!0);function MSt(e,t,n,r){Cf(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(cC(e,i,o,s),Zx(e,i),i.fill&&gP(e,i,u)&&e.fill(),i.stroke&&!a&&ew(e,i,u)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&lAe(e,i),n&&n.translate(-o,-s),Cf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&u&&(cC(e,i,o,s),Zx(e,i),ew(e,i,u)&&e.stroke())})}function $St(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return yP(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),m=f+(u.height||0),p=u.clip;if(p&&(i<c||i>h||o<f||o>m))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,p&&_Y(u)&&!FSt(e,u,s,a))return e.restore(),null;const g=u.strokeForeground,v=t.interactive!==!1;return v&&g&&u.stroke&&OSt(e,u,s,a)?(e.restore(),u):(l=yP(u,b=>LSt(b,c,f)?this.pick(b,n,r,c,f):null),!l&&v&&(u.fill||!g&&u.stroke)&&PSt(e,u,s,a)&&(l=u),e.restore(),l||null)})}function LSt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var BSt={type:"group",tag:"g",nested:!1,attr:DSt,bound:NSt,draw:MSt,pick:$St,isect:iAe,content:RSt,background:kSt,foreground:ISt},fC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function PY(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function OY(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function FY(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Q6(e,t){return e==="center"?t/2:e==="right"?t:0}function J6(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function jSt(e,t,n){const r=PY(t,n),i=OY(t,r),o=FY(t,r),s=(t.x||0)-Q6(t.align,i),a=(t.y||0)-J6(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,fC["xmlns:xlink"],"xlink:href"),e("transform",$y(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function zSt(e,t){const n=t.image,r=OY(t,n),i=FY(t,n),o=(t.x||0)-Q6(t.align,r),s=(t.y||0)-J6(t.baseline,i);return e.set(o,s,o+r,s+i)}function USt(e,t,n){Cf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=PY(r,this);let o=OY(r,i),s=FY(r,i);if(o===0||s===0)return;let a=(r.x||0)-Q6(r.align,o),u=(r.y||0)-J6(r.baseline,s),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Zx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,o,s))})}var VSt={type:"image",tag:"image",nested:!1,attr:jSt,bound:zSt,draw:USt,pick:X6(),isect:_f,get:PY,xOffset:Q6,yOffset:J6},HSt=NY("line",uSt,TSt);function qSt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",wSt(t)),e("d",t.path)}function rN(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*N0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Jx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),lC(e,u,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):lC(e,u,r,i,o,s)}function WSt(e,t){return rN($S(e,t.angle),t)?e.set(0,0,0,0):Qp(e,t,!0)}var GSt={type:"path",tag:"path",nested:!1,attr:qSt,bound:WSt,draw:DY(rN),pick:kY(rN),isect:CY(rN)};function YSt(e,t){e("d",fE(null,t))}function KSt(e,t){var n,r;return Qp(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function wle(e,t){e.beginPath(),fE(e,t)}var XSt={type:"rect",tag:"path",nested:!1,attr:YSt,bound:KSt,draw:DY(wle),pick:kY(wle),isect:iAe};function QSt(e,t){e("transform",uAe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function JSt(e,t){var n,r;return Qp(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function dAe(e,t,n){var r,i,o,s;return t.stroke&&ew(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function ZSt(e,t,n){Cf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&dAe(e,r,i)&&(Zx(e,r),e.stroke())}})}function eAt(e,t,n,r){return e.isPointInStroke?dAe(e,t,1)&&e.isPointInStroke(n,r):!1}var tAt={type:"rule",tag:"line",nested:!1,attr:QSt,bound:JSt,draw:ZSt,pick:X6(eAt),isect:oAe},nAt=RY("shape",lSt),rAt=RY("symbol",cSt,SY);const Ele=g_t();var yl={height:uh,measureWidth:MY,estimateWidth:vP,width:vP,canvas:hAe};hAe(!0);function hAe(e){yl.width=e&&d0?MY:vP}function vP(e,t){return pAe(O0(e,t),uh(e))}function pAe(e,t){return~~(.8*e.length*t)}function MY(e,t){return uh(e)<=0||!(t=O0(e,t))?0:mAe(t,Z6(e))}function mAe(e,t){const n=`(${t}) ${e}`;let r=Ele.get(n);return r===void 0&&(d0.font=t,r=d0.measureText(e).width,Ele.set(n,r)),r}function uh(e){return e.fontSize!=null?+e.fontSize||0:11}function P0(e){return e.lineHeight!=null?e.lineHeight:uh(e)+2}function iAt(e){return Kt(e)?e.length>1?e:e[0]:e}function BS(e){return iAt(e.lineBreak&&e.text&&!Kt(e.text)?e.text.split(e.lineBreak):e.text)}function $Y(e){const t=BS(e);return(Kt(t)?t.length-1:0)*P0(e)}function O0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?sAt(e,n):n}function oAt(e){if(yl.width===MY){const t=Z6(e);return n=>mAe(n,t)}else if(yl.width===vP){const t=uh(e);return n=>pAe(n,t)}else return t=>yl.width(e,t)}function sAt(e,t){var n=+e.limit,r=oAt(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,u;if(n-=r(i),o){for(;s<a;)u=s+a>>>1,r(t.slice(u))>n?s=u+1:a=u;return i+t.slice(s)}else{for(;s<a;)u=1+(s+a>>>1),r(t.slice(0,u))<n?s=u:a=u-1;return t.slice(0,s)+i}}function jS(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Z6(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+uh(e)+"px "+jS(e,t)}function LY(e){var t=e.baseline,n=uh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*P0(e):t==="line-bottom"?.29*n-.5*P0(e):0)}const aAt={left:"start",center:"middle",right:"end"},sT=new bo;function eF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-gy,t+=r*Math.cos(i),n+=r*Math.sin(i)),sT.x1=t,sT.y1=n,sT}function uAt(e,t){var n=t.dx||0,r=(t.dy||0)+LY(t),i=eF(t),o=i.x1,s=i.y1,a=t.angle||0,u;e("text-anchor",aAt[t.align]||"start"),a?(u=$y(o,s)+" "+IY(a),(n||r)&&(u+=" "+$y(n,r))):u=$y(o+n,s+r),e("transform",u)}function BY(e,t,n){var r=yl.height(t),i=t.align,o=eF(t),s=o.x1,a=o.y1,u=t.dx||0,l=(t.dy||0)+LY(t)-Math.round(.8*r),c=BS(t),f;if(Kt(c)?(r+=P0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,yl.width(t,h)),0)):f=yl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=s,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*N0,s,a);else if(n===2)return e.rotatedPoints(t.angle*N0,s,a);return e}function lAt(e,t,n){Cf(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Z6(r),e.textAlign=r.align||"left",o=eF(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*N0),s=a=0),s+=r.dx||0,a+=(r.dy||0)+LY(r),c=BS(r),Zx(e,r),Kt(c))for(l=P0(r),u=0;u<c.length;++u)f=O0(r,c[u]),r.fill&&gP(e,r,i)&&e.fillText(f,s,a),r.stroke&&ew(e,r,i)&&e.strokeText(f,s,a),a+=l;else f=O0(r,c),r.fill&&gP(e,r,i)&&e.fillText(f,s,a),r.stroke&&ew(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function cAt(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=eF(t),a=s.x1,u=s.y1,l=BY(sT,t,1),c=-t.angle*N0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*u),m=d*i+f*o+(u-d*a-f*u);return l.contains(h,m)}function fAt(e,t){const n=BY(sT,e,2);return Bb(t,n[0],n[1],n[2],n[3])||Bb(t,n[0],n[1],n[4],n[5])||Bb(t,n[4],n[5],n[6],n[7])||Bb(t,n[2],n[3],n[6],n[7])}var dAt={type:"text",tag:"text",nested:!1,attr:uAt,bound:BY,draw:lAt,pick:X6(cAt),isect:fAt},hAt=NY("trail",fSt,CSt),Il={arc:ESt,area:SSt,group:BSt,image:VSt,line:HSt,path:GSt,rect:XSt,rule:tAt,shape:nAt,symbol:rAt,text:dAt,trail:hAt};function kj(e,t,n){var r=Il[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new bo),e,n)}var _le={mark:null};function gAe(e,t,n){var r=Il[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,u,l,c;if(r.nested)return s?l=o[0]:(_le.mark=e,l=_le),c=kj(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new bo,s)for(a=0,u=o.length;a<u;++a)t.union(kj(o[a],i,n));return e.bounds=t}const pAt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function yAe(e,t){return JSON.stringify(e,pAt,t)}function vAe(e){const t=typeof e=="string"?JSON.parse(e):e;return bAe(t)}function bAe(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&bAe(n[i]);return t&&gAe(e),e}class xAe{constructor(t){arguments.length?this.root=vAe(t):(this.root=Tle({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Y6(this.root)])}toJSON(t){return yAe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Tle(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Tle(e,t){const n={bounds:new bo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Xm(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function jY(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Oo(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Xm(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function rc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function wAe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function tF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function mAt(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Il[i.marktype]).tip){for(s=tF(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let zY=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||I6(),this._tooltip=n||gAt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Xm(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=mAt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let u=o.x1+i[0]+r.left,l=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:s,height:a,left:u,top:l,right:u+s,bottom:l+a}}};function gAt(e,t,n,r){e.element().setAttribute("title",r||"")}class zS{constructor(t){this._el=null,this._bgcolor=null,this._loader=new rAe(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const yAt="keydown",vAt="keypress",bAt="keyup",EAe="dragenter",iN="dragleave",_Ae="dragover",Ij="pointerdown",xAt="pointerup",bP="pointermove",oN="pointerout",TAe="pointerover",Rj="mousedown",wAt="mouseup",CAe="mousemove",xP="mouseout",SAe="mouseover",wP="click",EAt="dblclick",_At="wheel",AAe="mousewheel",EP="touchstart",_P="touchmove",TP="touchend",TAt=[yAt,vAt,bAt,EAe,iN,_Ae,Ij,xAt,bP,oN,TAe,Rj,wAt,CAe,xP,SAe,wP,EAt,_At,AAe,EP,_P,TP],Nj=bP,aT=xP,Pj=wP;class US extends zY{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=TAt,this.pointermove=Sle([bP,CAe],[TAe,SAe],[oN,xP]),this.dragover=Sle([_Ae],[EAe],[iN]),this.pointerout=Ale([oN,xP]),this.dragleave=Ale([iN])}initialize(t,n,r){return this._canvas=t&&jY(t,"canvas"),[wP,Rj,Ij,bP,oN,iN].forEach(i=>Cle(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(AAe,t)}pointerdown(t){this._down=this._active,this.fire(Ij,t)}mousedown(t){this._down=this._active,this.fire(Rj,t)}click(t){this._down===this._active&&(this.fire(wP,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(EP,t,!0)}touchmove(t){this.fire(_P,t,!0)}touchend(t){this.fire(TP,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===Pj&&i&&i.href?this.handleHref(n,i,i.href):(t===Nj||t===aT)&&this.handleTooltip(n,i,t!==aT),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Cle(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=tF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Il[t.marktype].pick.call(this,s,t,n,r,i,o)}}const CAt=e=>e===EP||e===_P||e===TP?[EP,_P,TP]:[e];function Cle(e,t){CAt(t).forEach(n=>SAt(e,n))}function SAt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function S2(e,t,n){t.forEach(r=>e.fire(r,n))}function Sle(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?S2(this,e,r):((!i||!i.exit)&&S2(this,n,r),this._active=o,S2(this,t,r),S2(this,e,r))}}function Ale(e){return function(t){S2(this,e,t),this._active=null}}function AAt(){return typeof window<"u"&&window.devicePixelRatio||1}function DAt(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=s?AAt():i;e.width=t*u,e.height=n*u;for(const l in o)a[l]=o[l];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class CP extends zS{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new bo,this._tempb=new bo}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:f0(1,1,this._options.type),t&&this._canvas&&(rc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)DAt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||tt("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,u=kAt(i,o,s);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):IAt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Il[n.marktype];n.clip&&ASt(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const kAt=(e,t,n)=>new bo().set(0,0,t,n).translate(-e[0],-e[1]);function IAt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class DAe extends zY{constructor(t,n){super(t,n);const r=this;r._hrefHandler=pL(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=pL(r,(i,o)=>{r.handleTooltip(i,o,i.type!==aT)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(Pj,this._hrefHandler),i.removeEventListener(Nj,this._tooltipHandler),i.removeEventListener(aT,this._tooltipHandler)),this._svg=i=t&&jY(t,"svg"),i&&(i.addEventListener(Pj,this._hrefHandler),i.addEventListener(Nj,this._tooltipHandler),i.addEventListener(aT,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:pL(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const pL=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},kAe="aria-hidden",UY="aria-label",VY="role",HY="aria-roledescription",IAe="graphics-object",qY="graphics-symbol",RAe=(e,t,n)=>({[VY]:e,[HY]:t,[UY]:n||void 0}),RAt=Gd(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Dle={axis:{desc:"axis",caption:OAt},legend:{desc:"legend",caption:FAt},"title-text":{desc:"title",caption:e=>`Title text '${Ile(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Ile(e)}'`}},kle={ariaRole:VY,ariaRoleDescription:HY,description:UY};function NAe(e,t){const n=t.aria===!1;if(e(kAe,n||void 0),n||t.description==null)for(const r in kle)e(kle[r],void 0);else{const r=t.mark.marktype;e(UY,t.description),e(VY,t.ariaRole||(r==="group"?IAe:qY)),e(HY,t.ariaRoleDescription||`${r} mark`)}}function PAe(e){return e.aria===!1?{[kAe]:!0}:RAt[e.role]?null:Dle[e.role]?PAt(e,Dle[e.role]):NAt(e)}function NAt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return RAe(n?IAe:qY,`${t} mark container`,e.description)}function PAt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return RAe(t.role||qY,t.desc,n.description||r(n))}catch{return null}}function Ile(e){return rn(e.text).join(" ")}function OAt(e){const t=e.datum,n=e.orient,r=t.title?OAe(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Qx(a)?"discrete":a} scale with ${GSe(s,o,e)}`}function FAt(e){const t=e.datum,n=t.title?OAe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,u=s.dataflow.locale();return $At(r)+(n?` titled '${n}'`:"")+` for ${MAt(o)} with ${GSe(u,a,e)}`}function OAe(e){try{return rn(sr(e.items).items[0].text).join(" ")}catch{return null}}function MAt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+sr(e)}function $At(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const FAe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),LAt=e=>FAe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function WY(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},s=(u,l)=>(l!=null&&(t+=` ${u}="${LAt(l)}"`),a),a={open(u){o(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:s,text:u=>(n+=FAe(u),a),toString:()=>e};return a}const MAe=e=>$Ae(WY(),e)+"";function $Ae(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):$Ae(e,r)}return e.close()}const SP={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},AP={blend:"mix-blend-mode"},LAe={fill:"none","stroke-miterlimit":10},D_=0,Rle="http://www.w3.org/2000/xmlns/",Po=fC.xmlns;class GY extends zS{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=Oo(t,0,"svg",Po),this._svg.setAttributeNS(Rle,"xmlns",Po),this._svg.setAttributeNS(Rle,"xmlns:xlink",fC["xmlns:xlink"]),this._svg.setAttribute("version",fC.version),this._svg.setAttribute("class","marks"),rc(t,1),this._root=Oo(this._svg,D_,"g",Po),Qm(this._root,LAe),rc(this._svg,D_+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Qm(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Oo(t,D_,"rect",Po),Qm(r,{width:this._width,height:this._height,fill:n}));const i=MAe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),rc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Il[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Nle(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Nle(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Il[s],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Ple(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return rc(c,0),n._svg;c.setAttribute("class",wAe(n));const f=PAe(n);for(const p in f)Fa(c,p,f[p]);l||Fa(c,"pointer-events",u),Fa(c,"clip-path",n.clip?TY(this,n,n.group):null);let d=null,h=0;const m=p=>{const g=this.isDirty(p),v=Ple(p,c,d,a.tag,o);g&&(this._update(a,v,p),l&&zAt(this,v,p,i)),d=v,++h};return a.nested?n.items.length&&m(n.items[0]):Cf(n,m),rc(c,h),c}_update(t,n,r){ip=n,ra=n.__values__,NAe(uT,r),t.attr(uT,r,this);const i=VAt[t.type];i&&i.call(this,t,n,r),ip&&this.style(ip,r)}style(t,n){if(n!=null){for(const r in SP){let i=r==="font"?jS(n):n[r];if(i===ra[r])continue;const o=SP[r];i==null?t.removeAttribute(o):(wY(i)&&(i=KSe(i,this._defs.gradient,BAe())),t.setAttribute(o,i+"")),ra[r]=i}for(const r in AP)sN(t,AP[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=Oo(t,D_+1,"defs",Po)),i=BAt(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=Oo(t,D_+1,"defs",Po)),i=jAt(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):rc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Nle(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function BAt(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=Oo(e,n++,"pattern",Po);Qm(s,{id:mP+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=Oo(s,0,"rect",Po),Qm(s,{width:1,height:1,fill:`url(${BAe()}#${t.id})`}),e=Oo(e,n++,"radialGradient",Po),Qm(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Oo(e,n++,"linearGradient",Po),Qm(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=Oo(e,r,"stop",Po),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return rc(e,r),n}function jAt(e,t,n){let r;return e=Oo(e,n,"clipPath",Po),e.setAttribute("id",t.id),t.path?(r=Oo(e,0,"path",Po),r.setAttribute("d",t.path)):(r=Oo(e,0,"rect",Po),Qm(r,{x:0,y:0,width:t.width,height:t.height})),rc(e,1),n+1}function zAt(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;Cf(n,s=>{i=e.mark(t,s,i,r),++o}),rc(t,1+o)}function Ple(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Xm(s,r,Po),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Xm(s,"path",Po);o.appendChild(a),a.__data__=e;const u=Xm(s,"g",Po);o.appendChild(u),u.__data__=e;const l=Xm(s,"path",Po);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||UAt(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function UAt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let ip=null,ra=null;const VAt={group(e,t,n){const r=ip=t.childNodes[2];ra=r.__values__,e.foreground(uT,n,this),ra=t.__values__,ip=t.childNodes[1],e.content(uT,n,this);const i=ip=t.childNodes[0];e.background(uT,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==ra.events&&(Fa(r,"pointer-events",o),Fa(i,"pointer-events",o),ra.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Fa(r,"display",null),this.style(i,n),Fa(i,"stroke",null),s&&(n.fill=null),ra=r.__values__,this.style(r,n),s&&(n.fill=s),ip=null}else Fa(r,"display","none")},image(e,t,n){n.smooth===!1?(sN(t,"image-rendering","optimizeSpeed"),sN(t,"image-rendering","pixelated")):sN(t,"image-rendering",null)},text(e,t,n){const r=BS(n);let i,o,s,a;Kt(r)?(o=r.map(u=>O0(n,u)),i=o.join(`
`),i!==ra.text&&(rc(t,0),s=t.ownerDocument,a=P0(n),o.forEach((u,l)=>{const c=Xm(s,"tspan",Po);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ra.text=i)):(o=O0(n,r),o!==ra.text&&(t.textContent=o,ra.text=o)),Fa(t,"font-family",jS(n)),Fa(t,"font-size",uh(n)+"px"),Fa(t,"font-style",n.fontStyle),Fa(t,"font-variant",n.fontVariant),Fa(t,"font-weight",n.fontWeight)}};function uT(e,t,n){t!==ra[e]&&(n?HAt(ip,e,t,n):Fa(ip,e,t),ra[e]=t)}function sN(e,t,n){n!==ra[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ra[t]=n)}function Qm(e,t){for(const n in t)Fa(e,n,t[n])}function Fa(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function HAt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function BAe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class jAe extends zS{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=WY();n.open("svg",On({},fC,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",LAe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Il[n.marktype],i=r.tag,o=[NAe,r.attr];t.open("g",{class:wAe(n),"clip-path":n.clip?TY(this,n,n.group):null},PAe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const l=BS(a);if(Kt(l)){const c={x:0,dy:P0(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(O0(a,l[f])).close()}else t.text(O0(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Cf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):Cf(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,u,l,c)=>{o[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&qAt(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:mP+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function qAt(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=jS(t),e["font-size"]=uh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in SP){let a=t[s];const u=SP[s];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(wY(a)&&(a=KSe(a,i.gradient,"")),e[u]=a)}for(const s in AP){const a=t[s];a!=null&&(o=o||[],o.push(`${AP[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const Gc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function WAt(e){Gc.svgMarkTypes=e.svgMarkTypes??["text"],Gc.svgOnTop=e.svgOnTop??!0,Gc.debug=e.debug??!1}class Oj extends zS{constructor(t){super(t),this._svgRenderer=new GY(t),this._canvasRenderer=new CP(t)}initialize(t,n,r,i,o){this._root_el=Oo(t,0,"div");const s=Oo(this._root_el,0,"div"),a=Oo(this._root_el,1,"div");return this._root_el.style.position="relative",Gc.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Gc.svgOnTop?a:s,this._canvasEl=Gc.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return Gc.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Gc.svgMarkTypes.includes(o));this._svgRenderer.render(t,Gc.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Gc.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class zAe extends US{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Oo(Oo(t,0,"div"),Gc.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const UAe="canvas",VAe="hybrid",HAe="png",qAe="svg",WAe="none",Jm={Canvas:UAe,PNG:HAe,SVG:qAe,Hybrid:VAe,None:WAe},s1={};s1[UAe]=s1[HAe]={renderer:CP,headless:CP,handler:US};s1[qAe]={renderer:GY,headless:jAe,handler:DAe};s1[VAe]={renderer:Oj,headless:Oj,handler:zAe};s1[WAe]={};function nF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(s1[e]=t,this):s1[e]}function GAe(e,t,n){const r=[],i=new bo().union(t),o=e.marktype;return o?YAe(e,i,n,r):o==="group"?KAe(e,i,n,r):tt("Intersect scene must be mark node or group item.")}function YAe(e,t,n,r){if(GAt(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)KAe(i[a],t,n,r);else for(const u=Il[o].isect;a<s;++a){const l=i[a];XAe(l,t,u)&&r.push(l)}}return r}function GAt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function KAe(e,t,n,r){n&&n(e.mark)&&XAe(e,t,Il.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let u=0;u<o;++u)YAe(i[u],t,n,r);t.translate(s,a)}return r}function XAe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const mL=new bo;function QAe(e){const t=e.clip;if(Bn(t))t($S(mL.clear()));else if(t)mL.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(mL)}const YAt=1e-9;function YY(e,t,n){return e===t?!0:n==="path"?JAe(e,t):e instanceof Date&&t instanceof Date?+e==+t:r1(e)&&r1(t)?Math.abs(e-t)<=YAt:!e||!t||!Nn(e)&&!Nn(t)?e==t:KAt(e,t)}function JAe(e,t){return YY(Jx(e),Jx(t))}function KAt(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!YY(e[i],t[i],i))return!1;return typeof e==typeof t}function XAt(){nAe(),xCt()}const tw="top",Zc="left",sf="right",F0="bottom",QAt="top-left",JAt="top-right",ZAt="bottom-left",eDt="bottom-right",KY="start",Fj="middle",$a="end",tDt="x",nDt="y",rF="group",XY="axis",QY="title",rDt="frame",iDt="scope",JY="legend",ZAe="row-header",eDe="row-footer",tDe="row-title",nDe="column-header",rDe="column-footer",iDe="column-title",oDt="padding",sDt="symbol",oDe="fit",sDe="fit-x",aDe="fit-y",aDt="pad",ZY="none",xk="all",Mj="each",eK="flush",Zm="column",e0="row";function uDe(e){We.call(this,null,e)}Tt(uDe,We,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Il[i],s=o.bound;let a=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=wk(r,s),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===rF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(wk(l,s))),r.role){case XY:case JY:case QY:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(wk(l,s))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(wk(l,s))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return QAe(r),t.modifies("bounds")}});function wk(e,t,n){return t(e.bounds.clear(),e,n)}const Ole=":vega_identifier:";function tK(e){We.call(this,0,e)}tK.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Tt(tK,We,{transform(e,t){const n=uDt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function uDt(e){return e._signals[Ole]||(e._signals[Ole]=e.add(0))}function lDe(e){We.call(this,null,e)}Tt(lDe,We,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,lDt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===rF?Y6:G6;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function lDt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function cDe(e){We.call(this,null,e)}const Fle={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!fDe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},fDe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Mle=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(fDe(i,o=e[n].bounds,t))return!0},cDt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},fDt=(e,t,n)=>{var r=e.range(),i=new bo;return t===tw||t===F0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},$le=e=>(e.forEach(t=>t.opacity=1),e),Lle=(e,t)=>e.reflow(t.modified()).modifies("opacity");Tt(cDe,We,{transform(e,t){const n=Fle[e.method]||Fle.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&($le(i),t=Lle(t,e)),t;if(i=i.filter(cDt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=$le(i),t=Lle(t,e),o.length>=3&&Mle(o,r)){do o=n(o,r);while(o.length>=3&&Mle(o,r));o.length<3&&!sr(i).opacity&&(o.length>1&&(sr(o).opacity=0),sr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=fDt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{s(u)||(u.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function dDe(e){We.call(this,null,e)}Tt(dDe,We,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ea=new bo;function jb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function dDt(e){var t=e.items[0].orient;return t===Zc||t===sf}function hDt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function pDt(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,u=hDt(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,m=o.title&&i.items[u[2]].items[0],p=i.titlePadding,g=i.bounds,v=m&&$Y(m),b=0,w=0,E,_;switch(ea.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case tw:b=f||0,w=-c,_=Math.max(d,Math.min(h,-g.y1)),g.add(0,-_).add(l,0),m&&Ek(e,m,_,p,v,0,-1,g);break;case Zc:b=-c,w=f||0,_=Math.max(d,Math.min(h,-g.x1)),g.add(-_,0).add(0,l),m&&Ek(e,m,_,p,v,1,-1,g);break;case sf:b=n+c,w=f||0,_=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(_,l),m&&Ek(e,m,_,p,v,1,1,g);break;case F0:b=f||0,w=r+c,_=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,_),m&&Ek(e,m,_,p,0,0,1,g);break;default:b=i.x,w=i.y}return Qp(g.translate(b,w),i),jb(i,"x",b+s)|jb(i,"y",w+s)&&(i.bounds=ea,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Ek(e,t,n,r,i,o,s,a){const u=t.bounds;if(t.auto){const l=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Ble=(e,t)=>Math.floor(Math.min(e,t)),jle=(e,t)=>Math.ceil(Math.max(e,t));function mDt(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===rF)switch(i.role){case XY:case JY:case QY:break;case ZAe:s.rowheaders.push(...o);break;case eDe:s.rowfooters.push(...o);break;case nDe:s.colheaders.push(...o);break;case rDe:s.colfooters.push(...o);break;case tDe:s.rowtitle=o[0];break;case iDe:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function gDt(e){return new bo().set(0,0,e.width||0,e.height||0)}function yDt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function mi(e,t,n){const r=Nn(e)?e[t]:e;return r??(n!==void 0?n:0)}function zle(e){return e<0?Math.ceil(-e):0}function hDe(e,t,n){var r=!n.nodirty,i=n.bounds===eK?gDt:yDt,o=ea.set(0,0,0,0),s=mi(n.align,Zm),a=mi(n.align,e0),u=mi(n.padding,Zm),l=mi(n.padding,e0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),m=Array(c),p=0,g=Array(d),v=Array(f),b=0,w=Array(d),E=Array(d),_=Array(d),T,S,D,k,R,O,M,F,L,H,V;for(S=0;S<c;++S)m[S]=0;for(S=0;S<f;++S)v[S]=0;for(S=0;S<d;++S)O=t[S],R=_[S]=i(O),O.x=O.x||0,w[S]=0,O.y=O.y||0,E[S]=0,D=S%c,k=~~(S/c),p=Math.max(p,M=Math.ceil(R.x2)),b=Math.max(b,F=Math.ceil(R.y2)),m[D]=Math.max(m[D],M),v[k]=Math.max(v[k],F),h[S]=u+zle(R.x1),g[S]=l+zle(R.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(s===Mj)for(D=1;D<c;++D){for(V=0,S=D;S<d;S+=c)V<h[S]&&(V=h[S]);for(S=D;S<d;S+=c)h[S]=V+m[D-1]}else if(s===xk){for(V=0,S=0;S<d;++S)S%c&&V<h[S]&&(V=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=V+p)}else for(s=!1,D=1;D<c;++D)for(S=D;S<d;S+=c)h[S]+=m[D-1];if(a===Mj)for(k=1;k<f;++k){for(V=0,S=k*c,T=S+c;S<T;++S)V<g[S]&&(V=g[S]);for(S=k*c;S<T;++S)g[S]=V+v[k-1]}else if(a===xk){for(V=0,S=c;S<d;++S)V<g[S]&&(V=g[S]);for(S=c;S<d;++S)g[S]=V+b}else for(a=!1,k=1;k<f;++k)for(S=k*c,T=S+c;S<T;++S)g[S]+=v[k-1];for(L=0,S=0;S<d;++S)L=h[S]+(S%c?L:0),w[S]+=L-t[S].x;for(D=0;D<c;++D)for(H=0,S=D;S<d;S+=c)H+=g[S],E[S]+=H-t[S].y;if(s&&mi(n.center,Zm)&&f>1)for(S=0;S<d;++S)R=s===xk?p:m[S%c],L=R-_[S].x2-t[S].x-w[S],L>0&&(w[S]+=L/2);if(a&&mi(n.center,e0)&&c!==1)for(S=0;S<d;++S)R=a===xk?b:v[~~(S/c)],H=R-_[S].y2-t[S].y-E[S],H>0&&(E[S]+=H/2);for(S=0;S<d;++S)o.union(_[S].translate(w[S],E[S]));switch(L=mi(n.anchor,tDt),H=mi(n.anchor,nDt),mi(n.anchor,Zm)){case $a:L-=o.width();break;case Fj:L-=o.width()/2}switch(mi(n.anchor,e0)){case $a:H-=o.height();break;case Fj:H-=o.height()/2}for(L=Math.round(L),H=Math.round(H),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)O=t[S],O.x+=w[S]+=L,O.y+=E[S]+=H,o.union(O.mark.bounds.union(O.bounds.translate(w[S],E[S]))),r&&e.dirty(O);return o}function vDt(e,t,n){var r=mDt(t),i=r.marks,o=n.bounds===eK?bDt:xDt,s=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,m,p,g;const v=hDe(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(p=mi(n.headerBand,e0,null),c=_k(e,r.rowheaders,i,a,u,-mi(s,"rowHeader"),Ble,0,o,"x1",0,a,1,p)),r.colheaders&&(p=mi(n.headerBand,Zm,null),f=_k(e,r.colheaders,i,a,a,-mi(s,"columnHeader"),Ble,1,o,"y1",0,1,a,p)),r.rowfooters&&(p=mi(n.footerBand,e0,null),d=_k(e,r.rowfooters,i,a,u,mi(s,"rowFooter"),jle,0,o,"x2",a-1,a,1,p)),r.colfooters&&(p=mi(n.footerBand,Zm,null),h=_k(e,r.colfooters,i,a,a,mi(s,"columnFooter"),jle,1,o,"y2",l-a,1,a,p)),r.rowtitle&&(m=mi(n.titleAnchor,e0),g=mi(s,"rowTitle"),g=m===$a?d+g:c-g,p=mi(n.titleBand,e0,.5),Ule(e,r.rowtitle,g,0,v,p)),r.coltitle&&(m=mi(n.titleAnchor,Zm),g=mi(s,"columnTitle"),g=m===$a?h+g:f-g,p=mi(n.titleBand,Zm,.5),Ule(e,r.coltitle,g,1,v,p))}function bDt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function xDt(e,t){return e.bounds[t]}function _k(e,t,n,r,i,o,s,a,u,l,c,f,d,h){var m=n.length,p=0,g=0,v,b,w,E,_,T,S,D,k;if(!m)return p;for(v=c;v<m;v+=f)n[v]&&(p=s(p,u(n[v],l)));if(!t.length)return p;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),p+=o,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(v=c,b=0,E=t.length;b<E;++b,v+=f){for(T=t[b],_=T.mark.bounds,w=v;w>=0&&(S=n[w])==null;w-=d);a?(D=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),k=p):(D=p,k=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),_.union(T.bounds.translate(D-(T.x||0),k-(T.y||0))),T.x=D,T.y=k,e.dirty(T),g=s(g,_[l])}return g}function Ule(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function wDt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function EDt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function _Dt(e,t,n,r,i,o,s){const a=wDt(n,t),u=EDt(e,a("offset",0)),l=a("anchor",KY),c=l===$a?1:l===Fj?.5:0,f={align:Mj,bounds:a("bounds",eK),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Zc:f.anchor={x:Math.floor(r.x1)-u,column:$a,y:c*(s||r.height()+2*r.y1),row:l};break;case sf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(s||r.height()+2*r.y1),row:l};break;case tw:f.anchor={y:Math.floor(i.y1)-u,row:$a,x:c*(o||i.width()+2*i.x1),column:l};break;case F0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case QAt:f.anchor={x:u,y:u};break;case JAt:f.anchor={x:o-u,y:u,column:$a};break;case ZAt:f.anchor={x:u,y:s-u,row:$a};break;case eDt:f.anchor={x:o-u,y:s-u,column:$a,row:$a};break}return f}function TDt(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),SDt(e,n,n.items[0].items[0]),o=CDt(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===sDt&&ADt(n.items[0].items[0].items[0].items),i!==ZY&&(n.x=s=0,n.y=a=0),n.width=u,n.height=l,Qp(o.set(s,a,s+u,a+l),n),n.mark.bounds.clear().union(o),n}function CDt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function SDt(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&k_(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,u=t.titlePadding||0,l=r-s.x,c=r-s.y;switch(s.orient){case Zc:i+=Math.ceil(s.bounds.width())+u;break;case sf:case F0:break;default:o+=s.bounds.height()+u}switch((i||o)&&k_(e,n,i,o),s.orient){case Zc:c+=ab(t,n,s,a,1,1);break;case sf:l+=ab(t,n,s,$a,0,0)+u,c+=ab(t,n,s,a,1,1);break;case F0:l+=ab(t,n,s,a,0,0),c+=ab(t,n,s,$a,-1,0,1)+u;break;default:l+=ab(t,n,s,a,0,0)}(l||c)&&k_(e,s,l,c),(l=Math.round(s.bounds.x1-r))<0&&(k_(e,n,-l,0),k_(e,s,-l,0))}}function ab(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(o||!u)&&!s?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,h=i<=0?0:$Y(n);return Math.round(r===KY?f:r===$a?d-h:.5*(c-h))}function k_(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function ADt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function DDt(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===Zc||a===sf?r:n,m=0,p=0,g=0,v=0,b=0,w;if(s!==rF?a===Zc?(m=i.y2,h=i.y1):a===sf?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):a===Zc&&(m=r,h=0),w=u===KY?m:u===$a?h:(m+h)/2,d&&d.text){switch(a){case tw:case F0:b=f.bounds.height()+c;break;case Zc:v=f.bounds.width()+c;break;case sf:v=-f.bounds.width()-c;break}ea.clear().union(d.bounds),ea.translate(v-(d.x||0),b-(d.y||0)),jb(d,"x",v)|jb(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(ea),d.mark.bounds.clear().union(ea),e.dirty(d)),ea.clear().union(d.bounds)}else ea.clear();switch(ea.union(f.bounds),a){case tw:p=w,g=i.y1-ea.height()-l;break;case Zc:p=i.x1-ea.width()-l,g=w;break;case sf:p=i.x2+ea.width()+l,g=w;break;case F0:p=w,g=i.y2+l;break;default:p=o.x,g=o.y}return jb(o,"x",p)|jb(o,"y",g)&&(ea.translate(p,g),e.dirty(o),o.bounds.clear().union(ea),t.bounds.clear().union(ea),e.dirty(o)),o.bounds}function pDe(e){We.call(this,null,e)}Tt(pDe,We,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&vDt(n,r,e.layout),IDt(n,r,e)}),kDt(e.mark.group)?t.reflow():t}});function kDt(e){return e&&e.mark.role!=="legend-entry"}function IDt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new bo().set(0,0,i,o),a=s.clone(),u=s.clone(),l=[],c,f,d,h,m,p;for(m=0,p=r.length;m<p;++m)switch(f=r[m],f.role){case XY:h=dDt(f)?a:u,h.union(pDt(e,f,i,o));break;case QY:c=f;break;case JY:l.push(TDt(e,f));break;case rDt:case iDt:case ZAe:case eDe:case tDe:case nDe:case rDe:case iDe:a.union(f.bounds),u.union(f.bounds);break;default:s.union(f.bounds)}if(l.length){const g={};l.forEach(v=>{d=v.orient||sf,d!==ZY&&(g[d]||(g[d]=[])).push(v)});for(const v in g){const b=g[v];hDe(e,b,_Dt(b,v,n.legends,a,u,i,o))}l.forEach(v=>{const b=v.bounds;if(b.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=b,e.dirty(v)),n.autosize&&(n.autosize.type===oDe||n.autosize.type===sDe||n.autosize.type===aDe))switch(v.orient){case Zc:case sf:s.add(b.x1,0).add(b.x2,0);break;case tw:case F0:s.add(0,b.y1).add(0,b.y2)}else s.union(b)})}s.union(a).union(u),c&&s.union(DDt(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),RDt(e,t,s,n)}function RDt(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===oDt){const m=e.padding();s-=m.left+m.right,a-=m.top+m.bottom}o===ZY?(l=0,f=0,u=s,c=a):o===oDe?(u=Math.max(0,s-l-d),c=Math.max(0,a-f-h)):o===sDe?(u=Math.max(0,s-l-d),a=c+f+h):o===aDe?(s=u+l+d,c=Math.max(0,a-f-h)):o===aDt&&(s=u+l+d,a=c+f+h),e._resizeView(s,a,u,c,[l,f],i.resize)}const NDt=Object.freeze(Object.defineProperty({__proto__:null,bound:uDe,identifier:tK,mark:lDe,overlap:cDe,render:dDe,viewlayout:pDe},Symbol.toStringTag,{value:"Module"}));function mDe(e){We.call(this,null,e)}Tt(mDe,We,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=bY(o,s,e.minstep),u=e.format||USe(n,o,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?zSe(o,e.values,a):xY(o,a);return i&&(r.rem=i),i=l.map((c,f)=>Tr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Tr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function gDe(e){We.call(this,null,e)}function PDt(){return Tr({})}function ODt(e){const t=SS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Tt(gDe,We,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||PDt,o=e.key||Qt,s=this.value;return Kt(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&tt("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=ODt(o)),t.visit(t.ADD,a=>{const u=o(a);let l=s.get(u);l?l.exit?(s.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),s.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=o(a),l=s.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=o(a),l=s.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function yDe(e){We.call(this,null,e)}Tt(yDe,We,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(Kt(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Bg,u=i.enter||Bg,l=i.exit||Bg,c=(o&&!s?i[o]:a)||Bg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Bg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Bg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),s||c!==Bg){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function vDe(e){We.call(this,[],e)}Tt(vDe,We,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||JR,s=e.scale,a=+e.limit,u=bY(s,e.count==null?5:e.count,e.minstep),l=!!e.values||o===JR,c=e.format||WSe(n,s,u,o,e.formatSpecifier,e.formatType,l),f=e.values||qSe(s,u),d,h,m,p,g;return i&&(r.rem=i),o===JR?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Bn(m=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),p=i.reduce((v,b)=>Math.max(v,m(b,e)),0)):m=Za(p=m||8),i=i.map((v,b)=>Tr({index:b,label:c(v,b,i),value:v,offset:p,size:m(v,e)})),g&&(g=f[i.length],i.push(Tr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:p,size:m(g,e)})))):o===aCt?(d=s.domain(),h=LSe(s,d[0],sr(d)),f.length<3&&!e.values&&d[0]!==sr(d)&&(f=[d[0],sr(d)]),i=f.map((v,b)=>Tr({index:b,label:c(v,b,f),value:v,perc:h(v)}))):(m=f.length-1,h=vCt(s),i=f.map((v,b)=>Tr({index:b,label:c(v,b,f),value:v,perc:b?h(v):0,perc2:b===m?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const FDt=e=>e.source.x,MDt=e=>e.source.y,$Dt=e=>e.target.x,LDt=e=>e.target.y;function nK(e){We.call(this,{},e)}nK.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Tt(nK,We,{transform(e,t){var n=e.sourceX||FDt,r=e.sourceY||MDt,i=e.targetX||$Dt,o=e.targetY||LDt,s=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Vle.get(u+"-"+a)||Vle.get(u);return l||tt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const bDe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,BDt=(e,t,n,r)=>bDe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),xDe=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},jDt=(e,t,n,r)=>xDe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),wDe=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},zDt=(e,t,n,r)=>wDe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),UDt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,VDt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,HDt=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},qDt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},WDt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},GDt=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*s+","+u*a+" "+r*s+","+r*a},Vle=SS({line:bDe,"line-radial":BDt,arc:xDe,"arc-radial":jDt,curve:wDe,"curve-radial":zDt,"orthogonal-horizontal":UDt,"orthogonal-vertical":VDt,"orthogonal-radial":HDt,"diagonal-horizontal":qDt,"diagonal-vertical":WDt,"diagonal-radial":GDt});function rK(e){We.call(this,null,e)}rK.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Tt(rK,We,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||CS,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=s,d=(a-s)/Rxe(l),h=dl(c),m,p,g;for(e.sort&&h.sort((v,b)=>l[v]-l[b]),m=0;m<c;++m)g=l[h[m]],p=u[h[m]],p[r]=f,p[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const YDt=5;function KDt(e){const t=e.type;return!e.bins&&(t===Kx||t===IS||t===RS)}function EDe(e){return gY(e)&&e!==Dd}const XDt=Gd(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function _De(e){We.call(this,null,e),this.modified(!0)}Tt(_De,We,{transform(e,t){var n=t.dataflow,r=this.value,i=QDt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!XDt[i]){if(i==="padding"&&EDe(r.type))continue;Bn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return rkt(r,e,nkt(r,e,ZDt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function QDt(e){var t=e.type,n="",r;return t===Dd?Dd+"-"+Kx:(JDt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Dd+"-":r===3?cE+"-":""),(n+t||Kx).toLowerCase())}function JDt(e){const t=e.type;return gY(t)&&t!==i1&&t!==o1&&(e.scheme||e.range&&e.range.length&&e.range.every(bi))}function ZDt(e,t,n){const r=ekt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&KDt(e),a,u;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return EDe(o)&&t.padding&&i[0]!==sr(i)&&(i=tkt(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(TDe(o,i,n)),o===dY&&e.unknown(t.domainImplicit?N7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&bY(e,t.nice)||null),i.length}function ekt(e,t,n){return t?(e.domain(TDe(e.type,t,n)),t.length):-1}function tkt(e,t,n,r,i,o){var s=Math.abs(sr(n)-n[0]),a=s/(s-2*r),u=e===$p?WTe(t,null,a):e===RS?fj(t,null,a,.5):e===IS?fj(t,null,a,i||1):e===U6?GTe(t,null,a,o||1):qTe(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function TDe(e,t,n){if(PSe(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nn(t))}return t}function nkt(e,t,n){let r=t.bins;if(r&&!Kt(r)){const i=e.domain(),o=i[0],s=sr(i),a=r.step;let u=r.start==null?o:r.start,l=r.stop==null?s:r.stop;a||tt("Scale bins parameter missing step property."),u<o&&(u=a*Math.ceil(o/a)),l>s&&(l=a*Math.floor(s/a)),r=dl(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===hY&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function rkt(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=ikt(r,t,n);else if(t.scheme&&(o=okt(r,t,n),Bn(o))){if(e.interpolator)return e.interpolator(o);tt(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&OSe(r))return e.interpolator(q6($j(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(yY(t.interpolate,t.interpolateGamma)):Bn(e.round)?e.round(i):Bn(e.rangeRound)&&e.interpolate(i?mS:sg),o&&e.range($j(o,t.reverse))}function ikt(e,t,n){e!==ASe&&e!==Ej&&tt("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Ej?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*fY(n,i,r)]}function okt(e,t,n){var r=t.schemeExtent,i,o;return Kt(t.scheme)?o=q6(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=vY(i),o||tt(`Unrecognized scheme name: ${t.scheme}`)),n=e===H6?n+1:e===hY?n-1:e===Xx||e===V6?+t.schemeCount||YDt:n,OSe(e)?Hle(o,r,t.reverse):Bn(o)?$Se(Hle(o,r),n):e===dY?o:o.slice(0,n)}function Hle(e,t,n){return Bn(e)&&(t||n)?MSe(e,$j(t||[0,1],n)):e}function $j(e,t){return t?e.slice().reverse():e}function CDe(e){We.call(this,null,e)}Tt(CDe,We,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Y1(e.sort)),this.modified(n),t}});const qle="zero",SDe="center",ADe="normalize",DDe=["y0","y1"];function iK(e){We.call(this,null,e)}iK.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:qle,values:[qle,SDe,ADe]},{name:"as",type:"string",array:!0,length:2,default:DDe}]};Tt(iK,We,{transform(e,t){var n=e.as||DDe,r=n[0],i=n[1],o=Y1(e.sort),s=e.field||CS,a=e.offset===SDe?skt:e.offset===ADe?akt:ukt,u,l,c,f;for(u=lkt(t.source,e.groupby,o,s),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function skt(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,u;a<s;++a)u=e[a],u[r]=o,u[i]=o+=Math.abs(n(u))}function akt(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=s,c[i]=s=o*(l+=Math.abs(n(c)))}function ukt(e,t,n,r,i){for(var o=0,s=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=s,c[i]=s+=l):(c[r]=o,c[i]=o+=l)}function lkt(e,t,n,r){var i=[],o=p=>p(c),s,a,u,l,c,f,d,h,m;if(t==null)i.push(e.slice());else for(s={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,m=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>m&&(m=h),n&&d.sort(n)}return i.max=m,i}const ckt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:mDe,datajoin:gDe,encode:yDe,legendentries:vDe,linkpath:nK,pie:rK,scale:_De,sortitems:CDe,stack:iK},Symbol.toStringTag,{value:"Module"}));var fkt=Math.abs,Lj=Math.cos,DP=Math.sin,dkt=1e-6,kDe=Math.PI,Bj=kDe/2,Wle=hkt(2);function Gle(e){return e>1?Bj:e<-1?-Bj:Math.asin(e)}function hkt(e){return e>0?Math.sqrt(e):0}function pkt(e,t){var n=e*DP(t),r=30,i;do t-=i=(t+DP(t)-n)/(1+Lj(t));while(fkt(i)>dkt&&--r>0);return t/2}function mkt(e,t,n){function r(i,o){return[e*i*Lj(o=pkt(n,o)),t*DP(o)]}return r.invert=function(i,o){return o=Gle(o/t),[i/(e*Lj(o)),Gle((2*o+DP(2*o))/n)]},r}var gkt=mkt(Wle/Bj,Wle,kDe);function ykt(){return oh(gkt).scale(169.529)}const vkt=aEe(),jj=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function bkt(e,t){return function n(){const r=t();return r.type=e,r.path=aEe().projection(r),r.copy=r.copy||function(){const i=n();return jj.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},RSe(r)}}function oK(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(kP[e]=bkt(e,t),this):kP[e]||null}function IDe(e){return e&&e.path||vkt}const kP={albers:lEe,albersusa:Mct,azimuthalequalarea:$ct,azimuthalequidistant:Lct,conicconformal:zct,conicequalarea:O3,conicequidistant:Hct,equalEarth:Wct,equirectangular:Uct,gnomonic:Gct,identity:Yct,mercator:Bct,mollweide:ykt,naturalEarth1:Kct,orthographic:Xct,stereographic:Qct,transversemercator:Jct};for(const e in kP)oK(e,kP[e]);function xkt(){}const Rh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function RDe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),wkt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,m=c.length,p;h<m;++h)if(Ekt((p=c[h])[0],d)!==-1){p.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=[],d=[],h,m,p,g,v,b;for(h=m=-1,g=u[0]>=l,Rh[g<<1].forEach(w);++h<e-1;)p=g,g=u[h+1]>=l,Rh[p|g<<1].forEach(w);for(Rh[g<<0].forEach(w);++m<t-1;){for(h=-1,g=u[m*e+e]>=l,v=u[m*e]>=l,Rh[g<<1|v<<2].forEach(w);++h<e-1;)p=g,g=u[m*e+e+h+1]>=l,b=v,v=u[m*e+h+1]>=l,Rh[p|g<<1|v<<2|b<<3].forEach(w);Rh[g|v<<3].forEach(w)}for(h=-1,v=u[m*e]>=l,Rh[v<<2].forEach(w);++h<e-1;)b=v,v=u[m*e+h+1]>=l,Rh[v<<2|b<<3].forEach(w);Rh[v<<3].forEach(w);function w(E){var _=[E[0][0]+h,E[0][1]+m],T=[E[1][0]+h,E[1][1]+m],S=s(_),D=s(T),k,R;(k=d[S])?(R=f[D])?(delete d[k.end],delete f[R.start],k===R?(k.ring.push(T),c(k.ring)):f[k.start]=d[R.end]={start:k.start,end:R.end,ring:k.ring.concat(R.ring)}):(delete d[k.end],k.ring.push(T),d[k.end=D]=k):(k=f[D])?(R=d[S])?(delete f[k.start],delete d[R.end],k===R?(k.ring.push(T),c(k.ring)):f[R.start]=d[k.end]={start:R.start,end:k.end,ring:R.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift(_),f[k.start=S]=k):f[S]=d[D]={start:S,end:D,ring:[_,T]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],m=d|0,p=h|0,g,v=l[p*e+m];d>0&&d<e&&m===d&&(g=l[p*e+m-1],f[0]=d+(c-g)/(v-g)-.5),h>0&&h<t&&p===h&&(g=l[(p-1)*e+m],f[1]=h+(c-g)/(v-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||tt("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:xkt,r):n===a},r}function wkt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Ekt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=_kt(e,t[n]))return i;return 0}function _kt(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var u=e[o],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Tkt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Tkt(e,t,n){var r;return Ckt(e,t,n)&&Skt(e[r=+(e[0]===t[0])],n[r],t[r])}function Ckt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Skt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function NDe(e,t,n){return function(r){var i=Mp(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,u=t?S0(o,s,e):a/(e+1);return dl(o+u,s,u)}}function sK(e){We.call(this,null,e)}sK.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Tt(sK,We,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Fu,o=RDe().smooth(e.smooth!==!1),s=e.thresholds||Akt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,Kt(s)?s:s(c.values));Dkt(f,c,l,e),f.forEach(d=>{u.push(P6(l,Tr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Akt(e,t,n){const r=NDe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>da(t(i).values)))}function Dkt(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Bn(i)&&(i=i(n,r)),Bn(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(r1(i)?i:i[0])||1,a=(r1(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(PDe(t,s,a,u,l))}function PDe(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Yle(e,t,n){const r=e>=0?e:CG(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function gL(e){return Bn(e)?e:Za(+e)}function ODe(){var e=u=>u[0],t=u=>u[1],n=CS,r=[-1,-1],i=960,o=500,s=2;function a(u,l){const c=Yle(r[0],u,e)>>s,f=Yle(r[1],u,t)>>s,d=c?c+2:0,h=f?f+2:0,m=2*d+(i>>s),p=2*h+(o>>s),g=new Float32Array(m*p),v=new Float32Array(m*p);let b=g;u.forEach(E=>{const _=d+(+e(E)>>s),T=h+(+t(E)>>s);_>=0&&_<m&&T>=0&&T<p&&(g[_+T*m]+=+n(E))}),c>0&&f>0?(ub(m,p,g,v,c),lb(m,p,v,g,f),ub(m,p,g,v,c),lb(m,p,v,g,f),ub(m,p,g,v,c),lb(m,p,v,g,f)):c>0?(ub(m,p,g,v,c),ub(m,p,v,g,c),ub(m,p,g,v,c),b=v):f>0&&(lb(m,p,g,v,f),lb(m,p,v,g,f),lb(m,p,g,v,f),b=v);const w=l?Math.pow(2,-2*s):1/Rxe(b);for(let E=0,_=m*p;E<_;++E)b[E]*=w;return{values:b,scale:1<<s,width:m,height:p,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(u){return arguments.length?(e=gL(u),a):e},a.y=function(u){return arguments.length?(t=gL(u),a):t},a.weight=function(u){return arguments.length?(n=gL(u),a):n},a.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||tt("invalid size"),i=l,o=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||tt("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),a):1<<s},a.bandwidth=function(u){return arguments.length?(u=rn(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&tt("invalid bandwidth"),r=u,a):r},a}function ub(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+s*e]),a>=i&&(a>=o&&(u-=n[a-o+s*e]),r[a-i+s*e]=u/Math.min(a+1,e-1+o-a,o))}function lb(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[s+a*e]),a>=i&&(a>=o&&(u-=n[s+(a-o)*e]),r[s+(a-i)*e]=u/Math.min(a+1,t-1+o-a,o))}function aK(e){We.call(this,null,e)}aK.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const kkt=["x","y","weight","size","cellSize","bandwidth"];function FDe(e,t){return kkt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Tt(aK,We,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Ikt(r,e.groupby),o=(e.groupby||[]).map(Zi),s=FDe(ODe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>Tr(l({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Ikt(e,t){var n=[],r=c=>c(a),i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function uK(e){We.call(this,null,e)}uK.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Tt(uK,We,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=RDe().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||NDe(e.count||10,e.nice,!!i),s=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=FDe(ODe(),e)(i,!0),u=PDe(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=Kt(o)?o:o(i),i=r.size(s)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Tr),n}});const zj="Feature",lK="FeatureCollection",Rkt="MultiPoint";function cK(e){We.call(this,null,e)}cK.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Tt(cK,We,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Fu,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Ka(a))||o&&t.modified(Ka(o))||s&&t.modified(Ka(s)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),o&&s&&(t.visit(u,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:zj,geometry:{type:Rkt,coordinates:r}})),this.value={type:lK,features:n}}});function fK(e){We.call(this,null,e)}fK.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Tt(fK,We,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Fu,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=IDe(e.projection),n.materialize().reflow()):s=i===Fu||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Nkt(r,e.pointRadius);return n.visit(s,u=>u[o]=r(i(u))),r.pointRadius(a),n.modifies(o)}});function Nkt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function dK(e){We.call(this,null,e)}dK.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Tt(dK,We,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function hK(e){We.call(this,null,e)}hK.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Tt(hK,We,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Pkt(IDe(e.projection),e.field||Ef("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function Pkt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function pK(e){We.call(this,[],e),this.generator=mct()}pK.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Tt(pK,We,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Bn(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(FCe(n[0],i)):t.add.push(Tr(i)),n[0]=i,t}});function mK(e){We.call(this,null,e)}mK.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Tt(mK,We,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Fu,o=Fkt(e.opacity,e),s=Okt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?da(n.map(l=>da(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=On({},l,u);r||(f.$max=da(c.values||[])),l[a]=Mkt(c,f,s.dep?s:Za(s(f)),o.dep?o:Za(o(f)))}),t.reflow(!0).modifies(a)}});function Okt(e,t){let n;return Bn(e)?(n=r=>A0(e(r,t)),n.dep=MDe(e)):n=Za(A0(e||"#888")),n}function Fkt(e,t){let n;return Bn(e)?(n=r=>e(r,t),n.dep=MDe(e)):e?n=Za(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function MDe(e){if(!Bn(e))return!1;const t=Gd(Ka(e));return t.$x||t.$y||t.$value||t.$max}function Mkt(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?g=>c[g]:py,d=f0(u-s,l-a),h=d.getContext("2d"),m=h.getImageData(0,0,u-s,l-a),p=m.data;for(let g=a,v=0;g<l;++g){t.$y=g-a;for(let b=s,w=g*i;b<u;++b,v+=4){t.$x=b-s,t.$value=f(b+w);const E=n(t);p[v+0]=E.r,p[v+1]=E.g,p[v+2]=E.b,p[v+3]=~~(255*r(t))}}return h.putImageData(m,0,0),d}function $De(e){We.call(this,null,e),this.modified(!0)}Tt($De,We,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Lkt(e.type),jj.forEach(r=>{e[r]!=null&&Kle(n,r,e[r])})):jj.forEach(r=>{e.modified(r)&&Kle(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&$kt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $kt(e,t){const n=Bkt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Lkt(e){const t=oK((e||"mercator").toLowerCase());return t||tt("Unrecognized projection type: "+e),t()}function Kle(e,t,n){Bn(e[t])&&e[t](n)}function Bkt(e){return e=rn(e),e.length===1?e[0]:{type:lK,features:e.reduce((t,n)=>t.concat(jkt(n)),[])}}function jkt(e){return e.type===lK?e.features:rn(e).filter(t=>t!=null).map(t=>t.type===zj?t:{type:zj,geometry:t})}const zkt=Object.freeze(Object.defineProperty({__proto__:null,contour:uK,geojson:cK,geopath:fK,geopoint:dK,geoshape:hK,graticule:pK,heatmap:mK,isocontour:sK,kde2d:aK,projection:$De},Symbol.toStringTag,{value:"Module"})),Xle={center:olt,collide:Tlt,nbody:Flt,link:Slt,x:Mlt,y:$lt},A2="forces",Uj=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Ukt=["static","iterations"],LDe=["x","y","vx","vy"];function gK(e){We.call(this,null,e)}gK.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:LDe}]};Tt(gK,We,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Uj),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&BDe(n,e,0,t)):(this.value=n=Hkt(t.source,e),n.on("tick",Vkt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Ukt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==A2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(LDe)}});function Vkt(e,t){return()=>e.touch(t).run()}function Hkt(e,t){const n=Olt(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),BDe(n,t,!0).on("end",()=>o=!0)}function BDe(e,t,n,r){var i=rn(t.forces),o,s,a,u;for(o=0,s=Uj.length;o<s;++o)a=Uj[o],a!==A2&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)u=A2+o,a=n||t.modified(A2,o)?Wkt(i[o]):r&&qkt(i[o],r)?e.force(u):null,a&&e.force(u,a);for(s=e.numForces||0;o<s;++o)e.force(A2+o,null);return e.numForces=i.length,e}function qkt(e,t){var n,r;for(n in e)if(Bn(r=e[n])&&t.modified(Ka(r)))return 1;return 0}function Wkt(e){var t,n;hn(Xle,e.force)||tt("Unrecognized force: "+e.force),t=Xle[e.force]();for(n in e)Bn(t[n])&&Gkt(t[n],e[n],e);return t}function Gkt(e,t,n){e(Bn(t)?r=>t(r,n):t)}const Ykt=Object.freeze(Object.defineProperty({__proto__:null,force:gK},Symbol.toStringTag,{value:"Module"}));function Vj(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function yK(e){We.call(this,null,e)}yK.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Kkt=e=>e.values;Tt(yK,We,{transform(e,t){t.source||tt("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&N6(s.data)&&i.rem.push(s.data)}),this.value=o=uW({values:rn(e.keys).reduce((s,a)=>(s.key(a),s),Xkt()).entries(i.source)},Kkt),n&&o.each(s=>{s.children&&(s=Tr(s.data),i.add.push(s),i.source.push(s))}),Vj(o,Qt,Qt)),i.source.root=o,i}});function Xkt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],u={},l={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Jp(e){We.call(this,null,e)}const Qkt=(e,t)=>e.parent===t.parent?1:2;Tt(Jp,We,{transform(e,t){(!t.source||!t.source.root)&&tt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Y1(e.sort,s=>s.data)),Jkt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Qkt:CS);try{this.value=n(i)}catch(s){tt(s)}return i.each(s=>Zkt(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function Jkt(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function Zkt(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const Hj=["x","y","r","depth","children"];function vK(e){Jp.call(this,e)}vK.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Hj.length,default:Hj}]};Tt(vK,Jp,{layout:$ft,params:["radius","size","padding"],fields:Hj});const qj=["x0","y0","x1","y1","depth","children"];function bK(e){Jp.call(this,e)}bK.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qj.length,default:qj}]};Tt(bK,Jp,{layout:Lft,params:["size","round","padding"],fields:qj});function xK(e){We.call(this,null,e)}xK.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Tt(xK,We,{transform(e,t){t.source||tt("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Vj(Joe().id(e.key).parentId(e.parentKey)(i.source),e.key,_f):Vj(Joe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Qle={tidy:Yft,cluster:sft},Wj=["x","y","depth","children"];function wK(e){Jp.call(this,e)}wK.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Wj.length,default:Wj}]};Tt(wK,Jp,{layout(e){const t=e||"tidy";if(hn(Qle,t))return Qle[t]();tt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Wj});function EK(e){We.call(this,[],e)}EK.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Tt(EK,We,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||tt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[Qt(s)]=1),r.each(s=>{const a=s.data,u=s.parent&&s.parent.data;u&&o[Qt(a)]&&o[Qt(u)]&&i.add.push(Tr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Qt(s)]=1),n.forEach(s=>{(o[Qt(s.source)]||o[Qt(s.target)])&&i.mod.push(s)})),i}});const Jle={binary:Xft,dice:bS,slice:HO,slicedice:Qft,squarify:AEe,resquarify:Jft},Gj=["x0","y0","x1","y1","depth","children"];function _K(e){Jp.call(this,e)}_K.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Gj.length,default:Gj}]};Tt(_K,Jp,{layout(){const e=Kft();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{hn(Jle,t)?e.tile(Jle[t]):tt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Gj});const eIt=Object.freeze(Object.defineProperty({__proto__:null,nest:yK,pack:vK,partition:bK,stratify:xK,tree:wK,treelinks:EK,treemap:_K},Symbol.toStringTag,{value:"Module"})),yL=4278190080;function tIt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function nIt(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,u=f0(o,s).getContext("2d"),l=f0(o,s).getContext("2d"),c=a&&f0(o,s).getContext("2d");n.forEach(D=>aN(u,D,!1)),aN(l,t,!1),a&&aN(c,t,!0);const f=vL(u,o,s),d=vL(l,o,s),h=a&&vL(c,o,s),m=e.bitmap(),p=a&&e.bitmap();let g,v,b,w,E,_,T,S;for(v=0;v<s;++v)for(g=0;g<o;++g)E=v*o+g,_=f[E]&yL,S=d[E]&yL,T=a&&h[E]&yL,(_||T||S)&&(b=e(g),w=e(v),!i&&(_||S)&&m.set(b,w),a&&(_||T)&&p.set(b,w));return[m,p]}function vL(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function aN(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>aN(e,o.items,n))}):Il[r].draw(e,{items:n?t.map(rIt):t})}function rIt(e){const t=P6(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Nh=5,Pa=31,dC=32,$m=new Uint32Array(dC+1),Xc=new Uint32Array(dC+1);Xc[0]=0;$m[0]=~Xc[0];for(let e=1;e<=dC;++e)Xc[e]=Xc[e-1]<<1|1,$m[e]=~Xc[e];function iIt(e,t){const n=new Uint32Array(~~((e*t+dC)/dC));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Nh]&1<<(a&Pa)},set:(o,s)=>{const a=s*e+o;r(a>>>Nh,1<<(a&Pa))},clear:(o,s)=>{const a=s*e+o;i(a>>>Nh,~(1<<(a&Pa)))},getRange:(o,s,a,u)=>{let l=u,c,f,d,h;for(;l>=s;--l)if(c=l*e+o,f=l*e+a,d=c>>>Nh,h=f>>>Nh,d===h){if(n[d]&$m[c&Pa]&Xc[(f&Pa)+1])return!0}else{if(n[d]&$m[c&Pa]||n[h]&Xc[(f&Pa)+1])return!0;for(let m=d+1;m<h;++m)if(n[m])return!0}return!1},setRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Nh,d=c>>>Nh,f===d)r(f,$m[l&Pa]&Xc[(c&Pa)+1]);else for(r(f,$m[l&Pa]),r(d,Xc[(c&Pa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Nh,d=c>>>Nh,f===d)i(f,Xc[l&Pa]|$m[(c&Pa)+1]);else for(i(f,Xc[l&Pa]),i(d,$m[(c&Pa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,u)=>o<0||s<0||u>=t||a>=e}}function oIt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>iIt(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function sIt(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,u=a.length,l=s.datum.fontSize,c=yl.width(s.datum,s.datum.text);let f=0,d,h,m,p,g,v,b;for(let w=0;w<u;++w)d=a[w].x,m=a[w].y,h=a[w].x2===void 0?d:a[w].x2,p=a[w].y2===void 0?m:a[w].y2,g=(d+h)/2,v=(m+p)/2,b=Math.abs(h-d+p-m),b>=f&&(f=b,s.x=g,s.y=v);return g=c/2,v=l/2,d=s.x-g,h=s.x+g,m=s.y-v,p=s.y+v,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",m<0&&p<=o?s.baseline="top":0<=m&&o<p&&(s.baseline="bottom"),!0}}function IP(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function t0(e,t,n,r,i,o,s,a){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(l,f,c,d)||s.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function aIt(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function u(l,c,f,d,h){const m=e.invert(l),p=e.invert(c);let g=f,v=o,b;if(!IP(m,p,d,h,i,o)&&!t0(e,m,p,h,d,g,s,a)&&!t0(e,m,p,h,d,h,s,null)){for(;v-g>=1;)b=(g+v)/2,t0(e,m,p,h,d,b,s,a)?v=b:g=b;if(g>f)return[m,p,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=yl.width(l.datum,l.datum.text);let m=n?d:0,p=!1,g=!1,v=0,b,w,E,_,T,S,D,k,R,O,M,F,L,H,V,Q,K;for(let Z=0;Z<f;++Z){for(b=c[Z].x,E=c[Z].y,w=c[Z].x2===void 0?b:c[Z].x2,_=c[Z].y2===void 0?E:c[Z].y2,b>w&&(K=b,b=w,w=K),E>_&&(K=E,E=_,_=K),R=e(b),M=e(w),O=~~((R+M)/2),F=e(E),H=e(_),L=~~((F+H)/2),D=O;D>=R;--D)for(k=L;k>=F;--k)Q=u(D,k,m,h,d),Q&&([l.x,l.y,m,p]=Q);for(D=O;D<=M;++D)for(k=L;k<=H;++k)Q=u(D,k,m,h,d),Q&&([l.x,l.y,m,p]=Q);!p&&!n&&(V=Math.abs(w-b+_-E),T=(b+w)/2,S=(E+_)/2,V>=v&&!IP(T,S,h,d,i,o)&&!t0(e,T,S,d,h,d,s,null)&&(v=V,l.x=T,l.y=S,g=!0))}return p||g?(T=h/2,S=d/2,s.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const uIt=[-1,-1,1,1],lIt=[-1,1,-1,1];function cIt(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=yl.width(l.datum,l.datum.text),m=[];let p=n?d:0,g=!1,v=!1,b=0,w,E,_,T,S,D,k,R,O,M,F,L;for(let H=0;H<f;++H){for(w=c[H].x,_=c[H].y,E=c[H].x2===void 0?w:c[H].x2,T=c[H].y2===void 0?_:c[H].y2,m.push([e((w+E)/2),e((_+T)/2)]);m.length;)if([k,R]=m.pop(),!(s.get(k,R)||a.get(k,R)||u.get(k,R))){u.set(k,R);for(let V=0;V<4;++V)S=k+uIt[V],D=R+lIt[V],u.outOfBounds(S,D,S,D)||m.push([S,D]);if(S=e.invert(k),D=e.invert(R),O=p,M=o,!IP(S,D,h,d,i,o)&&!t0(e,S,D,d,h,O,s,a)&&!t0(e,S,D,d,h,d,s,null)){for(;M-O>=1;)F=(O+M)/2,t0(e,S,D,d,h,F,s,a)?M=F:O=F;O>p&&(l.x=S,l.y=D,p=O,g=!0)}}!g&&!n&&(L=Math.abs(E-w+T-_),S=(w+E)/2,D=(_+T)/2,L>=b&&!IP(S,D,h,d,i,o)&&!t0(e,S,D,d,h,d,s,null)&&(b=L,l.x=S,l.y=D,v=!0))}return g||v?(S=h/2,D=d/2,s.setRange(e(l.x-S),e(l.y-D),e(l.x+S),e(l.y+D)),l.align="center",l.baseline="middle",!0):!1}}const fIt=["right","center","left"],dIt=["bottom","middle","top"];function hIt(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=l.textWidth??0,h,m,p,g,v,b,w,E,_,T,S,D,k,R,O;for(let M=0;M<u;++M){if(h=(n[M]&3)-1,m=(n[M]>>>2&3)-1,p=h===0&&m===0||r[M]<0,g=h&&m?Math.SQRT1_2:1,v=r[M]<0?-1:1,b=c[1+h]+r[M]*h*g,S=c[4+m]+v*f*m/2+r[M]*m*g,E=S-f/2,_=S+f/2,D=e(b),R=e(E),O=e(_),!d)if(Zle(D,D,R,O,s,a,b,b,E,_,c,p))d=yl.width(l.datum,l.datum.text);else continue;if(T=b+v*d*h/2,b=T-d/2,w=T+d/2,D=e(b),k=e(w),Zle(D,k,R,O,s,a,b,w,E,_,c,p))return l.x=h?h*v<0?w:b:T,l.y=m?m*v<0?_:E:S,l.align=fIt[h*v+1],l.baseline=dIt[m*v+1],s.setRange(D,R,k,O),!0}return!1}}function Zle(e,t,n,r,i,o,s,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const bL=0,xL=4,wL=8,EL=0,_L=1,TL=2,pIt={"top-left":bL+EL,top:bL+_L,"top-right":bL+TL,left:xL+EL,middle:xL+_L,right:xL+TL,"bottom-left":wL+EL,bottom:wL+_L,"bottom-right":wL+TL},mIt={naive:sIt,"reduced-search":aIt,floodfill:cIt};function gIt(e,t,n,r,i,o,s,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=yIt(r,f),h=vIt(i,f),m=bIt(e[0].datum),p=m==="group"&&e[0].datum.items[u].marktype,g=p==="area",v=xIt(m,p,a,u),b=l===null||l===1/0,w=g&&c==="naive";let E=-1,_=-1;const T=e.map(R=>{const O=b?yl.width(R,R.text):void 0;return E=Math.max(E,O),_=Math.max(_,R.fontSize),{datum:R,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(R),textWidth:O}});l=l===null||l===1/0?Math.max(E,_)+Math.max(...r):l;const S=oIt(t[0],t[1],l);let D;if(!w){n&&T.sort((M,F)=>n(M.datum,F.datum));let R=!1;for(let M=0;M<h.length&&!R;++M)R=h[M]===5||d[M]<0;const O=(m&&s||g)&&e.map(M=>M.datum);D=o.length||O?nIt(S,O||[],o,R,g):tIt(S,s&&T)}const k=g?mIt[c](S,D,s,u):hIt(S,D,h,d);return T.forEach(R=>R.opacity=+k(R)),T}function yIt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function vIt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=pIt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function bIt(e){return e&&e.mark&&e.mark.marktype}function xIt(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const Yj=["x","y","opacity","align","baseline"],jDe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function TK(e){We.call(this,null,e)}TK.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:jDe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Yj.length,default:Yj}]};Tt(TK,We,{transform(e,t){function n(o){const s=e[o];return Bn(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&tt("Size parameter should be specified as a [width, height] array.");const i=e.as||Yj;return gIt(t.materialize(t.SOURCE).source||[],e.size,e.sort,rn(e.offset==null?1:e.offset),rn(e.anchor||jDe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const wIt=Object.freeze(Object.defineProperty({__proto__:null,label:TK},Symbol.toStringTag,{value:"Module"}));function zDe(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function CK(e){We.call(this,null,e)}CK.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Tt(CK,We,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=zDe(r,e.groupby),o=(e.groupby||[]).map(Zi),s=o.length,a=e.as||[Zi(e.x),Zi(e.y)],u=[];i.forEach(l=>{ZCe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Tr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Kj={constant:$G,linear:LG,log:KCe,exp:XCe,pow:QCe,quad:BG,poly:JCe},EIt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function SK(e){We.call(this,null,e)}SK.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Kj)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Tt(SK,We,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=zDe(r,e.groupby),o=(e.groupby||[]).map(Zi),s=e.method||"linear",a=e.order==null?3:e.order,u=EIt(s,a),l=e.as||[Zi(e.x),Zi(e.y)],c=Kj[s],f=[];let d=e.extent;hn(Kj,s)||tt("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const p=c(h,e.x,e.y,a);if(e.params){f.push(Tr({keys:h.dims,coef:p.coef,rSquared:p.rSquared}));return}const g=d||Mp(h,e.x),v=b=>{const w={};for(let E=0;E<o.length;++E)w[o[E]]=h.dims[E];w[l[0]]=b[0],w[l[1]]=b[1],f.push(Tr(w))};s==="linear"||s==="constant"?g.forEach(b=>v([b,p.predict(b)])):j6(p.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const _It=Object.freeze(Object.defineProperty({__proto__:null,loess:CK,regression:SK},Symbol.toStringTag,{value:"Module"}));function AK(e){We.call(this,null,e)}AK.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const TIt=[-1e5,-1e5,1e5,1e5];Tt(AK,We,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:TIt;const o=this.value=Xq.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const u=o.cellPolygon(s);r[s][n]=u&&!SIt(u)?CIt(u):null}return t.reflow(e.modified()).modifies(n)}});function CIt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function SIt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const AIt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:AK},Symbol.toStringTag,{value:"Module"}));var CL=Math.PI/180,D2=64,uN=2048;function DIt(){var e=[256,256],t,n,r,i,o,s,a,u=UDe,l=[],c=Math.random,f={};f.layout=function(){for(var m=d(f0()),p=OIt((e[0]>>5)*e[1]),g=null,v=l.length,b=-1,w=[],E=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:o(T),rotate:s(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,S)=>S.size-T.size);++b<v;){var _=E[b];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,kIt(m,_,E,b),_.hasText&&h(p,_,g)&&(w.push(_),g?RIt(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return w};function d(m){m.width=m.height=1;var p=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(D2<<5)/p,m.height=uN/p;var g=m.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:p}}function h(m,p,g){for(var v=p.x,b=p.y,w=Math.hypot(e[0],e[1]),E=u(e),_=c()<.5?1:-1,T=-_,S,D,k;(S=E(T+=_))&&(D=~~S[0],k=~~S[1],!(Math.min(Math.abs(D),Math.abs(k))>=w));)if(p.x=v+D,p.y=b+k,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>e[0]||p.y+p.y1>e[1])&&(!g||!IIt(p,m,e[0]))&&(!g||NIt(p,g))){for(var R=p.sprite,O=p.width>>5,M=e[0]>>5,F=p.x-(O<<4),L=F&127,H=32-L,V=p.y1-p.y0,Q=(p.y+p.y0)*M+(F>>5),K,Z=0;Z<V;Z++){K=0;for(var U=0;U<=O;U++)m[Q+U]|=K<<H|(U<O?(K=R[Z*O+U])>>>L:0);Q+=M}return p.sprite=null,!0}return!1}return f.words=function(m){return arguments.length?(l=m,f):l},f.size=function(m){return arguments.length?(e=[+m[0],+m[1]],f):e},f.font=function(m){return arguments.length?(n=jg(m),f):n},f.fontStyle=function(m){return arguments.length?(i=jg(m),f):i},f.fontWeight=function(m){return arguments.length?(o=jg(m),f):o},f.rotate=function(m){return arguments.length?(s=jg(m),f):s},f.text=function(m){return arguments.length?(t=jg(m),f):t},f.spiral=function(m){return arguments.length?(u=FIt[m]||m,f):u},f.fontSize=function(m){return arguments.length?(r=jg(m),f):r},f.padding=function(m){return arguments.length?(a=jg(m),f):a},f.random=function(m){return arguments.length?(c=m,f):c},f}function kIt(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(D2<<5)/o,uN/o);var s=0,a=0,u=0,l=n.length,c,f,d,h,m;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var p=Math.sin(t.rotate*CL),g=Math.cos(t.rotate*CL),v=c*g,b=c*p,w=d*g,E=d*p;c=Math.max(Math.abs(v+E),Math.abs(v-E))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(d>u&&(u=d),s+c>=D2<<5&&(s=0,a+=u,u=0),a+d>=uN)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*CL),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var _=i.getImageData(0,0,(D2<<5)/o,uN/o).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var S=0,D=-1;for(m=0;m<d;m++){for(h=0;h<c;h++){var k=f*m+(h>>5),R=_[(a+m)*(D2<<5)+(s+h)<<2]?1<<31-h%32:0;T[k]|=R,S|=R}S?D=m:(t.y0++,d--,m--,a++)}t.y1=t.y0+D,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function IIt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function RIt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function NIt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function UDe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function PIt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function OIt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function jg(e){return typeof e=="function"?e:function(){return e}}var FIt={archimedean:UDe,rectangular:PIt};const VDe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],MIt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function DK(e){We.call(this,DIt(),e)}DK.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:VDe}]};Tt(DK,We,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&tt("Wordcloud size dimensions must be non-zero.");function n(m){const p=e[m];return Bn(p)&&t.modified(p.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||MIt.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||VDe;let a=e.fontSize||14,u;if(Bn(a)?u=e.fontSizeRange:a=Za(a),u){const m=a,p=gr("sqrt")().domain(Mp(i,m)).range(u);a=g=>p(m(g))}i.forEach(m=>{m[s[0]]=NaN,m[s[1]]=NaN,m[s[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(gc).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let m=0,p,g;m<h;++m)p=l[m],g=p.datum,g[s[0]]=p.x+f,g[s[1]]=p.y+d,g[s[2]]=p.font,g[s[3]]=p.size,g[s[4]]=p.style,g[s[5]]=p.weight,g[s[6]]=p.rotate;return t.reflow(r).modifies(s)}});const $It=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:DK},Symbol.toStringTag,{value:"Module"})),LIt=e=>new Uint8Array(e),BIt=e=>new Uint16Array(e),lT=e=>new Uint32Array(e);function jIt(){let e=8,t=[],n=lT(0),r=Tk(0,e),i=Tk(0,e);return{data:()=>t,seen:()=>n=zIt(n,t.length),add(o){for(let s=0,a=t.length,u=o.length,l;s<u;++s)l=o[s],l._index=a++,t.push(l)},remove(o,s){const a=t.length,u=Array(a-o),l=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=Tk(o,e,r),i=Tk(o,e))}}}function zIt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Tk(e,t,n){const r=(t<257?LIt:t<65537?BIt:lT)(e);return n&&r.set(n),r}function ece(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return s}}}function tce(){let e=lT(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=lT(f);let h=Array(f),m,p,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=UIt(h,d),c)m=t,p=e,t=Array(c+f),e=lT(c+f),VIt(l,m,p,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function o(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function s(a,u){let l;return u?l=u.length:(u=t,l=n),[Mit(u,a[0],0,l),C0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function UIt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),jit(e,t)}function VIt(e,t,n,r,i,o,s,a,u){let l=0,c=0,f;for(f=0;l<r&&c<s;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<s;++c,++f)a[f]=i[c],u[f]=o[c]+e}function kK(e){We.call(this,jIt(),e),this._indices=null,this._dims=null}kK.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Tt(kK,We,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,u,l;for(;a<s;++a)u=n[a].fname,l=i[u]||(i[u]=tce()),o.push(ece(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,m={};let p,g,v,b,w,E,_,T,S;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,_=0,T=b.length;_<T;++_)E[b[_]._index]=1;for(_=0;_<h;++_)S=r[_],(!s[_]||e.modified("fields",_)||t.modified(S.fields))&&(v=S.fname,(p=m[v])||(o[v]=g=tce(),m[v]=p=g.insert(S,t.source,0)),s[_]=ece(g,_,i[_]).onAdd(p,u));for(_=0,T=a.data().length;_<T;++_)w[_]||(l[_]!==u[_]?f.push(_):E[_]&&u[_]!==c&&d.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,m,p;i.resize(c,f),i.add(r);const g=i.curr(),v=i.prev(),b=i.all();for(h=0;h<f;++h)m=a[h].fname,p=u[m]||(u[m]=s[m].insert(a[h],r,d)),o[h].onAdd(p,g);for(;d<c;++d)v[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,u,l;for(a=0,u=s.length;a<u;++a)l=s[a]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,m;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,s[h]=m=o[h],o[h]=a,m!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,u,l;for(n.filters=0,l=0;l<s;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<s;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],m=l[1],p=e.one;let g,v,b;if(f<h)for(g=f,v=Math.min(h,d);g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;else if(f>h)for(g=h,v=Math.min(f,m);g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;if(d>m)for(g=Math.max(f,m),v=d;g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;else if(d<m)for(g=Math.max(h,d),v=m;g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let m,p,g;if(l<f)for(m=l,p=Math.min(f,c);m<p;++m)g=s[m],o[g]^=h,n.push(g);else if(l>f)for(m=f,p=Math.min(l,d);m<p;++m)g=s[m],o[g]^=h,r.push(g);if(c>d)for(m=Math.max(l,d),p=c;m<p;++m)g=s[m],o[g]^=h,n.push(g);else if(c<d)for(m=Math.max(f,c),p=d;m<p;++m)g=s[m],o[g]^=h,r.push(g);e.range=t.slice()}});function IK(e){We.call(this,null,e)}IK.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Tt(IK,We,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:s[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?s[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});const HIt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:kK,resolvefilter:IK},Symbol.toStringTag,{value:"Module"})),qIt="RawCode",a1="Literal",WIt="Property",GIt="Identifier",YIt="ArrayExpression",KIt="BinaryExpression",HDe="CallExpression",XIt="ConditionalExpression",QIt="LogicalExpression",JIt="MemberExpression",ZIt="ObjectExpression",eRt="UnaryExpression";function Of(e){this.type=e}Of.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=tRt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function tRt(e){switch(e.type){case YIt:return e.elements;case KIt:case QIt:return[e.left,e.right];case HDe:return[e.callee].concat(e.arguments);case XIt:return[e.test,e.consequent,e.alternate];case JIt:return[e.object,e.property];case ZIt:return e.properties;case WIt:return[e.key,e.value];case eRt:return[e.argument];case GIt:case a1:case qIt:default:return[]}}var lh,Ht,Je,ma,Fr,iF=1,VS=2,u1=3,dg=4,oF=5,Q1=6,wu=7,HS=8,nRt=9;lh={};lh[iF]="Boolean";lh[VS]="<end>";lh[u1]="Identifier";lh[dg]="Keyword";lh[oF]="Null";lh[Q1]="Numeric";lh[wu]="Punctuator";lh[HS]="String";lh[nRt]="RegularExpression";var rRt="ArrayExpression",iRt="BinaryExpression",oRt="CallExpression",sRt="ConditionalExpression",qDe="Identifier",aRt="Literal",uRt="LogicalExpression",lRt="MemberExpression",cRt="ObjectExpression",fRt="Property",dRt="UnaryExpression",rs="Unexpected token %0",hRt="Unexpected number",pRt="Unexpected string",mRt="Unexpected identifier",gRt="Unexpected reserved word",yRt="Unexpected end of input",Xj="Invalid regular expression",SL="Invalid regular expression: missing /",WDe="Octal literals are not allowed in strict mode.",vRt="Duplicate data property in object literal not allowed in strict mode",Fs="ILLEGAL",hC="Disabled.",bRt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),xRt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function sF(e,t){if(!e)throw new Error("ASSERT: "+t)}function zh(e){return e>=48&&e<=57}function RK(e){return"0123456789abcdefABCDEF".includes(e)}function cT(e){return"01234567".includes(e)}function wRt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function pC(e){return e===10||e===13||e===8232||e===8233}function qS(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&bRt.test(String.fromCharCode(e))}function RP(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&xRt.test(String.fromCharCode(e))}const ERt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function GDe(){for(;Je<ma;){const e=Ht.charCodeAt(Je);if(wRt(e)||pC(e))++Je;else break}}function Qj(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Je<ma&&RK(Ht[Je])?(r=Ht[Je++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},rs,Fs);return String.fromCharCode(i)}function _Rt(){var e,t,n,r;for(e=Ht[Je],t=0,e==="}"&&pr({},rs,Fs);Je<ma&&(e=Ht[Je++],!!RK(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},rs,Fs),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function YDe(){var e,t;for(e=Ht.charCodeAt(Je++),t=String.fromCharCode(e),e===92&&(Ht.charCodeAt(Je)!==117&&pr({},rs,Fs),++Je,e=Qj("u"),(!e||e==="\\"||!qS(e.charCodeAt(0)))&&pr({},rs,Fs),t=e);Je<ma&&(e=Ht.charCodeAt(Je),!!RP(e));)++Je,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ht.charCodeAt(Je)!==117&&pr({},rs,Fs),++Je,e=Qj("u"),(!e||e==="\\"||!RP(e.charCodeAt(0)))&&pr({},rs,Fs),t+=e);return t}function TRt(){var e,t;for(e=Je++;Je<ma;){if(t=Ht.charCodeAt(Je),t===92)return Je=e,YDe();if(RP(t))++Je;else break}return Ht.slice(e,Je)}function CRt(){var e,t,n;return e=Je,t=Ht.charCodeAt(Je)===92?YDe():TRt(),t.length===1?n=u1:ERt.hasOwnProperty(t)?n=dg:t==="null"?n=oF:t==="true"||t==="false"?n=iF:n=u1,{type:n,value:t,start:e,end:Je}}function AL(){var e=Je,t=Ht.charCodeAt(Je),n,r=Ht[Je],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Je,{type:wu,value:String.fromCharCode(t),start:e,end:Je};default:if(n=Ht.charCodeAt(Je+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Je+=2,{type:wu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Je};case 33:case 61:return Je+=2,Ht.charCodeAt(Je)===61&&++Je,{type:wu,value:Ht.slice(e,Je),start:e,end:Je}}}if(s=Ht.substr(Je,4),s===">>>=")return Je+=4,{type:wu,value:s,start:e,end:Je};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return Je+=3,{type:wu,value:o,start:e,end:Je};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Je+=2,{type:wu,value:i,start:e,end:Je};if(i==="//"&&pr({},rs,Fs),"<>=!+-*%&|^/".includes(r))return++Je,{type:wu,value:r,start:e,end:Je};pr({},rs,Fs)}function SRt(e){let t="";for(;Je<ma&&RK(Ht[Je]);)t+=Ht[Je++];return t.length===0&&pr({},rs,Fs),qS(Ht.charCodeAt(Je))&&pr({},rs,Fs),{type:Q1,value:parseInt("0x"+t,16),start:e,end:Je}}function ARt(e){let t="0"+Ht[Je++];for(;Je<ma&&cT(Ht[Je]);)t+=Ht[Je++];return(qS(Ht.charCodeAt(Je))||zh(Ht.charCodeAt(Je)))&&pr({},rs,Fs),{type:Q1,value:parseInt(t,8),octal:!0,start:e,end:Je}}function nce(){var e,t,n;if(n=Ht[Je],sF(zh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Je,e="",n!=="."){if(e=Ht[Je++],n=Ht[Je],e==="0"){if(n==="x"||n==="X")return++Je,SRt(t);if(cT(n))return ARt(t);n&&zh(n.charCodeAt(0))&&pr({},rs,Fs)}for(;zh(Ht.charCodeAt(Je));)e+=Ht[Je++];n=Ht[Je]}if(n==="."){for(e+=Ht[Je++];zh(Ht.charCodeAt(Je));)e+=Ht[Je++];n=Ht[Je]}if(n==="e"||n==="E")if(e+=Ht[Je++],n=Ht[Je],(n==="+"||n==="-")&&(e+=Ht[Je++]),zh(Ht.charCodeAt(Je)))for(;zh(Ht.charCodeAt(Je));)e+=Ht[Je++];else pr({},rs,Fs);return qS(Ht.charCodeAt(Je))&&pr({},rs,Fs),{type:Q1,value:parseFloat(e),start:t,end:Je}}function DRt(){var e="",t,n,r,i,o=!1;for(t=Ht[Je],sF(t==="'"||t==='"',"String literal must starts with a quote"),n=Je,++Je;Je<ma;)if(r=Ht[Je++],r===t){t="";break}else if(r==="\\")if(r=Ht[Je++],!r||!pC(r.charCodeAt(0)))switch(r){case"u":case"x":Ht[Je]==="{"?(++Je,e+=_Rt()):e+=Qj(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:cT(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),Je<ma&&cT(Ht[Je])&&(o=!0,i=i*8+"01234567".indexOf(Ht[Je++]),"0123".includes(r)&&Je<ma&&cT(Ht[Je])&&(i=i*8+"01234567".indexOf(Ht[Je++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ht[Je]===`
`&&++Je;else{if(pC(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},rs,Fs),{type:HS,value:e,octal:o,start:n,end:Je}}function kRt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},Xj)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},Xj)}try{return new RegExp(e,t)}catch{return null}}function IRt(){var e,t,n,r,i;for(e=Ht[Je],sF(e==="/","Regular expression literal must start with a slash"),t=Ht[Je++],n=!1,r=!1;Je<ma;)if(e=Ht[Je++],t+=e,e==="\\")e=Ht[Je++],pC(e.charCodeAt(0))&&pr({},SL),t+=e;else if(pC(e.charCodeAt(0)))pr({},SL);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},SL),i=t.substr(1,t.length-2),{value:i,literal:t}}function RRt(){var e,t,n;for(t="",n="";Je<ma&&(e=Ht[Je],!!RP(e.charCodeAt(0)));)++Je,e==="\\"&&Je<ma?pr({},rs,Fs):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},Xj,n),{value:n,literal:t}}function NRt(){var e,t,n,r;return Fr=null,GDe(),e=Je,t=IRt(),n=RRt(),r=kRt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Je}}function PRt(e){return e.type===u1||e.type===dg||e.type===iF||e.type===oF}function KDe(){if(GDe(),Je>=ma)return{type:VS,start:Je,end:Je};const e=Ht.charCodeAt(Je);return qS(e)?CRt():e===40||e===41||e===59?AL():e===39||e===34?DRt():e===46?zh(Ht.charCodeAt(Je+1))?nce():AL():zh(e)?nce():AL()}function Tu(){const e=Fr;return Je=e.end,Fr=KDe(),Je=e.end,e}function XDe(){const e=Je;Fr=KDe(),Je=e}function ORt(e){const t=new Of(rRt);return t.elements=e,t}function rce(e,t,n){const r=new Of(e==="||"||e==="&&"?uRt:iRt);return r.operator=e,r.left=t,r.right=n,r}function FRt(e,t){const n=new Of(oRt);return n.callee=e,n.arguments=t,n}function MRt(e,t,n){const r=new Of(sRt);return r.test=e,r.consequent=t,r.alternate=n,r}function NK(e){const t=new Of(qDe);return t.name=e,t}function k2(e){const t=new Of(aRt);return t.value=e.value,t.raw=Ht.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function ice(e,t,n){const r=new Of(lRt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function $Rt(e){const t=new Of(cRt);return t.properties=e,t}function oce(e,t,n){const r=new Of(fRt);return r.key=t,r.value=n,r.kind=e,r}function LRt(e,t){const n=new Of(dRt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(sF(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=Je,n.description=i,n}function aF(e){e.type===VS&&pr(e,yRt),e.type===Q1&&pr(e,hRt),e.type===HS&&pr(e,pRt),e.type===u1&&pr(e,mRt),e.type===dg&&pr(e,gRt),pr(e,rs,e.value)}function ga(e){const t=Tu();(t.type!==wu||t.value!==e)&&aF(t)}function ci(e){return Fr.type===wu&&Fr.value===e}function DL(e){return Fr.type===dg&&Fr.value===e}function BRt(){const e=[];for(Je=Fr.start,ga("[");!ci("]");)ci(",")?(Tu(),e.push(null)):(e.push(l1()),ci("]")||ga(","));return Tu(),ORt(e)}function sce(){Je=Fr.start;const e=Tu();return e.type===HS||e.type===Q1?(e.octal&&pr(e,WDe),k2(e)):NK(e.value)}function jRt(){var e,t,n,r;if(Je=Fr.start,e=Fr,e.type===u1)return n=sce(),ga(":"),r=l1(),oce("init",n,r);if(e.type===VS||e.type===wu)aF(e);else return t=sce(),ga(":"),r=l1(),oce("init",t,r)}function zRt(){var e=[],t,n,r,i={},o=String;for(Je=Fr.start,ga("{");!ci("}");)t=jRt(),t.key.type===qDe?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},vRt):i[r]=!0,e.push(t),ci("}")||ga(",");return ga("}"),$Rt(e)}function URt(){ga("(");const e=PK();return ga(")"),e}const VRt={if:1};function HRt(){var e,t,n;if(ci("("))return URt();if(ci("["))return BRt();if(ci("{"))return zRt();if(e=Fr.type,Je=Fr.start,e===u1||VRt[Fr.value])n=NK(Tu().value);else if(e===HS||e===Q1)Fr.octal&&pr(Fr,WDe),n=k2(Tu());else{if(e===dg)throw new Error(hC);e===iF?(t=Tu(),t.value=t.value==="true",n=k2(t)):e===oF?(t=Tu(),t.value=null,n=k2(t)):ci("/")||ci("/=")?(n=k2(NRt()),XDe()):aF(Tu())}return n}function qRt(){const e=[];if(ga("("),!ci(")"))for(;Je<ma&&(e.push(l1()),!ci(")"));)ga(",");return ga(")"),e}function WRt(){Je=Fr.start;const e=Tu();return PRt(e)||aF(e),NK(e.value)}function GRt(){return ga("."),WRt()}function YRt(){ga("[");const e=PK();return ga("]"),e}function KRt(){var e,t,n;for(e=HRt();;)if(ci("."))n=GRt(),e=ice(".",e,n);else if(ci("("))t=qRt(),e=FRt(e,t);else if(ci("["))n=YRt(),e=ice("[",e,n);else break;return e}function ace(){const e=KRt();if(Fr.type===wu&&(ci("++")||ci("--")))throw new Error(hC);return e}function lN(){var e,t;if(Fr.type!==wu&&Fr.type!==dg)t=ace();else{if(ci("++")||ci("--"))throw new Error(hC);if(ci("+")||ci("-")||ci("~")||ci("!"))e=Tu(),t=lN(),t=LRt(e.value,t);else{if(DL("delete")||DL("void")||DL("typeof"))throw new Error(hC);t=ace()}}return t}function uce(e){let t=0;if(e.type!==wu&&e.type!==dg)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function XRt(){var e,t,n,r,i,o,s,a,u,l;if(e=Fr,u=lN(),r=Fr,i=uce(r),i===0)return u;for(r.prec=i,Tu(),t=[e,Fr],s=lN(),o=[u,r,s];(i=uce(Fr))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=rce(a,u,s),o.push(n);r=Tu(),r.prec=i,o.push(r),t.push(Fr),n=lN(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=rce(o[l-1].value,o[l-2],n),l-=2;return n}function l1(){var e,t,n;return e=XRt(),ci("?")&&(Tu(),t=l1(),ga(":"),n=l1(),e=MRt(e,t,n)),e}function PK(){const e=l1();if(ci(","))throw new Error(hC);return e}function OK(e){Ht=e,Je=0,ma=Ht.length,Fr=null,XDe();const t=PK();if(Fr.type!==VS)throw new Error("Unexpect token after expression.");return t}var QDe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function JDe(e){function t(s,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,u){return l=>t(s,l,a,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&tt("Missing arguments to clamp function."),s.length>3&&tt("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&tt("Missing arguments to if function."),s.length>3&&tt("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function QRt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function ZDe(e){e=e||{};const t=e.allowed?Gd(e.allowed):{},n=e.forbidden?Gd(e.forbidden):{},r=e.constants||QDe,i=(e.functions||JDe)(f),o=e.globalvar,s=e.fieldvar,a=Bn(o)?o:m=>`${o}["${m}"]`;let u={},l={},c=0;function f(m){if(bi(m))return m;const p=d[m.type];return p==null&&tt("Unsupported type: "+m.type),p(m)}const d={Literal:m=>m.raw,Identifier:m=>{const p=m.name;return c>0?p:hn(n,p)?tt("Illegal identifier: "+p):hn(r,p)?r[p]:hn(t,p)?p:(u[p]=1,a(p))},MemberExpression:m=>{const p=!m.computed,g=f(m.object);p&&(c+=1);const v=f(m.property);return g===s&&(l[QRt(v)]=1),p&&(c-=1),g+(p?"."+v:"["+v+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&tt("Illegal callee type: "+m.callee.type);const p=m.callee.name,g=m.arguments,v=hn(i,p)&&i[p];return v||tt("Unrecognized function: "+p),Bn(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(f).join(",")+"]",BinaryExpression:m=>"("+f(m.left)+" "+m.operator+" "+f(m.right)+")",UnaryExpression:m=>"("+m.operator+f(m.argument)+")",ConditionalExpression:m=>"("+f(m.test)+"?"+f(m.consequent)+":"+f(m.alternate)+")",LogicalExpression:m=>"("+f(m.left)+m.operator+f(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(f).join(",")+"}",Property:m=>{c+=1;const p=f(m.key);return c-=1,p+":"+f(m.value)}};function h(m){const p={code:f(m),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},p}return h.functions=i,h.constants=r,h}const lce=Symbol("vega_selection_getter");function eke(e){return(!e.getter||!e.getter[lce])&&(e.getter=Ef(e.field),e.getter[lce]=!0),e.getter}const FK="intersect",cce="union",JRt="vlMulti",ZRt="vlPoint",fce="or",eNt="and",ld="_vgsid_",mC=Ef(ld),tNt="E",nNt="R",rNt="R-E",iNt="R-LE",oNt="R-RE",sNt="E-LT",aNt="E-LTE",uNt="E-GT",lNt="E-GTE",cNt="E-VALID",fNt="E-ONE",NP="index:unit";function dce(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=eke(a)(e),My(s)&&(s=qa(s)),My(r[o])&&(r[o]=qa(r[o])),Kt(r[o])&&My(r[o][0])&&(r[o]=r[o].map(qa)),a.type===tNt){if(Kt(r[o])?!r[o].includes(s):s!==r[o])return!1}else if(a.type===nNt){if(!v2(s,r[o]))return!1}else if(a.type===oNt){if(!v2(s,r[o],!0,!1))return!1}else if(a.type===rNt){if(!v2(s,r[o],!1,!1))return!1}else if(a.type===iNt){if(!v2(s,r[o],!1,!0))return!1}else if(a.type===sNt){if(s>=r[o])return!1}else if(a.type===aNt){if(s>r[o])return!1}else if(a.type===uNt){if(s<=r[o])return!1}else if(a.type===lNt){if(s<r[o])return!1}else if(a.type===cNt){if(s===null||isNaN(s))return!1}else if(a.type===fNt&&r[o].indexOf(s)===-1)return!1;return!0}function dNt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[NP]&&r[NP].value:void 0,s=n===FK,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],o&&s){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=dce(t,l),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=dce(t,l),s^h)return h;return a&&s}const tke=Jw(mC),hNt=tke.left,pNt=tke.right;function mNt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[NP]&&r[NP].value:void 0,s=n===FK,a=mC(t),u=hNt(i,a);if(u===i.length||mC(i[u])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(pNt(i,a)-u<o.size)return!1}return!0}function gNt(e,t){return e.map(n=>On(t.fields?{values:t.fields.map(r=>eke(r)(n.datum))}:{[ld]:mC(n.datum)},t))}function yNt(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},u={},l,c,f,d,h,m,p,g,v,b,w=o.length,E=0,_,T;E<w;++E)if(l=o[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(_=0,T=c.length;_<T;++_)h=c[_],p=s[h.field]||(s[h.field]={}),g=p[d]||(p[d]=[]),u[h.field]=v=h.type.charAt(0),b=kL[`${v}_union`],p[d]=b(g,rn(f[_]));n&&(g=a[d]||(a[d]=[]),g.push(rn(f).reduce((S,D,k)=>(S[c[k].field]=D,S),{})))}else h=ld,m=mC(l),p=s[h]||(s[h]={}),g=p[d]||(p[d]=[]),g.push(m),n&&(g=a[d]||(a[d]=[]),g.push({[ld]:m}));if(t=t||cce,s[ld]?s[ld]=kL[`${ld}_${t}`](...Object.values(s[ld])):Object.keys(s).forEach(S=>{s[S]=Object.keys(s[S]).map(D=>s[S][D]).reduce((D,k)=>D===void 0?k:kL[`${u[S]}_${t}`](D,k))}),o=Object.keys(a),n&&o.length){const S=r?ZRt:JRt;s[S]=t===cce?{[fce]:o.reduce((D,k)=>(D.push(...a[k]),D),[])}:{[eNt]:o.map(D=>({[fce]:a[D]}))}}return s}var kL={[`${ld}_union`]:Kit,[`${ld}_intersect`]:Git,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=qa(t[0]),r=qa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=qa(t[0]),r=qa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const vNt=":",bNt="@";function MK(e,t,n,r){t[0].type!==a1&&tt("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&sr(t).value,s="unit",a=bNt+s,u=vNt+i;o===FK&&!hn(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),hn(r,u)||(r[u]=n.getData(i).tuplesRef())}function nke(e){const t=this.context.data[e];return t?t.values.value:[]}function xNt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function wNt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(_f).insert(t)),1}function ENt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const WS=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},_Nt=WS("format"),rke=WS("timeFormat"),TNt=WS("utcFormat"),CNt=WS("timeParse"),SNt=WS("utcParse"),Ck=new Date(2e3,0,1);function uF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Ck.setYear(2e3),Ck.setMonth(e),Ck.setDate(t),rke.call(this,Ck,n))}function ANt(e){return uF.call(this,e,1,"%B")}function DNt(e){return uF.call(this,e,1,"%b")}function kNt(e){return uF.call(this,0,2+e,"%A")}function INt(e){return uF.call(this,0,2+e,"%a")}const RNt=":",NNt="@",Jj="%",ike="$";function $K(e,t,n,r){t[0].type!==a1&&tt("First argument to data functions must be a string literal.");const i=t[0].value,o=RNt+i;if(!hn(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function PNt(e,t,n,r){t[0].type!==a1&&tt("First argument to indata must be a string literal."),t[1].type!==a1&&tt("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=NNt+o;hn(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Xa(e,t,n,r){if(t[0].type===a1)hce(n,r,t[0].value);else for(e in n.scales)hce(n,r,e)}function hce(e,t,n){const r=Jj+n;if(!hn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ch(e,t){if(bi(e)){const n=t.scales[e];return n&&ZTt(n.value)?n.value:void 0}}function ONt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Xa,n._range=Xa,n._scale=Xa;const r=i=>"_["+(i.type===a1?nn(Jj+i.value):nn(Jj)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function LK(e,t){return function(n,r,i){if(n){const o=ch(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const FNt=LK("area",Ylt),MNt=LK("bounds",Jlt),$Nt=LK("centroid",ict);function LNt(e,t){const n=ch(e,(t||this).context);return n&&n.scale()}function BNt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function BK(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function jNt(){return BK(this.context.dataflow,"warn",arguments)}function zNt(){return BK(this.context.dataflow,"info",arguments)}function UNt(){return BK(this.context.dataflow,"debug",arguments)}function IL(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Zj(e){const t=A0(e),n=IL(t.r),r=IL(t.g),i=IL(t.b);return .2126*n+.7152*r+.0722*i}function VNt(e,t){const n=Zj(e),r=Zj(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function HNt(){const e=[].slice.call(arguments);return e.unshift({}),On(...e)}function oke(e,t){return e===t||e!==e&&t!==t?!0:Kt(e)?Kt(t)&&e.length===t.length?qNt(e,t):!1:Nn(e)&&Nn(t)?ske(e,t):!1}function qNt(e,t){for(let n=0,r=e.length;n<r;++n)if(!oke(e[n],t[n]))return!1;return!0}function ske(e,t){for(const n in e)if(!oke(e[n],t[n]))return!1;return!0}function pce(e){return t=>ske(e,t)}function WNt(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],u=a.input,l=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=s.changeset(),c.stamp=l,s.runAfter(()=>{a.modified=!0,s.pulse(u,c).run()},!0,1)),n&&(f=n===!0?_f:Kt(n)||N6(n)?n:pce(n),c.remove(f)),t&&c.insert(t),r&&(f=pce(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function GNt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function YNt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const mce={};function KNt(e,t){const n=mce[t]||(mce[t]=Ef(t));return Kt(e)?e.map(n):n(e)}function lF(e){return Kt(e)||ArrayBuffer.isView(e)?e:null}function jK(e){return lF(e)||(bi(e)?e:null)}function XNt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return lF(e).join(...n)}function QNt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jK(e).indexOf(...n)}function JNt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jK(e).lastIndexOf(...n)}function ZNt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jK(e).slice(...n)}function e3t(e,t,n){return Bn(n)&&tt("Function argument passed to replace."),String(e).replace(t,n)}function t3t(e){return lF(e).slice().reverse()}function n3t(e){return lF(e).slice().sort(A6)}function r3t(e,t,n){return fY(e||0,t||0,n||0)}function i3t(e,t){const n=ch(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function o3t(e,t){const n=ch(e,(t||this).context);return n?n.copy():void 0}function s3t(e,t){const n=ch(e,(t||this).context);return n?n.domain():[]}function a3t(e,t,n){const r=ch(e,(n||this).context);return r?Kt(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function u3t(e,t){const n=ch(e,(t||this).context);return n&&n.range?n.range():[]}function l3t(e,t,n){const r=ch(e,(n||this).context);return r?r(t):void 0}function c3t(e,t,n,r,i){let o=typeof e=="string"?ch(e,(i||this).context):e;const s=XSe(t,n);let a=o.domain(),u=a[0],l=sr(a),c=Fu;return l-u?c=LSe(o,u,l):o=(o.interpolator?gr("sequential")().interpolator(o.interpolator()):gr("linear")().interpolate(o.interpolate()).range(o.range())).domain([u=0,l=1]),o.ticks&&(a=o.ticks(+r||15),u!==a[0]&&a.unshift(u),l!==sr(a)&&a.push(l)),a.forEach(f=>s.stop(c(f),o(f))),s}function f3t(e,t,n){const r=ch(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function d3t(e){let t=null;return function(n){return n?lC(n,t=t||Jx(e)):e}}const ake=e=>e.data;function uke(e,t){const n=nke.call(t,e);return n.root&&n.root.lookup||{}}function h3t(e,t,n){const r=uke(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(ake):void 0}function p3t(e,t){const n=uke(e,this)[t];return n?n.ancestors().map(ake):void 0}const lke=()=>typeof window<"u"&&window||null;function m3t(){const e=lke();return e?e.screen:{}}function g3t(){const e=lke();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function y3t(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function cke(e,t,n){if(!e)return[];const[r,i]=e,o=new bo().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return GAe(s,o,v3t(t))}function v3t(e){let t=null;if(e){const n=rn(e.marktype),r=rn(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function b3t(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=rn(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function x3t(e){return rn(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function w3t(e,t,n){const{x:r,y:i,mark:o}=n,s=new bo().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),l<s.y1&&(s.y1=l),l>s.y2&&(s.y2=l);return s.translate(r,i),cke([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(u=>E3t(u.x,u.y,t))}function E3t(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[u,l]=n[i];l>t!=a>t&&e<(s-u)*(t-l)/(a-l)+u&&r++}return r&1}const gC={random(){return gc()},cumulativeNormal:$6,cumulativeLogNormal:RG,cumulativeUniform:FG,densityNormal:SG,densityLogNormal:IG,densityUniform:OG,quantileNormal:L6,quantileLogNormal:NG,quantileUniform:MG,sampleNormal:M6,sampleLogNormal:kG,sampleUniform:PG,isArray:Kt,isBoolean:f_t,isDate:My,isDefined(e){return e!==void 0},isNumber:r1,isObject:Nn,isRegExp:h_t,isString:bi,isTuple:N6,isValid(e){return e!=null&&e===e},toBoolean:QTe,toDate(e){return JTe(e)},toNumber:qa,toString:ZTe,indexof:QNt,join:XNt,lastindexof:JNt,replace:e3t,reverse:t3t,sort:n3t,slice:ZNt,flush:c_t,lerp:p_t,merge:HNt,pad:v_t,peek:sr,pluck:KNt,span:D6,inrange:v2,truncate:x_t,rgb:A0,lab:u3,hcl:l3,hsl:s3,luminance:Zj,contrast:VNt,sequence:dl,format:_Nt,utcFormat:TNt,utcParse:SNt,utcOffset:hCe,utcSequence:gCe,timeFormat:rke,timeParse:CNt,timeOffset:dCe,timeSequence:mCe,timeUnitSpecifier:tCe,monthFormat:ANt,monthAbbrevFormat:DNt,dayFormat:kNt,dayAbbrevFormat:INt,quarter:n_t,utcquarter:r_t,week:rCe,utcweek:sCe,dayofyear:nCe,utcdayofyear:oCe,warn:jNt,info:zNt,debug:UNt,extent(e){return Mp(e)},inScope:BNt,intersect:cke,clampRange:i_t,pinchDistance:GNt,pinchAngle:YNt,screen:m3t,containerSize:y3t,windowSize:g3t,bandspace:r3t,setdata:wNt,pathShape:d3t,panLinear:JEt,panLog:ZEt,panPow:e_t,panSymlog:t_t,zoomLinear:qTe,zoomLog:WTe,zoomPow:fj,zoomSymlog:GTe,encode:ENt,modify:WNt,lassoAppend:b3t,lassoPath:x3t,intersectLasso:w3t},_3t=["view","item","group","xy","x","y"],T3t="event.vega.",fke="this.",zK={},dke={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nn(ike+e)}]`,functions:C3t,constants:QDe,visitors:zK},ez=ZDe(dke);function C3t(e){const t=JDe(e);_3t.forEach(n=>t[n]=T3t+n);for(const n in gC)t[n]=fke+n;return On(t,ONt(e,gC,zK)),t}function io(e,t,n){return arguments.length===1?gC[e]:(gC[e]=t,n&&(zK[e]=n),ez&&(ez.functions[e]=fke+e),this)}io("bandwidth",i3t,Xa);io("copy",o3t,Xa);io("domain",s3t,Xa);io("range",u3t,Xa);io("invert",a3t,Xa);io("scale",l3t,Xa);io("gradient",c3t,Xa);io("geoArea",FNt,Xa);io("geoBounds",MNt,Xa);io("geoCentroid",$Nt,Xa);io("geoShape",f3t,Xa);io("geoScale",LNt,Xa);io("indata",xNt,PNt);io("data",nke,$K);io("treePath",h3t,$K);io("treeAncestors",p3t,$K);io("vlSelectionTest",dNt,MK);io("vlSelectionIdTest",mNt,MK);io("vlSelectionResolve",yNt,MK);io("vlSelectionTuples",gNt);function Kd(e,t){const n={};let r;try{e=bi(e)?e:nn(e)+"",r=OK(e)}catch{tt("Expression parse error: "+e)}r.visit(o=>{if(o.type!==HDe)return;const s=o.callee.name,a=dke.visitors[s];a&&a(s,o.arguments,t,n)});const i=ez(r);return i.globals.forEach(o=>{const s=ike+o;!hn(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:On({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function S3t(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const A3t=Gd(["rule"]),gce=Gd(["group","image","rect"]);function D3t(e,t){let n="";return A3t[t]||(e.x2&&(e.x?(gce[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(gce[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function UK(e){return(e+"").toLowerCase()}function k3t(e){return UK(e)==="operator"}function I3t(e){return UK(e)==="collect"}function I_(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function R3t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var N3t={operator:(e,t)=>I_(e,["_"],t.code),parameter:(e,t)=>I_(e,["datum","_"],t.code),event:(e,t)=>I_(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return I_(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+nn(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=D3t(r,n),i+="return m;",I_(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nn).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let u,l;return o.path?(u=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+s]=o,u=`this.f${s}(a)`,l=`this.f${s}(b)`),R3t(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function P3t(e){const t=this;k3t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function O3t(e){const t=this;if(e.params){const n=t.get(e.id);n||tt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function F3t(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Kt(i)?i.map(o=>yce(o,n,t)):yce(i,n,t)}return t}function yce(e,t,n){if(!e||!Nn(e))return e;for(let r=0,i=vce.length,o;r<i;++r)if(o=vce[r],hn(e,o.key))return o.parse(e,t,n);return e}var vce=[{key:"$ref",parse:M3t},{key:"$key",parse:L3t},{key:"$expr",parse:$3t},{key:"$field",parse:B3t},{key:"$encode",parse:z3t},{key:"$compare",parse:j3t},{key:"$context",parse:U3t},{key:"$subflow",parse:V3t},{key:"$tupleid",parse:H3t}];function M3t(e,t){return t.get(e.$ref)||tt("Operator not defined: "+e.$ref)}function $3t(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ml(t.parameterExpression(e.$expr),e.$fields))}function L3t(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=XTe(e.$key,e.$flat,t.expr.codegen))}function B3t(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ef(e.$field,e.$name,t.expr.codegen))}function j3t(e,t){const n="c:"+e.$compare+"_"+e.$order,r=rn(e.$compare).map(i=>i&&i.$tupleid?Qt:i);return t.fn[n]||(t.fn[n]=YTe(r,e.$order,t.expr.codegen))}function z3t(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Ml(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function U3t(e,t){return t}function V3t(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(o),a.detachSubflow=()=>t.detach(s),a}}function H3t(){return Qt}function q3t(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&tt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function W3t(e){var t=this,n=Nn(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||tt("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const G3t={skip:!0};function Y3t(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function K3t(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],G3t)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(_f).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function hke(e,t,n,r){return new pke(e,t,n,r)}function pke(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||N3t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function bce(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}pke.prototype=bce.prototype={fork(){const e=new bce(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),I3t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[UK(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:S3t,parseOperator:P3t,parseOperatorParameters:O3t,parseParameters:F3t,parseStream:q3t,parseUpdate:W3t,getState:Y3t,setState:K3t};function X3t(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),mke(t,e.description()))}function mke(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Q3t(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const RL="default";function J3t(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:RL,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?bi(i)?i:i.user:RL,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return bi(r)||(i=r.item,r=r.user),tz(e,r&&r!==RL?r:i||r),i},{cursor:t})}function tz(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function PP(e,t){var n=e._runtime.data;return hn(n,t)||tt("Unrecognized data set: "+t),n[t]}function Z3t(e,t){return arguments.length<2?PP(this,e).values.value:cF.call(this,e,K1().remove(_f).insert(t))}function cF(e,t){MCe(t)||tt("Second argument to changes must be a changeset.");const n=PP(this,e);return n.modified=!0,this.pulse(n.input,t)}function ePt(e,t){return cF.call(this,e,K1().insert(t))}function tPt(e,t){return cF.call(this,e,K1().remove(t))}function gke(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function yke(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function fF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function nPt(e){var t=fF(e),n=gke(e),r=yke(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function rPt(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=fF(e),s=t.changedTouches?t.changedTouches[0]:t,o=tF(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=iPt(e,n,o),t}function iPt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;bi(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Za(e),item:Za(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const xce="view",oPt="timer",sPt="window",aPt={trap:!1};function uPt(e){const t=On({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{Kt(r[o])&&(r[o]=Gd(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function vke(e,t,n,r){e._eventListeners.push({type:n,sources:rn(t),handler:r})}function lPt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Sk(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Nn(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function cPt(e,t,n){var r=this,i=new F6(n),o=function(l,c){r.runAsync(null,()=>{e===xce&&lPt(r,t)&&l.preventDefault(),i.receive(rPt(r,l,c))})},s;if(e===oPt)Sk(r,"timer",t)&&r.timer(o,t);else if(e===xce)Sk(r,"view",t)&&r.addEventListener(t,o,aPt);else if(e===sPt?Sk(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&Sk(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=s.length;a<u;++a)s[a].addEventListener(t,o);vke(r,s,t,o)}return i}function wce(e){return e.item}function Ece(e){return e.item.mark.source}function _ce(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function fPt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",wce),Ece,_ce(e)),this.on(this.events("view","pointerout",wce),Ece,_ce(t)),this}function dPt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function vl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const hPt="vega-bind",pPt="vega-bind-name",mPt="vega-bind-radio";function gPt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=KTe(r.debounce,i.update))),(r.input==null&&r.element?yPt:bPt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function yPt(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),vke(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(vPt(i))}}function vPt(e){return typeof Event<"u"?new Event(e):{type:e}}function bPt(e,t,n,r){const i=r.signal(n.signal),o=vl("div",{class:hPt}),s=n.input==="radio"?o:o.appendChild(vl("label"));s.appendChild(vl("span",{class:pPt},n.name||n.signal)),t.appendChild(o);let a=xPt;switch(n.input){case"checkbox":a=wPt;break;case"select":a=EPt;break;case"radio":a=_Pt;break;case"range":a=TPt;break}a(e,s,n,i)}function xPt(e,t,n,r){const i=vl("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function wPt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=vl("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function EPt(e,t,n,r){const i=vl("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const u={value:s};OP(s,r)&&(u.selected=!0),i.appendChild(vl("option",u,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,u=n.options.length;a<u;++a)if(OP(n.options[a],s)){i.selectedIndex=a;return}}}function _Pt(e,t,n,r){const i=vl("span",{class:mPt}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const u={type:"radio",name:n.signal,value:s};OP(s,r)&&(u.checked=!0);const l=vl("input",u);l.addEventListener("change",()=>e.update(s));const c=vl("label",{},(o[a]||s)+"");return c.prepend(l),i.appendChild(c),l}),e.set=s=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)OP(a[l].value,s)&&(a[l].checked=!0)}}function TPt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||S0(o,i,100),a=vl("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const u=vl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function OP(e,t){return e===t||e+""==t+""}function bke(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,gke(e),yke(e),fF(e),i,o).background(e.background())}function VK(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function CPt(e,t,n,r){const i=new r(e.loader(),VK(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,fF(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function SPt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=nF(r);e=n._el=e?NL(n,e,!0):null,X3t(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||US,a=e?o.renderer:o.headless;return n._renderer=a?bke(n,n._renderer,e,a):null,n._handler=CPt(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=NL(n,t,!0):e.appendChild(vl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=NL(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{gPt(n,u.element||t,u)})),n}function NL(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const R_=e=>+e||0,APt=e=>({top:e,bottom:e,left:e,right:e});function Tce(e){return Nn(e)?{top:R_(e.top),bottom:R_(e.bottom),left:R_(e.left),right:R_(e.right)}:APt(R_(e))}async function HK(e,t,n,r){const i=nF(t),o=i&&i.headless;return o||tt("Unrecognized renderer type: "+t),await e.runAsync(),bke(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function DPt(e,t){e!==Jm.Canvas&&e!==Jm.SVG&&e!==Jm.PNG&&tt("Unrecognized image type: "+e);const n=await HK(this,e,t);return e===Jm.SVG?kPt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function kPt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function IPt(e,t){return(await HK(this,Jm.Canvas,e,t)).canvas()}async function RPt(e){return(await HK(this,Jm.SVG,e)).svg()}function NPt(e,t,n){return hke(e,Yx,gC,n).parse(t)}function PPt(e){var t=this._runtime.scales;return hn(t,e)||tt("Unrecognized scale or projection: "+e),t[e].value}var xke="width",wke="height",qK="padding",Cce={skip:!0};function Eke(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===qK?r.left+r.right:0)}function _ke(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===qK?r.top+r.bottom:0)}function OPt(e){var t=e._signals,n=t[xke],r=t[wke],i=t[qK];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Eke(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=_ke(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function FPt(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(xke,n,Cce),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(wke,r,Cce),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(u=>u.resize())},!1,1)}function MPt(e){return this._runtime.getState(e||{data:$Pt,signals:LPt,recurse:!0})}function $Pt(e,t){return t.modified&&Kt(t.input.value)&&!e.startsWith("_:vega:_")}function LPt(e,t){return!(e==="parent"||t instanceof Yx.proxy)}function BPt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function jPt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(_at(n,t))}function zPt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",UPt(r))}function UPt(e){return e==null?"":Kt(e)?Tke(e):Nn(e)&&!My(e)?VPt(e):e+""}function VPt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Kt(n)?Tke(n):Cke(n))}).join(`
`)}function Tke(e){return"["+e.map(Cke).join(", ")+"]"}function Cke(e){return Kt(e)?"[]":Nn(e)&&!My(e)?"{}":e}function HPt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Ske(e,t){const n=this;if(t=t||{},ix.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=On({},e.locale,t.locale);n.locale(SCe(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Jm.Canvas,n._scenegraph=new xAe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||zPt,n._redraw=!0,n._handler=new US().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=uPt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=NPt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:On({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Eke(n,n._width),n._viewHeight=_ke(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,OPt(n),Q3t(n),J3t(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Ak(e,t){return hn(e._signals,t)?e._signals[t]:tt("Unrecognized signal name: "+nn(t))}function Ake(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Sce(e,t,n,r){let i=Ake(n,r);return i||(i=VK(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Ace(e,t,n){const r=Ake(t,n);return r&&t._targets.remove(r),e}Tt(Ske,ix,{async evaluate(e,t,n){if(await ix.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,nPt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&XR(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&mke(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Ak(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Tce(e)):Tce(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(nF(e)||tt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(ix.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Ak(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:FPt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=VK(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Sce(this,e,Ak(this,e),t)},removeSignalListener(e,t){return Ace(this,Ak(this,e),t)},addDataListener(e,t){return Sce(this,e,PP(this,e).values,t)},removeDataListener(e,t){return Ace(this,PP(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=tz(this,null);this._globalCursor=!!e,t&&tz(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:jPt,events:cPt,finalize:dPt,hover:fPt,data:Z3t,change:cF,insert:ePt,remove:tPt,scale:PPt,initialize:SPt,toImageURL:DPt,toCanvas:IPt,toSVG:RPt,getState:MPt,setState:BPt,_watchPixelRatio:HPt});const qPt="view",FP="[",MP="]",Dke="{",kke="}",WPt=":",Ike=",",GPt="@",YPt=">",KPt=/[[\]{}]/,XPt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Rke,Nke;function hg(e,t,n){return Rke=t||qPt,Nke=n||XPt,Pke(e.trim()).map(nz)}function QPt(e){return Nke[e]}function fT(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function Pke(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=fT(e,i,Ike,FP+Dke,MP+kke),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function nz(e){return e[0]==="["?JPt(e):ZPt(e)}function JPt(e){const t=e.length;let n=1,r;if(n=fT(e,n,MP,FP,MP),n===t)throw"Empty between selector: "+e;if(r=Pke(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==YPt)throw"Expected '>' after between selector: "+e;r=r.map(nz);const i=nz(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function ZPt(e){const t={source:Rke},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,u,l;if(e[s-1]===kke){if(a=e.lastIndexOf(Dke),a>=0){try{r=e4t(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===GPt&&(i=++a),u=fT(e,a,WPt),u<s&&(n.push(e.substring(o,u).trim()),o=a=++u),a=fT(e,a,FP),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),l=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=fT(e,a,MP),a===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==FP)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||KPt.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):QPt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function e4t(e){const t=e.split(Ike);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function t4t(e){return Nn(e)?e:{type:e||"pad"}}const N_=e=>+e||0,n4t=e=>({top:e,bottom:e,left:e,right:e});function r4t(e){return Nn(e)?e.signal?e:{top:N_(e.top),bottom:N_(e.bottom),left:N_(e.left),right:N_(e.right)}:n4t(N_(e))}const is=e=>Nn(e)&&!Kt(e)?On({},e):{value:e};function Dce(e,t,n,r){return n!=null?(Nn(n)&&!Kt(n)||Kt(n)&&n.length&&Nn(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function zs(e,t,n){for(const r in t)Dce(e,r,t[r]);for(const r in n)Dce(e,r,n[r],"update")}function dE(e,t,n){for(const r in t)n&&hn(n,r)||(e[r]=On(e[r]||{},t[r]));return e}function kb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const WK="mark",GK="frame",YK="scope",i4t="axis",o4t="axis-domain",s4t="axis-grid",a4t="axis-label",u4t="axis-tick",l4t="axis-title",c4t="legend",f4t="legend-band",d4t="legend-entry",h4t="legend-gradient",Oke="legend-label",p4t="legend-symbol",m4t="legend-title",g4t="title",y4t="title-text",v4t="title-subtitle";function b4t(e,t,n,r,i){const o={},s={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!kb(u,e)&&PL(o,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===GK?i.group:n===WK?On({},i.mark,i[t]):null;for(u in c)l=kb(u,e)||(u==="fill"||u==="stroke")&&(kb("fill",e)||kb("stroke",e)),l||PL(o,u,c[u]);rn(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)kb(h,e)||PL(o,h,d[h])}),e=On({},e);for(u in o)c=o[u],c.signal?(a=a||{})[u]=c:s[u]=c;return e.enter=On(s,e.enter),a&&(e.update=On(a,e.update)),e}function PL(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Fke=e=>bi(e)?nn(e):e.signal?`(${e.signal})`:Mke(e);function dF(e){if(e.gradient!=null)return w4t(e);let t=e.signal?`(${e.signal})`:e.color?x4t(e.color):e.field!=null?Mke(e.field):e.value!==void 0?nn(e.value):void 0;return e.scale!=null&&(t=E4t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${cN(e.exponent)})`),e.mult!=null&&(t+=`*${cN(e.mult)}`),e.offset!=null&&(t+=`+${cN(e.offset)}`),e.round&&(t=`round(${t})`),t}const Dk=(e,t,n,r)=>`(${e}(${[t,n,r].map(dF).join(",")})+'')`;function x4t(e){return e.c?Dk("hcl",e.h,e.c,e.l):e.h||e.s?Dk("hsl",e.h,e.s,e.l):e.l||e.a?Dk("lab",e.l,e.a,e.b):e.r||e.g||e.b?Dk("rgb",e.r,e.g,e.b):null}function w4t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nn(n));for(;t.length&&sr(t)==null;)t.pop();return t.unshift(Fke(e.gradient)),`gradient(${t.join(",")})`}function cN(e){return Nn(e)?"("+dF(e)+")":e}function Mke(e){return $ke(Nn(e)?e:{datum:e})}function $ke(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):tt("Invalid field reference: "+nn(e));return e.signal||(r=bi(r)?dG(r).map(nn).join("]["):$ke(r)),t+"["+r+"]"}function E4t(e,t){const n=Fke(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+cN(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function _4t(e){let t="";return e.forEach(n=>{const r=dF(n);t+=n.test?`(${n.test})?${r}:`:r}),sr(t)===":"&&(t+="null"),t}function Lke(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=b4t(e,t,n,r,i.config);for(const a in e)s[a]=T4t(e[a],t,o,i);return o}function T4t(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=S4t(C4t(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function C4t(e){return Kt(e)?_4t(e):dF(e)}function S4t(e,t,n,r){const i=Kd(e,t);return i.$fields.forEach(o=>r[o]=1),On(n,i.$params),i.$expr}const A4t="outer",D4t=["value","update","init","react","bind"];function kce(e,t){tt(e+' for "outer" push: '+nn(t))}function Bke(e,t){const n=e.name;if(e.push===A4t)t.signals[n]||kce("No prior signal definition",n),D4t.forEach(r=>{e[r]!==void 0&&kce("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function rz(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function hF(e,t,n,r){return new rz(e,t,n,r)}function $P(e,t){return hF("operator",e,t)}function Xt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function yC(e,t){return t?{$field:e,$name:t}:{$field:e}}const iz=yC("key");function Ice(e,t){return{$compare:e,$order:t}}function k4t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const I4t="ascending",R4t="descending";function N4t(e){return Nn(e)?(e.order===R4t?"-":"+")+pF(e.op,e.field):""}function pF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const KK="scope",oz="view";function jo(e){return e&&e.signal}function P4t(e){return e&&e.expr}function fN(e){if(jo(e))return!0;if(Nn(e)){for(const t in e)if(fN(e[t]))return!0}return!1}function Yc(e,t){return e??t}function Ly(e){return e&&e.signal||e}const Rce="timer";function vC(e,t){return(e.merge?F4t:e.stream?M4t:e.type?$4t:tt("Invalid stream specification: "+nn(e)))(e,t)}function O4t(e){return e===KK?oz:e||oz}function F4t(e,t){const n=e.merge.map(i=>vC(i,t)),r=XK({merge:n},e,t);return t.addStream(r).id}function M4t(e,t){const n=vC(e.stream,t),r=XK({stream:n},e,t);return t.addStream(r).id}function $4t(e,t){let n;e.type===Rce?(n=t.event(Rce,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(O4t(e.source),e.type);const r=XK({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function XK(e,t,n){let r=t.between;return r&&(r.length!==2&&tt('Stream "between" parameter must have 2 entries: '+nn(t)),e.between=[vC(r[0],n),vC(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(L4t(t.marktype,t.markname,t.markrole)),t.source===KK&&r.push("inScope(event.item)"),r.length&&(e.filter=Kd("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function L4t(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const B4t={code:"_.$value",ast:{type:"Identifier",value:"value"}};function j4t(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||tt("Signal update missing events specification."),bi(o)&&(o=hg(o,t.isSubscope()?KK:oz)),o=rn(o).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[U4t(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&tt("Signal encode and update are mutually exclusive."),s="encode(item(),"+nn(r)+")"),i.update=bi(s)?Kd(s,t):s.expr!=null?Kd(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:B4t,$params:{$value:t.signalRef(s.signal)}}:tt("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(On(z4t(u,t),i)))}function z4t(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):vC(e,t)}}function U4t(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function V4t(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?tt("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Kd(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>j4t(i,t,n.id))}const Hr=e=>(t,n,r)=>hF(e,n,t||void 0,r),jke=Hr("aggregate"),H4t=Hr("axisticks"),zke=Hr("bound"),Ff=Hr("collect"),Nce=Hr("compare"),q4t=Hr("datajoin"),Uke=Hr("encode"),W4t=Hr("expression"),G4t=Hr("facet"),Y4t=Hr("field"),K4t=Hr("key"),X4t=Hr("legendentries"),Q4t=Hr("load"),J4t=Hr("mark"),Z4t=Hr("multiextent"),eOt=Hr("multivalues"),tOt=Hr("overlap"),nOt=Hr("params"),Vke=Hr("prefacet"),rOt=Hr("projection"),iOt=Hr("proxy"),oOt=Hr("relay"),Hke=Hr("render"),sOt=Hr("scale"),J1=Hr("sieve"),aOt=Hr("sortitems"),qke=Hr("viewlayout"),uOt=Hr("values");let lOt=0;const Wke={min:"min",max:"max",count:"sum"};function cOt(e,t){const n=e.type||"linear";NSe(n)||tt("Unrecognized scale type: "+nn(n)),t.addScale(e.name,{type:n,domain:void 0})}function fOt(e,t){const n=t.getScale(e.name).params;let r;n.domain=Gke(e.domain,e,t),e.range!=null&&(n.range=Kke(e,t,n)),e.interpolate!=null&&wOt(e.interpolate,n),e.nice!=null&&(n.nice=xOt(e.nice,t)),e.bins!=null&&(n.bins=bOt(e.bins,t));for(r in e)hn(n,r)||r==="name"||(n[r]=ac(e[r],t))}function ac(e,t){return Nn(e)?e.signal?t.signalRef(e.signal):tt("Unsupported object: "+nn(e)):e}function dN(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ac(n,t))}function mF(e){tt("Can not find data set: "+nn(e))}function Gke(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&tt("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Kt(e)?dOt:e.fields?pOt:hOt)(e,t,n)}function dOt(e,t,n){return e.map(r=>ac(r,n))}function hOt(e,t,n){const r=n.getData(e.data);return r||mF(e.data),Qx(t.type)?r.valuesRef(n,e.field,Yke(e.sort,!1)):FSe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function pOt(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=bi(s)?{data:r,field:s}:Kt(s)||s.signal?mOt(s,n):s,o.push(s),o),[]);return(Qx(t.type)?gOt:FSe(t.type)?yOt:vOt)(e,n,i)}function mOt(e,t){const n="_:vega:_"+lOt++,r=Ff({});if(Kt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nn(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,J1({})]),{data:n,field:"data"}}function gOt(e,t,n){const r=Yke(e.sort,!0);let i,o;const s=n.map(l=>{const c=t.getData(l.data);return c||mF(l.data),c.countsRef(t,l.field,r)}),a={groupby:iz,pulse:s};r&&(i=r.op||"count",o=r.field?pF(i,r.field):"count",a.ops=[Wke[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(jke(a));const u=t.add(Ff({pulse:Xt(i)}));return o=t.add(uOt({field:iz,sort:t.sortRef(r),pulse:Xt(u)})),Xt(o)}function Yke(e,t){return e&&(!e.field&&!e.op?Nn(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?tt("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Wke[e.op]&&tt("Multiple domain scales can not be sorted using "+e.op)),e}function yOt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||mF(i.data),o.domainRef(t,i.field)});return Xt(t.add(eOt({values:r})))}function vOt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||mF(i.data),o.extentRef(t,i.field)});return Xt(t.add(Z4t({extents:r})))}function bOt(e,t){return e.signal||Kt(e)?dN(e,t):t.objectProperty(e)}function xOt(e,t){return e.signal?t.signalRef(e.signal):Nn(e)?{interval:ac(e.interval),step:ac(e.step)}:ac(e)}function wOt(e,t){t.interpolate=ac(e.type||e),e.gamma!=null&&(t.interpolateGamma=ac(e.gamma))}function Kke(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(bi(i)){if(r&&hn(r,i))return e=On({},e,{range:r[i]}),Kke(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Qx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:tt("Unrecognized scale range value: "+nn(i))}else if(i.scheme){n.scheme=Kt(i.scheme)?dN(i.scheme,t):ac(i.scheme,t),i.extent&&(n.schemeExtent=dN(i.extent,t)),i.count&&(n.schemeCount=ac(i.count,t));return}else if(i.step){n.rangeStep=ac(i.step,t);return}else{if(Qx(e.type)&&!Kt(i))return Gke(i,e,t);Kt(i)||tt("Unsupported range type: "+nn(i))}return i.map(o=>(Kt(o)?dN:ac)(o,t))}function EOt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=sz(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=sz(n[i],i,t));t.addProjection(e.name,r)}function sz(e,t,n){return Kt(e)?e.map(r=>sz(r,t,n)):Nn(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:tt("Unsupported parameter object: "+nn(e)):e}const Mf="top",hE="left",pE="right",M0="bottom",Xke="center",_Ot="vertical",TOt="start",COt="middle",SOt="end",az="index",QK="label",AOt="offset",nw="perc",DOt="perc2",cc="value",GS="guide-label",JK="guide-title",kOt="group-title",IOt="group-subtitle",Pce="symbol",hN="gradient",uz="discrete",lz="size",ROt="shape",NOt="fill",POt="stroke",OOt="strokeWidth",FOt="strokeDash",MOt="opacity",ZK=[lz,ROt,NOt,POt,OOt,FOt,MOt],YS={name:1,style:1,interactive:1},ir={value:0},fc={value:1},gF="group",Qke="rect",eX="rule",$Ot="symbol",Z1="text";function bC(e){return e.type=gF,e.interactive=e.interactive||!1,e}function Uu(e,t){const n=(r,i)=>Yc(e[r],Yc(t[r],i));return n.isVertical=r=>_Ot===Yc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Yc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Yc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Yc(e.columns,Yc(t.columns,+n.isVertical(!0))),n}function Jke(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function LOt(e,t,n){const r=t.config.style[n];return r&&r[e]}function yF(e,t,n){return`item.anchor === '${TOt}' ? ${e} : item.anchor === '${SOt}' ? ${t} : ${n}`}const tX=yF(nn(hE),nn(pE),nn(Xke));function BOt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Nn(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Zke(e,t){return t?e?Nn(e)?Object.assign({},e,{offset:Zke(e.offset,t)}):{value:e,offset:t}:t:e}function Rl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=dE(e.encode,t,YS)):e.interactive=!1,e}function jOt(e,t,n,r){const i=Uu(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=s,d=a):(l=[0,0],c=[1,0],f=a,d=s);const h={enter:u={opacity:ir,x:ir,y:ir,width:is(f),height:is(d)},update:On({},u,{opacity:fc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ir}};return zs(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Rl({type:Qke,role:h4t,encode:h},r)}function zOt(e,t,n,r,i){const o=Uu(e,n),s=o.isVertical(),a=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";s?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const m={opacity:ir,fill:{scale:t,field:cc}};m[l]={signal:h+"datum."+nw,mult:u},m[c]=ir,m[f]={signal:h+"datum."+DOt,mult:u},m[d]=is(a);const p={enter:m,update:On({},m,{opacity:fc}),exit:{opacity:ir}};return zs(p,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Rl({type:Qke,role:f4t,key:cc,from:i,encode:p},r)}const UOt=`datum.${nw}<=0?"${hE}":datum.${nw}>=1?"${pE}":"${Xke}"`,VOt=`datum.${nw}<=0?"${M0}":datum.${nw}>=1?"${Mf}":"${COt}"`;function Oce(e,t,n,r){const i=Uu(e,t),o=i.isVertical(),s=is(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const m={enter:l={opacity:ir},update:c={opacity:fc,text:{field:QK}},exit:{opacity:ir}};return zs(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Yc(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=c.baseline={signal:VOt},f="y",d="x",h="1-"):(l.align=c.align={signal:UOt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+nw,mult:a},l[d]=c[d]=s,s.offset=Yc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+az}:void 0,Rl({type:Z1,role:Oke,style:GS,key:cc,from:r,encode:m,overlap:u},n)}function HOt(e,t,n,r,i){const o=Uu(e,t),s=n.entries,a=!!(s&&s.interactive),u=s?s.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${AOt} : datum.${lz}`,h=l?is(l):{field:lz},m=`datum.${az}`,p=`max(1, ${i})`;let g,v,b,w,E;h.mult=.5,g={enter:v={opacity:ir,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:fc,x:v.x,y:v.y},exit:{opacity:ir}};let _=null,T=null;e.fill||(_=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),zs(g,{fill:o("symbolFillColor",_),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",T),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),ZK.forEach(R=>{e[R]&&(b[R]=v[R]={scale:e[R],field:cc})});const S=Rl({type:$Ot,role:p4t,key:cc,from:f,clip:l?!0:void 0,encode:g},n.symbols),D=is(c);D.offset=o("labelOffset"),g={enter:v={opacity:ir,x:{signal:d,offset:D},y:h},update:b={opacity:fc,text:{field:QK},x:v.x,y:v.y},exit:{opacity:ir}},zs(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const k=Rl({type:Z1,role:Oke,style:GS,key:cc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:ir,height:l?is(l):ir,opacity:ir},exit:{opacity:ir},update:b={opacity:fc,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(w=`ceil(item.mark.items.length / ${p})`,b.row.signal=`${m}%${w}`,b.column.signal=`floor(${m} / ${w})`,E={field:["row",m]}):(b.row.signal=`floor(${m} / ${p})`,b.column.signal=`${m} % ${p}`,E={field:m}),b.column.signal=`(${i})?${b.column.signal}:${m}`,r={facet:{data:r,name:"value",groupby:az}},bC({role:YK,from:r,encode:dE(g,s,YS),marks:[S,k],name:u,interactive:a,sort:E})}function qOt(e,t){const n=Uu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const nX='item.orient === "left"',rX='item.orient === "right"',vF=`(${nX} || ${rX})`,WOt=`datum.vgrad && ${vF}`,GOt=yF('"top"','"bottom"','"middle"'),YOt=yF('"right"','"left"','"center"'),KOt=`datum.vgrad && ${rX} ? (${YOt}) : (${vF} && !(datum.vgrad && ${nX})) ? "left" : ${tX}`,XOt=`item._anchor || (${vF} ? "middle" : "start")`,QOt=`${WOt} ? (${nX} ? -90 : 90) : 0`,JOt=`${vF} ? (datum.vgrad ? (${rX} ? "bottom" : "top") : ${GOt}) : "top"`;function ZOt(e,t,n,r){const i=Uu(e,t),o={enter:{opacity:ir},update:{opacity:fc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ir}};return zs(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:XOt},angle:{signal:QOt},align:{signal:KOt},baseline:{signal:JOt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Rl({type:Z1,role:m4t,style:JK,from:r,encode:o},n)}function e6t(e,t){let n;return Nn(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Fce(e.path)+")":e.sphere&&(n="geoShape("+Fce(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Fce(e){return Nn(e)&&e.signal?e.signal:nn(e)}function eIe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===gF?YK:t||WK}function t6t(e){return{marktype:e.type,name:e.name||void 0,role:e.role||eIe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function n6t(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function iX(e,t){const n=BCe(e.type);n||tt("Unrecognized transform type: "+nn(e.type));const r=hF(n.type.toLowerCase(),null,tIe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function tIe(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=r6t(s,t,n)}return r}function r6t(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return i6t(e,t,n);if(i===void 0){e.required&&tt("Missing required "+nn(t.type)+" parameter: "+nn(e.name));return}else{if(r==="param")return o6t(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!jo(i)?i.map(o=>Mce(e,o,n)):Mce(e,i,n)}function Mce(e,t,n){const r=e.type;if(jo(t))return Lce(r)?tt("Expression references can not be signals."):OL(r)?n.fieldRef(t):Bce(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||OL(r);return i&&s6t(t)?n.exprRef(t.expr,t.as):i&&a6t(t)?yC(t.field,t.as):Lce(r)?Kd(t,n):u6t(r)?Xt(n.getData(t).values):OL(r)?yC(t):Bce(r)?n.compareRef(t):t}}function i6t(e,t,n){return bi(t.from)||tt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function o6t(e,t,n){const r=t[e.name];return e.array?(Kt(r)||tt("Expected an array of sub-parameters. Instead: "+nn(r)),r.map(i=>$ce(e,i,n))):$ce(e,r,n)}function $ce(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||tt("Unsupported parameter: "+nn(t));const o=On(tIe(i,t,n),i.key);return Xt(n.add(nOt(o)))}const s6t=e=>e&&e.expr,a6t=e=>e&&e.field,u6t=e=>e==="data",Lce=e=>e==="expr",OL=e=>e==="field",Bce=e=>e==="compare";function l6t(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||tt("Only group marks can be faceted."),r.field!=null?s=a=pN(r,n):(e.data?a=Xt(n.getData(e.data).aggregate):(o=iX(On({type:"aggregate",groupby:rn(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=pN(r,n),s=a=Xt(n.add(o))),i=n.keyRef(r.groupby,!0))):s=Xt(n.add(Ff(null,[{}]))),s||(s=pN(e,n)),{key:i,pulse:s,parent:a}}function pN(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Xt(t.getData(e.data).output)}function c1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}c1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Xt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new c1(e,o,i,r,s)};function nIe(e){return bi(e)?e:null}function jce(e,t,n){const r=pF(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function P_(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),u=N4t(o);let l=nIe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=o?{field:iz,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Xt(t.output)};u&&(d.sort=e.sortRef(o)),f=e.add(hF(r,void 0,d)),s&&(t.index[i]=f),c=Xt(f),l!=null&&(a[l]=c)}return c}c1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=nIe(t);let s,a,u;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&jce(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Xt(r.output)},n&&n.field&&jce(e,u,n),a=e.add(jke(u)),s=e.add(Ff({pulse:Xt(a)})),s={agg:a,ref:Xt(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return Xt(this.values)},extentRef(e,t){return P_(e,this,"extent","extent",t,!1)},domainRef(e,t){return P_(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return P_(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return P_(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return P_(e,this,"indata","tupleindex",t,!0,!0)}};function c6t(e,t,n){const r=e.from.facet,i=r.name,o=pN(r,t);let s;r.name||tt("Facet must have a name: "+nn(r)),r.data||tt("Facet must reference a data set: "+nn(r)),r.field?s=t.add(Vke({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(G4t({key:t.keyRef(r.groupby),group:Xt(t.proxy(n.parent)),pulse:o})):tt("Facet must specify groupby or field: "+nn(r));const a=t.fork(),u=a.add(Ff()),l=a.add(J1({pulse:Xt(u)}));a.addData(i,new c1(a,u,u,l)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function f6t(e,t,n){const r=t.add(Vke({pulse:n.pulse})),i=t.fork();i.add(J1()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function rIe(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,u=t.add($P()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=Kd(l,t);u.update=c.$expr,u.params=c.$params}function bF(e,t){const n=eIe(e),r=e.type===gF,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===YK||n===GK,a,u,l,c,f,d,h;const m=n===WK||s||i,p=l6t(e.from,r,t);u=t.add(q4t({key:p.key||(e.key?yC(e.key):void 0),pulse:p.pulse,clean:!r}));const g=Xt(u);u=l=t.add(Ff({pulse:g})),u=t.add(J4t({markdef:t6t(e),interactive:n6t(e.interactive,t),clip:e6t(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Xt(u)}));const v=Xt(u);u=c=t.add(Uke(Lke(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const S=iX(T,t),D=S.metadata;(D.generates||D.changes)&&tt("Mark transforms should not generate new data."),D.nomod||(c.params.mod=!0),S.params.pulse=Xt(u),t.add(u=S)}),e.sort&&(u=t.add(aOt({sort:t.compareRef(e.sort),pulse:Xt(u)})));const b=Xt(u);(i||s)&&(s=t.add(qke({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:b})),d=Xt(s));const w=t.add(zke({mark:v,pulse:d||b}));h=Xt(w),r&&(m&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(b,d||h,g),i?c6t(e,t,p):m?f6t(e,t,p):t.parse(e),t.popState(),m&&(s&&a.push(s),a.push(w))),o&&(h=d6t(o,h,t));const E=t.add(Hke({pulse:h})),_=t.add(J1({pulse:Xt(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new c1(t,l,E,_)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&tt("Marks only support modify triggers."),rIe(T,t,f)}))}function d6t(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:jo(o)?n.signalRef(o.signal):o,method:jo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=jo(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return Xt(n.add(tOt(s)))}function h6t(e,t){const n=t.config.legend,r=e.encode||{},i=Uu(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,u=o.style,l={};let c=0,f,d,h;ZK.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||tt("Missing valid scale for legend.");const m=p6t(e,t.scaleType(c)),p={title:e.title!=null,scales:l,type:m,vgrad:m!=="symbol"&&i.isVertical()},g=Xt(t.add(Ff(null,[p]))),v={enter:{x:{value:0},y:{value:0}}},b=Xt(t.add(X4t(d={type:m,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return m===hN?(h=[jOt(e,c,n,r.gradient),Oce(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${Ly(i.gradientLength())})/100))`)):m===uz?h=[zOt(e,c,n,r.gradient,b),Oce(e,n,r.labels,b)]:(f=qOt(e,n),h=[HOt(e,n,r,b,Ly(f.columns))],d.size=y6t(e,t,h[0].marks)),h=[bC({role:d4t,from:g,encode:v,marks:h,layout:f,interactive:a})],p.title&&h.push(ZOt(e,n,r.title,g)),bF(bC({role:c4t,from:g,encode:dE(g6t(i,e,n),o,YS),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:u}),t)}function p6t(e,t){let n=e.type||Pce;return!e.type&&m6t(e)===1&&(e.fill||e.stroke)&&(n=gY(t)?hN:_j(t)?uz:Pce),n!==hN?n:_j(t)?uz:hN}function m6t(e){return ZK.reduce((t,n)=>t+(e[n]?1:0),0)}function g6t(e,t,n){const r={enter:{},update:{}};return zs(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function y6t(e,t,n){const r=Ly(zce("size",e,n)),i=Ly(zce("strokeWidth",e,n)),o=Ly(v6t(n[1].encode,t,GS));return Kd(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function zce(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Jke(e,n[0].encode)}function v6t(e,t,n){return Jke("fontSize",e)||LOt("fontSize",t,n)}const b6t=`item.orient==="${hE}"?-90:item.orient==="${pE}"?90:0`;function x6t(e,t){e=bi(e)?{text:e}:e;const n=Uu(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,u=[],l={},c=Xt(t.add(Ff(null,[l])));return u.push(_6t(e,n,w6t(e),c)),e.subtitle&&u.push(T6t(e,n,r.subtitle,c)),bF(bC({role:g4t,from:c,encode:E6t(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function w6t(e){const t=e.encode;return t&&t.title||On({name:e.name,interactive:e.interactive,style:e.style},t)}function E6t(e,t){const n={enter:{},update:{}};return zs(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:tX},angle:{signal:b6t},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),dE(n,t,YS)}function _6t(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zs(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Rl({type:Z1,role:y4t,style:kOt,from:r,encode:s},n)}function T6t(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zs(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Rl({type:Z1,role:v4t,style:IOt,from:r,encode:s},n)}function C6t(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(iX(r,t))}),e.on&&e.on.forEach(r=>{rIe(r,t,e.name)}),t.addDataPipeline(e.name,S6t(e,t,n))}function S6t(e,t,n){const r=[];let i=null,o=!1,s=!1,a,u,l,c,f;for(e.values?jo(e.values)||fN(e.format)?(r.push(Uce(t,e)),r.push(i=zg())):r.push(i=zg({$ingest:e.values,$format:e.format})):e.url?fN(e.url)||fN(e.format)?(r.push(Uce(t,e)),r.push(i=zg())):r.push(i=zg({$request:e.url,$format:e.format})):e.source&&(i=a=rn(e.source).map(d=>Xt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=zg()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=oOt({derive:o,pulse:l?a:a[0]}),(o||l)&&r.splice(1,0,zg())),i||r.push(zg()),r.push(J1({})),r}function zg(e){const t=Ff({},e);return t.metadata={source:!0},t}function Uce(e,t){return Q4t({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const iIe=e=>e===M0||e===Mf,xF=(e,t,n)=>jo(e)?I6t(e.signal,t,n):e===hE||e===Mf?t:n,os=(e,t,n)=>jo(e)?D6t(e.signal,t,n):iIe(e)?t:n,mf=(e,t,n)=>jo(e)?k6t(e.signal,t,n):iIe(e)?n:t,oIe=(e,t,n)=>jo(e)?R6t(e.signal,t,n):e===Mf?{value:t}:{value:n},A6t=(e,t,n)=>jo(e)?N6t(e.signal,t,n):e===pE?{value:t}:{value:n},D6t=(e,t,n)=>sIe(`${e} === '${Mf}' || ${e} === '${M0}'`,t,n),k6t=(e,t,n)=>sIe(`${e} !== '${Mf}' && ${e} !== '${M0}'`,t,n),I6t=(e,t,n)=>oX(`${e} === '${hE}' || ${e} === '${Mf}'`,t,n),R6t=(e,t,n)=>oX(`${e} === '${Mf}'`,t,n),N6t=(e,t,n)=>oX(`${e} === '${pE}'`,t,n),sIe=(e,t,n)=>(t=t!=null?is(t):t,n=n!=null?is(n):n,Vce(t)&&Vce(n)?(t=t?t.signal||nn(t.value):null,n=n?n.signal||nn(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[On({test:e},t)].concat(n||[])),Vce=e=>e==null||Object.keys(e).length===1,oX=(e,t,n)=>({signal:`${e} ? (${zb(t)}) : (${zb(n)})`}),P6t=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${hE}' ? (${zb(r)}) : `:"")+(n!=null?`${e} === '${M0}' ? (${zb(n)}) : `:"")+(i!=null?`${e} === '${pE}' ? (${zb(i)}) : `:"")+(t!=null?`${e} === '${Mf}' ? (${zb(t)}) : `:"")+"(null)"}),zb=e=>jo(e)?e.signal:e==null?null:nn(e),O6t=(e,t)=>t===0?0:jo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},ox=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function cb(e,t,n,r){let i;if(t&&hn(t,e))return t[e];if(hn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[JK][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[GS][i]}return null}function Hce(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function F6t(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,u,l;if(jo(s)){const f=Hce([n.axisX,n.axisY]),d=Hce([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=os(s,cb(l,n.axisX,i,r),cb(l,n.axisY,i,r));u={};for(l of d)u[l]=P6t(s.signal,cb(l,n.axisTop,i,r),cb(l,n.axisBottom,i,r),cb(l,n.axisLeft,i,r),cb(l,n.axisRight,i,r))}else a=s===Mf||s===M0?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||u||o?On({},i,a,u,o):i}function M6t(e,t,n,r){const i=Uu(e,t),o=e.orient;let s,a;const u={enter:s={opacity:ir},update:a={opacity:fc},exit:{opacity:ir}};zs(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=qce(e,0),c=qce(e,1);return s.x=a.x=os(o,l,ir),s.x2=a.x2=os(o,c),s.y=a.y=mf(o,l,ir),s.y2=a.y2=mf(o,c),Rl({type:eX,role:o4t,from:r,encode:u},n)}function qce(e,t){return{scale:e.scale,range:t}}function $6t(e,t,n,r,i){const o=Uu(e,t),s=e.orient,a=e.gridScale,u=xF(s,1,-1),l=L6t(e.offset,u);let c,f,d;const h={enter:c={opacity:ir},update:d={opacity:fc},exit:f={opacity:ir}};zs(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const m={scale:e.scale,field:cc,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},p=os(s,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},v=a?{scale:a,range:1,mult:u,offset:l}:On(p,{mult:u,offset:l});return c.x=d.x=os(s,m,g),c.y=d.y=mf(s,m,g),c.x2=d.x2=mf(s,v),c.y2=d.y2=os(s,v),f.x=os(s,m),f.y=mf(s,m),Rl({type:eX,role:s4t,key:cc,from:r,encode:h},n)}function L6t(e,t){if(t!==1)if(!Nn(e))e=jo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=On({},e);for(;n.mult!=null;)if(Nn(n.mult))n=n.mult=On({},n.mult);else return n.mult=jo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function B6t(e,t,n,r,i,o){const s=Uu(e,t),a=e.orient,u=xF(a,-1,1);let l,c,f;const d={enter:l={opacity:ir},update:f={opacity:fc},exit:c={opacity:ir}};zs(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=is(i);h.mult=u;const m={scale:e.scale,field:cc,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=l.y=os(a,ir,m),f.y2=l.y2=os(a,h),c.x=os(a,m),f.x=l.x=mf(a,ir,m),f.x2=l.x2=mf(a,h),c.y=mf(a,m),Rl({type:eX,role:u4t,key:cc,from:r,encode:d},n)}function FL(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function j6t(e,t,n,r,i,o){const s=Uu(e,t),a=e.orient,u=e.scale,l=xF(a,-1,1),c=Ly(s("labelFlush")),f=Ly(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let m=c===0||!!c,p;const g=is(i);g.mult=l,g.offset=is(s("labelPadding")||0),g.offset.mult=l;const v={scale:u,field:cc,band:.5,offset:Zke(o.offset,s("labelOffset"))},b=os(a,m?FL(u,c,'"left"','"right"','"center"'):{value:"center"},A6t(a,"left","right")),w=os(a,oIe(a,"bottom","top"),m?FL(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=FL(u,c,`-(${f})`,f,0);m=m&&f;const _={opacity:ir,x:os(a,v,g),y:mf(a,v,g)},T={enter:_,update:p={opacity:fc,text:{field:QK},x:_.x,y:_.y,align:b,baseline:w},exit:{opacity:ir,x:_.x,y:_.y}};zs(T,{dx:!d&&m?os(a,E):null,dy:!h&&m?mf(a,E):null}),zs(T,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const S=s("labelBound");let D=s("labelOverlap");return D=D||S?{separation:s("labelSeparation"),method:D,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,p.align!==b&&(p.align=ox(p.align,b)),p.baseline!==w&&(p.baseline=ox(p.baseline,w)),Rl({type:Z1,role:a4t,style:GS,key:cc,from:r,encode:T,overlap:D},n)}function z6t(e,t,n,r){const i=Uu(e,t),o=e.orient,s=xF(o,-1,1);let a,u;const l={enter:a={opacity:ir,anchor:is(i("titleAnchor",null)),align:{signal:tX}},update:u=On({},a,{opacity:fc,text:is(e.title)}),exit:{opacity:ir}},c={signal:`lerp(range("${e.scale}"), ${yF(0,1,.5)})`};return u.x=os(o,c),u.y=mf(o,c),a.angle=os(o,ir,O6t(s,90)),a.baseline=os(o,oIe(o,M0,Mf),{value:M0}),u.angle=a.angle,u.baseline=a.baseline,zs(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),U6t(i,o,l,n),l.update.align=ox(l.update.align,a.align),l.update.angle=ox(l.update.angle,a.angle),l.update.baseline=ox(l.update.baseline,a.baseline),Rl({type:Z1,role:l4t,style:JK,from:r,encode:l},n)}function U6t(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=ox(is(a),n.update[u]),!1):!kb(u,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?is(s):os(t,is(s),is(o))}function V6t(e,t){const n=F6t(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,u=Uu(e,n),l=BOt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Xt(t.add(Ff({},[c]))),d=Xt(t.add(H4t({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let m;return c.grid&&h.push($6t(e,n,r.grid,d,l)),c.ticks&&(m=u("tickSize"),h.push(B6t(e,n,r.ticks,d,m,l))),c.labels&&(m=c.ticks?m:0,h.push(j6t(e,n,r.labels,d,m,l))),c.domain&&h.push(M6t(e,n,r.domain,f)),c.title&&h.push(z6t(e,n,r.title,f)),bF(bC({role:i4t,from:f,encode:dE(H6t(u,e),i,YS),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:s,style:a}),t)}function H6t(e,t){const n={enter:{},update:{}};return zs(n,{orient:e("orient"),offset:e("offset")||0,position:Yc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function aIe(e,t,n){const r=rn(e.signals),i=rn(e.scales);return n||r.forEach(o=>Bke(o,t)),rn(e.projections).forEach(o=>EOt(o,t)),i.forEach(o=>cOt(o,t)),rn(e.data).forEach(o=>C6t(o,t)),i.forEach(o=>fOt(o,t)),(n||r).forEach(o=>V4t(o,t)),rn(e.axes).forEach(o=>V6t(o,t)),rn(e.marks).forEach(o=>bF(o,t)),rn(e.legends).forEach(o=>h6t(o,t)),e.title&&x6t(e.title,t),t.parseLambdas(),t}const q6t=e=>dE({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function W6t(e,t){const n=t.config,r=Xt(t.root=t.add($P())),i=G6t(e,n);i.forEach(l=>Bke(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ff()),s=t.add(Uke(Lke(q6t(e.encode),gF,GK,e.style,t,{pulse:Xt(o)}))),a=t.add(qke({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Xt(s)}));t.operators.pop(),t.pushState(Xt(s),Xt(a),null),aIe(e,t,i),t.operators.push(a);let u=t.add(zke({mark:r,pulse:Xt(a)}));return u=t.add(Hke({pulse:Xt(u)})),u=t.add(J1({pulse:Xt(u)})),t.addData("root",new c1(t,o,o,u)),t}function O_(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function G6t(e,t){const n=s=>Yc(e[s],t[s]),r=[O_("background",n("background")),O_("autosize",t4t(n("autosize"))),O_("padding",r4t(n("padding"))),O_("width",n("width")||0),O_("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return rn(e.signals).forEach(s=>{hn(i,s.name)?s=On(i[s.name],s):r.push(s),o[s.name]=s}),rn(t.signals).forEach(s=>{!hn(o,s.name)&&!hn(i,s.name)&&r.push(s)}),r}function uIe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Wce(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}uIe.prototype=Wce.prototype={parse(e){return aIe(e,this)},fork(){return new Wce(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof rz?Xt(e):e;return this.add(iOt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Xt(this.add(J1({pulse:e})))),this._parent.push(t),this._lookup.push(n?Xt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return sr(this._parent)},encode(){return sr(this._encode)},lookup(){return sr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(bi(e))return yC(e,t);e.signal||tt("Unsupported field reference: "+nn(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Xt(this.add(Y4t(i)))}return r},compareRef(e){let t=!1;const n=o=>jo(o)?(t=!0,this.signalRef(o.signal)):P4t(o)?(t=!0,this.exprRef(o.expr)):o,r=rn(e.field).map(n),i=rn(e.order).map(n);return t?Xt(this.add(Nce({fields:r,orders:i}))):Ice(r,i)},keyRef(e,t){let n=!1;const r=o=>jo(o)?(n=!0,Xt(i[o.signal])):o,i=this.signals;return e=rn(e).map(r),n?Xt(this.add(K4t({fields:e,flat:t}))):k4t(e,t)},sortRef(e){if(!e)return e;const t=pF(e.op,e.field),n=e.order||I4t;return n.signal?Xt(this.add(Nce({fields:t,orders:this.signalRef(n.signal)}))):Ice(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return hn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&tt("Duplicate signal name: "+nn(e));const n=t instanceof rz?t:this.add($P(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||tt("Unrecognized signal name: "+nn(e)),this.signals[e]},signalRef(e){return this.signals[e]?Xt(this.signals[e]):(hn(this.lambdas,e)||(this.lambdas[e]=this.add($P(null))),Xt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Kd(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Nn(e)?e:this.signalRef(e.signal||sX(e))},exprRef(e,t){const n={expr:Kd(e,this)};return t&&(n.expr.$name=t),Xt(this.add(W4t(n)))},addBinding(e,t){this.bindings||tt("Nested signals do not support binding: "+nn(e)),this.bindings.push(On({signal:e},t))},addScaleProj(e,t){hn(this.scales,e)&&tt("Duplicate scale or projection name: "+nn(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,sOt(t))},addProjection(e,t){this.addScaleProj(e,rOt(t))},getScale(e){return this.scales[e]||tt("Unrecognized scale name: "+nn(e)),this.scales[e]},scaleRef(e){return Xt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return hn(this.data,e)&&tt("Duplicate data set name: "+nn(e)),this.data[e]=t},getData(e){return this.data[e]||tt("Undefined data set name: "+nn(e)),this.data[e]},addDataPipeline(e,t){return hn(this.data,e)&&tt("Duplicate data set name: "+nn(e)),this.addData(e,c1.fromEntries(this,t))}};function sX(e){return(Kt(e)?Y6t:K6t)(e)}function Y6t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Nn(i)?i.signal||sX(i):nn(i))}return n+"]"}function K6t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nn(r)+":"+(Nn(i)?i.signal||sX(i):nn(i));return t+"}"}function X6t(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Q6t(e,t,n){return Nn(e)||tt("Input Vega specification must be an object."),t=XEt(X6t(),t,e.config),W6t(e,new uIe(t,n)).toRuntime()}var J6t="5.31.0";fG(Yx,HTt,NDt,ckt,zkt,Ykt,wIt,eIt,_It,AIt,$It,HIt);const Z6t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:bo,CanvasHandler:US,CanvasRenderer:CP,DATE:$u,DAY:la,DAYOFYEAR:Yd,Dataflow:ix,Debug:ITe,Error:ATe,EventStream:F6,Gradient:XSe,GroupItem:Y6,HOURS:Dl,Handler:zY,HybridHandler:zAe,HybridRenderer:Oj,Info:kTe,Item:G6,MILLISECONDS:Tf,MINUTES:kl,MONTH:pa,Marks:Il,MultiPulse:wG,None:STe,Operator:Wr,Parameters:O6,Pulse:c0,QUARTER:Mu,RenderType:Jm,Renderer:zS,ResourceLoader:rAe,SECONDS:mc,SVGHandler:DAe,SVGRenderer:GY,SVGStringRenderer:jAe,Scenegraph:xAe,TIME_UNITS:hG,Transform:We,View:Ske,WEEK:Fo,Warn:DTe,YEAR:Ls,accessor:Xp,accessorFields:TTe,accessorName:Hwt,array:oC,ascending:cG,bandwidthNRD:CG,bin:UCe,bootstrapCI:VCe,boundClip:QAe,boundContext:$S,boundItem:kj,boundMark:gAe,boundStroke:Qp,changeset:K1,clampRange:fEt,codegenExpression:ZDe,compare:hEt,constant:yEt,cumulativeLogNormal:RG,cumulativeNormal:$6,cumulativeUniform:FG,dayofyear:nCe,debounce:vEt,defaultLocale:gG,definition:BCe,densityLogNormal:IG,densityNormal:SG,densityUniform:OG,domChild:Oo,domClear:rc,domCreate:Xm,domFind:jY,dotbin:HCe,error:YR,expressionFunction:io,extend:fG,extent:bEt,extentIndex:xEt,falsy:Qwt,fastmap:EEt,field:sG,flush:_Et,font:Z6,fontFamily:jS,fontSize:uh,format:KR,formatLocale:dP,formats:bG,hasOwnProperty:Gh,id:Gwt,identity:aG,inferType:DCe,inferTypes:kCe,ingest:Tr,inherits:TEt,inrange:CEt,interpolate:yY,interpolateColors:q6,interpolateRange:MSe,intersect:GAe,intersectBoxLine:Bb,intersectPath:CY,intersectPoint:SY,intersectRule:oAe,isArray:b6,isBoolean:FTe,isDate:MTe,isFunction:_6,isIterable:SEt,isNumber:$Te,isObject:n1,isRegExp:AEt,isString:mp,isTuple:N6,key:DEt,lerp:kEt,lineHeight:P0,loader:I6,locale:SCe,logger:Zwt,lruCache:REt,markup:WY,merge:NEt,mergeConfig:uG,multiLineOffset:$Y,one:Kwt,pad:PEt,panLinear:tEt,panLog:nEt,panPow:rEt,panSymlog:iEt,parse:Q6t,parseExpression:OK,parseSelector:hg,path:BO,pathCurves:EY,pathEqual:JAe,pathParse:Jx,pathRectangle:ZSe,pathRender:lC,pathSymbols:JSe,pathTrail:eAe,peek:sE,point:tF,projection:oK,quantileLogNormal:NG,quantileNormal:L6,quantileUniform:MG,quantiles:_G,quantizeInterpolator:$Se,quarter:lEt,quartiles:TG,get random(){return gc},randomInteger:Y2t,randomKDE:DG,randomLCG:G2t,randomLogNormal:WCe,randomMixture:GCe,randomNormal:AG,randomUniform:YCe,read:NCe,regressionConstant:$G,regressionExp:XCe,regressionLinear:LG,regressionLoess:ZCe,regressionLog:KCe,regressionPoly:JCe,regressionPow:QCe,regressionQuad:BG,renderModule:nF,repeat:y2,resetDefaultLocale:H_t,resetSVGClipId:nAe,resetSVGDefIds:XAt,responseType:RCe,runtimeContext:hke,sampleCurve:j6,sampleLogNormal:kG,sampleNormal:M6,sampleUniform:PG,scale:gr,sceneEqual:YY,sceneFromJSON:vAe,scenePickVisit:yP,sceneToJSON:yAe,sceneVisit:Cf,sceneZOrder:AY,scheme:vY,serializeXML:MAe,setHybridRendererOptions:WAt,setRandom:q2t,span:OEt,splitAccessPath:oG,stringValue:rx,textMetrics:yl,timeBin:bCe,timeFloor:lCe,timeFormatLocale:sC,timeInterval:aE,timeOffset:dCe,timeSequence:mCe,timeUnitSpecifier:tCe,timeUnits:pG,toBoolean:FEt,toDate:$Et,toNumber:lG,toSet:BEt,toString:LEt,transform:jCe,transforms:Yx,truncate:jEt,truthy:Xwt,tupleid:Qt,typeParsers:xj,utcFloor:cCe,utcInterval:uE,utcOffset:hCe,utcSequence:gCe,utcdayofyear:oCe,utcquarter:cEt,utcweek:sCe,version:J6t,visitArray:zEt,week:rCe,writeConfig:x6,zero:Ywt,zoomLinear:oEt,zoomLog:sEt,zoomPow:aEt,zoomSymlog:uEt},Symbol.toStringTag,{value:"Module"}));function eFt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var tFt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},nFt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},rFt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const iFt=Array.prototype.slice,Ug=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,iFt.call(t,1))},oFt=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var sFt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:oFt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Ug("join",arguments)},indexof:function(){return Ug("indexOf",arguments)},lastindexof:function(){return Ug("lastIndexOf",arguments)},slice:function(){return Ug("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Ug("substring",arguments,String)},split:function(){return Ug("split",arguments,String)},replace:function(){return Ug("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const aFt=["view","item","group","xy","x","y"],cz=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&cz.add(setImmediate);const uFt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:tFt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),cz.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||sFt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>nFt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>rFt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,cz.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function F_(e,t,n,r,i,o){const s=a=>uFt[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,aFt.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var lFt={operator(e,t){const n=t.ast,r=e.functions;return i=>F_(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>F_(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>F_(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return F_(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const u=s.datum;let l=0,c;for(const f in r)c=F_(r[f].ast,i,a,u,void 0,s),s[f]!==c&&(s[f]=c,l=1);return n!=="rule"&&eFt(s,r,o),l}}};const cFt="5.23.0",fFt={version:cFt};function mE(e,t,n){return e.fields=t||[],e.fname=n,e}function dFt(e){return e.length===1?hFt(e[0]):pFt(e)}const hFt=e=>function(t){return t[e]},pFt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ML(e){throw Error(e)}function ev(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||ML("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&ML("Access path missing closing bracket: "+e),r&&ML("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function mFt(e,t,n){const r=ev(e);return e=r.length===1?r[0]:e,mE(dFt(r),[e],e)}mFt("id");const gFt=mE(e=>e,[],"identity");mE(()=>0,[],"zero");mE(()=>1,[],"one");mE(()=>!0,[],"true");mE(()=>!1,[],"false");function yFt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const vFt=0,bFt=1,lIe=2,xFt=3,wFt=4;function EFt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yFt,r=e||vFt;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=bFt&&n("error","ERROR",arguments),this},warn(){return r>=lIe&&n("warn","WARN",arguments),this},info(){return r>=xFt&&n("log","INFO",arguments),this},debug(){return r>=wFt&&n("log","DEBUG",arguments),this}}}var jt=Array.isArray;function cr(e){return e===Object(e)}const Gce=e=>e!=="__proto__";function cIe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=_Ft(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;wF(r,o,i[o],s)}return r},{})}function wF(e,t,n,r){if(!Gce(t))return;let i,o;if(cr(n)&&!jt(n)){o=cr(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?wF(o,i,n[i]):Gce(i)&&(o[i]=n[i])}else e[t]=n}function _Ft(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function to(e){return e!=null?jt(e)?e:[e]:[]}function TFt(e){return typeof e=="function"}const CFt=Object.prototype.hasOwnProperty;function vo(e,t){return CFt.call(e,t)}function KS(e){return typeof e=="boolean"}function xi(e){return typeof e=="number"}function Dn(e){return typeof e=="string"}function lr(e){return jt(e)?"["+e.map(lr)+"]":cr(e)||Dn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function aX(e){return pt(e,"or")}function uX(e){return pt(e,"and")}function lX(e){return pt(e,"not")}function mN(e,t){if(lX(e))mN(e.not,t);else if(uX(e))for(const n of e.and)mN(n,t);else if(aX(e))for(const n of e.or)mN(n,t);else t(e)}function sx(e,t){return lX(e)?{not:sx(e.not,t)}:uX(e)?{and:e.and.map(n=>sx(n,t))}:aX(e)?{or:e.or.map(n=>sx(n,t))}:t(e)}const vn=structuredClone;function fIe(e){throw new Error(e)}function rw(e,t){const n={};for(const r of t)vo(e,r)&&(n[r]=e[r]);return n}function Iu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ur(e)).join(",")})`};function Yn(e){if(xi(e))return e;const t=Dn(e)?e:Ur(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function fz(e){return e===!1||e===null}function Vn(e,t){return e.includes(t)}function iw(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function cX(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function dIe(e,...t){for(const n of t)SFt(e,n??{});return e}function SFt(e,t){for(const n of ft(t))wF(e,n,t[n],!0)}function xd(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function AFt(e,t){const n=ft(e),r=ft(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function hIe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function fX(e,t){for(const n of e)if(t.has(n))return!0;return!1}function dz(e){const t=new Set;for(const n of e){const i=ev(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function dX(e,t){return e===void 0||t===void 0?!0:fX(dz(e),dz(t))}function zr(e){return ft(e).length===0}const ft=Object.keys,Bs=Object.values,$0=Object.entries;function xC(e){return e===!0||e===!1}function yi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function dT(e,t){return lX(e)?`!(${dT(e.not,t)})`:uX(e)?`(${e.and.map(n=>dT(n,t)).join(") && (")})`:aX(e)?`(${e.or.map(n=>dT(n,t)).join(") || (")})`:t(e)}function LP(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&LP(e[n],t)&&delete e[n],zr(e)}function XS(e){return e.charAt(0).toUpperCase()+e.substr(1)}function hX(e,t="datum"){const n=ev(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(lr).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function pIe(e,t="datum"){return`${t}[${lr(ev(e).join("."))}]`}function Or(e){return`datum['${e.replaceAll("'","\\'")}']`}function DFt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function yc(e){return`${ev(e).map(DFt).join("\\.")}`}function f1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function gE(e){return`${ev(e).join(".")}`}function ow(e){return e?ev(e).length:0}function no(...e){return e.find(t=>t!==void 0)}let mIe=42;function gIe(e){const t=++mIe;return e?String(e)+t:t}function kFt(){mIe=42}function yIe(e){return vIe(e)?e:`__${e}`}function vIe(e){return e.startsWith("__")}function wC(e){if(e!==void 0)return(e%360+360)%360}function EF(e){return xi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Yce=Object.getPrototypeOf(structuredClone({}));function pl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!pl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!pl(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Yce.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Yce.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!pl(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ur(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(o&&(o+=","),o+=JSON.stringify(u)+":"+l)}return t.splice(s,1),`{${o}}`}(e)}function pt(e,t){return cr(e)&&vo(e,t)&&e[t]!==void 0}const gp="row",yp="column",_F="facet",wi="x",hs="y",$f="x2",fh="y2",pg="xOffset",yE="yOffset",Lf="radius",Zp="radius2",Ic="theta",em="theta2",Bf="latitude",jf="longitude",zf="latitude2",vc="longitude2",mg="time",Lu="color",dh="fill",hh="stroke",Bu="shape",tm="size",tv="angle",nm="opacity",gg="fillOpacity",yg="strokeOpacity",vg="strokeWidth",bg="strokeDash",QS="text",sw="order",JS="detail",TF="key",d1="tooltip",CF="href",SF="url",AF="description",IFt={x:1,y:1,x2:1,y2:1},bIe={theta:1,theta2:1,radius:1,radius2:1};function xIe(e){return vo(bIe,e)}const pX={longitude:1,longitude2:1,latitude:1,latitude2:1};function wIe(e){switch(e){case Bf:return"y";case zf:return"y2";case jf:return"x";case vc:return"x2"}}function EIe(e){return vo(pX,e)}const RFt=ft(pX),mX={...IFt,...bIe,...pX,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function ax(e){return e===Lu||e===dh||e===hh}const _Ie={row:1,column:1,facet:1},uc=ft(_Ie),gX={...mX,..._Ie},NFt=ft(gX),{order:ZWt,detail:eGt,tooltip:tGt,...PFt}=gX,{row:nGt,column:rGt,facet:iGt,...OFt}=PFt;function FFt(e){return vo(OFt,e)}function TIe(e){return vo(gX,e)}const MFt=[$f,fh,zf,vc,em,Zp];function CIe(e){return nv(e)!==e}function nv(e){switch(e){case $f:return wi;case fh:return hs;case zf:return Bf;case vc:return jf;case em:return Ic;case Zp:return Lf}return e}function L0(e){if(xIe(e))switch(e){case Ic:return"startAngle";case em:return"endAngle";case Lf:return"outerRadius";case Zp:return"innerRadius"}return e}function ph(e){switch(e){case wi:return $f;case hs:return fh;case Bf:return zf;case jf:return vc;case Ic:return em;case Lf:return Zp}}function ju(e){switch(e){case wi:case $f:return"width";case hs:case fh:return"height"}}function SIe(e){switch(e){case wi:return"xOffset";case hs:return"yOffset";case $f:return"x2Offset";case fh:return"y2Offset";case Ic:return"thetaOffset";case Lf:return"radiusOffset";case em:return"theta2Offset";case Zp:return"radius2Offset"}}function yX(e){switch(e){case wi:return"xOffset";case hs:return"yOffset"}}function $Ft(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const LFt=ft(mX),{...vX}=mX,BFt=ft(vX),bX={x:1,y:1},rm=ft(bX);function ro(e){return vo(bX,e)}const xX={theta:1,radius:1},jFt=ft(xX);function DF(e){return e==="width"?wi:hs}const AIe={xOffset:1,yOffset:1};function ZS(e){return vo(AIe,e)}const zFt={time:1};function $L(e){return e in zFt}const{text:oGt,tooltip:sGt,href:aGt,url:uGt,description:lGt,detail:cGt,key:fGt,order:dGt,...DIe}=vX,UFt=ft(DIe);function VFt(e){return vo(vX,e)}function HFt(e){switch(e){case Lu:case dh:case hh:case tm:case Bu:case nm:case vg:case bg:return!0;case gg:case yg:case tv:case mg:return!1}}const kIe={...bX,...xX,...AIe,...DIe},wX=ft(kIe);function mh(e){return vo(kIe,e)}function qFt(e,t){return GFt(e)[t]}const IIe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:hGt,...WFt}=IIe;function GFt(e){switch(e){case Lu:case dh:case hh:case AF:case JS:case TF:case d1:case CF:case sw:case nm:case gg:case yg:case vg:case _F:case gp:case yp:return IIe;case wi:case hs:case pg:case yE:case Bf:case jf:case mg:return WFt;case $f:case fh:case zf:case vc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case tm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case bg:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Bu:return{point:"always",geoshape:"always"};case QS:return{text:"always"};case tv:return{point:"always",square:"always",text:"always"};case SF:return{image:"always"};case Ic:return{text:"always",arc:"always"};case Lf:return{text:"always",arc:"always"};case em:case Zp:return{arc:"always"}}}function LL(e){switch(e){case wi:case hs:case Ic:case Lf:case pg:case yE:case tm:case tv:case vg:case nm:case gg:case yg:case mg:case $f:case fh:case em:case Zp:return;case _F:case gp:case yp:case Bu:case bg:case QS:case d1:case CF:case SF:case AF:return"discrete";case Lu:case dh:case hh:return"flexible";case Bf:case jf:case zf:case vc:case JS:case TF:case sw:return}}const YFt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},KFt={count:1,min:1,max:1};function Lp(e){return pt(e,"argmin")}function xg(e){return pt(e,"argmax")}function EX(e){return Dn(e)&&vo(YFt,e)}const XFt=new Set(["count","valid","missing","distinct"]);function kF(e){return Dn(e)&&XFt.has(e)}function QFt(e){return Dn(e)&&Vn(["min","max"],e)}const JFt=new Set(["count","sum","distinct","valid","missing"]),ZFt=new Set(["mean","average","median","q1","q3","min","max"]);function RIe(e){return KS(e)&&(e=zF(e,void 0)),"bin"+ft(e).map(t=>IF(e[t])?yi(`_${t}_${$0(e[t])}`):yi(`_${t}_${e[t]}`)).join("")}function ni(e){return e===!0||rv(e)&&!e.binned}function As(e){return e==="binned"||rv(e)&&e.binned===!0}function rv(e){return cr(e)}function IF(e){return pt(e,"param")}function Kce(e){switch(e){case gp:case yp:case tm:case Lu:case dh:case hh:case vg:case nm:case gg:case yg:case Bu:return 6;case bg:return 4;default:return 10}}function eA(e){return pt(e,"expr")}function Ds(e,{level:t}={level:0}){const n=ft(e||{}),r={};for(const i of n)r[i]=t===0?ul(e[i]):Ds(e[i],{level:t-1});return r}function NIe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:m,...p}=e,g={...p,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...m?{subtitlePadding:m}:{}},w=rw(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:w,nonMarkTitleProperties:v,subtitle:b}}function Lm(e){return Dn(e)||jt(e)&&Dn(e[0])}function qt(e){return pt(e,"signal")}function iv(e){return pt(e,"step")}function eMt(e){return jt(e)?!1:pt(e,"fields")&&!pt(e,"data")}function tMt(e){return jt(e)?!1:pt(e,"fields")&&pt(e,"data")}function op(e){return jt(e)?!1:pt(e,"field")&&pt(e,"data")}const nMt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},rMt=ft(nMt),iMt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},hz=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function PIe(e){const t=jt(e.condition)?e.condition.map(Xce):Xce(e.condition);return{...ul(e),condition:t}}function ul(e){if(eA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Xce(e){if(eA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function fi(e){if(eA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return qt(e)?e:e!==void 0?{value:e}:void 0}function oMt(e){return qt(e)?e.signal:lr(e)}function Qce(e){return qt(e)?e.signal:lr(e.value)}function af(e){return qt(e)?e.signal:e==null?null:lr(e)}function sMt(e,t,n){for(const r of n){const i=Xd(r,t.markDef,t.config);i!==void 0&&(e[r]=fi(i))}return e}function OIe(e){return[].concat(e.type,e.style??[])}function jr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&pt(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Xd(e,t,n,r)}function Xd(e,t,n,{vgChannel:r}={}){const i=pz(e,t,n.style);return no(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function pz(e,t,n){return FIe(e,OIe(t),n)}function FIe(e,t,n){t=to(t);let r;for(const i of t){const o=n[i];pt(o,e)&&(r=o[e])}return r}function MIe(e,t){return to(e).reduce((n,r)=>(n.field.push(St(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function $Ie(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(pl(i,r))return;n.push(r)}),n}function LIe(e,t){return pl(e,t)||!t?e:e?[...to(e),...to(t)].join(", "):t}function BIe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Lm(n)||qt(n))&&(Lm(r)||qt(r)))return{explicit:e.explicit,value:LIe(n,r)};if(Lm(n)||qt(n))return{explicit:e.explicit,value:n};if(Lm(r)||qt(r))return{explicit:e.explicit,value:r};if(!Lm(n)&&!qt(n)&&!Lm(r)&&!qt(r))return{explicit:e.explicit,value:$Ie(n,r)};throw new Error("It should never reach here")}function _X(e){return`Invalid specification ${Ur(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const aMt='Autosize "fit" only works for single views and layered views.';function Jce(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Zce(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function efe(e){return e?`Dropping "fit-${e}" because spec has discrete ${ju(e)}.`:'Dropping "fit" because spec has discrete size.'}function TX(e){return`Unknown field for ${e}. Cannot calculate view size.`}function tfe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function uMt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function lMt(e){return`The "nearest" transform is not supported for ${e} marks.`}function jIe(e){return`Selection not supported for ${e} yet.`}function cMt(e){return`Cannot find a selection named "${e}".`}const fMt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",dMt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",hMt="Legend bindings are only supported for selections over an individual field or encoding channel.";function pMt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function mMt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const gMt="The same selection must be used to override scale domains in a layered view.",yMt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function vMt(e){return`Unknown repeated value "${e}".`}function nfe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const bMt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",CX="Animation involving facet, layer, or concat is currently unsupported.";function xMt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rx(e)}.`}function wMt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${rx(t)} encoding found for selection ${rx(n.param)}. Using "field": ${rx(r)}.`}const EMt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function _Mt(e){return`Unrecognized parse "${e}".`}function rfe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const TMt="Attempt to add the same child twice.";function CMt(e){return`Ignoring an invalid transform: ${Ur(e)}.`}const SMt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function ife(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function AMt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ur(t)} is overridden by a child projection ${Ur(n)}.`}const DMt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function kMt(e){return`${e}Offset dropped because ${e} is continuous`}function IMt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ur(n)}}.`}function zIe(e){return`Invalid field type "${e}".`}function RMt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function NMt(e){return`Invalid aggregation operator "${e}".`}function UIe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function PMt(e){return`Position range does not support relative band size for ${e}.`}function mz(e,t){return`Dropping ${Ur(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const OMt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function RF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function FMt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function MMt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function $Mt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function LMt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function BL(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function BMt(e){return`The ${e} for range marks cannot be an expression`}function jMt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function zMt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function UMt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function VMt(e){return`Cannot use the relative band size with ${e} scale.`}function HMt(e){return`Using unaggregated domain with raw field has no effect (${Ur(e)}).`}function qMt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function WMt(e){return`Unaggregated domain is currently unsupported for log scale (${Ur(e)}).`}function GMt(e){return`Cannot apply size to non-oriented mark "${e}".`}function YMt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function KMt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function VIe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function HIe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function XMt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ur(n)} and ${Ur(r)}). Using ${Ur(n)}.`}function QMt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ur(n)} and ${Ur(r)}). Using the union of the two domains.`}function JMt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ZMt(e){return`Dropping sort property ${Ur(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const ofe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",e$t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",t$t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",n$t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function r$t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function i$t(e){return`Stack is applied to a non-linear scale (${e}).`}function o$t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function BP(e,t){return`Invalid ${e}: ${Ur(t)}.`}function s$t(e){return`Dropping day from datetime ${Ur(e)} as day cannot be combined with other units.`}function a$t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function u$t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function l$t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function sfe(e){return`1D error band does not support ${e}.`}function qIe(e){return`Channel ${e} is required for "binned" bin.`}function c$t(e){return`Channel ${e} should not be used with "binned" bin.`}function f$t(e){return`Domain for ${e} is required for threshold scale.`}const WIe=EFt(lIe);let h1=WIe;function d$t(e){return h1=e,h1}function h$t(){return h1=WIe,h1}function SX(...e){h1.error(...e)}function yt(...e){h1.warn(...e)}function p$t(...e){h1.debug(...e)}function ov(e){if(e&&cr(e)){for(const t of DX)if(pt(e,t))return!0}return!1}const GIe=["january","february","march","april","may","june","july","august","september","october","november","december"],m$t=GIe.map(e=>e.substr(0,3)),YIe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],g$t=YIe.map(e=>e.substr(0,3));function y$t(e){if(EF(e)&&(e=+e),xi(e))return e>4&&yt(BP("quarter",e)),e-1;throw new Error(BP("quarter",e))}function v$t(e){if(EF(e)&&(e=+e),xi(e))return e-1;{const t=e.toLowerCase(),n=GIe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=m$t.indexOf(r);if(i!==-1)return i;throw new Error(BP("month",e))}}function b$t(e){if(EF(e)&&(e=+e),xi(e))return e%7;{const t=e.toLowerCase(),n=YIe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=g$t.indexOf(r);if(i!==-1)return i;throw new Error(BP("day",e))}}function AX(e,t){const n=[];if(t&&e.day!==void 0&&ft(e).length>1&&(yt(s$t(e)),e=vn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?v$t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?y$t(e.quarter):e.quarter;n.push(xi(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?b$t(e.day):e.day;n.push(xi(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function p1(e){const n=AX(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function x$t(e){const n=AX(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function w$t(e){const t=AX(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const KIe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},DX=ft(KIe);function E$t(e){return Gh(KIe,e)}function sv(e){return cr(e)?e.binned:XIe(e)}function XIe(e){return e&&e.startsWith("binned")}function kX(e){return e.startsWith("utc")}function _$t(e){return e.substring(3)}const T$t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function NF(e){return DX.filter(t=>JIe(e,t))}function QIe(e){const t=NF(e);return t[t.length-1]}function JIe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function C$t(e,t,{end:n}={end:!1}){const r=hX(t),i=kX(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let s;const a={};for(const u of DX)JIe(e,u)&&(a[u]=o(u),s=u);return n&&(a[s]+="+1"),x$t(a)}function ZIe(e){if(!e)return;const t=NF(e);return`timeUnitSpecifier(${Ur(t)}, ${Ur(T$t)})`}function S$t(e,t,n){if(!e)return;const r=ZIe(e);return`${n||kX(e)?"utc":"time"}Format(${t}, ${r})`}function ss(e){if(!e)return;let t;return Dn(e)?XIe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:cr(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),kX(t.unit)&&(t.utc=!0,t.unit=_$t(t.unit)),t}function A$t(e){const{utc:t,...n}=ss(e);return n.unit?(t?"utc":"")+ft(n).map(r=>yi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ft(n).map(r=>yi(`_${r}_${n[r]}`)).join("")}function eRe(e,t=n=>n){const n=ss(e),r=QIe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=tRe(r,n.step),a={...i,[s]:+i[s]+o};return`${t(p1(a))} - ${t(p1(i))}`}}const D$t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function k$t(e){return Gh(D$t,e)}function tRe(e,t=1){if(k$t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function I$t(e){return pt(e,"param")}function IX(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function RX(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function NX(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function PX(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function OX(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function FX(e){if(e!=null&&e.field){if(jt(e.range)&&e.range.length===2)return!0;if(qt(e.range))return!0}return!1}function MX(e){return!!(e!=null&&e.field)&&(jt(e.oneOf)||jt(e.in))}function R$t(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function nRe(e){return MX(e)||IX(e)||FX(e)||RX(e)||PX(e)||NX(e)||OX(e)}function td(e,t){return UF(e,{timeUnit:t,wrapTime:!0})}function N$t(e,t){return e.map(n=>td(n,t))}function rRe(e,t=!0){const{field:n}=e,r=ss(e.timeUnit),{unit:i,binned:o}=r||{},s=St(e,{expr:"datum"}),a=i?`time(${o?s:C$t(i,n)})`:s;if(IX(e))return`${a}===${td(e.equal,i)}`;if(RX(e)){const u=e.lt;return`${a}<${td(u,i)}`}else if(PX(e)){const u=e.gt;return`${a}>${td(u,i)}`}else if(NX(e)){const u=e.lte;return`${a}<=${td(u,i)}`}else if(OX(e)){const u=e.gte;return`${a}>=${td(u,i)}`}else{if(MX(e))return`indexof([${N$t(e.oneOf,i).join(",")}], ${a}) !== -1`;if(R$t(e))return PF(a,e.valid);if(FX(e)){const{range:u}=Ds(e),l=qt(u)?{signal:`${u.signal}[0]`}:u[0],c=qt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+td(l,i)+", "+td(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${td(l,i)}`),c!==null&&f.push(`${a} <= ${td(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ur(e)}`)}function PF(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function P$t(e){return nRe(e)&&e.timeUnit?{...e,timeUnit:ss(e.timeUnit)}:e}const tA={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function O$t(e){return e==="quantitative"||e==="temporal"}function iRe(e){return e==="ordinal"||e==="nominal"}const m1=tA.quantitative,$X=tA.ordinal,aw=tA.temporal,LX=tA.nominal,vE=tA.geojson;function F$t(e){if(e)switch(e=e.toLowerCase(),e){case"q":case m1:return"quantitative";case"t":case aw:return"temporal";case"o":case $X:return"ordinal";case"n":case LX:return"nominal";case vE:return"geojson"}}const ks={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},gz={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function M$t(e,t){const n=gz[e],r=gz[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const $$t={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function afe(e){return $$t[e]}const oRe=new Set(["linear","log","pow","sqrt","symlog"]),sRe=new Set([...oRe,"time","utc"]);function aRe(e){return oRe.has(e)}const uRe=new Set(["quantile","quantize","threshold"]),L$t=new Set([...sRe,...uRe,"sequential","identity"]),B$t=new Set(["ordinal","bin-ordinal","point","band"]);function cs(e){return B$t.has(e)}function Sf(e){return L$t.has(e)}function wd(e){return sRe.has(e)}function uw(e){return uRe.has(e)}const j$t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function z$t(e){return!Dn(e)&&pt(e,"name")}function lRe(e){return pt(e,"param")}function U$t(e){return pt(e,"unionWith")}function V$t(e){return cr(e)&&"field"in e}const H$t={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{...q$t}=H$t,W$t=ft(q$t);function yz(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return wd(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return wd(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return wd(e);case"nice":return wd(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Sf(e)&&!Vn(["log","time","utc","threshold","quantile"],e)}}function cRe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return ax(e)?void 0:UMt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function G$t(e,t){return Vn([$X,LX],t)?e===void 0||cs(e):t===aw?Vn([ks.TIME,ks.UTC,void 0],e):t===m1?aRe(e)||uw(e)||e===void 0:!0}function Y$t(e,t,n=!1){if(!mh(e))return!1;switch(e){case wi:case hs:case pg:case yE:case Ic:case Lf:return wd(t)||t==="band"?!0:t==="point"?!n:!1;case mg:return Vn(["linear","band"],t);case tm:case vg:case nm:case gg:case yg:case tv:return wd(t)||uw(t)||Vn(["band","point","ordinal"],t);case Lu:case dh:case hh:return t!=="band";case bg:case Bu:return t==="ordinal"||uw(t)}}function K$t(e){return cr(e)&&"value"in e}const ru={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},fRe=ru.arc,OF=ru.area,FF=ru.bar,X$t=ru.image,MF=ru.line,$F=ru.point,Q$t=ru.rect,jP=ru.rule,dRe=ru.text,BX=ru.tick,J$t=ru.trail,jX=ru.circle,zX=ru.square,hRe=ru.geoshape;function wg(e){return["line","area","trail"].includes(e)}function EC(e){return["rect","bar","image","arc","tick"].includes(e)}const Z$t=new Set(ft(ru));function Qd(e){return pt(e,"type")}const e5t=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],t5t=["fill","fillOpacity"],n5t=[...e5t,...t5t],r5t={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},ufe=ft(r5t),jL=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],i5t={area:["line","point"],bar:jL,rect:jL,line:["point"],tick:["bandSize","thickness",...jL]},o5t={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},s5t={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},pRe=ft(s5t);function g1(e){return pt(e,"band")}const a5t={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},u5t=5,UX={binSpacing:0,continuousBandSize:u5t,minBandSize:.25,timeUnitBandPosition:.5},l5t={...UX,binSpacing:1},c5t={...UX,thickness:1};function f5t(e){return Qd(e)?e.type:e}function mRe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function VX({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!Sf(r)||i)return"always-valid";const o=mRe(jr("invalid",e,t),{isPath:wg(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":o}function d5t(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function gRe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function yRe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=Df(t),u=kF(a==null?void 0:a.aggregate),l=VX({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:u});if(a&&l==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:PF(St(a,{expr:"datum"}),!1),...h5t(f,n,r)}}}function h5t(e,t,n){if(K$t(e)){const{value:r}=e;return qt(r)?{signal:r.signal}:{value:r}}return gRe({scale:t,scaleName:n,mode:"zeroOrMin"})}function HX(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=nv(t),u=qX(e),l=yRe({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return l!==void 0?[l,u]:u}function p5t(e){const{datum:t}=e;return ov(t)?p1(t):`${Ur(t)}`}function By(e,t,n,r){const i={};if(t&&(i.scale=t),gh(e)){const{datum:o}=e;ov(o)?i.signal=p1(o):qt(o)?i.signal=o.signal:eA(o)?i.signal=o.expr:i.value=o}else i.field=St(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function zP({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!qt(s)&&0<s&&s<1?"datum":void 0,u=St(t,{expr:a,suffix:i}),l=n!==void 0?St(n,{expr:a}):St(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?u:l;c.field=f}else{const f=qt(s)?`(1-${s.signal}) * ${u} + ${s.signal} * ${l}`:`${1-s} * ${u} + ${s} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function m5t({scaleName:e,fieldDef:t}){const n=St(t,{expr:"datum"}),r=St(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function qX({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Tn(t)){const f=s==null?void 0:s.get("type");if(eu(t)){c??(c=B0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:m}=t;if(ni(d)||c&&h&&m===aw)return a!=null&&a.impute?By(t,o,{binSuffix:"mid"},{offset:u}):c&&!cs(f)?zP({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):By(t,o,sA(t,e)?{binSuffix:"range"}:{},{offset:u});if(As(d)){if(bt(n))return zP({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});yt(qIe(e===wi?$f:fh))}}return By(t,o,cs(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Af(t)){const f=t.value,d=u?{offset:u}:{};return{...hT(e,f),...d}}}return TFt(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function hT(e,t){return Vn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Vn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:fi(t)}function y1(e){return e&&e!=="number"&&e!=="time"}function vRe(e,t,n){return`${e}(${t}${n?`, ${Ur(n)}`:""})`}const g5t="  ";function WX({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var u,l;if(y1(n))return uf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=bRe(e,r,i),a=lw(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return uf({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return uf({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&bt(e)&&e.timeUnit===void 0)return uf({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(fw(e)){const c=v5t({field:s,timeUnit:bt(e)?(u=ss(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:av(e)&&((l=e.scale)==null?void 0:l.type)===ks.UTC});return c?{signal:c}:void 0}if(t=vz({type:a,specifiedFormat:t,config:o,normalizeStack:i}),bt(e)&&ni(e.bin)){const c=St(e,{expr:r,binSuffix:"end"});return{signal:nA(s,c,t,n,o)}}else return t||lw(e)==="quantitative"?{signal:`${ERe(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function bRe(e,t,n){return bt(e)?n?`${St(e,{expr:t,suffix:"end"})}-${St(e,{expr:t,suffix:"start"})}`:St(e,{expr:t}):p5t(e)}function uf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=bRe(e,r,i)),s!=="datum.value"&&bt(e)&&ni(e.bin)){const a=St(e,{expr:r,binSuffix:"end"});return{signal:nA(s,a,t,n,o)}}return{signal:vRe(n,s,t)}}function xRe(e,t,n,r,i,o){var s;if(!(Dn(r)&&y1(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&lw(e)==="quantitative"&&(i.normalizedNumberFormatType&&cw(e)&&e.stack==="normalize"||i.numberFormatType))){if(cw(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return vz({type:"quantitative",config:i,normalizeStack:!0});if(fw(e)){const a=bt(e)?(s=ss(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:y5t({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return vz({type:t,specifiedFormat:n,config:i})}}function wRe(e,t,n){var r;if(e&&(qt(e)||e==="number"||e==="time"))return e;if(fw(t)&&n!=="time"&&n!=="utc")return bt(t)&&((r=ss(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function vz({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Dn(t))return t;if(e===m1)return r?n.normalizedNumberFormat:n.numberFormat}function y5t({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:ZIe(t)}:r?void 0:n.timeFormat)}function ERe(e,t){return`format(${e}, "${t||""}")`}function lfe(e,t,n,r){return y1(n)?vRe(n,e,t):ERe(e,(Dn(t)?t:void 0)??r.numberFormat)}function nA(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return nA(e,t,i.numberFormat,i.numberFormatType,i);const o=lfe(e,n,r,i),s=lfe(t,n,r,i);return`${PF(e,!1)} ? "null" : ${o} + "${g5t}" + ${s}`}function v5t({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Dn(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):S$t(t,e,o)}const LF="min",b5t={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function cfe(e){return vo(b5t,e)}function x5t(e){return pt(e,"encoding")}function vp(e){return e&&(e.op==="count"||pt(e,"field"))}function _Re(e){return e&&jt(e)}function rA(e){return pt(e,"row")||pt(e,"column")}function GX(e){return pt(e,"header")}function BF(e){return pt(e,"facet")}function w5t(e){return pt(e,"param")}function E5t(e){return!Dn(e)&&pt(e,"repeat")}function ffe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function YX(e){return pt(e,"sort")}function B0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Tn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(bt(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Xd("timeUnitBandPosition",n,r);if(ni(o))return .5}}function TRe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var l,c,f;const a=ju(e),u=jr(s?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(bt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Xd("timeUnitBandSize",r,i)};if(ni(h)&&!cs(o))return{band:1}}if(EC(r.type))return o?cs(o)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function CRe(e,t,n,r){return ni(e.bin)||e.timeUnit&&eu(e)&&e.type==="temporal"?B0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function SRe(e){return pt(e,"sort")&&!pt(e,"field")}function iA(e){return pt(e,"condition")}function jF(e){const t=e==null?void 0:e.condition;return!!t&&!jt(t)&&bt(t)}function oA(e){const t=e==null?void 0:e.condition;return!!t&&!jt(t)&&Tn(t)}function _5t(e){const t=e==null?void 0:e.condition;return!!t&&(jt(t)||Af(t))}function bt(e){return pt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function lw(e){return e==null?void 0:e.type}function gh(e){return pt(e,"datum")}function n0(e){return eu(e)&&!VP(e)||UP(e)}function dfe(e){return eu(e)&&e.type==="quantitative"&&!e.bin||UP(e)}function UP(e){return gh(e)&&xi(e.datum)}function Tn(e){return bt(e)||gh(e)}function eu(e){return e&&(pt(e,"field")||e.aggregate==="count")&&pt(e,"type")}function Af(e){return pt(e,"value")}function av(e){return pt(e,"scale")||pt(e,"sort")}function cw(e){return pt(e,"axis")||pt(e,"stack")||pt(e,"impute")}function ARe(e){return pt(e,"legend")}function DRe(e){return pt(e,"format")||pt(e,"formatType")}function T5t(e){return Iu(e,["legend","axis","header","scale"])}function C5t(e){return pt(e,"op")}function St(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(A5t(e))n=yIe("count");else{let s;if(!t.nofn)if(C5t(e))s=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ni(a)?(s=RIe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?xg(u)?(o=`["${n}"]`,n=`argmax_${u.argmax}`):Lp(u)?(o=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):l&&!sv(l)&&(s=A$t(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?gE(n):t.expr?pIe(n,t.expr)+o:yc(n)+o}function VP(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return bt(e)&&!!e.bin;case"temporal":return!1}throw new Error(zIe(e.type))}function S5t(e){var t;return av(e)&&uw((t=e.scale)==null?void 0:t.type)}function A5t(e){return e.aggregate==="count"}function D5t(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(ni(r))return`${n} (binned)`;if(i&&!sv(i)){const a=(s=ss(i))==null?void 0:s.unit;if(a)return`${n} (${NF(a).join("-")})`}else if(o)return xg(o)?`${n} for max ${o.argmax}`:Lp(o)?`${n} for min ${o.argmin}`:`${XS(o)} of ${n}`;return n}function k5t(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(xg(t))return`${i} for argmax(${t.argmax})`;if(Lp(t))return`${i} for argmin(${t.argmin})`;const o=r&&!sv(r)?ss(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||ni(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const kRe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return k5t(e);default:return D5t(e,t)}};let IRe=kRe;function RRe(e){IRe=e}function I5t(){RRe(kRe)}function ux(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=KX(e))==null?void 0:a.title;if(!bt(e))return i??e.title;const o=e,s=r?XX(o,t):void 0;return n?no(i,o.title,s):i??o.title??s}function KX(e){if(cw(e)&&e.axis)return e.axis;if(ARe(e)&&e.legend)return e.legend;if(GX(e)&&e.header)return e.header}function XX(e,t){return IRe(e,t)}function HP(e){if(DRe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=KX(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function R5t(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(YX(e)&&jt(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!xg(n)&&!Lp(n))return"quantitative";if(av(e)&&((o=e.scale)!=null&&o.type))switch(gz[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Df(e){if(bt(e))return e;if(jF(e))return e.condition}function Mo(e){if(Tn(e))return e;if(oA(e))return e.condition}function NRe(e,t,n,r={}){if(Dn(e)||xi(e)||KS(e)){const i=Dn(e)?"string":xi(e)?"number":"boolean";return yt(IMt(t,i,e)),{value:e}}return Tn(e)?qP(e,t,n,r):oA(e)?{...e,condition:qP(e.condition,t,n,r)}:e}function qP(e,t,n,r){if(DRe(e)){const{format:i,formatType:o,...s}=e;if(y1(o)&&!n.customFormatTypes)return yt(ife(t)),qP(s,t,n,r)}else{const i=cw(e)?"axis":ARe(e)?"legend":GX(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(y1(s)&&!n.customFormatTypes)return yt(ife(t)),qP({...e,[i]:a},t,n,r)}}return bt(e)?QX(e,t,r):N5t(e)}function N5t(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=xi(n)?"quantitative":Dn(n)?"nominal":ov(n)?"temporal":void 0,{...e,type:t}}function QX(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!EX(r)&&!xg(r)&&!Lp(r)&&(yt(NMt(r)),delete a.aggregate),i&&(a.timeUnit=ss(i)),s&&(a.field=`${s}`),ni(o)&&(a.bin=zF(o,t)),As(o)&&!ro(t)&&yt(c$t(t)),eu(a)){const{type:u}=a,l=F$t(u);u!==l&&(a.type=l),u!=="quantitative"&&kF(r)&&(yt(RMt(u,r)),a.type="quantitative")}else if(!CIe(t)){const u=R5t(a,t);a.type=u}if(eu(a)){const{compatible:u,warning:l}=P5t(a,t)||{};u===!1&&yt(l)}if(YX(a)&&Dn(a.sort)){const{sort:u}=a;if(cfe(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&cfe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(GX(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function zF(e,t){return KS(e)?{maxbins:Kce(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Kce(t)}:e}const fb={compatible:!0};function P5t(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case gp:case yp:case _F:return VP(e)?fb:{compatible:!1,warning:MMt(t)};case wi:case hs:case pg:case yE:case Lu:case dh:case hh:case QS:case JS:case TF:case d1:case CF:case SF:case tv:case Ic:case Lf:case AF:return fb;case jf:case vc:case Bf:case zf:return n!==m1?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:fb;case nm:case gg:case yg:case vg:case tm:case em:case Zp:case $f:case fh:case mg:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:fb;case Bu:case bg:return!VP(e)&&!S5t(e)?{compatible:!1,warning:$Mt(t)}:fb;case sw:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:fb}}function fw(e){const{formatType:t}=HP(e);return t==="time"||!t&&O5t(e)}function O5t(e){return e&&(e.type==="temporal"||bt(e)&&!!e.timeUnit)}function UF(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const o=t&&((u=ss(t))==null?void 0:u.unit);let s=o||n==="temporal",a;return eA(e)?a=e.expr:qt(e)?a=e.signal:ov(e)?(s=!0,a=p1(e)):(Dn(e)||xi(e))&&s&&(a=`datetime(${Ur(e)})`,E$t(o)&&(xi(e)&&e<1e4||Dn(e)&&isNaN(Date.parse(e)))&&(a=p1({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:Ur(e)}function PRe(e,t){const{type:n}=e;return t.map(r=>{const i=bt(e)&&!sv(e.timeUnit)?e.timeUnit:void 0,o=UF(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function sA(e,t){return ni(e.bin)?mh(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const hfe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function aA(e){return e==null?void 0:e.condition}const ORe=["domain","grid","labels","ticks","title"],F5t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},FRe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},M5t={...FRe,style:1,labelExpr:1,encoding:1};function pfe(e){return vo(M5t,e)}const $5t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},MRe=ft($5t);function im(e){return pt(e,"mark")}class VF{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return im(t)?f5t(t.mark)===this.name:!1}}function jy(e,t){const n=e&&e[t];return n?jt(n)?iw(n,r=>!!r.field):bt(n)||jF(n):!1}function $Re(e,t){const n=e&&e[t];return n?jt(n)?iw(n,r=>!!r.field):bt(n)||gh(n)||oA(n):!1}function LRe(e,t){if(ro(t)){const n=e[t];if((bt(n)||gh(n))&&(iRe(n.type)||bt(n)&&n.timeUnit)){const r=yX(t);return $Re(e,r)}}return!1}function BRe(e){return iw(NFt,t=>{if(jy(e,t)){const n=e[t];if(jt(n))return iw(n,r=>!!r.aggregate);{const r=Df(n);return r&&!!r.aggregate}}return!1})}function jRe(e,t){const n=[],r=[],i=[],o=[],s={};return JX(e,(a,u)=>{if(bt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const m=KX(a),p=m==null?void 0:m.title;let g=St(a,{forAs:!0});const v={...p?[]:{title:ux(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(xg(c)?(b="argmax",g=St({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${g}.${l}`):Lp(c)?(b="argmin",g=St({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:g};l&&(w.field=l),o.push(w)}}else if(n.push(g),eu(a)&&ni(f)){if(r.push({bin:f,field:l,as:g}),n.push(St(a,{binSuffix:"end"})),sA(a,u)&&n.push(St(a,{binSuffix:"range"})),ro(u)){const b={field:`${g}_end`};s[`${u}2`]=b}v.bin="binned",CIe(u)||(v.type=m1)}else if(d&&!sv(d)){i.push({timeUnit:d,field:l,as:g});const b=eu(a)&&a.type!==aw&&"time";b&&(u===QS||u===d1?v.formatType=b:VFt(u)?v.legend={formatType:b,...v.legend}:ro(u)&&(v.axis={formatType:b,...v.axis}))}s[u]=v}else n.push(l),s[u]=e[u]}else s[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function L5t(e,t,n){const r=qFt(t,n);if(r){if(r==="binned"){const i=e[t===$f?wi:hs];return!!(bt(i)&&bt(e[t])&&As(i.bin))}}else return!1;return!0}function B5t(e,t,n,r){const i={};for(const o of ft(e))TIe(o)||yt(FMt(o));for(let o of LFt){if(!e[o])continue;const s=e[o];if(ZS(o)){const a=$Ft(o),u=i[a];if(bt(u)&&O$t(u.type)&&bt(s)&&!u.timeUnit){yt(kMt(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(yt(DMt),o=Ic),!L5t(e,o,t)){yt(RF(o,t));continue}if(o===tm&&t==="line"){const a=Df(e[o]);if(a!=null&&a.aggregate){yt(OMt);continue}}if(o===Lu&&(n?"fill"in e:"stroke"in e)){yt(UIe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===JS||o===sw&&!jt(s)&&!Af(s)||o===d1&&jt(s)){if(s){if(o===sw){const a=e[o];if(SRe(a)){i[o]=a;continue}}i[o]=to(s).reduce((a,u)=>(bt(u)?a.push(QX(u,o)):yt(mz(u,o)),a),[])}}else{if(o===d1&&s===null)i[o]=null;else if(!bt(s)&&!gh(s)&&!Af(s)&&!iA(s)&&!qt(s)){yt(mz(s,o));continue}i[o]=NRe(s,o,r)}}return i}function HF(e,t){const n={};for(const r of ft(e)){const i=NRe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function j5t(e){const t=[];for(const n of ft(e))if(jy(e,n)){const r=e[n],i=to(r);for(const o of i)bt(o)?t.push(o):jF(o)&&t.push(o.condition)}return t}function JX(e,t,n){if(e)for(const r of ft(e)){const i=e[r];if(jt(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function z5t(e,t,n,r){return e?ft(e).reduce((i,o)=>{const s=e[o];return jt(s)?s.reduce((a,u)=>t.call(r,a,u,o),i):t.call(r,i,s,o)},n):n}function zRe(e,t){return ft(t).reduce((n,r)=>{switch(r){case wi:case hs:case CF:case AF:case SF:case $f:case fh:case pg:case yE:case Ic:case em:case Lf:case Zp:case mg:case Bf:case jf:case zf:case vc:case QS:case Bu:case tv:case d1:return n;case sw:if(e==="line"||e==="trail")return n;case JS:case TF:{const i=t[r];if(jt(i)||bt(i))for(const o of to(i))o.aggregate||n.push(St(o,{}));return n}case tm:if(e==="trail")return n;case Lu:case dh:case hh:case nm:case gg:case yg:case bg:case vg:{const i=Df(t[r]);return i&&!i.aggregate&&n.push(St(i,{})),n}}},[])}function U5t(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(jt(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return jt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function bz(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const u=r?` of ${ZX(t)}`:"";return{field:s+t.field,type:t.type,title:qt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),o=j5t(n).map(T5t);return{tooltip:[...i,...xd(o,Yn)]}}function ZX(e){const{title:t,field:n}=e;return no(t,n)}function eQ(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=ZX(n);return URe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...Dn(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function URe(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Qd(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...KS(e[t])?{}:e[t]}}]:[]}function VRe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:kk(o,n),continuousAxisChannelDef2:kk(s,n),continuousAxisChannelDefError:kk(a,n),continuousAxisChannelDefError2:kk(u,n),continuousAxis:i}}function kk(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&yt(l$t(n,t)),r}else return e}function HRe(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(Qd(n)&&n.orient)return n.orient;if(n0(i)){if(n0(o)){const s=bt(i)&&i.aggregate,a=bt(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return fw(o)&&!fw(i)?"horizontal":"vertical"}return"horizontal"}else{if(n0(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const WP="boxplot",V5t=["box","median","outliers","rule","ticks"],H5t=new VF(WP,WRe);function qRe(e){return xi(e)?"tukey":e}function WRe(e,{config:t}){e={...e,encoding:HF(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=Qd(n)?n:{type:n};i&&yt(jIe("boxplot"));const u=a.extent??t.boxplot.extent,l=jr("size",a,t),c=a.invalid,f=qRe(u),{bins:d,timeUnits:h,transform:m,continuousAxisChannelDef:p,continuousAxis:g,groupby:v,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:T}=q5t(e,u,t),S=gE(p.field),{color:D,size:k,...R}=w,O=Ge=>eQ(a,g,p,Ge,t.boxplot),M=O(R),F=O(w),L=(cr(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",H=O({...R,...k?{size:k}:{},color:{condition:{test:`${Or(`lower_box_${p.field}`)} >= ${Or(`upper_box_${p.field}`)}`,...D||{value:L}}}}),V=bz([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],p,w),Q={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},K=f==="min-max"?V:bz([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,w),Z=[...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:K}),...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:K}),...M({partName:"ticks",mark:Q,positionPrefix:"lower_whisker",extraEncoding:K}),...M({partName:"ticks",mark:Q,positionPrefix:"upper_whisker",extraEncoding:K})],U=[...f!=="tukey"?Z:[],...F({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:V}),...H({partName:"median",mark:{type:"tick",invalid:c,...cr(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:V})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(m),layer:U};const B=Or(`lower_box_${p.field}`),q=Or(`upper_box_${p.field}`),z=`(${q} - ${B})`,G=`${B} - ${u} * ${z}`,X=`${q} + ${u} * ${z}`,ne=Or(p.field),ge={joinaggregate:GRe(p.field),groupby:v},me={transform:[{filter:`(${G} <= ${ne}) && (${ne} <= ${X})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${S}`},{op:"max",field:p.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${S}`},...b],groupby:v}],layer:Z},{tooltip:ye,...we}=R,{scale:fe,axis:se}=p,Ce=ZX(p),Ae=Iu(se,["title"]),Ue=URe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${G}) || (${ne} > ${X})`}],mark:"point",encoding:{[g]:{field:p.field,type:p.type,...Ce!==void 0?{title:Ce}:{},...fe!==void 0?{scale:fe}:{},...zr(Ae)?{}:{axis:Ae}},...we,...D?{color:D}:{},...T?{tooltip:T}:{}}})[0];let Xe;const Le=[...d,...h,ge];return Ue?Xe={transform:Le,layer:[Ue,me]}:(Xe=me,Xe.transform.unshift(...Le)),{...s,layer:[Xe,{transform:m,layer:U}]}}function GRe(e){const t=gE(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function q5t(e,t,n){const r=HRe(e,WP),{continuousAxisChannelDef:i,continuousAxis:o}=VRe(e,r,WP),s=i.field,a=gE(s),u=qRe(t),l=[...GRe(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${Or(`upper_box_${a}`)} - ${Or(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Or(`upper_box_${a}`)} + ${Or(`iqr_${a}`)} * ${t}, ${Or(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Or(`lower_box_${a}`)} - ${Or(`iqr_${a}`)} * ${t}, ${Or(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=U5t(d),{bins:p,timeUnits:g,aggregate:v,groupby:b,encoding:w}=jRe(m,n),E=r==="vertical"?"horizontal":"vertical",_=r,T=[...p,...g,{aggregate:[...v,...l],groupby:b},...c];return{bins:p,timeUnits:g,transform:T,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:h}}const tQ="errorbar",W5t=["ticks","rule"],G5t=new VF(tQ,YRe);function YRe(e,{config:t}){e={...e,encoding:HF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:u,tooltipEncoding:l}=KRe(e,tQ,t);delete o.size;const c=eQ(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},m=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...m.length>1?{layer:m}:{...m[0]}}}function Y5t(e,t){const{encoding:n}=e;if(K5t(n))return{orient:HRe(e,t),inputType:"raw"};const r=X5t(n),i=Q5t(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Tn(a)&&Tn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Tn(a)){if(n0(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Tn(u)){if(n0(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Tn(u)&&!Tn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Tn(c)&&!Tn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Tn(a)&&Tn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Tn(a)){if(n0(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Tn(l)){if(n0(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function K5t(e){return(Tn(e.x)||Tn(e.y))&&!Tn(e.x2)&&!Tn(e.y2)&&!Tn(e.xError)&&!Tn(e.xError2)&&!Tn(e.yError)&&!Tn(e.yError2)}function X5t(e){return Tn(e.x2)||Tn(e.y2)}function Q5t(e){return Tn(e.xError)||Tn(e.xError2)||Tn(e.yError)||Tn(e.yError2)}function KRe(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,u=Qd(r)?r:{type:r};o&&yt(jIe(t));const{orient:l,inputType:c}=Y5t(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:m,continuousAxis:p}=VRe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:w}=J5t(u,f,d,h,m,c,t,n),{[p]:E,[p==="x"?"x2":"y2"]:_,[p==="x"?"xError":"yError"]:T,[p==="x"?"xError2":"yError2"]:S,...D}=i,{bins:k,timeUnits:R,aggregate:O,groupby:M,encoding:F}=jRe(D,n),L=[...O,...g],H=c!=="raw"?[]:M,V=bz(b,f,F,w);return{transform:[...a.transform??[],...k,...R,...L.length===0?[]:[{aggregate:L,groupby:H}],...v],groupby:H,continuousAxisChannelDef:f,continuousAxis:p,encodingWithoutContinuousAxis:F,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:V}}function J5t(e,t,n,r,i,o,s,a){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,m=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(m==="iqr")&&yt(u$t(h,m,s)),m==="stderr"||m==="stdev")u=[{op:m,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${Or(`center_${c}`)} + ${Or(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Or(`center_${c}`)} - ${Or(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:XS(h)},{fieldPrefix:"upper_",titlePrefix:mfe(h,m,"+")},{fieldPrefix:"lower_",titlePrefix:mfe(h,m,"-")}],d=!0;else{let p,g,v;m==="ci"?(p="mean",g="ci0",v="ci1"):(p="median",g="q1",v="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:p,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:ux({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ux({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ux({field:c,aggregate:p,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&yt(a$t(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:Or(n.field),as:`upper_${c}`},{calculate:Or(c),as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${Or(c)} + ${Or(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${Or(c)} + ${Or(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${Or(c)} - ${Or(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:f1(f1(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function mfe(e,t,n){return`${XS(e)} ${n} ${t}`}const nQ="errorband",Z5t=["band","borders"],e8t=new VF(nQ,XRe);function XRe(e,{config:t}){e={...e,encoding:HF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:u}=KRe(e,nQ,t),l=s,c=eQ(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const m={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...m,ariaRoleDescription:"errorband"},h={...h,...m,aria:!1}):l.interpolate?yt(sfe("interpolate")):l.tension&&yt(sfe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const QRe={};function rQ(e,t,n){const r=new VF(e,t);QRe[e]={normalizer:r,parts:n}}function t8t(){return ft(QRe)}rQ(WP,WRe,V5t);rQ(tQ,YRe,W5t);rQ(nQ,XRe,Z5t);const n8t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],JRe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},ZRe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},r8t=ft(JRe),i8t=ft(ZRe),o8t={header:1,headerRow:1,headerColumn:1,headerFacet:1},eNe=ft(o8t),tNe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],s8t={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},a8t={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},kf="_vgsid_",u8t={point:{on:"click",fields:[kf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function iQ(e){return e==="legend"||!!(e!=null&&e.legend)}function zL(e){return iQ(e)&&cr(e)}function oQ(e){return!!(e!=null&&e.select)}function nNe(e){const t=[];for(const n of e||[]){if(oQ(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function l8t(e){return qF(e)||aQ(e)||sQ(e)}function sQ(e){return pt(e,"concat")}function qF(e){return pt(e,"vconcat")}function aQ(e){return pt(e,"hconcat")}function rNe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Jd(e){return pt(e,"step")}function gfe(e){return pt(e,"view")||pt(e,"width")||pt(e,"height")}const yfe=20,c8t={align:1,bounds:1,center:1,columns:1,spacing:1},f8t=ft(c8t);function d8t(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(BF(e)&&!rA(e.facet)||sQ(e))&&(i.columns=s),qF(e)&&(i.columns=1);for(const a of f8t)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=xi(u)?u:{row:u.row??o,column:u.column??o}}else i[a]=e[a];return i}function xz(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function wz(e,t){const n=GP(e,t);return Jd(n)?n.step:iNe}function GP(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return no(n,{step:e.step})}const iNe=20,h8t={continuousWidth:200,continuousHeight:200,step:iNe},p8t={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:h8t,mark:o5t,arc:{},area:{},bar:l5t,circle:{},geoshape:{},image:{},line:{},point:{},rect:UX,rule:{color:"black"},square:{},text:{color:"black"},tick:c5t,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:j$t,projection:{},legend:s8t,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:u8t,style:{},title:{},facet:{spacing:yfe},concat:{spacing:yfe},normalizedNumberFormat:".0%"},Ph=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],vfe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},bfe={blue:Ph[0],orange:Ph[1],red:Ph[2],teal:Ph[3],green:Ph[4],yellow:Ph[5],purple:Ph[6],pink:Ph[7],brown:Ph[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function m8t(e={}){return{signals:[{name:"color",value:cr(e)?{...bfe,...e}:bfe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function g8t(e){return{signals:[{name:"fontSize",value:cr(e)?{...vfe,...e}:vfe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function y8t(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function oNe(e){const t=ft(e||{}),n={};for(const r of t){const i=e[r];n[r]=aA(i)?PIe(i):ul(i)}return n}function v8t(e){const t=ft(e),n={};for(const r of t)n[r]=oNe(e[r]);return n}const b8t=[...pRe,...MRe,...eNe,"background","padding","legend","lineBreak","scale","style","title","view"];function sNe(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=cIe({},vn(p8t),n?y8t(n):{},t?m8t(t):{},r?g8t(r):{},o||{});i&&wF(s,"selection",i,!0);const a=Iu(s,b8t);for(const u of["background","lineBreak","padding"])s[u]&&(a[u]=ul(s[u]));for(const u of pRe)s[u]&&(a[u]=Ds(s[u]));for(const u of MRe)s[u]&&(a[u]=oNe(s[u]));for(const u of eNe)s[u]&&(a[u]=Ds(s[u]));if(s.legend&&(a.legend=Ds(s.legend)),s.scale){const{invalid:u,...l}=s.scale,c=Ds(u,{level:1});a.scale={...Ds(l),...ft(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=v8t(s.style)),s.title&&(a.title=Ds(s.title)),s.view&&(a.view=Ds(s.view)),a}const x8t=new Set(["view",...Z$t]),w8t=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],E8t={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...i5t};function _8t(e){e=vn(e);for(const t of w8t)delete e[t];if(e.axis)for(const t in e.axis)aA(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of n8t)delete e.legend[t];if(e.mark){for(const t of ufe)delete e.mark[t];e.mark.tooltip&&cr(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(nNe(e.params)),delete e.params);for(const t of x8t){for(const r of ufe)delete e[t][r];const n=E8t[t];if(n)for(const r of n)delete e[t][r];C8t(e,t)}for(const t of t8t())delete e[t];T8t(e);for(const t in e)cr(e[t])&&zr(e[t])&&delete e[t];return zr(e)?void 0:e}function T8t(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=NIe(e.title);zr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),zr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),zr(r)?delete e.title:e.title=r}function C8t(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};zr(o)||(e.style[n??t]=o),delete e[t]}function WF(e){return pt(e,"layer")}function S8t(e){return pt(e,"repeat")}function A8t(e){return!jt(e.repeat)&&pt(e.repeat,"layer")}class uQ{map(t,n){return BF(t)?this.mapFacet(t,n):S8t(t)?this.mapRepeat(t,n):aQ(t)?this.mapHConcat(t,n):qF(t)?this.mapVConcat(t,n):sQ(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(WF(t))return this.mapLayer(t,n);if(im(t))return this.mapUnit(t,n);throw new Error(_X(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const D8t={zero:1,center:1,normalize:1};function k8t(e){return vo(D8t,e)}const I8t=new Set([fRe,FF,OF,jP,$F,jX,zX,MF,dRe,BX]),R8t=new Set([FF,OF,fRe]);function db(e){return bt(e)&&lw(e)==="quantitative"&&!e.bin}function xfe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(bt(s)&&bt(a))if(db(s)&&db(a)){if(s.stack)return t;if(a.stack)return i;const u=bt(s)&&!!s.aggregate,l=bt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(db(s))return t;if(db(a))return i}else{if(db(s))return o&&n==="vertical"?void 0:t;if(db(a))return o&&n==="horizontal"?void 0:i}}function N8t(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function aNe(e,t){var p,g;const n=Qd(e)?e:{type:e},r=n.type;if(!I8t.has(r))return null;const i=xfe(t,"x",n)||xfe(t,"theta",n);if(!i)return null;const o=t[i],s=bt(o)?St(o,{}):void 0,a=N8t(i),u=[],l=new Set;if(t[a]){const v=t[a],b=bt(v)?St(v,{}):void 0;b&&b!==s&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=bt(f)?St(f,{}):void 0;d&&d!==s&&(u.push(c),l.add(d));const h=BFt.reduce((v,b)=>{if(b!=="tooltip"&&jy(t,b)){const w=t[b];for(const E of to(w)){const _=Df(E);if(_.aggregate)continue;const T=St(_,{});(!T||!l.has(T))&&v.push({channel:b,fieldDef:_})}}return v},[]);let m;return o.stack!==void 0?KS(o.stack)?m=o.stack?"zero":null:m=o.stack:R8t.has(r)&&(m="zero"),!m||!k8t(m)||BRe(t)&&h.length===0?null:((p=o==null?void 0:o.scale)!=null&&p.type&&((g=o==null?void 0:o.scale)==null?void 0:g.type)!==ks.LINEAR&&o!=null&&o.stack&&yt(i$t(o.scale.type)),Tn(t[ph(i)])?(o.stack!==void 0&&yt(r$t(i)),null):(bt(o)&&o.aggregate&&!JFt.has(o.aggregate)&&yt(o$t(o.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:wg(r),stackBy:h,offset:m}))}function uNe(e,t,n){const r=Ds(e),i=jr("orient",r,n);if(r.orient=M8t(r.type,t,i),i!==void 0&&i!==r.orient&&yt(zMt(r.orient,i)),r.type==="bar"&&r.orient){const u=jr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:a5t[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=jr("opacity",r,n),s=jr("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=O8t(r.type,t)),jr("cursor",r,n)===void 0&&(r.cursor=P8t(r,t,n)),r}function P8t(e,t,n){return t.href||e.href||jr("href",e,n)?"pointer":e.cursor}function O8t(e,t){if(Vn([$F,BX,jX,zX],e)&&!BRe(t))return .7}function F8t(e,t,{graticule:n}){if(n)return!1;const r=Xd("filled",e,t),i=e.type;return no(r,i!==$F&&i!==MF&&i!==jP)}function M8t(e,t,n){switch(e){case $F:case jX:case zX:case dRe:case Q$t:case X$t:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case FF:if(bt(r)&&(As(r.bin)||bt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(bt(i)&&(As(i.bin)||bt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(bt(r)&&r.type===m1&&!ni(r.bin)||UP(r))&&bt(i)&&As(i.bin)?"horizontal":"vertical";if(!s)return(bt(i)&&i.type===m1&&!ni(i.bin)||UP(i))&&bt(r)&&As(r.bin)?"vertical":"horizontal"}case jP:if(o&&!(bt(r)&&As(r.bin))&&s&&!(bt(i)&&As(i.bin)))return;case OF:if(s)return bt(i)&&As(i.bin)?"horizontal":"vertical";if(o)return bt(r)&&As(r.bin)?"vertical":"horizontal";if(e===jP){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case MF:case BX:{const a=dfe(r),u=dfe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=eu(r)&&r.type===aw,c=eu(i)&&i.type===aw;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function $8t(e){const{point:t,line:n,...r}=e;return ft(r).length>1?r:r.type}function L8t(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Iu(e[t],["point","line"])});return e}function UL(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?cr(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?cr(t.point)?t.point:{}:void 0}function wfe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class B8t{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(im(t)){const{mark:r,encoding:i}=t,o=Qd(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!UL(o,n[o.type],i);case"area":return!!UL(o,n[o.type],i)||!!wfe(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:u,encoding:l,...c}=t,f=HF(l,i),d=Qd(a)?a:{type:a},h=UL(d,i[d.type],f),m=d.type==="area"&&wfe(d,i[d.type]),p=[{name:u,...o?{params:o}:{},mark:$8t({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Iu(f,["shape"])}],g=aNe(uNe(d,f,i),f);let v=f;if(g){const{fieldChannel:b,offset:w}=g;v={...f,[b]:{...f[b],...w?{stack:w}:{}}}}return v=Iu(v,["y2","x2"]),m&&p.push({...s?{projection:s}:{},mark:{type:"line",...rw(d,["clip","interpolate","tension","tooltip"]),...m},encoding:v}),h&&p.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...rw(d,["clip","tooltip"]),...h},encoding:v}),r({...c,layer:p},{...n,config:L8t(i)})}}function j8t(e,t){return t?rA(e)?cNe(e,t):lNe(e,t):e}function VL(e,t){return t?cNe(e,t):e}function Ez(e,t,n){const r=t[e];if(E5t(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};yt(vMt(r.repeat));return}return t}function lNe(e,t){if(e=Ez("field",e,t),e!==void 0){if(e===null)return null;if(YX(e)&&vp(e.sort)){const n=Ez("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Efe(e,t){if(bt(e))return lNe(e,t);{const n=Ez("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function _fe(e,t){if(Tn(e)){const n=Efe(e,t);if(n)return n;if(iA(e))return{condition:e.condition}}else{if(oA(e)){const n=Efe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function cNe(e,t){const n={};for(const r in e)if(pt(e,r)){const i=e[r];if(jt(i))n[r]=i.map(o=>_fe(o,t)).filter(o=>o);else{const o=_fe(i,t);o!==void 0&&(n[r]=o)}}return n}class z8t{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(im(t)){const{encoding:n,mark:r}=t;if(r==="line"||Qd(r)&&r.type==="line")for(const i of MFt){const o=nv(i),s=n[o];if(n[i]&&(bt(s)&&!As(s.bin)||gh(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return yt(jMt(!!i.x2,!!i.y2)),r({...t,mark:cr(o)?{...o,type:"rule"}:"rule"},n)}}class U8t extends uQ{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[H5t,G5t,e8t,new B8t,new z8t]}map(t,n){if(im(t)){const r=jy(t.encoding,gp),i=jy(t.encoding,yp),o=jy(t.encoding,_F);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=VL(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,a);return s}mapRepeat(t,n){return A8t(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...o,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${yi(f)}`,m=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return m.name=h,m})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!jt(r)&&t.columns&&(t=Iu(t,["columns"]),yt(nfe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!jt(r)&&r.row||[u?u.row:null],f=!jt(r)&&r.column||[u?u.column:null],d=jt(r)&&r||[u?u.repeat:null];for(const m of d)for(const p of c)for(const g of f){const v={repeat:m,row:p,column:g,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(jt(r)?`${yi(m)}`:(r.row?`row_${yi(p)}`:"")+(r.column?`column_${yi(g)}`:"")),w=this.map(i,{...n,repeater:v,repeaterPrefix:b});w.name=b,a.push(Iu(w,["data"]))}const h=jt(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return rA(r)&&t.columns&&(t=Iu(t,["columns"]),yt(nfe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,u=Cfe({parentProjection:s,projection:i}),l=Tfe({parentEncoding:o,encoding:VL(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...m}=t,{facetMapping:p,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=VL(s,n.repeater);return this.mapFacet({...m,...g,facet:p,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:v,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&yt(LMt([...r?[gp]:[],...i?[yp]:[]]));const s={},a={};for(const u of[gp,yp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...m}=l;s[u]=m;for(const p of["align","center","spacing"])l[p]!==void 0&&(a[p]??(a[p]={}),a[p][u]=l[p])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:u,columns:l,...c}=o;return{facetMapping:j8t(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,u={...i,parentEncoding:Tfe({parentEncoding:n,encoding:o,layer:!0}),parentProjection:Cfe({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Tfe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ft(e),...ft(t)]);for(const o of i){const s=t[o],a=e[o];if(Tn(s)){const u={...a,...s};r[o]=u}else oA(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Af(a)||qt(a)||Tn(a)||jt(a))&&(r[o]=a)}}else r=t;return!r||zr(r)?void 0:r}function Cfe(e){const{parentProjection:t,projection:n}=e;return t&&n&&yt(AMt({parentProjection:t,projection:n})),n??t}function lQ(e){return pt(e,"filter")}function V8t(e){return pt(e,"stop")}function fNe(e){return pt(e,"lookup")}function H8t(e){return pt(e,"data")}function q8t(e){return pt(e,"param")}function W8t(e){return pt(e,"pivot")}function G8t(e){return pt(e,"density")}function Y8t(e){return pt(e,"quantile")}function K8t(e){return pt(e,"regression")}function X8t(e){return pt(e,"loess")}function Q8t(e){return pt(e,"sample")}function J8t(e){return pt(e,"window")}function Z8t(e){return pt(e,"joinaggregate")}function eLt(e){return pt(e,"flatten")}function tLt(e){return pt(e,"calculate")}function dNe(e){return pt(e,"bin")}function nLt(e){return pt(e,"impute")}function rLt(e){return pt(e,"timeUnit")}function iLt(e){return pt(e,"aggregate")}function oLt(e){return pt(e,"stack")}function sLt(e){return pt(e,"fold")}function aLt(e){return pt(e,"extent")&&!pt(e,"density")&&!pt(e,"regression")}function uLt(e){return e.map(t=>lQ(t)?{filter:sx(t.filter,P$t)}:t)}class lLt extends uQ{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Sfe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Sfe(t,n),t.encoding){const r={};for(const[i,o]of $0(t.encoding))r[i]=hNe(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:$0(r).map(([o,s])=>{const{init:a,bind:u,empty:l,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=l!=="none";for(const f of Bs(n.selectionPredicates[o]??{}))f.empty=l!=="none";return{name:o,value:a,select:c,bind:u}})}:t}}function Sfe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(lQ(o))return{filter:_z(o,t)};if(dNe(o)&&rv(o.bin))return{...o,bin:pNe(o.bin)};if(fNe(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function hNe(e,t){var r,i;const n=vn(e);if(bt(n)&&rv(n.bin)&&(n.bin=pNe(n.bin)),av(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(iA(n))if(jt(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:u,...l}=o;return a?o:{...l,test:_z(o,t)}});else{const{selection:o,param:s,test:a,...u}=hNe(n.condition,t);n.condition=s?n.condition:{...u,test:_z(n.condition,t)}}return n}function pNe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function _z(e,t){const n=r=>sx(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):sx(e.test||e.filter,r=>r.selection?n(r.selection):r)}class Tz extends uQ{map(t,n){const r=n.selections??[];if(t.params&&!im(t)){const i=[];for(const o of t.params)oQ(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(Dn(a)&&(a===t.name||i.includes(a))||jt(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Tz.prototype[e];Tz.prototype[e]=function(n,r){return t.call(this,n,cLt(n,r))}}function cLt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function mNe(e,t){t===void 0&&(t=sNe(e.config));const n=pLt(e,t),{width:r,height:i}=e,o=mLt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const fLt=new U8t,dLt=new lLt,hLt=new Tz;function pLt(e,t={}){const n={config:t};return hLt.map(fLt.map(dLt.map(e,n),n),n)}function Afe(e){return Dn(e)?{type:e}:e??{}}function mLt(e,t,n){let{width:r,height:i}=t;const o=im(e)||WF(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(yt(Jce("width")),r=void 0),i=="container"&&(yt(Jce("height")),i=void 0));const a={type:"pad",...s,...n?Afe(n.autosize):{},...Afe(e.autosize)};if(a.type==="fit"&&!o&&(yt(aMt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&yt(Zce("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&yt(Zce("height")),!pl(a,{type:"pad"}))return a}function gLt(e){return["fit","fit-x","fit-y"].includes(e)}function yLt(e){return e?`fit-${DF(e)}`:"fit"}const vLt=["background","padding"];function Dfe(e,t){const n={};for(const r of vLt)e&&e[r]!==void 0&&(n[r]=ul(e[r]));return t&&(n.params=e.params),n}class om{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new om(vn(this.explicit),vn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return no(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ft(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function ad(e){return{explicit:!0,value:e}}function il(e){return{explicit:!1,value:e}}function gNe(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:GF(t,n,r,i)}}function GF(e,t,n,r){return e.explicit&&t.explicit&&yt(XMt(n,r,e.value,t.value)),e}function j0(e,t,n,r,i=GF){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:pl(e.value,t.value)?e:i(e,t,n,r)}class bLt extends om{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function dw(e){return pt(e,"url")}function _C(e){return pt(e,"values")}function yNe(e){return pt(e,"name")&&!dw(e)&&!_C(e)&&!h0(e)}function h0(e){return e&&(vNe(e)||bNe(e)||cQ(e))}function vNe(e){return pt(e,"sequence")}function bNe(e){return pt(e,"sphere")}function cQ(e){return pt(e,"graticule")}var Pi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Pi||(Pi={}));function xNe({invalid:e,isPath:t}){switch(mRe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function xLt(e){const{marks:t,scales:n}=xNe(e);return t===n?Pi.Main:n==="include-invalid-values"?Pi.PreFilterInvalid:Pi.PostFilterInvalid}class $r{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){yt(TMt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ru extends $r{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${gIe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function HL(e){return e.as!==void 0}function kfe(e){return`${e}_end`}class kd extends $r{clone(){return new kd(null,vn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:u}=o;if(u){let l;if(sv(u)){if(Ii(n)){const{mark:c,markDef:f,config:d}=n,h=B0({fieldDef:o,markDef:f,config:d});(EC(c)||h)&&(l={timeUnit:ss(u),field:a})}}else l={as:St(o,{forAs:!0}),field:a,timeUnit:u};if(Ii(n)){const{mark:c,markDef:f,config:d}=n,h=B0({fieldDef:o,markDef:f,config:d});EC(c)&&ro(s)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Yn(l)]=l)}return i},{});return zr(r)?null:new kd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=ss(r),s={...i,timeUnit:o};return new kd(t,{[Yn(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of $0(this.timeUnits)){const o=HL(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Bs(this.timeUnits).map(t=>HL(t)?t.as:kfe(t.field)))}dependentFields(){return new Set(Bs(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Yn(this.timeUnits)}`}assemble(){const t=[];for(const n of Bs(this.timeUnits)){const{rectBandPosition:r}=n,i=ss(n.timeUnit);if(HL(n)){const{field:o,as:s}=n,{unit:a,utc:u,...l}=i,c=[s,`${s}_end`];t.push({field:yc(o),type:"timeunit",...a?{units:NF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Ife(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=wNe({timeUnit:i,field:s}),u=kfe(s);t.push({type:"formula",expr:a,as:u}),t.push(...Ife([s,u],r,i))}}return t}}const YF="offsetted_rect_start",KF="offsetted_rect_end";function wNe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=QIe(r),{part:s,step:a}=tRe(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${Or(t)}, ${n?-a:a})`}function Ife([e,t],n,r){if(n!==void 0&&n!==.5){const i=Or(e),o=Or(t);return[{type:"formula",expr:Rfe([wNe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${YF}`},{type:"formula",expr:Rfe([i,o],n+.5),as:`${e}_${KF}`}]}return[]}function Rfe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const uA="_tuple_fields";class wLt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const ELt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new wLt),o={},s={},a=new Set,u=(m,p)=>{const g=p==="visual"?m.channel:m.field;let v=yi(`${r}_${g}`);for(let b=1;a.has(v);b++)v=yi(`${r}_${g}_${b}`);return a.add(v),{[p]:v}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?to(n.value):null;let{fields:d,encodings:h}=cr(n.select)?n.select:{};if(!d&&!h&&f){for(const m of f)if(cr(m))for(const p of ft(m))FFt(p)?(h||(h=[])).push(p):l==="interval"?(yt(yMt),h=c.encodings):(d??(d=[])).push(p)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const m of h??[]){const p=e.fieldDef(m);if(p){let g=p.field;if(p.aggregate){yt(uMt(m,p.aggregate));continue}else if(!g){yt(tfe(m));continue}if(p.timeUnit&&!sv(p.timeUnit)){g=e.vgField(m);const v={timeUnit:p.timeUnit,as:g,field:p.field};s[Yn(v)]=v}if(!o[g]){const v=l==="interval"&&mh(m)&&Sf(e.getScaleComponent(m).get("type"))?"R":p.bin?"R-RE":"E",b={field:g,channel:m,type:v,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(o[g]=b),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===kf,EIe(m)?(b.geoChannel=m,b.channel=wIe(m),i.hasChannel[b.channel]=o[g]):i.hasChannel[m]=o[g]}}else yt(tfe(m))}for(const m of d??[]){if(i.hasField[m])continue;const p={type:"E",field:m,index:i.items.length};p.signals={...u(p,"data")},i.items.push(p),i.hasField[m]=p,i.hasSelectionId=i.hasSelectionId||m===kf}f&&(t.init=f.map(m=>i.items.map(p=>cr(m)?m[p.geoChannel||p.channel]!==void 0?m[p.geoChannel||p.channel]:m[p.field]:m))),zr(s)||(i.timeUnit=new kd(null,s))},signals:(e,t,n)=>{const r=t.name+uA;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(CNe)})}},ENe="_curr",gN="anim_value",Ib="anim_clock",Cz="eased_anim_clock",_Ne="min_extent",TNe="max_range_extent",qL="last_tick_at",WL="is_playing",_Lt=1/60*1e3,TLt=(e,t)=>[{name:Cz,update:Ib},{name:`${e}_domain`,init:`domain('${t}')`},{name:_Ne,init:`extent(${e}_domain)[0]`},{name:TNe,init:`extent(range('${t}'))[1]`},{name:gN,update:`invert('${t}', ${Cz})`}],CLt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Id(t)&&(n=n.concat([{name:Ib,init:"0",on:[{events:{type:"timer",throttle:_Lt},update:`${WL} ? (${Ib} + (now() - ${qL}) > ${TNe} ? 0 : ${Ib} + (now() - ${qL})) : ${Ib}`}]},{name:qL,init:"now()",on:[{events:[{signal:Ib},{signal:WL}],update:"now()"}]},{name:WL,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+uA,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Bs(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+lx):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${zy(e)}, `;if(t.project.hasSelectionId)l+=`${kf}: ${s}[${lr(kf)}]`;else if(Id(t))l+=`fields: ${i}, values: [${gN} ? ${gN} : ${_Ne}]`;else{const c=o.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${s}[${lr(e.vgField(f.channel,{}))}], ${s}[${lr(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${lr(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(Id(t))return n.concat(TLt(t.name,e.scaleName(mg)),[{name:r+jp,on:[{events:[{signal:Cz},{signal:gN}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+jp,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function CNe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=yc(i.field),i}function v1(e,t=!0,n=gFt){if(jt(e)){const r=e.map(i=>v1(i,t,n));return t?`[${r.join(", ")}]`:r}else if(ov(e))return n(t?p1(e):w$t(e));return t?n(Ur(e)):e}function SLt(e,t){for(const n of Bs(e.component.selection??{})){const r=n.name;let i=`${r}${jp}, ${n.resolve==="global"?"true":`{unit: ${zy(e)}}`}`;for(const o of QF)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+ZLt,on:[{events:{signal:n.name+jp},update:`modify(${lr(n.name+b1)}, ${i})`}]})}return fQ(t)}function ALt(e,t){if(e.component.selection&&ft(e.component.selection).length){const n=lr(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:hg("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return fQ(t)}function DLt(e,t){let n=!1;for(const r of Bs(e.component.selection??{})){const i=r.name,o=lr(i+b1);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${UNe}(${o}, ${lr(a)}${u}`})}n=!0;for(const a of QF)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),fQ(t)}function kLt(e,t){const n=[],r=[],i=zy(e,{escape:!1});for(const o of Bs(e.component.selection??{})){const s={name:o.name+b1};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:kf}}]),o.init){const u=o.project.items.map(CNe);s.values=o.project.hasSelectionId?o.init.map(l=>({unit:i,[kf]:v1(l,!1)[0]})):o.init.map(l=>({unit:i,fields:u,values:v1(l,!1)}))}if([...n,...t].filter(u=>u.name===o.name+b1).length||n.push(s),Id(o)&&t.length){const u=e.lookupDataSource(e.getDataName(Pi.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+ENe,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function SNe(e,t){for(const n of Bs(e.component.selection??{}))for(const r of QF)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function ILt(e,t){for(const n of e.children)Ii(n)&&(t=SNe(n,t));return t}function RLt(e,t,n,r){const i=GNe(e,t.param,t);return{signal:Sf(n.get("type"))&&jt(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function fQ(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const bp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!mh(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&yt(dMt),!o||!Sf(s)){yt(fMt);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||Az(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(UNe))i.update=`{${r.map(s=>`${lr(yc(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${lr(yc(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Az(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function Sz(e,t){return`domain(${lr(e.scaleName(t))})`}function Az(e){return e.parent&&_E(e.parent)&&(!e.parent.parent||Az(e.parent.parent))}const lx="_brush",ANe="_scale_trigger",M_="geo_interval_init_tick",DNe="_init",NLt="_center",PLt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...n1(n.select)?n.select:{}};i.fields=[kf],i.encodings||(i.encodings=n.value?ft(n.value):[jf,Bf]),n.select={type:"interval",...i}}if(t.translate&&!bp.defined(t)){const i=`!event.item || event.item.mark.name !== ${lr(t.name+lx)}`;for(const o of t.events){if(!o.between){yt(`${o} is not an ordered event stream for interval selections.`);continue}const s=to((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+jp,o=Bs(t.project.hasChannel).filter(a=>a.channel===wi||a.channel===hs),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,u)=>a.concat(OLt(e,t,u,s&&s[u.index])),[])),e.hasProjection){const a=lr(e.projectionName()),u=e.projectionName()+NLt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?s&&s[l.index]:`${u}[0]`,m=c?s&&s[c.index]:`${u}[1]`,p=_=>e.getSizeSignalRef(_).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":p("width")}, ${d?d+"[1]":p("height")}]]`;s&&(n.unshift({name:r+DNe,init:`[scale(${a}, [${l?h[0]:h}, ${c?m[0]:m}]), scale(${a}, [${l?h[1]:h}, ${c?m[1]:m}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${p("width")}/2, ${p("height")}/2])`})));const v=`intersect(${g}, {markname: ${lr(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${zy(e)}}`,w=`vlSelectionTuples(${v}, ${b})`,E=o.map(_=>_.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...s?[{signal:M_}]:[]],update:w}]})}else{if(!bp.defined(t)){const l=r+ANe,c=o.map(f=>{const d=f.channel,{data:h,visual:m}=f.signals,p=lr(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=Sf(g)?"+":"";return`(!isArray(${h}) || (${v}invert(${p}, ${m})[0] === ${v}${h}[0] && ${v}invert(${p}, ${m})[1] === ${v}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=o.map(l=>l.signals.data),u=`unit: ${zy(e)}, fields: ${r+uA}, values`;return n.concat({name:i,...s?{init:`{${u}: ${v1(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ii(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===M_).length||n.unshift({name:M_,value:null,on:[{events:"timer{1}",update:`${M_} === null ? {} : ${M_}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,u=`data(${lr(t.name+b1)})`;if(bp.defined(t)||!i&&!o)return n;const l={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of ft(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${zy(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,m=ft(h).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[v]},{value:null}],g),{}),p=d??(t.translate?"move":null);return[{name:`${r+lx}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+lx,type:"rect",clip:!0,encode:{enter:{...p?{cursor:{value:p}}:{},fill:{value:"transparent"}},update:{...l,...m}}}]}};function OLt(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=lr(i?e.scaleName(o):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(o===wi?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=bp.defined(t),m=e.getScaleComponent(o),p=m?m.get("type"):void 0,g=r?{init:v1(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+ANe},update:Sf(p)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...g,on:f},{name:d,...r?{init:v1(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===wi?0:1,h=t.name+DNe,m=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...m,on:f}]}}function bE({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=iA(t)&&t.condition;let s=[];o&&(s=to(o).map(l=>{const c=i(l);if(w5t(l)){const{param:f,empty:d}=l;return{test:WNe(e,{param:f,empty:d}),...c}}else return{test:XP(e,l.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function dQ(e,t="text"){const n=e.encoding[t];return bE({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>XF(r,e.config),invalidValueRef:void 0})}function XF(e,t,n="datum"){if(e){if(Af(e))return fi(e.value);if(Tn(e)){const{format:r,formatType:i}=HP(e);return WX({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function kNe(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(jt(s))return{tooltip:Nfe({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return bE({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:l=>{const c=XF(l,i,a);if(c)return c;if(l===null)return;let f=jr("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Dn(f))return{value:f};if(cr(f))return qt(f)?f:f.content==="encoding"?Nfe(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function INe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function u(c,f){const d=nv(f),h=eu(c)?c:{...c,type:e[d].type},m=h.title||XX(h,i),p=to(m).join(", ").replaceAll(/"/g,'\\"');let g;if(ro(f)){const v=f==="x"?"x2":"y2",b=Df(e[v]);if(As(h.bin)&&b){const w=St(h,{expr:s}),E=St(b,{expr:s}),{format:_,formatType:T}=HP(h);g=nA(w,E,_,T,i),o.add(v)}}if((ro(f)||f===Ic||f===Lf)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:v,formatType:b}=HP(h);g=WX({fieldOrDatumDef:h,format:v,formatType:b,expr:s,config:i,normalizeStack:!0}).signal}g??(g=XF(h,i,s).signal),a.push({channel:f,key:p,value:g})}JX(e,(c,f)=>{bt(c)?u(c,f):jF(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!l[f]&&(l[f]=d);return l}function Nfe(e,t,n,{reactiveGeom:r}={}){const i=INe(e,t,n,{reactiveGeom:r}),o=$0(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function FLt(e){const{markDef:t,config:n}=e,r=jr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...MLt(e),...$Lt(e)}}function MLt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=jr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:vo(iMt,t)?{}:{ariaRoleDescription:{value:t}}}function $Lt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return bE({model:e,channelDef:o,vgChannel:"description",mainRefFn:u=>XF(u,e.config),invalidValueRef:void 0});const s=jr("description",n,r);if(s!=null)return{description:fi(s)};if(r.aria===!1)return{};const a=INe(t,i,r);if(!zr(a))return{description:{signal:$0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Ns(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=jr(e,r,o,{vgChannel:s,ignoreVgConfig:!iA(l)})),u!==void 0&&(a=fi(u)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=yRe({...c,scaleChannel:e,channelDef:l});return bE({model:t,channelDef:l,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>qX({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function RNe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??jr("filled",n,i),a=Vn(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=jr(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,l=jr(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...u?{fill:fi(u)}:{},...l?{stroke:fi(l)}:{}};return n.color&&(s?n.fill:n.stroke)&&yt(UIe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Ns("color",e,{vgChannel:c,defaultValue:s?u:l}),...Ns("fill",e,{defaultValue:r.fill?u:void 0}),...Ns("stroke",e,{defaultValue:r.stroke?l:void 0})}}function LLt(e){const{encoding:t,mark:n}=e,r=t.order;return!wg(n)&&Af(r)?bE({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>fi(i.value),invalidValueRef:void 0}):{}}function hw({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:qX({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:fi(s),bandPosition:i})};const u=t[o];return u?{offsetType:"visual",offset:u}:{}}function Wa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,u=i[e],l=i[ph(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=hw({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),m=hQ({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!u&&ro(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:BLt({channel:e,channelDef:u,channel2Def:l,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:m,bandPosition:h==="encoding"?0:void 0});return p?{[r||e]:p}:void 0}function BLt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Tn(n)&&i&&t===i.fieldChannel){if(bt(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return zP({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return By(n,r,{suffix:"end"},{offset:o})}return HX(e)}function hQ({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=nv(n),u=L0(n),l=jr(n,o,s,{vgChannel:u});if(l!==void 0)return hT(n,l);switch(t){case"zeroOrMin":return Pfe({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return Pfe({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[ju(n)],mult:.5}}}}function Pfe({mainChannel:e,config:t,...n}){const r=gRe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const jLt={left:"x",center:"xc",right:"x2"},zLt={top:"y",middle:"yc",bottom:"y2"};function NNe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return L0(e);const i=e==="x"?"align":"baseline",o=jr(i,t,n);let s;return qt(o)?(yt(BMt(i)),s=void 0):s=o,e==="x"?jLt[s||(r==="top"?"left":"center")]:zLt[s||r]}function YP(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?PNe(e,t,{defaultPos:n,defaultPos2:r}):Wa(e,t,{defaultPos:n})}function PNe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=ph(e),a=ju(e),u=ULt(t,r,s),l=u[a]?NNe(e,i,o):L0(e);return{...Wa(e,t,{defaultPos:n,vgChannel:l}),...u}}function ULt(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,u=nv(n),l=ju(n),c=L0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:m}=n in r||n in o?hw({channel:n,markDef:o,encoding:r,model:e}):hw({channel:u,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=ju(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[c]:{field:e.getName(n)}}}const p=VLt({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:m,defaultRef:void 0});return p!==void 0?{[c]:p}:Ik(n,o)||Ik(n,{[n]:pz(n,o,a.style),[l]:pz(l,o,a.style)})||Ik(n,a[i])||Ik(n,a.mark)||{[c]:hQ({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function VLt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l}){return Tn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?By(t,o,{suffix:"start"},{offset:u}):HX({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function Ik(e,t){const n=ju(e),r=L0(e);if(t[r]!==void 0)return{[r]:hT(e,t[r])};if(t[e]!==void 0)return{[r]:hT(e,t[e])};if(t[n]){const i=t[n];if(g1(i))yt(PMt(n));else return{[n]:hT(e,i)}}}function Bp(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=ph(t),a=ju(t),u=r[t],l=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??jr("size",i,n,{vgChannel:a}),m=SIe(t),p=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return bt(u)&&(ni(u.bin)||As(u.bin)||u.timeUnit&&!l)&&!(h&&!g1(h))&&!r[m]&&!cs(f)?WLt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Tn(u)&&cs(f)||p)&&!l?qLt(u,t,e):PNe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function HLt(e,t,n,r,i,o,s){if(g1(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Xd("minBandSize",{type:s},r);return{signal:c?`max(${af(c)}, ${l})`:l}}else i.band!==1&&(yt(VMt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(qt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(iv(u)&&xi(u.step))return{value:u.step-2}}if(!o){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=no(u,s==="tick"?f:s==="bar"?l:c);if(qt(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(xi(d))return{signal:`${1-d} * ${e}`}}return{value:wz(r.view,e)-2}}function qLt(e,t,n){var k,R;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=ju(t),f=ph(t),d=SIe(t),h=n.scaleName(d),m=n.getScaleComponent(yX(t)),p=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(p?g=Ns("size",n,{vgChannel:c,defaultRef:fi(r.size)}):yt(GMt(r.type)));const v=!!g,b=TRe({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(k=l||m)==null?void 0:k.get("type"),useVlSizeChannel:p});g=g||{[c]:HLt(c,h||u,m||l,o,b,!!e,r.type)};const w=((R=l||m)==null?void 0:R.get("type"))==="band"&&g1(b)&&!v?"top":"middle",E=NNe(t,r,o,w),_=E==="xc"||E==="yc",{offset:T,offsetType:S}=hw({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),D=HX({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:s,offset:T,defaultRef:hQ({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:_?S==="encoding"?0:.5:qt(b)?{signal:`(1-${b})/2`}:g1(b)?(1-b.band)/2:0});if(c)return{[E]:D,...g};{const O=L0(f),M=g[c],F=T?{...M,offset:T}:M;return{[E]:D,[O]:jt(D)?[D[0],{...D[1],offset:F}]:{...D,offset:F}}}}function Ofe(e,t,n,r,i,o,s){if(xIe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(qt(n)||qt(i)||qt(r)||o){const l=af(n),c=af(i),f=af(r),d=af(o),m=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${u})`:u,p=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=c?`(${c} + ${m})`:m;return{signal:p+g+v}}else return i=i||0,r+(n?-i-u:+i+u)}function WLt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var R;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=TRe({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),d=(R=r.component.axes[n])==null?void 0:R[0],h=(d==null?void 0:d.get("translate"))??.5,m=ro(n)?jr("binSpacing",o,i)??0:0,p=ph(n),g=L0(n),v=L0(p),b=Xd("minBandSize",o,i),{offset:w}=hw({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:E}=hw({channel:p,markDef:o,encoding:s,model:r,bandPosition:0}),_=m5t({fieldDef:e,scaleName:u}),T=Ofe(n,m,c,h,w,b,_),S=Ofe(p,m,c,h,E??w,b,_),D=qt(f)?{signal:`(1-${f.signal})/2`}:g1(f)?(1-f.band)/2:.5,k=B0({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(ni(e.bin)||e.timeUnit){const O=e.timeUnit&&k!==.5;return{[v]:Ffe({fieldDef:e,scaleName:u,bandPosition:D,offset:S,useRectOffsetField:O}),[g]:Ffe({fieldDef:e,scaleName:u,bandPosition:qt(D)?{signal:`1-${D.signal}`}:1-D,offset:T,useRectOffsetField:O})}}else if(As(e.bin)){const O=By(e,u,{},{offset:S});if(bt(t))return{[v]:O,[g]:By(t,u,{},{offset:T})};if(rv(e.bin)&&e.bin.step)return{[v]:O,[g]:{signal:`scale("${u}", ${St(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}yt(qIe(p))}function Ffe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return zP({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:YF,endSuffix:KF}:{}})}const GLt=new Set(["aria","width","height"]);function Rc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?RNe(e):{};return{...YLt(e.markDef,t),...Mfe("fill",n),...Mfe("stroke",r),...Ns("opacity",e),...Ns("fillOpacity",e),...Ns("strokeOpacity",e),...Ns("strokeWidth",e),...Ns("strokeDash",e),...LLt(e),...kNe(e),...dQ(e,"href"),...FLt(e)}}function Mfe(e,t){return t?{[e]:t}:{}}function YLt(e,t){return rMt.reduce((n,r)=>(!GLt.has(r)&&pt(e,r)&&t[r]!=="ignore"&&(n[r]=fi(e[r])),n),{})}function pQ(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var l;let s;if(!mh(o)||!(s=e.getScaleType(o)))return;const a=kF(i.aggregate),u=VX({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(d5t(u)){const c=e.vgField(o,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>PF(o,!0)).join(" && ")}}}function $fe(e,t){if(t!==void 0)return{[e]:fi(t)}}const GL="voronoi",ONe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(GL)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(wg(o))return yt(lMt(o)),n;const s={name:e.getName(GL),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...kNe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(GL)&&(u=!0)}),u||n.splice(a+1,0,s),n}},FNe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!iQ(e.bind),parse:(e,t,n)=>VNe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=ONe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=yi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:v1(s[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${lr(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(l=>l.name===r+jp),s=r+uA,a=i.items.map(l=>yi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(o.update=`${u} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},KP="_toggle",MNe={defined:e=>e.type==="point"&&!Id(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+KP,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+jp,r=t.name+KP;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${zy(e)}}, `)+`${r} ? ${n} : null`}},KLt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Id(e),parse:(e,t)=>{t.clear&&(t.clear=Dn(t.clear)?hg(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(FNe.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===yi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+jp);r(i,"null"),MNe.defined(t)&&(i=n.findIndex(o=>o.name===t.name+KP),r(i,"false"))}return n}},$Ne={defined:e=>{const t=e.resolve==="global"&&e.bind&&iQ(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==kf;return t&&!n&&yt(hMt),t&&n},parse:(e,t,n)=>{const r=vn(n);if(r.select=Dn(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},VNe(t,r),n1(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=to(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=zL(t.bind)?t.bind.legend:"click",o=Dn(i)?hg(i,"view"):to(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=zL(t.bind)&&t.bind.legend,o=s=>a=>{const u=vn(a);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${yi(s.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+jp),s=r+uA,a=i.items.filter(d=>d.hasLegend).map(d=>yi(`${r}_${yi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+KP),f=zL(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function XLt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Bs(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&$Ne.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const LNe="_translate_anchor",BNe="_translate_delta",QLt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=bp.defined(t),o=r+LNe,{x:s,y:a}=t.project.hasChannel;let u=hg(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+lx,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?Sz(e,wi):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?Sz(e,hs):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+BNe,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&Lfe(e,t,s,"width",n),a!==void 0&&Lfe(e,t,a,"height",n),n}};function Lfe(e,t,n,r,i){const o=t.name,s=o+LNe,a=o+BNe,u=n.channel,l=bp.defined(t),c=i.find(_=>_.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),m=d&&d.get("reverse"),p=l?u===wi?m?"":"-":m?"-":"":"",g=`${s}.extent_${u}`,v=`${p}${a}.${u} / ${l?`${f}`:`span(${g})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${g}, ${v}${w})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const jNe="_zoom_anchor",zNe="_zoom_delta",JLt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=bp.defined(t),o=r+zNe,{x:s,y:a}=t.project.hasChannel,u=lr(e.scaleName(wi)),l=lr(e.scaleName(hs));let c=hg(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+lx,f))),n.push({name:r+jNe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&Bfe(e,t,s,"width",n),a!==void 0&&Bfe(e,t,a,"height",n),n}};function Bfe(e,t,n,r,i){const o=t.name,s=n.channel,a=bp.defined(t),u=i.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?Sz(e,s):u.name,h=o+zNe,m=`${o}${jNe}.${s}`,p=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${p}(${d}, ${m}, ${h}${g})`;u.on.push({events:{signal:h},update:a?v:`clampRange(${v}, 0, ${l})`})}const b1="_store",jp="_tuple",ZLt="_modify",UNe="vlSelectionResolve",QF=[CLt,PLt,ELt,MNe,FNe,bp,$Ne,KLt,QLt,JLt,ONe];function e9t(e){let t=e.parent;for(;t&&!bl(t);)t=t.parent;return t}function zy(e,{escape:t}={escape:!0}){let n=t?lr(e.name):e.name;const r=e9t(e);if(r){const{facet:i}=r;for(const o of uc)i[o]&&(n+=` + '__facet_${o}_' + (facet[${lr(r.vgField(o))}])`)}return n}function mQ(e){return Bs(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function VNe(e,t){(mp(t.select)||!t.select.on)&&delete e.events,(mp(t.select)||!t.select.clear)&&delete e.clear,(mp(t.select)||!t.select.toggle)&&delete e.toggle}function Id(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function Dz(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Dz(e.object)),t.push(...Dz(e.property))),t)}function HNe(e){return e.object.type==="MemberExpression"?HNe(e.object):e.object.name==="datum"}function qNe(e){const t=OK(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&HNe(r)&&n.add(Dz(r).slice(1).join("."))}),n}class xE extends $r{clone(){return new xE(null,this.model,vn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=XP(this.model,this.filter,this),this._dependentFields=qNe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function t9t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=yi(o.name),a=o.select,u=Dn(a)?a:a.type,l=cr(a)?vn(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=vn(c[h]??l[h])));const f=n[s]={...l,name:s,type:u,init:o.value,bind:o.bind,events:Dn(l.on)?hg(l.on,"scope"):to(vn(l.on))};if(Id(f)&&(i++,i>1)){delete n[s];continue}const d=vn(o);for(const h of QF)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&yt(bMt),n}function WNe(e,t,n,r="datum"){const i=Dn(t)?t:t.param,o=yi(i),s=lr(o+b1);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${lr(a.resolve)})`,c=`${u}${s}, ${r}${l}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function GNe(e,t,n){const r=yi(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&yt(xMt(o));else if(i&&!o){const a=s.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,yt(wMt(a,i,n,o))):o=a[0].field}return`${s.name}[${lr(yc(o))}]`}function n9t(e,t){for(const[n,r]of $0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ru(new xE(t,e,{param:n}),i,Pi.Lookup,e.component.data.outputNodeRefCounts)}}function XP(e,t,n){return dT(t,r=>Dn(r)?r:I$t(r)?WNe(e,r,n):rRe(r))}function r9t(e,t){if(e)return jt(e)&&!Lm(e)?e.map(n=>XX(n,t)).join(", "):e}function YL(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function I2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const m=h,p=F5t[m],g=c[m];if(p&&p!==t&&p!=="both")delete c[m];else if(aA(g)){const{condition:v,...b}=g,w=to(v),E=hfe[m];if(E){const{vgProp:_,part:T}=E,S=[...w.map(D=>{const{test:k,...R}=D;return{test:XP(null,k),...R}}),b];YL(c,T,_,S),delete c[m]}else if(E===null){const _={signal:w.map(T=>{const{test:S,...D}=T;return`${XP(null,S)} ? ${Qce(D)} : `}).join("")+Qce(b)};c[m]=_}}else if(qt(g)){const v=hfe[m];if(v){const{vgProp:b,part:w}=v;YL(c,w,b,g),delete c[m]}}Vn(["labelAlign","labelBaseline"],m)&&c[m]===null&&delete c[m]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},zr(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:no(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let m=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&qt(c.encode.labels.update.text)&&(m=f1(a,"datum.label",c.encode.labels.update.text.signal)),YL(c,"labels","text",{signal:m})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const m of ORe)e.hasAxisPart(m)||delete c.encode[m];zr(c.encode)&&delete c.encode}const h=r9t(u,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:no(l,0)}}}}function YNe(e){const{axes:t}=e.component,n=[];for(const r of rm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function i9t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>I2(i,"grid",t)),...r.map(i=>I2(i,"grid",t)),...n.map(i=>I2(i,"main",t)),...r.map(i=>I2(i,"main",t))].filter(i=>i)}function jfe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ft(s),...ft(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${af(s[c])} : ${af(a[c])}`};return l}return t[i]})])}function o9t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:aRe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=qt(n)?"axisOrient":`axis${XS(n)}`,a=[...i,...i.map(l=>o+l.substr(4))],u=["axis",s,o];return{vlOnlyAxisConfig:jfe(a,r,e,n),vgAxisConfig:jfe(u,r,e,n),axisConfigStyle:s9t([...u,...a],r)}}function s9t(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=to(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function kz(e,t,n,r={}){var o;const i=FIe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const zfe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??a9t(n,e),gridScale:({model:e,channel:t})=>u9t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||XNe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||KNe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??c9t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??f9t(t.type,n,bt(t)&&!!t.timeUnit,bt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??h9t({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:p9t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=QNe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return $Ie(i?[ffe(i)]:[],bt(s)?[ffe(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>m9t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??g9t(n,t)};function a9t(e,t){return!cs(e)&&bt(t)&&!ni(t==null?void 0:t.bin)&&!As(t==null?void 0:t.bin)}function u9t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function l9t(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return qt(o)?o:wC(o);{const{configValue:s}=kz("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?wC(s):n===wi&&Vn([LX,$X],e.type)&&!(bt(e)&&e.timeUnit)?270:void 0}}function Iz(e){return`(((${e.signal} % 360) + 360) % 360)`}function KNe(e,t,n,r){if(e!==void 0)if(n==="x"){if(qt(e)){const i=Iz(e),o=qt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(qt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(qt(e)){const i=Iz(e),o=qt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(qt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function XNe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(qt(e)){const s=Iz(e),a=qt(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(qt(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function c9t(e,t){if(t==="x"&&Vn(["quantitative","temporal"],e))return!0}function f9t(e,t,n,r){if(n&&!cr(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function d9t(e){return e==="x"?"bottom":"left"}function h9t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!cs(t)&&t!=="log"){if(bt(e)){if(ni(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Vn(["month","hours","day","quarter"],(i=ss(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function p9t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(bt(t)){const{timeUnit:n}=t;if(n){const r=eRe(n);if(r)return{signal:r}}}}function QNe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return LIe(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function m9t(e,t){const n=e.values;if(jt(n))return PRe(t,n);if(qt(n))return n}function g9t(e,t){return e==="rect"&&VP(t)?1:0}class pw extends $r{clone(){return new pw(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=qNe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(av(r)&&_Re(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,u=a.map((l,c)=>`${rRe({field:o,timeUnit:s,equal:l})} ? ${c} : `).join("")+a.length;t=new pw(t,{calculate:u,as:mw(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Yn(this.transform)}`}}function mw(e,t,n){return St(e,{prefix:t,suffix:"sort_index",...n})}function JF(e,t){return Vn(["top","bottom"],t)?"column":Vn(["left","right"],t)||e==="row"?"row":"column"}function gw(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return no((t||{})[e],i[e],n.header[e])}function ZF(e,t,n,r){const i={};for(const o of e){const s=gw(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const gQ=["row","column"],yQ=["header","footer"];function y9t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=ZF(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=JF(t,a),l=wC(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...ZNe(l,u),...JNe(u,l,o),...e3e(r,i,t,r8t,JRe)}}}function JNe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=XNe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function ZNe(e,t){const n=KNe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function v9t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of yQ)if(n[i])for(const o of n[i]){const s=x9t(e,t,i,n,o);s!=null&&r.push(s)}return r}function b9t(e,t){const{sort:n}=e;return vp(n)?{field:St(n,{expr:"datum"}),order:n.order??"ascending"}:jt(n)?{field:mw(e,t,{expr:"datum"}),order:"ascending"}:{field:St(e,{expr:"datum"}),order:n??"ascending"}}function Rz(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:u}=ZF(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=WX({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=JF(t,a);return{text:{signal:u?f1(f1(u,"datum.label",l),"datum.value",St(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...ZNe(o,c),...JNe(c,o,s),...e3e(n,e,t,i8t,ZRe)}}function x9t(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=ZF(["labelOrient"],s.header,a,t);(t==="row"&&!Vn(["top","bottom"],f)||t==="column"&&!Vn(["left","right"],f))&&(o=Rz(s,t,a))}const u=bl(e)&&!rA(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:b9t(s,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const w9t={column:{start:0,end:1},row:{start:1,end:0}};function E9t(e,t){return w9t[t][e]}function _9t(e,t){const n={};for(const r of uc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=ZF(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=JF(r,s),u=E9t(o,a);u!==void 0&&(n[a]=u)}}return zr(n)?void 0:n}function e3e(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=gw(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function vQ(e){return[...Rk(e,"width"),...Rk(e,"height"),...Rk(e,"childWidth"),...Rk(e,"childHeight")]}function Rk(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(cs(s)&&iv(a)){const u=e.scaleName(n);return bl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Ufe(u,a)]:[Ufe(u,a),{name:i,update:t3e(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=xz(e.config.view,o?"width":"height"),u=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Ufe(e,t){const n=`${e}_step`;return qt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function t3e(e,t,n){const r=t.get("type"),i=t.get("padding"),o=no(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${af(s)}, ${af(o)}) * ${e}_step`}function n3e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function r3e(e,t){return ft(e).reduce((n,r)=>({...n,...bE({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>fi(i.value),invalidValueRef:void 0})}),{})}function i3e(e,t){if(bl(t))return e==="theta"?"independent":"shared";if(_E(t))return"shared";if(CQ(t))return ro(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function bQ(e,t){const n=e.scale[t],r=ro(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&yt(JMt(t)),"independent"):e[r][t]||"shared"}const T9t={...a8t,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},o3e=ft(T9t);class C9t extends om{}const Vfe={symbols:S9t,gradient:A9t,labels:D9t,entries:k9t};function S9t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:u,mark:l}=n,c=s.filled&&l!=="trail";let f={...sMt({},n,n5t),...RNe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,m=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,p=d===void 0?s3e(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Lu)delete f.fill;else if(pt(f.fill,"field"))h?delete f.fill:(f.fill=fi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=fi(p??1));else if(jt(f.fill)){const g=Nz(a.fill??a.color)??s.fill??(c&&s.color);g&&(f.fill=fi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Lu)delete f.stroke;else if(pt(f.stroke,"field")||m)delete f.stroke;else if(jt(f.stroke)){const g=no(Nz(a.stroke||a.color),s.stroke,c?s.color:void 0);g&&(f.stroke={value:g})}}if(r!==nm){const g=bt(t)&&u3e(n,i,t);g?f.opacity=[{test:g,...fi(p??1)},fi(u.legend.unselectedOpacity)]:p&&(f.opacity=fi(p))}return f={...f,...e},zr(f)?void 0:f}function A9t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?s3e(s.opacity)||o.opacity:void 0;return l&&(a.opacity=fi(l)),a={...a,...e},zr(a)?void 0:a}function D9t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=bt(t)?u3e(n,i,t):void 0,u=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o;let f;y1(c)?f=uf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:s}):l===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=uf({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&bt(t)&&t.timeUnit===void 0&&(f=uf({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return zr(d)?void 0:d}function k9t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function s3e(e){return a3e(e,(t,n)=>Math.max(t,n.value))}function Nz(e){return a3e(e,(t,n)=>no(t,n.value))}function a3e(e,t){if(_5t(e))return to(e.condition).reduce(t,e.value);if(Af(e))return e.value}function u3e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=lr(n.field);return r.map(o=>`(!length(data(${lr(yi(o)+b1)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const Hfe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return xRe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return wRe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??M9t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??$9t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??R9t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>ux(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(ax(n)&&wd(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>I9t(t,e)};function I9t(e,t){const n=e.values;if(jt(n))return PRe(t,n);if(qt(n))return n}function R9t(e,t,n,r){if(t!=="shape"){const i=Nz(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function N9t(e){const{legend:t}=e;return no(t.type,P9t(e))}function P9t({channel:e,timeUnit:t,scaleType:n}){if(ax(e)){if(Vn(["quarter","month","day"],t))return"symbol";if(wd(n))return"gradient"}return"symbol"}function O9t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??F9t(n,t)}function F9t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function M9t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(wd(i))return n==="horizontal"?r==="top"||r==="bottom"?qfe(t,"width",s,o):s:qfe(t,"height",u,a)}function qfe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function $9t(e){if(Vn(["quantile","threshold","log","symlog"],e))return"greedy"}function l3e(e){const t=Ii(e)?L9t(e):U9t(e);return e.component.legends=t,t}function L9t(e){const{encoding:t}=e,n={};for(const r of[Lu,...tNe]){const i=Mo(t[r]);!i||!e.getScaleComponent(r)||r===Bu&&bt(i)&&i.type===vE||(n[r]=z9t(e,r))}return n}function B9t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function j9t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function z9t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new C9t({},B9t(e,t));XLt(e,t,a);const u=n!==void 0?!n:s.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Mo(i[t]),f=bt(c)?(E=ss(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||o.legend.orient||"right",h=N9t({legend:n,channel:t,timeUnit:f,scaleType:l}),m=O9t({legend:n,legendType:h,orient:d,legendConfig:s}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:l,orient:d,legendType:h,direction:m};for(const _ of o3e){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const T=_ in Hfe?Hfe[_](p):n[_];if(T!==void 0){const S=j9t(T,_,n,e.fieldDef(t));(S||o.legend[_]===void 0)&&a.set(_,T,S)}}const g=(n==null?void 0:n.encoding)??{},v=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const T=r3e(g[_]??{},e),S=_ in Vfe?Vfe[_](T,w):T;S!==void 0&&!zr(S)&&(b[_]={...v!=null&&v.length&&bt(c)?{name:`${yi(c.field)}_legend_${_}`}:{},...v!=null&&v.length?{interactive:!!v}:{},update:S})}return zr(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function U9t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){l3e(r);for(const i of ft(r.component.legends))n.legend[i]=bQ(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=c3e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ft(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function c3e(e,t){var o,s,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of o3e){const c=j0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return V9t(f,d);case"title":return BIe(f,d);case"type":return i=!0,il("symbol")}return GF(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&LP(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&LP(e.explicit,["encode","gradient"])),e}function V9t(e,t){return t.value==="circle"?t:e}function H9t(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function f3e(e){const t=e.component.legends,n={};for(const i of ft(t)){const o=e.getScaleComponent(i),s=Ur(o.get("domains"));if(n[s])for(const a of n[s])c3e(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Bs(n).flat().map(i=>q9t(i,e.config)).filter(i=>i!==void 0)}function q9t(e,t){var s,a,u;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const l=o.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!o.stroke&&(l.stroke={value:"transparent"});for(const c of tNe)o[c]&&delete l[c]}if(o.title||delete o.title,r!==void 0){let l=r;(u=(a=o.encode)==null?void 0:a.labels)!=null&&u.update&&qt(o.encode.labels.update.text)&&(l=f1(r,"datum.label",o.encode.labels.update.text.signal)),H9t(o,"labels","text",{signal:l})}return o}}function W9t(e){return _E(e)||CQ(e)?G9t(e):d3e(e)}function G9t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),d3e(e))}function d3e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const u=qt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Vn(s,u)||s.push(u),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Y9t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class h3e extends om{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function p3e(e){e.component.projection=Ii(e)?K9t(e):J9t(e)}function K9t(e){if(e.hasProjection){const t=Ds(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?X9t(e):void 0,o=new h3e(e.projectionName(!0),{...Ds(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function X9t(e){const t=[],{encoding:n}=e;for(const r of[[jf,Bf],[vc,zf]])(Mo(n[r[0]])||Mo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Bu)&&e.typedFieldDef(Bu).type===vE&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Pi.Main)),t}function Q9t(e,t){const n=cX(Y9t,i=>!!(!vo(e.explicit,i)&&!vo(t.explicit,i)||vo(e.explicit,i)&&vo(t.explicit,i)&&pl(e.get(i),t.get(i))));if(pl(e.size,t.size)){if(n)return e;if(pl(e.explicit,{}))return t;if(pl(t.explicit,{}))return e}return null}function J9t(e){if(e.children.length===0)return;let t;for(const r of e.children)p3e(r);const n=cX(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=Q9t(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new h3e(r,t.specifiedProjection,t.size,vn(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function Z9t(e,t,n,r){if(sA(t,n)){const i=Ii(e)?e.axis(n)??e.legend(n)??{}:{},o=St(t,{expr:"datum"}),s=St(t,{expr:"datum",binSuffix:"end"});return{formulaAs:St(t,{binSuffix:"range",forAs:!0}),formula:nA(o,s,i.format,i.formatType,r)}}return{}}function m3e(e,t){return`${RIe(e)}_${t}`}function eBt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function xQ(e,t,n){const r=zF(n,void 0)??{},i=m3e(r,t);return e.getName(`${i}_bins`)}function tBt(e){return"as"in e}function Wfe(e,t,n){let r,i;tBt(e)?r=Dn(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[St(e,{forAs:!0}),St(e,{binSuffix:"end",forAs:!0})];const o={...zF(t,void 0)},s=m3e(o,e.field),{signal:a,extentSignal:u}=eBt(n,s);if(IF(o.extent)){const c=o.extent;i=GNe(n,c.param,c),delete o.extent}const l={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:s,binComponent:l}}class Rd extends $r{clone(){return new Rd(null,vn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(eu(o)&&ni(o.bin)){const{key:a,binComponent:u}=Wfe(o,o.bin,n);i[a]={...u,...i[a],...Z9t(n,o,s,n.config)}}return i},{});return zr(r)?null:new Rd(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=Wfe(n,n.bin,r);return new Rd(t,{[i]:o})}merge(t,n){for(const r of ft(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=xd([...this.bins[r].as,...t.bins[r].as],Yn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Bs(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Bs(this.bins).map(t=>t.field))}hash(){return`Bin ${Yn(this.bins)}`}assemble(){return Bs(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:yc(t.field),as:r,signal:t.signal,...IF(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:yc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:St({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function nBt(e,t,n,r){var o;const i=Ii(r)?r.encoding[ph(t)]:void 0;if(eu(n)&&Ii(r)&&CRe(n,i,r.markDef,r.config)){e.add(St(n,{})),e.add(St(n,{suffix:"end"}));const{mark:s,markDef:a,config:u}=r,l=B0({fieldDef:n,markDef:a,config:u});EC(s)&&l!==.5&&ro(t)&&(e.add(St(n,{suffix:YF})),e.add(St(n,{suffix:KF}))),n.bin&&sA(n,t)&&e.add(St(n,{binSuffix:"range"}))}else if(EIe(t)){const s=wIe(t);e.add(r.getName(s))}else e.add(St(n));return av(n)&&V$t((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function rBt(e,t){for(const n of ft(t)){const r=t[n];for(const i of ft(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class gf extends $r{clone(){return new gf(null,new Set(this.dimensions),vn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:u,field:l}=s;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([St(s,{forAs:!0})]);else{if(Lp(u)||xg(u)){const c=Lp(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([St({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([St(s,{forAs:!0})]);mh(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([St({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([St({field:l,aggregate:"max"},{forAs:!0})]))}else nBt(o,a,s,n)}),o.size+ft(i).length===0)?null:new gf(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:u,as:l}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([l||St(s,{forAs:!0})])):(o[u]??(o[u]={}),(r=o[u])[a]??(r[a]=new Set),o[u][a].add(l||St(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+ft(o).length===0?null:new gf(t,i,o)}merge(t){return hIe(this.dimensions,t.dimensions)?(rBt(this.measures,t.measures),!0):(p$t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ft(this.measures)])}producedFields(){const t=new Set;for(const n of ft(this.measures))for(const r of ft(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Yn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of ft(this.measures))for(const s of ft(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:yc(o));return{type:"aggregate",groupby:[...this.dimensions].map(yc),ops:t,fields:n,as:r}}}class wE extends $r{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of uc){const s=n.facet[o];if(s){const{bin:a,sort:u}=s;this[o]={name:n.getName(`${o}_domain`),fields:[St(s),...ni(a)?[St(s,{binSuffix:"end"})]:[]],...vp(u)?{sortField:u}:jt(u)?{sortIndexField:mw(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of uc)this[n]&&(t+=` ${n.charAt(0)}:${Yn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of uc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of uc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of rm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(cs(i)&&iv(o)){const s=eM(this.childModel,n),a=TQ(s);a?t[n]=a:yt(TX(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=LF,field:f}=u;o.push(f),s.push(c),a.push(St(u,{forAs:!0}))}else l&&(o.push(l),s.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of gQ){for(const c of yQ){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[yp,gp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Gfe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function iBt(e,t){const n=hX(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Gfe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Gfe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return yt(_Mt(t)),null}function oBt(e){const t={};return mN(e.filter,n=>{if(nRe(n)){let r=null;IX(n)?r=ul(n.equal):NX(n)?r=ul(n.lte):RX(n)?r=ul(n.lt):PX(n)?r=ul(n.gt):OX(n)?r=ul(n.gte):FX(n)?r=n.range[0]:MX(n)&&(r=(n.oneOf??n.in)[0]),r&&(ov(r)?t[n.field]="date":xi(r)?t[n.field]="number":Dn(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function sBt(e){const t={};function n(r){fw(r)?t[r.field]="date":r.type==="quantitative"&&QFt(r.aggregate)?t[r.field]="number":ow(r.field)>1?r.field in t||(t[r.field]="flatten"):av(r)&&vp(r.sort)&&ow(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ii(e)||bl(e))&&e.forEachFieldDef((r,i)=>{if(eu(r))n(r);else{const o=nv(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Ii(e)){const{mark:r,markDef:i,encoding:o}=e;if(wg(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];bt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function aBt(e){const t={};if(Ii(e)&&e.component.selection)for(const n of ft(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&ow(i.field)>1&&(t[i.field]="flatten")}return t}class fa extends $r{clone(){return new fa(null,vn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Yn(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!h0(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ft(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:yt(rfe(a,r[a],u.value)))}for(const a of ft(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:yt(rfe(a,n[a],u)))}const o=new om(n,r);i.copyAll(o);const s={};for(const a of ft(o.combine())){const u=o.get(a);u!==null&&(s[a]=u)}return ft(s).length===0||i.parseNothing?null:new fa(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ft(this._parse)){const r=this._parse[n];ow(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ft(this._parse))}dependentFields(){return new Set(ft(this._parse))}assembleTransforms(t=!1){return ft(this._parse).filter(n=>t?ow(n)>1:!0).map(n=>{const r=iBt(n,this._parse[n]);return r?{type:"formula",expr:r,as:gE(n)}:null}).filter(n=>n!==null)}}class z0 extends $r{clone(){return new z0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([kf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:kf}}}class lA extends $r{clone(){return new lA(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Yn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class cA extends $r{clone(){return new cA(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Yn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class x1 extends $r{constructor(t){super(null),t??(t={name:"source"});let n;if(h0(t)||(n=t.format?{...Iu(t.format,["parse"])}:{}),_C(t))this._data={values:t.values};else if(dw(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Vn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else bNe(t)?this._data={values:[{type:"Sphere"}]}:(yNe(t)||h0(t))&&(this._data={});this._generator=h0(t),t.name&&(this._name=t.name),n&&!zr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Yfe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},uBt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},R2;function wQ(e){return e instanceof x1||e instanceof lA||e instanceof cA}class EQ{constructor(){R2.set(this,void 0),Yfe(this,R2,!1,"f")}setModified(){Yfe(this,R2,!0,"f")}get modifiedFlag(){return uBt(this,R2,"f")}}R2=new WeakMap;class uv extends EQ{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class _Q extends EQ{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class lBt extends _Q{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ft(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class cBt extends _Q{constructor(t){super(),this.requiresSelectionId=t&&mQ(t)}run(t){t instanceof z0&&(this.requiresSelectionId&&(wQ(t.parent)||t.parent instanceof gf||t.parent instanceof fa)||(this.setModified(),t.remove()))}}class fBt extends EQ{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof kd&&(r=t.producedFields(),fX(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class dBt extends _Q{constructor(){super()}run(t){t instanceof Ru&&!t.isRequired()&&(this.setModified(),t.remove())}}class hBt extends uv{run(t){if(!wQ(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof fa)if(t instanceof fa)this.setModified(),t.merge(n);else{if(dX(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class pBt extends uv{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof fa);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const u of ft(a))u in i?i[u]!==a[u]&&o.add(u):i[u]=a[u]}for(const s of o)delete i[s];if(!zr(i)){this.setModified();const s=new fa(t,i);for(const a of n){if(a instanceof fa)for(const u of ft(i))delete a.parse[u];t.removeChild(a),a.parent=s,a instanceof fa&&ft(a.parse).length===0&&a.remove()}}}}}class mBt extends uv{run(t){t instanceof Ru||t.numChildren()>0||t instanceof wE||t instanceof x1||(this.setModified(),t.remove())}}class gBt extends uv{run(t){const n=t.children.filter(i=>i instanceof kd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class yBt extends uv{run(t){const n=t.children.filter(i=>i instanceof gf),r={};for(const i of n){const o=Yn(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of ft(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class vBt extends uv{constructor(t){super(),this.model=t}run(t){const n=!(wQ(t)||t instanceof xE||t instanceof fa||t instanceof z0),r=[],i=[];for(const o of t.children)o instanceof Rd&&(n&&!dX(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Rd?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class bBt extends uv{run(t){const n=[...t.children];if(!iw(n,s=>s instanceof Ru)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Ru){let a=s;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ru)a=u;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class lv extends $r{clone(){return new lv(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??St(t)}hash(){return`JoinAggregateTransform ${Yn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class yw extends $r{clone(){return new yw(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=mh(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:m}=c,p=VX({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:kF(m)});p!=="show"&&p!=="always-valid"&&(l[c.field]=c)}return l},{});return ft(u).length?new yw(t,u):null}dependentFields(){return new Set(ft(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Yn(this.filter)}`}assemble(){const t=ft(this.filter).reduce((n,r)=>{const i=this.filter[r],o=St(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${Pz(o)}))`):i.type==="quantitative"&&n.push(Pz(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function Pz(e){return`isValid(${e}) && isFinite(+${e})`}function xBt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=St(r);return i&&t.push(i),t},[])}function wBt(e){return jt(e)&&e.every(t=>Dn(t))&&e.length>1}class xp extends $r{clone(){return new xp(null,vn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(no(f.order,"ascending"));const l={field:a,order:u};let c;return wBt(o)?c=o:Dn(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new xp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:u}=r,l=o.map(h=>{const m=i[h];return Df(m)}).filter(h=>!!h),c=xBt(n),f=n.encoding.order;let d;if(jt(f)||bt(f))d=MIe(f);else{const h=SRe(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((m,p)=>(m.field.includes(p)||(m.field.push(p),m.order.push(h)),m),{field:[],order:[]})}return new xp(t,{dimensionFieldDefs:l,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Yn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[St(i,{binSuffix:"mid"})]:[St(i,{}),St(i,{binSuffix:"end"})]:[St(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=St(c,{expr:"datum"}),m=St(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${Pz(h)} ? ${f}*${h}+${1-f}*${m} : ${h}`,as:St(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:St(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:l,offset:a}),t}}class EE extends $r{clone(){return new EE(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??St(t)}hash(){return`WindowTransform ${Yn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>EX(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function EBt(e){function t(n){if(!(n instanceof wE)){const r=n.clone();if(r instanceof Ru){const i=Fz+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof gf||r instanceof xp||r instanceof EE||r instanceof lv)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Oz(e){if(e instanceof wE)if(e.numChildren()===1&&!(e.children[0]instanceof Ru)){const t=e.children[0];(t instanceof gf||t instanceof xp||t instanceof EE||t instanceof lv)&&t.addDimensions(e.fields),t.swapWithParent(),Oz(e)}else{const t=e.model.component.data.main;g3e(t);const n=EBt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Oz)}function g3e(e){if(e instanceof Ru&&e.type===Pi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof wE||(t.swapWithParent(),g3e(e))}}const Fz="scale_",Nk=5;function Mz(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Mz(t.children))return!1}return!0}function zc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Kfe(e,t,n){let r=e.sources,i=!1;return i=zc(new dBt,r)||i,i=zc(new cBt(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=zc(new mBt,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=zc(new hBt,r)||i,i=zc(new vBt(t),r)||i,i=zc(new fBt,r)||i,i=zc(new pBt,r)||i,i=zc(new yBt,r)||i,i=zc(new gBt,r)||i,i=zc(new lBt,r)||i,i=zc(new bBt,r)||i),e.sources=r,i}function _Bt(e,t){Mz(e.sources);let n=0,r=0;for(let i=0;i<Nk&&Kfe(e,t,!0);i++)n++;e.sources.map(Oz);for(let i=0;i<Nk&&Kfe(e,t,!1);i++)r++;Mz(e.sources),Math.max(n,r)===Nk&&yt(`Maximum optimization runs(${Nk}) reached.`)}class Zo{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Zo(()=>t(n))}}function y3e(e){Ii(e)?TBt(e):CBt(e)}function TBt(e){const t=e.component.scales;for(const n of ft(t)){const r=ABt(e,n);if(t[n].setWithExplicit("domains",r),kBt(e,n),e.component.data.isFaceted){let o=e;for(;!bl(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)op(a)&&(a.data=Fz+a.data.replace(Fz,""))}}}function CBt(e){for(const n of e.children)y3e(n);const t=e.component.scales;for(const n of ft(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=j0(r,s.getWithExplicit("domains"),"domains","scale",$z);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&yt(gMt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function SBt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=Xfe(t,n);if(!i){yt(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Xfe(t,n);if(i)return"unaggregated"}return e}function ABt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=SBt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Mo(r.x2)?Mo(r.x)?j0(Nm(n,i,e,"x"),Nm(n,i,e,"x2"),"domain","scale",$z):Nm(n,i,e,"x2"):t==="y"&&Mo(r.y2)?Mo(r.y)?j0(Nm(n,i,e,"y"),Nm(n,i,e,"y2"),"domain","scale",$z):Nm(n,i,e,"y2"):Nm(n,i,e,t)}function DBt(e,t,n){return e.map(r=>({signal:`{data: ${UF(r,{timeUnit:n,type:t})}}`}))}function KL(e,t,n){var i;const r=(i=ss(n))==null?void 0:i.unit;return t==="temporal"||r?DBt(e,t,r):[e]}function Nm(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:u}=n,l=Mo(i[r]),{type:c}=l,f=l.timeUnit,d=xLt({invalid:Xd("invalid",o,a),isPath:wg(s)});if(U$t(t)){const p=Nm(e,void 0,n,r),g=KL(t.unionWith,c,f);return ad([...g,...p.value])}else{if(qt(t))return ad([t]);if(t&&t!=="unaggregated"&&!lRe(t))return ad(KL(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return il([[0,1]]);const p=n.requestDataName(d);return il([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const h=mh(r)&&bt(l)?IBt(n,r,e):void 0;if(gh(l)){const p=KL([l.datum],c,f);return il(p)}const m=l;if(t==="unaggregated"){const{field:p}=l;return il([{data:n.requestDataName(d),field:St({field:p,aggregate:"min"})},{data:n.requestDataName(d),field:St({field:p,aggregate:"max"})}])}else if(ni(m.bin)){if(cs(e))return il(e==="bin-ordinal"?[]:[{data:xC(h)?n.requestDataName(d):n.requestDataName(Pi.Raw),field:n.vgField(r,sA(m,r)?{binSuffix:"range"}:{}),sort:h===!0||!cr(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:p}=m;if(ni(p)){const g=xQ(n,m.field,p);return il([new Zo(()=>{const v=n.getSignalName(g);return`[${v}.start, ${v}.stop]`})])}else return il([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(m.timeUnit&&Vn(["time","utc"],e)){const p=i[ph(r)];if(CRe(m,p,o,a)){const g=n.requestDataName(d),v=B0({fieldDef:m,fieldDef2:p,markDef:o,config:a}),b=EC(s)&&v!==.5&&ro(r);return il([{data:g,field:n.vgField(r,b?{suffix:YF}:{})},{data:g,field:n.vgField(r,{suffix:b?KF:"end"})}])}}return il(h?[{data:xC(h)?n.requestDataName(d):n.requestDataName(Pi.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function XL(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":LF),...r?{field:yc(r)}:{},...i?{order:i}:{}}}function kBt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=lRe(r)?r:void 0,s=rv(i)&&IF(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function IBt(e,t,n){if(!cs(n))return;const r=e.fieldDef(t),i=r.sort;if(_Re(i))return{op:"min",field:mw(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(vp(i)){const a=o&&!s.has(i.field);return XL(i,a)}else if(x5t(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=o&&!s.has(f);if(Lp(c)||xg(c))return XL({field:St(l),order:u},d);if(EX(c)||!c)return XL({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Vn(["ascending",void 0],i))return!0}}function Xfe(e,t){const{aggregate:n,type:r}=e;return n?Dn(n)&&!ZFt.has(n)?{valid:!1,reason:qMt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:WMt(e)}:{valid:!0}:{valid:!1,reason:HMt(e)}}function $z(e,t,n,r){return e.explicit&&t.explicit&&yt(QMt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function RBt(e){const t=xd(e.map(s=>{if(op(s)){const{sort:a,...u}=s;return u}return s}),Yn),n=xd(e.map(s=>{if(op(s)){const a=s.sort;return a!==void 0&&!xC(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Yn);if(t.length===0)return;if(t.length===1){const s=e[0];if(op(s)&&n.length>0){let a=n[0];if(n.length>1){yt(ofe);const u=n.filter(l=>cr(l)&&"op"in l&&l.op!=="min");n.every(l=>cr(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(cr(a)&&"field"in a){const u=a.field;s.field===u&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=xd(n.map(s=>xC(s)||!("op"in s)||Dn(s.op)&&vo(KFt,s.op)?s:(yt(ZMt(s)),!0)),Yn);let i;r.length===1?i=r[0]:r.length>1&&(yt(ofe),i=!0);const o=xd(e.map(s=>op(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function TQ(e){if(op(e)&&Dn(e.field))return e.field;if(eMt(e)){let t;for(const n of e.fields)if(op(n)&&Dn(n.field)){if(!t)t=n.field;else if(t!==n.field)return yt(e$t),t}return yt(t$t),t}else if(tMt(e)){yt(n$t);const t=e.fields[0];return Dn(t)?t:void 0}}function eM(e,t){const r=e.component.scales[t].get("domains").map(i=>(op(i)&&(i.data=e.lookupDataSource(i.data)),i));return RBt(r)}function v3e(e){return _E(e)||CQ(e)?e.children.reduce((t,n)=>t.concat(v3e(n)),Qfe(e)):Qfe(e)}function Qfe(e){return ft(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=NBt(i.range,o,n,e),h=eM(e,n),m=a?RLt(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...m?{domainRaw:m}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function NBt(e,t,n,r){if(ro(n)){if(iv(e))return{step:{signal:`${t}_step`}}}else if(cr(e)&&op(e))return{...e,data:r.lookupDataSource(e.data)};return e}class b3e extends om{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Vn([ks.LOG,ks.TIME,ks.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Vn([ks.LINEAR,ks.SQRT,ks.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(jt(a)){const u=a[0],l=a[a.length-1];if(xi(u)&&xi(l))if(u<=0&&l>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const PBt=["range","scheme"];function OBt(e){const t=e.component.scales;for(const n of wX){const r=t[n];if(!r)continue;const i=FBt(n,e);r.setWithExplicit("range",i)}}function Jfe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=ju(t),s=e.getName(o);if(cr(r)&&r.binned&&r.step!==void 0)return new Zo(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${u})`});if(ni(r)){const a=xQ(e,i,r);return new Zo(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${l})`})}}}function FBt(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of PBt)if(n[f]!==void 0){const d=yz(o,f),h=cRe(e,f);if(!d)yt(VIe(o,f,e));else if(h)yt(h);else switch(f){case"range":{const m=n.range;if(jt(m)){if(ro(e))return ad(m.map(p=>{if(p==="width"||p==="height"){const g=t.getName(p),v=t.getSignalName.bind(t);return Zo.fromName(v,g)}return p}))}else if(cr(m))return ad({data:t.requestDataName(Pi.Main),field:m.field,sort:{op:"min",field:t.vgField(e)}});return ad(m)}case"scheme":return ad(MBt(n[f]))}}const s=e===wi||e==="xOffset"?"width":"height",a=r[s];if(Jd(a)){if(ro(e))if(cs(o)){const f=w3e(a,t,e);if(f)return ad({step:f})}else yt(HIe(s));else if(ZS(e)){const f=e===pg?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const m=E3e(a,o);if(m)return ad(m)}}}const{rangeMin:u,rangeMax:l}=n,c=$Bt(e,t);return(u!==void 0||l!==void 0)&&yz(o,"rangeMin")&&jt(c)&&c.length===2?ad([u??c[0],l??c[1]]):il(c)}function MBt(e){return z$t(e)?{scheme:e.name,...Iu(e,["name"])}:{scheme:e}}function x3e(e,t,n,{center:r}={}){const i=ju(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===hs&&Sf(n)?r?[Zo.fromName(a=>`${s(a)}/2`,o),Zo.fromName(a=>`-${s(a)}/2`,o)]:[Zo.fromName(s,o),0]:r?[Zo.fromName(a=>`-${s(a)}/2`,o),Zo.fromName(a=>`${s(a)}/2`,o)]:[0,Zo.fromName(s,o)]}function $Bt(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=Mo(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case wi:case hs:{if(Vn(["point","band"],u)){const f=_3e(e,n,r.view);if(Jd(f))return{step:w3e(f,t,e)}}return x3e(e,t,u)}case pg:case yE:return LBt(e,t,u);case tm:{const f=zBt(i,r),d=UBt(i,n,t,r);return uw(u)?jBt(f,d,BBt(u,r,l,e)):[f,d]}case Ic:return[0,Math.PI*2];case tv:return[0,360];case Lf:return[0,new Zo(()=>{const f=t.getSignalName(bl(t.parent)?"child_width":"width"),d=t.getSignalName(bl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case mg:return{step:1e3/r.scale.framesPerSecond};case vg:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case bg:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Bu:return"symbol";case Lu:case dh:case hh:return u==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case nm:case gg:case yg:return[r.scale.minOpacity,r.scale.maxOpacity]}}function w3e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=yX(n),s=r[o];if(rNe({step:e,offsetIsDiscrete:Tn(s)&&iRe(s.type)})==="offset"&&$Re(r,o)){const u=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${oMt(f)})`}}else return e.step}function E3e(e,t){if(rNe({step:e,offsetIsDiscrete:cs(t)})==="offset")return{step:e.step}}function LBt(e,t,n){const r=e===pg?"x":"y",i=t.getScaleComponent(r);if(!i)return x3e(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:u}=t;if(o==="band"){const l=_3e(r,t.size,t.config.view);if(Jd(l)){const c=E3e(l,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const l=t.encoding[r];if(bt(l)&&l.timeUnit){const c=eRe(l.timeUnit,m=>`scale('${s}', ${m})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=B0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const m=qt(f)?`${f.signal}/2`+h:`${f/2+d}`,p=qt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${m} * (${c})`},{signal:`${p} * (${c})`}]}return[0,{signal:c}]}return fIe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function _3e(e,t,n){const r=e===wi?"width":"height",i=t[r];return i||GP(n,r)}function BBt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&jt(n)?n.length+1:(yt(f$t(r)),3)}}function jBt(e,t,n){const r=()=>{const i=af(t),o=af(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return qt(t)?new Zo(r):{signal:r()}}function zBt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(RF("size",e))}const Zfe=.95;function UBt(e,t,n,r){const i={x:Jfe(n,"x"),y:Jfe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=ede(t,i,r.view);return xi(o)?o-1:new Zo(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=ede(t,i,r.view);return xi(o)?Math.pow(Zfe*o,2):new Zo(()=>`pow(${Zfe} * ${o.signal}, 2)`)}}throw new Error(RF("size",e))}function ede(e,t,n){const r=Jd(e.width)?e.width.step:wz(n,"width"),i=Jd(e.height)?e.height.step:wz(n,"height");return t.x||t.y?new Zo(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function T3e(e,t){Ii(e)?VBt(e,t):S3e(e,t)}function VBt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of ft(n)){const u=s[a],l=n[a],c=e.getScaleComponent(a),f=Mo(i[a]),d=u[t],h=c.get("type"),m=c.get("padding"),p=c.get("paddingInner"),g=yz(h,t),v=cRe(a,t);if(d!==void 0&&(g?v&&yt(v):yt(VIe(h,t,a))),g&&v===void 0)if(d!==void 0){const b=f.timeUnit,w=f.type;switch(t){case"domainMax":case"domainMin":ov(u[t])||w==="temporal"||b?l.set(t,{signal:UF(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=pt(tde,t)?tde[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:m,scalePaddingInner:p,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:o,config:r,hasNestedOffsetScale:LRe(i,a),hasSecondaryRangeChannel:!!i[ph(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const tde={bins:({model:e,fieldOrDatumDef:t})=>bt(t)?HBt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>qBt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>WBt(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>GBt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>YBt(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>KBt(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=bt(e)?e.sort:void 0;return XBt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>QBt(e,t,n,r,i,o.scale,s)};function C3e(e){Ii(e)?OBt(e):S3e(e,"range")}function S3e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?C3e(r):T3e(r,t);for(const r of ft(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=j0(i,a,t,"scale",gNe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function HBt(e,t){const n=t.bin;if(ni(n)){const r=xQ(e,t.field,n);return new Zo(()=>e.getSignalName(r))}else if(As(n)&&rv(n)&&n.step!==void 0)return{step:n.step}}function qBt(e,t){if(Vn([Lu,dh,hh],e)&&t!=="nominal")return"hcl"}function WBt(e,t,n,r,i,o){var s;if(!((s=Df(o))!=null&&s.bin||jt(n)||i!=null||r!=null||Vn([ks.TIME,ks.UTC],e)))return ro(t)?!0:void 0}function GBt(e,t,n,r,i,o){if(ro(e)){if(wd(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(bt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===ks.POINT)return n.pointPadding}}function YBt(e,t,n,r,i,o=!1){if(e===void 0){if(ro(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return o?c:no(s,n==="bar"?a:n==="tick"?l:u)}else if(ZS(t)&&r===ks.BAND)return i.offsetBandPaddingInner}}function KBt(e,t,n,r,i,o=!1){if(e===void 0){if(ro(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===ks.BAND)return no(s,qt(r)?{signal:`${r.signal}/2`}:r/2)}else if(ZS(t)){if(n===ks.POINT)return .5;if(n===ks.BAND)return i.offsetBandPaddingOuter}}}function XBt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Sf(e)&&t==="descending"?qt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Sf(e)&&t==="descending")return!0}function QBt(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Sf(i)){if(jt(n)){const u=n[0],l=n[n.length-1];if(xi(u)&&u<=0&&xi(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!uw(i))return!0;if(!(bt(t)&&t.bin)&&Vn([...rm,...jFt],e)){const{orient:u,type:l}=r;return Vn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Vn(["bar","area"],l)&&!s?!0:o==null?void 0:o.zero}return!1}function JBt(e,t,n,r,i=!1){const o=ZBt(t,n,r,i),{type:s}=e;return mh(t)?s!==void 0?Y$t(t,s)?bt(n)&&!G$t(s,n.type)?(yt(KMt(s,o)),o):s:(yt(YMt(t,s,o)),o):o:null}function ZBt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(ax(e)||LL(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&yt(BL(e,"ordinal")),"ordinal";if($L(e))return"band";if(ro(e)||ZS(e)){if(Vn(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in xX)return"band";const o=n[ju(e)];return g1(o)||cw(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return ax(e)?"time":LL(e)==="discrete"?(yt(BL(e,"temporal")),"ordinal"):bt(t)&&t.timeUnit&&ss(t.timeUnit).utc?"utc":$L(e)?"band":"time";case"quantitative":return ax(e)?bt(t)&&ni(t.bin)?"bin-ordinal":"linear":LL(e)==="discrete"?(yt(BL(e,"quantitative")),"ordinal"):$L(e)?"band":"linear";case"geojson":return}throw new Error(zIe(t.type))}function e7t(e,{ignoreRange:t}={}){A3e(e),y3e(e);for(const n of W$t)T3e(e,n);t||C3e(e)}function A3e(e){Ii(e)?e.component.scales=t7t(e):e.component.scales=r7t(e)}function t7t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of wX){const s=Mo(t[o]);if(s&&n===hRe&&o===Bu&&s.type===vE)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const u=LRe(t,o),l=JBt(a,o,s,r,u);i[o]=new b3e(e.scaleName(`${o}`,!0),{value:l,explicit:a.type===l})}}return i}const n7t=gNe((e,t)=>afe(e)-afe(t));function r7t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){A3e(o);for(const s of ft(o.component.scales))if((t=i.scale)[s]??(t[s]=i3e(s,e)),i.scale[s]==="shared"){const a=r[s],u=o.component.scales[s].getWithExplicit("type");a?M$t(a.value,u.value)?r[s]=j0(a,u,"type","scale",n7t):(i.scale[s]="independent",delete r[s]):r[s]=u}}for(const o of ft(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new b3e(s,a);for(const u of e.children){const l=u.component.scales[o];l&&(u.renameScale(l.get("name"),s),l.merged=!0)}}return n}class QL{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ii(e){return(e==null?void 0:e.type)==="unit"}function bl(e){return(e==null?void 0:e.type)==="facet"}function CQ(e){return(e==null?void 0:e.type)==="concat"}function _E(e){return(e==null?void 0:e.type)==="layer"}class SQ{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=Ds(a),this.name=t.name??i,this.title=Lm(t.title)?{text:t.title}:t.title?Ds(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new QL,this.projectionNameMap=r?r.projectionNameMap:new QL,this.signalNameMap=r?r.signalNameMap:new QL,this.data=t.data,this.description=t.description,this.transforms=uLt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:d8t(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:BF(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new om,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?vn(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){e7t(this)}parseProjection(){p3e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){l3e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of ft(r)){const s=r[o];s!==void 0&&(i[o]=fi(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=fi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:zr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=_9t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of uc)t[r].title&&n.push(y9t(this,r));for(const r of gQ)n=n.concat(v9t(this,r));return n}assembleAxes(){return i9t(this.component.axes,this.config)}assembleLegends(){return f3e(this)}assembleProjections(){return W9t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...NIe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Vn(["unit","layer"],this.type)?Vn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),zr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||bl(this.parent)?v3e(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return yi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Pi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(bl(this.parent)){const n=n3e(t),r=DF(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(cs(o)&&iv(s)){const a=i.get("name"),u=eM(this,r),l=TQ(u);if(l){const c=St({aggregate:"distinct",field:l},{expr:"datum"});return{signal:t3e(a,i,c)}}else return yt(TX(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(TIe(t)&&mh(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(cMt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class D3e extends SQ{vgField(t,n={}){const r=this.fieldDef(t);if(r)return St(r,n)}reduceFieldDef(t,n){return z5t(this.getMapping(),(r,i,o)=>{const s=Df(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){JX(this.getMapping(),(r,i)=>{const o=Df(r);o&&t(o,i)},n)}}class tM extends $r{clone(){return new tM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Yn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class nM extends $r{clone(){return new nM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=vn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Yn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class rM extends $r{clone(){return new rM(this.parent,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=vn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Yn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class iM extends $r{clone(){return new iM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Yn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class cx extends $r{clone(){return new cx(null,vn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[jf,Bf],[vc,zf]]){const o=i.map(s=>{const a=Mo(n.encoding[s]);return bt(a)?a.field:gh(a)?{expr:`${a.datum}`}:Af(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new cx(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Bu)){const i=n.typedFieldDef(Bu);i.type===vE&&(t=new cx(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Dn);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Yn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class TC extends $r{clone(){return new TC(null,this.projection,vn(this.fields),vn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[jf,Bf],[vc,zf]]){const i=r.map(s=>{const a=Mo(n.encoding[s]);return bt(a)?a.field:gh(a)?{expr:`${a.datum}`}:Af(a)?{expr:`${a.value}`}:void 0}),o=r[0]===vc?"2":"";(i[0]||i[1])&&(t=new TC(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Dn))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Yn(this.fields)} ${Yn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Uy extends $r{clone(){return new Uy(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Uy(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(bt(i)&&bt(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=s.impute,d=zRe(n.mark,r);return new Uy(t,{impute:s.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Yn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:V8t(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class oM extends $r{clone(){return new oM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Yn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class CC extends $r{clone(){return new CC(null,vn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(H8t(s)){let u=R3e(s.data,o);u||(u=new x1(s.data),o.push(u));const l=n.getName(`lookup_${i}`);a=new Ru(u,l,Pi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(q8t(s)){const u=s.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(yi(u),u)}catch{throw new Error(pMt(u))}if(a=l.materialized,!a)throw new Error(mMt(u))}return new CC(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?to(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Yn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:to(this.transform.as)}:{}};else{let n=this.transform.as;Dn(n)||(yt(SMt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class sM extends $r{clone(){return new sM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Yn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class aM extends $r{clone(){return new aM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Yn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class uM extends $r{clone(){return new uM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Yn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class lM extends $r{clone(){return new lM(null,vn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Yn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function k3e(e){let t=0;function n(r,i){if(r instanceof x1&&!r.isGenerator&&!dw(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof fa&&(r.parent instanceof x1&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof wE){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof lA||r instanceof cA||r instanceof yw||r instanceof xE||r instanceof pw||r instanceof TC||r instanceof gf||r instanceof CC||r instanceof EE||r instanceof lv||r instanceof iM||r instanceof rM||r instanceof tM||r instanceof oM||r instanceof sM||r instanceof aM||r instanceof z0||r instanceof lM||r instanceof uM||r instanceof nM)&&i.transform.push(r.assemble()),(r instanceof Rd||r instanceof kd||r instanceof Uy||r instanceof xp||r instanceof cx)&&i.transform.push(...r.assemble()),r instanceof Ru&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ru?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ru&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function i7t(e){const t=[],n=k3e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function o7t(e,t){const n=[],r=k3e(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function s7t(e){return e==="top"||e==="left"||qt(e)?"header":"footer"}function a7t(e){for(const t of uc)u7t(e,t);nde(e,"x"),nde(e,"y")}function u7t(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],u=gw("title",null,r,t);let l=ux(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=jt(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=gw("labelOrient",a.header,r,t),f=a.header!==null?no((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=Vn(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[I3e(e,t,f)]}}}function I3e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function nde(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=bQ(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const u=s7t(a.get("orient"));s[u]??(s[u]=[I3e(e,o,!1)]);const l=I2(a,"main",e.config,{header:!0});l&&s[u][0].axes.push(l),a.mainExtracted=!0}}}}function l7t(e){AQ(e),QP(e,"width"),QP(e,"height")}function c7t(e){AQ(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";QP(e,t),QP(e,n)}function AQ(e){for(const t of e.children)t.parseLayoutSize()}function QP(e,t){const n=n3e(t),r=DF(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??i3e(r,e);if(l==="independent"&&u.value==="step"){s=void 0;break}if(s){if(l==="independent"&&s.value!==u.value){s=void 0;break}s=j0(s,u,n,"")}else s=u}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function f7t(e){const{size:t,component:n}=e;for(const r of rm){const i=ju(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Jd(o)?"step":o,!0)}else{const o=d7t(e,i);n.layoutSize.set(i,o,!1)}}}function d7t(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(cs(o)){const a=GP(r.view,t);return iv(s)||Jd(a)?"step":a}else return xz(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return xz(r.view,t);{const o=GP(r.view,t);return Jd(o)?o.step:o}}}function Lz(e,t,n){return St(t,{suffix:`by_${St(e)}`,...n})}class pT extends D3e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=NQ(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!rA(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ft(t),r={};for(const i of n){if(![gp,yp].includes(i)){yt(RF(i,"facet"));break}const o=t[i];if(o.field===void 0){yt(mz(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=QX(t,n);return r.header?r.header=Ds(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return pt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=cM(this),this.child.parseData()}parseLayoutSize(){AQ(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Id(t))&&SX(CX)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),a7t(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of uc)for(const r of yQ){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=gw("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const u=JF(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof pT))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof pT?{...this.channelHasField("column")?{encode:{update:{columns:{field:St(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof pT){if(this.child.channelHasField("column")){const i=St(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of rm){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(cs(s)&&iv(a)){const u=eM(this.child,i),l=TQ(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):yt(TX(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of uc){const f=this.facet[c];if(f){u.push(St(f));const{bin:d,sort:h}=f;if(ni(d)&&u.push(St(f,{binSuffix:"end"})),vp(h)){const{field:m,op:p=LF}=h,g=Lz(f,h);r&&i?(o.push(g),s.push("max"),a.push(g)):(o.push(m),s.push(p),a.push(g))}else if(jt(h)){const m=mw(f,c);o.push(m),s.push("max"),a.push(m)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||o.length>0?{aggregate:{...l?{cross:l}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?vp(r.sort)?[Lz(r,r.sort,{expr:"datum"})]:jt(r.sort)?[mw(r,t,{expr:"datum"})]:[St(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(vp(i)?i.order:!jt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Rz(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of gQ)if(t[o]){const s=gw("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return Rz(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=i7t(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:uc.map(u=>this.facetSortFields(u)).flat(),order:uc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(ALt(this,[]))}]}getMapping(){return this.facet}}function h7t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(vp(o.sort)){const{field:s,op:a=LF}=o.sort;e=i=new lv(e,{joinaggregate:[{op:a,field:s,as:Lz(o,o.sort,{forAs:!0})}],groupby:[St(o)]})}return i}return null}function R3e(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((u||f)&&u!==f)){if(_C(e)&&_C(a)){if(pl(e.values,a.values))return s}else if(dw(e)&&dw(a)){if(e.url===a.url)return s}else if(yNe(e)&&e.name===s.dataName)return s}}return null}function p7t(e,t){if(e.data||!e.parent){if(e.data===null){const r=new x1({values:[]});return t.push(r),r}const n=R3e(e.data,t);if(n)return h0(e.data)||(n.data.format=dIe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new x1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function m7t(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(tLt(i))s=e=new pw(e,i),o="derived";else if(lQ(i)){const a=oBt(i);s=e=fa.makeWithAncestors(e,{},a,n)??e,e=new xE(e,t,i.filter)}else if(dNe(i))s=e=Rd.makeFromTransform(e,i,t),o="number";else if(rLt(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new fa(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=kd.makeFromTransform(e,i);else if(iLt(i))s=e=gf.makeFromTransform(e,i),o="number",mQ(t)&&(e=new z0(e));else if(fNe(i))s=e=CC.make(e,t,i,r++),o="derived";else if(J8t(i))s=e=new EE(e,i),o="number";else if(Z8t(i))s=e=new lv(e,i),o="number";else if(oLt(i))s=e=xp.makeFromTransform(e,i),o="derived";else if(sLt(i))s=e=new iM(e,i),o="derived";else if(aLt(i))s=e=new nM(e,i),o="derived";else if(eLt(i))s=e=new rM(e,i),o="derived";else if(W8t(i))s=e=new uM(e,i),o="derived";else if(Q8t(i))e=new lM(e,i);else if(nLt(i))s=e=Uy.makeFromTransform(e,i),o="derived";else if(G8t(i))s=e=new tM(e,i),o="derived";else if(Y8t(i))s=e=new sM(e,i),o="derived";else if(K8t(i))s=e=new aM(e,i),o="derived";else if(X8t(i))s=e=new oM(e,i),o="derived";else{yt(CMt(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function cM(e){var g;let t=p7t(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(h0(i)||dw(i)||_C(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new bLt;h0(i)?(vNe(i)?t=new cA(t,i.sequence):cQ(i)&&(t=new lA(t,i.graticule)),s.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(s.parseNothing=!0),t=fa.makeExplicit(t,e,s)??t,t=new z0(t);const a=e.parent&&_E(e.parent);(Ii(e)||bl(e))&&a&&(t=Rd.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=m7t(t,e,s));const u=aBt(e),l=sBt(e);t=fa.makeWithAncestors(t,{},{...u,...l},s)??t,Ii(e)&&(t=cx.parseAll(t,e),t=TC.parseAll(t,e)),(Ii(e)||bl(e))&&(a||(t=Rd.makeFromEncoding(t,e)??t),t=kd.makeFromEncoding(t,e)??t,t=pw.parseAllForSortIndex(t,e));const c=t=Pk(Pi.Raw,e,t);if(Ii(e)){const v=gf.makeFromEncoding(t,e);v&&(t=v,mQ(e)&&(t=new z0(t))),t=Uy.makeFromEncoding(t,e)??t,t=xp.makeFromEncoding(t,e)??t}let f,d;if(Ii(e)){const{markDef:v,mark:b,config:w}=e,E=jr("invalid",v,w),{marks:_,scales:T}=d=xNe({invalid:E,isPath:wg(b)});_!==T&&T==="include-invalid-values"&&(f=t=Pk(Pi.PreFilterInvalid,e,t)),_==="exclude-invalid-values"&&(t=yw.make(t,e,d)??t)}const h=t=Pk(Pi.Main,e,t);let m;if(Ii(e)&&d){const{marks:v,scales:b}=d;v==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=yw.make(t,e,d)??t,m=t=Pk(Pi.PostFilterInvalid,e,t))}Ii(e)&&n9t(e,h);let p=null;if(bl(e)){const v=e.getName("facet");t=h7t(t,e.facet)??t,p=new wE(t,e,v,h.getSource()),n[v]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:p,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:m}}function Pk(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new Ru(n,o,e,i);return r[o]=s,s}class g7t extends SQ{constructor(t,n,r,i){var o,s,a,u;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&yt(EMt),this.children=this.getChildren(t).map((l,c)=>NQ(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=cM(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ft(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Id(t))&&SX(CX)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return qF(t)?t.vconcat:aQ(t)?t.hconcat:t.concat}parseLayoutSize(){c7t(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=vQ(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function y7t(e){return e===!1||e===null}const v7t={disable:1,gridScale:1,scale:1,...FRe,labelExpr:1,encode:1},N3e=ft(v7t);class DQ extends om{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new DQ(vn(this.explicit),vn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!y7t(this.get(t))}hasOrientSignalRef(){return qt(this.explicit.orient)}}function b7t(e,t,n){const{encoding:r,config:i}=e,o=Mo(r[t])??Mo(r[ph(t)]),s=e.axis(t)||{},{format:a,formatType:u}=s;if(y1(u))return{text:uf({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(lw(o)==="quantitative"){if(cw(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:uf({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:uf({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(lw(o)==="temporal"&&i.timeFormatType&&bt(o)&&!o.timeUnit)return{text:uf({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function x7t(e){return rm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[A7t(n,e)]),t),{})}const w7t={bottom:"top",top:"bottom",left:"right",right:"left"};function E7t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of ft(i.component.axes))n.axis[o]=bQ(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=_7t(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of rm){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:u}=s.getWithExplicit("orient");if(!qt(a)){if(r[a]>0&&!u){const l=w7t[a];r[a]>r[l]&&s.set("orient",l,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function _7t(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=T7t(i,o)}}}else return t.map(n=>n.clone());return e}function T7t(e,t){for(const n of N3e){const r=j0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return BIe(i,o);case"gridScale":return{explicit:i.explicit,value:no(i.value,o.value)}}return GF(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function C7t(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(qt(n.labelAngle)?n.labelAngle:wC(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===QNe(r,i))return!0}return e===n[t]}const S7t=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function A7t(e,t){var v,b;let n=t.axis(e);const r=new DQ,i=Mo(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((v=s[e==="x"?"axisX":"axisY"])==null?void 0:v.orient)||((b=s.axis)==null?void 0:b.orient)||d9t(e),u=t.getScaleComponent(e).get("type"),l=o9t(e,u,a,t.config),c=n!==void 0?!n:kz("disable",s.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=l9t(i,n,e,s.style,l),d=wRe(n.formatType,i,u),h=xRe(i,i.type,n.format,n.formatType,s,!0),m={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const w of N3e){const E=w in zfe?zfe[w](m):pfe(w)?n[w]:void 0,_=E!==void 0,T=C7t(E,w,n,t,e);if(_&&T)r.set(w,E,T);else{const{configValue:S=void 0,configFrom:D=void 0}=pfe(w)&&w!=="values"?kz(w,s.style,n.style,l):{},k=S!==void 0;_&&!k?r.set(w,E,T):(D!=="vgAxisConfig"||S7t.has(w)&&k||aA(S)||qt(S))&&r.set(w,S,!1)}}const p=n.encoding??{},g=ORe.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const _=r3e(p[E]??{},t),T=E==="labels"?b7t(t,e,_):_;return T!==void 0&&!zr(T)&&(w[E]={update:T}),w},{});return zr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function D7t({encoding:e,size:t}){for(const n of rm){const r=ju(n);Jd(t[r])&&n0(e[n])&&(delete t[r],yt(HIe(r)))}return t}const k7t={vgMark:"arc",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wa("x",e,{defaultPos:"mid"}),...Wa("y",e,{defaultPos:"mid"}),...Bp(e,"radius"),...Bp(e,"theta")})},I7t={vgMark:"area",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...YP("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...YP("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...pQ(e)})},R7t={vgMark:"rect",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Bp(e,"x"),...Bp(e,"y")})},N7t={vgMark:"shape",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&bt(n)&&n.type===vE?{field:St(n,{expr:"datum"})}:{}}]}},P7t={vgMark:"image",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Bp(e,"x"),...Bp(e,"y"),...dQ(e,"url")})},O7t={vgMark:"line",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wa("x",e,{defaultPos:"mid"}),...Wa("y",e,{defaultPos:"mid"}),...Ns("size",e,{vgChannel:"strokeWidth"}),...pQ(e)})},F7t={vgMark:"trail",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wa("x",e,{defaultPos:"mid"}),...Wa("y",e,{defaultPos:"mid"}),...Ns("size",e),...pQ(e)})};function kQ(e,t){const{config:n}=e;return{...Rc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wa("x",e,{defaultPos:"mid"}),...Wa("y",e,{defaultPos:"mid"}),...Ns("size",e),...Ns("angle",e),...M7t(e,n,t)}}function M7t(e,t,n){return n?{shape:{value:n}}:Ns("shape",e)}const $7t={vgMark:"symbol",encodeEntry:e=>kQ(e)},L7t={vgMark:"symbol",encodeEntry:e=>kQ(e,"circle")},B7t={vgMark:"symbol",encodeEntry:e=>kQ(e,"square")},j7t={vgMark:"rect",encodeEntry:e=>({...Rc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Bp(e,"x"),...Bp(e,"y")})},z7t={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Rc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...YP("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...YP("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ns("size",e,{vgChannel:"strokeWidth"})}}},U7t={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Rc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Wa("x",e,{defaultPos:"mid"}),...Wa("y",e,{defaultPos:"mid"}),...dQ(e),...Ns("size",e,{vgChannel:"fontSize"}),...Ns("angle",e),...$fe("align",V7t(e.markDef,n,t)),...$fe("baseline",H7t(e.markDef,n,t)),...Wa("radius",e,{defaultPos:null}),...Wa("theta",e,{defaultPos:null})}}};function V7t(e,t,n){if(jr("align",e,n)===void 0)return"center"}function H7t(e,t,n){if(jr("baseline",e,n)===void 0)return"middle"}const q7t={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Rc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Bp(e,i),...Wa(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:fi(jr("thickness",n,t))}}},Ok={arc:k7t,area:I7t,bar:R7t,circle:L7t,geoshape:N7t,image:P7t,line:O7t,point:$7t,rect:j7t,rule:z7t,square:B7t,text:U7t,tick:q7t,trail:F7t};function W7t(e){if(Vn([MF,OF,J$t],e.mark)){const t=zRe(e.mark,e.encoding);if(t.length>0)return G7t(e,t)}else if(e.mark===FF){const t=hz.some(n=>jr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Y7t(e)}return IQ(e)}const rde="faceted_path_";function G7t(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:rde+e.requestDataName(Pi.Main),data:e.requestDataName(Pi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:IQ(e,{fromPrefix:rde})}]}const ide="stack_group_";function Y7t(e){var l;const[t]=IQ(e,{fromPrefix:ide}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...rw(t.encode.update,["y","yc","y2","height",...hz]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Iu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...rw(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Iu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of hz){const f=Xd(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=fi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=St(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(St(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Xd(f,e.markDef,e.config);return d!==void 0?{...c,[f]:fi(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Pi.Main),name:ide+e.requestDataName(Pi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function K7t(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!jt(s)&&Af(s)&&fz(s.value)||!s&&fz(jr("order",i,o)))){if((jt(s)||bt(s))&&!n)return MIe(s,{expr:"datum"});if(wg(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(bt(u))return{field:a}}}}function IQ(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=no(r.clip,X7t(e),Q7t(e)),a=OIe(r),u=i.key,l=K7t(e),c=J7t(e),f=jr("aria",r,o),d=Ok[n].postEncodingTransform?Ok[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Ok[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Pi.Main)},encode:{update:Ok[n].encodeEntry(e)},...d?{transform:d}:{}}]}function X7t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Q7t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function J7t(e){if(!e.component.selection)return null;const t=ft(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ft(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class P3e extends D3e{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,gfe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+ENe)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const s=Qd(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=F8t(s,o,{graticule:t.data&&cQ(t.data)}));const u=this.encoding=B5t(t.encoding||{},a,s.filled,o);this.markDef=uNe(s,u,o),this.size=D7t({encoding:u,size:gfe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=aNe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>oQ(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===hRe,r=t&&RFt.some(i=>Tn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return wX.reduce((r,i)=>{const o=Mo(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ds(t);return jt(n)&&(i.domain=n.map(ul)),jt(r)&&(i.range=r.map(ul)),i}initAxes(t){return rm.reduce((n,r)=>{const i=t[r];if(Tn(i)||r===wi&&Tn(t.x2)||r===hs&&Tn(t.y2)){const o=Tn(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=ft(t),r={};for(const i of n){const o=t[i];r[i]=aA(o)?PIe(o):ul(o)}return r}initLegends(t){return UFt.reduce((n,r)=>{const i=Mo(t[r]);if(i&&HFt(r)){const o=i.legend;n[r]=o&&Ds(o)}return n},{})}parseData(){this.component.data=cM(this)}parseLayoutSize(){f7t(this)}parseSelections(){this.component.selection=t9t(this,this.selection)}parseMarkGroup(){this.component.mark=W7t(this)}parseAxesAndHeaders(){this.component.axes=x7t(this)}assembleSelectionTopLevelSignals(t){return DLt(this,t)}assembleSignals(){return[...YNe(this),...SLt(this,[])]}assembleSelectionData(t){return kLt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return vQ(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!_E(this.parent))&&(t=SNe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return jy(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Df(n)}typedFieldDef(t){const n=this.fieldDef(t);return eu(n)?n:null}}class RQ extends SQ{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(WF(a))return new RQ(a,this,this.getName(`layer_${u}`),s,o);if(im(a))return new P3e(a,this,this.getName(`layer_${u}`),s,o);throw new Error(_X(a))})}parseData(){this.component.data=cM(this);for(const t of this.children)t.parseData()}parseLayoutSize(){l7t(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ft(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Id(t))&&SX(CX)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){E7t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),YNe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),vQ(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of to(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ILt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),f3e(this))}}function NQ(e,t,n,r,i){if(BF(e))return new pT(e,t,n,i);if(WF(e))return new RQ(e,t,n,r,i);if(im(e))return new P3e(e,t,n,r,i);if(l8t(e))return new g7t(e,t,n,i);throw new Error(_X(e))}function Z7t(e,t={}){t.logger&&d$t(t.logger),t.fieldTitle&&RRe(t.fieldTitle);try{const n=sNe(cIe(t.config,e.config)),r=mNe(e,n),i=NQ(r,null,"",void 0,n);return i.parse(),_Bt(i.component.data,i),{spec:tjt(i,ejt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&h$t(),t.fieldTitle&&I5t()}}function ejt(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Dn(t)&&(t={type:t}),i&&o&&gLt(t.type)){if(i==="step"&&o==="step")yt(efe()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";yt(efe(DF(s)));const a=s==="width"?"height":"width";t.type=yLt(a)}}return{...ft(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Dfe(n,!1),...Dfe(e,!0)}}function tjt(e,t,n={},r){const i=e.config?_8t(e.config):void 0,o=o7t(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(t[m.name]=+m.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...nNe(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const njt=fFt.version,rjt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ow,accessPathWithDatum:hX,accessWithDatumToUnescapedPath:Or,compile:Z7t,contains:Vn,deepEqual:pl,deleteNestedProperty:LP,duplicate:vn,entries:$0,every:cX,fieldIntersection:dX,flatAccessWithDatum:pIe,getFirstDefined:no,hasIntersection:fX,hasProperty:pt,hash:Yn,internalField:yIe,isBoolean:xC,isEmpty:zr,isEqual:AFt,isInternalField:vIe,isNullOrFalse:fz,isNumeric:EF,keys:ft,logicalExpr:dT,mergeDeep:dIe,never:fIe,normalize:mNe,normalizeAngle:wC,omit:Iu,pick:rw,prefixGenerator:dz,removePathFromField:gE,replaceAll:f1,replacePathInField:yc,resetIdCounter:kFt,setEqual:hIe,some:iw,stringify:Ur,titleCase:XS,unique:xd,uniqueId:gIe,vals:Bs,varName:yi,version:njt},Symbol.toStringTag,{value:"Module"}));function O3e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var ijt="2.15.0",ojt={version:ijt};const hb="#fff",ode="#888",sjt={background:"#333",view:{stroke:ode},title:{color:hb,subtitleColor:hb},style:{"guide-label":{fill:hb},"guide-title":{fill:hb}},axis:{domainColor:hb,gridColor:ode,tickColor:hb}},Vg="#4572a7",ajt={background:"#fff",arc:{fill:Vg},area:{fill:Vg},line:{stroke:Vg,strokeWidth:2},path:{stroke:Vg},rect:{fill:Vg},shape:{stroke:Vg},symbol:{fill:Vg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Hg="#30a2da",JL="#cbcbcb",ujt="#999",ljt="#333",sde="#f0f0f0",ade="#333",cjt={arc:{fill:Hg},area:{fill:Hg},axis:{domainColor:JL,grid:!0,gridColor:JL,gridWidth:1,labelColor:ujt,labelFontSize:10,titleColor:ljt,tickColor:JL,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:sde,group:{fill:sde},legend:{labelColor:ade,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:ade,titleFontSize:14,titlePadding:10},line:{stroke:Hg,strokeWidth:2},path:{stroke:Hg,strokeWidth:.5},rect:{fill:Hg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Hg},bar:{binSpacing:2,fill:Hg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},qg="#000",fjt={group:{fill:"#e5e5e5"},arc:{fill:qg},area:{fill:qg},line:{stroke:qg},path:{stroke:qg},rect:{fill:qg},shape:{stroke:qg},symbol:{fill:qg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},djt=22,hjt="normal",ude="Benton Gothic, sans-serif",lde=11.5,pjt="normal",Wg="#82c6df",ZL="Benton Gothic Bold, sans-serif",cde="normal",fde=13,$_={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},mjt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:ZL,fontSize:djt,fontWeight:hjt},arc:{fill:Wg},area:{fill:Wg},line:{stroke:Wg,strokeWidth:2},path:{stroke:Wg},rect:{fill:Wg},shape:{stroke:Wg},symbol:{fill:Wg,size:30},axis:{labelFont:ude,labelFontSize:lde,labelFontWeight:pjt,titleFont:ZL,titleFontSize:fde,titleFontWeight:cde},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:ude,labelFontSize:lde,symbolType:"square",titleFont:ZL,titleFontSize:fde,titleFontWeight:cde},range:{category:$_["category-6"],diverging:$_["fireandice-6"],heatmap:$_["fire-7"],ordinal:$_["fire-7"],ramp:$_["fire-7"]}},Gg="#ab5787",Fk="#979797",gjt={background:"#f9f9f9",arc:{fill:Gg},area:{fill:Gg},line:{stroke:Gg},path:{stroke:Gg},rect:{fill:Gg},shape:{stroke:Gg},symbol:{fill:Gg,size:30},axis:{domainColor:Fk,domainWidth:.5,gridWidth:.2,labelColor:Fk,tickColor:Fk,tickWidth:.2,titleColor:Fk},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Yg="#3e5c69",yjt={background:"#fff",arc:{fill:Yg},area:{fill:Yg},line:{stroke:Yg},path:{stroke:Yg},rect:{fill:Yg},shape:{stroke:Yg},symbol:{fill:Yg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Zl="#1696d2",dde="#000000",vjt="#FFFFFF",Mk="Lato",e9="Lato",bjt="Lato",xjt="#DEDDDD",wjt=18,L_={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Ejt={background:vjt,title:{anchor:"start",fontSize:wjt,font:Mk},axisX:{domain:!0,domainColor:dde,domainWidth:1,grid:!1,labelFontSize:12,labelFont:e9,labelAngle:0,tickColor:dde,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Mk},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:xjt,gridWidth:1,labelFontSize:12,labelFont:e9,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Mk,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:e9,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Mk,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:L_["six-groups-cat-1"],diverging:L_["diverging-colors"],heatmap:L_["diverging-colors"],ordinal:L_["six-groups-seq"],ramp:L_["shades-blue"]},area:{fill:Zl},rect:{fill:Zl},line:{color:Zl,stroke:Zl,strokeWidth:5},trail:{color:Zl,stroke:Zl,strokeWidth:0,size:1},path:{stroke:Zl,strokeWidth:.5},point:{filled:!0},text:{font:bjt,color:Zl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Zl,stroke:null}},arc:{fill:Zl},shape:{stroke:Zl},symbol:{fill:Zl,size:30}},Kg="#3366CC",hde="#ccc",$k="Arial, sans-serif",_jt={arc:{fill:Kg},area:{fill:Kg},path:{stroke:Kg},rect:{fill:Kg},shape:{stroke:Kg},symbol:{stroke:Kg},circle:{fill:Kg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:$k,fontSize:12},"guide-title":{font:$k,fontSize:12},"group-title":{font:$k,fontSize:12}},title:{font:$k,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:hde,tickColor:hde,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},PQ=e=>e*(1/3+1),pde=PQ(9),mde=PQ(10),gde=PQ(12),B_="Segoe UI",yde="wf_standard-font, helvetica, arial, sans-serif",vde="#252423",j_="#605E5C",bde="transparent",Tjt="#C8C6C4",Hc="#118DFF",Cjt="#12239E",Sjt="#E66C37",Ajt="#6B007B",Djt="#E044A7",kjt="#744EC2",Ijt="#D9B300",Rjt="#D64550",F3e=Hc,M3e="#DEEFFF",xde=[M3e,F3e],Njt=[M3e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",F3e],Pjt={view:{stroke:bde},background:bde,font:B_,header:{titleFont:yde,titleFontSize:gde,titleColor:vde,labelFont:B_,labelFontSize:mde,labelColor:j_},axis:{ticks:!1,grid:!1,domain:!1,labelColor:j_,labelFontSize:pde,titleFont:yde,titleColor:vde,titleFontSize:gde,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Tjt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hc},line:{stroke:Hc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:B_,fontSize:pde,fill:j_},arc:{fill:Hc},area:{fill:Hc,line:!0,opacity:.6},path:{stroke:Hc},rect:{fill:Hc},point:{fill:Hc,filled:!0,size:75},shape:{stroke:Hc},symbol:{fill:Hc,strokeWidth:1.5,size:50},legend:{titleFont:B_,titleFontWeight:"bold",titleColor:j_,labelFont:B_,labelFontSize:mde,labelColor:j_,symbolType:"circle",symbolSize:75},range:{category:[Hc,Cjt,Sjt,Ajt,Djt,kjt,Ijt,Rjt],diverging:xde,heatmap:xde,ordinal:Njt}},t9='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Ojt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',n9=400,Lk={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Fjt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Mjt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function fM({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=Lk.gridBg[e],i=Lk.textPrimary[e],o=Lk.textSecondary[e],s=n==="dark"?Fjt:Mjt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:t9,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:Ojt,labelFontWeight:n9,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Lk.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:t9,fill:o,fontWeight:n9},"guide-title":{font:t9,fill:o,fontWeight:n9}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const $jt=fM({theme:"white",background:"#ffffff"}),Ljt=fM({theme:"g10",background:"#f4f4f4"}),Bjt=fM({theme:"g90",background:"#262626"}),jjt=fM({theme:"g100",background:"#161616"}),zjt=ojt.version,Ujt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Ljt,carbong100:jjt,carbong90:Bjt,carbonwhite:$jt,dark:sjt,excel:ajt,fivethirtyeight:cjt,ggplot2:fjt,googlecharts:_jt,latimes:mjt,powerbi:Pjt,quartz:gjt,urbaninstitute:Ejt,version:zjt,vox:yjt},Symbol.toStringTag,{value:"Module"}));function TE(e,t,n){return e.fields=t||[],e.fname=n,e}function Vjt(e){return e.length===1?Hjt(e[0]):qjt(e)}const Hjt=e=>function(t){return t[e]},qjt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function r9(e){throw Error(e)}function Wjt(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||r9("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&r9("Access path missing closing bracket: "+e),r&&r9("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function Gjt(e,t,n){const r=Wjt(e);return e=r.length===1?r[0]:e,TE(Vjt(r),[e],e)}Gjt("id");TE(e=>e,[],"identity");TE(()=>0,[],"zero");TE(()=>1,[],"one");TE(()=>!0,[],"true");TE(()=>!1,[],"false");var Yjt=Array.isArray;function wde(e){return e===Object(e)}function Kjt(e){return typeof e=="string"}function Xjt(e,t,n,r){if(Yjt(e))return`[${e.map(i=>t(Kjt(i)?i:Ede(i,n))).join(", ")}]`;if(wde(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(wde(c)&&(c=Ede(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Qjt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Ede(e,t){return JSON.stringify(e,Qjt(t))}var Jjt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const $3e="vg-tooltip-element",Zjt={offsetX:10,offsetY:10,id:$3e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:ezt,maxDepth:2,formatTooltip:Xjt,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function ezt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function tzt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Jjt.toString().replace($3e,e)}function L3e(e,t,{offsetX:n,offsetY:r}){const i=B3e({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(j3e(i[s],t))return i[s];return i["top-left"]}function nzt(e,t,n,r,i){const{position:o,offsetX:s,offsetY:a}=i,u=e._el.getBoundingClientRect(),l=e._origin,c=rzt(u,l,n),f=B3e(c,r,s,a),d=Array.isArray(o)?o:[o];for(const h of d)if(j3e(f[h],r)&&!izt(t,f[h],r))return f[h];return L3e(t,r,i)}function rzt(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,o=e.top+t[1]+r.y1,s=n;for(;s.mark.group;)s=s.mark.group,i+=s.x??0,o+=s.y??0;const a=r.x2-r.x1,u=r.y2-r.y1;return{x1:i,x2:i+a,y1:o,y2:o+u}}function B3e(e,t,n,r){const i=(e.x1+e.x2)/2,o=(e.y1+e.y2)/2,s=e.x1-t.width-n,a=i-t.width/2,u=e.x2+n,l=e.y1-t.height-r,c=o-t.height/2,f=e.y2+r;return{top:{x:a,y:l},bottom:{x:a,y:f},left:{x:s,y:c},right:{x:u,y:c},"top-left":{x:s,y:l},"top-right":{x:u,y:l},"bottom-left":{x:s,y:f},"bottom-right":{x:u,y:f}}}function j3e(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function izt(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class ozt{constructor(t){this.options={...Zjt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=tzt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=this.options.anchor==="mark"?nzt(t,n,r,this.el.getBoundingClientRect(),this.options):L3e(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var i9={};function szt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o9,_de;function azt(){return _de||(_de=1,o9=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),o9}var uzt=yr;yr.Node=w1;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)czt(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)fzt(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=lzt(this,i,n[r]);return o};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function lzt(e,t,n){var r=t===e.head?new w1(n,null,t,e):new w1(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function czt(e,t){e.tail=new w1(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function fzt(e,t){e.head=new w1(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function w1(e,t,n,r){if(!(this instanceof w1))return new w1(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{azt()(yr)}catch{}const dzt=uzt,by=Symbol("max"),Uh=Symbol("length"),pb=Symbol("lengthCalculator"),mT=Symbol("allowStale"),ky=Symbol("maxAge"),Bh=Symbol("dispose"),Tde=Symbol("noDisposeOnSet"),Qo=Symbol("lruList"),qc=Symbol("cache"),z3e=Symbol("updateAgeOnGet"),s9=()=>1;class hzt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[by]=t.max||1/0;const n=t.length||s9;if(this[pb]=typeof n!="function"?s9:n,this[mT]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[ky]=t.maxAge||0,this[Bh]=t.dispose,this[Tde]=t.noDisposeOnSet||!1,this[z3e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[by]=t||1/0,z_(this)}get max(){return this[by]}set allowStale(t){this[mT]=!!t}get allowStale(){return this[mT]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[ky]=t,z_(this)}get maxAge(){return this[ky]}set lengthCalculator(t){typeof t!="function"&&(t=s9),t!==this[pb]&&(this[pb]=t,this[Uh]=0,this[Qo].forEach(n=>{n.length=this[pb](n.value,n.key),this[Uh]+=n.length})),z_(this)}get lengthCalculator(){return this[pb]}get length(){return this[Uh]}get itemCount(){return this[Qo].length}rforEach(t,n){n=n||this;for(let r=this[Qo].tail;r!==null;){const i=r.prev;Cde(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Qo].head;r!==null;){const i=r.next;Cde(this,t,r,n),r=i}}keys(){return this[Qo].toArray().map(t=>t.key)}values(){return this[Qo].toArray().map(t=>t.value)}reset(){this[Bh]&&this[Qo]&&this[Qo].length&&this[Qo].forEach(t=>this[Bh](t.key,t.value)),this[qc]=new Map,this[Qo]=new dzt,this[Uh]=0}dump(){return this[Qo].map(t=>JP(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Qo]}set(t,n,r){if(r=r||this[ky],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,o=this[pb](n,t);if(this[qc].has(t)){if(o>this[by])return fx(this,this[qc].get(t)),!1;const u=this[qc].get(t).value;return this[Bh]&&(this[Tde]||this[Bh](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Uh]+=o-u.length,u.length=o,this.get(t),z_(this),!0}const s=new pzt(t,n,o,i,r);return s.length>this[by]?(this[Bh]&&this[Bh](t,n),!1):(this[Uh]+=s.length,this[Qo].unshift(s),this[qc].set(t,this[Qo].head),z_(this),!0)}has(t){if(!this[qc].has(t))return!1;const n=this[qc].get(t).value;return!JP(this,n)}get(t){return a9(this,t,!0)}peek(t){return a9(this,t,!1)}pop(){const t=this[Qo].tail;return t?(fx(this,t),t.value):null}del(t){fx(this,this[qc].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[qc].forEach((t,n)=>a9(this,n,!1))}}const a9=(e,t,n)=>{const r=e[qc].get(t);if(r){const i=r.value;if(JP(e,i)){if(fx(e,r),!e[mT])return}else n&&(e[z3e]&&(r.value.now=Date.now()),e[Qo].unshiftNode(r));return i.value}},JP=(e,t)=>{if(!t||!t.maxAge&&!e[ky])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[ky]&&n>e[ky]},z_=e=>{if(e[Uh]>e[by])for(let t=e[Qo].tail;e[Uh]>e[by]&&t!==null;){const n=t.prev;fx(e,t),t=n}},fx=(e,t)=>{if(t){const n=t.value;e[Bh]&&e[Bh](n.key,n.value),e[Uh]-=n.length,e[qc].delete(n.key),e[Qo].removeNode(t)}};class pzt{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}const Cde=(e,t,n,r)=>{let i=n.value;JP(e,i)&&(fx(e,n),e[mT]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var mzt=hzt;const gzt=Object.freeze({loose:!0}),yzt=Object.freeze({}),vzt=e=>e?typeof e!="object"?gzt:e:yzt;var OQ=vzt,Bz={exports:{}};const U3e=256,bzt=Number.MAX_SAFE_INTEGER||9007199254740991,xzt=16,wzt=U3e-6;var FQ={MAX_LENGTH:U3e,MAX_SAFE_COMPONENT_LENGTH:xzt,MAX_SAFE_BUILD_LENGTH:wzt,MAX_SAFE_INTEGER:bzt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Ezt=typeof process=="object"&&i9&&i9.NODE_DEBUG&&/\bsemver\b/i.test(i9.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var dM=Ezt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=FQ,o=dM;t=e.exports={};const s=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=p=>{for(const[g,v]of d)p=p.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return p},m=(p,g,v)=>{const b=h(g),w=c++;o(p,w,g),l[p]=w,u[w]=g,s[w]=new RegExp(g,v?"g":void 0),a[w]=new RegExp(b,v?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),m("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${f}+`),m("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),m("FULL",`^${u[l.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),m("LOOSE",`^${u[l.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),m("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[l.COERCE],!0),m("COERCERTLFULL",u[l.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Bz,Bz.exports);var MQ=Bz.exports;const Sde=/^[0-9]+$/,_zt=(e,t)=>{const n=Sde.test(e),r=Sde.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var Tzt={compareIdentifiers:_zt};const Bk=dM,{MAX_LENGTH:Ade,MAX_SAFE_INTEGER:jk}=FQ,{safeRe:Dde,t:kde}=MQ,Czt=OQ,{compareIdentifiers:mb}=Tzt;let Szt=class nd{constructor(t,n){if(n=Czt(n),t instanceof nd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Ade)throw new TypeError(`version is longer than ${Ade} characters`);Bk("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Dde[kde.LOOSE]:Dde[kde.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>jk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>jk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>jk||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<jk)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Bk("SemVer.compare",this.version,this.options,t),!(t instanceof nd)){if(typeof t=="string"&&t===this.version)return 0;t=new nd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof nd||(t=new nd(t,this.options)),mb(this.major,t.major)||mb(this.minor,t.minor)||mb(this.patch,t.patch)}comparePre(t){if(t instanceof nd||(t=new nd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(Bk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return mb(r,i)}while(++n)}compareBuild(t){t instanceof nd||(t=new nd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(Bk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return mb(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),mb(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var $Q=Szt;const Ide=$Q,Azt=(e,t,n)=>new Ide(e,n).compare(new Ide(t,n));var CE=Azt;const Dzt=CE,kzt=(e,t,n)=>Dzt(e,t,n)===0;var Izt=kzt;const Rzt=CE,Nzt=(e,t,n)=>Rzt(e,t,n)!==0;var Pzt=Nzt;const Ozt=CE,Fzt=(e,t,n)=>Ozt(e,t,n)>0;var Mzt=Fzt;const $zt=CE,Lzt=(e,t,n)=>$zt(e,t,n)>=0;var Bzt=Lzt;const jzt=CE,zzt=(e,t,n)=>jzt(e,t,n)<0;var Uzt=zzt;const Vzt=CE,Hzt=(e,t,n)=>Vzt(e,t,n)<=0;var qzt=Hzt;const Wzt=Izt,Gzt=Pzt,Yzt=Mzt,Kzt=Bzt,Xzt=Uzt,Qzt=qzt,Jzt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Wzt(e,n,r);case"!=":return Gzt(e,n,r);case">":return Yzt(e,n,r);case">=":return Kzt(e,n,r);case"<":return Xzt(e,n,r);case"<=":return Qzt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Zzt=Jzt,u9,Rde;function eUt(){if(Rde)return u9;Rde=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}u9=t;const n=OQ,{safeRe:r,t:i}=MQ,o=Zzt,s=dM,a=$Q,u=V3e();return u9}var l9,Nde;function V3e(){if(Nde)return l9;Nde=1;class e{constructor(L,H){if(H=r(H),L instanceof e)return L.loose===!!H.loose&&L.includePrerelease===!!H.includePrerelease?L:new e(L.raw,H);if(L instanceof i)return this.raw=L.value,this.set=[[L]],this.format(),this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=L.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const V=this.set[0];if(this.set=this.set.filter(Q=>!m(Q[0])),this.set.length===0)this.set=[V];else if(this.set.length>1){for(const Q of this.set)if(Q.length===1&&p(Q[0])){this.set=[Q];break}}}this.format()}format(){return this.range=this.set.map(L=>L.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(L){const V=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+L,Q=n.get(V);if(Q)return Q;const K=this.options.loose,Z=K?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];L=L.replace(Z,O(this.options.includePrerelease)),o("hyphen replace",L),L=L.replace(a[u.COMPARATORTRIM],l),o("comparator trim",L),L=L.replace(a[u.TILDETRIM],c),o("tilde trim",L),L=L.replace(a[u.CARETTRIM],f),o("caret trim",L);let U=L.split(" ").map(G=>v(G,this.options)).join(" ").split(/\s+/).map(G=>R(G,this.options));K&&(U=U.filter(G=>(o("loose invalid filter",G,this.options),!!G.match(a[u.COMPARATORLOOSE])))),o("range list",U);const B=new Map,q=U.map(G=>new i(G,this.options));for(const G of q){if(m(G))return[G];B.set(G.value,G)}B.size>1&&B.has("")&&B.delete("");const z=[...B.values()];return n.set(V,z),z}intersects(L,H){if(!(L instanceof e))throw new TypeError("a Range is required");return this.set.some(V=>g(V,H)&&L.set.some(Q=>g(Q,H)&&V.every(K=>Q.every(Z=>K.intersects(Z,H)))))}test(L){if(!L)return!1;if(typeof L=="string")try{L=new s(L,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(M(this.set[H],L,this.options))return!0;return!1}}l9=e;const t=mzt,n=new t({max:1e3}),r=OQ,i=eUt(),o=dM,s=$Q,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=MQ,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=FQ,m=F=>F.value==="<0.0.0-0",p=F=>F.value==="",g=(F,L)=>{let H=!0;const V=F.slice();let Q=V.pop();for(;H&&V.length;)H=V.every(K=>Q.intersects(K,L)),Q=V.pop();return H},v=(F,L)=>(o("comp",F,L),F=_(F,L),o("caret",F),F=w(F,L),o("tildes",F),F=S(F,L),o("xrange",F),F=k(F,L),o("stars",F),F),b=F=>!F||F.toLowerCase()==="x"||F==="*",w=(F,L)=>F.trim().split(/\s+/).map(H=>E(H,L)).join(" "),E=(F,L)=>{const H=L.loose?a[u.TILDELOOSE]:a[u.TILDE];return F.replace(H,(V,Q,K,Z,U)=>{o("tilde",F,V,Q,K,Z,U);let B;return b(Q)?B="":b(K)?B=`>=${Q}.0.0 <${+Q+1}.0.0-0`:b(Z)?B=`>=${Q}.${K}.0 <${Q}.${+K+1}.0-0`:U?(o("replaceTilde pr",U),B=`>=${Q}.${K}.${Z}-${U} <${Q}.${+K+1}.0-0`):B=`>=${Q}.${K}.${Z} <${Q}.${+K+1}.0-0`,o("tilde return",B),B})},_=(F,L)=>F.trim().split(/\s+/).map(H=>T(H,L)).join(" "),T=(F,L)=>{o("caret",F,L);const H=L.loose?a[u.CARETLOOSE]:a[u.CARET],V=L.includePrerelease?"-0":"";return F.replace(H,(Q,K,Z,U,B)=>{o("caret",F,Q,K,Z,U,B);let q;return b(K)?q="":b(Z)?q=`>=${K}.0.0${V} <${+K+1}.0.0-0`:b(U)?K==="0"?q=`>=${K}.${Z}.0${V} <${K}.${+Z+1}.0-0`:q=`>=${K}.${Z}.0${V} <${+K+1}.0.0-0`:B?(o("replaceCaret pr",B),K==="0"?Z==="0"?q=`>=${K}.${Z}.${U}-${B} <${K}.${Z}.${+U+1}-0`:q=`>=${K}.${Z}.${U}-${B} <${K}.${+Z+1}.0-0`:q=`>=${K}.${Z}.${U}-${B} <${+K+1}.0.0-0`):(o("no pr"),K==="0"?Z==="0"?q=`>=${K}.${Z}.${U}${V} <${K}.${Z}.${+U+1}-0`:q=`>=${K}.${Z}.${U}${V} <${K}.${+Z+1}.0-0`:q=`>=${K}.${Z}.${U} <${+K+1}.0.0-0`),o("caret return",q),q})},S=(F,L)=>(o("replaceXRanges",F,L),F.split(/\s+/).map(H=>D(H,L)).join(" ")),D=(F,L)=>{F=F.trim();const H=L.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return F.replace(H,(V,Q,K,Z,U,B)=>{o("xRange",F,V,Q,K,Z,U,B);const q=b(K),z=q||b(Z),G=z||b(U),X=G;return Q==="="&&X&&(Q=""),B=L.includePrerelease?"-0":"",q?Q===">"||Q==="<"?V="<0.0.0-0":V="*":Q&&X?(z&&(Z=0),U=0,Q===">"?(Q=">=",z?(K=+K+1,Z=0,U=0):(Z=+Z+1,U=0)):Q==="<="&&(Q="<",z?K=+K+1:Z=+Z+1),Q==="<"&&(B="-0"),V=`${Q+K}.${Z}.${U}${B}`):z?V=`>=${K}.0.0${B} <${+K+1}.0.0-0`:G&&(V=`>=${K}.${Z}.0${B} <${K}.${+Z+1}.0-0`),o("xRange return",V),V})},k=(F,L)=>(o("replaceStars",F,L),F.trim().replace(a[u.STAR],"")),R=(F,L)=>(o("replaceGTE0",F,L),F.trim().replace(a[L.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=F=>(L,H,V,Q,K,Z,U,B,q,z,G,X,ne)=>(b(V)?H="":b(Q)?H=`>=${V}.0.0${F?"-0":""}`:b(K)?H=`>=${V}.${Q}.0${F?"-0":""}`:Z?H=`>=${H}`:H=`>=${H}${F?"-0":""}`,b(q)?B="":b(z)?B=`<${+q+1}.0.0-0`:b(G)?B=`<${q}.${+z+1}.0-0`:X?B=`<=${q}.${z}.${G}-${X}`:F?B=`<${q}.${z}.${+G+1}-0`:B=`<=${B}`,`${H} ${B}`.trim()),M=(F,L,H)=>{for(let V=0;V<F.length;V++)if(!F[V].test(L))return!1;if(L.prerelease.length&&!H.includePrerelease){for(let V=0;V<F.length;V++)if(o(F[V].semver),F[V].semver!==i.ANY&&F[V].semver.prerelease.length>0){const Q=F[V].semver;if(Q.major===L.major&&Q.minor===L.minor&&Q.patch===L.patch)return!0}return!1}return!0};return l9}const tUt=V3e(),nUt=(e,t,n)=>{try{t=new tUt(t,n)}catch{return!1}return t.test(e)};var rUt=nUt,H3e=szt(rUt);function iUt(e,t,n){const r=e.open(t),i=250,{origin:o}=new URL(t);let s=40;function a(l){l.source===r&&(s=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){s<=0||(r.postMessage(n,o),setTimeout(u,i),s-=1)}setTimeout(u,i)}var oUt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function q3e(e,...t){for(const n of t)sUt(e,n);return e}function sUt(e,t){for(const n of Object.keys(t))x6(e,n,t[n],!0)}const Wc=Z6t;let SC=rjt;const zk=typeof window<"u"?window:void 0;var Lpe;SC===void 0&&((Lpe=zk==null?void 0:zk.vl)!=null&&Lpe.compile)&&(SC=zk.vl);const aUt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},uUt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},N2={vega:"Vega","vega-lite":"Vega-Lite"},ZP={vega:Wc.version,"vega-lite":SC?SC.version:"not available"},lUt={vega:e=>e,"vega-lite":(e,t)=>SC.compile(e,{config:t}).spec},cUt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,fUt="chart-wrapper";function dUt(e){return typeof e=="function"}function Pde(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${N2[r]} JSON Source`}function hUt(e,t){if(e.$schema){const n=O3e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${N2[n.library]}, but mode argument sets ${N2[t]??t}.`);const r=n.library;return H3e(ZP[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${N2[r]} ${n.version}, but the current version of ${N2[r]} is v${ZP[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function W3e(e){return!!(e&&"load"in e)}function Ode(e){return W3e(e)?e:Wc.loader(e)}function pUt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mp(t.defaultStyle)&&(t.defaultStyle=!1),t}async function mUt(e,t,n={}){let r,i;mp(t)?(i=Ode(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=pUt(r),s=o.loader;(!i||s)&&(i=Ode(n.loader??s));const a=await Fde(o,i),u=await Fde(n,i),l={...q3e(u,a),config:uG(u.config??{},a.config??{})};return await yUt(e,r,l,i)}async function Fde(e,t){const n=mp(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mp(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function gUt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function yUt(e,t,n={},r){const i=n.theme?uG(Ujt[n.theme],n.config??{}):n.config,o=FTe(n.actions)?n.actions:q3e({},aUt,n.actions??{}),s={...uUt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Wc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:T,rootContainer:S}=gUt(c);if(!T.getElementById(_)){const D=document.createElement("style");D.id=_,D.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?oUt.toString():n.defaultStyle,S.appendChild(D)}}const f=hUt(t,n.mode);let d=lUt[f](t,i);if(f==="vega-lite"&&d.$schema){const _=O3e(d.$schema);H3e(ZP.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${ZP.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const _=document.createElement("div");_.classList.add(fUt),c.appendChild(_),h=_}const m=n.patch;if(m&&(d=m instanceof Function?m(d):v6(d,m,!0,!1).newDocument),n.formatLocale&&Wc.formatLocale(n.formatLocale),n.timeFormatLocale&&Wc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const T=n.expressionFunctions[_];"fn"in T?Wc.expressionFunction(_,T.fn,T.visitor):T instanceof Function&&Wc.expressionFunction(_,T)}const{ast:p}=n,g=Wc.parse(d,f==="vega-lite"?{}:i,{ast:p}),v=new(n.viewClass||Wc.View)(g,{loader:r,logLevel:u,renderer:a,...p?{expr:Wc.expressionInterpreter??n.expr??lFt}:{}});if(v.addSignalListener("autosize",(_,T)=>{const{type:S}=T;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:T}=n,S=_&&!W3e(_)?_==null?void 0:_.baseURL:void 0,D=dUt(T)?T:new ozt({baseURL:S,...T===!0?{}:T}).call;v.tooltip(D)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:_,updateSet:T}=typeof b=="boolean"?{}:b;v.hover(_,T)}n&&(n.width!=null&&v.width(n.width),n.height!=null&&v.height(n.height),n.padding!=null&&v.padding(n.padding)),await v.initialize(h,n.bind).runAsync();let w;if(o!==!1){let _=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=s.CLICK_TO_VIEW_ACTIONS,c.append(S),_=S;const D=document.createElement("summary");D.innerHTML=cUt,S.append(D),w=k=>{S.contains(k.target)||S.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if(_.append(T),T.classList.add("vega-actions"),o===!0||o.export!==!1){for(const S of["svg","png"])if(o===!0||o.export===!0||o.export[S]){const D=s[`${S.toUpperCase()}_ACTION`],k=document.createElement("a"),R=n1(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;k.text=D,k.href="#",k.target="_blank",k.download=`${l}.${S}`,k.addEventListener("mousedown",async function(O){O.preventDefault();const M=await v.toImageURL(S,R);this.href=M}),T.append(k)}}if(o===!0||o.source!==!1){const S=document.createElement("a");S.text=s.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(D){Pde(iL(t),n.sourceHeader??"",n.sourceFooter??"",f),D.preventDefault()}),T.append(S)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const S=document.createElement("a");S.text=s.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(D){Pde(iL(d),n.sourceHeader??"",n.sourceFooter??"","vega"),D.preventDefault()}),T.append(S)}if(o===!0||o.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",D=document.createElement("a");D.text=s.EDITOR_ACTION,D.href="#",D.addEventListener("click",function(k){iUt(window,S,{config:i,mode:f,renderer:a,spec:iL(t)}),k.preventDefault()}),T.append(D)}}function E(){w&&document.removeEventListener("click",w),v.finalize()}return{view:v,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function vUt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function bUt(e,t,n){n&&(vUt(n)?n(e.data(t)):e.change(t,Wc.changeset().remove(()=>!0).insert(n)))}function xUt(e,t){Object.keys(t).forEach(n=>{bUt(e,n,t[n])})}function G3e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Y3e=()=>{};function c9(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function wUt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=G3e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!g2(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Mde(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function f9(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function P2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class K3e extends ur.PureComponent{constructor(){super(...arguments),P2(this,"containerRef",ur.createRef()),P2(this,"resultPromise",void 0),P2(this,"handleError",t=>{const{onError:n=Y3e}=this.props;n(t,this.containerRef.current),console.warn(t)}),P2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=G3e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=wUt(f9(this.props),f9(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!oj(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&Mde(a,o),i&&c9(a,i)),a.run()})}else oj(i,o)||this.modifyView(s=>{o&&Mde(s,o),i&&c9(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=f9(this.props);this.resultPromise=mUt(this.containerRef.current,a,s).then(u=>{if(u){const{view:l}=u;c9(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ur.createElement("div",{ref:this.containerRef,className:t,style:n})}}P2(K3e,"propTypes",{className:Pte.string,onError:Pte.func});function jz(){return jz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jz.apply(this,arguments)}function zz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const EUt={};class LQ extends ur.PureComponent{constructor(){super(...arguments),zz(this,"vegaEmbed",ur.createRef()),zz(this,"handleNewView",t=>{this.update();const{onNewView:n=Y3e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){oj(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{xUt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ur.createElement(K3e,jz({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}zz(LQ,"defaultProps",{data:EUt});function Uz(){return Uz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uz.apply(this,arguments)}function $de(e){return ur.createElement(LQ,Uz({},e,{mode:"vega-lite"}))}function ef(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function U0(e){return!!e&&!!e[gi]}function zp(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===RUt}(e)||Array.isArray(e)||!!e[Hde]||!!(!((t=e.constructor)===null||t===void 0)&&t[Hde])||BQ(e)||jQ(e))}function E1(e,t,n){n===void 0&&(n=!1),SE(e)===0?(n?Object.keys:hx)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function SE(e){var t=e[gi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:BQ(e)?2:jQ(e)?3:0}function dx(e,t){return SE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _Ut(e,t){return SE(e)===2?e.get(t):e[t]}function X3e(e,t,n){var r=SE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Q3e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function BQ(e){return kUt&&e instanceof Map}function jQ(e){return IUt&&e instanceof Set}function uy(e){return e.o||e.t}function zQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Z3e(e);delete t[gi];for(var n=hx(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function UQ(e,t){return t===void 0&&(t=!1),VQ(e)||U0(e)||!zp(e)||(SE(e)>1&&(e.set=e.add=e.clear=e.delete=TUt),Object.freeze(e),t&&E1(e,function(n,r){return UQ(r,!0)},!0)),e}function TUt(){ef(2)}function VQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Nd(e){var t=Wz[e];return t||ef(18,e),t}function CUt(e,t){Wz[e]||(Wz[e]=t)}function Vz(){return AC}function d9(e,t){t&&(Nd("Patches"),e.u=[],e.s=[],e.v=t)}function e4(e){Hz(e),e.p.forEach(SUt),e.p=null}function Hz(e){e===AC&&(AC=e.l)}function Lde(e){return AC={p:[],l:AC,h:e,m:!0,_:0}}function SUt(e){var t=e[gi];t.i===0||t.i===1?t.j():t.g=!0}function h9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Nd("ES5").S(t,e,r),r?(n[gi].P&&(e4(t),ef(4)),zp(e)&&(e=t4(t,e),t.l||n4(t,e)),t.u&&Nd("Patches").M(n[gi].t,e,t.u,t.s)):e=t4(t,n,[]),e4(t),t.u&&t.v(t.u,t.s),e!==J3e?e:void 0}function t4(e,t,n){if(VQ(t))return t;var r=t[gi];if(!r)return E1(t,function(a,u){return Bde(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return n4(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=zQ(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),E1(o,function(a,u){return Bde(e,r,i,a,u,n,s)}),n4(e,i,!1),n&&e.u&&Nd("Patches").N(r,n,e.u,e.s)}return r.o}function Bde(e,t,n,r,i,o,s){if(U0(i)){var a=t4(e,i,o&&t&&t.i!==3&&!dx(t.R,r)?o.concat(r):void 0);if(X3e(n,r,a),!U0(a))return;e.m=!1}else s&&n.add(i);if(zp(i)&&!VQ(i)){if(!e.h.D&&e._<1)return;t4(e,i),t&&t.A.l||n4(e,i)}}function n4(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&UQ(t,n)}function p9(e,t){var n=e[gi];return(n?uy(n):e)[t]}function jde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function qm(e){e.P||(e.P=!0,e.l&&qm(e.l))}function m9(e){e.o||(e.o=zQ(e.t))}function qz(e,t,n){var r=BQ(t)?Nd("MapSet").F(t,n):jQ(t)?Nd("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:Vz(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},u=a,l=DC;s&&(u=[a],l=O2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Nd("ES5").J(t,n);return(n?n.A:Vz()).p.push(r),r}function AUt(e){return U0(e)||ef(22,e),function t(n){if(!zp(n))return n;var r,i=n[gi],o=SE(n);if(i){if(!i.P&&(i.i<4||!Nd("ES5").K(i)))return i.t;i.I=!0,r=zde(n,o),i.I=!1}else r=zde(n,o);return E1(r,function(s,a){i&&_Ut(i.t,s)===a||X3e(r,s,t(a))}),o===3?new Set(r):r}(e)}function zde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return zQ(e)}function DUt(){function e(o,s){var a=i[o];return a?a.enumerable=s:i[o]=a={configurable:!0,enumerable:s,get:function(){var u=this[gi];return DC.get(u,o)},set:function(u){var l=this[gi];DC.set(l,o,u)}},a}function t(o){for(var s=o.length-1;s>=0;s--){var a=o[s][gi];if(!a.P)switch(a.i){case 5:r(a)&&qm(a);break;case 4:n(a)&&qm(a)}}}function n(o){for(var s=o.t,a=o.k,u=hx(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==gi){var f=s[c];if(f===void 0&&!dx(s,c))return!0;var d=a[c],h=d&&d[gi];if(h?h.t!==f:!Q3e(d,f))return!0}}var m=!!s[gi];return u.length!==hx(s).length+(m?0:1)}function r(o){var s=o.k;if(s.length!==o.t.length)return!0;var a=Object.getOwnPropertyDescriptor(s,s.length-1);if(a&&!a.get)return!0;for(var u=0;u<s.length;u++)if(!s.hasOwnProperty(u))return!0;return!1}var i={};CUt("ES5",{J:function(o,s){var a=Array.isArray(o),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var m=Z3e(f);delete m[gi];for(var p=hx(m),g=0;g<p.length;g++){var v=p[g];m[v]=e(v,c||!!m[v].enumerable)}return Object.create(Object.getPrototypeOf(f),m)}(a,o),l={i:a?5:4,A:s?s.A:Vz(),P:!1,I:!1,R:{},l:s,t:o,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,gi,{value:l,writable:!0}),u},S:function(o,s,a){a?U0(s)&&s[gi].A===o&&t(o.p):(o.u&&function u(l){if(l&&typeof l=="object"){var c=l[gi];if(c){var f=c.t,d=c.k,h=c.R,m=c.i;if(m===4)E1(d,function(w){w!==gi&&(f[w]!==void 0||dx(f,w)?h[w]||u(d[w]):(h[w]=!0,qm(c)))}),E1(f,function(w){d[w]!==void 0||dx(d,w)||(h[w]=!1,qm(c))});else if(m===5){if(r(c)&&(qm(c),h.length=!0),d.length<f.length)for(var p=d.length;p<f.length;p++)h[p]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var v=Math.min(d.length,f.length),b=0;b<v;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}var Ude,AC,HQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",kUt=typeof Map<"u",IUt=typeof Set<"u",Vde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",J3e=HQ?Symbol.for("immer-nothing"):((Ude={})["immer-nothing"]=!0,Ude),Hde=HQ?Symbol.for("immer-draftable"):"__$immer_draftable",gi=HQ?Symbol.for("immer-state"):"__$immer_state",RUt=""+Object.prototype.constructor,hx=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Z3e=Object.getOwnPropertyDescriptors||function(e){var t={};return hx(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Wz={},DC={get:function(e,t){if(t===gi)return e;var n=uy(e);if(!dx(n,t))return function(i,o,s){var a,u=jde(o,s);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!zp(r)?r:r===p9(e.t,t)?(m9(e),e.o[t]=qz(e.A.h,r,e)):r},has:function(e,t){return t in uy(e)},ownKeys:function(e){return Reflect.ownKeys(uy(e))},set:function(e,t,n){var r=jde(uy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=p9(uy(e),t),o=i==null?void 0:i[gi];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Q3e(n,i)&&(n!==void 0||dx(e.t,t)))return!0;m9(e),qm(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return p9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,m9(e),qm(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=uy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ef(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ef(12)}},O2={};E1(DC,function(e,t){O2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),O2.deleteProperty=function(e,t){return O2.set.call(this,e,t,void 0)},O2.set=function(e,t,n){return DC.set.call(this,e[0],t,n,e[0])};var NUt=function(){function e(n){var r=this;this.O=Vde,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var u=r;return function(p){var g=this;p===void 0&&(p=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(p,function(E){var _;return(_=o).call.apply(_,[g,E].concat(b))})}}var l;if(typeof o!="function"&&ef(6),s!==void 0&&typeof s!="function"&&ef(7),zp(i)){var c=Lde(r),f=qz(r,i,void 0),d=!0;try{l=o(f),d=!1}finally{d?e4(c):Hz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(p){return d9(c,s),h9(p,c)},function(p){throw e4(c),p}):(d9(c,s),h9(l,c))}if(!i||typeof i!="object"){if((l=o(i))===void 0&&(l=i),l===J3e&&(l=void 0),r.D&&UQ(l,!0),s){var h=[],m=[];Nd("Patches").M(i,l,h,m),s(h,m)}return l}ef(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var s,a,u=r.produce(i,o,function(l,c){s=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,s,a]}):[u,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){zp(n)||ef(8),U0(n)&&(n=AUt(n));var r=Lde(this),i=qz(this,n,void 0);return i[gi].C=!0,Hz(r),i},t.finishDraft=function(n,r){var i=n&&n[gi],o=i.A;return d9(o,r),h9(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Vde&&ef(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=Nd("Patches").$;return U0(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Nl=new NUt,ePe=Nl.produce;Nl.produceWithPatches.bind(Nl);Nl.setAutoFreeze.bind(Nl);Nl.setUseProxies.bind(Nl);Nl.applyPatches.bind(Nl);Nl.createDraft.bind(Nl);Nl.finishDraft.bind(Nl);function kC(e){"@babel/helpers - typeof";return kC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kC(e)}function PUt(e,t){if(kC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OUt(e){var t=PUt(e,"string");return kC(t)=="symbol"?t:t+""}function FUt(e,t,n){return(t=OUt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wde(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qde(Object(n),!0).forEach(function(r){FUt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qde(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ta(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Gde=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),g9=function(){return Math.random().toString(36).substring(7).split("").join(".")},r4={INIT:"@@redux/INIT"+g9(),REPLACE:"@@redux/REPLACE"+g9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+g9()}};function MUt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function tPe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ta(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ta(1));return n(tPe)(e,t)}if(typeof e!="function")throw new Error(ta(2));var i=e,o=t,s=[],a=s,u=!1;function l(){a===s&&(a=s.slice())}function c(){if(u)throw new Error(ta(3));return o}function f(p){if(typeof p!="function")throw new Error(ta(4));if(u)throw new Error(ta(5));var g=!0;return l(),a.push(p),function(){if(g){if(u)throw new Error(ta(6));g=!1,l();var b=a.indexOf(p);a.splice(b,1),s=null}}}function d(p){if(!MUt(p))throw new Error(ta(7));if(typeof p.type>"u")throw new Error(ta(8));if(u)throw new Error(ta(9));try{u=!0,o=i(o,p)}finally{u=!1}for(var g=s=a,v=0;v<g.length;v++){var b=g[v];b()}return p}function h(p){if(typeof p!="function")throw new Error(ta(10));i=p,d({type:r4.REPLACE})}function m(){var p,g=f;return p={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(ta(11));function w(){b.next&&b.next(c())}w();var E=g(w);return{unsubscribe:E}}},p[Gde]=function(){return this},p}return d({type:r4.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Gde]=m,r}function $Ut(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:r4.INIT});if(typeof r>"u")throw new Error(ta(12));if(typeof n(void 0,{type:r4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ta(13))})}function LUt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var o=Object.keys(n),s;try{$Ut(n)}catch(a){s=a}return function(u,l){if(u===void 0&&(u={}),s)throw s;for(var c=!1,f={},d=0;d<o.length;d++){var h=o[d],m=n[h],p=u[h],g=m(p,l);if(typeof g>"u")throw l&&l.type,new Error(ta(14));f[h]=g,c=c||g!==p}return c=c||o.length!==Object.keys(u).length,c?f:u}}function i4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function BUt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(ta(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=t.map(function(u){return u(s)});return o=i4.apply(void 0,a)(i.dispatch),Wde(Wde({},i),{},{dispatch:o})}}}function nPe(e){var t=function(r){var i=r.dispatch,o=r.getState;return function(s){return function(a){return typeof a=="function"?a(i,o,e):s(a)}}};return t}var Gz=nPe();Gz.withExtraArgument=nPe;var rPe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fA=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},_1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},jUt=Object.defineProperty,zUt=Object.defineProperties,UUt=Object.getOwnPropertyDescriptors,Yde=Object.getOwnPropertySymbols,VUt=Object.prototype.hasOwnProperty,HUt=Object.prototype.propertyIsEnumerable,Kde=function(e,t,n){return t in e?jUt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p0=function(e,t){for(var n in t||(t={}))VUt.call(t,n)&&Kde(e,n,t[n]);if(Yde)for(var r=0,i=Yde(t);r<i.length;r++){var n=i[r];HUt.call(t,n)&&Kde(e,n,t[n])}return e},y9=function(e,t){return zUt(e,UUt(t))},dA=function(e,t,n){return new Promise(function(r,i){var o=function(u){try{a(n.next(u))}catch(l){i(l)}},s=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(o,s)};a((n=n.apply(e,t)).next())})},qUt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?i4:i4.apply(null,arguments)};function iPe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var WUt=function(e){return e&&typeof e.match=="function"};function Pd(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return p0(p0({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function GUt(e){return iPe(e)&&"type"in e}var YUt=function(e){rPe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,_1([void 0],n[0].concat(this)))):new(t.bind.apply(t,_1([void 0],n.concat(this))))},t}(Array),KUt=function(e){rPe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,_1([void 0],n[0].concat(this)))):new(t.bind.apply(t,_1([void 0],n.concat(this))))},t}(Array);function Yz(e){return zp(e)?ePe(e,function(){}):e}function XUt(e){return typeof e=="boolean"}function QUt(){return function(t){return JUt(t)}}function JUt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new YUt;return n&&(XUt(n)?r.push(Gz):r.push(Gz.withExtraArgument(n.extraArgument))),r}function ZUt(e){var t=QUt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,s=o===void 0?t():o,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(iPe(i))h=LUt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=s;typeof m=="function"&&(m=m(t));var p=BUt.apply(void 0,m),g=i4;u&&(g=qUt(p0({trace:!1},typeof u=="object"&&u)));var v=new KUt(p),b=v;Array.isArray(d)?b=_1([p],d):typeof d=="function"&&(b=d(v));var w=g.apply(void 0,b);return tPe(h,c,w)}function oPe(e){var t={},n=[],r,i={addCase:function(o,s){var a=typeof o=="string"?o:o.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=s,i},addMatcher:function(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase:function(o){return r=o,i}};return e(i),[t,n,r]}function eVt(e){return typeof e=="function"}function tVt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?oPe(t):[t,n,r],o=i[0],s=i[1],a=i[2],u;if(eVt(e))u=function(){return Yz(e())};else{var l=Yz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=_1([o[d.type]],s.filter(function(m){var p=m.matcher;return p(d)}).map(function(m){var p=m.reducer;return p}));return h.filter(function(m){return!!m}).length===0&&(h=[a]),h.reduce(function(m,p){if(p)if(U0(m)){var g=m,v=p(g,d);return v===void 0?m:v}else{if(zp(m))return ePe(m,function(b){return p(b,d)});var v=p(m,d);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return m},f)}return c.getInitialState=u,c}function nVt(e,t){return e+"/"+t}function rVt(e){var t=e.name,n=typeof e.initialState=="function"?e.initialState:Yz(e.initialState),r=e.reducers||{},i=Object.keys(r),o={},s={},a={};i.forEach(function(c){var f=r[c],d=nVt(t,c),h,m;"reducer"in f?(h=f.reducer,m=f.prepare):h=f,o[c]=h,s[d]=h,a[c]=m?Pd(d,m):Pd(d)});function u(){var c=typeof e.extraReducers=="function"?oPe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],m=h===void 0?[]:h,p=c[2],g=p===void 0?void 0:p,v=p0(p0({},d),s);return tVt(n,function(b){for(var w in v)b.addCase(w,v[w]);for(var E=0,_=m;E<_.length;E++){var T=_[E];b.addMatcher(T.matcher,T.reducer)}g&&b.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:o,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var iVt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",sPe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=iVt[Math.random()*64|0];return t},oVt=["name","message","stack","code"],v9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Xde=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),sVt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=oVt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Pd(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:y9(p0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),o=Pd(t+"/pending",function(l,c,f){return{payload:void 0,meta:y9(p0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),s=Pd(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||sVt)(l||"Rejected"),meta:y9(p0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):sPe(),m=new a,p;function g(b){p=b,m.abort()}var v=function(){return dA(this,null,function(){var b,w,E,_,T,S,D;return fA(this,function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),_=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),uVt(_)?[4,_]:[3,2];case 1:_=k.sent(),k.label=2;case 2:if(_===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(R,O){return m.signal.addEventListener("abort",function(){return O({name:"AbortError",message:p||"Aborted"})})}),c(o(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:m.signal,abort:g,rejectWithValue:function(R,O){return new v9(R,O)},fulfillWithValue:function(R,O){return new Xde(R,O)}})).then(function(R){if(R instanceof v9)throw R;return R instanceof Xde?i(R.payload,h,l,R.meta):i(R,h,l)})])];case 3:return E=k.sent(),[3,5];case 4:return S=k.sent(),E=S instanceof v9?s(null,h,l,S.payload,S.meta):s(S,h,l),[3,5];case 5:return D=r&&!r.dispatchConditionRejection&&s.match(E)&&E.meta.condition,D||c(E),[2,E]}})})}();return Object.assign(v,{abort:g,requestId:h,arg:l,unwrap:function(){return v.then(aVt)}})}}return Object.assign(u,{pending:o,rejected:s,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function aVt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function uVt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var lVt=function(e,t){return WUt(e)?e.match(t):e(t)};function Qde(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return lVt(r,n)})}}var qQ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Kz=function(){},aPe=function(e,t){return t===void 0&&(t=Kz),e.catch(t),e},uPe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},px=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},cVt="task",lPe="listener",cPe="completed",WQ="cancelled",fVt="task-"+WQ,dVt="task-"+cPe,fPe=lPe+"-"+WQ,hVt=lPe+"-"+cPe,hM=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=cVt+" "+WQ+" (reason: "+t+")"}return e}(),mx=function(e){if(e.aborted)throw new hM(e.reason)};function dPe(e,t){var n=Kz;return new Promise(function(r,i){var o=function(){return i(new hM(e.reason))};if(e.aborted){o();return}n=uPe(e,o),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Kz})}var pVt=function(e,t){return dA(void 0,null,function(){var n,r;return fA(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof hM?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},o4=function(e){return function(t){return aPe(dPe(e,t).then(function(n){return mx(e),n}))}},hPe=function(e){var t=o4(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},mVt=Object.assign,Jde={},hA="listenerMiddleware",gVt=function(e,t){var n=function(r){return uPe(e,function(){return px(r,e.reason)})};return function(r,i){qQ(r,"taskExecutor");var o=new AbortController;n(o);var s=pVt(function(){return dA(void 0,null,function(){var a;return fA(this,function(u){switch(u.label){case 0:return mx(e),mx(o.signal),[4,r({pause:o4(o.signal),delay:hPe(o.signal),signal:o.signal})];case 1:return a=u.sent(),mx(o.signal),[2,a]}})})},function(){return px(o,dVt)});return i!=null&&i.autoJoin&&t.push(s),{result:o4(e)(s),cancel:function(){px(o,fVt)}}}},yVt=function(e,t){var n=function(r,i){return dA(void 0,null,function(){var o,s,a,u;return fA(this,function(l){switch(l.label){case 0:mx(t),o=function(){},s=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,m){m.unsubscribe(),c([h,m.getState(),m.getOriginalState()])}});o=function(){d(),f()}}),a=[s],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,dPe(t,Promise.race(a))];case 2:return u=l.sent(),mx(t),[2,u];case 3:return o(),[7];case 4:return[2]}})})};return function(r,i){return aPe(n(r,i))}},pPe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,o=e.effect;if(t)i=Pd(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return qQ(o,"options.listener"),{predicate:i,type:t,effect:o}},vVt=function(e){var t=pPe(e),n=t.type,r=t.predicate,i=t.effect,o=sPe(),s={id:o,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return s},Xz=function(e){e.pending.forEach(function(t){px(t,fPe)})},bVt=function(e){return function(){e.forEach(Xz),e.clear()}},Zde=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},xVt=Pd(hA+"/add"),wVt=Pd(hA+"/removeAll"),EVt=Pd(hA+"/remove"),_Vt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,_1([hA+"/error"],e))};function TVt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,o=i===void 0?_Vt:i;qQ(o,"onError");var s=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(m){h.unsubscribe(),m!=null&&m.cancelActive&&Xz(h)}},a=function(h){for(var m=0,p=Array.from(n.values());m<p.length;m++){var g=p[m];if(h(g))return g}},u=function(h){var m=a(function(p){return p.effect===h.effect});return m||(m=vVt(h)),s(m)},l=function(h){var m=pPe(h),p=m.type,g=m.effect,v=m.predicate,b=a(function(w){var E=typeof p=="string"?w.type===p:w.predicate===v;return E&&w.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&Xz(b)),!!b},c=function(h,m,p,g){return dA(t,null,function(){var v,b,w,E;return fA(this,function(_){switch(_.label){case 0:v=new AbortController,b=yVt(u,v.signal),w=[],_.label=1;case 1:return _.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(m,mVt({},p,{getOriginalState:g,condition:function(T,S){return b(T,S).then(Boolean)},take:b,delay:hPe(v.signal),pause:o4(v.signal),extra:r,signal:v.signal,fork:gVt(v.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,S,D){T!==v&&(px(T,fPe),D.delete(T))})}})))];case 2:return _.sent(),[3,6];case 3:return E=_.sent(),E instanceof hM||Zde(o,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return _.sent(),px(v,hVt),h.pending.delete(v),[7];case 6:return[2]}})})},f=bVt(n),d=function(h){return function(m){return function(p){if(!GUt(p))return m(p);if(xVt.match(p))return u(p.payload);if(wVt.match(p)){f();return}if(EVt.match(p))return l(p.payload);var g=h.getState(),v=function(){if(g===Jde)throw new Error(hA+": getOriginalState can only be called synchronously");return g},b;try{if(b=m(p),n.size>0)for(var w=h.getState(),E=Array.from(n.values()),_=0,T=E;_<T.length;_++){var S=T[_],D=!1;try{D=S.predicate(p,w,g)}catch(k){D=!1,Zde(o,k,{raisedBy:"predicate"})}D&&c(S,p,h,v)}}finally{g=Jde}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var ehe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);DUt();function CVt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let Uk;const SVt=new Uint8Array(16);function AVt(){if(!Uk&&(Uk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Uk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Uk(SVt)}const Ts=[];for(let e=0;e<256;++e)Ts.push((e+256).toString(16).slice(1));function DVt(e,t=0){return(Ts[e[t+0]]+Ts[e[t+1]]+Ts[e[t+2]]+Ts[e[t+3]]+"-"+Ts[e[t+4]]+Ts[e[t+5]]+"-"+Ts[e[t+6]]+Ts[e[t+7]]+"-"+Ts[e[t+8]]+Ts[e[t+9]]+"-"+Ts[e[t+10]]+Ts[e[t+11]]+Ts[e[t+12]]+Ts[e[t+13]]+Ts[e[t+14]]+Ts[e[t+15]]).toLowerCase()}const kVt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),the={randomUUID:kVt};function nhe(e,t,n){if(the.randomUUID&&!e)return the.randomUUID();e=e||{};const r=e.random||(e.rng||AVt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,DVt(r)}class Od{static get(){let t=nhe();for(;this.ids.has(t);)t=nhe();return this.ids.set(t,!0),t}}Od.ids=new Map;function yf(e){return"parent"in e}function IVt(e){return!yf(e)}function RVt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,o={annotation:[],bookmark:[]},s=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Od.get(),val:i[l],createdOn:Date.now()}),u),o),a=r?[{id:Od.get(),createdOn:Date.now(),val:r}]:[];return{id:Od.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:s,artifacts:a,state:{type:"checkpoint",val:n}}}function NVt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:o,event:s}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Od.get(),val:i[f],createdOn:Date.now()}),c),a),l=o?[{id:Od.get(),createdOn:Date.now(),val:o}]:[];return{id:Od.get(),label:n,event:s,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function zi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=zVt[e],o=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function T1(e){return!!e&&!!e[Pl]}function V0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===UVt}(e)||Array.isArray(e)||!!e[gT]||!!(!((t=e.constructor)===null||t===void 0)&&t[gT])||pM(e)||mM(e))}function vw(e,t,n){n===void 0&&(n=!1),H0(e)===0?(n?Object.keys:JQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function H0(e){var t=e[Pl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:pM(e)?2:mM(e)?3:0}function IC(e,t){return H0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yN(e,t){return H0(e)===2?e.get(t):e[t]}function mPe(e,t,n){var r=H0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function PVt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function pM(e){return BVt&&e instanceof Map}function mM(e){return jVt&&e instanceof Set}function ly(e){return e.o||e.t}function GQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=VVt(e);delete t[Pl];for(var n=JQ(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function YQ(e,t){return t===void 0&&(t=!1),KQ(e)||T1(e)||!V0(e)||(H0(e)>1&&(e.set=e.add=e.clear=e.delete=OVt),Object.freeze(e),t&&vw(e,function(n,r){return YQ(r,!0)},!0)),e}function OVt(){zi(2)}function KQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Fd(e){var t=eU[e];return t||zi(18,e),t}function FVt(e,t){eU[e]||(eU[e]=t)}function rhe(){return{}.NODE_ENV==="production"||bw||zi(0),bw}function b9(e,t){t&&(Fd("Patches"),e.u=[],e.s=[],e.v=t)}function s4(e){Qz(e),e.p.forEach(MVt),e.p=null}function Qz(e){e===bw&&(bw=e.l)}function ihe(e){return bw={p:[],l:bw,h:e,m:!0,_:0}}function MVt(e){var t=e[Pl];t.i===0||t.i===1?t.j():t.O=!0}function x9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Fd("ES5").S(t,e,r),r?(n[Pl].P&&(s4(t),zi(4)),V0(e)&&(e=a4(t,e),t.l||u4(t,e)),t.u&&Fd("Patches").M(n[Pl].t,e,t.u,t.s)):e=a4(t,n,[]),s4(t),t.u&&t.v(t.u,t.s),e!==QQ?e:void 0}function a4(e,t,n){if(KQ(t))return t;var r=t[Pl];if(!r)return vw(t,function(o,s){return ohe(e,r,t,o,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return u4(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=GQ(r.k):r.o;vw(r.i===3?new Set(i):i,function(o,s){return ohe(e,r,i,o,s,n)}),u4(e,i,!1),n&&e.u&&Fd("Patches").R(r,n,e.u,e.s)}return r.o}function ohe(e,t,n,r,i,o){if({}.NODE_ENV!=="production"&&i===n&&zi(5),T1(i)){var s=a4(e,i,o&&t&&t.i!==3&&!IC(t.D,r)?o.concat(r):void 0);if(mPe(n,r,s),!T1(s))return;e.m=!1}if(V0(i)&&!KQ(i)){if(!e.h.F&&e._<1)return;a4(e,i),t&&t.A.l||u4(e,i)}}function u4(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&YQ(t,n)}function w9(e,t){var n=e[Pl];return(n?ly(n):e)[t]}function she(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Jz(e){e.P||(e.P=!0,e.l&&Jz(e.l))}function E9(e){e.o||(e.o=GQ(e.t))}function Zz(e,t,n){var r=pM(t)?Fd("MapSet").N(t,n):mM(t)?Fd("MapSet").T(t,n):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:rhe(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},u=a,l=tU;s&&(u=[a],l=F2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Fd("ES5").J(t,n);return(n?n.A:rhe()).p.push(r),r}function $Vt(e){return T1(e)||zi(22,e),function t(n){if(!V0(n))return n;var r,i=n[Pl],o=H0(n);if(i){if(!i.P&&(i.i<4||!Fd("ES5").K(i)))return i.t;i.I=!0,r=ahe(n,o),i.I=!1}else r=ahe(n,o);return vw(r,function(s,a){i&&yN(i.t,s)===a||mPe(r,s,t(a))}),o===3?new Set(r):r}(e)}function ahe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return GQ(e)}function LVt(){function e(r){if(!V0(r))return r;if(Array.isArray(r))return r.map(e);if(pM(r))return new Map(Array.from(r.entries()).map(function(s){return[s[0],e(s[1])]}));if(mM(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var o in r)i[o]=e(r[o]);return IC(r,gT)&&(i[gT]=r[gT]),i}function t(r){return T1(r)?e(r):r}var n="add";FVt("Patches",{$:function(r,i){return i.forEach(function(o){for(var s=o.path,a=o.op,u=r,l=0;l<s.length-1;l++){var c=H0(u),f=""+s[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||zi(24),typeof u=="function"&&f==="prototype"&&zi(24),typeof(u=yN(u,f))!="object"&&zi(15,s.join("/"))}var d=H0(u),h=e(o.value),m=s[s.length-1];switch(a){case"replace":switch(d){case 2:return u.set(m,h);case 3:zi(16);default:return u[m]=h}case n:switch(d){case 1:return m==="-"?u.push(h):u.splice(m,0,h);case 2:return u.set(m,h);case 3:return u.add(h);default:return u[m]=h}case"remove":switch(d){case 1:return u.splice(m,1);case 2:return u.delete(m);case 3:return u.delete(o.value);default:return delete u[m]}default:zi(17,a)}}),r},R:function(r,i,o,s){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;vw(a.D,function(h,m){var p=yN(f,h),g=yN(d,h),v=m?IC(f,h)?"replace":n:"remove";if(p!==g||v!=="replace"){var b=u.concat(h);l.push(v==="remove"?{op:v,path:b}:{op:v,path:b,value:g}),c.push(v===n?{op:"remove",path:b}:v==="remove"?{op:n,path:b,value:t(p)}:{op:"replace",path:b,value:t(p)})}})}(r,i,o,s);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var m=[h,f];f=m[0],h=m[1];var p=[c,l];l=p[0],c=p[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var v=u.concat([g]);l.push({op:"replace",path:v,value:t(h[g])}),c.push({op:"replace",path:v,value:t(f[g])})}for(var b=f.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,o,s);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(m){if(!d.has(m)){var p=u.concat([h]);l.push({op:"remove",path:p,value:m}),c.unshift({op:n,path:p,value:m})}h++}),h=0,d.forEach(function(m){if(!f.has(m)){var p=u.concat([h]);l.push({op:n,path:p,value:m}),c.unshift({op:"remove",path:p,value:m})}h++})}(r,i,o,s)}},M:function(r,i,o,s){o.push({op:"replace",path:[],value:i===QQ?void 0:i}),s.push({op:"replace",path:[],value:r})}})}var uhe,bw,XQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",BVt=typeof Map<"u",jVt=typeof Set<"u",lhe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",QQ=XQ?Symbol.for("immer-nothing"):((uhe={})["immer-nothing"]=!0,uhe),gT=XQ?Symbol.for("immer-draftable"):"__$immer_draftable",Pl=XQ?Symbol.for("immer-state"):"__$immer_state",zVt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},UVt=""+Object.prototype.constructor,JQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,VVt=Object.getOwnPropertyDescriptors||function(e){var t={};return JQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},eU={},tU={get:function(e,t){if(t===Pl)return e;var n=ly(e);if(!IC(n,t))return function(i,o,s){var a,u=she(o,s);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!V0(r)?r:r===w9(e.t,t)?(E9(e),e.o[t]=Zz(e.A.h,r,e)):r},has:function(e,t){return t in ly(e)},ownKeys:function(e){return Reflect.ownKeys(ly(e))},set:function(e,t,n){var r=she(ly(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=w9(ly(e),t),o=i==null?void 0:i[Pl];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(PVt(n,i)&&(n!==void 0||IC(e.t,t)))return!0;E9(e),Jz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return w9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,E9(e),Jz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ly(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){zi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){zi(12)}},F2={};vw(tU,function(e,t){F2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),F2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&zi(13),F2.set.call(this,e,t,void 0)},F2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&zi(14),tU.set.call(this,e[0],t,n,e[0])};var HVt=function(){function e(n){var r=this;this.g=lhe,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var u=r;return function(p){var g=this;p===void 0&&(p=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(p,function(E){var _;return(_=o).call.apply(_,[g,E].concat(b))})}}var l;if(typeof o!="function"&&zi(6),s!==void 0&&typeof s!="function"&&zi(7),V0(i)){var c=ihe(r),f=Zz(r,i,void 0),d=!0;try{l=o(f),d=!1}finally{d?s4(c):Qz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(p){return b9(c,s),x9(p,c)},function(p){throw s4(c),p}):(b9(c,s),x9(l,c))}if(!i||typeof i!="object"){if((l=o(i))===void 0&&(l=i),l===QQ&&(l=void 0),r.F&&YQ(l,!0),s){var h=[],m=[];Fd("Patches").M(i,l,h,m),s(h,m)}return l}zi(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var s,a,u=r.produce(i,o,function(l,c){s=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,s,a]}):[u,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){V0(n)||zi(8),T1(n)&&(n=$Vt(n));var r=ihe(this),i=Zz(this,n,void 0);return i[Pl].C=!0,Qz(r),i},t.finishDraft=function(n,r){var i=n&&n[Pl];({}).NODE_ENV!=="production"&&(i&&i.C||zi(9),i.I&&zi(10));var o=i.A;return b9(o,r),x9(void 0,o)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!lhe&&zi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=Fd("Patches").$;return T1(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Ol=new HVt,qVt=Ol.produce;Ol.produceWithPatches.bind(Ol);Ol.setAutoFreeze.bind(Ol);Ol.setUseProxies.bind(Ol);Ol.applyPatches.bind(Ol);Ol.createDraft.bind(Ol);Ol.finishDraft.bind(Ol);function WVt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,o=RVt({state:e,label:i,initialArtifact:n,initialMetadata:r}),s={nodes:{[o.id]:o},root:o.id,current:o.id};return rVt({name:"provenance-graph",initialState:s,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,m)=>(h[m]||(h[m]=[]),h[m].push({type:m,id:Od.get(),val:c[m],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Od.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function GVt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=WVt(e),o=TVt();o.startListening({matcher:Qde(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Qde(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const s=ZUt({reducer:n,middleware:a=>a().prepend(o.middleware)});return{initialState:i(),get backend(){return s.getState()},get current(){return s.getState().nodes[s.getState().current]},get root(){return s.getState().nodes[s.getState().root]},currentChange(a,u){const l={id:Od.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:s.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var YVt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),KVt=Object.prototype.hasOwnProperty;function nU(e,t){return KVt.call(e,t)}function rU(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)nU(e,i)&&r.push(i);return r}function Au(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function iU(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function cy(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function gPe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function oU(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(oU(e[t]))return!0}else if(typeof e=="object"){for(var r=rU(e),i=r.length,o=0;o<i;o++)if(oU(e[r[o]]))return!0}}return!1}function che(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var yPe=function(e){YVt(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,che(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=che(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),Bi=yPe,XVt=Au,Ub={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=l4(n,this.path);r&&(r=Au(r));var i=Vy(n,{op:"remove",path:this.from}).removed;return Vy(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=l4(n,this.from);return Vy(n,{op:"add",path:this.path,value:Au(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:RC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},QVt={add:function(e,t,n){return iU(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Ub.move,copy:Ub.copy,test:Ub.test,_get:Ub._get};function l4(e,t){if(t=="")return e;var n={op:"_get",path:t};return Vy(e,n),n.value}function Vy(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):c4(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=l4(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=RC(e,t.value),s.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Au(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=c4;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=gPe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&m(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!iU(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);iU(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=QVt[t.op].call(t,l,h,e);if(s.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Ub[t.op].call(t,l,h,e);if(s.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function gM(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Au(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Vy(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function JVt(e,t,n){var r=Vy(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function c4(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Ub[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&oU(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=vPe([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function vPe(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)gM(Au(t),Au(e),n||!0);else{n=n||c4;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function RC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!RC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!RC(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const ZVt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:RC,applyOperation:Vy,applyPatch:gM,applyReducer:JVt,deepClone:XVt,getValueByPointer:l4,validate:vPe,validator:c4},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var ZQ=new WeakMap,eHt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),tHt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function nHt(e){return ZQ.get(e)}function rHt(e,t){return e.observers.get(t)}function iHt(e,t){e.observers.delete(t.callback)}function oHt(e,t){t.unobserve()}function sHt(e,t){var n=[],r,i=nHt(e);if(!i)i=new eHt(e),ZQ.set(e,i);else{var o=rHt(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Au(e),t){r.callback=t,r.next=null;var s=function(){sU(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){sU(r),clearTimeout(r.next),iHt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new tHt(t,r)),r}function sU(e,t){t===void 0&&(t=!1);var n=ZQ.get(e.object);eJ(n.value,e.object,e.patches,"",t),e.patches.length&&gM(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function eJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=rU(t),s=rU(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(nU(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?eJ(c,f,n,r+"/"+cy(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+cy(l),value:Au(c)}),n.push({op:"replace",path:r+"/"+cy(l),value:Au(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+cy(l),value:Au(c)}),n.push({op:"remove",path:r+"/"+cy(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!nU(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+cy(l),value:Au(t[l])})}}}function bPe(e,t,n){n===void 0&&(n=!1);var r=[];return eJ(e,t,r,"",n),r}const aHt=Object.freeze(Object.defineProperty({__proto__:null,compare:bPe,generate:sU,observe:sHt,unobserve:oHt},Symbol.toStringTag,{value:"Module"}));Object.assign({},ZVt,aHt,{JsonPatchError:yPe,deepClone:Au,escapePathComponent:cy,unescapePathComponent:gPe});var M2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(M2||{});function vN(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],o=wPe(i,e,t);o.shift();const s=o.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=vN(i,t);return gM(a,Au(s),!0,!1).newDocument}function uHt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function xPe({registry:e,initialState:t}){let n=!1;const r=CVt(),i=GVt(t);function o(c){return i.backend.nodes[c]}r.listen(M2.TRAVERSAL_START,()=>{n=!0}),r.listen(M2.TRAVERSAL_END,()=>{n=!1});const s={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,m)=>{const p=f[m].at(-1);return p&&(h[m]=p),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){s.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=s.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=s.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){s.add({bookmark:!0},c)},remove(c=i.current.id){s.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=s.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return vN(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:m=!1}){let p=null,g=null;const v=vN(this.current,this.graph.backend.nodes);if(m)g={type:"checkpoint",val:f};else{const b=bPe(v,f);if(uHt(f,b)==="checkpoint")g={type:"checkpoint",val:f};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:w}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(p=NVt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!p)throw new Error("State Node creation failed!");i.update(i.addNode(p))},async apply(c,f){const d=e.get(f.type),h=vN(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:m=f,undo:p}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[m],undo:[p]},eventType:d.config.eventType})}else{const m=d.func(h,f.payload);this.record({label:c,state:m,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(M2.TRAVERSAL_START);const f=wPe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const m=o(f[h]),p=o(f[h+1]);cHt(m,p)?yf(m)&&d.push(...m.sideEffects.undo):yf(p)&&d.push(...p.sideEffects.do)}for(const h of d){const m=e.get(h.type).func;await m(h.payload)}i.update(i.changeCurrent(c)),r.fire(M2.TRAVERSAL_END)},undo(){const{current:c}=i;return yf(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return EPe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:s,artifact:a,annotations:u,bookmarks:l}}function lHt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let o=i.level-r.level;for(;yf(i)&&o!==0;)i=n[i.parent],o-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)yf(r)&&(r=n[r.parent]),yf(i)&&(i=n[i.parent]);return r.id}function wPe(e,t,n){const r=lHt(e,t,n),i=n[r],o=[],s=[];let[a,u]=[e,t];for(;a.id!==i.id;)o.push(a),yf(a)&&(a=n[a.parent]);for(o.push(a);u.id!==i.id;)s.push(u),yf(u)&&(u=n[u.parent]);const l=s.reverse();return[...o,...l].map(c=>c.id)}function cHt(e,t){if(yf(e)&&e.parent===t.id)return!0;if(yf(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function EPe(e,t){return{...e,children:e.children.map(n=>EPe(t[n],t)),name:`${e.label}`}}LVt();function fHt(e){return e.length===2?qVt(e):e}class yM{static create(){return new yM}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:o=t,eventType:s=t}=r||{};return this.registry.set(t,{func:fHt(n),config:{hasSideEffects:!i,label:typeof o=="string"?()=>o:o,eventType:s}}),Pd(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function dHt({currentConfig:e,provState:t}){const n=Dc(),r=Pf(),i=Vs(),[o,s]=P.useState(null),[a,u]=P.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=ls(),[f,d]=P.useState(),{actions:h,trrack:m}=P.useMemo(()=>{const w=yM.create(),E=w.register("signal",(T,S)=>(T.event=S,T)),_=xPe({registry:w,initialState:{event:{}}});return{actions:{signalAction:E},trrack:_}},[]),p=P.useCallback(({status:w,provenanceGraph:E,answers:_})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:w,values:_,provenanceGraph:E})),i(c(_))},[r,n,i,c,l]),g=P.useCallback((w,E)=>{m.apply(w,h.signalAction({key:w,value:E}))},[h,m]),v=P.useCallback((w,E)=>{const{responseId:_,response:T}=E;p({status:!0,provenanceGraph:m.graph.backend,answers:{[_]:T}})},[p,m.graph.backend]),b=P.useMemo(()=>{var E;const w=(E=o==null?void 0:o.config)==null?void 0:E.signals;return w?w.reduce((_,T)=>(T.name==="revisitAnswer"?_[T.name]=v:_[T.name]=g,_),{}):{}},[v,g,o]);return P.useEffect(()=>{async function w(){u(!0);let E;"path"in e?E=await lwt(e.path):E=e.config,E!==void 0&&s(E),u(!1)}e&&w()},[e]),P.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?C.jsx("div",{children:"Loading..."}):"path"in e&&!o?C.jsx(I0,{path:e.path}):o?C.jsx(LQ,{spec:structuredClone(o),signalListeners:b,onNewView:w=>d(w)}):C.jsx("div",{children:"Failed to load vega config"})}function hHt(){const e=Wd(),t=Dc(),n=Pf(),r=e.components[n],{storageEngine:i}=Wi(),o=P.useRef(null),[s,a]=P.useState(null),{setIsRecording:u}=ls(),l=or(k=>k.analysisProvState),c=oE(),f=ZW(),d=or(k=>k.sequence),[h]=Gp(),m=or(k=>k.participantId),p=P.useMemo(()=>h.get("participantId"),[h]);vTe();const g=Vs(),{setAlertModal:v}=ls();P.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&g(v({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[v,i,g]),P.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(o.current&&s&&i.saveAudio(o.current,s),o.current&&(o.current.stream.getTracks().forEach(k=>{var R;k.stop(),(R=o.current)==null||R.stream.removeTrack(k)}),o.current.stream.getAudioTracks().forEach(k=>{var R;k.stop(),(R=o.current)==null||R.stream.removeTrack(k)}),o.current.stop(),o.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(k=>{const R=new MediaRecorder(k);o.current=R,o.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[b,w]=P.useState([]),E=P.useRef([]);P.useEffect(()=>{async function k(){var M;const O=((M=YW(d,t))==null?void 0:M.map(F=>F.currentBlock.id).filter(F=>F!==void 0))||[];w(O)}async function R(){const O=E.current;JSON.stringify(O)!==JSON.stringify(b)&&b.length>0&&i&&await i.addParticipantTags(b),E.current=b}k().then(R)},[t,i,d]);const _=P.useMemo(()=>{var k;return n&&n!=="end"&&!n.startsWith("__")&&iE(r)&&e.baseComponents?y6({},(k=e.baseComponents)==null?void 0:k[r.baseComponent],r):r},[r,e]);if(n==="end")return C.jsx(Cwt,{});if(n==="__trainingFailed")return C.jsx(Swt,{});if(n==="__timedOut")return C.jsx(Awt,{});if(n==="Notfound")return C.jsx(I0,{email:e.uiConfig.contactEmail});if(p&&m!==p)return C.jsx(Ir,{style:{height:"80vh"},children:C.jsx(th,{})});const T=_.instruction||"",{instructionLocation:S}=_,D=e.uiConfig.sidebar&&(S==="sidebar"||S===void 0);return C.jsxs(C.Fragment,{children:[S==="aboveStimulus"&&C.jsx(ya,{text:T}),C.jsx(sP,{status:f,config:_,location:"aboveStimulus"},`${t}-above-response-block`),C.jsxs(P.Suspense,{fallback:C.jsx("div",{children:"Loading..."}),children:[_.type==="markdown"&&C.jsx(pwt,{currentConfig:_}),_.type==="website"&&C.jsx(uwt,{currentConfig:_}),_.type==="image"&&C.jsx(fwt,{currentConfig:_}),_.type==="react-component"&&C.jsx(hwt,{currentConfig:_,provState:l}),_.type==="vega"&&C.jsx(dHt,{currentConfig:_,provState:l})]},`${t}-stimulus`),(S==="belowStimulus"||S===void 0&&!D)&&C.jsx(ya,{text:T}),C.jsx(sP,{status:f,config:_,location:"belowStimulus"},`${t}-below-response-block`)]})}function _Pe(e){const[t]=Gp();return C.jsx(rH,{...e,to:{pathname:e.to,search:t.toString()}})}var _9,fhe;function pHt(){if(fhe)return _9;fhe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,u=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,m=Math.min,p=function(){return c.Date.now()};function g(_,T,S){var D,k,R,O,M,F,L=0,H=!1,V=!1,Q=!0;if(typeof _!="function")throw new TypeError(e);T=E(T)||0,v(S)&&(H=!!S.leading,V="maxWait"in S,R=V?h(E(S.maxWait)||0,T):R,Q="trailing"in S?!!S.trailing:Q);function K(ge){var me=D,ye=k;return D=k=void 0,L=ge,O=_.apply(ye,me),O}function Z(ge){return L=ge,M=setTimeout(q,T),H?K(ge):O}function U(ge){var me=ge-F,ye=ge-L,we=T-me;return V?m(we,R-ye):we}function B(ge){var me=ge-F,ye=ge-L;return F===void 0||me>=T||me<0||V&&ye>=R}function q(){var ge=p();if(B(ge))return z(ge);M=setTimeout(q,U(ge))}function z(ge){return M=void 0,Q&&D?K(ge):(D=k=void 0,O)}function G(){M!==void 0&&clearTimeout(M),L=0,D=F=k=M=void 0}function X(){return M===void 0?O:z(p())}function ne(){var ge=p(),me=B(ge);if(D=arguments,k=this,F=ge,me){if(M===void 0)return Z(F);if(V)return M=setTimeout(q,T),K(F)}return M===void 0&&(M=setTimeout(q,T)),O}return ne.cancel=G,ne.flush=X,ne}function v(_){var T=typeof _;return!!_&&(T=="object"||T=="function")}function b(_){return!!_&&typeof _=="object"}function w(_){return typeof _=="symbol"||b(_)&&d.call(_)==n}function E(_){if(typeof _=="number")return _;if(w(_))return t;if(v(_)){var T=typeof _.valueOf=="function"?_.valueOf():_;_=v(T)?T+"":T}if(typeof _!="string")return _===0?_:+_;_=_.replace(r,"");var S=o.test(_);return S||s.test(_)?a(_.slice(2),S?2:8):i.test(_)?t:+_}return _9=g,_9}var mHt=pHt();const Oh=Fl(mHt);function TPe(e,t,n,r){let i=0;for(let o=0;o<e.components.length;o+=1){const s=e.components[o];if(typeof s=="string"){if(r===e.orderPath&&s===t&&o>=n)break;i+=1}else if(i+=TPe(s,t,n,r),r.includes(s.orderPath))break}return i}function CPe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(o=>o.components).includes(r)))n+=1;else if(typeof r!="string"){const o=e.components.find(s=>typeof s!="string"&&s.orderPath===r.orderPath);n+=CPe(o,r)}}),n}function gHt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(o=>typeof o=="string"?o===r:typeof r!="string"&&o.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function yHt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:o,studyConfig:s,subSequence:a,analysisNavigation:u}){const l=fg(),c=Cc(),f=Dc(),[d,{close:h,open:m}]=dU(!1),p=e in s.components&&s.components[e],g=a&&a.components.slice(r).includes(e)?TPe(n,e,r,a.orderPath):-1,{trialId:v}=_l(),[b]=Gp(),w=P.useMemo(()=>b.get("participantId"),[b]),E=v===e,_=o?f===g:f===`reviewer-${e}`,T=u?E:_,S=P.useCallback(()=>c(v?`./../${e}`:`./${e}`),[c,e,v]),k=u?S:()=>c(o?w?`/${l}/${ua(g)}?participantId=${w}`:`/${l}/${ua(g)}`:`/${l}/reviewer-${e}`),R=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,O=e.includes("$")&&R&&e.includes(R)?e.split(R).at(-1):e;return C.jsxs($s,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[C.jsx($s.Target,{children:C.jsx(Re,{onMouseEnter:m,onMouseLeave:h,children:C.jsx(U4,{active:T,style:{lineHeight:"32px",height:"32px"},label:C.jsxs(Re,{children:[i&&C.jsx(rze,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==O&&C.jsx(vze,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),C.jsx(Ye,{size:"sm",span:T,fw:T?"700":void 0,display:"inline",children:O})]}),onClick:k,disabled:t})})}),p&&(p.description||p.meta)&&C.jsx($s.Dropdown,{onMouseLeave:h,children:C.jsxs(Re,{children:[p.description&&C.jsxs(Re,{children:[C.jsx(Ye,{fw:900,display:"inline-block",mr:2,children:"Description:"}),C.jsx(Ye,{fw:400,component:"span",children:p.description})]}),p.meta&&C.jsxs(Re,{children:[C.jsx(Ye,{fw:"900",component:"span",children:"Task Meta: "}),C.jsx(Ye,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})]})}function f4({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:o}){var a;let s=pp(e.components);return n&&r&&(s=gHt(pp(e.components),pp(n.components))),r||(s=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...s]),C.jsx(C.Fragment,{children:s.map((u,l)=>{if(typeof u=="string")return C.jsx(yHt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:o},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?wf(c).length-CPe(u,c):0,d=wf(u);return C.jsx(U4,{label:C.jsxs(Re,{style:{opacity:f>0?1:.5},children:[C.jsx(Ye,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?C.jsx(ui,{label:u.order,position:"right",withArrow:!0,children:C.jsx(tze,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&C.jsxs(lf,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&C.jsx(lf,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var m;return typeof h=="string"&&((m=u.interruptions)==null?void 0:m.flatMap(p=>p.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:C.jsx(Re,{style:{borderLeft:"1px solid #e9ecef"},children:C.jsx(f4,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:o})})},l)})})}function SPe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function dhe({text:e}){return C.jsx(ui,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:C.jsx(uH,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function vHt(){const e=or(h=>h.sequence),t=or(h=>h.metadata),{toggleStudyBrowser:n}=ls(),r=Wd(),i=Vs(),o=fg(),s=eH(`/${o}`),{storageEngine:a}=Wi(),u=oE(),l=P.useMemo(()=>{let h=pp(r.sequence);return h=KW(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=P.useState("participant"),d=P.useMemo(()=>c==="allTrials"||u,[c,u]);return C.jsxs(Br.Aside,{p:"0",children:[C.jsx(Br.Section,{p:"md",children:C.jsxs(Lt,{direction:"row",justify:"space-between",children:[C.jsx(Ye,{size:"md",fw:700,pt:3,children:"Study Browser"}),C.jsx(ui,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:C.jsx(At,{variant:"light",leftSection:C.jsx(lH,{size:14}),onClick:()=>SPe(a,r,t,s),size:"xs",disabled:d,children:"Next Participant"})}),C.jsx(J0,{onClick:()=>i(n()),mt:1})]})}),C.jsx(Br.Section,{grow:!0,component:wp,p:"md",children:C.jsxs(Xn,{value:c,onChange:f,children:[C.jsx(Re,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:C.jsxs(Xn.List,{grow:!0,children:[C.jsxs(Xn.Tab,{value:"participant",children:["Participant View",C.jsx(dhe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),C.jsxs(Xn.Tab,{value:"allTrials",disabled:u,children:["All Trials View",C.jsx(dhe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),C.jsx(Xn.Panel,{value:"participant",children:C.jsx(f4,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),C.jsx(Xn.Panel,{value:"allTrials",children:C.jsx(f4,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function bHt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=or(D=>D.config),r=or(D=>D.metadata),i=m6(),o=Vs(),{toggleShowHelpText:s,toggleStudyBrowser:a,incrementHelpCounter:u}=ls(),{storageEngine:l}=Wi(),c=Pf(),f=Dc(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[m,p]=P.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,v=n==null?void 0:n.uiConfig.withProgressBar,b=fg(),w=eH(`/${b}`),E=P.useRef(null),[_,T]=P.useState(!1),S=or(D=>D.isRecording);return P.useEffect(()=>{const D=E.current;D&&T(D.scrollWidth>D.offsetWidth)},[n]),C.jsx(Br.Header,{p:"md",children:C.jsxs(gd,{mt:-7,align:"center",children:[C.jsx(gd.Col,{span:4,children:C.jsxs(Lt,{align:"center",children:[C.jsx(eg,{w:40,src:`${us}${g}`,alt:"Study Logo"}),C.jsx(ml,{w:"md"}),C.jsx(Ui,{ref:E,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),C.jsx(gd.Col,{span:4,children:v&&C.jsx(Nw,{radius:"md",size:"lg",value:h})}),C.jsx(gd.Col,{span:4,children:C.jsxs(Cr,{wrap:"nowrap",justify:"right",children:[S?C.jsxs(Cr,{ml:"xl",gap:20,wrap:"nowrap",children:[C.jsx(Ye,{color:"red",children:"Recording audio"}),C.jsx(j2e,{})]}):null,!t&&C.jsx(ui,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:C.jsx(lf,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&C.jsx(At,{variant:"outline",onClick:()=>{o(s()),o(u({identifier:`${c}_${f}`}))},children:"Help"}),C.jsxs(Ma,{shadow:"md",width:200,withinPortal:!0,opened:m,onChange:p,children:[C.jsx(Ma.Target,{children:C.jsx(Q0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:C.jsx(cze,{})})}),C.jsxs(Ma.Dropdown,{children:[e&&C.jsx(Ma.Item,{leftSection:C.jsx(_ze,{size:14}),onClick:()=>o(a()),children:"Study Browser"}),C.jsx(Ma.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:C.jsx(gze,{size:14}),children:"Contact"}),e&&C.jsx(Ma.Item,{leftSection:C.jsx(lH,{size:14}),onClick:()=>SPe(l,n,r,w),children:"Next Participant"}),e&&C.jsx(Ma.Item,{leftSection:C.jsx(Jge,{size:14}),component:"a",href:`${us}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function xHt(){var u;const e=(u=Wd())==null?void 0:u.uiConfig.sidebar,t=Wd(),n=Pf(),r=t.components[n],i=P.useMemo(()=>r?JW(r,t):null,[r,t]),o=ZW(),s=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?C.jsxs(Br.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&s!==""&&C.jsxs(Br.Section,{bg:"gray.3",p:"md",children:[C.jsx(Ye,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),C.jsx(ya,{text:s})]}),C.jsx(Br.Section,{p:"md",children:C.jsx(sP,{status:o,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):C.jsx(Br.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:C.jsx(sP,{status:o,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function wHt(){const e=or(u=>u.showHelpText),t=or(u=>u.config),n=Vs(),{toggleShowHelpText:r}=ls(),[i,o]=P.useState(""),[s,a]=P.useState(!0);return P.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await tG(t.uiConfig.helpTextPath);l!==void 0&&o(l),a(!1)}u()},[t.uiConfig.helpTextPath]),C.jsx(Ni,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:s||i?C.jsx(ya,{text:i}):C.jsx(I0,{path:t.uiConfig.helpTextPath})})}function EHt(){const e=or(s=>s.alertModal),{setAlertModal:t}=ls(),n=Vs(),[r,i]=P.useState(e.show),o=P.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return P.useEffect(()=>i(e.show),[e.show]),C.jsx(Ni,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:o,children:C.jsxs(ap,{color:"red",radius:"xs",title:"Alert",icon:C.jsx(eze,{}),onClose:o,styles:{root:{backgroundColor:"unset"}},children:[C.jsx(Ye,{my:"md",children:e.message}),C.jsx(Cr,{w:"100%",justify:"end",children:C.jsx(At,{onClick:o,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const hhe=15,phe=3;function _Ht({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:o}){const s=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,s[u]),u=(u+1)%s.length)})}return C.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return C.jsx("g",{onClick:()=>i(l,c.createdOn,o),children:C.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-phe/2,y:n/2-hhe/2,width:phe,height:hhe})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?C.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,C.jsx(WU,{position:{bottom:10,left:10},children:C.jsxs($s,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[C.jsx($s.Target,{children:C.jsx(At,{children:"Show Legend"})}),C.jsx($s.Dropdown,{children:C.jsx(Un,{children:Array.from(a.keys()).map(u=>C.jsxs(Cr,{children:[C.jsx(vV,{color:a.get(u)}),C.jsx("span",{children:u})]},u))})})]})})]})}const mhe={left:5};function THt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:o,setPlayTime:s,trialName:a}){const u=P.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=P.useCallback((f,d)=>{s(d,(d-e.domain()[0])/u),o(f)},[o,s,u,e]),c=P.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return C.jsx(_Ht,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return C.jsxs("svg",{style:{width:n,height:r},children:[C.jsx("line",{stroke:"black",strokeWidth:1,x1:mhe.left,x2:n+mhe.left,y1:r/2,y2:r/2}),c]})}function CHt(e){const t=P.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return P.useLayoutEffect(()=>{t.current=e}),P.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function SHt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:o,startTime:s}){const a=P.useRef(0),u=P.useRef(Date.now()),[l,c]=P.useState(0);P.useEffect(()=>{s&&(a.current=0,n(s,0))},[s,n]);const f=CHt(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(s+a.current,void 0),c(l+1)});P.useEffect(()=>{i&&a.current>=r&&(n(s,0),u.current=Date.now()-a.current,a.current=0)},[s,i,r,n]),P.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=P.useCallback(h=>{a.current=o.invert(h.clientX-10)-o.domain()[0],u.current=Date.now()-a.current,c(l+1),n(s+a.current,a.current/r)},[r,l,s,n,o]);return C.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:C.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:o(s+a.current),x2:o(s+a.current)})})}function aU(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,o=n<10?`0${n}`:`${n}`,s=t<10?`0${t}`:`${t}`;return`${t>0?`${s}h`:""} ${n>0?`${o}m`:""} ${i}s`}const T9={left:0,right:0};function AHt(e,t){return t?t.getParticipantData(e):null}function DHt({setTimeString:e}){const[t]=Gp(),n=P.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Wi(),i=or(q=>q.analysisIsPlaying),o=or(q=>q.analysisHasAudio),s=or(q=>q.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=ls(),f=Vs(),d=Pf(),h=Dc();P.useEffect(()=>{f(a(null))},[h,a,f]);const[m,{width:p}]=PC(),[g,v]=P.useState(0),[b,w]=P.useState(null),[E,_]=P.useState(0),{value:T,status:S}=aP(AHt,[n,r]),[D,k]=g6e(0,100),R=P.useRef(null),[O,M]=P.useState(!0),F=P.useRef(null),L=P.useMemo(()=>`${d}_${h}`,[d,h]);P.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),P.useEffect(()=>{var q;if(L&&T&&((q=T.answers[L])!=null&&q.provenanceGraph)){const z=yM.create(),G=xPe({registry:z,initialState:{}});T.answers[L].provenanceGraph&&(G.importObject(pp(T.answers[L].provenanceGraph)),f(l(!0)),F.current=G)}else f(l(!1))},[T,L,f,l]);const H=P.useCallback(q=>{var z;q&&(L&&T&&F.current&&(f(a(F.current.getState((z=T.answers[L].provenanceGraph)==null?void 0:z.nodes[q]))),F.current.to(q)),w(q))},[T,a,f,L]);P.useEffect(()=>{var G;if(!L||!T||!F.current||!((G=T.answers[L])!=null&&G.provenanceGraph))return;const q=T.answers[L].provenanceGraph;if(!q)return;if(!b||!q.nodes[b]){H(q.root);return}let z=q.nodes[b];for(;;)if(D<z.createdOn){if(IVt(z))break;{const X=z.parent;z=q.nodes[X]}}else if(z.children.length>0){const X=z.children[0];if(D>q.nodes[X].createdOn)z=q.nodes[X];else break}else break;z.id!==b&&H(z.id)},[H,b,T,n,D,L]);const V=P.useMemo(()=>(T==null?void 0:T.answers[L].startTime)||0,[T,L]);P.useEffect(()=>{E===0?e(""):D!==0&&e(`${aU(D-V)} / ${aU(E*1e3)}`)},[L,T,D,e,V,E]),P.useEffect(()=>{if(!o&&s&&T){const q=T.answers[L].endTime-T.answers[L].startTime;_(q>-1?q/1e3:0)}},[o,s,L,T]);const Q=oE(),K=P.useRef(null),Z=P.useCallback(async q=>{if(K.current=q,q&&T&&Q&&L&&r)try{const z=await r.getAudio(L,n);await q.load(z),M(!1),f(u(!0)),_(q.getDuration()),v(q.getWidth()),q.seekTo(0),q.on("redrawcomplete",()=>v(q.getWidth()))}catch(z){throw f(u(!1)),new Error(z)}else f(u(!1)),_(0)},[T,Q,L,r,n,f,u]),U=P.useCallback((q,z)=>{if(q>E*1e3+V){f(c(!1)),k(q);return}k(q),K.current&&z!==void 0&&setTimeout(()=>{var G;(G=K.current)==null||G.seekTo(z)})},[c,k,V,f,E]);P.useEffect(()=>{K.current&&(i?K.current.play():K.current.pause())},[K,i,E,V,k]);const B=P.useMemo(()=>{var G,X;if(!T||!((G=T.answers[L])!=null&&G.startTime)||!((X=T.answers[L])!=null&&X.endTime))return null;const q=E>0?T.answers[L].startTime+E*1e3:T.answers[L].endTime;return Ud([T9.left,p+T9.left+T9.right]).domain([T.answers[L].startTime,q]).clamp(!0)},[T,L,p,E]);return P.useEffect(()=>{Z(K.current)},[U,Z,T,n,K]),C.jsx(Cr,{wrap:"nowrap",gap:10,mx:10,children:C.jsxs(Un,{ref:m,style:{width:"100%"},gap:0,children:[C.jsx(Ir,{}),T!==null&&L?C.jsxs(Re,{ref:R,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:o?"block":"none",id:"waveformDiv",children:[C.jsx(M2e,{onMount:Z,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:C.jsx($2e,{id:"waveform",height:50})}),O?C.jsx(th,{}):null]}):null,S==="success"&&T&&B&&L&&T.answers[L].provenanceGraph?C.jsx(THt,{xScale:B,trialName:L,setPlayTime:U,currentNode:b,setCurrentNode:H,participantData:T,width:g||p,height:25}):null,B&&T&&(o||s)?C.jsx(SHt,{duration:E*1e3,height:(o?50:0)+(s?25:0),isPlaying:i,startTime:V,width:p,xScale:B,updateTimer:U}):null]})})}function kHt(e,t){return t?t.getParticipantData(e):null}function IHt(e){return e?e.getAllParticipantsData():null}function RHt(){const[e]=Gp(),t=P.useMemo(()=>e.get("participantId")||void 0,[e]),n=Pf(),r=Dc(),i=Cc(),{setAnalysisIsPlaying:o}=ls(),s=Vs(),a=or(v=>v.analysisIsPlaying),{storageEngine:u}=Wi(),{value:l,status:c}=aP(kHt,[t,u]),{value:f}=aP(IHt,[u]),[d,h]=P.useMemo(()=>{if(f&&l&&t&&n){const v=f.filter(_=>_.participantConfigHash===l.participantConfigHash),b=v.findIndex(_=>_.participantId===t),w=b<v.length-1?v[b+1]:v[0],E=b>0?v[b-1]:v[v.length-1];return[[w.participantId,wf(w.sequence).indexOf(n)],[E.participantId,wf(E.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),m=P.useMemo(()=>{const v={};return f==null||f.forEach(b=>{v[b.participantConfigHash]||(v[b.participantConfigHash]=new Set),v[b.participantConfigHash].add(b.participantId)}),Object.keys(v).sort((b,w)=>b===(l==null?void 0:l.participantConfigHash)?-1:w===(l==null?void 0:l.participantConfigHash)?1:0).map(b=>({group:`Config version: ${b}`,items:[...v[b]].map(w=>({value:w,label:w,disabled:b!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[p,g]=P.useState("");return C.jsx(Br.Footer,{zIndex:101,withBorder:!1,children:C.jsxs(Re,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[C.jsx(El,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),C.jsx(DHt,{setTimeString:g}),C.jsx(Ir,{children:C.jsxs(Cr,{gap:"xs",style:{height:"50px"},children:[C.jsx(Ye,{size:"sm",ff:"monospace",children:p}),C.jsx(Q0,{variant:"filled",size:30,onClick:()=>s(o(!a)),children:a?C.jsx(kze,{}):C.jsx(Ize,{})}),C.jsx(Ye,{mx:"0",children:"Participant:"}),C.jsx(Pw,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:v=>{i(`./../${ua(0)}?participantId=${v}`)},data:m}),C.jsx(At,{onClick:()=>i(`../${ua(+r-1)}?participantId=${t}`,{relative:"path"}),children:C.jsx(Hte,{})}),C.jsx(At,{onClick:()=>i(`../${ua(+r+1)}?participantId=${t}`,{relative:"path"}),children:C.jsx(qte,{})}),C.jsxs(At,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${ua(h[1])}?participantId=${h[0]}`),children:[C.jsx(Hte,{}),C.jsx(Wte,{})]}),C.jsxs(At,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${ua(d[1])}?participantId=${d[0]}`),children:[C.jsx(Wte,{}),C.jsx(qte,{})]})]})})]})})}function NHt(){const e=P.useRef([]),t=Wd(),n=t.uiConfig.windowEventDebounceTime??100,r=or(d=>d.showStudyBrowser),i=or(d=>d.analysisHasAudio),o=or(d=>d.analysisHasProvenance),s=or(d=>d.modes);P.useEffect(()=>{const d=Oh(_=>{e.current.push([Date.now(),"focus",_.target instanceof HTMLElement?_.target.tagName:""])},n,{maxWait:n}),h=Oh(_=>{e.current.push([Date.now(),"input",_.data??""])},n,{maxWait:n}),m=Oh(_=>{e.current.push([Date.now(),"keypress",_.key])},n,{maxWait:n}),p=Oh(_=>{e.current.push([Date.now(),"mousedown",[_.clientX,_.clientY]])},n,{maxWait:n}),g=Oh(_=>{e.current.push([Date.now(),"mouseup",[_.clientX,_.clientY]])},n,{maxWait:n}),v=Oh(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=Oh(_=>{e.current.push([Date.now(),"mousemove",[_.clientX,_.clientY]])},n,{maxWait:n}),w=Oh(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=Oh(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",m),window.addEventListener("mousedown",p),window.addEventListener("mouseup",g),window.addEventListener("resize",v),window.addEventListener("mousemove",b),window.addEventListener("scroll",w),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",m),window.addEventListener("mousedown",p),window.addEventListener("mouseup",g),window.removeEventListener("resize",v),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",w),document.removeEventListener("visibilitychange",E)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=P.useMemo(()=>s,[s]),c=P.useMemo(()=>u&&r,[u,r]),f=oE();return C.jsx(dTe.Provider,{value:e,children:C.jsxs(Br,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(o?25:0)},children:[C.jsx(xHt,{}),C.jsx(vHt,{}),C.jsx(bHt,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),C.jsx(wHt,{}),C.jsx(EHt,{}),C.jsx(Br.Main,{children:C.jsx(lje,{})}),f&&C.jsx(RHt,{})]})})}function PHt(e,t=!1){return typeof e=="number"?ghe(e,t):ghe(e.length,t).map(r=>r.map(i=>e[i]))}function ghe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let o=0;o<e;o++)o<2?n[o]=o:o%2==0?n[o]=e-o/2:n[o]=Math.floor(o/2)+1;let r=[n],i=n;for(let o=1;o<e;o+=1){let s=i.map(a=>(a+1)%e);r.push(s),i=s}if(t&&e%2>0)for(let o=0;o<e;o+=1)r.push(r[o].slice().reverse());return r}function APe(e,t,n){if(Al(e))return{id:e.id,orderPath:n,order:e.order,components:[],skip:[]};let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const o=r[i];if(typeof o!="string"&&!Array.isArray(o)){const s=e.components.indexOf(o);r[i]=APe(o,t,`${n}-${s}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const o=[];if(i.spacing!=="random")for(let s=0;s<r.length;s+=1)(s===i.firstLocation||s>i.firstLocation&&s%i.spacing===0)&&o.push(...i.components),o.push(r[s]);if(i.spacing==="random"){const s=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;s.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;s.add(l)}const a=Array.from(s).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(o.push(...i.components),u+=1),o.push(r[l])}r=o}),{id:e.id,orderPath:n,order:e.order,components:r.flat(),skip:e.skip}}function OHt(e,t){const n=pp(e);return APe(n,t,"root")}function DPe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),!Al(e)&&e.components.forEach((o,s)=>{typeof o!="string"&&!Al(o)&&DPe(o,t,i,s)})}function FHt(e){const t=[];return DPe(e,t,"",0),t}function yhe(e,t){const n=t.split("-");let r={};n.forEach(s=>{if(s==="root")r=e.sequence;else{if(Al(r))return;r=r.components[+s]}});const i=r.components.map((s,a)=>typeof s=="string"?s:`_componentBlock${a}`);return PHt(i.sort(()=>.5-Math.random()),!0)}function vhe(e){const n=FHt(e.sequence).map(o=>({[o]:yhe(e,o)})).reduce((o,s)=>({...o,...s}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const o=OHt(e.sequence,n);o.components.push("end"),i.push(o),Object.entries(n).forEach(([s,a])=>{a.length===0&&(n[s]=yhe(e,s))})}),i}var Vk={exports:{}},C9={},Fh={},Xg={},S9={},A9={},D9={},bhe;function d4(){return bhe||(bhe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,E)=>`${w}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,E)=>(E instanceof n&&(w[E.str]=(w[E.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(v,...b){const w=[v[0]];let E=0;for(;E<b.length;)a(w,b[E]),w.push(v[++E]);return new r(w)}e._=i;const o=new r("+");function s(v,...b){const w=[h(v[0])];let E=0;for(;E<b.length;)w.push(o),a(w,b[E]),w.push(o,h(v[++E]));return u(w),new r(w)}e.str=s;function a(v,b){b instanceof r?v.push(...b._items):b instanceof n?v.push(b):v.push(f(b))}e.addCodeArg=a;function u(v){let b=1;for(;b<v.length-1;){if(v[b]===o){const w=l(v[b-1],v[b+1]);if(w!==void 0){v.splice(b-1,3,w);continue}v[b++]="+"}b++}}function l(v,b){if(b==='""')return v;if(v==='""')return b;if(typeof v=="string")return b instanceof n||v[v.length-1]!=='"'?void 0:typeof b!="string"?`${v.slice(0,-1)}${b}"`:b[0]==='"'?v.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(v instanceof n))return`"${v}${b.slice(1)}`}function c(v,b){return b.emptyStr()?v:v.emptyStr()?b:s`${v}${b}`}e.strConcat=c;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function d(v){return new r(h(v))}e.stringify=d;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function m(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}e.getProperty=m;function p(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=p;function g(v){return new r(v.toString())}e.regexpCode=g}(D9)),D9}var k9={},xhe;function whe(){return xhe||(xhe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=d4();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class o extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=o;const s=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?s:t.nil}}get(){return this._scope}name(l){return new o(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,m=(f=c.key)!==null&&f!==void 0?f:c.ref;let p=this._values[h];if(p){const b=p.get(m);if(b)return b}else p=this._values[h]=new Map;p.set(m,d);const g=this._scope[h]||(this._scope[h]=[]),v=g.length;return g[v]=c.ref,d.setValue(c,{property:h,itemIndex:v}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const m in l){const p=l[m];if(!p)continue;const g=f[m]=f[m]||new Map;p.forEach(v=>{if(g.has(v))return;g.set(v,r.Started);let b=c(v);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${v} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(v))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(v);g.set(v,r.Completed)})}return h}}e.ValueScope=a}(k9)),k9}var Ehe;function Hn(){return Ehe||(Ehe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=d4(),n=whe();var r=d4();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=whe();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(G,X){return this}}class s extends o{constructor(G,X,ne){super(),this.varKind=G,this.name=X,this.rhs=ne}render({es5:G,_n:X}){const ne=G?n.varKinds.var:this.varKind,ge=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ge};`+X}optimizeNames(G,X){if(G[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,G,X)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(G,X,ne){super(),this.lhs=G,this.rhs=X,this.sideEffects=ne}render({_n:G}){return`${this.lhs} = ${this.rhs};`+G}optimizeNames(G,X){if(!(this.lhs instanceof t.Name&&!G[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,G,X),this}get names(){const G=this.lhs instanceof t.Name?{}:{...this.lhs.names};return F(G,this.rhs)}}class u extends a{constructor(G,X,ne,ge){super(G,ne,ge),this.op=X}render({_n:G}){return`${this.lhs} ${this.op}= ${this.rhs};`+G}}class l extends o{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`${this.label}:`+G}}class c extends o{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`break${this.label?` ${this.label}`:""};`+G}}class f extends o{constructor(G){super(),this.error=G}render({_n:G}){return`throw ${this.error};`+G}get names(){return this.error.names}}class d extends o{constructor(G){super(),this.code=G}render({_n:G}){return`${this.code};`+G}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(G,X){return this.code=L(this.code,G,X),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends o{constructor(G=[]){super(),this.nodes=G}render(G){return this.nodes.reduce((X,ne)=>X+ne.render(G),"")}optimizeNodes(){const{nodes:G}=this;let X=G.length;for(;X--;){const ne=G[X].optimizeNodes();Array.isArray(ne)?G.splice(X,1,...ne):ne?G[X]=ne:G.splice(X,1)}return G.length>0?this:void 0}optimizeNames(G,X){const{nodes:ne}=this;let ge=ne.length;for(;ge--;){const me=ne[ge];me.optimizeNames(G,X)||(H(G,me.names),ne.splice(ge,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((G,X)=>M(G,X.names),{})}}class m extends h{render(G){return"{"+G._n+super.render(G)+"}"+G._n}}class p extends h{}class g extends m{}g.kind="else";class v extends m{constructor(G,X){super(X),this.condition=G}render(G){let X=`if(${this.condition})`+super.render(G);return this.else&&(X+="else "+this.else.render(G)),X}optimizeNodes(){super.optimizeNodes();const G=this.condition;if(G===!0)return this.nodes;let X=this.else;if(X){const ne=X.optimizeNodes();X=this.else=Array.isArray(ne)?new g(ne):ne}if(X)return G===!1?X instanceof v?X:X.nodes:this.nodes.length?this:new v(V(G),X instanceof v?[X]:X.nodes);if(!(G===!1||!this.nodes.length))return this}optimizeNames(G,X){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(G,X),!!(super.optimizeNames(G,X)||this.else))return this.condition=L(this.condition,G,X),this}get names(){const G=super.names;return F(G,this.condition),this.else&&M(G,this.else.names),G}}v.kind="if";class b extends m{}b.kind="for";class w extends b{constructor(G){super(),this.iteration=G}render(G){return`for(${this.iteration})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iteration=L(this.iteration,G,X),this}get names(){return M(super.names,this.iteration.names)}}class E extends b{constructor(G,X,ne,ge){super(),this.varKind=G,this.name=X,this.from=ne,this.to=ge}render(G){const X=G.es5?n.varKinds.var:this.varKind,{name:ne,from:ge,to:me}=this;return`for(${X} ${ne}=${ge}; ${ne}<${me}; ${ne}++)`+super.render(G)}get names(){const G=F(super.names,this.from);return F(G,this.to)}}class _ extends b{constructor(G,X,ne,ge){super(),this.loop=G,this.varKind=X,this.name=ne,this.iterable=ge}render(G){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iterable=L(this.iterable,G,X),this}get names(){return M(super.names,this.iterable.names)}}class T extends m{constructor(G,X,ne){super(),this.name=G,this.args=X,this.async=ne}render(G){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(G)}}T.kind="func";class S extends h{render(G){return"return "+super.render(G)}}S.kind="return";class D extends m{render(G){let X="try"+super.render(G);return this.catch&&(X+=this.catch.render(G)),this.finally&&(X+=this.finally.render(G)),X}optimizeNodes(){var G,X;return super.optimizeNodes(),(G=this.catch)===null||G===void 0||G.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(G,X){var ne,ge;return super.optimizeNames(G,X),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(G,X),(ge=this.finally)===null||ge===void 0||ge.optimizeNames(G,X),this}get names(){const G=super.names;return this.catch&&M(G,this.catch.names),this.finally&&M(G,this.finally.names),G}}class k extends m{constructor(G){super(),this.error=G}render(G){return`catch(${this.error})`+super.render(G)}}k.kind="catch";class R extends m{render(G){return"finally"+super.render(G)}}R.kind="finally";class O{constructor(G,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=G,this._scope=new n.Scope({parent:G}),this._nodes=[new p]}toString(){return this._root.render(this.opts)}name(G){return this._scope.name(G)}scopeName(G){return this._extScope.name(G)}scopeValue(G,X){const ne=this._extScope.value(G,X);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(G,X){return this._extScope.getValue(G,X)}scopeRefs(G){return this._extScope.scopeRefs(G,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(G,X,ne,ge){const me=this._scope.toName(X);return ne!==void 0&&ge&&(this._constants[me.str]=ne),this._leafNode(new s(G,me,ne)),me}const(G,X,ne){return this._def(n.varKinds.const,G,X,ne)}let(G,X,ne){return this._def(n.varKinds.let,G,X,ne)}var(G,X,ne){return this._def(n.varKinds.var,G,X,ne)}assign(G,X,ne){return this._leafNode(new a(G,X,ne))}add(G,X){return this._leafNode(new u(G,e.operators.ADD,X))}code(G){return typeof G=="function"?G():G!==t.nil&&this._leafNode(new d(G)),this}object(...G){const X=["{"];for(const[ne,ge]of G)X.length>1&&X.push(","),X.push(ne),(ne!==ge||this.opts.es5)&&(X.push(":"),(0,t.addCodeArg)(X,ge));return X.push("}"),new t._Code(X)}if(G,X,ne){if(this._blockNode(new v(G)),X&&ne)this.code(X).else().code(ne).endIf();else if(X)this.code(X).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(G){return this._elseNode(new v(G))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(v,g)}_for(G,X){return this._blockNode(G),X&&this.code(X).endFor(),this}for(G,X){return this._for(new w(G),X)}forRange(G,X,ne,ge,me=this.opts.es5?n.varKinds.var:n.varKinds.let){const ye=this._scope.toName(G);return this._for(new E(me,ye,X,ne),()=>ge(ye))}forOf(G,X,ne,ge=n.varKinds.const){const me=this._scope.toName(G);if(this.opts.es5){const ye=X instanceof t.Name?X:this.var("_arr",X);return this.forRange("_i",0,(0,t._)`${ye}.length`,we=>{this.var(me,(0,t._)`${ye}[${we}]`),ne(me)})}return this._for(new _("of",ge,me,X),()=>ne(me))}forIn(G,X,ne,ge=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(G,(0,t._)`Object.keys(${X})`,ne);const me=this._scope.toName(G);return this._for(new _("in",ge,me,X),()=>ne(me))}endFor(){return this._endBlockNode(b)}label(G){return this._leafNode(new l(G))}break(G){return this._leafNode(new c(G))}return(G){const X=new S;if(this._blockNode(X),this.code(G),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(G,X,ne){if(!X&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ge=new D;if(this._blockNode(ge),this.code(G),X){const me=this.name("e");this._currNode=ge.catch=new k(me),X(me)}return ne&&(this._currNode=ge.finally=new R,this.code(ne)),this._endBlockNode(k,R)}throw(G){return this._leafNode(new f(G))}block(G,X){return this._blockStarts.push(this._nodes.length),G&&this.code(G).endBlock(X),this}endBlock(G){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-X;if(ne<0||G!==void 0&&ne!==G)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${G} expected`);return this._nodes.length=X,this}func(G,X=t.nil,ne,ge){return this._blockNode(new T(G,X,ne)),ge&&this.code(ge).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(G=1){for(;G-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(G){return this._currNode.nodes.push(G),this}_blockNode(G){this._currNode.nodes.push(G),this._nodes.push(G)}_endBlockNode(G,X){const ne=this._currNode;if(ne instanceof G||X&&ne instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${G.kind}/${X.kind}`:G.kind}"`)}_elseNode(G){const X=this._currNode;if(!(X instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=G,this}get _root(){return this._nodes[0]}get _currNode(){const G=this._nodes;return G[G.length-1]}set _currNode(G){const X=this._nodes;X[X.length-1]=G}}e.CodeGen=O;function M(z,G){for(const X in G)z[X]=(z[X]||0)+(G[X]||0);return z}function F(z,G){return G instanceof t._CodeOrName?M(z,G.names):z}function L(z,G,X){if(z instanceof t.Name)return ne(z);if(!ge(z))return z;return new t._Code(z._items.reduce((me,ye)=>(ye instanceof t.Name&&(ye=ne(ye)),ye instanceof t._Code?me.push(...ye._items):me.push(ye),me),[]));function ne(me){const ye=X[me.str];return ye===void 0||G[me.str]!==1?me:(delete G[me.str],ye)}function ge(me){return me instanceof t._Code&&me._items.some(ye=>ye instanceof t.Name&&G[ye.str]===1&&X[ye.str]!==void 0)}}function H(z,G){for(const X in G)z[X]=(z[X]||0)-(G[X]||0)}function V(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,t._)`!${q(z)}`}e.not=V;const Q=B(e.operators.AND);function K(...z){return z.reduce(Q)}e.and=K;const Z=B(e.operators.OR);function U(...z){return z.reduce(Z)}e.or=U;function B(z){return(G,X)=>G===t.nil?X:X===t.nil?G:(0,t._)`${q(G)} ${z} ${q(X)}`}function q(z){return z instanceof t.Name?z:(0,t._)`(${z})`}}(A9)),A9}var Mn={},_he;function vr(){if(_he)return Mn;_he=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.checkStrictMode=Mn.getErrorPath=Mn.Type=Mn.useFunc=Mn.setEvaluated=Mn.evaluatedPropsToName=Mn.mergeEvaluated=Mn.eachItem=Mn.unescapeJsonPointer=Mn.escapeJsonPointer=Mn.escapeFragment=Mn.unescapeFragment=Mn.schemaRefOrVal=Mn.schemaHasRulesButRef=Mn.schemaHasRules=Mn.checkUnknownRules=Mn.alwaysValidSchema=Mn.toHash=void 0;const e=Hn(),t=d4();function n(_){const T={};for(const S of _)T[S]=!0;return T}Mn.toHash=n;function r(_,T){return typeof T=="boolean"?T:Object.keys(T).length===0?!0:(i(_,T),!o(T,_.self.RULES.all))}Mn.alwaysValidSchema=r;function i(_,T=_.schema){const{opts:S,self:D}=_;if(!S.strictSchema||typeof T=="boolean")return;const k=D.RULES.keywords;for(const R in T)k[R]||E(_,`unknown keyword: "${R}"`)}Mn.checkUnknownRules=i;function o(_,T){if(typeof _=="boolean")return!_;for(const S in _)if(T[S])return!0;return!1}Mn.schemaHasRules=o;function s(_,T){if(typeof _=="boolean")return!_;for(const S in _)if(S!=="$ref"&&T.all[S])return!0;return!1}Mn.schemaHasRulesButRef=s;function a({topSchemaRef:_,schemaPath:T},S,D,k){if(!k){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,e._)`${S}`}return(0,e._)`${_}${T}${(0,e.getProperty)(D)}`}Mn.schemaRefOrVal=a;function u(_){return f(decodeURIComponent(_))}Mn.unescapeFragment=u;function l(_){return encodeURIComponent(c(_))}Mn.escapeFragment=l;function c(_){return typeof _=="number"?`${_}`:_.replace(/~/g,"~0").replace(/\//g,"~1")}Mn.escapeJsonPointer=c;function f(_){return _.replace(/~1/g,"/").replace(/~0/g,"~")}Mn.unescapeJsonPointer=f;function d(_,T){if(Array.isArray(_))for(const S of _)T(S);else T(_)}Mn.eachItem=d;function h({mergeNames:_,mergeToName:T,mergeValues:S,resultToName:D}){return(k,R,O,M)=>{const F=O===void 0?R:O instanceof e.Name?(R instanceof e.Name?_(k,R,O):T(k,R,O),O):R instanceof e.Name?(T(k,O,R),R):S(R,O);return M===e.Name&&!(F instanceof e.Name)?D(k,F):F}}Mn.mergeEvaluated={props:h({mergeNames:(_,T,S)=>_.if((0,e._)`${S} !== true && ${T} !== undefined`,()=>{_.if((0,e._)`${T} === true`,()=>_.assign(S,!0),()=>_.assign(S,(0,e._)`${S} || {}`).code((0,e._)`Object.assign(${S}, ${T})`))}),mergeToName:(_,T,S)=>_.if((0,e._)`${S} !== true`,()=>{T===!0?_.assign(S,!0):(_.assign(S,(0,e._)`${S} || {}`),p(_,S,T))}),mergeValues:(_,T)=>_===!0?!0:{..._,...T},resultToName:m}),items:h({mergeNames:(_,T,S)=>_.if((0,e._)`${S} !== true && ${T} !== undefined`,()=>_.assign(S,(0,e._)`${T} === true ? true : ${S} > ${T} ? ${S} : ${T}`)),mergeToName:(_,T,S)=>_.if((0,e._)`${S} !== true`,()=>_.assign(S,T===!0?!0:(0,e._)`${S} > ${T} ? ${S} : ${T}`)),mergeValues:(_,T)=>_===!0?!0:Math.max(_,T),resultToName:(_,T)=>_.var("items",T)})};function m(_,T){if(T===!0)return _.var("props",!0);const S=_.var("props",(0,e._)`{}`);return T!==void 0&&p(_,S,T),S}Mn.evaluatedPropsToName=m;function p(_,T,S){Object.keys(S).forEach(D=>_.assign((0,e._)`${T}${(0,e.getProperty)(D)}`,!0))}Mn.setEvaluated=p;const g={};function v(_,T){return _.scopeValue("func",{ref:T,code:g[T.code]||(g[T.code]=new t._Code(T.code))})}Mn.useFunc=v;var b;(function(_){_[_.Num=0]="Num",_[_.Str=1]="Str"})(b||(Mn.Type=b={}));function w(_,T,S){if(_ instanceof e.Name){const D=T===b.Num;return S?D?(0,e._)`"[" + ${_} + "]"`:(0,e._)`"['" + ${_} + "']"`:D?(0,e._)`"/" + ${_}`:(0,e._)`"/" + ${_}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,e.getProperty)(_).toString():"/"+c(_)}Mn.getErrorPath=w;function E(_,T,S=_.opts.strictSchema){if(S){if(T=`strict mode: ${T}`,S===!0)throw new Error(T);_.self.logger.warn(T)}}return Mn.checkStrictMode=E,Mn}var Hk={},The;function Eg(){if(The)return Hk;The=1,Object.defineProperty(Hk,"__esModule",{value:!0});const e=Hn(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Hk.default=t,Hk}var Che;function vM(){return Che||(Che=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Hn(),n=vr(),r=Eg();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:v})=>v?(0,t.str)`"${g}" keyword must be ${v} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,v=e.keywordError,b,w){const{it:E}=g,{gen:_,compositeRule:T,allErrors:S}=E,D=f(g,v,b);w??(T||S)?u(_,D):l(E,(0,t._)`[${D}]`)}e.reportError=i;function o(g,v=e.keywordError,b){const{it:w}=g,{gen:E,compositeRule:_,allErrors:T}=w,S=f(g,v,b);u(E,S),_||T||l(w,r.default.vErrors)}e.reportExtraError=o;function s(g,v){g.assign(r.default.errors,v),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(v,()=>g.assign((0,t._)`${r.default.vErrors}.length`,v),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=s;function a({gen:g,keyword:v,schemaValue:b,data:w,errsCount:E,it:_}){if(E===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",E,r.default.errors,S=>{g.const(T,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,_.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${_.errSchemaPath}/${v}`),_.opts.verbose&&(g.assign((0,t._)`${T}.schema`,b),g.assign((0,t._)`${T}.data`,w))})}e.extendErrors=a;function u(g,v){const b=g.const("err",v);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,v){const{gen:b,validateName:w,schemaEnv:E}=g;E.$async?b.throw((0,t._)`new ${g.ValidationError}(${v})`):(b.assign((0,t._)`${w}.errors`,v),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,v,b){const{createErrors:w}=g.it;return w===!1?(0,t._)`{}`:d(g,v,b)}function d(g,v,b={}){const{gen:w,it:E}=g,_=[h(E,b),m(g,b)];return p(g,v,_),w.object(..._)}function h({errorPath:g},{instancePath:v}){const b=v?(0,t.str)`${g}${(0,n.getErrorPath)(v,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function m({keyword:g,it:{errSchemaPath:v}},{schemaPath:b,parentSchema:w}){let E=w?v:(0,t.str)`${v}/${g}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function p(g,{params:v,message:b},w){const{keyword:E,data:_,schemaValue:T,it:S}=g,{opts:D,propertyName:k,topSchemaRef:R,schemaPath:O}=S;w.push([c.keyword,E],[c.params,typeof v=="function"?v(g):v||(0,t._)`{}`]),D.messages&&w.push([c.message,typeof b=="function"?b(g):b]),D.verbose&&w.push([c.schema,T],[c.parentSchema,(0,t._)`${R}${O}`],[r.default.data,_]),k&&w.push([c.propertyName,k])}}(S9)),S9}var She;function MHt(){if(She)return Xg;She=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.boolOrEmptySchema=Xg.topBoolOrEmptySchema=void 0;const e=vM(),t=Hn(),n=Eg(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?s(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Xg.topBoolOrEmptySchema=i;function o(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),s(a)):l.var(u,!0)}Xg.boolOrEmptySchema=o;function s(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return Xg}var Es={},Qg={},Ahe;function kPe(){if(Ahe)return Qg;Ahe=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.getRules=Qg.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}Qg.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Qg.getRules=r,Qg}var Mh={},Dhe;function IPe(){if(Dhe)return Mh;Dhe=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.shouldUseRule=Mh.shouldUseGroup=Mh.schemaHasRulesForType=void 0;function e({schema:r,self:i},o){const s=i.RULES.types[o];return s&&s!==!0&&t(r,s)}Mh.schemaHasRulesForType=e;function t(r,i){return i.rules.some(o=>n(r,o))}Mh.shouldUseGroup=t;function n(r,i){var o;return r[i.keyword]!==void 0||((o=i.definition.implements)===null||o===void 0?void 0:o.some(s=>r[s]!==void 0))}return Mh.shouldUseRule=n,Mh}var khe;function h4(){if(khe)return Es;khe=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.reportTypeError=Es.checkDataTypes=Es.checkDataType=Es.coerceAndCheckDataType=Es.getJSONTypes=Es.getSchemaTypes=Es.DataType=void 0;const e=kPe(),t=IPe(),n=vM(),r=Hn(),i=vr();var o;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(o||(Es.DataType=o={}));function s(b){const w=a(b.type);if(w.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&w.push("null")}return w}Es.getSchemaTypes=s;function a(b){const w=Array.isArray(b)?b:b?[b]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}Es.getJSONTypes=a;function u(b,w){const{gen:E,data:_,opts:T}=b,S=c(w,T.coerceTypes),D=w.length>0&&!(S.length===0&&w.length===1&&(0,t.schemaHasRulesForType)(b,w[0]));if(D){const k=m(w,_,T.strictNumbers,o.Wrong);E.if(k,()=>{S.length?f(b,w,S):g(b)})}return D}Es.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(b,w){return w?b.filter(E=>l.has(E)||w==="array"&&E==="array"):[]}function f(b,w,E){const{gen:_,data:T,opts:S}=b,D=_.let("dataType",(0,r._)`typeof ${T}`),k=_.let("coerced",(0,r._)`undefined`);S.coerceTypes==="array"&&_.if((0,r._)`${D} == 'object' && Array.isArray(${T}) && ${T}.length == 1`,()=>_.assign(T,(0,r._)`${T}[0]`).assign(D,(0,r._)`typeof ${T}`).if(m(w,T,S.strictNumbers),()=>_.assign(k,T))),_.if((0,r._)`${k} !== undefined`);for(const O of E)(l.has(O)||O==="array"&&S.coerceTypes==="array")&&R(O);_.else(),g(b),_.endIf(),_.if((0,r._)`${k} !== undefined`,()=>{_.assign(T,k),d(b,k)});function R(O){switch(O){case"string":_.elseIf((0,r._)`${D} == "number" || ${D} == "boolean"`).assign(k,(0,r._)`"" + ${T}`).elseIf((0,r._)`${T} === null`).assign(k,(0,r._)`""`);return;case"number":_.elseIf((0,r._)`${D} == "boolean" || ${T} === null
              || (${D} == "string" && ${T} && ${T} == +${T})`).assign(k,(0,r._)`+${T}`);return;case"integer":_.elseIf((0,r._)`${D} === "boolean" || ${T} === null
              || (${D} === "string" && ${T} && ${T} == +${T} && !(${T} % 1))`).assign(k,(0,r._)`+${T}`);return;case"boolean":_.elseIf((0,r._)`${T} === "false" || ${T} === 0 || ${T} === null`).assign(k,!1).elseIf((0,r._)`${T} === "true" || ${T} === 1`).assign(k,!0);return;case"null":_.elseIf((0,r._)`${T} === "" || ${T} === 0 || ${T} === false`),_.assign(k,null);return;case"array":_.elseIf((0,r._)`${D} === "string" || ${D} === "number"
              || ${D} === "boolean" || ${T} === null`).assign(k,(0,r._)`[${T}]`)}}}function d({gen:b,parentData:w,parentDataProperty:E},_){b.if((0,r._)`${w} !== undefined`,()=>b.assign((0,r._)`${w}[${E}]`,_))}function h(b,w,E,_=o.Correct){const T=_===o.Correct?r.operators.EQ:r.operators.NEQ;let S;switch(b){case"null":return(0,r._)`${w} ${T} null`;case"array":S=(0,r._)`Array.isArray(${w})`;break;case"object":S=(0,r._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":S=D((0,r._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":S=D();break;default:return(0,r._)`typeof ${w} ${T} ${b}`}return _===o.Correct?S:(0,r.not)(S);function D(k=r.nil){return(0,r.and)((0,r._)`typeof ${w} == "number"`,k,E?(0,r._)`isFinite(${w})`:r.nil)}}Es.checkDataType=h;function m(b,w,E,_){if(b.length===1)return h(b[0],w,E,_);let T;const S=(0,i.toHash)(b);if(S.array&&S.object){const D=(0,r._)`typeof ${w} != "object"`;T=S.null?D:(0,r._)`!${w} || ${D}`,delete S.null,delete S.array,delete S.object}else T=r.nil;S.number&&delete S.integer;for(const D in S)T=(0,r.and)(T,h(D,w,E,_));return T}Es.checkDataTypes=m;const p={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:w})=>typeof b=="string"?(0,r._)`{type: ${b}}`:(0,r._)`{type: ${w}}`};function g(b){const w=v(b);(0,n.reportError)(w,p)}Es.reportTypeError=g;function v(b){const{gen:w,data:E,schema:_}=b,T=(0,i.schemaRefOrVal)(b,_,"type");return{gen:w,keyword:"type",data:E,schema:_.type,schemaCode:T,schemaValue:T,parentSchema:_,params:{},it:b}}return Es}var U_={},Ihe;function $Ht(){if(Ihe)return U_;Ihe=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.assignDefaults=void 0;const e=Hn(),t=vr();function n(i,o){const{properties:s,items:a}=i.schema;if(o==="object"&&s)for(const u in s)r(i,u,s[u].default);else o==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}U_.assignDefaults=n;function r(i,o,s){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(s===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(o)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(s)}`)}return U_}var Uc={},Pr={},Rhe;function Uf(){if(Rhe)return Pr;Rhe=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.validateUnion=Pr.validateArray=Pr.usePattern=Pr.callValidateCode=Pr.schemaProperties=Pr.allSchemaProperties=Pr.noPropertyInData=Pr.propertyInData=Pr.isOwnProperty=Pr.hasPropFunc=Pr.reportMissingProp=Pr.checkMissingProp=Pr.checkReportMissingProp=void 0;const e=Hn(),t=vr(),n=Eg(),r=vr();function i(b,w){const{gen:E,data:_,it:T}=b;E.if(c(E,_,w,T.opts.ownProperties),()=>{b.setParams({missingProperty:(0,e._)`${w}`},!0),b.error()})}Pr.checkReportMissingProp=i;function o({gen:b,data:w,it:{opts:E}},_,T){return(0,e.or)(..._.map(S=>(0,e.and)(c(b,w,S,E.ownProperties),(0,e._)`${T} = ${S}`)))}Pr.checkMissingProp=o;function s(b,w){b.setParams({missingProperty:w},!0),b.error()}Pr.reportMissingProp=s;function a(b){return b.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Pr.hasPropFunc=a;function u(b,w,E){return(0,e._)`${a(b)}.call(${w}, ${E})`}Pr.isOwnProperty=u;function l(b,w,E,_){const T=(0,e._)`${w}${(0,e.getProperty)(E)} !== undefined`;return _?(0,e._)`${T} && ${u(b,w,E)}`:T}Pr.propertyInData=l;function c(b,w,E,_){const T=(0,e._)`${w}${(0,e.getProperty)(E)} === undefined`;return _?(0,e.or)(T,(0,e.not)(u(b,w,E))):T}Pr.noPropertyInData=c;function f(b){return b?Object.keys(b).filter(w=>w!=="__proto__"):[]}Pr.allSchemaProperties=f;function d(b,w){return f(w).filter(E=>!(0,t.alwaysValidSchema)(b,w[E]))}Pr.schemaProperties=d;function h({schemaCode:b,data:w,it:{gen:E,topSchemaRef:_,schemaPath:T,errorPath:S},it:D},k,R,O){const M=O?(0,e._)`${b}, ${w}, ${_}${T}`:w,F=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,S)],[n.default.parentData,D.parentData],[n.default.parentDataProperty,D.parentDataProperty],[n.default.rootData,n.default.rootData]];D.opts.dynamicRef&&F.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const L=(0,e._)`${M}, ${E.object(...F)}`;return R!==e.nil?(0,e._)`${k}.call(${R}, ${L})`:(0,e._)`${k}(${L})`}Pr.callValidateCode=h;const m=(0,e._)`new RegExp`;function p({gen:b,it:{opts:w}},E){const _=w.unicodeRegExp?"u":"",{regExp:T}=w.code,S=T(E,_);return b.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,e._)`${T.code==="new RegExp"?m:(0,r.useFunc)(b,T)}(${E}, ${_})`})}Pr.usePattern=p;function g(b){const{gen:w,data:E,keyword:_,it:T}=b,S=w.name("valid");if(T.allErrors){const k=w.let("valid",!0);return D(()=>w.assign(k,!1)),k}return w.var(S,!0),D(()=>w.break()),S;function D(k){const R=w.const("len",(0,e._)`${E}.length`);w.forRange("i",0,R,O=>{b.subschema({keyword:_,dataProp:O,dataPropType:t.Type.Num},S),w.if((0,e.not)(S),k)})}}Pr.validateArray=g;function v(b){const{gen:w,schema:E,keyword:_,it:T}=b;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(R=>(0,t.alwaysValidSchema)(T,R))&&!T.opts.unevaluated)return;const D=w.let("valid",!1),k=w.name("_valid");w.block(()=>E.forEach((R,O)=>{const M=b.subschema({keyword:_,schemaProp:O,compositeRule:!0},k);w.assign(D,(0,e._)`${D} || ${k}`),b.mergeValidEvaluated(M,k)||w.if((0,e.not)(D))})),b.result(D,()=>b.reset(),()=>b.error(!0))}return Pr.validateUnion=v,Pr}var Nhe;function LHt(){if(Nhe)return Uc;Nhe=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.validateKeywordUsage=Uc.validSchemaType=Uc.funcKeywordCode=Uc.macroKeywordCode=void 0;const e=Hn(),t=Eg(),n=Uf(),r=vM();function i(d,h){const{gen:m,keyword:p,schema:g,parentSchema:v,it:b}=d,w=h.macro.call(b.self,g,v,b),E=l(m,p,w);b.opts.validateSchema!==!1&&b.self.validateSchema(w,!0);const _=m.name("valid");d.subschema({schema:w,schemaPath:e.nil,errSchemaPath:`${b.errSchemaPath}/${p}`,topSchemaRef:E,compositeRule:!0},_),d.pass(_,()=>d.error(!0))}Uc.macroKeywordCode=i;function o(d,h){var m;const{gen:p,keyword:g,schema:v,parentSchema:b,$data:w,it:E}=d;u(E,h);const _=!w&&h.compile?h.compile.call(E.self,v,b,E):h.validate,T=l(p,g,_),S=p.let("valid");d.block$data(S,D),d.ok((m=h.valid)!==null&&m!==void 0?m:S);function D(){if(h.errors===!1)O(),h.modifying&&s(d),M(()=>d.error());else{const F=h.async?k():R();h.modifying&&s(d),M(()=>a(d,F))}}function k(){const F=p.let("ruleErrs",null);return p.try(()=>O((0,e._)`await `),L=>p.assign(S,!1).if((0,e._)`${L} instanceof ${E.ValidationError}`,()=>p.assign(F,(0,e._)`${L}.errors`),()=>p.throw(L))),F}function R(){const F=(0,e._)`${T}.errors`;return p.assign(F,null),O(e.nil),F}function O(F=h.async?(0,e._)`await `:e.nil){const L=E.opts.passContext?t.default.this:t.default.self,H=!("compile"in h&&!w||h.schema===!1);p.assign(S,(0,e._)`${F}${(0,n.callValidateCode)(d,T,L,H)}`,h.modifying)}function M(F){var L;p.if((0,e.not)((L=h.valid)!==null&&L!==void 0?L:S),F)}}Uc.funcKeywordCode=o;function s(d){const{gen:h,data:m,it:p}=d;h.if(p.parentData,()=>h.assign(m,(0,e._)`${p.parentData}[${p.parentDataProperty}]`))}function a(d,h){const{gen:m}=d;m.if((0,e._)`Array.isArray(${h})`,()=>{m.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,m){if(m===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof m=="function"?{ref:m}:{ref:m,code:(0,e.stringify)(m)})}function c(d,h,m=!1){return!h.length||h.some(p=>p==="array"?Array.isArray(d):p==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==p||m&&typeof d>"u")}Uc.validSchemaType=c;function f({schema:d,opts:h,self:m,errSchemaPath:p},g,v){if(Array.isArray(g.keyword)?!g.keyword.includes(v):g.keyword!==v)throw new Error("ajv implementation error");const b=g.dependencies;if(b!=null&&b.some(w=>!Object.prototype.hasOwnProperty.call(d,w)))throw new Error(`parent schema must have dependencies of ${v}: ${b.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[v])){const E=`keyword "${v}" value is invalid at path "${p}": `+m.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")m.logger.error(E);else throw new Error(E)}}return Uc.validateKeywordUsage=f,Uc}var $h={},Phe;function BHt(){if(Phe)return $h;Phe=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.extendSubschemaMode=$h.extendSubschemaData=$h.getSubschema=void 0;const e=Hn(),t=vr();function n(o,{keyword:s,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(s!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(s!==void 0){const d=o.schema[s];return a===void 0?{schema:d,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(s)}`,errSchemaPath:`${o.errSchemaPath}/${s}`}:{schema:d[a],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(s)}${(0,e.getProperty)(a)}`,errSchemaPath:`${o.errSchemaPath}/${s}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}$h.getSubschema=n;function r(o,s,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=s;if(a!==void 0){const{errorPath:m,dataPathArr:p,opts:g}=s,v=d.let("data",(0,e._)`${s.data}${(0,e.getProperty)(a)}`,!0);h(v),o.errorPath=(0,e.str)`${m}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${a}`,o.dataPathArr=[...p,o.parentDataProperty]}if(l!==void 0){const m=l instanceof e.Name?l:d.let("data",l,!0);h(m),f!==void 0&&(o.propertyName=f)}c&&(o.dataTypes=c);function h(m){o.data=m,o.dataLevel=s.dataLevel+1,o.dataTypes=[],s.definedProperties=new Set,o.parentData=s.data,o.dataNames=[...s.dataNames,m]}}$h.extendSubschemaData=r;function i(o,{jtdDiscriminator:s,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(o.compositeRule=u),l!==void 0&&(o.createErrors=l),c!==void 0&&(o.allErrors=c),o.jtdDiscriminator=s,o.jtdMetadata=a}return $h.extendSubschemaMode=i,$h}var Oa={},I9={exports:{}},Ohe;function jHt(){if(Ohe)return I9.exports;Ohe=1;var e=I9.exports=function(r,i,o){typeof i=="function"&&(o=i,i={}),o=i.cb||o;var s=typeof o=="function"?o:o.pre||function(){},a=o.post||function(){};t(i,s,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,o,s,a,u,l,c,f,d){if(s&&typeof s=="object"&&!Array.isArray(s)){i(s,a,u,l,c,f,d);for(var h in s){var m=s[h];if(Array.isArray(m)){if(h in e.arrayKeywords)for(var p=0;p<m.length;p++)t(r,i,o,m[p],a+"/"+h+"/"+p,u,a,h,s,p)}else if(h in e.propsKeywords){if(m&&typeof m=="object")for(var g in m)t(r,i,o,m[g],a+"/"+h+"/"+n(g),u,a,h,s,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,o,m,a+"/"+h,u,a,h,s)}o(s,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return I9.exports}var Fhe;function bM(){if(Fhe)return Oa;Fhe=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.getSchemaRefs=Oa.resolveUrl=Oa.normalizeId=Oa._getFullPath=Oa.getFullPath=Oa.inlineRef=void 0;const e=vr(),t=eG(),n=jHt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(p,g=!0){return typeof p=="boolean"?!0:g===!0?!s(p):g?a(p)<=g:!1}Oa.inlineRef=i;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function s(p){for(const g in p){if(o.has(g))return!0;const v=p[g];if(Array.isArray(v)&&v.some(s)||typeof v=="object"&&s(v))return!0}return!1}function a(p){let g=0;for(const v in p){if(v==="$ref")return 1/0;if(g++,!r.has(v)&&(typeof p[v]=="object"&&(0,e.eachItem)(p[v],b=>g+=a(b)),g===1/0))return 1/0}return g}function u(p,g="",v){v!==!1&&(g=f(g));const b=p.parse(g);return l(p,b)}Oa.getFullPath=u;function l(p,g){return p.serialize(g).split("#")[0]+"#"}Oa._getFullPath=l;const c=/#\/?$/;function f(p){return p?p.replace(c,""):""}Oa.normalizeId=f;function d(p,g,v){return v=f(v),p.resolve(g,v)}Oa.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function m(p,g){if(typeof p=="boolean")return{};const{schemaId:v,uriResolver:b}=this.opts,w=f(p[v]||g),E={"":w},_=u(b,w,!1),T={},S=new Set;return n(p,{allKeys:!0},(R,O,M,F)=>{if(F===void 0)return;const L=_+O;let H=E[F];typeof R[v]=="string"&&(H=V.call(this,R[v])),Q.call(this,R.$anchor),Q.call(this,R.$dynamicAnchor),E[O]=H;function V(K){const Z=this.opts.uriResolver.resolve;if(K=f(H?Z(H,K):K),S.has(K))throw k(K);S.add(K);let U=this.refs[K];return typeof U=="string"&&(U=this.refs[U]),typeof U=="object"?D(R,U.schema,K):K!==f(L)&&(K[0]==="#"?(D(R,T[K],K),T[K]=R):this.refs[K]=L),K}function Q(K){if(typeof K=="string"){if(!h.test(K))throw new Error(`invalid anchor "${K}"`);V.call(this,`#${K}`)}}}),T;function D(R,O,M){if(O!==void 0&&!t(R,O))throw k(M)}function k(R){return new Error(`reference "${R}" resolves to more than one schema`)}}return Oa.getSchemaRefs=m,Oa}var Mhe;function xM(){if(Mhe)return Fh;Mhe=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.getData=Fh.KeywordCxt=Fh.validateFunctionCode=void 0;const e=MHt(),t=h4(),n=IPe(),r=h4(),i=$Ht(),o=LHt(),s=BHt(),a=Hn(),u=Eg(),l=bM(),c=vr(),f=vM();function d(fe){if(_(fe)&&(S(fe),E(fe))){g(fe);return}h(fe,()=>(0,e.topBoolOrEmptySchema)(fe))}Fh.validateFunctionCode=d;function h({gen:fe,validateName:se,schema:Ce,schemaEnv:Ae,opts:Ue},Xe){Ue.code.es5?fe.func(se,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Ae.$async,()=>{fe.code((0,a._)`"use strict"; ${b(Ce,Ue)}`),p(fe,Ue),fe.code(Xe)}):fe.func(se,(0,a._)`${u.default.data}, ${m(Ue)}`,Ae.$async,()=>fe.code(b(Ce,Ue)).code(Xe))}function m(fe){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${fe.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function p(fe,se){fe.if(u.default.valCxt,()=>{fe.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),fe.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),fe.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),fe.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),se.dynamicRef&&fe.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{fe.var(u.default.instancePath,(0,a._)`""`),fe.var(u.default.parentData,(0,a._)`undefined`),fe.var(u.default.parentDataProperty,(0,a._)`undefined`),fe.var(u.default.rootData,u.default.data),se.dynamicRef&&fe.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(fe){const{schema:se,opts:Ce,gen:Ae}=fe;h(fe,()=>{Ce.$comment&&se.$comment&&F(fe),R(fe),Ae.let(u.default.vErrors,null),Ae.let(u.default.errors,0),Ce.unevaluated&&v(fe),D(fe),L(fe)})}function v(fe){const{gen:se,validateName:Ce}=fe;fe.evaluated=se.const("evaluated",(0,a._)`${Ce}.evaluated`),se.if((0,a._)`${fe.evaluated}.dynamicProps`,()=>se.assign((0,a._)`${fe.evaluated}.props`,(0,a._)`undefined`)),se.if((0,a._)`${fe.evaluated}.dynamicItems`,()=>se.assign((0,a._)`${fe.evaluated}.items`,(0,a._)`undefined`))}function b(fe,se){const Ce=typeof fe=="object"&&fe[se.schemaId];return Ce&&(se.code.source||se.code.process)?(0,a._)`/*# sourceURL=${Ce} */`:a.nil}function w(fe,se){if(_(fe)&&(S(fe),E(fe))){T(fe,se);return}(0,e.boolOrEmptySchema)(fe,se)}function E({schema:fe,self:se}){if(typeof fe=="boolean")return!fe;for(const Ce in fe)if(se.RULES.all[Ce])return!0;return!1}function _(fe){return typeof fe.schema!="boolean"}function T(fe,se){const{schema:Ce,gen:Ae,opts:Ue}=fe;Ue.$comment&&Ce.$comment&&F(fe),O(fe),M(fe);const Xe=Ae.const("_errs",u.default.errors);D(fe,Xe),Ae.var(se,(0,a._)`${Xe} === ${u.default.errors}`)}function S(fe){(0,c.checkUnknownRules)(fe),k(fe)}function D(fe,se){if(fe.opts.jtd)return V(fe,[],!1,se);const Ce=(0,t.getSchemaTypes)(fe.schema),Ae=(0,t.coerceAndCheckDataType)(fe,Ce);V(fe,Ce,!Ae,se)}function k(fe){const{schema:se,errSchemaPath:Ce,opts:Ae,self:Ue}=fe;se.$ref&&Ae.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(se,Ue.RULES)&&Ue.logger.warn(`$ref: keywords ignored in schema at path "${Ce}"`)}function R(fe){const{schema:se,opts:Ce}=fe;se.default!==void 0&&Ce.useDefaults&&Ce.strictSchema&&(0,c.checkStrictMode)(fe,"default is ignored in the schema root")}function O(fe){const se=fe.schema[fe.opts.schemaId];se&&(fe.baseId=(0,l.resolveUrl)(fe.opts.uriResolver,fe.baseId,se))}function M(fe){if(fe.schema.$async&&!fe.schemaEnv.$async)throw new Error("async schema in sync schema")}function F({gen:fe,schemaEnv:se,schema:Ce,errSchemaPath:Ae,opts:Ue}){const Xe=Ce.$comment;if(Ue.$comment===!0)fe.code((0,a._)`${u.default.self}.logger.log(${Xe})`);else if(typeof Ue.$comment=="function"){const Le=(0,a.str)`${Ae}/$comment`,Ge=fe.scopeValue("root",{ref:se.root});fe.code((0,a._)`${u.default.self}.opts.$comment(${Xe}, ${Le}, ${Ge}.schema)`)}}function L(fe){const{gen:se,schemaEnv:Ce,validateName:Ae,ValidationError:Ue,opts:Xe}=fe;Ce.$async?se.if((0,a._)`${u.default.errors} === 0`,()=>se.return(u.default.data),()=>se.throw((0,a._)`new ${Ue}(${u.default.vErrors})`)):(se.assign((0,a._)`${Ae}.errors`,u.default.vErrors),Xe.unevaluated&&H(fe),se.return((0,a._)`${u.default.errors} === 0`))}function H({gen:fe,evaluated:se,props:Ce,items:Ae}){Ce instanceof a.Name&&fe.assign((0,a._)`${se}.props`,Ce),Ae instanceof a.Name&&fe.assign((0,a._)`${se}.items`,Ae)}function V(fe,se,Ce,Ae){const{gen:Ue,schema:Xe,data:Le,allErrors:Ge,opts:et,self:Et}=fe,{RULES:ht}=Et;if(Xe.$ref&&(et.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(Xe,ht))){Ue.block(()=>ge(fe,"$ref",ht.all.$ref.definition));return}et.jtd||K(fe,se),Ue.block(()=>{for(const te of ht.rules)xt(te);xt(ht.post)});function xt(te){(0,n.shouldUseGroup)(Xe,te)&&(te.type?(Ue.if((0,r.checkDataType)(te.type,Le,et.strictNumbers)),Q(fe,te),se.length===1&&se[0]===te.type&&Ce&&(Ue.else(),(0,r.reportTypeError)(fe)),Ue.endIf()):Q(fe,te),Ge||Ue.if((0,a._)`${u.default.errors} === ${Ae||0}`))}}function Q(fe,se){const{gen:Ce,schema:Ae,opts:{useDefaults:Ue}}=fe;Ue&&(0,i.assignDefaults)(fe,se.type),Ce.block(()=>{for(const Xe of se.rules)(0,n.shouldUseRule)(Ae,Xe)&&ge(fe,Xe.keyword,Xe.definition,se.type)})}function K(fe,se){fe.schemaEnv.meta||!fe.opts.strictTypes||(Z(fe,se),fe.opts.allowUnionTypes||U(fe,se),B(fe,fe.dataTypes))}function Z(fe,se){if(se.length){if(!fe.dataTypes.length){fe.dataTypes=se;return}se.forEach(Ce=>{z(fe.dataTypes,Ce)||X(fe,`type "${Ce}" not allowed by context "${fe.dataTypes.join(",")}"`)}),G(fe,se)}}function U(fe,se){se.length>1&&!(se.length===2&&se.includes("null"))&&X(fe,"use allowUnionTypes to allow union type keyword")}function B(fe,se){const Ce=fe.self.RULES.all;for(const Ae in Ce){const Ue=Ce[Ae];if(typeof Ue=="object"&&(0,n.shouldUseRule)(fe.schema,Ue)){const{type:Xe}=Ue.definition;Xe.length&&!Xe.some(Le=>q(se,Le))&&X(fe,`missing type "${Xe.join(",")}" for keyword "${Ae}"`)}}}function q(fe,se){return fe.includes(se)||se==="number"&&fe.includes("integer")}function z(fe,se){return fe.includes(se)||se==="integer"&&fe.includes("number")}function G(fe,se){const Ce=[];for(const Ae of fe.dataTypes)z(se,Ae)?Ce.push(Ae):se.includes("integer")&&Ae==="number"&&Ce.push("integer");fe.dataTypes=Ce}function X(fe,se){const Ce=fe.schemaEnv.baseId+fe.errSchemaPath;se+=` at "${Ce}" (strictTypes)`,(0,c.checkStrictMode)(fe,se,fe.opts.strictTypes)}class ne{constructor(se,Ce,Ae){if((0,o.validateKeywordUsage)(se,Ce,Ae),this.gen=se.gen,this.allErrors=se.allErrors,this.keyword=Ae,this.data=se.data,this.schema=se.schema[Ae],this.$data=Ce.$data&&se.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(se,this.schema,Ae,this.$data),this.schemaType=Ce.schemaType,this.parentSchema=se.schema,this.params={},this.it=se,this.def=Ce,this.$data)this.schemaCode=se.gen.const("vSchema",we(this.$data,se));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,Ce.schemaType,Ce.allowUndefined))throw new Error(`${Ae} value must be ${JSON.stringify(Ce.schemaType)}`);("code"in Ce?Ce.trackErrors:Ce.errors!==!1)&&(this.errsCount=se.gen.const("_errs",u.default.errors))}result(se,Ce,Ae){this.failResult((0,a.not)(se),Ce,Ae)}failResult(se,Ce,Ae){this.gen.if(se),Ae?Ae():this.error(),Ce?(this.gen.else(),Ce(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(se,Ce){this.failResult((0,a.not)(se),void 0,Ce)}fail(se){if(se===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(se),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(se){if(!this.$data)return this.fail(se);const{schemaCode:Ce}=this;this.fail((0,a._)`${Ce} !== undefined && (${(0,a.or)(this.invalid$data(),se)})`)}error(se,Ce,Ae){if(Ce){this.setParams(Ce),this._error(se,Ae),this.setParams({});return}this._error(se,Ae)}_error(se,Ce){(se?f.reportExtraError:f.reportError)(this,this.def.error,Ce)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(se){this.allErrors||this.gen.if(se)}setParams(se,Ce){Ce?Object.assign(this.params,se):this.params=se}block$data(se,Ce,Ae=a.nil){this.gen.block(()=>{this.check$data(se,Ae),Ce()})}check$data(se=a.nil,Ce=a.nil){if(!this.$data)return;const{gen:Ae,schemaCode:Ue,schemaType:Xe,def:Le}=this;Ae.if((0,a.or)((0,a._)`${Ue} === undefined`,Ce)),se!==a.nil&&Ae.assign(se,!0),(Xe.length||Le.validateSchema)&&(Ae.elseIf(this.invalid$data()),this.$dataError(),se!==a.nil&&Ae.assign(se,!1)),Ae.else()}invalid$data(){const{gen:se,schemaCode:Ce,schemaType:Ae,def:Ue,it:Xe}=this;return(0,a.or)(Le(),Ge());function Le(){if(Ae.length){if(!(Ce instanceof a.Name))throw new Error("ajv implementation error");const et=Array.isArray(Ae)?Ae:[Ae];return(0,a._)`${(0,r.checkDataTypes)(et,Ce,Xe.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Ge(){if(Ue.validateSchema){const et=se.scopeValue("validate$data",{ref:Ue.validateSchema});return(0,a._)`!${et}(${Ce})`}return a.nil}}subschema(se,Ce){const Ae=(0,s.getSubschema)(this.it,se);(0,s.extendSubschemaData)(Ae,this.it,se),(0,s.extendSubschemaMode)(Ae,se);const Ue={...this.it,...Ae,items:void 0,props:void 0};return w(Ue,Ce),Ue}mergeEvaluated(se,Ce){const{it:Ae,gen:Ue}=this;Ae.opts.unevaluated&&(Ae.props!==!0&&se.props!==void 0&&(Ae.props=c.mergeEvaluated.props(Ue,se.props,Ae.props,Ce)),Ae.items!==!0&&se.items!==void 0&&(Ae.items=c.mergeEvaluated.items(Ue,se.items,Ae.items,Ce)))}mergeValidEvaluated(se,Ce){const{it:Ae,gen:Ue}=this;if(Ae.opts.unevaluated&&(Ae.props!==!0||Ae.items!==!0))return Ue.if(Ce,()=>this.mergeEvaluated(se,a.Name)),!0}}Fh.KeywordCxt=ne;function ge(fe,se,Ce,Ae){const Ue=new ne(fe,Ce,se);"code"in Ce?Ce.code(Ue,Ae):Ue.$data&&Ce.validate?(0,o.funcKeywordCode)(Ue,Ce):"macro"in Ce?(0,o.macroKeywordCode)(Ue,Ce):(Ce.compile||Ce.validate)&&(0,o.funcKeywordCode)(Ue,Ce)}const me=/^\/(?:[^~]|~0|~1)*$/,ye=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function we(fe,{dataLevel:se,dataNames:Ce,dataPathArr:Ae}){let Ue,Xe;if(fe==="")return u.default.rootData;if(fe[0]==="/"){if(!me.test(fe))throw new Error(`Invalid JSON-pointer: ${fe}`);Ue=fe,Xe=u.default.rootData}else{const Et=ye.exec(fe);if(!Et)throw new Error(`Invalid JSON-pointer: ${fe}`);const ht=+Et[1];if(Ue=Et[2],Ue==="#"){if(ht>=se)throw new Error(et("property/index",ht));return Ae[se-ht]}if(ht>se)throw new Error(et("data",ht));if(Xe=Ce[se-ht],!Ue)return Xe}let Le=Xe;const Ge=Ue.split("/");for(const Et of Ge)Et&&(Xe=(0,a._)`${Xe}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Et))}`,Le=(0,a._)`${Le} && ${Xe}`);return Le;function et(Et,ht){return`Cannot access ${Et} ${ht} levels up, current level is ${se}`}}return Fh.getData=we,Fh}var qk={},$he;function tJ(){if($he)return qk;$he=1,Object.defineProperty(qk,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return qk.default=e,qk}var Wk={},Lhe;function wM(){if(Lhe)return Wk;Lhe=1,Object.defineProperty(Wk,"__esModule",{value:!0});const e=bM();class t extends Error{constructor(r,i,o,s){super(s||`can't resolve reference ${o} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,o),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return Wk.default=t,Wk}var tl={},Bhe;function nJ(){if(Bhe)return tl;Bhe=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.resolveSchema=tl.getCompilingSchema=tl.resolveRef=tl.compileSchema=tl.SchemaEnv=void 0;const e=Hn(),t=tJ(),n=Eg(),r=bM(),i=vr(),o=xM();class s{constructor(v){var b;this.refs={},this.dynamicAnchors={};let w;typeof v.schema=="object"&&(w=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(b=v.baseId)!==null&&b!==void 0?b:(0,r.normalizeId)(w==null?void 0:w[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=w==null?void 0:w.$async,this.refs={}}}tl.SchemaEnv=s;function a(g){const v=c.call(this,g);if(v)return v;const b=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:w,lines:E}=this.opts.code,{ownProperties:_}=this.opts,T=new e.CodeGen(this.scope,{es5:w,lines:E,ownProperties:_});let S;g.$async&&(S=T.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const D=T.scopeName("validate");g.validateName=D;const k={gen:T,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:T.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:D,ValidationError:S,schema:g.schema,schemaEnv:g,rootId:b,baseId:g.baseId||b,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let R;try{this._compilations.add(g),(0,o.validateFunctionCode)(k),T.optimize(this.opts.code.optimize);const O=T.toString();R=`${T.scopeRefs(n.default.scope)}return ${O}`,this.opts.code.process&&(R=this.opts.code.process(R,g));const F=new Function(`${n.default.self}`,`${n.default.scope}`,R)(this,this.scope.get());if(this.scope.value(D,{ref:F}),F.errors=null,F.schema=g.schema,F.schemaEnv=g,g.$async&&(F.$async=!0),this.opts.code.source===!0&&(F.source={validateName:D,validateCode:O,scopeValues:T._values}),this.opts.unevaluated){const{props:L,items:H}=k;F.evaluated={props:L instanceof e.Name?void 0:L,items:H instanceof e.Name?void 0:H,dynamicProps:L instanceof e.Name,dynamicItems:H instanceof e.Name},F.source&&(F.source.evaluated=(0,e.stringify)(F.evaluated))}return g.validate=F,g}catch(O){throw delete g.validate,delete g.validateName,R&&this.logger.error("Error compiling schema, function code:",R),O}finally{this._compilations.delete(g)}}tl.compileSchema=a;function u(g,v,b){var w;b=(0,r.resolveUrl)(this.opts.uriResolver,v,b);const E=g.refs[b];if(E)return E;let _=d.call(this,g,b);if(_===void 0){const T=(w=g.localRefs)===null||w===void 0?void 0:w[b],{schemaId:S}=this.opts;T&&(_=new s({schema:T,schemaId:S,root:g,baseId:v}))}if(_!==void 0)return g.refs[b]=l.call(this,_)}tl.resolveRef=u;function l(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const v of this._compilations)if(f(v,g))return v}tl.getCompilingSchema=c;function f(g,v){return g.schema===v.schema&&g.root===v.root&&g.baseId===v.baseId}function d(g,v){let b;for(;typeof(b=this.refs[v])=="string";)v=b;return b||this.schemas[v]||h.call(this,g,v)}function h(g,v){const b=this.opts.uriResolver.parse(v),w=(0,r._getFullPath)(this.opts.uriResolver,b);let E=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&w===E)return p.call(this,b,g);const _=(0,r.normalizeId)(w),T=this.refs[_]||this.schemas[_];if(typeof T=="string"){const S=h.call(this,g,T);return typeof(S==null?void 0:S.schema)!="object"?void 0:p.call(this,b,S)}if(typeof(T==null?void 0:T.schema)=="object"){if(T.validate||a.call(this,T),_===(0,r.normalizeId)(v)){const{schema:S}=T,{schemaId:D}=this.opts,k=S[D];return k&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,k)),new s({schema:S,schemaId:D,root:g,baseId:E})}return p.call(this,b,T)}}tl.resolveSchema=h;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function p(g,{baseId:v,schema:b,root:w}){var E;if(((E=g.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const S of g.fragment.slice(1).split("/")){if(typeof b=="boolean")return;const D=b[(0,i.unescapeFragment)(S)];if(D===void 0)return;b=D;const k=typeof b=="object"&&b[this.opts.schemaId];!m.has(S)&&k&&(v=(0,r.resolveUrl)(this.opts.uriResolver,v,k))}let _;if(typeof b!="boolean"&&b.$ref&&!(0,i.schemaHasRulesButRef)(b,this.RULES)){const S=(0,r.resolveUrl)(this.opts.uriResolver,v,b.$ref);_=h.call(this,w,S)}const{schemaId:T}=this.opts;if(_=_||new s({schema:b,schemaId:T,root:w,baseId:v}),_.schema!==_.root.schema)return _}return tl}const zHt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",UHt="Meta-schema for $data reference (JSON AnySchema extension proposal)",VHt="object",HHt=["$data"],qHt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},WHt=!1,GHt={$id:zHt,description:UHt,type:VHt,required:HHt,properties:qHt,additionalProperties:WHt};var Gk={},V_={exports:{}},R9,jhe;function YHt(){return jhe||(jhe=1,R9={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),R9}var N9,zhe;function KHt(){if(zhe)return N9;zhe=1;const{HEX:e}=YHt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(p){if(a(p,".")<3)return{host:p,isIPV4:!1};const g=p.match(t)||[],[v]=g;return v?{host:s(v,"."),isIPV4:!0}:{host:p,isIPV4:!1}}function r(p,g=!1){let v="",b=!0;for(const w of p){if(e[w]===void 0)return;w!=="0"&&b===!0&&(b=!1),b||(v+=w)}return g&&v.length===0&&(v="0"),v}function i(p){let g=0;const v={error:!1,address:"",zone:""},b=[],w=[];let E=!1,_=!1,T=!1;function S(){if(w.length){if(E===!1){const D=r(w);if(D!==void 0)b.push(D);else return v.error=!0,!1}w.length=0}return!0}for(let D=0;D<p.length;D++){const k=p[D];if(!(k==="["||k==="]"))if(k===":"){if(_===!0&&(T=!0),!S())break;if(g++,b.push(":"),g>7){v.error=!0;break}D-1>=0&&p[D-1]===":"&&(_=!0);continue}else if(k==="%"){if(!S())break;E=!0}else{w.push(k);continue}}return w.length&&(E?v.zone=w.join(""):T?b.push(w.join("")):b.push(r(w))),v.address=b.join(""),v}function o(p){if(a(p,":")<2)return{host:p,isIPV6:!1};const g=i(p);if(g.error)return{host:p,isIPV6:!1};{let v=g.address,b=g.address;return g.zone&&(v+="%"+g.zone,b+="%25"+g.zone),{host:v,escapedHost:b,isIPV6:!0}}}function s(p,g){let v="",b=!0;const w=p.length;for(let E=0;E<w;E++){const _=p[E];_==="0"&&b?(E+1<=w&&p[E+1]===g||E+1===w)&&(v+=_,b=!1):(_===g?b=!0:b=!1,v+=_)}return v}function a(p,g){let v=0;for(let b=0;b<p.length;b++)p[b]===g&&v++;return v}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(p){const g=[];for(;p.length;)if(p.match(u))p=p.replace(u,"");else if(p.match(l))p=p.replace(l,"/");else if(p.match(c))p=p.replace(c,"/"),g.pop();else if(p==="."||p==="..")p="";else{const v=p.match(f);if(v){const b=v[0];p=p.slice(b.length),g.push(b)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(p,g){const v=g!==!0?escape:unescape;return p.scheme!==void 0&&(p.scheme=v(p.scheme)),p.userinfo!==void 0&&(p.userinfo=v(p.userinfo)),p.host!==void 0&&(p.host=v(p.host)),p.path!==void 0&&(p.path=v(p.path)),p.query!==void 0&&(p.query=v(p.query)),p.fragment!==void 0&&(p.fragment=v(p.fragment)),p}function m(p){const g=[];if(p.userinfo!==void 0&&(g.push(p.userinfo),g.push("@")),p.host!==void 0){let v=unescape(p.host);const b=n(v);if(b.isIPV4)v=b.host;else{const w=o(b.host);w.isIPV6===!0?v=`[${w.escapedHost}]`:v=p.host}g.push(v)}return(typeof p.port=="number"||typeof p.port=="string")&&(g.push(":"),g.push(String(p.port))),g.length?g.join(""):void 0}return N9={recomposeAuthority:m,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:o,stringArrayToHexStripped:r},N9}var P9,Uhe;function XHt(){if(Uhe)return P9;Uhe=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(b){return typeof b.secure=="boolean"?b.secure:String(b.scheme).toLowerCase()==="wss"}function r(b){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b}function i(b){const w=String(b.scheme).toLowerCase()==="https";return(b.port===(w?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}function o(b){return b.secure=n(b),b.resourceName=(b.path||"/")+(b.query?"?"+b.query:""),b.path=void 0,b.query=void 0,b}function s(b){if((b.port===(n(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){const[w,E]=b.resourceName.split("?");b.path=w&&w!=="/"?w:void 0,b.query=E,b.resourceName=void 0}return b.fragment=void 0,b}function a(b,w){if(!b.path)return b.error="URN can not be parsed",b;const E=b.path.match(t);if(E){const _=w.scheme||b.scheme||"urn";b.nid=E[1].toLowerCase(),b.nss=E[2];const T=`${_}:${w.nid||b.nid}`,S=v[T];b.path=void 0,S&&(b=S.parse(b,w))}else b.error=b.error||"URN can not be parsed.";return b}function u(b,w){const E=w.scheme||b.scheme||"urn",_=b.nid.toLowerCase(),T=`${E}:${w.nid||_}`,S=v[T];S&&(b=S.serialize(b,w));const D=b,k=b.nss;return D.path=`${_||w.nid}:${k}`,w.skipEscape=!0,D}function l(b,w){const E=b;return E.uuid=E.nss,E.nss=void 0,!w.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(b){const w=b;return w.nss=(b.uuid||"").toLowerCase(),w}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:o,serialize:s},m={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},v={http:f,https:d,ws:h,wss:m,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return P9=v,P9}var Vhe;function QHt(){if(Vhe)return V_.exports;Vhe=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=KHt(),o=XHt();function s(g,v){return typeof g=="string"?g=c(m(g,v),v):typeof g=="object"&&(g=m(c(g,v),v)),g}function a(g,v,b){const w=Object.assign({scheme:"null"},b),E=u(m(g,w),m(v,w),w,!0);return c(E,{...w,skipEscape:!0})}function u(g,v,b,w){const E={};return w||(g=m(c(g,b),b),v=m(c(v,b),b)),b=b||{},!b.tolerant&&v.scheme?(E.scheme=v.scheme,E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.path?(v.path.charAt(0)==="/"?E.path=n(v.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?E.path="/"+v.path:g.path?E.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+v.path:E.path=v.path,E.path=n(E.path)),E.query=v.query):(E.path=g.path,v.query!==void 0?E.query=v.query:E.query=g.query),E.userinfo=g.userinfo,E.host=g.host,E.port=g.port),E.scheme=g.scheme),E.fragment=v.fragment,E}function l(g,v,b){return typeof g=="string"?(g=unescape(g),g=c(i(m(g,b),!0),{...b,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...b,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=c(i(m(v,b),!0),{...b,skipEscape:!0})):typeof v=="object"&&(v=c(i(v,!0),{...b,skipEscape:!0})),g.toLowerCase()===v.toLowerCase()}function c(g,v){const b={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},w=Object.assign({},v),E=[],_=o[(w.scheme||b.scheme||"").toLowerCase()];_&&_.serialize&&_.serialize(b,w),b.path!==void 0&&(w.skipEscape?b.path=unescape(b.path):(b.path=escape(b.path),b.scheme!==void 0&&(b.path=b.path.split("%3A").join(":")))),w.reference!=="suffix"&&b.scheme&&E.push(b.scheme,":");const T=r(b);if(T!==void 0&&(w.reference!=="suffix"&&E.push("//"),E.push(T),b.path&&b.path.charAt(0)!=="/"&&E.push("/")),b.path!==void 0){let S=b.path;!w.absolutePath&&(!_||!_.absolutePath)&&(S=n(S)),T===void 0&&(S=S.replace(/^\/\//u,"/%2F")),E.push(S)}return b.query!==void 0&&E.push("?",b.query),b.fragment!==void 0&&E.push("#",b.fragment),E.join("")}const f=Array.from({length:127},(g,v)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(v)));function d(g){let v=0;for(let b=0,w=g.length;b<w;++b)if(v=g.charCodeAt(b),v>126||f[v])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function m(g,v){const b=Object.assign({},v),w={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=g.indexOf("%")!==-1;let _=!1;b.reference==="suffix"&&(g=(b.scheme?b.scheme+":":"")+"//"+g);const T=g.match(h);if(T){if(w.scheme=T[1],w.userinfo=T[3],w.host=T[4],w.port=parseInt(T[5],10),w.path=T[6]||"",w.query=T[7],w.fragment=T[8],isNaN(w.port)&&(w.port=T[5]),w.host){const D=t(w.host);if(D.isIPV4===!1){const k=e(D.host);w.host=k.host.toLowerCase(),_=k.isIPV6}else w.host=D.host,_=!0}w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&w.query===void 0&&!w.path?w.reference="same-document":w.scheme===void 0?w.reference="relative":w.fragment===void 0?w.reference="absolute":w.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==w.reference&&(w.error=w.error||"URI is not a "+b.reference+" reference.");const S=o[(b.scheme||w.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!S||!S.unicodeSupport)&&w.host&&(b.domainHost||S&&S.domainHost)&&_===!1&&d(w.host))try{w.host=URL.domainToASCII(w.host.toLowerCase())}catch(D){w.error=w.error||"Host's domain name can not be converted to ASCII: "+D}(!S||S&&!S.skipNormalize)&&(E&&w.scheme!==void 0&&(w.scheme=unescape(w.scheme)),E&&w.host!==void 0&&(w.host=unescape(w.host)),w.path&&(w.path=escape(unescape(w.path))),w.fragment&&(w.fragment=encodeURI(decodeURIComponent(w.fragment)))),S&&S.parse&&S.parse(w,b)}else w.error=w.error||"URI can not be parsed.";return w}const p={SCHEMES:o,normalize:s,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:m};return V_.exports=p,V_.exports.default=p,V_.exports.fastUri=p,V_.exports}var Hhe;function JHt(){if(Hhe)return Gk;Hhe=1,Object.defineProperty(Gk,"__esModule",{value:!0});const e=QHt();return e.code='require("ajv/dist/runtime/uri").default',Gk.default=e,Gk}var qhe;function ZHt(){return qhe||(qhe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=xM();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Hn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=tJ(),i=wM(),o=kPe(),s=nJ(),a=Hn(),u=bM(),l=h4(),c=vr(),f=GHt,d=JHt(),h=(U,B)=>new RegExp(U,B);h.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],p=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w(U){var B,q,z,G,X,ne,ge,me,ye,we,fe,se,Ce,Ae,Ue,Xe,Le,Ge,et,Et,ht,xt,te,le,be;const ae=U.strict,pe=(B=U.code)===null||B===void 0?void 0:B.optimize,Ee=pe===!0||pe===void 0?1:pe||0,$e=(z=(q=U.code)===null||q===void 0?void 0:q.regExp)!==null&&z!==void 0?z:h,Ne=(G=U.uriResolver)!==null&&G!==void 0?G:d.default;return{strictSchema:(ne=(X=U.strictSchema)!==null&&X!==void 0?X:ae)!==null&&ne!==void 0?ne:!0,strictNumbers:(me=(ge=U.strictNumbers)!==null&&ge!==void 0?ge:ae)!==null&&me!==void 0?me:!0,strictTypes:(we=(ye=U.strictTypes)!==null&&ye!==void 0?ye:ae)!==null&&we!==void 0?we:"log",strictTuples:(se=(fe=U.strictTuples)!==null&&fe!==void 0?fe:ae)!==null&&se!==void 0?se:"log",strictRequired:(Ae=(Ce=U.strictRequired)!==null&&Ce!==void 0?Ce:ae)!==null&&Ae!==void 0?Ae:!1,code:U.code?{...U.code,optimize:Ee,regExp:$e}:{optimize:Ee,regExp:$e},loopRequired:(Ue=U.loopRequired)!==null&&Ue!==void 0?Ue:b,loopEnum:(Xe=U.loopEnum)!==null&&Xe!==void 0?Xe:b,meta:(Le=U.meta)!==null&&Le!==void 0?Le:!0,messages:(Ge=U.messages)!==null&&Ge!==void 0?Ge:!0,inlineRefs:(et=U.inlineRefs)!==null&&et!==void 0?et:!0,schemaId:(Et=U.schemaId)!==null&&Et!==void 0?Et:"$id",addUsedSchema:(ht=U.addUsedSchema)!==null&&ht!==void 0?ht:!0,validateSchema:(xt=U.validateSchema)!==null&&xt!==void 0?xt:!0,validateFormats:(te=U.validateFormats)!==null&&te!==void 0?te:!0,unicodeRegExp:(le=U.unicodeRegExp)!==null&&le!==void 0?le:!0,int32range:(be=U.int32range)!==null&&be!==void 0?be:!0,uriResolver:Ne}}class E{constructor(B={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,B=this.opts={...B,...w(B)};const{es5:q,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:p,es5:q,lines:z}),this.logger=M(B.logger);const G=B.validateFormats;B.validateFormats=!1,this.RULES=(0,o.getRules)(),_.call(this,g,B,"NOT SUPPORTED"),_.call(this,v,B,"DEPRECATED","warn"),this._metaOpts=R.call(this),B.formats&&D.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),B.keywords&&k.call(this,B.keywords),typeof B.meta=="object"&&this.addMetaSchema(B.meta),S.call(this),B.validateFormats=G}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:B,meta:q,schemaId:z}=this.opts;let G=f;z==="id"&&(G={...f},G.id=G.$id,delete G.$id),q&&B&&this.addMetaSchema(G,G[z],!1)}defaultMeta(){const{meta:B,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof B=="object"?B[q]||B:void 0}validate(B,q){let z;if(typeof B=="string"){if(z=this.getSchema(B),!z)throw new Error(`no schema with key or ref "${B}"`)}else z=this.compile(B);const G=z(q);return"$async"in z||(this.errors=z.errors),G}compile(B,q){const z=this._addSchema(B,q);return z.validate||this._compileSchemaEnv(z)}compileAsync(B,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return G.call(this,B,q);async function G(we,fe){await X.call(this,we.$schema);const se=this._addSchema(we,fe);return se.validate||ne.call(this,se)}async function X(we){we&&!this.getSchema(we)&&await G.call(this,{$ref:we},!0)}async function ne(we){try{return this._compileSchemaEnv(we)}catch(fe){if(!(fe instanceof i.default))throw fe;return ge.call(this,fe),await me.call(this,fe.missingSchema),ne.call(this,we)}}function ge({missingSchema:we,missingRef:fe}){if(this.refs[we])throw new Error(`AnySchema ${we} is loaded but ${fe} cannot be resolved`)}async function me(we){const fe=await ye.call(this,we);this.refs[we]||await X.call(this,fe.$schema),this.refs[we]||this.addSchema(fe,we,q)}async function ye(we){const fe=this._loading[we];if(fe)return fe;try{return await(this._loading[we]=z(we))}finally{delete this._loading[we]}}}addSchema(B,q,z,G=this.opts.validateSchema){if(Array.isArray(B)){for(const ne of B)this.addSchema(ne,void 0,z,G);return this}let X;if(typeof B=="object"){const{schemaId:ne}=this.opts;if(X=B[ne],X!==void 0&&typeof X!="string")throw new Error(`schema ${ne} must be string`)}return q=(0,u.normalizeId)(q||X),this._checkUnique(q),this.schemas[q]=this._addSchema(B,z,q,G,!0),this}addMetaSchema(B,q,z=this.opts.validateSchema){return this.addSchema(B,q,!0,z),this}validateSchema(B,q){if(typeof B=="boolean")return!0;let z;if(z=B.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const G=this.validate(z,B);if(!G&&q){const X="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(X);else throw new Error(X)}return G}getSchema(B){let q;for(;typeof(q=T.call(this,B))=="string";)B=q;if(q===void 0){const{schemaId:z}=this.opts,G=new s.SchemaEnv({schema:{},schemaId:z});if(q=s.resolveSchema.call(this,G,B),!q)return;this.refs[B]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(B){if(B instanceof RegExp)return this._removeAllSchemas(this.schemas,B),this._removeAllSchemas(this.refs,B),this;switch(typeof B){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=T.call(this,B);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[B],delete this.refs[B],this}case"object":{const q=B;this._cache.delete(q);let z=B[this.opts.schemaId];return z&&(z=(0,u.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(B){for(const q of B)this.addKeyword(q);return this}addKeyword(B,q){let z;if(typeof B=="string")z=B,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=z);else if(typeof B=="object"&&q===void 0){if(q=B,z=q.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,z,q),!q)return(0,c.eachItem)(z,X=>H.call(this,X)),this;Q.call(this,q);const G={...q,type:(0,l.getJSONTypes)(q.type),schemaType:(0,l.getJSONTypes)(q.schemaType)};return(0,c.eachItem)(z,G.type.length===0?X=>H.call(this,X,G):X=>G.type.forEach(ne=>H.call(this,X,G,ne))),this}getKeyword(B){const q=this.RULES.all[B];return typeof q=="object"?q.definition:!!q}removeKeyword(B){const{RULES:q}=this;delete q.keywords[B],delete q.all[B];for(const z of q.rules){const G=z.rules.findIndex(X=>X.keyword===B);G>=0&&z.rules.splice(G,1)}return this}addFormat(B,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[B]=q,this}errorsText(B=this.errors,{separator:q=", ",dataVar:z="data"}={}){return!B||B.length===0?"No errors":B.map(G=>`${z}${G.instancePath} ${G.message}`).reduce((G,X)=>G+q+X)}$dataMetaSchema(B,q){const z=this.RULES.all;B=JSON.parse(JSON.stringify(B));for(const G of q){const X=G.split("/").slice(1);let ne=B;for(const ge of X)ne=ne[ge];for(const ge in z){const me=z[ge];if(typeof me!="object")continue;const{$data:ye}=me.definition,we=ne[ge];ye&&we&&(ne[ge]=Z(we))}}return B}_removeAllSchemas(B,q){for(const z in B){const G=B[z];(!q||q.test(z))&&(typeof G=="string"?delete B[z]:G&&!G.meta&&(this._cache.delete(G.schema),delete B[z]))}}_addSchema(B,q,z,G=this.opts.validateSchema,X=this.opts.addUsedSchema){let ne;const{schemaId:ge}=this.opts;if(typeof B=="object")ne=B[ge];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof B!="boolean")throw new Error("schema must be object or boolean")}let me=this._cache.get(B);if(me!==void 0)return me;z=(0,u.normalizeId)(ne||z);const ye=u.getSchemaRefs.call(this,B,z);return me=new s.SchemaEnv({schema:B,schemaId:ge,meta:q,baseId:z,localRefs:ye}),this._cache.set(me.schema,me),X&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=me),G&&this.validateSchema(B,!0),me}_checkUnique(B){if(this.schemas[B]||this.refs[B])throw new Error(`schema with key or id "${B}" already exists`)}_compileSchemaEnv(B){if(B.meta?this._compileMetaSchema(B):s.compileSchema.call(this,B),!B.validate)throw new Error("ajv implementation error");return B.validate}_compileMetaSchema(B){const q=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,B)}finally{this.opts=q}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function _(U,B,q,z="error"){for(const G in U){const X=G;X in B&&this.logger[z](`${q}: option ${G}. ${U[X]}`)}}function T(U){return U=(0,u.normalizeId)(U),this.schemas[U]||this.refs[U]}function S(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const B in U)this.addSchema(U[B],B)}function D(){for(const U in this.opts.formats){const B=this.opts.formats[U];B&&this.addFormat(U,B)}}function k(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const B in U){const q=U[B];q.keyword||(q.keyword=B),this.addKeyword(q)}}function R(){const U={...this.opts};for(const B of m)delete U[B];return U}const O={log(){},warn(){},error(){}};function M(U){if(U===!1)return O;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const F=/^[a-z_$][a-z0-9_$:-]*$/i;function L(U,B){const{RULES:q}=this;if((0,c.eachItem)(U,z=>{if(q.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!F.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!B&&B.$data&&!("code"in B||"validate"in B))throw new Error('$data keyword must have "code" or "validate" function')}function H(U,B,q){var z;const G=B==null?void 0:B.post;if(q&&G)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:X}=this;let ne=G?X.post:X.rules.find(({type:me})=>me===q);if(ne||(ne={type:q,rules:[]},X.rules.push(ne)),X.keywords[U]=!0,!B)return;const ge={keyword:U,definition:{...B,type:(0,l.getJSONTypes)(B.type),schemaType:(0,l.getJSONTypes)(B.schemaType)}};B.before?V.call(this,ne,ge,B.before):ne.rules.push(ge),X.all[U]=ge,(z=B.implements)===null||z===void 0||z.forEach(me=>this.addKeyword(me))}function V(U,B,q){const z=U.rules.findIndex(G=>G.keyword===q);z>=0?U.rules.splice(z,0,B):(U.rules.push(B),this.logger.warn(`rule ${q} is not defined`))}function Q(U){let{metaSchema:B}=U;B!==void 0&&(U.$data&&this.opts.$data&&(B=Z(B)),U.validateSchema=this.compile(B,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Z(U){return{anyOf:[U,K]}}}(C9)),C9}var Yk={},Kk={},Xk={},Whe;function eqt(){if(Whe)return Xk;Whe=1,Object.defineProperty(Xk,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Xk.default=e,Xk}var Dm={},Ghe;function tqt(){if(Ghe)return Dm;Ghe=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.callRef=Dm.getValidate=void 0;const e=wM(),t=Uf(),n=Hn(),r=Eg(),i=nJ(),o=vr(),s={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:m,validateName:p,opts:g,self:v}=d,{root:b}=m;if((f==="#"||f==="#/")&&h===b.baseId)return E();const w=i.resolveRef.call(v,b,h,f);if(w===void 0)throw new e.default(d.opts.uriResolver,h,f);if(w instanceof i.SchemaEnv)return _(w);return T(w);function E(){if(m===b)return u(l,p,m,m.$async);const S=c.scopeValue("root",{ref:b});return u(l,(0,n._)`${S}.validate`,b,b.$async)}function _(S){const D=a(l,S);u(l,D,S,S.$async)}function T(S){const D=c.scopeValue("schema",g.code.source===!0?{ref:S,code:(0,n.stringify)(S)}:{ref:S}),k=c.name("valid"),R=l.subschema({schema:S,dataTypes:[],schemaPath:n.nil,topSchemaRef:D,errSchemaPath:f},k);l.mergeEvaluated(R),l.ok(k)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}Dm.getValidate=a;function u(l,c,f,d){const{gen:h,it:m}=l,{allErrors:p,schemaEnv:g,opts:v}=m,b=v.passContext?r.default.this:n.nil;d?w():E();function w(){if(!g.$async)throw new Error("async schema referenced by sync schema");const S=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,b)}`),T(c),p||h.assign(S,!0)},D=>{h.if((0,n._)`!(${D} instanceof ${m.ValidationError})`,()=>h.throw(D)),_(D),p||h.assign(S,!1)}),l.ok(S)}function E(){l.result((0,t.callValidateCode)(l,c,b),()=>T(c),()=>_(c))}function _(S){const D=(0,n._)`${S}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${D} : ${r.default.vErrors}.concat(${D})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function T(S){var D;if(!m.opts.unevaluated)return;const k=(D=f==null?void 0:f.validate)===null||D===void 0?void 0:D.evaluated;if(m.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(m.props=o.mergeEvaluated.props(h,k.props,m.props));else{const R=h.var("props",(0,n._)`${S}.evaluated.props`);m.props=o.mergeEvaluated.props(h,R,m.props,n.Name)}if(m.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(m.items=o.mergeEvaluated.items(h,k.items,m.items));else{const R=h.var("items",(0,n._)`${S}.evaluated.items`);m.items=o.mergeEvaluated.items(h,R,m.items,n.Name)}}}return Dm.callRef=u,Dm.default=s,Dm}var Yhe;function nqt(){if(Yhe)return Kk;Yhe=1,Object.defineProperty(Kk,"__esModule",{value:!0});const e=eqt(),t=tqt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Kk.default=n,Kk}var Qk={},Jk={},Khe;function rqt(){if(Khe)return Jk;Khe=1,Object.defineProperty(Jk,"__esModule",{value:!0});const e=Hn(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:o,schemaCode:s})=>(0,e.str)`must be ${n[o].okStr} ${s}`,params:({keyword:o,schemaCode:s})=>(0,e._)`{comparison: ${n[o].okStr}, limit: ${s}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(o){const{keyword:s,data:a,schemaCode:u}=o;o.fail$data((0,e._)`${a} ${n[s].fail} ${u} || isNaN(${a})`)}};return Jk.default=i,Jk}var Zk={},Xhe;function iqt(){if(Xhe)return Zk;Xhe=1,Object.defineProperty(Zk,"__esModule",{value:!0});const e=Hn(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:o,schemaCode:s,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${s} === 0 || (${l} = ${o}/${s}, ${c}))`)}};return Zk.default=n,Zk}var eI={},tI={},Qhe;function oqt(){if(Qhe)return tI;Qhe=1,Object.defineProperty(tI,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,o;for(;i<n;)r++,o=t.charCodeAt(i++),o>=55296&&o<=56319&&i<n&&(o=t.charCodeAt(i),(o&64512)===56320&&i++);return r}return tI.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',tI}var Jhe;function sqt(){if(Jhe)return eI;Jhe=1,Object.defineProperty(eI,"__esModule",{value:!0});const e=Hn(),t=vr(),n=oqt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:s}){const a=o==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${s} characters`},params:({schemaCode:o})=>(0,e._)`{limit: ${o}}`},code(o){const{keyword:s,data:a,schemaCode:u,it:l}=o,c=s==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(o.gen,n.default)}(${a})`;o.fail$data((0,e._)`${f} ${c} ${u}`)}};return eI.default=i,eI}var nI={},Zhe;function aqt(){if(Zhe)return nI;Zhe=1,Object.defineProperty(nI,"__esModule",{value:!0});const e=Uf(),t=Hn(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:o,$data:s,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=s?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${o})`)}};return nI.default=r,nI}var rI={},epe;function uqt(){if(epe)return rI;epe=1,Object.defineProperty(rI,"__esModule",{value:!0});const e=Hn(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const o=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:o,schemaCode:s}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${o}).length ${a} ${s}`)}};return rI.default=n,rI}var iI={},tpe;function lqt(){if(tpe)return iI;tpe=1,Object.defineProperty(iI,"__esModule",{value:!0});const e=Uf(),t=Hn(),n=vr(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,t.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,t._)`{missingProperty: ${o}}`},code(o){const{gen:s,schema:a,schemaCode:u,data:l,$data:c,it:f}=o,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?m():p(),d.strictRequired){const b=o.parentSchema.properties,{definedProperties:w}=o.it;for(const E of a)if((b==null?void 0:b[E])===void 0&&!w.has(E)){const _=f.schemaEnv.baseId+f.errSchemaPath,T=`required property "${E}" is not defined at "${_}" (strictRequired)`;(0,n.checkStrictMode)(f,T,f.opts.strictRequired)}}function m(){if(h||c)o.block$data(t.nil,g);else for(const b of a)(0,e.checkReportMissingProp)(o,b)}function p(){const b=s.let("missing");if(h||c){const w=s.let("valid",!0);o.block$data(w,()=>v(b,w)),o.ok(w)}else s.if((0,e.checkMissingProp)(o,a,b)),(0,e.reportMissingProp)(o,b),s.else()}function g(){s.forOf("prop",u,b=>{o.setParams({missingProperty:b}),s.if((0,e.noPropertyInData)(s,l,b,d.ownProperties),()=>o.error())})}function v(b,w){o.setParams({missingProperty:b}),s.forOf(b,u,()=>{s.assign(w,(0,e.propertyInData)(s,l,b,d.ownProperties)),s.if((0,t.not)(w),()=>{o.error(),s.break()})},t.nil)}}};return iI.default=i,iI}var oI={},npe;function cqt(){if(npe)return oI;npe=1,Object.defineProperty(oI,"__esModule",{value:!0});const e=Hn(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const o=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:o,schemaCode:s}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${o}.length ${a} ${s}`)}};return oI.default=n,oI}var sI={},aI={},rpe;function rJ(){if(rpe)return aI;rpe=1,Object.defineProperty(aI,"__esModule",{value:!0});const e=eG();return e.code='require("ajv/dist/runtime/equal").default',aI.default=e,aI}var ipe;function fqt(){if(ipe)return sI;ipe=1,Object.defineProperty(sI,"__esModule",{value:!0});const e=h4(),t=Hn(),n=vr(),r=rJ(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:s,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${s} are identical)`,params:({params:{i:s,j:a}})=>(0,t._)`{i: ${s}, j: ${a}}`},code(s){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=s;if(!l&&!c)return;const m=a.let("valid"),p=f.items?(0,e.getSchemaTypes)(f.items):[];s.block$data(m,g,(0,t._)`${d} === false`),s.ok(m);function g(){const E=a.let("i",(0,t._)`${u}.length`),_=a.let("j");s.setParams({i:E,j:_}),a.assign(m,!0),a.if((0,t._)`${E} > 1`,()=>(v()?b:w)(E,_))}function v(){return p.length>0&&!p.some(E=>E==="object"||E==="array")}function b(E,_){const T=a.name("item"),S=(0,e.checkDataTypes)(p,T,h.opts.strictNumbers,e.DataType.Wrong),D=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(T,(0,t._)`${u}[${E}]`),a.if(S,(0,t._)`continue`),p.length>1&&a.if((0,t._)`typeof ${T} == "string"`,(0,t._)`${T} += "_"`),a.if((0,t._)`typeof ${D}[${T}] == "number"`,()=>{a.assign(_,(0,t._)`${D}[${T}]`),s.error(),a.assign(m,!1).break()}).code((0,t._)`${D}[${T}] = ${E}`)})}function w(E,_){const T=(0,n.useFunc)(a,r.default),S=a.name("outer");a.label(S).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${_} = ${E}; ${_}--;`,()=>a.if((0,t._)`${T}(${u}[${E}], ${u}[${_}])`,()=>{s.error(),a.assign(m,!1).break(S)})))}}};return sI.default=o,sI}var uI={},ope;function dqt(){if(ope)return uI;ope=1,Object.defineProperty(uI,"__esModule",{value:!0});const e=Hn(),t=vr(),n=rJ(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,e._)`{allowedValue: ${o}}`},code(o){const{gen:s,data:a,$data:u,schemaCode:l,schema:c}=o;u||c&&typeof c=="object"?o.fail$data((0,e._)`!${(0,t.useFunc)(s,n.default)}(${a}, ${l})`):o.fail((0,e._)`${c} !== ${a}`)}};return uI.default=i,uI}var lI={},spe;function hqt(){if(spe)return lI;spe=1,Object.defineProperty(lI,"__esModule",{value:!0});const e=Hn(),t=vr(),n=rJ(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,e._)`{allowedValues: ${o}}`},code(o){const{gen:s,data:a,$data:u,schema:l,schemaCode:c,it:f}=o;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const m=()=>h??(h=(0,t.useFunc)(s,n.default));let p;if(d||u)p=s.let("valid"),o.block$data(p,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const b=s.const("vSchema",c);p=(0,e.or)(...l.map((w,E)=>v(b,E)))}o.pass(p);function g(){s.assign(p,!1),s.forOf("v",c,b=>s.if((0,e._)`${m()}(${a}, ${b})`,()=>s.assign(p,!0).break()))}function v(b,w){const E=l[w];return typeof E=="object"&&E!==null?(0,e._)`${m()}(${a}, ${b}[${w}])`:(0,e._)`${a} === ${E}`}}};return lI.default=i,lI}var ape;function pqt(){if(ape)return Qk;ape=1,Object.defineProperty(Qk,"__esModule",{value:!0});const e=rqt(),t=iqt(),n=sqt(),r=aqt(),i=uqt(),o=lqt(),s=cqt(),a=fqt(),u=dqt(),l=hqt(),c=[e.default,t.default,n.default,r.default,i.default,o.default,s.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return Qk.default=c,Qk}var cI={},gb={},upe;function RPe(){if(upe)return gb;upe=1,Object.defineProperty(gb,"__esModule",{value:!0}),gb.validateAdditionalItems=void 0;const e=Hn(),t=vr(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{parentSchema:s,it:a}=o,{items:u}=s;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(o,u)}};function i(o,s){const{gen:a,schema:u,data:l,keyword:c,it:f}=o;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)o.setParams({len:s.length}),o.pass((0,e._)`${d} <= ${s.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const m=a.var("valid",(0,e._)`${d} <= ${s.length}`);a.if((0,e.not)(m),()=>h(m)),o.ok(m)}function h(m){a.forRange("i",s.length,d,p=>{o.subschema({keyword:c,dataProp:p,dataPropType:t.Type.Num},m),f.allErrors||a.if((0,e.not)(m),()=>a.break())})}}return gb.validateAdditionalItems=i,gb.default=r,gb}var fI={},yb={},lpe;function NPe(){if(lpe)return yb;lpe=1,Object.defineProperty(yb,"__esModule",{value:!0}),yb.validateTuple=void 0;const e=Hn(),t=vr(),n=Uf(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:s,it:a}=o;if(Array.isArray(s))return i(o,"additionalItems",s);a.items=!0,!(0,t.alwaysValidSchema)(a,s)&&o.ok((0,n.validateArray)(o))}};function i(o,s,a=o.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=o;p(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),m=u.const("len",(0,e._)`${c}.length`);a.forEach((g,v)=>{(0,t.alwaysValidSchema)(d,g)||(u.if((0,e._)`${m} > ${v}`,()=>o.subschema({keyword:f,schemaProp:v,dataProp:v},h)),o.ok(h))});function p(g){const{opts:v,errSchemaPath:b}=d,w=a.length,E=w===g.minItems&&(w===g.maxItems||g[s]===!1);if(v.strictTuples&&!E){const _=`"${f}" is ${w}-tuple, but minItems or maxItems/${s} are not specified or different at path "${b}"`;(0,t.checkStrictMode)(d,_,v.strictTuples)}}}return yb.validateTuple=i,yb.default=r,yb}var cpe;function mqt(){if(cpe)return fI;cpe=1,Object.defineProperty(fI,"__esModule",{value:!0});const e=NPe(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return fI.default=t,fI}var dI={},fpe;function gqt(){if(fpe)return dI;fpe=1,Object.defineProperty(dI,"__esModule",{value:!0});const e=Hn(),t=vr(),n=Uf(),r=RPe(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{schema:a,parentSchema:u,it:l}=s,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(s,c):s.ok((0,n.validateArray)(s)))}};return dI.default=o,dI}var hI={},dpe;function yqt(){if(dpe)return hI;dpe=1,Object.defineProperty(hI,"__esModule",{value:!0});const e=Hn(),t=vr(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:o}})=>o===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${o} valid item(s)`,params:({params:{min:i,max:o}})=>o===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${o}}`},code(i){const{gen:o,schema:s,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const m=o.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,s)){let w=(0,e._)`${m} >= ${c}`;f!==void 0&&(w=(0,e._)`${w} && ${m} <= ${f}`),i.pass(w);return}l.items=!0;const p=o.name("valid");f===void 0&&c===1?v(p,()=>o.if(p,()=>o.break())):c===0?(o.let(p,!0),f!==void 0&&o.if((0,e._)`${u}.length > 0`,g)):(o.let(p,!1),g()),i.result(p,()=>i.reset());function g(){const w=o.name("_valid"),E=o.let("count",0);v(w,()=>o.if(w,()=>b(E)))}function v(w,E){o.forRange("i",0,m,_=>{i.subschema({keyword:"contains",dataProp:_,dataPropType:t.Type.Num,compositeRule:!0},w),E()})}function b(w){o.code((0,e._)`${w}++`),f===void 0?o.if((0,e._)`${w} >= ${c}`,()=>o.assign(p,!0).break()):(o.if((0,e._)`${w} > ${f}`,()=>o.assign(p,!1).break()),c===1?o.assign(p,!0):o.if((0,e._)`${w} >= ${c}`,()=>o.assign(p,!0)))}}};return hI.default=r,hI}var O9={},hpe;function vqt(){return hpe||(hpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Hn(),n=vr(),r=Uf();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=o(u);s(u,l),a(u,c)}};function o({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function s(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const m in l){const p=l[m];if(p.length===0)continue;const g=(0,r.propertyInData)(c,f,m,d.opts.ownProperties);u.setParams({property:m,depsCount:p.length,deps:p.join(", ")}),d.allErrors?c.if(g,()=>{for(const v of p)(0,r.checkReportMissingProp)(u,v)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,p,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=s;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,m=c.name("valid");for(const p in l)(0,n.alwaysValidSchema)(h,l[p])||(c.if((0,r.propertyInData)(c,f,p,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:p},m);u.mergeValidEvaluated(g,m)},()=>c.var(m,!0)),u.ok(m))}e.validateSchemaDeps=a,e.default=i}(O9)),O9}var pI={},ppe;function bqt(){if(ppe)return pI;ppe=1,Object.defineProperty(pI,"__esModule",{value:!0});const e=Hn(),t=vr(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:o,schema:s,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,s))return;const l=o.name("valid");o.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),o.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||o.break()})}),i.ok(l)}};return pI.default=r,pI}var mI={},mpe;function PPe(){if(mpe)return mI;mpe=1,Object.defineProperty(mI,"__esModule",{value:!0});const e=Uf(),t=Hn(),n=Eg(),r=vr(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:s})=>(0,t._)`{additionalProperty: ${s.additionalProperty}}`},code(s){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=s;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:m}=d;if(d.props=!0,m.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const p=(0,e.allSchemaProperties)(l.properties),g=(0,e.allSchemaProperties)(l.patternProperties);v(),s.ok((0,t._)`${f} === ${n.default.errors}`);function v(){a.forIn("key",c,T=>{!p.length&&!g.length?E(T):a.if(b(T),()=>E(T))})}function b(T){let S;if(p.length>8){const D=(0,r.schemaRefOrVal)(d,l.properties,"properties");S=(0,e.isOwnProperty)(a,D,T)}else p.length?S=(0,t.or)(...p.map(D=>(0,t._)`${T} === ${D}`)):S=t.nil;return g.length&&(S=(0,t.or)(S,...g.map(D=>(0,t._)`${(0,e.usePattern)(s,D)}.test(${T})`))),(0,t.not)(S)}function w(T){a.code((0,t._)`delete ${c}[${T}]`)}function E(T){if(m.removeAdditional==="all"||m.removeAdditional&&u===!1){w(T);return}if(u===!1){s.setParams({additionalProperty:T}),s.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const S=a.name("valid");m.removeAdditional==="failing"?(_(T,S,!1),a.if((0,t.not)(S),()=>{s.reset(),w(T)})):(_(T,S),h||a.if((0,t.not)(S),()=>a.break()))}}function _(T,S,D){const k={keyword:"additionalProperties",dataProp:T,dataPropType:r.Type.Str};D===!1&&Object.assign(k,{compositeRule:!0,createErrors:!1,allErrors:!1}),s.subschema(k,S)}}};return mI.default=o,mI}var gI={},gpe;function xqt(){if(gpe)return gI;gpe=1,Object.defineProperty(gI,"__esModule",{value:!0});const e=xM(),t=Uf(),n=vr(),r=PPe(),i={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:s,schema:a,parentSchema:u,data:l,it:c}=o;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const g of f)c.definedProperties.add(g);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(s,(0,n.toHash)(f),c.props));const d=f.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(d.length===0)return;const h=s.name("valid");for(const g of d)m(g)?p(g):(s.if((0,t.propertyInData)(s,l,g,c.opts.ownProperties)),p(g),c.allErrors||s.else().var(h,!0),s.endIf()),o.it.definedProperties.add(g),o.ok(h);function m(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function p(g){o.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return gI.default=i,gI}var yI={},ype;function wqt(){if(ype)return yI;ype=1,Object.defineProperty(yI,"__esModule",{value:!0});const e=Uf(),t=Hn(),n=vr(),r=vr(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:s,schema:a,data:u,parentSchema:l,it:c}=o,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const m=f.strictSchema&&!f.allowMatchingProperties&&l.properties,p=s.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(s,c.props));const{props:g}=c;v();function v(){for(const E of d)m&&b(E),c.allErrors?w(E):(s.var(p,!0),w(E),s.if(p))}function b(E){for(const _ in m)new RegExp(E).test(_)&&(0,n.checkStrictMode)(c,`property ${_} matches pattern ${E} (use allowMatchingProperties)`)}function w(E){s.forIn("key",u,_=>{s.if((0,t._)`${(0,e.usePattern)(o,E)}.test(${_})`,()=>{const T=h.includes(E);T||o.subschema({keyword:"patternProperties",schemaProp:E,dataProp:_,dataPropType:r.Type.Str},p),c.opts.unevaluated&&g!==!0?s.assign((0,t._)`${g}[${_}]`,!0):!T&&!c.allErrors&&s.if((0,t.not)(p),()=>s.break())})})}}};return yI.default=i,yI}var vI={},vpe;function Eqt(){if(vpe)return vI;vpe=1,Object.defineProperty(vI,"__esModule",{value:!0});const e=vr(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:o}=n;if((0,e.alwaysValidSchema)(o,i)){n.fail();return}const s=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),n.failResult(s,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return vI.default=t,vI}var bI={},bpe;function _qt(){if(bpe)return bI;bpe=1,Object.defineProperty(bI,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Uf().validateUnion,error:{message:"must match a schema in anyOf"}};return bI.default=t,bI}var xI={},xpe;function Tqt(){if(xpe)return xI;xpe=1,Object.defineProperty(xI,"__esModule",{value:!0});const e=Hn(),t=vr(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:o,schema:s,parentSchema:a,it:u}=i;if(!Array.isArray(s))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=s,c=o.let("valid",!1),f=o.let("passing",null),d=o.name("_valid");i.setParams({passing:f}),o.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((m,p)=>{let g;(0,t.alwaysValidSchema)(u,m)?o.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},d),p>0&&o.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${p}]`).else(),o.if(d,()=>{o.assign(c,!0),o.assign(f,p),g&&i.mergeEvaluated(g,e.Name)})})}}};return xI.default=r,xI}var wI={},wpe;function Cqt(){if(wpe)return wI;wpe=1,Object.defineProperty(wI,"__esModule",{value:!0});const e=vr(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:o}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const s=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(o,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},s);n.ok(s),n.mergeEvaluated(l)})}};return wI.default=t,wI}var EI={},Epe;function Sqt(){if(Epe)return EI;Epe=1,Object.defineProperty(EI,"__esModule",{value:!0});const e=Hn(),t=vr(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,e.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,e._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:s,parentSchema:a,it:u}=o;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=s.let("valid",!0),d=s.name("_valid");if(h(),o.reset(),l&&c){const p=s.let("ifClause");o.setParams({ifClause:p}),s.if(d,m("then",p),m("else",p))}else l?s.if(d,m("then")):s.if((0,e.not)(d),m("else"));o.pass(f,()=>o.error(!0));function h(){const p=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);o.mergeEvaluated(p)}function m(p,g){return()=>{const v=o.subschema({keyword:p},d);s.assign(f,d),o.mergeValidEvaluated(v,f),g?s.assign(g,(0,e._)`${p}`):o.setParams({ifClause:p})}}}};function i(o,s){const a=o.schema[s];return a!==void 0&&!(0,t.alwaysValidSchema)(o,a)}return EI.default=r,EI}var _I={},_pe;function Aqt(){if(_pe)return _I;_pe=1,Object.defineProperty(_I,"__esModule",{value:!0});const e=vr(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return _I.default=t,_I}var Tpe;function Dqt(){if(Tpe)return cI;Tpe=1,Object.defineProperty(cI,"__esModule",{value:!0});const e=RPe(),t=mqt(),n=NPe(),r=gqt(),i=yqt(),o=vqt(),s=bqt(),a=PPe(),u=xqt(),l=wqt(),c=Eqt(),f=_qt(),d=Tqt(),h=Cqt(),m=Sqt(),p=Aqt();function g(v=!1){const b=[c.default,f.default,d.default,h.default,m.default,p.default,s.default,a.default,o.default,u.default,l.default];return v?b.push(t.default,r.default):b.push(e.default,n.default),b.push(i.default),b}return cI.default=g,cI}var TI={},CI={},Cpe;function kqt(){if(Cpe)return CI;Cpe=1,Object.defineProperty(CI,"__esModule",{value:!0});const e=Hn(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:o,data:s,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:m}=c;if(!f.validateFormats)return;a?p():g();function p(){const v=o.scopeValue("formats",{ref:m.formats,code:f.code.formats}),b=o.const("fDef",(0,e._)`${v}[${l}]`),w=o.let("fType"),E=o.let("format");o.if((0,e._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>o.assign(w,(0,e._)`${b}.type || "string"`).assign(E,(0,e._)`${b}.validate`),()=>o.assign(w,(0,e._)`"string"`).assign(E,b)),r.fail$data((0,e.or)(_(),T()));function _(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${E}`}function T(){const S=h.$async?(0,e._)`(${b}.async ? await ${E}(${s}) : ${E}(${s}))`:(0,e._)`${E}(${s})`,D=(0,e._)`(typeof ${E} == "function" ? ${S} : ${E}.test(${s}))`;return(0,e._)`${E} && ${E} !== true && ${w} === ${i} && !${D}`}}function g(){const v=m.formats[u];if(!v){_();return}if(v===!0)return;const[b,w,E]=T(v);b===i&&r.pass(S());function _(){if(f.strictSchema===!1){m.logger.warn(D());return}throw new Error(D());function D(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function T(D){const k=D instanceof RegExp?(0,e.regexpCode)(D):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,R=o.scopeValue("formats",{key:u,ref:D,code:k});return typeof D=="object"&&!(D instanceof RegExp)?[D.type||"string",D.validate,(0,e._)`${R}.validate`]:["string",D,R]}function S(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${s})`}return typeof w=="function"?(0,e._)`${E}(${s})`:(0,e._)`${E}.test(${s})`}}}};return CI.default=n,CI}var Spe;function Iqt(){if(Spe)return TI;Spe=1,Object.defineProperty(TI,"__esModule",{value:!0});const t=[kqt().default];return TI.default=t,TI}var Jg={},Ape;function Rqt(){return Ape||(Ape=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.contentVocabulary=Jg.metadataVocabulary=void 0,Jg.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Jg.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Jg}var Dpe;function Nqt(){if(Dpe)return Yk;Dpe=1,Object.defineProperty(Yk,"__esModule",{value:!0});const e=nqt(),t=pqt(),n=Dqt(),r=Iqt(),i=Rqt(),o=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return Yk.default=o,Yk}var SI={},H_={},kpe;function Pqt(){if(kpe)return H_;kpe=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(H_.DiscrError=e={})),H_}var Ipe;function Oqt(){if(Ipe)return SI;Ipe=1,Object.defineProperty(SI,"__esModule",{value:!0});const e=Hn(),t=Pqt(),n=nJ(),r=wM(),i=vr(),s={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const m=c.propertyName;if(typeof m!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const p=u.let("valid",!1),g=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(m)}`);u.if((0,e._)`typeof ${g} == "string"`,()=>v(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:m})),a.ok(p);function v(){const E=w();u.if(!1);for(const _ in E)u.elseIf((0,e._)`${g} === ${_}`),u.assign(p,b(E[_]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:m}),u.endIf()}function b(E){const _=u.name("valid"),T=a.subschema({keyword:"oneOf",schemaProp:E},_);return a.mergeEvaluated(T,e.Name),_}function w(){var E;const _={},T=D(f);let S=!0;for(let O=0;O<h.length;O++){let M=h[O];if(M!=null&&M.$ref&&!(0,i.schemaHasRulesButRef)(M,d.self.RULES)){const L=M.$ref;if(M=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,L),M instanceof n.SchemaEnv&&(M=M.schema),M===void 0)throw new r.default(d.opts.uriResolver,d.baseId,L)}const F=(E=M==null?void 0:M.properties)===null||E===void 0?void 0:E[m];if(typeof F!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${m}"`);S=S&&(T||D(M)),k(F,O)}if(!S)throw new Error(`discriminator: "${m}" must be required`);return _;function D({required:O}){return Array.isArray(O)&&O.includes(m)}function k(O,M){if(O.const)R(O.const,M);else if(O.enum)for(const F of O.enum)R(F,M);else throw new Error(`discriminator: "properties/${m}" must have "const" or "enum"`)}function R(O,M){if(typeof O!="string"||O in _)throw new Error(`discriminator: "${m}" values must be unique strings`);_[O]=M}}}};return SI.default=s,SI}const Fqt="http://json-schema.org/draft-07/schema#",Mqt="http://json-schema.org/draft-07/schema#",$qt="Core schema meta-schema",Lqt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Bqt=["object","boolean"],jqt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},zqt={$schema:Fqt,$id:Mqt,title:$qt,definitions:Lqt,type:Bqt,properties:jqt,default:!0};var Rpe;function Uqt(){return Rpe||(Rpe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=ZHt(),r=Nqt(),i=Oqt(),o=zqt,s=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(o,s):o;this.addMetaSchema(m,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=xM();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Hn();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=tJ();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=wM();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(Vk,Vk.exports)),Vk.exports}var Vqt=Uqt();const iJ=Fl(Vqt),Hqt="#/definitions/StudyConfig",qqt="http://json-schema.org/draft-07/schema#",Wqt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"anyOf":[{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}],"description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),Gqt={$ref:Hqt,$schema:qqt,definitions:Wqt},Yqt="#/definitions/GlobalConfig",Kqt="http://json-schema.org/draft-07/schema#",Xqt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},Qqt={$ref:Yqt,$schema:Kqt,definitions:Xqt},Jqt="#/definitions/LibraryConfig",Zqt="http://json-schema.org/draft-07/schema#",eWt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),tWt={$ref:Jqt,$schema:Zqt,definitions:eWt},OPe=new iJ;OPe.addSchema(tWt);const nWt=OPe.getSchema("#/definitions/LibraryConfig");function FPe(e,t){return Al(e)?e:{...e,components:e.components.map(n=>typeof n=="object"?FPe(n,t):`$${t}.components.${n}`)}}function MPe(e,t,n=[]){return Al(e)?e:{...e,components:(e.components||[]).map(r=>{if(typeof r=="object")return MPe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[o,s]=r.split(i),a=o.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[s];if(!l){const c={message:`Sequence ${s} not found in library ${o}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=FPe(l,a),l}return r})}}function rWt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([o,s])=>{var a;iE(s)&&!((a=i.baseComponents)!=null&&a[s.baseComponent])&&t.push({message:`Base component \`${s.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${o}`,params:{action:"add the base component to the baseComponents object"}})})})}function iWt(e,t){let n=!1,r;try{r=JSON.parse(e),n=nWt(r)}catch{n=!1}const i=[],o=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:o}}async function oWt(e){const t=await(await fetch(`${us}libraries/${e}/config.json`)).text();return iWt(t,e)}async function sWt(e,t,n){const r=e.map(async o=>{const s=await oWt(o);return s.errors&&t.push(...s.errors),s.warnings&&n.push(...s.warnings),[o,s]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([o,s])=>{s.components||delete i[o]}),e.forEach(o=>{i[o]&&(i[o].components=Object.fromEntries(Object.entries(i[o].components).map(([s,a])=>{if(iE(a)){const u=y6({},i[o].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${o}.components.${s}`,u],[`$${o}.co.${s}`,u]]}return[[`$${o}.components.${s}`,a],[`$${o}.co.${s}`,a]]}).reduce((s,[a,u])=>(s.push(a,u),s),[])))}),i}const $Pe=new iJ;$Pe.addSchema(Qqt);const Npe=$Pe.getSchema("#/definitions/GlobalConfig"),LPe=new iJ;LPe.addSchema(Gqt);const Ppe=LPe.getSchema("#/definitions/StudyConfig");function aWt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function uWt(e){const t=JSON.parse(e),n=Npe(t),r=aWt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Npe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function BPe(e,t,n=[]){if(!Al(e)){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,o)=>i===e.id?o:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((o,s)=>o===r?s:null).forEach(o=>{o!==null&&t.splice(o,1)}):BPe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}}function lWt(e,t){const n=[],r=[];rWt(e,n,t),Object.entries(e.components).forEach(([s,a])=>{var u;iE(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const i=oTe(e.sequence);i.forEach(s=>{var a;e.components[s]||n.push({message:(a=e.baseComponents)!=null&&a[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!i.includes(s)&&!s.includes(".se.")&&!s.includes(".sequences.")&&!s.includes(".co.")&&!s.includes(".components.")).forEach(s=>{r.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const o=[];return BPe(e.sequence,o),o.forEach(s=>{n.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function oJ(e){let t=!1,n;try{n=JSON.parse(e),t=Ppe(n)}catch{t=!1}let r=Ppe.errors||[],i=[];if(t&&n){const o=n.importedLibraries||[],s=await sWt(o,r,i);Object.values(s).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=MPe(n.sequence,s,r);const{errors:a,warnings:u}=lWt(n,s);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function cWt(e){const t=await(await fetch(`${us}${e}`)).text();return await oJ(t)}async function sJ(e,t){const n=t.configsList.find(r=>iye(r)===e);if(n){const r=t.configs[n];return await cWt(`${r.path}`)}return null}async function fWt(e){const t={},n=e.configsList.map(async i=>sJ(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,o)=>{t[i]=r[o]}),t}function dWt({globalConfig:e}){const t=fg(),[n,r]=P.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";P.useEffect(()=>{if(t!=="__revisit-widget")return sJ(t,e).then(m=>{r(m)}),()=>{};if(e&&t){const m=p=>{p.data.type==="revisitWidget/CONFIG"&&oJ(p.data.payload).then(async g=>{r(g);const v=await vhe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:v},"*")})};return window.addEventListener("message",m),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",m)}}return()=>{}},[e,t]);const[o,s]=P.useState([]),[a,u]=P.useState(null),{storageEngine:l}=Wi(),[c]=Gp(),f=P.useMemo(()=>c.get("participantId"),[c]);P.useEffect(()=>{async function m(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await vhe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,v=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(D=>""),w=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:w.ip},_=await l.initializeParticipantSession(t,v,n,E,f||g),T=await l.getModes(t),S=await lbt(t,n,_.sequence,E,_.answers,T,_.participantId);u(S),s([{element:C.jsx(NHt,{}),children:[{path:"/",element:C.jsx(_Pe,{to:ua(0),replace:!0})},{path:"/:index/:funcIndex?",element:n.errors.length>0?C.jsxs(C.Fragment,{children:[C.jsx(Ui,{order:2,mb:8,children:"Error loading config"}),C.jsx(jI,{issues:n.errors,type:"error"})]}):C.jsx(hHt,{})}]}])}m()},[l,n,t,c,f]);const d=Hge(o);let h=null;return i?o.length===0?h=C.jsx(El,{visible:!0}):h=d&&a?C.jsx(lTe.Provider,{value:a,children:C.jsx(Ait,{store:a.store,children:d})}):C.jsx(I0,{}):h=C.jsx(I0,{}),h}function bN({studyIds:e}){const t=Cc(),{studyId:n}=_l(),r=Tc(),i=e.map(s=>({value:s,label:s})).sort((s,a)=>s.label.localeCompare(a.label)),o=r.pathname.includes("analysis");return C.jsx(Br.Header,{p:"md",children:C.jsxs(gd,{mt:-7,align:"center",children:[C.jsx(gd.Col,{span:6,children:C.jsxs(Lt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[C.jsx(eg,{w:40,src:`${us}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),C.jsx(ml,{w:"md"}),C.jsx(Ui,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),C.jsx(gd.Col,{span:6,children:C.jsxs(Lt,{justify:"flex-end",direction:"row",children:[o&&C.jsxs(C.Fragment,{children:[C.jsx(Pw,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:s=>t(`/analysis/stats/${s}`),mr:16}),C.jsx(At,{component:"a",href:`${us}${n}`,target:"_blank",leftSection:C.jsx(Zge,{}),mr:"sm",children:"Go to Study"})]}),C.jsx(tye,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:o?6:void 0}})]})})]})})}function jPe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:o,close:s}]=dU(!1),[a,u]=P.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;nG(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),o()};return C.jsxs(C.Fragment,{children:[C.jsxs(Cr,{style:{gap:n},children:[C.jsx(ui,{label:"Download all participants data as JSON",children:C.jsx(At,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:C.jsx(lze,{})})}),C.jsx(ui,{label:"Download all participants data as a tidy CSV",children:C.jsx(At,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:C.jsx(nye,{})})})]}),i&&a.length>0&&C.jsx(Twt,{opened:i,close:s,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function hWt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?C.jsx(tn.Td,{children:C.jsx(Un,{miw:100,children:e.timedOut?C.jsx(Ye,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>C.jsxs(Re,{children:[C.jsxs(Ye,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?C.jsx(Ye,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):C.jsx(Ye,{span:!0,children:n})]},`cell-${t}`))})}):C.jsx(tn.Td,{children:"N/A"})}function Ope({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=bTe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?C.jsxs(tn.Td,{children:[t.toFixed(1)," ","s",n&&C.jsxs(C.Fragment,{children:[C.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):C.jsx(tn.Td,{children:"N/A"})}function pWt(e){const{metaData:t}=e;return C.jsx(tn.Td,{children:C.jsx(UV,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:C.jsxs(Un,{gap:"xs",children:[C.jsxs(Re,{children:["IP:"," ",t.ip]}),C.jsxs(Re,{children:["Language:"," ",t.language]}),C.jsxs(Re,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),C.jsxs(Re,{children:["User Agent:"," ",t.userAgent]})]})})})}function mWt({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Wi(),{studyId:i}=_l(),{user:o}=Qw(),s=async(E,_)=>{if(r&&i)if(o.isAdmin){const T=_===""?"Rejected by admin":_;await r.rejectParticipant(i,E,T),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=P.useState([]),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,m]=P.useState(""),p=async()=>{c(!0),d(!1);const E=a.map(async _=>await s(_,h));await Promise.all(E),u([]),await n(),c(!1)};function g(E){E==="all"?a.length===e.length?u([]):u(e.map(_=>_.participantId)):a.includes(E)?u(a.filter(_=>_!==E)):u([...a,E])}const v=uTe(t.sequence),b=[C.jsx(tn.Th,{children:C.jsx(Lt,{justify:"center",children:C.jsx(ca,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),C.jsx(tn.Th,{children:"ID"},"ID"),C.jsx(tn.Th,{children:"Status"},"status"),C.jsx(tn.Th,{children:"Tags"},"tags"),C.jsx(tn.Th,{children:"Meta"},"meta"),...v.flatMap(E=>[C.jsx(tn.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),C.jsxs(tn.Th,{children:[C.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)]),C.jsx(tn.Th,{children:"Total Duration (clean)"},"total-duration")],w=e.map(E=>C.jsxs(tn.Tr,{children:[C.jsx(tn.Td,{children:C.jsx(Lt,{justify:"center",children:C.jsx(ca,{mb:-4,checked:a.includes(E.participantId),onChange:()=>g(E.participantId)})})}),C.jsx(tn.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),C.jsx(tn.Td,{children:C.jsxs(Lt,{direction:"column",miw:100,children:[C.jsxs(Lt,{direction:"row",align:"center",children:[E.rejected?C.jsx(ui,{label:"Rejected",children:C.jsx(WC,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?C.jsx(ui,{label:"Completed",children:C.jsx(Q4,{size:16,color:"teal",style:{marginBottom:-3}})}):C.jsx(ui,{label:"In Progress",children:C.jsx(eye,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&C.jsxs(Ye,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([_,T])=>T.endTime!==-1&&T.endTime!==void 0).length/(wf(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&C.jsx(Ye,{mt:5,fz:10,children:E.rejected.reason})]})}),C.jsx(tn.Td,{children:C.jsx(Lt,{direction:"column",miw:100,children:(E.participantTags||[]).map(_=>C.jsxs(Ye,{fz:10,children:["-"," ",_]},`tag-${_}`))})}),E.metadata?C.jsx(pWt,{metaData:E.metadata}):C.jsx(tn.Td,{children:"N/A"}),v.map(_=>{const T=YW(E.sequence,_.orderPath),S=T&&Object.entries(E.answers).sort((D,k)=>{const R=parseInt(D[0].slice(D[0].lastIndexOf("_")+1),10),O=parseInt(k[0].slice(k[0].lastIndexOf("_")+1),10);return R-O}).filter(([D])=>{const k=D.slice(0,D.lastIndexOf("_")),R=parseInt(D.slice(D.lastIndexOf("_")+1),10);return k===_.componentName&&R<=T[0].lastIndex&&R>=T[0].firstIndex});return S!==null&&S.length>=_.timesSeenInBlock+1&&S[_.timesSeenInBlock][1].endTime!==-1?C.jsxs(ur.Fragment,{children:[C.jsx(hWt,{cellData:S[_.timesSeenInBlock][1]}),C.jsx(Ope,{cellData:S[_.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${_.componentName}-${_.timesSeenInBlock}`):C.jsxs(ur.Fragment,{children:[C.jsx(tn.Td,{children:"N/A"}),C.jsx(tn.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${_.componentName}-${_.timesSeenInBlock}`)}),C.jsx(Ope,{cellData:{startTime:Math.min(...Object.values(E.answers).filter(_=>_.endTime!==-1&&_.endTime!==void 0).map(_=>_.startTime)),endTime:Math.max(...Object.values(E.answers).filter(_=>_.endTime!==-1&&_.endTime!==void 0).map(_=>_.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(E.answers).flatMap(_=>_.windowEvents),timedOut:!1}},`cell-${E.participantId}-total-duration`)]},E.participantId));return e.length>0?C.jsxs(C.Fragment,{children:[C.jsx(El,{visible:l,overlayProps:{blur:2}}),C.jsxs(Lt,{justify:"space-between",mb:8,p:8,children:[C.jsx(Cr,{children:C.jsx(Pw,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:C.jsx(Tze,{size:14}),onChange:E=>E&&g(E)})}),C.jsxs(Cr,{children:[C.jsx(jPe,{visibleParticipants:e,studyId:i||""}),C.jsxs(At,{disabled:a.length===0||!o.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),C.jsx(Lt,{direction:"column",style:{width:"100%",overflow:"auto"},children:C.jsxs(tn,{striped:!0,withTableBorder:!0,children:[C.jsx(tn.Thead,{children:C.jsx(tn.Tr,{children:b})}),C.jsx(tn.Tbody,{children:w})]})}),C.jsxs(Ni,{opened:f,onClose:()=>d(!1),title:C.jsxs(Ye,{children:["Reject Participants (",a.length,")"]}),children:[C.jsx(Kh,{label:"Please enter the reason for rejection.",onChange:E=>m(E.target.value)}),C.jsxs(Lt,{mt:"sm",justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),m("")},children:"Cancel"}),C.jsx(At,{color:"red",onClick:()=>p(),children:"Reject Participants"})]})]})]}):C.jsxs(C.Fragment,{children:[C.jsx(ml,{h:"xl"}),C.jsx(Lt,{justify:"center",align:"center",children:C.jsx(Ye,{children:"No data available"})})]})}function gWt({studyId:e,refresh:t}){const[n,r]=P.useState(!1),[i,o]=P.useState(!1),[s,a]=P.useState(!1),[u,l]=P.useState(!1),[c,f]=P.useState(""),[d,h]=P.useState([]),[m,p]=P.useState(""),[g,v]=P.useState(""),[b,w]=P.useState(!1),[E,_]=P.useState(!1),{storageEngine:T}=Wi(),S=T,D=P.useCallback(async()=>{_(!0);const U=await S.getSnapshots(e);h(U),_(!1)},[S,e]);P.useEffect(()=>{D()},[D]);const k=async(U,...B)=>{w(!0);const q=await U(...B);q.status==="SUCCESS"?(D(),w(!1),await t(),q.notifications&&q.notifications.forEach(z=>{rC(z)})):(w(!1),rC({title:q.error.title,message:q.error.message,color:"red"}))},R=async()=>{await k(S.createSnapshot.bind(S),e,!1)},O=async()=>{p(""),r(!1),await k(S.createSnapshot.bind(S),e,!0)},M=async()=>{a(!1),await k(S.renameSnapshot.bind(S),c,g)},F=async U=>{await k(S.restoreSnapshot.bind(S),e,U)},L=async()=>{p(""),o(!1),await k(S.removeSnapshotOrLive.bind(S),c,!0)},H=async()=>{p(""),l(!1),await k(S.removeSnapshotOrLive.bind(S),e,!0)},V=()=>Ute({title:"Create a Snapshot",children:C.jsx(Ye,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>R()}),Q=U=>Ute({title:"Restore Snapshot",children:C.jsx(Ye,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>F(U)}),K=U=>{const B=/-snapshot-(.+)$/,q=U.match(B);return q&&q[1]?q[1].replace("T"," "):null},Z=async U=>{const B=U.slice(U.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(B)};return C.jsxs(C.Fragment,{children:[C.jsx(El,{visible:b}),C.jsxs(Lt,{justify:"space-between",align:"center",children:[C.jsxs(Re,{style:{width:"70%"},children:[C.jsx(Ui,{order:5,children:"Create a Snapshot"}),C.jsxs(Ye,{children:["This will create a snapshot of the live"," ",C.jsx(Ye,{span:!0,fw:700,children:e})," ","database. It will"," ",C.jsx(Ye,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),C.jsx(ui,{label:"Create a snapshot",children:C.jsx(At,{onClick:V,children:"Snapshot"})})]}),C.jsx(ml,{h:"lg"}),C.jsxs(Lt,{justify:"space-between",align:"center",children:[C.jsxs(Re,{style:{width:"70%"},children:[C.jsx(Ui,{order:5,children:"Archive Data"}),C.jsxs(Ye,{children:["This will create a snapshot of the live"," ",C.jsx(Ye,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),C.jsx(ui,{label:"Snapshot and Delete Data",children:C.jsx(At,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),C.jsx(ml,{h:"lg"}),C.jsxs(Lt,{justify:"space-between",align:"center",children:[C.jsxs(Re,{style:{width:"70%"},children:[C.jsx(Ui,{order:5,children:"Delete Data"}),C.jsxs(Ye,{children:["This will delete the live"," ",C.jsx(Ye,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),C.jsx(ui,{label:"Delete Data",children:C.jsx(At,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),C.jsx(ml,{h:"xl"}),C.jsxs(Lt,{direction:"column",children:[C.jsx(Lt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:C.jsx(Ui,{order:5,children:"Snapshots"})}),C.jsxs(Re,{style:{position:"relative"},children:[C.jsx(El,{visible:E}),d.length>0?C.jsxs(tn,{children:[C.jsx(tn.Thead,{children:C.jsxs(tn.Tr,{children:[C.jsx(tn.Th,{children:"Snapshot Name"}),C.jsx(tn.Th,{children:"Date Created"}),C.jsx(tn.Th,{children:"Actions"})]})}),C.jsx(tn.Tbody,{children:d.map(U=>C.jsxs(tn.Tr,{children:[C.jsx(tn.Td,{children:U.alternateName}),C.jsx(tn.Td,{children:K(U.originalName)}),C.jsx(tn.Td,{children:C.jsxs(Lt,{children:[C.jsx(ui,{label:"Rename",children:C.jsx(At,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(U.originalName)},children:C.jsx(bze,{})})}),C.jsx(ui,{label:"Restore Snapshot",children:C.jsx(At,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{Q(U.originalName)},children:C.jsx(Eze,{})})}),C.jsx(ui,{label:"Delete Snapshot",children:C.jsx(At,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{o(!0),f(U.originalName)},children:C.jsx(rye,{})})}),C.jsx(jPe,{visibleParticipants:()=>Z(U.originalName),studyId:e,gap:"10px",fileName:U.alternateName})]})})]},U.originalName))})]}):C.jsx(Ye,{children:"No snapshots."})]})]}),C.jsxs(Ni,{opened:n,onClose:()=>{r(!1),p("")},title:C.jsx(Ye,{children:"Archive Data"}),children:[C.jsx(Ye,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),C.jsx(Kh,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:U=>p(U.target.value)}),C.jsxs(Lt,{mt:"sm",justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),p("")},children:"Cancel"}),C.jsx(At,{color:"red",onClick:O,disabled:m!==e,children:"Archive"})]})]}),C.jsxs(Ni,{opened:i,onClose:()=>{o(!1),p("")},title:C.jsx(Ye,{children:"Delete Snapshot"}),children:[C.jsxs(Ye,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",C.jsx(Ye,{span:!0,fw:700,children:"irreversible"}),"."]}),C.jsx(Kh,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:U=>p(U.target.value)}),C.jsxs(Lt,{mt:"sm",justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"dark",onClick:()=>{o(!1),p("")},children:"Cancel"}),C.jsx(At,{color:"red",onClick:L,disabled:m!==e,children:"Delete"})]})]}),C.jsxs(Ni,{opened:s,onClose:()=>{a(!1),v("")},title:C.jsx(Ye,{children:"Rename Snapshot"}),children:[C.jsx(Kh,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:U=>v(U.target.value)}),C.jsxs(Lt,{mt:"sm",justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),v("")},children:"Cancel"}),C.jsx(At,{color:"green",onClick:M,disabled:!g||g.length===0,children:"Rename"})]})]}),C.jsxs(Ni,{opened:u,onClose:()=>{l(!1),p("")},title:C.jsx(Ye,{children:"Delete Live Data"}),children:[C.jsxs(Ye,{mb:"sm",children:["This will permanently delete the live"," ",C.jsx(Ye,{span:!0,fw:700,children:e})," ","data. This action is"," ",C.jsx(Ye,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),C.jsx(Kh,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:U=>p(U.target.value)}),C.jsxs(Lt,{mt:"sm",justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),p("")},children:"Cancel"}),C.jsx(At,{color:"red",onClick:H,disabled:m!==e,children:"Delete"})]})]})]})}function yWt({studyId:e}){const{storageEngine:t}=Wi(),[n,r]=P.useState(!1),[i,o]=P.useState(!1),[s,a]=P.useState(!1),[u,l]=P.useState(!1);P.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);o(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?o(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&C.jsxs(Un,{children:[C.jsx(Ry,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),C.jsx(Ry,{label:"Study Navigator Enabled",checked:s,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),C.jsx(Ry,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function vWt({studyId:e,refresh:t}){const{storageEngine:n}=Wi();return C.jsx(Cp,{children:C.jsxs(ia,{multiple:!0,variant:"contained",children:[C.jsxs(ia.Item,{value:"ReVISit Modes",children:[C.jsx(ia.Control,{children:C.jsx(Ui,{order:5,children:"ReVISit Modes"})}),C.jsx(ia.Panel,{children:C.jsx(yWt,{studyId:e})})]},"modes"),C.jsxs(ia.Item,{value:"Data Management",children:[C.jsx(ia.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:C.jsx(Ui,{order:5,children:"Data Management"})}),C.jsx(ia.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&C.jsx(gWt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function bWt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:o}]=dU(!0),[s,a]=PC(),u=P.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=P.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=P.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(p=>Object.entries(p.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(p=>p.filter(([g,v])=>v.endTime!==-1).map(([g,v])=>(v.endTime-v.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,m;return e.type==="numerical"&&(h=e.min,m=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),m=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,m=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&m!==void 0?{domain:[h,m]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return C.jsxs(ww,{p:"lg",withBorder:!0,ref:s,children:[C.jsxs(Lt,{direction:"row",justify:"space-between",onClick:o,children:[C.jsxs(Lt,{align:"center",children:[e.type==="metadata"&&C.jsx(uze,{size:20}),e.type==="numerical"&&C.jsx(yze,{size:20}),(e.type==="shortText"||e.type==="longText")&&C.jsx(oze,{size:20}),e.type==="likert"&&C.jsx(fze,{size:20}),e.type==="dropdown"&&C.jsx(Cze,{size:20}),e.type==="slider"&&C.jsx(Zje,{size:20}),e.type==="radio"&&C.jsx(wze,{size:20}),e.type==="checkbox"&&C.jsx(Sze,{size:20}),e.type==="reactive"&&C.jsx(pze,{size:20}),C.jsx(Ui,{order:5,ml:4,children:e.id})]}),C.jsx(aze,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),C.jsxs(w4,{in:i,mah:400,children:[C.jsx(Re,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:C.jsx(I1,{})}),C.jsxs(jV,{cols:2,h:360,children:[C.jsx(wp,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?C.jsx($de,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):C.jsxs(Lt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&C.jsx(L2,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&C.jsxs(C.Fragment,{children:[C.jsx(Ye,{fw:700,children:"Response Values: "}),u.map((f,d)=>C.jsx(Lt,{align:"center",gap:"xs",children:C.jsx(Ye,{children:f[e.id]})},d))]})]})}),C.jsx(wp,{mih:200,children:e.type==="metadata"?C.jsx($de,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):C.jsxs(C.Fragment,{children:[C.jsx(Ye,{fw:700,children:"Response Specification: "}),C.jsx(L2,{block:!0,children:JSON.stringify(e,null,2)}),C.jsx("br",{}),l&&C.jsxs(C.Fragment,{children:[C.jsx(Ye,{fw:700,children:"Correct Answer: "}),C.jsx(L2,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function xWt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&JW(t.components[n],t),i=P.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?C.jsx(Lt,{w:"100%",direction:"column",gap:"xs",children:i.map(o=>C.jsx(bWt,{response:o,participantData:e,trialId:n,trialConfig:r},o.id))}):C.jsx(Lt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:C.jsx(Ye,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function wWt({studyConfig:e,visibleParticipants:t}){const n=P.useMemo(()=>{let i=pp(e.sequence);return i=KW(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=_l();return C.jsx(ww,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?C.jsx(Lt,{justify:"center",align:"center",pt:"lg",pb:"md",children:C.jsx(Ye,{children:"No data available."})}):C.jsxs(Lt,{direction:"row",children:[C.jsx(Re,{w:340,children:C.jsx(f4,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),C.jsx(I1,{orientation:"vertical",mx:"md"}),C.jsx(xWt,{participantData:t,studyConfig:e,trialId:r})]})})}function EWt({xScale:e,answer:t,height:n,labelHeight:r=0}){return C.jsx("g",{children:C.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const AI=3,vb=25,DI=25,kI=20,Fpe=1,F9=15;function _Wt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:o,labelHeight:s=0,isCorrect:a,hasCorrect:u}){const[l,c]=P.useState(!1),[f,{width:d}]=PC();return C.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[C.jsx("rect",{opacity:1,fill:l||o?"cornflowerblue":"lightgray",x:e(t.startTime)+Fpe,width:e(t.endTime)-e(t.startTime)-Fpe*2,y:r-vb,height:vb}),C.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-AI,width:d+AI*2+(u?F9:0),y:r-vb-DI-s,height:kI,fill:"whitesmoke"}),C.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-AI,x2:d+e(t.startTime)+AI+(u?F9:0),y1:r-vb-DI+kI-s,y2:r-vb-DI+kI-s}),C.jsx("foreignObject",{x:e(t.startTime),width:d+(u?F9:0),y:r-vb-DI-s,height:kI,children:C.jsx(Ir,{style:{width:"fit-content"},children:C.jsxs(Cr,{wrap:"nowrap",gap:2,children:[C.jsx(Ye,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?C.jsx(Q4,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):C.jsx(WC,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const Mpe=25,TWt=8,M9={left:20,right:20};function CWt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:o,maxLength:s}){const a=P.useCallback(g=>{const v=g.split("_"),b=+v[v.length-1];window.open(`${us}${i}/${ua(b)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=P.useMemo(()=>{const g=Object.values(e.answers||{}).filter(w=>w.startTime).map(w=>[w.startTime,w.endTime]).flat(),v=Bit(g);return Ud([M9.left,t-M9.left-M9.right]).domain([v[0],s?v[0]+s:v[1]]).clamp(!0)},[s,e.answers,t]),[l,c,f]=P.useMemo(()=>{let g=0;const v=Object.entries(e.answers||{}).filter(_=>!!_[1].startTime).sort((_,T)=>_[1].startTime-T[1].startTime);let b=0,w=0;const E=v.map((_,T)=>{const[S,D]=_,k=T>0?v[T-g-1]:null;k&&k[0].length*(TWt+1)+u(k[1].startTime)>u(D.startTime)?g+=1:g=0;const R=S.split("_"),O=R.slice(0,R.length-1).join("_"),M=o==null?void 0:o.components[O];let F=!0,L=!1;return M&&M.correctAnswer?(M.correctAnswer.forEach(H=>{const{id:V,answer:Q}=H;(!M||!M.correctAnswer||D.answer[V]!==Q)&&(F=!1)}),L=!0):L=!1,L&&(w+=1,F&&(b+=1)),{line:C.jsx(EWt,{labelHeight:g*Mpe,answer:D,height:n,xScale:u},S),label:C.jsx(ui,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:C.jsx(Un,{gap:0,children:Object.entries(D.answer).map(H=>{var Z,U;const[V,Q]=H,K=(U=(Z=M==null?void 0:M.correctAnswer)==null?void 0:Z.find(B=>B.id===V))==null?void 0:U.answer;return C.jsx(Ye,{children:`${V}: ${Q} ${K?`[${K}]`:""}`},V)})}),children:C.jsx("g",{children:C.jsx(_Wt,{isCorrect:F,hasCorrect:L,labelHeight:g*Mpe,isSelected:r===S,setSelectedTask:a,answer:D,height:n,name:S,xScale:u},S)})})}});return[b,w,E]},[e.answers,u,o==null?void 0:o.components,n,r,a]),d=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(v=>v.startTime).sort((v,b)=>v.startTime-b.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=P.useMemo(()=>Object.entries(e.answers||{}).sort((v,b)=>v[1].startTime-b[1].startTime).map(v=>{const[b,w]=v,E=[];let _=[-1,-1],T="visible";if(w.windowEvents)for(let S=0;S<w.windowEvents.length;S+=1)w.windowEvents[S][1]==="visibility"&&(w.windowEvents[S][2]==="hidden"&&T==="visible"?(_=[w.windowEvents[S][0],-1],T="hidden"):w.windowEvents[S][2]==="visible"&&T==="hidden"&&(_[1]=w.windowEvents[S][0],E.push(_),_=[-1,-1],T="visible"));return E.map((S,D)=>C.jsx(ui,{withinPortal:!0,label:"Browsed away",children:C.jsx("rect",{x:u(S[0]),width:u(S[1])-u(S[0]),y:n-5,height:10})},D))}),[u,n,e.answers]),m=P.useMemo(()=>{if(o!=null&&o.uiConfig&&o.uiConfig.participantNameField){const[g,v]=o.uiConfig.participantNameField.split("."),b=Object.keys(e.answers).find(w=>w.startsWith(g));if(b)return`${e.answers[b].answer[v]}`}return null},[e.answers,o]),p=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,w)=>b.startTime-w.startTime),v=new Date(g[g.length-1].endTime);return e.completed?`${v.toLocaleDateString()} ${v.toLocaleTimeString()}`:""},[e]);return C.jsx(Ir,{children:C.jsxs(Un,{gap:15,style:{width:"100%"},children:[C.jsx(I1,{size:"md"}),C.jsxs(Cr,{justify:"space-between",children:[C.jsxs(Cr,{justify:"center",children:[e.participantIndex?C.jsx(Ye,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,C.jsx(Ye,{size:"md",fw:700,children:m||e.participantId}),C.jsx(Ye,{size:"md",children:p}),e.completed?null:C.jsx(Ye,{size:"xl",c:"red",children:"Not completed"}),C.jsxs(Cr,{gap:10,children:[C.jsx(lf,{variant:"light",size:"lg",color:"green",leftSection:C.jsx(Q4,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),C.jsx(lf,{variant:"light",size:"lg",color:"red",leftSection:C.jsx(WC,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),C.jsx(lf,{variant:"light",size:"lg",color:"gray",leftSection:C.jsx(hze,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:aU(d)})]})]}),C.jsx(At,{rightSection:C.jsx(dze,{size:14}),component:"a",href:`${us}${i}/${ua(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?C.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(g=>g.line),f.map(g=>g.label),h]}):null]})})}function SWt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=_l(),[r,{width:i}]=PC(),[o,s]=P.useState(!1),a=P.useMemo(()=>o?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[o,e]);return C.jsxs(Un,{ref:r,style:{width:"100%"},children:[C.jsx(Cr,{children:C.jsx(Ry,{checked:o,label:"Scale by time",onChange:u=>s(u.currentTarget.checked)})}),e.map(u=>C.jsx(CWt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function AWt({globalConfig:e}){const{studyId:t}=_l(),[n,r]=P.useState([]),[i,o]=P.useState(void 0),[s,a]=P.useState(!1),{storageEngine:u}=Wi(),l=Cc(),{tab:c}=_l(),{user:f}=Qw();P.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const w=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&u){const _=await oJ(E.data.payload);o(_)}};return window.addEventListener("message",w),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",w)}}return sJ(t,e).then(w=>{w&&o(w)}),()=>{}},[t,e,u]);const d=P.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const w=await u.getAllParticipantsData();r(w),a(!1)}},[u,t,i]);P.useEffect(()=>{d()},[e,u,t,d]);const[h,m]=P.useState([]),[p,g,v]=P.useMemo(()=>{const w=n.filter(T=>!T.rejected&&T.completed),E=n.filter(T=>!T.rejected&&!T.completed),_=n.filter(T=>T.rejected);return m([...w,...E,..._]),[w,E,_]},[n]),b=P.useCallback(w=>{const E=[];w.includes("completed")&&E.push(...p),w.includes("inprogress")&&E.push(...g),w.includes("rejected")&&E.push(...v),m(E)},[p,g,v]);return C.jsxs(C.Fragment,{children:[C.jsx(bN,{studyIds:e.configsList}),C.jsx(Br.Main,{children:C.jsxs(Cp,{fluid:!0,style:{height:"100%",position:"relative"},children:[C.jsx(El,{visible:s}),C.jsxs(Lt,{direction:"row",align:"center",justify:"space-between",children:[C.jsx(Ui,{order:5,children:t}),C.jsxs(Lt,{direction:"row",align:"center",children:[C.jsx(Ye,{mt:-2,size:"sm",children:"Participants: "}),C.jsx(ca.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:C.jsxs(Cr,{children:[C.jsx(ca,{value:"completed",label:"Completed"}),C.jsx(ca,{value:"inprogress",label:"In Progress"}),C.jsx(ca,{value:"rejected",label:"Rejected"})]})})]})]}),C.jsx(ml,{h:"xs"}),C.jsxs(Xn,{variant:"outline",value:c,onChange:w=>l(`/analysis/stats/${t}/${w}`),style:{height:"100%"},children:[C.jsxs(Xn.List,{children:[C.jsx(Xn.Tab,{value:"table",leftSection:C.jsx(Aze,{size:16}),children:"Table View"}),C.jsx(Xn.Tab,{value:"stats",leftSection:C.jsx(sze,{size:16}),children:"Trial Stats"}),C.jsx(Xn.Tab,{value:"replay",leftSection:C.jsx(xze,{size:16}),children:"Participant Replay"}),C.jsx(Xn.Tab,{value:"manage",leftSection:C.jsx(tye,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),C.jsx(Xn.Panel,{value:"table",pt:"xs",children:i&&C.jsx(mWt,{visibleParticipants:h,studyConfig:i,refresh:d})}),C.jsx(Xn.Panel,{value:"stats",pt:"xs",children:i&&C.jsx(wWt,{studyConfig:i,visibleParticipants:h})}),C.jsx(Xn.Panel,{value:"replay",pt:"xs",children:C.jsx(SWt,{visibleParticipants:h,studyConfig:i})}),C.jsx(Xn.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?C.jsx(vWt,{studyId:t,refresh:d}):C.jsx(Cp,{mt:20,children:C.jsx(ap,{title:"Unauthorized Access",variant:"light",color:"red",icon:C.jsx(uH,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function $pe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:o}=Qw(),{storageEngine:s}=Wi(),[a,u]=P.useState(!1),l=_l();return P.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||o()}catch(f){o(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!s?C.jsx(El,{visible:r.determiningStatus||!(s!=null&&s.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?C.jsx(rH,{to:"/login"}):C.jsx(C.Fragment,{children:e})}async function zPe(e,t){if(e instanceof tc){t(!0);const n=new Hh,r=JN();try{await hrt(r,n,mxe)}catch(i){rC({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function DWt(){const{user:e}=Qw(),[t,n]=P.useState(!1),{storageEngine:r}=Wi();return P.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&rC({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?C.jsx(rH,{to:"/"}):C.jsx(Cp,{children:C.jsx(kw,{padding:"lg",children:C.jsxs(Lt,{align:"center",direction:"column",justify:"center",children:[C.jsx(eg,{maw:200,mt:50,mb:100,src:`${us}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),C.jsxs(C.Fragment,{children:[C.jsx(Ye,{mb:20,children:"To access admin settings, please sign in using your Google account."}),C.jsx(At,{onClick:()=>zPe(r,n),leftSection:C.jsx(Dze,{}),variant:"filled",children:"Sign In With Google"})]}),C.jsx(El,{visible:t})]})})})}function kWt(){const{user:e,triggerAuth:t,logout:n}=Qw(),{storageEngine:r}=Wi(),[i,o]=P.useState(!1),[s,a]=P.useState([]),[u,l]=P.useState(!1),[c,f]=P.useState(!1),[d,h]=P.useState(!1),[m,p]=P.useState(!1),[g,v]=P.useState(!1),[b,w]=P.useState(""),[E,_]=P.useState(null),T=pTe({initialValues:{email:""},validate:{email:Uxt("Invalid email")}});P.useEffect(()=>{(async()=>{if(l(!0),r instanceof tc){const L=await(r==null?void 0:r.getUserManagementData("authentication"));o((L==null?void 0:L.isEnabled)||!1);const H=await(r==null?void 0:r.getUserManagementData("adminUsers"));H&&H.adminUsersList&&a(H==null?void 0:H.adminUsersList.map(V=>V.email))}else o(!1);l(!1)})()},[r]);const S=async()=>{if(l(!0),r instanceof tc){const F=await zPe(r,l);F&&F.email?(_({email:F.email,uid:F.uid}),p(!0)):v(!0)}l(!1)},D=async F=>{l(!0),r instanceof tc&&F&&(await r.changeAuth(!0),await r.addAdminUser(F),a([F.email]),o(!0),t()),p(!1),l(!1)},k=async()=>{if(l(!0),r instanceof tc){await r.addAdminUser({email:T.values.email,uid:null});const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(L=>L.email))||[])}l(!1),f(!1),T.setValues({email:""})},R=F=>{h(!0),w(F)},O=async()=>{if(l(!0),r instanceof tc){await r.removeAdminUser(b);const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(L=>L.email))||[])}h(!1),l(!1)},M=P.useMemo(()=>r instanceof tc,[r]);return C.jsxs(C.Fragment,{children:[C.jsx(Cp,{children:C.jsxs(kw,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[C.jsx(Ui,{mb:20,order:3,children:"Authentication"}),i?C.jsx(Lt,{children:C.jsx(Ye,{children:"Authentication is enabled."})}):C.jsxs(Lt,{justify:"space-between",children:[C.jsx(Re,{children:C.jsx(Ye,{children:"Authentication is currently disabled."})}),C.jsx(ui,{label:"You can only enable auth when using Firebase",disabled:M,children:C.jsx(At,{onClick:F=>M?S():F.preventDefault(),color:"green","data-disabled":M?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?C.jsxs(Lt,{mt:40,direction:"column",children:[C.jsxs(Lt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[C.jsx(Ui,{order:6,children:"Enabled Users"}),C.jsx(lH,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),s.length>0?s.map(F=>{var L;return C.jsxs(Lt,{justify:"space-between",mb:10,children:[C.jsx(Ye,{children:F}),F===((L=e.user)==null?void 0:L.email)?C.jsx(Ye,{color:"blue",size:"xs",children:"You"}):C.jsx(Q0,{variant:"subtle",onClick:()=>R(F),children:C.jsx(rye,{color:"red"})})]},F)}):null,C.jsx(Lt,{direction:"row",justify:"left",children:C.jsx(At,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),C.jsx(Ni,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:C.jsxs(Re,{component:"form",onSubmit:T.onSubmit(()=>k()),children:[C.jsx(Kh,{leftSection:C.jsx(nze,{}),placeholder:"User Gmail Account",...T.getInputProps("email")}),C.jsxs(Lt,{mt:30,justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),C.jsx(At,{type:"submit",children:"Save"})]})]})}),C.jsxs(Ni,{opened:d,size:"large",onClose:()=>h(!1),title:C.jsxs(Ye,{fw:700,children:["Remove",b,"?"]}),children:[C.jsxs(Ye,{mt:40,children:["Are you sure you want to remove",C.jsx("b",{children:b})," ","as an administrator?"]}),C.jsxs(Lt,{mt:40,justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),C.jsx(At,{onClick:()=>O(),children:"Yes, I'm sure."})]})]}),C.jsxs(Ni,{opened:m,size:"md",onClose:()=>p(!1),title:C.jsx(Ye,{fw:700,children:"Enable Authentication?"}),children:[C.jsxs(Ye,{mt:40,children:["User"," ",C.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),C.jsxs(Lt,{mt:40,justify:"right",children:[C.jsx(At,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),C.jsx(At,{onClick:()=>D(E),children:"Yes, I'm sure."})]})]}),C.jsxs(Ni,{opened:g,size:"md",onClose:()=>v(!1),title:C.jsx(Ye,{fw:700,children:"An Error Occurred."}),children:[C.jsxs(Ye,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",C.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),C.jsx(Lt,{mt:40,justify:"right",children:C.jsx(At,{mr:5,onClick:()=>v(!1),children:"Okay"})})]}),C.jsx(El,{visible:u})]})}class IWt extends gxe{constructor(){super("localStorage");ka(this,"studyDatabase");ka(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Sb.createInstance({name:n});const i=await this.getCurrentConfigHash(),o=await e3(JSON.stringify(r));i&&i!==o&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",o);const s=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...s,[o]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,o,s){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await e3(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:o,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Sb.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=ZN();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Sb.createInstance({name:n}),i=[];return await r.iterate((o,s)=>{s!=="config"&&s!=="currentParticipant"&&s!=="sequenceArray"&&s!=="configs"&&s!=="currentConfigHash"&&s!=="modes"&&i.push(o)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=ZN();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const o=await this.studyDatabase.getItem(r);if(!o)throw new Error("Participant not found");if(o.rejected)return;o.rejected={reason:i,timestamp:new Date().getTime()};const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(o.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,o)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await Sb.createInstance({name:n});const o=await this.studyDatabase.getItem("modes");if(!o)throw new Error("Modes not initialized");o[r]=i,this.studyDatabase.setItem("modes",o)}async getModes(n){this.studyDatabase=await Sb.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,o=r.filter(l=>l.rejected).length,s=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:o,inProgress:s,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function RWt(){let e,t=!1;{const n=new tc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new IWt;await n.connect(),e=n}return e}function q_({title:e}){const t=Tc();return P.useEffect(()=>{document.title=e},[t,e]),null}async function NWt(){const t=await(await fetch(`${us}global.json`)).text();return uWt(t)}function PWt(){const[e,t]=P.useState(null),[n,r]=P.useState({});P.useEffect(()=>{async function a(){e&&r(await fWt(e))}a()},[e]),P.useEffect(()=>{e||NWt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:o}=Wi();P.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await RWt();o(u)}a()},[o,i]);const s=async a=>i instanceof tc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?C.jsx(Mje,{basename:us,children:C.jsx(cit,{children:C.jsx(Qje,{children:C.jsxs(fje,{children:[C.jsx(ty,{path:"/",element:C.jsxs(C.Fragment,{children:[C.jsx(q_,{title:"ReVISit | Home"}),C.jsxs(Br,{padding:"md",header:{height:70},children:[C.jsx(bN,{studyIds:e.configsList}),C.jsx(dit,{globalConfig:e,studyConfigs:n})]})]})}),C.jsx(ty,{path:"/:studyId/*",element:C.jsxs(C.Fragment,{children:[C.jsx(q_,{title:"ReVISit | Study"}),C.jsx(dWt,{globalConfig:e})]})}),C.jsx(ty,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:C.jsxs(C.Fragment,{children:[C.jsx(q_,{title:"ReVISit | Analysis"}),C.jsx($pe,{paramToCheck:"studyId",paramCallback:s,children:C.jsx(Br,{padding:"md",header:{height:70},children:C.jsx(AWt,{globalConfig:e})})})]})}),C.jsx(ty,{path:"/analysis/stats/:studyId",element:C.jsx(_Pe,{to:"./table",replace:!0})}),C.jsx(ty,{path:"/settings",element:C.jsxs($pe,{children:[C.jsx(q_,{title:"ReVISit | Settings"}),C.jsxs(Br,{padding:"md",header:{height:70},children:[C.jsx(bN,{studyIds:e.configsList}),C.jsx(Br.Main,{children:C.jsx(kWt,{})})]})]})}),C.jsx(ty,{path:"/login",element:C.jsxs(C.Fragment,{children:[C.jsx(q_,{title:"ReVISit | Login"}),C.jsxs(Br,{padding:"md",header:{height:70},children:[C.jsx(bN,{studyIds:e.configsList}),C.jsx(Br.Main,{children:C.jsx(DWt,{})})]})]})})]})})})}):null}iOe.createRoot(document.getElementById("root")).render(C.jsx(ur.StrictMode,{children:C.jsx(x7e,{children:C.jsxs(sme,{children:[C.jsx(Wp,{}),C.jsx(PWt,{})]})})}));
